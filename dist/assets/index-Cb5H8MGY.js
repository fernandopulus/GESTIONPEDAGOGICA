(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Zke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var TC={exports:{}},Vp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qN;function fH(){if(qN)return Vp;qN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:t,type:n,key:i,ref:a!==void 0?a:null,props:s}}return Vp.Fragment=e,Vp.jsx=r,Vp.jsxs=r,Vp}var KN;function hH(){return KN||(KN=1,TC.exports=fH()),TC.exports}var c=hH(),BC={exports:{}},Hr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $N;function mH(){if($N)return Hr;$N=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(W){return W===null||typeof W!="object"?null:(W=h&&W[h]||W["@@iterator"],typeof W=="function"?W:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function E(W,ie,j){this.props=W,this.context=ie,this.refs=y,this.updater=j||g}E.prototype.isReactComponent={},E.prototype.setState=function(W,ie){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ie,"setState")},E.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function B(){}B.prototype=E.prototype;function k(W,ie,j){this.props=W,this.context=ie,this.refs=y,this.updater=j||g}var L=k.prototype=new B;L.constructor=k,b(L,E.prototype),L.isPureReactComponent=!0;var M=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function C(W,ie,j,X,Z,te){return j=te.ref,{$$typeof:t,type:W,key:ie,ref:j!==void 0?j:null,props:te}}function S(W,ie){return C(W.type,ie,void 0,void 0,void 0,W.props)}function N(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function Q(W){var ie={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(j){return ie[j]})}var D=/\/+/g;function I(W,ie){return typeof W=="object"&&W!==null&&W.key!=null?Q(""+W.key):ie.toString(36)}function O(){}function z(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(O,O):(W.status="pending",W.then(function(ie){W.status==="pending"&&(W.status="fulfilled",W.value=ie)},function(ie){W.status==="pending"&&(W.status="rejected",W.reason=ie)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function re(W,ie,j,X,Z){var te=typeof W;(te==="undefined"||te==="boolean")&&(W=null);var ce=!1;if(W===null)ce=!0;else switch(te){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(W.$$typeof){case t:case e:ce=!0;break;case d:return ce=W._init,re(ce(W._payload),ie,j,X,Z)}}if(ce)return Z=Z(W),ce=X===""?"."+I(W,0):X,M(Z)?(j="",ce!=null&&(j=ce.replace(D,"$&/")+"/"),re(Z,ie,j,"",function(ge){return ge})):Z!=null&&(N(Z)&&(Z=S(Z,j+(Z.key==null||W&&W.key===Z.key?"":(""+Z.key).replace(D,"$&/")+"/")+ce)),ie.push(Z)),1;ce=0;var de=X===""?".":X+":";if(M(W))for(var me=0;me<W.length;me++)X=W[me],te=de+I(X,me),ce+=re(X,ie,j,te,Z);else if(me=m(W),typeof me=="function")for(W=me.call(W),me=0;!(X=W.next()).done;)X=X.value,te=de+I(X,me++),ce+=re(X,ie,j,te,Z);else if(te==="object"){if(typeof W.then=="function")return re(z(W),ie,j,X,Z);throw ie=String(W),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ce}function Y(W,ie,j){if(W==null)return W;var X=[],Z=0;return re(W,X,"","",function(te){return ie.call(j,te,Z++)}),X}function ae(W){if(W._status===-1){var ie=W._result;ie=ie(),ie.then(function(j){(W._status===0||W._status===-1)&&(W._status=1,W._result=j)},function(j){(W._status===0||W._status===-1)&&(W._status=2,W._result=j)}),W._status===-1&&(W._status=0,W._result=ie)}if(W._status===1)return W._result.default;throw W._result}var K=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function G(){}return Hr.Children={map:Y,forEach:function(W,ie,j){Y(W,function(){ie.apply(this,arguments)},j)},count:function(W){var ie=0;return Y(W,function(){ie++}),ie},toArray:function(W){return Y(W,function(ie){return ie})||[]},only:function(W){if(!N(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Hr.Component=E,Hr.Fragment=r,Hr.Profiler=a,Hr.PureComponent=k,Hr.StrictMode=n,Hr.Suspense=l,Hr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Hr.__COMPILER_RUNTIME={__proto__:null,c:function(W){return P.H.useMemoCache(W)}},Hr.cache=function(W){return function(){return W.apply(null,arguments)}},Hr.cloneElement=function(W,ie,j){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var X=b({},W.props),Z=W.key,te=void 0;if(ie!=null)for(ce in ie.ref!==void 0&&(te=void 0),ie.key!==void 0&&(Z=""+ie.key),ie)!R.call(ie,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ie.ref===void 0||(X[ce]=ie[ce]);var ce=arguments.length-2;if(ce===1)X.children=j;else if(1<ce){for(var de=Array(ce),me=0;me<ce;me++)de[me]=arguments[me+2];X.children=de}return C(W.type,Z,void 0,void 0,te,X)},Hr.createContext=function(W){return W={$$typeof:i,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:s,_context:W},W},Hr.createElement=function(W,ie,j){var X,Z={},te=null;if(ie!=null)for(X in ie.key!==void 0&&(te=""+ie.key),ie)R.call(ie,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(Z[X]=ie[X]);var ce=arguments.length-2;if(ce===1)Z.children=j;else if(1<ce){for(var de=Array(ce),me=0;me<ce;me++)de[me]=arguments[me+2];Z.children=de}if(W&&W.defaultProps)for(X in ce=W.defaultProps,ce)Z[X]===void 0&&(Z[X]=ce[X]);return C(W,te,void 0,void 0,null,Z)},Hr.createRef=function(){return{current:null}},Hr.forwardRef=function(W){return{$$typeof:o,render:W}},Hr.isValidElement=N,Hr.lazy=function(W){return{$$typeof:d,_payload:{_status:-1,_result:W},_init:ae}},Hr.memo=function(W,ie){return{$$typeof:u,type:W,compare:ie===void 0?null:ie}},Hr.startTransition=function(W){var ie=P.T,j={};P.T=j;try{var X=W(),Z=P.S;Z!==null&&Z(j,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(G,K)}catch(te){K(te)}finally{P.T=ie}},Hr.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Hr.use=function(W){return P.H.use(W)},Hr.useActionState=function(W,ie,j){return P.H.useActionState(W,ie,j)},Hr.useCallback=function(W,ie){return P.H.useCallback(W,ie)},Hr.useContext=function(W){return P.H.useContext(W)},Hr.useDebugValue=function(){},Hr.useDeferredValue=function(W,ie){return P.H.useDeferredValue(W,ie)},Hr.useEffect=function(W,ie,j){var X=P.H;if(typeof j=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(W,ie)},Hr.useId=function(){return P.H.useId()},Hr.useImperativeHandle=function(W,ie,j){return P.H.useImperativeHandle(W,ie,j)},Hr.useInsertionEffect=function(W,ie){return P.H.useInsertionEffect(W,ie)},Hr.useLayoutEffect=function(W,ie){return P.H.useLayoutEffect(W,ie)},Hr.useMemo=function(W,ie){return P.H.useMemo(W,ie)},Hr.useOptimistic=function(W,ie){return P.H.useOptimistic(W,ie)},Hr.useReducer=function(W,ie,j){return P.H.useReducer(W,ie,j)},Hr.useRef=function(W){return P.H.useRef(W)},Hr.useState=function(W){return P.H.useState(W)},Hr.useSyncExternalStore=function(W,ie,j){return P.H.useSyncExternalStore(W,ie,j)},Hr.useTransition=function(){return P.H.useTransition()},Hr.version="19.1.1",Hr}var WN;function Dx(){return WN||(WN=1,BC.exports=mH()),BC.exports}var ee=Dx();const At=dS(ee);var NC={exports:{}},zp={},kC={exports:{}},IC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XN;function pH(){return XN||(XN=1,function(t){function e(Y,ae){var K=Y.length;Y.push(ae);e:for(;0<K;){var G=K-1>>>1,W=Y[G];if(0<a(W,ae))Y[G]=ae,Y[K]=W,K=G;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ae=Y[0],K=Y.pop();if(K!==ae){Y[0]=K;e:for(var G=0,W=Y.length,ie=W>>>1;G<ie;){var j=2*(G+1)-1,X=Y[j],Z=j+1,te=Y[Z];if(0>a(X,K))Z<W&&0>a(te,X)?(Y[G]=te,Y[Z]=K,G=Z):(Y[G]=X,Y[j]=K,G=j);else if(Z<W&&0>a(te,K))Y[G]=te,Y[Z]=K,G=Z;else break e}}return ae}function a(Y,ae){var K=Y.sortIndex-ae.sortIndex;return K!==0?K:Y.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,h=null,m=3,g=!1,b=!1,y=!1,E=!1,B=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function M(Y){for(var ae=r(u);ae!==null;){if(ae.callback===null)n(u);else if(ae.startTime<=Y)n(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=r(u)}}function P(Y){if(y=!1,M(Y),!b)if(r(l)!==null)b=!0,R||(R=!0,I());else{var ae=r(u);ae!==null&&re(P,ae.startTime-Y)}}var R=!1,C=-1,S=5,N=-1;function Q(){return E?!0:!(t.unstable_now()-N<S)}function D(){if(E=!1,R){var Y=t.unstable_now();N=Y;var ae=!0;try{e:{b=!1,y&&(y=!1,k(C),C=-1),g=!0;var K=m;try{t:{for(M(Y),h=r(l);h!==null&&!(h.expirationTime>Y&&Q());){var G=h.callback;if(typeof G=="function"){h.callback=null,m=h.priorityLevel;var W=G(h.expirationTime<=Y);if(Y=t.unstable_now(),typeof W=="function"){h.callback=W,M(Y),ae=!0;break t}h===r(l)&&n(l),M(Y)}else n(l);h=r(l)}if(h!==null)ae=!0;else{var ie=r(u);ie!==null&&re(P,ie.startTime-Y),ae=!1}}break e}finally{h=null,m=K,g=!1}ae=void 0}}finally{ae?I():R=!1}}}var I;if(typeof L=="function")I=function(){L(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,z=O.port2;O.port1.onmessage=D,I=function(){z.postMessage(null)}}else I=function(){B(D,0)};function re(Y,ae){C=B(function(){Y(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var ae=3;break;default:ae=m}var K=m;m=ae;try{return Y()}finally{m=K}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(Y,ae){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var K=m;m=Y;try{return ae()}finally{m=K}},t.unstable_scheduleCallback=function(Y,ae,K){var G=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?G+K:G):K=G,Y){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=K+W,Y={id:d++,callback:ae,priorityLevel:Y,startTime:K,expirationTime:W,sortIndex:-1},K>G?(Y.sortIndex=K,e(u,Y),r(l)===null&&Y===r(u)&&(y?(k(C),C=-1):y=!0,re(P,K-G))):(Y.sortIndex=W,e(l,Y),b||g||(b=!0,R||(R=!0,I()))),Y},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(Y){var ae=m;return function(){var K=m;m=ae;try{return Y.apply(this,arguments)}finally{m=K}}}}(IC)),IC}var YN;function gH(){return YN||(YN=1,kC.exports=pH()),kC.exports}var FC={exports:{}},Ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JN;function xH(){if(JN)return Ti;JN=1;var t=Dx();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ti.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(l,u,null,d)},Ti.flushSync=function(l){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,l)return l()}finally{i.T=u,n.p=d,n.d.f()}},Ti.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(l,u))},Ti.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Ti.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&n.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ti.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(l)},Ti.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);n.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ti.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(l)},Ti.requestFormReset=function(l){n.d.r(l)},Ti.unstable_batchedUpdates=function(l,u){return l(u)},Ti.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},Ti.useFormStatus=function(){return i.H.useHostTransitionStatus()},Ti.version="19.1.1",Ti}var ZN;function AL(){if(ZN)return FC.exports;ZN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),FC.exports=xH(),FC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ek;function vH(){if(ek)return zp;ek=1;var t=gH(),e=Dx(),r=AL();function n(A){var f="https://react.dev/errors/"+A;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+A+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var f=A,p=A;if(A.alternate)for(;f.return;)f=f.return;else{A=f;do f=A,(f.flags&4098)!==0&&(p=f.return),A=f.return;while(A)}return f.tag===3?p:null}function i(A){if(A.tag===13){var f=A.memoizedState;if(f===null&&(A=A.alternate,A!==null&&(f=A.memoizedState)),f!==null)return f.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function l(A){var f=A.alternate;if(!f){if(f=s(A),f===null)throw Error(n(188));return f!==A?null:A}for(var p=A,w=f;;){var F=p.return;if(F===null)break;var H=F.alternate;if(H===null){if(w=F.return,w!==null){p=w;continue}break}if(F.child===H.child){for(H=F.child;H;){if(H===p)return o(F),A;if(H===w)return o(F),f;H=H.sibling}throw Error(n(188))}if(p.return!==w.return)p=F,w=H;else{for(var le=!1,we=F.child;we;){if(we===p){le=!0,p=F,w=H;break}if(we===w){le=!0,w=F,p=H;break}we=we.sibling}if(!le){for(we=H.child;we;){if(we===p){le=!0,p=H,w=F;break}if(we===w){le=!0,w=H,p=F;break}we=we.sibling}if(!le)throw Error(n(189))}}if(p.alternate!==w)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?A:f}function u(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A;for(A=A.child;A!==null;){if(f=u(A),f!==null)return f;A=A.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),L=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function I(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var O=Symbol.for("react.client.reference");function z(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===O?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case b:return"Fragment";case E:return"Profiler";case y:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList";case N:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case g:return"Portal";case L:return(A.displayName||"Context")+".Provider";case k:return(A._context.displayName||"Context")+".Consumer";case M:var f=A.render;return A=A.displayName,A||(A=f.displayName||f.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case C:return f=A.displayName||null,f!==null?f:z(A.type)||"Memo";case S:f=A._payload,A=A._init;try{return z(A(f))}catch{}}return null}var re=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},G=[],W=-1;function ie(A){return{current:A}}function j(A){0>W||(A.current=G[W],G[W]=null,W--)}function X(A,f){W++,G[W]=A.current,A.current=f}var Z=ie(null),te=ie(null),ce=ie(null),de=ie(null);function me(A,f){switch(X(ce,f),X(te,A),X(Z,null),f.nodeType){case 9:case 11:A=(A=f.documentElement)&&(A=A.namespaceURI)?yN(A):0;break;default:if(A=f.tagName,f=f.namespaceURI)f=yN(f),A=wN(f,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}j(Z),X(Z,A)}function ge(){j(Z),j(te),j(ce)}function Te(A){A.memoizedState!==null&&X(de,A);var f=Z.current,p=wN(f,A.type);f!==p&&(X(te,A),X(Z,p))}function xe(A){te.current===A&&(j(Z),j(te)),de.current===A&&(j(de),Pp._currentValue=K)}var oe=Object.prototype.hasOwnProperty,Me=t.unstable_scheduleCallback,at=t.unstable_cancelCallback,Se=t.unstable_shouldYield,be=t.unstable_requestPaint,je=t.unstable_now,Ke=t.unstable_getCurrentPriorityLevel,st=t.unstable_ImmediatePriority,pt=t.unstable_UserBlockingPriority,St=t.unstable_NormalPriority,ut=t.unstable_LowPriority,kt=t.unstable_IdlePriority,zt=t.log,Yt=t.unstable_setDisableYieldValue,It=null,Dt=null;function Wt(A){if(typeof zt=="function"&&Yt(A),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(It,A)}catch{}}var Lt=Math.clz32?Math.clz32:wr,Rt=Math.log,xt=Math.LN2;function wr(A){return A>>>=0,A===0?32:31-(Rt(A)/xt|0)|0}var Jt=256,dn=4194304;function gr(A){var f=A&42;if(f!==0)return f;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Ur(A,f,p){var w=A.pendingLanes;if(w===0)return 0;var F=0,H=A.suspendedLanes,le=A.pingedLanes;A=A.warmLanes;var we=w&134217727;return we!==0?(w=we&~H,w!==0?F=gr(w):(le&=we,le!==0?F=gr(le):p||(p=we&~A,p!==0&&(F=gr(p))))):(we=w&~H,we!==0?F=gr(we):le!==0?F=gr(le):p||(p=w&~A,p!==0&&(F=gr(p)))),F===0?0:f!==0&&f!==F&&(f&H)===0&&(H=F&-F,p=f&-f,H>=p||H===32&&(p&4194048)!==0)?f:F}function Dn(A,f){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&f)===0}function Fr(A,f){switch(A){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ds(){var A=Jt;return Jt<<=1,(Jt&4194048)===0&&(Jt=256),A}function nn(){var A=dn;return dn<<=1,(dn&62914560)===0&&(dn=4194304),A}function na(A){for(var f=[],p=0;31>p;p++)f.push(A);return f}function pa(A,f){A.pendingLanes|=f,f!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Pr(A,f,p,w,F,H){var le=A.pendingLanes;A.pendingLanes=p,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=p,A.entangledLanes&=p,A.errorRecoveryDisabledLanes&=p,A.shellSuspendCounter=0;var we=A.entanglements,De=A.expirationTimes,et=A.hiddenUpdates;for(p=le&~p;0<p;){var dt=31-Lt(p),wt=1<<dt;we[dt]=0,De[dt]=-1;var rt=et[dt];if(rt!==null)for(et[dt]=null,dt=0;dt<rt.length;dt++){var nt=rt[dt];nt!==null&&(nt.lane&=-536870913)}p&=~wt}w!==0&&nr(A,w,0),H!==0&&F===0&&A.tag!==0&&(A.suspendedLanes|=H&~(le&~f))}function nr(A,f,p){A.pendingLanes|=f,A.suspendedLanes&=~f;var w=31-Lt(f);A.entangledLanes|=f,A.entanglements[w]=A.entanglements[w]|1073741824|p&4194090}function zr(A,f){var p=A.entangledLanes|=f;for(A=A.entanglements;p;){var w=31-Lt(p),F=1<<w;F&f|A[w]&f&&(A[w]|=f),p&=~F}}function fs(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Wn(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Ea(){var A=ae.p;return A!==0?A:(A=window.event,A===void 0?32:ON(A.type))}function Bs(A,f){var p=ae.p;try{return ae.p=A,f()}finally{ae.p=p}}var Gt=Math.random().toString(36).slice(2),fn="__reactFiber$"+Gt,an="__reactProps$"+Gt,Rn="__reactContainer$"+Gt,jn="__reactEvents$"+Gt,Xn="__reactListeners$"+Gt,fe="__reactHandles$"+Gt,ke="__reactResources$"+Gt,Ee="__reactMarker$"+Gt;function _e(A){delete A[fn],delete A[an],delete A[jn],delete A[Xn],delete A[fe]}function Be(A){var f=A[fn];if(f)return f;for(var p=A.parentNode;p;){if(f=p[Rn]||p[fn]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(A=_N(A);A!==null;){if(p=A[fn])return p;A=_N(A)}return f}A=p,p=A.parentNode}return null}function Ie(A){if(A=A[fn]||A[Rn]){var f=A.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return A}return null}function qe(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A.stateNode;throw Error(n(33))}function tt(A){var f=A[ke];return f||(f=A[ke]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function He(A){A[Ee]=!0}var We=new Set,Je={};function yt(A,f){Nt(A,f),Nt(A+"Capture",f)}function Nt(A,f){for(Je[A]=f,A=0;A<f.length;A++)We.add(f[A])}var Ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bt={},Ut={};function dr(A){return oe.call(Ut,A)?!0:oe.call(Bt,A)?!1:Ot.test(A)?Ut[A]=!0:(Bt[A]=!0,!1)}function jr(A,f,p){if(dr(f))if(p===null)A.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":A.removeAttribute(f);return;case"boolean":var w=f.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){A.removeAttribute(f);return}}A.setAttribute(f,""+p)}}function Or(A,f,p){if(p===null)A.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(f);return}A.setAttribute(f,""+p)}}function Gr(A,f,p,w){if(w===null)A.removeAttribute(p);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttributeNS(f,p,""+w)}}var Ra,pi;function La(A){if(Ra===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);Ra=f&&f[1]||"",pi=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ra+A+pi}var hs=!1;function $a(A,f){if(!A||hs)return"";hs=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(f){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(nt){var rt=nt}Reflect.construct(A,[],wt)}else{try{wt.call()}catch(nt){rt=nt}A.call(wt.prototype)}}else{try{throw Error()}catch(nt){rt=nt}(wt=A())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(nt){if(nt&&rt&&typeof nt.stack=="string")return[nt.stack,rt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=w.DetermineComponentFrameRoot(),le=H[0],we=H[1];if(le&&we){var De=le.split(`
`),et=we.split(`
`);for(F=w=0;w<De.length&&!De[w].includes("DetermineComponentFrameRoot");)w++;for(;F<et.length&&!et[F].includes("DetermineComponentFrameRoot");)F++;if(w===De.length||F===et.length)for(w=De.length-1,F=et.length-1;1<=w&&0<=F&&De[w]!==et[F];)F--;for(;1<=w&&0<=F;w--,F--)if(De[w]!==et[F]){if(w!==1||F!==1)do if(w--,F--,0>F||De[w]!==et[F]){var dt=`
`+De[w].replace(" at new "," at ");return A.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",A.displayName)),dt}while(1<=w&&0<=F);break}}}finally{hs=!1,Error.prepareStackTrace=p}return(p=A?A.displayName||A.name:"")?La(p):""}function Ns(A){switch(A.tag){case 26:case 27:case 5:return La(A.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 15:return $a(A.type,!1);case 11:return $a(A.type.render,!1);case 1:return $a(A.type,!0);case 31:return La("Activity");default:return""}}function Yn(A){try{var f="";do f+=Ns(A),A=A.return;while(A);return f}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ms(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Pc(A){var f=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function KA(A){var f=Pc(A)?"checked":"value",p=Object.getOwnPropertyDescriptor(A.constructor.prototype,f),w=""+A[f];if(!A.hasOwnProperty(f)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var F=p.get,H=p.set;return Object.defineProperty(A,f,{configurable:!0,get:function(){return F.call(this)},set:function(le){w=""+le,H.call(this,le)}}),Object.defineProperty(A,f,{enumerable:p.enumerable}),{getValue:function(){return w},setValue:function(le){w=""+le},stopTracking:function(){A._valueTracker=null,delete A[f]}}}}function ll(A){A._valueTracker||(A._valueTracker=KA(A))}function Hu(A){if(!A)return!1;var f=A._valueTracker;if(!f)return!0;var p=f.getValue(),w="";return A&&(w=Pc(A)?A.checked?"true":"false":A.value),A=w,A!==p?(f.setValue(A),!0):!1}function ks(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var jc=/[\n"\\]/g;function hn(A){return A.replace(jc,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Is(A,f,p,w,F,H,le,we){A.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?A.type=le:A.removeAttribute("type"),f!=null?le==="number"?(f===0&&A.value===""||A.value!=f)&&(A.value=""+ms(f)):A.value!==""+ms(f)&&(A.value=""+ms(f)):le!=="submit"&&le!=="reset"||A.removeAttribute("value"),f!=null?ul(A,le,ms(f)):p!=null?ul(A,le,ms(p)):w!=null&&A.removeAttribute("value"),F==null&&H!=null&&(A.defaultChecked=!!H),F!=null&&(A.checked=F&&typeof F!="function"&&typeof F!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?A.name=""+ms(we):A.removeAttribute("name")}function cl(A,f,p,w,F,H,le,we){if(H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(A.type=H),f!=null||p!=null){if(!(H!=="submit"&&H!=="reset"||f!=null))return;p=p!=null?""+ms(p):"",f=f!=null?""+ms(f):p,we||f===A.value||(A.value=f),A.defaultValue=f}w=w??F,w=typeof w!="function"&&typeof w!="symbol"&&!!w,A.checked=we?A.checked:!!w,A.defaultChecked=!!w,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(A.name=le)}function ul(A,f,p){f==="number"&&ks(A.ownerDocument)===A||A.defaultValue===""+p||(A.defaultValue=""+p)}function oo(A,f,p,w){if(A=A.options,f){f={};for(var F=0;F<p.length;F++)f["$"+p[F]]=!0;for(p=0;p<A.length;p++)F=f.hasOwnProperty("$"+A[p].value),A[p].selected!==F&&(A[p].selected=F),F&&w&&(A[p].defaultSelected=!0)}else{for(p=""+ms(p),f=null,F=0;F<A.length;F++){if(A[F].value===p){A[F].selected=!0,w&&(A[F].defaultSelected=!0);return}f!==null||A[F].disabled||(f=A[F])}f!==null&&(f.selected=!0)}}function _n(A,f,p){if(f!=null&&(f=""+ms(f),f!==A.value&&(A.value=f),p==null)){A.defaultValue!==f&&(A.defaultValue=f);return}A.defaultValue=p!=null?""+ms(p):""}function Al(A,f,p,w){if(f==null){if(w!=null){if(p!=null)throw Error(n(92));if(re(w)){if(1<w.length)throw Error(n(93));w=w[0]}p=w}p==null&&(p=""),f=p}p=ms(f),A.defaultValue=p,w=A.textContent,w===p&&w!==""&&w!==null&&(A.value=w)}function gi(A,f){if(f){var p=A.firstChild;if(p&&p===A.lastChild&&p.nodeType===3){p.nodeValue=f;return}}A.textContent=f}var Do=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $A(A,f,p){var w=f.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?w?A.setProperty(f,""):f==="float"?A.cssFloat="":A[f]="":w?A.setProperty(f,p):typeof p!="number"||p===0||Do.has(f)?f==="float"?A.cssFloat=p:A[f]=(""+p).trim():A[f]=p+"px"}function Vu(A,f,p){if(f!=null&&typeof f!="object")throw Error(n(62));if(A=A.style,p!=null){for(var w in p)!p.hasOwnProperty(w)||f!=null&&f.hasOwnProperty(w)||(w.indexOf("--")===0?A.setProperty(w,""):w==="float"?A.cssFloat="":A[w]="");for(var F in f)w=f[F],f.hasOwnProperty(F)&&p[F]!==w&&$A(A,F,w)}else for(var H in f)f.hasOwnProperty(H)&&$A(A,H,f[H])}function zu(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ro=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lo(A){return Oc.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var lo=null;function On(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Uo=null,co=null;function hr(A){var f=Ie(A);if(f&&(A=f.stateNode)){var p=A[an]||null;e:switch(A=f.stateNode,f.type){case"input":if(Is(A,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),f=p.name,p.type==="radio"&&f!=null){for(p=A;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+hn(""+f)+'"][type="radio"]'),f=0;f<p.length;f++){var w=p[f];if(w!==A&&w.form===A.form){var F=w[an]||null;if(!F)throw Error(n(90));Is(w,F.value,F.defaultValue,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name)}}for(f=0;f<p.length;f++)w=p[f],w.form===A.form&&Hu(w)}break e;case"textarea":_n(A,p.value,p.defaultValue);break e;case"select":f=p.value,f!=null&&oo(A,!!p.multiple,f,!1)}}}var uo=!1;function WA(A,f,p){if(uo)return A(f,p);uo=!0;try{var w=A(f);return w}finally{if(uo=!1,(Uo!==null||co!==null)&&(V1(),Uo&&(f=Uo,A=co,co=Uo=null,hr(f),A)))for(f=0;f<A.length;f++)hr(A[f])}}function js(A,f){var p=A.stateNode;if(p===null)return null;var w=p[an]||null;if(w===null)return null;p=w[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(A=A.type,w=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!w;break e;default:A=!1}if(A)return null;if(p&&typeof p!="function")throw Error(n(231,f,typeof p));return p}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ei=!1;if(xi)try{var Ao={};Object.defineProperty(Ao,"passive",{get:function(){ei=!0}}),window.addEventListener("test",Ao,Ao),window.removeEventListener("test",Ao,Ao)}catch{ei=!1}var vi=null,dl=null,Mo=null;function Gu(){if(Mo)return Mo;var A,f=dl,p=f.length,w,F="value"in vi?vi.value:vi.textContent,H=F.length;for(A=0;A<p&&f[A]===F[A];A++);var le=p-A;for(w=1;w<=le&&f[p-w]===F[H-w];w++);return Mo=F.slice(A,1<w?1-w:void 0)}function yi(A){var f=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&f===13&&(A=13)):A=f,A===10&&(A=13),32<=A||A===13?A:0}function Os(){return!0}function fo(){return!1}function Ua(A){function f(p,w,F,H,le){this._reactName=p,this._targetInst=F,this.type=w,this.nativeEvent=H,this.target=le,this.currentTarget=null;for(var we in A)A.hasOwnProperty(we)&&(p=A[we],this[we]=p?p(H):H[we]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?Os:fo,this.isPropagationStopped=fo,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),f}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fl=Ua(Jr),ho=d({},Jr,{view:0,detail:0}),qu=Ua(ho),Xl,Yl,Xi,Qs=d({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gl,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==Xi&&(Xi&&A.type==="mousemove"?(Xl=A.screenX-Xi.screenX,Yl=A.screenY-Xi.screenY):Yl=Xl=0,Xi=A),Xl)},movementY:function(A){return"movementY"in A?A.movementY:Yl}}),Ma=Ua(Qs),XA=d({},Qs,{dataTransfer:0}),hl=Ua(XA),Fs=d({},ho,{relatedTarget:0}),ml=Ua(Fs),Po=d({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qc=Ua(Po),Jl=d({},Jr,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Hc=Ua(Jl),Ku=d({},Jr,{data:0}),Zl=Ua(Ku),pl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tc(A){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(A):(A=Vc[A])?!!f[A]:!1}function gl(){return tc}var YA=d({},ho,{key:function(A){if(A.key){var f=pl[A.key]||A.key;if(f!=="Unidentified")return f}return A.type==="keypress"?(A=yi(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?ec[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gl,charCode:function(A){return A.type==="keypress"?yi(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?yi(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),jo=Ua(YA),xl=d({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=Ua(xl),Hs=d({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gl}),zc=Ua(Hs),V=d({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ae=Ua(V),Fe=d({},Qs,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Re=Ua(Fe),Ve=d({},Jr,{newState:0,oldState:0}),ot=Ua(Ve),Et=[9,13,27,32],Qt=xi&&"CompositionEvent"in window,T=null;xi&&"documentMode"in document&&(T=document.documentMode);var J=xi&&"TextEvent"in window&&!T,se=xi&&(!Qt||T&&8<T&&11>=T),ye=" ",Qe=!1;function Ze(A,f){switch(A){case"keyup":return Et.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _t(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var mr=!1;function Zr(A,f){switch(A){case"compositionend":return _t(f);case"keypress":return f.which!==32?null:(Qe=!0,ye);case"textInput":return A=f.data,A===ye&&Qe?null:A;default:return null}}function kr(A,f){if(mr)return A==="compositionend"||!Qt&&Ze(A,f)?(A=Gu(),Mo=dl=vi=null,mr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return se&&f.locale!=="ko"?null:f.data;default:return null}}var Sn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f==="input"?!!Sn[A.type]:f==="textarea"}function mo(A,f,p,w){Uo?co?co.push(w):co=[w]:Uo=w,f=W1(f,"onChange"),0<f.length&&(p=new fl("onChange","change",null,p,w),A.push({event:p,listeners:f}))}var _a=null,wi=null;function vl(A){mN(A,0)}function Gc(A){var f=qe(A);if(Hu(f))return A}function JA(A,f){if(A==="change")return f}var $u=!1;if(xi){var Wa;if(xi){var qc="oninput"in document;if(!qc){var Wu=document.createElement("div");Wu.setAttribute("oninput","return;"),qc=typeof Wu.oninput=="function"}Wa=qc}else Wa=!1;$u=Wa&&(!document.documentMode||9<document.documentMode)}function Xu(){_a&&(_a.detachEvent("onpropertychange",ZA),wi=_a=null)}function ZA(A){if(A.propertyName==="value"&&Gc(wi)){var f=[];mo(f,wi,A,On(A)),WA(vl,f)}}function bi(A,f,p){A==="focusin"?(Xu(),_a=f,wi=p,_a.attachEvent("onpropertychange",ZA)):A==="focusout"&&Xu()}function sp(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Gc(wi)}function Nf(A,f){if(A==="click")return Gc(f)}function Wh(A,f){if(A==="input"||A==="change")return Gc(f)}function po(A,f){return A===f&&(A!==0||1/A===1/f)||A!==A&&f!==f}var ps=typeof Object.is=="function"?Object.is:po;function Kc(A,f){if(ps(A,f))return!0;if(typeof A!="object"||A===null||typeof f!="object"||f===null)return!1;var p=Object.keys(A),w=Object.keys(f);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var F=p[w];if(!oe.call(f,F)||!ps(A[F],f[F]))return!1}return!0}function kf(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function nc(A,f){var p=kf(A);A=0;for(var w;p;){if(p.nodeType===3){if(w=A+p.textContent.length,A<=f&&w>=f)return{node:p,offset:f-A};A=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=kf(p)}}function $c(A,f){return A&&f?A===f?!0:A&&A.nodeType===3?!1:f&&f.nodeType===3?$c(A,f.parentNode):"contains"in A?A.contains(f):A.compareDocumentPosition?!!(A.compareDocumentPosition(f)&16):!1:!1}function ti(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var f=ks(A.document);f instanceof A.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)A=f.contentWindow;else break;f=ks(A.document)}return f}function Ds(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f&&(f==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||f==="textarea"||A.contentEditable==="true")}var Wc=xi&&"documentMode"in document&&11>=document.documentMode,Ci=null,Oo=null,yl=null,Qo=!1;function ga(A,f,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Qo||Ci==null||Ci!==ks(w)||(w=Ci,"selectionStart"in w&&Ds(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),yl&&Kc(yl,w)||(yl=w,w=W1(Oo,"onSelect"),0<w.length&&(f=new fl("onSelect","select",null,f,p),A.push({event:f,listeners:w}),f.target=Ci)))}function Ho(A,f){var p={};return p[A.toLowerCase()]=f.toLowerCase(),p["Webkit"+A]="webkit"+f,p["Moz"+A]="moz"+f,p}var Pa={animationend:Ho("Animation","AnimationEnd"),animationiteration:Ho("Animation","AnimationIteration"),animationstart:Ho("Animation","AnimationStart"),transitionrun:Ho("Transition","TransitionRun"),transitionstart:Ho("Transition","TransitionStart"),transitioncancel:Ho("Transition","TransitionCancel"),transitionend:Ho("Transition","TransitionEnd")},Ei={},Yu={};xi&&(Yu=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function wl(A){if(Ei[A])return Ei[A];if(!Pa[A])return A;var f=Pa[A],p;for(p in f)if(f.hasOwnProperty(p)&&p in Yu)return Ei[A]=f[p];return A}var ed=wl("animationend"),Xc=wl("animationiteration"),Yc=wl("animationstart"),Jc=wl("transitionrun"),Ju=wl("transitionstart"),td=wl("transitioncancel"),Zc=wl("transitionend"),ac=new Map,Zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zu.push("scrollEnd");function xa(A,f){ac.set(A,f),yt(f,[A])}var Yi=new WeakMap;function $r(A,f){if(typeof A=="object"&&A!==null){var p=Yi.get(A);return p!==void 0?p:(f={value:A,source:f,stack:Yn(f)},Yi.set(A,f),f)}return{value:A,source:f,stack:Yn(f)}}var Wr=[],Jn=0,Sa=0;function go(){for(var A=Jn,f=Sa=Jn=0;f<A;){var p=Wr[f];Wr[f++]=null;var w=Wr[f];Wr[f++]=null;var F=Wr[f];Wr[f++]=null;var H=Wr[f];if(Wr[f++]=null,w!==null&&F!==null){var le=w.pending;le===null?F.next=F:(F.next=le.next,le.next=F),w.pending=F}H!==0&&Xh(p,F,H)}}function eu(A,f,p,w){Wr[Jn++]=A,Wr[Jn++]=f,Wr[Jn++]=p,Wr[Jn++]=w,Sa|=w,A.lanes|=w,A=A.alternate,A!==null&&(A.lanes|=w)}function tu(A,f,p,w){return eu(A,f,p,w),eA(A)}function sc(A,f){return eu(A,null,null,f),eA(A)}function Xh(A,f,p){A.lanes|=p;var w=A.alternate;w!==null&&(w.lanes|=p);for(var F=!1,H=A.return;H!==null;)H.childLanes|=p,w=H.alternate,w!==null&&(w.childLanes|=p),H.tag===22&&(A=H.stateNode,A===null||A._visibility&1||(F=!0)),A=H,H=H.return;return A.tag===3?(H=A.stateNode,F&&f!==null&&(F=31-Lt(p),A=H.hiddenUpdates,w=A[F],w===null?A[F]=[f]:w.push(f),f.lane=p|536870912),H):null}function eA(A){if(50<kp)throw kp=0,Yb=null,Error(n(185));for(var f=A.return;f!==null;)A=f,f=A.return;return A.tag===3?A.stateNode:null}var gs={};function xo(A,f,p,w){this.tag=A,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(A,f,p,w){return new xo(A,f,p,w)}function rd(A){return A=A.prototype,!(!A||!A.isReactComponent)}function bl(A,f){var p=A.alternate;return p===null?(p=Vs(A.tag,f,A.key,A.mode),p.elementType=A.elementType,p.type=A.type,p.stateNode=A.stateNode,p.alternate=A,A.alternate=p):(p.pendingProps=f,p.type=A.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=A.flags&65011712,p.childLanes=A.childLanes,p.lanes=A.lanes,p.child=A.child,p.memoizedProps=A.memoizedProps,p.memoizedState=A.memoizedState,p.updateQueue=A.updateQueue,f=A.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=A.sibling,p.index=A.index,p.ref=A.ref,p.refCleanup=A.refCleanup,p}function If(A,f){A.flags&=65011714;var p=A.alternate;return p===null?(A.childLanes=0,A.lanes=f,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=p.childLanes,A.lanes=p.lanes,A.child=p.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=p.memoizedProps,A.memoizedState=p.memoizedState,A.updateQueue=p.updateQueue,A.type=p.type,f=p.dependencies,A.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),A}function tA(A,f,p,w,F,H){var le=0;if(w=A,typeof A=="function")rd(A)&&(le=1);else if(typeof A=="string")le=eH(A,p,Z.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case N:return A=Vs(31,p,f,F),A.elementType=N,A.lanes=H,A;case b:return ic(p.children,F,H,f);case y:le=8,F|=24;break;case E:return A=Vs(12,p,f,F|2),A.elementType=E,A.lanes=H,A;case P:return A=Vs(13,p,f,F),A.elementType=P,A.lanes=H,A;case R:return A=Vs(19,p,f,F),A.elementType=R,A.lanes=H,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case B:case L:le=10;break e;case k:le=9;break e;case M:le=11;break e;case C:le=14;break e;case S:le=16,w=null;break e}le=29,p=Error(n(130,A===null?"null":typeof A,"")),w=null}return f=Vs(le,p,f,F),f.elementType=A,f.type=w,f.lanes=H,f}function ic(A,f,p,w){return A=Vs(7,A,w,f),A.lanes=p,A}function Yh(A,f,p){return A=Vs(6,A,null,f),A.lanes=p,A}function Ff(A,f,p){return f=Vs(4,A.children!==null?A.children:[],A.key,f),f.lanes=p,f.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},f}var ru=[],oc=0,nd=null,Jh=0,vo=[],Ji=0,rA=null,lc=1,cc="";function nA(A,f){ru[oc++]=Jh,ru[oc++]=nd,nd=A,Jh=f}function f1(A,f,p){vo[Ji++]=lc,vo[Ji++]=cc,vo[Ji++]=rA,rA=A;var w=lc;A=cc;var F=32-Lt(w)-1;w&=~(1<<F),p+=1;var H=32-Lt(f)+F;if(30<H){var le=F-F%5;H=(w&(1<<le)-1).toString(32),w>>=le,F-=le,lc=1<<32-Lt(f)+F|p<<F|w,cc=H+A}else lc=1<<H|p<<F|w,cc=A}function Df(A){A.return!==null&&(nA(A,1),f1(A,1,0))}function Rf(A){for(;A===nd;)nd=ru[--oc],ru[oc]=null,Jh=ru[--oc],ru[oc]=null;for(;A===rA;)rA=vo[--Ji],vo[Ji]=null,cc=vo[--Ji],vo[Ji]=null,lc=vo[--Ji],vo[Ji]=null}var Xa=null,va=null,bn=!1,nu=null,Cl=!1,ip=Error(n(519));function aA(A){var f=Error(n(418,""));throw ad($r(f,A)),ip}function h1(A){var f=A.stateNode,p=A.type,w=A.memoizedProps;switch(f[fn]=A,f[an]=w,p){case"dialog":on("cancel",f),on("close",f);break;case"iframe":case"object":case"embed":on("load",f);break;case"video":case"audio":for(p=0;p<Fp.length;p++)on(Fp[p],f);break;case"source":on("error",f);break;case"img":case"image":case"link":on("error",f),on("load",f);break;case"details":on("toggle",f);break;case"input":on("invalid",f),cl(f,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),ll(f);break;case"select":on("invalid",f);break;case"textarea":on("invalid",f),Al(f,w.value,w.defaultValue,w.children),ll(f)}p=w.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||f.textContent===""+p||w.suppressHydrationWarning===!0||vN(f.textContent,p)?(w.popover!=null&&(on("beforetoggle",f),on("toggle",f)),w.onScroll!=null&&on("scroll",f),w.onScrollEnd!=null&&on("scrollend",f),w.onClick!=null&&(f.onclick=X1),f=!0):f=!1,f||aA(A)}function uc(A){for(Xa=A.return;Xa;)switch(Xa.tag){case 5:case 13:Cl=!1;return;case 27:case 3:Cl=!0;return;default:Xa=Xa.return}}function ri(A){if(A!==Xa)return!1;if(!bn)return uc(A),bn=!0,!1;var f=A.tag,p;if((p=f!==3&&f!==27)&&((p=f===5)&&(p=A.type,p=!(p!=="form"&&p!=="button")||fC(A.type,A.memoizedProps)),p=!p),p&&va&&aA(A),uc(A),f===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,f=0;A;){if(A.nodeType===8)if(p=A.data,p==="/$"){if(f===0){va=xc(A.nextSibling);break e}f--}else p!=="$"&&p!=="$!"&&p!=="$?"||f++;A=A.nextSibling}va=null}}else f===27?(f=va,wd(A.type)?(A=gC,gC=null,va=A):va=f):va=Xa?xc(A.stateNode.nextSibling):null;return!0}function Zi(){va=Xa=null,bn=!1}function m1(){var A=nu;return A!==null&&(bo===null?bo=A:bo.push.apply(bo,A),nu=null),A}function ad(A){nu===null?nu=[A]:nu.push(A)}var El=ie(null),xs=null,Ac=null;function au(A,f,p){X(El,f._currentValue),f._currentValue=p}function _l(A){A._currentValue=El.current,j(El)}function Zh(A,f,p){for(;A!==null;){var w=A.alternate;if((A.childLanes&f)!==f?(A.childLanes|=f,w!==null&&(w.childLanes|=f)):w!==null&&(w.childLanes&f)!==f&&(w.childLanes|=f),A===p)break;A=A.return}}function e0(A,f,p,w){var F=A.child;for(F!==null&&(F.return=A);F!==null;){var H=F.dependencies;if(H!==null){var le=F.child;H=H.firstContext;e:for(;H!==null;){var we=H;H=F;for(var De=0;De<f.length;De++)if(we.context===f[De]){H.lanes|=p,we=H.alternate,we!==null&&(we.lanes|=p),Zh(H.return,p,A),w||(le=null);break e}H=we.next}}else if(F.tag===18){if(le=F.return,le===null)throw Error(n(341));le.lanes|=p,H=le.alternate,H!==null&&(H.lanes|=p),Zh(le,p,A),le=null}else le=F.child;if(le!==null)le.return=F;else for(le=F;le!==null;){if(le===A){le=null;break}if(F=le.sibling,F!==null){F.return=le.return,le=F;break}le=le.return}F=le}}function sd(A,f,p,w){A=null;for(var F=f,H=!1;F!==null;){if(!H){if((F.flags&524288)!==0)H=!0;else if((F.flags&262144)!==0)break}if(F.tag===10){var le=F.alternate;if(le===null)throw Error(n(387));if(le=le.memoizedProps,le!==null){var we=F.type;ps(F.pendingProps.value,le.value)||(A!==null?A.push(we):A=[we])}}else if(F===de.current){if(le=F.alternate,le===null)throw Error(n(387));le.memoizedState.memoizedState!==F.memoizedState.memoizedState&&(A!==null?A.push(Pp):A=[Pp])}F=F.return}A!==null&&e0(f,A,p,w),f.flags|=262144}function t0(A){for(A=A.firstContext;A!==null;){if(!ps(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Sl(A){xs=A,Ac=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Ya(A){return r0(xs,A)}function su(A,f){return xs===null&&Sl(A),r0(A,f)}function r0(A,f){var p=f._currentValue;if(f={context:f,memoizedValue:p,next:null},Ac===null){if(A===null)throw Error(n(308));Ac=f,A.dependencies={lanes:0,firstContext:f},A.flags|=524288}else Ac=Ac.next=f;return p}var bb=typeof AbortController<"u"?AbortController:function(){var A=[],f=this.signal={aborted:!1,addEventListener:function(p,w){A.push(w)}};this.abort=function(){f.aborted=!0,A.forEach(function(p){return p()})}},p1=t.unstable_scheduleCallback,Cb=t.unstable_NormalPriority,Ja={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function op(){return{controller:new bb,data:new Map,refCount:0}}function Lf(A){A.refCount--,A.refCount===0&&p1(Cb,function(){A.controller.abort()})}var Uf=null,lp=0,sA=0,dc=null;function Eb(A,f){if(Uf===null){var p=Uf=[];lp=0,sA=aC(),dc={status:"pending",value:void 0,then:function(w){p.push(w)}}}return lp++,f.then(g1,g1),f}function g1(){if(--lp===0&&Uf!==null){dc!==null&&(dc.status="fulfilled");var A=Uf;Uf=null,sA=0,dc=null;for(var f=0;f<A.length;f++)(0,A[f])()}}function x1(A,f){var p=[],w={status:"pending",value:null,reason:null,then:function(F){p.push(F)}};return A.then(function(){w.status="fulfilled",w.value=f;for(var F=0;F<p.length;F++)(0,p[F])(f)},function(F){for(w.status="rejected",w.reason=F,F=0;F<p.length;F++)(0,p[F])(void 0)}),w}var _=Y.S;Y.S=function(A,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Eb(A,f),_!==null&&_(A,f)};var U=ie(null);function q(){var A=U.current;return A!==null?A:oa.pooledCache}function ne(A,f){f===null?X(U,U.current):X(U,f.pool)}function ue(){var A=q();return A===null?null:{parent:Ja._currentValue,pool:A}}var he=Error(n(460)),pe=Error(n(474)),ve=Error(n(542)),Ce={then:function(){}};function Ne(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Le(){}function Ye(A,f,p){switch(p=A[p],p===void 0?A.push(f):p!==f&&(f.then(Le,Le),f=p),f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,gt(A),A;default:if(typeof f.status=="string")f.then(Le,Le);else{if(A=oa,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=f,A.status="pending",A.then(function(w){if(f.status==="pending"){var F=f;F.status="fulfilled",F.value=w}},function(w){if(f.status==="pending"){var F=f;F.status="rejected",F.reason=w}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,gt(A),A}throw $e=f,he}}var $e=null;function ze(){if($e===null)throw Error(n(459));var A=$e;return $e=null,A}function gt(A){if(A===he||A===ve)throw Error(n(483))}var it=!1;function Ue(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oe(A,f){A=A.updateQueue,f.updateQueue===A&&(f.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function ct(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function vt(A,f,p){var w=A.updateQueue;if(w===null)return null;if(w=w.shared,(Hn&2)!==0){var F=w.pending;return F===null?f.next=f:(f.next=F.next,F.next=f),w.pending=f,f=eA(A),Xh(A,null,p),f}return eu(A,w,f,p),eA(A)}function ft(A,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194048)!==0)){var w=f.lanes;w&=A.pendingLanes,p|=w,f.lanes=p,zr(A,p)}}function Kt(A,f){var p=A.updateQueue,w=A.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var F=null,H=null;if(p=p.firstBaseUpdate,p!==null){do{var le={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};H===null?F=H=le:H=H.next=le,p=p.next}while(p!==null);H===null?F=H=f:H=H.next=f}else F=H=f;p={baseState:w.baseState,firstBaseUpdate:F,lastBaseUpdate:H,shared:w.shared,callbacks:w.callbacks},A.updateQueue=p;return}A=p.lastBaseUpdate,A===null?p.firstBaseUpdate=f:A.next=f,p.lastBaseUpdate=f}var jt=!1;function ar(){if(jt){var A=dc;if(A!==null)throw A}}function Ht(A,f,p,w){jt=!1;var F=A.updateQueue;it=!1;var H=F.firstBaseUpdate,le=F.lastBaseUpdate,we=F.shared.pending;if(we!==null){F.shared.pending=null;var De=we,et=De.next;De.next=null,le===null?H=et:le.next=et,le=De;var dt=A.alternate;dt!==null&&(dt=dt.updateQueue,we=dt.lastBaseUpdate,we!==le&&(we===null?dt.firstBaseUpdate=et:we.next=et,dt.lastBaseUpdate=De))}if(H!==null){var wt=F.baseState;le=0,dt=et=De=null,we=H;do{var rt=we.lane&-536870913,nt=rt!==we.lane;if(nt?(yn&rt)===rt:(w&rt)===rt){rt!==0&&rt===sA&&(jt=!0),dt!==null&&(dt=dt.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var Br=A,pr=we;rt=f;var ea=p;switch(pr.tag){case 1:if(Br=pr.payload,typeof Br=="function"){wt=Br.call(ea,wt,rt);break e}wt=Br;break e;case 3:Br.flags=Br.flags&-65537|128;case 0:if(Br=pr.payload,rt=typeof Br=="function"?Br.call(ea,wt,rt):Br,rt==null)break e;wt=d({},wt,rt);break e;case 2:it=!0}}rt=we.callback,rt!==null&&(A.flags|=64,nt&&(A.flags|=8192),nt=F.callbacks,nt===null?F.callbacks=[rt]:nt.push(rt))}else nt={lane:rt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},dt===null?(et=dt=nt,De=wt):dt=dt.next=nt,le|=rt;if(we=we.next,we===null){if(we=F.shared.pending,we===null)break;nt=we,we=nt.next,nt.next=null,F.lastBaseUpdate=nt,F.shared.pending=null}}while(!0);dt===null&&(De=wt),F.baseState=De,F.firstBaseUpdate=et,F.lastBaseUpdate=dt,H===null&&(F.shared.lanes=0),gd|=le,A.lanes=le,A.memoizedState=wt}}function xn(A,f){if(typeof A!="function")throw Error(n(191,A));A.call(f)}function Tn(A,f){var p=A.callbacks;if(p!==null)for(A.callbacks=null,A=0;A<p.length;A++)xn(p[A],f)}var qr=ie(null),Qr=ie(0);function Un(A,f){A=mA,X(Qr,A),X(qr,f),mA=A|f.baseLanes}function Bn(){X(Qr,mA),X(qr,qr.current)}function Ir(){mA=Qr.current,j(qr),j(Qr)}var Qn=0,fr=null,br=null,mn=null,vn=!1,vs=!1,Za=!1,Ta=0,Ba=0,ja=null,yo=0;function Nn(){throw Error(n(321))}function Oa(A,f){if(f===null)return!1;for(var p=0;p<f.length&&p<A.length;p++)if(!ps(A[p],f[p]))return!1;return!0}function Vo(A,f,p,w,F,H){return Qn=H,fr=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Y.H=A===null||A.memoizedState===null?ZT:eB,Za=!1,H=p(w,F),Za=!1,vs&&(H=iA(f,p,w,F)),iu(A),H}function iu(A){Y.H=k1;var f=br!==null&&br.next!==null;if(Qn=0,mn=br=fr=null,vn=!1,Ba=0,ja=null,f)throw Error(n(300));A===null||zs||(A=A.dependencies,A!==null&&t0(A)&&(zs=!0))}function iA(A,f,p,w){fr=A;var F=0;do{if(vs&&(ja=null),Ba=0,vs=!1,25<=F)throw Error(n(301));if(F+=1,mn=br=null,A.updateQueue!=null){var H=A.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}Y.H=A9,H=f(p,w)}while(vs);return H}function ou(){var A=Y.H,f=A.useState()[0];return f=typeof f.then=="function"?lu(f):f,A=A.useState()[0],(br!==null?br.memoizedState:null)!==A&&(fr.flags|=1024),f}function ia(){var A=Ta!==0;return Ta=0,A}function Mf(A,f,p){f.updateQueue=A.updateQueue,f.flags&=-2053,A.lanes&=~p}function n0(A){if(vn){for(A=A.memoizedState;A!==null;){var f=A.queue;f!==null&&(f.pending=null),A=A.next}vn=!1}Qn=0,mn=br=fr=null,vs=!1,Ba=Ta=0,ja=null}function ni(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?fr.memoizedState=mn=A:mn=mn.next=A,mn}function ua(){if(br===null){var A=fr.alternate;A=A!==null?A.memoizedState:null}else A=br.next;var f=mn===null?fr.memoizedState:mn.next;if(f!==null)mn=f,br=A;else{if(A===null)throw fr.alternate===null?Error(n(467)):Error(n(310));br=A,A={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},mn===null?fr.memoizedState=mn=A:mn=mn.next=A}return mn}function oA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(A){var f=Ba;return Ba+=1,ja===null&&(ja=[]),A=Ye(ja,A,f),f=fr,(mn===null?f.memoizedState:mn.next)===null&&(f=f.alternate,Y.H=f===null||f.memoizedState===null?ZT:eB),A}function _i(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return lu(A);if(A.$$typeof===L)return Ya(A)}throw Error(n(438,String(A)))}function cu(A){var f=null,p=fr.updateQueue;if(p!==null&&(f=p.memoCache),f==null){var w=fr.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(f={data:w.data.map(function(F){return F.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),p===null&&(p=oA(),fr.updateQueue=p),p.memoCache=f,p=f.data[f.index],p===void 0)for(p=f.data[f.index]=Array(A),w=0;w<A;w++)p[w]=Q;return f.index++,p}function Si(A,f){return typeof f=="function"?f(A):f}function Pf(A){var f=ua();return id(f,br,A)}function id(A,f,p){var w=A.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=p;var F=A.baseQueue,H=w.pending;if(H!==null){if(F!==null){var le=F.next;F.next=H.next,H.next=le}f.baseQueue=F=H,w.pending=null}if(H=A.baseState,F===null)A.memoizedState=H;else{f=F.next;var we=le=null,De=null,et=f,dt=!1;do{var wt=et.lane&-536870913;if(wt!==et.lane?(yn&wt)===wt:(Qn&wt)===wt){var rt=et.revertLane;if(rt===0)De!==null&&(De=De.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),wt===sA&&(dt=!0);else if((Qn&rt)===rt){et=et.next,rt===sA&&(dt=!0);continue}else wt={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},De===null?(we=De=wt,le=H):De=De.next=wt,fr.lanes|=rt,gd|=rt;wt=et.action,Za&&p(H,wt),H=et.hasEagerState?et.eagerState:p(H,wt)}else rt={lane:wt,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},De===null?(we=De=rt,le=H):De=De.next=rt,fr.lanes|=wt,gd|=wt;et=et.next}while(et!==null&&et!==f);if(De===null?le=H:De.next=we,!ps(H,A.memoizedState)&&(zs=!0,dt&&(p=dc,p!==null)))throw p;A.memoizedState=H,A.baseState=le,A.baseQueue=De,w.lastRenderedState=H}return F===null&&(w.lanes=0),[A.memoizedState,w.dispatch]}function a0(A){var f=ua(),p=f.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=A;var w=p.dispatch,F=p.pending,H=f.memoizedState;if(F!==null){p.pending=null;var le=F=F.next;do H=A(H,le.action),le=le.next;while(le!==F);ps(H,f.memoizedState)||(zs=!0),f.memoizedState=H,f.baseQueue===null&&(f.baseState=H),p.lastRenderedState=H}return[H,w]}function jf(A,f,p){var w=fr,F=ua(),H=bn;if(H){if(p===void 0)throw Error(n(407));p=p()}else p=f();var le=!ps((br||F).memoizedState,p);le&&(F.memoizedState=p,zs=!0),F=F.queue;var we=od.bind(null,w,F,A);if(ud(2048,8,we,[A]),F.getSnapshot!==f||le||mn!==null&&mn.memoizedState.tag&1){if(w.flags|=2048,hc(9,Vf(),Of.bind(null,w,F,p,f),null),oa===null)throw Error(n(349));H||(Qn&124)!==0||s0(w,f,p)}return p}function s0(A,f,p){A.flags|=16384,A={getSnapshot:f,value:p},f=fr.updateQueue,f===null?(f=oA(),fr.updateQueue=f,f.stores=[A]):(p=f.stores,p===null?f.stores=[A]:p.push(A))}function Of(A,f,p,w){f.value=p,f.getSnapshot=w,v1(f)&&y1(A)}function od(A,f,p){return p(function(){v1(f)&&y1(A)})}function v1(A){var f=A.getSnapshot;A=A.value;try{var p=f();return!ps(A,p)}catch{return!0}}function y1(A){var f=sc(A,2);f!==null&&Wo(f,A,2)}function Qf(A){var f=ni();if(typeof A=="function"){var p=A;if(A=p(),Za){Wt(!0);try{p()}finally{Wt(!1)}}}return f.memoizedState=f.baseState=A,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:A},f}function fc(A,f,p,w){return A.baseState=p,id(A,br,typeof w=="function"?w:Si)}function _b(A,f,p,w,F){if(N1(A))throw Error(n(485));if(A=f.action,A!==null){var H={payload:F,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){H.listeners.push(le)}};Y.T!==null?p(!0):H.isTransition=!1,w(H),p=f.pending,p===null?(H.next=f.pending=H,w1(f,H)):(H.next=p.next,f.pending=p.next=H)}}function w1(A,f){var p=f.action,w=f.payload,F=A.state;if(f.isTransition){var H=Y.T,le={};Y.T=le;try{var we=p(F,w),De=Y.S;De!==null&&De(le,we),b1(A,f,we)}catch(et){ld(A,f,et)}finally{Y.T=H}}else try{H=p(F,w),b1(A,f,H)}catch(et){ld(A,f,et)}}function b1(A,f,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(w){cp(A,f,w)},function(w){return ld(A,f,w)}):cp(A,f,p)}function cp(A,f,p){f.status="fulfilled",f.value=p,up(f),A.state=p,f=A.pending,f!==null&&(p=f.next,p===f?A.pending=null:(p=p.next,f.next=p,w1(A,p)))}function ld(A,f,p){var w=A.pending;if(A.pending=null,w!==null){w=w.next;do f.status="rejected",f.reason=p,up(f),f=f.next;while(f!==w)}A.action=null}function up(A){A=A.listeners;for(var f=0;f<A.length;f++)(0,A[f])()}function Ap(A,f){return f}function Hf(A,f){if(bn){var p=oa.formState;if(p!==null){e:{var w=fr;if(bn){if(va){t:{for(var F=va,H=Cl;F.nodeType!==8;){if(!H){F=null;break t}if(F=xc(F.nextSibling),F===null){F=null;break t}}H=F.data,F=H==="F!"||H==="F"?F:null}if(F){va=xc(F.nextSibling),w=F.data==="F!";break e}}aA(w)}w=!1}w&&(f=p[0])}}return p=ni(),p.memoizedState=p.baseState=f,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:f},p.queue=w,p=XT.bind(null,fr,w),w.dispatch=p,w=Qf(!1),H=Sb.bind(null,fr,!1,w.queue),w=ni(),F={state:f,dispatch:null,action:A,pending:null},w.queue=F,p=_b.bind(null,fr,F,H,p),F.dispatch=p,w.memoizedState=A,[f,p,!1]}function i0(A){var f=ua();return cd(f,br,A)}function cd(A,f,p){if(f=id(A,f,Ap)[0],A=Pf(Si)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var w=lu(f)}catch(le){throw le===he?ve:le}else w=f;f=ua();var F=f.queue,H=F.dispatch;return p!==f.memoizedState&&(fr.flags|=2048,hc(9,Vf(),C1.bind(null,F,p),null)),[w,H,A]}function C1(A,f){A.action=f}function E1(A){var f=ua(),p=br;if(p!==null)return cd(f,p,A);ua(),f=f.memoizedState,p=ua();var w=p.queue.dispatch;return p.memoizedState=A,[f,w,!1]}function hc(A,f,p,w){return A={tag:A,create:p,deps:w,inst:f,next:null},f=fr.updateQueue,f===null&&(f=oA(),fr.updateQueue=f),p=f.lastEffect,p===null?f.lastEffect=A.next=A:(w=p.next,p.next=A,A.next=w,f.lastEffect=A),A}function Vf(){return{destroy:void 0,resource:void 0}}function o0(){return ua().memoizedState}function zo(A,f,p,w){var F=ni();w=w===void 0?null:w,fr.flags|=A,F.memoizedState=hc(1|f,Vf(),p,w)}function ud(A,f,p,w){var F=ua();w=w===void 0?null:w;var H=F.memoizedState.inst;br!==null&&w!==null&&Oa(w,br.memoizedState.deps)?F.memoizedState=hc(f,H,p,w):(fr.flags|=A,F.memoizedState=hc(1|f,H,p,w))}function dp(A,f){zo(8390656,8,A,f)}function _1(A,f){ud(2048,8,A,f)}function fp(A,f){return ud(4,2,A,f)}function lA(A,f){return ud(4,4,A,f)}function S1(A,f){if(typeof f=="function"){A=A();var p=f(A);return function(){typeof p=="function"?p():f(null)}}if(f!=null)return A=A(),f.current=A,function(){f.current=null}}function hp(A,f,p){p=p!=null?p.concat([A]):null,ud(4,4,S1.bind(null,f,A),p)}function mp(){}function pp(A,f){var p=ua();f=f===void 0?null:f;var w=p.memoizedState;return f!==null&&Oa(f,w[1])?w[0]:(p.memoizedState=[A,f],A)}function T1(A,f){var p=ua();f=f===void 0?null:f;var w=p.memoizedState;if(f!==null&&Oa(f,w[1]))return w[0];if(w=A(),Za){Wt(!0);try{A()}finally{Wt(!1)}}return p.memoizedState=[w,f],w}function cA(A,f,p){return p===void 0||(Qn&1073741824)!==0?A.memoizedState=f:(A.memoizedState=p,A=qB(),fr.lanes|=A,gd|=A,p)}function l0(A,f,p,w){return ps(p,f)?p:qr.current!==null?(A=cA(A,p,w),ps(A,f)||(zs=!0),A):(Qn&42)===0?(zs=!0,A.memoizedState=p):(A=qB(),fr.lanes|=A,gd|=A,f)}function zf(A,f,p,w,F){var H=ae.p;ae.p=H!==0&&8>H?H:8;var le=Y.T,we={};Y.T=we,Sb(A,!1,f,p);try{var De=F(),et=Y.S;if(et!==null&&et(we,De),De!==null&&typeof De=="object"&&typeof De.then=="function"){var dt=x1(De,w);yp(A,f,dt,$o(A))}else yp(A,f,w,$o(A))}catch(wt){yp(A,f,{then:function(){},status:"rejected",reason:wt},$o())}finally{ae.p=H,Y.T=le}}function mc(){}function Tl(A,f,p,w){if(A.tag!==5)throw Error(n(476));var F=pc(A).queue;zf(A,F,f,K,p===null?mc:function(){return Gf(A),p(w)})}function pc(A){var f=A.memoizedState;if(f!==null)return f;f={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:K},next:null};var p={};return f.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:p},next:null},A.memoizedState=f,A=A.alternate,A!==null&&(A.memoizedState=f),f}function Gf(A){var f=pc(A).next.queue;yp(A,f,{},$o())}function qf(){return Ya(Pp)}function gp(){return ua().memoizedState}function B1(){return ua().memoizedState}function xp(A){for(var f=A.return;f!==null;){switch(f.tag){case 24:case 3:var p=$o();A=ct(p);var w=vt(f,A,p);w!==null&&(Wo(w,f,p),ft(w,f,p)),f={cache:op()},A.payload=f;return}f=f.return}}function vp(A,f,p){var w=$o();p={lane:w,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},N1(A)?YT(f,p):(p=tu(A,f,p,w),p!==null&&(Wo(p,A,w),JT(p,f,w)))}function XT(A,f,p){var w=$o();yp(A,f,p,w)}function yp(A,f,p,w){var F={lane:w,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(N1(A))YT(f,F);else{var H=A.alternate;if(A.lanes===0&&(H===null||H.lanes===0)&&(H=f.lastRenderedReducer,H!==null))try{var le=f.lastRenderedState,we=H(le,p);if(F.hasEagerState=!0,F.eagerState=we,ps(we,le))return eu(A,f,F,0),oa===null&&go(),!1}catch{}finally{}if(p=tu(A,f,F,w),p!==null)return Wo(p,A,w),JT(p,f,w),!0}return!1}function Sb(A,f,p,w){if(w={lane:2,revertLane:aC(),action:w,hasEagerState:!1,eagerState:null,next:null},N1(A)){if(f)throw Error(n(479))}else f=tu(A,p,w,2),f!==null&&Wo(f,A,2)}function N1(A){var f=A.alternate;return A===fr||f!==null&&f===fr}function YT(A,f){vs=vn=!0;var p=A.pending;p===null?f.next=f:(f.next=p.next,p.next=f),A.pending=f}function JT(A,f,p){if((p&4194048)!==0){var w=f.lanes;w&=A.pendingLanes,p|=w,f.lanes=p,zr(A,p)}}var k1={readContext:Ya,use:_i,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useLayoutEffect:Nn,useInsertionEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useSyncExternalStore:Nn,useId:Nn,useHostTransitionStatus:Nn,useFormState:Nn,useActionState:Nn,useOptimistic:Nn,useMemoCache:Nn,useCacheRefresh:Nn},ZT={readContext:Ya,use:_i,useCallback:function(A,f){return ni().memoizedState=[A,f===void 0?null:f],A},useContext:Ya,useEffect:dp,useImperativeHandle:function(A,f,p){p=p!=null?p.concat([A]):null,zo(4194308,4,S1.bind(null,f,A),p)},useLayoutEffect:function(A,f){return zo(4194308,4,A,f)},useInsertionEffect:function(A,f){zo(4,2,A,f)},useMemo:function(A,f){var p=ni();f=f===void 0?null:f;var w=A();if(Za){Wt(!0);try{A()}finally{Wt(!1)}}return p.memoizedState=[w,f],w},useReducer:function(A,f,p){var w=ni();if(p!==void 0){var F=p(f);if(Za){Wt(!0);try{p(f)}finally{Wt(!1)}}}else F=f;return w.memoizedState=w.baseState=F,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:F},w.queue=A,A=A.dispatch=vp.bind(null,fr,A),[w.memoizedState,A]},useRef:function(A){var f=ni();return A={current:A},f.memoizedState=A},useState:function(A){A=Qf(A);var f=A.queue,p=XT.bind(null,fr,f);return f.dispatch=p,[A.memoizedState,p]},useDebugValue:mp,useDeferredValue:function(A,f){var p=ni();return cA(p,A,f)},useTransition:function(){var A=Qf(!1);return A=zf.bind(null,fr,A.queue,!0,!1),ni().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,f,p){var w=fr,F=ni();if(bn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=f(),oa===null)throw Error(n(349));(yn&124)!==0||s0(w,f,p)}F.memoizedState=p;var H={value:p,getSnapshot:f};return F.queue=H,dp(od.bind(null,w,H,A),[A]),w.flags|=2048,hc(9,Vf(),Of.bind(null,w,H,p,f),null),p},useId:function(){var A=ni(),f=oa.identifierPrefix;if(bn){var p=cc,w=lc;p=(w&~(1<<32-Lt(w)-1)).toString(32)+p,f=""+f+"R"+p,p=Ta++,0<p&&(f+="H"+p.toString(32)),f+=""}else p=yo++,f=""+f+"r"+p.toString(32)+"";return A.memoizedState=f},useHostTransitionStatus:qf,useFormState:Hf,useActionState:Hf,useOptimistic:function(A){var f=ni();f.memoizedState=f.baseState=A;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=p,f=Sb.bind(null,fr,!0,p),p.dispatch=f,[A,f]},useMemoCache:cu,useCacheRefresh:function(){return ni().memoizedState=xp.bind(null,fr)}},eB={readContext:Ya,use:_i,useCallback:pp,useContext:Ya,useEffect:_1,useImperativeHandle:hp,useInsertionEffect:fp,useLayoutEffect:lA,useMemo:T1,useReducer:Pf,useRef:o0,useState:function(){return Pf(Si)},useDebugValue:mp,useDeferredValue:function(A,f){var p=ua();return l0(p,br.memoizedState,A,f)},useTransition:function(){var A=Pf(Si)[0],f=ua().memoizedState;return[typeof A=="boolean"?A:lu(A),f]},useSyncExternalStore:jf,useId:gp,useHostTransitionStatus:qf,useFormState:i0,useActionState:i0,useOptimistic:function(A,f){var p=ua();return fc(p,br,A,f)},useMemoCache:cu,useCacheRefresh:B1},A9={readContext:Ya,use:_i,useCallback:pp,useContext:Ya,useEffect:_1,useImperativeHandle:hp,useInsertionEffect:fp,useLayoutEffect:lA,useMemo:T1,useReducer:a0,useRef:o0,useState:function(){return a0(Si)},useDebugValue:mp,useDeferredValue:function(A,f){var p=ua();return br===null?cA(p,A,f):l0(p,br.memoizedState,A,f)},useTransition:function(){var A=a0(Si)[0],f=ua().memoizedState;return[typeof A=="boolean"?A:lu(A),f]},useSyncExternalStore:jf,useId:gp,useHostTransitionStatus:qf,useFormState:E1,useActionState:E1,useOptimistic:function(A,f){var p=ua();return br!==null?fc(p,br,A,f):(p.baseState=A,[A,p.queue.dispatch])},useMemoCache:cu,useCacheRefresh:B1},c0=null,wp=0;function I1(A){var f=wp;return wp+=1,c0===null&&(c0=[]),Ye(c0,A,f)}function bp(A,f){f=f.props.ref,A.ref=f!==void 0?f:null}function F1(A,f){throw f.$$typeof===h?Error(n(525)):(A=Object.prototype.toString.call(f),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":A)))}function tB(A){var f=A._init;return f(A._payload)}function rB(A){function f(Ge,Pe){if(A){var Xe=Ge.deletions;Xe===null?(Ge.deletions=[Pe],Ge.flags|=16):Xe.push(Pe)}}function p(Ge,Pe){if(!A)return null;for(;Pe!==null;)f(Ge,Pe),Pe=Pe.sibling;return null}function w(Ge){for(var Pe=new Map;Ge!==null;)Ge.key!==null?Pe.set(Ge.key,Ge):Pe.set(Ge.index,Ge),Ge=Ge.sibling;return Pe}function F(Ge,Pe){return Ge=bl(Ge,Pe),Ge.index=0,Ge.sibling=null,Ge}function H(Ge,Pe,Xe){return Ge.index=Xe,A?(Xe=Ge.alternate,Xe!==null?(Xe=Xe.index,Xe<Pe?(Ge.flags|=67108866,Pe):Xe):(Ge.flags|=67108866,Pe)):(Ge.flags|=1048576,Pe)}function le(Ge){return A&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function we(Ge,Pe,Xe,mt){return Pe===null||Pe.tag!==6?(Pe=Yh(Xe,Ge.mode,mt),Pe.return=Ge,Pe):(Pe=F(Pe,Xe),Pe.return=Ge,Pe)}function De(Ge,Pe,Xe,mt){var tr=Xe.type;return tr===b?dt(Ge,Pe,Xe.props.children,mt,Xe.key):Pe!==null&&(Pe.elementType===tr||typeof tr=="object"&&tr!==null&&tr.$$typeof===S&&tB(tr)===Pe.type)?(Pe=F(Pe,Xe.props),bp(Pe,Xe),Pe.return=Ge,Pe):(Pe=tA(Xe.type,Xe.key,Xe.props,null,Ge.mode,mt),bp(Pe,Xe),Pe.return=Ge,Pe)}function et(Ge,Pe,Xe,mt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==Xe.containerInfo||Pe.stateNode.implementation!==Xe.implementation?(Pe=Ff(Xe,Ge.mode,mt),Pe.return=Ge,Pe):(Pe=F(Pe,Xe.children||[]),Pe.return=Ge,Pe)}function dt(Ge,Pe,Xe,mt,tr){return Pe===null||Pe.tag!==7?(Pe=ic(Xe,Ge.mode,mt,tr),Pe.return=Ge,Pe):(Pe=F(Pe,Xe),Pe.return=Ge,Pe)}function wt(Ge,Pe,Xe){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=Yh(""+Pe,Ge.mode,Xe),Pe.return=Ge,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case m:return Xe=tA(Pe.type,Pe.key,Pe.props,null,Ge.mode,Xe),bp(Xe,Pe),Xe.return=Ge,Xe;case g:return Pe=Ff(Pe,Ge.mode,Xe),Pe.return=Ge,Pe;case S:var mt=Pe._init;return Pe=mt(Pe._payload),wt(Ge,Pe,Xe)}if(re(Pe)||I(Pe))return Pe=ic(Pe,Ge.mode,Xe,null),Pe.return=Ge,Pe;if(typeof Pe.then=="function")return wt(Ge,I1(Pe),Xe);if(Pe.$$typeof===L)return wt(Ge,su(Ge,Pe),Xe);F1(Ge,Pe)}return null}function rt(Ge,Pe,Xe,mt){var tr=Pe!==null?Pe.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return tr!==null?null:we(Ge,Pe,""+Xe,mt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case m:return Xe.key===tr?De(Ge,Pe,Xe,mt):null;case g:return Xe.key===tr?et(Ge,Pe,Xe,mt):null;case S:return tr=Xe._init,Xe=tr(Xe._payload),rt(Ge,Pe,Xe,mt)}if(re(Xe)||I(Xe))return tr!==null?null:dt(Ge,Pe,Xe,mt,null);if(typeof Xe.then=="function")return rt(Ge,Pe,I1(Xe),mt);if(Xe.$$typeof===L)return rt(Ge,Pe,su(Ge,Xe),mt);F1(Ge,Xe)}return null}function nt(Ge,Pe,Xe,mt,tr){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Ge=Ge.get(Xe)||null,we(Pe,Ge,""+mt,tr);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case m:return Ge=Ge.get(mt.key===null?Xe:mt.key)||null,De(Pe,Ge,mt,tr);case g:return Ge=Ge.get(mt.key===null?Xe:mt.key)||null,et(Pe,Ge,mt,tr);case S:var en=mt._init;return mt=en(mt._payload),nt(Ge,Pe,Xe,mt,tr)}if(re(mt)||I(mt))return Ge=Ge.get(Xe)||null,dt(Pe,Ge,mt,tr,null);if(typeof mt.then=="function")return nt(Ge,Pe,Xe,I1(mt),tr);if(mt.$$typeof===L)return nt(Ge,Pe,Xe,su(Pe,mt),tr);F1(Pe,mt)}return null}function Br(Ge,Pe,Xe,mt){for(var tr=null,en=null,ir=Pe,xr=Pe=0,qs=null;ir!==null&&xr<Xe.length;xr++){ir.index>xr?(qs=ir,ir=null):qs=ir.sibling;var kn=rt(Ge,ir,Xe[xr],mt);if(kn===null){ir===null&&(ir=qs);break}A&&ir&&kn.alternate===null&&f(Ge,ir),Pe=H(kn,Pe,xr),en===null?tr=kn:en.sibling=kn,en=kn,ir=qs}if(xr===Xe.length)return p(Ge,ir),bn&&nA(Ge,xr),tr;if(ir===null){for(;xr<Xe.length;xr++)ir=wt(Ge,Xe[xr],mt),ir!==null&&(Pe=H(ir,Pe,xr),en===null?tr=ir:en.sibling=ir,en=ir);return bn&&nA(Ge,xr),tr}for(ir=w(ir);xr<Xe.length;xr++)qs=nt(ir,Ge,xr,Xe[xr],mt),qs!==null&&(A&&qs.alternate!==null&&ir.delete(qs.key===null?xr:qs.key),Pe=H(qs,Pe,xr),en===null?tr=qs:en.sibling=qs,en=qs);return A&&ir.forEach(function(Sd){return f(Ge,Sd)}),bn&&nA(Ge,xr),tr}function pr(Ge,Pe,Xe,mt){if(Xe==null)throw Error(n(151));for(var tr=null,en=null,ir=Pe,xr=Pe=0,qs=null,kn=Xe.next();ir!==null&&!kn.done;xr++,kn=Xe.next()){ir.index>xr?(qs=ir,ir=null):qs=ir.sibling;var Sd=rt(Ge,ir,kn.value,mt);if(Sd===null){ir===null&&(ir=qs);break}A&&ir&&Sd.alternate===null&&f(Ge,ir),Pe=H(Sd,Pe,xr),en===null?tr=Sd:en.sibling=Sd,en=Sd,ir=qs}if(kn.done)return p(Ge,ir),bn&&nA(Ge,xr),tr;if(ir===null){for(;!kn.done;xr++,kn=Xe.next())kn=wt(Ge,kn.value,mt),kn!==null&&(Pe=H(kn,Pe,xr),en===null?tr=kn:en.sibling=kn,en=kn);return bn&&nA(Ge,xr),tr}for(ir=w(ir);!kn.done;xr++,kn=Xe.next())kn=nt(ir,Ge,xr,kn.value,mt),kn!==null&&(A&&kn.alternate!==null&&ir.delete(kn.key===null?xr:kn.key),Pe=H(kn,Pe,xr),en===null?tr=kn:en.sibling=kn,en=kn);return A&&ir.forEach(function(dH){return f(Ge,dH)}),bn&&nA(Ge,xr),tr}function ea(Ge,Pe,Xe,mt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===b&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case m:e:{for(var tr=Xe.key;Pe!==null;){if(Pe.key===tr){if(tr=Xe.type,tr===b){if(Pe.tag===7){p(Ge,Pe.sibling),mt=F(Pe,Xe.props.children),mt.return=Ge,Ge=mt;break e}}else if(Pe.elementType===tr||typeof tr=="object"&&tr!==null&&tr.$$typeof===S&&tB(tr)===Pe.type){p(Ge,Pe.sibling),mt=F(Pe,Xe.props),bp(mt,Xe),mt.return=Ge,Ge=mt;break e}p(Ge,Pe);break}else f(Ge,Pe);Pe=Pe.sibling}Xe.type===b?(mt=ic(Xe.props.children,Ge.mode,mt,Xe.key),mt.return=Ge,Ge=mt):(mt=tA(Xe.type,Xe.key,Xe.props,null,Ge.mode,mt),bp(mt,Xe),mt.return=Ge,Ge=mt)}return le(Ge);case g:e:{for(tr=Xe.key;Pe!==null;){if(Pe.key===tr)if(Pe.tag===4&&Pe.stateNode.containerInfo===Xe.containerInfo&&Pe.stateNode.implementation===Xe.implementation){p(Ge,Pe.sibling),mt=F(Pe,Xe.children||[]),mt.return=Ge,Ge=mt;break e}else{p(Ge,Pe);break}else f(Ge,Pe);Pe=Pe.sibling}mt=Ff(Xe,Ge.mode,mt),mt.return=Ge,Ge=mt}return le(Ge);case S:return tr=Xe._init,Xe=tr(Xe._payload),ea(Ge,Pe,Xe,mt)}if(re(Xe))return Br(Ge,Pe,Xe,mt);if(I(Xe)){if(tr=I(Xe),typeof tr!="function")throw Error(n(150));return Xe=tr.call(Xe),pr(Ge,Pe,Xe,mt)}if(typeof Xe.then=="function")return ea(Ge,Pe,I1(Xe),mt);if(Xe.$$typeof===L)return ea(Ge,Pe,su(Ge,Xe),mt);F1(Ge,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint"?(Xe=""+Xe,Pe!==null&&Pe.tag===6?(p(Ge,Pe.sibling),mt=F(Pe,Xe),mt.return=Ge,Ge=mt):(p(Ge,Pe),mt=Yh(Xe,Ge.mode,mt),mt.return=Ge,Ge=mt),le(Ge)):p(Ge,Pe)}return function(Ge,Pe,Xe,mt){try{wp=0;var tr=ea(Ge,Pe,Xe,mt);return c0=null,tr}catch(ir){if(ir===he||ir===ve)throw ir;var en=Vs(29,ir,null,Ge.mode);return en.lanes=mt,en.return=Ge,en}finally{}}}var u0=rB(!0),nB=rB(!1),Bl=ie(null),uu=null;function Ad(A){var f=A.alternate;X(Rs,Rs.current&1),X(Bl,A),uu===null&&(f===null||qr.current!==null||f.memoizedState!==null)&&(uu=A)}function aB(A){if(A.tag===22){if(X(Rs,Rs.current),X(Bl,A),uu===null){var f=A.alternate;f!==null&&f.memoizedState!==null&&(uu=A)}}else dd()}function dd(){X(Rs,Rs.current),X(Bl,Bl.current)}function uA(A){j(Bl),uu===A&&(uu=null),j(Rs)}var Rs=ie(0);function D1(A){for(var f=A;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||pC(p)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Tb(A,f,p,w){f=A.memoizedState,p=p(w,f),p=p==null?f:d({},f,p),A.memoizedState=p,A.lanes===0&&(A.updateQueue.baseState=p)}var Bb={enqueueSetState:function(A,f,p){A=A._reactInternals;var w=$o(),F=ct(w);F.payload=f,p!=null&&(F.callback=p),f=vt(A,F,w),f!==null&&(Wo(f,A,w),ft(f,A,w))},enqueueReplaceState:function(A,f,p){A=A._reactInternals;var w=$o(),F=ct(w);F.tag=1,F.payload=f,p!=null&&(F.callback=p),f=vt(A,F,w),f!==null&&(Wo(f,A,w),ft(f,A,w))},enqueueForceUpdate:function(A,f){A=A._reactInternals;var p=$o(),w=ct(p);w.tag=2,f!=null&&(w.callback=f),f=vt(A,w,p),f!==null&&(Wo(f,A,p),ft(f,A,p))}};function sB(A,f,p,w,F,H,le){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(w,H,le):f.prototype&&f.prototype.isPureReactComponent?!Kc(p,w)||!Kc(F,H):!0}function iB(A,f,p,w){A=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,w),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,w),f.state!==A&&Bb.enqueueReplaceState(f,f.state,null)}function Kf(A,f){var p=f;if("ref"in f){p={};for(var w in f)w!=="ref"&&(p[w]=f[w])}if(A=A.defaultProps){p===f&&(p=d({},p));for(var F in A)p[F]===void 0&&(p[F]=A[F])}return p}var R1=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function oB(A){R1(A)}function lB(A){console.error(A)}function cB(A){R1(A)}function L1(A,f){try{var p=A.onUncaughtError;p(f.value,{componentStack:f.stack})}catch(w){setTimeout(function(){throw w})}}function uB(A,f,p){try{var w=A.onCaughtError;w(p.value,{componentStack:p.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(F){setTimeout(function(){throw F})}}function Nb(A,f,p){return p=ct(p),p.tag=3,p.payload={element:null},p.callback=function(){L1(A,f)},p}function AB(A){return A=ct(A),A.tag=3,A}function dB(A,f,p,w){var F=p.type.getDerivedStateFromError;if(typeof F=="function"){var H=w.value;A.payload=function(){return F(H)},A.callback=function(){uB(f,p,w)}}var le=p.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(A.callback=function(){uB(f,p,w),typeof F!="function"&&(xd===null?xd=new Set([this]):xd.add(this));var we=w.stack;this.componentDidCatch(w.value,{componentStack:we!==null?we:""})})}function d9(A,f,p,w,F){if(p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(f=p.alternate,f!==null&&sd(f,p,F,!0),p=Bl.current,p!==null){switch(p.tag){case 13:return uu===null?Zb():p.alternate===null&&Qa===0&&(Qa=3),p.flags&=-257,p.flags|=65536,p.lanes=F,w===Ce?p.flags|=16384:(f=p.updateQueue,f===null?p.updateQueue=new Set([w]):f.add(w),tC(A,w,F)),!1;case 22:return p.flags|=65536,w===Ce?p.flags|=16384:(f=p.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([w])},p.updateQueue=f):(p=f.retryQueue,p===null?f.retryQueue=new Set([w]):p.add(w)),tC(A,w,F)),!1}throw Error(n(435,p.tag))}return tC(A,w,F),Zb(),!1}if(bn)return f=Bl.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=F,w!==ip&&(A=Error(n(422),{cause:w}),ad($r(A,p)))):(w!==ip&&(f=Error(n(423),{cause:w}),ad($r(f,p))),A=A.current.alternate,A.flags|=65536,F&=-F,A.lanes|=F,w=$r(w,p),F=Nb(A.stateNode,w,F),Kt(A,F),Qa!==4&&(Qa=2)),!1;var H=Error(n(520),{cause:w});if(H=$r(H,p),Np===null?Np=[H]:Np.push(H),Qa!==4&&(Qa=2),f===null)return!0;w=$r(w,p),p=f;do{switch(p.tag){case 3:return p.flags|=65536,A=F&-F,p.lanes|=A,A=Nb(p.stateNode,w,A),Kt(p,A),!1;case 1:if(f=p.type,H=p.stateNode,(p.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(xd===null||!xd.has(H))))return p.flags|=65536,F&=-F,p.lanes|=F,F=AB(F),dB(F,A,p,w),Kt(p,F),!1}p=p.return}while(p!==null);return!1}var fB=Error(n(461)),zs=!1;function ai(A,f,p,w){f.child=A===null?nB(f,null,p,w):u0(f,A.child,p,w)}function hB(A,f,p,w,F){p=p.render;var H=f.ref;if("ref"in w){var le={};for(var we in w)we!=="ref"&&(le[we]=w[we])}else le=w;return Sl(f),w=Vo(A,f,p,le,H,F),we=ia(),A!==null&&!zs?(Mf(A,f,F),AA(A,f,F)):(bn&&we&&Df(f),f.flags|=1,ai(A,f,w,F),f.child)}function mB(A,f,p,w,F){if(A===null){var H=p.type;return typeof H=="function"&&!rd(H)&&H.defaultProps===void 0&&p.compare===null?(f.tag=15,f.type=H,pB(A,f,H,w,F)):(A=tA(p.type,null,w,f,f.mode,F),A.ref=f.ref,A.return=f,f.child=A)}if(H=A.child,!Mb(A,F)){var le=H.memoizedProps;if(p=p.compare,p=p!==null?p:Kc,p(le,w)&&A.ref===f.ref)return AA(A,f,F)}return f.flags|=1,A=bl(H,w),A.ref=f.ref,A.return=f,f.child=A}function pB(A,f,p,w,F){if(A!==null){var H=A.memoizedProps;if(Kc(H,w)&&A.ref===f.ref)if(zs=!1,f.pendingProps=w=H,Mb(A,F))(A.flags&131072)!==0&&(zs=!0);else return f.lanes=A.lanes,AA(A,f,F)}return kb(A,f,p,w,F)}function gB(A,f,p){var w=f.pendingProps,F=w.children,H=A!==null?A.memoizedState:null;if(w.mode==="hidden"){if((f.flags&128)!==0){if(w=H!==null?H.baseLanes|p:p,A!==null){for(F=f.child=A.child,H=0;F!==null;)H=H|F.lanes|F.childLanes,F=F.sibling;f.childLanes=H&~w}else f.childLanes=0,f.child=null;return xB(A,f,w,p)}if((p&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},A!==null&&ne(f,H!==null?H.cachePool:null),H!==null?Un(f,H):Bn(),aB(f);else return f.lanes=f.childLanes=536870912,xB(A,f,H!==null?H.baseLanes|p:p,p)}else H!==null?(ne(f,H.cachePool),Un(f,H),dd(),f.memoizedState=null):(A!==null&&ne(f,null),Bn(),dd());return ai(A,f,F,p),f.child}function xB(A,f,p,w){var F=q();return F=F===null?null:{parent:Ja._currentValue,pool:F},f.memoizedState={baseLanes:p,cachePool:F},A!==null&&ne(f,null),Bn(),aB(f),A!==null&&sd(A,f,w,!0),null}function U1(A,f){var p=f.ref;if(p===null)A!==null&&A.ref!==null&&(f.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(A===null||A.ref!==p)&&(f.flags|=4194816)}}function kb(A,f,p,w,F){return Sl(f),p=Vo(A,f,p,w,void 0,F),w=ia(),A!==null&&!zs?(Mf(A,f,F),AA(A,f,F)):(bn&&w&&Df(f),f.flags|=1,ai(A,f,p,F),f.child)}function vB(A,f,p,w,F,H){return Sl(f),f.updateQueue=null,p=iA(f,w,p,F),iu(A),w=ia(),A!==null&&!zs?(Mf(A,f,H),AA(A,f,H)):(bn&&w&&Df(f),f.flags|=1,ai(A,f,p,H),f.child)}function yB(A,f,p,w,F){if(Sl(f),f.stateNode===null){var H=gs,le=p.contextType;typeof le=="object"&&le!==null&&(H=Ya(le)),H=new p(w,H),f.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=Bb,f.stateNode=H,H._reactInternals=f,H=f.stateNode,H.props=w,H.state=f.memoizedState,H.refs={},Ue(f),le=p.contextType,H.context=typeof le=="object"&&le!==null?Ya(le):gs,H.state=f.memoizedState,le=p.getDerivedStateFromProps,typeof le=="function"&&(Tb(f,p,le,w),H.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(le=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),le!==H.state&&Bb.enqueueReplaceState(H,H.state,null),Ht(f,w,H,F),ar(),H.state=f.memoizedState),typeof H.componentDidMount=="function"&&(f.flags|=4194308),w=!0}else if(A===null){H=f.stateNode;var we=f.memoizedProps,De=Kf(p,we);H.props=De;var et=H.context,dt=p.contextType;le=gs,typeof dt=="object"&&dt!==null&&(le=Ya(dt));var wt=p.getDerivedStateFromProps;dt=typeof wt=="function"||typeof H.getSnapshotBeforeUpdate=="function",we=f.pendingProps!==we,dt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(we||et!==le)&&iB(f,H,w,le),it=!1;var rt=f.memoizedState;H.state=rt,Ht(f,w,H,F),ar(),et=f.memoizedState,we||rt!==et||it?(typeof wt=="function"&&(Tb(f,p,wt,w),et=f.memoizedState),(De=it||sB(f,p,De,w,rt,et,le))?(dt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(f.flags|=4194308)):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=w,f.memoizedState=et),H.props=w,H.state=et,H.context=le,w=De):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),w=!1)}else{H=f.stateNode,Oe(A,f),le=f.memoizedProps,dt=Kf(p,le),H.props=dt,wt=f.pendingProps,rt=H.context,et=p.contextType,De=gs,typeof et=="object"&&et!==null&&(De=Ya(et)),we=p.getDerivedStateFromProps,(et=typeof we=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(le!==wt||rt!==De)&&iB(f,H,w,De),it=!1,rt=f.memoizedState,H.state=rt,Ht(f,w,H,F),ar();var nt=f.memoizedState;le!==wt||rt!==nt||it||A!==null&&A.dependencies!==null&&t0(A.dependencies)?(typeof we=="function"&&(Tb(f,p,we,w),nt=f.memoizedState),(dt=it||sB(f,p,dt,w,rt,nt,De)||A!==null&&A.dependencies!==null&&t0(A.dependencies))?(et||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(w,nt,De),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(w,nt,De)),typeof H.componentDidUpdate=="function"&&(f.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof H.componentDidUpdate!="function"||le===A.memoizedProps&&rt===A.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&rt===A.memoizedState||(f.flags|=1024),f.memoizedProps=w,f.memoizedState=nt),H.props=w,H.state=nt,H.context=De,w=dt):(typeof H.componentDidUpdate!="function"||le===A.memoizedProps&&rt===A.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&rt===A.memoizedState||(f.flags|=1024),w=!1)}return H=w,U1(A,f),w=(f.flags&128)!==0,H||w?(H=f.stateNode,p=w&&typeof p.getDerivedStateFromError!="function"?null:H.render(),f.flags|=1,A!==null&&w?(f.child=u0(f,A.child,null,F),f.child=u0(f,null,p,F)):ai(A,f,p,F),f.memoizedState=H.state,A=f.child):A=AA(A,f,F),A}function wB(A,f,p,w){return Zi(),f.flags|=256,ai(A,f,p,w),f.child}var Ib={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fb(A){return{baseLanes:A,cachePool:ue()}}function Db(A,f,p){return A=A!==null?A.childLanes&~p:0,f&&(A|=Nl),A}function bB(A,f,p){var w=f.pendingProps,F=!1,H=(f.flags&128)!==0,le;if((le=H)||(le=A!==null&&A.memoizedState===null?!1:(Rs.current&2)!==0),le&&(F=!0,f.flags&=-129),le=(f.flags&32)!==0,f.flags&=-33,A===null){if(bn){if(F?Ad(f):dd(),bn){var we=va,De;if(De=we){e:{for(De=we,we=Cl;De.nodeType!==8;){if(!we){we=null;break e}if(De=xc(De.nextSibling),De===null){we=null;break e}}we=De}we!==null?(f.memoizedState={dehydrated:we,treeContext:rA!==null?{id:lc,overflow:cc}:null,retryLane:536870912,hydrationErrors:null},De=Vs(18,null,null,0),De.stateNode=we,De.return=f,f.child=De,Xa=f,va=null,De=!0):De=!1}De||aA(f)}if(we=f.memoizedState,we!==null&&(we=we.dehydrated,we!==null))return pC(we)?f.lanes=32:f.lanes=536870912,null;uA(f)}return we=w.children,w=w.fallback,F?(dd(),F=f.mode,we=M1({mode:"hidden",children:we},F),w=ic(w,F,p,null),we.return=f,w.return=f,we.sibling=w,f.child=we,F=f.child,F.memoizedState=Fb(p),F.childLanes=Db(A,le,p),f.memoizedState=Ib,w):(Ad(f),Rb(f,we))}if(De=A.memoizedState,De!==null&&(we=De.dehydrated,we!==null)){if(H)f.flags&256?(Ad(f),f.flags&=-257,f=Lb(A,f,p)):f.memoizedState!==null?(dd(),f.child=A.child,f.flags|=128,f=null):(dd(),F=w.fallback,we=f.mode,w=M1({mode:"visible",children:w.children},we),F=ic(F,we,p,null),F.flags|=2,w.return=f,F.return=f,w.sibling=F,f.child=w,u0(f,A.child,null,p),w=f.child,w.memoizedState=Fb(p),w.childLanes=Db(A,le,p),f.memoizedState=Ib,f=F);else if(Ad(f),pC(we)){if(le=we.nextSibling&&we.nextSibling.dataset,le)var et=le.dgst;le=et,w=Error(n(419)),w.stack="",w.digest=le,ad({value:w,source:null,stack:null}),f=Lb(A,f,p)}else if(zs||sd(A,f,p,!1),le=(p&A.childLanes)!==0,zs||le){if(le=oa,le!==null&&(w=p&-p,w=(w&42)!==0?1:fs(w),w=(w&(le.suspendedLanes|p))!==0?0:w,w!==0&&w!==De.retryLane))throw De.retryLane=w,sc(A,w),Wo(le,A,w),fB;we.data==="$?"||Zb(),f=Lb(A,f,p)}else we.data==="$?"?(f.flags|=192,f.child=A.child,f=null):(A=De.treeContext,va=xc(we.nextSibling),Xa=f,bn=!0,nu=null,Cl=!1,A!==null&&(vo[Ji++]=lc,vo[Ji++]=cc,vo[Ji++]=rA,lc=A.id,cc=A.overflow,rA=f),f=Rb(f,w.children),f.flags|=4096);return f}return F?(dd(),F=w.fallback,we=f.mode,De=A.child,et=De.sibling,w=bl(De,{mode:"hidden",children:w.children}),w.subtreeFlags=De.subtreeFlags&65011712,et!==null?F=bl(et,F):(F=ic(F,we,p,null),F.flags|=2),F.return=f,w.return=f,w.sibling=F,f.child=w,w=F,F=f.child,we=A.child.memoizedState,we===null?we=Fb(p):(De=we.cachePool,De!==null?(et=Ja._currentValue,De=De.parent!==et?{parent:et,pool:et}:De):De=ue(),we={baseLanes:we.baseLanes|p,cachePool:De}),F.memoizedState=we,F.childLanes=Db(A,le,p),f.memoizedState=Ib,w):(Ad(f),p=A.child,A=p.sibling,p=bl(p,{mode:"visible",children:w.children}),p.return=f,p.sibling=null,A!==null&&(le=f.deletions,le===null?(f.deletions=[A],f.flags|=16):le.push(A)),f.child=p,f.memoizedState=null,p)}function Rb(A,f){return f=M1({mode:"visible",children:f},A.mode),f.return=A,A.child=f}function M1(A,f){return A=Vs(22,A,null,f),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function Lb(A,f,p){return u0(f,A.child,null,p),A=Rb(f,f.pendingProps.children),A.flags|=2,f.memoizedState=null,A}function CB(A,f,p){A.lanes|=f;var w=A.alternate;w!==null&&(w.lanes|=f),Zh(A.return,f,p)}function Ub(A,f,p,w,F){var H=A.memoizedState;H===null?A.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:F}:(H.isBackwards=f,H.rendering=null,H.renderingStartTime=0,H.last=w,H.tail=p,H.tailMode=F)}function EB(A,f,p){var w=f.pendingProps,F=w.revealOrder,H=w.tail;if(ai(A,f,w.children,p),w=Rs.current,(w&2)!==0)w=w&1|2,f.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=f.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&CB(A,p,f);else if(A.tag===19)CB(A,p,f);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break e;for(;A.sibling===null;){if(A.return===null||A.return===f)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}w&=1}switch(X(Rs,w),F){case"forwards":for(p=f.child,F=null;p!==null;)A=p.alternate,A!==null&&D1(A)===null&&(F=p),p=p.sibling;p=F,p===null?(F=f.child,f.child=null):(F=p.sibling,p.sibling=null),Ub(f,!1,F,p,H);break;case"backwards":for(p=null,F=f.child,f.child=null;F!==null;){if(A=F.alternate,A!==null&&D1(A)===null){f.child=F;break}A=F.sibling,F.sibling=p,p=F,F=A}Ub(f,!0,p,null,H);break;case"together":Ub(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function AA(A,f,p){if(A!==null&&(f.dependencies=A.dependencies),gd|=f.lanes,(p&f.childLanes)===0)if(A!==null){if(sd(A,f,p,!1),(p&f.childLanes)===0)return null}else return null;if(A!==null&&f.child!==A.child)throw Error(n(153));if(f.child!==null){for(A=f.child,p=bl(A,A.pendingProps),f.child=p,p.return=f;A.sibling!==null;)A=A.sibling,p=p.sibling=bl(A,A.pendingProps),p.return=f;p.sibling=null}return f.child}function Mb(A,f){return(A.lanes&f)!==0?!0:(A=A.dependencies,!!(A!==null&&t0(A)))}function f9(A,f,p){switch(f.tag){case 3:me(f,f.stateNode.containerInfo),au(f,Ja,A.memoizedState.cache),Zi();break;case 27:case 5:Te(f);break;case 4:me(f,f.stateNode.containerInfo);break;case 10:au(f,f.type,f.memoizedProps.value);break;case 13:var w=f.memoizedState;if(w!==null)return w.dehydrated!==null?(Ad(f),f.flags|=128,null):(p&f.child.childLanes)!==0?bB(A,f,p):(Ad(f),A=AA(A,f,p),A!==null?A.sibling:null);Ad(f);break;case 19:var F=(A.flags&128)!==0;if(w=(p&f.childLanes)!==0,w||(sd(A,f,p,!1),w=(p&f.childLanes)!==0),F){if(w)return EB(A,f,p);f.flags|=128}if(F=f.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),X(Rs,Rs.current),w)break;return null;case 22:case 23:return f.lanes=0,gB(A,f,p);case 24:au(f,Ja,A.memoizedState.cache)}return AA(A,f,p)}function _B(A,f,p){if(A!==null)if(A.memoizedProps!==f.pendingProps)zs=!0;else{if(!Mb(A,p)&&(f.flags&128)===0)return zs=!1,f9(A,f,p);zs=(A.flags&131072)!==0}else zs=!1,bn&&(f.flags&1048576)!==0&&f1(f,Jh,f.index);switch(f.lanes=0,f.tag){case 16:e:{A=f.pendingProps;var w=f.elementType,F=w._init;if(w=F(w._payload),f.type=w,typeof w=="function")rd(w)?(A=Kf(w,A),f.tag=1,f=yB(null,f,w,A,p)):(f.tag=0,f=kb(null,f,w,A,p));else{if(w!=null){if(F=w.$$typeof,F===M){f.tag=11,f=hB(null,f,w,A,p);break e}else if(F===C){f.tag=14,f=mB(null,f,w,A,p);break e}}throw f=z(w)||w,Error(n(306,f,""))}}return f;case 0:return kb(A,f,f.type,f.pendingProps,p);case 1:return w=f.type,F=Kf(w,f.pendingProps),yB(A,f,w,F,p);case 3:e:{if(me(f,f.stateNode.containerInfo),A===null)throw Error(n(387));w=f.pendingProps;var H=f.memoizedState;F=H.element,Oe(A,f),Ht(f,w,null,p);var le=f.memoizedState;if(w=le.cache,au(f,Ja,w),w!==H.cache&&e0(f,[Ja],p,!0),ar(),w=le.element,H.isDehydrated)if(H={element:w,isDehydrated:!1,cache:le.cache},f.updateQueue.baseState=H,f.memoizedState=H,f.flags&256){f=wB(A,f,w,p);break e}else if(w!==F){F=$r(Error(n(424)),f),ad(F),f=wB(A,f,w,p);break e}else{switch(A=f.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(va=xc(A.firstChild),Xa=f,bn=!0,nu=null,Cl=!0,p=nB(f,null,w,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Zi(),w===F){f=AA(A,f,p);break e}ai(A,f,w,p)}f=f.child}return f;case 26:return U1(A,f),A===null?(p=NN(f.type,null,f.pendingProps,null))?f.memoizedState=p:bn||(p=f.type,A=f.pendingProps,w=Y1(ce.current).createElement(p),w[fn]=f,w[an]=A,ii(w,p,A),He(w),f.stateNode=w):f.memoizedState=NN(f.type,A.memoizedProps,f.pendingProps,A.memoizedState),null;case 27:return Te(f),A===null&&bn&&(w=f.stateNode=SN(f.type,f.pendingProps,ce.current),Xa=f,Cl=!0,F=va,wd(f.type)?(gC=F,va=xc(w.firstChild)):va=F),ai(A,f,f.pendingProps.children,p),U1(A,f),A===null&&(f.flags|=4194304),f.child;case 5:return A===null&&bn&&((F=w=va)&&(w=Q9(w,f.type,f.pendingProps,Cl),w!==null?(f.stateNode=w,Xa=f,va=xc(w.firstChild),Cl=!1,F=!0):F=!1),F||aA(f)),Te(f),F=f.type,H=f.pendingProps,le=A!==null?A.memoizedProps:null,w=H.children,fC(F,H)?w=null:le!==null&&fC(F,le)&&(f.flags|=32),f.memoizedState!==null&&(F=Vo(A,f,ou,null,null,p),Pp._currentValue=F),U1(A,f),ai(A,f,w,p),f.child;case 6:return A===null&&bn&&((A=p=va)&&(p=H9(p,f.pendingProps,Cl),p!==null?(f.stateNode=p,Xa=f,va=null,A=!0):A=!1),A||aA(f)),null;case 13:return bB(A,f,p);case 4:return me(f,f.stateNode.containerInfo),w=f.pendingProps,A===null?f.child=u0(f,null,w,p):ai(A,f,w,p),f.child;case 11:return hB(A,f,f.type,f.pendingProps,p);case 7:return ai(A,f,f.pendingProps,p),f.child;case 8:return ai(A,f,f.pendingProps.children,p),f.child;case 12:return ai(A,f,f.pendingProps.children,p),f.child;case 10:return w=f.pendingProps,au(f,f.type,w.value),ai(A,f,w.children,p),f.child;case 9:return F=f.type._context,w=f.pendingProps.children,Sl(f),F=Ya(F),w=w(F),f.flags|=1,ai(A,f,w,p),f.child;case 14:return mB(A,f,f.type,f.pendingProps,p);case 15:return pB(A,f,f.type,f.pendingProps,p);case 19:return EB(A,f,p);case 31:return w=f.pendingProps,p=f.mode,w={mode:w.mode,children:w.children},A===null?(p=M1(w,p),p.ref=f.ref,f.child=p,p.return=f,f=p):(p=bl(A.child,w),p.ref=f.ref,f.child=p,p.return=f,f=p),f;case 22:return gB(A,f,p);case 24:return Sl(f),w=Ya(Ja),A===null?(F=q(),F===null&&(F=oa,H=op(),F.pooledCache=H,H.refCount++,H!==null&&(F.pooledCacheLanes|=p),F=H),f.memoizedState={parent:w,cache:F},Ue(f),au(f,Ja,F)):((A.lanes&p)!==0&&(Oe(A,f),Ht(f,null,null,p),ar()),F=A.memoizedState,H=f.memoizedState,F.parent!==w?(F={parent:w,cache:w},f.memoizedState=F,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=F),au(f,Ja,w)):(w=H.cache,au(f,Ja,w),w!==F.cache&&e0(f,[Ja],p,!0))),ai(A,f,f.pendingProps.children,p),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function dA(A){A.flags|=4}function SB(A,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!RN(f)){if(f=Bl.current,f!==null&&((yn&4194048)===yn?uu!==null:(yn&62914560)!==yn&&(yn&536870912)===0||f!==uu))throw $e=Ce,pe;A.flags|=8192}}function P1(A,f){f!==null&&(A.flags|=4),A.flags&16384&&(f=A.tag!==22?nn():536870912,A.lanes|=f,h0|=f)}function Cp(A,f){if(!bn)switch(A.tailMode){case"hidden":f=A.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?A.tail=null:p.sibling=null;break;case"collapsed":p=A.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?f||A.tail===null?A.tail=null:A.tail.sibling=null:w.sibling=null}}function Na(A){var f=A.alternate!==null&&A.alternate.child===A.child,p=0,w=0;if(f)for(var F=A.child;F!==null;)p|=F.lanes|F.childLanes,w|=F.subtreeFlags&65011712,w|=F.flags&65011712,F.return=A,F=F.sibling;else for(F=A.child;F!==null;)p|=F.lanes|F.childLanes,w|=F.subtreeFlags,w|=F.flags,F.return=A,F=F.sibling;return A.subtreeFlags|=w,A.childLanes=p,f}function h9(A,f,p){var w=f.pendingProps;switch(Rf(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Na(f),null;case 1:return Na(f),null;case 3:return p=f.stateNode,w=null,A!==null&&(w=A.memoizedState.cache),f.memoizedState.cache!==w&&(f.flags|=2048),_l(Ja),ge(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(A===null||A.child===null)&&(ri(f)?dA(f):A===null||A.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,m1())),Na(f),null;case 26:return p=f.memoizedState,A===null?(dA(f),p!==null?(Na(f),SB(f,p)):(Na(f),f.flags&=-16777217)):p?p!==A.memoizedState?(dA(f),Na(f),SB(f,p)):(Na(f),f.flags&=-16777217):(A.memoizedProps!==w&&dA(f),Na(f),f.flags&=-16777217),null;case 27:xe(f),p=ce.current;var F=f.type;if(A!==null&&f.stateNode!=null)A.memoizedProps!==w&&dA(f);else{if(!w){if(f.stateNode===null)throw Error(n(166));return Na(f),null}A=Z.current,ri(f)?h1(f):(A=SN(F,w,p),f.stateNode=A,dA(f))}return Na(f),null;case 5:if(xe(f),p=f.type,A!==null&&f.stateNode!=null)A.memoizedProps!==w&&dA(f);else{if(!w){if(f.stateNode===null)throw Error(n(166));return Na(f),null}if(A=Z.current,ri(f))h1(f);else{switch(F=Y1(ce.current),A){case 1:A=F.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:A=F.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":A=F.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":A=F.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":A=F.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof w.is=="string"?F.createElement("select",{is:w.is}):F.createElement("select"),w.multiple?A.multiple=!0:w.size&&(A.size=w.size);break;default:A=typeof w.is=="string"?F.createElement(p,{is:w.is}):F.createElement(p)}}A[fn]=f,A[an]=w;e:for(F=f.child;F!==null;){if(F.tag===5||F.tag===6)A.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===f)break e;for(;F.sibling===null;){if(F.return===null||F.return===f)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}f.stateNode=A;e:switch(ii(A,p,w),p){case"button":case"input":case"select":case"textarea":A=!!w.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&dA(f)}}return Na(f),f.flags&=-16777217,null;case 6:if(A&&f.stateNode!=null)A.memoizedProps!==w&&dA(f);else{if(typeof w!="string"&&f.stateNode===null)throw Error(n(166));if(A=ce.current,ri(f)){if(A=f.stateNode,p=f.memoizedProps,w=null,F=Xa,F!==null)switch(F.tag){case 27:case 5:w=F.memoizedProps}A[fn]=f,A=!!(A.nodeValue===p||w!==null&&w.suppressHydrationWarning===!0||vN(A.nodeValue,p)),A||aA(f)}else A=Y1(A).createTextNode(w),A[fn]=f,f.stateNode=A}return Na(f),null;case 13:if(w=f.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(F=ri(f),w!==null&&w.dehydrated!==null){if(A===null){if(!F)throw Error(n(318));if(F=f.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(n(317));F[fn]=f}else Zi(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Na(f),F=!1}else F=m1(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=F),F=!0;if(!F)return f.flags&256?(uA(f),f):(uA(f),null)}if(uA(f),(f.flags&128)!==0)return f.lanes=p,f;if(p=w!==null,A=A!==null&&A.memoizedState!==null,p){w=f.child,F=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(F=w.alternate.memoizedState.cachePool.pool);var H=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(H=w.memoizedState.cachePool.pool),H!==F&&(w.flags|=2048)}return p!==A&&p&&(f.child.flags|=8192),P1(f,f.updateQueue),Na(f),null;case 4:return ge(),A===null&&lC(f.stateNode.containerInfo),Na(f),null;case 10:return _l(f.type),Na(f),null;case 19:if(j(Rs),F=f.memoizedState,F===null)return Na(f),null;if(w=(f.flags&128)!==0,H=F.rendering,H===null)if(w)Cp(F,!1);else{if(Qa!==0||A!==null&&(A.flags&128)!==0)for(A=f.child;A!==null;){if(H=D1(A),H!==null){for(f.flags|=128,Cp(F,!1),A=H.updateQueue,f.updateQueue=A,P1(f,A),f.subtreeFlags=0,A=p,p=f.child;p!==null;)If(p,A),p=p.sibling;return X(Rs,Rs.current&1|2),f.child}A=A.sibling}F.tail!==null&&je()>Q1&&(f.flags|=128,w=!0,Cp(F,!1),f.lanes=4194304)}else{if(!w)if(A=D1(H),A!==null){if(f.flags|=128,w=!0,A=A.updateQueue,f.updateQueue=A,P1(f,A),Cp(F,!0),F.tail===null&&F.tailMode==="hidden"&&!H.alternate&&!bn)return Na(f),null}else 2*je()-F.renderingStartTime>Q1&&p!==536870912&&(f.flags|=128,w=!0,Cp(F,!1),f.lanes=4194304);F.isBackwards?(H.sibling=f.child,f.child=H):(A=F.last,A!==null?A.sibling=H:f.child=H,F.last=H)}return F.tail!==null?(f=F.tail,F.rendering=f,F.tail=f.sibling,F.renderingStartTime=je(),f.sibling=null,A=Rs.current,X(Rs,w?A&1|2:A&1),f):(Na(f),null);case 22:case 23:return uA(f),Ir(),w=f.memoizedState!==null,A!==null?A.memoizedState!==null!==w&&(f.flags|=8192):w&&(f.flags|=8192),w?(p&536870912)!==0&&(f.flags&128)===0&&(Na(f),f.subtreeFlags&6&&(f.flags|=8192)):Na(f),p=f.updateQueue,p!==null&&P1(f,p.retryQueue),p=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(p=A.memoizedState.cachePool.pool),w=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==p&&(f.flags|=2048),A!==null&&j(U),null;case 24:return p=null,A!==null&&(p=A.memoizedState.cache),f.memoizedState.cache!==p&&(f.flags|=2048),_l(Ja),Na(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function m9(A,f){switch(Rf(f),f.tag){case 1:return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 3:return _l(Ja),ge(),A=f.flags,(A&65536)!==0&&(A&128)===0?(f.flags=A&-65537|128,f):null;case 26:case 27:case 5:return xe(f),null;case 13:if(uA(f),A=f.memoizedState,A!==null&&A.dehydrated!==null){if(f.alternate===null)throw Error(n(340));Zi()}return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 19:return j(Rs),null;case 4:return ge(),null;case 10:return _l(f.type),null;case 22:case 23:return uA(f),Ir(),A!==null&&j(U),A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 24:return _l(Ja),null;case 25:return null;default:return null}}function TB(A,f){switch(Rf(f),f.tag){case 3:_l(Ja),ge();break;case 26:case 27:case 5:xe(f);break;case 4:ge();break;case 13:uA(f);break;case 19:j(Rs);break;case 10:_l(f.type);break;case 22:case 23:uA(f),Ir(),A!==null&&j(U);break;case 24:_l(Ja)}}function Ep(A,f){try{var p=f.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var F=w.next;p=F;do{if((p.tag&A)===A){w=void 0;var H=p.create,le=p.inst;w=H(),le.destroy=w}p=p.next}while(p!==F)}}catch(we){aa(f,f.return,we)}}function fd(A,f,p){try{var w=f.updateQueue,F=w!==null?w.lastEffect:null;if(F!==null){var H=F.next;w=H;do{if((w.tag&A)===A){var le=w.inst,we=le.destroy;if(we!==void 0){le.destroy=void 0,F=f;var De=p,et=we;try{et()}catch(dt){aa(F,De,dt)}}}w=w.next}while(w!==H)}}catch(dt){aa(f,f.return,dt)}}function BB(A){var f=A.updateQueue;if(f!==null){var p=A.stateNode;try{Tn(f,p)}catch(w){aa(A,A.return,w)}}}function NB(A,f,p){p.props=Kf(A.type,A.memoizedProps),p.state=A.memoizedState;try{p.componentWillUnmount()}catch(w){aa(A,f,w)}}function _p(A,f){try{var p=A.ref;if(p!==null){switch(A.tag){case 26:case 27:case 5:var w=A.stateNode;break;case 30:w=A.stateNode;break;default:w=A.stateNode}typeof p=="function"?A.refCleanup=p(w):p.current=w}}catch(F){aa(A,f,F)}}function Au(A,f){var p=A.ref,w=A.refCleanup;if(p!==null)if(typeof w=="function")try{w()}catch(F){aa(A,f,F)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(F){aa(A,f,F)}else p.current=null}function kB(A){var f=A.type,p=A.memoizedProps,w=A.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":p.autoFocus&&w.focus();break e;case"img":p.src?w.src=p.src:p.srcSet&&(w.srcset=p.srcSet)}}catch(F){aa(A,A.return,F)}}function Pb(A,f,p){try{var w=A.stateNode;U9(w,A.type,p,f),w[an]=f}catch(F){aa(A,A.return,F)}}function IB(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&wd(A.type)||A.tag===4}function jb(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||IB(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&wd(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Ob(A,f,p){var w=A.tag;if(w===5||w===6)A=A.stateNode,f?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(A,f):(f=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,f.appendChild(A),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=X1));else if(w!==4&&(w===27&&wd(A.type)&&(p=A.stateNode,f=null),A=A.child,A!==null))for(Ob(A,f,p),A=A.sibling;A!==null;)Ob(A,f,p),A=A.sibling}function j1(A,f,p){var w=A.tag;if(w===5||w===6)A=A.stateNode,f?p.insertBefore(A,f):p.appendChild(A);else if(w!==4&&(w===27&&wd(A.type)&&(p=A.stateNode),A=A.child,A!==null))for(j1(A,f,p),A=A.sibling;A!==null;)j1(A,f,p),A=A.sibling}function FB(A){var f=A.stateNode,p=A.memoizedProps;try{for(var w=A.type,F=f.attributes;F.length;)f.removeAttributeNode(F[0]);ii(f,w,p),f[fn]=A,f[an]=p}catch(H){aa(A,A.return,H)}}var fA=!1,es=!1,Qb=!1,DB=typeof WeakSet=="function"?WeakSet:Set,Gs=null;function p9(A,f){if(A=A.containerInfo,AC=nv,A=ti(A),Ds(A)){if("selectionStart"in A)var p={start:A.selectionStart,end:A.selectionEnd};else e:{p=(p=A.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var F=w.anchorOffset,H=w.focusNode;w=w.focusOffset;try{p.nodeType,H.nodeType}catch{p=null;break e}var le=0,we=-1,De=-1,et=0,dt=0,wt=A,rt=null;t:for(;;){for(var nt;wt!==p||F!==0&&wt.nodeType!==3||(we=le+F),wt!==H||w!==0&&wt.nodeType!==3||(De=le+w),wt.nodeType===3&&(le+=wt.nodeValue.length),(nt=wt.firstChild)!==null;)rt=wt,wt=nt;for(;;){if(wt===A)break t;if(rt===p&&++et===F&&(we=le),rt===H&&++dt===w&&(De=le),(nt=wt.nextSibling)!==null)break;wt=rt,rt=wt.parentNode}wt=nt}p=we===-1||De===-1?null:{start:we,end:De}}else p=null}p=p||{start:0,end:0}}else p=null;for(dC={focusedElem:A,selectionRange:p},nv=!1,Gs=f;Gs!==null;)if(f=Gs,A=f.child,(f.subtreeFlags&1024)!==0&&A!==null)A.return=f,Gs=A;else for(;Gs!==null;){switch(f=Gs,H=f.alternate,A=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&H!==null){A=void 0,p=f,F=H.memoizedProps,H=H.memoizedState,w=p.stateNode;try{var Br=Kf(p.type,F,p.elementType===p.type);A=w.getSnapshotBeforeUpdate(Br,H),w.__reactInternalSnapshotBeforeUpdate=A}catch(pr){aa(p,p.return,pr)}}break;case 3:if((A&1024)!==0){if(A=f.stateNode.containerInfo,p=A.nodeType,p===9)mC(A);else if(p===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":mC(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=f.sibling,A!==null){A.return=f.return,Gs=A;break}Gs=f.return}}function RB(A,f,p){var w=p.flags;switch(p.tag){case 0:case 11:case 15:hd(A,p),w&4&&Ep(5,p);break;case 1:if(hd(A,p),w&4)if(A=p.stateNode,f===null)try{A.componentDidMount()}catch(le){aa(p,p.return,le)}else{var F=Kf(p.type,f.memoizedProps);f=f.memoizedState;try{A.componentDidUpdate(F,f,A.__reactInternalSnapshotBeforeUpdate)}catch(le){aa(p,p.return,le)}}w&64&&BB(p),w&512&&_p(p,p.return);break;case 3:if(hd(A,p),w&64&&(A=p.updateQueue,A!==null)){if(f=null,p.child!==null)switch(p.child.tag){case 27:case 5:f=p.child.stateNode;break;case 1:f=p.child.stateNode}try{Tn(A,f)}catch(le){aa(p,p.return,le)}}break;case 27:f===null&&w&4&&FB(p);case 26:case 5:hd(A,p),f===null&&w&4&&kB(p),w&512&&_p(p,p.return);break;case 12:hd(A,p);break;case 13:hd(A,p),w&4&&MB(A,p),w&64&&(A=p.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(p=_9.bind(null,p),V9(A,p))));break;case 22:if(w=p.memoizedState!==null||fA,!w){f=f!==null&&f.memoizedState!==null||es,F=fA;var H=es;fA=w,(es=f)&&!H?md(A,p,(p.subtreeFlags&8772)!==0):hd(A,p),fA=F,es=H}break;case 30:break;default:hd(A,p)}}function LB(A){var f=A.alternate;f!==null&&(A.alternate=null,LB(f)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(f=A.stateNode,f!==null&&_e(f)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var ya=null,wo=!1;function hA(A,f,p){for(p=p.child;p!==null;)UB(A,f,p),p=p.sibling}function UB(A,f,p){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(It,p)}catch{}switch(p.tag){case 26:es||Au(p,f),hA(A,f,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:es||Au(p,f);var w=ya,F=wo;wd(p.type)&&(ya=p.stateNode,wo=!1),hA(A,f,p),Rp(p.stateNode),ya=w,wo=F;break;case 5:es||Au(p,f);case 6:if(w=ya,F=wo,ya=null,hA(A,f,p),ya=w,wo=F,ya!==null)if(wo)try{(ya.nodeType===9?ya.body:ya.nodeName==="HTML"?ya.ownerDocument.body:ya).removeChild(p.stateNode)}catch(H){aa(p,f,H)}else try{ya.removeChild(p.stateNode)}catch(H){aa(p,f,H)}break;case 18:ya!==null&&(wo?(A=ya,EN(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,p.stateNode),Hp(A)):EN(ya,p.stateNode));break;case 4:w=ya,F=wo,ya=p.stateNode.containerInfo,wo=!0,hA(A,f,p),ya=w,wo=F;break;case 0:case 11:case 14:case 15:es||fd(2,p,f),es||fd(4,p,f),hA(A,f,p);break;case 1:es||(Au(p,f),w=p.stateNode,typeof w.componentWillUnmount=="function"&&NB(p,f,w)),hA(A,f,p);break;case 21:hA(A,f,p);break;case 22:es=(w=es)||p.memoizedState!==null,hA(A,f,p),es=w;break;default:hA(A,f,p)}}function MB(A,f){if(f.memoizedState===null&&(A=f.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Hp(A)}catch(p){aa(f,f.return,p)}}function g9(A){switch(A.tag){case 13:case 19:var f=A.stateNode;return f===null&&(f=A.stateNode=new DB),f;case 22:return A=A.stateNode,f=A._retryCache,f===null&&(f=A._retryCache=new DB),f;default:throw Error(n(435,A.tag))}}function Hb(A,f){var p=g9(A);f.forEach(function(w){var F=S9.bind(null,A,w);p.has(w)||(p.add(w),w.then(F,F))})}function Go(A,f){var p=f.deletions;if(p!==null)for(var w=0;w<p.length;w++){var F=p[w],H=A,le=f,we=le;e:for(;we!==null;){switch(we.tag){case 27:if(wd(we.type)){ya=we.stateNode,wo=!1;break e}break;case 5:ya=we.stateNode,wo=!1;break e;case 3:case 4:ya=we.stateNode.containerInfo,wo=!0;break e}we=we.return}if(ya===null)throw Error(n(160));UB(H,le,F),ya=null,wo=!1,H=F.alternate,H!==null&&(H.return=null),F.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)PB(f,A),f=f.sibling}var gc=null;function PB(A,f){var p=A.alternate,w=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Go(f,A),qo(A),w&4&&(fd(3,A,A.return),Ep(3,A),fd(5,A,A.return));break;case 1:Go(f,A),qo(A),w&512&&(es||p===null||Au(p,p.return)),w&64&&fA&&(A=A.updateQueue,A!==null&&(w=A.callbacks,w!==null&&(p=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=p===null?w:p.concat(w))));break;case 26:var F=gc;if(Go(f,A),qo(A),w&512&&(es||p===null||Au(p,p.return)),w&4){var H=p!==null?p.memoizedState:null;if(w=A.memoizedState,p===null)if(w===null)if(A.stateNode===null){e:{w=A.type,p=A.memoizedProps,F=F.ownerDocument||F;t:switch(w){case"title":H=F.getElementsByTagName("title")[0],(!H||H[Ee]||H[fn]||H.namespaceURI==="http://www.w3.org/2000/svg"||H.hasAttribute("itemprop"))&&(H=F.createElement(w),F.head.insertBefore(H,F.querySelector("head > title"))),ii(H,w,p),H[fn]=A,He(H),w=H;break e;case"link":var le=FN("link","href",F).get(w+(p.href||""));if(le){for(var we=0;we<le.length;we++)if(H=le[we],H.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&H.getAttribute("rel")===(p.rel==null?null:p.rel)&&H.getAttribute("title")===(p.title==null?null:p.title)&&H.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){le.splice(we,1);break t}}H=F.createElement(w),ii(H,w,p),F.head.appendChild(H);break;case"meta":if(le=FN("meta","content",F).get(w+(p.content||""))){for(we=0;we<le.length;we++)if(H=le[we],H.getAttribute("content")===(p.content==null?null:""+p.content)&&H.getAttribute("name")===(p.name==null?null:p.name)&&H.getAttribute("property")===(p.property==null?null:p.property)&&H.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&H.getAttribute("charset")===(p.charSet==null?null:p.charSet)){le.splice(we,1);break t}}H=F.createElement(w),ii(H,w,p),F.head.appendChild(H);break;default:throw Error(n(468,w))}H[fn]=A,He(H),w=H}A.stateNode=w}else DN(F,A.type,A.stateNode);else A.stateNode=IN(F,w,A.memoizedProps);else H!==w?(H===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):H.count--,w===null?DN(F,A.type,A.stateNode):IN(F,w,A.memoizedProps)):w===null&&A.stateNode!==null&&Pb(A,A.memoizedProps,p.memoizedProps)}break;case 27:Go(f,A),qo(A),w&512&&(es||p===null||Au(p,p.return)),p!==null&&w&4&&Pb(A,A.memoizedProps,p.memoizedProps);break;case 5:if(Go(f,A),qo(A),w&512&&(es||p===null||Au(p,p.return)),A.flags&32){F=A.stateNode;try{gi(F,"")}catch(nt){aa(A,A.return,nt)}}w&4&&A.stateNode!=null&&(F=A.memoizedProps,Pb(A,F,p!==null?p.memoizedProps:F)),w&1024&&(Qb=!0);break;case 6:if(Go(f,A),qo(A),w&4){if(A.stateNode===null)throw Error(n(162));w=A.memoizedProps,p=A.stateNode;try{p.nodeValue=w}catch(nt){aa(A,A.return,nt)}}break;case 3:if(ev=null,F=gc,gc=J1(f.containerInfo),Go(f,A),gc=F,qo(A),w&4&&p!==null&&p.memoizedState.isDehydrated)try{Hp(f.containerInfo)}catch(nt){aa(A,A.return,nt)}Qb&&(Qb=!1,jB(A));break;case 4:w=gc,gc=J1(A.stateNode.containerInfo),Go(f,A),qo(A),gc=w;break;case 12:Go(f,A),qo(A);break;case 13:Go(f,A),qo(A),A.child.flags&8192&&A.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&($b=je()),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,Hb(A,w)));break;case 22:F=A.memoizedState!==null;var De=p!==null&&p.memoizedState!==null,et=fA,dt=es;if(fA=et||F,es=dt||De,Go(f,A),es=dt,fA=et,qo(A),w&8192)e:for(f=A.stateNode,f._visibility=F?f._visibility&-2:f._visibility|1,F&&(p===null||De||fA||es||$f(A)),p=null,f=A;;){if(f.tag===5||f.tag===26){if(p===null){De=p=f;try{if(H=De.stateNode,F)le=H.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{we=De.stateNode;var wt=De.memoizedProps.style,rt=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;we.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(nt){aa(De,De.return,nt)}}}else if(f.tag===6){if(p===null){De=f;try{De.stateNode.nodeValue=F?"":De.memoizedProps}catch(nt){aa(De,De.return,nt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===A)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break e;for(;f.sibling===null;){if(f.return===null||f.return===A)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}w&4&&(w=A.updateQueue,w!==null&&(p=w.retryQueue,p!==null&&(w.retryQueue=null,Hb(A,p))));break;case 19:Go(f,A),qo(A),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,Hb(A,w)));break;case 30:break;case 21:break;default:Go(f,A),qo(A)}}function qo(A){var f=A.flags;if(f&2){try{for(var p,w=A.return;w!==null;){if(IB(w)){p=w;break}w=w.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var F=p.stateNode,H=jb(A);j1(A,H,F);break;case 5:var le=p.stateNode;p.flags&32&&(gi(le,""),p.flags&=-33);var we=jb(A);j1(A,we,le);break;case 3:case 4:var De=p.stateNode.containerInfo,et=jb(A);Ob(A,et,De);break;default:throw Error(n(161))}}catch(dt){aa(A,A.return,dt)}A.flags&=-3}f&4096&&(A.flags&=-4097)}function jB(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var f=A;jB(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),A=A.sibling}}function hd(A,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)RB(A,f.alternate,f),f=f.sibling}function $f(A){for(A=A.child;A!==null;){var f=A;switch(f.tag){case 0:case 11:case 14:case 15:fd(4,f,f.return),$f(f);break;case 1:Au(f,f.return);var p=f.stateNode;typeof p.componentWillUnmount=="function"&&NB(f,f.return,p),$f(f);break;case 27:Rp(f.stateNode);case 26:case 5:Au(f,f.return),$f(f);break;case 22:f.memoizedState===null&&$f(f);break;case 30:$f(f);break;default:$f(f)}A=A.sibling}}function md(A,f,p){for(p=p&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var w=f.alternate,F=A,H=f,le=H.flags;switch(H.tag){case 0:case 11:case 15:md(F,H,p),Ep(4,H);break;case 1:if(md(F,H,p),w=H,F=w.stateNode,typeof F.componentDidMount=="function")try{F.componentDidMount()}catch(et){aa(w,w.return,et)}if(w=H,F=w.updateQueue,F!==null){var we=w.stateNode;try{var De=F.shared.hiddenCallbacks;if(De!==null)for(F.shared.hiddenCallbacks=null,F=0;F<De.length;F++)xn(De[F],we)}catch(et){aa(w,w.return,et)}}p&&le&64&&BB(H),_p(H,H.return);break;case 27:FB(H);case 26:case 5:md(F,H,p),p&&w===null&&le&4&&kB(H),_p(H,H.return);break;case 12:md(F,H,p);break;case 13:md(F,H,p),p&&le&4&&MB(F,H);break;case 22:H.memoizedState===null&&md(F,H,p),_p(H,H.return);break;case 30:break;default:md(F,H,p)}f=f.sibling}}function Vb(A,f){var p=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(p=A.memoizedState.cachePool.pool),A=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(A=f.memoizedState.cachePool.pool),A!==p&&(A!=null&&A.refCount++,p!=null&&Lf(p))}function zb(A,f){A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&Lf(A))}function du(A,f,p,w){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)OB(A,f,p,w),f=f.sibling}function OB(A,f,p,w){var F=f.flags;switch(f.tag){case 0:case 11:case 15:du(A,f,p,w),F&2048&&Ep(9,f);break;case 1:du(A,f,p,w);break;case 3:du(A,f,p,w),F&2048&&(A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&Lf(A)));break;case 12:if(F&2048){du(A,f,p,w),A=f.stateNode;try{var H=f.memoizedProps,le=H.id,we=H.onPostCommit;typeof we=="function"&&we(le,f.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(De){aa(f,f.return,De)}}else du(A,f,p,w);break;case 13:du(A,f,p,w);break;case 23:break;case 22:H=f.stateNode,le=f.alternate,f.memoizedState!==null?H._visibility&2?du(A,f,p,w):Sp(A,f):H._visibility&2?du(A,f,p,w):(H._visibility|=2,A0(A,f,p,w,(f.subtreeFlags&10256)!==0)),F&2048&&Vb(le,f);break;case 24:du(A,f,p,w),F&2048&&zb(f.alternate,f);break;default:du(A,f,p,w)}}function A0(A,f,p,w,F){for(F=F&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var H=A,le=f,we=p,De=w,et=le.flags;switch(le.tag){case 0:case 11:case 15:A0(H,le,we,De,F),Ep(8,le);break;case 23:break;case 22:var dt=le.stateNode;le.memoizedState!==null?dt._visibility&2?A0(H,le,we,De,F):Sp(H,le):(dt._visibility|=2,A0(H,le,we,De,F)),F&&et&2048&&Vb(le.alternate,le);break;case 24:A0(H,le,we,De,F),F&&et&2048&&zb(le.alternate,le);break;default:A0(H,le,we,De,F)}f=f.sibling}}function Sp(A,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var p=A,w=f,F=w.flags;switch(w.tag){case 22:Sp(p,w),F&2048&&Vb(w.alternate,w);break;case 24:Sp(p,w),F&2048&&zb(w.alternate,w);break;default:Sp(p,w)}f=f.sibling}}var Tp=8192;function d0(A){if(A.subtreeFlags&Tp)for(A=A.child;A!==null;)QB(A),A=A.sibling}function QB(A){switch(A.tag){case 26:d0(A),A.flags&Tp&&A.memoizedState!==null&&rH(gc,A.memoizedState,A.memoizedProps);break;case 5:d0(A);break;case 3:case 4:var f=gc;gc=J1(A.stateNode.containerInfo),d0(A),gc=f;break;case 22:A.memoizedState===null&&(f=A.alternate,f!==null&&f.memoizedState!==null?(f=Tp,Tp=16777216,d0(A),Tp=f):d0(A));break;default:d0(A)}}function HB(A){var f=A.alternate;if(f!==null&&(A=f.child,A!==null)){f.child=null;do f=A.sibling,A.sibling=null,A=f;while(A!==null)}}function Bp(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var w=f[p];Gs=w,zB(w,A)}HB(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)VB(A),A=A.sibling}function VB(A){switch(A.tag){case 0:case 11:case 15:Bp(A),A.flags&2048&&fd(9,A,A.return);break;case 3:Bp(A);break;case 12:Bp(A);break;case 22:var f=A.stateNode;A.memoizedState!==null&&f._visibility&2&&(A.return===null||A.return.tag!==13)?(f._visibility&=-3,O1(A)):Bp(A);break;default:Bp(A)}}function O1(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var w=f[p];Gs=w,zB(w,A)}HB(A)}for(A=A.child;A!==null;){switch(f=A,f.tag){case 0:case 11:case 15:fd(8,f,f.return),O1(f);break;case 22:p=f.stateNode,p._visibility&2&&(p._visibility&=-3,O1(f));break;default:O1(f)}A=A.sibling}}function zB(A,f){for(;Gs!==null;){var p=Gs;switch(p.tag){case 0:case 11:case 15:fd(8,p,f);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var w=p.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Lf(p.memoizedState.cache)}if(w=p.child,w!==null)w.return=p,Gs=w;else e:for(p=A;Gs!==null;){w=Gs;var F=w.sibling,H=w.return;if(LB(w),w===p){Gs=null;break e}if(F!==null){F.return=H,Gs=F;break e}Gs=H}}}var x9={getCacheForType:function(A){var f=Ya(Ja),p=f.data.get(A);return p===void 0&&(p=A(),f.data.set(A,p)),p}},v9=typeof WeakMap=="function"?WeakMap:Map,Hn=0,oa=null,sn=null,yn=0,Vn=0,Ko=null,pd=!1,f0=!1,Gb=!1,mA=0,Qa=0,gd=0,Wf=0,qb=0,Nl=0,h0=0,Np=null,bo=null,Kb=!1,$b=0,Q1=1/0,H1=null,xd=null,si=0,vd=null,m0=null,p0=0,Wb=0,Xb=null,GB=null,kp=0,Yb=null;function $o(){if((Hn&2)!==0&&yn!==0)return yn&-yn;if(Y.T!==null){var A=sA;return A!==0?A:aC()}return Ea()}function qB(){Nl===0&&(Nl=(yn&536870912)===0||bn?ds():536870912);var A=Bl.current;return A!==null&&(A.flags|=32),Nl}function Wo(A,f,p){(A===oa&&(Vn===2||Vn===9)||A.cancelPendingCommit!==null)&&(g0(A,0),yd(A,yn,Nl,!1)),pa(A,p),((Hn&2)===0||A!==oa)&&(A===oa&&((Hn&2)===0&&(Wf|=p),Qa===4&&yd(A,yn,Nl,!1)),fu(A))}function KB(A,f,p){if((Hn&6)!==0)throw Error(n(327));var w=!p&&(f&124)===0&&(f&A.expiredLanes)===0||Dn(A,f),F=w?b9(A,f):eC(A,f,!0),H=w;do{if(F===0){f0&&!w&&yd(A,f,0,!1);break}else{if(p=A.current.alternate,H&&!y9(p)){F=eC(A,f,!1),H=!1;continue}if(F===2){if(H=f,A.errorRecoveryDisabledLanes&H)var le=0;else le=A.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){f=le;e:{var we=A;F=Np;var De=we.current.memoizedState.isDehydrated;if(De&&(g0(we,le).flags|=256),le=eC(we,le,!1),le!==2){if(Gb&&!De){we.errorRecoveryDisabledLanes|=H,Wf|=H,F=4;break e}H=bo,bo=F,H!==null&&(bo===null?bo=H:bo.push.apply(bo,H))}F=le}if(H=!1,F!==2)continue}}if(F===1){g0(A,0),yd(A,f,0,!0);break}e:{switch(w=A,H=F,H){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:yd(w,f,Nl,!pd);break e;case 2:bo=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(F=$b+300-je(),10<F)){if(yd(w,f,Nl,!pd),Ur(w,0,!0)!==0)break e;w.timeoutHandle=bN($B.bind(null,w,p,bo,H1,Kb,f,Nl,Wf,h0,pd,H,2,-0,0),F);break e}$B(w,p,bo,H1,Kb,f,Nl,Wf,h0,pd,H,0,-0,0)}}break}while(!0);fu(A)}function $B(A,f,p,w,F,H,le,we,De,et,dt,wt,rt,nt){if(A.timeoutHandle=-1,wt=f.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(Mp={stylesheets:null,count:0,unsuspend:tH},QB(f),wt=nH(),wt!==null)){A.cancelPendingCommit=wt(tN.bind(null,A,f,H,p,w,F,le,we,De,dt,1,rt,nt)),yd(A,H,le,!et);return}tN(A,f,H,p,w,F,le,we,De)}function y9(A){for(var f=A;;){var p=f.tag;if((p===0||p===11||p===15)&&f.flags&16384&&(p=f.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var w=0;w<p.length;w++){var F=p[w],H=F.getSnapshot;F=F.value;try{if(!ps(H(),F))return!1}catch{return!1}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function yd(A,f,p,w){f&=~qb,f&=~Wf,A.suspendedLanes|=f,A.pingedLanes&=~f,w&&(A.warmLanes|=f),w=A.expirationTimes;for(var F=f;0<F;){var H=31-Lt(F),le=1<<H;w[H]=-1,F&=~le}p!==0&&nr(A,p,f)}function V1(){return(Hn&6)===0?(Ip(0),!1):!0}function Jb(){if(sn!==null){if(Vn===0)var A=sn.return;else A=sn,Ac=xs=null,n0(A),c0=null,wp=0,A=sn;for(;A!==null;)TB(A.alternate,A),A=A.return;sn=null}}function g0(A,f){var p=A.timeoutHandle;p!==-1&&(A.timeoutHandle=-1,P9(p)),p=A.cancelPendingCommit,p!==null&&(A.cancelPendingCommit=null,p()),Jb(),oa=A,sn=p=bl(A.current,null),yn=f,Vn=0,Ko=null,pd=!1,f0=Dn(A,f),Gb=!1,h0=Nl=qb=Wf=gd=Qa=0,bo=Np=null,Kb=!1,(f&8)!==0&&(f|=f&32);var w=A.entangledLanes;if(w!==0)for(A=A.entanglements,w&=f;0<w;){var F=31-Lt(w),H=1<<F;f|=A[F],w&=~H}return mA=f,go(),p}function WB(A,f){fr=null,Y.H=k1,f===he||f===ve?(f=ze(),Vn=3):f===pe?(f=ze(),Vn=4):Vn=f===fB?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Ko=f,sn===null&&(Qa=1,L1(A,$r(f,A.current)))}function XB(){var A=Y.H;return Y.H=k1,A===null?k1:A}function YB(){var A=Y.A;return Y.A=x9,A}function Zb(){Qa=4,pd||(yn&4194048)!==yn&&Bl.current!==null||(f0=!0),(gd&134217727)===0&&(Wf&134217727)===0||oa===null||yd(oa,yn,Nl,!1)}function eC(A,f,p){var w=Hn;Hn|=2;var F=XB(),H=YB();(oa!==A||yn!==f)&&(H1=null,g0(A,f)),f=!1;var le=Qa;e:do try{if(Vn!==0&&sn!==null){var we=sn,De=Ko;switch(Vn){case 8:Jb(),le=6;break e;case 3:case 2:case 9:case 6:Bl.current===null&&(f=!0);var et=Vn;if(Vn=0,Ko=null,x0(A,we,De,et),p&&f0){le=0;break e}break;default:et=Vn,Vn=0,Ko=null,x0(A,we,De,et)}}w9(),le=Qa;break}catch(dt){WB(A,dt)}while(!0);return f&&A.shellSuspendCounter++,Ac=xs=null,Hn=w,Y.H=F,Y.A=H,sn===null&&(oa=null,yn=0,go()),le}function w9(){for(;sn!==null;)JB(sn)}function b9(A,f){var p=Hn;Hn|=2;var w=XB(),F=YB();oa!==A||yn!==f?(H1=null,Q1=je()+500,g0(A,f)):f0=Dn(A,f);e:do try{if(Vn!==0&&sn!==null){f=sn;var H=Ko;t:switch(Vn){case 1:Vn=0,Ko=null,x0(A,f,H,1);break;case 2:case 9:if(Ne(H)){Vn=0,Ko=null,ZB(f);break}f=function(){Vn!==2&&Vn!==9||oa!==A||(Vn=7),fu(A)},H.then(f,f);break e;case 3:Vn=7;break e;case 4:Vn=5;break e;case 7:Ne(H)?(Vn=0,Ko=null,ZB(f)):(Vn=0,Ko=null,x0(A,f,H,7));break;case 5:var le=null;switch(sn.tag){case 26:le=sn.memoizedState;case 5:case 27:var we=sn;if(!le||RN(le)){Vn=0,Ko=null;var De=we.sibling;if(De!==null)sn=De;else{var et=we.return;et!==null?(sn=et,z1(et)):sn=null}break t}}Vn=0,Ko=null,x0(A,f,H,5);break;case 6:Vn=0,Ko=null,x0(A,f,H,6);break;case 8:Jb(),Qa=6;break e;default:throw Error(n(462))}}C9();break}catch(dt){WB(A,dt)}while(!0);return Ac=xs=null,Y.H=w,Y.A=F,Hn=p,sn!==null?0:(oa=null,yn=0,go(),Qa)}function C9(){for(;sn!==null&&!Se();)JB(sn)}function JB(A){var f=_B(A.alternate,A,mA);A.memoizedProps=A.pendingProps,f===null?z1(A):sn=f}function ZB(A){var f=A,p=f.alternate;switch(f.tag){case 15:case 0:f=vB(p,f,f.pendingProps,f.type,void 0,yn);break;case 11:f=vB(p,f,f.pendingProps,f.type.render,f.ref,yn);break;case 5:n0(f);default:TB(p,f),f=sn=If(f,mA),f=_B(p,f,mA)}A.memoizedProps=A.pendingProps,f===null?z1(A):sn=f}function x0(A,f,p,w){Ac=xs=null,n0(f),c0=null,wp=0;var F=f.return;try{if(d9(A,F,f,p,yn)){Qa=1,L1(A,$r(p,A.current)),sn=null;return}}catch(H){if(F!==null)throw sn=F,H;Qa=1,L1(A,$r(p,A.current)),sn=null;return}f.flags&32768?(bn||w===1?A=!0:f0||(yn&536870912)!==0?A=!1:(pd=A=!0,(w===2||w===9||w===3||w===6)&&(w=Bl.current,w!==null&&w.tag===13&&(w.flags|=16384))),eN(f,A)):z1(f)}function z1(A){var f=A;do{if((f.flags&32768)!==0){eN(f,pd);return}A=f.return;var p=h9(f.alternate,f,mA);if(p!==null){sn=p;return}if(f=f.sibling,f!==null){sn=f;return}sn=f=A}while(f!==null);Qa===0&&(Qa=5)}function eN(A,f){do{var p=m9(A.alternate,A);if(p!==null){p.flags&=32767,sn=p;return}if(p=A.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!f&&(A=A.sibling,A!==null)){sn=A;return}sn=A=p}while(A!==null);Qa=6,sn=null}function tN(A,f,p,w,F,H,le,we,De){A.cancelPendingCommit=null;do G1();while(si!==0);if((Hn&6)!==0)throw Error(n(327));if(f!==null){if(f===A.current)throw Error(n(177));if(H=f.lanes|f.childLanes,H|=Sa,Pr(A,p,H,le,we,De),A===oa&&(sn=oa=null,yn=0),m0=f,vd=A,p0=p,Wb=H,Xb=F,GB=w,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,T9(St,function(){return iN(),null})):(A.callbackNode=null,A.callbackPriority=0),w=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||w){w=Y.T,Y.T=null,F=ae.p,ae.p=2,le=Hn,Hn|=4;try{p9(A,f,p)}finally{Hn=le,ae.p=F,Y.T=w}}si=1,rN(),nN(),aN()}}function rN(){if(si===1){si=0;var A=vd,f=m0,p=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||p){p=Y.T,Y.T=null;var w=ae.p;ae.p=2;var F=Hn;Hn|=4;try{PB(f,A);var H=dC,le=ti(A.containerInfo),we=H.focusedElem,De=H.selectionRange;if(le!==we&&we&&we.ownerDocument&&$c(we.ownerDocument.documentElement,we)){if(De!==null&&Ds(we)){var et=De.start,dt=De.end;if(dt===void 0&&(dt=et),"selectionStart"in we)we.selectionStart=et,we.selectionEnd=Math.min(dt,we.value.length);else{var wt=we.ownerDocument||document,rt=wt&&wt.defaultView||window;if(rt.getSelection){var nt=rt.getSelection(),Br=we.textContent.length,pr=Math.min(De.start,Br),ea=De.end===void 0?pr:Math.min(De.end,Br);!nt.extend&&pr>ea&&(le=ea,ea=pr,pr=le);var Ge=nc(we,pr),Pe=nc(we,ea);if(Ge&&Pe&&(nt.rangeCount!==1||nt.anchorNode!==Ge.node||nt.anchorOffset!==Ge.offset||nt.focusNode!==Pe.node||nt.focusOffset!==Pe.offset)){var Xe=wt.createRange();Xe.setStart(Ge.node,Ge.offset),nt.removeAllRanges(),pr>ea?(nt.addRange(Xe),nt.extend(Pe.node,Pe.offset)):(Xe.setEnd(Pe.node,Pe.offset),nt.addRange(Xe))}}}}for(wt=[],nt=we;nt=nt.parentNode;)nt.nodeType===1&&wt.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<wt.length;we++){var mt=wt[we];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}nv=!!AC,dC=AC=null}finally{Hn=F,ae.p=w,Y.T=p}}A.current=f,si=2}}function nN(){if(si===2){si=0;var A=vd,f=m0,p=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||p){p=Y.T,Y.T=null;var w=ae.p;ae.p=2;var F=Hn;Hn|=4;try{RB(A,f.alternate,f)}finally{Hn=F,ae.p=w,Y.T=p}}si=3}}function aN(){if(si===4||si===3){si=0,be();var A=vd,f=m0,p=p0,w=GB;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?si=5:(si=0,m0=vd=null,sN(A,A.pendingLanes));var F=A.pendingLanes;if(F===0&&(xd=null),Wn(p),f=f.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(It,f,void 0,(f.current.flags&128)===128)}catch{}if(w!==null){f=Y.T,F=ae.p,ae.p=2,Y.T=null;try{for(var H=A.onRecoverableError,le=0;le<w.length;le++){var we=w[le];H(we.value,{componentStack:we.stack})}}finally{Y.T=f,ae.p=F}}(p0&3)!==0&&G1(),fu(A),F=A.pendingLanes,(p&4194090)!==0&&(F&42)!==0?A===Yb?kp++:(kp=0,Yb=A):kp=0,Ip(0)}}function sN(A,f){(A.pooledCacheLanes&=f)===0&&(f=A.pooledCache,f!=null&&(A.pooledCache=null,Lf(f)))}function G1(A){return rN(),nN(),aN(),iN()}function iN(){if(si!==5)return!1;var A=vd,f=Wb;Wb=0;var p=Wn(p0),w=Y.T,F=ae.p;try{ae.p=32>p?32:p,Y.T=null,p=Xb,Xb=null;var H=vd,le=p0;if(si=0,m0=vd=null,p0=0,(Hn&6)!==0)throw Error(n(331));var we=Hn;if(Hn|=4,VB(H.current),OB(H,H.current,le,p),Hn=we,Ip(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(It,H)}catch{}return!0}finally{ae.p=F,Y.T=w,sN(A,f)}}function oN(A,f,p){f=$r(p,f),f=Nb(A.stateNode,f,2),A=vt(A,f,2),A!==null&&(pa(A,2),fu(A))}function aa(A,f,p){if(A.tag===3)oN(A,A,p);else for(;f!==null;){if(f.tag===3){oN(f,A,p);break}else if(f.tag===1){var w=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(xd===null||!xd.has(w))){A=$r(p,A),p=AB(2),w=vt(f,p,2),w!==null&&(dB(p,w,f,A),pa(w,2),fu(w));break}}f=f.return}}function tC(A,f,p){var w=A.pingCache;if(w===null){w=A.pingCache=new v9;var F=new Set;w.set(f,F)}else F=w.get(f),F===void 0&&(F=new Set,w.set(f,F));F.has(p)||(Gb=!0,F.add(p),A=E9.bind(null,A,f,p),f.then(A,A))}function E9(A,f,p){var w=A.pingCache;w!==null&&w.delete(f),A.pingedLanes|=A.suspendedLanes&p,A.warmLanes&=~p,oa===A&&(yn&p)===p&&(Qa===4||Qa===3&&(yn&62914560)===yn&&300>je()-$b?(Hn&2)===0&&g0(A,0):qb|=p,h0===yn&&(h0=0)),fu(A)}function lN(A,f){f===0&&(f=nn()),A=sc(A,f),A!==null&&(pa(A,f),fu(A))}function _9(A){var f=A.memoizedState,p=0;f!==null&&(p=f.retryLane),lN(A,p)}function S9(A,f){var p=0;switch(A.tag){case 13:var w=A.stateNode,F=A.memoizedState;F!==null&&(p=F.retryLane);break;case 19:w=A.stateNode;break;case 22:w=A.stateNode._retryCache;break;default:throw Error(n(314))}w!==null&&w.delete(f),lN(A,p)}function T9(A,f){return Me(A,f)}var q1=null,v0=null,rC=!1,K1=!1,nC=!1,Xf=0;function fu(A){A!==v0&&A.next===null&&(v0===null?q1=v0=A:v0=v0.next=A),K1=!0,rC||(rC=!0,N9())}function Ip(A,f){if(!nC&&K1){nC=!0;do for(var p=!1,w=q1;w!==null;){if(A!==0){var F=w.pendingLanes;if(F===0)var H=0;else{var le=w.suspendedLanes,we=w.pingedLanes;H=(1<<31-Lt(42|A)+1)-1,H&=F&~(le&~we),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(p=!0,dN(w,H))}else H=yn,H=Ur(w,w===oa?H:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(H&3)===0||Dn(w,H)||(p=!0,dN(w,H));w=w.next}while(p);nC=!1}}function B9(){cN()}function cN(){K1=rC=!1;var A=0;Xf!==0&&(M9()&&(A=Xf),Xf=0);for(var f=je(),p=null,w=q1;w!==null;){var F=w.next,H=uN(w,f);H===0?(w.next=null,p===null?q1=F:p.next=F,F===null&&(v0=p)):(p=w,(A!==0||(H&3)!==0)&&(K1=!0)),w=F}Ip(A)}function uN(A,f){for(var p=A.suspendedLanes,w=A.pingedLanes,F=A.expirationTimes,H=A.pendingLanes&-62914561;0<H;){var le=31-Lt(H),we=1<<le,De=F[le];De===-1?((we&p)===0||(we&w)!==0)&&(F[le]=Fr(we,f)):De<=f&&(A.expiredLanes|=we),H&=~we}if(f=oa,p=yn,p=Ur(A,A===f?p:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w=A.callbackNode,p===0||A===f&&(Vn===2||Vn===9)||A.cancelPendingCommit!==null)return w!==null&&w!==null&&at(w),A.callbackNode=null,A.callbackPriority=0;if((p&3)===0||Dn(A,p)){if(f=p&-p,f===A.callbackPriority)return f;switch(w!==null&&at(w),Wn(p)){case 2:case 8:p=pt;break;case 32:p=St;break;case 268435456:p=kt;break;default:p=St}return w=AN.bind(null,A),p=Me(p,w),A.callbackPriority=f,A.callbackNode=p,f}return w!==null&&w!==null&&at(w),A.callbackPriority=2,A.callbackNode=null,2}function AN(A,f){if(si!==0&&si!==5)return A.callbackNode=null,A.callbackPriority=0,null;var p=A.callbackNode;if(G1()&&A.callbackNode!==p)return null;var w=yn;return w=Ur(A,A===oa?w:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w===0?null:(KB(A,w,f),uN(A,je()),A.callbackNode!=null&&A.callbackNode===p?AN.bind(null,A):null)}function dN(A,f){if(G1())return null;KB(A,f,!0)}function N9(){j9(function(){(Hn&6)!==0?Me(st,B9):cN()})}function aC(){return Xf===0&&(Xf=ds()),Xf}function fN(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Lo(""+A)}function hN(A,f){var p=f.ownerDocument.createElement("input");return p.name=f.name,p.value=f.value,A.id&&p.setAttribute("form",A.id),f.parentNode.insertBefore(p,f),A=new FormData(A),p.parentNode.removeChild(p),A}function k9(A,f,p,w,F){if(f==="submit"&&p&&p.stateNode===F){var H=fN((F[an]||null).action),le=w.submitter;le&&(f=(f=le[an]||null)?fN(f.formAction):le.getAttribute("formAction"),f!==null&&(H=f,le=null));var we=new fl("action","action",null,w,F);A.push({event:we,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Xf!==0){var De=le?hN(F,le):new FormData(F);Tl(p,{pending:!0,data:De,method:F.method,action:H},null,De)}}else typeof H=="function"&&(we.preventDefault(),De=le?hN(F,le):new FormData(F),Tl(p,{pending:!0,data:De,method:F.method,action:H},H,De))},currentTarget:F}]})}}for(var sC=0;sC<Zu.length;sC++){var iC=Zu[sC],I9=iC.toLowerCase(),F9=iC[0].toUpperCase()+iC.slice(1);xa(I9,"on"+F9)}xa(ed,"onAnimationEnd"),xa(Xc,"onAnimationIteration"),xa(Yc,"onAnimationStart"),xa("dblclick","onDoubleClick"),xa("focusin","onFocus"),xa("focusout","onBlur"),xa(Jc,"onTransitionRun"),xa(Ju,"onTransitionStart"),xa(td,"onTransitionCancel"),xa(Zc,"onTransitionEnd"),Nt("onMouseEnter",["mouseout","mouseover"]),Nt("onMouseLeave",["mouseout","mouseover"]),Nt("onPointerEnter",["pointerout","pointerover"]),Nt("onPointerLeave",["pointerout","pointerover"]),yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fp));function mN(A,f){f=(f&4)!==0;for(var p=0;p<A.length;p++){var w=A[p],F=w.event;w=w.listeners;e:{var H=void 0;if(f)for(var le=w.length-1;0<=le;le--){var we=w[le],De=we.instance,et=we.currentTarget;if(we=we.listener,De!==H&&F.isPropagationStopped())break e;H=we,F.currentTarget=et;try{H(F)}catch(dt){R1(dt)}F.currentTarget=null,H=De}else for(le=0;le<w.length;le++){if(we=w[le],De=we.instance,et=we.currentTarget,we=we.listener,De!==H&&F.isPropagationStopped())break e;H=we,F.currentTarget=et;try{H(F)}catch(dt){R1(dt)}F.currentTarget=null,H=De}}}}function on(A,f){var p=f[jn];p===void 0&&(p=f[jn]=new Set);var w=A+"__bubble";p.has(w)||(pN(f,A,2,!1),p.add(w))}function oC(A,f,p){var w=0;f&&(w|=4),pN(p,A,w,f)}var $1="_reactListening"+Math.random().toString(36).slice(2);function lC(A){if(!A[$1]){A[$1]=!0,We.forEach(function(p){p!=="selectionchange"&&(D9.has(p)||oC(p,!1,A),oC(p,!0,A))});var f=A.nodeType===9?A:A.ownerDocument;f===null||f[$1]||(f[$1]=!0,oC("selectionchange",!1,f))}}function pN(A,f,p,w){switch(ON(f)){case 2:var F=iH;break;case 8:F=oH;break;default:F=bC}p=F.bind(null,f,p,A),F=void 0,!ei||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(F=!0),w?F!==void 0?A.addEventListener(f,p,{capture:!0,passive:F}):A.addEventListener(f,p,!0):F!==void 0?A.addEventListener(f,p,{passive:F}):A.addEventListener(f,p,!1)}function cC(A,f,p,w,F){var H=w;if((f&1)===0&&(f&2)===0&&w!==null)e:for(;;){if(w===null)return;var le=w.tag;if(le===3||le===4){var we=w.stateNode.containerInfo;if(we===F)break;if(le===4)for(le=w.return;le!==null;){var De=le.tag;if((De===3||De===4)&&le.stateNode.containerInfo===F)return;le=le.return}for(;we!==null;){if(le=Be(we),le===null)return;if(De=le.tag,De===5||De===6||De===26||De===27){w=H=le;continue e}we=we.parentNode}}w=w.return}WA(function(){var et=H,dt=On(p),wt=[];e:{var rt=ac.get(A);if(rt!==void 0){var nt=fl,Br=A;switch(A){case"keypress":if(yi(p)===0)break e;case"keydown":case"keyup":nt=jo;break;case"focusin":Br="focus",nt=ml;break;case"focusout":Br="blur",nt=ml;break;case"beforeblur":case"afterblur":nt=ml;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=Ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=hl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=zc;break;case ed:case Xc:case Yc:nt=Qc;break;case Zc:nt=Ae;break;case"scroll":case"scrollend":nt=qu;break;case"wheel":nt=Re;break;case"copy":case"cut":case"paste":nt=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=rc;break;case"toggle":case"beforetoggle":nt=ot}var pr=(f&4)!==0,ea=!pr&&(A==="scroll"||A==="scrollend"),Ge=pr?rt!==null?rt+"Capture":null:rt;pr=[];for(var Pe=et,Xe;Pe!==null;){var mt=Pe;if(Xe=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||Xe===null||Ge===null||(mt=js(Pe,Ge),mt!=null&&pr.push(Dp(Pe,mt,Xe))),ea)break;Pe=Pe.return}0<pr.length&&(rt=new nt(rt,Br,null,p,dt),wt.push({event:rt,listeners:pr}))}}if((f&7)===0){e:{if(rt=A==="mouseover"||A==="pointerover",nt=A==="mouseout"||A==="pointerout",rt&&p!==lo&&(Br=p.relatedTarget||p.fromElement)&&(Be(Br)||Br[Rn]))break e;if((nt||rt)&&(rt=dt.window===dt?dt:(rt=dt.ownerDocument)?rt.defaultView||rt.parentWindow:window,nt?(Br=p.relatedTarget||p.toElement,nt=et,Br=Br?Be(Br):null,Br!==null&&(ea=s(Br),pr=Br.tag,Br!==ea||pr!==5&&pr!==27&&pr!==6)&&(Br=null)):(nt=null,Br=et),nt!==Br)){if(pr=Ma,mt="onMouseLeave",Ge="onMouseEnter",Pe="mouse",(A==="pointerout"||A==="pointerover")&&(pr=rc,mt="onPointerLeave",Ge="onPointerEnter",Pe="pointer"),ea=nt==null?rt:qe(nt),Xe=Br==null?rt:qe(Br),rt=new pr(mt,Pe+"leave",nt,p,dt),rt.target=ea,rt.relatedTarget=Xe,mt=null,Be(dt)===et&&(pr=new pr(Ge,Pe+"enter",Br,p,dt),pr.target=Xe,pr.relatedTarget=ea,mt=pr),ea=mt,nt&&Br)t:{for(pr=nt,Ge=Br,Pe=0,Xe=pr;Xe;Xe=y0(Xe))Pe++;for(Xe=0,mt=Ge;mt;mt=y0(mt))Xe++;for(;0<Pe-Xe;)pr=y0(pr),Pe--;for(;0<Xe-Pe;)Ge=y0(Ge),Xe--;for(;Pe--;){if(pr===Ge||Ge!==null&&pr===Ge.alternate)break t;pr=y0(pr),Ge=y0(Ge)}pr=null}else pr=null;nt!==null&&gN(wt,rt,nt,pr,!1),Br!==null&&ea!==null&&gN(wt,ea,Br,pr,!0)}}e:{if(rt=et?qe(et):window,nt=rt.nodeName&&rt.nodeName.toLowerCase(),nt==="select"||nt==="input"&&rt.type==="file")var tr=JA;else if(Ln(rt))if($u)tr=Wh;else{tr=sp;var en=bi}else nt=rt.nodeName,!nt||nt.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?et&&zu(et.elementType)&&(tr=JA):tr=Nf;if(tr&&(tr=tr(A,et))){mo(wt,tr,p,dt);break e}en&&en(A,rt,et),A==="focusout"&&et&&rt.type==="number"&&et.memoizedProps.value!=null&&ul(rt,"number",rt.value)}switch(en=et?qe(et):window,A){case"focusin":(Ln(en)||en.contentEditable==="true")&&(Ci=en,Oo=et,yl=null);break;case"focusout":yl=Oo=Ci=null;break;case"mousedown":Qo=!0;break;case"contextmenu":case"mouseup":case"dragend":Qo=!1,ga(wt,p,dt);break;case"selectionchange":if(Wc)break;case"keydown":case"keyup":ga(wt,p,dt)}var ir;if(Qt)e:{switch(A){case"compositionstart":var xr="onCompositionStart";break e;case"compositionend":xr="onCompositionEnd";break e;case"compositionupdate":xr="onCompositionUpdate";break e}xr=void 0}else mr?Ze(A,p)&&(xr="onCompositionEnd"):A==="keydown"&&p.keyCode===229&&(xr="onCompositionStart");xr&&(se&&p.locale!=="ko"&&(mr||xr!=="onCompositionStart"?xr==="onCompositionEnd"&&mr&&(ir=Gu()):(vi=dt,dl="value"in vi?vi.value:vi.textContent,mr=!0)),en=W1(et,xr),0<en.length&&(xr=new Zl(xr,A,null,p,dt),wt.push({event:xr,listeners:en}),ir?xr.data=ir:(ir=_t(p),ir!==null&&(xr.data=ir)))),(ir=J?Zr(A,p):kr(A,p))&&(xr=W1(et,"onBeforeInput"),0<xr.length&&(en=new Zl("onBeforeInput","beforeinput",null,p,dt),wt.push({event:en,listeners:xr}),en.data=ir)),k9(wt,A,et,p,dt)}mN(wt,f)})}function Dp(A,f,p){return{instance:A,listener:f,currentTarget:p}}function W1(A,f){for(var p=f+"Capture",w=[];A!==null;){var F=A,H=F.stateNode;if(F=F.tag,F!==5&&F!==26&&F!==27||H===null||(F=js(A,p),F!=null&&w.unshift(Dp(A,F,H)),F=js(A,f),F!=null&&w.push(Dp(A,F,H))),A.tag===3)return w;A=A.return}return[]}function y0(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function gN(A,f,p,w,F){for(var H=f._reactName,le=[];p!==null&&p!==w;){var we=p,De=we.alternate,et=we.stateNode;if(we=we.tag,De!==null&&De===w)break;we!==5&&we!==26&&we!==27||et===null||(De=et,F?(et=js(p,H),et!=null&&le.unshift(Dp(p,et,De))):F||(et=js(p,H),et!=null&&le.push(Dp(p,et,De)))),p=p.return}le.length!==0&&A.push({event:f,listeners:le})}var R9=/\r\n?/g,L9=/\u0000|\uFFFD/g;function xN(A){return(typeof A=="string"?A:""+A).replace(R9,`
`).replace(L9,"")}function vN(A,f){return f=xN(f),xN(A)===f}function X1(){}function Zn(A,f,p,w,F,H){switch(p){case"children":typeof w=="string"?f==="body"||f==="textarea"&&w===""||gi(A,w):(typeof w=="number"||typeof w=="bigint")&&f!=="body"&&gi(A,""+w);break;case"className":Or(A,"class",w);break;case"tabIndex":Or(A,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Or(A,p,w);break;case"style":Vu(A,w,H);break;case"data":if(f!=="object"){Or(A,"data",w);break}case"src":case"href":if(w===""&&(f!=="a"||p!=="href")){A.removeAttribute(p);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(p);break}w=Lo(""+w),A.setAttribute(p,w);break;case"action":case"formAction":if(typeof w=="function"){A.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof H=="function"&&(p==="formAction"?(f!=="input"&&Zn(A,f,"name",F.name,F,null),Zn(A,f,"formEncType",F.formEncType,F,null),Zn(A,f,"formMethod",F.formMethod,F,null),Zn(A,f,"formTarget",F.formTarget,F,null)):(Zn(A,f,"encType",F.encType,F,null),Zn(A,f,"method",F.method,F,null),Zn(A,f,"target",F.target,F,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(p);break}w=Lo(""+w),A.setAttribute(p,w);break;case"onClick":w!=null&&(A.onclick=X1);break;case"onScroll":w!=null&&on("scroll",A);break;case"onScrollEnd":w!=null&&on("scrollend",A);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(p=w.__html,p!=null){if(F.children!=null)throw Error(n(60));A.innerHTML=p}}break;case"multiple":A.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":A.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){A.removeAttribute("xlink:href");break}p=Lo(""+w),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,""+w):A.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,""):A.removeAttribute(p);break;case"capture":case"download":w===!0?A.setAttribute(p,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,w):A.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?A.setAttribute(p,w):A.removeAttribute(p);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?A.removeAttribute(p):A.setAttribute(p,w);break;case"popover":on("beforetoggle",A),on("toggle",A),jr(A,"popover",w);break;case"xlinkActuate":Gr(A,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Gr(A,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Gr(A,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Gr(A,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Gr(A,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Gr(A,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Gr(A,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Gr(A,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Gr(A,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":jr(A,"is",w);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Ro.get(p)||p,jr(A,p,w))}}function uC(A,f,p,w,F,H){switch(p){case"style":Vu(A,w,H);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(p=w.__html,p!=null){if(F.children!=null)throw Error(n(60));A.innerHTML=p}}break;case"children":typeof w=="string"?gi(A,w):(typeof w=="number"||typeof w=="bigint")&&gi(A,""+w);break;case"onScroll":w!=null&&on("scroll",A);break;case"onScrollEnd":w!=null&&on("scrollend",A);break;case"onClick":w!=null&&(A.onclick=X1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Je.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(F=p.endsWith("Capture"),f=p.slice(2,F?p.length-7:void 0),H=A[an]||null,H=H!=null?H[p]:null,typeof H=="function"&&A.removeEventListener(f,H,F),typeof w=="function")){typeof H!="function"&&H!==null&&(p in A?A[p]=null:A.hasAttribute(p)&&A.removeAttribute(p)),A.addEventListener(f,w,F);break e}p in A?A[p]=w:w===!0?A.setAttribute(p,""):jr(A,p,w)}}}function ii(A,f,p){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":on("error",A),on("load",A);var w=!1,F=!1,H;for(H in p)if(p.hasOwnProperty(H)){var le=p[H];if(le!=null)switch(H){case"src":w=!0;break;case"srcSet":F=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Zn(A,f,H,le,p,null)}}F&&Zn(A,f,"srcSet",p.srcSet,p,null),w&&Zn(A,f,"src",p.src,p,null);return;case"input":on("invalid",A);var we=H=le=F=null,De=null,et=null;for(w in p)if(p.hasOwnProperty(w)){var dt=p[w];if(dt!=null)switch(w){case"name":F=dt;break;case"type":le=dt;break;case"checked":De=dt;break;case"defaultChecked":et=dt;break;case"value":H=dt;break;case"defaultValue":we=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(n(137,f));break;default:Zn(A,f,w,dt,p,null)}}cl(A,H,we,De,et,le,F,!1),ll(A);return;case"select":on("invalid",A),w=le=H=null;for(F in p)if(p.hasOwnProperty(F)&&(we=p[F],we!=null))switch(F){case"value":H=we;break;case"defaultValue":le=we;break;case"multiple":w=we;default:Zn(A,f,F,we,p,null)}f=H,p=le,A.multiple=!!w,f!=null?oo(A,!!w,f,!1):p!=null&&oo(A,!!w,p,!0);return;case"textarea":on("invalid",A),H=F=w=null;for(le in p)if(p.hasOwnProperty(le)&&(we=p[le],we!=null))switch(le){case"value":w=we;break;case"defaultValue":F=we;break;case"children":H=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(n(91));break;default:Zn(A,f,le,we,p,null)}Al(A,w,F,H),ll(A);return;case"option":for(De in p)if(p.hasOwnProperty(De)&&(w=p[De],w!=null))switch(De){case"selected":A.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:Zn(A,f,De,w,p,null)}return;case"dialog":on("beforetoggle",A),on("toggle",A),on("cancel",A),on("close",A);break;case"iframe":case"object":on("load",A);break;case"video":case"audio":for(w=0;w<Fp.length;w++)on(Fp[w],A);break;case"image":on("error",A),on("load",A);break;case"details":on("toggle",A);break;case"embed":case"source":case"link":on("error",A),on("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in p)if(p.hasOwnProperty(et)&&(w=p[et],w!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Zn(A,f,et,w,p,null)}return;default:if(zu(f)){for(dt in p)p.hasOwnProperty(dt)&&(w=p[dt],w!==void 0&&uC(A,f,dt,w,p,void 0));return}}for(we in p)p.hasOwnProperty(we)&&(w=p[we],w!=null&&Zn(A,f,we,w,p,null))}function U9(A,f,p,w){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var F=null,H=null,le=null,we=null,De=null,et=null,dt=null;for(nt in p){var wt=p[nt];if(p.hasOwnProperty(nt)&&wt!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":De=wt;default:w.hasOwnProperty(nt)||Zn(A,f,nt,null,w,wt)}}for(var rt in w){var nt=w[rt];if(wt=p[rt],w.hasOwnProperty(rt)&&(nt!=null||wt!=null))switch(rt){case"type":H=nt;break;case"name":F=nt;break;case"checked":et=nt;break;case"defaultChecked":dt=nt;break;case"value":le=nt;break;case"defaultValue":we=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(n(137,f));break;default:nt!==wt&&Zn(A,f,rt,nt,w,wt)}}Is(A,le,we,De,et,dt,H,F);return;case"select":nt=le=we=rt=null;for(H in p)if(De=p[H],p.hasOwnProperty(H)&&De!=null)switch(H){case"value":break;case"multiple":nt=De;default:w.hasOwnProperty(H)||Zn(A,f,H,null,w,De)}for(F in w)if(H=w[F],De=p[F],w.hasOwnProperty(F)&&(H!=null||De!=null))switch(F){case"value":rt=H;break;case"defaultValue":we=H;break;case"multiple":le=H;default:H!==De&&Zn(A,f,F,H,w,De)}f=we,p=le,w=nt,rt!=null?oo(A,!!p,rt,!1):!!w!=!!p&&(f!=null?oo(A,!!p,f,!0):oo(A,!!p,p?[]:"",!1));return;case"textarea":nt=rt=null;for(we in p)if(F=p[we],p.hasOwnProperty(we)&&F!=null&&!w.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:Zn(A,f,we,null,w,F)}for(le in w)if(F=w[le],H=p[le],w.hasOwnProperty(le)&&(F!=null||H!=null))switch(le){case"value":rt=F;break;case"defaultValue":nt=F;break;case"children":break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(n(91));break;default:F!==H&&Zn(A,f,le,F,w,H)}_n(A,rt,nt);return;case"option":for(var Br in p)if(rt=p[Br],p.hasOwnProperty(Br)&&rt!=null&&!w.hasOwnProperty(Br))switch(Br){case"selected":A.selected=!1;break;default:Zn(A,f,Br,null,w,rt)}for(De in w)if(rt=w[De],nt=p[De],w.hasOwnProperty(De)&&rt!==nt&&(rt!=null||nt!=null))switch(De){case"selected":A.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Zn(A,f,De,rt,w,nt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pr in p)rt=p[pr],p.hasOwnProperty(pr)&&rt!=null&&!w.hasOwnProperty(pr)&&Zn(A,f,pr,null,w,rt);for(et in w)if(rt=w[et],nt=p[et],w.hasOwnProperty(et)&&rt!==nt&&(rt!=null||nt!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(n(137,f));break;default:Zn(A,f,et,rt,w,nt)}return;default:if(zu(f)){for(var ea in p)rt=p[ea],p.hasOwnProperty(ea)&&rt!==void 0&&!w.hasOwnProperty(ea)&&uC(A,f,ea,void 0,w,rt);for(dt in w)rt=w[dt],nt=p[dt],!w.hasOwnProperty(dt)||rt===nt||rt===void 0&&nt===void 0||uC(A,f,dt,rt,w,nt);return}}for(var Ge in p)rt=p[Ge],p.hasOwnProperty(Ge)&&rt!=null&&!w.hasOwnProperty(Ge)&&Zn(A,f,Ge,null,w,rt);for(wt in w)rt=w[wt],nt=p[wt],!w.hasOwnProperty(wt)||rt===nt||rt==null&&nt==null||Zn(A,f,wt,rt,w,nt)}var AC=null,dC=null;function Y1(A){return A.nodeType===9?A:A.ownerDocument}function yN(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wN(A,f){if(A===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&f==="foreignObject"?0:A}function fC(A,f){return A==="textarea"||A==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var hC=null;function M9(){var A=window.event;return A&&A.type==="popstate"?A===hC?!1:(hC=A,!0):(hC=null,!1)}var bN=typeof setTimeout=="function"?setTimeout:void 0,P9=typeof clearTimeout=="function"?clearTimeout:void 0,CN=typeof Promise=="function"?Promise:void 0,j9=typeof queueMicrotask=="function"?queueMicrotask:typeof CN<"u"?function(A){return CN.resolve(null).then(A).catch(O9)}:bN;function O9(A){setTimeout(function(){throw A})}function wd(A){return A==="head"}function EN(A,f){var p=f,w=0,F=0;do{var H=p.nextSibling;if(A.removeChild(p),H&&H.nodeType===8)if(p=H.data,p==="/$"){if(0<w&&8>w){p=w;var le=A.ownerDocument;if(p&1&&Rp(le.documentElement),p&2&&Rp(le.body),p&4)for(p=le.head,Rp(p),le=p.firstChild;le;){var we=le.nextSibling,De=le.nodeName;le[Ee]||De==="SCRIPT"||De==="STYLE"||De==="LINK"&&le.rel.toLowerCase()==="stylesheet"||p.removeChild(le),le=we}}if(F===0){A.removeChild(H),Hp(f);return}F--}else p==="$"||p==="$?"||p==="$!"?F++:w=p.charCodeAt(0)-48;else w=0;p=H}while(p);Hp(f)}function mC(A){var f=A.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var p=f;switch(f=f.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":mC(p),_e(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}A.removeChild(p)}}function Q9(A,f,p,w){for(;A.nodeType===1;){var F=p;if(A.nodeName.toLowerCase()!==f.toLowerCase()){if(!w&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(w){if(!A[Ee])switch(f){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(H=A.getAttribute("rel"),H==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(H!==F.rel||A.getAttribute("href")!==(F.href==null||F.href===""?null:F.href)||A.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin)||A.getAttribute("title")!==(F.title==null?null:F.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(H=A.getAttribute("src"),(H!==(F.src==null?null:F.src)||A.getAttribute("type")!==(F.type==null?null:F.type)||A.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin))&&H&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(f==="input"&&A.type==="hidden"){var H=F.name==null?null:""+F.name;if(F.type==="hidden"&&A.getAttribute("name")===H)return A}else return A;if(A=xc(A.nextSibling),A===null)break}return null}function H9(A,f,p){if(f==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!p||(A=xc(A.nextSibling),A===null))return null;return A}function pC(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function V9(A,f){var p=A.ownerDocument;if(A.data!=="$?"||p.readyState==="complete")f();else{var w=function(){f(),p.removeEventListener("DOMContentLoaded",w)};p.addEventListener("DOMContentLoaded",w),A._reactRetry=w}}function xc(A){for(;A!=null;A=A.nextSibling){var f=A.nodeType;if(f===1||f===3)break;if(f===8){if(f=A.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return A}var gC=null;function _N(A){A=A.previousSibling;for(var f=0;A;){if(A.nodeType===8){var p=A.data;if(p==="$"||p==="$!"||p==="$?"){if(f===0)return A;f--}else p==="/$"&&f++}A=A.previousSibling}return null}function SN(A,f,p){switch(f=Y1(p),A){case"html":if(A=f.documentElement,!A)throw Error(n(452));return A;case"head":if(A=f.head,!A)throw Error(n(453));return A;case"body":if(A=f.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function Rp(A){for(var f=A.attributes;f.length;)A.removeAttributeNode(f[0]);_e(A)}var kl=new Map,TN=new Set;function J1(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var pA=ae.d;ae.d={f:z9,r:G9,D:q9,C:K9,L:$9,m:W9,X:Y9,S:X9,M:J9};function z9(){var A=pA.f(),f=V1();return A||f}function G9(A){var f=Ie(A);f!==null&&f.tag===5&&f.type==="form"?Gf(f):pA.r(A)}var w0=typeof document>"u"?null:document;function BN(A,f,p){var w=w0;if(w&&typeof f=="string"&&f){var F=hn(f);F='link[rel="'+A+'"][href="'+F+'"]',typeof p=="string"&&(F+='[crossorigin="'+p+'"]'),TN.has(F)||(TN.add(F),A={rel:A,crossOrigin:p,href:f},w.querySelector(F)===null&&(f=w.createElement("link"),ii(f,"link",A),He(f),w.head.appendChild(f)))}}function q9(A){pA.D(A),BN("dns-prefetch",A,null)}function K9(A,f){pA.C(A,f),BN("preconnect",A,f)}function $9(A,f,p){pA.L(A,f,p);var w=w0;if(w&&A&&f){var F='link[rel="preload"][as="'+hn(f)+'"]';f==="image"&&p&&p.imageSrcSet?(F+='[imagesrcset="'+hn(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(F+='[imagesizes="'+hn(p.imageSizes)+'"]')):F+='[href="'+hn(A)+'"]';var H=F;switch(f){case"style":H=b0(A);break;case"script":H=C0(A)}kl.has(H)||(A=d({rel:"preload",href:f==="image"&&p&&p.imageSrcSet?void 0:A,as:f},p),kl.set(H,A),w.querySelector(F)!==null||f==="style"&&w.querySelector(Lp(H))||f==="script"&&w.querySelector(Up(H))||(f=w.createElement("link"),ii(f,"link",A),He(f),w.head.appendChild(f)))}}function W9(A,f){pA.m(A,f);var p=w0;if(p&&A){var w=f&&typeof f.as=="string"?f.as:"script",F='link[rel="modulepreload"][as="'+hn(w)+'"][href="'+hn(A)+'"]',H=F;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":H=C0(A)}if(!kl.has(H)&&(A=d({rel:"modulepreload",href:A},f),kl.set(H,A),p.querySelector(F)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Up(H)))return}w=p.createElement("link"),ii(w,"link",A),He(w),p.head.appendChild(w)}}}function X9(A,f,p){pA.S(A,f,p);var w=w0;if(w&&A){var F=tt(w).hoistableStyles,H=b0(A);f=f||"default";var le=F.get(H);if(!le){var we={loading:0,preload:null};if(le=w.querySelector(Lp(H)))we.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":f},p),(p=kl.get(H))&&xC(A,p);var De=le=w.createElement("link");He(De),ii(De,"link",A),De._p=new Promise(function(et,dt){De.onload=et,De.onerror=dt}),De.addEventListener("load",function(){we.loading|=1}),De.addEventListener("error",function(){we.loading|=2}),we.loading|=4,Z1(le,f,w)}le={type:"stylesheet",instance:le,count:1,state:we},F.set(H,le)}}}function Y9(A,f){pA.X(A,f);var p=w0;if(p&&A){var w=tt(p).hoistableScripts,F=C0(A),H=w.get(F);H||(H=p.querySelector(Up(F)),H||(A=d({src:A,async:!0},f),(f=kl.get(F))&&vC(A,f),H=p.createElement("script"),He(H),ii(H,"link",A),p.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},w.set(F,H))}}function J9(A,f){pA.M(A,f);var p=w0;if(p&&A){var w=tt(p).hoistableScripts,F=C0(A),H=w.get(F);H||(H=p.querySelector(Up(F)),H||(A=d({src:A,async:!0,type:"module"},f),(f=kl.get(F))&&vC(A,f),H=p.createElement("script"),He(H),ii(H,"link",A),p.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},w.set(F,H))}}function NN(A,f,p,w){var F=(F=ce.current)?J1(F):null;if(!F)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(f=b0(p.href),p=tt(F).hoistableStyles,w=p.get(f),w||(w={type:"style",instance:null,count:0,state:null},p.set(f,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){A=b0(p.href);var H=tt(F).hoistableStyles,le=H.get(A);if(le||(F=F.ownerDocument||F,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},H.set(A,le),(H=F.querySelector(Lp(A)))&&!H._p&&(le.instance=H,le.state.loading=5),kl.has(A)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},kl.set(A,p),H||Z9(F,A,p,le.state))),f&&w===null)throw Error(n(528,""));return le}if(f&&w!==null)throw Error(n(529,""));return null;case"script":return f=p.async,p=p.src,typeof p=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=C0(p),p=tt(F).hoistableScripts,w=p.get(f),w||(w={type:"script",instance:null,count:0,state:null},p.set(f,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function b0(A){return'href="'+hn(A)+'"'}function Lp(A){return'link[rel="stylesheet"]['+A+"]"}function kN(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function Z9(A,f,p,w){A.querySelector('link[rel="preload"][as="style"]['+f+"]")?w.loading=1:(f=A.createElement("link"),w.preload=f,f.addEventListener("load",function(){return w.loading|=1}),f.addEventListener("error",function(){return w.loading|=2}),ii(f,"link",p),He(f),A.head.appendChild(f))}function C0(A){return'[src="'+hn(A)+'"]'}function Up(A){return"script[async]"+A}function IN(A,f,p){if(f.count++,f.instance===null)switch(f.type){case"style":var w=A.querySelector('style[data-href~="'+hn(p.href)+'"]');if(w)return f.instance=w,He(w),w;var F=d({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return w=(A.ownerDocument||A).createElement("style"),He(w),ii(w,"style",F),Z1(w,p.precedence,A),f.instance=w;case"stylesheet":F=b0(p.href);var H=A.querySelector(Lp(F));if(H)return f.state.loading|=4,f.instance=H,He(H),H;w=kN(p),(F=kl.get(F))&&xC(w,F),H=(A.ownerDocument||A).createElement("link"),He(H);var le=H;return le._p=new Promise(function(we,De){le.onload=we,le.onerror=De}),ii(H,"link",w),f.state.loading|=4,Z1(H,p.precedence,A),f.instance=H;case"script":return H=C0(p.src),(F=A.querySelector(Up(H)))?(f.instance=F,He(F),F):(w=p,(F=kl.get(H))&&(w=d({},p),vC(w,F)),A=A.ownerDocument||A,F=A.createElement("script"),He(F),ii(F,"link",w),A.head.appendChild(F),f.instance=F);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(w=f.instance,f.state.loading|=4,Z1(w,p.precedence,A));return f.instance}function Z1(A,f,p){for(var w=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),F=w.length?w[w.length-1]:null,H=F,le=0;le<w.length;le++){var we=w[le];if(we.dataset.precedence===f)H=we;else if(H!==F)break}H?H.parentNode.insertBefore(A,H.nextSibling):(f=p.nodeType===9?p.head:p,f.insertBefore(A,f.firstChild))}function xC(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.title==null&&(A.title=f.title)}function vC(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.integrity==null&&(A.integrity=f.integrity)}var ev=null;function FN(A,f,p){if(ev===null){var w=new Map,F=ev=new Map;F.set(p,w)}else F=ev,w=F.get(p),w||(w=new Map,F.set(p,w));if(w.has(A))return w;for(w.set(A,null),p=p.getElementsByTagName(A),F=0;F<p.length;F++){var H=p[F];if(!(H[Ee]||H[fn]||A==="link"&&H.getAttribute("rel")==="stylesheet")&&H.namespaceURI!=="http://www.w3.org/2000/svg"){var le=H.getAttribute(f)||"";le=A+le;var we=w.get(le);we?we.push(H):w.set(le,[H])}}return w}function DN(A,f,p){A=A.ownerDocument||A,A.head.insertBefore(p,f==="title"?A.querySelector("head > title"):null)}function eH(A,f,p){if(p===1||f.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return A=f.disabled,typeof f.precedence=="string"&&A==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function RN(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Mp=null;function tH(){}function rH(A,f,p){if(Mp===null)throw Error(n(475));var w=Mp;if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var F=b0(p.href),H=A.querySelector(Lp(F));if(H){A=H._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(w.count++,w=tv.bind(w),A.then(w,w)),f.state.loading|=4,f.instance=H,He(H);return}H=A.ownerDocument||A,p=kN(p),(F=kl.get(F))&&xC(p,F),H=H.createElement("link"),He(H);var le=H;le._p=new Promise(function(we,De){le.onload=we,le.onerror=De}),ii(H,"link",p),f.instance=H}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(f,A),(A=f.state.preload)&&(f.state.loading&3)===0&&(w.count++,f=tv.bind(w),A.addEventListener("load",f),A.addEventListener("error",f))}}function nH(){if(Mp===null)throw Error(n(475));var A=Mp;return A.stylesheets&&A.count===0&&yC(A,A.stylesheets),0<A.count?function(f){var p=setTimeout(function(){if(A.stylesheets&&yC(A,A.stylesheets),A.unsuspend){var w=A.unsuspend;A.unsuspend=null,w()}},6e4);return A.unsuspend=f,function(){A.unsuspend=null,clearTimeout(p)}}:null}function tv(){if(this.count--,this.count===0){if(this.stylesheets)yC(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var rv=null;function yC(A,f){A.stylesheets=null,A.unsuspend!==null&&(A.count++,rv=new Map,f.forEach(aH,A),rv=null,tv.call(A))}function aH(A,f){if(!(f.state.loading&4)){var p=rv.get(A);if(p)var w=p.get(null);else{p=new Map,rv.set(A,p);for(var F=A.querySelectorAll("link[data-precedence],style[data-precedence]"),H=0;H<F.length;H++){var le=F[H];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(p.set(le.dataset.precedence,le),w=le)}w&&p.set(null,w)}F=f.instance,le=F.getAttribute("data-precedence"),H=p.get(le)||w,H===w&&p.set(null,F),p.set(le,F),this.count++,w=tv.bind(this),F.addEventListener("load",w),F.addEventListener("error",w),H?H.parentNode.insertBefore(F,H.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(F,A.firstChild)),f.state.loading|=4}}var Pp={$$typeof:L,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function sH(A,f,p,w,F,H,le,we){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=na(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=na(0),this.hiddenUpdates=na(null),this.identifierPrefix=w,this.onUncaughtError=F,this.onCaughtError=H,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function LN(A,f,p,w,F,H,le,we,De,et,dt,wt){return A=new sH(A,f,p,le,we,De,et,wt),f=1,H===!0&&(f|=24),H=Vs(3,null,null,f),A.current=H,H.stateNode=A,f=op(),f.refCount++,A.pooledCache=f,f.refCount++,H.memoizedState={element:w,isDehydrated:p,cache:f},Ue(H),A}function UN(A){return A?(A=gs,A):gs}function MN(A,f,p,w,F,H){F=UN(F),w.context===null?w.context=F:w.pendingContext=F,w=ct(f),w.payload={element:p},H=H===void 0?null:H,H!==null&&(w.callback=H),p=vt(A,w,f),p!==null&&(Wo(p,A,f),ft(p,A,f))}function PN(A,f){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var p=A.retryLane;A.retryLane=p!==0&&p<f?p:f}}function wC(A,f){PN(A,f),(A=A.alternate)&&PN(A,f)}function jN(A){if(A.tag===13){var f=sc(A,67108864);f!==null&&Wo(f,A,67108864),wC(A,67108864)}}var nv=!0;function iH(A,f,p,w){var F=Y.T;Y.T=null;var H=ae.p;try{ae.p=2,bC(A,f,p,w)}finally{ae.p=H,Y.T=F}}function oH(A,f,p,w){var F=Y.T;Y.T=null;var H=ae.p;try{ae.p=8,bC(A,f,p,w)}finally{ae.p=H,Y.T=F}}function bC(A,f,p,w){if(nv){var F=CC(w);if(F===null)cC(A,f,w,av,p),QN(A,w);else if(cH(F,A,f,p,w))w.stopPropagation();else if(QN(A,w),f&4&&-1<lH.indexOf(A)){for(;F!==null;){var H=Ie(F);if(H!==null)switch(H.tag){case 3:if(H=H.stateNode,H.current.memoizedState.isDehydrated){var le=gr(H.pendingLanes);if(le!==0){var we=H;for(we.pendingLanes|=2,we.entangledLanes|=2;le;){var De=1<<31-Lt(le);we.entanglements[1]|=De,le&=~De}fu(H),(Hn&6)===0&&(Q1=je()+500,Ip(0))}}break;case 13:we=sc(H,2),we!==null&&Wo(we,H,2),V1(),wC(H,2)}if(H=CC(w),H===null&&cC(A,f,w,av,p),H===F)break;F=H}F!==null&&w.stopPropagation()}else cC(A,f,w,null,p)}}function CC(A){return A=On(A),EC(A)}var av=null;function EC(A){if(av=null,A=Be(A),A!==null){var f=s(A);if(f===null)A=null;else{var p=f.tag;if(p===13){if(A=i(f),A!==null)return A;A=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;A=null}else f!==A&&(A=null)}}return av=A,null}function ON(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case st:return 2;case pt:return 8;case St:case ut:return 32;case kt:return 268435456;default:return 32}default:return 32}}var _C=!1,bd=null,Cd=null,Ed=null,jp=new Map,Op=new Map,_d=[],lH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QN(A,f){switch(A){case"focusin":case"focusout":bd=null;break;case"dragenter":case"dragleave":Cd=null;break;case"mouseover":case"mouseout":Ed=null;break;case"pointerover":case"pointerout":jp.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Op.delete(f.pointerId)}}function Qp(A,f,p,w,F,H){return A===null||A.nativeEvent!==H?(A={blockedOn:f,domEventName:p,eventSystemFlags:w,nativeEvent:H,targetContainers:[F]},f!==null&&(f=Ie(f),f!==null&&jN(f)),A):(A.eventSystemFlags|=w,f=A.targetContainers,F!==null&&f.indexOf(F)===-1&&f.push(F),A)}function cH(A,f,p,w,F){switch(f){case"focusin":return bd=Qp(bd,A,f,p,w,F),!0;case"dragenter":return Cd=Qp(Cd,A,f,p,w,F),!0;case"mouseover":return Ed=Qp(Ed,A,f,p,w,F),!0;case"pointerover":var H=F.pointerId;return jp.set(H,Qp(jp.get(H)||null,A,f,p,w,F)),!0;case"gotpointercapture":return H=F.pointerId,Op.set(H,Qp(Op.get(H)||null,A,f,p,w,F)),!0}return!1}function HN(A){var f=Be(A.target);if(f!==null){var p=s(f);if(p!==null){if(f=p.tag,f===13){if(f=i(p),f!==null){A.blockedOn=f,Bs(A.priority,function(){if(p.tag===13){var w=$o();w=fs(w);var F=sc(p,w);F!==null&&Wo(F,p,w),wC(p,w)}});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){A.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}A.blockedOn=null}function sv(A){if(A.blockedOn!==null)return!1;for(var f=A.targetContainers;0<f.length;){var p=CC(A.nativeEvent);if(p===null){p=A.nativeEvent;var w=new p.constructor(p.type,p);lo=w,p.target.dispatchEvent(w),lo=null}else return f=Ie(p),f!==null&&jN(f),A.blockedOn=p,!1;f.shift()}return!0}function VN(A,f,p){sv(A)&&p.delete(f)}function uH(){_C=!1,bd!==null&&sv(bd)&&(bd=null),Cd!==null&&sv(Cd)&&(Cd=null),Ed!==null&&sv(Ed)&&(Ed=null),jp.forEach(VN),Op.forEach(VN)}function iv(A,f){A.blockedOn===f&&(A.blockedOn=null,_C||(_C=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,uH)))}var ov=null;function zN(A){ov!==A&&(ov=A,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ov===A&&(ov=null);for(var f=0;f<A.length;f+=3){var p=A[f],w=A[f+1],F=A[f+2];if(typeof w!="function"){if(EC(w||p)===null)continue;break}var H=Ie(p);H!==null&&(A.splice(f,3),f-=3,Tl(H,{pending:!0,data:F,method:p.method,action:w},w,F))}}))}function Hp(A){function f(De){return iv(De,A)}bd!==null&&iv(bd,A),Cd!==null&&iv(Cd,A),Ed!==null&&iv(Ed,A),jp.forEach(f),Op.forEach(f);for(var p=0;p<_d.length;p++){var w=_d[p];w.blockedOn===A&&(w.blockedOn=null)}for(;0<_d.length&&(p=_d[0],p.blockedOn===null);)HN(p),p.blockedOn===null&&_d.shift();if(p=(A.ownerDocument||A).$$reactFormReplay,p!=null)for(w=0;w<p.length;w+=3){var F=p[w],H=p[w+1],le=F[an]||null;if(typeof H=="function")le||zN(p);else if(le){var we=null;if(H&&H.hasAttribute("formAction")){if(F=H,le=H[an]||null)we=le.formAction;else if(EC(F)!==null)continue}else we=le.action;typeof we=="function"?p[w+1]=we:(p.splice(w,3),w-=3),zN(p)}}}function SC(A){this._internalRoot=A}lv.prototype.render=SC.prototype.render=function(A){var f=this._internalRoot;if(f===null)throw Error(n(409));var p=f.current,w=$o();MN(p,w,A,f,null,null)},lv.prototype.unmount=SC.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var f=A.containerInfo;MN(A.current,2,null,A,null,null),V1(),f[Rn]=null}};function lv(A){this._internalRoot=A}lv.prototype.unstable_scheduleHydration=function(A){if(A){var f=Ea();A={blockedOn:null,target:A,priority:f};for(var p=0;p<_d.length&&f!==0&&f<_d[p].priority;p++);_d.splice(p,0,A),p===0&&HN(A)}};var GN=e.version;if(GN!=="19.1.1")throw Error(n(527,GN,"19.1.1"));ae.findDOMNode=function(A){var f=A._reactInternals;if(f===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=l(f),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var AH={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cv.isDisabled&&cv.supportsFiber)try{It=cv.inject(AH),Dt=cv}catch{}}return zp.createRoot=function(A,f){if(!a(A))throw Error(n(299));var p=!1,w="",F=oB,H=lB,le=cB,we=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(F=f.onUncaughtError),f.onCaughtError!==void 0&&(H=f.onCaughtError),f.onRecoverableError!==void 0&&(le=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(we=f.unstable_transitionCallbacks)),f=LN(A,1,!1,null,null,p,w,F,H,le,we,null),A[Rn]=f.current,lC(A),new SC(f)},zp.hydrateRoot=function(A,f,p){if(!a(A))throw Error(n(299));var w=!1,F="",H=oB,le=lB,we=cB,De=null,et=null;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(F=p.identifierPrefix),p.onUncaughtError!==void 0&&(H=p.onUncaughtError),p.onCaughtError!==void 0&&(le=p.onCaughtError),p.onRecoverableError!==void 0&&(we=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(De=p.unstable_transitionCallbacks),p.formState!==void 0&&(et=p.formState)),f=LN(A,1,!0,f,p??null,w,F,H,le,we,De,et),f.context=UN(null),p=f.current,w=$o(),w=fs(w),F=ct(w),F.callback=null,vt(p,F,w),p=w,f.current.lanes=p,pa(f,p),fu(f),A[Rn]=f.current,lC(A),new lv(f)},zp.version="19.1.1",zp}var tk;function yH(){if(tk)return NC.exports;tk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),NC.exports=vH(),NC.exports}var wH=yH();const bH=dS(wH),CH=()=>{};var rk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},EH=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],i=t[r++],o=t[r++],l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return e.join("")},fL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],i=a+1<t.length,o=i?t[a+1]:0,l=a+2<t.length,u=l?t[a+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let m=(o&15)<<2|u>>6,g=u&63;l||(g=64,i||(m=64)),n.push(r[d],r[h],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],o=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const h=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||o==null||u==null||h==null)throw new _H;const m=s<<2|o>>4;if(n.push(m),u!==64){const g=o<<4&240|u>>2;if(n.push(g),h!==64){const b=u<<6&192|h;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _H extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SH=function(t){const e=dL(t);return fL.encodeByteArray(e,!0)},Q2=function(t){return SH(t).replace(/\./g,"")},hL=function(t){try{return fL.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH=()=>TH().__FIREBASE_DEFAULTS__,NH=()=>{if(typeof process>"u"||typeof rk>"u")return;const t=rk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hL(t[1]);return e&&JSON.parse(e)},rw=()=>{try{return CH()||BH()||NH()||kH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mL=t=>{var e,r;return(r=(e=rw())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},pL=t=>{const e=mL(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},gL=()=>{var t;return(t=rw())==null?void 0:t.config},xL=t=>{var e;return(e=rw())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FH(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Q2(JSON.stringify(r)),Q2(JSON.stringify(i)),""].join(".")}const Tg={};function DH(){const t={prod:[],emulator:[]};for(const e of Object.keys(Tg))Tg[e]?t.emulator.push(e):t.prod.push(e);return t}function RH(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let nk=!1;function hS(t,e){if(typeof window>"u"||typeof document>"u"||!Uh(window.location.host)||Tg[t]===e||Tg[t]||nk)return;Tg[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",s=DH().prod.length>0;function i(){const m=document.getElementById(n);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{nk=!0,i()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=RH(n),g=r("text"),b=document.getElementById(g)||document.createElement("span"),y=r("learnmore"),E=document.getElementById(y)||document.createElement("a"),B=r("preprendIcon"),k=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const L=m.element;o(L),d(E,y);const M=u();l(k,B),L.append(k,b,E,M),document.body.appendChild(L)}s?(b.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gi())}function UH(){var e;const t=(e=rw())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OH(){const t=Gi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QH(){return!UH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HH(){try{return typeof indexedDB=="object"}catch{return!1}}function VH(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)==null?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH="FirebaseError";class Lu extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=zH,Object.setPrototypeOf(this,Lu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rx.prototype.create)}}class Rx{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],i=s?GH(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new Lu(a,o,n)}}function GH(t,e){return t.replace(qH,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const qH=/\{\$([^}]+)}/g;function KH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lf(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],i=e[a];if(ak(s)&&ak(i)){if(!lf(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function ak(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ig(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function og(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function $H(t,e){const r=new WH(t,e);return r.subscribe.bind(r)}class WH{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");XH(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=DC),a.error===void 0&&(a.error=DC),a.complete===void 0&&(a.complete=DC);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XH(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function DC(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){return t&&t._delegate?t._delegate:t}class cf{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YH=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new IH;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZH(e))try{this.getOrInitializeService({instanceIdentifier:eh})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=eh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eh){return this.instances.has(e)}getOptions(e=eh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&e(s,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:JH(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=eh){return this.component?this.component.multipleInstances?e:eh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JH(t){return t===eh?void 0:t}function ZH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new YH(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(cn||(cn={}));const tV={debug:cn.DEBUG,verbose:cn.VERBOSE,info:cn.INFO,warn:cn.WARN,error:cn.ERROR,silent:cn.SILENT},rV=cn.INFO,nV={[cn.DEBUG]:"log",[cn.VERBOSE]:"log",[cn.INFO]:"info",[cn.WARN]:"warn",[cn.ERROR]:"error"},aV=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=nV[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let mS=class{constructor(e){this.name=e,this._logLevel=rV,this._logHandler=aV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in cn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,cn.DEBUG,...e),this._logHandler(this,cn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,cn.VERBOSE,...e),this._logHandler(this,cn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,cn.INFO,...e),this._logHandler(this,cn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,cn.WARN,...e),this._logHandler(this,cn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,cn.ERROR,...e),this._logHandler(this,cn.ERROR,...e)}};const sV=(t,e)=>e.some(r=>t instanceof r);let sk,ik;function iV(){return sk||(sk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oV(){return ik||(ik=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vL=new WeakMap,d_=new WeakMap,yL=new WeakMap,RC=new WeakMap,pS=new WeakMap;function lV(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r(Yd(t.result)),a()},i=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&vL.set(r,t)}).catch(()=>{}),pS.set(e,t),e}function cV(t){if(d_.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});d_.set(t,e)}let f_={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return d_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yL.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Yd(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uV(t){f_=t(f_)}function AV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(LC(this),e,...r);return yL.set(n,e.sort?e.sort():[e]),Yd(n)}:oV().includes(t)?function(...e){return t.apply(LC(this),e),Yd(vL.get(this))}:function(...e){return Yd(t.apply(LC(this),e))}}function dV(t){return typeof t=="function"?AV(t):(t instanceof IDBTransaction&&cV(t),sV(t,iV())?new Proxy(t,f_):t)}function Yd(t){if(t instanceof IDBRequest)return lV(t);if(RC.has(t))return RC.get(t);const e=dV(t);return e!==t&&(RC.set(t,e),pS.set(e,t)),e}const LC=t=>pS.get(t);function fV(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(t,e),o=Yd(i);return n&&i.addEventListener("upgradeneeded",l=>{n(Yd(i.result),l.oldVersion,l.newVersion,Yd(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),a&&l.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const hV=["get","getKey","getAll","getAllKeys","count"],mV=["put","add","delete","clear"],UC=new Map;function ok(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(UC.get(e))return UC.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=mV.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||hV.includes(r)))return;const s=async function(i,...o){const l=this.transaction(i,a?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&l.done]))[0]};return UC.set(e,s),s}uV(t=>({...t,get:(e,r,n)=>ok(e,r)||t.get(e,r,n),has:(e,r)=>!!ok(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(gV(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function gV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const h_="@firebase/app",lk="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new mS("@firebase/app"),xV="@firebase/app-compat",vV="@firebase/analytics-compat",yV="@firebase/analytics",wV="@firebase/app-check-compat",bV="@firebase/app-check",CV="@firebase/auth",EV="@firebase/auth-compat",_V="@firebase/database",SV="@firebase/data-connect",TV="@firebase/database-compat",BV="@firebase/functions",NV="@firebase/functions-compat",kV="@firebase/installations",IV="@firebase/installations-compat",FV="@firebase/messaging",DV="@firebase/messaging-compat",RV="@firebase/performance",LV="@firebase/performance-compat",UV="@firebase/remote-config",MV="@firebase/remote-config-compat",PV="@firebase/storage",jV="@firebase/storage-compat",OV="@firebase/firestore",QV="@firebase/ai",HV="@firebase/firestore-compat",VV="firebase",zV="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="[DEFAULT]",GV={[h_]:"fire-core",[xV]:"fire-core-compat",[yV]:"fire-analytics",[vV]:"fire-analytics-compat",[bV]:"fire-app-check",[wV]:"fire-app-check-compat",[CV]:"fire-auth",[EV]:"fire-auth-compat",[_V]:"fire-rtdb",[SV]:"fire-data-connect",[TV]:"fire-rtdb-compat",[BV]:"fire-fn",[NV]:"fire-fn-compat",[kV]:"fire-iid",[IV]:"fire-iid-compat",[FV]:"fire-fcm",[DV]:"fire-fcm-compat",[RV]:"fire-perf",[LV]:"fire-perf-compat",[UV]:"fire-rc",[MV]:"fire-rc-compat",[PV]:"fire-gcs",[jV]:"fire-gcs-compat",[OV]:"fire-fst",[HV]:"fire-fst-compat",[QV]:"fire-vertex","fire-js":"fire-js",[VV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new Map,qV=new Map,p_=new Map;function ck(t,e){try{t.container.addComponent(e)}catch(r){FA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ch(t){const e=t.name;if(p_.has(e))return FA.debug(`There were multiple attempts to register component ${e}.`),!1;p_.set(e,t);for(const r of Xg.values())ck(r,t);for(const r of qV.values())ck(r,t);return!0}function nw(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function jl(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jd=new Rx("app","Firebase",KV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new cf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=zV;function gS(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:m_,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Jd.create("bad-app-name",{appName:String(a)});if(r||(r=gL()),!r)throw Jd.create("no-options");const s=Xg.get(a);if(s){if(lf(r,s.options)&&lf(n,s.config))return s;throw Jd.create("duplicate-app",{appName:a})}const i=new eV(a);for(const l of p_.values())i.addComponent(l);const o=new $V(r,n,i);return Xg.set(a,o),o}function xS(t=m_){const e=Xg.get(t);if(!e&&t===m_&&gL())return gS();if(!e)throw Jd.create("no-app",{appName:t});return e}function uk(){return Array.from(Xg.values())}function Eu(t,e,r){let n=GV[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${e}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),FA.warn(i.join(" "));return}Ch(new cf(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="firebase-heartbeat-database",XV=1,Yg="firebase-heartbeat-store";let MC=null;function wL(){return MC||(MC=fV(WV,XV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yg)}catch(r){console.warn(r)}}}}).catch(t=>{throw Jd.create("idb-open",{originalErrorMessage:t.message})})),MC}async function YV(t){try{const r=(await wL()).transaction(Yg),n=await r.objectStore(Yg).get(bL(t));return await r.done,n}catch(e){if(e instanceof Lu)FA.warn(e.message);else{const r=Jd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});FA.warn(r.message)}}}async function Ak(t,e){try{const n=(await wL()).transaction(Yg,"readwrite");await n.objectStore(Yg).put(e,bL(t)),await n.done}catch(r){if(r instanceof Lu)FA.warn(r.message);else{const n=Jd.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});FA.warn(n.message)}}}function bL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=1024,ZV=30;class ez{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new rz(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dk();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>ZV){const i=nz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){FA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=dk(),{heartbeatsToSend:n,unsentEntries:a}=tz(this._heartbeatsCache.heartbeats),s=Q2(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return FA.warn(r),""}}}function dk(){return new Date().toISOString().substring(0,10)}function tz(t,e=JV){const r=[];let n=t.slice();for(const a of t){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),fk(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),fk(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class rz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HH()?VH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await YV(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ak(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ak(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function fk(t){return Q2(JSON.stringify({version:2,heartbeats:t})).length}function nz(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(t){Ch(new cf("platform-logger",e=>new pV(e),"PRIVATE")),Ch(new cf("heartbeat",e=>new ez(e),"PRIVATE")),Eu(h_,lk,t),Eu(h_,lk,"esm2020"),Eu("fire-js","")}az("");function CL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sz=CL,EL=new Rx("auth","Firebase",CL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=new mS("@firebase/auth");function iz(t,...e){H2.logLevel<=cn.WARN&&H2.warn(`Auth (${Hm}): ${t}`,...e)}function m2(t,...e){H2.logLevel<=cn.ERROR&&H2.error(`Auth (${Hm}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t,...e){throw vS(t,...e)}function _u(t,...e){return vS(t,...e)}function _L(t,e,r){const n={...sz(),[e]:r};return new Rx("auth","Firebase",n).create(e,{appName:t.name})}function Zd(t){return _L(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vS(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return EL.create(t,...e)}function _r(t,e,...r){if(!t)throw vS(e,...r)}function wA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw m2(e),new Error(e)}function DA(t,e){t||wA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function oz(){return hk()==="http:"||hk()==="https:"}function hk(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oz()||PH()||"connection"in navigator)?navigator.onLine:!0}function cz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,r){this.shortDelay=e,this.longDelay=r,DA(r>e,"Short delay should be less than long delay!"),this.isMobile=LH()||jH()}get(){return lz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t,e){DA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dz=new Ux(3e4,6e4);function Cf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function QA(t,e,r,n,a={}){return TL(t,a,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const o=Lx({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return MH()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Uh(t.emulatorConfig.host)&&(u.credentials="include"),SL.fetch()(await BL(t,t.config.apiHost,r,o),u)})}async function TL(t,e,r){t._canInitEmulator=!1;const n={...uz,...e};try{const a=new hz(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw uv(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw uv(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw uv(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw uv(t,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw _L(t,d,u);Fc(t,d)}}catch(a){if(a instanceof Lu)throw a;Fc(t,"network-request-failed",{message:String(a)})}}async function aw(t,e,r,n,a={}){const s=await QA(t,e,r,n,a);return"mfaPendingCredential"in s&&Fc(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function BL(t,e,r,n){const a=`${e}${r}?${n}`,s=t,i=s.config.emulator?yS(t.config,a):`${t.config.apiScheme}://${a}`;return Az.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function fz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(_u(this.auth,"network-request-failed")),dz.get())})}}function uv(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=_u(t,e,n);return a.customData._tokenResponse=r,a}function mk(t){return t!==void 0&&t.enterprise!==void 0}class mz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return fz(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pz(t,e){return QA(t,"GET","/v2/recaptchaConfig",Cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gz(t,e){return QA(t,"POST","/v1/accounts:delete",e)}async function V2(t,e){return QA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xz(t,e=!1){const r=ba(t),n=await r.getIdToken(e),a=wS(n);_r(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Bg(PC(a.auth_time)),issuedAtTime:Bg(PC(a.iat)),expirationTime:Bg(PC(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function PC(t){return Number(t)*1e3}function wS(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return m2("JWT malformed, contained fewer than 3 sections"),null;try{const a=hL(r);return a?JSON.parse(a):(m2("Failed to decode base64 JWT payload"),null)}catch(a){return m2("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function pk(t){const e=wS(t);return _r(e,"internal-error"),_r(typeof e.exp<"u","internal-error"),_r(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jg(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Lu&&vz(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function vz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bg(this.lastLoginAt),this.creationTime=Bg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(t){var h;const e=t.auth,r=await t.getIdToken(),n=await Jg(t,V2(e,{idToken:r}));_r(n==null?void 0:n.users.length,e,"internal-error");const a=n.users[0];t._notifyReloadListener(a);const s=(h=a.providerUserInfo)!=null&&h.length?NL(a.providerUserInfo):[],i=bz(t.providerData,s),o=t.isAnonymous,l=!(t.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new x_(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function wz(t){const e=ba(t);await z2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bz(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function NL(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cz(t,e){const r=await TL(t,{},async()=>{const n=Lx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,i=await BL(t,a,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return t.emulatorConfig&&Uh(t.emulatorConfig.host)&&(l.credentials="include"),SL.fetch()(i,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Ez(t,e){return QA(t,"POST","/v2/accounts:revokeToken",Cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_r(e.idToken,"internal-error"),_r(typeof e.idToken<"u","internal-error"),_r(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){_r(e.length!==0,"internal-error");const r=pk(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(_r(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await Cz(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new am;return n&&(_r(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),a&&(_r(typeof a=="string","internal-error",{appName:e}),i.accessToken=a),s&&(_r(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new am,this.toJSON())}_performRefresh(){return wA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t,e){_r(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sc{constructor({uid:e,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new yz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new x_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Jg(this,this.stsTokenManager.getToken(this.auth,e));return _r(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return xz(this,e)}reload(){return wz(this)}_assign(e){this!==e&&(_r(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Sc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){_r(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await z2(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jl(this.auth.app))return Promise.reject(Zd(this.auth));const e=await this.getIdToken();return await Jg(this,gz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:g,providerData:b,stsTokenManager:y}=r;_r(h&&y,e,"internal-error");const E=am.fromJSON(this.name,y);_r(typeof h=="string",e,"internal-error"),Td(n,e.name),Td(a,e.name),_r(typeof m=="boolean",e,"internal-error"),_r(typeof g=="boolean",e,"internal-error"),Td(s,e.name),Td(i,e.name),Td(o,e.name),Td(l,e.name),Td(u,e.name),Td(d,e.name);const B=new Sc({uid:h,auth:e,email:a,emailVerified:m,displayName:n,isAnonymous:g,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:E,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(B.providerData=b.map(k=>({...k}))),l&&(B._redirectEventId=l),B}static async _fromIdTokenResponse(e,r,n=!1){const a=new am;a.updateFromServerResponse(r);const s=new Sc({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await z2(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];_r(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?NL(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new am;o.updateFromIdToken(n);const l=new Sc({uid:a.localId,auth:e,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new x_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new Map;function bA(t){DA(t instanceof Function,"Expected a class definition");let e=gk.get(t);return e?(DA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}kL.type="NONE";const xk=kL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t,e,r){return`firebase:${t}:${e}:${r}`}class sm{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=p2(this.userKey,a.apiKey,s),this.fullPersistenceKey=p2("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await V2(this.auth,{idToken:e}).catch(()=>{});return r?Sc._fromGetAccountInfoResponse(this.auth,r,e):null}return Sc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new sm(bA(xk),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||bA(xk);const i=p2(n,e.config.apiKey,e.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let h;if(typeof d=="string"){const m=await V2(e,{idToken:d}).catch(()=>{});if(!m)break;h=await Sc._fromGetAccountInfoResponse(e,m,d)}else h=Sc._fromJSON(e,d);u!==s&&(o=h),s=u;break}}catch{}const l=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new sm(s,e,n):(s=l[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new sm(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UL(e))return"Blackberry";if(ML(e))return"Webos";if(FL(e))return"Safari";if((e.includes("chrome/")||DL(e))&&!e.includes("edge/"))return"Chrome";if(LL(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function IL(t=Gi()){return/firefox\//i.test(t)}function FL(t=Gi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DL(t=Gi()){return/crios\//i.test(t)}function RL(t=Gi()){return/iemobile/i.test(t)}function LL(t=Gi()){return/android/i.test(t)}function UL(t=Gi()){return/blackberry/i.test(t)}function ML(t=Gi()){return/webos/i.test(t)}function bS(t=Gi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _z(t=Gi()){var e;return bS(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Sz(){return OH()&&document.documentMode===10}function PL(t=Gi()){return bS(t)||LL(t)||ML(t)||UL(t)||/windows phone/i.test(t)||RL(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t,e=[]){let r;switch(t){case"Browser":r=vk(Gi());break;case"Worker":r=`${vk(Gi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Hm}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,o)=>{try{const l=e(s);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bz(t,e={}){return QA(t,"GET","/v2/passwordPolicy",Cf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz=6;class kz{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Nz,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yk(this),this.idTokenSubscription=new yk(this),this.beforeStateQueue=new Tz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=bA(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await sm.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await V2(this,{idToken:e}),n=await Sc._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(jl(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(n=l.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return _r(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await z2(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jl(this.app))return Promise.reject(Zd(this));const r=e?ba(e):null;return r&&_r(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&_r(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jl(this.app)?Promise.reject(Zd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jl(this.app)?Promise.reject(Zd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Bz(this),r=new kz(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rx("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Ez(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&bA(e)||this._popupRedirectResolver;_r(r,this,"argument-error"),this.redirectPersistenceManager=await sm.create(this,[bA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(_r(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,a);return()=>{i=!0,l()}}else{const l=e.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _r(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(jl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&iz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mh(t){return ba(t)}class yk{constructor(e){this.auth=e,this.observer=null,this.addObserver=$H(r=>this.observer=r)}get next(){return _r(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fz(t){sw=t}function OL(t){return sw.loadJS(t)}function Dz(){return sw.recaptchaEnterpriseScript}function Rz(){return sw.gapiScript}function Lz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Uz{constructor(){this.enterprise=new Mz}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class Mz{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const Pz="recaptcha-enterprise",QL="NO_RECAPTCHA";class jz{constructor(e){this.type=Pz,this.auth=Mh(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{pz(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new mz(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function a(s,i,o){const l=window.grecaptcha;mk(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{i(u)}).catch(()=>{i(QL)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Uz().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&mk(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Dz();l.length!==0&&(l+=o),OL(l).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function wk(t,e,r,n=!1,a=!1){const s=new jz(t);let i;if(a)i=QL;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function v_(t,e,r,n,a){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await wk(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await wk(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(t,e){const r=nw(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(lf(s,e??{}))return a;Fc(a,"already-initialized")}return r.initialize({options:e})}function Qz(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(bA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Hz(t,e,r){const n=Mh(t);_r(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=HL(e),{host:i,port:o}=Vz(e),l=o===null?"":`:${o}`,u={url:`${s}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){_r(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),_r(lf(u,n.config.emulator)&&lf(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Uh(i)?(fS(`${s}//${i}${l}`),hS("Auth",!0)):zz()}function HL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Vz(t){const e=HL(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:bk(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:bk(i)}}}function bk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zz(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return wA("not implemented")}_getIdTokenResponse(e){return wA("not implemented")}_linkToIdToken(e,r){return wA("not implemented")}_getReauthenticationResolver(e){return wA("not implemented")}}async function Gz(t,e){return QA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qz(t,e){return aw(t,"POST","/v1/accounts:signInWithPassword",Cf(t,e))}async function Kz(t,e){return QA(t,"POST","/v1/accounts:sendOobCode",Cf(t,e))}async function $z(t,e){return Kz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wz(t,e){return aw(t,"POST","/v1/accounts:signInWithEmailLink",Cf(t,e))}async function Xz(t,e){return aw(t,"POST","/v1/accounts:signInWithEmailLink",Cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends CS{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new Zg(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Zg(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v_(e,r,"signInWithPassword",qz);case"emailLink":return Wz(e,{email:this._email,oobCode:this._password});default:Fc(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v_(e,n,"signUpPassword",Gz);case"emailLink":return Xz(e,{idToken:r,email:this._email,oobCode:this._password});default:Fc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function im(t,e){return aw(t,"POST","/v1/accounts:signInWithIdp",Cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz="http://localhost";class Eh extends CS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Eh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Fc("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new Eh(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return im(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,im(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,im(e,r)}buildRequest(){const e={requestUri:Yz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Lx(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zz(t){const e=ig(og(t)).link,r=e?ig(og(e)).deep_link_id:null,n=ig(og(t)).deep_link_id;return(n?ig(og(n)).link:null)||n||r||e||t}class ES{constructor(e){const r=ig(og(e)),n=r.apiKey??null,a=r.oobCode??null,s=Jz(r.mode??null);_r(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=Zz(e);try{return new ES(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.providerId=Vm.PROVIDER_ID}static credential(e,r){return Zg._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=ES.parseLink(r);return _r(n,"argument-error"),Zg._fromEmailAndCode(e,n.code,n.tenantId)}}Vm.PROVIDER_ID="password";Vm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx extends VL{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends Mx{constructor(){super("facebook.com")}static credential(e){return Eh._fromParams({providerId:Pd.PROVIDER_ID,signInMethod:Pd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pd.credentialFromTaggedObject(e)}static credentialFromError(e){return Pd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pd.credential(e.oauthAccessToken)}catch{return null}}}Pd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Mx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Eh._fromParams({providerId:jd.PROVIDER_ID,signInMethod:jd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return jd.credentialFromTaggedObject(e)}static credentialFromError(e){return jd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return jd.credential(r,n)}catch{return null}}}jd.GOOGLE_SIGN_IN_METHOD="google.com";jd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends Mx{constructor(){super("github.com")}static credential(e){return Eh._fromParams({providerId:Od.PROVIDER_ID,signInMethod:Od.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Od.credentialFromTaggedObject(e)}static credentialFromError(e){return Od.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Od.credential(e.oauthAccessToken)}catch{return null}}}Od.GITHUB_SIGN_IN_METHOD="github.com";Od.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends Mx{constructor(){super("twitter.com")}static credential(e,r){return Eh._fromParams({providerId:Qd.PROVIDER_ID,signInMethod:Qd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Qd.credentialFromTaggedObject(e)}static credentialFromError(e){return Qd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Qd.credential(r,n)}catch{return null}}}Qd.TWITTER_SIGN_IN_METHOD="twitter.com";Qd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await Sc._fromIdTokenResponse(e,n,a),i=Ck(n);return new _m({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=Ck(n);return new _m({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function Ck(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2 extends Lu{constructor(e,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,G2.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new G2(e,r,n,a)}}function zL(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?G2._fromErrorAndOperation(t,s,e,n):s})}async function eG(t,e,r=!1){const n=await Jg(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return _m._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tG(t,e,r=!1){const{auth:n}=t;if(jl(n.app))return Promise.reject(Zd(n));const a="reauthenticate";try{const s=await Jg(t,zL(n,a,e,t),r);_r(s.idToken,n,"internal-error");const i=wS(s.idToken);_r(i,n,"internal-error");const{sub:o}=i;return _r(t.uid===o,n,"user-mismatch"),_m._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fc(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(t,e,r=!1){if(jl(t.app))return Promise.reject(Zd(t));const n="signIn",a=await zL(t,n,e),s=await _m._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function rG(t,e){return GL(Mh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nG(t){const e=Mh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aG(t,e,r){const n=Mh(t);await v_(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",$z)}function sG(t,e,r){return jl(t.app)?Promise.reject(Zd(t)):rG(ba(t),Vm.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&nG(t),n})}function iG(t,e,r,n){return ba(t).onIdTokenChanged(e,r,n)}function oG(t,e,r){return ba(t).beforeAuthStateChanged(e,r)}function lG(t,e,r,n){return ba(t).onAuthStateChanged(e,r,n)}function cG(t){return ba(t).signOut()}const q2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(q2,"1"),this.storage.removeItem(q2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uG=1e3,AG=10;class KL extends qL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);Sz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,AG):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},uG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}KL.type="LOCAL";const dG=KL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L extends qL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}$L.type="SESSION";const WL=$L;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fG(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new iw(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),l=await fG(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}iw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,l)=>{const u=_S("",20);a.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(){return window}function mG(t){Su().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(){return typeof Su().WorkerGlobalScope<"u"&&typeof Su().importScripts=="function"}async function pG(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gG(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function xG(){return XL()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="firebaseLocalStorageDb",vG=1,K2="firebaseLocalStorage",JL="fbase_key";class Px{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function ow(t,e){return t.transaction([K2],e?"readwrite":"readonly").objectStore(K2)}function yG(){const t=indexedDB.deleteDatabase(YL);return new Px(t).toPromise()}function y_(){const t=indexedDB.open(YL,vG);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(K2,{keyPath:JL})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(K2)?e(n):(n.close(),await yG(),e(await y_()))})})}async function Ek(t,e,r){const n=ow(t,!0).put({[JL]:e,value:r});return new Px(n).toPromise()}async function wG(t,e){const r=ow(t,!1).get(e),n=await new Px(r).toPromise();return n===void 0?null:n.value}function _k(t,e){const r=ow(t,!0).delete(e);return new Px(r).toPromise()}const bG=800,CG=3;class ZL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await y_(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>CG)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=iw._getInstance(xG()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await pG(),!this.activeServiceWorker)return;this.sender=new hG(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await y_();return await Ek(e,q2,"1"),await _k(e,q2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ek(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>wG(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>_k(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=ow(a,!1).getAll();return new Px(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZL.type="LOCAL";const EG=ZL;new Ux(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _G(t,e){return e?bA(e):(_r(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS extends CS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return im(e,this._buildIdpRequest())}_linkToIdToken(e,r){return im(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return im(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function SG(t){return GL(t.auth,new SS(t),t.bypassAuthState)}function TG(t){const{auth:e,user:r}=t;return _r(r,e,"internal-error"),tG(r,new SS(t),t.bypassAuthState)}async function BG(t){const{auth:e,user:r}=t;return _r(r,e,"internal-error"),eG(r,new SS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SG;case"linkViaPopup":case"linkViaRedirect":return BG;case"reauthViaPopup":case"reauthViaRedirect":return TG;default:Fc(this.auth,"internal-error")}}resolve(e){DA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){DA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NG=new Ux(2e3,1e4);class J0 extends eU{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,J0.currentPopupAction&&J0.currentPopupAction.cancel(),J0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _r(e,this.auth,"internal-error"),e}async onExecution(){DA(this.filter.length===1,"Popup operations only handle one event");const e=_S();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(_u(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(_u(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,J0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_u(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NG.get())};e()}}J0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kG="pendingRedirect",g2=new Map;class IG extends eU{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=g2.get(this.auth._key());if(!e){try{const n=await FG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}g2.set(this.auth._key(),e)}return this.bypassAuthState||g2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FG(t,e){const r=LG(e),n=RG(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function DG(t,e){g2.set(t._key(),e)}function RG(t){return bA(t._redirectPersistence)}function LG(t){return p2(kG,t.config.apiKey,t.name)}async function UG(t,e,r=!1){if(jl(t.app))return Promise.reject(Zd(t));const n=Mh(t),a=_G(n,e),i=await new IG(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG=600*1e3;class PG{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jG(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!tU(e)){const a=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(_u(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MG&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sk(e))}saveEventToCache(e){this.cachedEventUids.add(Sk(e)),this.lastProcessedEventTime=Date.now()}}function Sk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tU({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tU(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OG(t,e={}){return QA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HG=/^https?/;async function VG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await OG(t);for(const r of e)try{if(zG(r))return}catch{}Fc(t,"unauthorized-domain")}function zG(t){const e=g_(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!HG.test(r))return!1;if(QG.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GG=new Ux(3e4,6e4);function Tk(){const t=Su().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function qG(t){return new Promise((e,r)=>{var a,s,i;function n(){Tk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tk(),r(_u(t,"network-request-failed"))},timeout:GG.get()})}if((s=(a=Su().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((i=Su().gapi)!=null&&i.load)n();else{const o=Lz("iframefcb");return Su()[o]=()=>{gapi.load?n():r(_u(t,"network-request-failed"))},OL(`${Rz()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw x2=null,e})}let x2=null;function KG(t){return x2=x2||qG(t),x2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $G=new Ux(5e3,15e3),WG="__/auth/iframe",XG="emulator/auth/iframe",YG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZG(t){const e=t.config;_r(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?yS(e,XG):`https://${t.config.authDomain}/${WG}`,n={apiKey:e.apiKey,appName:t.name,v:Hm},a=JG.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Lx(n).slice(1)}`}async function eq(t){const e=await KG(t),r=Su().gapi;return _r(r,t,"internal-error"),e.open({where:document.body,url:ZG(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YG,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=_u(t,"network-request-failed"),o=Su().setTimeout(()=>{s(i)},$G.get());function l(){Su().clearTimeout(o),a(n)}n.ping(l).then(l,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rq=500,nq=600,aq="_blank",sq="http://localhost";class Bk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iq(t,e,r,n=rq,a=nq){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...tq,width:n.toString(),height:a.toString(),top:s,left:i},u=Gi().toLowerCase();r&&(o=DL(u)?aq:r),IL(u)&&(e=e||sq,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[g,b])=>`${m}${g}=${b},`,"");if(_z(u)&&o!=="_self")return oq(e||"",o),new Bk(null);const h=window.open(e||"",o,d);_r(h,t,"popup-blocked");try{h.focus()}catch{}return new Bk(h)}function oq(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq="__/auth/handler",cq="emulator/auth/handler",uq=encodeURIComponent("fac");async function Nk(t,e,r,n,a,s){_r(t.config.authDomain,t,"auth-domain-config-required"),_r(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Hm,eventId:a};if(e instanceof VL){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",KH(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof Mx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${uq}=${encodeURIComponent(l)}`:"";return`${Aq(t)}?${Lx(o).slice(1)}${u}`}function Aq({config:t}){return t.emulator?yS(t,cq):`https://${t.authDomain}/${lq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="webStorageSupport";class dq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WL,this._completeRedirectFn=UG,this._overrideRedirectResult=DG}async _openPopup(e,r,n,a){var i;DA((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await Nk(e,r,n,g_(),a);return iq(e,s,_S())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await Nk(e,r,n,g_(),a);return mG(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(DA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await eq(e),n=new PG(e);return r.register("authEvent",a=>(_r(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(jC,{type:jC},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[jC];s!==void 0&&r(!!s),Fc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=VG(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return PL()||FL()||bS()}}const fq=dq;var kk="@firebase/auth",Ik="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){_r(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pq(t){Ch(new cf("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;_r(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jL(t)},u=new Iz(n,a,s,l);return Qz(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ch(new cf("auth-internal",e=>{const r=Mh(e.getProvider("auth").getImmediate());return(n=>new hq(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Eu(kk,Ik,mq(t)),Eu(kk,Ik,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq=300,xq=xL("authIdTokenMaxAge")||gq;let Fk=null;const vq=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>xq)return;const a=r==null?void 0:r.token;Fk!==a&&(Fk=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function rU(t=xS()){const e=nw(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Oz(t,{popupRedirectResolver:fq,persistence:[EG,dG,WL]}),n=xL("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=vq(s.toString());oG(r,i,()=>i(r.currentUser)),iG(r,o=>i(o))}}const a=mL("auth");return a&&Hz(r,`http://${a}`),r}function yq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Fz({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=_u("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",yq().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pq("Browser");var wq="firebase",bq="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Eu(wq,bq,"app");var Dk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ef,nU;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function N(){}N.prototype=S.prototype,C.D=S.prototype,C.prototype=new N,C.prototype.constructor=C,C.C=function(Q,D,I){for(var O=Array(arguments.length-2),z=2;z<arguments.length;z++)O[z-2]=arguments[z];return S.prototype[D].apply(Q,O)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,S,N){N||(N=0);var Q=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)Q[D]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(D=0;16>D;++D)Q[D]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=C.g[0],N=C.g[1],D=C.g[2];var I=C.g[3],O=S+(I^N&(D^I))+Q[0]+3614090360&4294967295;S=N+(O<<7&4294967295|O>>>25),O=I+(D^S&(N^D))+Q[1]+3905402710&4294967295,I=S+(O<<12&4294967295|O>>>20),O=D+(N^I&(S^N))+Q[2]+606105819&4294967295,D=I+(O<<17&4294967295|O>>>15),O=N+(S^D&(I^S))+Q[3]+3250441966&4294967295,N=D+(O<<22&4294967295|O>>>10),O=S+(I^N&(D^I))+Q[4]+4118548399&4294967295,S=N+(O<<7&4294967295|O>>>25),O=I+(D^S&(N^D))+Q[5]+1200080426&4294967295,I=S+(O<<12&4294967295|O>>>20),O=D+(N^I&(S^N))+Q[6]+2821735955&4294967295,D=I+(O<<17&4294967295|O>>>15),O=N+(S^D&(I^S))+Q[7]+4249261313&4294967295,N=D+(O<<22&4294967295|O>>>10),O=S+(I^N&(D^I))+Q[8]+1770035416&4294967295,S=N+(O<<7&4294967295|O>>>25),O=I+(D^S&(N^D))+Q[9]+2336552879&4294967295,I=S+(O<<12&4294967295|O>>>20),O=D+(N^I&(S^N))+Q[10]+4294925233&4294967295,D=I+(O<<17&4294967295|O>>>15),O=N+(S^D&(I^S))+Q[11]+2304563134&4294967295,N=D+(O<<22&4294967295|O>>>10),O=S+(I^N&(D^I))+Q[12]+1804603682&4294967295,S=N+(O<<7&4294967295|O>>>25),O=I+(D^S&(N^D))+Q[13]+4254626195&4294967295,I=S+(O<<12&4294967295|O>>>20),O=D+(N^I&(S^N))+Q[14]+2792965006&4294967295,D=I+(O<<17&4294967295|O>>>15),O=N+(S^D&(I^S))+Q[15]+1236535329&4294967295,N=D+(O<<22&4294967295|O>>>10),O=S+(D^I&(N^D))+Q[1]+4129170786&4294967295,S=N+(O<<5&4294967295|O>>>27),O=I+(N^D&(S^N))+Q[6]+3225465664&4294967295,I=S+(O<<9&4294967295|O>>>23),O=D+(S^N&(I^S))+Q[11]+643717713&4294967295,D=I+(O<<14&4294967295|O>>>18),O=N+(I^S&(D^I))+Q[0]+3921069994&4294967295,N=D+(O<<20&4294967295|O>>>12),O=S+(D^I&(N^D))+Q[5]+3593408605&4294967295,S=N+(O<<5&4294967295|O>>>27),O=I+(N^D&(S^N))+Q[10]+38016083&4294967295,I=S+(O<<9&4294967295|O>>>23),O=D+(S^N&(I^S))+Q[15]+3634488961&4294967295,D=I+(O<<14&4294967295|O>>>18),O=N+(I^S&(D^I))+Q[4]+3889429448&4294967295,N=D+(O<<20&4294967295|O>>>12),O=S+(D^I&(N^D))+Q[9]+568446438&4294967295,S=N+(O<<5&4294967295|O>>>27),O=I+(N^D&(S^N))+Q[14]+3275163606&4294967295,I=S+(O<<9&4294967295|O>>>23),O=D+(S^N&(I^S))+Q[3]+4107603335&4294967295,D=I+(O<<14&4294967295|O>>>18),O=N+(I^S&(D^I))+Q[8]+1163531501&4294967295,N=D+(O<<20&4294967295|O>>>12),O=S+(D^I&(N^D))+Q[13]+2850285829&4294967295,S=N+(O<<5&4294967295|O>>>27),O=I+(N^D&(S^N))+Q[2]+4243563512&4294967295,I=S+(O<<9&4294967295|O>>>23),O=D+(S^N&(I^S))+Q[7]+1735328473&4294967295,D=I+(O<<14&4294967295|O>>>18),O=N+(I^S&(D^I))+Q[12]+2368359562&4294967295,N=D+(O<<20&4294967295|O>>>12),O=S+(N^D^I)+Q[5]+4294588738&4294967295,S=N+(O<<4&4294967295|O>>>28),O=I+(S^N^D)+Q[8]+2272392833&4294967295,I=S+(O<<11&4294967295|O>>>21),O=D+(I^S^N)+Q[11]+1839030562&4294967295,D=I+(O<<16&4294967295|O>>>16),O=N+(D^I^S)+Q[14]+4259657740&4294967295,N=D+(O<<23&4294967295|O>>>9),O=S+(N^D^I)+Q[1]+2763975236&4294967295,S=N+(O<<4&4294967295|O>>>28),O=I+(S^N^D)+Q[4]+1272893353&4294967295,I=S+(O<<11&4294967295|O>>>21),O=D+(I^S^N)+Q[7]+4139469664&4294967295,D=I+(O<<16&4294967295|O>>>16),O=N+(D^I^S)+Q[10]+3200236656&4294967295,N=D+(O<<23&4294967295|O>>>9),O=S+(N^D^I)+Q[13]+681279174&4294967295,S=N+(O<<4&4294967295|O>>>28),O=I+(S^N^D)+Q[0]+3936430074&4294967295,I=S+(O<<11&4294967295|O>>>21),O=D+(I^S^N)+Q[3]+3572445317&4294967295,D=I+(O<<16&4294967295|O>>>16),O=N+(D^I^S)+Q[6]+76029189&4294967295,N=D+(O<<23&4294967295|O>>>9),O=S+(N^D^I)+Q[9]+3654602809&4294967295,S=N+(O<<4&4294967295|O>>>28),O=I+(S^N^D)+Q[12]+3873151461&4294967295,I=S+(O<<11&4294967295|O>>>21),O=D+(I^S^N)+Q[15]+530742520&4294967295,D=I+(O<<16&4294967295|O>>>16),O=N+(D^I^S)+Q[2]+3299628645&4294967295,N=D+(O<<23&4294967295|O>>>9),O=S+(D^(N|~I))+Q[0]+4096336452&4294967295,S=N+(O<<6&4294967295|O>>>26),O=I+(N^(S|~D))+Q[7]+1126891415&4294967295,I=S+(O<<10&4294967295|O>>>22),O=D+(S^(I|~N))+Q[14]+2878612391&4294967295,D=I+(O<<15&4294967295|O>>>17),O=N+(I^(D|~S))+Q[5]+4237533241&4294967295,N=D+(O<<21&4294967295|O>>>11),O=S+(D^(N|~I))+Q[12]+1700485571&4294967295,S=N+(O<<6&4294967295|O>>>26),O=I+(N^(S|~D))+Q[3]+2399980690&4294967295,I=S+(O<<10&4294967295|O>>>22),O=D+(S^(I|~N))+Q[10]+4293915773&4294967295,D=I+(O<<15&4294967295|O>>>17),O=N+(I^(D|~S))+Q[1]+2240044497&4294967295,N=D+(O<<21&4294967295|O>>>11),O=S+(D^(N|~I))+Q[8]+1873313359&4294967295,S=N+(O<<6&4294967295|O>>>26),O=I+(N^(S|~D))+Q[15]+4264355552&4294967295,I=S+(O<<10&4294967295|O>>>22),O=D+(S^(I|~N))+Q[6]+2734768916&4294967295,D=I+(O<<15&4294967295|O>>>17),O=N+(I^(D|~S))+Q[13]+1309151649&4294967295,N=D+(O<<21&4294967295|O>>>11),O=S+(D^(N|~I))+Q[4]+4149444226&4294967295,S=N+(O<<6&4294967295|O>>>26),O=I+(N^(S|~D))+Q[11]+3174756917&4294967295,I=S+(O<<10&4294967295|O>>>22),O=D+(S^(I|~N))+Q[2]+718787259&4294967295,D=I+(O<<15&4294967295|O>>>17),O=N+(I^(D|~S))+Q[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+I&4294967295}n.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var N=S-this.blockSize,Q=this.B,D=this.h,I=0;I<S;){if(D==0)for(;I<=N;)a(this,C,I),I+=this.blockSize;if(typeof C=="string"){for(;I<S;)if(Q[D++]=C.charCodeAt(I++),D==this.blockSize){a(this,Q),D=0;break}}else for(;I<S;)if(Q[D++]=C[I++],D==this.blockSize){a(this,Q),D=0;break}}this.h=D,this.o+=S},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var N=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=N&255,N/=256;for(this.u(C),C=Array(16),S=N=0;4>S;++S)for(var Q=0;32>Q;Q+=8)C[N++]=this.g[S]>>>Q&255;return C};function s(C,S){var N=o;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=S(C)}function i(C,S){this.h=S;for(var N=[],Q=!0,D=C.length-1;0<=D;D--){var I=C[D]|0;Q&&I==S||(N[D]=I,Q=!1)}this.g=N}var o={};function l(C){return-128<=C&&128>C?s(C,function(S){return new i([S|0],0>S?-1:0)}):new i([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return E(u(-C));for(var S=[],N=1,Q=0;C>=N;Q++)S[Q]=C/N|0,N*=4294967296;return new i(S,0)}function d(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return E(d(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(S,8)),Q=h,D=0;D<C.length;D+=8){var I=Math.min(8,C.length-D),O=parseInt(C.substring(D,D+I),S);8>I?(I=u(Math.pow(S,I)),Q=Q.j(I).add(u(O))):(Q=Q.j(N),Q=Q.add(u(O)))}return Q}var h=l(0),m=l(1),g=l(16777216);t=i.prototype,t.m=function(){if(y(this))return-E(this).m();for(var C=0,S=1,N=0;N<this.g.length;N++){var Q=this.i(N);C+=(0<=Q?Q:4294967296+Q)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(y(this))return"-"+E(this).toString(C);for(var S=u(Math.pow(C,6)),N=this,Q="";;){var D=M(N,S).g;N=B(N,D.j(S));var I=((0<N.g.length?N.g[0]:N.h)>>>0).toString(C);if(N=D,b(N))return I+Q;for(;6>I.length;)I="0"+I;Q=I+Q}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function y(C){return C.h==-1}t.l=function(C){return C=B(this,C),y(C)?-1:b(C)?0:1};function E(C){for(var S=C.g.length,N=[],Q=0;Q<S;Q++)N[Q]=~C.g[Q];return new i(N,~C.h).add(m)}t.abs=function(){return y(this)?E(this):this},t.add=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],Q=0,D=0;D<=S;D++){var I=Q+(this.i(D)&65535)+(C.i(D)&65535),O=(I>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);Q=O>>>16,I&=65535,O&=65535,N[D]=O<<16|I}return new i(N,N[N.length-1]&-2147483648?-1:0)};function B(C,S){return C.add(E(S))}t.j=function(C){if(b(this)||b(C))return h;if(y(this))return y(C)?E(this).j(E(C)):E(E(this).j(C));if(y(C))return E(this.j(E(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var S=this.g.length+C.g.length,N=[],Q=0;Q<2*S;Q++)N[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var D=0;D<C.g.length;D++){var I=this.i(Q)>>>16,O=this.i(Q)&65535,z=C.i(D)>>>16,re=C.i(D)&65535;N[2*Q+2*D]+=O*re,k(N,2*Q+2*D),N[2*Q+2*D+1]+=I*re,k(N,2*Q+2*D+1),N[2*Q+2*D+1]+=O*z,k(N,2*Q+2*D+1),N[2*Q+2*D+2]+=I*z,k(N,2*Q+2*D+2)}for(Q=0;Q<S;Q++)N[Q]=N[2*Q+1]<<16|N[2*Q];for(Q=S;Q<2*S;Q++)N[Q]=0;return new i(N,0)};function k(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function L(C,S){this.g=C,this.h=S}function M(C,S){if(b(S))throw Error("division by zero");if(b(C))return new L(h,h);if(y(C))return S=M(E(C),S),new L(E(S.g),E(S.h));if(y(S))return S=M(C,E(S)),new L(E(S.g),S.h);if(30<C.g.length){if(y(C)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var N=m,Q=S;0>=Q.l(C);)N=P(N),Q=P(Q);var D=R(N,1),I=R(Q,1);for(Q=R(Q,2),N=R(N,2);!b(Q);){var O=I.add(Q);0>=O.l(C)&&(D=D.add(N),I=O),Q=R(Q,1),N=R(N,1)}return S=B(C,D.j(S)),new L(D,S)}for(D=h;0<=C.l(S);){for(N=Math.max(1,Math.floor(C.m()/S.m())),Q=Math.ceil(Math.log(N)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),I=u(N),O=I.j(S);y(O)||0<O.l(C);)N-=Q,I=u(N),O=I.j(S);b(I)&&(I=m),D=D.add(I),C=B(C,O)}return new L(D,C)}t.A=function(C){return M(this,C).h},t.and=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],Q=0;Q<S;Q++)N[Q]=this.i(Q)&C.i(Q);return new i(N,this.h&C.h)},t.or=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],Q=0;Q<S;Q++)N[Q]=this.i(Q)|C.i(Q);return new i(N,this.h|C.h)},t.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],Q=0;Q<S;Q++)N[Q]=this.i(Q)^C.i(Q);return new i(N,this.h^C.h)};function P(C){for(var S=C.g.length+1,N=[],Q=0;Q<S;Q++)N[Q]=C.i(Q)<<1|C.i(Q-1)>>>31;return new i(N,C.h)}function R(C,S){var N=S>>5;S%=32;for(var Q=C.g.length-N,D=[],I=0;I<Q;I++)D[I]=0<S?C.i(I+N)>>>S|C.i(I+N+1)<<32-S:C.i(I+N);return new i(D,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,nU=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,ef=i}).apply(typeof Dk<"u"?Dk:typeof self<"u"?self:typeof window<"u"?window:{});var Av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aU,lg,sU,v2,w_,iU,oU,lU;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,J,se){return T==Array.prototype||T==Object.prototype||(T[J]=se.value),T};function r(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof Av=="object"&&Av];for(var J=0;J<T.length;++J){var se=T[J];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var n=r(this);function a(T,J){if(J)e:{var se=n;T=T.split(".");for(var ye=0;ye<T.length-1;ye++){var Qe=T[ye];if(!(Qe in se))break e;se=se[Qe]}T=T[T.length-1],ye=se[T],J=J(ye),J!=ye&&J!=null&&e(se,T,{configurable:!0,writable:!0,value:J})}}function s(T,J){T instanceof String&&(T+="");var se=0,ye=!1,Qe={next:function(){if(!ye&&se<T.length){var Ze=se++;return{value:J(Ze,T[Ze]),done:!1}}return ye=!0,{done:!0,value:void 0}}};return Qe[Symbol.iterator]=function(){return Qe},Qe}a("Array.prototype.values",function(T){return T||function(){return s(this,function(J,se){return se})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(T){var J=typeof T;return J=J!="object"?J:T?Array.isArray(T)?"array":J:"null",J=="array"||J=="object"&&typeof T.length=="number"}function u(T){var J=typeof T;return J=="object"&&T!=null||J=="function"}function d(T,J,se){return T.call.apply(T.bind,arguments)}function h(T,J,se){if(!T)throw Error();if(2<arguments.length){var ye=Array.prototype.slice.call(arguments,2);return function(){var Qe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Qe,ye),T.apply(J,Qe)}}return function(){return T.apply(J,arguments)}}function m(T,J,se){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(T,J){var se=Array.prototype.slice.call(arguments,1);return function(){var ye=se.slice();return ye.push.apply(ye,arguments),T.apply(this,ye)}}function b(T,J){function se(){}se.prototype=J.prototype,T.aa=J.prototype,T.prototype=new se,T.prototype.constructor=T,T.Qb=function(ye,Qe,Ze){for(var _t=Array(arguments.length-2),mr=2;mr<arguments.length;mr++)_t[mr-2]=arguments[mr];return J.prototype[Qe].apply(ye,_t)}}function y(T){const J=T.length;if(0<J){const se=Array(J);for(let ye=0;ye<J;ye++)se[ye]=T[ye];return se}return[]}function E(T,J){for(let se=1;se<arguments.length;se++){const ye=arguments[se];if(l(ye)){const Qe=T.length||0,Ze=ye.length||0;T.length=Qe+Ze;for(let _t=0;_t<Ze;_t++)T[Qe+_t]=ye[_t]}else T.push(ye)}}class B{constructor(J,se){this.i=J,this.j=se,this.h=0,this.g=null}get(){let J;return 0<this.h?(this.h--,J=this.g,this.g=J.next,J.next=null):J=this.i(),J}}function k(T){return/^[\s\xa0]*$/.test(T)}function L(){var T=o.navigator;return T&&(T=T.userAgent)?T:""}function M(T){return M[" "](T),T}M[" "]=function(){};var P=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function R(T,J,se){for(const ye in T)J.call(se,T[ye],ye,T)}function C(T,J){for(const se in T)J.call(void 0,T[se],se,T)}function S(T){const J={};for(const se in T)J[se]=T[se];return J}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(T,J){let se,ye;for(let Qe=1;Qe<arguments.length;Qe++){ye=arguments[Qe];for(se in ye)T[se]=ye[se];for(let Ze=0;Ze<N.length;Ze++)se=N[Ze],Object.prototype.hasOwnProperty.call(ye,se)&&(T[se]=ye[se])}}function D(T){var J=1;T=T.split(":");const se=[];for(;0<J&&T.length;)se.push(T.shift()),J--;return T.length&&se.push(T.join(":")),se}function I(T){o.setTimeout(()=>{throw T},0)}function O(){var T=G;let J=null;return T.g&&(J=T.g,T.g=T.g.next,T.g||(T.h=null),J.next=null),J}class z{constructor(){this.h=this.g=null}add(J,se){const ye=re.get();ye.set(J,se),this.h?this.h.next=ye:this.g=ye,this.h=ye}}var re=new B(()=>new Y,T=>T.reset());class Y{constructor(){this.next=this.g=this.h=null}set(J,se){this.h=J,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,K=!1,G=new z,W=()=>{const T=o.Promise.resolve(void 0);ae=()=>{T.then(ie)}};var ie=()=>{for(var T;T=O();){try{T.h.call(T.g)}catch(se){I(se)}var J=re;J.j(T),100>J.h&&(J.h++,T.next=J.g,J.g=T)}K=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(T,J){this.type=T,this.g=this.target=J,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var T=!1,J=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const se=()=>{};o.addEventListener("test",se,J),o.removeEventListener("test",se,J)}catch{}return T}();function te(T,J){if(X.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var se=this.type=T.type,ye=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=J,J=T.relatedTarget){if(P){e:{try{M(J.nodeName);var Qe=!0;break e}catch{}Qe=!1}Qe||(J=null)}}else se=="mouseover"?J=T.fromElement:se=="mouseout"&&(J=T.toElement);this.relatedTarget=J,ye?(this.clientX=ye.clientX!==void 0?ye.clientX:ye.pageX,this.clientY=ye.clientY!==void 0?ye.clientY:ye.pageY,this.screenX=ye.screenX||0,this.screenY=ye.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:ce[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&te.aa.h.call(this)}}b(te,X);var ce={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),me=0;function ge(T,J,se,ye,Qe){this.listener=T,this.proxy=null,this.src=J,this.type=se,this.capture=!!ye,this.ha=Qe,this.key=++me,this.da=this.fa=!1}function Te(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function xe(T){this.src=T,this.g={},this.h=0}xe.prototype.add=function(T,J,se,ye,Qe){var Ze=T.toString();T=this.g[Ze],T||(T=this.g[Ze]=[],this.h++);var _t=Me(T,J,ye,Qe);return-1<_t?(J=T[_t],se||(J.fa=!1)):(J=new ge(J,this.src,Ze,!!ye,Qe),J.fa=se,T.push(J)),J};function oe(T,J){var se=J.type;if(se in T.g){var ye=T.g[se],Qe=Array.prototype.indexOf.call(ye,J,void 0),Ze;(Ze=0<=Qe)&&Array.prototype.splice.call(ye,Qe,1),Ze&&(Te(J),T.g[se].length==0&&(delete T.g[se],T.h--))}}function Me(T,J,se,ye){for(var Qe=0;Qe<T.length;++Qe){var Ze=T[Qe];if(!Ze.da&&Ze.listener==J&&Ze.capture==!!se&&Ze.ha==ye)return Qe}return-1}var at="closure_lm_"+(1e6*Math.random()|0),Se={};function be(T,J,se,ye,Qe){if(Array.isArray(J)){for(var Ze=0;Ze<J.length;Ze++)be(T,J[Ze],se,ye,Qe);return null}return se=Yt(se),T&&T[de]?T.K(J,se,u(ye)?!!ye.capture:!1,Qe):je(T,J,se,!1,ye,Qe)}function je(T,J,se,ye,Qe,Ze){if(!J)throw Error("Invalid event type");var _t=u(Qe)?!!Qe.capture:!!Qe,mr=kt(T);if(mr||(T[at]=mr=new xe(T)),se=mr.add(J,se,ye,_t,Ze),se.proxy)return se;if(ye=Ke(),se.proxy=ye,ye.src=T,ye.listener=se,T.addEventListener)Z||(Qe=_t),Qe===void 0&&(Qe=!1),T.addEventListener(J.toString(),ye,Qe);else if(T.attachEvent)T.attachEvent(St(J.toString()),ye);else if(T.addListener&&T.removeListener)T.addListener(ye);else throw Error("addEventListener and attachEvent are unavailable.");return se}function Ke(){function T(se){return J.call(T.src,T.listener,se)}const J=ut;return T}function st(T,J,se,ye,Qe){if(Array.isArray(J))for(var Ze=0;Ze<J.length;Ze++)st(T,J[Ze],se,ye,Qe);else ye=u(ye)?!!ye.capture:!!ye,se=Yt(se),T&&T[de]?(T=T.i,J=String(J).toString(),J in T.g&&(Ze=T.g[J],se=Me(Ze,se,ye,Qe),-1<se&&(Te(Ze[se]),Array.prototype.splice.call(Ze,se,1),Ze.length==0&&(delete T.g[J],T.h--)))):T&&(T=kt(T))&&(J=T.g[J.toString()],T=-1,J&&(T=Me(J,se,ye,Qe)),(se=-1<T?J[T]:null)&&pt(se))}function pt(T){if(typeof T!="number"&&T&&!T.da){var J=T.src;if(J&&J[de])oe(J.i,T);else{var se=T.type,ye=T.proxy;J.removeEventListener?J.removeEventListener(se,ye,T.capture):J.detachEvent?J.detachEvent(St(se),ye):J.addListener&&J.removeListener&&J.removeListener(ye),(se=kt(J))?(oe(se,T),se.h==0&&(se.src=null,J[at]=null)):Te(T)}}}function St(T){return T in Se?Se[T]:Se[T]="on"+T}function ut(T,J){if(T.da)T=!0;else{J=new te(J,this);var se=T.listener,ye=T.ha||T.src;T.fa&&pt(T),T=se.call(ye,J)}return T}function kt(T){return T=T[at],T instanceof xe?T:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yt(T){return typeof T=="function"?T:(T[zt]||(T[zt]=function(J){return T.handleEvent(J)}),T[zt])}function It(){j.call(this),this.i=new xe(this),this.M=this,this.F=null}b(It,j),It.prototype[de]=!0,It.prototype.removeEventListener=function(T,J,se,ye){st(this,T,J,se,ye)};function Dt(T,J){var se,ye=T.F;if(ye)for(se=[];ye;ye=ye.F)se.push(ye);if(T=T.M,ye=J.type||J,typeof J=="string")J=new X(J,T);else if(J instanceof X)J.target=J.target||T;else{var Qe=J;J=new X(ye,T),Q(J,Qe)}if(Qe=!0,se)for(var Ze=se.length-1;0<=Ze;Ze--){var _t=J.g=se[Ze];Qe=Wt(_t,ye,!0,J)&&Qe}if(_t=J.g=T,Qe=Wt(_t,ye,!0,J)&&Qe,Qe=Wt(_t,ye,!1,J)&&Qe,se)for(Ze=0;Ze<se.length;Ze++)_t=J.g=se[Ze],Qe=Wt(_t,ye,!1,J)&&Qe}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var T=this.i,J;for(J in T.g){for(var se=T.g[J],ye=0;ye<se.length;ye++)Te(se[ye]);delete T.g[J],T.h--}}this.F=null},It.prototype.K=function(T,J,se,ye){return this.i.add(String(T),J,!1,se,ye)},It.prototype.L=function(T,J,se,ye){return this.i.add(String(T),J,!0,se,ye)};function Wt(T,J,se,ye){if(J=T.i.g[String(J)],!J)return!0;J=J.concat();for(var Qe=!0,Ze=0;Ze<J.length;++Ze){var _t=J[Ze];if(_t&&!_t.da&&_t.capture==se){var mr=_t.listener,Zr=_t.ha||_t.src;_t.fa&&oe(T.i,_t),Qe=mr.call(Zr,ye)!==!1&&Qe}}return Qe&&!ye.defaultPrevented}function Lt(T,J,se){if(typeof T=="function")se&&(T=m(T,se));else if(T&&typeof T.handleEvent=="function")T=m(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(J)?-1:o.setTimeout(T,J||0)}function Rt(T){T.g=Lt(()=>{T.g=null,T.i&&(T.i=!1,Rt(T))},T.l);const J=T.h;T.h=null,T.m.apply(null,J)}class xt extends j{constructor(J,se){super(),this.m=J,this.l=se,this.h=null,this.i=!1,this.g=null}j(J){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(T){j.call(this),this.h=T,this.g={}}b(wr,j);var Jt=[];function dn(T){R(T.g,function(J,se){this.g.hasOwnProperty(se)&&pt(J)},T),T.g={}}wr.prototype.N=function(){wr.aa.N.call(this),dn(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gr=o.JSON.stringify,Ur=o.JSON.parse,Dn=class{stringify(T){return o.JSON.stringify(T,void 0)}parse(T){return o.JSON.parse(T,void 0)}};function Fr(){}Fr.prototype.h=null;function ds(T){return T.h||(T.h=T.i())}function nn(){}var na={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pa(){X.call(this,"d")}b(pa,X);function Pr(){X.call(this,"c")}b(Pr,X);var nr={},zr=null;function fs(){return zr=zr||new It}nr.La="serverreachability";function Wn(T){X.call(this,nr.La,T)}b(Wn,X);function Ea(T){const J=fs();Dt(J,new Wn(J))}nr.STAT_EVENT="statevent";function Bs(T,J){X.call(this,nr.STAT_EVENT,T),this.stat=J}b(Bs,X);function Gt(T){const J=fs();Dt(J,new Bs(J,T))}nr.Ma="timingevent";function fn(T,J){X.call(this,nr.Ma,T),this.size=J}b(fn,X);function an(T,J){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){T()},J)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function jn(T,J,se,ye,Qe,Ze){T.info(function(){if(T.g)if(Ze)for(var _t="",mr=Ze.split("&"),Zr=0;Zr<mr.length;Zr++){var kr=mr[Zr].split("=");if(1<kr.length){var Sn=kr[0];kr=kr[1];var Ln=Sn.split("_");_t=2<=Ln.length&&Ln[1]=="type"?_t+(Sn+"="+kr+"&"):_t+(Sn+"=redacted&")}}else _t=null;else _t=Ze;return"XMLHTTP REQ ("+ye+") [attempt "+Qe+"]: "+J+`
`+se+`
`+_t})}function Xn(T,J,se,ye,Qe,Ze,_t){T.info(function(){return"XMLHTTP RESP ("+ye+") [ attempt "+Qe+"]: "+J+`
`+se+`
`+Ze+" "+_t})}function fe(T,J,se,ye){T.info(function(){return"XMLHTTP TEXT ("+J+"): "+Ee(T,se)+(ye?" "+ye:"")})}function ke(T,J){T.info(function(){return"TIMEOUT: "+J})}Rn.prototype.info=function(){};function Ee(T,J){if(!T.g)return J;if(!J)return null;try{var se=JSON.parse(J);if(se){for(T=0;T<se.length;T++)if(Array.isArray(se[T])){var ye=se[T];if(!(2>ye.length)){var Qe=ye[1];if(Array.isArray(Qe)&&!(1>Qe.length)){var Ze=Qe[0];if(Ze!="noop"&&Ze!="stop"&&Ze!="close")for(var _t=1;_t<Qe.length;_t++)Qe[_t]=""}}}}return gr(se)}catch{return J}}var _e={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ie;function qe(){}b(qe,Fr),qe.prototype.g=function(){return new XMLHttpRequest},qe.prototype.i=function(){return{}},Ie=new qe;function tt(T,J,se,ye){this.j=T,this.i=J,this.l=se,this.R=ye||1,this.U=new wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new He}function He(){this.i=null,this.g="",this.h=!1}var We={},Je={};function yt(T,J,se){T.L=1,T.v=Al(Is(J)),T.m=se,T.P=!0,Nt(T,null)}function Nt(T,J){T.F=Date.now(),Ut(T),T.A=Is(T.v);var se=T.A,ye=T.R;Array.isArray(ye)||(ye=[String(ye)]),hr(se.i,"t",ye),T.C=0,se=T.j.J,T.h=new He,T.g=Ae(T.j,se?J:null,!T.m),0<T.O&&(T.M=new xt(m(T.Y,T,T.g),T.O)),J=T.U,se=T.g,ye=T.ca;var Qe="readystatechange";Array.isArray(Qe)||(Qe&&(Jt[0]=Qe.toString()),Qe=Jt);for(var Ze=0;Ze<Qe.length;Ze++){var _t=be(se,Qe[Ze],ye||J.handleEvent,!1,J.h||J);if(!_t)break;J.g[_t.key]=_t}J=T.H?S(T.H):{},T.m?(T.u||(T.u="POST"),J["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,J)):(T.u="GET",T.g.ea(T.A,T.u,null,J)),Ea(),jn(T.i,T.u,T.A,T.l,T.R,T.m)}tt.prototype.ca=function(T){T=T.target;const J=this.M;J&&Ma(T)==3?J.j():this.Y(T)},tt.prototype.Y=function(T){try{if(T==this.g)e:{const Ln=Ma(this.g);var J=this.g.Ba();const mo=this.g.Z();if(!(3>Ln)&&(Ln!=3||this.g&&(this.h.h||this.g.oa()||XA(this.g)))){this.J||Ln!=4||J==7||(J==8||0>=mo?Ea(3):Ea(2)),jr(this);var se=this.g.Z();this.X=se;t:if(Ot(this)){var ye=XA(this.g);T="";var Qe=ye.length,Ze=Ma(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),Or(this);var _t="";break t}this.h.i=new o.TextDecoder}for(J=0;J<Qe;J++)this.h.h=!0,T+=this.h.i.decode(ye[J],{stream:!(Ze&&J==Qe-1)});ye.length=0,this.h.g+=T,this.C=0,_t=this.h.g}else _t=this.g.oa();if(this.o=se==200,Xn(this.i,this.u,this.A,this.l,this.R,Ln,se),this.o){if(this.T&&!this.K){t:{if(this.g){var mr,Zr=this.g;if((mr=Zr.g?Zr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(mr)){var kr=mr;break t}}kr=null}if(se=kr)fe(this.i,this.l,se,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ra(this,se);else{this.o=!1,this.s=3,Gt(12),Gr(this),Or(this);break e}}if(this.P){se=!0;let _a;for(;!this.J&&this.C<_t.length;)if(_a=Bt(this,_t),_a==Je){Ln==4&&(this.s=4,Gt(14),se=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(_a==We){this.s=4,Gt(15),fe(this.i,this.l,_t,"[Invalid Chunk]"),se=!1;break}else fe(this.i,this.l,_a,null),Ra(this,_a);if(Ot(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ln!=4||_t.length!=0||this.h.h||(this.s=1,Gt(16),se=!1),this.o=this.o&&se,!se)fe(this.i,this.l,_t,"[Invalid Chunked Response]"),Gr(this),Or(this);else if(0<_t.length&&!this.W){this.W=!0;var Sn=this.j;Sn.g==this&&Sn.ba&&!Sn.M&&(Sn.j.info("Great, no buffering proxy detected. Bytes received: "+_t.length),gl(Sn),Sn.M=!0,Gt(11))}}else fe(this.i,this.l,_t,null),Ra(this,_t);Ln==4&&Gr(this),this.o&&!this.J&&(Ln==4?xl(this.j,this):(this.o=!1,Ut(this)))}else hl(this.g),se==400&&0<_t.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),Gr(this),Or(this)}}}catch{}finally{}};function Ot(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function Bt(T,J){var se=T.C,ye=J.indexOf(`
`,se);return ye==-1?Je:(se=Number(J.substring(se,ye)),isNaN(se)?We:(ye+=1,ye+se>J.length?Je:(J=J.slice(ye,ye+se),T.C=ye+se,J)))}tt.prototype.cancel=function(){this.J=!0,Gr(this)};function Ut(T){T.S=Date.now()+T.I,dr(T,T.I)}function dr(T,J){if(T.B!=null)throw Error("WatchDog timer not null");T.B=an(m(T.ba,T),J)}function jr(T){T.B&&(o.clearTimeout(T.B),T.B=null)}tt.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(ke(this.i,this.A),this.L!=2&&(Ea(),Gt(17)),Gr(this),this.s=2,Or(this)):dr(this,this.S-T)};function Or(T){T.j.G==0||T.J||xl(T.j,T)}function Gr(T){jr(T);var J=T.M;J&&typeof J.ma=="function"&&J.ma(),T.M=null,dn(T.U),T.g&&(J=T.g,T.g=null,J.abort(),J.ma())}function Ra(T,J){try{var se=T.j;if(se.G!=0&&(se.g==T||Ns(se.h,T))){if(!T.K&&Ns(se.h,T)&&se.G==3){try{var ye=se.Da.g.parse(J)}catch{ye=null}if(Array.isArray(ye)&&ye.length==3){var Qe=ye;if(Qe[0]==0){e:if(!se.u){if(se.g)if(se.g.F+3e3<T.F)jo(se),Qc(se);else break e;tc(se),Gt(18)}}else se.za=Qe[1],0<se.za-se.T&&37500>Qe[2]&&se.F&&se.v==0&&!se.C&&(se.C=an(m(se.Za,se),6e3));if(1>=$a(se.h)&&se.ca){try{se.ca()}catch{}se.ca=void 0}}else Hs(se,11)}else if((T.K||se.g==T)&&jo(se),!k(J))for(Qe=se.Da.g.parse(J),J=0;J<Qe.length;J++){let kr=Qe[J];if(se.T=kr[0],kr=kr[1],se.G==2)if(kr[0]=="c"){se.K=kr[1],se.ia=kr[2];const Sn=kr[3];Sn!=null&&(se.la=Sn,se.j.info("VER="+se.la));const Ln=kr[4];Ln!=null&&(se.Aa=Ln,se.j.info("SVER="+se.Aa));const mo=kr[5];mo!=null&&typeof mo=="number"&&0<mo&&(ye=1.5*mo,se.L=ye,se.j.info("backChannelRequestTimeoutMs_="+ye)),ye=se;const _a=T.g;if(_a){const wi=_a.g?_a.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var Ze=ye.h;Ze.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(Ze.j=Ze.l,Ze.g=new Set,Ze.h&&(Yn(Ze,Ze.h),Ze.h=null))}if(ye.D){const vl=_a.g?_a.g.getResponseHeader("X-HTTP-Session-Id"):null;vl&&(ye.ya=vl,_n(ye.I,ye.D,vl))}}se.G=3,se.l&&se.l.ua(),se.ba&&(se.R=Date.now()-T.F,se.j.info("Handshake RTT: "+se.R+"ms")),ye=se;var _t=T;if(ye.qa=V(ye,ye.J?ye.ia:null,ye.W),_t.K){ms(ye.h,_t);var mr=_t,Zr=ye.L;Zr&&(mr.I=Zr),mr.B&&(jr(mr),Ut(mr)),ye.g=_t}else Vc(ye);0<se.i.length&&Hc(se)}else kr[0]!="stop"&&kr[0]!="close"||Hs(se,7);else se.G==3&&(kr[0]=="stop"||kr[0]=="close"?kr[0]=="stop"?Hs(se,7):Po(se):kr[0]!="noop"&&se.l&&se.l.ta(kr),se.v=0)}}Ea(4)}catch{}}var pi=class{constructor(T,J){this.g=T,this.map=J}};function La(T){this.l=T||10,o.PerformanceNavigationTiming?(T=o.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hs(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function $a(T){return T.h?1:T.g?T.g.size:0}function Ns(T,J){return T.h?T.h==J:T.g?T.g.has(J):!1}function Yn(T,J){T.g?T.g.add(J):T.h=J}function ms(T,J){T.h&&T.h==J?T.h=null:T.g&&T.g.has(J)&&T.g.delete(J)}La.prototype.cancel=function(){if(this.i=Pc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function Pc(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let J=T.i;for(const se of T.g.values())J=J.concat(se.D);return J}return y(T.i)}function KA(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(l(T)){for(var J=[],se=T.length,ye=0;ye<se;ye++)J.push(T[ye]);return J}J=[],se=0;for(ye in T)J[se++]=T[ye];return J}function ll(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(l(T)||typeof T=="string"){var J=[];T=T.length;for(var se=0;se<T;se++)J.push(se);return J}J=[],se=0;for(const ye in T)J[se++]=ye;return J}}}function Hu(T,J){if(T.forEach&&typeof T.forEach=="function")T.forEach(J,void 0);else if(l(T)||typeof T=="string")Array.prototype.forEach.call(T,J,void 0);else for(var se=ll(T),ye=KA(T),Qe=ye.length,Ze=0;Ze<Qe;Ze++)J.call(void 0,ye[Ze],se&&se[Ze],T)}var ks=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jc(T,J){if(T){T=T.split("&");for(var se=0;se<T.length;se++){var ye=T[se].indexOf("="),Qe=null;if(0<=ye){var Ze=T[se].substring(0,ye);Qe=T[se].substring(ye+1)}else Ze=T[se];J(Ze,Qe?decodeURIComponent(Qe.replace(/\+/g," ")):"")}}}function hn(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof hn){this.h=T.h,cl(this,T.j),this.o=T.o,this.g=T.g,ul(this,T.s),this.l=T.l;var J=T.i,se=new lo;se.i=J.i,J.g&&(se.g=new Map(J.g),se.h=J.h),oo(this,se),this.m=T.m}else T&&(J=String(T).match(ks))?(this.h=!1,cl(this,J[1]||"",!0),this.o=gi(J[2]||""),this.g=gi(J[3]||"",!0),ul(this,J[4]),this.l=gi(J[5]||"",!0),oo(this,J[6]||"",!0),this.m=gi(J[7]||"")):(this.h=!1,this.i=new lo(null,this.h))}hn.prototype.toString=function(){var T=[],J=this.j;J&&T.push(Do(J,Vu,!0),":");var se=this.g;return(se||J=="file")&&(T.push("//"),(J=this.o)&&T.push(Do(J,Vu,!0),"@"),T.push(encodeURIComponent(String(se)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.s,se!=null&&T.push(":",String(se))),(se=this.l)&&(this.g&&se.charAt(0)!="/"&&T.push("/"),T.push(Do(se,se.charAt(0)=="/"?Ro:zu,!0))),(se=this.i.toString())&&T.push("?",se),(se=this.m)&&T.push("#",Do(se,Lo)),T.join("")};function Is(T){return new hn(T)}function cl(T,J,se){T.j=se?gi(J,!0):J,T.j&&(T.j=T.j.replace(/:$/,""))}function ul(T,J){if(J){if(J=Number(J),isNaN(J)||0>J)throw Error("Bad port number "+J);T.s=J}else T.s=null}function oo(T,J,se){J instanceof lo?(T.i=J,WA(T.i,T.h)):(se||(J=Do(J,Oc)),T.i=new lo(J,T.h))}function _n(T,J,se){T.i.set(J,se)}function Al(T){return _n(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function gi(T,J){return T?J?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Do(T,J,se){return typeof T=="string"?(T=encodeURI(T).replace(J,$A),se&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function $A(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Vu=/[#\/\?@]/g,zu=/[#\?:]/g,Ro=/[#\?]/g,Oc=/[#\?@]/g,Lo=/#/g;function lo(T,J){this.h=this.g=null,this.i=T||null,this.j=!!J}function On(T){T.g||(T.g=new Map,T.h=0,T.i&&jc(T.i,function(J,se){T.add(decodeURIComponent(J.replace(/\+/g," ")),se)}))}t=lo.prototype,t.add=function(T,J){On(this),this.i=null,T=uo(this,T);var se=this.g.get(T);return se||this.g.set(T,se=[]),se.push(J),this.h+=1,this};function Uo(T,J){On(T),J=uo(T,J),T.g.has(J)&&(T.i=null,T.h-=T.g.get(J).length,T.g.delete(J))}function co(T,J){return On(T),J=uo(T,J),T.g.has(J)}t.forEach=function(T,J){On(this),this.g.forEach(function(se,ye){se.forEach(function(Qe){T.call(J,Qe,ye,this)},this)},this)},t.na=function(){On(this);const T=Array.from(this.g.values()),J=Array.from(this.g.keys()),se=[];for(let ye=0;ye<J.length;ye++){const Qe=T[ye];for(let Ze=0;Ze<Qe.length;Ze++)se.push(J[ye])}return se},t.V=function(T){On(this);let J=[];if(typeof T=="string")co(this,T)&&(J=J.concat(this.g.get(uo(this,T))));else{T=Array.from(this.g.values());for(let se=0;se<T.length;se++)J=J.concat(T[se])}return J},t.set=function(T,J){return On(this),this.i=null,T=uo(this,T),co(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[J]),this.h+=1,this},t.get=function(T,J){return T?(T=this.V(T),0<T.length?String(T[0]):J):J};function hr(T,J,se){Uo(T,J),0<se.length&&(T.i=null,T.g.set(uo(T,J),y(se)),T.h+=se.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],J=Array.from(this.g.keys());for(var se=0;se<J.length;se++){var ye=J[se];const Ze=encodeURIComponent(String(ye)),_t=this.V(ye);for(ye=0;ye<_t.length;ye++){var Qe=Ze;_t[ye]!==""&&(Qe+="="+encodeURIComponent(String(_t[ye]))),T.push(Qe)}}return this.i=T.join("&")};function uo(T,J){return J=String(J),T.j&&(J=J.toLowerCase()),J}function WA(T,J){J&&!T.j&&(On(T),T.i=null,T.g.forEach(function(se,ye){var Qe=ye.toLowerCase();ye!=Qe&&(Uo(this,ye),hr(this,Qe,se))},T)),T.j=J}function js(T,J){const se=new Rn;if(o.Image){const ye=new Image;ye.onload=g(ei,se,"TestLoadImage: loaded",!0,J,ye),ye.onerror=g(ei,se,"TestLoadImage: error",!1,J,ye),ye.onabort=g(ei,se,"TestLoadImage: abort",!1,J,ye),ye.ontimeout=g(ei,se,"TestLoadImage: timeout",!1,J,ye),o.setTimeout(function(){ye.ontimeout&&ye.ontimeout()},1e4),ye.src=T}else J(!1)}function xi(T,J){const se=new Rn,ye=new AbortController,Qe=setTimeout(()=>{ye.abort(),ei(se,"TestPingServer: timeout",!1,J)},1e4);fetch(T,{signal:ye.signal}).then(Ze=>{clearTimeout(Qe),Ze.ok?ei(se,"TestPingServer: ok",!0,J):ei(se,"TestPingServer: server error",!1,J)}).catch(()=>{clearTimeout(Qe),ei(se,"TestPingServer: error",!1,J)})}function ei(T,J,se,ye,Qe){try{Qe&&(Qe.onload=null,Qe.onerror=null,Qe.onabort=null,Qe.ontimeout=null),ye(se)}catch{}}function Ao(){this.g=new Dn}function vi(T,J,se){const ye=se||"";try{Hu(T,function(Qe,Ze){let _t=Qe;u(Qe)&&(_t=gr(Qe)),J.push(ye+Ze+"="+encodeURIComponent(_t))})}catch(Qe){throw J.push(ye+"type="+encodeURIComponent("_badmap")),Qe}}function dl(T){this.l=T.Ub||null,this.j=T.eb||!1}b(dl,Fr),dl.prototype.g=function(){return new Mo(this.l,this.j)},dl.prototype.i=function(T){return function(){return T}}({});function Mo(T,J){It.call(this),this.D=T,this.o=J,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Mo,It),t=Mo.prototype,t.open=function(T,J){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=J,this.readyState=1,Os(this)},t.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const J={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(J.body=T),(this.D||o).fetch(new Request(this.A,J)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yi(this)),this.readyState=0},t.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gu(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gu(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}t.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var J=T.value?T.value:new Uint8Array(0);(J=this.v.decode(J,{stream:!T.done}))&&(this.response=this.responseText+=J)}T.done?yi(this):Os(this),this.readyState==3&&Gu(this)}},t.Ra=function(T){this.g&&(this.response=this.responseText=T,yi(this))},t.Qa=function(T){this.g&&(this.response=T,yi(this))},t.ga=function(){this.g&&yi(this)};function yi(T){T.readyState=4,T.l=null,T.j=null,T.v=null,Os(T)}t.setRequestHeader=function(T,J){this.u.append(T,J)},t.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],J=this.h.entries();for(var se=J.next();!se.done;)se=se.value,T.push(se[0]+": "+se[1]),se=J.next();return T.join(`\r
`)};function Os(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(Mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function fo(T){let J="";return R(T,function(se,ye){J+=ye,J+=":",J+=se,J+=`\r
`}),J}function Ua(T,J,se){e:{for(ye in se){var ye=!1;break e}ye=!0}ye||(se=fo(se),typeof T=="string"?se!=null&&encodeURIComponent(String(se)):_n(T,J,se))}function Jr(T){It.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Jr,It);var fl=/^https?$/i,ho=["POST","PUT"];t=Jr.prototype,t.Ha=function(T){this.J=T},t.ea=function(T,J,se,ye){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);J=J?J.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?ds(this.o):ds(Ie),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(J,String(T),!0),this.B=!1}catch(Ze){qu(this,Ze);return}if(T=se||"",se=new Map(this.headers),ye)if(Object.getPrototypeOf(ye)===Object.prototype)for(var Qe in ye)se.set(Qe,ye[Qe]);else if(typeof ye.keys=="function"&&typeof ye.get=="function")for(const Ze of ye.keys())se.set(Ze,ye.get(Ze));else throw Error("Unknown input type for opt_headers: "+String(ye));ye=Array.from(se.keys()).find(Ze=>Ze.toLowerCase()=="content-type"),Qe=o.FormData&&T instanceof o.FormData,!(0<=Array.prototype.indexOf.call(ho,J,void 0))||ye||Qe||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ze,_t]of se)this.g.setRequestHeader(Ze,_t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qs(this),this.u=!0,this.g.send(T),this.u=!1}catch(Ze){qu(this,Ze)}};function qu(T,J){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=J,T.m=5,Xl(T),Xi(T)}function Xl(T){T.A||(T.A=!0,Dt(T,"complete"),Dt(T,"error"))}t.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,Dt(this,"complete"),Dt(this,"abort"),Xi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),Jr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yl(this):this.bb())},t.bb=function(){Yl(this)};function Yl(T){if(T.h&&typeof i<"u"&&(!T.v[1]||Ma(T)!=4||T.Z()!=2)){if(T.u&&Ma(T)==4)Lt(T.Ea,0,T);else if(Dt(T,"readystatechange"),Ma(T)==4){T.h=!1;try{const _t=T.Z();e:switch(_t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var J=!0;break e;default:J=!1}var se;if(!(se=J)){var ye;if(ye=_t===0){var Qe=String(T.D).match(ks)[1]||null;!Qe&&o.self&&o.self.location&&(Qe=o.self.location.protocol.slice(0,-1)),ye=!fl.test(Qe?Qe.toLowerCase():"")}se=ye}if(se)Dt(T,"complete"),Dt(T,"success");else{T.m=6;try{var Ze=2<Ma(T)?T.g.statusText:""}catch{Ze=""}T.l=Ze+" ["+T.Z()+"]",Xl(T)}}finally{Xi(T)}}}}function Xi(T,J){if(T.g){Qs(T);const se=T.g,ye=T.v[0]?()=>{}:null;T.g=null,T.v=null,J||Dt(T,"ready");try{se.onreadystatechange=ye}catch{}}}function Qs(T){T.I&&(o.clearTimeout(T.I),T.I=null)}t.isActive=function(){return!!this.g};function Ma(T){return T.g?T.g.readyState:0}t.Z=function(){try{return 2<Ma(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(T){if(this.g){var J=this.g.responseText;return T&&J.indexOf(T)==0&&(J=J.substring(T.length)),Ur(J)}};function XA(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function hl(T){const J={};T=(T.g&&2<=Ma(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let ye=0;ye<T.length;ye++){if(k(T[ye]))continue;var se=D(T[ye]);const Qe=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const Ze=J[Qe]||[];J[Qe]=Ze,Ze.push(se)}C(J,function(ye){return ye.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(T,J,se){return se&&se.internalChannelParams&&se.internalChannelParams[T]||J}function ml(T){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fs("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fs("baseRetryDelayMs",5e3,T),this.cb=Fs("retryDelaySeedMs",1e4,T),this.Wa=Fs("forwardChannelMaxRetries",2,T),this.wa=Fs("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new La(T&&T.concurrentRequestLimit),this.Da=new Ao,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ml.prototype,t.la=8,t.G=1,t.connect=function(T,J,se,ye){Gt(0),this.W=T,this.H=J||{},se&&ye!==void 0&&(this.H.OSID=se,this.H.OAID=ye),this.F=this.X,this.I=V(this,null,this.W),Hc(this)};function Po(T){if(Jl(T),T.G==3){var J=T.U++,se=Is(T.I);if(_n(se,"SID",T.K),_n(se,"RID",J),_n(se,"TYPE","terminate"),pl(T,se),J=new tt(T,T.j,J),J.L=2,J.v=Al(Is(se)),se=!1,o.navigator&&o.navigator.sendBeacon)try{se=o.navigator.sendBeacon(J.v.toString(),"")}catch{}!se&&o.Image&&(new Image().src=J.v,se=!0),se||(J.g=Ae(J.j,null),J.g.ea(J.v)),J.F=Date.now(),Ut(J)}zc(T)}function Qc(T){T.g&&(gl(T),T.g.cancel(),T.g=null)}function Jl(T){Qc(T),T.u&&(o.clearTimeout(T.u),T.u=null),jo(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&o.clearTimeout(T.s),T.s=null)}function Hc(T){if(!hs(T.h)&&!T.s){T.s=!0;var J=T.Ga;ae||W(),K||(ae(),K=!0),G.add(J,T),T.B=0}}function Ku(T,J){return $a(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=J.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=an(m(T.Ga,T,J),rc(T,T.B)),T.B++,!0)}t.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const Qe=new tt(this,this.j,T);let Ze=this.o;if(this.S&&(Ze?(Ze=S(Ze),Q(Ze,this.S)):Ze=this.S),this.m!==null||this.O||(Qe.H=Ze,Ze=null),this.P)e:{for(var J=0,se=0;se<this.i.length;se++){t:{var ye=this.i[se];if("__data__"in ye.map&&(ye=ye.map.__data__,typeof ye=="string")){ye=ye.length;break t}ye=void 0}if(ye===void 0)break;if(J+=ye,4096<J){J=se;break e}if(J===4096||se===this.i.length-1){J=se+1;break e}}J=1e3}else J=1e3;J=ec(this,Qe,J),se=Is(this.I),_n(se,"RID",T),_n(se,"CVER",22),this.D&&_n(se,"X-HTTP-Session-Id",this.D),pl(this,se),Ze&&(this.O?J="headers="+encodeURIComponent(String(fo(Ze)))+"&"+J:this.m&&Ua(se,this.m,Ze)),Yn(this.h,Qe),this.Ua&&_n(se,"TYPE","init"),this.P?(_n(se,"$req",J),_n(se,"SID","null"),Qe.T=!0,yt(Qe,se,null)):yt(Qe,se,J),this.G=2}}else this.G==3&&(T?Zl(this,T):this.i.length==0||hs(this.h)||Zl(this))};function Zl(T,J){var se;J?se=J.l:se=T.U++;const ye=Is(T.I);_n(ye,"SID",T.K),_n(ye,"RID",se),_n(ye,"AID",T.T),pl(T,ye),T.m&&T.o&&Ua(ye,T.m,T.o),se=new tt(T,T.j,se,T.B+1),T.m===null&&(se.H=T.o),J&&(T.i=J.D.concat(T.i)),J=ec(T,se,1e3),se.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),Yn(T.h,se),yt(se,ye,J)}function pl(T,J){T.H&&R(T.H,function(se,ye){_n(J,ye,se)}),T.l&&Hu({},function(se,ye){_n(J,ye,se)})}function ec(T,J,se){se=Math.min(T.i.length,se);var ye=T.l?m(T.l.Na,T.l,T):null;e:{var Qe=T.i;let Ze=-1;for(;;){const _t=["count="+se];Ze==-1?0<se?(Ze=Qe[0].g,_t.push("ofs="+Ze)):Ze=0:_t.push("ofs="+Ze);let mr=!0;for(let Zr=0;Zr<se;Zr++){let kr=Qe[Zr].g;const Sn=Qe[Zr].map;if(kr-=Ze,0>kr)Ze=Math.max(0,Qe[Zr].g-100),mr=!1;else try{vi(Sn,_t,"req"+kr+"_")}catch{ye&&ye(Sn)}}if(mr){ye=_t.join("&");break e}}}return T=T.i.splice(0,se),J.D=T,ye}function Vc(T){if(!T.g&&!T.u){T.Y=1;var J=T.Fa;ae||W(),K||(ae(),K=!0),G.add(J,T),T.v=0}}function tc(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=an(m(T.Fa,T),rc(T,T.v)),T.v++,!0)}t.Fa=function(){if(this.u=null,YA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=an(m(this.ab,this),T)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Qc(this),YA(this))};function gl(T){T.A!=null&&(o.clearTimeout(T.A),T.A=null)}function YA(T){T.g=new tt(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var J=Is(T.qa);_n(J,"RID","rpc"),_n(J,"SID",T.K),_n(J,"AID",T.T),_n(J,"CI",T.F?"0":"1"),!T.F&&T.ja&&_n(J,"TO",T.ja),_n(J,"TYPE","xmlhttp"),pl(T,J),T.m&&T.o&&Ua(J,T.m,T.o),T.L&&(T.g.I=T.L);var se=T.g;T=T.ia,se.L=1,se.v=Al(Is(J)),se.m=null,se.P=!0,Nt(se,T)}t.Za=function(){this.C!=null&&(this.C=null,Qc(this),tc(this),Gt(19))};function jo(T){T.C!=null&&(o.clearTimeout(T.C),T.C=null)}function xl(T,J){var se=null;if(T.g==J){jo(T),gl(T),T.g=null;var ye=2}else if(Ns(T.h,J))se=J.D,ms(T.h,J),ye=1;else return;if(T.G!=0){if(J.o)if(ye==1){se=J.m?J.m.length:0,J=Date.now()-J.F;var Qe=T.B;ye=fs(),Dt(ye,new fn(ye,se)),Hc(T)}else Vc(T);else if(Qe=J.s,Qe==3||Qe==0&&0<J.X||!(ye==1&&Ku(T,J)||ye==2&&tc(T)))switch(se&&0<se.length&&(J=T.h,J.i=J.i.concat(se)),Qe){case 1:Hs(T,5);break;case 4:Hs(T,10);break;case 3:Hs(T,6);break;default:Hs(T,2)}}}function rc(T,J){let se=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(se*=2),se*J}function Hs(T,J){if(T.j.info("Error code "+J),J==2){var se=m(T.fb,T),ye=T.Xa;const Qe=!ye;ye=new hn(ye||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||cl(ye,"https"),Al(ye),Qe?js(ye.toString(),se):xi(ye.toString(),se)}else Gt(2);T.G=0,T.l&&T.l.sa(J),zc(T),Jl(T)}t.fb=function(T){T?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function zc(T){if(T.G=0,T.ka=[],T.l){const J=Pc(T.h);(J.length!=0||T.i.length!=0)&&(E(T.ka,J),E(T.ka,T.i),T.h.i.length=0,y(T.i),T.i.length=0),T.l.ra()}}function V(T,J,se){var ye=se instanceof hn?Is(se):new hn(se);if(ye.g!="")J&&(ye.g=J+"."+ye.g),ul(ye,ye.s);else{var Qe=o.location;ye=Qe.protocol,J=J?J+"."+Qe.hostname:Qe.hostname,Qe=+Qe.port;var Ze=new hn(null);ye&&cl(Ze,ye),J&&(Ze.g=J),Qe&&ul(Ze,Qe),se&&(Ze.l=se),ye=Ze}return se=T.D,J=T.ya,se&&J&&_n(ye,se,J),_n(ye,"VER",T.la),pl(T,ye),ye}function Ae(T,J,se){if(J&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return J=T.Ca&&!T.pa?new Jr(new dl({eb:se})):new Jr(T.pa),J.Ha(T.J),J}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fe(){}t=Fe.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Re(){}Re.prototype.g=function(T,J){return new Ve(T,J)};function Ve(T,J){It.call(this),this.g=new ml(J),this.l=T,this.h=J&&J.messageUrlParams||null,T=J&&J.messageHeaders||null,J&&J.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=J&&J.initMessageHeaders||null,J&&J.messageContentType&&(T?T["X-WebChannel-Content-Type"]=J.messageContentType:T={"X-WebChannel-Content-Type":J.messageContentType}),J&&J.va&&(T?T["X-WebChannel-Client-Profile"]=J.va:T={"X-WebChannel-Client-Profile":J.va}),this.g.S=T,(T=J&&J.Sb)&&!k(T)&&(this.g.m=T),this.v=J&&J.supportsCrossDomainXhr||!1,this.u=J&&J.sendRawJson||!1,(J=J&&J.httpSessionIdParam)&&!k(J)&&(this.g.D=J,T=this.h,T!==null&&J in T&&(T=this.h,J in T&&delete T[J])),this.j=new Qt(this)}b(Ve,It),Ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ve.prototype.close=function(){Po(this.g)},Ve.prototype.o=function(T){var J=this.g;if(typeof T=="string"){var se={};se.__data__=T,T=se}else this.u&&(se={},se.__data__=gr(T),T=se);J.i.push(new pi(J.Ya++,T)),J.G==3&&Hc(J)},Ve.prototype.N=function(){this.g.l=null,delete this.j,Po(this.g),delete this.g,Ve.aa.N.call(this)};function ot(T){pa.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var J=T.__sm__;if(J){e:{for(const se in J){T=se;break e}T=void 0}(this.i=T)&&(T=this.i,J=J!==null&&T in J?J[T]:void 0),this.data=J}else this.data=T}b(ot,pa);function Et(){Pr.call(this),this.status=1}b(Et,Pr);function Qt(T){this.g=T}b(Qt,Fe),Qt.prototype.ua=function(){Dt(this.g,"a")},Qt.prototype.ta=function(T){Dt(this.g,new ot(T))},Qt.prototype.sa=function(T){Dt(this.g,new Et)},Qt.prototype.ra=function(){Dt(this.g,"b")},Re.prototype.createWebChannel=Re.prototype.g,Ve.prototype.send=Ve.prototype.o,Ve.prototype.open=Ve.prototype.m,Ve.prototype.close=Ve.prototype.close,lU=function(){return new Re},oU=function(){return fs()},iU=nr,w_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,v2=_e,Be.COMPLETE="complete",sU=Be,nn.EventType=na,na.OPEN="a",na.CLOSE="b",na.ERROR="c",na.MESSAGE="d",It.prototype.listen=It.prototype.K,lg=nn,Jr.prototype.listenOnce=Jr.prototype.L,Jr.prototype.getLastError=Jr.prototype.Ka,Jr.prototype.getLastErrorCode=Jr.prototype.Ba,Jr.prototype.getStatus=Jr.prototype.Z,Jr.prototype.getResponseJson=Jr.prototype.Oa,Jr.prototype.getResponseText=Jr.prototype.oa,Jr.prototype.send=Jr.prototype.ea,Jr.prototype.setWithCredentials=Jr.prototype.Ha,aU=Jr}).apply(typeof Av<"u"?Av:typeof self<"u"?self:typeof window<"u"?window:{});const Rk="@firebase/firestore",Lk="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Li.UNAUTHENTICATED=new Li(null),Li.GOOGLE_CREDENTIALS=new Li("google-credentials-uid"),Li.FIRST_PARTY=new Li("first-party-uid"),Li.MOCK_USER=new Li("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zm="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new mS("@firebase/firestore");function V0(){return _h.logLevel}function Zt(t,...e){if(_h.logLevel<=cn.DEBUG){const r=e.map(TS);_h.debug(`Firestore (${zm}): ${t}`,...r)}}function RA(t,...e){if(_h.logLevel<=cn.ERROR){const r=e.map(TS);_h.error(`Firestore (${zm}): ${t}`,...r)}}function Sm(t,...e){if(_h.logLevel<=cn.WARN){const r=e.map(TS);_h.warn(`Firestore (${zm}): ${t}`,...r)}}function TS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,cU(t,n,r)}function cU(t,e,r){let n=`FIRESTORE (${zm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw RA(n),new Error(n)}function Pn(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||cU(e,a,n)}function Lr(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qt extends Lu{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Cq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Li.UNAUTHENTICATED))}shutdown(){}}class Eq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class _q{constructor(e){this.t=e,this.currentUser=Li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Pn(this.o===void 0,42304);let n=this.i;const a=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new SA;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new SA,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},o=l=>{Zt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Zt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new SA)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Zt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Pn(typeof n.accessToken=="string",31837,{l:n}),new uU(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pn(e===null||typeof e=="string",2055,{h:e}),new Li(e)}}class Sq{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Li.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Tq{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new Sq(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bq{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jl(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Pn(this.o===void 0,3512);const n=s=>{s.error!=null&&Zt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,Zt("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{Zt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):Zt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Uk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Pn(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Uk(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=Nq(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%62))}return n}}function un(t,e){return t<e?-1:t>e?1:0}function b_(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),s=e.charAt(n);if(a!==s)return OC(a)===OC(s)?un(a,s):OC(a)?1:-1}return un(t.length,e.length)}const kq=55296,Iq=57343;function OC(t){const e=t.charCodeAt(0);return e>=kq&&e<=Iq}function Tm(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="__name__";class yu{constructor(e,r,n){r===void 0?r=0:r>e.length&&Sr(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Sr(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return yu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof yu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=yu.compareSegments(e.get(a),r.get(a));if(s!==0)return s}return un(e.length,r.length)}static compareSegments(e,r){const n=yu.isNumericId(e),a=yu.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?yu.extractNumericId(e).compare(yu.extractNumericId(r)):b_(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ef.fromString(e.substring(4,e.length-2))}}class la extends yu{construct(e,r,n){return new la(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new qt(ht.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new la(r)}static emptyPath(){return new la([])}}const Fq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ai extends yu{construct(e,r,n){return new Ai(e,r,n)}static isValidIdentifier(e){return Fq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mk}static keyField(){return new Ai([Mk])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new qt(ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<e.length;){const o=e[a];if(o==="\\"){if(a+1===e.length)throw new qt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new qt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new qt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ai(r)}static emptyPath(){return new Ai([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.path=e}static fromPath(e){return new Ar(la.fromString(e))}static fromName(e){return new Ar(la.fromString(e).popFirst(5))}static empty(){return new Ar(la.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&la.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return la.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ar(new la(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t,e,r){if(!r)throw new qt(ht.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Dq(t,e,r,n){if(e===!0&&n===!0)throw new qt(ht.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Pk(t){if(!Ar.isDocumentKey(t))throw new qt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jk(t){if(Ar.isDocumentKey(t))throw new qt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dU(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function lw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Sr(12329,{type:typeof t})}function no(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=lw(t);throw new qt(ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function Rq(t,e){if(e<=0)throw new qt(ht.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t,e){const r={typeString:t};return e&&(r.value=e),r}function jx(t,e){if(!dU(t))throw new qt(ht.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const i=t[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new qt(ht.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=-62135596800,Qk=1e6;class cr{static now(){return cr.fromMillis(Date.now())}static fromDate(e){return cr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*Qk);return new cr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new qt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new qt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Ok)throw new qt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qk}_compareTo(e){return this.seconds===e.seconds?un(this.nanoseconds,e.nanoseconds):un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:cr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jx(e,cr._jsonSchema))return new cr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ok;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}cr._jsonSchemaVersion="firestore/timestamp/1.0",cr._jsonSchema={type:Ss("string",cr._jsonSchemaVersion),seconds:Ss("number"),nanoseconds:Ss("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{static fromTimestamp(e){return new Dr(e)}static min(){return new Dr(new cr(0,0))}static max(){return new Dr(new cr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=-1;function Lq(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Dr.fromTimestamp(n===1e9?new cr(r+1,0):new cr(r,n));return new uf(a,Ar.empty(),e)}function Uq(t){return new uf(t.readTime,t.key,ex)}class uf{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new uf(Dr.min(),Ar.empty(),ex)}static max(){return new uf(Dr.max(),Ar.empty(),ex)}}function Mq(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ar.comparator(t.documentKey,e.documentKey),r!==0?r:un(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gm(t){if(t.code!==ht.FAILED_PRECONDITION||t.message!==Pq)throw t;Zt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Sr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new bt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof bt?r:bt.resolve(r)}catch(r){return bt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):bt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):bt.reject(r)}static resolve(e){return new bt((r,n)=>{r(e)})}static reject(e){return new bt((r,n)=>{n(e)})}static waitFor(e){return new bt((r,n)=>{let a=0,s=0,i=!1;e.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},l=>n(l))}),i=!0,s===a&&r()})}static or(e){let r=bt.resolve(!1);for(const n of e)r=r.next(a=>a?bt.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new bt((n,a)=>{const s=e.length,i=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;r(e[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(e,r){return new bt((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}function Oq(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function qm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cw.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=-1;function uw(t){return t==null}function $2(t){return t===0&&1/t==-1/0}function Qq(t){return typeof t=="number"&&Number.isInteger(t)&&!$2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU="";function Hq(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Hk(e)),e=Vq(t.get(r),e);return Hk(e)}function Vq(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case fU:r+="";break;default:r+=s}}return r}function Hk(t){return t+fU+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ef(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function hU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,r){this.comparator=e,this.root=r||ci.EMPTY}insert(e,r){return new Fa(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new Fa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dv(this.root,e,this.comparator,!1)}getReverseIterator(){return new dv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dv(this.root,e,this.comparator,!0)}}class dv{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??ci.RED,this.left=a??ci.EMPTY,this.right=s??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new ci(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return ci.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Sr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Sr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Sr(27949);return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1;ci.EMPTY=new class{constructor(){this.size=0}get key(){throw Sr(57766)}get value(){throw Sr(16141)}get color(){throw Sr(16727)}get left(){throw Sr(29726)}get right(){throw Sr(36894)}copy(e,r,n,a,s){return this}insert(e,r,n){return new ci(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.comparator=e,this.data=new Fa(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new zk(this.data.getIterator())}getIteratorFrom(e){return new zk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ms)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ms(this.comparator);return r.data=e,r}}class zk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.fields=e,e.sort(Ai.comparator)}static empty(){return new rl([])}unionWith(e){let r=new Ms(Ai.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new rl(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Tm(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mU("Invalid base64 string: "+s):s}}(e);return new hi(r)}static fromUint8Array(e){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(e);return new hi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const zq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Af(t){if(Pn(!!t,39018),typeof t=="string"){let e=0;const r=zq.exec(t);if(Pn(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:as(t.seconds),nanos:as(t.nanos)}}function as(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function df(t){return typeof t=="string"?hi.fromBase64String(t):hi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU="server_timestamp",gU="__type__",xU="__previous_value__",vU="__local_write_time__";function kS(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[gU])==null?void 0:n.stringValue)===pU}function Aw(t){const e=t.mapValue.fields[xU];return kS(e)?Aw(e):e}function tx(t){const e=Af(t.mapValue.fields[vU].timestampValue);return new cr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e,r,n,a,s,i,o,l,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const W2="(default)";class rx{constructor(e,r){this.projectId=e,this.database=r||W2}static empty(){return new rx("","")}get isDefaultDatabase(){return this.database===W2}isEqual(e){return e instanceof rx&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU="__type__",qq="__max__",fv={mapValue:{}},wU="__vector__",X2="value";function ff(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kS(t)?4:$q(t)?9007199254740991:Kq(t)?10:11:Sr(28295,{value:t})}function Du(t,e){if(t===e)return!0;const r=ff(t);if(r!==ff(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tx(t).isEqual(tx(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=Af(a.timestampValue),o=Af(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return df(a.bytesValue).isEqual(df(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return as(a.geoPointValue.latitude)===as(s.geoPointValue.latitude)&&as(a.geoPointValue.longitude)===as(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return as(a.integerValue)===as(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=as(a.doubleValue),o=as(s.doubleValue);return i===o?$2(i)===$2(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Tm(t.arrayValue.values||[],e.arrayValue.values||[],Du);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(Vk(i)!==Vk(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Du(i[l],o[l])))return!1;return!0}(t,e);default:return Sr(52216,{left:t})}}function nx(t,e){return(t.values||[]).find(r=>Du(r,e))!==void 0}function Bm(t,e){if(t===e)return 0;const r=ff(t),n=ff(e);if(r!==n)return un(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return un(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=as(s.integerValue||s.doubleValue),l=as(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return Gk(t.timestampValue,e.timestampValue);case 4:return Gk(tx(t),tx(e));case 5:return b_(t.stringValue,e.stringValue);case 6:return function(s,i){const o=df(s),l=df(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=un(o[u],l[u]);if(d!==0)return d}return un(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=un(as(s.latitude),as(i.latitude));return o!==0?o:un(as(s.longitude),as(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qk(t.arrayValue,e.arrayValue);case 10:return function(s,i){var m,g,b,y;const o=s.fields||{},l=i.fields||{},u=(m=o[X2])==null?void 0:m.arrayValue,d=(g=l[X2])==null?void 0:g.arrayValue,h=un(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return h!==0?h:qk(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===fv.mapValue&&i===fv.mapValue)return 0;if(s===fv.mapValue)return 1;if(i===fv.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=b_(l[h],d[h]);if(m!==0)return m;const g=Bm(o[l[h]],u[d[h]]);if(g!==0)return g}return un(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Sr(23264,{he:r})}}function Gk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return un(t,e);const r=Af(t),n=Af(e),a=un(r.seconds,n.seconds);return a!==0?a:un(r.nanos,n.nanos)}function qk(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=Bm(r[a],n[a]);if(s)return s}return un(r.length,n.length)}function Nm(t){return C_(t)}function C_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Af(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return df(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ar.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=C_(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${C_(r.fields[i])}`;return a+"}"}(t.mapValue):Sr(61005,{value:t})}function y2(t){switch(ff(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Aw(t);return e?16+y2(e):16;case 5:return 2*t.stringValue.length;case 6:return df(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+y2(s),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return Ef(n.fields,(s,i)=>{a+=s.length+y2(i)}),a}(t.mapValue);default:throw Sr(13486,{value:t})}}function Kk(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function E_(t){return!!t&&"integerValue"in t}function IS(t){return!!t&&"arrayValue"in t}function $k(t){return!!t&&"nullValue"in t}function Wk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function w2(t){return!!t&&"mapValue"in t}function Kq(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[yU])==null?void 0:n.stringValue)===wU}function Ng(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ef(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Ng(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ng(t.arrayValue.values[r]);return e}return{...t}}function $q(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===qq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.value=e}static empty(){return new So({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!w2(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ng(r)}setAll(e){let r=Ai.emptyPath(),n={},a=[];e.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=Ng(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());w2(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Du(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];w2(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){Ef(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new So(Ng(this.value))}}function bU(t){const e=[];return Ef(t.fields,(r,n)=>{const a=new Ai([r]);if(w2(n)){const s=bU(n.mapValue).fields;if(s.length===0)e.push(a);else for(const i of s)e.push(a.child(i))}else e.push(a)}),new rl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,r,n,a,s,i,o){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new ji(e,0,Dr.min(),Dr.min(),Dr.min(),So.empty(),0)}static newFoundDocument(e,r,n,a){return new ji(e,1,r,Dr.min(),n,a,0)}static newNoDocument(e,r){return new ji(e,2,r,Dr.min(),Dr.min(),So.empty(),0)}static newUnknownDocument(e,r){return new ji(e,3,r,Dr.min(),Dr.min(),So.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Dr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=So.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=So.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,r){this.position=e,this.inclusive=r}}function Xk(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],i=t.position[a];if(s.field.isKeyField()?n=Ar.comparator(Ar.fromName(i.referenceValue),r.key):n=Bm(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Yk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Du(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,r="asc"){this.field=e,this.dir=r}}function Wq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{}class _s extends CU{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Yq(e,r,n):r==="array-contains"?new eK(e,n):r==="in"?new tK(e,n):r==="not-in"?new rK(e,n):r==="array-contains-any"?new nK(e,n):new _s(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Jq(e,n):new Zq(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Bm(r,this.value)):r!==null&&ff(this.value)===ff(r)&&this.matchesComparison(Bm(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Sr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dc extends CU{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Dc(e,r)}matches(e){return EU(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function EU(t){return t.op==="and"}function _U(t){return Xq(t)&&EU(t)}function Xq(t){for(const e of t.filters)if(e instanceof Dc)return!1;return!0}function __(t){if(t instanceof _s)return t.field.canonicalString()+t.op.toString()+Nm(t.value);if(_U(t))return t.filters.map(e=>__(e)).join(",");{const e=t.filters.map(r=>__(r)).join(",");return`${t.op}(${e})`}}function SU(t,e){return t instanceof _s?function(n,a){return a instanceof _s&&n.op===a.op&&n.field.isEqual(a.field)&&Du(n.value,a.value)}(t,e):t instanceof Dc?function(n,a){return a instanceof Dc&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&SU(i,a.filters[o]),!0):!1}(t,e):void Sr(19439)}function TU(t){return t instanceof _s?function(r){return`${r.field.canonicalString()} ${r.op} ${Nm(r.value)}`}(t):t instanceof Dc?function(r){return r.op.toString()+" {"+r.getFilters().map(TU).join(" ,")+"}"}(t):"Filter"}class Yq extends _s{constructor(e,r,n){super(e,r,n),this.key=Ar.fromName(n.referenceValue)}matches(e){const r=Ar.comparator(e.key,this.key);return this.matchesComparison(r)}}class Jq extends _s{constructor(e,r){super(e,"in",r),this.keys=BU("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Zq extends _s{constructor(e,r){super(e,"not-in",r),this.keys=BU("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function BU(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>Ar.fromName(n.referenceValue))}class eK extends _s{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return IS(r)&&nx(r.arrayValue,this.value)}}class tK extends _s{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&nx(this.value.arrayValue,r)}}class rK extends _s{constructor(e,r){super(e,"not-in",r)}matches(e){if(nx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!nx(this.value.arrayValue,r)}}class nK extends _s{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!IS(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>nx(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(e,r=null,n=[],a=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function Jk(t,e=null,r=[],n=[],a=null,s=null,i=null){return new aK(t,e,r,n,a,s,i)}function FS(t){const e=Lr(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>__(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),uw(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Nm(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Nm(n)).join(",")),e.Te=r}return e.Te}function DS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Wq(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!SU(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yk(t.startAt,e.startAt)&&Yk(t.endAt,e.endAt)}function S_(t){return Ar.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,r=null,n=[],a=[],s=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sK(t,e,r,n,a,s,i,o){return new Km(t,e,r,n,a,s,i,o)}function dw(t){return new Km(t)}function Zk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NU(t){return t.collectionGroup!==null}function kg(t){const e=Lr(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Ms(Ai.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ax(s,n))}),r.has(Ai.keyField().canonicalString())||e.Ie.push(new ax(Ai.keyField(),n))}return e.Ie}function Tu(t){const e=Lr(t);return e.Ee||(e.Ee=iK(e,kg(t))),e.Ee}function iK(t,e){if(t.limitType==="F")return Jk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new ax(a.field,s)});const r=t.endAt?new Y2(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Y2(t.startAt.position,t.startAt.inclusive):null;return Jk(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function T_(t,e){const r=t.filters.concat([e]);return new Km(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function J2(t,e,r){return new Km(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function fw(t,e){return DS(Tu(t),Tu(e))&&t.limitType===e.limitType}function kU(t){return`${FS(Tu(t))}|lt:${t.limitType}`}function z0(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>TU(a)).join(", ")}]`),uw(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Nm(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Nm(a)).join(",")),`Target(${n})`}(Tu(t))}; limitType=${t.limitType})`}function hw(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Ar.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of kg(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(i,o,l){const u=Xk(i,o,l);return i.inclusive?u<=0:u<0}(n.startAt,kg(n),a)||n.endAt&&!function(i,o,l){const u=Xk(i,o,l);return i.inclusive?u>=0:u>0}(n.endAt,kg(n),a))}(t,e)}function oK(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IU(t){return(e,r)=>{let n=!1;for(const a of kg(t)){const s=lK(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function lK(t,e,r){const n=t.field.isKeyField()?Ar.comparator(e.key,r.key):function(s,i,o){const l=i.data.field(s),u=o.data.field(s);return l!==null&&u!==null?Bm(l,u):Sr(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Sr(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ef(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return hU(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK=new Fa(Ar.comparator);function LA(){return cK}const FU=new Fa(Ar.comparator);function cg(...t){let e=FU;for(const r of t)e=e.insert(r.key,r);return e}function DU(t){let e=FU;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function oh(){return Ig()}function RU(){return Ig()}function Ig(){return new Ph(t=>t.toString(),(t,e)=>t.isEqual(e))}const uK=new Fa(Ar.comparator),AK=new Ms(Ar.comparator);function An(...t){let e=AK;for(const r of t)e=e.add(r);return e}const dK=new Ms(un);function fK(){return dK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$2(e)?"-0":e}}function LU(t){return{integerValue:""+t}}function hK(t,e){return Qq(e)?LU(e):RS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this._=void 0}}function mK(t,e,r){return t instanceof Z2?function(a,s){const i={fields:{[gU]:{stringValue:pU},[vU]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&kS(s)&&(s=Aw(s)),s&&(i.fields[xU]=s),{mapValue:i}}(r,e):t instanceof km?MU(t,e):t instanceof sx?PU(t,e):function(a,s){const i=UU(a,s),o=e3(i)+e3(a.Ae);return E_(i)&&E_(a.Ae)?LU(o):RS(a.serializer,o)}(t,e)}function pK(t,e,r){return t instanceof km?MU(t,e):t instanceof sx?PU(t,e):r}function UU(t,e){return t instanceof ey?function(n){return E_(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Z2 extends mw{}class km extends mw{constructor(e){super(),this.elements=e}}function MU(t,e){const r=jU(e);for(const n of t.elements)r.some(a=>Du(a,n))||r.push(n);return{arrayValue:{values:r}}}class sx extends mw{constructor(e){super(),this.elements=e}}function PU(t,e){let r=jU(e);for(const n of t.elements)r=r.filter(a=>!Du(a,n));return{arrayValue:{values:r}}}class ey extends mw{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function e3(t){return as(t.integerValue||t.doubleValue)}function jU(t){return IS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gK{constructor(e,r){this.field=e,this.transform=r}}function xK(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof km&&a instanceof km||n instanceof sx&&a instanceof sx?Tm(n.elements,a.elements,Du):n instanceof ey&&a instanceof ey?Du(n.Ae,a.Ae):n instanceof Z2&&a instanceof Z2}(t.transform,e.transform)}class vK{constructor(e,r){this.version=e,this.transformResults=r}}class ao{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ao}static exists(e){return new ao(void 0,e)}static updateTime(e){return new ao(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function b2(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pw{}function OU(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gw(t.key,ao.none()):new Ox(t.key,t.data,ao.none());{const r=t.data,n=So.empty();let a=new Ms(Ai.comparator);for(let s of e.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new _f(t.key,n,new rl(a.toArray()),ao.none())}}function yK(t,e,r){t instanceof Ox?function(a,s,i){const o=a.value.clone(),l=r3(a.fieldTransforms,s,i.transformResults);o.setAll(l),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):t instanceof _f?function(a,s,i){if(!b2(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=r3(a.fieldTransforms,s,i.transformResults),l=s.data;l.setAll(QU(a)),l.setAll(o),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Fg(t,e,r,n){return t instanceof Ox?function(s,i,o,l){if(!b2(s.precondition,i))return o;const u=s.value.clone(),d=n3(s.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof _f?function(s,i,o,l){if(!b2(s.precondition,i))return o;const u=n3(s.fieldTransforms,l,i),d=i.data;return d.setAll(QU(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(s,i,o){return b2(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,r)}function wK(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=UU(n.transform,a||null);s!=null&&(r===null&&(r=So.empty()),r.set(n.field,s))}return r||null}function t3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Tm(n,a,(s,i)=>xK(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ox extends pw{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class _f extends pw{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function QU(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function r3(t,e,r){const n=new Map;Pn(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const s=t[a],i=s.transform,o=e.data.field(s.field);n.set(s.field,pK(i,o,r[a]))}return n}function n3(t,e,r){const n=new Map;for(const a of t){const s=a.transform,i=r.data.field(a.field);n.set(a.field,mK(s,i,e))}return n}class gw extends pw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bK extends pw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&yK(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Fg(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Fg(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=RU();return this.mutations.forEach(a=>{const s=e.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const l=OU(i,o);l!==null&&n.set(a.key,l),i.isValidDocument()||i.convertToNoDocument(Dr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),An())}isEqual(e){return this.batchId===e.batchId&&Tm(this.mutations,e.mutations,(r,n)=>t3(r,n))&&Tm(this.baseMutations,e.baseMutations,(r,n)=>t3(r,n))}}class LS{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Pn(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return uK}();const s=e.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new LS(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EK{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ws,wn;function SK(t){switch(t){case ht.OK:return Sr(64938);case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0;default:return Sr(15467,{code:t})}}function HU(t){if(t===void 0)return RA("GRPC error has no .code"),ht.UNKNOWN;switch(t){case ws.OK:return ht.OK;case ws.CANCELLED:return ht.CANCELLED;case ws.UNKNOWN:return ht.UNKNOWN;case ws.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case ws.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case ws.INTERNAL:return ht.INTERNAL;case ws.UNAVAILABLE:return ht.UNAVAILABLE;case ws.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case ws.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case ws.NOT_FOUND:return ht.NOT_FOUND;case ws.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case ws.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case ws.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case ws.ABORTED:return ht.ABORTED;case ws.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case ws.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case ws.DATA_LOSS:return ht.DATA_LOSS;default:return Sr(39323,{code:t})}}(wn=ws||(ws={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BK=new ef([4294967295,4294967295],0);function a3(t){const e=TK().encode(t),r=new nU;return r.update(e),new Uint8Array(r.digest())}function s3(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ef([r,n],0),new ef([a,s],0)]}class US{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ug(`Invalid padding: ${r}`);if(n<0)throw new ug(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ug(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ug(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=ef.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(ef.fromNumber(n)));return a.compare(BK)===1&&(a=new ef([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=a3(e),[n,a]=s3(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new US(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const r=a3(e),[n,a]=s3(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ug extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Qx.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new xw(Dr.min(),a,new Fa(un),LA(),An())}}class Qx{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Qx(n,r,An(),An(),An())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class VU{constructor(e,r){this.targetId=e,this.Ce=r}}class zU{constructor(e,r,n=hi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class i3{constructor(){this.ve=0,this.Fe=o3(),this.Me=hi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=An(),r=An(),n=An();return this.Fe.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Sr(38017,{changeType:s})}}),new Qx(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=o3()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class NK{constructor(e){this.Ge=e,this.ze=new Map,this.je=LA(),this.Je=hv(),this.He=hv(),this.Ye=new Fa(un)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Sr(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const s=a.target;if(S_(s))if(n===0){const i=new Ar(s.path);this.et(r,i,ji.newNoDocument(i,Dr.min()))}else Pn(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=df(n).toUint8Array()}catch(l){if(l instanceof mU)return Sm("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new US(i,a,s)}catch(l){return Sm(l instanceof ug?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(e){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&S_(o.target)){const l=new Ar(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,ji.newNoDocument(l,e))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=An();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(e));const a=new xw(e,r,this.Ye,this.je,n);return this.je=LA(),this.Je=hv(),this.He=hv(),this.Ye=new Fa(un),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new i3,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Ms(un),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Ms(un),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Zt("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new i3),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function hv(){return new Fa(Ar.comparator)}function o3(){return new Fa(Ar.comparator)}const kK={asc:"ASCENDING",desc:"DESCENDING"},IK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FK={and:"AND",or:"OR"};class DK{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function B_(t,e){return t.useProto3Json||uw(e)?e:{value:e}}function ty(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GU(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RK(t,e){return ty(t,e.toTimestamp())}function Bu(t){return Pn(!!t,49232),Dr.fromTimestamp(function(r){const n=Af(r);return new cr(n.seconds,n.nanos)}(t))}function MS(t,e){return N_(t,e).canonicalString()}function N_(t,e){const r=function(a){return new la(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function qU(t){const e=la.fromString(t);return Pn(YU(e),10190,{key:e.toString()}),e}function k_(t,e){return MS(t.databaseId,e.path)}function QC(t,e){const r=qU(e);if(r.get(1)!==t.databaseId.projectId)throw new qt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new qt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ar($U(r))}function KU(t,e){return MS(t.databaseId,e)}function LK(t){const e=qU(t);return e.length===4?la.emptyPath():$U(e)}function I_(t){return new la(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $U(t){return Pn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function l3(t,e,r){return{name:k_(t,e),fields:r.value.mapValue.fields}}function UK(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Sr(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Pn(d===void 0||typeof d=="string",58123),hi.fromBase64String(d||"")):(Pn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),hi.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(u){const d=u.code===void 0?ht.UNKNOWN:HU(u.code);return new qt(d,u.message||"")}(i);r=new zU(n,a,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=QC(t,n.document.name),s=Bu(n.document.updateTime),i=n.document.createTime?Bu(n.document.createTime):Dr.min(),o=new So({mapValue:{fields:n.document.fields}}),l=ji.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new C2(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=QC(t,n.document),s=n.readTime?Bu(n.readTime):Dr.min(),i=ji.newNoDocument(a,s),o=n.removedTargetIds||[];r=new C2([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=QC(t,n.document),s=n.removedTargetIds||[];r=new C2([],s,a,null)}else{if(!("filter"in e))return Sr(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new _K(a,s),o=n.targetId;r=new VU(o,i)}}return r}function MK(t,e){let r;if(e instanceof Ox)r={update:l3(t,e.key,e.value)};else if(e instanceof gw)r={delete:k_(t,e.key)};else if(e instanceof _f)r={update:l3(t,e.key,e.data),updateMask:qK(e.fieldMask)};else{if(!(e instanceof bK))return Sr(16599,{Vt:e.type});r={verify:k_(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof Z2)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof km)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof sx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ey)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Sr(20930,{transform:i.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:RK(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Sr(27497)}(t,e.precondition)),r}function PK(t,e){return t&&t.length>0?(Pn(e!==void 0,14353),t.map(r=>function(a,s){let i=a.updateTime?Bu(a.updateTime):Bu(s);return i.isEqual(Dr.min())&&(i=Bu(s)),new vK(i,a.transformResults||[])}(r,e))):[]}function jK(t,e){return{documents:[KU(t,e.path)]}}function OK(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=KU(t,a);const s=function(u){if(u.length!==0)return XU(Dc.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:G0(m.field),direction:VK(m.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const o=B_(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:a}}function QK(t){let e=LK(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Pn(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(h){const m=WU(h);return m instanceof Dc&&_U(m)?m.getFilters():[m]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(m=>function(b){return new ax(q0(b.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,uw(m)?null:m}(r.limit));let l=null;r.startAt&&(l=function(h){const m=!!h.before,g=h.values||[];return new Y2(g,m)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const m=!h.before,g=h.values||[];return new Y2(g,m)}(r.endAt)),sK(e,a,i,s,o,"F",l,u)}function HK(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Sr(28987,{purpose:a})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function WU(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=q0(r.unaryFilter.field);return _s.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=q0(r.unaryFilter.field);return _s.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=q0(r.unaryFilter.field);return _s.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=q0(r.unaryFilter.field);return _s.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Sr(61313);default:return Sr(60726)}}(t):t.fieldFilter!==void 0?function(r){return _s.create(q0(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Sr(58110);default:return Sr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Dc.create(r.compositeFilter.filters.map(n=>WU(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Sr(1026)}}(r.compositeFilter.op))}(t):Sr(30097,{filter:t})}function VK(t){return kK[t]}function zK(t){return IK[t]}function GK(t){return FK[t]}function G0(t){return{fieldPath:t.canonicalString()}}function q0(t){return Ai.fromServerFormat(t.fieldPath)}function XU(t){return t instanceof _s?function(r){if(r.op==="=="){if(Wk(r.value))return{unaryFilter:{field:G0(r.field),op:"IS_NAN"}};if($k(r.value))return{unaryFilter:{field:G0(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Wk(r.value))return{unaryFilter:{field:G0(r.field),op:"IS_NOT_NAN"}};if($k(r.value))return{unaryFilter:{field:G0(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:G0(r.field),op:zK(r.op),value:r.value}}}(t):t instanceof Dc?function(r){const n=r.getFilters().map(a=>XU(a));return n.length===1?n[0]:{compositeFilter:{op:GK(r.op),filters:n}}}(t):Sr(54877,{filter:t})}function qK(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function YU(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,r,n,a,s=Dr.min(),i=Dr.min(),o=hi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new zd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{constructor(e){this.yt=e}}function $K(t){const e=QK({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?J2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(){this.Cn=new XK}addToCollectionParentIndex(e,r){return this.Cn.add(r),bt.resolve()}getCollectionParents(e,r){return bt.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return bt.resolve()}deleteFieldIndex(e,r){return bt.resolve()}deleteAllFieldIndexes(e){return bt.resolve()}createTargetIndexes(e,r){return bt.resolve()}getDocumentsMatchingTarget(e,r){return bt.resolve(null)}getIndexType(e,r){return bt.resolve(0)}getFieldIndexes(e,r){return bt.resolve([])}getNextCollectionGroupToUpdate(e){return bt.resolve(null)}getMinOffset(e,r){return bt.resolve(uf.min())}getMinOffsetFromCollectionGroup(e,r){return bt.resolve(uf.min())}updateCollectionGroup(e,r,n){return bt.resolve()}updateIndexEntries(e,r){return bt.resolve()}}class XK{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Ms(la.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Ms(la.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JU=41943040;class Eo{static withCacheSize(e){return new Eo(e,Eo.DEFAULT_COLLECTION_PERCENTILE,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Eo.DEFAULT_COLLECTION_PERCENTILE=10,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Eo.DEFAULT=new Eo(JU,Eo.DEFAULT_COLLECTION_PERCENTILE,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Eo.DISABLED=new Eo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Im(0)}static cr(){return new Im(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="LruGarbageCollector",YK=1048576;function A3([t,e],[r,n]){const a=un(t,r);return a===0?un(e,n):a}class JK{constructor(e){this.Ir=e,this.buffer=new Ms(A3),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();A3(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class ZK{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Zt(u3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){qm(r)?Zt(u3,"Ignoring IndexedDB error during garbage collection: ",r):await Gm(r)}await this.Vr(3e5)})}}class e${constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return bt.resolve(cw.ce);const n=new JK(r);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Zt("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(c3)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Zt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c3):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,s,i,o,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Zt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),a=this.params.maximumSequenceNumbersToCollect):a=h,i=Date.now(),this.nthSequenceNumber(e,a))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,r))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(u=Date.now(),V0()<=cn.DEBUG&&Zt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:h})))}}function t$(t,e){return new e$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(){this.changes=new Ph(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ji.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?bt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&Fg(n.mutation,a,rl.empty(),cr.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,An()).next(()=>n))}getLocalViewOfDocuments(e,r,n=An()){const a=oh();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let i=cg();return s.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=oh();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,An()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(e,r,n,a){let s=LA();const i=Ig(),o=function(){return Ig()}();return r.forEach((l,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof _f)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Fg(d.mutation,u,d.mutation.getFieldMask(),cr.now())):i.set(u.key,rl.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new n$(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(e,r){const n=Ig();let a=new Fa((i,o)=>i-o),s=An();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let d=n.get(l)||rl.empty();d=o.applyToLocalView(u,d),n.set(l,d);const h=(a.get(o.batchId)||An()).add(l);a=a.insert(o.batchId,h)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,h=RU();d.forEach(m=>{if(!s.has(m)){const g=OU(r.get(m),n.get(m));g!==null&&h.set(m,g),s=s.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,h))}return bt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(i){return Ar.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):NU(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):bt.resolve(oh());let o=ex,l=s;return i.next(u=>bt.forEach(u,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?bt.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,An())).next(d=>({batchId:o,changes:DU(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ar(r)).next(n=>{let a=cg();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let i=cg();return this.indexManager.getCollectionParents(e,s).next(o=>bt.forEach(o,l=>{const u=function(h,m){return new Km(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((h,m)=>{i=i.insert(h,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(i=>{s.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,ji.newInvalidDocument(d)))});let o=cg();return i.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Fg(d.mutation,u,rl.empty(),cr.now()),hw(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return bt.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Bu(a.createTime)}}(r)),bt.resolve()}getNamedQuery(e,r){return bt.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(a){return{name:a.name,query:$K(a.bundledQuery),readTime:Bu(a.readTime)}}(r)),bt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(){this.overlays=new Fa(Ar.comparator),this.qr=new Map}getOverlay(e,r){return bt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=oh();return bt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.St(e,r,s)}),bt.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),bt.resolve()}getOverlaysForCollection(e,r,n){const a=oh(),s=r.length+1,i=new Ar(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&a.set(l.getKey(),l)}return bt.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new Fa((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=oh(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=oh(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return bt.resolve(o)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new EK(r,n));let s=this.qr.get(r);s===void 0&&(s=An(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(){this.sessionToken=hi.EMPTY_BYTE_STRING}getSessionToken(e){return bt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,bt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.Qr=new Ms($s.$r),this.Ur=new Ms($s.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new $s(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new $s(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new Ar(new la([])),n=new $s(r,e),a=new $s(r,e+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new Ar(new la([])),n=new $s(r,e),a=new $s(r,e+1);let s=An();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new $s(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class $s{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return Ar.comparator(e.key,r.key)||un(e.Yr,r.Yr)}static Kr(e,r){return un(e.Yr,r.Yr)||Ar.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ms($s.$r)}checkEmpty(e){return bt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new CK(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new $s(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return bt.resolve(i)}lookupMutationBatch(e,r){return bt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return bt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(this.mutationQueue.length===0?NS:this.tr-1)}getAllMutationBatches(e){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new $s(r,0),a=new $s(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),bt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ms(un);return r.forEach(a=>{const s=new $s(a,0),i=new $s(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),bt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;Ar.isDocumentKey(s)||(s=s.child(""));const i=new $s(new Ar(s),0);let o=new Ms(un);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(l.Yr)),!0)},i),bt.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Pn(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return bt.forEach(r.mutations,a=>{const s=new $s(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new $s(r,0),a=this.Zr.firstAfterOrEqual(n);return bt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,bt.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e){this.ri=e,this.docs=function(){return new Fa(Ar.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return bt.resolve(n?n.document.mutableCopy():ji.newInvalidDocument(r))}getEntries(e,r){let n=LA();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():ji.newInvalidDocument(a))}),bt.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=LA();const i=r.path,o=new Ar(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||Mq(Uq(d),n)<=0||(a.has(d.key)||hw(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return bt.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Sr(9500)}ii(e,r){return bt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new u$(this)}getSize(e){return bt.resolve(this.size)}}class u$ extends r${constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),bt.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e){this.persistence=e,this.si=new Ph(r=>FS(r),DS),this.lastRemoteSnapshotVersion=Dr.min(),this.highestTargetId=0,this.oi=0,this._i=new PS,this.targetCount=0,this.ai=Im.ur()}forEachTarget(e,r){return this.si.forEach((n,a)=>r(a)),bt.resolve()}getLastRemoteSnapshotVersion(e){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),bt.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Im(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,bt.resolve()}updateTargetData(e,r){return this.Pr(r),bt.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,bt.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),a++)}),bt.waitFor(s).next(()=>a)}getTargetCount(e){return bt.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return bt.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),bt.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(e,i))}),bt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),bt.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return bt.resolve(n)}containsKey(e,r){return bt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e,r){this.ui={},this.overlays={},this.ci=new cw(0),this.li=!1,this.li=!0,this.hi=new o$,this.referenceDelegate=e(this),this.Pi=new A$(this),this.indexManager=new WK,this.remoteDocumentCache=function(a){return new c$(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new KK(r),this.Ii=new s$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new i$,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new l$(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Zt("MemoryPersistence","Starting transaction:",e);const a=new d$(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(e,r){return bt.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class d$ extends jq{constructor(e){super(),this.currentSequenceNumber=e}}class jS{constructor(e){this.persistence=e,this.Ri=new PS,this.Vi=null}static mi(e){return new jS(e)}get fi(){if(this.Vi)return this.Vi;throw Sr(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),bt.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),bt.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),bt.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.fi,n=>{const a=Ar.fromPath(n);return this.gi(e,a).next(s=>{s||r.removeEntry(a,Dr.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return bt.or([()=>bt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class ry{constructor(e,r){this.persistence=e,this.pi=new Ph(n=>Hq(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=t$(this,r)}static mi(e,r){return new ry(e,r)}Ei(){}di(e){return bt.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return bt.forEach(this.pi,(n,a)=>this.br(e,n,a).next(s=>s?bt.resolve():r(a)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(e,i=>this.br(e,i,r).next(o=>{o||(n++,s.removeEntry(i,Dr.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=y2(e.data.value)),r}br(e,r,n){return bt.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return bt.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=An(),a=An();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new OS(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return QH()?8:Oq(Gi())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.ys(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(e,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new f$;return this.Ss(e,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(e,r,i,o.size)})}).next(()=>s.result)}bs(e,r,n,a){return n.documentReadCount<this.fs?(V0()<=cn.DEBUG&&Zt("QueryEngine","SDK will not create cache indexes for query:",z0(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),bt.resolve()):(V0()<=cn.DEBUG&&Zt("QueryEngine","Query:",z0(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(V0()<=cn.DEBUG&&Zt("QueryEngine","The SDK decides to create cache indexes for query:",z0(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tu(r))):bt.resolve())}ys(e,r){if(Zk(r))return bt.resolve(null);let n=Tu(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=J2(r,null,"F"),n=Tu(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=An(...s);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,i,l.readTime)?this.ys(e,J2(r,null,"F")):this.vs(e,u,r,l)}))})))}ws(e,r,n,a){return Zk(r)||a.isEqual(Dr.min())?bt.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?bt.resolve(null):(V0()<=cn.DEBUG&&Zt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),z0(r)),this.vs(e,i,r,Lq(a,ex)).next(o=>o))})}Ds(e,r){let n=new Ms(IU(e));return r.forEach((a,s)=>{hw(e,s)&&(n=n.add(s))}),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(e,r,n){return V0()<=cn.DEBUG&&Zt("QueryEngine","Using full collection scan to execute query:",z0(r)),this.ps.getDocumentsMatchingQuery(e,r,uf.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="LocalStore",m$=3e8;class p${constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new Fa(un),this.xs=new Ph(s=>FS(s),DS),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a$(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function g$(t,e,r,n){return new p$(t,e,r,n)}async function e8(t,e){const r=Lr(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let l=An();for(const u of a){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function x$(t,e){const r=Lr(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const h=u.batch,m=h.keys();let g=bt.resolve();return m.forEach(b=>{g=g.next(()=>d.getEntry(l,b)).next(y=>{const E=u.docVersions.get(b);Pn(E!==null,48541),y.version.compareTo(E)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=An();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function t8(t){const e=Lr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function v$(t,e){const r=Lr(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];e.targetChanges.forEach((d,h)=>{const m=a.get(h);if(!m)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,h)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(hi.EMPTY_BYTE_STRING,Dr.min()).withLastLimboFreeSnapshotVersion(Dr.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),a=a.insert(h,g),function(y,E,B){return y.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=m$?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,g,d)&&o.push(r.Pi.updateTargetData(s,g))});let l=LA(),u=An();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(y$(s,i,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!n.isEqual(Dr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(h=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return bt.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(r.Ms=a,s))}function y$(t,e,r){let n=An(),a=An();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=LA();return r.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),l.isNoDocument()&&l.version.isEqual(Dr.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):Zt(QS,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:a}})}function w$(t,e){const r=Lr(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=NS),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function b$(t,e){const r=Lr(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,e).next(s=>s?(a=s,bt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new zd(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function F_(t,e,r){const n=Lr(t),a=n.Ms.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!qm(i))throw i;Zt(QS,`Failed to update sequence numbers for target ${e}: ${i}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function d3(t,e,r){const n=Lr(t);let a=Dr.min(),s=An();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const h=Lr(l),m=h.xs.get(d);return m!==void 0?bt.resolve(h.Ms.get(m)):h.Pi.getTargetData(u,d)}(n,i,Tu(e)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,e,r?a:Dr.min(),r?s:An())).next(o=>(C$(n,oK(e),o),{documents:o,Qs:s})))}function C$(t,e,r){let n=t.Os.get(e)||Dr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Os.set(e,n)}class f3{constructor(){this.activeTargetIds=fK()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class E${constructor(){this.Mo=new f3,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new f3,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3="ConnectivityMonitor";class m3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Zt(h3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Zt(h3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mv=null;function D_(){return mv===null?mv=function(){return 268435456+Math.round(2147483648*Math.random())}():mv++,"0x"+mv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="RestConnection",S$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class T${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===W2?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,s){const i=D_(),o=this.zo(e,r.toUriEncodedString());Zt(HC,`Sending RPC '${e}' ${i}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,a,s);const{host:u}=new URL(o),d=Uh(u);return this.Jo(e,o,l,n,d).then(h=>(Zt(HC,`Received RPC '${e}' ${i}: `,h),h),h=>{throw Sm(HC,`RPC '${e}' ${i} failed with error: `,h,"url: ",o,"request:",n),h})}Ho(e,r,n,a,s,i){return this.Go(e,r,n,a,s)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zm}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>e[s]=a),n&&n.headers.forEach((a,s)=>e[s]=a)}zo(e,r){const n=S$[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="WebChannelConnection";class N$ extends T${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,s){const i=D_();return new Promise((o,l)=>{const u=new aU;u.setWithCredentials(!0),u.listenOnce(sU.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case v2.NO_ERROR:const h=u.getResponseJson();Zt(Bi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case v2.TIMEOUT:Zt(Bi,`RPC '${e}' ${i} timed out`),l(new qt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case v2.HTTP_ERROR:const m=u.getStatus();if(Zt(Bi,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const y=function(B){const k=B.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(k)>=0?k:ht.UNKNOWN}(b.status);l(new qt(y,b.message))}else l(new qt(ht.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new qt(ht.UNAVAILABLE,"Connection failed."));break;default:Sr(9055,{l_:e,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Zt(Bi,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(a);Zt(Bi,`RPC '${e}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(e,r,n){const a=D_(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=lU(),o=oU(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=s.join("");Zt(Bi,`Creating RPC '${e}' stream ${a}: ${d}`,l);const h=i.createWebChannel(d,l);this.I_(h);let m=!1,g=!1;const b=new B$({Yo:E=>{g?Zt(Bi,`Not sending because RPC '${e}' stream ${a} is closed:`,E):(m||(Zt(Bi,`Opening RPC '${e}' stream ${a} transport.`),h.open(),m=!0),Zt(Bi,`RPC '${e}' stream ${a} sending:`,E),h.send(E))},Zo:()=>h.close()}),y=(E,B,k)=>{E.listen(B,L=>{try{k(L)}catch(M){setTimeout(()=>{throw M},0)}})};return y(h,lg.EventType.OPEN,()=>{g||(Zt(Bi,`RPC '${e}' stream ${a} transport opened.`),b.o_())}),y(h,lg.EventType.CLOSE,()=>{g||(g=!0,Zt(Bi,`RPC '${e}' stream ${a} transport closed`),b.a_(),this.E_(h))}),y(h,lg.EventType.ERROR,E=>{g||(g=!0,Sm(Bi,`RPC '${e}' stream ${a} transport errored. Name:`,E.name,"Message:",E.message),b.a_(new qt(ht.UNAVAILABLE,"The operation could not be completed")))}),y(h,lg.EventType.MESSAGE,E=>{var B;if(!g){const k=E.data[0];Pn(!!k,16349);const L=k,M=(L==null?void 0:L.error)||((B=L[0])==null?void 0:B.error);if(M){Zt(Bi,`RPC '${e}' stream ${a} received error:`,M);const P=M.status;let R=function(N){const Q=ws[N];if(Q!==void 0)return HU(Q)}(P),C=M.message;R===void 0&&(R=ht.INTERNAL,C="Unknown error status: "+P+" with message "+M.message),g=!0,b.a_(new qt(R,C)),h.close()}else Zt(Bi,`RPC '${e}' stream ${a} received:`,k),b.u_(k)}}),y(o,iU.STAT_EVENT,E=>{E.stat===w_.PROXY?Zt(Bi,`RPC '${e}' stream ${a} detected buffering proxy`):E.stat===w_.NOPROXY&&Zt(Bi,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function VC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t){return new DK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e,r,n=1e3,a=1.5,s=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&Zt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="PersistentStream";class n8{constructor(e,r,n,a,s,i,o,l){this.Mi=e,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new r8(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ht.RESOURCE_EXHAUSTED?(RA(r.toString()),RA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{e(()=>{const a=new qt(ht.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Zt(p3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Zt(p3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class k$ extends n8{constructor(e,r,n,a,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=UK(this.serializer,e),n=function(s){if(!("targetChange"in s))return Dr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Dr.min():i.readTime?Bu(i.readTime):Dr.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=I_(this.serializer),r.addTarget=function(s,i){let o;const l=i.target;if(o=S_(l)?{documents:jK(s,l)}:{query:OK(s,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=GU(s,i.resumeToken);const u=B_(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Dr.min())>0){o.readTime=ty(s,i.snapshotVersion.toTimestamp());const u=B_(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=HK(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=I_(this.serializer),r.removeTarget=e,this.q_(r)}}class I$ extends n8{constructor(e,r,n,a,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Pn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=PK(e.writeResults,e.commitTime),n=Bu(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=I_(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>MK(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${}class D$ extends F${constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new qt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(e,N_(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new qt(ht.UNKNOWN,s.toString())})}Ho(e,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,N_(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new qt(ht.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class R${constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(RA(r),this.aa=!1):Zt("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="RemoteStore";class L${constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{jh(this)&&(Zt(Sh,"Restarting streams for network reachability change."),await async function(l){const u=Lr(l);u.Ea.add(4),await Hx(u),u.Ra.set("Unknown"),u.Ea.delete(4),await yw(u)}(this))})}),this.Ra=new R$(n,a)}}async function yw(t){if(jh(t))for(const e of t.da)await e(!0)}async function Hx(t){for(const e of t.da)await e(!1)}function a8(t,e){const r=Lr(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),GS(r)?zS(r):$m(r).O_()&&VS(r,e))}function HS(t,e){const r=Lr(t),n=$m(r);r.Ia.delete(e),n.O_()&&s8(r,e),r.Ia.size===0&&(n.O_()?n.L_():jh(r)&&r.Ra.set("Unknown"))}function VS(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}$m(t).Y_(e)}function s8(t,e){t.Va.Ue(e),$m(t).Z_(e)}function zS(t){t.Va=new NK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),$m(t).start(),t.Ra.ua()}function GS(t){return jh(t)&&!$m(t).x_()&&t.Ia.size>0}function jh(t){return Lr(t).Ea.size===0}function i8(t){t.Va=void 0}async function U$(t){t.Ra.set("Online")}async function M$(t){t.Ia.forEach((e,r)=>{VS(t,e)})}async function P$(t,e){i8(t),GS(t)?(t.Ra.ha(e),zS(t)):t.Ra.set("Unknown")}async function j$(t,e,r){if(t.Ra.set("Online"),e instanceof zU&&e.state===2&&e.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(t,e)}catch(n){Zt(Sh,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ny(t,n)}else if(e instanceof C2?t.Va.Ze(e):e instanceof VU?t.Va.st(e):t.Va.tt(e),!r.isEqual(Dr.min()))try{const n=await t8(t.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(hi.EMPTY_BYTE_STRING,d.snapshotVersion)),s8(s,l);const h=new zd(d.target,l,u,d.sequenceNumber);VS(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Zt(Sh,"Failed to raise snapshot:",n),await ny(t,n)}}async function ny(t,e,r){if(!qm(e))throw e;t.Ea.add(1),await Hx(t),t.Ra.set("Offline"),r||(r=()=>t8(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Zt(Sh,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await yw(t)})}function o8(t,e){return e().catch(r=>ny(t,r,e))}async function ww(t){const e=Lr(t),r=hf(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:NS;for(;O$(e);)try{const a=await w$(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,Q$(e,a)}catch(a){await ny(e,a)}l8(e)&&c8(e)}function O$(t){return jh(t)&&t.Ta.length<10}function Q$(t,e){t.Ta.push(e);const r=hf(t);r.O_()&&r.X_&&r.ea(e.mutations)}function l8(t){return jh(t)&&!hf(t).x_()&&t.Ta.length>0}function c8(t){hf(t).start()}async function H$(t){hf(t).ra()}async function V$(t){const e=hf(t);for(const r of t.Ta)e.ea(r.mutations)}async function z$(t,e,r){const n=t.Ta.shift(),a=LS.from(n,e,r);await o8(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await ww(t)}async function G$(t,e){e&&hf(t).X_&&await async function(n,a){if(function(i){return SK(i)&&i!==ht.ABORTED}(a.code)){const s=n.Ta.shift();hf(n).B_(),await o8(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await ww(n)}}(t,e),l8(t)&&c8(t)}async function g3(t,e){const r=Lr(t);r.asyncQueue.verifyOperationInProgress(),Zt(Sh,"RemoteStore received new credentials");const n=jh(r);r.Ea.add(3),await Hx(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await yw(r)}async function q$(t,e){const r=Lr(t);e?(r.Ea.delete(2),await yw(r)):e||(r.Ea.add(2),await Hx(r),r.Ra.set("Unknown"))}function $m(t){return t.ma||(t.ma=function(r,n,a){const s=Lr(r);return s.sa(),new k$(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:U$.bind(null,t),t_:M$.bind(null,t),r_:P$.bind(null,t),H_:j$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),GS(t)?zS(t):t.Ra.set("Unknown")):(await t.ma.stop(),i8(t))})),t.ma}function hf(t){return t.fa||(t.fa=function(r,n,a){const s=Lr(r);return s.sa(),new I$(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:H$.bind(null,t),r_:G$.bind(null,t),ta:V$.bind(null,t),na:z$.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ww(t)):(await t.fa.stop(),t.Ta.length>0&&(Zt(Sh,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new SA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const i=Date.now()+n,o=new qS(e,r,i,a,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qt(ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function KS(t,e){if(RA("AsyncQueue",`${e}: ${t}`),qm(t))return new qt(ht.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{static emptySet(e){return new om(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ar.comparator(r.key,n.key):(r,n)=>Ar.comparator(r.key,n.key),this.keyedMap=cg(),this.sortedSet=new Fa(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof om)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new om;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this.ga=new Fa(Ar.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Sr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Fm{constructor(e,r,n,a,s,i,o,l,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Fm(e,r,om.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $${constructor(){this.queries=v3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=Lr(r),s=a.queries;a.queries=v3(),s.forEach((i,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new qt(ht.ABORTED,"Firestore shutting down"))}}function v3(){return new Ph(t=>kU(t),fw)}async function $S(t,e){const r=Lr(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.ba()&&e.Da()&&(n=2):(s=new K$,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=KS(i,`Initialization of query '${z0(e.query)}' failed`);return void e.onError(o)}r.queries.set(a,s),s.Sa.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&XS(r)}async function WS(t,e){const r=Lr(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(e);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=e.Da()?0:1:!s.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function W$(t,e){const r=Lr(t);let n=!1;for(const a of e){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&XS(r)}function X$(t,e,r){const n=Lr(t),a=n.queries.get(e);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(e)}function XS(t){t.Ca.forEach(e=>{e.next()})}var R_,y3;(y3=R_||(R_={})).Ma="default",y3.Cache="cache";class YS{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Fm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Fm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==R_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e){this.key=e}}class A8{constructor(e){this.key=e}}class Y${constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=An(),this.mutatedKeys=An(),this.eu=IU(e),this.tu=new om(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new x3,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const l=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,h)=>{const m=a.get(d),g=hw(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;m&&g?m.data.isEqual(g.data)?b!==y&&(n.track({type:3,doc:g}),E=!0):this.su(m,g)||(n.track({type:2,doc:g}),E=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(o=!0)):!m&&g?(n.track({type:0,doc:g}),E=!0):m&&!g&&(n.track({type:1,doc:m}),E=!0,(l||u)&&(o=!0)),E&&(g?(i=i.add(g),s=y?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((d,h)=>function(g,b){const y=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Sr(20277,{Rt:E})}};return y(g)-y(b)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],l=this.Xa.size===0&&this.current&&!a?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new Fm(this.query,e.tu,s,i,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new x3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=An(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new A8(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new u8(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=An();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Fm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const JS="SyncEngine";class J${constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Z${constructor(e){this.key=e,this.hu=!1}}class eW{constructor(e,r,n,a,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Ph(o=>kU(o),fw),this.Iu=new Map,this.Eu=new Set,this.du=new Fa(Ar.comparator),this.Au=new Map,this.Ru=new PS,this.Vu={},this.mu=new Map,this.fu=Im.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tW(t,e,r=!0){const n=g8(t);let a;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await d8(n,e,r,!0),a}async function rW(t,e){const r=g8(t);await d8(r,e,!0,!1)}async function d8(t,e,r,n){const a=await b$(t.localStore,Tu(e)),s=a.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await nW(t,e,s,i==="current",a.resumeToken)),t.isPrimaryClient&&r&&a8(t.remoteStore,a),o}async function nW(t,e,r,n,a){t.pu=(h,m,g)=>async function(y,E,B,k){let L=E.view.ru(B);L.Cs&&(L=await d3(y.localStore,E.query,!1).then(({documents:C})=>E.view.ru(C,L)));const M=k&&k.targetChanges.get(E.targetId),P=k&&k.targetMismatches.get(E.targetId)!=null,R=E.view.applyChanges(L,y.isPrimaryClient,M,P);return b3(y,E.targetId,R.au),R.snapshot}(t,h,m,g);const s=await d3(t.localStore,e,!0),i=new Y$(e,s.Qs),o=i.ru(s.documents),l=Qx.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=i.applyChanges(o,t.isPrimaryClient,l);b3(t,r,u.au);const d=new J$(e,r,i);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function aW(t,e,r){const n=Lr(t),a=n.Tu.get(e),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!fw(i,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await F_(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&HS(n.remoteStore,a.targetId),L_(n,a.targetId)}).catch(Gm)):(L_(n,a.targetId),await F_(n.localStore,a.targetId,!0))}async function sW(t,e){const r=Lr(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),HS(r.remoteStore,n.targetId))}async function iW(t,e,r){const n=fW(t);try{const a=await function(i,o){const l=Lr(i),u=cr.now(),d=o.reduce((g,b)=>g.add(b.key),An());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=LA(),y=An();return l.Ns.getEntries(g,d).next(E=>{b=E,b.forEach((B,k)=>{k.isValidDocument()||(y=y.add(B))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(E=>{h=E;const B=[];for(const k of o){const L=wK(k,h.get(k.key).overlayedDocument);L!=null&&B.push(new _f(k.key,L,bU(L.value.mapValue),ao.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,B,o)}).next(E=>{m=E;const B=E.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(g,E.batchId,B)})}).then(()=>({batchId:m.batchId,changes:DU(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new Fa(un)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await Vx(n,a.changes),await ww(n.remoteStore)}catch(a){const s=KS(a,"Failed to persist write");r.reject(s)}}async function f8(t,e){const r=Lr(t);try{const n=await v$(r.localStore,e);e.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(Pn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?Pn(i.hu,14607):a.removedDocuments.size>0&&(Pn(i.hu,42227),i.hu=!1))}),await Vx(r,n,e)}catch(n){await Gm(n)}}function w3(t,e,r){const n=Lr(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(e);o.snapshot&&a.push(o.snapshot)}),function(i,o){const l=Lr(i);l.onlineState=o;let u=!1;l.queries.forEach((d,h)=>{for(const m of h.Sa)m.va(o)&&(u=!0)}),u&&XS(l)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function oW(t,e,r){const n=Lr(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),s=a&&a.key;if(s){let i=new Fa(Ar.comparator);i=i.insert(s,ji.newNoDocument(s,Dr.min()));const o=An().add(s),l=new xw(Dr.min(),new Map,new Fa(un),i,o);await f8(n,l),n.du=n.du.remove(s),n.Au.delete(e),ZS(n)}else await F_(n.localStore,e,!1).then(()=>L_(n,e,r)).catch(Gm)}async function lW(t,e){const r=Lr(t),n=e.batch.batchId;try{const a=await x$(r.localStore,e);m8(r,n,null),h8(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Vx(r,a)}catch(a){await Gm(a)}}async function cW(t,e,r){const n=Lr(t);try{const a=await function(i,o){const l=Lr(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(h=>(Pn(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(n.localStore,e);m8(n,e,r),h8(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Vx(n,a)}catch(a){await Gm(a)}}function h8(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function m8(t,e,r){const n=Lr(t);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function L_(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||p8(t,n)})}function p8(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(HS(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),ZS(t))}function b3(t,e,r){for(const n of r)n instanceof u8?(t.Ru.addReference(n.key,e),uW(t,n)):n instanceof A8?(Zt(JS,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||p8(t,n.key)):Sr(19791,{wu:n})}function uW(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Zt(JS,"New document in limbo: "+r),t.Eu.add(n),ZS(t))}function ZS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new Ar(la.fromString(e)),n=t.fu.next();t.Au.set(n,new Z$(r)),t.du=t.du.insert(r,n),a8(t.remoteStore,new zd(Tu(dw(r.path)),n,"TargetPurposeLimboResolution",cw.ce))}}async function Vx(t,e,r){const n=Lr(t),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{i.push(n.pu(l,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const h=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){a.push(u);const h=OS.As(l.targetId,u);s.push(h)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(l,u){const d=Lr(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>bt.forEach(u,m=>bt.forEach(m.Es,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>bt.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!qm(h))throw h;Zt(QS,"Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const g=d.Ms.get(m),b=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(m,y)}}}(n.localStore,s))}async function AW(t,e){const r=Lr(t);if(!r.currentUser.isEqual(e)){Zt(JS,"User change. New user:",e.toKey());const n=await e8(r.localStore,e);r.currentUser=e,function(s,i){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new qt(ht.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Vx(r,n.Ls)}}function dW(t,e){const r=Lr(t),n=r.Au.get(e);if(n&&n.hu)return An().add(n.key);{let a=An();const s=r.Iu.get(e);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function g8(t){const e=Lr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=f8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oW.bind(null,e),e.Pu.H_=W$.bind(null,e.eventManager),e.Pu.yu=X$.bind(null,e.eventManager),e}function fW(t){const e=Lr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cW.bind(null,e),e}class ay{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vw(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return g$(this.persistence,new h$,e.initialUser,this.serializer)}Cu(e){return new ZU(jS.mi,this.serializer)}Du(e){return new E$}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ay.provider={build:()=>new ay};class hW extends ay{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Pn(this.persistence.referenceDelegate instanceof ry,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ZK(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Eo.withCacheSize(this.cacheSizeBytes):Eo.DEFAULT;return new ZU(n=>ry.mi(n,r),this.serializer)}}class U_{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>w3(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=AW.bind(null,this.syncEngine),await q$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $$}()}createDatastore(e){const r=vw(e.databaseInfo.databaseId),n=function(s){return new N$(s)}(e.databaseInfo);return function(s,i,o,l){return new D$(s,i,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,i,o){return new L$(n,a,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,r=>w3(this.syncEngine,r,0),function(){return m3.v()?new m3:new _$}())}createSyncEngine(e,r){return function(a,s,i,o,l,u,d){const h=new eW(a,s,i,o,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=Lr(a);Zt(Sh,"RemoteStore shutting down."),s.Ea.add(5),await Hx(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}U_.provider={build:()=>new U_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):RA("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="FirestoreClient";class mW{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Li.UNAUTHENTICATED,this.clientId=BS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{Zt(mf,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(Zt(mf,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new SA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=KS(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function zC(t,e){t.asyncQueue.verifyOperationInProgress(),Zt(mf,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await e8(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function C3(t,e){t.asyncQueue.verifyOperationInProgress();const r=await pW(t);Zt(mf,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>g3(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>g3(e.remoteStore,a)),t._onlineComponents=e}async function pW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Zt(mf,"Using user provided OfflineComponentProvider");try{await zC(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===ht.FAILED_PRECONDITION||a.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Sm("Error using user provided cache. Falling back to memory cache: "+r),await zC(t,new ay)}}else Zt(mf,"Using default OfflineComponentProvider"),await zC(t,new hW(void 0));return t._offlineComponents}async function x8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Zt(mf,"Using user provided OnlineComponentProvider"),await C3(t,t._uninitializedComponentsProvider._online)):(Zt(mf,"Using default OnlineComponentProvider"),await C3(t,new U_))),t._onlineComponents}function gW(t){return x8(t).then(e=>e.syncEngine)}async function sy(t){const e=await x8(t),r=e.eventManager;return r.onListen=tW.bind(null,e.syncEngine),r.onUnlisten=aW.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=rW.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=sW.bind(null,e.syncEngine),r}function xW(t,e,r={}){const n=new SA;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new e4({next:m=>{d.Nu(),i.enqueueAndForget(()=>WS(s,h));const g=m.docs.has(o);!g&&m.fromCache?u.reject(new qt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new qt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new YS(dw(o.path),d,{includeMetadataChanges:!0,qa:!0});return $S(s,h)}(await sy(t),t.asyncQueue,e,r,n)),n.promise}function vW(t,e,r={}){const n=new SA;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new e4({next:m=>{d.Nu(),i.enqueueAndForget(()=>WS(s,h)),m.fromCache&&l.source==="server"?u.reject(new qt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new YS(o,d,{includeMetadataChanges:!0,qa:!0});return $S(s,h)}(await sy(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8="firestore.googleapis.com",_3=!0;class S3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y8,this.ssl=_3}else this.host=e.host,this.ssl=e.ssl??_3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YK)throw new qt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Dq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v8(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new qt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new qt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new qt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bw{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Cq;switch(n.type){case"firstParty":return new Tq(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new qt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=E3.get(r);n&&(Zt("ComponentProvider","Removing Datastore"),E3.delete(r),n.terminate())}(this),Promise.resolve()}}function yW(t,e,r,n={}){var u;t=no(t,bw);const a=Uh(e),s=t._getSettings(),i={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;a&&(fS(`https://${o}`),hS("Firestore",!0)),s.host!==y8&&s.host!==o&&Sm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:a,emulatorOptions:n};if(!lf(l,i)&&(t._setSettings(l),n.mockUserToken)){let d,h;if(typeof n.mockUserToken=="string")d=n.mockUserToken,h=Li.MOCK_USER;else{d=FH(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new qt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Li(m)}t._authCredentials=new Eq(new uU(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new HA(this.firestore,e,this._query)}}class za{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new za(this.firestore,e,this._key)}toJSON(){return{type:za._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(jx(r,za._jsonSchema))return new za(e,n||null,new Ar(la.fromString(r.referencePath)))}}za._jsonSchemaVersion="firestore/documentReference/1.0",za._jsonSchema={type:Ss("string",za._jsonSchemaVersion),referencePath:Ss("string")};class tf extends HA{constructor(e,r,n){super(e,r,dw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new za(this.firestore,null,new Ar(e))}withConverter(e){return new tf(this.firestore,e,this._path)}}function Ft(t,e,...r){if(t=ba(t),AU("collection","path",e),t instanceof bw){const n=la.fromString(e,...r);return jk(n),new tf(t,null,n)}{if(!(t instanceof za||t instanceof tf))throw new qt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(la.fromString(e,...r));return jk(n),new tf(t.firestore,null,n)}}function yr(t,e,...r){if(t=ba(t),arguments.length===1&&(e=BS.newId()),AU("doc","path",e),t instanceof bw){const n=la.fromString(e,...r);return Pk(n),new za(t,null,new Ar(n))}{if(!(t instanceof za||t instanceof tf))throw new qt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(la.fromString(e,...r));return Pk(n),new za(t.firestore,t instanceof tf?t.converter:null,new Ar(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="AsyncQueue";class B3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new r8(this,"async_queue_retry"),this._c=()=>{const n=VC();n&&Zt(T3,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=VC();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=VC();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new SA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qm(e))throw e;Zt(T3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,RA("INTERNAL UNHANDLED ERROR: ",N3(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=qS.createAndSchedule(this,e,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Sr(47125,{Pc:N3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function N3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ru extends bw{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new B3,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new B3(e),this._firestoreClient=void 0,await e}}}function w8(t,e){const r=typeof t=="object"?t:xS(),n=typeof t=="string"?t:W2,a=nw(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=pL("firestore");s&&yW(a,...s)}return a}function zx(t){if(t._terminated)throw new qt(ht.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wW(t),t._firestoreClient}function wW(t){var n,a,s;const e=t._freezeSettings(),r=function(o,l,u,d){return new Gq(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,v8(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new mW(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ol(hi.fromBase64String(e))}catch(r){throw new qt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ol(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ol._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jx(e,Ol._jsonSchema))return Ol.fromBase64String(e.bytes)}}Ol._jsonSchemaVersion="firestore/bytes/1.0",Ol._jsonSchema={type:Ss("string",Ol._jsonSchemaVersion),bytes:Ss("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new qt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new qt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new qt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return un(this._lat,e._lat)||un(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Nu._jsonSchemaVersion}}static fromJSON(e){if(jx(e,Nu._jsonSchema))return new Nu(e.latitude,e.longitude)}}Nu._jsonSchemaVersion="firestore/geoPoint/1.0",Nu._jsonSchema={type:Ss("string",Nu._jsonSchemaVersion),latitude:Ss("number"),longitude:Ss("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ku._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jx(e,ku._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new ku(e.vectorValues);throw new qt(ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ku._jsonSchemaVersion="firestore/vectorValue/1.0",ku._jsonSchema={type:Ss("string",ku._jsonSchemaVersion),vectorValues:Ss("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bW=/^__.*__$/;class CW{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new _f(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ox(e,this.data,r,this.fieldTransforms)}}class b8{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new _f(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function C8(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Sr(40011,{Ac:t})}}class Ew{constructor(e,r,n,a,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ew({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return iy(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(C8(this.Ac)&&bW.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class EW{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||vw(e)}Cc(e,r,n,a=!1){return new Ew({Ac:e,methodName:r,Dc:n,path:Ai.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qx(t){const e=t._freezeSettings(),r=vw(t._databaseId);return new EW(t._databaseId,!!e.ignoreUndefinedProperties,r)}function t4(t,e,r,n,a,s={}){const i=t.Cc(s.merge||s.mergeFields?2:0,e,r,a);n4("Data must be an object, but it was:",i,n);const o=S8(n,i);let l,u;if(s.merge)l=new rl(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=M_(e,h,r);if(!i.contains(m))throw new qt(ht.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);B8(d,m)||d.push(m)}l=new rl(d),u=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=i.fieldTransforms;return new CW(new So(o),l,u)}class _w extends Cw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _w}}function _W(t,e,r){return new Ew({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class r4 extends Cw{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=_W(this,e,!0),n=this.vc.map(s=>Wm(s,r)),a=new km(n);return new gK(e.path,a)}isEqual(e){return e instanceof r4&&lf(this.vc,e.vc)}}function E8(t,e,r,n){const a=t.Cc(1,e,r);n4("Data must be an object, but it was:",a,n);const s=[],i=So.empty();Ef(n,(l,u)=>{const d=a4(e,l,r);u=ba(u);const h=a.yc(d);if(u instanceof _w)s.push(d);else{const m=Wm(u,h);m!=null&&(s.push(d),i.set(d,m))}});const o=new rl(s);return new b8(i,o,a.fieldTransforms)}function _8(t,e,r,n,a,s){const i=t.Cc(1,e,r),o=[M_(e,n,r)],l=[a];if(s.length%2!=0)throw new qt(ht.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(M_(e,s[m])),l.push(s[m+1]);const u=[],d=So.empty();for(let m=o.length-1;m>=0;--m)if(!B8(u,o[m])){const g=o[m];let b=l[m];b=ba(b);const y=i.yc(g);if(b instanceof _w)u.push(g);else{const E=Wm(b,y);E!=null&&(u.push(g),d.set(g,E))}}const h=new rl(u);return new b8(d,h,i.fieldTransforms)}function SW(t,e,r,n=!1){return Wm(r,t.Cc(n?4:3,e))}function Wm(t,e){if(T8(t=ba(t)))return n4("Unsupported field value:",e,t),S8(t,e);if(t instanceof Cw)return function(n,a){if(!C8(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let l=Wm(o,a.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=ba(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return hK(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=cr.fromDate(n);return{timestampValue:ty(a.serializer,s)}}if(n instanceof cr){const s=new cr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ty(a.serializer,s)}}if(n instanceof Nu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ol)return{bytesValue:GU(a.serializer,n._byteString)};if(n instanceof za){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:MS(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof ku)return function(i,o){return{mapValue:{fields:{[yU]:{stringValue:wU},[X2]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return RS(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${lw(n)}`)}(t,e)}function S8(t,e){const r={};return hU(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ef(t,(n,a)=>{const s=Wm(a,e.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function T8(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof cr||t instanceof Nu||t instanceof Ol||t instanceof za||t instanceof Cw||t instanceof ku)}function n4(t,e,r){if(!T8(r)||!dU(r)){const n=lw(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function M_(t,e,r){if((e=ba(e))instanceof Gx)return e._internalPath;if(typeof e=="string")return a4(t,e);throw iy("Field path arguments must be of type string or ",t,!1,void 0,r)}const TW=new RegExp("[~\\*/\\[\\]]");function a4(t,e,r){if(e.search(TW)>=0)throw iy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Gx(...e.split("."))._internalPath}catch{throw iy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function iy(t,e,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||i)&&(l+=" (found",s&&(l+=` in field ${n}`),i&&(l+=` in document ${a}`),l+=")"),new qt(ht.INVALID_ARGUMENT,o+t+l)}function B8(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new za(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Sw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class BW extends N8{data(){return super.data()}}function Sw(t,e){return typeof e=="string"?a4(t,e):e instanceof Gx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new qt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s4{}class i4 extends s4{}function er(t,e,...r){let n=[];e instanceof s4&&n.push(e),n=n.concat(r),function(s){const i=s.filter(l=>l instanceof o4).length,o=s.filter(l=>l instanceof Tw).length;if(i>1||i>0&&o>0)throw new qt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class Tw extends i4{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Tw(e,r,n)}_apply(e){const r=this._parse(e);return I8(e._query,r),new HA(e.firestore,e.converter,T_(e._query,r))}_parse(e){const r=qx(e.firestore);return function(s,i,o,l,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new qt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){F3(h,d);const b=[];for(const y of h)b.push(I3(l,s,y));m={arrayValue:{values:b}}}else m=I3(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||F3(h,d),m=SW(o,i,h,d==="in"||d==="not-in");return _s.create(u,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Fn(t,e,r){const n=e,a=Sw("where",t);return Tw._create(a,n,r)}class o4 extends s4{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new o4(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Dc.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const l of o)I8(i,l),i=T_(i,l)}(e._query,r),new HA(e.firestore,e.converter,T_(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class l4 extends i4{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new l4(e,r)}_apply(e){const r=function(a,s,i){if(a.startAt!==null)throw new qt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new qt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ax(s,i)}(e._query,this._field,this._direction);return new HA(e.firestore,e.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Km(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function gn(t,e="asc"){const r=e,n=Sw("orderBy",t);return l4._create(n,r)}class c4 extends i4{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new c4(e,r,n)}_apply(e){return new HA(e.firestore,e.converter,J2(e._query,this._limit,this._limitType))}}function TA(t){return Rq("limit",t),c4._create("limit",t,"F")}function I3(t,e,r){if(typeof(r=ba(r))=="string"){if(r==="")throw new qt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NU(e)&&r.indexOf("/")!==-1)throw new qt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(la.fromString(r));if(!Ar.isDocumentKey(n))throw new qt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Kk(t,new Ar(n))}if(r instanceof za)return Kk(t,r._key);throw new qt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lw(r)}.`)}function F3(t,e){if(!Array.isArray(t)||t.length===0)throw new qt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I8(t,e){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new qt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class NW{convertValue(e,r="none"){switch(ff(e)){case 0:return null;case 1:return e.booleanValue;case 2:return as(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(df(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Sr(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Ef(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var n,a,s;const r=(s=(a=(n=e.fields)==null?void 0:n[X2].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>as(i.doubleValue));return new ku(r)}convertGeoPoint(e){return new Nu(as(e.latitude),as(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Aw(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(tx(e));default:return null}}convertTimestamp(e){const r=Af(e);return new cr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=la.fromString(e);Pn(YU(n),9688,{name:e});const a=new rx(n.get(1),n.get(3)),s=new Ar(n.popFirst(5));return a.isEqual(r)||RA(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Ag{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dh extends N8{constructor(e,r,n,a,s,i){super(e,r,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new E2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Sw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=dh._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}dh._jsonSchemaVersion="firestore/documentSnapshot/1.0",dh._jsonSchema={type:Ss("string",dh._jsonSchemaVersion),bundleSource:Ss("string","DocumentSnapshot"),bundleName:Ss("string"),bundle:Ss("string")};class E2 extends dh{data(e={}){return super.data(e)}}class fh{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Ag(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new E2(this._firestore,this._userDataWriter,n.key,n,new Ag(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new qt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const l=new E2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Ag(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new E2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Ag(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:kW(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=BS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Sr(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){t=no(t,za);const e=no(t.firestore,Ru);return xW(zx(e),t._key).then(r=>F8(e,t,r))}fh._jsonSchemaVersion="firestore/querySnapshot/1.0",fh._jsonSchema={type:Ss("string",fh._jsonSchemaVersion),bundleSource:Ss("string","QuerySnapshot"),bundleName:Ss("string"),bundle:Ss("string")};class A4 extends NW{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ol(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new za(this.firestore,null,r)}}function cs(t){t=no(t,HA);const e=no(t.firestore,Ru),r=zx(e),n=new A4(e);return k8(t._query),vW(r,t._query).then(a=>new fh(e,n,t,a))}function $i(t,e,r){t=no(t,za);const n=no(t.firestore,Ru),a=u4(t.converter,e,r);return Wx(n,[t4(qx(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ao.none())])}function $x(t,e,r,...n){t=no(t,za);const a=no(t.firestore,Ru),s=qx(a);let i;return i=typeof(e=ba(e))=="string"||e instanceof Gx?_8(s,"updateDoc",t._key,e,r,n):E8(s,"updateDoc",t._key,e),Wx(a,[i.toMutation(t._key,ao.exists(!0))])}function mi(t){return Wx(no(t.firestore,Ru),[new gw(t._key,ao.none())])}function Ca(t,e){const r=no(t.firestore,Ru),n=yr(t),a=u4(t.converter,e);return Wx(r,[t4(qx(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ao.exists(!1))]).then(()=>n)}function Tr(t,...e){var l,u,d;t=ba(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||k3(e[n])||(r=e[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(k3(e[n])){const h=e[n];e[n]=(l=h.next)==null?void 0:l.bind(h),e[n+1]=(u=h.error)==null?void 0:u.bind(h),e[n+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,i,o;if(t instanceof za)i=no(t.firestore,Ru),o=dw(t._key.path),s={next:h=>{e[n]&&e[n](F8(i,t,h))},error:e[n+1],complete:e[n+2]};else{const h=no(t,HA);i=no(h.firestore,Ru),o=h._query;const m=new A4(i);s={next:g=>{e[n]&&e[n](new fh(i,m,h,g))},error:e[n+1],complete:e[n+2]},k8(t._query)}return function(m,g,b,y){const E=new e4(y),B=new YS(g,E,b);return m.asyncQueue.enqueueAndForget(async()=>$S(await sy(m),B)),()=>{E.Nu(),m.asyncQueue.enqueueAndForget(async()=>WS(await sy(m),B))}}(zx(i),o,a,s)}function Wx(t,e){return function(n,a){const s=new SA;return n.asyncQueue.enqueueAndForget(async()=>iW(await gW(n),a,s)),s.promise}(zx(t),e)}function F8(t,e,r){const n=r.docs.get(e._key),a=new A4(t);return new dh(t,a,e._key,n,new Ag(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=qx(e)}set(e,r,n){this._verifyNotCommitted();const a=GC(e,this._firestore),s=u4(a.converter,r,n),i=t4(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,ao.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=GC(e,this._firestore);let i;return i=typeof(r=ba(r))=="string"||r instanceof Gx?_8(this._dataReader,"WriteBatch.update",s._key,r,n,a):E8(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,ao.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=GC(e,this._firestore);return this._mutations=this._mutations.concat(new gw(r._key,ao.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function GC(t,e){if((t=ba(t)).firestore!==e)throw new qt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function FW(...t){return new r4("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){return zx(t=no(t,Ru)),new IW(t,e=>Wx(t,e))}(function(e,r=!0){(function(a){zm=a})(Hm),Ch(new cf("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Ru(new _q(n.getProvider("auth-internal")),new Bq(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new qt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rx(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Eu(Rk,Lk,e),Eu(Rk,Lk,"esm2020")})();const DW={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},D8=gS(DW),Xx=rU(D8),Kr=w8(D8),RW=Object.freeze(Object.defineProperty({__proto__:null,auth:Xx,db:Kr},Symbol.toStringTag,{value:"Module"})),LW=async(t,e)=>{try{return(await sG(Xx,t,e)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},qC=async()=>{try{await cG(Xx)}catch(t){throw console.error("Error en logoutUser helper:",t),t}},UW=async t=>{try{await aG(Xx,t)}catch(e){throw console.error("Error en resetPassword helper:",e),e}},MW=async t=>{try{const e=yr(Kr,"usuarios",t),r=await Kx(e);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontr perfil en Firestore para: ${t}`),null)}catch(e){throw console.error("Error en getUserProfile helper:",e),e}};var Vt=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(Vt||{}),Xr=(t=>(t.EVALUACION="Evaluacin",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedaggica",t))(Xr||{}),nh=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Gua de Aprendizaje",t.RUBRICA="Rbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(nh||{});const Ts="w-6 h-6",Bw="w-24 h-24",f4=()=>c.jsxs("svg",{className:"w-32 h-32 text-slate-700 dark:text-slate-300",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M9 14V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M12 14V8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),PW=()=>c.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 18h6"}),c.jsx("path",{d:"M10 22h4"}),c.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),jW=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),OW=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),dg=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),fg=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),R8=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),QW=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Bw,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),HW=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Bw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),VW=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Bw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),zW=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Bw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),GW=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),D3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),pv=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),KC=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),gv=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),$C=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),R3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),qW=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),KW=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),$W=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),WW=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),L3=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),XW=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),WC=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),YW=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ts,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),JW=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ts,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),U3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ts,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),ZW=[{id:Vt.SUBDIRECCION,label:"Subdireccin Pedaggica",icon:c.jsx(QW,{})},{id:Vt.PROFESORADO,label:"Profesorado",icon:c.jsx(HW,{})},{id:Vt.COORDINACION_TP,label:"Coordinacin TP",icon:c.jsx(VW,{})},{id:Vt.ESTUDIANTE,label:"Estudiantes",icon:c.jsx(zW,{})}],eX={[Vt.SUBDIRECCION]:[{name:"Dashboard",icon:c.jsx(GW,{})},{name:"Administracin",icon:c.jsx(WW,{})},{name:"Seguimiento Curricular",icon:c.jsx(JW,{})},{name:"Acompaamiento docente",icon:c.jsx($W,{})},{name:"Anlisis Taxonmico",icon:c.jsx(U3,{})},{name:"Interdisciplinario",icon:c.jsx(WC,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:c.jsx(D3,{})},{name:"Crear horarios",icon:c.jsx(KC,{})},{name:"Seguimiento de acciones pedaggicas",icon:c.jsx(gv,{})},{name:"Inclusin",icon:c.jsx(L3,{})},{name:"Calendario Acadmico",icon:c.jsx(pv,{})},{name:"Muro de Anuncios",icon:c.jsx(dg,{})},{name:"Mensajera Interna",icon:c.jsx(fg,{})},{name:"Generador de Actas",icon:c.jsx($C,{})}],[Vt.PROFESORADO]:[{name:"Planificacin",icon:c.jsx(R3,{})},{name:"Mis Acompaamientos",icon:c.jsx(XW,{})},{name:"Recursos de Aprendizaje",icon:c.jsx(qW,{})},{name:"Anlisis Taxonmico",icon:c.jsx(U3,{})},{name:"Interdisciplinario",icon:c.jsx(WC,{})},{name:"Inclusin",icon:c.jsx(L3,{})},{name:"Actividades Remotas",icon:c.jsx(KW,{})},{name:"Evaluacin de Aprendizajes",icon:c.jsx($C,{})},{name:"Evaluaciones Formativas",icon:c.jsx(gv,{})},{name:"Calendario Acadmico",icon:c.jsx(pv,{})},{name:"Muro de Anuncios",icon:c.jsx(dg,{})},{name:"Mensajera Interna",icon:c.jsx(fg,{})},{name:"Generador de Actas",icon:c.jsx(D3,{})}],[Vt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:c.jsx(gv,{})},{name:"Asistencia Dual",icon:c.jsx(KC,{})},{name:"Paol",icon:c.jsx(YW,{})},{name:"Calendario Acadmico",icon:c.jsx(pv,{})},{name:"Muro de Anuncios",icon:c.jsx(dg,{})},{name:"Mensajera Interna",icon:c.jsx(fg,{})},{name:"Generador de Actas",icon:c.jsx($C,{})}],[Vt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:c.jsx(R3,{})},{name:"Evaluacin Formativa",icon:c.jsx(gv,{})},{name:"Tareas Interdisciplinarias",icon:c.jsx(WC,{})},{name:"Asistencia a Empresa",icon:c.jsx(KC,{})},{name:"Calendario Acadmico",icon:c.jsx(pv,{})},{name:"Muro de Anuncios",icon:c.jsx(dg,{})},{name:"Mensajera Interna",icon:c.jsx(fg,{})}]},M3=["Currculum y Evaluacin","Convivencia Escolar","Orientacin","Gestin Pedaggica General"],Gp=["Pendiente","En Proceso","Cumplida"],oy=["1 Medio","2 Medio","3 Medio","4 Medio"],sl=["Lengua y Literatura","Matemtica","Ingls","Filosofa","Historia y Geografa","Educacin Ciudadana","Ciencias","Ciencias para la Ciudadana","Artes","Msica","Educacin Fsica","Orientacin","Mecnica Industrial","Mecnica Automotriz","Emprendimiento","Tecnologa","Pensamiento Lgico","Competencia Lectora"],ls=["1A","1B","1C","1D","1E","2A","2B","2C","2D","3A","3B","3C","3D","4A","4B","4C","4D"],P_=["Juan Prez","Mara Gonzlez","Carlos Soto","Ana Fernndez","Luis Rojas","Laura Muoz","Pedro Castillo","Sofa Reyes","Diego Flores","Valentina Castro"],_2=["Lunes","Martes","Mircoles","Jueves","Viernes"],j_=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],tX={"1 y 2 medio":{"Lengua y Literatura":6,Matemtica:6,Ingls:3,"Historia y Geografa":4,"Educacin Fsica":2,Ciencias:4,"Artes/Msica":2,Tecnologa:2,Orientacin:1},"3 y 4 medio (Humanista-Cientfico)":{"Lengua y Literatura":4,Matemtica:4,Ingls:2,"Historia y Geografa":3,"Educacin Ciudadana":2,Filosofa:3,"Ciencias para la Ciudadana":2,"Educacin Fsica":2},"3 y 4 medio (Tcnico-Profesional)":{"Lengua y Literatura":2,Matemtica:2,Ingls:2,"Historia y Geografa":2,Filosofa:2,"Educacin Fsica":2,"Mdulo TP":18}},Hd={[Xr.EVALUACION]:{label:"Evaluacin",icon:"",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[Xr.ACTO]:{label:"Acto",icon:"",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[Xr.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[Xr.SALIDA_PEDAGOGICA]:{label:"Salida Pedaggica",icon:"",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},rX=Object.values(nh),XC=["Humanidades","TP","Ciencias","Interdisciplinario","Gestin Pedaggica","Equipo Directivo","Equipo de Gestin","Consejo Escolar"],YC=["Vinculado","Desvinculado","En proceso","Empresa"],hh=["3A","3B","3C","3D","4A","4B","4C","4D"],nX=["Quiz","Comprensin de Lectura","Trminos Pareados","Desarrollo"],ly=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limtrofe","Trastorno Dficit Atencional (TDA)","Trastorno Dficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Especfica del Aprendizaje","Dificultad Especfica de Aprendizaje en Matemticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarizacin"],Dg=[{domain:"Dominio A: Preparacin de la Enseanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que ensea, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que ensea, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemolgicas o metodolgicas en su rea.","Conoce y comprende los principios y conceptos centrales de las disciplinas que ensea, atendiendo a la permanente actualizacin curricular en su rea.","Conoce, comprende y cuestiona los principios centrales de la disciplina que ensea a la luz de nuevos paradigmas epistemolgicos o tericos, permitiendo que el trabajo o la exposicin conceptual invite al desarrollo del pensamiento crtico o la investigacin continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificacin o gestin de la clase estndar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relacin al contexto y caractersticas del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Seleccin de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las caractersticas de sus estudiantes y a la relacin con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didcticos de aprendizaje, siendo congruentes al contenido pero no a las caractersticas de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejndose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didcticos de aprendizaje congruentes con la complejidad de los contenidos y las caractersticas de sus alumnos.","Conoce y selecciona distintos recursos didcticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisicin de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluacin",levels:["Establece estrategias de evaluacin incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo adems, las metodologas empleadas previamente en clases.","Establece estrategias de evaluacin coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexin, y, la retroalimentacin descriptiva."]},{name:"Estrategias de enseanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes disean e implementan estrategias de enseanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes disean e implementan estrategias efectivas de enseanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes disean e implementan estrategias avanzadas de enseanza-aprendizaje tales como (ABP, ABD, Gamificacin, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creacin de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empata",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vnculos fundados en el respeto y/o en la empata.","Establece un clima de relaciones interpersonales respetuosas y empticas con la mayora de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos, generando situaciones concretas de cooperacin y ayuda mutua entre l/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Inters por las especialidades",levels:["No transmite inters por las especialidades, centrndose exclusivamente en su rea de desempeo.","Transmite inters general por las especialidades, no obstante no es capaz de acercarse a las caractersticas concretas de los mdulos.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha rea de desempeo."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implcitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estndar que implican un desarrollo mecnico y que no tienden hacia la consolidacin de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus caractersticas personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivacin por el aprendizaje",levels:["No transmite motivacin por el aprendizaje, la bsqueda o la indagacin.","Transmite una motivacin positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autnoma","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda.","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemtico en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participacin."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentacin de objetivos",levels:["Al iniciar las clases no presenta el objetivo o slo lo enuncia sin profundizar en l.","Al iniciar las clases presenta el objetivo de aprendizaje y el propsito, pero no logra dar cuenta de la relacin con el futuro laboral de los estudiantes o con otras reas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionndolo con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a travs de la relacin con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro."]},{name:"Clase en funcin de objetivos",levels:["No realiza su clase en funcin de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currculum nacional","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando slo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional y en el PEI."]},{name:"Introduccin de nueva informacin",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva informacin, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisin conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolacin que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentacin",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes slo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal, a travs de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensin y desempeo de sus estudiantes.","Monitorea parcialmente el grado de comprensin y desempeo de sus estudiantes, no siempre a travs de evidencia.","Monitorea constantemente el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo."]},{name:"Orientacin a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales, no obstante, la orientacin es superficial y no predispone la construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores en consonancia a elementos propios del PEI."]},{name:"Conclusin de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicacin que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora adems preguntas de metacognicin y/o autoevaluacin."]},{name:"Abordaje de errores",levels:["No aborda los errores, nicamente los seala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a travs de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogneo, descuidando la diversidad y las caractersticas particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias segn nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],L8=["Lder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],xv=[{nombre:"Aprendiz Emergente",emoji:"",promedioMin:1,promedioMax:3.9,mensaje:"Ests comenzando tu viaje de aprendizaje! Sigue esforzndote."},{nombre:"Explorador del Conocimiento",emoji:"",promedioMin:4,promedioMax:4.9,mensaje:"Buen trabajo! Ests construyendo una base slida."},{nombre:"Arquitecto de Ideas",emoji:"",promedioMin:5,promedioMax:5.9,mensaje:"Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"",promedioMin:6,promedioMax:6.5,mensaje:"Impresionante! Tu dedicacin te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"",promedioMin:6.6,promedioMax:7,mensaje:"Extraordinario! Eres una inspiracin para tus compaeros."}],aX=({onLoginAttempt:t,onForgotPasswordRequest:e,error:r})=>{const[n,a]=ee.useState(""),[s,i]=ee.useState(""),[o,l]=ee.useState("login"),u=m=>{m.preventDefault(),t(n,s)},d=m=>{m.preventDefault(),e(n),l("forgot_sent")},h=()=>o==="forgot"?c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico Registrado"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>a(m.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperacin"})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesin"})})]}):o==="forgot_sent"?c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),c.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",c.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contrasea."]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulacin, revise la consola del navegador para ver el enlace)."}),c.jsx("button",{type:"button",onClick:()=>{l("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:" Volver a Iniciar Sesin"})]}):c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>a(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contrasea"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:m=>i(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:c.jsx("p",{children:r})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Olvid su contrasea?"})}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(f4,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesin":"Recuperacin de Contrasea"})]}),c.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},JC=({trigger:t,children:e,onOpen:r})=>{const[n,a]=ee.useState(!1),s=ee.useRef(null),i=()=>{const l=!n;a(l),l&&r&&r()},o=l=>{s.current&&!s.current.contains(l.target)&&a(!1)};return ee.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),c.jsxs("div",{className:"relative",ref:s,children:[c.jsx("div",{onClick:i,children:t}),n&&c.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:e})]})},P3="usuariosLiceo",sX=({user:t,onClose:e,onSave:r})=>{const[n,a]=ee.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...n};try{const u=localStorage.getItem(P3);let d=u?JSON.parse(u):[];const h=d.findIndex(m=>m.id===t.id);h>-1?d[h]=l:d.push(l),localStorage.setItem(P3,JSON.stringify(d)),r(l),e()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:c.jsxs("form",{onSubmit:i,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),c.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrnico"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Funcin"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},j3="usuariosLiceo",iX=({user:t,onClose:e,onSave:r})=>{const[n,a]=ee.useState(""),[s,i]=ee.useState(""),[o,l]=ee.useState(null),u=d=>{if(d.preventDefault(),l(null),!n){l("La contrasea no puede estar en blanco.");return}if(n!==s){l("Las contraseas no coinciden.");return}const h={...t,password:n};try{const m=localStorage.getItem(j3);let g=m?JSON.parse(m):[];const b=g.findIndex(y=>y.id===t.id);b>-1?g[b]=h:g.push(h),localStorage.setItem(j3,JSON.stringify(g)),r(h),e()}catch(m){console.error("Failed to save new password:",m),l("No se pudo guardar la nueva contrasea.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:c.jsxs("form",{onSubmit:u,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuracin de Cuenta"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contrasea"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contrasea"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:c.jsx("p",{children:o})})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contrasea"})]})]})})})},O3="anunciosMuro",Q3="mensajesInternos",H3="lir-read-status",oX=({user:t})=>{if(t.fotoUrl)return c.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",r=String(e).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return c.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},lX=({currentUser:t,onLogout:e,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[u,d]=ee.useState([]),[h,m]=ee.useState([]),[g,b]=ee.useState(!1),[y,E]=ee.useState(!1),B=ee.useCallback(()=>{try{const P=localStorage.getItem(`${H3}-${t.id}`);return P?JSON.parse(P):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),k=ee.useCallback(P=>{try{localStorage.setItem(`${H3}-${t.id}`,JSON.stringify(P))}catch(R){console.error("Failed to set read status:",R)}},[t.id]);ee.useEffect(()=>{const P=JSON.parse(localStorage.getItem(O3)||"[]"),R=B();d(P.filter(S=>!R.announcements.includes(S.id)));const C=JSON.parse(localStorage.getItem(Q3)||"[]");m(C.filter(S=>S.para===t.email).sort((S,N)=>new Date(N.fecha).getTime()-new Date(S.fecha).getTime()).slice(0,5))},[t.id,B,o]);const L=()=>{const P=B(),R=JSON.parse(localStorage.getItem(O3)||"[]").map(C=>C.id);P.announcements=R,k(P),d([])},M=()=>{const P=B(),C=JSON.parse(localStorage.getItem(Q3)||"[]").filter(S=>S.para===t.email).map(S=>S.id);P.messages=[...new Set([...P.messages,...C])],k(P),l()};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:c.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:c.jsx(jW,{})}),c.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[c.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),c.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestin LIR"})]})]}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{onClick:()=>r("Calendario Acadmico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Acadmico",children:c.jsx(OW,{})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(JC,{onOpen:L,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[c.jsx(dg,{}),u.length>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),c.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(P=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsx("p",{className:"font-bold dark:text-slate-200",children:P.titulo}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:P.mensaje})]},P.id)),u.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),c.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),c.jsx(JC,{onOpen:M,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[c.jsx(fg,{}),o>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),c.jsxs("ul",{className:"mt-1",children:[h.slice(0,3).map(P=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",P.de]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:P.asunto})]},P.id)),h.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),c.jsx("button",{onClick:()=>r("Mensajera Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),c.jsx(JC,{trigger:c.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(oX,{user:t})}),children:c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),c.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[c.jsx("li",{children:c.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>E(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuracin"})}),s&&c.jsx("li",{children:c.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:" Cambiar Vista"})}),c.jsx("li",{children:c.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesin"})})]})]})})]})]})}),g&&c.jsx(sX,{user:t,onClose:()=>b(!1),onSave:n}),y&&c.jsx(iX,{user:t,onClose:()=>E(!1),onSave:n})]})};var Yf={};const cX={apiKey:Yf.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:Yf.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:Yf.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:Yf.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:Yf.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:Yf.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:Yf.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},U8=uk().length===0?gS(cX):uk()[0],Tt=w8(U8);rU(U8);const Yx="reemplazos_docentes",uX="usuarios",h4=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaActualizacion:((s=(a=e.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||e.fechaActualizacion}},AX=t=>{const e=t.data();return{id:t.id,...e}},dX=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:cr.fromDate(new Date),fechaActualizacion:cr.fromDate(new Date)};return(await Ca(Ft(Tt,Yx),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},fX=async(t,e)=>{try{const r=yr(Tt,Yx,t),n=await Kx(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar este reemplazo");await mi(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},hX=(t,e,r=50)=>{try{const n=er(Ft(Tt,Yx),Fn("userId","==",t),gn("diaAusencia","desc"),TA(r));return Tr(n,a=>{const s=a.docs.map(h4);e(s)},a=>{console.error("Error en suscripcin a reemplazos:",a),e([])})}catch(n){return console.error("Error al crear la suscripcin de reemplazos:",n),()=>{}}},mX=t=>{try{const e=er(Ft(Tt,uX),Fn("profile","==",Vt.PROFESORADO));return Tr(e,n=>{const a=n.docs.map(AX);t(a)},n=>{console.error("Error al obtener la lista de profesores:",n),t([])})}catch(e){return console.error("Error al crear la suscripcin de profesores:",e),()=>{}}},pX=async t=>{try{const e=er(Ft(Tt,Yx),Fn("userId","==",t)),n=(await cs(e)).docs.map(h4),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(e){throw console.error("Error al obtener estadsticas:",e),new Error("No se pudieron obtener las estadsticas")}},gX=async(t,e)=>{try{if(!e.trim())return[];const r=er(Ft(Tt,Yx),Fn("userId","==",t),gn("diaAusencia","desc"),TA(100)),a=(await cs(r)).docs.map(h4),s=e.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en bsqueda de reemplazos:",r),[]}},xX=Array.from({length:12},(t,e)=>e+1),V3={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},vX=t=>{const[e,r]=ee.useState([]),[n,a]=ee.useState(!0),[s,i]=ee.useState(null);ee.useEffect(()=>t?hX(t,h=>{r(h),a(!1)}):void 0,[t]);const o=ee.useCallback(async d=>{try{return i(null),await dX(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=ee.useCallback(async d=>{try{i(null),await fX(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]),u=ee.useCallback(async d=>{try{return i(null),d.trim()?await gX(t,d):e}catch(h){return i(h instanceof Error?h.message:"Error en la bsqueda"),[]}},[t,e]);return{reemplazos:e,loading:n,error:s,save:o,remove:l,search:u}},yX=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!0);ee.useEffect(()=>mX(i=>{e(i),n(!1)}),[]);const a=ee.useMemo(()=>t.map(s=>s.nombreCompleto).sort(),[t]);return{profesores:t,profesorNames:a,loading:r}},wX=({selectedBlocks:t,onChange:e,legend:r,disabled:n=!1})=>c.jsxs("fieldset",{children:[c.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r}),c.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:xX.map(a=>c.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${n?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[c.jsx("input",{type:"checkbox",value:a,checked:t.includes(a),onChange:e,disabled:n,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),c.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:a})]},a))})]}),bX=({userId:t})=>{const[e,r]=ee.useState(null),[n,a]=ee.useState(!1),s=ee.useCallback(async()=>{try{a(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),u=await pX(t);r(u)}catch(i){console.error("Error al cargar estadsticas:",i)}finally{a(!1)}},[t]);return ee.useEffect(()=>{t&&s()},[t,s]),n?c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("div",{className:"animate-pulse flex justify-center",children:c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):e?c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadsticas del Mes"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.totalReemplazos}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.horasRealizadas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.horasCubiertas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.porcentajeRealizadas.toFixed(1),"%"]}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},CX=({currentUser:t})=>{const e=t.email||t.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=vX(e),{profesorNames:l,loading:u}=yX(),[d,h]=ee.useState(V3),[m,g]=ee.useState(""),[b,y]=ee.useState([]),[E,B]=ee.useState(null),[k,L]=ee.useState(!1),[M,P]=ee.useState(!1);ee.useEffect(()=>{(async()=>{if(!m.trim()){y(r);return}P(!0);try{const I=await s(m);y(I)}catch(I){console.error("Error en bsqueda:",I),y(r)}finally{P(!1)}})()},[r,m,s]);const R=ee.useCallback(D=>{const{name:I,value:O}=D.target;h(z=>({...z,[I]:O}))},[]),C=ee.useCallback(D=>{const I=parseInt(D.target.value,10);h(O=>{const z=O.bloquesAfectados,re=z.includes(I)?z.filter(Y=>Y!==I):[...z,I].sort((Y,ae)=>Y-ae);return{...O,bloquesAfectados:re}})},[]),S=ee.useCallback(async D=>{D.preventDefault(),B(null),L(!0);const{docenteAusente:I,asignaturaAusente:O,curso:z,diaAusencia:re,bloquesAfectados:Y,docenteReemplazante:ae,asignaturaReemplazante:K}=d;if(!I||!O||!z||!re||!ae||!K||Y.length===0){B("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),L(!1);return}if(I===ae){B("El docente ausente y el reemplazante no pueden ser la misma persona."),L(!1);return}const G=new Date(re),W=new Date;if(W.setHours(0,0,0,0),G<W&&!window.confirm("La fecha seleccionada es anterior a hoy. Desea continuar?")){L(!1);return}try{const ie=O.trim().toLowerCase()===K.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",j={...d,resultado:ie};await n(j),h(V3);const X=ie==="Hora realizada"?" Reemplazo registrado - Hora realizada":" Reemplazo registrado - Hora cubierta, no realizada",Z=document.createElement("div");Z.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",Z.textContent=X,document.body.appendChild(Z),setTimeout(()=>{document.body.contains(Z)&&document.body.removeChild(Z)},3e3)}catch(ie){console.error("Error al guardar reemplazo:",ie),B("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{L(!1)}},[d,n]),N=ee.useCallback(async D=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await a(D)}catch(I){console.error("Error al eliminar reemplazo:",I),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[a]),Q="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx(bX,{userId:e}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),u?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:R,className:Q,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:R,className:Q,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),sl.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:d.curso,onChange:R,className:Q,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),ls.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Da Ausencia"}),c.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:R,className:Q,disabled:k,required:!0})]}),c.jsx(wX,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:C,disabled:k})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:R,className:Q,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:R,className:Q,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),sl.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&c.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),c.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?" Hora realizada":" Hora cubierta, no realizada"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(E||o)&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:E||o})}),c.jsx("div",{className:"pt-4 text-right",children:c.jsxs("button",{type:"submit",disabled:k||u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[k&&c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),k?"Registrando...":"Registrar Reemplazo"]})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:m,onChange:D=>g(D.target.value),className:`${Q} md:w-1/2 pl-10`,disabled:M}),c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:M?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),m&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:M?"Buscando...":`${b.length} resultado(s) encontrado(s)`})]}),i?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:b.length>0?b.map(D=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(D.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:D.curso}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[D.docenteAusente,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:D.asignaturaAusente})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[D.docenteReemplazante,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:D.asignaturaReemplazante})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:D.bloquesAfectados.join(", ")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${D.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:D.resultado})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>N(D.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:k,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},D.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:m?"No se encontraron registros que coincidan con la bsqueda.":"No hay registros de reemplazos."})})})]})}),b.length>0&&!m&&c.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los ltimos ",b.length," registros"]})]})]})},EX=t=>{console.log(" Iniciando suscripcin a todos los reemplazos...");try{const e=Ft(Kr,"reemplazos"),r=er(e,gn("fecha","desc"));return Tr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Reemplazos cargados para dashboard:",s.length),t(s)},a=>{throw console.error(" Error al cargar reemplazos:",a),a})}catch(e){throw console.error(" Error al configurar suscripcin a reemplazos:",e),e}},_X=t=>{console.log(" Iniciando suscripcin a todos los acompaamientos...");try{const e=Ft(Kr,"acompanamientos"),r=er(e,gn("fecha","desc"));return Tr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Acompaamientos cargados para dashboard:",s.length),t(s)},a=>{throw console.error(" Error al cargar acompaamientos:",a),a})}catch(e){throw console.error(" Error al configurar suscripcin a acompaamientos:",e),e}},SX=t=>{console.log(" Iniciando suscripcin a todos los eventos del calendario...");try{const e=Ft(Kr,"calendar_events"),r=er(e,gn("date","asc"));return Tr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Eventos del calendario cargados para dashboard:",s.length),t(s)},a=>{throw console.error(" Error al cargar eventos del calendario:",a),a})}catch(e){throw console.error(" Error al configurar suscripcin a eventos del calendario:",e),e}},hu=({title:t,value:e,description:r,isLoading:n=!1})=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),n?c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Jf=({title:t,data:e,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=ee.useMemo(()=>e.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[e]),i=ee.useMemo(()=>Math.max(...s,1),[s]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):c.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+l)}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},TX=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState([]),[a,s]=ee.useState([]),[i,o]=ee.useState(!0),[l,u]=ee.useState(null);return ee.useEffect(()=>{console.log(" Iniciando carga de datos del dashboard...");let d=0;const h=3,m=()=>{d++,d>=h&&(o(!1),console.log(" Todos los datos del dashboard cargados"))};try{const g=EX(E=>{e(E),m()}),b=_X(E=>{n(E),m()}),y=SX(E=>{s(E),m()});return()=>{g(),b(),y()}}catch(g){console.error(" Error al configurar suscripciones del dashboard:",g),u(g instanceof Error?g.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:t,acompanamientos:r,calendarEvents:a,loading:i,error:l}},BX=({currentUser:t})=>{var h,m;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log(" Dashboard - currentUser completo:",t),console.log(" Dashboard - currentUser.profile:",t==null?void 0:t.profile),console.log(" Dashboard - Verificacin de perfil:",(t==null?void 0:t.profile)==="SUBDIRECCION"),console.log(" Dashboard - Typeof profile:",typeof(t==null?void 0:t.profile)),console.log(" Dashboard - Profile length:",(h=t==null?void 0:t.profile)==null?void 0:h.length),console.log(" Dashboard - Profile con comillas:",`"${t==null?void 0:t.profile}"`),console.log(" Dashboard - Comparacin con trim:",((m=t==null?void 0:t.profile)==null?void 0:m.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:e,acompanamientos:r,calendarEvents:n,loading:a,error:s}=TX(),[i,o]=ee.useState(Dg);if(console.log(" Dashboard - Datos recibidos:",{registros:e.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:t==null?void 0:t.profile}),ee.useEffect(()=>{try{const g=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(g?JSON.parse(g):Dg)}catch(g){console.error("Error al leer rbrica personalizada",g),o(Dg)}},[]),console.log(" Dashboard - Verificando permisos..."),console.log(" Dashboard - currentUser existe:",!!t),console.log(" Dashboard - profile value:",`"${t==null?void 0:t.profile}"`),console.log(" Dashboard - comparacin exacta:",(t==null?void 0:t.profile)==="SUBDIRECCION"),!t)return console.log(" Dashboard - currentUser es null/undefined"),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(t.profile!=="SUBDIRECCION")return console.log(" Dashboard - Perfil no autorizado:",t.profile),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard est disponible solo para usuarios con perfil de Subdireccin."}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[c.jsx("p",{children:c.jsx("strong",{children:"Debug Info:"})}),c.jsxs("p",{children:['Su perfil actual: "',t.profile,'"']}),c.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),c.jsxs("p",{children:["Usuario: ",t.email||t.nombreCompleto]})]})]});if(console.log(" Dashboard - Permisos verificados correctamente"),s)return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),c.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Pgina"})]});const l=ee.useMemo(()=>{const g=e.length;if(g===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const b=e.filter(P=>P.resultado==="Hora realizada").length,y=g-b,E=`${(b/g*100).toFixed(1)}%`,B=(P,R)=>P.reduce((C,S)=>{const N=S[R];return typeof N=="string"&&(C[N]=(C[N]||0)+1),C},{}),k=B(e,"docenteAusente"),L=B(e,"docenteReemplazante"),M=B(e,"curso");return{totalInasistencias:g,horasRealizadas:b,horasCubiertas:y,tasaCobertura:E,inasistenciasPorDocente:Object.entries(k).map(([P,R])=>({label:P,value:R})),reemplazosPorDocente:Object.entries(L).map(([P,R])=>({label:P,value:R})),inasistenciasPorCurso:Object.entries(M).map(([P,R])=>({label:P,value:R})),distribucionResultados:[{label:"Hora Realizada",value:b},{label:"Hora Cubierta",value:y}]}},[e]),u=ee.useMemo(()=>{const g=r.length;if(g===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const b=new Map;i.forEach(R=>{R.criteria.forEach(C=>{b.set(C.name,R.domain)})});let y=0,E=0;const B={},k={};r.forEach(R=>{B[R.docente]||(B[R.docente]={total:0,count:0}),Object.entries(R.rubricaResultados).forEach(([C,S])=>{y+=S,E++,B[R.docente].total+=S,B[R.docente].count++;const N=b.get(C);N&&(k[N]||(k[N]={total:0,count:0}),k[N].total+=S,k[N].count++)})});const L=E>0?(y/E).toFixed(2):"N/A",M=Object.entries(B).map(([R,C])=>({label:R,value:C.count>0?(C.total/C.count).toFixed(2):0})),P=Object.entries(k).map(([R,C])=>({label:R,value:C.count>0?(C.total/C.count).toFixed(2):0}));return{totalAcompanamientos:g,promedioGeneral:L,desempenoPorDocente:M,desempenoPorDominio:P}},[r,i]),d=ee.useMemo(()=>{const g={[Xr.EVALUACION]:0,[Xr.ACTO]:0,[Xr.ACTIVIDAD_FOCALIZADA]:0,[Xr.SALIDA_PEDAGOGICA]:0};for(const y of n)g.hasOwnProperty(y.type)&&g[y.type]++;const b=Object.entries(g).map(([y,E])=>({label:Hd[y].label,value:E}));return{totalEvaluaciones:g[Xr.EVALUACION],totalActos:g[Xr.ACTO],totalActividadesFocalizadas:g[Xr.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:g[Xr.SALIDA_PEDAGOGICA],distribucionEventos:b}},[n]);return a?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdireccin"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"An no hay datos para mostrar. Comience por aadir registros en los mdulos correspondientes."}),c.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[c.jsx("p",{children:" Mdulo de Inasistencias y Reemplazos"}),c.jsx("p",{children:" Mdulo de Acompaamiento Docente"}),c.jsx("p",{children:" Calendario Acadmico"})]})]}):c.jsxs("div",{className:"space-y-12 animate-fade-in",children:[c.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdireccin"}),c.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),c.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["ltima actualizacin: ",new Date().toLocaleString("es-CL")]})]}),e.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Inasistencias y Reemplazos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(hu,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:a}),c.jsx(hu,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),c.jsx(hu,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),c.jsx(hu,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Jf,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),c.jsx(Jf,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),c.jsx(Jf,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),c.jsx(Jf,{title:"Distribucin de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Acompaamiento Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(hu,{title:"Total Acompaamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),c.jsx(hu,{title:"Promedio General",value:u.promedioGeneral,description:"Calificacin promedio (1-4)",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Jf,{title:"Desempeo Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:a}),c.jsx(Jf,{title:"Desempeo Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:a})]})]}),n.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Resumen del Calendario Acadmico"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(hu,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),c.jsx(hu,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),c.jsx(hu,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),c.jsx(hu,{title:"Salidas Pedaggicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Jf,{title:"Distribucin de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Prximos Eventos"}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(g=>new Date(g.date)>=new Date).slice(0,5).map((g,b)=>{var y,E;return c.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:g.responsables||"Evento sin ttulo"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(g.date).toLocaleDateString("es-CL")}),g.ubicacion&&c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:[" ",g.ubicacion]})]}),c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((y=Hd[g.type])==null?void 0:y.color)||"bg-gray-100 text-gray-800"}`,children:((E=Hd[g.type])==null?void 0:E.label)||g.type})]})},g.id||b)}),n.filter(g=>new Date(g.date)>=new Date).length===0&&c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos prximos programados"})]})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:" Resumen Ejecutivo"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:e.length+r.length+n.length}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...e.map(g=>g.docenteAusente),...r.map(g=>g.docente)]).size}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(e.filter(g=>g.resultado==="Hora realizada").length/Math.max(e.length,1)*100),"%"]}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),c.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("p",{children:"Dashboard de Subdireccin - Sistema de Gestin Pedaggica"}),c.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},m4="horario_asignaciones",M8="horarios_generados",NX="usuarios",P8=t=>{const e=t.data();return{id:t.id,...e}},kX=t=>{const e=er(Ft(Tt,m4));return Tr(e,n=>{const a=n.docs.map(s=>P8(s));t(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),t([])})},IX=async t=>{try{return(await Ca(Ft(Tt,m4),t)).id}catch(e){throw console.error("Error al agregar asignacin:",e),new Error("No se pudo agregar la asignacin.")}},FX=async t=>{try{const e=yr(Tt,m4,t);await mi(e)}catch(e){throw console.error("Error al eliminar asignacin:",e),new Error("No se pudo eliminar la asignacin.")}},z3=async t=>{try{const e=yr(Tt,M8,"global");await $i(e,{data:t})}catch(e){throw console.error("Error al guardar los horarios:",e),new Error("No se pudieron guardar los horarios generados.")}},DX=t=>{const e=yr(Tt,M8,"global");return Tr(e,n=>{n.exists()?t(n.data().data||{}):t({})},n=>{console.error("Error al suscribirse a los horarios:",n),t({})})},RX=t=>{const e=er(Ft(Tt,NX),Fn("profile","==",Vt.PROFESORADO));return Tr(e,n=>{const a=n.docs.map(s=>P8(s));t(a)},n=>{console.error("Error al suscribirse a los profesores:",n),t([])})},LX=({horarios:t})=>Object.keys(t).length===0?c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'An no se ha generado ningn horario. Utilice la pestaa de "Configuracin" para generar uno.'})}):c.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),ls.map(e=>c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),c.jsx("tbody",{children:_2.map(e=>c.jsxs(At.Fragment,{children:[c.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:c.jsx("th",{colSpan:2+ls.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),j_.map(({bloque:r,inicio:n,fin:a})=>c.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),ls.map(s=>{var o,l;const i=(l=(o=t[s])==null?void 0:o[e])==null?void 0:l[r];return c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?c.jsxs("div",{className:"flex flex-col justify-center h-full",children:[c.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),c.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):c.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${e}-${r}`)})]},`${e}-${r}`))]},e))})]})}),UX=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState({curso:"",asignatura:"",profesor:""}),[a,s]=ee.useState([]),[i,o]=ee.useState({}),[l,u]=ee.useState(ls[0]),[d,h]=ee.useState(!1),[m,g]=ee.useState(!0),[b,y]=ee.useState(null),[E,B]=ee.useState(null),[k,L]=ee.useState(null),[M,P]=ee.useState({asignatura:"",profesor:""}),[R,C]=ee.useState("edicion"),[S,N]=ee.useState("");ee.useEffect(()=>{g(!0);const K=kX(e),G=DX(o),W=RX(ie=>{const j=ie.map(X=>X.nombreCompleto).sort();s(j),g(!1)});return()=>{K(),G(),W()}},[]);const Q=async K=>{if(K.preventDefault(),y(null),!r.curso||!r.asignatura||!r.profesor){y("Todos los campos de la asignacin son obligatorios.");return}try{await IX({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(G){y(G instanceof Error?G.message:"Error al guardar la asignacin.")}},D=async K=>{try{await FX(K)}catch(G){y(G instanceof Error?G.message:"Error al eliminar la asignacin.")}},I=async()=>{if(t.length===0){y("Debe agregar al menos una asignacin de profesor antes de generar el horario.");return}h(!0),y(null),B(null);try{const G=new globalThis.GoogleGenerativeAI(""),W=`
                Eres un asistente experto en planificacin de horarios escolares para un liceo tcnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Das de la semana: ${_2.join(", ")}
                - Bloques horarios por da: 10 bloques con los siguientes horarios: ${JSON.stringify(j_,null,2)}
                - Cursos del liceo: ${ls.join(", ")}

                **Contexto Adicional de Especialidades (3 y 4 Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecnica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecnica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3/4 Medio Automotriz" y "3/4 Medio Industrial" correctamente.

                **Reglas de Asignacin de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura segn el nivel del curso:
                ${JSON.stringify(tX,null,2)}
                Notas sobre las reglas:
                - '1 y 2 medio' aplica a cursos que empiezan con '1' o '2'.
                - '3 y 4 medio' aplica a cursos que empiezan con '3' o '4'.
                - Algunas reglas aplican a cursos especficos (ej. Mecnica).

                **Asignaciones de Profesores (Input):**
                Aqu est la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRTICA INVIOLABLE:**
                La restriccin ms importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo da y mismo bloque horario. Es fsicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las dems. No deben existir topes de horario para ningn profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${S||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma ms balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo da si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un nico objeto JSON vlido, sin texto adicional antes o despus. La estructura del JSON debe ser la siguiente:
                {
                  "1A": {
                    "Lunes": { "1": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1B": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada da de la semana. Cada da tiene claves para cada bloque del 1 al 10. Si un bloque est vaco, usa \`{ "asignatura": null, "profesor": null }\`.
            `,Z=(await(await G.getGenerativeModel({model:"gemini-pro"}).generateContent(W)).response).text(),te=JSON.parse(Z);await z3(te),B("Horario generado y guardado con xito!")}catch(K){console.error("Error al generar horario con IA:",K),y("Ocurri un error al contactar con la IA o al procesar la respuesta. Por favor, intntelo de nuevo.")}finally{h(!1)}},O=(K,G,W)=>{L({dia:K,bloque:G}),P({asignatura:(W==null?void 0:W.asignatura)||"",profesor:(W==null?void 0:W.profesor)||""})},z=async()=>{if(!k)return;const{dia:K,bloque:G}=k,W=JSON.parse(JSON.stringify(i));W[l]||(W[l]={}),W[l][K]||(W[l][K]={}),W[l][K][G]={asignatura:M.asignatura||null,profesor:M.profesor||null};try{await z3(W),L(null)}catch(ie){y(ie instanceof Error?ie.message:"Error al guardar la edicin.")}},re="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Y=()=>{const K=i[l]||{};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),_2.map(G=>c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:G},G))]})}),c.jsx("tbody",{children:j_.map(({bloque:G,inicio:W,fin:ie})=>c.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[c.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:G}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${W} - ${ie}`})]}),_2.map(j=>{var te;const X=(k==null?void 0:k.dia)===j&&(k==null?void 0:k.bloque)===G,Z=(te=K[j])==null?void 0:te[G];return c.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!X&&O(j,G,Z),children:X?c.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[c.jsx("input",{type:"text",placeholder:"Asignatura",value:M.asignatura,onChange:ce=>P(de=>({...de,asignatura:ce.target.value})),className:re+" text-xs mb-1"}),c.jsx("input",{type:"text",placeholder:"Profesor",value:M.profesor,onChange:ce=>P(de=>({...de,profesor:ce.target.value})),className:re+" text-xs"}),c.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[c.jsx("button",{onClick:()=>L(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),c.jsx("button",{onClick:z,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):Z!=null&&Z.asignatura?c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:Z.asignatura}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",Z.profesor,")"]})]}):c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${j}-${G}`)})]},G))})]})})},ae=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 1. Configuracin de Asignaciones"}),c.jsxs("form",{onSubmit:Q,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:r.curso,onChange:K=>n(G=>({...G,curso:K.target.value})),className:re,children:[c.jsx("option",{value:"",children:"Seleccione"}),ls.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:K=>n(G=>({...G,asignatura:K.target.value})),className:re,children:[c.jsx("option",{value:"",children:"Seleccione"}),sl.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),c.jsxs("select",{name:"profesor",value:r.profesor,onChange:K=>n(G=>({...G,profesor:K.target.value})),className:re,children:[c.jsx("option",{value:"",children:"Seleccione"}),a.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsx("ul",{className:"space-y-2",children:t.map(K=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[c.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[K.curso," - ",K.asignatura," - ",c.jsx("strong",{children:K.profesor})]}),c.jsx("button",{onClick:()=>D(K.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:""})]},K.id))})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 2. Generacin Automtica con IA"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),c.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:S,onChange:K=>N(K.target.value),rows:3,placeholder:"Ej: Dejar los mdulos tericos en la maana y los prcticos en la tarde. Evitar poner 2 bloques de matemtica seguidos.",className:re})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:I,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),b&&c.jsx("p",{className:"text-red-600",children:b}),E&&c.jsx("p",{className:"text-green-600",children:E})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 3. Visualizacin y Edicin por Curso"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),c.jsx("select",{id:"selectCurso",value:l,onChange:K=>u(K.target.value),className:re+" md:w-1/3",children:ls.map(K=>c.jsx("option",{value:K,children:K},K))})]}),Object.keys(i).length>0?Y():c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"An no se ha generado ningn horario. Utilice el botn de generacin con IA."})})]})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>C("edicion"),className:`${R==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuracin y Edicin por Curso"}),c.jsx("button",{onClick:()=>C("global"),className:`${R==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),R==="edicion"?ae():c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),c.jsx(LX,{horarios:i})]})]})},Nw="acciones",MX=async()=>{try{const t=er(Ft(Kr,Nw),gn("fechaRegistro","desc"));return(await cs(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedaggicas")}},PX=async t=>{try{return{id:(await Ca(Ft(Kr,Nw),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear accin:",e),new Error("No se pudo crear la accin pedaggica")}},G3=async(t,e)=>{try{const r=yr(Kr,Nw,t);await $x(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar accin:",r,"ID:",t),new Error("No se pudo actualizar la accin pedaggica")}},jX=async t=>{try{const e=yr(Kr,Nw,t);await mi(e)}catch(e){throw console.error("Error al eliminar accin:",e,"ID:",t),new Error("No se pudo eliminar la accin pedaggica")}},q3={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente"},OX={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},QX=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!1),[a,s]=ee.useState(null),[i,o]=ee.useState(q3),[l,u]=ee.useState(null),[d,h]=ee.useState(""),[m,g]=ee.useState(""),[b,y]=ee.useState(""),E=ee.useCallback(async()=>{n(!0);try{const N=await MX();e(N),s(null)}catch(N){console.error("Error al cargar acciones desde Firestore",N),s("No se pudieron cargar las acciones pedaggicas desde la nube.")}finally{n(!1)}},[]);ee.useEffect(()=>{E()},[E]);const B=ee.useCallback(N=>{const{name:Q,value:D}=N.target;o(I=>({...I,[Q]:D}))},[]),k=ee.useCallback(()=>{o(q3),u(null),s(null)},[]),L=ee.useCallback(async N=>{N.preventDefault();const{fechaRegistro:Q,responsable:D,area:I,descripcion:O,fechaCumplimiento:z,estado:re}=i;if(!Q||!D||!I||!O||!z){s("Todos los campos son obligatorios.");return}try{l?await G3(l,i):await PX(i),await E(),k()}catch(Y){console.error("Error al guardar accin:",Y),s("Error al guardar la accin en la nube.")}},[i,l,E,k]),M=ee.useCallback(N=>{window.scrollTo({top:0,behavior:"smooth"}),u(N.id),o(N)},[]),P=ee.useCallback(async N=>{if(window.confirm("Est seguro de que desea eliminar esta accin?"))try{await jX(N),await E()}catch(Q){console.error("Error al eliminar accin:",Q),s("No se pudo eliminar la accin en la nube.")}},[E]),R=ee.useCallback(async N=>{try{const Q=t.find(D=>D.id===N);if(Q){const I=(Gp.indexOf(Q.estado)+1)%Gp.length,O=Gp[I];await G3(N,{estado:O}),await E()}}catch(Q){console.error("Error al cambiar estado:",Q),s("No se pudo cambiar el estado de la accin en la nube.")}},[t,E]),C=ee.useMemo(()=>t.filter(N=>{const Q=d===""||N.responsable.toLowerCase().includes(d.toLowerCase())||N.descripcion.toLowerCase().includes(d.toLowerCase()),D=m===""||N.area===m,I=b===""||N.estado===b;return Q&&D&&I}),[t,d,m,b]),S="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedaggicas"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando accin existente.":"Registre una nueva accin de seguimiento."}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando acciones desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("form",{onSubmit:L,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),c.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:B,className:S})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:B,placeholder:"Nombre del responsable",className:S})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"rea Vinculada"}),c.jsxs("select",{name:"area",value:i.area,onChange:B,className:S,children:[c.jsx("option",{value:"",children:"Seleccione un rea"}),M3.map(N=>c.jsx("option",{value:N,children:N},N))]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripcin de la Accin"}),c.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:B,rows:3,placeholder:"Detalle de la accin a realizar...",className:S})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),c.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:B,className:S})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"estado",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado de Avance"}),c.jsx("select",{name:"estado",value:i.estado,onChange:B,className:S,children:Gp.map(N=>c.jsx("option",{value:N,children:N},N))})]})]}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Accin":"Registrar Accin"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-4",children:"No hay acciones pedaggicas registradas en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:N=>h(N.target.value),className:S+" md:col-span-1"}),c.jsxs("select",{value:m,onChange:N=>g(N.target.value),className:S,children:[c.jsx("option",{value:"",children:"Filtrar por rea"}),M3.map(N=>c.jsx("option",{value:N,children:N},N))]}),c.jsxs("select",{value:b,onChange:N=>y(N.target.value),className:S,children:[c.jsx("option",{value:"",children:"Filtrar por Estado"}),Gp.map(N=>c.jsx("option",{value:N,children:N},N))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"rea"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripcin"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&C.length>0?C.map(N=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:N.responsable}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:N.area}),c.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:N.descripcion}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("span",{children:["Reg: ",N.fechaRegistro]}),c.jsxs("span",{className:"font-semibold",children:["Comp: ",N.fechaCumplimiento]})]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${OX[N.estado]}`,children:N.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>R(N.id),title:"Cambiar Estado",className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40",children:""}),c.jsx("button",{onClick:()=>M(N),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),c.jsx("button",{onClick:()=>P(N.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},N.id)):!r&&c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron acciones con los filtros actuales."})})})]})})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let HX,VX;function zX(){return{geminiUrl:HX,vertexUrl:VX}}function GX(t,e,r,n){var a,s;if(!(t!=null&&t.baseUrl)){const i=zX();return e?(a=i.vertexUrl)!==null&&a!==void 0?a:r:(s=i.geminiUrl)!==null&&s!==void 0?s:n}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oh{}function sr(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(n,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const s=e[a];return s!=null?String(s):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function v(t,e,r){for(let s=0;s<e.length-1;s++){const i=e[s];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(r))t[o]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(r))for(let u=0;u<l.length;u++){const d=l[u];v(d,e.slice(s+1),r[u])}else for(const u of l)v(u,e.slice(s+1),r)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];v(l[0],e.slice(s+1),r);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const n=e[e.length-1],a=t[n];if(a!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===a)return;if(typeof a=="object"&&typeof r=="object"&&a!==null&&r!==null)Object.assign(a,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else t[n]=r}function x(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return;const n=e[r];if(n.endsWith("[]")){const a=n.slice(0,-2);if(a in t){const s=t[a];return Array.isArray(s)?s.map(i=>x(i,e.slice(r+1))):void 0}else return}else t=t[n]}return t}catch(r){if(r instanceof TypeError)return;throw r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O_(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var K3;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(K3||(K3={}));var $3;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})($3||($3={}));var pn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(pn||(pn={}));var W3;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(W3||(W3={}));var X3;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(X3||(X3={}));var Y3;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Y3||(Y3={}));var J3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(J3||(J3={}));var Z3;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Z3||(Z3={}));var eI;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(eI||(eI={}));var tI;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tI||(tI={}));var rI;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(rI||(rI={}));var nI;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(nI||(nI={}));var aI;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(aI||(aI={}));var sI;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(sI||(sI={}));var iI;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(iI||(iI={}));var oI;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(oI||(oI={}));var cy;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(cy||(cy={}));var lI;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(lI||(lI={}));var Q_;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Q_||(Q_={}));var cI;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(cI||(cI={}));var uI;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(uI||(uI={}));var AI;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(AI||(AI={}));var dI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(dI||(dI={}));var fI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(fI||(fI={}));var hI;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(hI||(hI={}));var mI;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(mI||(mI={}));var pI;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(pI||(pI={}));var gI;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gI||(gI={}));var xI;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(xI||(xI={}));var vI;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vI||(vI={}));var yI;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(yI||(yI={}));var wI;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(wI||(wI={}));var bI;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(bI||(bI={}));var CI;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(CI||(CI={}));var EI;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(EI||(EI={}));var _I;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_I||(_I={}));var SI;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(SI||(SI={}));var TI;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(TI||(TI={}));var BI;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(BI||(BI={}));var NI;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(NI||(NI={}));var kI;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kI||(kI={}));var Z0;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Z0||(Z0={}));class H_{constructor(e){const r={};for(const n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class qp{get text(){var e,r,n,a,s,i,o,l;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const h=[];for(const m of(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,b]of Object.entries(m))g!=="text"&&g!=="thought"&&(b!==null||b!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,r,n,a,s,i,o,l;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const h of(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(u+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,r,n,a,s,i,o,l;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,r,n,a,s,i,o,l,u;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,r,n,a,s,i,o,l,u;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class II{}class FI{}class qX{}class KX{}class DI{}class RI{}class LI{}class $X{}class UI{}class MI{}class PI{}class jI{}class WX{}class XX{}class YX{}class OI{}class JX{get text(){var e,r,n;let a="",s=!1;const i=[];for(const o of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[l,u]of Object.entries(o))l!=="text"&&l!=="thought"&&u!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;s=!0,a+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?a:void 0}get data(){var e,r,n;let a="";const s=[];for(const i of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&s.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(a+=atob(i.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class uy{_fromAPIResponse({apiResponse:e,isVertexAI:r}){const n=new uy;if(n.name=e.name,n.metadata=e.metadata,n.done=e.done,n.error=e.error,r){const a=e.response;if(a){const s=new UI,i=a.videos;s.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?O_(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),s.raiMediaFilteredCount=a.raiMediaFilteredCount,s.raiMediaFilteredReasons=a.raiMediaFilteredReasons,n.response=s}}else{const a=e.response;if(a){const s=new UI,i=a.generateVideoResponse,o=i==null?void 0:i.generatedSamples;s.generatedVideos=o==null?void 0:o.map(l=>{const u=l.video;return{video:{uri:u==null?void 0:u.uri,videoBytes:u!=null&&u.encodedVideo?O_(u==null?void 0:u.encodedVideo):void 0,mimeType:l.encoding}}}),s.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,s.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,n.response=s}}return n}}class ZX{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $n(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function j8(t,e){const r=$n(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function O8(t){return Array.isArray(t)?t.map(e=>Ay(e)):[Ay(t)]}function Ay(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Q8(t){const e=Ay(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function H8(t){const e=Ay(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QI(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function V8(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>QI(e)):[QI(t)]}function V_(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function HI(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function VI(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Vi(t){if(t==null)throw new Error("ContentUnion is required");return V_(t)?t:{role:"user",parts:V8(t)}}function z8(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const n=Vi(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){const r=Vi(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>Vi(r)):[Vi(e)]}function Gl(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(HI(t)||VI(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Vi(t)]}const e=[],r=[],n=V_(t[0]);for(const a of t){const s=V_(a);if(s!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(a);else{if(HI(a)||VI(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(a)}}return n||e.push({role:"user",parts:V8(r)}),e}function eY(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(pn).includes(r[0].toUpperCase())?r[0].toUpperCase():pn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of r)e.anyOf.push({type:Object.values(pn).includes(n.toUpperCase())?n.toUpperCase():pn.TYPE_UNSPECIFIED})}}function lm(t){const e={},r=["items"],n=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&eY(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(pn).includes(o.toUpperCase())?o.toUpperCase():pn.TYPE_UNSPECIFIED}else if(r.includes(i))e[i]=lm(o);else if(n.includes(i)){const l=[];for(const u of o){if(u.type=="null"){e.nullable=!0;continue}l.push(lm(u))}e[i]=l}else if(a.includes(i)){const l={};for(const[u,d]of Object.entries(o))l[u]=lm(d);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function p4(t){return lm(t)}function g4(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function x4(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Xm(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=lm(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=lm(e.response));return t}function Ym(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function tY(t,e,r,n=1){const a=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:a?`${r}/${e}`:e}function VA(t,e){if(typeof e!="string")throw new Error("name must be a string");return tY(t,e,"cachedContents")}function G8(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Qh(t){return O_(t)}function rY(t){return t!=null&&typeof t=="object"&&"name"in t}function nY(t){return t!=null&&typeof t=="object"&&"video"in t}function aY(t){return t!=null&&typeof t=="object"&&"uri"in t}function q8(t){var e;let r;if(rY(t)&&(r=t.name),!(aY(t)&&(r=t.uri,r===void 0))&&!(nY(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const a=r.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${r}`);r=a[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function K8(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function $8(t){for(const e of["models","tunedModels","publisherModels"])if(sY(t,e))return t[e];return[]}function sY(t,e){return t!==null&&typeof t=="object"&&e in t}function iY(t,e={}){const r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function oY(t,e={}){const r=[],n=new Set;for(const a of t){const s=a.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);const i=iY(a,e);i.functionDeclarations&&r.push(...i.functionDeclarations)}return{functionDeclarations:r}}function W8(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function lY(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Jm(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function X8(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cY(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function uY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function AY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function dY(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],cY(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],uY(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],AY(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Y8(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>dY(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function fY(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const B=x(t,["nullable"]);B!=null&&v(e,["nullable"],B);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const L=x(t,["properties"]);L!=null&&v(e,["properties"],L);const M=x(t,["propertyOrdering"]);M!=null&&v(e,["propertyOrdering"],M);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const R=x(t,["title"]);R!=null&&v(e,["title"],R);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function hY(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function mY(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function pY(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function gY(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],pY(r)),e}function xY(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function vY(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],xY(r)),e}function yY(){return{}}function wY(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>mY(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],gY(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],vY(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],yY());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function bY(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function CY(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function EY(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],CY(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function _Y(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],bY(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],EY(n)),e}function SY(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function J8(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],SY(r)),e}function TY(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],J8(n)),e}function BY(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>TY(a))),v(e,["speakerVoiceConfigs"],n)}return e}function NY(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],J8(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],BY(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function kY(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function IY(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],Y8(Vi(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const E=x(e,["responseMimeType"]);E!=null&&v(n,["responseMimeType"],E);const B=x(e,["responseSchema"]);B!=null&&v(n,["responseSchema"],fY(p4(B)));const k=x(e,["responseJsonSchema"]);if(k!=null&&v(n,["responseJsonSchema"],k),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=x(e,["safetySettings"]);if(r!==void 0&&L!=null){let D=L;Array.isArray(D)&&(D=D.map(I=>hY(I))),v(r,["safetySettings"],D)}const M=x(e,["tools"]);if(r!==void 0&&M!=null){let D=Ym(M);Array.isArray(D)&&(D=D.map(I=>wY(Xm(I)))),v(r,["tools"],D)}const P=x(e,["toolConfig"]);if(r!==void 0&&P!=null&&v(r,["toolConfig"],_Y(P)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=x(e,["cachedContent"]);r!==void 0&&R!=null&&v(r,["cachedContent"],VA(t,R));const C=x(e,["responseModalities"]);C!=null&&v(n,["responseModalities"],C);const S=x(e,["mediaResolution"]);S!=null&&v(n,["mediaResolution"],S);const N=x(e,["speechConfig"]);if(N!=null&&v(n,["speechConfig"],NY(g4(N))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Q=x(e,["thinkingConfig"]);return Q!=null&&v(n,["thinkingConfig"],kY(Q)),n}function FY(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["request","model"],$n(t,n));const a=x(e,["contents"]);if(a!=null){let i=Gl(a);Array.isArray(i)&&(i=i.map(o=>Y8(o))),v(r,["request","contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["request","generationConfig"],IY(t,s,r)),r}function DY(t,e){const r={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=x(e,["fileName"]);n!=null&&v(r,["fileName"],n);const a=x(e,["inlinedRequests"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>FY(t,i))),v(r,["requests","requests"],s)}return r}function RY(t,e){const r={},n=x(t,["displayName"]);if(e!==void 0&&n!=null&&v(e,["batch","displayName"],n),x(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function LY(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["src"]);a!=null&&v(r,["batch","inputConfig"],DY(t,W8(t,a)));const s=x(e,["config"]);return s!=null&&v(r,["config"],RY(s,r)),r}function UY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Jm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function MY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Jm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function PY(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);if(e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),x(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function jY(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],PY(r,e)),e}function OY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Jm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function QY(t){const e={},r=x(t,["format"]);r!=null&&v(e,["instancesFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsSource","uris"],n);const a=x(t,["bigqueryUri"]);if(a!=null&&v(e,["bigquerySource","inputUri"],a),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function HY(t){const e={},r=x(t,["format"]);r!=null&&v(e,["predictionsFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsDestination","outputUriPrefix"],n);const a=x(t,["bigqueryUri"]);if(a!=null&&v(e,["bigqueryDestination","outputUri"],a),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function VY(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["dest"]);return e!==void 0&&a!=null&&v(e,["outputConfig"],HY(lY(a))),r}function zY(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],$n(t,n));const a=x(e,["src"]);a!=null&&v(r,["inputConfig"],QY(W8(t,a)));const s=x(e,["config"]);return s!=null&&v(r,["config"],VY(s,r)),r}function GY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Jm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function qY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Jm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function KY(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function $Y(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],KY(r,e)),e}function WY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Jm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function XY(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function YY(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function JY(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function ZY(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],XY(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],YY(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],JY(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function eJ(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>ZY(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function tJ(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function rJ(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function nJ(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>rJ(a))),v(e,["urlMetadata"],n)}return e}function aJ(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],eJ(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],tJ(n));const a=x(t,["tokenCount"]);a!=null&&v(e,["tokenCount"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],nJ(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function sJ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>aJ(l))),v(e,["candidates"],o)}const a=x(t,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const s=x(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function Z8(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const a=x(t,["message"]);return a!=null&&v(e,["message"],a),e}function iJ(t){const e={},r=x(t,["response"]);r!=null&&v(e,["response"],sJ(r));const n=x(t,["error"]);return n!=null&&v(e,["error"],Z8(n)),e}function oJ(t){const e={},r=x(t,["responsesFile"]);r!=null&&v(e,["fileName"],r);const n=x(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>iJ(s))),v(e,["inlinedResponses"],a)}return e}function z_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata","displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["metadata","state"]);a!=null&&v(e,["state"],X8(a));const s=x(t,["metadata","createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["metadata","endTime"]);i!=null&&v(e,["endTime"],i);const o=x(t,["metadata","updateTime"]);o!=null&&v(e,["updateTime"],o);const l=x(t,["metadata","model"]);l!=null&&v(e,["model"],l);const u=x(t,["metadata","output"]);return u!=null&&v(e,["dest"],oJ(u)),e}function lJ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["operations"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>z_(i))),v(e,["batchJobs"],s)}return e}function cJ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const a=x(t,["error"]);return a!=null&&v(e,["error"],Z8(a)),e}function eM(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const a=x(t,["message"]);return a!=null&&v(e,["message"],a),e}function uJ(t){const e={},r=x(t,["instancesFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsSource","uris"]);n!=null&&v(e,["gcsUri"],n);const a=x(t,["bigquerySource","inputUri"]);return a!=null&&v(e,["bigqueryUri"],a),e}function AJ(t){const e={},r=x(t,["predictionsFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsDestination","outputUriPrefix"]);n!=null&&v(e,["gcsUri"],n);const a=x(t,["bigqueryDestination","outputUri"]);return a!=null&&v(e,["bigqueryUri"],a),e}function G_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],X8(a));const s=x(t,["error"]);s!=null&&v(e,["error"],eM(s));const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["startTime"]);o!=null&&v(e,["startTime"],o);const l=x(t,["endTime"]);l!=null&&v(e,["endTime"],l);const u=x(t,["updateTime"]);u!=null&&v(e,["updateTime"],u);const d=x(t,["model"]);d!=null&&v(e,["model"],d);const h=x(t,["inputConfig"]);h!=null&&v(e,["src"],uJ(h));const m=x(t,["outputConfig"]);return m!=null&&v(e,["dest"],AJ(m)),e}function dJ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["batchPredictionJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>G_(i))),v(e,["batchJobs"],s)}return e}function fJ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const a=x(t,["error"]);return a!=null&&v(e,["error"],eM(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Th;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Th||(Th={}));class Jx{constructor(e,r,n,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,a)}init(e,r,n){var a,s;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!n||Object.keys(n).length===0?i={config:{}}:typeof n=="object"?i=Object.assign({},n):i=n,i.config&&(i.config.pageToken=r.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(s=(a=i.config)===null||a===void 0?void 0:a.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hJ extends Oh{constructor(e){super(),this.apiClient=e,this.create=async r=>{if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(r.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(r.config=r.config||{},r.config.displayName===void 0&&(r.config.displayName="genaiBatchJob_${timestampStr}"),r.config.dest===void 0&&typeof r.src=="string")if(r.src.startsWith("gs://")&&r.src.endsWith(".jsonl"))r.config.dest=`${r.src.slice(0,-6)}/dest`;else if(r.src.startsWith("bq://"))r.config.dest=`${r.src}_dest_${a}`;else throw new Error("Unsupported source:"+r.src)}return await this.createInternal(r)},this.list=async(r={})=>new Jx(Th.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r)}async createInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=zY(this.apiClient,e);return o=sr("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>G_(d))}else{const u=LY(this.apiClient,e);return o=sr("{model}:batchGenerateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>z_(d))}}async get(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=GY(this.apiClient,e);return o=sr("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>G_(d))}else{const u=UY(this.apiClient,e);return o=sr("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>z_(d))}}async cancel(e){var r,n,a,s;let i="",o={};if(this.apiClient.isVertexAI()){const l=qY(this.apiClient,e);i=sr("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const l=MY(this.apiClient,e);i=sr("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=$Y(e);return o=sr("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=dJ(d),m=new OI;return Object.assign(m,h),m})}else{const u=jY(e);return o=sr("batches",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=lJ(d),m=new OI;return Object.assign(m,h),m})}}async delete(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=WY(this.apiClient,e);return o=sr("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>fJ(d))}else{const u=OY(this.apiClient,e);return o=sr("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>cJ(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mJ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function pJ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function gJ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function xJ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],mJ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],pJ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],gJ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function zI(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>xJ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function vJ(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function yJ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function wJ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],yJ(r)),e}function bJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function CJ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],bJ(r)),e}function EJ(){return{}}function _J(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>vJ(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],wJ(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],CJ(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],EJ());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function SJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function TJ(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function BJ(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],TJ(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function NJ(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],SJ(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],BJ(n)),e}function kJ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);e!==void 0&&a!=null&&v(e,["expireTime"],a);const s=x(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let d=Gl(i);Array.isArray(d)&&(d=d.map(h=>zI(h))),v(e,["contents"],d)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],zI(Vi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>_J(h))),v(e,["tools"],d)}const u=x(t,["toolConfig"]);if(e!==void 0&&u!=null&&v(e,["toolConfig"],NJ(u)),x(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function IJ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],j8(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],kJ(a,r)),r}function FJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],VA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function DJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],VA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function RJ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);return e!==void 0&&a!=null&&v(e,["expireTime"],a),r}function LJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],VA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],RJ(a,r)),r}function UJ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function MJ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],UJ(r,e)),e}function PJ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function jJ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function OJ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function QJ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],PJ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],jJ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],OJ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function GI(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>QJ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function HJ(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function VJ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function zJ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],VJ(r)),e}function GJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function qJ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],GJ(r)),e}function KJ(){return{}}function $J(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function WJ(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],$J(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function XJ(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],WJ(r)),e}function YJ(){return{}}function JJ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>HJ(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],zJ(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],qJ(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],KJ());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],XJ(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],YJ());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function ZJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function eZ(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function tZ(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],eZ(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function rZ(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],ZJ(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],tZ(n)),e}function nZ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);e!==void 0&&a!=null&&v(e,["expireTime"],a);const s=x(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let h=Gl(i);Array.isArray(h)&&(h=h.map(m=>GI(m))),v(e,["contents"],h)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],GI(Vi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>JJ(m))),v(e,["tools"],h)}const u=x(t,["toolConfig"]);e!==void 0&&u!=null&&v(e,["toolConfig"],rZ(u));const d=x(t,["kmsKeyName"]);return e!==void 0&&d!=null&&v(e,["encryption_spec","kmsKeyName"],d),r}function aZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],j8(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],nZ(a,r)),r}function sZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],VA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function iZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],VA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function oZ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);return e!==void 0&&a!=null&&v(e,["expireTime"],a),r}function lZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],VA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],oZ(a,r)),r}function cZ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function uZ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],cZ(r,e)),e}function S2(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["model"]);a!=null&&v(e,["model"],a);const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function AZ(){return{}}function dZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>S2(i))),v(e,["cachedContents"],s)}return e}function T2(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["model"]);a!=null&&v(e,["model"],a);const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function fZ(){return{}}function hZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>T2(i))),v(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mZ extends Oh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Jx(Th.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=aZ(this.apiClient,e);return o=sr("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>T2(d))}else{const u=IJ(this.apiClient,e);return o=sr("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>S2(d))}}async get(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=sZ(this.apiClient,e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>T2(d))}else{const u=FJ(this.apiClient,e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>S2(d))}}async delete(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=iZ(this.apiClient,e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=fZ(),h=new PI;return Object.assign(h,d),h})}else{const u=DJ(this.apiClient,e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(()=>{const d=AZ(),h=new PI;return Object.assign(h,d),h})}}async update(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=lZ(this.apiClient,e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>T2(d))}else{const u=LJ(this.apiClient,e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>S2(d))}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=uZ(e);return o=sr("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=hZ(d),m=new jI;return Object.assign(m,h),m})}else{const u=MJ(e);return o=sr("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=dZ(d),m=new jI;return Object.assign(m,h),m})}}}function qI(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Aa(t){return this instanceof Aa?(this.v=t,this):new Aa(t)}function cm(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),a[Symbol.asyncIterator]=function(){return this},a;function i(g){return function(b){return Promise.resolve(b).then(g,h)}}function o(g,b){n[g]&&(a[g]=function(y){return new Promise(function(E,B){s.push([g,y,E,B])>1||l(g,y)})},b&&(a[g]=b(a[g])))}function l(g,b){try{u(n[g](b))}catch(y){m(s[0][3],y)}}function u(g){g.value instanceof Aa?Promise.resolve(g.value.v).then(d,h):m(s[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function m(g,b){g(b),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Rg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof qI=="function"?qI(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(i){return new Promise(function(o,l){i=t[s](i),a(o,l,i.done,i.value)})}}function a(s,i,o,l){Promise.resolve(l).then(function(u){s({value:u,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pZ(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:tM(r)}function tM(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function gZ(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function KI(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{const a=[];let s=!0;for(;n<r&&t[n].role==="model";)a.push(t[n]),s&&!tM(t[n])&&(s=!1),n++;s?e.push(...a):e.pop()}return e}class xZ{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new vZ(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vZ{constructor(e,r,n,a={},s=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=a,this.history=s,this.sendPromise=Promise.resolve(),gZ(s)}async sendMessage(e){var r;await this.sendPromise;const n=Vi(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var s,i,o;const l=await a,u=(i=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];d!=null&&(m=(o=d.slice(h))!==null&&o!==void 0?o:[]);const g=u?[u]:[];this.recordHistory(n,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var r;await this.sendPromise;const n=Vi(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const s=await a;return this.processStreamResponse(s,n)}getHistory(e=!1){const r=e?KI(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){var n,a;return cm(this,arguments,function*(){var i,o,l,u;const d=[];try{for(var h=!0,m=Rg(e),g;g=yield Aa(m.next()),i=g.done,!i;h=!0){u=g.value,h=!1;const b=u;if(pZ(b)){const y=(a=(n=b.candidates)===null||n===void 0?void 0:n[0])===null||a===void 0?void 0:a.content;y!==void 0&&d.push(y)}yield yield Aa(b)}}catch(b){o={error:b}}finally{try{!h&&!i&&(l=m.return)&&(yield Aa(l.call(m)))}finally{if(o)throw o.error}}this.recordHistory(r,d)})}recordHistory(e,r,n){let a=[];r.length>0&&r.every(s=>s.role!==void 0)?a=r:a.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...KI(n)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kw extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,kw.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yZ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function wZ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],yZ(r,e)),e}function bZ(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const a=x(t,["code"]);return a!=null&&v(e,["code"],a),e}function CZ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["mimeType"]);a!=null&&v(e,["mimeType"],a);const s=x(t,["sizeBytes"]);s!=null&&v(e,["sizeBytes"],s);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const y=x(t,["error"]);return y!=null&&v(e,["error"],bZ(y)),e}function EZ(t){const e={},r=x(t,["file"]);r!=null&&v(e,["file"],CZ(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function _Z(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],q8(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function SZ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],q8(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function TZ(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const a=x(t,["code"]);return a!=null&&v(e,["code"],a),e}function q_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["mimeType"]);a!=null&&v(e,["mimeType"],a);const s=x(t,["sizeBytes"]);s!=null&&v(e,["sizeBytes"],s);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const y=x(t,["error"]);return y!=null&&v(e,["error"],TZ(y)),e}function BZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["files"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>q_(i))),v(e,["files"],s)}return e}function NZ(t){const e={},r=x(t,["sdkHttpResponse"]);return r!=null&&v(e,["sdkHttpResponse"],r),e}function kZ(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IZ extends Oh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Jx(Th.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>q_(r))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=wZ(e);return s=sr("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=BZ(l),d=new WX;return Object.assign(d,u),d})}}async createInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=EZ(e);return s=sr("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(l=>{const u=NZ(l),d=new XX;return Object.assign(d,u),d})}}async get(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=_Z(e);return s=sr("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(l=>q_(l))}}async delete(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=SZ(e);return s=sr("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(()=>{const l=kZ(),u=new YX;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FZ(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function rM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],FZ(r)),e}function DZ(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],rM(n)),e}function RZ(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>DZ(a))),v(e,["speakerVoiceConfigs"],n)}return e}function LZ(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],rM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],RZ(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function UZ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function MZ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function PZ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function jZ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],UZ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],MZ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],PZ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function OZ(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>jZ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function QZ(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function HZ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function VZ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],HZ(r)),e}function zZ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function GZ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],zZ(r)),e}function qZ(){return{}}function KZ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>QZ(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],VZ(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],GZ(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],qZ());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function $Z(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $I(){return{}}function WZ(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function XZ(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],WZ(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function YZ(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function JZ(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],YZ(n)),e}function ZZ(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function eee(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],LZ(x4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],OZ(Vi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=Ym(b);Array.isArray(P)&&(P=P.map(R=>KZ(Xm(R)))),v(e,["setup","tools"],P)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],$Z(y));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],$I());const B=x(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],$I());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],XZ(k));const L=x(t,["contextWindowCompression"]);e!==void 0&&L!=null&&v(e,["setup","contextWindowCompression"],JZ(L));const M=x(t,["proactivity"]);return e!==void 0&&M!=null&&v(e,["setup","proactivity"],ZZ(M)),r}function tee(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],$n(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],eee(a,r)),r}function ree(){return{}}function nee(){return{}}function aee(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],O8(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],H8(n));const a=x(t,["audioStreamEnd"]);a!=null&&v(e,["audioStreamEnd"],a);const s=x(t,["video"]);s!=null&&v(e,["video"],Q8(s));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],ree()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],nee()),e}function nM(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function see(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>nM(a))),v(e,["weightedPrompts"],n)}return e}function aM(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const a=x(t,["seed"]);a!=null&&v(e,["seed"],a);const s=x(t,["guidance"]);s!=null&&v(e,["guidance"],s);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function iee(t){const e={},r=x(t,["musicGenerationConfig"]);return r!=null&&v(e,["musicGenerationConfig"],aM(r)),e}function sM(t){const e={},r=x(t,["model"]);return r!=null&&v(e,["model"],r),e}function iM(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>nM(a))),v(e,["weightedPrompts"],n)}return e}function K_(t){const e={},r=x(t,["setup"]);r!=null&&v(e,["setup"],sM(r));const n=x(t,["clientContent"]);n!=null&&v(e,["clientContent"],iM(n));const a=x(t,["musicGenerationConfig"]);a!=null&&v(e,["musicGenerationConfig"],aM(a));const s=x(t,["playbackControl"]);return s!=null&&v(e,["playbackControl"],s),e}function oee(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function lee(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],oee(r)),e}function cee(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],lee(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function uee(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Aee(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function dee(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function fee(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],uee(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Aee(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],dee(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function hee(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>fee(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function mee(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function pee(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function gee(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],pee(r)),e}function xee(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function vee(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],xee(r)),e}function yee(){return{}}function wee(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function bee(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],wee(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function Cee(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],bee(r)),e}function Eee(){return{}}function _ee(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>mee(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],gee(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],vee(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],yee());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],Cee(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],Eee());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function See(t){const e={},r=x(t,["handle"]);r!=null&&v(e,["handle"],r);const n=x(t,["transparent"]);return n!=null&&v(e,["transparent"],n),e}function WI(){return{}}function Tee(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function Bee(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],Tee(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function Nee(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function kee(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],Nee(n)),e}function Iee(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function Fee(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],cee(x4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],hee(Vi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=Ym(b);Array.isArray(P)&&(P=P.map(R=>_ee(Xm(R)))),v(e,["setup","tools"],P)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],See(y));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],WI());const B=x(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],WI());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],Bee(k));const L=x(t,["contextWindowCompression"]);e!==void 0&&L!=null&&v(e,["setup","contextWindowCompression"],kee(L));const M=x(t,["proactivity"]);return e!==void 0&&M!=null&&v(e,["setup","proactivity"],Iee(M)),r}function Dee(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],$n(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],Fee(a,r)),r}function Ree(){return{}}function Lee(){return{}}function Uee(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],O8(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],H8(n));const a=x(t,["audioStreamEnd"]);a!=null&&v(e,["audioStreamEnd"],a);const s=x(t,["video"]);s!=null&&v(e,["video"],Q8(s));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],Ree()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],Lee()),e}function Mee(){return{}}function Pee(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function jee(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Oee(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Qee(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Pee(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],jee(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Oee(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Hee(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>Qee(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function XI(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function Vee(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function zee(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Vee(a))),v(e,["urlMetadata"],n)}return e}function Gee(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],Hee(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const a=x(t,["interrupted"]);a!=null&&v(e,["interrupted"],a);const s=x(t,["groundingMetadata"]);s!=null&&v(e,["groundingMetadata"],s);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],XI(o));const l=x(t,["outputTranscription"]);l!=null&&v(e,["outputTranscription"],XI(l));const u=x(t,["urlContextMetadata"]);return u!=null&&v(e,["urlContextMetadata"],zee(u)),e}function qee(t){const e={},r=x(t,["id"]);r!=null&&v(e,["id"],r);const n=x(t,["args"]);n!=null&&v(e,["args"],n);const a=x(t,["name"]);return a!=null&&v(e,["name"],a),e}function Kee(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>qee(a))),v(e,["functionCalls"],n)}return e}function $ee(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function vv(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function Wee(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const a=x(t,["responseTokenCount"]);a!=null&&v(e,["responseTokenCount"],a);const s=x(t,["toolUsePromptTokenCount"]);s!=null&&v(e,["toolUsePromptTokenCount"],s);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>vv(g))),v(e,["promptTokensDetails"],m)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>vv(g))),v(e,["cacheTokensDetails"],m)}const d=x(t,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>vv(g))),v(e,["responseTokensDetails"],m)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>vv(g))),v(e,["toolUsePromptTokensDetails"],m)}return e}function Xee(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function Yee(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const a=x(t,["lastConsumedClientMessageIndex"]);return a!=null&&v(e,["lastConsumedClientMessageIndex"],a),e}function Jee(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],Mee());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],Gee(n));const a=x(t,["toolCall"]);a!=null&&v(e,["toolCall"],Kee(a));const s=x(t,["toolCallCancellation"]);s!=null&&v(e,["toolCallCancellation"],$ee(s));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],Wee(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],Xee(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],Yee(l)),e}function Zee(){return{}}function ete(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function tte(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>ete(a))),v(e,["weightedPrompts"],n)}return e}function rte(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const a=x(t,["seed"]);a!=null&&v(e,["seed"],a);const s=x(t,["guidance"]);s!=null&&v(e,["guidance"],s);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function nte(t){const e={},r=x(t,["clientContent"]);r!=null&&v(e,["clientContent"],tte(r));const n=x(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],rte(n)),e}function ate(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);n!=null&&v(e,["mimeType"],n);const a=x(t,["sourceMetadata"]);return a!=null&&v(e,["sourceMetadata"],nte(a)),e}function ste(t){const e={},r=x(t,["audioChunks"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>ate(a))),v(e,["audioChunks"],n)}return e}function ite(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["filteredReason"]);return n!=null&&v(e,["filteredReason"],n),e}function ote(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],Zee());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],ste(n));const a=x(t,["filteredPrompt"]);return a!=null&&v(e,["filteredPrompt"],ite(a)),e}function lte(t){const e={},r=x(t,["sessionId"]);return r!=null&&v(e,["sessionId"],r),e}function cte(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function ute(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Ate(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function dte(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],cte(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],ute(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Ate(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function fte(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>dte(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function YI(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function hte(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],fte(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const a=x(t,["interrupted"]);a!=null&&v(e,["interrupted"],a);const s=x(t,["groundingMetadata"]);s!=null&&v(e,["groundingMetadata"],s);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],YI(o));const l=x(t,["outputTranscription"]);return l!=null&&v(e,["outputTranscription"],YI(l)),e}function mte(t){const e={},r=x(t,["args"]);r!=null&&v(e,["args"],r);const n=x(t,["name"]);return n!=null&&v(e,["name"],n),e}function pte(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>mte(a))),v(e,["functionCalls"],n)}return e}function gte(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function yv(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function xte(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const a=x(t,["candidatesTokenCount"]);a!=null&&v(e,["responseTokenCount"],a);const s=x(t,["toolUsePromptTokenCount"]);s!=null&&v(e,["toolUsePromptTokenCount"],s);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(b=>yv(b))),v(e,["promptTokensDetails"],g)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(b=>yv(b))),v(e,["cacheTokensDetails"],g)}const d=x(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(b=>yv(b))),v(e,["responseTokensDetails"],g)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(b=>yv(b))),v(e,["toolUsePromptTokensDetails"],g)}const m=x(t,["trafficType"]);return m!=null&&v(e,["trafficType"],m),e}function vte(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function yte(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const a=x(t,["lastConsumedClientMessageIndex"]);return a!=null&&v(e,["lastConsumedClientMessageIndex"],a),e}function wte(t){const e={},r=x(t,["setupComplete"]);r!=null&&v(e,["setupComplete"],lte(r));const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],hte(n));const a=x(t,["toolCall"]);a!=null&&v(e,["toolCall"],pte(a));const s=x(t,["toolCallCancellation"]);s!=null&&v(e,["toolCallCancellation"],gte(s));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],xte(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],vte(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],yte(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bte(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Cte(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Ete(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function _te(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],bte(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Cte(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Ete(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Iw(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>_te(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Ste(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const B=x(t,["nullable"]);B!=null&&v(e,["nullable"],B);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const L=x(t,["properties"]);L!=null&&v(e,["properties"],L);const M=x(t,["propertyOrdering"]);M!=null&&v(e,["propertyOrdering"],M);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const R=x(t,["title"]);R!=null&&v(e,["title"],R);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function Tte(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function Bte(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function Nte(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function kte(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],Nte(r)),e}function Ite(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function Fte(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],Ite(r)),e}function Dte(){return{}}function Rte(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Bte(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],kte(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],Fte(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],Dte());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function Lte(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function Ute(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function Mte(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],Ute(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function Pte(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],Lte(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],Mte(n)),e}function jte(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function oM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],jte(r)),e}function Ote(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],oM(n)),e}function Qte(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Ote(a))),v(e,["speakerVoiceConfigs"],n)}return e}function Hte(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],oM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],Qte(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function Vte(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function zte(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],Iw(Vi(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const E=x(e,["responseMimeType"]);E!=null&&v(n,["responseMimeType"],E);const B=x(e,["responseSchema"]);B!=null&&v(n,["responseSchema"],Ste(p4(B)));const k=x(e,["responseJsonSchema"]);if(k!=null&&v(n,["responseJsonSchema"],k),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=x(e,["safetySettings"]);if(r!==void 0&&L!=null){let D=L;Array.isArray(D)&&(D=D.map(I=>Tte(I))),v(r,["safetySettings"],D)}const M=x(e,["tools"]);if(r!==void 0&&M!=null){let D=Ym(M);Array.isArray(D)&&(D=D.map(I=>Rte(Xm(I)))),v(r,["tools"],D)}const P=x(e,["toolConfig"]);if(r!==void 0&&P!=null&&v(r,["toolConfig"],Pte(P)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=x(e,["cachedContent"]);r!==void 0&&R!=null&&v(r,["cachedContent"],VA(t,R));const C=x(e,["responseModalities"]);C!=null&&v(n,["responseModalities"],C);const S=x(e,["mediaResolution"]);S!=null&&v(n,["mediaResolution"],S);const N=x(e,["speechConfig"]);if(N!=null&&v(n,["speechConfig"],Hte(g4(N))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Q=x(e,["thinkingConfig"]);return Q!=null&&v(n,["thinkingConfig"],Vte(Q)),n}function JI(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["contents"]);if(a!=null){let i=Gl(a);Array.isArray(i)&&(i=i.map(o=>Iw(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["generationConfig"],zte(t,s,r)),r}function Gte(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["requests[]","taskType"],n);const a=x(t,["title"]);e!==void 0&&a!=null&&v(e,["requests[]","title"],a);const s=x(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&v(e,["requests[]","outputDimensionality"],s),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function qte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["contents"]);a!=null&&v(r,["requests[]","content"],z8(t,a));const s=x(e,["config"]);s!=null&&v(r,["config"],Gte(s,r));const i=x(e,["model"]);return i!==void 0&&v(r,["requests[]","model"],$n(t,i)),r}function Kte(t,e){const r={};if(x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=x(t,["numberOfImages"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const a=x(t,["aspectRatio"]);e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a);const s=x(t,["guidanceScale"]);if(e!==void 0&&s!=null&&v(e,["parameters","guidanceScale"],s),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=x(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&v(e,["parameters","safetySetting"],i);const o=x(t,["personGeneration"]);e!==void 0&&o!=null&&v(e,["parameters","personGeneration"],o);const l=x(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&v(e,["parameters","includeSafetyAttributes"],l);const u=x(t,["includeRaiReason"]);e!==void 0&&u!=null&&v(e,["parameters","includeRaiReason"],u);const d=x(t,["language"]);e!==void 0&&d!=null&&v(e,["parameters","language"],d);const h=x(t,["outputMimeType"]);e!==void 0&&h!=null&&v(e,["parameters","outputOptions","mimeType"],h);const m=x(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&v(e,["parameters","outputOptions","compressionQuality"],m),x(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(x(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function $te(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["config"]);return s!=null&&v(r,["config"],Kte(s,r)),r}function Wte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function Xte(t,e,r){const n={},a=x(e,["pageSize"]);r!==void 0&&a!=null&&v(r,["_query","pageSize"],a);const s=x(e,["pageToken"]);r!==void 0&&s!=null&&v(r,["_query","pageToken"],s);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],K8(t,o)),n}function Yte(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],Xte(t,n,r)),r}function Jte(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const s=x(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),r}function Zte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],Jte(a,r)),r}function ere(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function tre(t){const e={};if(x(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function rre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["contents"]);if(a!=null){let i=Gl(a);Array.isArray(i)&&(i=i.map(o=>Iw(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],tre(s)),r}function nre(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=x(t,["imageBytes"]);r!=null&&v(e,["bytesBase64Encoded"],Qh(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function are(t,e){const r={},n=x(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n),x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=x(t,["durationSeconds"]);if(e!==void 0&&a!=null&&v(e,["parameters","durationSeconds"],a),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=x(t,["aspectRatio"]);if(e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s),x(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=x(t,["personGeneration"]);if(e!==void 0&&i!=null&&v(e,["parameters","personGeneration"],i),x(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=x(t,["negativePrompt"]);e!==void 0&&o!=null&&v(e,["parameters","negativePrompt"],o);const l=x(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&v(e,["parameters","enhancePrompt"],l),x(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(x(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(x(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function sre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["image"]);if(s!=null&&v(r,["instances[0]","image"],nre(s)),x(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=x(e,["config"]);return i!=null&&v(r,["config"],are(i,r)),r}function ire(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function ore(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function lre(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function cre(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],ire(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],ore(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],lre(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Zm(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>cre(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function ure(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const B=x(t,["nullable"]);B!=null&&v(e,["nullable"],B);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const L=x(t,["properties"]);L!=null&&v(e,["properties"],L);const M=x(t,["propertyOrdering"]);M!=null&&v(e,["propertyOrdering"],M);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const R=x(t,["title"]);R!=null&&v(e,["title"],R);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function Are(t){const e={},r=x(t,["featureSelectionPreference"]);return r!=null&&v(e,["featureSelectionPreference"],r),e}function dre(t){const e={},r=x(t,["method"]);r!=null&&v(e,["method"],r);const n=x(t,["category"]);n!=null&&v(e,["category"],n);const a=x(t,["threshold"]);return a!=null&&v(e,["threshold"],a),e}function fre(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function hre(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function mre(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],hre(r)),e}function pre(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function gre(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],pre(r)),e}function xre(){return{}}function vre(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function yre(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],vre(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function wre(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],yre(r)),e}function bre(){return{}}function lM(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>fre(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],mre(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],gre(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],xre());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],wre(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],bre());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function Cre(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function Ere(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function _re(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],Ere(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function Sre(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],Cre(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],_re(n)),e}function Tre(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function Bre(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],Tre(r)),e}function Nre(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],Bre(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function kre(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function Ire(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],Zm(Vi(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const E=x(e,["responseMimeType"]);E!=null&&v(n,["responseMimeType"],E);const B=x(e,["responseSchema"]);B!=null&&v(n,["responseSchema"],ure(p4(B)));const k=x(e,["responseJsonSchema"]);k!=null&&v(n,["responseJsonSchema"],k);const L=x(e,["routingConfig"]);L!=null&&v(n,["routingConfig"],L);const M=x(e,["modelSelectionConfig"]);M!=null&&v(n,["modelConfig"],Are(M));const P=x(e,["safetySettings"]);if(r!==void 0&&P!=null){let re=P;Array.isArray(re)&&(re=re.map(Y=>dre(Y))),v(r,["safetySettings"],re)}const R=x(e,["tools"]);if(r!==void 0&&R!=null){let re=Ym(R);Array.isArray(re)&&(re=re.map(Y=>lM(Xm(Y)))),v(r,["tools"],re)}const C=x(e,["toolConfig"]);r!==void 0&&C!=null&&v(r,["toolConfig"],Sre(C));const S=x(e,["labels"]);r!==void 0&&S!=null&&v(r,["labels"],S);const N=x(e,["cachedContent"]);r!==void 0&&N!=null&&v(r,["cachedContent"],VA(t,N));const Q=x(e,["responseModalities"]);Q!=null&&v(n,["responseModalities"],Q);const D=x(e,["mediaResolution"]);D!=null&&v(n,["mediaResolution"],D);const I=x(e,["speechConfig"]);I!=null&&v(n,["speechConfig"],Nre(g4(I)));const O=x(e,["audioTimestamp"]);O!=null&&v(n,["audioTimestamp"],O);const z=x(e,["thinkingConfig"]);return z!=null&&v(n,["thinkingConfig"],kre(z)),n}function ZI(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["contents"]);if(a!=null){let i=Gl(a);Array.isArray(i)&&(i=i.map(o=>Zm(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["generationConfig"],Ire(t,s,r)),r}function Fre(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["instances[]","task_type"],n);const a=x(t,["title"]);e!==void 0&&a!=null&&v(e,["instances[]","title"],a);const s=x(t,["outputDimensionality"]);e!==void 0&&s!=null&&v(e,["parameters","outputDimensionality"],s);const i=x(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["instances[]","mimeType"],i);const o=x(t,["autoTruncate"]);return e!==void 0&&o!=null&&v(e,["parameters","autoTruncate"],o),r}function Dre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["contents"]);a!=null&&v(r,["instances[]","content"],z8(t,a));const s=x(e,["config"]);return s!=null&&v(r,["config"],Fre(s,r)),r}function Rre(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const a=x(t,["negativePrompt"]);e!==void 0&&a!=null&&v(e,["parameters","negativePrompt"],a);const s=x(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const y=x(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const E=x(t,["addWatermark"]);e!==void 0&&E!=null&&v(e,["parameters","addWatermark"],E);const B=x(t,["imageSize"]);e!==void 0&&B!=null&&v(e,["parameters","sampleImageSize"],B);const k=x(t,["enhancePrompt"]);return e!==void 0&&k!=null&&v(e,["parameters","enhancePrompt"],k),r}function Lre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["config"]);return s!=null&&v(r,["config"],Rre(s,r)),r}function Fw(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],Qh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Ure(t){const e={},r=x(t,["maskMode"]);r!=null&&v(e,["maskMode"],r);const n=x(t,["segmentationClasses"]);n!=null&&v(e,["maskClasses"],n);const a=x(t,["maskDilation"]);return a!=null&&v(e,["dilation"],a),e}function Mre(t){const e={},r=x(t,["controlType"]);r!=null&&v(e,["controlType"],r);const n=x(t,["enableControlImageComputation"]);return n!=null&&v(e,["computeControl"],n),e}function Pre(t){const e={},r=x(t,["styleDescription"]);return r!=null&&v(e,["styleDescription"],r),e}function jre(t){const e={},r=x(t,["subjectType"]);r!=null&&v(e,["subjectType"],r);const n=x(t,["subjectDescription"]);return n!=null&&v(e,["subjectDescription"],n),e}function Ore(t){const e={},r=x(t,["referenceImage"]);r!=null&&v(e,["referenceImage"],Fw(r));const n=x(t,["referenceId"]);n!=null&&v(e,["referenceId"],n);const a=x(t,["referenceType"]);a!=null&&v(e,["referenceType"],a);const s=x(t,["maskImageConfig"]);s!=null&&v(e,["maskImageConfig"],Ure(s));const i=x(t,["controlImageConfig"]);i!=null&&v(e,["controlImageConfig"],Mre(i));const o=x(t,["styleImageConfig"]);o!=null&&v(e,["styleImageConfig"],Pre(o));const l=x(t,["subjectImageConfig"]);return l!=null&&v(e,["subjectImageConfig"],jre(l)),e}function Qre(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const a=x(t,["negativePrompt"]);e!==void 0&&a!=null&&v(e,["parameters","negativePrompt"],a);const s=x(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const y=x(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const E=x(t,["addWatermark"]);e!==void 0&&E!=null&&v(e,["parameters","addWatermark"],E);const B=x(t,["editMode"]);e!==void 0&&B!=null&&v(e,["parameters","editMode"],B);const k=x(t,["baseSteps"]);return e!==void 0&&k!=null&&v(e,["parameters","editConfig","baseSteps"],k),r}function Hre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["referenceImages"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Ore(l))),v(r,["instances[0]","referenceImages"],o)}const i=x(e,["config"]);return i!=null&&v(r,["config"],Qre(i,r)),r}function Vre(t,e){const r={},n=x(t,["includeRaiReason"]);e!==void 0&&n!=null&&v(e,["parameters","includeRaiReason"],n);const a=x(t,["outputMimeType"]);e!==void 0&&a!=null&&v(e,["parameters","outputOptions","mimeType"],a);const s=x(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&v(e,["parameters","outputOptions","compressionQuality"],s);const i=x(t,["enhanceInputImage"]);e!==void 0&&i!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=x(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=x(t,["numberOfImages"]);e!==void 0&&l!=null&&v(e,["parameters","sampleCount"],l);const u=x(t,["mode"]);return e!==void 0&&u!=null&&v(e,["parameters","mode"],u),r}function zre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["image"]);a!=null&&v(r,["instances[0]","image"],Fw(a));const s=x(e,["upscaleFactor"]);s!=null&&v(r,["parameters","upscaleConfig","upscaleFactor"],s);const i=x(e,["config"]);return i!=null&&v(r,["config"],Vre(i,r)),r}function Gre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function qre(t,e,r){const n={},a=x(e,["pageSize"]);r!==void 0&&a!=null&&v(r,["_query","pageSize"],a);const s=x(e,["pageToken"]);r!==void 0&&s!=null&&v(r,["_query","pageToken"],s);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],K8(t,o)),n}function Kre(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],qre(t,n,r)),r}function $re(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const s=x(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),r}function Wre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],$re(a,r)),r}function Xre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function Yre(t,e){const r={},n=x(t,["systemInstruction"]);e!==void 0&&n!=null&&v(e,["systemInstruction"],Zm(Vi(n)));const a=x(t,["tools"]);if(e!==void 0&&a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>lM(o))),v(e,["tools"],i)}const s=x(t,["generationConfig"]);return e!==void 0&&s!=null&&v(e,["generationConfig"],s),r}function Jre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["contents"]);if(a!=null){let i=Gl(a);Array.isArray(i)&&(i=i.map(o=>Zm(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],Yre(s,r)),r}function Zre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["contents"]);if(a!=null){let i=Gl(a);Array.isArray(i)&&(i=i.map(o=>Zm(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function ene(t){const e={},r=x(t,["uri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["videoBytes"]);n!=null&&v(e,["bytesBase64Encoded"],Qh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function tne(t,e){const r={},n=x(t,["numberOfVideos"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const a=x(t,["outputGcsUri"]);e!==void 0&&a!=null&&v(e,["parameters","storageUri"],a);const s=x(t,["fps"]);e!==void 0&&s!=null&&v(e,["parameters","fps"],s);const i=x(t,["durationSeconds"]);e!==void 0&&i!=null&&v(e,["parameters","durationSeconds"],i);const o=x(t,["seed"]);e!==void 0&&o!=null&&v(e,["parameters","seed"],o);const l=x(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const u=x(t,["resolution"]);e!==void 0&&u!=null&&v(e,["parameters","resolution"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["pubsubTopic"]);e!==void 0&&h!=null&&v(e,["parameters","pubsubTopic"],h);const m=x(t,["negativePrompt"]);e!==void 0&&m!=null&&v(e,["parameters","negativePrompt"],m);const g=x(t,["enhancePrompt"]);e!==void 0&&g!=null&&v(e,["parameters","enhancePrompt"],g);const b=x(t,["generateAudio"]);e!==void 0&&b!=null&&v(e,["parameters","generateAudio"],b);const y=x(t,["lastFrame"]);e!==void 0&&y!=null&&v(e,["instances[0]","lastFrame"],Fw(y));const E=x(t,["compressionQuality"]);return e!==void 0&&E!=null&&v(e,["parameters","compressionQuality"],E),r}function rne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["image"]);s!=null&&v(r,["instances[0]","image"],Fw(s));const i=x(e,["video"]);i!=null&&v(r,["instances[0]","video"],ene(i));const o=x(e,["config"]);return o!=null&&v(r,["config"],tne(o,r)),r}function nne(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function ane(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function sne(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function ine(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],nne(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],ane(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],sne(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function one(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>ine(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function lne(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function cne(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function une(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>cne(a))),v(e,["urlMetadata"],n)}return e}function Ane(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],one(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],lne(n));const a=x(t,["tokenCount"]);a!=null&&v(e,["tokenCount"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],une(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function eF(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Ane(l))),v(e,["candidates"],o)}const a=x(t,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const s=x(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function dne(t){const e={},r=x(t,["values"]);return r!=null&&v(e,["values"],r),e}function fne(){return{}}function hne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>dne(i))),v(e,["embeddings"],s)}return x(t,["metadata"])!=null&&v(e,["metadata"],fne()),e}function mne(t){const e={},r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["imageBytes"],Qh(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function cM(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const a=x(t,["contentType"]);return a!=null&&v(e,["contentType"],a),e}function pne(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],mne(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const a=x(t,["_self"]);return a!=null&&v(e,["safetyAttributes"],cM(a)),e}function gne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>pne(i))),v(e,["generatedImages"],s)}const a=x(t,["positivePromptSafetyAttributes"]);return a!=null&&v(e,["positivePromptSafetyAttributes"],cM(a)),e}function xne(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const a=x(t,["updateTime"]);return a!=null&&v(e,["updateTime"],a),e}function $_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["version"]);s!=null&&v(e,["version"],s);const i=x(t,["_self"]);i!=null&&v(e,["tunedModelInfo"],xne(i));const o=x(t,["inputTokenLimit"]);o!=null&&v(e,["inputTokenLimit"],o);const l=x(t,["outputTokenLimit"]);l!=null&&v(e,["outputTokenLimit"],l);const u=x(t,["supportedGenerationMethods"]);return u!=null&&v(e,["supportedActions"],u),e}function vne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["_self"]);if(a!=null){let s=$8(a);Array.isArray(s)&&(s=s.map(i=>$_(i))),v(e,["models"],s)}return e}function yne(){return{}}function wne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);n!=null&&v(e,["totalTokens"],n);const a=x(t,["cachedContentTokenCount"]);return a!=null&&v(e,["cachedContentTokenCount"],a),e}function bne(t){const e={},r=x(t,["video","uri"]);r!=null&&v(e,["uri"],r);const n=x(t,["video","encodedVideo"]);n!=null&&v(e,["videoBytes"],Qh(n));const a=x(t,["encoding"]);return a!=null&&v(e,["mimeType"],a),e}function Cne(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],bne(r)),e}function Ene(t){const e={},r=x(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Cne(i))),v(e,["generatedVideos"],s)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const a=x(t,["raiMediaFilteredReasons"]);return a!=null&&v(e,["raiMediaFilteredReasons"],a),e}function _ne(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const s=x(t,["error"]);s!=null&&v(e,["error"],s);const i=x(t,["response","generateVideoResponse"]);return i!=null&&v(e,["response"],Ene(i)),e}function Sne(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Tne(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Bne(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Nne(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Sne(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Tne(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Bne(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function kne(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>Nne(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Ine(t){const e={},r=x(t,["citations"]);return r!=null&&v(e,["citations"],r),e}function Fne(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function Dne(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Fne(a))),v(e,["urlMetadata"],n)}return e}function Rne(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],kne(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],Ine(n));const a=x(t,["finishMessage"]);a!=null&&v(e,["finishMessage"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],Dne(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function tF(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>Rne(d))),v(e,["candidates"],u)}const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const s=x(t,["responseId"]);s!=null&&v(e,["responseId"],s);const i=x(t,["modelVersion"]);i!=null&&v(e,["modelVersion"],i);const o=x(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function Lne(t){const e={},r=x(t,["truncated"]);r!=null&&v(e,["truncated"],r);const n=x(t,["token_count"]);return n!=null&&v(e,["tokenCount"],n),e}function Une(t){const e={},r=x(t,["values"]);r!=null&&v(e,["values"],r);const n=x(t,["statistics"]);return n!=null&&v(e,["statistics"],Lne(n)),e}function Mne(t){const e={},r=x(t,["billableCharacterCount"]);return r!=null&&v(e,["billableCharacterCount"],r),e}function Pne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Une(i))),v(e,["embeddings"],s)}const a=x(t,["metadata"]);return a!=null&&v(e,["metadata"],Mne(a)),e}function jne(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],Qh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function uM(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const a=x(t,["contentType"]);return a!=null&&v(e,["contentType"],a),e}function v4(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],jne(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const a=x(t,["_self"]);a!=null&&v(e,["safetyAttributes"],uM(a));const s=x(t,["prompt"]);return s!=null&&v(e,["enhancedPrompt"],s),e}function One(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>v4(i))),v(e,["generatedImages"],s)}const a=x(t,["positivePromptSafetyAttributes"]);return a!=null&&v(e,["positivePromptSafetyAttributes"],uM(a)),e}function Qne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>v4(s))),v(e,["generatedImages"],a)}return e}function Hne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>v4(s))),v(e,["generatedImages"],a)}return e}function Vne(t){const e={},r=x(t,["endpoint"]);r!=null&&v(e,["name"],r);const n=x(t,["deployedModelId"]);return n!=null&&v(e,["deployedModelId"],n),e}function zne(t){const e={},r=x(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const a=x(t,["updateTime"]);return a!=null&&v(e,["updateTime"],a),e}function Gne(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const a=x(t,["step"]);return a!=null&&v(e,["step"],a),e}function W_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["versionId"]);s!=null&&v(e,["version"],s);const i=x(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>Vne(m))),v(e,["endpoints"],h)}const o=x(t,["labels"]);o!=null&&v(e,["labels"],o);const l=x(t,["_self"]);l!=null&&v(e,["tunedModelInfo"],zne(l));const u=x(t,["defaultCheckpointId"]);u!=null&&v(e,["defaultCheckpointId"],u);const d=x(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>Gne(m))),v(e,["checkpoints"],h)}return e}function qne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["_self"]);if(a!=null){let s=$8(a);Array.isArray(s)&&(s=s.map(i=>W_(i))),v(e,["models"],s)}return e}function Kne(){return{}}function $ne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);return n!=null&&v(e,["totalTokens"],n),e}function Wne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["tokensInfo"]);return n!=null&&v(e,["tokensInfo"],n),e}function Xne(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["uri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["videoBytes"],Qh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Yne(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],Xne(r)),e}function Jne(t){const e={},r=x(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Yne(i))),v(e,["generatedVideos"],s)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const a=x(t,["raiMediaFilteredReasons"]);return a!=null&&v(e,["raiMediaFilteredReasons"],a),e}function Zne(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const s=x(t,["error"]);s!=null&&v(e,["error"],s);const i=x(t,["response"]);return i!=null&&v(e,["response"],Jne(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eae="Content-Type",tae="X-Server-Timeout",rae="User-Agent",X_="x-goog-api-client",nae="1.12.0",aae=`google-genai-sdk/${nae}`,sae="v1beta1",iae="v1beta",rF=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class oae{constructor(e){var r,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:sae,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:iae,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){const a=[this.getRequestUrlInternal(r)];return n&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,r,n);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))a.searchParams.append(i,String(o));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,r,e.abortSignal),this.unaryApiCall(a,s,e.httpMethod)}patchHttpOptions(e,r){const n=JSON.parse(JSON.stringify(e));for(const[a,s]of Object.entries(r))typeof s=="object"?n[a]=Object.assign(Object.assign({},n[a]),s):s!==void 0&&(n[a]=s);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,r,n);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,r,e.abortSignal),this.streamApiCall(a,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n){if(r&&r.timeout||n){const a=new AbortController,s=a.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const i=setTimeout(()=>a.abort(),r.timeout);i&&typeof i.unref=="function"&&i.unref()}n&&n.addEventListener("abort",()=>{a.abort()}),e.signal=s}return r&&r.extraBody!==null&&lae(e,r.extraBody),e.headers=await this.getHeadersInternal(r),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async a=>(await nF(a),new H_(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async a=>(await nF(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var r;return cm(this,arguments,function*(){const a=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield Aa(a.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(l,{stream:!0});try{const h=JSON.parse(u);if("error"in h){const m=JSON.parse(JSON.stringify(h.error)),g=m.status,b=m.code,y=`got status: ${g}. ${JSON.stringify(h)}`;if(b>=400&&b<600)throw new kw({message:y,status:b})}}catch(h){if(h.name==="ApiError")throw h}i+=u;let d=i.match(rF);for(;d;){const h=d[1];try{const m=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Aa(new H_(m)),i=i.slice(d[0].length),d=i.match(rF)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{a.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},r=aae+" "+this.clientOptions.userAgentExtra;return e[rae]=r,e[X_]=r,e[eae]="application/json",e}async getHeadersInternal(e){const r=new Headers;if(e&&e.headers){for(const[n,a]of Object.entries(e.headers))r.append(n,a);e.timeout&&e.timeout>0&&r.append(tae,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r),r}async uploadFile(e,r){var n;const a={};r!=null&&(a.mimeType=r.mimeType,a.name=r.name,a.displayName=r.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const s=this.clientOptions.uploader,i=await s.stat(e);a.sizeBytes=String(i.size);const o=(n=r==null?void 0:r.mimeType)!==null&&n!==void 0?n:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=o;const l=await this.fetchUploadUrl(a,r);return s.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r){var n;let a={};r!=null&&r.httpOptions?a=r.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},i=await this.request({path:sr("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:a});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(n=i==null?void 0:i.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function nF(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(n);throw r>=400&&r<600?new kw({message:a,status:r}):new Error(a)}}function lae(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))r=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(s,i){const o=Object.assign({},s);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const u=i[l],d=o[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?o[l]=n(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),o[l]=u)}return o}const a=n(r,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cae="mcp_used/unknown";let uae=!1;function AM(t){for(const e of t)if(Aae(e)||typeof e=="object"&&"inputSchema"in e)return!0;return uae}function dM(t){var e;const r=(e=t[X_])!==null&&e!==void 0?e:"";t[X_]=(r+` ${cae}`).trimStart()}function Aae(t){return t!==null&&typeof t=="object"&&t instanceof y4}function dae(t,e=100){return cm(this,arguments,function*(){let n,a=0;for(;a<e;){const s=yield Aa(t.listTools({cursor:n}));for(const i of s.tools)yield yield Aa(i),a++;if(!s.nextCursor)break;n=s.nextCursor}})}class y4{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new y4(e,r)}async initialize(){var e,r,n,a;if(this.mcpTools.length>0)return;const s={},i=[];for(const d of this.mcpClients)try{for(var o=!0,l=(r=void 0,Rg(dae(d))),u;u=await l.next(),e=u.done,!e;o=!0){a=u.value,o=!1;const h=a;i.push(h);const m=h.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=d}}catch(h){r={error:h}}finally{try{!o&&!e&&(n=l.return)&&await n.call(l)}finally{if(r)throw r.error}}this.mcpTools=i,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),oY(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[n.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const i=await a.callTool({name:n.name,arguments:n.args},void 0,s);r.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function fae(t,e,r){const n=new ZX;let a;r.data instanceof Blob?a=JSON.parse(await r.data.text()):a=JSON.parse(r.data);const s=ote(a);Object.assign(n,s),e(n)}class hae{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),i=gae(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${a}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${o}`;let u=()=>{};const d=new Promise(L=>{u=L}),h=e.callbacks,m=function(){u({})},g=this.apiClient,b={onopen:m,onmessage:L=>{fae(g,h.onmessage,L)},onerror:(r=h==null?void 0:h.onerror)!==null&&r!==void 0?r:function(L){},onclose:(n=h==null?void 0:h.onclose)!==null&&n!==void 0?n:function(L){}},y=this.webSocketFactory.create(l,pae(i),b);y.connect(),await d;const E=$n(this.apiClient,e.model),B=sM({model:E}),k=K_({setup:B});return y.send(JSON.stringify(k)),new mae(y,this.apiClient)}}class mae{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=see(e),n=iM(r);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=iee(e),n=K_(r);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const r=K_({playbackControl:e});this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(Z0.PLAY)}pause(){this.sendPlaybackControl(Z0.PAUSE)}stop(){this.sendPlaybackControl(Z0.STOP)}resetContext(){this.sendPlaybackControl(Z0.RESET_CONTEXT)}close(){this.conn.close()}}function pae(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function gae(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xae="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function vae(t,e,r){const n=new JX;let a;r.data instanceof Blob?a=await r.data.text():r.data instanceof ArrayBuffer?a=new TextDecoder().decode(r.data):a=r.data;const s=JSON.parse(a);if(t.isVertexAI()){const i=wte(s);Object.assign(n,i)}else{const i=Jee(s);Object.assign(n,i)}e(n)}class yae{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new hae(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,a,s,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&AM(e.config.tools)&&dM(h);const m=Eae(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const N=this.apiClient.getApiKey();let Q="BidiGenerateContent",D="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Q="BidiGenerateContentConstrained",D="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${Q}?${D}=${N}`}let g=()=>{};const b=new Promise(N=>{g=N}),y=e.callbacks,E=function(){var N;(N=y==null?void 0:y.onopen)===null||N===void 0||N.call(y),g({})},B=this.apiClient,k={onopen:E,onmessage:N=>{vae(B,y.onmessage,N)},onerror:(r=y==null?void 0:y.onerror)!==null&&r!==void 0?r:function(N){},onclose:(n=y==null?void 0:y.onclose)!==null&&n!==void 0?n:function(N){}},L=this.webSocketFactory.create(d,Cae(m),k);L.connect(),await b;let M=$n(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const N=this.apiClient.getProject(),Q=this.apiClient.getLocation();M=`projects/${N}/locations/${Q}/`+M}let P={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[cy.AUDIO]}:e.config.responseModalities=[cy.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],C=[];for(const N of R)if(this.isCallableTool(N)){const Q=N;C.push(await Q.tool())}else C.push(N);C.length>0&&(e.config.tools=C);const S={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=Dee(this.apiClient,S):P=tee(this.apiClient,S),delete P.config,L.send(JSON.stringify(P)),new bae(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const wae={turnComplete:!0};class bae{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=Gl(r.turns),e.isVertexAI()?n=n.map(a=>Zm(a)):n=n.map(a=>Iw(a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(xae)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},wae),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:Uee(e)}:r={realtimeInput:aee(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function Cae(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function Eae(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aF=10;function sF(t){var e,r,n;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const i of(r=t==null?void 0:t.tools)!==null&&r!==void 0?r:[])if(um(i)){a=!0;break}if(!a)return!0;const s=(n=t==null?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function um(t){return"callTool"in t&&typeof t.callTool=="function"}function _ae(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(a=>um(a)))!==null&&n!==void 0?n:!1}function Sae(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(a=>!um(a)))!==null&&n!==void 0?n:!1}function iF(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tae extends Oh{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,a,s,i,o;const l=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!_ae(r)||sF(r.config))return await this.generateContentInternal(l);if(Sae(r))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const h=Gl(l.contents),m=(s=(a=(n=l.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&s!==void 0?s:aF;let g=0;for(;g<m&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const b=u.candidates[0].content,y=[];for(const E of(o=(i=r.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(um(E)){const k=await E.callTool(u.functionCalls);y.push(...k)}g++,d={role:"user",parts:y},l.contents=Gl(l.contents),l.contents.push(b),l.contents.push(d),iF(l.config)&&(h.push(b),h.push(d))}return iF(l.config)&&(u.automaticFunctionCallingHistory=h),u},this.generateContentStream=async r=>{if(this.maybeMoveToResponseJsonSchem(r),sF(r.config)){const n=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var a;let s;const i=[];if(n!=null&&n.generatedImages)for(const l of n.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((a=l==null?void 0:l.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:i.push(l);let o;return s?o={generatedImages:i,positivePromptSafetyAttributes:s,sdkHttpResponse:n.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:n.sdkHttpResponse},o}),this.list=async r=>{var n;const i={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((n=i.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new Jx(Th.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async r=>{const n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));const a={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(a)},this.generateVideos=async r=>await this.generateVideosInternal(r)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,a;const s=(r=e.config)===null||r===void 0?void 0:r.tools;if(!s)return e;const i=await Promise.all(s.map(async l=>um(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&AM(e.config.tools)){const l=(a=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&a!==void 0?a:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),dM(u),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return o}async initAfcToolsMap(e){var r,n,a;const s=new Map;for(const i of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(um(i)){const o=i,l=await o.tool();for(const u of(a=l.functionDeclarations)!==null&&a!==void 0?a:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,o)}}return s}async processAfcStream(e){var r,n,a;const s=(a=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&a!==void 0?a:aF;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(u,d,h){var m,g;return cm(this,arguments,function*(){for(var b,y,E,B;o<s;){i&&(o++,i=!1);const P=yield Aa(u.processParamsMaybeAddMcpUsage(h)),R=yield Aa(u.generateContentStreamInternal(P)),C=[],S=[];try{for(var k=!0,L=(y=void 0,Rg(R)),M;M=yield Aa(L.next()),b=M.done,!b;k=!0){B=M.value,k=!1;const N=B;if(yield yield Aa(N),N.candidates&&(!((m=N.candidates[0])===null||m===void 0)&&m.content)){S.push(N.candidates[0].content);for(const Q of(g=N.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(o<s&&Q.functionCall){if(!Q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(Q.functionCall.name)){const D=yield Aa(d.get(Q.functionCall.name).callTool([Q.functionCall]));C.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${Q.functionCall.name}`)}}}}catch(N){y={error:N}}finally{try{!k&&!b&&(E=L.return)&&(yield Aa(E.call(L)))}finally{if(y)throw y.error}}if(C.length>0){i=!0;const N=new qp;N.candidates=[{content:{role:"user",parts:C}}],yield yield Aa(N);const Q=[];Q.push(...S),Q.push({role:"user",parts:C});const D=Gl(h.contents).concat(Q);h.contents=D}else break}})}(this,l,e)}async generateContentInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=ZI(this.apiClient,e);return o=sr("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=tF(d),m=new qp;return Object.assign(m,h),m})}else{const u=JI(this.apiClient,e);return o=sr("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=eF(d),m=new qp;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=ZI(this.apiClient,e);return o=sr("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),i.then(function(h){return cm(this,arguments,function*(){var m,g,b,y;try{for(var E=!0,B=Rg(h),k;k=yield Aa(B.next()),m=k.done,!m;E=!0){y=k.value,E=!1;const L=y,M=tF(yield Aa(L.json()));M.sdkHttpResponse={headers:L.headers};const P=new qp;Object.assign(P,M),yield yield Aa(P)}}catch(L){g={error:L}}finally{try{!E&&!m&&(b=B.return)&&(yield Aa(b.call(B)))}finally{if(g)throw g.error}}})})}else{const u=JI(this.apiClient,e);return o=sr("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(h){return cm(this,arguments,function*(){var m,g,b,y;try{for(var E=!0,B=Rg(h),k;k=yield Aa(B.next()),m=k.done,!m;E=!0){y=k.value,E=!1;const L=y,M=eF(yield Aa(L.json()));M.sdkHttpResponse={headers:L.headers};const P=new qp;Object.assign(P,M),yield yield Aa(P)}}catch(L){g={error:L}}finally{try{!E&&!m&&(b=B.return)&&(yield Aa(b.call(B)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Dre(this.apiClient,e);return o=sr("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Pne(d),m=new II;return Object.assign(m,h),m})}else{const u=qte(this.apiClient,e);return o=sr("{model}:batchEmbedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=hne(d),m=new II;return Object.assign(m,h),m})}}async generateImagesInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Lre(this.apiClient,e);return o=sr("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=One(d),m=new FI;return Object.assign(m,h),m})}else{const u=$te(this.apiClient,e);return o=sr("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=gne(d),m=new FI;return Object.assign(m,h),m})}}async editImageInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=Hre(this.apiClient,e);return s=sr("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=Qne(l),d=new qX;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=zre(this.apiClient,e);return s=sr("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=Hne(l),d=new KX;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Gre(this.apiClient,e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>W_(d))}else{const u=Wte(this.apiClient,e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>$_(d))}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Kre(this.apiClient,e);return o=sr("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=qne(d),m=new DI;return Object.assign(m,h),m})}else{const u=Yte(this.apiClient,e);return o=sr("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=vne(d),m=new DI;return Object.assign(m,h),m})}}async update(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Wre(this.apiClient,e);return o=sr("{model}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>W_(d))}else{const u=Zte(this.apiClient,e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>$_(d))}}async delete(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Xre(this.apiClient,e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=Kne(),h=new RI;return Object.assign(h,d),h})}else{const u=ere(this.apiClient,e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(()=>{const d=yne(),h=new RI;return Object.assign(h,d),h})}}async countTokens(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Jre(this.apiClient,e);return o=sr("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=$ne(d),m=new LI;return Object.assign(m,h),m})}else{const u=rre(this.apiClient,e);return o=sr("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=wne(d),m=new LI;return Object.assign(m,h),m})}}async computeTokens(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=Zre(this.apiClient,e);return s=sr("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=Wne(l),d=new $X;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=rne(this.apiClient,e);return o=sr("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Zne(d),m=new uy;return Object.assign(m,h),m})}else{const u=sre(this.apiClient,e);return o=sr("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>{const h=_ne(d),m=new uy;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Nae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function kae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["operationName"],r);const n=x(t,["resourceName"]);n!=null&&v(e,["_url","resourceName"],n);const a=x(t,["config"]);return a!=null&&v(e,["config"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iae extends Oh{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=r.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:a,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async get(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=r.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:a,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Nae(e);return o=sr("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i}else{const u=Bae(e);return o=sr("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i}}async fetchPredictVideosOperationInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=kae(e);return s=sr("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fae(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function fM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],Fae(r)),e}function Dae(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],fM(n)),e}function Rae(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Dae(a))),v(e,["speakerVoiceConfigs"],n)}return e}function Lae(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],fM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],Rae(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function Uae(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Mae(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Pae(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function jae(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Uae(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Mae(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Pae(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Oae(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>jae(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Qae(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function Hae(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function Vae(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],Hae(r)),e}function zae(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function Gae(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],zae(r)),e}function qae(){return{}}function Kae(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Qae(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],Vae(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],Gae(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],qae());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function $ae(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oF(){return{}}function Wae(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function Xae(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],Wae(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function Yae(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function Jae(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],Yae(n)),e}function Zae(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function ese(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],Lae(x4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],Oae(Vi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=Ym(b);Array.isArray(P)&&(P=P.map(R=>Kae(Xm(R)))),v(e,["setup","tools"],P)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],$ae(y));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],oF());const B=x(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],oF());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],Xae(k));const L=x(t,["contextWindowCompression"]);e!==void 0&&L!=null&&v(e,["setup","contextWindowCompression"],Jae(L));const M=x(t,["proactivity"]);return e!==void 0&&M!=null&&v(e,["setup","proactivity"],Zae(M)),r}function tse(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],$n(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],ese(a,r)),r}function rse(t,e,r){const n={},a=x(e,["expireTime"]);r!==void 0&&a!=null&&v(r,["expireTime"],a);const s=x(e,["newSessionExpireTime"]);r!==void 0&&s!=null&&v(r,["newSessionExpireTime"],s);const i=x(e,["uses"]);r!==void 0&&i!=null&&v(r,["uses"],i);const o=x(e,["liveConnectConstraints"]);r!==void 0&&o!=null&&v(r,["bidiGenerateContentSetup"],tse(t,o));const l=x(e,["lockAdditionalFields"]);return r!==void 0&&l!=null&&v(r,["fieldMask"],l),n}function nse(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],rse(t,n,r)),r}function ase(t){const e={},r=x(t,["name"]);return r!=null&&v(e,["name"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sse(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const a=Object.keys(n).map(s=>`${r}.${s}`);e.push(...a)}else e.push(r)}return e.join(",")}function ise(t,e){let r=null;const n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const s=n.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,r=s):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(r){const s=sse(r);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];a.length>0&&(o=a.map(u=>i.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class ose extends Oh{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=nse(this.apiClient,e);s=sr("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=ise(o,e.config);return a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),a.then(u=>ase(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lse(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function cse(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function use(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],cse(r,e)),e}function Ase(t){const e={},r=x(t,["textInput"]);r!=null&&v(e,["textInput"],r);const n=x(t,["output"]);return n!=null&&v(e,["output"],n),e}function dse(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=x(t,["examples"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Ase(a))),v(e,["examples","examples"],n)}return e}function fse(t,e){const r={};if(x(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const n=x(t,["tunedModelDisplayName"]);if(e!==void 0&&n!=null&&v(e,["displayName"],n),x(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=x(t,["epochCount"]);e!==void 0&&a!=null&&v(e,["tuningTask","hyperparameters","epochCount"],a);const s=x(t,["learningRateMultiplier"]);if(s!=null&&v(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),x(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=x(t,["batchSize"]);e!==void 0&&i!=null&&v(e,["tuningTask","hyperparameters","batchSize"],i);const o=x(t,["learningRate"]);return e!==void 0&&o!=null&&v(e,["tuningTask","hyperparameters","learningRate"],o),r}function hse(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["tuningTask","trainingData"],dse(n));const a=x(t,["config"]);return a!=null&&v(e,["config"],fse(a,e)),e}function mse(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function pse(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function gse(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],pse(r,e)),e}function xse(t,e){const r={},n=x(t,["gcsUri"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],n);const a=x(t,["vertexDatasetResource"]);if(e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),x(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function vse(t,e){const r={},n=x(t,["gcsUri"]);n!=null&&v(r,["validationDatasetUri"],n);const a=x(t,["vertexDatasetResource"]);return e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),r}function yse(t,e){const r={},n=x(t,["validationDataset"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec"],vse(n,r));const a=x(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&v(e,["tunedModelDisplayName"],a);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const i=x(t,["epochCount"]);e!==void 0&&i!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=x(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=x(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=x(t,["adapterSize"]);if(e!==void 0&&u!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),x(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function wse(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],xse(n,e));const a=x(t,["config"]);return a!=null&&v(e,["config"],yse(a,e)),e}function bse(t){const e={},r=x(t,["name"]);r!=null&&v(e,["model"],r);const n=x(t,["name"]);return n!=null&&v(e,["endpoint"],n),e}function hM(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],G8(a));const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["tuningTask","startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["tuningTask","completeTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["description"]);u!=null&&v(e,["description"],u);const d=x(t,["baseModel"]);d!=null&&v(e,["baseModel"],d);const h=x(t,["_self"]);h!=null&&v(e,["tunedModel"],bse(h));const m=x(t,["distillationSpec"]);m!=null&&v(e,["distillationSpec"],m);const g=x(t,["experiment"]);g!=null&&v(e,["experiment"],g);const b=x(t,["labels"]);b!=null&&v(e,["labels"],b);const y=x(t,["pipelineJob"]);y!=null&&v(e,["pipelineJob"],y);const E=x(t,["satisfiesPzi"]);E!=null&&v(e,["satisfiesPzi"],E);const B=x(t,["satisfiesPzs"]);B!=null&&v(e,["satisfiesPzs"],B);const k=x(t,["serviceAccount"]);k!=null&&v(e,["serviceAccount"],k);const L=x(t,["tunedModelDisplayName"]);return L!=null&&v(e,["tunedModelDisplayName"],L),e}function Cse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>hM(i))),v(e,["tuningJobs"],s)}return e}function Ese(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["metadata"]);a!=null&&v(e,["metadata"],a);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const i=x(t,["error"]);return i!=null&&v(e,["error"],i),e}function _se(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const a=x(t,["step"]);a!=null&&v(e,["step"],a);const s=x(t,["endpoint"]);return s!=null&&v(e,["endpoint"],s),e}function Sse(t){const e={},r=x(t,["model"]);r!=null&&v(e,["model"],r);const n=x(t,["endpoint"]);n!=null&&v(e,["endpoint"],n);const a=x(t,["checkpoints"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>_se(i))),v(e,["checkpoints"],s)}return e}function Y_(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],G8(a));const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["endTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["error"]);u!=null&&v(e,["error"],u);const d=x(t,["description"]);d!=null&&v(e,["description"],d);const h=x(t,["baseModel"]);h!=null&&v(e,["baseModel"],h);const m=x(t,["tunedModel"]);m!=null&&v(e,["tunedModel"],Sse(m));const g=x(t,["supervisedTuningSpec"]);g!=null&&v(e,["supervisedTuningSpec"],g);const b=x(t,["tuningDataStats"]);b!=null&&v(e,["tuningDataStats"],b);const y=x(t,["encryptionSpec"]);y!=null&&v(e,["encryptionSpec"],y);const E=x(t,["partnerModelTuningSpec"]);E!=null&&v(e,["partnerModelTuningSpec"],E);const B=x(t,["distillationSpec"]);B!=null&&v(e,["distillationSpec"],B);const k=x(t,["experiment"]);k!=null&&v(e,["experiment"],k);const L=x(t,["labels"]);L!=null&&v(e,["labels"],L);const M=x(t,["pipelineJob"]);M!=null&&v(e,["pipelineJob"],M);const P=x(t,["satisfiesPzi"]);P!=null&&v(e,["satisfiesPzi"],P);const R=x(t,["satisfiesPzs"]);R!=null&&v(e,["satisfiesPzs"],R);const C=x(t,["serviceAccount"]);C!=null&&v(e,["serviceAccount"],C);const S=x(t,["tunedModelDisplayName"]);return S!=null&&v(e,["tunedModelDisplayName"],S),e}function Tse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>Y_(i))),v(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bse extends Oh{constructor(e){super(),this.apiClient=e,this.get=async r=>await this.getInternal(r),this.list=async(r={})=>new Jx(Th.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.tune=async r=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(r);{const n=await this.tuneMldevInternal(r);let a="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?a=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(a=n.name.split("/operations/")[0]),{name:a,state:Q_.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=mse(e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>Y_(d))}else{const u=lse(e);return o=sr("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>hM(d))}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=gse(e);return o=sr("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Tse(d),m=new MI;return Object.assign(m,h),m})}else{const u=use(e);return o=sr("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Cse(d),m=new MI;return Object.assign(m,h),m})}}async tuneInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=wse(e);return s=sr("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>Y_(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=hse(e);return s=sr("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>Ese(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nse{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const kse=1024*1024*8,Ise=3,Fse=1e3,Dse=2,ZC="x-goog-upload-status";async function Rse(t,e,r){var n,a,s;let i=0,o=0,l=new H_(new Response),u="upload";for(i=t.size;o<i;){const h=Math.min(kse,i-o),m=t.slice(o,o+h);o+h>=i&&(u+=", finalize");let g=0,b=Fse;for(;g<Ise&&(l=await r.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(h)}}}),!(!((n=l==null?void 0:l.headers)===null||n===void 0)&&n[ZC]));)g++,await Use(b),b=b*Dse;if(o+=h,((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[ZC])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[ZC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function Lse(t){return{size:t.size,type:t.type}}function Use(t){return new Promise(e=>setTimeout(e,t))}class Mse{async upload(e,r,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Rse(e,r,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Lse(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pse{create(e,r,n){return new jse(e,r,n)}}class jse{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lF="x-goog-api-key";class Ose{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(lF)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(lF,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qse="gl-node/";let ix=class{constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const n=GX(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const a=new Ose(this.apiKey);this.apiClient=new oae({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Qse+"web",uploader:new Mse,downloader:new Nse}),this.models=new Tae(this.apiClient),this.live=new yae(this.apiClient,a,new Pse),this.batches=new hJ(this.apiClient),this.chats=new xZ(this.models,this.apiClient),this.caches=new mZ(this.apiClient),this.files=new IZ(this.apiClient),this.operations=new Iae(this.apiClient),this.authTokens=new ose(this.apiClient),this.tunings=new Bse(this.apiClient)}};const cF="apiCallLogs",Hse="lir-sessionUser",Kl=t=>{try{const e=localStorage.getItem(Hse);if(!e){console.warn("No se pudo registrar la llamada a la API: no hay usuario en sesin.");return}const r=JSON.parse(e),n=localStorage.getItem(cF),a=n?JSON.parse(n):[],i=[{id:crypto.randomUUID(),timestamp:new Date().toISOString(),userId:r.id,userEmail:r.email,module:t},...a].slice(0,2e3);localStorage.setItem(cF,JSON.stringify(i)),window.dispatchEvent(new Event("storage"))}catch(e){console.error("Error al registrar la llamada a la API:",e)}},Dw="planificaciones",mM="actividades_calendario",pM="eventos_calendario",gM=t=>{var r,n,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((a=(n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||e.fechaCreacion}},Vse=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:cr.fromDate(new Date),fechaActualizacion:cr.fromDate(new Date)};return(await Ca(Ft(Tt,Dw),r)).id}catch(r){throw console.error("Error al guardar planificacin:",r),new Error("No se pudo guardar la planificacin")}},zse=async(t,e,r)=>{try{const n=yr(Tt,Dw,t),a=await Kx(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificacin");await $x(n,{...e,fechaActualizacion:cr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificacin:",n),new Error("No se pudo actualizar la planificacin")}},Gse=async(t,e)=>{try{const r=yr(Tt,Dw,t),n=await Kx(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar esta planificacin");await mi(r)}catch(r){throw console.error("Error al eliminar planificacin:",r),new Error("No se pudo eliminar la planificacin")}},qse=(t,e)=>{const r=er(Ft(Tt,Dw),Fn("userId","==",t),gn("fechaCreacion","desc"));return Tr(r,n=>{const a=n.docs.map(gM);e(a)},n=>{console.error("Error en suscripcin a planificaciones:",n)})},Kse=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:cr.fromDate(new Date),fechaActualizacion:cr.fromDate(new Date)};return(await Ca(Ft(Tt,mM),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},$se=(t,e)=>{const r=er(Ft(Tt,mM),Fn("userId","==",t),gn("fecha","desc"));return Tr(r,n=>{const a=n.docs.map(gM);e(a)},n=>{console.error("Error en suscripcin a actividades:",n)})},Wse=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:cr.fromDate(new Date)};return(await Ca(Ft(Tt,pM),r)).id}catch(r){throw console.error("Error al guardar evento:",r),new Error("No se pudo guardar el evento")}},Xse=async(t,e,r,n)=>{try{const a=er(Ft(Tt,pM),Fn("userId","==",t),Fn("date","==",e),Fn("type","==",Xr.ACTIVIDAD_FOCALIZADA),TA(1));return(await cs(a)).docs.some(i=>{const o=i.data();return o.responsables===r&&o.ubicacion===n})}catch(a){return console.error("Error al verificar evento existente:",a),!1}},Yse={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_APP_ID:"1:1022861144167:web:7c277dd701dad5986864c2",VITE_FIREBASE_AUTH_DOMAIN:"planificador-145df.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-LKJRFMVC9F",VITE_FIREBASE_MESSAGING_SENDER_ID:"1022861144167",VITE_FIREBASE_PROJECT_ID:"planificador-145df",VITE_FIREBASE_STORAGE_BUCKET:"planificador-145df.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",VITE_GOOGLE_AI_API_KEY:void 0},Jse=t=>{const[e,r]=ee.useState([]),[n,a]=ee.useState(!0),[s,i]=ee.useState(null);ee.useEffect(()=>t?qse(t,h=>{r(h),a(!1)}):void 0,[t]);const o=ee.useCallback(async d=>{try{i(null),await Vse(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=ee.useCallback(async(d,h)=>{try{i(null),await zse(d,h,t)}catch(m){throw i(m instanceof Error?m.message:"Error al actualizar"),m}},[t]),u=ee.useCallback(async d=>{try{i(null),await Gse(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]);return{planificaciones:e,loading:n,error:s,save:o,update:l,remove:u}},Zse=t=>{const[e,r]=ee.useState([]),[n,a]=ee.useState(!0),[s,i]=ee.useState(null);ee.useEffect(()=>t?$se(t,u=>{r(u),a(!1)}):void 0,[t]);const o=ee.useCallback(async l=>{try{return i(null),await Kse(l,t)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[t]);return{actividades:e,loading:n,error:s,save:o}},eie=({lesson:t,onClose:e,onSave:r,isLoading:n=!1})=>{const[a,s]=ee.useState(t),i=l=>{s({...a,[l.target.name]:l.target.value})},o=async()=>{try{await r(a),e()}catch(l){console.error("Error al guardar leccin:",l)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Leccin"}),c.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([l,u])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),c.jsx("textarea",{name:l,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},l))}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),c.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},tie=({plan:t,onEditLesson:e,onUseLesson:r,isLoading:n=!1})=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",t.indicadoresEvaluacion]})]}),c.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((a,s)=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",s+1,": ",a.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo:"})," ",a.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",a.contenidosConceptuales]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",a.habilidadesBloom]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",a.perfilEgreso]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",a.asignaturasInterdisciplinariedad]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:()=>e(s,a),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),c.jsx("button",{onClick:()=>r(a,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},s))})]}),rie=({plan:t,onBack:e,onSave:r,isLoading:n=!1})=>{const[a,s]=ee.useState(t),[i,o]=ee.useState(!1),l=d=>{const{name:h,value:m}=d.target,[g,b]=h.split(".");s(g==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[b]:m}}):y=>({...y,[h]:m}))},u=async()=>{o(!0);try{await r(a)}catch(d){console.error("Error al guardar plan de clase:",d)}finally{o(!1)}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),c.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:n||i,children:" Volver"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),c.jsx("textarea",{name:"momentosClase.inicio",value:a.momentosClase.inicio,onChange:l,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),c.jsx("textarea",{name:"momentosClase.desarrollo",value:a.momentosClase.desarrollo,onChange:l,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),c.jsx("textarea",{name:"momentosClase.cierre",value:a.momentosClase.cierre,onChange:l,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]})]}),c.jsx("div",{className:"text-right mt-6",children:c.jsxs("button",{onClick:u,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2 ml-auto",disabled:n||i,children:[i&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})})]})},nie=({userId:t})=>{const{actividades:e,save:r}=Zse(t),[n,a]=ee.useState("list"),[s,i]=ee.useState(null),[o,l]=ee.useState(!1),[u,d]=ee.useState(!1),h={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[m,g]=ee.useState(h);ee.useEffect(()=>{n==="summary"&&s&&b()},[n,s,t]);const b=async()=>{if(s)try{const R=await Xse(t,s.fecha,s.nombre,s.ubicacion);d(R)}catch(R){console.error("Error al verificar evento en calendario:",R)}},y=R=>{const{name:C,value:S}=R.target;g(N=>({...N,[C]:S}))},E=(R,C,S)=>{g(N=>({...N,tareas:N.tareas.map(Q=>Q.id===R?{...Q,[C]:S}:Q)}))},B=()=>{g(R=>({...R,tareas:[...R.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},k=R=>{g(C=>({...C,tareas:C.tareas.filter(S=>S.id!==R)}))},L=async R=>{R.preventDefault(),l(!0);const C=`Basado en la siguiente informacin de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${m.nombre}
    - Descripcin: ${m.descripcion}
    - Tareas: ${m.tareas.map(S=>S.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propsito principal de la actividad.`;try{Kl("Planificacin - Actividad Calendario");const N=await new ix({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:C}),Q={...m,objetivo:N.text.replace(/(\*\*|\*)/g,"")},D=await r(Q),I={...Q,id:D};i(I),a("summary")}catch(S){console.error("Error al generar objetivo con IA:",S),alert("Hubo un error al generar el objetivo. La actividad se guardar sin l.");try{const N={...m,objetivo:"No generado"},Q=await r(N),D={...N,id:Q};i(D),a("summary")}catch(N){console.error("Error al guardar actividad:",N),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},M=async R=>{if(!R)return;const C={date:R.fecha,type:Xr.ACTIVIDAD_FOCALIZADA,responsables:R.nombre,ubicacion:R.ubicacion,horario:R.hora};try{await Wse(C,t),d(!0),alert("Actividad aadida al Calendario Acadmico.")}catch(S){console.error("Error adding to calendar:",S),alert("Hubo un error al agregar la actividad al calendario.")}},P="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsxs("form",{onSubmit:L,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Informacin General"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{name:"nombre",value:m.nombre,onChange:y,placeholder:"Nombre de la Actividad",className:P,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"fecha",type:"date",value:m.fecha,onChange:y,className:P,required:!0,disabled:o}),c.jsx("input",{name:"hora",type:"time",value:m.hora,onChange:y,className:P,required:!0,disabled:o})]}),c.jsx("textarea",{name:"descripcion",value:m.descripcion,onChange:y,placeholder:"Descripcin (objetivos, contenidos, metodologa)",rows:4,className:P,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"ubicacion",value:m.ubicacion,onChange:y,placeholder:"Ubicacin",className:P,required:!0,disabled:o}),c.jsx("input",{name:"participantes",value:m.participantes,onChange:y,placeholder:"Participantes",className:P,required:!0,disabled:o})]}),c.jsx("textarea",{name:"recursosGenerales",value:m.recursosGenerales,onChange:y,placeholder:"Recursos Generales Necesarios",rows:2,className:P,disabled:o})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),c.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:m.tareas.map((R,C)=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[c.jsx("button",{type:"button",onClick:()=>k(R.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:""}),c.jsx("textarea",{value:R.descripcion,onChange:S=>E(R.id,"descripcion",S.target.value),placeholder:`Descripcin de la Tarea ${C+1}`,rows:2,className:P,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx("input",{value:R.responsable,onChange:S=>E(R.id,"responsable",S.target.value),placeholder:"Responsable",className:P,required:!0,disabled:o}),c.jsx("input",{value:R.recursos,onChange:S=>E(R.id,"recursos",S.target.value),placeholder:"Recursos Necesarios",className:P,disabled:o})]})]},R.id))})]}),c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[c.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),c.jsx("p",{className:"text-sm",children:"Este objetivo se generar automticamente a partir de la descripcin y las tareas ingresadas. Una vez guardada la actividad, podr revisar y ajustar el objetivo propuesto por el sistema."})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-lg",children:"Actividad Planificada con xito!"}),c.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuacin."})]})]}),c.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{children:s.nombre})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),c.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Descripcin:"}),c.jsx("p",{children:s.descripcion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Ubicacin:"}),c.jsx("span",{children:s.ubicacion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),c.jsx("span",{children:s.participantes})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),c.jsx("p",{children:s.recursosGenerales})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),c.jsx("p",{children:s.objetivo})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:"Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),c.jsx("button",{onClick:()=>M(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?" Aadido al Calendario":"Aadir al Calendario"})]})]}),c.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),c.jsx("button",{onClick:()=>{a("form"),g(h)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),c.jsx("div",{className:"space-y-3",children:e.length>0?e.map(R=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:R.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(R.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",R.ubicacion]})]},R.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},aie=({currentUser:t})=>{const e=t.email||t.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=Jse(e),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,u]=ee.useState(o),[d,h]=ee.useState(null),[m,g]=ee.useState(!1),[b,y]=ee.useState(null),[E,B]=ee.useState("unidad"),[k,L]=ee.useState(null),[M,P]=ee.useState(null),R=ee.useMemo(()=>t.asignaturas||[],[t.asignaturas]),C=ee.useMemo(()=>{const G=t.cursos||[],W=new Set;return G.forEach(ie=>{ie.startsWith("1")?W.add("1 Medio"):ie.startsWith("2")?W.add("2 Medio"):ie.startsWith("3")?W.add("3 Medio"):ie.startsWith("4")&&W.add("4 Medio")}),Array.from(W)},[t.cursos]);ee.useEffect(()=>{u(G=>({...G,asignatura:R[0]||"",nivel:C[0]||""}))},[R,C]);const S=G=>{const{name:W,value:ie}=G.target;u(j=>({...j,[W]:W==="cantidadClases"?parseInt(ie,10):ie}))},N=()=>{const{asignatura:G,nivel:W,nombreUnidad:ie,contenidos:j,cantidadClases:X,observaciones:Z,ideasParaUnidad:te}=l;return`Eres un experto diseador curricular para la educacin media tcnico profesional en Chile. Tu tarea es generar una planificacin de unidad didctica completa en formato JSON estructurado, basndote en la informacin proporcionada.

    **Informacin Base:**
    - Asignatura: ${G}
    - Nivel: ${W}
    - Nombre de la Unidad: "${ie}"
    - Contenidos clave a trabajar (insumo principal): "${j}"
    - Cantidad de clases para la unidad: ${X}
    - Ideas y perspectiva del docente para la unidad: "${te||"Ninguna. S creativo."}"
    - Observaciones y nfasis del docente: "${Z||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluacin general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${X} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje especfico para la leccin, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarn en la leccin.
        - **habilidadesBloom**: La habilidad principal de la Taxonoma de Bloom que se trabajar (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la leccin con una habilidad del perfil de egreso (ej: "Pensamiento crtico", "Colaboracin").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el nmero de clase entre parntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podra realizar un trabajo interdisciplinario.

    Asegrate de que el contenido generado sea coherente, pedaggicamente slido y est directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},Q=async G=>{if(G.preventDefault(),g(!0),y(null),console.log(" Debug API Key:"),console.log("VITE_GOOGLE_AI_API_KEY:",void 0),console.log("VITE_GEMINI_API_KEY:","AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"),console.log("Todas las variables env:",Yse),!l.contenidos||!l.nombreUnidad){y("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),g(!1);return}try{Kl("Planificacin - Unidad");const W=new ix({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),ie=N(),j={type:pn.OBJECT,properties:{objetivosAprendizaje:{type:pn.STRING},indicadoresEvaluacion:{type:pn.STRING},detallesLeccion:{type:pn.ARRAY,items:{type:pn.OBJECT,properties:{objetivosAprendizaje:{type:pn.STRING},contenidosConceptuales:{type:pn.STRING},habilidadesBloom:{type:pn.STRING},perfilEgreso:{type:pn.STRING},actividades:{type:pn.STRING},asignaturasInterdisciplinariedad:{type:pn.STRING}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},X=await W.models.generateContent({model:"gemini-2.5-flash",contents:ie,config:{responseMimeType:"application/json",responseSchema:j}}),Z=JSON.parse(X.text),te={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:Z.objetivosAprendizaje,indicadoresEvaluacion:Z.indicadoresEvaluacion,detallesLeccion:Z.detallesLeccion};if(d)await a(d.id,te),h({...te,id:d.id});else{const ce=await n(te);h({...te,id:ce})}}catch(W){console.error("Error al generar planificacin con IA",W),y("Ocurri un error al contactar con la IA. Verifique la configuracin y reintente.")}finally{g(!1)}},D=async(G,W)=>{g(!0),y(null);const ie=`A partir de la siguiente informacin de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${W.asignatura}
    - Nivel: ${W.nivel}
    - Objetivo de la clase: ${G.objetivosAprendizaje}
    - Contenidos: ${G.contenidosConceptuales}
    - Actividades sugeridas: ${G.actividades}
    
    Responde SLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{Kl("Planificacin - Utilizar Clase");const j=new ix({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),X={type:pn.OBJECT,properties:{inicio:{type:pn.STRING},desarrollo:{type:pn.STRING},cierre:{type:pn.STRING}},required:["inicio","desarrollo","cierre"]},Z=await j.models.generateContent({model:"gemini-2.5-flash",contents:ie,config:{responseMimeType:"application/json",responseSchema:X}}),te=JSON.parse(Z.text),ce={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:W.asignatura,nivel:W.nivel,contenidos:G.contenidosConceptuales,observaciones:"",nombreClase:G.actividades,duracionClase:80,momentosClase:te,detalleLeccionOrigen:G};await n(ce),alert('Plan de clase generado y guardado en la pestaa "Clase"!'),B("clase")}catch(j){console.error("Error al generar plan de clase con IA",j),y("No se pudo generar el plan de clase. Intntelo de nuevo.")}finally{g(!1)}},I=G=>{G.tipo==="Unidad"&&(u({asignatura:G.asignatura,nivel:G.nivel,nombreUnidad:G.nombreUnidad,contenidos:G.contenidos,cantidadClases:G.cantidadClases,observaciones:G.observaciones,ideasParaUnidad:G.ideasParaUnidad||""}),h(G),window.scrollTo({top:0,behavior:"smooth"}))},O=async G=>{if(window.confirm("Est seguro de que desea eliminar esta planificacin?"))try{await s(G),(d==null?void 0:d.id)===G&&(h(null),u(o))}catch(W){console.error("Error al eliminar planificacin:",W),alert("Error al eliminar la planificacin. Por favor, intente nuevamente.")}},z=(G,W)=>{d&&P({planId:d.id,lessonIndex:G,lessonData:W})},re=async G=>{if(M)try{const{planId:W,lessonIndex:ie}=M,j=r.find(te=>te.id===W&&te.tipo==="Unidad");if(!j)return;const X=[...j.detallesLeccion];X[ie]=G;const Z={...j,detallesLeccion:X};await a(W,Z),h(Z),P(null)}catch(W){console.error("Error al actualizar leccin:",W),alert("Error al actualizar la leccin. Por favor, intente nuevamente.")}},Y="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ae=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificacin de unidad estructurada."}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:l.asignatura,onChange:S,className:Y,disabled:m,children:R.length>0?R.map(G=>c.jsx("option",{value:G,children:G},G)):c.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:l.nivel,onChange:S,className:Y,disabled:m,children:C.length>0?C.map(G=>c.jsx("option",{value:G,children:G},G)):c.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:S,className:Y,placeholder:"Ej: La Clula y sus procesos",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:S,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificacin debe abordar.",className:Y,disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),c.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:S,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificacin (ej: enfocar en trabajo colaborativo, usar casos prcticos, conectar con la actualidad).",className:Y,disabled:m})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),c.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:S,className:Y,min:"1",max:"20",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (nfasis)"}),c.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:S,rows:1,placeholder:"Ej: clase prctica, modelo ABP, juego, reforzamiento...",className:Y,disabled:m})]})]}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:m||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:m?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:b})]})]}),d&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisin y Edicin"}),c.jsx(tie,{plan:d,onEditLesson:z,onUseLesson:D,isLoading:m})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:r.filter(G=>G.tipo==="Unidad").length>0?r.filter(G=>G.tipo==="Unidad").map(G=>c.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===G.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:G.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(G.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",G.contenidos]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>I(G),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:m,children:"Ver y Editar"}),c.jsx("button",{onClick:()=>O(G.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:m,children:""})]})]})},G.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),K=()=>{const G=r.filter(W=>W.tipo==="Clase").sort((W,ie)=>new Date(ie.fechaCreacion).getTime()-new Date(W.fechaCreacion).getTime());return k?c.jsx(rie,{plan:k,onBack:()=>L(null),onSave:async W=>{try{await a(W.id,W),L(W)}catch(ie){console.error("Error al actualizar plan de clase:",ie),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:m}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:G.length>0?G.map(W=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:W.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(W.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",W.contenidos]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>L(W),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},W.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaa 'Unidad'."})})]})};return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificacin"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>B("unidad"),className:`${E==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),c.jsx("button",{onClick:()=>B("clase"),className:`${E==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),c.jsx("button",{onClick:()=>B("calendario"),className:`${E==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),E==="unidad"&&ae(),E==="clase"&&K(),E==="calendario"&&c.jsx(nie,{userId:e}),M&&c.jsx(eie,{lesson:M.lessonData,onClose:()=>P(null),onSave:re,isLoading:m})]})},Rw="events",sie=async()=>{try{const t=er(Ft(Kr,Rw),gn("date","asc"));return(await cs(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},iie=async t=>{try{return{id:(await Ca(Ft(Kr,Rw),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},oie=async(t,e)=>{try{const r=yr(Kr,Rw,t);await $x(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},lie=async t=>{try{const e=yr(Kr,Rw,t);await mi(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},cie=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],uie=t=>{switch(t.type){case Xr.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case Xr.ACTO:return`Acto: ${t.ubicacion}`;case Xr.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case Xr.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},Aie=({isOpen:t,onClose:e,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,l]=ee.useState({});ee.useEffect(()=>{l(a||{type:Xr.EVALUACION,subtype:nh.PRUEBA_PARCIAL,asignatura:sl[0],curso:ls[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,t]);const u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",d=y=>{const{name:E,value:B}=y.target;l(k=>({...k,[E]:B}))},h=y=>{l(E=>{if(E.type===Xr.SALIDA_PEDAGOGICA){const B=E.cursos||[],k=B.includes(y)?B.filter(L=>L!==y):[...B,y];return{...E,cursos:k.sort()}}return E})},m=y=>{var B;y.preventDefault();let E;switch(o.type){case Xr.EVALUACION:const k={date:s,type:Xr.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===nh.RUBRICA||o.subtype===nh.PAUTA_COTEJO)&&((B=o.enlace)!=null&&B.trim())&&(k.enlace=o.enlace.trim()),E=k;break;case Xr.ACTO:E={date:s,type:Xr.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Xr.ACTIVIDAD_FOCALIZADA:E={date:s,type:Xr.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Xr.SALIDA_PEDAGOGICA:E={date:s,type:Xr.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(E)};if(!t)return null;const g=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),b=()=>{switch(o.type){case Xr.EVALUACION:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),c.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:rX.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:sl.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:ls.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),c.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===nh.RUBRICA||o.subtype===nh.PAUTA_COTEJO)&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),c.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case Xr.ACTO:case Xr.ACTIVIDAD_FOCALIZADA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),c.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicacin"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),c.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:u})]})]});case Xr.SALIDA_PEDAGOGICA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicacin/Destino"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("fieldset",{children:[c.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),c.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:ls.map(y=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(y),onChange:()=>h(y),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:y})]},y))})]})]});default:return null}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:y=>y.stopPropagation(),children:c.jsxs("form",{onSubmit:m,children:[c.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:a?"Editar Evento":"Agregar Evento"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:g}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),c.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(Xr).map(y=>c.jsx("option",{value:y,children:y},y))})]}),b()]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[c.jsx("div",{children:a&&n&&c.jsx("button",{type:"button",onClick:n,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},die=({profile:t})=>{const[e,r]=ee.useState(new Date),[n,a]=ee.useState([]),[s,i]=ee.useState(!1),[o,l]=ee.useState(null),[u,d]=ee.useState(!1),[h,m]=ee.useState(Object.values(Xr)),[g,b]=ee.useState(!1),[y,E]=ee.useState(null),[B,k]=ee.useState(null),L=ee.useCallback(async()=>{i(!0);try{const D=await sie();a(D),l(null)}catch(D){console.error("Error al cargar eventos desde Firestore",D),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);ee.useEffect(()=>{L()},[L]);const M=ee.useMemo(()=>{const D=e.getFullYear(),I=e.getMonth(),O=new Date(D,I,1).getDay(),z=new Date(D,I+1,0).getDate(),re=[];let Y=1;for(let ae=0;ae<6;ae++){const K=[];for(let G=0;G<7;G++)ae===0&&G<O||Y>z?K.push(null):(K.push(new Date(D,I,Y)),Y++);if(re.push(K),Y>z)break}return re},[e]),P=D=>{m(I=>I.includes(D)?I.filter(O=>O!==D):[...I,D])},R=()=>{h.length===Object.values(Xr).length?m([]):m(Object.values(Xr))},C=D=>{t!==Vt.ESTUDIANTE&&(E(D.toISOString().split("T")[0]),k(null),b(!0))},S=(D,I)=>{I.stopPropagation(),t!==Vt.ESTUDIANTE&&(E(D.date),k(D),b(!0))},N=async D=>{d(!0);try{B?await oie(B.id,D):await iie(D),await L(),b(!1)}catch(I){console.error("Error al guardar evento:",I);const O=I instanceof Error?I.message:"Error desconocido";l(`Error al guardar el evento: ${O}`)}finally{d(!1)}},Q=async()=>{if(B){d(!0);try{await lie(B.id),await L(),b(!1)}catch(D){console.error("Error al eliminar evento:",D);const I=D instanceof Error?D.message:"Error desconocido";l(`No se pudo eliminar el evento: ${I}`)}finally{d(!1)}}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Acadmico"}),s&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!s&&n.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),c.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y acadmico."})})]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx("button",{onClick:R,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:h.length===Object.values(Xr).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(Xr).map(D=>c.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${h.includes(D)?`shadow-sm ${Hd[D].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[c.jsx("input",{type:"checkbox",checked:h.includes(D),onChange:()=>P(D),className:"hidden"}),c.jsx("span",{children:Hd[D].icon}),c.jsx("span",{children:Hd[D].label})]},D))]})]}),c.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[c.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[c.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),c.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),c.jsx("div",{className:"grid grid-cols-7",children:cie.map(D=>c.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:D},D))}),c.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:M.flat().map((D,I)=>{const O=D&&D.toDateString()===new Date().toDateString(),z=D==null?void 0:D.toISOString().split("T")[0],re=z?n.filter(Y=>Y.date===z&&h.includes(Y.type)):[];return c.jsx("div",{onClick:()=>D&&C(D),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${D?t!==Vt.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:D&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`self-end text-sm font-semibold ${O?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:D.getDate()}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:re.map(Y=>c.jsxs("div",{onClick:ae=>S(Y,ae),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Hd[Y.type].color}`,children:[c.jsx("span",{children:Hd[Y.type].icon}),c.jsx("span",{className:"truncate",children:uie(Y)})]},Y.id))}),t!==Vt.ESTUDIANTE&&c.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},I)})})]}),g&&c.jsx(Aie,{isOpen:g,onClose:()=>b(!1),onSave:N,onDelete:Q,event:B,date:y,isLoading:u})]})},Lw="anuncios",fie=async()=>{try{const t=er(Ft(Kr,Lw),gn("fechaPublicacion","desc"));return(await cs(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},hie=async t=>{try{return{id:(await Ca(Ft(Kr,Lw),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},mie=async(t,e)=>{try{const r=yr(Kr,Lw,t);await $x(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",t),new Error("No se pudo actualizar el anuncio")}},pie=async t=>{try{const e=yr(Kr,Lw,t);await mi(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},uF=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],gie=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,a]=ee.useState(!1),[s,i]=ee.useState(null),[o,l]=ee.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=ee.useState({tipo:"Todos",cursos:[]}),h=ee.useCallback(async()=>{a(!0);try{const C=await fie();r(C),i(null)}catch(C){console.error("Error al cargar anuncios desde Firestore",C),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);ee.useEffect(()=>{h()},[h]);const m=C=>{const{name:S,value:N}=C.target;l(Q=>({...Q,[S]:N}))},g=C=>{d({tipo:C,cursos:C==="Cursos"?[]:void 0})},b=C=>{d(S=>{var Q;if(S.tipo!=="Cursos")return S;const N=(Q=S.cursos)!=null&&Q.includes(C)?S.cursos.filter(D=>D!==C):[...S.cursos||[],C];return{...S,cursos:N}})},y=async C=>{if(C.preventDefault(),!o.titulo||!o.mensaje){alert("Ttulo y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const S={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:u,...o};await hie(S),await h(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(S){console.error("Error al crear anuncio:",S),i("Error al publicar el anuncio en la nube.")}},E=async C=>{if(window.confirm("Est seguro de que desea eliminar este anuncio?"))try{await pie(C),await h()}catch(S){console.error("Error al eliminar anuncio:",S),i("No se pudo eliminar el anuncio en la nube.")}},B=async C=>{try{const S=e.find(N=>N.id===C);S&&(await mie(C,{destacado:!S.destacado}),await h())}catch(S){console.error("Error al actualizar anuncio:",S),i("No se pudo actualizar el estado del anuncio en la nube.")}},k=ee.useMemo(()=>[...e].sort((C,S)=>C.destacado&&!S.destacado?-1:!C.destacado&&S.destacado?1:new Date(S.fechaPublicacion).getTime()-new Date(C.fechaPublicacion).getTime()),[e]),L=ee.useMemo(()=>{const C=t.profile,S=t.curso;return k.filter(N=>{if(C===Vt.SUBDIRECCION)return!0;if(!N.destinatarios)return C!==Vt.ESTUDIANTE;const{tipo:Q,cursos:D}=N.destinatarios;return Q==="Todos"||Q==="Profesores"&&C===Vt.PROFESORADO||Q==="Coordinacin TP"&&C===Vt.COORDINACION_TP?!0:Q==="Cursos"?C===Vt.ESTUDIANTE?D==null?void 0:D.includes(S||""):!0:!1})},[k,t]),M=C=>t.profile===Vt.ESTUDIANTE?!1:t.profile===Vt.SUBDIRECCION||t.profile===C.profileCreador,P=()=>t.profile===Vt.SUBDIRECCION||t.profile===Vt.PROFESORADO,R="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),t.profile!==Vt.ESTUDIANTE?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ttulo"}),c.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:m,required:!0,className:R})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),c.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:m,required:!0,rows:4,className:R})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),c.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinacin TP"].map(C=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"destinatarioTipo",value:C,checked:u.tipo===C,onChange:()=>g(C),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),c.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:C.replace("Coordinacin TP","Coord. TP")})]},C))})]}),u.tipo==="Cursos"&&c.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:ls.map(C=>{var S;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(S=u.cursos)==null?void 0:S.includes(C),onChange:()=>b(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:C})]},C)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),c.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:m,placeholder:"https://ejemplo.com/documento.pdf",className:R})]}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este mdulo es de solo lectura."})]}),!n&&L.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&L.length>0&&L.map((C,S)=>{const N=uF[S%uF.length];return c.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${N.bg} ${N.rotate}`,children:[C.destacado&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:""})}),c.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:C.titulo}),c.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:C.mensaje}),C.adjunto&&c.jsx("div",{className:"font-sans text-sm mb-4",children:c.jsxs("a",{href:C.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),c.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:C.autor}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(C.fechaPublicacion).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"flex items-center",children:[P()&&c.jsx("button",{onClick:()=>B(C.id),title:C.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("span",{className:`text-xl transition-opacity ${C.destacado?"opacity-100":"opacity-30"}`,children:""})}),M(C)&&c.jsx("button",{onClick:()=>E(C.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},C.id)})})]})},w4="actas_de_reunion",xie=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},vie=t=>{const e=er(Ft(Tt,w4),gn("fechaCreacion","desc"));return Tr(e,n=>{const a=n.docs.map(s=>xie(s));t(a)},n=>{console.error("Error al suscribirse a las actas:",n),t([])})},yie=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:cr.fromDate(new Date(t.fechaCreacion))};return(await Ca(Ft(Tt,w4),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},wie=async t=>{try{const e=yr(Tt,w4,t);await mi(e)}catch(e){throw console.error("Error al eliminar el acta:",e),new Error("No se pudo eliminar el acta.")}},xM=window.SpeechRecognition||window.webkitSpeechRecognition,AF=!!xM,bie=({isListening:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),Cie=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,a]=ee.useState(null),[s,i]=ee.useState({tipoReunion:XC[0],asistentes:"",textoReunion:""}),[o,l]=ee.useState(!1),[u,d]=ee.useState(!1),[h,m]=ee.useState(!0),[g,b]=ee.useState(null),y=ee.useRef(null);ee.useEffect(()=>{m(!0);const C=vie(S=>{r(S),!n&&S.length>0&&a(S[0]),m(!1)});return()=>C()},[n]);const E=C=>{const{name:S,value:N}=C.target;i(Q=>({...Q,[S]:N}))},B=ee.useCallback(()=>{var C;if(!AF){b("El reconocimiento de voz no es compatible con este navegador.");return}o?(C=y.current)==null||C.stop():(y.current=new xM,y.current.lang="es-CL",y.current.continuous=!0,y.current.interimResults=!0,y.current.onresult=S=>{let N="";for(let Q=S.resultIndex;Q<S.results.length;++Q)S.results[Q].isFinal&&(N+=S.results[Q][0].transcript+". ");i(Q=>({...Q,textoReunion:Q.textoReunion+N}))},y.current.onstart=()=>l(!0),y.current.onend=()=>l(!1),y.current.onerror=S=>{console.error("Speech recognition error",S.error),b(`Error de reconocimiento: ${S.error}`),l(!1)},y.current.start())},[o]),k=async C=>{C.preventDefault();const{tipoReunion:S,asistentes:N,textoReunion:Q}=s;if(!S||!N.trim()||!Q.trim()){b("Todos los campos son obligatorios.");return}d(!0),b(null);try{Kl("Generador de Actas");const D="",O=new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro"}),z=`
                Analiza el siguiente texto de un acta de reunin y extrae la informacin clave.
                El texto es una transcripcin de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones especficas tomadas.
                - Lista cualquier plazo o fecha lmite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${Q}"
                
                Asistentes a la reunin para referencia de nombres: ${N}
            `,K=(await(await O.generateContent(z)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(K),W={fechaCreacion:new Date().toISOString(),...s,...G},ie=await yie(W,t);i({tipoReunion:XC[0],asistentes:"",textoReunion:""})}catch(D){console.error("Error al analizar acta con IA:",D),b("Ocurri un error al procesar el acta con la IA. Por favor, revise el texto e intntelo de nuevo.")}finally{d(!1)}},L=async C=>{if(window.confirm("Est seguro de que desea eliminar esta acta?"))try{await wie(C),(n==null?void 0:n.id)===C&&a(e.length>1?e[1]:null)}catch(S){console.error("Error deleting acta:",S),alert("No se pudo eliminar el acta.")}},M=C=>{a(C)},P=C=>C.temas||C.acuerdos||C.plazos||C.responsables?c.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Anlisis con IA"}),C.temas&&C.temas.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.temas.map((N,Q)=>c.jsx("li",{children:N},Q))})]}),C.acuerdos&&C.acuerdos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.acuerdos.map((N,Q)=>c.jsx("li",{children:N},Q))})]}),C.plazos&&C.plazos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.plazos.map((N,Q)=>c.jsx("li",{children:N},Q))})]}),C.responsables&&C.responsables.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.responsables.map((N,Q)=>c.jsx("li",{children:N},Q))})]})]}):null,R="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return h?c.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[c.jsxs("div",{className:"md:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),c.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",c.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es slo una herramienta para agilizar redaccin."]})})]})}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunin"}),c.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:E,required:!0,className:R,children:XC.map(C=>c.jsx("option",{value:C,children:C},C))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),c.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:E,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:R})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunin"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:E,required:!0,rows:6,placeholder:"Escriba o use el micrfono para dictar...",className:R}),AF&&c.jsx("button",{type:"button",onClick:B,title:o?"Detener grabacin":"Iniciar grabacin",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:c.jsx(bie,{isListening:o})})]})]}),g&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),c.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:e.length>0?e.map(C=>c.jsxs("button",{onClick:()=>M(C),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===C.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.tipoReunion}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(C.fechaCreacion).toLocaleDateString("es-CL")})]},C.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),c.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunin: ${n.tipoReunion}`}),c.jsx("button",{onClick:()=>L(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),c.jsx("h2",{children:"Asistentes"}),c.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((C,S)=>C.trim()&&c.jsx("li",{children:C.trim()},S))}),P(n),c.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripcin Original"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:c.jsx("p",{children:n.textoReunion})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aqu, o cree una nueva usando el formulario."})]})})]})},Eie="modulepreload",_ie=function(t){return"/"+t},dF={},dy=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=_ie(u),u in dF)return;dF[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Eie,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,b)=>{m.addEventListener("load",g),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function qn(t){"@babel/helpers - typeof";return qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(t)}var Qi=Uint8Array,nl=Uint16Array,b4=Int32Array,Uw=new Qi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mw=new Qi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),J_=new Qi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vM=function(t,e){for(var r=new nl(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new b4(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},yM=vM(Uw,2),wM=yM.b,Z_=yM.r;wM[28]=258,Z_[258]=28;var bM=vM(Mw,0),Sie=bM.b,fF=bM.r,e5=new nl(32768);for(var fa=0;fa<32768;++fa){var Bd=(fa&43690)>>1|(fa&21845)<<1;Bd=(Bd&52428)>>2|(Bd&13107)<<2,Bd=(Bd&61680)>>4|(Bd&3855)<<4,e5[fa]=((Bd&65280)>>8|(Bd&255)<<8)>>1}var Iu=function(t,e,r){for(var n=t.length,a=0,s=new nl(e);a<n;++a)t[a]&&++s[t[a]-1];var i=new nl(e);for(a=1;a<e;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new nl(1<<e);var l=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],h=i[t[a]-1]++<<d,m=h|(1<<d)-1;h<=m;++h)o[e5[h]>>l]=u}else for(o=new nl(n),a=0;a<n;++a)t[a]&&(o[a]=e5[i[t[a]-1]++]>>15-t[a]);return o},pf=new Qi(288);for(var fa=0;fa<144;++fa)pf[fa]=8;for(var fa=144;fa<256;++fa)pf[fa]=9;for(var fa=256;fa<280;++fa)pf[fa]=7;for(var fa=280;fa<288;++fa)pf[fa]=8;var ox=new Qi(32);for(var fa=0;fa<32;++fa)ox[fa]=5;var Tie=Iu(pf,9,0),Bie=Iu(pf,9,1),Nie=Iu(ox,5,0),kie=Iu(ox,5,1),eE=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},vc=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},tE=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},C4=function(t){return(t+7)/8|0},CM=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Qi(t.subarray(e,r))},Iie=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Cc=function(t,e,r){var n=new Error(e||Iie[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Cc),!r)throw n;return n},Fie=function(t,e,r,n){var a=t.length,s=0;if(!a||e.f&&!e.l)return r||new Qi(0);var i=!r,o=i||e.i!=2,l=e.i;i&&(r=new Qi(a*3));var u=function(xe){var oe=r.length;if(xe>oe){var Me=new Qi(Math.max(oe*2,xe));Me.set(r),r=Me}},d=e.f||0,h=e.p||0,m=e.b||0,g=e.l,b=e.d,y=e.m,E=e.n,B=a*8;do{if(!g){d=vc(t,h,1);var k=vc(t,h+1,3);if(h+=3,k)if(k==1)g=Bie,b=kie,y=9,E=5;else if(k==2){var R=vc(t,h,31)+257,C=vc(t,h+10,15)+4,S=R+vc(t,h+5,31)+1;h+=14;for(var N=new Qi(S),Q=new Qi(19),D=0;D<C;++D)Q[J_[D]]=vc(t,h+D*3,7);h+=C*3;for(var I=eE(Q),O=(1<<I)-1,z=Iu(Q,I,1),D=0;D<S;){var re=z[vc(t,h,O)];h+=re&15;var L=re>>4;if(L<16)N[D++]=L;else{var Y=0,ae=0;for(L==16?(ae=3+vc(t,h,3),h+=2,Y=N[D-1]):L==17?(ae=3+vc(t,h,7),h+=3):L==18&&(ae=11+vc(t,h,127),h+=7);ae--;)N[D++]=Y}}var K=N.subarray(0,R),G=N.subarray(R);y=eE(K),E=eE(G),g=Iu(K,y,1),b=Iu(G,E,1)}else Cc(1);else{var L=C4(h)+4,M=t[L-4]|t[L-3]<<8,P=L+M;if(P>a){l&&Cc(0);break}o&&u(m+M),r.set(t.subarray(L,P),m),e.b=m+=M,e.p=h=P*8,e.f=d;continue}if(h>B){l&&Cc(0);break}}o&&u(m+131072);for(var W=(1<<y)-1,ie=(1<<E)-1,j=h;;j=h){var Y=g[tE(t,h)&W],X=Y>>4;if(h+=Y&15,h>B){l&&Cc(0);break}if(Y||Cc(2),X<256)r[m++]=X;else if(X==256){j=h,g=null;break}else{var Z=X-254;if(X>264){var D=X-257,te=Uw[D];Z=vc(t,h,(1<<te)-1)+wM[D],h+=te}var ce=b[tE(t,h)&ie],de=ce>>4;ce||Cc(3),h+=ce&15;var G=Sie[de];if(de>3){var te=Mw[de];G+=tE(t,h)&(1<<te)-1,h+=te}if(h>B){l&&Cc(0);break}o&&u(m+131072);var me=m+Z;if(m<G){var ge=s-G,Te=Math.min(G,me);for(ge+m<0&&Cc(3);m<Te;++m)r[m]=n[ge+m]}for(;m<me;++m)r[m]=r[m-G]}}e.l=g,e.p=j,e.b=m,e.f=d,g&&(d=1,e.m=y,e.d=b,e.n=E)}while(!d);return m!=r.length&&i?CM(r,0,m):r.subarray(0,m)},gA=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Kp=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},rE=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:_M,l:0};if(a==1){var i=new Qi(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(P,R){return P.f-R.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,d=1,h=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=a-1;)o=r[r[u].f<r[h].f?u++:h++],l=r[u!=d&&r[u].f<r[h].f?u++:h++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=s[0].s,n=1;n<a;++n)s[n].s>m&&(m=s[n].s);var g=new nl(m+1),b=t5(r[d-1],g,0);if(b>e){var n=0,y=0,E=b-e,B=1<<E;for(s.sort(function(R,C){return g[C.s]-g[R.s]||R.f-C.f});n<a;++n){var k=s[n].s;if(g[k]>e)y+=B-(1<<b-g[k]),g[k]=e;else break}for(y>>=E;y>0;){var L=s[n].s;g[L]<e?y-=1<<e-g[L]++-1:++n}for(;n>=0&&y;--n){var M=s[n].s;g[M]==e&&(--g[M],++y)}b=e}return{t:new Qi(g),l:b}},t5=function(t,e,r){return t.s==-1?Math.max(t5(t.l,e,r+1),t5(t.r,e,r+1)):e[t.s]=r},hF=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new nl(++e),n=0,a=t[0],s=1,i=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==a&&o!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=t[o]}return{c:r.subarray(0,n),n:e}},$p=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},EM=function(t,e,r){var n=r.length,a=C4(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},mF=function(t,e,r,n,a,s,i,o,l,u,d){gA(e,d++,r),++a[256];for(var h=rE(a,15),m=h.t,g=h.l,b=rE(s,15),y=b.t,E=b.l,B=hF(m),k=B.c,L=B.n,M=hF(y),P=M.c,R=M.n,C=new nl(19),S=0;S<k.length;++S)++C[k[S]&31];for(var S=0;S<P.length;++S)++C[P[S]&31];for(var N=rE(C,7),Q=N.t,D=N.l,I=19;I>4&&!Q[J_[I-1]];--I);var O=u+5<<3,z=$p(a,pf)+$p(s,ox)+i,re=$p(a,m)+$p(s,y)+i+14+3*I+$p(C,Q)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&O<=z&&O<=re)return EM(e,d,t.subarray(l,l+u));var Y,ae,K,G;if(gA(e,d,1+(re<z)),d+=2,re<z){Y=Iu(m,g,0),ae=m,K=Iu(y,E,0),G=y;var W=Iu(Q,D,0);gA(e,d,L-257),gA(e,d+5,R-1),gA(e,d+10,I-4),d+=14;for(var S=0;S<I;++S)gA(e,d+3*S,Q[J_[S]]);d+=3*I;for(var ie=[k,P],j=0;j<2;++j)for(var X=ie[j],S=0;S<X.length;++S){var Z=X[S]&31;gA(e,d,W[Z]),d+=Q[Z],Z>15&&(gA(e,d,X[S]>>5&127),d+=X[S]>>12)}}else Y=Tie,ae=pf,K=Nie,G=ox;for(var S=0;S<o;++S){var te=n[S];if(te>255){var Z=te>>18&31;Kp(e,d,Y[Z+257]),d+=ae[Z+257],Z>7&&(gA(e,d,te>>23&31),d+=Uw[Z]);var ce=te&31;Kp(e,d,K[ce]),d+=G[ce],ce>3&&(Kp(e,d,te>>5&8191),d+=Mw[ce])}else Kp(e,d,Y[te]),d+=ae[te]}return Kp(e,d,Y[256]),d+ae[256]},Die=new b4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_M=new Qi(0),Rie=function(t,e,r,n,a,s){var i=s.z||t.length,o=new Qi(n+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var h=Die[e-1],m=h>>13,g=h&8191,b=(1<<r)-1,y=s.p||new nl(32768),E=s.h||new nl(b+1),B=Math.ceil(r/3),k=2*B,L=function(at){return(t[at]^t[at+1]<<B^t[at+2]<<k)&b},M=new b4(25e3),P=new nl(288),R=new nl(32),C=0,S=0,N=s.i||0,Q=0,D=s.w||0,I=0;N+2<i;++N){var O=L(N),z=N&32767,re=E[O];if(y[z]=re,E[O]=z,D<=N){var Y=i-N;if((C>7e3||Q>24576)&&(Y>423||!u)){d=mF(t,l,0,M,P,R,S,Q,I,N-I,d),Q=C=S=0,I=N;for(var ae=0;ae<286;++ae)P[ae]=0;for(var ae=0;ae<30;++ae)R[ae]=0}var K=2,G=0,W=g,ie=z-re&32767;if(Y>2&&O==L(N-ie))for(var j=Math.min(m,Y)-1,X=Math.min(32767,N),Z=Math.min(258,Y);ie<=X&&--W&&z!=re;){if(t[N+K]==t[N+K-ie]){for(var te=0;te<Z&&t[N+te]==t[N+te-ie];++te);if(te>K){if(K=te,G=ie,te>j)break;for(var ce=Math.min(ie,te-2),de=0,ae=0;ae<ce;++ae){var me=N-ie+ae&32767,ge=y[me],Te=me-ge&32767;Te>de&&(de=Te,re=me)}}}z=re,re=y[z],ie+=z-re&32767}if(G){M[Q++]=268435456|Z_[K]<<18|fF[G];var xe=Z_[K]&31,oe=fF[G]&31;S+=Uw[xe]+Mw[oe],++P[257+xe],++R[oe],D=N+K,++C}else M[Q++]=t[N],++P[t[N]]}}for(N=Math.max(N,D);N<i;++N)M[Q++]=t[N],++P[t[N]];d=mF(t,l,u,M,P,R,S,Q,I,N-I,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=E,s.p=y,s.i=N,s.w=D)}else{for(var N=s.w||0;N<i+u;N+=65535){var Me=N+65535;Me>=i&&(l[d/8|0]=u,Me=i),d=EM(l,d+1,t.subarray(N,Me))}s.i=i}return CM(o,0,n+C4(d)+a)},SM=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Lie=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new Qi(s.length+t.length);i.set(s),i.set(t,s.length),t=i,a.w=s.length}return Rie(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},TM=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},Uie=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=SM();a.p(e.dictionary),TM(t,2,a.d())}},Mie=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Cc(6,"invalid zlib data"),(t[1]>>5&1)==1&&Cc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function r5(t,e){e||(e={});var r=SM();r.p(t);var n=Lie(t,e,e.dictionary?6:2,4);return Uie(n,e),TM(n,n.length-4,r.d()),n}function Pie(t,e){return Fie(t.subarray(Mie(t),-4),{i:2},e,e)}var jie=typeof TextDecoder<"u"&&new TextDecoder,Oie=0;try{jie.decode(_M,{stream:!0}),Oie=1}catch{}var Cr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function nE(){Cr.console&&typeof Cr.console.log=="function"&&Cr.console.log.apply(Cr.console,arguments)}var sa={log:nE,warn:function(t){Cr.console&&(typeof Cr.console.warn=="function"?Cr.console.warn.apply(Cr.console,arguments):nE.call(null,arguments))},error:function(t){Cr.console&&(typeof Cr.console.error=="function"?Cr.console.error.apply(Cr.console,arguments):nE(t))}};function aE(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){th(n.response,e,r)},n.onerror=function(){sa.error("could not download file")},n.send()}function pF(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function wv(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Lg,n5,th=Cr.saveAs||((typeof window>"u"?"undefined":qn(window))!=="object"||window!==Cr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Cr.URL||Cr.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?pF(a.href)?aE(t,e,r):wv(a,a.target="_blank"):wv(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){wv(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(pF(t))aE(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){wv(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:qn(s)!=="object"&&(sa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return aE(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(Cr.HTMLElement)||Cr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":qn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var l=Cr.URL||Cr.webkitURL,u=l.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function BM(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(t);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function sE(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Ni(r,n,a,s,e[0],7,-680876936),s=Ni(s,r,n,a,e[1],12,-389564586),a=Ni(a,s,r,n,e[2],17,606105819),n=Ni(n,a,s,r,e[3],22,-1044525330),r=Ni(r,n,a,s,e[4],7,-176418897),s=Ni(s,r,n,a,e[5],12,1200080426),a=Ni(a,s,r,n,e[6],17,-1473231341),n=Ni(n,a,s,r,e[7],22,-45705983),r=Ni(r,n,a,s,e[8],7,1770035416),s=Ni(s,r,n,a,e[9],12,-1958414417),a=Ni(a,s,r,n,e[10],17,-42063),n=Ni(n,a,s,r,e[11],22,-1990404162),r=Ni(r,n,a,s,e[12],7,1804603682),s=Ni(s,r,n,a,e[13],12,-40341101),a=Ni(a,s,r,n,e[14],17,-1502002290),r=ki(r,n=Ni(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=ki(s,r,n,a,e[6],9,-1069501632),a=ki(a,s,r,n,e[11],14,643717713),n=ki(n,a,s,r,e[0],20,-373897302),r=ki(r,n,a,s,e[5],5,-701558691),s=ki(s,r,n,a,e[10],9,38016083),a=ki(a,s,r,n,e[15],14,-660478335),n=ki(n,a,s,r,e[4],20,-405537848),r=ki(r,n,a,s,e[9],5,568446438),s=ki(s,r,n,a,e[14],9,-1019803690),a=ki(a,s,r,n,e[3],14,-187363961),n=ki(n,a,s,r,e[8],20,1163531501),r=ki(r,n,a,s,e[13],5,-1444681467),s=ki(s,r,n,a,e[2],9,-51403784),a=ki(a,s,r,n,e[7],14,1735328473),r=Ii(r,n=ki(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=Ii(s,r,n,a,e[8],11,-2022574463),a=Ii(a,s,r,n,e[11],16,1839030562),n=Ii(n,a,s,r,e[14],23,-35309556),r=Ii(r,n,a,s,e[1],4,-1530992060),s=Ii(s,r,n,a,e[4],11,1272893353),a=Ii(a,s,r,n,e[7],16,-155497632),n=Ii(n,a,s,r,e[10],23,-1094730640),r=Ii(r,n,a,s,e[13],4,681279174),s=Ii(s,r,n,a,e[0],11,-358537222),a=Ii(a,s,r,n,e[3],16,-722521979),n=Ii(n,a,s,r,e[6],23,76029189),r=Ii(r,n,a,s,e[9],4,-640364487),s=Ii(s,r,n,a,e[12],11,-421815835),a=Ii(a,s,r,n,e[15],16,530742520),r=Fi(r,n=Ii(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Fi(s,r,n,a,e[7],10,1126891415),a=Fi(a,s,r,n,e[14],15,-1416354905),n=Fi(n,a,s,r,e[5],21,-57434055),r=Fi(r,n,a,s,e[12],6,1700485571),s=Fi(s,r,n,a,e[3],10,-1894986606),a=Fi(a,s,r,n,e[10],15,-1051523),n=Fi(n,a,s,r,e[1],21,-2054922799),r=Fi(r,n,a,s,e[8],6,1873313359),s=Fi(s,r,n,a,e[15],10,-30611744),a=Fi(a,s,r,n,e[6],15,-1560198380),n=Fi(n,a,s,r,e[13],21,1309151649),r=Fi(r,n,a,s,e[4],6,-145523070),s=Fi(s,r,n,a,e[11],10,-1120210379),a=Fi(a,s,r,n,e[2],15,718787259),n=Fi(n,a,s,r,e[9],21,-343485551),t[0]=Gd(r,t[0]),t[1]=Gd(n,t[1]),t[2]=Gd(a,t[2]),t[3]=Gd(s,t[3])}function Pw(t,e,r,n,a,s){return e=Gd(Gd(e,t),Gd(n,s)),Gd(e<<a|e>>>32-a,r)}function Ni(t,e,r,n,a,s,i){return Pw(e&r|~e&n,t,e,a,s,i)}function ki(t,e,r,n,a,s,i){return Pw(e&n|r&~n,t,e,a,s,i)}function Ii(t,e,r,n,a,s,i){return Pw(e^r^n,t,e,a,s,i)}function Fi(t,e,r,n,a,s,i){return Pw(r^(e|~n),t,e,a,s,i)}function NM(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)sE(n,Qie(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(sE(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,sE(n,a),n}function Qie(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Lg=Cr.atob.bind(Cr),n5=Cr.btoa.bind(Cr);var gF="0123456789abcdef".split("");function Hie(t){for(var e="",r=0;r<4;r++)e+=gF[t>>8*r+4&15]+gF[t>>8*r&15];return e}function Vie(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function a5(t){return NM(t).map(Vie).join("")}var zie=function(t){for(var e=0;e<t.length;e++)t[e]=Hie(t[e]);return t.join("")}(NM("hello"))!="5d41402abc4b2a76b9719d911017c592";function Gd(t,e){if(zie){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function s5(t,e){var r,n,a,s;if(t!==r){for(var i=(a=t,s=1+(256/t.length>>0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}r=t,n=o}else o=n;var h=e.length,m=0,g=0,b="";for(l=0;l<h;l++)g=(g+(d=o[m=(m+1)%256]))%256,o[m]=o[g],o[g]=d,i=o[(o[m]+o[g])%256],b+=String.fromCharCode(e.charCodeAt(l)^i);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var xF={print:4,modify:8,copy:16,"annot-forms":32};function K0(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(o){if(xF.perm!==void 0)throw new Error("Invalid permission: "+o);a+=xF[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=a5(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=s5(this.encryptionKey,this.padding)}function $0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=t[n]}return e}function vF(t){if(qn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var i=e[r][s];try{i[0].apply(t,n)}catch(o){Cr.console&&sa.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function fy(t){if(!(this instanceof fy))return new fy(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function kM(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ah(t,e,r,n,a){if(!(this instanceof ah))return new ah(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,kM.call(this,n,a)}function em(t,e,r,n,a){if(!(this instanceof em))return new em(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,kM.call(this,n,a)}function or(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,l=16,u="S",d=null;qn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=vF;var b="1.3",y=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(V){b=V};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return E};var B=g.__private__.getPageFormat=function(V){return E[V]};a=a||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},L=k.COMPAT;function M(){this.saveGraphicsState(),be(new Gt(xt,0,0,-xt,0,Hs()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),u="n",L=k.ADVANCED}function P(){this.restoreGraphicsState(),u="S",L=k.COMPAT}var R=g.__private__.combineFontStyleAndFontWeight=function(V,Ae){if(V=="bold"&&Ae=="normal"||V=="bold"&&Ae==400||V=="normal"&&Ae=="italic"||V=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(V=Ae==400||Ae==="normal"?V==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||V!=="normal"?(Ae==700?"bold":Ae)+""+V:"bold"),V};g.advancedAPI=function(V){var Ae=L===k.COMPAT;return Ae&&M.call(this),typeof V!="function"||(V(this),Ae&&P.call(this)),this},g.compatAPI=function(V){var Ae=L===k.ADVANCED;return Ae&&P.call(this),typeof V!="function"||(V(this),Ae&&M.call(this)),this},g.isAdvancedAPI=function(){return L===k.ADVANCED};var C,S=function(V){if(L!==k.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=g.roundToPrecision=g.__private__.roundToPrecision=function(V,Ae){var Fe=e||Ae;if(isNaN(V)||isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(Fe).replace(/0+$/,"")};C=g.hpf=g.__private__.hpf=typeof l=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return N(V,l)}:l==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return N(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return N(V,16)};var Q=g.f2=g.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return N(V,2)},D=g.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return N(V,3)},I=g.scale=g.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return L===k.COMPAT?V*xt:L===k.ADVANCED?V:void 0},O=function(V){return L===k.COMPAT?Hs()-V:L===k.ADVANCED?V:void 0},z=function(V){return I(O(V))};g.__private__.setPrecision=g.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(e=parseInt(V,10))};var re,Y="00000000000000000000000000000000",ae=g.__private__.getFileId=function(){return Y},K=g.__private__.setFileId=function(V){return Y=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(On=new K0(d.userPermissions,d.userPassword,d.ownerPassword,Y)),Y};g.setFileId=function(V){return K(V),this},g.getFileId=function(){return ae()};var G=g.__private__.convertDateToPDFDate=function(V){var Ae=V.getTimezoneOffset(),Fe=Ae<0?"+":"-",Re=Math.floor(Math.abs(Ae/60)),Ve=Math.abs(Ae%60),ot=[Fe,Z(Re),"'",Z(Ve),"'"].join("");return["D:",V.getFullYear(),Z(V.getMonth()+1),Z(V.getDate()),Z(V.getHours()),Z(V.getMinutes()),Z(V.getSeconds()),ot].join("")},W=g.__private__.convertPDFDateToDate=function(V){var Ae=parseInt(V.substr(2,4),10),Fe=parseInt(V.substr(6,2),10)-1,Re=parseInt(V.substr(8,2),10),Ve=parseInt(V.substr(10,2),10),ot=parseInt(V.substr(12,2),10),Et=parseInt(V.substr(14,2),10);return new Date(Ae,Fe,Re,Ve,ot,Et,0)},ie=g.__private__.setCreationDate=function(V){var Ae;if(V===void 0&&(V=new Date),V instanceof Date)Ae=G(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=V}return re=Ae},j=g.__private__.getCreationDate=function(V){var Ae=re;return V==="jsDate"&&(Ae=W(re)),Ae};g.setCreationDate=function(V){return ie(V),this},g.getCreationDate=function(V){return j(V)};var X,Z=g.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},te=g.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},ce=0,de=[],me=[],ge=0,Te=[],xe=[],oe=!1,Me=me,at=function(){ce=0,ge=0,me=[],de=[],Te=[],Ee=Xn(),_e=Xn()};g.__private__.setCustomOutputDestination=function(V){oe=!0,Me=V};var Se=function(V){oe||(Me=V)};g.__private__.resetCustomOutputDestination=function(){oe=!1,Me=me};var be=g.__private__.out=function(V){return V=V.toString(),ge+=V.length+1,Me.push(V),Me},je=g.__private__.write=function(V){return be(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},Ke=g.__private__.getArrayBuffer=function(V){for(var Ae=V.length,Fe=new ArrayBuffer(Ae),Re=new Uint8Array(Fe);Ae--;)Re[Ae]=V.charCodeAt(Ae);return Fe},st=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return st};var pt=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(V){return pt=L===k.ADVANCED?V/xt:V,this};var St,ut=g.__private__.getFontSize=g.getFontSize=function(){return L===k.COMPAT?pt:pt*xt},kt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(V){return kt=V,this},g.__private__.getR2L=g.getR2L=function(){return kt};var zt,Yt=g.__private__.setZoomMode=function(V){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))St=V;else if(isNaN(V)){if(Ae.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');St=V}else St=parseInt(V,10)};g.__private__.getZoomMode=function(){return St};var It,Dt=g.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');zt=V};g.__private__.getPageMode=function(){return zt};var Wt=g.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');It=V};g.__private__.getLayoutMode=function(){return It},g.__private__.setDisplayMode=g.setDisplayMode=function(V,Ae,Fe){return Yt(V),Wt(Ae),Dt(Fe),this};var Lt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(V){if(Object.keys(Lt).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Lt[V]},g.__private__.getDocumentProperties=function(){return Lt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(V){for(var Ae in Lt)Lt.hasOwnProperty(Ae)&&V[Ae]&&(Lt[Ae]=V[Ae]);return this},g.__private__.setDocumentProperty=function(V,Ae){if(Object.keys(Lt).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Lt[V]=Ae};var Rt,xt,wr,Jt,dn,gr={},Ur={},Dn=[],Fr={},ds={},nn={},na={},pa=null,Pr=0,nr=[],zr=new vF(g),fs=t.hotfixes||[],Wn={},Ea={},Bs=[],Gt=function V(Ae,Fe,Re,Ve,ot,Et){if(!(this instanceof V))return new V(Ae,Fe,Re,Ve,ot,Et);isNaN(Ae)&&(Ae=1),isNaN(Fe)&&(Fe=0),isNaN(Re)&&(Re=0),isNaN(Ve)&&(Ve=1),isNaN(ot)&&(ot=0),isNaN(Et)&&(Et=0),this._matrix=[Ae,Fe,Re,Ve,ot,Et]};Object.defineProperty(Gt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Gt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Gt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Gt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Gt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Gt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Gt.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Gt.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Gt.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Gt.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Gt.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Gt.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Gt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Gt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Gt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Gt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Gt.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(V)},Gt.prototype.multiply=function(V){var Ae=V.sx*this.sx+V.shy*this.shx,Fe=V.sx*this.shy+V.shy*this.sy,Re=V.shx*this.sx+V.sy*this.shx,Ve=V.shx*this.shy+V.sy*this.sy,ot=V.tx*this.sx+V.ty*this.shx+this.tx,Et=V.tx*this.shy+V.ty*this.sy+this.ty;return new Gt(Ae,Fe,Re,Ve,ot,Et)},Gt.prototype.decompose=function(){var V=this.sx,Ae=this.shy,Fe=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty,Et=Math.sqrt(V*V+Ae*Ae),Qt=(V/=Et)*Fe+(Ae/=Et)*Re;Fe-=V*Qt,Re-=Ae*Qt;var T=Math.sqrt(Fe*Fe+Re*Re);return Qt/=T,V*(Re/=T)<Ae*(Fe/=T)&&(V=-V,Ae=-Ae,Qt=-Qt,Et=-Et),{scale:new Gt(Et,0,0,T,0,0),translate:new Gt(1,0,0,1,Ve,ot),rotate:new Gt(V,Ae,-Ae,V,0,0),skew:new Gt(1,0,Qt,1,0,0)}},Gt.prototype.toString=function(V){return this.join(" ")},Gt.prototype.inversed=function(){var V=this.sx,Ae=this.shy,Fe=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty,Et=1/(V*Re-Ae*Fe),Qt=Re*Et,T=-Ae*Et,J=-Fe*Et,se=V*Et;return new Gt(Qt,T,J,se,-Qt*Ve-J*ot,-T*Ve-se*ot)},Gt.prototype.applyToPoint=function(V){var Ae=V.x*this.sx+V.y*this.shx+this.tx,Fe=V.x*this.shy+V.y*this.sy+this.ty;return new ec(Ae,Fe)},Gt.prototype.applyToRectangle=function(V){var Ae=this.applyToPoint(V),Fe=this.applyToPoint(new ec(V.x+V.w,V.y+V.h));return new Vc(Ae.x,Ae.y,Fe.x-Ae.x,Fe.y-Ae.y)},Gt.prototype.clone=function(){var V=this.sx,Ae=this.shy,Fe=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty;return new Gt(V,Ae,Fe,Re,Ve,ot)},g.Matrix=Gt;var fn=g.matrixMult=function(V,Ae){return Ae.multiply(V)},an=new Gt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=an;var Rn=function(V,Ae){if(!ds[V]){var Fe=(Ae instanceof ah?"Sh":"P")+(Object.keys(Fr).length+1).toString(10);Ae.id=Fe,ds[V]=Fe,Fr[Fe]=Ae,zr.publish("addPattern",Ae)}};g.ShadingPattern=ah,g.TilingPattern=em,g.addShadingPattern=function(V,Ae){return S("addShadingPattern()"),Rn(V,Ae),this},g.beginTilingPattern=function(V){S("beginTilingPattern()"),gl(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},g.endTilingPattern=function(V,Ae){S("endTilingPattern()"),Ae.stream=xe[X].join(`
`),Rn(V,Ae),zr.publish("endTilingPattern",Ae),Bs.pop().restore()};var jn=g.__private__.newObject=function(){var V=Xn();return fe(V,!0),V},Xn=g.__private__.newObjectDeferred=function(){return ce++,de[ce]=function(){return ge},ce},fe=function(V,Ae){return Ae=typeof Ae=="boolean"&&Ae,de[V]=ge,Ae&&be(V+" 0 obj"),V},ke=g.__private__.newAdditionalObject=function(){var V={objId:Xn(),content:""};return Te.push(V),V},Ee=Xn(),_e=Xn(),Be=g.__private__.decodeColorString=function(V){var Ae=V.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var Fe=parseFloat(Ae[0]);Ae=[Fe,Fe,Fe,"r"]}for(var Re="#",Ve=0;Ve<3;Ve++)Re+=("0"+Math.floor(255*parseFloat(Ae[Ve])).toString(16)).slice(-2);return Re},Ie=g.__private__.encodeColorString=function(V){var Ae;typeof V=="string"&&(V={ch1:V});var Fe=V.ch1,Re=V.ch2,Ve=V.ch3,ot=V.ch4,Et=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Fe=="string"&&Fe.charAt(0)!=="#"){var Qt=new BM(Fe);if(Qt.ok)Fe=Qt.toHex();else if(!/^\d*\.?\d*$/.test(Fe))throw new Error('Invalid color "'+Fe+'" passed to jsPDF.encodeColorString.')}if(typeof Fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Fe)&&(Fe="#"+Fe[1]+Fe[1]+Fe[2]+Fe[2]+Fe[3]+Fe[3]),typeof Fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Fe)){var T=parseInt(Fe.substr(1),16);Fe=T>>16&255,Re=T>>8&255,Ve=255&T}if(Re===void 0||ot===void 0&&Fe===Re&&Re===Ve)if(typeof Fe=="string")Ae=Fe+" "+Et[0];else switch(V.precision){case 2:Ae=Q(Fe/255)+" "+Et[0];break;case 3:default:Ae=D(Fe/255)+" "+Et[0]}else if(ot===void 0||qn(ot)==="object"){if(ot&&!isNaN(ot.a)&&ot.a===0)return Ae=["1.","1.","1.",Et[1]].join(" ");if(typeof Fe=="string")Ae=[Fe,Re,Ve,Et[1]].join(" ");else switch(V.precision){case 2:Ae=[Q(Fe/255),Q(Re/255),Q(Ve/255),Et[1]].join(" ");break;default:case 3:Ae=[D(Fe/255),D(Re/255),D(Ve/255),Et[1]].join(" ")}}else if(typeof Fe=="string")Ae=[Fe,Re,Ve,ot,Et[2]].join(" ");else switch(V.precision){case 2:Ae=[Q(Fe),Q(Re),Q(Ve),Q(ot),Et[2]].join(" ");break;case 3:default:Ae=[D(Fe),D(Re),D(Ve),D(ot),Et[2]].join(" ")}return Ae},qe=g.__private__.getFilters=function(){return i},tt=g.__private__.putStream=function(V){var Ae=(V=V||{}).data||"",Fe=V.filters||qe(),Re=V.alreadyAppliedFilters||[],Ve=V.addLength1||!1,ot=Ae.length,Et=V.objectId,Qt=function(mr){return mr};if(d!==null&&Et===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Qt=On.encryptor(Et,0));var T={};Fe===!0&&(Fe=["FlateEncode"]);var J=V.additionalKeyValues||[],se=(T=or.API.processDataByFilters!==void 0?or.API.processDataByFilters(Ae,Fe):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Re)?Re.join(" "):Re.toString());if(T.data.length!==0&&(J.push({key:"Length",value:T.data.length}),Ve===!0&&J.push({key:"Length1",value:ot})),se.length!=0)if(se.split("/").length-1==1)J.push({key:"Filter",value:se});else{J.push({key:"Filter",value:"["+se+"]"});for(var ye=0;ye<J.length;ye+=1)if(J[ye].key==="DecodeParms"){for(var Qe=[],Ze=0;Ze<T.reverseChain.split("/").length-1;Ze+=1)Qe.push("null");Qe.push(J[ye].value),J[ye].value="["+Qe.join(" ")+"]"}}be("<<");for(var _t=0;_t<J.length;_t++)be("/"+J[_t].key+" "+J[_t].value);be(">>"),T.data.length!==0&&(be("stream"),be(Qt(T.data)),be("endstream"))},He=g.__private__.putPage=function(V){var Ae=V.number,Fe=V.data,Re=V.objId,Ve=V.contentsObjId;fe(Re,!0),be("<</Type /Page"),be("/Parent "+V.rootDictionaryObjId+" 0 R"),be("/Resources "+V.resourceDictionaryObjId+" 0 R"),be("/MediaBox ["+parseFloat(C(V.mediaBox.bottomLeftX))+" "+parseFloat(C(V.mediaBox.bottomLeftY))+" "+C(V.mediaBox.topRightX)+" "+C(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&be("/CropBox ["+C(V.cropBox.bottomLeftX)+" "+C(V.cropBox.bottomLeftY)+" "+C(V.cropBox.topRightX)+" "+C(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&be("/BleedBox ["+C(V.bleedBox.bottomLeftX)+" "+C(V.bleedBox.bottomLeftY)+" "+C(V.bleedBox.topRightX)+" "+C(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&be("/TrimBox ["+C(V.trimBox.bottomLeftX)+" "+C(V.trimBox.bottomLeftY)+" "+C(V.trimBox.topRightX)+" "+C(V.trimBox.topRightY)+"]"),V.artBox!==null&&be("/ArtBox ["+C(V.artBox.bottomLeftX)+" "+C(V.artBox.bottomLeftY)+" "+C(V.artBox.topRightX)+" "+C(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&be("/UserUnit "+V.userUnit),zr.publish("putPage",{objId:Re,pageContext:nr[Ae],pageNumber:Ae,page:Fe}),be("/Contents "+Ve+" 0 R"),be(">>"),be("endobj");var ot=Fe.join(`
`);return L===k.ADVANCED&&(ot+=`
Q`),fe(Ve,!0),tt({data:ot,filters:qe(),objectId:Ve}),be("endobj"),Re},We=g.__private__.putPages=function(){var V,Ae,Fe=[];for(V=1;V<=Pr;V++)nr[V].objId=Xn(),nr[V].contentsObjId=Xn();for(V=1;V<=Pr;V++)Fe.push(He({number:V,data:xe[V],objId:nr[V].objId,contentsObjId:nr[V].contentsObjId,mediaBox:nr[V].mediaBox,cropBox:nr[V].cropBox,bleedBox:nr[V].bleedBox,trimBox:nr[V].trimBox,artBox:nr[V].artBox,userUnit:nr[V].userUnit,rootDictionaryObjId:Ee,resourceDictionaryObjId:_e}));fe(Ee,!0),be("<</Type /Pages");var Re="/Kids [";for(Ae=0;Ae<Pr;Ae++)Re+=Fe[Ae]+" 0 R ";be(Re+"]"),be("/Count "+Pr),be(">>"),be("endobj"),zr.publish("postPutPages")},Je=function(V){zr.publish("putFont",{font:V,out:be,newObject:jn,putStream:tt}),V.isAlreadyPutted!==!0&&(V.objectNumber=jn(),be("<<"),be("/Type /Font"),be("/BaseFont /"+$0(V.postScriptName)),be("/Subtype /Type1"),typeof V.encoding=="string"&&be("/Encoding /"+V.encoding),be("/FirstChar 32"),be("/LastChar 255"),be(">>"),be("endobj"))},yt=function(){for(var V in gr)gr.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&Je(gr[V])},Nt=function(V){V.objectNumber=jn();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[C(V.x),C(V.y),C(V.x+V.width),C(V.y+V.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var Fe=V.pages[1].join(`
`);tt({data:Fe,additionalKeyValues:Ae,objectId:V.objectNumber}),be("endobj")},Ot=function(){for(var V in Wn)Wn.hasOwnProperty(V)&&Nt(Wn[V])},Bt=function(V,Ae){var Fe,Re=[],Ve=1/(Ae-1);for(Fe=0;Fe<1;Fe+=Ve)Re.push(Fe);if(Re.push(1),V[0].offset!=0){var ot={offset:0,color:V[0].color};V.unshift(ot)}if(V[V.length-1].offset!=1){var Et={offset:1,color:V[V.length-1].color};V.push(Et)}for(var Qt="",T=0,J=0;J<Re.length;J++){for(Fe=Re[J];Fe>V[T+1].offset;)T++;var se=V[T].offset,ye=(Fe-se)/(V[T+1].offset-se),Qe=V[T].color,Ze=V[T+1].color;Qt+=te(Math.round((1-ye)*Qe[0]+ye*Ze[0]).toString(16))+te(Math.round((1-ye)*Qe[1]+ye*Ze[1]).toString(16))+te(Math.round((1-ye)*Qe[2]+ye*Ze[2]).toString(16))}return Qt.trim()},Ut=function(V,Ae){Ae||(Ae=21);var Fe=jn(),Re=Bt(V.colors,Ae),Ve=[];Ve.push({key:"FunctionType",value:"0"}),Ve.push({key:"Domain",value:"[0.0 1.0]"}),Ve.push({key:"Size",value:"["+Ae+"]"}),Ve.push({key:"BitsPerSample",value:"8"}),Ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tt({data:Re,additionalKeyValues:Ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Fe}),be("endobj"),V.objectNumber=jn(),be("<< /ShadingType "+V.type),be("/ColorSpace /DeviceRGB");var ot="/Coords ["+C(parseFloat(V.coords[0]))+" "+C(parseFloat(V.coords[1]))+" ";V.type===2?ot+=C(parseFloat(V.coords[2]))+" "+C(parseFloat(V.coords[3])):ot+=C(parseFloat(V.coords[2]))+" "+C(parseFloat(V.coords[3]))+" "+C(parseFloat(V.coords[4]))+" "+C(parseFloat(V.coords[5])),be(ot+="]"),V.matrix&&be("/Matrix ["+V.matrix.toString()+"]"),be("/Function "+Fe+" 0 R"),be("/Extend [true true]"),be(">>"),be("endobj")},dr=function(V,Ae){var Fe=Xn(),Re=jn();Ae.push({resourcesOid:Fe,objectOid:Re}),V.objectNumber=Re;var Ve=[];Ve.push({key:"Type",value:"/Pattern"}),Ve.push({key:"PatternType",value:"1"}),Ve.push({key:"PaintType",value:"1"}),Ve.push({key:"TilingType",value:"1"}),Ve.push({key:"BBox",value:"["+V.boundingBox.map(C).join(" ")+"]"}),Ve.push({key:"XStep",value:C(V.xStep)}),Ve.push({key:"YStep",value:C(V.yStep)}),Ve.push({key:"Resources",value:Fe+" 0 R"}),V.matrix&&Ve.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),tt({data:V.stream,additionalKeyValues:Ve,objectId:V.objectNumber}),be("endobj")},jr=function(V){var Ae;for(Ae in Fr)Fr.hasOwnProperty(Ae)&&(Fr[Ae]instanceof ah?Ut(Fr[Ae]):Fr[Ae]instanceof em&&dr(Fr[Ae],V))},Or=function(V){for(var Ae in V.objectNumber=jn(),be("<<"),V)switch(Ae){case"opacity":be("/ca "+Q(V[Ae]));break;case"stroke-opacity":be("/CA "+Q(V[Ae]))}be(">>"),be("endobj")},Gr=function(){var V;for(V in nn)nn.hasOwnProperty(V)&&Or(nn[V])},Ra=function(){for(var V in be("/XObject <<"),Wn)Wn.hasOwnProperty(V)&&Wn[V].objectNumber>=0&&be("/"+V+" "+Wn[V].objectNumber+" 0 R");zr.publish("putXobjectDict"),be(">>")},pi=function(){On.oid=jn(),be("<<"),be("/Filter /Standard"),be("/V "+On.v),be("/R "+On.r),be("/U <"+On.toHexString(On.U)+">"),be("/O <"+On.toHexString(On.O)+">"),be("/P "+On.P),be(">>"),be("endobj")},La=function(){for(var V in be("/Font <<"),gr)gr.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&be("/"+V+" "+gr[V].objectNumber+" 0 R");be(">>")},hs=function(){if(Object.keys(Fr).length>0){for(var V in be("/Shading <<"),Fr)Fr.hasOwnProperty(V)&&Fr[V]instanceof ah&&Fr[V].objectNumber>=0&&be("/"+V+" "+Fr[V].objectNumber+" 0 R");zr.publish("putShadingPatternDict"),be(">>")}},$a=function(V){if(Object.keys(Fr).length>0){for(var Ae in be("/Pattern <<"),Fr)Fr.hasOwnProperty(Ae)&&Fr[Ae]instanceof g.TilingPattern&&Fr[Ae].objectNumber>=0&&Fr[Ae].objectNumber<V&&be("/"+Ae+" "+Fr[Ae].objectNumber+" 0 R");zr.publish("putTilingPatternDict"),be(">>")}},Ns=function(){if(Object.keys(nn).length>0){var V;for(V in be("/ExtGState <<"),nn)nn.hasOwnProperty(V)&&nn[V].objectNumber>=0&&be("/"+V+" "+nn[V].objectNumber+" 0 R");zr.publish("putGStateDict"),be(">>")}},Yn=function(V){fe(V.resourcesOid,!0),be("<<"),be("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),La(),hs(),$a(V.objectOid),Ns(),Ra(),be(">>"),be("endobj")},ms=function(){var V=[];yt(),Gr(),Ot(),jr(V),zr.publish("putResources"),V.forEach(Yn),Yn({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),zr.publish("postPutResources")},Pc=function(){zr.publish("putAdditionalObjects");for(var V=0;V<Te.length;V++){var Ae=Te[V];fe(Ae.objId,!0),be(Ae.content),be("endobj")}zr.publish("postPutAdditionalObjects")},KA=function(V){Ur[V.fontName]=Ur[V.fontName]||{},Ur[V.fontName][V.fontStyle]=V.id},ll=function(V,Ae,Fe,Re,Ve){var ot={id:"F"+(Object.keys(gr).length+1).toString(10),postScriptName:V,fontName:Ae,fontStyle:Fe,encoding:Re,isStandardFont:Ve||!1,metadata:{}};return zr.publish("addFont",{font:ot,instance:this}),gr[ot.id]=ot,KA(ot),ot.id},Hu=function(V){for(var Ae=0,Fe=st.length;Ae<Fe;Ae++){var Re=ll.call(this,V[Ae][0],V[Ae][1],V[Ae][2],st[Ae][3],!0);h===!1&&(m[Re]=!0);var Ve=V[Ae][0].split("-");KA({id:Re,fontName:Ve[0],fontStyle:Ve[1]||""})}zr.publish("addFonts",{fonts:gr,dictionary:Ur})},ks=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(Re){var Ae=Re.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var Fe="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+Re.message;if(!Cr.console)throw new Error(Fe);Cr.console.error(Fe,Re),Cr.alert&&alert(Fe)}},V.foo.bar=V,V.foo},jc=function(V,Ae){var Fe,Re,Ve,ot,Et,Qt,T,J,se;if(Ve=(Ae=Ae||{}).sourceEncoding||"Unicode",Et=Ae.outputEncoding,(Ae.autoencode||Et)&&gr[Rt].metadata&&gr[Rt].metadata[Ve]&&gr[Rt].metadata[Ve].encoding&&(ot=gr[Rt].metadata[Ve].encoding,!Et&&gr[Rt].encoding&&(Et=gr[Rt].encoding),!Et&&ot.codePages&&(Et=ot.codePages[0]),typeof Et=="string"&&(Et=ot[Et]),Et)){for(T=!1,Qt=[],Fe=0,Re=V.length;Fe<Re;Fe++)(J=Et[V.charCodeAt(Fe)])?Qt.push(String.fromCharCode(J)):Qt.push(V[Fe]),Qt[Fe].charCodeAt(0)>>8&&(T=!0);V=Qt.join("")}for(Fe=V.length;T===void 0&&Fe!==0;)V.charCodeAt(Fe-1)>>8&&(T=!0),Fe--;if(!T)return V;for(Qt=Ae.noBOM?[]:[254,255],Fe=0,Re=V.length;Fe<Re;Fe++){if((se=(J=V.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qt.push(se),Qt.push(J-(se<<8))}return String.fromCharCode.apply(void 0,Qt)},hn=g.__private__.pdfEscape=g.pdfEscape=function(V,Ae){return jc(V,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Is=g.__private__.beginPage=function(V){xe[++Pr]=[],nr[Pr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},oo(Pr),Se(xe[X])},cl=function(V,Ae){var Fe,Re,Ve;switch(r=Ae||r,typeof V=="string"&&(Fe=B(V.toLowerCase()),Array.isArray(Fe)&&(Re=Fe[0],Ve=Fe[1])),Array.isArray(V)&&(Re=V[0]*xt,Ve=V[1]*xt),isNaN(Re)&&(Re=a[0],Ve=a[1]),(Re>14400||Ve>14400)&&(sa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Re=Math.min(14400,Re),Ve=Math.min(14400,Ve)),a=[Re,Ve],r.substr(0,1)){case"l":Ve>Re&&(a=[Ve,Re]);break;case"p":Re>Ve&&(a=[Ve,Re])}Is(a),qu(fl),be(Fs),Ku!==0&&be(Ku+" J"),Zl!==0&&be(Zl+" j"),zr.publish("addPage",{pageNumber:Pr})},ul=function(V){V>0&&V<=Pr&&(xe.splice(V,1),nr.splice(V,1),Pr--,X>Pr&&(X=Pr),this.setPage(X))},oo=function(V){V>0&&V<=Pr&&(X=V)},_n=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return xe.length-1},Al=function(V,Ae,Fe){var Re,Ve=void 0;return Fe=Fe||{},V=V!==void 0?V:gr[Rt].fontName,Ae=Ae!==void 0?Ae:gr[Rt].fontStyle,Re=V.toLowerCase(),Ur[Re]!==void 0&&Ur[Re][Ae]!==void 0?Ve=Ur[Re][Ae]:Ur[V]!==void 0&&Ur[V][Ae]!==void 0?Ve=Ur[V][Ae]:Fe.disableWarning===!1&&sa.warn("Unable to look up font label for font '"+V+"', '"+Ae+"'. Refer to getFontList() for available fonts."),Ve||Fe.noFallback||(Ve=Ur.times[Ae])==null&&(Ve=Ur.times.normal),Ve},gi=g.__private__.putInfo=function(){var V=jn(),Ae=function(Re){return Re};for(var Fe in d!==null&&(Ae=On.encryptor(V,0)),be("<<"),be("/Producer ("+hn(Ae("jsPDF "+or.version))+")"),Lt)Lt.hasOwnProperty(Fe)&&Lt[Fe]&&be("/"+Fe.substr(0,1).toUpperCase()+Fe.substr(1)+" ("+hn(Ae(Lt[Fe]))+")");be("/CreationDate ("+hn(Ae(re))+")"),be(">>"),be("endobj")},Do=g.__private__.putCatalog=function(V){var Ae=(V=V||{}).rootDictionaryObjId||Ee;switch(jn(),be("<<"),be("/Type /Catalog"),be("/Pages "+Ae+" 0 R"),St||(St="fullwidth"),St){case"fullwidth":be("/OpenAction [3 0 R /FitH null]");break;case"fullheight":be("/OpenAction [3 0 R /FitV null]");break;case"fullpage":be("/OpenAction [3 0 R /Fit]");break;case"original":be("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Fe=""+St;Fe.substr(Fe.length-1)==="%"&&(St=parseInt(St)/100),typeof St=="number"&&be("/OpenAction [3 0 R /XYZ null null "+Q(St)+"]")}switch(It||(It="continuous"),It){case"continuous":be("/PageLayout /OneColumn");break;case"single":be("/PageLayout /SinglePage");break;case"two":case"twoleft":be("/PageLayout /TwoColumnLeft");break;case"tworight":be("/PageLayout /TwoColumnRight")}zt&&be("/PageMode /"+zt),zr.publish("putCatalog"),be(">>"),be("endobj")},$A=g.__private__.putTrailer=function(){be("trailer"),be("<<"),be("/Size "+(ce+1)),be("/Root "+ce+" 0 R"),be("/Info "+(ce-1)+" 0 R"),d!==null&&be("/Encrypt "+On.oid+" 0 R"),be("/ID [ <"+Y+"> <"+Y+"> ]"),be(">>")},Vu=g.__private__.putHeader=function(){be("%PDF-"+b),be("%")},zu=g.__private__.putXRef=function(){var V="0000000000";be("xref"),be("0 "+(ce+1)),be("0000000000 65535 f ");for(var Ae=1;Ae<=ce;Ae++)typeof de[Ae]=="function"?be((V+de[Ae]()).slice(-10)+" 00000 n "):de[Ae]!==void 0?be((V+de[Ae]).slice(-10)+" 00000 n "):be("0000000000 00000 n ")},Ro=g.__private__.buildDocument=function(){at(),Se(me),zr.publish("buildDocument"),Vu(),We(),Pc(),ms(),d!==null&&pi(),gi(),Do();var V=ge;return zu(),$A(),be("startxref"),be(""+V),be("%%EOF"),Se(xe[X]),me.join(`
`)},Oc=g.__private__.getBlob=function(V){return new Blob([Ke(V)],{type:"application/pdf"})},Lo=g.output=g.__private__.output=ks(function(V,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",V){case void 0:return Ro();case"save":g.save(Ae.filename);break;case"arraybuffer":return Ke(Ro());case"blob":return Oc(Ro());case"bloburi":case"bloburl":if(Cr.URL!==void 0&&typeof Cr.URL.createObjectURL=="function")return Cr.URL&&Cr.URL.createObjectURL(Oc(Ro()))||void 0;sa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Fe="",Re=Ro();try{Fe=n5(Re)}catch{Fe=n5(unescape(encodeURIComponent(Re)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+Fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Cr)==="[object Window]"){var Ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(Ve=Ae.pdfObjectUrl,ot="");var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ve+'"'+ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",Qt=Cr.open();return Qt!==null&&Qt.document.write(Et),Qt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Cr)==="[object Window]"){var T='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',J=Cr.open();if(J!==null){J.document.write(T);var se=this;J.document.documentElement.querySelector("#pdfViewer").onload=function(){J.document.title=Ae.filename,J.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(se.output("bloburl"))}}return J}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Cr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',Qe=Cr.open();if(Qe!==null&&(Qe.document.write(ye),Qe.document.title=Ae.filename),Qe||typeof safari>"u")return Qe;break;case"datauri":case"dataurl":return Cr.document.location.href=this.output("datauristring",Ae);default:return null}}),lo=function(V){return Array.isArray(fs)===!0&&fs.indexOf(V)>-1};switch(n){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=lo("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xt=n}var On=null;ie(),K();var Uo=function(V){return d!==null?On.encryptor(V,0):function(Ae){return Ae}},co=g.__private__.getPageInfo=g.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:nr[V].objId,pageNumber:V,pageContext:nr[V]}},hr=g.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in nr)if(nr[Ae].objId===V)break;return co(Ae)},uo=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:nr[X].objId,pageNumber:X,pageContext:nr[X]}};g.addPage=function(){return cl.apply(this,arguments),this},g.setPage=function(){return oo.apply(this,arguments),Se.call(this,xe[X]),this},g.insertPage=function(V){return this.addPage(),this.movePage(X,V),this},g.movePage=function(V,Ae){var Fe,Re;if(V>Ae){Fe=xe[V],Re=nr[V];for(var Ve=V;Ve>Ae;Ve--)xe[Ve]=xe[Ve-1],nr[Ve]=nr[Ve-1];xe[Ae]=Fe,nr[Ae]=Re,this.setPage(Ae)}else if(V<Ae){Fe=xe[V],Re=nr[V];for(var ot=V;ot<Ae;ot++)xe[ot]=xe[ot+1],nr[ot]=nr[ot+1];xe[Ae]=Fe,nr[Ae]=Re,this.setPage(Ae)}return this},g.deletePage=function(){return ul.apply(this,arguments),this},g.__private__.text=g.text=function(V,Ae,Fe,Re,Ve){var ot,Et,Qt,T,J,se,ye,Qe,Ze,_t=(Re=Re||{}).scope||this;if(typeof V=="number"&&typeof Ae=="number"&&(typeof Fe=="string"||Array.isArray(Fe))){var mr=Fe;Fe=Ae,Ae=V,V=mr}if(arguments[3]instanceof Gt?(S("The transform parameter of text() with a Matrix value"),Ze=Ve):(Qt=arguments[4],T=arguments[5],qn(ye=arguments[3])==="object"&&ye!==null||(typeof Qt=="string"&&(T=Qt,Qt=null),typeof ye=="string"&&(T=ye,ye=null),typeof ye=="number"&&(Qt=ye,ye=null),Re={flags:ye,angle:Qt,align:T})),isNaN(Ae)||isNaN(Fe)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return _t;var Zr="",kr=!1,Sn=typeof Re.lineHeightFactor=="number"?Re.lineHeightFactor:Jr,Ln=_t.internal.scaleFactor;function mo($r){return $r=$r.split("	").join(Array(Re.TabLen||9).join(" ")),hn($r,ye)}function _a($r){for(var Wr,Jn=$r.concat(),Sa=[],go=Jn.length;go--;)typeof(Wr=Jn.shift())=="string"?Sa.push(Wr):Array.isArray($r)&&(Wr.length===1||Wr[1]===void 0&&Wr[2]===void 0)?Sa.push(Wr[0]):Sa.push([Wr[0],Wr[1],Wr[2]]);return Sa}function wi($r,Wr){var Jn;if(typeof $r=="string")Jn=Wr($r)[0];else if(Array.isArray($r)){for(var Sa,go,eu=$r.concat(),tu=[],sc=eu.length;sc--;)typeof(Sa=eu.shift())=="string"?tu.push(Wr(Sa)[0]):Array.isArray(Sa)&&typeof Sa[0]=="string"&&(go=Wr(Sa[0],Sa[1],Sa[2]),tu.push([go[0],go[1],go[2]]));Jn=tu}return Jn}var vl=!1,Gc=!0;if(typeof V=="string")vl=!0;else if(Array.isArray(V)){var JA=V.concat();Et=[];for(var $u,Wa=JA.length;Wa--;)(typeof($u=JA.shift())!="string"||Array.isArray($u)&&typeof $u[0]!="string")&&(Gc=!1);vl=Gc}if(vl===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var qc=pt/_t.internal.scaleFactor,Wu=qc*(Sn-1);switch(Re.baseline){case"bottom":Fe-=Wu;break;case"top":Fe+=qc-Wu;break;case"hanging":Fe+=qc-2*Wu;break;case"middle":Fe+=qc/2-Wu}if((se=Re.maxWidth||0)>0&&(typeof V=="string"?V=_t.splitTextToSize(V,se):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function($r,Wr){return $r.concat(_t.splitTextToSize(Wr,se))},[]))),ot={text:V,x:Ae,y:Fe,options:Re,mutex:{pdfEscape:hn,activeFontKey:Rt,fonts:gr,activeFontSize:pt}},zr.publish("preProcessText",ot),V=ot.text,Qt=(Re=ot.options).angle,!(Ze instanceof Gt)&&Qt&&typeof Qt=="number"){Qt*=Math.PI/180,Re.rotationDirection===0&&(Qt=-Qt),L===k.ADVANCED&&(Qt=-Qt);var Xu=Math.cos(Qt),ZA=Math.sin(Qt);Ze=new Gt(Xu,ZA,-ZA,Xu,0,0)}else Qt&&Qt instanceof Gt&&(Ze=Qt);L!==k.ADVANCED||Ze||(Ze=an),(J=Re.charSpace||Jl)!==void 0&&(Zr+=C(I(J))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qe=Re.horizontalScale)!==void 0&&(Zr+=C(100*Qe)+` Tz
`),Re.lang;var bi=-1,sp=Re.renderingMode!==void 0?Re.renderingMode:Re.stroke,Nf=_t.internal.getCurrentPageInfo().pageContext;switch(sp){case 0:case!1:case"fill":bi=0;break;case 1:case!0:case"stroke":bi=1;break;case 2:case"fillThenStroke":bi=2;break;case 3:case"invisible":bi=3;break;case 4:case"fillAndAddForClipping":bi=4;break;case 5:case"strokeAndAddPathForClipping":bi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":bi=6;break;case 7:case"addToPathForClipping":bi=7}var Wh=Nf.usedRenderingMode!==void 0?Nf.usedRenderingMode:-1;bi!==-1?Zr+=bi+` Tr
`:Wh!==-1&&(Zr+=`0 Tr
`),bi!==-1&&(Nf.usedRenderingMode=bi),T=Re.align||"left";var po,ps=pt*Sn,Kc=_t.internal.pageSize.getWidth(),kf=gr[Rt];J=Re.charSpace||Jl,se=Re.maxWidth||0,ye=Object.assign({autoencode:!0,noBOM:!0},Re.flags);var nc=[],$c=function($r){return _t.getStringUnitWidth($r,{font:kf,charSpace:J,fontSize:pt,doKerning:!1})*pt/Ln};if(Object.prototype.toString.call(V)==="[object Array]"){var ti;Et=_a(V),T!=="left"&&(po=Et.map($c));var Ds,Wc=0;if(T==="right"){Ae-=po[0],V=[],Wa=Et.length;for(var Ci=0;Ci<Wa;Ci++)Ci===0?(Ds=Qs(Ae),ti=Ma(Fe)):(Ds=I(Wc-po[Ci]),ti=-ps),V.push([Et[Ci],Ds,ti]),Wc=po[Ci]}else if(T==="center"){Ae-=po[0]/2,V=[],Wa=Et.length;for(var Oo=0;Oo<Wa;Oo++)Oo===0?(Ds=Qs(Ae),ti=Ma(Fe)):(Ds=I((Wc-po[Oo])/2),ti=-ps),V.push([Et[Oo],Ds,ti]),Wc=po[Oo]}else if(T==="left"){V=[],Wa=Et.length;for(var yl=0;yl<Wa;yl++)V.push(Et[yl])}else if(T==="justify"&&kf.encoding==="Identity-H"){V=[],Wa=Et.length,se=se!==0?se:Kc;for(var Qo=0,ga=0;ga<Wa;ga++)if(ti=ga===0?Ma(Fe):-ps,Ds=ga===0?Qs(Ae):Qo,ga<Wa-1){var Ho=I((se-po[ga])/(Et[ga].split(" ").length-1)),Pa=Et[ga].split(" ");V.push([Pa[0]+" ",Ds,ti]),Qo=0;for(var Ei=1;Ei<Pa.length;Ei++){var Yu=($c(Pa[Ei-1]+" "+Pa[Ei])-$c(Pa[Ei]))*Ln+Ho;Ei==Pa.length-1?V.push([Pa[Ei],Yu,0]):V.push([Pa[Ei]+" ",Yu,0]),Qo-=Yu}}else V.push([Et[ga],Ds,ti]);V.push(["",Qo,0])}else{if(T!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Wa=Et.length,se=se!==0?se:Kc,ga=0;ga<Wa;ga++)ti=ga===0?Ma(Fe):-ps,Ds=ga===0?Qs(Ae):0,ga<Wa-1?nc.push(C(I((se-po[ga])/(Et[ga].split(" ").length-1)))):nc.push(0),V.push([Et[ga],Ds,ti])}}var wl=typeof Re.R2L=="boolean"?Re.R2L:kt;wl===!0&&(V=wi(V,function($r,Wr,Jn){return[$r.split("").reverse().join(""),Wr,Jn]})),ot={text:V,x:Ae,y:Fe,options:Re,mutex:{pdfEscape:hn,activeFontKey:Rt,fonts:gr,activeFontSize:pt}},zr.publish("postProcessText",ot),V=ot.text,kr=ot.mutex.isHex||!1;var ed=gr[Rt].encoding;ed!=="WinAnsiEncoding"&&ed!=="StandardEncoding"||(V=wi(V,function($r,Wr,Jn){return[mo($r),Wr,Jn]})),Et=_a(V),V=[];for(var Xc,Yc,Jc,Ju=0,td=1,Zc=Array.isArray(Et[0])?td:Ju,ac="",Zu=function($r,Wr,Jn){var Sa="";return Jn instanceof Gt?(Jn=typeof Re.angle=="number"?fn(Jn,new Gt(1,0,0,1,$r,Wr)):fn(new Gt(1,0,0,1,$r,Wr),Jn),L===k.ADVANCED&&(Jn=fn(new Gt(1,0,0,-1,0,0),Jn)),Sa=Jn.join(" ")+` Tm
`):Sa=C($r)+" "+C(Wr)+` Td
`,Sa},xa=0;xa<Et.length;xa++){switch(ac="",Zc){case td:Jc=(kr?"<":"(")+Et[xa][0]+(kr?">":")"),Xc=parseFloat(Et[xa][1]),Yc=parseFloat(Et[xa][2]);break;case Ju:Jc=(kr?"<":"(")+Et[xa]+(kr?">":")"),Xc=Qs(Ae),Yc=Ma(Fe)}nc!==void 0&&nc[xa]!==void 0&&(ac=nc[xa]+` Tw
`),xa===0?V.push(ac+Zu(Xc,Yc,Ze)+Jc):Zc===Ju?V.push(ac+Jc):Zc===td&&V.push(ac+Zu(Xc,Yc,Ze)+Jc)}V=Zc===Ju?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Yi=`BT
/`;return Yi+=Rt+" "+pt+` Tf
`,Yi+=C(pt*Sn)+` TL
`,Yi+=Po+`
`,Yi+=Zr,Yi+=V,be(Yi+="ET"),m[Rt]=!0,_t};var WA=g.__private__.clip=g.clip=function(V){return be(V==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return WA("evenodd")},g.__private__.discardPath=g.discardPath=function(){return be("n"),this};var js=g.__private__.isValidStyle=function(V){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(Ae=!0),Ae};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(V){return js(V)&&(u=V),this};var xi=g.__private__.getStyle=g.getStyle=function(V){var Ae=u;switch(V){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=V}return Ae},ei=g.close=function(){return be("h"),this};g.stroke=function(){return be("S"),this},g.fill=function(V){return Ao("f",V),this},g.fillEvenOdd=function(V){return Ao("f*",V),this},g.fillStroke=function(V){return Ao("B",V),this},g.fillStrokeEvenOdd=function(V){return Ao("B*",V),this};var Ao=function(V,Ae){qn(Ae)==="object"?Mo(Ae,V):be(V)},vi=function(V){V===null||L===k.ADVANCED&&V===void 0||(V=xi(V),be(V))};function dl(V,Ae,Fe,Re,Ve){var ot=new em(Ae||this.boundingBox,Fe||this.xStep,Re||this.yStep,this.gState,Ve||this.matrix);ot.stream=this.stream;var Et=V+"$$"+this.cloneIndex+++"$$";return Rn(Et,ot),ot}var Mo=function(V,Ae){var Fe=ds[V.key],Re=Fr[Fe];if(Re instanceof ah)be("q"),be(Gu(Ae)),Re.gState&&g.setGState(Re.gState),be(V.matrix.toString()+" cm"),be("/"+Fe+" sh"),be("Q");else if(Re instanceof em){var Ve=new Gt(1,0,0,-1,0,Hs());V.matrix&&(Ve=Ve.multiply(V.matrix||an),Fe=dl.call(Re,V.key,V.boundingBox,V.xStep,V.yStep,Ve).id),be("q"),be("/Pattern cs"),be("/"+Fe+" scn"),Re.gState&&g.setGState(Re.gState),be(Ae),be("Q")}},Gu=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},yi=g.moveTo=function(V,Ae){return be(C(I(V))+" "+C(z(Ae))+" m"),this},Os=g.lineTo=function(V,Ae){return be(C(I(V))+" "+C(z(Ae))+" l"),this},fo=g.curveTo=function(V,Ae,Fe,Re,Ve,ot){return be([C(I(V)),C(z(Ae)),C(I(Fe)),C(z(Re)),C(I(Ve)),C(z(ot)),"c"].join(" ")),this};g.__private__.line=g.line=function(V,Ae,Fe,Re,Ve){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||!js(Ve))throw new Error("Invalid arguments passed to jsPDF.line");return L===k.COMPAT?this.lines([[Fe-V,Re-Ae]],V,Ae,[1,1],Ve||"S"):this.lines([[Fe-V,Re-Ae]],V,Ae,[1,1]).stroke()},g.__private__.lines=g.lines=function(V,Ae,Fe,Re,Ve,ot){var Et,Qt,T,J,se,ye,Qe,Ze,_t,mr,Zr,kr;if(typeof V=="number"&&(kr=Fe,Fe=Ae,Ae=V,V=kr),Re=Re||[1,1],ot=ot||!1,isNaN(Ae)||isNaN(Fe)||!Array.isArray(V)||!Array.isArray(Re)||!js(Ve)||typeof ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(yi(Ae,Fe),Et=Re[0],Qt=Re[1],J=V.length,mr=Ae,Zr=Fe,T=0;T<J;T++)(se=V[T]).length===2?(mr=se[0]*Et+mr,Zr=se[1]*Qt+Zr,Os(mr,Zr)):(ye=se[0]*Et+mr,Qe=se[1]*Qt+Zr,Ze=se[2]*Et+mr,_t=se[3]*Qt+Zr,mr=se[4]*Et+mr,Zr=se[5]*Qt+Zr,fo(ye,Qe,Ze,_t,mr,Zr));return ot&&ei(),vi(Ve),this},g.path=function(V){for(var Ae=0;Ae<V.length;Ae++){var Fe=V[Ae],Re=Fe.c;switch(Fe.op){case"m":yi(Re[0],Re[1]);break;case"l":Os(Re[0],Re[1]);break;case"c":fo.apply(this,Re);break;case"h":ei()}}return this},g.__private__.rect=g.rect=function(V,Ae,Fe,Re,Ve){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||!js(Ve))throw new Error("Invalid arguments passed to jsPDF.rect");return L===k.COMPAT&&(Re=-Re),be([C(I(V)),C(z(Ae)),C(I(Fe)),C(I(Re)),"re"].join(" ")),vi(Ve),this},g.__private__.triangle=g.triangle=function(V,Ae,Fe,Re,Ve,ot,Et){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||isNaN(Ve)||isNaN(ot)||!js(Et))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Fe-V,Re-Ae],[Ve-Fe,ot-Re],[V-Ve,Ae-ot]],V,Ae,[1,1],Et,!0),this},g.__private__.roundedRect=g.roundedRect=function(V,Ae,Fe,Re,Ve,ot,Et){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||isNaN(Ve)||isNaN(ot)||!js(Et))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qt=4/3*(Math.SQRT2-1);return Ve=Math.min(Ve,.5*Fe),ot=Math.min(ot,.5*Re),this.lines([[Fe-2*Ve,0],[Ve*Qt,0,Ve,ot-ot*Qt,Ve,ot],[0,Re-2*ot],[0,ot*Qt,-Ve*Qt,ot,-Ve,ot],[2*Ve-Fe,0],[-Ve*Qt,0,-Ve,-ot*Qt,-Ve,-ot],[0,2*ot-Re],[0,-ot*Qt,Ve*Qt,-ot,Ve,-ot]],V+Ve,Ae,[1,1],Et,!0),this},g.__private__.ellipse=g.ellipse=function(V,Ae,Fe,Re,Ve){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||!js(Ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ot=4/3*(Math.SQRT2-1)*Fe,Et=4/3*(Math.SQRT2-1)*Re;return yi(V+Fe,Ae),fo(V+Fe,Ae-Et,V+ot,Ae-Re,V,Ae-Re),fo(V-ot,Ae-Re,V-Fe,Ae-Et,V-Fe,Ae),fo(V-Fe,Ae+Et,V-ot,Ae+Re,V,Ae+Re),fo(V+ot,Ae+Re,V+Fe,Ae+Et,V+Fe,Ae),vi(Ve),this},g.__private__.circle=g.circle=function(V,Ae,Fe,Re){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||!js(Re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,Ae,Fe,Fe,Re)},g.setFont=function(V,Ae,Fe){return Fe&&(Ae=R(Ae,Fe)),Rt=Al(V,Ae,{disableWarning:!1}),this};var Ua=g.__private__.getFont=g.getFont=function(){return gr[Al.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var V,Ae,Fe={};for(V in Ur)if(Ur.hasOwnProperty(V))for(Ae in Fe[V]=[],Ur[V])Ur[V].hasOwnProperty(Ae)&&Fe[V].push(Ae);return Fe},g.addFont=function(V,Ae,Fe,Re,Ve){var ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ot.indexOf(arguments[3])!==-1?Ve=arguments[3]:arguments[3]&&ot.indexOf(arguments[3])==-1&&(Fe=R(Fe,Re)),Ve=Ve||"Identity-H",ll.call(this,V,Ae,Fe,Ve)};var Jr,fl=t.lineWidth||.200025,ho=g.__private__.getLineWidth=g.getLineWidth=function(){return fl},qu=g.__private__.setLineWidth=g.setLineWidth=function(V){return fl=V,be(C(I(V))+" w"),this};g.__private__.setLineDash=or.API.setLineDash=or.API.setLineDashPattern=function(V,Ae){if(V=V||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(Fe){return C(I(Fe))}).join(" "),Ae=C(I(Ae)),be("["+V+"] "+Ae+" d"),this};var Xl=g.__private__.getLineHeight=g.getLineHeight=function(){return pt*Jr};g.__private__.getLineHeight=g.getLineHeight=function(){return pt*Jr};var Yl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(Jr=V),this},Xi=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Jr};Yl(t.lineHeight);var Qs=g.__private__.getHorizontalCoordinate=function(V){return I(V)},Ma=g.__private__.getVerticalCoordinate=function(V){return L===k.ADVANCED?V:nr[X].mediaBox.topRightY-nr[X].mediaBox.bottomLeftY-I(V)},XA=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(V){return C(Qs(V))},hl=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(V){return C(Ma(V))},Fs=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Be(Fs)},g.__private__.setStrokeColor=g.setDrawColor=function(V,Ae,Fe,Re){return Fs=Ie({ch1:V,ch2:Ae,ch3:Fe,ch4:Re,pdfColorType:"draw",precision:2}),be(Fs),this};var ml=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Be(ml)},g.__private__.setFillColor=g.setFillColor=function(V,Ae,Fe,Re){return ml=Ie({ch1:V,ch2:Ae,ch3:Fe,ch4:Re,pdfColorType:"fill",precision:2}),be(ml),this};var Po=t.textColor||"0 g",Qc=g.__private__.getTextColor=g.getTextColor=function(){return Be(Po)};g.__private__.setTextColor=g.setTextColor=function(V,Ae,Fe,Re){return Po=Ie({ch1:V,ch2:Ae,ch3:Fe,ch4:Re,pdfColorType:"text",precision:3}),this};var Jl=t.charSpace,Hc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Jl||0)};g.__private__.setCharSpace=g.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Jl=V,this};var Ku=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(V){var Ae=g.CapJoinStyles[V];if(Ae===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ku=Ae,be(Ae+" J"),this};var Zl=0;g.__private__.setLineJoin=g.setLineJoin=function(V){var Ae=g.CapJoinStyles[V];if(Ae===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zl=Ae,be(Ae+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return be(C(I(V))+" M"),this},g.GState=fy,g.setGState=function(V){(V=typeof V=="string"?nn[na[V]]:pl(null,V)).equals(pa)||(be("/"+V.id+" gs"),pa=V)};var pl=function(V,Ae){if(!V||!na[V]){var Fe=!1;for(var Re in nn)if(nn.hasOwnProperty(Re)&&nn[Re].equals(Ae)){Fe=!0;break}if(Fe)Ae=nn[Re];else{var Ve="GS"+(Object.keys(nn).length+1).toString(10);nn[Ve]=Ae,Ae.id=Ve}return V&&(na[V]=Ae.id),zr.publish("addGState",Ae),Ae}};g.addGState=function(V,Ae){return pl(V,Ae),this},g.saveGraphicsState=function(){return be("q"),Dn.push({key:Rt,size:pt,color:Po}),this},g.restoreGraphicsState=function(){be("Q");var V=Dn.pop();return Rt=V.key,pt=V.size,Po=V.color,pa=null,this},g.setCurrentTransformationMatrix=function(V){return be(V.toString()+" cm"),this},g.comment=function(V){return be("#"+V),this};var ec=function(V,Ae){var Fe=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Fe},set:function(ot){isNaN(ot)||(Fe=parseFloat(ot))}});var Re=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Re},set:function(ot){isNaN(ot)||(Re=parseFloat(ot))}});var Ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ve},set:function(ot){Ve=ot.toString()}}),this},Vc=function(V,Ae,Fe,Re){ec.call(this,V,Ae),this.type="rect";var Ve=Fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ve},set:function(Et){isNaN(Et)||(Ve=parseFloat(Et))}});var ot=Re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ot},set:function(Et){isNaN(Et)||(ot=parseFloat(Et))}}),this},tc=function(){this.page=Pr,this.currentPage=X,this.pages=xe.slice(0),this.pagesContext=nr.slice(0),this.x=wr,this.y=Jt,this.matrix=dn,this.width=xl(X),this.height=Hs(X),this.outputDestination=Me,this.id="",this.objectNumber=-1};tc.prototype.restore=function(){Pr=this.page,X=this.currentPage,nr=this.pagesContext,xe=this.pages,wr=this.x,Jt=this.y,dn=this.matrix,rc(X,this.width),zc(X,this.height),Me=this.outputDestination};var gl=function(V,Ae,Fe,Re,Ve){Bs.push(new tc),Pr=X=0,xe=[],wr=V,Jt=Ae,dn=Ve,Is([Fe,Re])},YA=function(V){if(Ea[V])Bs.pop().restore();else{var Ae=new tc,Fe="Xo"+(Object.keys(Wn).length+1).toString(10);Ae.id=Fe,Ea[V]=Fe,Wn[Fe]=Ae,zr.publish("addFormObject",Ae),Bs.pop().restore()}};for(var jo in g.beginFormObject=function(V,Ae,Fe,Re,Ve){return gl(V,Ae,Fe,Re,Ve),this},g.endFormObject=function(V){return YA(V),this},g.doFormObject=function(V,Ae){var Fe=Wn[Ea[V]];return be("q"),be(Ae.toString()+" cm"),be("/"+Fe.id+" Do"),be("Q"),this},g.getFormObject=function(V){var Ae=Wn[Ea[V]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},g.save=function(V,Ae){return V=V||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(th(Oc(Ro()),V),typeof th.unload=="function"&&Cr.setTimeout&&setTimeout(th.unload,911),this):new Promise(function(Fe,Re){try{var Ve=th(Oc(Ro()),V);typeof th.unload=="function"&&Cr.setTimeout&&setTimeout(th.unload,911),Fe(Ve)}catch(ot){Re(ot.message)}})},or.API)or.API.hasOwnProperty(jo)&&(jo==="events"&&or.API.events.length?function(V,Ae){var Fe,Re,Ve;for(Ve=Ae.length-1;Ve!==-1;Ve--)Fe=Ae[Ve][0],Re=Ae[Ve][1],V.subscribe.apply(V,[Fe].concat(typeof Re=="function"?[Re]:Re))}(zr,or.API.events):g[jo]=or.API[jo]);var xl=g.getPageWidth=function(V){return(nr[V=V||X].mediaBox.topRightX-nr[V].mediaBox.bottomLeftX)/xt},rc=g.setPageWidth=function(V,Ae){nr[V].mediaBox.topRightX=Ae*xt+nr[V].mediaBox.bottomLeftX},Hs=g.getPageHeight=function(V){return(nr[V=V||X].mediaBox.topRightY-nr[V].mediaBox.bottomLeftY)/xt},zc=g.setPageHeight=function(V,Ae){nr[V].mediaBox.topRightY=Ae*xt+nr[V].mediaBox.bottomLeftY};return g.internal={pdfEscape:hn,getStyle:xi,getFont:Ua,getFontSize:ut,getCharSpace:Hc,getTextColor:Qc,getLineHeight:Xl,getLineHeightFactor:Xi,getLineWidth:ho,write:je,getHorizontalCoordinate:Qs,getVerticalCoordinate:Ma,getCoordinateString:XA,getVerticalCoordinateString:hl,collections:{},newObject:jn,newAdditionalObject:ke,newObjectDeferred:Xn,newObjectDeferredBegin:fe,getFilters:qe,putStream:tt,events:zr,scaleFactor:xt,pageSize:{getWidth:function(){return xl(X)},setWidth:function(V){rc(X,V)},getHeight:function(){return Hs(X)},setHeight:function(V){zc(X,V)}},encryptionOptions:d,encryption:On,getEncryptor:Uo,output:Lo,getNumberOfPages:_n,pages:xe,out:be,f2:Q,f3:D,getPageInfo:co,getPageInfoByObjId:hr,getCurrentPageInfo:uo,getPDFVersion:y,Point:ec,Rectangle:Vc,Matrix:Gt,hasHotfix:lo},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return xl(X)},set:function(V){rc(X,V)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Hs(X)},set:function(V){zc(X,V)},enumerable:!0,configurable:!0}),Hu.call(g,st),Rt="F1",cl(a,r),zr.publish("initialized"),g}K0.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},K0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},K0.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},K0.prototype.processOwnerPassword=function(t,e){return s5(a5(e).substr(0,5),t)},K0.prototype.encryptor=function(t,e){var r=a5(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return s5(r,n)}},fy.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||qn(t)!==qn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},or.API={events:[]},or.version="2.5.2";var Ha=or.API,E4=1,Hh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},E0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Rr=function(t){return t.toFixed(2)},Nd=function(t){return t.toFixed(5)};Ha.__acroform__={};var Fo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},yF=function(t){return t*E4},gu=function(t){var e=new FM,r=rr.internal.getHeight(t)||0,n=rr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Rr(n)),Number(Rr(r))],e},Gie=Ha.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},qie=Ha.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Kie=Ha.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},ss=Ha.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Kie(t,e-1)},is=Ha.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Gie(t,e-1)},os=Ha.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qie(t,e-1)},$ie=Ha.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(a+i)||0,l.upperRight_Y=n(s)||0,[Number(Rr(l.lowerLeft_X)),Number(Rr(l.lowerLeft_Y)),Number(Rr(l.upperRight_X)),Number(Rr(l.upperRight_Y))]},Wie=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=i5(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Rr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=gu(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},i5=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var s=r,i=rr.internal.getHeight(t)||0;i=i<0?-i:i;var o=rr.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(D,I,O){if(D+1<a.length){var z=I+" "+a[D+1][0];return bv(z,t,O).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,h=bv("3",t,s).height,m=t.multiline?i-s:(i-h)/2,g=m+=2,b=0,y=0,E=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+bv(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var B="",k=0,L=0;L<a.length;L++)if(a.hasOwnProperty(L)){var M=!1;if(a[L].length!==1&&E!==a[L].length-1){if((h+2)*(k+2)+2>i)continue e;B+=a[L][E],M=!0,y=L,L--}else{B=(B+=a[L][E]+" ").substr(B.length-1)==" "?B.substr(0,B.length-1):B;var P=parseInt(L),R=l(P,B,s),C=L>=a.length-1;if(R&&!C){B+=" ",E=0;continue}if(R||C){if(C)y=P;else if(t.multiline&&(h+2)*(k+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(k+2)+2>i)continue e;y=P}}for(var S="",N=b;N<=y;N++){var Q=a[N];if(t.multiline){if(N===y){S+=Q[E]+" ",E=(E+1)%Q.length;continue}if(N===b){S+=Q[Q.length-1]+" ";continue}}S+=Q[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=bv(S,t,s).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=Rr(u)+" "+Rr(g)+` Td
`,e+="("+Hh(S)+`) Tj
`,e+=-Rr(u)+` 0 Td
`,g=-(s+2),d=0,b=M?y:y+1,k++,B=""}break}return n.text=e,n.fontSize=s,n},bv=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Xie={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Yie=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Jie=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,a=t[r];e.internal.newObjectDeferredBegin(a.objId,!0),qn(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete t[n]}},Zie=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Rc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Xie)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");E4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new DM,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&Yie(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=$ie(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=rr.createDefaultAppearanceStream(o),qn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Wie(o);l.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var h="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var g=o.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var i in g)if(g.hasOwnProperty(i)){var b=g[i];typeof b=="function"&&(b=b.call(a,o)),h+="/"+i+" "+b+" ",a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(a,o)),h+="/"+i+" "+b,a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}s&&Jie(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},IM=Ha.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),qn(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+Hh(n(t[s].toString()))+")"):a+=t[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},iE=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Hh(n(t))+")"},bu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};bu.prototype.toString=function(){return this.objId+" 0 R"},bu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},bu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:IM(a,this.objId,this.scope)}):a instanceof bu?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var FM=function(){bu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Fo(FM,bu);var DM=function(){bu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Hh(r(t))+")"}},set:function(r){t=r}})};Fo(DM,bu);var Rc=function t(){bu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute F supplied.');e=B}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ss(e,3)},set:function(B){B?this.F=is(e,3):this.F=os(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute Ff supplied.');r=B}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(B){n=B!==void 0?B:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(B){n[0]=B}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(B){n[1]=B}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(B){n[2]=B}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(B){n[3]=B}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(B){switch(B){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=B;break;default:throw new Error('Invalid value "'+B+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof hy)return;s="FieldObject"+t.FieldNum++}var B=function(k){return k};return this.scope&&(B=this.scope.internal.getEncryptor(this.objId)),"("+Hh(B(s))+")"},set:function(B){s=B.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(B){s=B}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(B){i=B}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(B){o=B}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(B){l=B}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/E4:u},set:function(B){u=B}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(B){d=B}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof hy||this instanceof mh))return iE(h,this.objId,this.scope)},set:function(B){B=B.toString(),h=B}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Xs?m:iE(m,this.objId,this.scope)},set:function(B){B=B.toString(),m=this instanceof Xs?B:B.substr(0,1)==="("?E0(B.substr(1,B.length-2)):E0(B)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xs?E0(m.substr(1,m.length-1)):m},set:function(B){B=B.toString(),m=this instanceof Xs?"/"+B:B}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(B){this.V=B}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Xs?g:iE(g,this.objId,this.scope)},set:function(B){B=B.toString(),g=this instanceof Xs?B:B.substr(0,1)==="("?E0(B.substr(1,B.length-2)):E0(B)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xs?E0(g.substr(1,g.length-1)):g},set:function(B){B=B.toString(),g=this instanceof Xs?"/"+B:B}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(B){B=!!B,y=B}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(B){b=B}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,1)},set:function(B){B?this.Ff=is(this.Ff,1):this.Ff=os(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,2)},set:function(B){B?this.Ff=is(this.Ff,2):this.Ff=os(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,3)},set:function(B){B?this.Ff=is(this.Ff,3):this.Ff=os(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(B){if([0,1,2].indexOf(B)===-1)throw new Error('Invalid value "'+B+'" for attribute Q supplied.');E=B}}),Object.defineProperty(this,"textAlign",{get:function(){var B;switch(E){case 0:default:B="left";break;case 1:B="center";break;case 2:B="right"}return B},configurable:!0,enumerable:!0,set:function(B){switch(B){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};Fo(Rc,bu);var Am=function(){Rc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return IM(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var l,u=[];l=i.exec(s);)u.push(l[o]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,18)},set:function(r){r?this.Ff=is(this.Ff,18):this.Ff=os(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=is(this.Ff,19):this.Ff=os(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,20)},set:function(r){r?(this.Ff=is(this.Ff,20),e.sort()):this.Ff=os(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,22)},set:function(r){r?this.Ff=is(this.Ff,22):this.Ff=os(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,23)},set:function(r){r?this.Ff=is(this.Ff,23):this.Ff=os(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,27)},set:function(r){r?this.Ff=is(this.Ff,27):this.Ff=os(this.Ff,27)}}),this.hasAppearanceStream=!1};Fo(Am,Rc);var dm=function(){Am.call(this),this.fontName="helvetica",this.combo=!1};Fo(dm,Am);var fm=function(){dm.call(this),this.combo=!0};Fo(fm,dm);var B2=function(){fm.call(this),this.edit=!0};Fo(B2,fm);var Xs=function(){Rc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,15)},set:function(r){r?this.Ff=is(this.Ff,15):this.Ff=os(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,16)},set:function(r){r?this.Ff=is(this.Ff,16):this.Ff=os(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,17)},set:function(r){r?this.Ff=is(this.Ff,17):this.Ff=os(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,26)},set:function(r){r?this.Ff=is(this.Ff,26):this.Ff=os(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+Hh(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){qn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Fo(Xs,Rc);var N2=function(){Xs.call(this),this.pushButton=!0};Fo(N2,Xs);var hm=function(){Xs.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Fo(hm,Xs);var hy=function(){var t,e;Rc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+Hh(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){qn(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Fo(hy,Rc),hm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},hm.prototype.createOption=function(t){var e=new hy;return e.Parent=this,e.optionName=t,this.Kids.push(e),eoe.call(this.scope,e),e};var k2=function(){Xs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rr.CheckBox.createAppearanceStream()};Fo(k2,Xs);var mh=function(){Rc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,13)},set:function(e){e?this.Ff=is(this.Ff,13):this.Ff=os(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,21)},set:function(e){e?this.Ff=is(this.Ff,21):this.Ff=os(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,23)},set:function(e){e?this.Ff=is(this.Ff,23):this.Ff=os(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,24)},set:function(e){e?this.Ff=is(this.Ff,24):this.Ff=os(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,25)},set:function(e){e?this.Ff=is(this.Ff,25):this.Ff=os(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,26)},set:function(e){e?this.Ff=is(this.Ff,26):this.Ff=os(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Fo(mh,Rc);var I2=function(){mh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ss(this.Ff,14)},set:function(t){t?this.Ff=is(this.Ff,14):this.Ff=os(this.Ff,14)}}),this.password=!0};Fo(I2,mh);var rr={CheckBox:{createAppearanceStream:function(){return{N:{On:rr.CheckBox.YesNormal},D:{On:rr.CheckBox.YesPushDown,Off:rr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=i5(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Rr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=gu(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=rr.internal.getHeight(t),i=rr.internal.getWidth(t),o=i5(t,t.caption);return a.push("1 g"),a.push("0 0 "+Rr(i)+" "+Rr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Rr(i-1)+" "+Rr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Rr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Circle.YesNormal,e.D[t]=rr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=gu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=rr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Nd(rr.internal.getWidth(t)/2)+" "+Nd(rr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*rr.internal.Bezier_C).toFixed(5)),i=Number((n*rr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Nd(rr.internal.getWidth(t)/2)+" "+Nd(rr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Nd(rr.internal.getWidth(t)/2)+" "+Nd(rr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*rr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Nd(rr.internal.getWidth(t)/2)+" "+Nd(rr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Cross.YesNormal,e.D[t]=rr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=gu(t);e.scope=t.scope;var r=[],n=rr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Rr(rr.internal.getWidth(t)-2)+" "+Rr(rr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Rr(n.x1.x)+" "+Rr(n.x1.y)+" m"),r.push(Rr(n.x2.x)+" "+Rr(n.x2.y)+" l"),r.push(Rr(n.x4.x)+" "+Rr(n.x4.y)+" m"),r.push(Rr(n.x3.x)+" "+Rr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=rr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Rr(rr.internal.getWidth(t)-2)+" "+Rr(rr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Rr(r.x1.x)+" "+Rr(r.x1.y)+" m"),n.push(Rr(r.x2.x)+" "+Rr(r.x2.y)+" l"),n.push(Rr(r.x4.x)+" "+Rr(r.x4.y)+" m"),n.push(Rr(r.x3.x)+" "+Rr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};rr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=rr.internal.getWidth(t),r=rr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},rr.internal.getWidth=function(t){var e=0;return qn(t)==="object"&&(e=yF(t.Rect[2])),e},rr.internal.getHeight=function(t){var e=0;return qn(t)==="object"&&(e=yF(t.Rect[3])),e};var eoe=Ha.addField=function(t){if(Zie(this,t),!(t instanceof Rc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ha.AcroFormChoiceField=Am,Ha.AcroFormListBox=dm,Ha.AcroFormComboBox=fm,Ha.AcroFormEditBox=B2,Ha.AcroFormButton=Xs,Ha.AcroFormPushButton=N2,Ha.AcroFormRadioButton=hm,Ha.AcroFormCheckBox=k2,Ha.AcroFormTextField=mh,Ha.AcroFormPasswordField=I2,Ha.AcroFormAppearance=rr,Ha.AcroForm={ChoiceField:Am,ListBox:dm,ComboBox:fm,EditBox:B2,Button:Xs,PushButton:N2,RadioButton:hm,CheckBox:k2,TextField:mh,PasswordField:I2,Appearance:rr},or.AcroForm={ChoiceField:Am,ListBox:dm,ComboBox:fm,EditBox:B2,Button:Xs,PushButton:N2,RadioButton:hm,CheckBox:k2,TextField:mh,PasswordField:I2,Appearance:rr};or.AcroForm;function RM(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(D,I){var O,z,re,Y,ae,K=e;if((I=I||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(R(D))for(ae in r)for(re=r[ae],O=0;O<re.length;O+=1){for(Y=!0,z=0;z<re[O].length;z+=1)if(re[O][z]!==void 0&&re[O][z]!==D[z]){Y=!1;break}if(Y===!0){K=ae;break}}else for(ae in r)for(re=r[ae],O=0;O<re.length;O+=1){for(Y=!0,z=0;z<re[O].length;z+=1)if(re[O][z]!==void 0&&re[O][z]!==D.charCodeAt(z)){Y=!1;break}if(Y===!0){K=ae;break}}return K===e&&I!==e&&(K=I),K},a=function D(I){for(var O=this.internal.write,z=this.internal.putStream,re=(0,this.internal.getFilters)();re.indexOf("FlateEncode")!==-1;)re.splice(re.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:I.width}),Y.push({key:"Height",value:I.height}),I.colorSpace===E.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===E.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var ae="",K=0,G=I.transparency.length;K<G;K++)ae+=I.transparency[K]+" "+I.transparency[K]+" ";Y.push({key:"Mask",value:"["+ae+"]"})}I.sMask!==void 0&&Y.push({key:"SMask",value:I.objectId+1+" 0 R"});var W=I.filter!==void 0?["/"+I.filter]:void 0;if(z({data:I.data,additionalKeyValues:Y,alreadyAppliedFilters:W,objectId:I.objectId}),O("endobj"),"sMask"in I&&I.sMask!==void 0){var ie="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,j={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:ie,data:I.sMask};"filter"in I&&(j.filter=I.filter),D.call(this,j)}if(I.colorSpace===E.INDEXED){var X=this.internal.newObject();z({data:S(new Uint8Array(I.palette)),objectId:X}),O("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var I in D)a.call(this,D[I])},i=function(){var D,I=this.internal.collections.addImage_images,O=this.internal.write;for(var z in I)O("/I"+(D=I[z]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof t["process"+D.toUpperCase()]=="function"},h=function(D){return qn(D)==="object"&&D.nodeType===1},m=function(D,I){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var O=""+D.getAttribute("src");if(O.indexOf("data:image/")===0)return Lg(unescape(O).split("base64,").pop());var z=t.loadFile(O,!0);if(z!==void 0)return z}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var re;switch(I){case"PNG":re="image/png";break;case"WEBP":re="image/webp";break;case"JPEG":case"JPG":default:re="image/jpeg"}return Lg(D.toDataURL(re,1).split("base64,").pop())}},g=function(D){var I=this.internal.collections.addImage_images;if(I){for(var O in I)if(D===I[O].alias)return I[O]}},b=function(D,I,O){return D||I||(D=-96,I=-96),D<0&&(D=-1*O.width*72/D/this.internal.scaleFactor),I<0&&(I=-1*O.height*72/I/this.internal.scaleFactor),D===0&&(D=I*O.width/O.height),I===0&&(I=D*O.height/O.width),[D,I]},y=function(D,I,O,z,re,Y){var ae=b.call(this,O,z,re),K=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,W=l.call(this);if(O=ae[0],z=ae[1],W[re.index]=re,Y){Y*=Math.PI/180;var ie=Math.cos(Y),j=Math.sin(Y),X=function(te){return te.toFixed(4)},Z=[X(ie),X(j),X(-1*j),X(ie),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,K(D),G(I+z),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([K(O),"0","0",K(z),"0","0","cm"].join(" "))):this.internal.write([K(O),"0","0",K(z),K(D),G(I+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+re.index+" Do"),this.internal.write("Q")},E=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var B=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(D){var I,O,z=0;if(typeof D=="string")for(O=D.length,I=0;I<O;I++)z=(z<<5)-z+D.charCodeAt(I),z|=0;else if(R(D))for(O=D.byteLength/2,I=0;I<O;I++)z=(z<<5)-z+D[I],z|=0;return z},L=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var I=!0;return D.length===0&&(I=!1),D.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(I=!1),I},M=t.__addimage__.extractImageFromDataUrl=function(D){var I=(D=D||"").split("base64,"),O=null;if(I.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(z)&&(O={mimeType:z[1],charset:z[2],data:I[1]})}return O},P=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(D){return P()&&D instanceof ArrayBuffer};var R=t.__addimage__.isArrayBufferView=function(D){return P()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},C=t.__addimage__.binaryStringToUint8Array=function(D){for(var I=D.length,O=new Uint8Array(I),z=0;z<I;z++)O[z]=D.charCodeAt(z);return O},S=t.__addimage__.arrayBufferToBinaryString=function(D){for(var I="",O=R(D)?D:new Uint8Array(D),z=0;z<O.length;z+=8192)I+=String.fromCharCode.apply(null,O.subarray(z,z+8192));return I};t.addImage=function(){var D,I,O,z,re,Y,ae,K,G;if(typeof arguments[1]=="number"?(I=e,O=arguments[1],z=arguments[2],re=arguments[3],Y=arguments[4],ae=arguments[5],K=arguments[6],G=arguments[7]):(I=arguments[1],O=arguments[2],z=arguments[3],re=arguments[4],Y=arguments[5],ae=arguments[6],K=arguments[7],G=arguments[8]),qn(D=arguments[0])==="object"&&!h(D)&&"imageData"in D){var W=D;D=W.imageData,I=W.format||I||e,O=W.x||O||0,z=W.y||z||0,re=W.w||W.width||re,Y=W.h||W.height||Y,ae=W.alias||ae,K=W.compression||K,G=W.rotation||W.angle||G}var ie=this.internal.getFilters();if(K===void 0&&ie.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(O)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var j=N.call(this,D,I,ae,K);return y.call(this,O,z,re,Y,j,G),this};var N=function(D,I,O,z){var re,Y,ae;if(typeof D=="string"&&n(D)===e){D=unescape(D);var K=Q(D,!1);(K!==""||(K=t.loadFile(D,!0))!==void 0)&&(D=K)}if(h(D)&&(D=m(D,I)),I=n(D,I),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((ae=O)==null||ae.length===0)&&(O=function(G){return typeof G=="string"||R(G)?k(G):R(G.data)?k(G.data):null}(D)),(re=g.call(this,O))||(P()&&(D instanceof Uint8Array||I==="RGBA"||(Y=D,D=C(D))),re=this["process"+I.toUpperCase()](D,u.call(this),O,function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in t.image_compression?G:B.NONE}(z),Y)),!re)throw new Error("An unknown error occurred whilst processing the image.");return re},Q=t.__addimage__.convertBase64ToBinaryString=function(D,I){var O;I=typeof I!="boolean"||I;var z,re="";if(typeof D=="string"){z=(O=M(D))!==null?O.data:D;try{re=Lg(z)}catch(Y){if(I)throw L(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return re};t.getImageProperties=function(D){var I,O,z="";if(h(D)&&(D=m(D)),typeof D=="string"&&n(D)===e&&((z=Q(D,!1))===""&&(z=t.loadFile(D)||""),D=z),O=n(D),!d(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!P()||D instanceof Uint8Array||(D=C(D)),!(I=this["process"+O.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=O,I}})(or.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};or.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((n=u[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){n=u[m];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),B=this.internal.getEncryptor(y.objId),k=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(B(n.contents))+")",s+=" /Popup "+E.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(B(k))+") >>",y.content=s;var L=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+L,n.open&&(s+=" /Open true"),s+=" >>",E.content=s,this.internal.write(y.objId,"0 R",E.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var M=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+g(b(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var P=this.annotations._nameMap[n.options.name];n.options.pageNumber=P.page,n.options.top=P.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var R=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+R+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+a),h:u(n+s)},options:i,type:"link"})},t.textWithLink=function(r,n,a,s){var i,o,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,a-u,o,i,s),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(or.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return i(y)&&a.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(y){var E=0,B=r,k="",L=0;for(E=0;E<y.length;E+=1)B[y.charCodeAt(E)]!==void 0?(L++,typeof(B=B[y.charCodeAt(E)])=="number"&&(k+=String.fromCharCode(B),B=r,L=0),E===y.length-1&&(B=r,k+=y.charAt(E-(L-1)),E-=L-1,L=0)):(B=r,k+=y.charAt(E-L),E-=L,L=0);return k};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(y,E,B){return i(y)?s(y)===!1?-1:!u(y)||!i(E)&&!i(B)||!i(B)&&o(E)||o(y)&&!i(E)||o(y)&&l(E)||o(y)&&o(E)?0:d(y)&&i(E)&&!o(E)&&i(B)&&u(B)?3:o(y)||!i(B)?1:2:-1},g=function(y){var E=0,B=0,k=0,L="",M="",P="",R=(y=y||"").split("\\s+"),C=[];for(E=0;E<R.length;E+=1){for(C.push(""),B=0;B<R[E].length;B+=1)L=R[E][B],M=R[E][B-1],P=R[E][B+1],i(L)?(k=m(L,M,P),C[E]+=k!==-1?String.fromCharCode(e[L.charCodeAt(0)][k]):L):C[E]+=L;C[E]=h(C[E])}return C.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var y,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,B=[];if(Array.isArray(E)){var k=0;for(B=[],k=0;k<E.length;k+=1)Array.isArray(E[k])?B.push([g(E[k][0]),E[k][1],E[k][2]]):B.push([g(E[k])]);y=B}else y=g(E);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",b])}(or.API),or.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(or.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(y){b=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,g=0,b=0,y=0,E=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var B=u.maxWidth;B>0?typeof l=="string"?l=this.splitTextToSize(l,B):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(L,M){return L.concat(E.splitTextToSize(M,B))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)g<(y=this.getStringUnitWidth(l[k],{font:h})*d)&&(g=y);return g!==0&&(b=l.length),{w:g/=m,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,g&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,h,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var g,b,y,E,B=[],k=[],L=[],M={},P={},R=[],C=[],S=(m=m||{}).autoSize||!1,N=m.printHeaders!==!1,Q=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,D=m.margins||Object.assign({width:this.getPageWidth()},e),I=typeof m.padding=="number"?m.padding:3,O=m.headerBackgroundColor||"#c8c8c8",z=m.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=Q,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=z,this.setFontSize(Q),h==null)k=B=Object.keys(d[0]),L=B.map(function(){return"left"});else if(Array.isArray(h)&&qn(h[0])==="object")for(B=h.map(function(W){return W.name}),k=h.map(function(W){return W.prompt||W.name||""}),L=h.map(function(W){return W.align||"left"}),g=0;g<h.length;g+=1)P[h[g].name]=h[g].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(k=B=h,L=B.map(function(){return"left"}));if(S||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<B.length;g+=1){for(M[E=B[g]]=d.map(function(W){return W[E]}),this.setFont(void 0,"bold"),R.push(this.getTextDimensions(k[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=M[E],this.setFont(void 0,"normal"),y=0;y<b.length;y+=1)R.push(this.getTextDimensions(b[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[E]=Math.max.apply(null,R)+I+I,R=[]}if(N){var re={};for(g=0;g<B.length;g+=1)re[B[g]]={},re[B[g]].text=k[g],re[B[g]].align=L[g];var Y=o.call(this,re,P);C=B.map(function(W){return new s(l,u,P[W],Y,re[W].text,void 0,re[W].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var ae=h.reduce(function(W,ie){return W[ie.name]=ie.align,W},{});for(g=0;g<d.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:d[g]},this);var K=o.call(this,d[g],P);for(y=0;y<B.length;y+=1){var G=d[g][B[y]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:y,data:G},this),i.call(this,new s(l,u,P[B[y]],K,G,g+2,ae[B[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(g){var b=l[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/m+d+d},this).reduce(function(g,b){return Math.max(g,b)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(or.API);var LM={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},UM=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],o5=RM(UM),MM=[100,200,300,400,500,600,700,800,900],toe=RM(MM);function l5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return LM[s=s||"normal"]?s:"normal"}(t.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),a=function(s){return typeof o5[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function wF(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var roe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},bF={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function CF(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function noe(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},roe,r.genericFontFamilies||{}),s=null,i=null,o=0;o<e.length;++o)if(a[(s=l5(e[o])).family]&&(s.family=a[s.family]),t.hasOwnProperty(s.family)){i=t[s.family];break}if(!(i=i||t[n]))throw new Error("Could not find a font-family for the rule '"+CF(s)+"' and default family '"+n+"'.");if(i=function(l,u){if(u[l])return u[l];var d=o5[l],h=d<=o5.normal?-1:1,m=wF(u,UM,d,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=LM[l],h=0;h<d.length;++h)if(u[d[h]])return u[d[h]];throw new Error("Could not find a matching font-style for "+l)}(s.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=toe[l],h=wF(u,MM,d,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+CF(s)+"'.");return i}function EF(t){return t.trimLeft()}function aoe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function soe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Cv,_F,SF,oE=["times"];(function(t){var e,r,n,a,s,i,o,l,u,d=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new l,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new i,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new i,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var h=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=j;Object.defineProperty(this,"pdf",{get:function(){return X}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Se){Z=!!Se}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Se){te=!!Se}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(Se){isNaN(Se)||(ce=Se)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(Se){isNaN(Se)||(de=Se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Se){var be;typeof Se=="number"?be=[Se,Se,Se,Se]:((be=new Array(4))[0]=Se[0],be[1]=Se.length>=2?Se[1]:be[0],be[2]=Se.length>=3?Se[2]:be[0],be[3]=Se.length>=4?Se[3]:be[1]),u.margin=be}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(Se){me=Se}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(Se){ge=Se}});var Te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Te},set:function(Se){Te=Se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Se){Se instanceof d&&(u=Se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Se){u.path=Se}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(Se){xe=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var be;be=m(Se),this.ctx.fillStyle=be.style,this.ctx.isFillTransparent=be.a===0,this.ctx.fillOpacity=be.a,this.pdf.setFillColor(be.r,be.g,be.b,{a:be.a}),this.pdf.setTextColor(be.r,be.g,be.b,{a:be.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var be=m(Se);this.ctx.strokeStyle=be.style,this.ctx.isStrokeTransparent=be.a===0,this.ctx.strokeOpacity=be.a,be.a===0?this.pdf.setDrawColor(255,255,255):(be.a,this.pdf.setDrawColor(be.r,be.g,be.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var oe=null;function Me(Se,be){if(oe===null){var je=function(Ke){var st=[];return Object.keys(Ke).forEach(function(pt){Ke[pt].forEach(function(St){var ut=null;switch(St){case"bold":ut={family:pt,weight:"bold"};break;case"italic":ut={family:pt,style:"italic"};break;case"bolditalic":ut={family:pt,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:pt}}ut!==null&&(ut.ref={name:pt,style:St},st.push(ut))})}),st}(Se.getFontList());oe=function(Ke){for(var st={},pt=0;pt<Ke.length;++pt){var St=l5(Ke[pt]),ut=St.family,kt=St.stretch,zt=St.style,Yt=St.weight;st[ut]=st[ut]||{},st[ut][kt]=st[ut][kt]||{},st[ut][kt][zt]=st[ut][kt][zt]||{},st[ut][kt][zt][Yt]=St}return st}(je.concat(be))}return oe}var at=null;Object.defineProperty(this,"fontFaces",{get:function(){return at},set:function(Se){oe=null,at=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var be;if(this.ctx.font=Se,(be=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var je=be[1],Ke=(be[2],be[3]),st=be[4],pt=(be[5],be[6]),St=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(st)[2];st=Math.floor(St==="px"?parseFloat(st)*this.pdf.internal.scaleFactor:St==="em"?parseFloat(st)*this.pdf.getFontSize():parseFloat(st)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(st);var ut=function(Lt){var Rt,xt,wr=[],Jt=Lt.trim();if(Jt==="")return oE;if(Jt in bF)return[bF[Jt]];for(;Jt!=="";){switch(xt=null,Rt=(Jt=EF(Jt)).charAt(0)){case'"':case"'":xt=aoe(Jt.substring(1),Rt);break;default:xt=soe(Jt)}if(xt===null||(wr.push(xt[0]),(Jt=EF(xt[1]))!==""&&Jt.charAt(0)!==","))return oE;Jt=Jt.replace(/^,/,"")}return wr}(pt);if(this.fontFaces){var kt=noe(Me(this.pdf,this.fontFaces),ut.map(function(Lt){return{family:Lt,stretch:"normal",weight:Ke,style:je}}));this.pdf.setFont(kt.ref.name,kt.ref.style)}else{var zt="";(Ke==="bold"||parseInt(Ke,10)>=700||je==="bold")&&(zt="bold"),je==="italic"&&(zt+="italic"),zt.length===0&&(zt="normal");for(var Yt="",It={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Dt=0;Dt<ut.length;Dt++){if(this.pdf.internal.getFont(ut[Dt],zt,{noFallback:!0,disableWarning:!0})!==void 0){Yt=ut[Dt];break}if(zt==="bolditalic"&&this.pdf.internal.getFont(ut[Dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Yt=ut[Dt],zt="bold";else if(this.pdf.internal.getFont(ut[Dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Yt=ut[Dt],zt="normal";break}}if(Yt===""){for(var Wt=0;Wt<ut.length;Wt++)if(It[ut[Wt]]){Yt=It[ut[Wt]];break}}Yt=Yt===""?"Times":Yt,this.pdf.setFont(Yt,zt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};h.prototype.setLineDash=function(j){this.lineDash=j},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){M.call(this,"fill",!1)},h.prototype.stroke=function(){M.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(j,X){if(isNaN(j)||isNaN(X))throw sa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new i(j,X));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(j,X)},h.prototype.closePath=function(){var j=new i(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&qn(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){j=new i(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(j.x,j.y)},h.prototype.lineTo=function(j,X){if(isNaN(j)||isNaN(X))throw sa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new i(j,X));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(Z.x,Z.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},h.prototype.quadraticCurveTo=function(j,X,Z,te){if(isNaN(Z)||isNaN(te)||isNaN(j)||isNaN(X))throw sa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new i(Z,te)),de=this.ctx.transform.applyToPoint(new i(j,X));this.path.push({type:"qct",x1:de.x,y1:de.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new i(ce.x,ce.y)},h.prototype.bezierCurveTo=function(j,X,Z,te,ce,de){if(isNaN(ce)||isNaN(de)||isNaN(j)||isNaN(X)||isNaN(Z)||isNaN(te))throw sa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new i(ce,de)),ge=this.ctx.transform.applyToPoint(new i(j,X)),Te=this.ctx.transform.applyToPoint(new i(Z,te));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:Te.x,y2:Te.y,x:me.x,y:me.y}),this.ctx.lastPoint=new i(me.x,me.y)},h.prototype.arc=function(j,X,Z,te,ce,de){if(isNaN(j)||isNaN(X)||isNaN(Z)||isNaN(te)||isNaN(ce))throw sa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new i(j,X));j=me.x,X=me.y;var ge=this.ctx.transform.applyToPoint(new i(0,Z)),Te=this.ctx.transform.applyToPoint(new i(0,0));Z=Math.sqrt(Math.pow(ge.x-Te.x,2)+Math.pow(ge.y-Te.y,2))}Math.abs(ce-te)>=2*Math.PI&&(te=0,ce=2*Math.PI),this.path.push({type:"arc",x:j,y:X,radius:Z,startAngle:te,endAngle:ce,counterclockwise:de})},h.prototype.arcTo=function(j,X,Z,te,ce){throw new Error("arcTo not implemented.")},h.prototype.rect=function(j,X,Z,te){if(isNaN(j)||isNaN(X)||isNaN(Z)||isNaN(te))throw sa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,X),this.lineTo(j+Z,X),this.lineTo(j+Z,X+te),this.lineTo(j,X+te),this.lineTo(j,X),this.lineTo(j+Z,X),this.lineTo(j,X)},h.prototype.fillRect=function(j,X,Z,te){if(isNaN(j)||isNaN(X)||isNaN(Z)||isNaN(te))throw sa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,X,Z,te),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},h.prototype.strokeRect=function(j,X,Z,te){if(isNaN(j)||isNaN(X)||isNaN(Z)||isNaN(te))throw sa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(j,X,Z,te),this.stroke())},h.prototype.clearRect=function(j,X,Z,te){if(isNaN(j)||isNaN(X)||isNaN(Z)||isNaN(te))throw sa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,X,Z,te))},h.prototype.save=function(j){j=typeof j!="boolean"||j;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},h.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(X),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(j){var X,Z,te,ce;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))X=0,Z=0,te=0,ce=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(de!==null)X=parseInt(de[1]),Z=parseInt(de[2]),te=parseInt(de[3]),ce=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)X=parseInt(de[1]),Z=parseInt(de[2]),te=parseInt(de[3]),ce=parseFloat(de[4]);else{if(ce=1,typeof j=="string"&&j.charAt(0)!=="#"){var me=new BM(j);j=me.ok?me.toHex():"#000000"}j.length===4?(X=j.substring(1,2),X+=X,Z=j.substring(2,3),Z+=Z,te=j.substring(3,4),te+=te):(X=j.substring(1,3),Z=j.substring(3,5),te=j.substring(5,7)),X=parseInt(X,16),Z=parseInt(Z,16),te=parseInt(te,16)}}return{r:X,g:Z,b:te,a:ce,style:j}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(j,X,Z,te){if(isNaN(X)||isNaN(Z)||typeof j!="string")throw sa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!g.call(this)){var ce=K(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;I.call(this,{text:j,x:X,y:Z,scale:de,angle:ce,align:this.textAlign,maxWidth:te})}},h.prototype.strokeText=function(j,X,Z,te){if(isNaN(X)||isNaN(Z)||typeof j!="string")throw sa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){te=isNaN(te)?void 0:te;var ce=K(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;I.call(this,{text:j,x:X,y:Z,scale:de,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:te})}},h.prototype.measureText=function(j){if(typeof j!="string")throw sa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,Z=this.pdf.internal.scaleFactor,te=X.internal.getFontSize(),ce=X.getStringUnitWidth(j)*te/X.internal.scaleFactor,de=function(me){var ge=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this};return new de({width:ce*=Math.round(96*Z/72*1e4)/1e4})},h.prototype.scale=function(j,X){if(isNaN(j)||isNaN(X))throw sa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(j,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.rotate=function(j){if(isNaN(j))throw sa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new l(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.translate=function(j,X){if(isNaN(j)||isNaN(X))throw sa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,j,X);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.transform=function(j,X,Z,te,ce,de){if(isNaN(j)||isNaN(X)||isNaN(Z)||isNaN(te)||isNaN(ce)||isNaN(de))throw sa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new l(j,X,Z,te,ce,de);this.ctx.transform=this.ctx.transform.multiply(me)},h.prototype.setTransform=function(j,X,Z,te,ce,de){j=isNaN(j)?1:j,X=isNaN(X)?0:X,Z=isNaN(Z)?0:Z,te=isNaN(te)?1:te,ce=isNaN(ce)?0:ce,de=isNaN(de)?0:de,this.ctx.transform=new l(j,X,Z,te,ce,de)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(j,X,Z,te,ce,de,me,ge,Te){var xe=this.pdf.getImageProperties(j),oe=1,Me=1,at=1,Se=1;te!==void 0&&ge!==void 0&&(at=ge/te,Se=Te/ce,oe=xe.width/te*ge/te,Me=xe.height/ce*Te/ce),de===void 0&&(de=X,me=Z,X=0,Z=0),te!==void 0&&ge===void 0&&(ge=te,Te=ce),te===void 0&&ge===void 0&&(ge=xe.width,Te=xe.height);for(var be,je=this.ctx.transform.decompose(),Ke=K(je.rotate.shx),st=new l,pt=(st=(st=(st=st.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(de-X*at,me-Z*Se,te*oe,ce*Me)),St=E.call(this,pt),ut=[],kt=0;kt<St.length;kt+=1)ut.indexOf(St[kt])===-1&&ut.push(St[kt]);if(L(ut),this.autoPaging)for(var zt=ut[0],Yt=ut[ut.length-1],It=zt;It<Yt+1;It++){this.pdf.setPage(It);var Dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Wt=It===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=It===1?0:Lt+(It-2)*Rt;if(this.ctx.clip_path.length!==0){var wr=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(be,this.posX+this.margin[3],-xt+Wt+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=wr}var Jt=JSON.parse(JSON.stringify(pt));Jt=k([Jt],this.posX+this.margin[3],-xt+Wt+this.ctx.prevPageLastElemOffset)[0];var dn=(It>zt||It<Yt)&&y.call(this);dn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dt,Rt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,Ke),dn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,Ke)};var E=function(j,X,Z){var te=[];X=X||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":te.push(Math.floor((j.y+ce)/Z)+1);break;case"arc":te.push(Math.floor((j.y+ce-j.radius)/Z)+1),te.push(Math.floor((j.y+ce+j.radius)/Z)+1);break;case"qct":var de=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);te.push(Math.floor((de.y+ce)/Z)+1),te.push(Math.floor((de.y+de.h+ce)/Z)+1);break;case"bct":var me=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);te.push(Math.floor((me.y+ce)/Z)+1),te.push(Math.floor((me.y+me.h+ce)/Z)+1);break;case"rect":te.push(Math.floor((j.y+ce)/Z)+1),te.push(Math.floor((j.y+j.h+ce)/Z)+1)}for(var ge=0;ge<te.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<te[ge];)B.call(this);return te},B=function(){var j=this.fillStyle,X=this.strokeStyle,Z=this.font,te=this.lineCap,ce=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=X,this.font=Z,this.lineCap=te,this.lineWidth=ce,this.lineJoin=de},k=function(j,X,Z){for(var te=0;te<j.length;te++)switch(j[te].type){case"bct":j[te].x2+=X,j[te].y2+=Z;case"qct":j[te].x1+=X,j[te].y1+=Z;case"mt":case"lt":case"arc":default:j[te].x+=X,j[te].y+=Z}return j},L=function(j){return j.sort(function(X,Z){return X-Z})},M=function(j,X){for(var Z,te,ce=this.fillStyle,de=this.strokeStyle,me=this.lineCap,ge=this.lineWidth,Te=Math.abs(ge*this.ctx.transform.scaleX),xe=this.lineJoin,oe=JSON.parse(JSON.stringify(this.path)),Me=JSON.parse(JSON.stringify(this.path)),at=[],Se=0;Se<Me.length;Se++)if(Me[Se].x!==void 0)for(var be=E.call(this,Me[Se]),je=0;je<be.length;je+=1)at.indexOf(be[je])===-1&&at.push(be[je]);for(var Ke=0;Ke<at.length;Ke++)for(;this.pdf.internal.getNumberOfPages()<at[Ke];)B.call(this);if(L(at),this.autoPaging)for(var st=at[0],pt=at[at.length-1],St=st;St<pt+1;St++){this.pdf.setPage(St),this.fillStyle=ce,this.strokeStyle=de,this.lineCap=me,this.lineWidth=Te,this.lineJoin=xe;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=St===1?this.posY+this.margin[0]:this.margin[0],zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=St===1?0:zt+(St-2)*Yt;if(this.ctx.clip_path.length!==0){var Dt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Z,this.posX+this.margin[3],-It+kt+this.ctx.prevPageLastElemOffset),P.call(this,j,!0),this.path=Dt}if(te=JSON.parse(JSON.stringify(oe)),this.path=k(te,this.posX+this.margin[3],-It+kt+this.ctx.prevPageLastElemOffset),X===!1||St===0){var Wt=(St>st||St<pt)&&y.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Yt,null).clip().discardPath()),P.call(this,j,X),Wt&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=Te,P.call(this,j,X),this.lineWidth=ge;this.path=oe},P=function(j,X){if((j!=="stroke"||X||!b.call(this))&&(j==="stroke"||X||!g.call(this))){for(var Z,te,ce=[],de=this.path,me=0;me<de.length;me++){var ge=de[me];switch(ge.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:ge,deltas:[],abs:[]});break;case"lt":var Te=ce.length;if(de[me-1]&&!isNaN(de[me-1].x)&&(Z=[ge.x-de[me-1].x,ge.y-de[me-1].y],Te>0)){for(;Te>=0;Te--)if(ce[Te-1].close!==!0&&ce[Te-1].begin!==!0){ce[Te-1].deltas.push(Z),ce[Te-1].abs.push(ge);break}}break;case"bct":Z=[ge.x1-de[me-1].x,ge.y1-de[me-1].y,ge.x2-de[me-1].x,ge.y2-de[me-1].y,ge.x-de[me-1].x,ge.y-de[me-1].y],ce[ce.length-1].deltas.push(Z);break;case"qct":var xe=de[me-1].x+2/3*(ge.x1-de[me-1].x),oe=de[me-1].y+2/3*(ge.y1-de[me-1].y),Me=ge.x+2/3*(ge.x1-ge.x),at=ge.y+2/3*(ge.y1-ge.y),Se=ge.x,be=ge.y;Z=[xe-de[me-1].x,oe-de[me-1].y,Me-de[me-1].x,at-de[me-1].y,Se-de[me-1].x,be-de[me-1].y],ce[ce.length-1].deltas.push(Z);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(ge)}}te=X?null:j==="stroke"?"stroke":"fill";for(var je=!1,Ke=0;Ke<ce.length;Ke++)if(ce[Ke].arc)for(var st=ce[Ke].abs,pt=0;pt<st.length;pt++){var St=st[pt];St.type==="arc"?S.call(this,St.x,St.y,St.radius,St.startAngle,St.endAngle,St.counterclockwise,void 0,X,!je):O.call(this,St.x,St.y),je=!0}else if(ce[Ke].close===!0)this.pdf.internal.out("h"),je=!1;else if(ce[Ke].begin!==!0){var ut=ce[Ke].start.x,kt=ce[Ke].start.y;z.call(this,ce[Ke].deltas,ut,kt),je=!0}te&&N.call(this,te),X&&Q.call(this)}},R=function(j){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-Z;case"top":return j+X-Z;case"hanging":return j+X-2*Z;case"middle":return j+X/2-Z;case"ideographic":return j;case"alphabetic":default:return j}},C=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(X,Z){this.colorStops.push([X,Z])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(j,X,Z,te,ce,de,me,ge,Te){for(var xe=Y.call(this,Z,te,ce,de),oe=0;oe<xe.length;oe++){var Me=xe[oe];oe===0&&(Te?D.call(this,Me.x1+j,Me.y1+X):O.call(this,Me.x1+j,Me.y1+X)),re.call(this,j,X,Me.x2,Me.y2,Me.x3,Me.y3,Me.x4,Me.y4)}ge?Q.call(this):N.call(this,me)},N=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Q=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(j,X){this.pdf.internal.out(r(j)+" "+n(X)+" m")},I=function(j){var X;switch(j.align){case"right":case"end":X="right";break;case"center":X="center";break;case"left":case"start":default:X="left"}var Z=this.pdf.getTextDimensions(j.text),te=R.call(this,j.y),ce=C.call(this,te)-Z.h,de=this.ctx.transform.applyToPoint(new i(j.x,te)),me=this.ctx.transform.decompose(),ge=new l;ge=(ge=(ge=ge.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var Te,xe,oe,Me=this.ctx.transform.applyToRectangle(new o(j.x,te,Z.w,Z.h)),at=ge.applyToRectangle(new o(j.x,ce,Z.w,Z.h)),Se=E.call(this,at),be=[],je=0;je<Se.length;je+=1)be.indexOf(Se[je])===-1&&be.push(Se[je]);if(L(be),this.autoPaging)for(var Ke=be[0],st=be[be.length-1],pt=Ke;pt<st+1;pt++){this.pdf.setPage(pt);var St=pt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[2],zt=kt-this.margin[0],Yt=this.pdf.internal.pageSize.width-this.margin[1],It=Yt-this.margin[3],Dt=pt===1?0:ut+(pt-2)*zt;if(this.ctx.clip_path.length!==0){var Wt=this.path;Te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Te,this.posX+this.margin[3],-1*Dt+St),P.call(this,"fill",!0),this.path=Wt}var Lt=k([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-Dt+St+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*j.scale),oe=this.lineWidth,this.lineWidth=oe*j.scale);var Rt=this.autoPaging!=="text";if(Rt||Lt.y+Lt.h<=kt){if(Rt||Lt.y>=St&&Lt.x<=Yt){var xt=Rt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Yt-Lt.x)[0],wr=k([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-Dt+St+this.ctx.prevPageLastElemOffset)[0],Jt=Rt&&(pt>Ke||pt<st)&&y.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,zt,null).clip().discardPath()),this.pdf.text(xt,wr.x,wr.y,{angle:j.angle,align:X,renderingMode:j.renderingMode}),Jt&&this.pdf.restoreGraphicsState()}}else Lt.y<kt&&(this.ctx.prevPageLastElemOffset+=kt-Lt.y);j.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=oe)}else j.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*j.scale),oe=this.lineWidth,this.lineWidth=oe*j.scale),this.pdf.text(j.text,de.x+this.posX,de.y+this.posY,{angle:j.angle,align:X,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=oe)},O=function(j,X,Z,te){Z=Z||0,te=te||0,this.pdf.internal.out(r(j+Z)+" "+n(X+te)+" l")},z=function(j,X,Z){return this.pdf.lines(j,X,Z,null,null)},re=function(j,X,Z,te,ce,de,me,ge){this.pdf.internal.out([e(a(Z+j)),e(s(te+X)),e(a(ce+j)),e(s(de+X)),e(a(me+j)),e(s(ge+X)),"c"].join(" "))},Y=function(j,X,Z,te){for(var ce=2*Math.PI,de=Math.PI/2;X>Z;)X-=ce;var me=Math.abs(Z-X);me<ce&&te&&(me=ce-me);for(var ge=[],Te=te?-1:1,xe=X;me>1e-5;){var oe=xe+Te*Math.min(me,de);ge.push(ae.call(this,j,xe,oe)),me-=Math.abs(oe-xe),xe=oe}return ge},ae=function(j,X,Z){var te=(Z-X)/2,ce=j*Math.cos(te),de=j*Math.sin(te),me=ce,ge=-de,Te=me*me+ge*ge,xe=Te+me*ce+ge*de,oe=4/3*(Math.sqrt(2*Te*xe)-xe)/(me*de-ge*ce),Me=me-oe*ge,at=ge+oe*me,Se=Me,be=-at,je=te+X,Ke=Math.cos(je),st=Math.sin(je);return{x1:j*Math.cos(X),y1:j*Math.sin(X),x2:Me*Ke-at*st,y2:Me*st+at*Ke,x3:Se*Ke-be*st,y3:Se*st+be*Ke,x4:j*Math.cos(Z),y4:j*Math.sin(Z)}},K=function(j){return 180*j/Math.PI},G=function(j,X,Z,te,ce,de){var me=j+.5*(Z-j),ge=X+.5*(te-X),Te=ce+.5*(Z-ce),xe=de+.5*(te-de),oe=Math.min(j,ce,me,Te),Me=Math.max(j,ce,me,Te),at=Math.min(X,de,ge,xe),Se=Math.max(X,de,ge,xe);return new o(oe,at,Me-oe,Se-at)},W=function(j,X,Z,te,ce,de,me,ge){var Te,xe,oe,Me,at,Se,be,je,Ke,st,pt,St,ut,kt,zt=Z-j,Yt=te-X,It=ce-Z,Dt=de-te,Wt=me-ce,Lt=ge-de;for(xe=0;xe<41;xe++)Ke=(be=(oe=j+(Te=xe/40)*zt)+Te*((at=Z+Te*It)-oe))+Te*(at+Te*(ce+Te*Wt-at)-be),st=(je=(Me=X+Te*Yt)+Te*((Se=te+Te*Dt)-Me))+Te*(Se+Te*(de+Te*Lt-Se)-je),xe==0?(pt=Ke,St=st,ut=Ke,kt=st):(pt=Math.min(pt,Ke),St=Math.min(St,st),ut=Math.max(ut,Ke),kt=Math.max(kt,st));return new o(Math.round(pt),Math.round(St),Math.round(ut-pt),Math.round(kt-St))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,X,Z=(j=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:X}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(or.API),function(t){var e=function(s){var i,o,l,u,d,h,m,g,b,y;for(o=[],l=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(h=(d=((d=((d=((d=(d-(y=d%85))/85)-(b=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)%85,o.push(h+33,m+33,g+33,b+33,y+33)):o.push(122);return function(E,B){for(var k=B;k>0;k--)E.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,l,u,d,h=String,m="length",g=255,b="charCodeAt",y="slice",E="replace";for(s[y](-2),s=s[y](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),l=[],u=0,d=(s+=i="uuuuu"[y](s[m]%5||5))[m];d>u;u+=5)o=52200625*(s[b](u)-33)+614125*(s[b](u+1)-33)+7225*(s[b](u+2)-33)+85*(s[b](u+3)-33)+(s[b](u+4)-33),l.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(B,k){for(var L=k;L>0;L--)B.pop()}(l,i[m]),h.fromCharCode.apply(h,l)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=r5(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,i){var o=0,l=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(or.API),function(t){t.loadFile=function(e,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var h=new XMLHttpRequest,m=0,g=function(b){var y=b.length,E=[],B=String.fromCharCode;for(m=0;m<y;m+=1)E.push(B(255&b.charCodeAt(m)));return E.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(g(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return g(h.responseText)}(a,s,i)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(or.API),function(t){function e(){return(Cr.html2canvas?Promise.resolve(Cr.html2canvas):dy(()=>Promise.resolve().then(()=>HEe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Cr.DOMPurify?Promise.resolve(Cr.DOMPurify):dy(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=qn(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},s=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(l){return this.set({src:a("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var g=u[m],b=g.src.find(function(y){return y.format==="truetype"});b&&l.addFont(b.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var l=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||or.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,d).then(function(h){return l.updateProgress(1),h})})},s.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,or.getPageSize=function(i,o,l){if(qn(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,b=0,y=0;if(m.hasOwnProperty(h))b=m[h][1]/d,y=m[h][0]/d;else try{b=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",y>b&&(g=y,y=b,b=g);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",b>y&&(g=y,y=b,b=g)}return{width:y,height:b,unit:o,k:d,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(l5):null;var l=new s(o);return o.worker?l:l.from(i).doCallback()}}(or.API),or.API.addJS=function(t){return SF=t,this.internal.events.subscribe("postPutResources",function(){Cv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Cv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),_F=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+SF+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Cv!==void 0&&_F!==void 0&&this.internal.out("/Names <</JavaScript "+Cv+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var h=r.internal.newObject();d.push(h);var m=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(or.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(h){for(var m,g=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,y={width:0,height:0,numcomponents:1},E=4;E<b;E+=2){if(E+=g,e.indexOf(h.charCodeAt(E+1))!==-1){m=256*h.charCodeAt(E+5)+h.charCodeAt(E+6),y={width:256*h.charCodeAt(E+7)+h.charCodeAt(E+8),height:m,numcomponents:h.charCodeAt(E+9)};break}g=256*h.charCodeAt(E+2)+h.charCodeAt(E+3)}return y}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(or.API);var _0,Ev,TF,BF,NF,ioe=function(){var t,e,r;function n(s){var i,o,l,u,d,h,m,g,b,y,E,B,k,L;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),b=(function(){var M,P;for(P=[],M=0;M<4;++M)P.push(String.fromCharCode(this.data[this.pos++]));return P}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*d/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,i-=4),s=(h!=null?h.data:void 0)||this.imgData,B=0;0<=i?B<i:B>i;0<=i?++B:--B)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(k=0;0<=y?k<y:k>y;0<=y?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":m=(E=this.read(i)).indexOf(0),g=String.fromCharCode.apply(String,E.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,E.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(h,m,g,b){var y,E,B,k,L,M,P,R,C,S,N,Q,D,I,O,z,re,Y,ae,K,G,W=Math.ceil((u.width-h)/g),ie=Math.ceil((u.height-m)/b),j=u.width==W&&u.height==ie;for(I=i*W,Q=j?o:new Uint8Array(I*ie),M=s.length,D=0,E=0;D<ie&&l<M;){switch(s[l++]){case 0:for(k=re=0;re<I;k=re+=1)Q[E++]=s[l++];break;case 1:for(k=Y=0;Y<I;k=Y+=1)y=s[l++],L=k<i?0:Q[E-i],Q[E++]=(y+L)%256;break;case 2:for(k=ae=0;ae<I;k=ae+=1)y=s[l++],B=(k-k%i)/i,O=D&&Q[(D-1)*I+B*i+k%i],Q[E++]=(O+y)%256;break;case 3:for(k=K=0;K<I;k=K+=1)y=s[l++],B=(k-k%i)/i,L=k<i?0:Q[E-i],O=D&&Q[(D-1)*I+B*i+k%i],Q[E++]=(y+Math.floor((L+O)/2))%256;break;case 4:for(k=G=0;G<I;k=G+=1)y=s[l++],B=(k-k%i)/i,L=k<i?0:Q[E-i],D===0?O=z=0:(O=Q[(D-1)*I+B*i+k%i],z=B&&Q[(D-1)*I+(B-1)*i+k%i]),P=L+O-z,R=Math.abs(P-L),S=Math.abs(P-O),N=Math.abs(P-z),C=R<=S&&R<=N?L:S<=N?O:z,Q[E++]=(y+C)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!j){var X=((m+D*b)*u.width+h)*i,Z=D*I;for(k=0;k<W;k+=1){for(var te=0;te<i;te+=1)o[X++]=Q[Z++];X+=(g-1)*i}}D++}}return s=Pie(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,l,u,d,h,m,g;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,s=0,i=h=0,m=o.length;h<m;i=h+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(g=d[s++])!=null?g:255;return u},n.prototype.copyToImageData=function(s,i){var o,l,u,d,h,m,g,b,y,E,B;if(l=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(B=this._decodedPalette)!=null?B:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(u=s.data||s).length,h=y||i,d=m=0,l===1)for(;d<b;)g=y?4*i[d/4]:m,E=h[g++],u[d++]=E,u[d++]=E,u[d++]=E,u[d++]=o?h[g++]:255,m=g;else for(;d<b;)g=y?4*i[d/4]:m,u[d++]=h[g++],u[d++]=h[g++],u[d++]=h[g++],u[d++]=o?h[g++]:255,m=g},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Cr)==="[object Window]"){try{e=Cr.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),t=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,l,u,d,h,m,g;if(this.animation){for(g=[],o=d=0,h=(m=this.animation.frames).length;d<h;o=++d)i=m[o],l=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,g.push(i.image=t(l));return g}},n.prototype.renderFrame=function(s,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,l,u,d,h,m=this;return o=0,h=this.animation,u=h.numFrames,l=h.frames,d=h.numPlays,(i=function(){var g,b;if(g=o++%u,b=l[g],m.renderFrame(s,g),u>1&&o/u<d)return m.animation._timeout=setTimeout(i,b.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ooe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,i=1<<(7&a)+1;t[e++],t[e++];var o=null,l=null;s&&(o=e,l=i,e+=3*i);var u=!0,d=[],h=0,m=null,g=0,b=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];h=t[e++]|t[e++]<<8,m=t[e++],(1&y)==0&&(m=null),g=y>>2&7,e++;break;case 254:for(;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var E=t[e++]|t[e++]<<8,B=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,L=t[e++]|t[e++]<<8,M=t[e++],P=M>>6&1,R=1<<(7&M)+1,C=o,S=l,N=!1;M>>7&&(N=!0,C=e,S=R,e+=3*R);var Q=e;for(e++;;){var D;if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}d.push({x:E,y:B,width:k,height:L,has_local_palette:N,palette_offset:C,palette_size:S,data_offset:Q,data_length:e-Q,transparent_index:m,interlaced:!!P,delay:h,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,O){var z=this.frameInfo(I),re=z.width*z.height,Y=new Uint8Array(re);kF(t,z.data_offset,Y,re);var ae=z.palette_offset,K=z.transparent_index;K===null&&(K=256);var G=z.width,W=r-G,ie=G,j=4*(z.y*r+z.x),X=4*((z.y+z.height)*r+z.x),Z=j,te=4*W;z.interlaced===!0&&(te+=4*r*7);for(var ce=8,de=0,me=Y.length;de<me;++de){var ge=Y[de];if(ie===0&&(ie=G,(Z+=te)>=X&&(te=4*W+4*r*(ce-1),Z=j+(G+W)*(ce<<1),ce>>=1)),ge===K)Z+=4;else{var Te=t[ae+3*ge],xe=t[ae+3*ge+1],oe=t[ae+3*ge+2];O[Z++]=oe,O[Z++]=xe,O[Z++]=Te,O[Z++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(I,O){var z=this.frameInfo(I),re=z.width*z.height,Y=new Uint8Array(re);kF(t,z.data_offset,Y,re);var ae=z.palette_offset,K=z.transparent_index;K===null&&(K=256);var G=z.width,W=r-G,ie=G,j=4*(z.y*r+z.x),X=4*((z.y+z.height)*r+z.x),Z=j,te=4*W;z.interlaced===!0&&(te+=4*r*7);for(var ce=8,de=0,me=Y.length;de<me;++de){var ge=Y[de];if(ie===0&&(ie=G,(Z+=te)>=X&&(te=4*W+4*r*(ce-1),Z=j+(G+W)*(ce<<1),ce>>=1)),ge===K)Z+=4;else{var Te=t[ae+3*ge],xe=t[ae+3*ge+1],oe=t[ae+3*ge+2];O[Z++]=Te,O[Z++]=xe,O[Z++]=oe,O[Z++]=255}--ie}}}function kF(t,e,r,n){for(var a=t[e++],s=1<<a,i=s+1,o=i+1,l=a+1,u=(1<<l)-1,d=0,h=0,m=0,g=t[e++],b=new Int32Array(4096),y=null;;){for(;d<16&&g!==0;)h|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var E=h&u;if(h>>=l,d-=l,E!==s){if(E===i)break;for(var B=E<o?E:y,k=0,L=B;L>s;)L=b[L]>>8,++k;var M=L;if(m+k+(B!==E?1:0)>n)return void sa.log("Warning, gif stream longer than expected.");r[m++]=M;var P=m+=k;for(B!==E&&(r[m++]=M),L=B;k--;)L=b[L],r[--P]=255&L,L>>=8;y!==null&&o<4096&&(b[o++]=y<<8|M,o>=u+1&&l<12&&(++l,u=u<<1|1)),y=E}else o=i+1,u=(1<<(l=a+1))-1,y=null}return m!==n&&sa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function lE(t){var e,r,n,a,s,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),m=new Array(65535),g=new Array(64),b=new Array(64),y=[],E=0,B=7,k=new Array(64),L=new Array(64),M=new Array(64),P=new Array(256),R=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],re=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(j,X){for(var Z=0,te=0,ce=new Array,de=1;de<=16;de++){for(var me=1;me<=j[de];me++)ce[X[te]]=[],ce[X[te]][0]=Z,ce[X[te]][1]=de,te++,Z++;Z*=2}return ce}function ae(j){for(var X=j[0],Z=j[1]-1;Z>=0;)X&1<<Z&&(E|=1<<B),Z--,--B<0&&(E==255?(K(255),K(0)):K(E),B=7,E=0)}function K(j){y.push(j)}function G(j){K(j>>8&255),K(255&j)}function W(j,X,Z,te,ce){for(var de,me=ce[0],ge=ce[240],Te=function(st,pt){var St,ut,kt,zt,Yt,It,Dt,Wt,Lt,Rt,xt=0;for(Lt=0;Lt<8;++Lt){St=st[xt],ut=st[xt+1],kt=st[xt+2],zt=st[xt+3],Yt=st[xt+4],It=st[xt+5],Dt=st[xt+6];var wr=St+(Wt=st[xt+7]),Jt=St-Wt,dn=ut+Dt,gr=ut-Dt,Ur=kt+It,Dn=kt-It,Fr=zt+Yt,ds=zt-Yt,nn=wr+Fr,na=wr-Fr,pa=dn+Ur,Pr=dn-Ur;st[xt]=nn+pa,st[xt+4]=nn-pa;var nr=.707106781*(Pr+na);st[xt+2]=na+nr,st[xt+6]=na-nr;var zr=.382683433*((nn=ds+Dn)-(Pr=gr+Jt)),fs=.5411961*nn+zr,Wn=1.306562965*Pr+zr,Ea=.707106781*(pa=Dn+gr),Bs=Jt+Ea,Gt=Jt-Ea;st[xt+5]=Gt+fs,st[xt+3]=Gt-fs,st[xt+1]=Bs+Wn,st[xt+7]=Bs-Wn,xt+=8}for(xt=0,Lt=0;Lt<8;++Lt){St=st[xt],ut=st[xt+8],kt=st[xt+16],zt=st[xt+24],Yt=st[xt+32],It=st[xt+40],Dt=st[xt+48];var fn=St+(Wt=st[xt+56]),an=St-Wt,Rn=ut+Dt,jn=ut-Dt,Xn=kt+It,fe=kt-It,ke=zt+Yt,Ee=zt-Yt,_e=fn+ke,Be=fn-ke,Ie=Rn+Xn,qe=Rn-Xn;st[xt]=_e+Ie,st[xt+32]=_e-Ie;var tt=.707106781*(qe+Be);st[xt+16]=Be+tt,st[xt+48]=Be-tt;var He=.382683433*((_e=Ee+fe)-(qe=jn+an)),We=.5411961*_e+He,Je=1.306562965*qe+He,yt=.707106781*(Ie=fe+jn),Nt=an+yt,Ot=an-yt;st[xt+40]=Ot+We,st[xt+24]=Ot-We,st[xt+8]=Nt+Je,st[xt+56]=Nt-Je,xt++}for(Lt=0;Lt<64;++Lt)Rt=st[Lt]*pt[Lt],g[Lt]=Rt>0?Rt+.5|0:Rt-.5|0;return g}(j,X),xe=0;xe<64;++xe)b[C[xe]]=Te[xe];var oe=b[0]-Z;Z=b[0],oe==0?ae(te[0]):(ae(te[m[de=32767+oe]]),ae(h[de]));for(var Me=63;Me>0&&b[Me]==0;)Me--;if(Me==0)return ae(me),Z;for(var at,Se=1;Se<=Me;){for(var be=Se;b[Se]==0&&Se<=Me;)++Se;var je=Se-be;if(je>=16){at=je>>4;for(var Ke=1;Ke<=at;++Ke)ae(ge);je&=15}de=32767+b[Se],ae(ce[(je<<4)+m[de]]),ae(h[de]),Se++}return Me!=63&&ae(me),Z}function ie(j){j=Math.min(Math.max(j,1),100),s!=j&&(function(X){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ce=i((Z[te]*X+50)/100);ce=Math.min(Math.max(ce,1),255),o[C[te]]=ce}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var ge=i((de[me]*X+50)/100);ge=Math.min(Math.max(ge,1),255),l[C[me]]=ge}for(var Te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,oe=0;oe<8;oe++)for(var Me=0;Me<8;Me++)u[xe]=1/(o[C[xe]]*Te[oe]*Te[Me]*8),d[xe]=1/(l[C[xe]]*Te[oe]*Te[Me]*8),xe++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),s=j)}this.encode=function(j,X){X&&ie(X),y=new Array,E=0,B=7,G(65496),G(65504),G(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),G(1),G(1),K(0),K(0),function(){G(65499),G(132),K(0);for(var ut=0;ut<64;ut++)K(o[ut]);K(1);for(var kt=0;kt<64;kt++)K(l[kt])}(),function(ut,kt){G(65472),G(17),K(8),G(kt),G(ut),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(j.width,j.height),function(){G(65476),G(418),K(0);for(var ut=0;ut<16;ut++)K(S[ut+1]);for(var kt=0;kt<=11;kt++)K(N[kt]);K(16);for(var zt=0;zt<16;zt++)K(Q[zt+1]);for(var Yt=0;Yt<=161;Yt++)K(D[Yt]);K(1);for(var It=0;It<16;It++)K(I[It+1]);for(var Dt=0;Dt<=11;Dt++)K(O[Dt]);K(17);for(var Wt=0;Wt<16;Wt++)K(z[Wt+1]);for(var Lt=0;Lt<=161;Lt++)K(re[Lt])}(),G(65498),G(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var Z=0,te=0,ce=0;E=0,B=7,this.encode.displayName="_encode_";for(var de,me,ge,Te,xe,oe,Me,at,Se,be=j.data,je=j.width,Ke=j.height,st=4*je,pt=0;pt<Ke;){for(de=0;de<st;){for(xe=st*pt+de,Me=-1,at=0,Se=0;Se<64;Se++)oe=xe+(at=Se>>3)*st+(Me=4*(7&Se)),pt+at>=Ke&&(oe-=st*(pt+1+at-Ke)),de+Me>=st&&(oe-=de+Me-st+4),me=be[oe++],ge=be[oe++],Te=be[oe++],k[Se]=(R[me]+R[ge+256>>0]+R[Te+512>>0]>>16)-128,L[Se]=(R[me+768>>0]+R[ge+1024>>0]+R[Te+1280>>0]>>16)-128,M[Se]=(R[me+1280>>0]+R[ge+1536>>0]+R[Te+1792>>0]>>16)-128;Z=W(k,u,Z,e,n),te=W(L,d,te,r,a),ce=W(M,d,ce,r,a),de+=32}pt+=8}if(B>=0){var St=[];St[1]=B+1,St[0]=(1<<B+1)-1,ae(St)}return G(65497),new Uint8Array(y)},t=t||50,function(){for(var j=String.fromCharCode,X=0;X<256;X++)P[X]=j(X)}(),e=Y(S,N),r=Y(I,O),n=Y(Q,D),a=Y(z,re),function(){for(var j=1,X=2,Z=1;Z<=15;Z++){for(var te=j;te<X;te++)m[32767+te]=Z,h[32767+te]=[],h[32767+te][1]=Z,h[32767+te][0]=te;for(var ce=-(X-1);ce<=-j;ce++)m[32767+ce]=Z,h[32767+ce]=[],h[32767+ce][1]=Z,h[32767+ce][0]=X-1+ce;j<<=1,X<<=1}}(),function(){for(var j=0;j<256;j++)R[j]=19595*j,R[j+256>>0]=38470*j,R[j+512>>0]=7471*j+32768,R[j+768>>0]=-11059*j,R[j+1024>>0]=-21709*j,R[j+1280>>0]=32768*j+8421375,R[j+1536>>0]=-27439*j,R[j+1792>>0]=-5329*j}(),ie(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function yc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function IF(t){function e(S){if(!S)throw Error("assert :P")}function r(S,N,Q){for(var D=0;4>D;D++)if(S[N+D]!=Q.charCodeAt(D))return!0;return!1}function n(S,N,Q,D,I){for(var O=0;O<I;O++)S[N+O]=Q[D+O]}function a(S,N,Q,D){for(var I=0;I<D;I++)S[N+I]=Q}function s(S){return new Int32Array(S)}function i(S,N){for(var Q=[],D=0;D<S;D++)Q.push(new N);return Q}function o(S,N){var Q=[];return function D(I,O,z){for(var re=z[O],Y=0;Y<re&&(I.push(z.length>O+1?[]:new N),!(z.length<O+1));Y++)D(I[Y],O+1,z)}(Q,0,S),Q}var l=function(){var S=this;function N(_,U){for(var q=1<<U-1>>>0;_&q;)q>>>=1;return q?(_&q-1)+q:_}function Q(_,U,q,ne,ue){e(!(ne%q));do _[U+(ne-=q)]=ue;while(0<ne)}function D(_,U,q,ne,ue){if(e(2328>=ue),512>=ue)var he=s(512);else if((he=s(ue))==null)return 0;return function(pe,ve,Ce,Ne,Le,Ye){var $e,ze,gt=ve,it=1<<Ce,Ue=s(16),Oe=s(16);for(e(Le!=0),e(Ne!=null),e(pe!=null),e(0<Ce),ze=0;ze<Le;++ze){if(15<Ne[ze])return 0;++Ue[Ne[ze]]}if(Ue[0]==Le)return 0;for(Oe[1]=0,$e=1;15>$e;++$e){if(Ue[$e]>1<<$e)return 0;Oe[$e+1]=Oe[$e]+Ue[$e]}for(ze=0;ze<Le;++ze)$e=Ne[ze],0<Ne[ze]&&(Ye[Oe[$e]++]=ze);if(Oe[15]==1)return(Ne=new I).g=0,Ne.value=Ye[0],Q(pe,gt,1,it,Ne),it;var ct,vt=-1,ft=it-1,Kt=0,jt=1,ar=1,Ht=1<<Ce;for(ze=0,$e=1,Le=2;$e<=Ce;++$e,Le<<=1){if(jt+=ar<<=1,0>(ar-=Ue[$e]))return 0;for(;0<Ue[$e];--Ue[$e])(Ne=new I).g=$e,Ne.value=Ye[ze++],Q(pe,gt+Kt,Le,Ht,Ne),Kt=N(Kt,$e)}for($e=Ce+1,Le=2;15>=$e;++$e,Le<<=1){if(jt+=ar<<=1,0>(ar-=Ue[$e]))return 0;for(;0<Ue[$e];--Ue[$e]){if(Ne=new I,(Kt&ft)!=vt){for(gt+=Ht,ct=1<<(vt=$e)-Ce;15>vt&&!(0>=(ct-=Ue[vt]));)++vt,ct<<=1;it+=Ht=1<<(ct=vt-Ce),pe[ve+(vt=Kt&ft)].g=ct+Ce,pe[ve+vt].value=gt-ve-vt}Ne.g=$e-Ce,Ne.value=Ye[ze++],Q(pe,gt+(Kt>>Ce),Le,Ht,Ne),Kt=N(Kt,$e)}}return jt!=2*Oe[15]-1?0:it}(_,U,q,ne,ue,he)}function I(){this.value=this.g=0}function O(){this.value=this.g=0}function z(){this.G=i(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Wa,O)}function re(_,U,q,ne){e(_!=null),e(U!=null),e(2147483648>ne),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=U,_.pa=q,_.Jd=U,_.Yc=q+ne,_.Zc=4<=ne?q+ne-4+1:q,de(_)}function Y(_,U){for(var q=0;0<U--;)q|=ge(_,128)<<U;return q}function ae(_,U){var q=Y(_,U);return me(_)?-q:q}function K(_,U,q,ne){var ue,he=0;for(e(_!=null),e(U!=null),e(4294967288>ne),_.Sb=ne,_.Ra=0,_.u=0,_.h=0,4<ne&&(ne=4),ue=0;ue<ne;++ue)he+=U[q+ue]<<8*ue;_.Ra=he,_.bb=ne,_.oa=U,_.pa=q}function G(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Xu-8>>>0,++_.bb,_.u-=8;Z(_)&&(_.h=1,_.u=0)}function W(_,U){if(e(0<=U),!_.h&&U<=Wu){var q=X(_)&qc[U];return _.u+=U,G(_),q}return _.h=1,_.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(_){return _.Ra>>>(_.u&Xu-1)>>>0}function Z(_){return e(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Xu}function te(_,U){_.u=U,_.h=Z(_)}function ce(_){_.u>=ZA&&(e(_.u>=ZA),G(_))}function de(_){e(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(e(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function me(_){return Y(_,1)}function ge(_,U){var q=_.Ca;0>_.b&&de(_);var ne=_.b,ue=q*U>>>8,he=(_.I>>>ne>ue)+0;for(he?(q-=ue,_.I-=ue+1<<ne>>>0):q=ue+1,ne=q,ue=0;256<=ne;)ue+=8,ne>>=8;return ne=7^ue+bi[ne],_.b-=ne,_.Ca=(q<<ne)-1,he}function Te(_,U,q){_[U+0]=q>>24&255,_[U+1]=q>>16&255,_[U+2]=q>>8&255,_[U+3]=q>>0&255}function xe(_,U){return _[U+0]<<0|_[U+1]<<8}function oe(_,U){return xe(_,U)|_[U+2]<<16}function Me(_,U){return xe(_,U)|xe(_,U+2)<<16}function at(_,U){var q=1<<U;return e(_!=null),e(0<U),_.X=s(q),_.X==null?0:(_.Mb=32-U,_.Xa=U,1)}function Se(_,U){e(_!=null),e(U!=null),e(_.Xa==U.Xa),n(U.X,0,_.X,0,1<<U.Xa)}function be(){this.X=[],this.Xa=this.Mb=0}function je(_,U,q,ne){e(q!=null),e(ne!=null);var ue=q[0],he=ne[0];return ue==0&&(ue=(_*he+U/2)/U),he==0&&(he=(U*ue+_/2)/_),0>=ue||0>=he?0:(q[0]=ue,ne[0]=he,1)}function Ke(_,U){return _+(1<<U)-1>>>U}function st(_,U){return((4278255360&_)+(4278255360&U)>>>0&4278255360)+((16711935&_)+(16711935&U)>>>0&16711935)>>>0}function pt(_,U){S[U]=function(q,ne,ue,he,pe,ve,Ce){var Ne;for(Ne=0;Ne<pe;++Ne){var Le=S[_](ve[Ce+Ne-1],ue,he+Ne);ve[Ce+Ne]=st(q[ne+Ne],Le)}}}function St(){this.ud=this.hd=this.jd=0}function ut(_,U){return((4278124286&(_^U))>>>1)+(_&U)>>>0}function kt(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function zt(_,U){return kt(_+(_-U+.5>>1))}function Yt(_,U,q){return Math.abs(U-q)-Math.abs(_-q)}function It(_,U,q,ne,ue,he,pe){for(ne=he[pe-1],q=0;q<ue;++q)he[pe+q]=ne=st(_[U+q],ne)}function Dt(_,U,q,ne,ue){var he;for(he=0;he<q;++he){var pe=_[U+he],ve=pe>>8&255,Ce=16711935&(Ce=(Ce=16711935&pe)+((ve<<16)+ve));ne[ue+he]=(4278255360&pe)+Ce>>>0}}function Wt(_,U){U.jd=_>>0&255,U.hd=_>>8&255,U.ud=_>>16&255}function Lt(_,U,q,ne,ue,he){var pe;for(pe=0;pe<ne;++pe){var ve=U[q+pe],Ce=ve>>>8,Ne=ve,Le=255&(Le=(Le=ve>>>16)+((_.jd<<24>>24)*(Ce<<24>>24)>>>5));Ne=255&(Ne=(Ne=Ne+((_.hd<<24>>24)*(Ce<<24>>24)>>>5))+((_.ud<<24>>24)*(Le<<24>>24)>>>5)),ue[he+pe]=(4278255360&ve)+(Le<<16)+Ne}}function Rt(_,U,q,ne,ue){S[U]=function(he,pe,ve,Ce,Ne,Le,Ye,$e,ze){for(Ce=Ye;Ce<$e;++Ce)for(Ye=0;Ye<ze;++Ye)Ne[Le++]=ue(ve[ne(he[pe++])])},S[_]=function(he,pe,ve,Ce,Ne,Le,Ye){var $e=8>>he.b,ze=he.Ea,gt=he.K[0],it=he.w;if(8>$e)for(he=(1<<he.b)-1,it=(1<<$e)-1;pe<ve;++pe){var Ue,Oe=0;for(Ue=0;Ue<ze;++Ue)Ue&he||(Oe=ne(Ce[Ne++])),Le[Ye++]=ue(gt[Oe&it]),Oe>>=$e}else S["VP8LMapColor"+q](Ce,Ne,gt,it,Le,Ye,pe,ve,ze)}}function xt(_,U,q,ne,ue){for(q=U+q;U<q;){var he=_[U++];ne[ue++]=he>>16&255,ne[ue++]=he>>8&255,ne[ue++]=he>>0&255}}function wr(_,U,q,ne,ue){for(q=U+q;U<q;){var he=_[U++];ne[ue++]=he>>16&255,ne[ue++]=he>>8&255,ne[ue++]=he>>0&255,ne[ue++]=he>>24&255}}function Jt(_,U,q,ne,ue){for(q=U+q;U<q;){var he=(pe=_[U++])>>16&240|pe>>12&15,pe=pe>>0&240|pe>>28&15;ne[ue++]=he,ne[ue++]=pe}}function dn(_,U,q,ne,ue){for(q=U+q;U<q;){var he=(pe=_[U++])>>16&248|pe>>13&7,pe=pe>>5&224|pe>>3&31;ne[ue++]=he,ne[ue++]=pe}}function gr(_,U,q,ne,ue){for(q=U+q;U<q;){var he=_[U++];ne[ue++]=he>>0&255,ne[ue++]=he>>8&255,ne[ue++]=he>>16&255}}function Ur(_,U,q,ne,ue,he){if(he==0)for(q=U+q;U<q;)Te(ne,((he=_[U++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ue+=32;else n(ne,ue,_,U,q)}function Dn(_,U){S[U][0]=S[_+"0"],S[U][1]=S[_+"1"],S[U][2]=S[_+"2"],S[U][3]=S[_+"3"],S[U][4]=S[_+"4"],S[U][5]=S[_+"5"],S[U][6]=S[_+"6"],S[U][7]=S[_+"7"],S[U][8]=S[_+"8"],S[U][9]=S[_+"9"],S[U][10]=S[_+"10"],S[U][11]=S[_+"11"],S[U][12]=S[_+"12"],S[U][13]=S[_+"13"],S[U][14]=S[_+"0"],S[U][15]=S[_+"0"]}function Fr(_){return _==Ff||_==ru||_==oc||_==nd}function ds(){this.eb=[],this.size=this.A=this.fb=0}function nn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function na(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ds,this.f.kb=new nn,this.sd=null}function pa(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Pr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function nr(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function zr(_,U){var q=_.T,ne=U.ba.f.RGBA,ue=ne.eb,he=ne.fb+_.ka*ne.A,pe=xs[U.ba.S],ve=_.y,Ce=_.O,Ne=_.f,Le=_.N,Ye=_.ea,$e=_.W,ze=U.cc,gt=U.dc,it=U.Mc,Ue=U.Nc,Oe=_.ka,ct=_.ka+_.T,vt=_.U,ft=vt+1>>1;for(Oe==0?pe(ve,Ce,null,null,Ne,Le,Ye,$e,Ne,Le,Ye,$e,ue,he,null,null,vt):(pe(U.ec,U.fc,ve,Ce,ze,gt,it,Ue,Ne,Le,Ye,$e,ue,he-ne.A,ue,he,vt),++q);Oe+2<ct;Oe+=2)ze=Ne,gt=Le,it=Ye,Ue=$e,Le+=_.Rc,$e+=_.Rc,he+=2*ne.A,pe(ve,(Ce+=2*_.fa)-_.fa,ve,Ce,ze,gt,it,Ue,Ne,Le,Ye,$e,ue,he-ne.A,ue,he,vt);return Ce+=_.fa,_.j+ct<_.o?(n(U.ec,U.fc,ve,Ce,vt),n(U.cc,U.dc,Ne,Le,ft),n(U.Mc,U.Nc,Ye,$e,ft),q--):1&ct||pe(ve,Ce,null,null,Ne,Le,Ye,$e,Ne,Le,Ye,$e,ue,he+ne.A,null,null,vt),q}function fs(_,U,q){var ne=_.F,ue=[_.J];if(ne!=null){var he=_.U,pe=U.ba.S,ve=pe==tA||pe==oc;U=U.ba.f.RGBA;var Ce=[0],Ne=_.ka;Ce[0]=_.T,_.Kb&&(Ne==0?--Ce[0]:(--Ne,ue[0]-=_.width),_.j+_.ka+_.T==_.o&&(Ce[0]=_.o-_.j-Ne));var Le=U.eb;Ne=U.fb+Ne*U.A,_=Wr(ne,ue[0],_.width,he,Ce,Le,Ne+(ve?0:3),U.A),e(q==Ce),_&&Fr(pe)&&Yi(Le,Ne,ve,he,Ce,U.A)}return 0}function Wn(_){var U=_.ma,q=U.ba.S,ne=11>q,ue=q==rd||q==If||q==tA||q==ic||q==12||Fr(q);if(U.memory=null,U.Ib=null,U.Jb=null,U.Nd=null,!Gc(U.Oa,_,ue?11:12))return 0;if(ue&&Fr(q)&&Et(),_.da)alert("todo:use_scaling");else{if(ne){if(U.Ib=nr,_.Kb){if(q=_.U+1>>1,U.memory=s(_.U+2*q),U.memory==null)return 0;U.ec=U.memory,U.fc=0,U.cc=U.ec,U.dc=U.fc+_.U,U.Mc=U.cc,U.Nc=U.dc+q,U.Ib=zr,Et()}}else alert("todo:EmitYUV");ue&&(U.Jb=fs,ne&&Ve())}if(ne&&!p1){for(_=0;256>_;++_)Cb[_]=89858*(_-128)+Ya>>Sl,Lf[_]=-22014*(_-128)+Ya,op[_]=-45773*(_-128),Ja[_]=113618*(_-128)+Ya>>Sl;for(_=su;_<r0;++_)U=76283*(_-16)+Ya>>Sl,Uf[_-su]=Sn(U,255),lp[_-su]=Sn(U+8>>4,15);p1=1}return 1}function Ea(_){var U=_.ma,q=_.U,ne=_.T;return e(!(1&_.ka)),0>=q||0>=ne?0:(q=U.Ib(_,U),U.Jb!=null&&U.Jb(_,U,q),U.Dc+=q,1)}function Bs(_){_.ma.memory=null}function Gt(_,U,q,ne){return W(_,8)!=47?0:(U[0]=W(_,14)+1,q[0]=W(_,14)+1,ne[0]=W(_,1),W(_,3)!=0?0:!_.h)}function fn(_,U){if(4>_)return _+1;var q=_-2>>1;return(2+(1&_)<<q)+W(U,q)+1}function an(_,U){return 120<U?U-120:1<=(q=((q=cc[U-1])>>4)*_+(8-(15&q)))?q:1;var q}function Rn(_,U,q){var ne=X(q),ue=_[U+=255&ne].g-8;return 0<ue&&(te(q,q.u+8),ne=X(q),U+=_[U].value,U+=ne&(1<<ue)-1),te(q,q.u+_[U].g),_[U].value}function jn(_,U,q){return q.g+=_.g,q.value+=_.value<<U>>>0,e(8>=q.g),_.g}function Xn(_,U,q){var ne=_.xc;return e((U=ne==0?0:_.vc[_.md*(q>>ne)+(U>>ne)])<_.Wb),_.Ya[U]}function fe(_,U,q,ne){var ue=_.ab,he=_.c*U,pe=_.C;U=pe+U;var ve=q,Ce=ne;for(ne=_.Ta,q=_.Ua;0<ue--;){var Ne=_.gc[ue],Le=pe,Ye=U,$e=ve,ze=Ce,gt=(Ce=ne,ve=q,Ne.Ea);switch(e(Le<Ye),e(Ye<=Ne.nc),Ne.hc){case 2:Wh($e,ze,(Ye-Le)*gt,Ce,ve);break;case 0:var it=Le,Ue=Ye,Oe=Ce,ct=ve,vt=(Ht=Ne).Ea;it==0&&(sp($e,ze,null,null,1,Oe,ct),It($e,ze+1,0,0,vt-1,Oe,ct+1),ze+=vt,ct+=vt,++it);for(var ft=1<<Ht.b,Kt=ft-1,jt=Ke(vt,Ht.b),ar=Ht.K,Ht=Ht.w+(it>>Ht.b)*jt;it<Ue;){var xn=ar,Tn=Ht,qr=1;for(Nf($e,ze,Oe,ct-vt,1,Oe,ct);qr<vt;){var Qr=(qr&~Kt)+ft;Qr>vt&&(Qr=vt),(0,nc[xn[Tn++]>>8&15])($e,ze+ +qr,Oe,ct+qr-vt,Qr-qr,Oe,ct+qr),qr=Qr}ze+=vt,ct+=vt,++it&Kt||(Ht+=jt)}Ye!=Ne.nc&&n(Ce,ve-gt,Ce,ve+(Ye-Le-1)*gt,gt);break;case 1:for(gt=$e,Ue=ze,vt=($e=Ne.Ea)-(ct=$e&~(Oe=(ze=1<<Ne.b)-1)),it=Ke($e,Ne.b),ft=Ne.K,Ne=Ne.w+(Le>>Ne.b)*it;Le<Ye;){for(Kt=ft,jt=Ne,ar=new St,Ht=Ue+ct,xn=Ue+$e;Ue<Ht;)Wt(Kt[jt++],ar),$c(ar,gt,Ue,ze,Ce,ve),Ue+=ze,ve+=ze;Ue<xn&&(Wt(Kt[jt++],ar),$c(ar,gt,Ue,vt,Ce,ve),Ue+=vt,ve+=vt),++Le&Oe||(Ne+=it)}break;case 3:if($e==Ce&&ze==ve&&0<Ne.b){for(Ue=Ce,$e=gt=ve+(Ye-Le)*gt-(ct=(Ye-Le)*Ke(Ne.Ea,Ne.b)),ze=Ce,Oe=ve,it=[],ct=(vt=ct)-1;0<=ct;--ct)it[ct]=ze[Oe+ct];for(ct=vt-1;0<=ct;--ct)Ue[$e+ct]=it[ct];po(Ne,Le,Ye,Ce,gt,Ce,ve)}else po(Ne,Le,Ye,$e,ze,Ce,ve)}ve=ne,Ce=q}Ce!=q&&n(ne,q,ve,Ce,he)}function ke(_,U){var q=_.V,ne=_.Ba+_.c*_.C,ue=U-_.C;if(e(U<=_.l.o),e(16>=ue),0<ue){var he=_.l,pe=_.Ta,ve=_.Ua,Ce=he.width;if(fe(_,ue,q,ne),ue=ve=[ve],e((q=_.C)<(ne=U)),e(he.v<he.va),ne>he.o&&(ne=he.o),q<he.j){var Ne=he.j-q;q=he.j,ue[0]+=Ne*Ce}if(q>=ne?q=0:(ue[0]+=4*he.v,he.ka=q-he.j,he.U=he.va-he.v,he.T=ne-q,q=1),q){if(ve=ve[0],11>(q=_.ca).S){var Le=q.f.RGBA,Ye=(ne=q.S,ue=he.U,he=he.T,Ne=Le.eb,Le.A),$e=he;for(Le=Le.fb+_.Ma*Le.A;0<$e--;){var ze=pe,gt=ve,it=ue,Ue=Ne,Oe=Le;switch(ne){case Vs:ti(ze,gt,it,Ue,Oe);break;case rd:Ds(ze,gt,it,Ue,Oe);break;case Ff:Ds(ze,gt,it,Ue,Oe),Yi(Ue,Oe,0,it,1,0);break;case bl:Oo(ze,gt,it,Ue,Oe);break;case If:Ur(ze,gt,it,Ue,Oe,1);break;case ru:Ur(ze,gt,it,Ue,Oe,1),Yi(Ue,Oe,0,it,1,0);break;case tA:Ur(ze,gt,it,Ue,Oe,0);break;case oc:Ur(ze,gt,it,Ue,Oe,0),Yi(Ue,Oe,1,it,1,0);break;case ic:Wc(ze,gt,it,Ue,Oe);break;case nd:Wc(ze,gt,it,Ue,Oe),$r(Ue,Oe,it,1,0);break;case Yh:Ci(ze,gt,it,Ue,Oe);break;default:e(0)}ve+=Ce,Le+=Ye}_.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(_.Ma<=q.height)}}_.C=U,e(_.C<=_.i)}function Ee(_){var U;if(0<_.ua)return 0;for(U=0;U<_.Wb;++U){var q=_.Ya[U].G,ne=_.Ya[U].H;if(0<q[1][ne[1]+0].g||0<q[2][ne[2]+0].g||0<q[3][ne[3]+0].g)return 0}return 1}function _e(_,U,q,ne,ue,he){if(_.Z!=0){var pe=_.qd,ve=_.rd;for(e(El[_.Z]!=null);U<q;++U)El[_.Z](pe,ve,ne,ue,ne,ue,he),pe=ne,ve=ue,ue+=he;_.qd=pe,_.rd=ve}}function Be(_,U){var q=_.l.ma,ne=q.Z==0||q.Z==1?_.l.j:_.C;if(ne=_.C<ne?ne:_.C,e(U<=_.l.o),U>ne){var ue=_.l.width,he=q.ca,pe=q.tb+ue*ne,ve=_.V,Ce=_.Ba+_.c*ne,Ne=_.gc;e(_.ab==1),e(Ne[0].hc==3),Kc(Ne[0],ne,U,ve,Ce,he,pe),_e(q,ne,U,he,pe,ue)}_.C=_.Ma=U}function Ie(_,U,q,ne,ue,he,pe){var ve=_.$/ne,Ce=_.$%ne,Ne=_.m,Le=_.s,Ye=q+_.$,$e=Ye;ue=q+ne*ue;var ze=q+ne*he,gt=280+Le.ua,it=_.Pb?ve:16777216,Ue=0<Le.ua?Le.Wa:null,Oe=Le.wc,ct=Ye<ze?Xn(Le,Ce,ve):null;e(_.C<he),e(ze<=ue);var vt=!1;e:for(;;){for(;vt||Ye<ze;){var ft=0;if(ve>=it){var Kt=Ye-q;e((it=_).Pb),it.wd=it.m,it.xd=Kt,0<it.s.ua&&Se(it.s.Wa,it.s.vb),it=ve+f1}if(Ce&Oe||(ct=Xn(Le,Ce,ve)),e(ct!=null),ct.Qb&&(U[Ye]=ct.qb,vt=!0),!vt)if(ce(Ne),ct.jc){ft=Ne,Kt=U;var jt=Ye,ar=ct.pd[X(ft)&Wa-1];e(ct.jc),256>ar.g?(te(ft,ft.u+ar.g),Kt[jt]=ar.value,ft=0):(te(ft,ft.u+ar.g-256),e(256<=ar.value),ft=ar.value),ft==0&&(vt=!0)}else ft=Rn(ct.G[0],ct.H[0],Ne);if(Ne.h)break;if(vt||256>ft){if(!vt)if(ct.nd)U[Ye]=(ct.qb|ft<<8)>>>0;else{if(ce(Ne),vt=Rn(ct.G[1],ct.H[1],Ne),ce(Ne),Kt=Rn(ct.G[2],ct.H[2],Ne),jt=Rn(ct.G[3],ct.H[3],Ne),Ne.h)break;U[Ye]=(jt<<24|vt<<16|ft<<8|Kt)>>>0}if(vt=!1,++Ye,++Ce>=ne&&(Ce=0,++ve,pe!=null&&ve<=he&&!(ve%16)&&pe(_,ve),Ue!=null))for(;$e<Ye;)ft=U[$e++],Ue.X[(506832829*ft&4294967295)>>>Ue.Mb]=ft}else if(280>ft){if(ft=fn(ft-256,Ne),Kt=Rn(ct.G[4],ct.H[4],Ne),ce(Ne),Kt=an(ne,Kt=fn(Kt,Ne)),Ne.h)break;if(Ye-q<Kt||ue-Ye<ft)break e;for(jt=0;jt<ft;++jt)U[Ye+jt]=U[Ye+jt-Kt];for(Ye+=ft,Ce+=ft;Ce>=ne;)Ce-=ne,++ve,pe!=null&&ve<=he&&!(ve%16)&&pe(_,ve);if(e(Ye<=ue),Ce&Oe&&(ct=Xn(Le,Ce,ve)),Ue!=null)for(;$e<Ye;)ft=U[$e++],Ue.X[(506832829*ft&4294967295)>>>Ue.Mb]=ft}else{if(!(ft<gt))break e;for(vt=ft-280,e(Ue!=null);$e<Ye;)ft=U[$e++],Ue.X[(506832829*ft&4294967295)>>>Ue.Mb]=ft;ft=Ye,e(!(vt>>>(Kt=Ue).Xa)),U[ft]=Kt.X[vt],vt=!0}vt||e(Ne.h==Z(Ne))}if(_.Pb&&Ne.h&&Ye<ue)e(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&Se(_.s.vb,_.s.Wa);else{if(Ne.h)break e;pe!=null&&pe(_,ve>he?he:ve),_.a=0,_.$=Ye-q}return 1}return _.a=3,0}function qe(_){e(_!=null),_.vc=null,_.yc=null,_.Ya=null;var U=_.Wa;U!=null&&(U.X=null),_.vb=null,e(_!=null)}function tt(){var _=new YA;return _==null?null:(_.a=0,_.xb=ad,Dn("Predictor","VP8LPredictors"),Dn("Predictor","VP8LPredictors_C"),Dn("PredictorAdd","VP8LPredictorsAdd"),Dn("PredictorAdd","VP8LPredictorsAdd_C"),Wh=Dt,$c=Lt,ti=xt,Ds=wr,Wc=Jt,Ci=dn,Oo=gr,S.VP8LMapColor32b=ps,S.VP8LMapColor8b=kf,_)}function He(_,U,q,ne,ue){var he=1,pe=[_],ve=[U],Ce=ne.m,Ne=ne.s,Le=null,Ye=0;e:for(;;){if(q)for(;he&&W(Ce,1);){var $e=pe,ze=ve,gt=ne,it=1,Ue=gt.m,Oe=gt.gc[gt.ab],ct=W(Ue,2);if(gt.Oc&1<<ct)he=0;else{switch(gt.Oc|=1<<ct,Oe.hc=ct,Oe.Ea=$e[0],Oe.nc=ze[0],Oe.K=[null],++gt.ab,e(4>=gt.ab),ct){case 0:case 1:Oe.b=W(Ue,3)+2,it=He(Ke(Oe.Ea,Oe.b),Ke(Oe.nc,Oe.b),0,gt,Oe.K),Oe.K=Oe.K[0];break;case 3:var vt,ft=W(Ue,8)+1,Kt=16<ft?0:4<ft?1:2<ft?2:3;if($e[0]=Ke(Oe.Ea,Kt),Oe.b=Kt,vt=it=He(ft,1,0,gt,Oe.K)){var jt,ar=ft,Ht=Oe,xn=1<<(8>>Ht.b),Tn=s(xn);if(Tn==null)vt=0;else{var qr=Ht.K[0],Qr=Ht.w;for(Tn[0]=Ht.K[0][0],jt=1;jt<1*ar;++jt)Tn[jt]=st(qr[Qr+jt],Tn[jt-1]);for(;jt<4*xn;++jt)Tn[jt]=0;Ht.K[0]=null,Ht.K[0]=Tn,vt=1}}it=vt;break;case 2:break;default:e(0)}he=it}}if(pe=pe[0],ve=ve[0],he&&W(Ce,1)&&!(he=1<=(Ye=W(Ce,4))&&11>=Ye)){ne.a=3;break e}var Un;if(Un=he)t:{var Bn,Ir,Qn,fr=ne,br=pe,mn=ve,vn=Ye,vs=q,Za=fr.m,Ta=fr.s,Ba=[null],ja=1,yo=0,Nn=nA[vn];r:for(;;){if(vs&&W(Za,1)){var Oa=W(Za,3)+2,Vo=Ke(br,Oa),iu=Ke(mn,Oa),iA=Vo*iu;if(!He(Vo,iu,0,fr,Ba))break r;for(Ba=Ba[0],Ta.xc=Oa,Bn=0;Bn<iA;++Bn){var ou=Ba[Bn]>>8&65535;Ba[Bn]=ou,ou>=ja&&(ja=ou+1)}}if(Za.h)break r;for(Ir=0;5>Ir;++Ir){var ia=Ji[Ir];!Ir&&0<vn&&(ia+=1<<vn),yo<ia&&(yo=ia)}var Mf=i(ja*Nn,I),n0=ja,ni=i(n0,z);if(ni==null)var ua=null;else e(65536>=n0),ua=ni;var oA=s(yo);if(ua==null||oA==null||Mf==null){fr.a=1;break r}var lu=Mf;for(Bn=Qn=0;Bn<ja;++Bn){var _i=ua[Bn],cu=_i.G,Si=_i.H,Pf=0,id=1,a0=0;for(Ir=0;5>Ir;++Ir){ia=Ji[Ir],cu[Ir]=lu,Si[Ir]=Qn,!Ir&&0<vn&&(ia+=1<<vn);a:{var jf,s0=ia,Of=fr,od=oA,v1=lu,y1=Qn,Qf=0,fc=Of.m,_b=W(fc,1);if(a(od,0,0,s0),_b){var w1=W(fc,1)+1,b1=W(fc,1),cp=W(fc,b1==0?1:8);od[cp]=1,w1==2&&(od[cp=W(fc,8)]=1);var ld=1}else{var up=s(19),Ap=W(fc,4)+4;if(19<Ap){Of.a=3;var Hf=0;break a}for(jf=0;jf<Ap;++jf)up[lc[jf]]=W(fc,3);var i0=void 0,cd=void 0,C1=Of,E1=up,hc=s0,Vf=od,o0=0,zo=C1.m,ud=8,dp=i(128,I);n:for(;D(dp,0,7,E1,19);){if(W(zo,1)){var _1=2+2*W(zo,3);if((i0=2+W(zo,_1))>hc)break n}else i0=hc;for(cd=0;cd<hc&&i0--;){ce(zo);var fp=dp[0+(127&X(zo))];te(zo,zo.u+fp.g);var lA=fp.value;if(16>lA)Vf[cd++]=lA,lA!=0&&(ud=lA);else{var S1=lA==16,hp=lA-16,mp=vo[hp],pp=W(zo,Jh[hp])+mp;if(cd+pp>hc)break n;for(var T1=S1?ud:0;0<pp--;)Vf[cd++]=T1}}o0=1;break n}o0||(C1.a=3),ld=o0}(ld=ld&&!fc.h)&&(Qf=D(v1,y1,8,od,s0)),ld&&Qf!=0?Hf=Qf:(Of.a=3,Hf=0)}if(Hf==0)break r;if(id&&rA[Ir]==1&&(id=lu[Qn].g==0),Pf+=lu[Qn].g,Qn+=Hf,3>=Ir){var cA,l0=oA[0];for(cA=1;cA<ia;++cA)oA[cA]>l0&&(l0=oA[cA]);a0+=l0}}if(_i.nd=id,_i.Qb=0,id&&(_i.qb=(cu[3][Si[3]+0].value<<24|cu[1][Si[1]+0].value<<16|cu[2][Si[2]+0].value)>>>0,Pf==0&&256>cu[0][Si[0]+0].value&&(_i.Qb=1,_i.qb+=cu[0][Si[0]+0].value<<8)),_i.jc=!_i.Qb&&6>a0,_i.jc){var zf,mc=_i;for(zf=0;zf<Wa;++zf){var Tl=zf,pc=mc.pd[Tl],Gf=mc.G[0][mc.H[0]+Tl];256<=Gf.value?(pc.g=Gf.g+256,pc.value=Gf.value):(pc.g=0,pc.value=0,Tl>>=jn(Gf,8,pc),Tl>>=jn(mc.G[1][mc.H[1]+Tl],16,pc),Tl>>=jn(mc.G[2][mc.H[2]+Tl],0,pc),jn(mc.G[3][mc.H[3]+Tl],24,pc))}}}Ta.vc=Ba,Ta.Wb=ja,Ta.Ya=ua,Ta.yc=Mf,Un=1;break t}Un=0}if(!(he=Un)){ne.a=3;break e}if(0<Ye){if(Ne.ua=1<<Ye,!at(Ne.Wa,Ye)){ne.a=1,he=0;break e}}else Ne.ua=0;var qf=ne,gp=pe,B1=ve,xp=qf.s,vp=xp.xc;if(qf.c=gp,qf.i=B1,xp.md=Ke(gp,vp),xp.wc=vp==0?-1:(1<<vp)-1,q){ne.xb=m1;break e}if((Le=s(pe*ve))==null){ne.a=1,he=0;break e}he=(he=Ie(ne,Le,0,pe,ve,ve,null))&&!Ce.h;break e}return he?(ue!=null?ue[0]=Le:(e(Le==null),e(q)),ne.$=0,q||qe(Ne)):qe(Ne),he}function We(_,U){var q=_.c*_.i,ne=q+U+16*U;return e(_.c<=U),_.V=s(ne),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+q+U,1)}function Je(_,U){var q=_.C,ne=U-q,ue=_.V,he=_.Ba+_.c*q;for(e(U<=_.l.o);0<ne;){var pe=16<ne?16:ne,ve=_.l.ma,Ce=_.l.width,Ne=Ce*pe,Le=ve.ca,Ye=ve.tb+Ce*q,$e=_.Ta,ze=_.Ua;fe(_,pe,ue,he),Jn($e,ze,Le,Ye,Ne),_e(ve,q,q+pe,Le,Ye,Ce),ne-=pe,ue+=pe*_.c,q+=pe}e(q==U),_.C=_.Ma=U}function yt(){this.ub=this.yd=this.td=this.Rb=0}function Nt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ot(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Bt(){this.Yb=function(){var _=[];return function U(q,ne,ue){for(var he=ue[ne],pe=0;pe<he&&(q.push(ue.length>ne+1?[]:0),!(ue.length<ne+1));pe++)U(q[pe],ne+1,ue)}(_,0,[3,11]),_}()}function Ut(){this.jb=s(3),this.Wc=o([4,8],Bt),this.Xc=o([4,17],Bt)}function dr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function jr(){this.ld=this.La=this.dd=this.tc=0}function Or(){this.Na=this.la=0}function Gr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ra(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pi(){this.uc=this.M=this.Nb=0,this.wa=Array(new jr),this.Y=0,this.ya=Array(new Ra),this.aa=0,this.l=new $a}function La(){this.y=s(16),this.f=s(8),this.ea=s(8)}function hs(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new yt,this.Kc=new Nt,this.ed=new dr,this.Qa=new Ot,this.Ic=this.$c=this.Aa=0,this.D=new pi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ie),this.ia=0,this.pb=i(4,Gr),this.Pa=new Ut,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new La),this.Hd=0,this.rb=Array(new Or),this.sb=0,this.wa=Array(new jr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ra),this.L=this.aa=0,this.gd=o([4,2],jr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function $a(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ns(){var _=new hs;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,Xa||(Xa=KA)),_}function Yn(_,U,q){return _.a==0&&(_.a=U,_.sc=q,_.cb=0),0}function ms(_,U,q){return 3<=q&&_[U+0]==157&&_[U+1]==1&&_[U+2]==42}function Pc(_,U){if(_==null)return 0;if(_.a=0,_.sc="OK",U==null)return Yn(_,2,"null VP8Io passed to VP8GetHeaders()");var q=U.data,ne=U.w,ue=U.ha;if(4>ue)return Yn(_,7,"Truncated header.");var he=q[ne+0]|q[ne+1]<<8|q[ne+2]<<16,pe=_.Od;if(pe.Rb=!(1&he),pe.td=he>>1&7,pe.yd=he>>4&1,pe.ub=he>>5,3<pe.td)return Yn(_,3,"Incorrect keyframe parameters.");if(!pe.yd)return Yn(_,4,"Frame not displayable.");ne+=3,ue-=3;var ve=_.Kc;if(pe.Rb){if(7>ue)return Yn(_,7,"cannot parse picture header");if(!ms(q,ne,ue))return Yn(_,3,"Bad code word");ve.c=16383&(q[ne+4]<<8|q[ne+3]),ve.Td=q[ne+4]>>6,ve.i=16383&(q[ne+6]<<8|q[ne+5]),ve.Ud=q[ne+6]>>6,ne+=7,ue-=7,_.za=ve.c+15>>4,_.Ub=ve.i+15>>4,U.width=ve.c,U.height=ve.i,U.Da=0,U.j=0,U.v=0,U.va=U.width,U.o=U.height,U.da=0,U.ib=U.width,U.hb=U.height,U.U=U.width,U.T=U.height,a((he=_.Pa).jb,0,255,he.jb.length),e((he=_.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,a(he.Zb,0,0,he.Zb.length),a(he.Lb,0,0,he.Lb)}if(pe.ub>ue)return Yn(_,7,"bad partition length");re(he=_.m,q,ne,pe.ub),ne+=pe.ub,ue-=pe.ub,pe.Rb&&(ve.Ld=me(he),ve.Kd=me(he)),ve=_.Qa;var Ce,Ne=_.Pa;if(e(he!=null),e(ve!=null),ve.Cb=me(he),ve.Cb){if(ve.Bb=me(he),me(he)){for(ve.Fb=me(he),Ce=0;4>Ce;++Ce)ve.Zb[Ce]=me(he)?ae(he,7):0;for(Ce=0;4>Ce;++Ce)ve.Lb[Ce]=me(he)?ae(he,6):0}if(ve.Bb)for(Ce=0;3>Ce;++Ce)Ne.jb[Ce]=me(he)?Y(he,8):255}else ve.Bb=0;if(he.Ka)return Yn(_,3,"cannot parse segment header");if((ve=_.ed).zd=me(he),ve.Tb=Y(he,6),ve.wb=Y(he,3),ve.Pc=me(he),ve.Pc&&me(he)){for(Ne=0;4>Ne;++Ne)me(he)&&(ve.vd[Ne]=ae(he,6));for(Ne=0;4>Ne;++Ne)me(he)&&(ve.od[Ne]=ae(he,6))}if(_.L=ve.Tb==0?0:ve.zd?1:2,he.Ka)return Yn(_,3,"cannot parse filter header");var Le=ue;if(ue=Ce=ne,ne=Ce+Le,ve=Le,_.Xb=(1<<Y(_.m,2))-1,Le<3*(Ne=_.Xb))q=7;else{for(Ce+=3*Ne,ve-=3*Ne,Le=0;Le<Ne;++Le){var Ye=q[ue+0]|q[ue+1]<<8|q[ue+2]<<16;Ye>ve&&(Ye=ve),re(_.Jc[+Le],q,Ce,Ye),Ce+=Ye,ve-=Ye,ue+=3}re(_.Jc[+Ne],q,Ce,ve),q=Ce<ne?0:5}if(q!=0)return Yn(_,q,"cannot parse partitions");for(q=Y(Ce=_.m,7),ue=me(Ce)?ae(Ce,4):0,ne=me(Ce)?ae(Ce,4):0,ve=me(Ce)?ae(Ce,4):0,Ne=me(Ce)?ae(Ce,4):0,Ce=me(Ce)?ae(Ce,4):0,Le=_.Qa,Ye=0;4>Ye;++Ye){if(Le.Cb){var $e=Le.Zb[Ye];Le.Fb||($e+=q)}else{if(0<Ye){_.pb[Ye]=_.pb[0];continue}$e=q}var ze=_.pb[Ye];ze.Sc[0]=Df[Sn($e+ue,127)],ze.Sc[1]=Rf[Sn($e+0,127)],ze.Eb[0]=2*Df[Sn($e+ne,127)],ze.Eb[1]=101581*Rf[Sn($e+ve,127)]>>16,8>ze.Eb[1]&&(ze.Eb[1]=8),ze.Qc[0]=Df[Sn($e+Ne,117)],ze.Qc[1]=Rf[Sn($e+Ce,127)],ze.lc=$e+Ce}if(!pe.Rb)return Yn(_,4,"Not a key frame.");for(me(he),pe=_.Pa,q=0;4>q;++q){for(ue=0;8>ue;++ue)for(ne=0;3>ne;++ne)for(ve=0;11>ve;++ve)Ne=ge(he,aA[q][ue][ne][ve])?Y(he,8):Cl[q][ue][ne][ve],pe.Wc[q][ue].Yb[ne][ve]=Ne;for(ue=0;17>ue;++ue)pe.Xc[q][ue]=pe.Wc[q][h1[ue]]}return _.kc=me(he),_.kc&&(_.Bd=Y(he,8)),_.cb=1}function KA(_,U,q,ne,ue,he,pe){var ve=U[ue].Yb[q];for(q=0;16>ue;++ue){if(!ge(_,ve[q+0]))return ue;for(;!ge(_,ve[q+1]);)if(ve=U[++ue].Yb[0],q=0,ue==16)return 16;var Ce=U[ue+1].Yb;if(ge(_,ve[q+2])){var Ne=_,Le=0;if(ge(Ne,($e=ve)[(Ye=q)+3]))if(ge(Ne,$e[Ye+6])){for(ve=0,Ye=2*(Le=ge(Ne,$e[Ye+8]))+($e=ge(Ne,$e[Ye+9+Le])),Le=0,$e=va[Ye];$e[ve];++ve)Le+=Le+ge(Ne,$e[ve]);Le+=3+(8<<Ye)}else ge(Ne,$e[Ye+7])?(Le=7+2*ge(Ne,165),Le+=ge(Ne,145)):Le=5+ge(Ne,159);else Le=ge(Ne,$e[Ye+4])?3+ge(Ne,$e[Ye+5]):2;ve=Ce[2]}else Le=1,ve=Ce[1];Ce=pe+bn[ue],0>(Ne=_).b&&de(Ne);var Ye,$e=Ne.b,ze=(Ye=Ne.Ca>>1)-(Ne.I>>$e)>>31;--Ne.b,Ne.Ca+=ze,Ne.Ca|=1,Ne.I-=(Ye+1&ze)<<$e,he[Ce]=((Le^ze)-ze)*ne[(0<ue)+0]}return 16}function ll(_){var U=_.rb[_.sb-1];U.la=0,U.Na=0,a(_.zc,0,0,_.zc.length),_.ja=0}function Hu(_,U){if(_==null)return 0;if(U==null)return Yn(_,2,"NULL VP8Io parameter in VP8Decode().");if(!_.cb&&!Pc(_,U))return 0;if(e(_.cb),U.ac==null||U.ac(U)){U.ob&&(_.L=0);var q=dc[_.L];if(_.L==2?(_.yb=0,_.zb=0):(_.yb=U.v-q>>4,_.zb=U.j-q>>4,0>_.yb&&(_.yb=0),0>_.zb&&(_.zb=0)),_.Va=U.o+15+q>>4,_.Hb=U.va+15+q>>4,_.Hb>_.za&&(_.Hb=_.za),_.Va>_.Ub&&(_.Va=_.Ub),0<_.L){var ne=_.ed;for(q=0;4>q;++q){var ue;if(_.Qa.Cb){var he=_.Qa.Lb[q];_.Qa.Fb||(he+=ne.Tb)}else he=ne.Tb;for(ue=0;1>=ue;++ue){var pe=_.gd[q][ue],ve=he;if(ne.Pc&&(ve+=ne.vd[0],ue&&(ve+=ne.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var Ce=ve;0<ne.wb&&(Ce=4<ne.wb?Ce>>2:Ce>>1)>9-ne.wb&&(Ce=9-ne.wb),1>Ce&&(Ce=1),pe.dd=Ce,pe.tc=2*ve+Ce,pe.ld=40<=ve?2:15<=ve?1:0}else pe.tc=0;pe.La=ue}}}q=0}else Yn(_,6,"Frame setup failed"),q=_.a;if(q=q==0){if(q){_.$c=0,0<_.Aa||(_.Ic=g1);e:{q=_.Ic,ne=4*(Ce=_.za);var Ne=32*Ce,Le=Ce+1,Ye=0<_.L?Ce*(0<_.Aa?2:1):0,$e=(_.Aa==2?2:1)*Ce;if((pe=ne+832+(ue=3*(16*q+dc[_.L])/2*Ne)+(he=_.Fa!=null&&0<_.Fa.length?_.Kc.c*_.Kc.i:0))!=pe)q=0;else{if(pe>_.Vb){if(_.Vb=0,_.Ec=s(pe),_.Fc=0,_.Ec==null){q=Yn(_,1,"no memory during frame initialization.");break e}_.Vb=pe}pe=_.Ec,ve=_.Fc,_.Ac=pe,_.Bc=ve,ve+=ne,_.Gd=i(Ne,La),_.Hd=0,_.rb=i(Le+1,Or),_.sb=1,_.wa=Ye?i(Ye,jr):null,_.Y=0,_.D.Nb=0,_.D.wa=_.wa,_.D.Y=_.Y,0<_.Aa&&(_.D.Y+=Ce),e(!0),_.oc=pe,_.pc=ve,ve+=832,_.ya=i($e,Ra),_.aa=0,_.D.ya=_.ya,_.D.aa=_.aa,_.Aa==2&&(_.D.aa+=Ce),_.R=16*Ce,_.B=8*Ce,Ce=(Ne=dc[_.L])*_.R,Ne=Ne/2*_.B,_.sa=pe,_.ta=ve+Ce,_.qa=_.sa,_.ra=_.ta+16*q*_.R+Ne,_.Ha=_.qa,_.Ia=_.ra+8*q*_.B+Ne,_.$c=0,ve+=ue,_.mb=he?pe:null,_.nb=he?ve:null,e(ve+he<=_.Fc+_.Vb),ll(_),a(_.Ac,_.Bc,0,ne),q=1}}if(q){if(U.ka=0,U.y=_.sa,U.O=_.ta,U.f=_.qa,U.N=_.ra,U.ea=_.Ha,U.Vd=_.Ia,U.fa=_.R,U.Rc=_.B,U.F=null,U.J=0,!sc){for(q=-255;255>=q;++q)Sa[255+q]=0>q?-q:q;for(q=-1020;1020>=q;++q)go[1020+q]=-128>q?-128:127<q?127:q;for(q=-112;112>=q;++q)eu[112+q]=-16>q?-16:15<q?15:q;for(q=-255;510>=q;++q)tu[255+q]=0>q?0:255<q?255:q;sc=1}yl=gi,Qo=ul,Ho=oo,Pa=_n,Ei=Al,ga=cl,Yu=ml,wl=Po,ed=Hc,Xc=Ku,Yc=Qc,Jc=Jl,Ju=Zl,td=pl,Zc=Xi,ac=Qs,Zu=Ma,xa=XA,ri[0]=js,ri[1]=$A,ri[2]=uo,ri[3]=WA,ri[4]=xi,ri[5]=Ao,ri[6]=ei,ri[7]=vi,ri[8]=Mo,ri[9]=dl,uc[0]=lo,uc[1]=zu,uc[2]=Ro,uc[3]=Oc,uc[4]=On,uc[5]=Uo,uc[6]=co,Zi[0]=fo,Zi[1]=Vu,Zi[2]=Gu,Zi[3]=yi,Zi[4]=Jr,Zi[5]=Ua,Zi[6]=fl,q=1}else q=0}q&&(q=function(ze,gt){for(ze.M=0;ze.M<ze.Va;++ze.M){var it,Ue=ze.Jc[ze.M&ze.Xb],Oe=ze.m,ct=ze;for(it=0;it<ct.za;++it){var vt=Oe,ft=ct,Kt=ft.Ac,jt=ft.Bc+4*it,ar=ft.zc,Ht=ft.ya[ft.aa+it];if(ft.Qa.Bb?Ht.$b=ge(vt,ft.Pa.jb[0])?2+ge(vt,ft.Pa.jb[2]):ge(vt,ft.Pa.jb[1]):Ht.$b=0,ft.kc&&(Ht.Ad=ge(vt,ft.Bd)),Ht.Za=!ge(vt,145)+0,Ht.Za){var xn=Ht.Ob,Tn=0;for(ft=0;4>ft;++ft){var qr,Qr=ar[0+ft];for(qr=0;4>qr;++qr){Qr=ip[Kt[jt+qr]][Qr];for(var Un=nu[ge(vt,Qr[0])];0<Un;)Un=nu[2*Un+ge(vt,Qr[Un])];Qr=-Un,Kt[jt+qr]=Qr}n(xn,Tn,Kt,jt,4),Tn+=4,ar[0+ft]=Qr}}else Qr=ge(vt,156)?ge(vt,128)?1:3:ge(vt,163)?2:0,Ht.Ob[0]=Qr,a(Kt,jt,Qr,4),a(ar,0,Qr,4);Ht.Dd=ge(vt,142)?ge(vt,114)?ge(vt,183)?1:3:2:0}if(ct.m.Ka)return Yn(ze,7,"Premature end-of-partition0 encountered.");for(;ze.ja<ze.za;++ze.ja){if(ct=Ue,vt=(Oe=ze).rb[Oe.sb-1],Kt=Oe.rb[Oe.sb+Oe.ja],it=Oe.ya[Oe.aa+Oe.ja],jt=Oe.kc?it.Ad:0)vt.la=Kt.la=0,it.Za||(vt.Na=Kt.Na=0),it.Hc=0,it.Gc=0,it.ia=0;else{var Bn,Ir;if(vt=Kt,Kt=ct,jt=Oe.Pa.Xc,ar=Oe.ya[Oe.aa+Oe.ja],Ht=Oe.pb[ar.$b],ft=ar.ad,xn=0,Tn=Oe.rb[Oe.sb-1],Qr=qr=0,a(ft,xn,0,384),ar.Za)var Qn=0,fr=jt[3];else{Un=s(16);var br=vt.Na+Tn.Na;if(br=Xa(Kt,jt[1],br,Ht.Eb,0,Un,0),vt.Na=Tn.Na=(0<br)+0,1<br)yl(Un,0,ft,xn);else{var mn=Un[0]+3>>3;for(Un=0;256>Un;Un+=16)ft[xn+Un]=mn}Qn=1,fr=jt[0]}var vn=15&vt.la,vs=15&Tn.la;for(Un=0;4>Un;++Un){var Za=1&vs;for(mn=Ir=0;4>mn;++mn)vn=vn>>1|(Za=(br=Xa(Kt,fr,br=Za+(1&vn),Ht.Sc,Qn,ft,xn))>Qn)<<7,Ir=Ir<<2|(3<br?3:1<br?2:ft[xn+0]!=0),xn+=16;vn>>=4,vs=vs>>1|Za<<7,qr=(qr<<8|Ir)>>>0}for(fr=vn,Qn=vs>>4,Bn=0;4>Bn;Bn+=2){for(Ir=0,vn=vt.la>>4+Bn,vs=Tn.la>>4+Bn,Un=0;2>Un;++Un){for(Za=1&vs,mn=0;2>mn;++mn)br=Za+(1&vn),vn=vn>>1|(Za=0<(br=Xa(Kt,jt[2],br,Ht.Qc,0,ft,xn)))<<3,Ir=Ir<<2|(3<br?3:1<br?2:ft[xn+0]!=0),xn+=16;vn>>=2,vs=vs>>1|Za<<5}Qr|=Ir<<4*Bn,fr|=vn<<4<<Bn,Qn|=(240&vs)<<Bn}vt.la=fr,Tn.la=Qn,ar.Hc=qr,ar.Gc=Qr,ar.ia=43690&Qr?0:Ht.ia,jt=!(qr|Qr)}if(0<Oe.L&&(Oe.wa[Oe.Y+Oe.ja]=Oe.gd[it.$b][it.Za],Oe.wa[Oe.Y+Oe.ja].La|=!jt),ct.Ka)return Yn(ze,7,"Premature end-of-file encountered.")}if(ll(ze),Oe=gt,ct=1,it=(Ue=ze).D,vt=0<Ue.L&&Ue.M>=Ue.zb&&Ue.M<=Ue.Va,Ue.Aa==0)e:{if(it.M=Ue.M,it.uc=vt,wi(Ue,it),ct=1,it=(Ir=Ue.D).Nb,vt=(Qr=dc[Ue.L])*Ue.R,Kt=Qr/2*Ue.B,Un=16*it*Ue.R,mn=8*it*Ue.B,jt=Ue.sa,ar=Ue.ta-vt+Un,Ht=Ue.qa,ft=Ue.ra-Kt+mn,xn=Ue.Ha,Tn=Ue.Ia-Kt+mn,vs=(vn=Ir.M)==0,qr=vn>=Ue.Va-1,Ue.Aa==2&&wi(Ue,Ir),Ir.uc)for(Za=(br=Ue).D.M,e(br.D.uc),Ir=br.yb;Ir<br.Hb;++Ir){Qn=Ir,fr=Za;var Ta=(Ba=(ia=br).D).Nb;Bn=ia.R;var Ba=Ba.wa[Ba.Y+Qn],ja=ia.sa,yo=ia.ta+16*Ta*Bn+16*Qn,Nn=Ba.dd,Oa=Ba.tc;if(Oa!=0)if(e(3<=Oa),ia.L==1)0<Qn&&ac(ja,yo,Bn,Oa+4),Ba.La&&xa(ja,yo,Bn,Oa),0<fr&&Zc(ja,yo,Bn,Oa+4),Ba.La&&Zu(ja,yo,Bn,Oa);else{var Vo=ia.B,iu=ia.qa,iA=ia.ra+8*Ta*Vo+8*Qn,ou=ia.Ha,ia=ia.Ia+8*Ta*Vo+8*Qn;Ta=Ba.ld,0<Qn&&(wl(ja,yo,Bn,Oa+4,Nn,Ta),Xc(iu,iA,ou,ia,Vo,Oa+4,Nn,Ta)),Ba.La&&(Jc(ja,yo,Bn,Oa,Nn,Ta),td(iu,iA,ou,ia,Vo,Oa,Nn,Ta)),0<fr&&(Yu(ja,yo,Bn,Oa+4,Nn,Ta),ed(iu,iA,ou,ia,Vo,Oa+4,Nn,Ta)),Ba.La&&(Yc(ja,yo,Bn,Oa,Nn,Ta),Ju(iu,iA,ou,ia,Vo,Oa,Nn,Ta))}}if(Ue.ia&&alert("todo:DitherRow"),Oe.put!=null){if(Ir=16*vn,vn=16*(vn+1),vs?(Oe.y=Ue.sa,Oe.O=Ue.ta+Un,Oe.f=Ue.qa,Oe.N=Ue.ra+mn,Oe.ea=Ue.Ha,Oe.W=Ue.Ia+mn):(Ir-=Qr,Oe.y=jt,Oe.O=ar,Oe.f=Ht,Oe.N=ft,Oe.ea=xn,Oe.W=Tn),qr||(vn-=Qr),vn>Oe.o&&(vn=Oe.o),Oe.F=null,Oe.J=null,Ue.Fa!=null&&0<Ue.Fa.length&&Ir<vn&&(Oe.J=zc(Ue,Oe,Ir,vn-Ir),Oe.F=Ue.mb,Oe.F==null&&Oe.F.length==0)){ct=Yn(Ue,3,"Could not decode alpha data.");break e}Ir<Oe.j&&(Qr=Oe.j-Ir,Ir=Oe.j,e(!(1&Qr)),Oe.O+=Ue.R*Qr,Oe.N+=Ue.B*(Qr>>1),Oe.W+=Ue.B*(Qr>>1),Oe.F!=null&&(Oe.J+=Oe.width*Qr)),Ir<vn&&(Oe.O+=Oe.v,Oe.N+=Oe.v>>1,Oe.W+=Oe.v>>1,Oe.F!=null&&(Oe.J+=Oe.v),Oe.ka=Ir-Oe.j,Oe.U=Oe.va-Oe.v,Oe.T=vn-Ir,ct=Oe.put(Oe))}it+1!=Ue.Ic||qr||(n(Ue.sa,Ue.ta-vt,jt,ar+16*Ue.R,vt),n(Ue.qa,Ue.ra-Kt,Ht,ft+8*Ue.B,Kt),n(Ue.Ha,Ue.Ia-Kt,xn,Tn+8*Ue.B,Kt))}if(!ct)return Yn(ze,6,"Output aborted.")}return 1}(_,U)),U.bc!=null&&U.bc(U),q&=1}return q?(_.cb=0,q):0}function ks(_,U,q,ne,ue){ue=_[U+q+32*ne]+(ue>>3),_[U+q+32*ne]=-256&ue?0>ue?0:255:ue}function jc(_,U,q,ne,ue,he){ks(_,U,0,q,ne+ue),ks(_,U,1,q,ne+he),ks(_,U,2,q,ne-he),ks(_,U,3,q,ne-ue)}function hn(_){return(20091*_>>16)+_}function Is(_,U,q,ne){var ue,he=0,pe=s(16);for(ue=0;4>ue;++ue){var ve=_[U+0]+_[U+8],Ce=_[U+0]-_[U+8],Ne=(35468*_[U+4]>>16)-hn(_[U+12]),Le=hn(_[U+4])+(35468*_[U+12]>>16);pe[he+0]=ve+Le,pe[he+1]=Ce+Ne,pe[he+2]=Ce-Ne,pe[he+3]=ve-Le,he+=4,U++}for(ue=he=0;4>ue;++ue)ve=(_=pe[he+0]+4)+pe[he+8],Ce=_-pe[he+8],Ne=(35468*pe[he+4]>>16)-hn(pe[he+12]),ks(q,ne,0,0,ve+(Le=hn(pe[he+4])+(35468*pe[he+12]>>16))),ks(q,ne,1,0,Ce+Ne),ks(q,ne,2,0,Ce-Ne),ks(q,ne,3,0,ve-Le),he++,ne+=32}function cl(_,U,q,ne){var ue=_[U+0]+4,he=35468*_[U+4]>>16,pe=hn(_[U+4]),ve=35468*_[U+1]>>16;jc(q,ne,0,ue+pe,_=hn(_[U+1]),ve),jc(q,ne,1,ue+he,_,ve),jc(q,ne,2,ue-he,_,ve),jc(q,ne,3,ue-pe,_,ve)}function ul(_,U,q,ne,ue){Is(_,U,q,ne),ue&&Is(_,U+16,q,ne+4)}function oo(_,U,q,ne){Qo(_,U+0,q,ne,1),Qo(_,U+32,q,ne+128,1)}function _n(_,U,q,ne){var ue;for(_=_[U+0]+4,ue=0;4>ue;++ue)for(U=0;4>U;++U)ks(q,ne,U,ue,_)}function Al(_,U,q,ne){_[U+0]&&Pa(_,U+0,q,ne),_[U+16]&&Pa(_,U+16,q,ne+4),_[U+32]&&Pa(_,U+32,q,ne+128),_[U+48]&&Pa(_,U+48,q,ne+128+4)}function gi(_,U,q,ne){var ue,he=s(16);for(ue=0;4>ue;++ue){var pe=_[U+0+ue]+_[U+12+ue],ve=_[U+4+ue]+_[U+8+ue],Ce=_[U+4+ue]-_[U+8+ue],Ne=_[U+0+ue]-_[U+12+ue];he[0+ue]=pe+ve,he[8+ue]=pe-ve,he[4+ue]=Ne+Ce,he[12+ue]=Ne-Ce}for(ue=0;4>ue;++ue)pe=(_=he[0+4*ue]+3)+he[3+4*ue],ve=he[1+4*ue]+he[2+4*ue],Ce=he[1+4*ue]-he[2+4*ue],Ne=_-he[3+4*ue],q[ne+0]=pe+ve>>3,q[ne+16]=Ne+Ce>>3,q[ne+32]=pe-ve>>3,q[ne+48]=Ne-Ce>>3,ne+=64}function Do(_,U,q){var ne,ue=U-32,he=gs,pe=255-_[ue-1];for(ne=0;ne<q;++ne){var ve,Ce=he,Ne=pe+_[U-1];for(ve=0;ve<q;++ve)_[U+ve]=Ce[Ne+_[ue+ve]];U+=32}}function $A(_,U){Do(_,U,4)}function Vu(_,U){Do(_,U,8)}function zu(_,U){Do(_,U,16)}function Ro(_,U){var q;for(q=0;16>q;++q)n(_,U+32*q,_,U-32,16)}function Oc(_,U){var q;for(q=16;0<q;--q)a(_,U,_[U-1],16),U+=32}function Lo(_,U,q){var ne;for(ne=0;16>ne;++ne)a(U,q+32*ne,_,16)}function lo(_,U){var q,ne=16;for(q=0;16>q;++q)ne+=_[U-1+32*q]+_[U+q-32];Lo(ne>>5,_,U)}function On(_,U){var q,ne=8;for(q=0;16>q;++q)ne+=_[U-1+32*q];Lo(ne>>4,_,U)}function Uo(_,U){var q,ne=8;for(q=0;16>q;++q)ne+=_[U+q-32];Lo(ne>>4,_,U)}function co(_,U){Lo(128,_,U)}function hr(_,U,q){return _+2*U+q+2>>2}function uo(_,U){var q,ne=U-32;for(ne=new Uint8Array([hr(_[ne-1],_[ne+0],_[ne+1]),hr(_[ne+0],_[ne+1],_[ne+2]),hr(_[ne+1],_[ne+2],_[ne+3]),hr(_[ne+2],_[ne+3],_[ne+4])]),q=0;4>q;++q)n(_,U+32*q,ne,0,ne.length)}function WA(_,U){var q=_[U-1],ne=_[U-1+32],ue=_[U-1+64],he=_[U-1+96];Te(_,U+0,16843009*hr(_[U-1-32],q,ne)),Te(_,U+32,16843009*hr(q,ne,ue)),Te(_,U+64,16843009*hr(ne,ue,he)),Te(_,U+96,16843009*hr(ue,he,he))}function js(_,U){var q,ne=4;for(q=0;4>q;++q)ne+=_[U+q-32]+_[U-1+32*q];for(ne>>=3,q=0;4>q;++q)a(_,U+32*q,ne,4)}function xi(_,U){var q=_[U-1+0],ne=_[U-1+32],ue=_[U-1+64],he=_[U-1-32],pe=_[U+0-32],ve=_[U+1-32],Ce=_[U+2-32],Ne=_[U+3-32];_[U+0+96]=hr(ne,ue,_[U-1+96]),_[U+1+96]=_[U+0+64]=hr(q,ne,ue),_[U+2+96]=_[U+1+64]=_[U+0+32]=hr(he,q,ne),_[U+3+96]=_[U+2+64]=_[U+1+32]=_[U+0+0]=hr(pe,he,q),_[U+3+64]=_[U+2+32]=_[U+1+0]=hr(ve,pe,he),_[U+3+32]=_[U+2+0]=hr(Ce,ve,pe),_[U+3+0]=hr(Ne,Ce,ve)}function ei(_,U){var q=_[U+1-32],ne=_[U+2-32],ue=_[U+3-32],he=_[U+4-32],pe=_[U+5-32],ve=_[U+6-32],Ce=_[U+7-32];_[U+0+0]=hr(_[U+0-32],q,ne),_[U+1+0]=_[U+0+32]=hr(q,ne,ue),_[U+2+0]=_[U+1+32]=_[U+0+64]=hr(ne,ue,he),_[U+3+0]=_[U+2+32]=_[U+1+64]=_[U+0+96]=hr(ue,he,pe),_[U+3+32]=_[U+2+64]=_[U+1+96]=hr(he,pe,ve),_[U+3+64]=_[U+2+96]=hr(pe,ve,Ce),_[U+3+96]=hr(ve,Ce,Ce)}function Ao(_,U){var q=_[U-1+0],ne=_[U-1+32],ue=_[U-1+64],he=_[U-1-32],pe=_[U+0-32],ve=_[U+1-32],Ce=_[U+2-32],Ne=_[U+3-32];_[U+0+0]=_[U+1+64]=he+pe+1>>1,_[U+1+0]=_[U+2+64]=pe+ve+1>>1,_[U+2+0]=_[U+3+64]=ve+Ce+1>>1,_[U+3+0]=Ce+Ne+1>>1,_[U+0+96]=hr(ue,ne,q),_[U+0+64]=hr(ne,q,he),_[U+0+32]=_[U+1+96]=hr(q,he,pe),_[U+1+32]=_[U+2+96]=hr(he,pe,ve),_[U+2+32]=_[U+3+96]=hr(pe,ve,Ce),_[U+3+32]=hr(ve,Ce,Ne)}function vi(_,U){var q=_[U+0-32],ne=_[U+1-32],ue=_[U+2-32],he=_[U+3-32],pe=_[U+4-32],ve=_[U+5-32],Ce=_[U+6-32],Ne=_[U+7-32];_[U+0+0]=q+ne+1>>1,_[U+1+0]=_[U+0+64]=ne+ue+1>>1,_[U+2+0]=_[U+1+64]=ue+he+1>>1,_[U+3+0]=_[U+2+64]=he+pe+1>>1,_[U+0+32]=hr(q,ne,ue),_[U+1+32]=_[U+0+96]=hr(ne,ue,he),_[U+2+32]=_[U+1+96]=hr(ue,he,pe),_[U+3+32]=_[U+2+96]=hr(he,pe,ve),_[U+3+64]=hr(pe,ve,Ce),_[U+3+96]=hr(ve,Ce,Ne)}function dl(_,U){var q=_[U-1+0],ne=_[U-1+32],ue=_[U-1+64],he=_[U-1+96];_[U+0+0]=q+ne+1>>1,_[U+2+0]=_[U+0+32]=ne+ue+1>>1,_[U+2+32]=_[U+0+64]=ue+he+1>>1,_[U+1+0]=hr(q,ne,ue),_[U+3+0]=_[U+1+32]=hr(ne,ue,he),_[U+3+32]=_[U+1+64]=hr(ue,he,he),_[U+3+64]=_[U+2+64]=_[U+0+96]=_[U+1+96]=_[U+2+96]=_[U+3+96]=he}function Mo(_,U){var q=_[U-1+0],ne=_[U-1+32],ue=_[U-1+64],he=_[U-1+96],pe=_[U-1-32],ve=_[U+0-32],Ce=_[U+1-32],Ne=_[U+2-32];_[U+0+0]=_[U+2+32]=q+pe+1>>1,_[U+0+32]=_[U+2+64]=ne+q+1>>1,_[U+0+64]=_[U+2+96]=ue+ne+1>>1,_[U+0+96]=he+ue+1>>1,_[U+3+0]=hr(ve,Ce,Ne),_[U+2+0]=hr(pe,ve,Ce),_[U+1+0]=_[U+3+32]=hr(q,pe,ve),_[U+1+32]=_[U+3+64]=hr(ne,q,pe),_[U+1+64]=_[U+3+96]=hr(ue,ne,q),_[U+1+96]=hr(he,ue,ne)}function Gu(_,U){var q;for(q=0;8>q;++q)n(_,U+32*q,_,U-32,8)}function yi(_,U){var q;for(q=0;8>q;++q)a(_,U,_[U-1],8),U+=32}function Os(_,U,q){var ne;for(ne=0;8>ne;++ne)a(U,q+32*ne,_,8)}function fo(_,U){var q,ne=8;for(q=0;8>q;++q)ne+=_[U+q-32]+_[U-1+32*q];Os(ne>>4,_,U)}function Ua(_,U){var q,ne=4;for(q=0;8>q;++q)ne+=_[U+q-32];Os(ne>>3,_,U)}function Jr(_,U){var q,ne=4;for(q=0;8>q;++q)ne+=_[U-1+32*q];Os(ne>>3,_,U)}function fl(_,U){Os(128,_,U)}function ho(_,U,q){var ne=_[U-q],ue=_[U+0],he=3*(ue-ne)+Xh[1020+_[U-2*q]-_[U+q]],pe=eA[112+(he+4>>3)];_[U-q]=gs[255+ne+eA[112+(he+3>>3)]],_[U+0]=gs[255+ue-pe]}function qu(_,U,q,ne){var ue=_[U+0],he=_[U+q];return xo[255+_[U-2*q]-_[U-q]]>ne||xo[255+he-ue]>ne}function Xl(_,U,q,ne){return 4*xo[255+_[U-q]-_[U+0]]+xo[255+_[U-2*q]-_[U+q]]<=ne}function Yl(_,U,q,ne,ue){var he=_[U-3*q],pe=_[U-2*q],ve=_[U-q],Ce=_[U+0],Ne=_[U+q],Le=_[U+2*q],Ye=_[U+3*q];return 4*xo[255+ve-Ce]+xo[255+pe-Ne]>ne?0:xo[255+_[U-4*q]-he]<=ue&&xo[255+he-pe]<=ue&&xo[255+pe-ve]<=ue&&xo[255+Ye-Le]<=ue&&xo[255+Le-Ne]<=ue&&xo[255+Ne-Ce]<=ue}function Xi(_,U,q,ne){var ue=2*ne+1;for(ne=0;16>ne;++ne)Xl(_,U+ne,q,ue)&&ho(_,U+ne,q)}function Qs(_,U,q,ne){var ue=2*ne+1;for(ne=0;16>ne;++ne)Xl(_,U+ne*q,1,ue)&&ho(_,U+ne*q,1)}function Ma(_,U,q,ne){var ue;for(ue=3;0<ue;--ue)Xi(_,U+=4*q,q,ne)}function XA(_,U,q,ne){var ue;for(ue=3;0<ue;--ue)Qs(_,U+=4,q,ne)}function hl(_,U,q,ne,ue,he,pe,ve){for(he=2*he+1;0<ue--;){if(Yl(_,U,q,he,pe))if(qu(_,U,q,ve))ho(_,U,q);else{var Ce=_,Ne=U,Le=q,Ye=Ce[Ne-2*Le],$e=Ce[Ne-Le],ze=Ce[Ne+0],gt=Ce[Ne+Le],it=Ce[Ne+2*Le],Ue=27*(ct=Xh[1020+3*(ze-$e)+Xh[1020+Ye-gt]])+63>>7,Oe=18*ct+63>>7,ct=9*ct+63>>7;Ce[Ne-3*Le]=gs[255+Ce[Ne-3*Le]+ct],Ce[Ne-2*Le]=gs[255+Ye+Oe],Ce[Ne-Le]=gs[255+$e+Ue],Ce[Ne+0]=gs[255+ze-Ue],Ce[Ne+Le]=gs[255+gt-Oe],Ce[Ne+2*Le]=gs[255+it-ct]}U+=ne}}function Fs(_,U,q,ne,ue,he,pe,ve){for(he=2*he+1;0<ue--;){if(Yl(_,U,q,he,pe))if(qu(_,U,q,ve))ho(_,U,q);else{var Ce=_,Ne=U,Le=q,Ye=Ce[Ne-Le],$e=Ce[Ne+0],ze=Ce[Ne+Le],gt=eA[112+((it=3*($e-Ye))+4>>3)],it=eA[112+(it+3>>3)],Ue=gt+1>>1;Ce[Ne-2*Le]=gs[255+Ce[Ne-2*Le]+Ue],Ce[Ne-Le]=gs[255+Ye+it],Ce[Ne+0]=gs[255+$e-gt],Ce[Ne+Le]=gs[255+ze-Ue]}U+=ne}}function ml(_,U,q,ne,ue,he){hl(_,U,q,1,16,ne,ue,he)}function Po(_,U,q,ne,ue,he){hl(_,U,1,q,16,ne,ue,he)}function Qc(_,U,q,ne,ue,he){var pe;for(pe=3;0<pe;--pe)Fs(_,U+=4*q,q,1,16,ne,ue,he)}function Jl(_,U,q,ne,ue,he){var pe;for(pe=3;0<pe;--pe)Fs(_,U+=4,1,q,16,ne,ue,he)}function Hc(_,U,q,ne,ue,he,pe,ve){hl(_,U,ue,1,8,he,pe,ve),hl(q,ne,ue,1,8,he,pe,ve)}function Ku(_,U,q,ne,ue,he,pe,ve){hl(_,U,1,ue,8,he,pe,ve),hl(q,ne,1,ue,8,he,pe,ve)}function Zl(_,U,q,ne,ue,he,pe,ve){Fs(_,U+4*ue,ue,1,8,he,pe,ve),Fs(q,ne+4*ue,ue,1,8,he,pe,ve)}function pl(_,U,q,ne,ue,he,pe,ve){Fs(_,U+4,1,ue,8,he,pe,ve),Fs(q,ne+4,1,ue,8,he,pe,ve)}function ec(){this.ba=new na,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Pr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Vc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function tc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function gl(){this.ua=0,this.Wa=new be,this.vb=new be,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new I}function YA(){this.xb=this.a=0,this.l=new $a,this.ca=new na,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new gl,this.ab=0,this.gc=i(4,tc),this.Oc=0}function jo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new $a,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xl(_,U,q,ne,ue,he,pe){for(_=_==null?0:_[U+0],U=0;U<pe;++U)ue[he+U]=_+q[ne+U]&255,_=ue[he+U]}function rc(_,U,q,ne,ue,he,pe){var ve;if(_==null)xl(null,null,q,ne,ue,he,pe);else for(ve=0;ve<pe;++ve)ue[he+ve]=_[U+ve]+q[ne+ve]&255}function Hs(_,U,q,ne,ue,he,pe){if(_==null)xl(null,null,q,ne,ue,he,pe);else{var ve,Ce=_[U+0],Ne=Ce,Le=Ce;for(ve=0;ve<pe;++ve)Ne=Le+(Ce=_[U+ve])-Ne,Le=q[ne+ve]+(-256&Ne?0>Ne?0:255:Ne)&255,Ne=Ce,ue[he+ve]=Le}}function zc(_,U,q,ne){var ue=U.width,he=U.o;if(e(_!=null&&U!=null),0>q||0>=ne||q+ne>he)return null;if(!_.Cc){if(_.ga==null){var pe;if(_.ga=new jo,(pe=_.ga==null)||(pe=U.width*U.o,e(_.Gb.length==0),_.Gb=s(pe),_.Uc=0,_.Gb==null?pe=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,pe=1),pe=!pe),!pe){pe=_.ga;var ve=_.Fa,Ce=_.P,Ne=_.qc,Le=_.mb,Ye=_.nb,$e=Ce+1,ze=Ne-1,gt=pe.l;if(e(ve!=null&&Le!=null&&U!=null),El[0]=null,El[1]=xl,El[2]=rc,El[3]=Hs,pe.ca=Le,pe.tb=Ye,pe.c=U.width,pe.i=U.height,e(0<pe.c&&0<pe.i),1>=Ne)U=0;else if(pe.$a=ve[Ce+0]>>0&3,pe.Z=ve[Ce+0]>>2&3,pe.Lc=ve[Ce+0]>>4&3,Ce=ve[Ce+0]>>6&3,0>pe.$a||1<pe.$a||4<=pe.Z||1<pe.Lc||Ce)U=0;else if(gt.put=Ea,gt.ac=Wn,gt.bc=Bs,gt.ma=pe,gt.width=U.width,gt.height=U.height,gt.Da=U.Da,gt.v=U.v,gt.va=U.va,gt.j=U.j,gt.o=U.o,pe.$a)e:{e(pe.$a==1),U=tt();t:for(;;){if(U==null){U=0;break e}if(e(pe!=null),pe.mc=U,U.c=pe.c,U.i=pe.i,U.l=pe.l,U.l.ma=pe,U.l.width=pe.c,U.l.height=pe.i,U.a=0,K(U.m,ve,$e,ze),!He(pe.c,pe.i,1,U,null)||(U.ab==1&&U.gc[0].hc==3&&Ee(U.s)?(pe.ic=1,ve=U.c*U.i,U.Ta=null,U.Ua=0,U.V=s(ve),U.Ba=0,U.V==null?(U.a=1,U=0):U=1):(pe.ic=0,U=We(U,pe.c)),!U))break t;U=1;break e}pe.mc=null,U=0}else U=ze>=pe.c*pe.i;pe=!U}if(pe)return null;_.ga.Lc!=1?_.Ga=0:ne=he-q}e(_.ga!=null),e(q+ne<=he);e:{if(U=(ve=_.ga).c,he=ve.l.o,ve.$a==0){if($e=_.rc,ze=_.Vc,gt=_.Fa,Ce=_.P+1+q*U,Ne=_.mb,Le=_.nb+q*U,e(Ce<=_.P+_.qc),ve.Z!=0)for(e(El[ve.Z]!=null),pe=0;pe<ne;++pe)El[ve.Z]($e,ze,gt,Ce,Ne,Le,U),$e=Ne,ze=Le,Le+=U,Ce+=U;else for(pe=0;pe<ne;++pe)n(Ne,Le,gt,Ce,U),$e=Ne,ze=Le,Le+=U,Ce+=U;_.rc=$e,_.Vc=ze}else{if(e(ve.mc!=null),U=q+ne,e((pe=ve.mc)!=null),e(U<=pe.i),pe.C>=U)U=1;else if(ve.ic||Ve(),ve.ic){ve=pe.V,$e=pe.Ba,ze=pe.c;var it=pe.i,Ue=(gt=1,Ce=pe.$/ze,Ne=pe.$%ze,Le=pe.m,Ye=pe.s,pe.$),Oe=ze*it,ct=ze*U,vt=Ye.wc,ft=Ue<ct?Xn(Ye,Ne,Ce):null;e(Ue<=Oe),e(U<=it),e(Ee(Ye));t:for(;;){for(;!Le.h&&Ue<ct;){if(Ne&vt||(ft=Xn(Ye,Ne,Ce)),e(ft!=null),ce(Le),256>(it=Rn(ft.G[0],ft.H[0],Le)))ve[$e+Ue]=it,++Ue,++Ne>=ze&&(Ne=0,++Ce<=U&&!(Ce%16)&&Be(pe,Ce));else{if(!(280>it)){gt=0;break t}it=fn(it-256,Le);var Kt,jt=Rn(ft.G[4],ft.H[4],Le);if(ce(Le),!(Ue>=(jt=an(ze,jt=fn(jt,Le)))&&Oe-Ue>=it)){gt=0;break t}for(Kt=0;Kt<it;++Kt)ve[$e+Ue+Kt]=ve[$e+Ue+Kt-jt];for(Ue+=it,Ne+=it;Ne>=ze;)Ne-=ze,++Ce<=U&&!(Ce%16)&&Be(pe,Ce);Ue<ct&&Ne&vt&&(ft=Xn(Ye,Ne,Ce))}e(Le.h==Z(Le))}Be(pe,Ce>U?U:Ce);break t}!gt||Le.h&&Ue<Oe?(gt=0,pe.a=Le.h?5:3):pe.$=Ue,U=gt}else U=Ie(pe,pe.V,pe.Ba,pe.c,pe.i,U,Je);if(!U){ne=0;break e}}q+ne>=he&&(_.Cc=1),ne=1}if(!ne)return null;if(_.Cc&&((ne=_.ga)!=null&&(ne.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+q*ue}function V(_,U,q,ne,ue,he){for(;0<ue--;){var pe,ve=_,Ce=U+(q?1:0),Ne=_,Le=U+(q?0:3);for(pe=0;pe<ne;++pe){var Ye=Ne[Le+4*pe];Ye!=255&&(Ye*=32897,ve[Ce+4*pe+0]=ve[Ce+4*pe+0]*Ye>>23,ve[Ce+4*pe+1]=ve[Ce+4*pe+1]*Ye>>23,ve[Ce+4*pe+2]=ve[Ce+4*pe+2]*Ye>>23)}U+=he}}function Ae(_,U,q,ne,ue){for(;0<ne--;){var he;for(he=0;he<q;++he){var pe=_[U+2*he+0],ve=15&(Ne=_[U+2*he+1]),Ce=4369*ve,Ne=(240&Ne|Ne>>4)*Ce>>16;_[U+2*he+0]=(240&pe|pe>>4)*Ce>>16&240|(15&pe|pe<<4)*Ce>>16>>4&15,_[U+2*he+1]=240&Ne|ve}U+=ue}}function Fe(_,U,q,ne,ue,he,pe,ve){var Ce,Ne,Le=255;for(Ne=0;Ne<ue;++Ne){for(Ce=0;Ce<ne;++Ce){var Ye=_[U+Ce];he[pe+4*Ce]=Ye,Le&=Ye}U+=q,pe+=ve}return Le!=255}function Re(_,U,q,ne,ue){var he;for(he=0;he<ue;++he)q[ne+he]=_[U+he]>>8}function Ve(){Yi=V,$r=Ae,Wr=Fe,Jn=Re}function ot(_,U,q){S[_]=function(ne,ue,he,pe,ve,Ce,Ne,Le,Ye,$e,ze,gt,it,Ue,Oe,ct,vt){var ft,Kt=vt-1>>1,jt=ve[Ce+0]|Ne[Le+0]<<16,ar=Ye[$e+0]|ze[gt+0]<<16;e(ne!=null);var Ht=3*jt+ar+131074>>2;for(U(ne[ue+0],255&Ht,Ht>>16,it,Ue),he!=null&&(Ht=3*ar+jt+131074>>2,U(he[pe+0],255&Ht,Ht>>16,Oe,ct)),ft=1;ft<=Kt;++ft){var xn=ve[Ce+ft]|Ne[Le+ft]<<16,Tn=Ye[$e+ft]|ze[gt+ft]<<16,qr=jt+xn+ar+Tn+524296,Qr=qr+2*(xn+ar)>>3;Ht=Qr+jt>>1,jt=(qr=qr+2*(jt+Tn)>>3)+xn>>1,U(ne[ue+2*ft-1],255&Ht,Ht>>16,it,Ue+(2*ft-1)*q),U(ne[ue+2*ft-0],255&jt,jt>>16,it,Ue+(2*ft-0)*q),he!=null&&(Ht=qr+ar>>1,jt=Qr+Tn>>1,U(he[pe+2*ft-1],255&Ht,Ht>>16,Oe,ct+(2*ft-1)*q),U(he[pe+2*ft+0],255&jt,jt>>16,Oe,ct+(2*ft+0)*q)),jt=xn,ar=Tn}1&vt||(Ht=3*jt+ar+131074>>2,U(ne[ue+vt-1],255&Ht,Ht>>16,it,Ue+(vt-1)*q),he!=null&&(Ht=3*ar+jt+131074>>2,U(he[pe+vt-1],255&Ht,Ht>>16,Oe,ct+(vt-1)*q)))}}function Et(){xs[Vs]=Ac,xs[rd]=_l,xs[bl]=au,xs[If]=Zh,xs[tA]=e0,xs[ic]=sd,xs[Yh]=t0,xs[Ff]=_l,xs[ru]=Zh,xs[oc]=e0,xs[nd]=sd}function Qt(_){return _&-16384?0>_?0:255:_>>bb}function T(_,U){return Qt((19077*_>>8)+(26149*U>>8)-14234)}function J(_,U,q){return Qt((19077*_>>8)-(6419*U>>8)-(13320*q>>8)+8708)}function se(_,U){return Qt((19077*_>>8)+(33050*U>>8)-17685)}function ye(_,U,q,ne,ue){ne[ue+0]=T(_,q),ne[ue+1]=J(_,U,q),ne[ue+2]=se(_,U)}function Qe(_,U,q,ne,ue){ne[ue+0]=se(_,U),ne[ue+1]=J(_,U,q),ne[ue+2]=T(_,q)}function Ze(_,U,q,ne,ue){var he=J(_,U,q);U=he<<3&224|se(_,U)>>3,ne[ue+0]=248&T(_,q)|he>>5,ne[ue+1]=U}function _t(_,U,q,ne,ue){var he=240&se(_,U)|15;ne[ue+0]=240&T(_,q)|J(_,U,q)>>4,ne[ue+1]=he}function mr(_,U,q,ne,ue){ne[ue+0]=255,ye(_,U,q,ne,ue+1)}function Zr(_,U,q,ne,ue){Qe(_,U,q,ne,ue),ne[ue+3]=255}function kr(_,U,q,ne,ue){ye(_,U,q,ne,ue),ne[ue+3]=255}function Sn(_,U){return 0>_?0:_>U?U:_}function Ln(_,U,q){S[_]=function(ne,ue,he,pe,ve,Ce,Ne,Le,Ye){for(var $e=Le+(-2&Ye)*q;Le!=$e;)U(ne[ue+0],he[pe+0],ve[Ce+0],Ne,Le),U(ne[ue+1],he[pe+0],ve[Ce+0],Ne,Le+q),ue+=2,++pe,++Ce,Le+=2*q;1&Ye&&U(ne[ue+0],he[pe+0],ve[Ce+0],Ne,Le)}}function mo(_,U,q){return q==0?_==0?U==0?6:5:U==0?4:0:q}function _a(_,U,q,ne,ue){switch(_>>>30){case 3:Qo(U,q,ne,ue,0);break;case 2:ga(U,q,ne,ue);break;case 1:Pa(U,q,ne,ue)}}function wi(_,U){var q,ne,ue=U.M,he=U.Nb,pe=_.oc,ve=_.pc+40,Ce=_.oc,Ne=_.pc+584,Le=_.oc,Ye=_.pc+600;for(q=0;16>q;++q)pe[ve+32*q-1]=129;for(q=0;8>q;++q)Ce[Ne+32*q-1]=129,Le[Ye+32*q-1]=129;for(0<ue?pe[ve-1-32]=Ce[Ne-1-32]=Le[Ye-1-32]=129:(a(pe,ve-32-1,127,21),a(Ce,Ne-32-1,127,9),a(Le,Ye-32-1,127,9)),ne=0;ne<_.za;++ne){var $e=U.ya[U.aa+ne];if(0<ne){for(q=-1;16>q;++q)n(pe,ve+32*q-4,pe,ve+32*q+12,4);for(q=-1;8>q;++q)n(Ce,Ne+32*q-4,Ce,Ne+32*q+4,4),n(Le,Ye+32*q-4,Le,Ye+32*q+4,4)}var ze=_.Gd,gt=_.Hd+ne,it=$e.ad,Ue=$e.Hc;if(0<ue&&(n(pe,ve-32,ze[gt].y,0,16),n(Ce,Ne-32,ze[gt].f,0,8),n(Le,Ye-32,ze[gt].ea,0,8)),$e.Za){var Oe=pe,ct=ve-32+16;for(0<ue&&(ne>=_.za-1?a(Oe,ct,ze[gt].y[15],4):n(Oe,ct,ze[gt+1].y,0,4)),q=0;4>q;q++)Oe[ct+128+q]=Oe[ct+256+q]=Oe[ct+384+q]=Oe[ct+0+q];for(q=0;16>q;++q,Ue<<=2)Oe=pe,ct=ve+sA[q],ri[$e.Ob[q]](Oe,ct),_a(Ue,it,16*+q,Oe,ct)}else if(Oe=mo(ne,ue,$e.Ob[0]),uc[Oe](pe,ve),Ue!=0)for(q=0;16>q;++q,Ue<<=2)_a(Ue,it,16*+q,pe,ve+sA[q]);for(q=$e.Gc,Oe=mo(ne,ue,$e.Dd),Zi[Oe](Ce,Ne),Zi[Oe](Le,Ye),Ue=it,Oe=Ce,ct=Ne,255&($e=q>>0)&&(170&$e?Ho(Ue,256,Oe,ct):Ei(Ue,256,Oe,ct)),$e=Le,Ue=Ye,255&(q>>=8)&&(170&q?Ho(it,320,$e,Ue):Ei(it,320,$e,Ue)),ue<_.Ub-1&&(n(ze[gt].y,0,pe,ve+480,16),n(ze[gt].f,0,Ce,Ne+224,8),n(ze[gt].ea,0,Le,Ye+224,8)),q=8*he*_.B,ze=_.sa,gt=_.ta+16*ne+16*he*_.R,it=_.qa,$e=_.ra+8*ne+q,Ue=_.Ha,Oe=_.Ia+8*ne+q,q=0;16>q;++q)n(ze,gt+q*_.R,pe,ve+32*q,16);for(q=0;8>q;++q)n(it,$e+q*_.B,Ce,Ne+32*q,8),n(Ue,Oe+q*_.B,Le,Ye+32*q,8)}}function vl(_,U,q,ne,ue,he,pe,ve,Ce){var Ne=[0],Le=[0],Ye=0,$e=Ce!=null?Ce.kd:0,ze=Ce??new Vc;if(_==null||12>q)return 7;ze.data=_,ze.w=U,ze.ha=q,U=[U],q=[q],ze.gb=[ze.gb];e:{var gt=U,it=q,Ue=ze.gb;if(e(_!=null),e(it!=null),e(Ue!=null),Ue[0]=0,12<=it[0]&&!r(_,gt[0],"RIFF")){if(r(_,gt[0]+8,"WEBP")){Ue=3;break e}var Oe=Me(_,gt[0]+4);if(12>Oe||4294967286<Oe){Ue=3;break e}if($e&&Oe>it[0]-8){Ue=7;break e}Ue[0]=Oe,gt[0]+=12,it[0]-=12}Ue=0}if(Ue!=0)return Ue;for(Oe=0<ze.gb[0],q=q[0];;){e:{var ct=_;it=U,Ue=q;var vt=Ne,ft=Le,Kt=gt=[0];if((Ht=Ye=[Ye])[0]=0,8>Ue[0])Ue=7;else{if(!r(ct,it[0],"VP8X")){if(Me(ct,it[0]+4)!=10){Ue=3;break e}if(18>Ue[0]){Ue=7;break e}var jt=Me(ct,it[0]+8),ar=1+oe(ct,it[0]+12);if(2147483648<=ar*(ct=1+oe(ct,it[0]+15))){Ue=3;break e}Kt!=null&&(Kt[0]=jt),vt!=null&&(vt[0]=ar),ft!=null&&(ft[0]=ct),it[0]+=18,Ue[0]-=18,Ht[0]=1}Ue=0}}if(Ye=Ye[0],gt=gt[0],Ue!=0)return Ue;if(it=!!(2&gt),!Oe&&Ye)return 3;if(he!=null&&(he[0]=!!(16&gt)),pe!=null&&(pe[0]=it),ve!=null&&(ve[0]=0),pe=Ne[0],gt=Le[0],Ye&&it&&Ce==null){Ue=0;break}if(4>q){Ue=7;break}if(Oe&&Ye||!Oe&&!Ye&&!r(_,U[0],"ALPH")){q=[q],ze.na=[ze.na],ze.P=[ze.P],ze.Sa=[ze.Sa];e:{jt=_,Ue=U,Oe=q;var Ht=ze.gb;vt=ze.na,ft=ze.P,Kt=ze.Sa,ar=22,e(jt!=null),e(Oe!=null),ct=Ue[0];var xn=Oe[0];for(e(vt!=null),e(Kt!=null),vt[0]=null,ft[0]=null,Kt[0]=0;;){if(Ue[0]=ct,Oe[0]=xn,8>xn){Ue=7;break e}var Tn=Me(jt,ct+4);if(4294967286<Tn){Ue=3;break e}var qr=8+Tn+1&-2;if(ar+=qr,0<Ht&&ar>Ht){Ue=3;break e}if(!r(jt,ct,"VP8 ")||!r(jt,ct,"VP8L")){Ue=0;break e}if(xn[0]<qr){Ue=7;break e}r(jt,ct,"ALPH")||(vt[0]=jt,ft[0]=ct+8,Kt[0]=Tn),ct+=qr,xn-=qr}}if(q=q[0],ze.na=ze.na[0],ze.P=ze.P[0],ze.Sa=ze.Sa[0],Ue!=0)break}q=[q],ze.Ja=[ze.Ja],ze.xa=[ze.xa];e:if(Ht=_,Ue=U,Oe=q,vt=ze.gb[0],ft=ze.Ja,Kt=ze.xa,jt=Ue[0],ct=!r(Ht,jt,"VP8 "),ar=!r(Ht,jt,"VP8L"),e(Ht!=null),e(Oe!=null),e(ft!=null),e(Kt!=null),8>Oe[0])Ue=7;else{if(ct||ar){if(Ht=Me(Ht,jt+4),12<=vt&&Ht>vt-12){Ue=3;break e}if($e&&Ht>Oe[0]-8){Ue=7;break e}ft[0]=Ht,Ue[0]+=8,Oe[0]-=8,Kt[0]=ar}else Kt[0]=5<=Oe[0]&&Ht[jt+0]==47&&!(Ht[jt+4]>>5),ft[0]=Oe[0];Ue=0}if(q=q[0],ze.Ja=ze.Ja[0],ze.xa=ze.xa[0],U=U[0],Ue!=0)break;if(4294967286<ze.Ja)return 3;if(ve==null||it||(ve[0]=ze.xa?2:1),pe=[pe],gt=[gt],ze.xa){if(5>q){Ue=7;break}ve=pe,$e=gt,it=he,_==null||5>q?_=0:5<=q&&_[U+0]==47&&!(_[U+4]>>5)?(Oe=[0],Ht=[0],vt=[0],K(ft=new j,_,U,q),Gt(ft,Oe,Ht,vt)?(ve!=null&&(ve[0]=Oe[0]),$e!=null&&($e[0]=Ht[0]),it!=null&&(it[0]=vt[0]),_=1):_=0):_=0}else{if(10>q){Ue=7;break}ve=gt,_==null||10>q||!ms(_,U+3,q-3)?_=0:($e=_[U+0]|_[U+1]<<8|_[U+2]<<16,it=16383&(_[U+7]<<8|_[U+6]),_=16383&(_[U+9]<<8|_[U+8]),1&$e||3<($e>>1&7)||!($e>>4&1)||$e>>5>=ze.Ja||!it||!_?_=0:(pe&&(pe[0]=it),ve&&(ve[0]=_),_=1))}if(!_||(pe=pe[0],gt=gt[0],Ye&&(Ne[0]!=pe||Le[0]!=gt)))return 3;Ce!=null&&(Ce[0]=ze,Ce.offset=U-Ce.w,e(4294967286>U-Ce.w),e(Ce.offset==Ce.ha-q));break}return Ue==0||Ue==7&&Ye&&Ce==null?(he!=null&&(he[0]|=ze.na!=null&&0<ze.na.length),ne!=null&&(ne[0]=pe),ue!=null&&(ue[0]=gt),0):Ue}function Gc(_,U,q){var ne=U.width,ue=U.height,he=0,pe=0,ve=ne,Ce=ue;if(U.Da=_!=null&&0<_.Da,U.Da&&(ve=_.cd,Ce=_.bd,he=_.v,pe=_.j,11>q||(he&=-2,pe&=-2),0>he||0>pe||0>=ve||0>=Ce||he+ve>ne||pe+Ce>ue))return 0;if(U.v=he,U.j=pe,U.va=he+ve,U.o=pe+Ce,U.U=ve,U.T=Ce,U.da=_!=null&&0<_.da,U.da){if(!je(ve,Ce,q=[_.ib],he=[_.hb]))return 0;U.ib=q[0],U.hb=he[0]}return U.ob=_!=null&&_.ob,U.Kb=_==null||!_.Sd,U.da&&(U.ob=U.ib<3*ne/4&&U.hb<3*ue/4,U.Kb=0),1}function JA(_){if(_==null)return 2;if(11>_.S){var U=_.f.RGBA;U.fb+=(_.height-1)*U.A,U.A=-U.A}else U=_.f.kb,_=_.height,U.O+=(_-1)*U.fa,U.fa=-U.fa,U.N+=(_-1>>1)*U.Ab,U.Ab=-U.Ab,U.W+=(_-1>>1)*U.Db,U.Db=-U.Db,U.F!=null&&(U.J+=(_-1)*U.lb,U.lb=-U.lb);return 0}function $u(_,U,q,ne){if(ne==null||0>=_||0>=U)return 2;if(q!=null){if(q.Da){var ue=q.cd,he=q.bd,pe=-2&q.v,ve=-2&q.j;if(0>pe||0>ve||0>=ue||0>=he||pe+ue>_||ve+he>U)return 2;_=ue,U=he}if(q.da){if(!je(_,U,ue=[q.ib],he=[q.hb]))return 2;_=ue[0],U=he[0]}}ne.width=_,ne.height=U;e:{var Ce=ne.width,Ne=ne.height;if(_=ne.S,0>=Ce||0>=Ne||!(_>=Vs&&13>_))_=2;else{if(0>=ne.Rd&&ne.sd==null){pe=he=ue=U=0;var Le=(ve=Ce*x1[_])*Ne;if(11>_||(he=(Ne+1)/2*(U=(Ce+1)/2),_==12&&(pe=(ue=Ce)*Ne)),(Ne=s(Le+2*he+pe))==null){_=1;break e}ne.sd=Ne,11>_?((Ce=ne.f.RGBA).eb=Ne,Ce.fb=0,Ce.A=ve,Ce.size=Le):((Ce=ne.f.kb).y=Ne,Ce.O=0,Ce.fa=ve,Ce.Fd=Le,Ce.f=Ne,Ce.N=0+Le,Ce.Ab=U,Ce.Cd=he,Ce.ea=Ne,Ce.W=0+Le+he,Ce.Db=U,Ce.Ed=he,_==12&&(Ce.F=Ne,Ce.J=0+Le+2*he),Ce.Tc=pe,Ce.lb=ue)}if(U=1,ue=ne.S,he=ne.width,pe=ne.height,ue>=Vs&&13>ue)if(11>ue)_=ne.f.RGBA,U&=(ve=Math.abs(_.A))*(pe-1)+he<=_.size,U&=ve>=he*x1[ue],U&=_.eb!=null;else{_=ne.f.kb,ve=(he+1)/2,Le=(pe+1)/2,Ce=Math.abs(_.fa),Ne=Math.abs(_.Ab);var Ye=Math.abs(_.Db),$e=Math.abs(_.lb),ze=$e*(pe-1)+he;U&=Ce*(pe-1)+he<=_.Fd,U&=Ne*(Le-1)+ve<=_.Cd,U=(U&=Ye*(Le-1)+ve<=_.Ed)&Ce>=he&Ne>=ve&Ye>=ve,U&=_.y!=null,U&=_.f!=null,U&=_.ea!=null,ue==12&&(U&=$e>=he,U&=ze<=_.Tc,U&=_.F!=null)}else U=0;_=U?0:2}}return _!=0||q!=null&&q.fd&&(_=JA(ne)),_}var Wa=64,qc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Wu=24,Xu=32,ZA=8,bi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];pt("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(_){return _},S.Predictor2=function(_,U,q){return U[q+0]},S.Predictor3=function(_,U,q){return U[q+1]},S.Predictor4=function(_,U,q){return U[q-1]},S.Predictor5=function(_,U,q){return ut(ut(_,U[q+1]),U[q+0])},S.Predictor6=function(_,U,q){return ut(_,U[q-1])},S.Predictor7=function(_,U,q){return ut(_,U[q+0])},S.Predictor8=function(_,U,q){return ut(U[q-1],U[q+0])},S.Predictor9=function(_,U,q){return ut(U[q+0],U[q+1])},S.Predictor10=function(_,U,q){return ut(ut(_,U[q-1]),ut(U[q+0],U[q+1]))},S.Predictor11=function(_,U,q){var ne=U[q+0];return 0>=Yt(ne>>24&255,_>>24&255,(U=U[q-1])>>24&255)+Yt(ne>>16&255,_>>16&255,U>>16&255)+Yt(ne>>8&255,_>>8&255,U>>8&255)+Yt(255&ne,255&_,255&U)?ne:_},S.Predictor12=function(_,U,q){var ne=U[q+0];return(kt((_>>24&255)+(ne>>24&255)-((U=U[q-1])>>24&255))<<24|kt((_>>16&255)+(ne>>16&255)-(U>>16&255))<<16|kt((_>>8&255)+(ne>>8&255)-(U>>8&255))<<8|kt((255&_)+(255&ne)-(255&U)))>>>0},S.Predictor13=function(_,U,q){var ne=U[q-1];return(zt((_=ut(_,U[q+0]))>>24&255,ne>>24&255)<<24|zt(_>>16&255,ne>>16&255)<<16|zt(_>>8&255,ne>>8&255)<<8|zt(_>>0&255,ne>>0&255))>>>0};var sp=S.PredictorAdd0;S.PredictorAdd1=It,pt("Predictor2","PredictorAdd2"),pt("Predictor3","PredictorAdd3"),pt("Predictor4","PredictorAdd4"),pt("Predictor5","PredictorAdd5"),pt("Predictor6","PredictorAdd6"),pt("Predictor7","PredictorAdd7"),pt("Predictor8","PredictorAdd8"),pt("Predictor9","PredictorAdd9"),pt("Predictor10","PredictorAdd10"),pt("Predictor11","PredictorAdd11"),pt("Predictor12","PredictorAdd12"),pt("Predictor13","PredictorAdd13");var Nf=S.PredictorAdd2;Rt("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),Rt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var Wh,po=S.ColorIndexInverseTransform,ps=S.MapARGB,Kc=S.VP8LColorIndexInverseTransformAlpha,kf=S.MapAlpha,nc=S.VP8LPredictorsAdd=[];nc.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var $c,ti,Ds,Wc,Ci,Oo,yl,Qo,ga,Ho,Pa,Ei,Yu,wl,ed,Xc,Yc,Jc,Ju,td,Zc,ac,Zu,xa,Yi,$r,Wr,Jn,Sa=s(511),go=s(2041),eu=s(225),tu=s(767),sc=0,Xh=go,eA=eu,gs=tu,xo=Sa,Vs=0,rd=1,bl=2,If=3,tA=4,ic=5,Yh=6,Ff=7,ru=8,oc=9,nd=10,Jh=[2,3,7],vo=[3,3,11],Ji=[280,256,256,256,40],rA=[0,1,1,1,0],lc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],cc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],nA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],f1=8,Df=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Rf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xa=null,va=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],bn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Cl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ip=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],aA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],h1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],uc=[],ri=[],Zi=[],m1=1,ad=2,El=[],xs=[];ot("UpsampleRgbLinePair",ye,3),ot("UpsampleBgrLinePair",Qe,3),ot("UpsampleRgbaLinePair",kr,4),ot("UpsampleBgraLinePair",Zr,4),ot("UpsampleArgbLinePair",mr,4),ot("UpsampleRgba4444LinePair",_t,2),ot("UpsampleRgb565LinePair",Ze,2);var Ac=S.UpsampleRgbLinePair,au=S.UpsampleBgrLinePair,_l=S.UpsampleRgbaLinePair,Zh=S.UpsampleBgraLinePair,e0=S.UpsampleArgbLinePair,sd=S.UpsampleRgba4444LinePair,t0=S.UpsampleRgb565LinePair,Sl=16,Ya=1<<Sl-1,su=-227,r0=482,bb=6,p1=0,Cb=s(256),Ja=s(256),op=s(256),Lf=s(256),Uf=s(r0-su),lp=s(r0-su);Ln("YuvToRgbRow",ye,3),Ln("YuvToBgrRow",Qe,3),Ln("YuvToRgbaRow",kr,4),Ln("YuvToBgraRow",Zr,4),Ln("YuvToArgbRow",mr,4),Ln("YuvToRgba4444Row",_t,2),Ln("YuvToRgb565Row",Ze,2);var sA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],dc=[0,2,8],Eb=[8,7,6,4,4,2,2,2,1,1,1,1],g1=1;this.WebPDecodeRGBA=function(_,U,q,ne,ue){var he=rd,pe=new ec,ve=new na;pe.ba=ve,ve.S=he,ve.width=[ve.width],ve.height=[ve.height];var Ce=ve.width,Ne=ve.height,Le=new pa;if(Le==null||_==null)var Ye=2;else e(Le!=null),Ye=vl(_,U,q,Le.width,Le.height,Le.Pd,Le.Qd,Le.format,null);if(Ye!=0?Ce=0:(Ce!=null&&(Ce[0]=Le.width[0]),Ne!=null&&(Ne[0]=Le.height[0]),Ce=1),Ce){ve.width=ve.width[0],ve.height=ve.height[0],ne!=null&&(ne[0]=ve.width),ue!=null&&(ue[0]=ve.height);e:{if(ne=new $a,(ue=new Vc).data=_,ue.w=U,ue.ha=q,ue.kd=1,U=[0],e(ue!=null),((_=vl(ue.data,ue.w,ue.ha,null,null,null,U,null,ue))==0||_==7)&&U[0]&&(_=4),(U=_)==0){if(e(pe!=null),ne.data=ue.data,ne.w=ue.w+ue.offset,ne.ha=ue.ha-ue.offset,ne.put=Ea,ne.ac=Wn,ne.bc=Bs,ne.ma=pe,ue.xa){if((_=tt())==null){pe=1;break e}if(function($e,ze){var gt=[0],it=[0],Ue=[0];t:for(;;){if($e==null)return 0;if(ze==null)return $e.a=2,0;if($e.l=ze,$e.a=0,K($e.m,ze.data,ze.w,ze.ha),!Gt($e.m,gt,it,Ue)){$e.a=3;break t}if($e.xb=ad,ze.width=gt[0],ze.height=it[0],!He(gt[0],it[0],1,$e,null))break t;return 1}return e($e.a!=0),0}(_,ne)){if(ne=(U=$u(ne.width,ne.height,pe.Oa,pe.ba))==0){t:{ne=_;r:for(;;){if(ne==null){ne=0;break t}if(e(ne.s.yc!=null),e(ne.s.Ya!=null),e(0<ne.s.Wb),e((q=ne.l)!=null),e((ue=q.ma)!=null),ne.xb!=0){if(ne.ca=ue.ba,ne.tb=ue.tb,e(ne.ca!=null),!Gc(ue.Oa,q,If)){ne.a=2;break r}if(!We(ne,q.width)||q.da)break r;if((q.da||Fr(ne.ca.S))&&Ve(),11>ne.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ne.ca.f.kb.F!=null&&Ve()),ne.Pb&&0<ne.s.ua&&ne.s.vb.X==null&&!at(ne.s.vb,ne.s.Wa.Xa)){ne.a=1;break r}ne.xb=0}if(!Ie(ne,ne.V,ne.Ba,ne.c,ne.i,q.o,ke))break r;ue.Dc=ne.Ma,ne=1;break t}e(ne.a!=0),ne=0}ne=!ne}ne&&(U=_.a)}else U=_.a}else{if((_=new Ns)==null){pe=1;break e}if(_.Fa=ue.na,_.P=ue.P,_.qc=ue.Sa,Pc(_,ne)){if((U=$u(ne.width,ne.height,pe.Oa,pe.ba))==0){if(_.Aa=0,q=pe.Oa,e((ue=_)!=null),q!=null){if(0<(Ce=0>(Ce=q.Md)?0:100<Ce?255:255*Ce/100)){for(Ne=Le=0;4>Ne;++Ne)12>(Ye=ue.pb[Ne]).lc&&(Ye.ia=Ce*Eb[0>Ye.lc?0:Ye.lc]>>3),Le|=Ye.ia;Le&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=q.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}Hu(_,ne)||(U=_.a)}}else U=_.a}U==0&&pe.Oa!=null&&pe.Oa.fd&&(U=JA(pe.ba))}pe=U}he=pe!=0?null:11>he?ve.f.RGBA.eb:ve.f.kb.y}else he=null;return he};var x1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,N){for(var Q="",D=0;D<4;D++)Q+=String.fromCharCode(S[N++]);return Q}function d(S,N){return(S[N+0]<<0|S[N+1]<<8|S[N+2]<<16)>>>0}function h(S,N){return(S[N+0]<<0|S[N+1]<<8|S[N+2]<<16|S[N+3]<<24)>>>0}new l;var m=[0],g=[0],b=[],y=new l,E=t,B=function(S,N){var Q={},D=0,I=!1,O=0,z=0;if(Q.frames=[],!function(X,Z,te,ce){for(var de=0;de<ce;de++)if(X[Z+de]!=te.charCodeAt(de))return!0;return!1}(S,N,"RIFF",4)){var re,Y;for(h(S,N+=4),N+=8;N<S.length;){var ae=u(S,N),K=h(S,N+=4);N+=4;var G=K+(1&K);switch(ae){case"VP8 ":case"VP8L":Q.frames[D]===void 0&&(Q.frames[D]={}),(j=Q.frames[D]).src_off=I?z:N-8,j.src_size=O+K+8,D++,I&&(I=!1,O=0,z=0);break;case"VP8X":(j=Q.header={}).feature_flags=S[N];var W=N+4;j.canvas_width=1+d(S,W),W+=3,j.canvas_height=1+d(S,W),W+=3;break;case"ALPH":I=!0,O=G+8,z=N-8;break;case"ANIM":(j=Q.header).bgcolor=h(S,N),W=N+4,j.loop_count=(re=S)[(Y=W)+0]<<0|re[Y+1]<<8,W+=2;break;case"ANMF":var ie,j;(j=Q.frames[D]={}).offset_x=2*d(S,N),N+=3,j.offset_y=2*d(S,N),N+=3,j.width=1+d(S,N),N+=3,j.height=1+d(S,N),N+=3,j.duration=d(S,N),N+=3,ie=S[N++],j.dispose=1&ie,j.blend=ie>>1&1}ae!="ANMF"&&(N+=G)}return Q}}(E,0);B.response=E,B.rgbaoutput=!0,B.dataurl=!1;var k=B.header?B.header:null,L=B.frames?B.frames:null;if(k){k.loop_counter=k.loop_count,m=[k.canvas_height],g=[k.canvas_width];for(var M=0;M<L.length&&L[M].blend!=0;M++);}var P=L[0],R=y.WebPDecodeRGBA(E,P.src_off,P.src_size,g,m);P.rgba=R,P.imgwidth=g[0],P.imgheight=m[0];for(var C=0;C<g[0]*m[0]*4;C++)b[C]=R[C];return this.width=g,this.height=m,this.data=b,this}(function(t){var e=function(){return typeof r5=="function"},r=function(m,g,b,y){var E=4,B=i;switch(y){case t.image_compression.FAST:E=1,B=s;break;case t.image_compression.MEDIUM:E=6,B=o;break;case t.image_compression.SLOW:E=9,B=l}m=n(m,g,b,B);var k=r5(m,{level:E});return t.__addimage__.arrayBufferToBinaryString(k)},n=function(m,g,b,y){for(var E,B,k,L=m.length/g,M=new Uint8Array(m.length+L),P=d(),R=0;R<L;R+=1){if(k=R*g,E=m.subarray(k,k+g),y)M.set(y(E,b,B),k+R);else{for(var C,S=P.length,N=[];C<S;C+=1)N[C]=P[C](E,b,B);var Q=h(N.concat());M.set(N[Q],k+R)}B=E}return M},a=function(m){var g=Array.apply([],m);return g.unshift(0),g},s=function(m,g){var b,y=[],E=m.length;y[0]=1;for(var B=0;B<E;B+=1)b=m[B-g]||0,y[B+1]=m[B]-b+256&255;return y},i=function(m,g,b){var y,E=[],B=m.length;E[0]=2;for(var k=0;k<B;k+=1)y=b&&b[k]||0,E[k+1]=m[k]-y+256&255;return E},o=function(m,g,b){var y,E,B=[],k=m.length;B[0]=3;for(var L=0;L<k;L+=1)y=m[L-g]||0,E=b&&b[L]||0,B[L+1]=m[L]+256-(y+E>>>1)&255;return B},l=function(m,g,b){var y,E,B,k,L=[],M=m.length;L[0]=4;for(var P=0;P<M;P+=1)y=m[P-g]||0,E=b&&b[P]||0,B=b&&b[P-g]||0,k=u(y,E,B),L[P+1]=m[P]-k+256&255;return L},u=function(m,g,b){if(m===g&&g===b)return m;var y=Math.abs(g-b),E=Math.abs(m-b),B=Math.abs(m+g-b-b);return y<=E&&y<=B?m:E<=B?g:b},d=function(){return[a,s,i,o,l]},h=function(m){var g=m.map(function(b){return b.reduce(function(y,E){return y+Math.abs(E)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(m,g,b,y){var E,B,k,L,M,P,R,C,S,N,Q,D,I,O,z,re=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(k=new ioe(m)).imgData,B=k.bits,E=k.colorSpace,M=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){S=(C=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,Q=new Uint8Array(S*k.colors),N=new Uint8Array(S);var ae,K=k.pixelBitlength-k.bits;for(O=0,z=0;O<S;O++){for(I=C[O],ae=0;ae<K;)Q[z++]=I>>>ae&255,ae+=k.bits;N[O]=I>>>ae&255}}if(k.bits===16){S=(C=new Uint32Array(k.decodePixels().buffer)).length,Q=new Uint8Array(S*(32/k.pixelBitlength)*k.colors),N=new Uint8Array(S*(32/k.pixelBitlength)),D=k.colors>1,O=0,z=0;for(var G=0;O<S;)I=C[O++],Q[z++]=I>>>0&255,D&&(Q[z++]=I>>>16&255,I=C[O++],Q[z++]=I>>>0&255),N[G++]=I>>>16&255;B=8}y!==t.image_compression.NONE&&e()?(m=r(Q,k.width*k.colors,k.colors,y),R=r(N,k.width,1,y)):(m=Q,R=N,re=void 0)}if(k.colorType===3&&(E=this.color_spaces.INDEXED,P=k.palette,k.transparency.indexed)){var W=k.transparency.indexed,ie=0;for(O=0,S=W.length;O<S;++O)ie+=W[O];if((ie/=255)===S-1&&W.indexOf(0)!==-1)L=[W.indexOf(0)];else if(ie!==S){for(C=k.decodePixels(),N=new Uint8Array(C.length),O=0,S=C.length;O<S;O++)N[O]=W[C[O]];R=r(N,k.width,1)}}var j=function(X){var Z;switch(X){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(y);return re===this.decode.FLATE_DECODE&&(Y="/Predictor "+j+" "),Y+="/Colors "+M+" /BitsPerComponent "+B+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(R&&this.__addimage__.isArrayBuffer(R)||this.__addimage__.isArrayBufferView(R))&&(R=this.__addimage__.arrayBufferToBinaryString(R)),{alias:b,data:m,index:g,filter:re,decodeParameters:Y,transparency:L,palette:P,sMask:R,predictor:j,width:k.width,height:k.height,bitsPerComponent:B,colorSpace:E}}}})(or.API),function(t){t.processGIF89A=function(e,r,n,a){var s=new ooe(e),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new lE(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(or.API),yc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},yc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){sa.log("bit decode error:"+r)}},yc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},yc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},yc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},yc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},yc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},yc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},yc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},yc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new yc(e,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new lE(100).encode(l,100);return t.processJPEG.call(this,u,r,n,a)}}(or.API),IF.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new IF(e),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new lE(100).encode(l,100);return t.processJPEG.call(this,u,r,n,a)}}(or.API),or.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,u=0;u<a;u+=4){var d=n[u],h=n[u+1],m=n[u+2],g=n[u+3];s[o++]=d,s[o++]=h,s[o++]=m,i[l++]=g}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},or.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},_0=or.API,Ev=_0.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=e.doKerning!==!1,m=0,g=t.length,b=0,y=o[0]||l,E=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?E.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(m=h&&qn(u[n])==="object"&&!isNaN(parseInt(u[n][b],10))?u[n][b]/d:0,E.push((o[n]||y)/l+m)),b=n;return E},TF=_0.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return _0.processArabic&&(t=_0.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:Ev.apply(this,arguments).reduce(function(s,i){return s+i},0)},BF=function(t,e,r,n){for(var a=[],s=0,i=t.length,o=0;s!==i&&o+e[s]<r;)o+=e[s],s++;a.push(t.slice(0,s));var l=s;for(o=0;s!==i;)o+e[s]>n&&(a.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&a.push(t.slice(l,s)),a},NF=function(t,e,r){r||(r={});var n,a,s,i,o,l,u,d=[],h=[d],m=r.textIndent||0,g=0,b=0,y=t.split(" "),E=Ev.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var B=Array(l).join(" "),k=[];y.map(function(M){(M=M.split(/\s*\n/)).length>1?k=k.concat(M.map(function(P,R){return(R&&P.length?`
`:"")+P})):k.push(M[0])}),y=k,l=TF.apply(this,[B,r])}for(s=0,i=y.length;s<i;s++){var L=0;if(n=y[s],l&&n[0]==`
`&&(n=n.substr(1),L=1),m+g+(b=(a=Ev.apply(this,[n,r])).reduce(function(M,P){return M+P},0))>e||L){if(b>e){for(o=BF.apply(this,[n,a,e-(m+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)h.push([o.shift()]);b=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(M,P){return M+P},0)}else d=[n];h.push(d),m=b+l,g=E}else d.push(n),m+=g+b,g=E}return u=l?function(M,P){return(P?B:"")+M.join(" ")}:function(M){return M.join(" ")},h.map(u)},_0.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(NF.apply(this,[n[o],i,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},a=0;a<e.length;a++)r[e[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=e[a];var s=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var m,g,b,y,E=["{"];for(var B in h){if(m=h[B],isNaN(parseInt(B,10))?g="'"+B+"'":(B=parseInt(B,10),g=(g=s(B).slice(2)).slice(0,-1)+n[g.slice(-1)]),typeof m=="number")m<0?(b=s(m).slice(3),y="-"):(b=s(m).slice(2),y=""),b=y+b.slice(0,-1)+n[b.slice(-1)];else{if(qn(m)!=="object")throw new Error("Don't know what to do with value type "+qn(m)+".");b=i(m)}E.push(g+b)}return E.push("}"),E.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,b,y,E={},B=1,k=E,L=[],M="",P="",R=h.length-1,C=1;C<R;C+=1)(y=h[C])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(y):y=="{"?(L.push([k,b]),k={},b=void 0):y=="}"?((g=L.pop())[0][g[1]]=k,b=void 0,k=g[0]):y=="-"?B=-1:b===void 0?r.hasOwnProperty(y)?(M+=r[y],b=parseInt(M,16)*B,B=1,M=""):M+=y:r.hasOwnProperty(y)?(P+=r[y],k[b]=parseInt(P,16)*B,B=1,b=void 0,P=""):P+=y;return E},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var m=h.font,g=d.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var b=u.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(or.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Lg(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(or),function(t){function e(){return(Cr.canvg?Promise.resolve(Cr.canvg):dy(()=>import("./index.es-DUK3kO1p.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}or.API.addSvgAsImage=function(r,n,a,s,i,o,l,u){if(isNaN(n)||isNaN(a))throw sa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw sa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(b){return b.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,l,u)})}}(),or.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},or.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,h=0;function m(b,y){var E,B=!1;for(E=0;E<b.length;E+=1)b[E]===y&&(B=!0);return B}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(h=0;h<g;h+=1)r[o[h]].value=r[o[h]].defaultValue,r[o[h]].explicitSet=!1}if(qn(t)==="object"){for(a in t)if(s=t[a],m(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&m(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,y=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?y.push("/"+b+" /"+r[b].value):y.push("/"+b+" "+r[b].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(or.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,m=s.length;h<m;++h){if(o=i.metadata.characterToGlyph(s.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,l,u,d,h,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,m=(o=Object.keys(s).sort(function(g,b){return g-b})).length;h<m;h++)i=o[h],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",b=0;b<m.length;b++)g+=String.fromCharCode(m[b]);var y=u();d({data:g,addLength1:!0,objectId:y}),l("endobj");var E=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var B=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+$0(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var k=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+$0(o.fontName)),l("/FontDescriptor "+B+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+E+" 0 R"),l("/BaseFont /"+$0(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var b=u();d({data:m,addLength1:!0,objectId:b}),l("endobj");var y=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var E=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+$0(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var B=0;B<o.metadata.hmtx.widths.length;B++)o.metadata.hmtx.widths[B]=parseInt(o.metadata.hmtx.widths[B]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+$0(o.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",l=s.x,u=s.y,d=s.options||{},h=s.mutex||{},m=h.pdfEscape,g=h.activeFontKey,b=h.fonts,y=g,E="",B=0,k="",L=b[y].encoding;if(b[y].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:h};for(k=o,y=g,Array.isArray(o)&&(k=o[0]),B=0;B<k.length;B+=1)b[y].metadata.hasOwnProperty("cmap")&&(i=b[y].metadata.cmap.unicode.codeMap[k[B].charCodeAt(0)]),i||k[B].charCodeAt(0)<256&&b[y].metadata.hasOwnProperty("Unicode")?E+=k[B]:E+="";var M="";return parseInt(y.slice(1))<14||L==="WinAnsiEncoding"?M=m(E,y).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&(M=r(E,b[y])),h.isHex=!0,{text:M,x:l,y:u,options:d,mutex:h}};e.events.push(["postProcessText",function(s){var i=s.text||"",o=[],l={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},l,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},l,{text:i})).text}])}(or),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(or.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,i,o,l,u,d,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],B=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,L=0;this.__bidiEngine__={};var M=function(D){var I=D.charCodeAt(),O=I>>8,z=y[O];return z!==void 0?h[256*z+(255&I)]:O===252||O===253?"AL":B.test(O)?"L":O===8?"R":"N"},P=function(D){for(var I,O=0;O<D.length;O++){if((I=M(D.charAt(O)))==="L")return!1;if(I==="R")return!0}return!1},R=function(D,I,O,z){var re,Y,ae,K,G=I[z];switch(G){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(G="AN");break;case"AL":k=!0,G="R";break;case"WS":G="N";break;case"CS":z<1||z+1>=I.length||(re=O[z-1])!=="EN"&&re!=="AN"||(Y=I[z+1])!=="EN"&&Y!=="AN"?G="N":k&&(Y="AN"),G=Y===re?Y:"N";break;case"ES":G=(re=z>0?O[z-1]:"B")==="EN"&&z+1<I.length&&I[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&O[z-1]==="EN"){G="EN";break}if(k){G="N";break}for(ae=z+1,K=I.length;ae<K&&I[ae]==="ET";)ae++;G=ae<K&&I[ae]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(K=I.length,ae=z+1;ae<K&&I[ae]==="NSM";)ae++;if(ae<K){var W=D[z],ie=W>=1425&&W<=2303||W===64286;if(re=I[ae],ie&&(re==="R"||re==="AL")){G="R";break}}}G=z<1||(re=I[z-1])==="B"?"N":O[z-1];break;case"B":k=!1,a=!0,G=L;break;case"S":s=!0,G="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":G="N"}return G},C=function(D,I,O){var z=D.split("");return O&&S(z,O,{hiLevel:L}),z.reverse(),I&&I.reverse(),z.join("")},S=function(D,I,O){var z,re,Y,ae,K,G=-1,W=D.length,ie=0,j=[],X=L?g:m,Z=[];for(k=!1,a=!1,s=!1,re=0;re<W;re++)Z[re]=M(D[re]);for(Y=0;Y<W;Y++){if(K=ie,j[Y]=R(D,Z,j,Y),z=240&(ie=X[K][b[j[Y]]]),ie&=15,I[Y]=ae=X[ie][5],z>0)if(z===16){for(re=G;re<Y;re++)I[re]=1;G=-1}else G=-1;if(X[ie][6])G===-1&&(G=Y);else if(G>-1){for(re=G;re<Y;re++)I[re]=ae;G=-1}Z[Y]==="B"&&(I[Y]=0),O.hiLevel|=ae}s&&function(te,ce,de){for(var me=0;me<de;me++)if(te[me]==="S"){ce[me]=L;for(var ge=me-1;ge>=0&&te[ge]==="WS";ge--)ce[ge]=L}}(Z,I,W)},N=function(D,I,O,z,re){if(!(re.hiLevel<D)){if(D===1&&L===1&&!a)return I.reverse(),void(O&&O.reverse());for(var Y,ae,K,G,W=I.length,ie=0;ie<W;){if(z[ie]>=D){for(K=ie+1;K<W&&z[K]>=D;)K++;for(G=ie,ae=K-1;G<ae;G++,ae--)Y=I[G],I[G]=I[ae],I[ae]=Y,O&&(Y=O[G],O[G]=O[ae],O[ae]=Y);ie=K}ie++}}},Q=function(D,I,O){var z=D.split(""),re={hiLevel:L};return O||(O=[]),S(z,O,re),function(Y,ae,K){if(K.hiLevel!==0&&d)for(var G,W=0;W<Y.length;W++)ae[W]===1&&(G=E.indexOf(Y[W]))>=0&&(Y[W]=E[G+1])}(z,O,re),N(2,z,I,O,re),N(1,z,I,O,re),z.join("")};return this.__bidiEngine__.doBidiReorder=function(D,I,O){if(function(re,Y){if(Y)for(var ae=0;ae<re.length;ae++)Y[ae]=ae;o===void 0&&(o=P(re)),u===void 0&&(u=P(re))}(D,I),i||!l||u)if(i&&l&&o^u)L=o?1:0,D=C(D,I,O);else if(!i&&l&&u)L=o?1:0,D=Q(D,I,O),D=C(D,I);else if(!i||o||l||u){if(i&&!l&&o^u)D=C(D,I),o?(L=0,D=Q(D,I,O)):(L=1,D=Q(D,I,O),D=C(D,I));else if(i&&o&&!l&&u)L=1,D=Q(D,I,O),D=C(D,I);else if(!i&&!l&&o^u){var z=d;o?(L=1,D=Q(D,I,O),L=0,d=!1,D=Q(D,I,O),d=z):(L=0,D=Q(D,I,O),D=C(D,I),L=1,d=!1,D=Q(D,I,O),d=z,D=C(D,I))}}else L=0,D=Q(D,I,O);else L=o?1:0,D=Q(D,I,O);return D},this.__bidiEngine__.setOptions=function(D){D&&(i=D.isInputVisual,l=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(or),or.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new gf(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new boe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new loe(this.contents),this.head=new uoe(this),this.name=new moe(this),this.cmap=new PM(this),this.toUnicode={},this.hhea=new Aoe(this),this.maxp=new poe(this),this.hmtx=new goe(this),this.post=new foe(this),this.os2=new doe(this),this.loca=new woe(this),this.glyf=new xoe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,i,o;for(i=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Lc,gf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,i,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),loe=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,i,o,l,u,d,h,m,g,b,y;for(y in g=Object.keys(r).length,l=Math.log(2),h=16*Math.floor(Math.log(g)/l),i=Math.floor(h/l),d=16*g-h,(a=new gf).writeInt(this.scalarType),a.writeShort(g),a.writeShort(h),a.writeShort(i),a.writeShort(d),s=16*g,u=a.pos+s,o=null,b=[],r)for(m=r[y],a.writeString(y),a.writeInt(t(m)),a.writeInt(u),a.writeInt(m.length),b=b.concat(m),y==="head"&&(o=u),u+=m.length;u%4;)b.push(0),u++;return a.write(b),n=2981146554-t(a.data),a.pos=o+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,i;for(r=jM.call(r);r.length%4;)r.push(0);for(s=new gf(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),coe={}.hasOwnProperty,Uu=function(t,e){for(var r in e)coe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Lc=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var uoe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Uu(e,Lc),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new gf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),FF=function(){function t(e,r){var n,a,s,i,o,l,u,d,h,m,g,b,y,E,B,k,L;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,s=function(){var M,P;for(P=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)P.push(e.readUInt16());return P}(),e.pos+=2,y=function(){var M,P;for(P=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)P.push(e.readUInt16());return P}(),u=function(){var M,P;for(P=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)P.push(e.readUInt16());return P}(),d=function(){var M,P;for(P=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)P.push(e.readUInt16());return P}(),a=(this.length-e.pos+this.offset)/2,o=function(){var M,P;for(P=[],l=M=0;0<=a?M<a:M>a;l=0<=a?++M:--M)P.push(e.readUInt16());return P}(),l=B=0,L=s.length;B<L;l=++B)for(E=s[l],n=k=b=y[l];b<=E?k<=E:k>=E;n=b<=E?++k:--k)d[l]===0?i=n+u[l]:(i=o[d[l]/2+(n-b)-(m-l)]||0)!==0&&(i+=u[l]),this.codeMap[n]=65535&i}e.pos=h}return t.encode=function(e,r){var n,a,s,i,o,l,u,d,h,m,g,b,y,E,B,k,L,M,P,R,C,S,N,Q,D,I,O,z,re,Y,ae,K,G,W,ie,j,X,Z,te,ce,de,me,ge,Te,xe,oe;switch(z=new gf,i=Object.keys(e).sort(function(Me,at){return Me-at}),r){case"macroman":for(y=0,E=function(){var Me=[];for(b=0;b<256;++b)Me.push(0);return Me}(),k={0:0},s={},re=0,G=i.length;re<G;re++)k[ge=e[a=i[re]]]==null&&(k[ge]=++y),s[a]={old:e[a],new:k[e[a]]},E[a]=k[e[a]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(E),{charMap:s,subtable:z.data,maxGlyphID:y+1};case"unicode":for(I=[],h=[],L=0,k={},n={},B=u=null,Y=0,W=i.length;Y<W;Y++)k[P=e[a=i[Y]]]==null&&(k[P]=++L),n[a]={old:P,new:k[P]},o=k[P]-a,B!=null&&o===u||(B&&h.push(B),I.push(a),u=o),B=a;for(B&&h.push(B),h.push(65535),I.push(65535),Q=2*(N=I.length),S=2*Math.pow(Math.log(N)/Math.LN2,2),m=Math.log(S/2)/Math.LN2,C=2*N-S,l=[],R=[],g=[],b=ae=0,ie=I.length;ae<ie;b=++ae){if(D=I[b],d=h[b],D===65535){l.push(0),R.push(0);break}if(D-(O=n[D].new)>=32768)for(l.push(0),R.push(2*(g.length+N-b)),a=K=D;D<=d?K<=d:K>=d;a=D<=d?++K:--K)g.push(n[a].new);else l.push(O-D),R.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*N+2*g.length),z.writeUInt16(0),z.writeUInt16(Q),z.writeUInt16(S),z.writeUInt16(m),z.writeUInt16(C),de=0,j=h.length;de<j;de++)a=h[de],z.writeUInt16(a);for(z.writeUInt16(0),me=0,X=I.length;me<X;me++)a=I[me],z.writeUInt16(a);for(Te=0,Z=l.length;Te<Z;Te++)o=l[Te],z.writeUInt16(o);for(xe=0,te=R.length;xe<te;xe++)M=R[xe],z.writeUInt16(M);for(oe=0,ce=g.length;oe<ce;oe++)y=g[oe],z.writeUInt16(y);return{charMap:n,subtable:z.data,maxGlyphID:L+1}}},t}(),PM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Uu(e,Lc),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new FF(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=FF.encode(r,n),(s=new gf).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},e}(),Aoe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Uu(e,Lc),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),doe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Uu(e,Lc),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),foe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Uu(e,Lc),e.prototype.tag="post",e.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(r.readUInt32());return u}).call(this)}},e}(),hoe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},moe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Uu(e,Lc),e.prototype.tag="name",e.prototype.parse=function(r){var n,a,s,i,o,l,u,d,h,m,g;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},i=h=0,m=a.length;h<m;i=++h)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new hoe(d,s),u[g=s.nameID]==null&&(u[g]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),poe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Uu(e,Lc),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),goe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Uu(e,Lc),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,a,s,i,o,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)h.push(r.readInt16());return h}(),this.widths=(function(){var d,h,m,g;for(g=[],d=0,h=(m=this.metrics).length;d<h;d++)i=m[d],g.push(i.advance);return g}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),jM=[].slice,xoe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Uu(e,Lc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,a,s,i,o,l,u,d,h,m;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(l=new gf(n.read(s))).readShort(),d=l.readShort(),m=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[r]=o===-1?new yoe(l,d,m,u,h):new voe(l,o,d,m,u,h),this.cache[r]))},e.prototype.encode=function(r,n,a){var s,i,o,l,u;for(o=[],i=[],l=0,u=n.length;l<u;l++)s=r[n[l]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},e}(),voe=function(){function t(e,r,n,a,s,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),yoe=function(){function t(e,r,n,a,s){var i,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new gf(jM.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),woe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Uu(e,Lc),e.prototype.tag="loca",e.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(s+=u)}for(var d=new Array(4*a.length),h=0;h<a.length;++h)d[4*h+3]=255&a[h],d[4*h+2]=(65280&a[h])>>8,d[4*h+1]=(16711680&a[h])>>16,d[4*h]=(4278190080&a[h])>>24;return d},e}(),boe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,i,o,l;for(a={},i=0,o=e.length;i<o;i++)a[s=e[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,i,o,l,u,d,h,m,g,b,y,E,B;for(a in n=PM.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),g={0:0},B=n.charMap)g[(l=B[a]).old]=l.new;for(b in m=n.maxGlyphID,i)b in g||(g[b]=m++);return d=function(k){var L,M;for(L in M={},k)M[k[L]]=L;return M}(g),h=Object.keys(d).sort(function(k,L){return k-L}),y=function(){var k,L,M;for(M=[],k=0,L=h.length;k<L;k++)o=h[k],M.push(d[o]);return M}(),s=this.font.glyf.encode(i,y,g),u=this.font.loca.encode(s.offsets,y),E={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},t}();or.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,l,u;for(u=[],o=0,l=r.length;o<l;o++)n=r[o],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+r},e}();function OM(t,e,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,l=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*l,d=/\r\n|\r|\n/g,h="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof t=="string"?t.split(d):t,m=h.length||1),r+=o*(2-s),n.valign==="middle"?r-=m/2*u:n.valign==="bottom"&&(r-=m*u),n.halign==="center"||n.halign==="right"){var g=o;if(n.halign==="center"&&(g*=.5),h&&m>=1){for(var b=0;b<h.length;b++)a.text(h[b],e-a.getStringUnitWidth(h[b])*g,r),r+=u;return a}e-=a.getStringUnitWidth(t)*g}return n.halign==="justify"?a.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(t,e,r),a}var DF={},mm=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:DF=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,a,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,a,s){return this.jsPDFDocument.rect(e,r,n,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return DF||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),c5=function(t,e){return c5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},c5(t,e)};function QM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");c5(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var HM=function(t){QM(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function Coe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Eoe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function my(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function VM(t,e,r,n){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var i=zM(a,!1);i&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,i)}function zM(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function jw(t,e){var r,n,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function GM(t,e){var r=jw(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function _oe(t,e,r,n,a){var s={},i=1.3333333333333333,o=cE(e,function(L){return a.getComputedStyle(L).backgroundColor});o!=null&&(s.fillColor=o);var l=cE(e,function(L){return a.getComputedStyle(L).color});l!=null&&(s.textColor=l);var u=Toe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",h=i*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var g=(parseFloat(m)||0)/h;g&&(s.lineWidth=g)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var b=cE(e,function(L){return a.getComputedStyle(L)[d]});b!=null&&(s.lineColor=b);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var E=parseInt(n.fontSize||"");isNaN(E)||(s.fontSize=E/i);var B=Soe(n);B&&(s.fontStyle=B);var k=(n.fontFamily||"").toLowerCase();return t.indexOf(k)!==-1&&(s.font=k),s}function Soe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function cE(t,e){var r=qM(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function qM(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:qM(t.parentElement,e):r}function Toe(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=jw(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function KM(t,e,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],h=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:m};for(var g=0;g<o.rows.length;g++){var b=o.rows[g],y=(i=(s=b==null?void 0:b.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),E=Boe(l,u,r,b,n,a);E&&(y==="thead"?d.push(E):y==="tfoot"?m.push(E):h.push(E))}return{head:d,body:h,foot:m}}function Boe(t,e,r,n,a,s){for(var i=new HM(n),o=0;o<n.cells.length;o++){var l=n.cells[o],u=r.getComputedStyle(l);if(a||u.display!=="none"){var d=void 0;s&&(d=_oe(t,l,e,u,r)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Noe(l)})}}var h=r.getComputedStyle(n);if(i.length>0&&(a||h.display!=="none"))return i}function Noe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function koe(t,e,r){for(var n=0,a=[t,e,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function CA(t,e,r,n,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function $M(t,e){var r=new mm(t),n=r.getDocumentOptions(),a=r.getGlobalOptions();koe(a,n,e);var s=CA({},a,n,e),i;typeof window<"u"&&(i=window);var o=Ioe(a,n,e),l=Foe(a,n,e),u=Doe(r,s),d=Loe(r,s,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function Ioe(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],h=r[l];n.columnStyles=CA({},u,d,h)}else{var m=[t,e,r],g=m.map(function(b){return b[l]||{}});n[l]=CA({},g[0],g[1],g[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function Foe(t,e,r){for(var n=[t,e,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function Doe(t,e){var r,n,a,s,i,o,l,u,d,h,m,g,b=jw(e.margin,40/t.scaleFactor()),y=(r=Roe(t,e.startY))!==null&&r!==void 0?r:b.top,E;e.showFoot===!0?E="everyPage":e.showFoot===!1?E="never":E=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var B;e.showHead===!0?B="everyPage":e.showHead===!1?B="never":B=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var k=(s=e.useCss)!==null&&s!==void 0?s:!1,L=e.theme||(k?"plain":"striped"),M=!!e.horizontalPageBreak,P=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:k,theme:L,startY:y,margin:b,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:B,showFoot:E,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:M,horizontalPageBreakRepeat:P,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function Roe(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),a=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function Loe(t,e,r){var n=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(r){var o=KM(t,e.html,r,i,e.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||Uoe(n,a,s);return{columns:l,head:n,body:a,foot:s}}function Uoe(t,e,r){var n=t[0]||e[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(l>0?"_".concat(l):"");var d={dataKey:u};a.push(d)}}),a}var u5=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),Moe=function(t){QM(e,t);function e(r,n,a,s,i,o){var l=t.call(this,r,n,o)||this;return l.cell=a,l.row=s,l.column=i,l.section=s.section,l}return e}(u5),Poe=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,a,s,i){for(var o=0,l=r;o<l.length;o++){var u=l[o],d=new Moe(e,this,n,a,s,i),h=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new u5(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new u5(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),WM=function(){function t(e,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof HM&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>a?u:a},0)},t}(),XM=function(){function t(e,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=jw(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),joe=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,a=e.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},t}();function Ooe(t,e){Qoe(t,e);var r=[],n=0;e.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(e);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=e.getWidth(t.pageSize().width)-n;a&&(a=A5(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=A5(r,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Voe(e),zoe(e,t),Hoe(e)}function Qoe(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,a=GM(t,e);e.allRows().forEach(function(s){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,s,l,null);var h=u.padding("horizontal");u.contentWidth=my(u.text,u.styles,t)+h;var m=my(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/r;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function A5(t,e,r){for(var n=e,a=t.reduce(function(g,b){return g+b.wrappedWidth},0),s=0;s<t.length;s++){var i=t[s],o=i.wrappedWidth/a,l=n*o,u=i.width+l,d=r(i),h=u<d?d:u;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(g){return e<0?g.width>r(g):!0});m.length&&(e=A5(m,e,r))}return e}function Hoe(t){for(var e={},r=1,n=t.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=e[l.index];if(r>1)r--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var h=n.length-a,m=d.rowSpan>h?h:d.rowSpan;e[l.index]={cell:d,left:m,row:s}}}}}function Voe(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],a=null,s=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])s+=l.width,delete n.cells[l.index];else if(a){var u=a;delete n.cells[l.index],a=null,u.width=l.width+s}else{var u=n.cells[l.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=l.width;continue}u.width=l.width+s}}}function zoe(t,e){for(var r={count:0,height:0},n=0,a=t.allRows();n<a.length;n++){for(var s=a[n],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=RF(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=RF(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,d);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<m*u.rowSpan?r={height:m,count:u.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>s.height&&(s.height=m)}}r.count--}}function RF(t,e,r,n,a){return t.map(function(s){return Goe(s,e,r,n,a)})}function Goe(t,e,r,n,a){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=my(t,r,n))return t;for(;e<my(t+a,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function YM(t,e){var r=new mm(t),n=qoe(e,r.scaleFactor()),a=new Poe(e,n);return Ooe(r,a),r.applyStyles(r.userStyles),a}function qoe(t,e){var r=t.content,n=$oe(r.columns);if(r.head.length===0){var a=LF(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=LF(n,"foot");a&&r.foot.push(a)}var s=t.settings.theme,i=t.styles;return{columns:n,head:uE("head",r.head,n,i,s,e),body:uE("body",r.body,n,i,s,e),foot:uE("foot",r.foot,n,i,s,e)}}function uE(t,e,r,n,a,s){var i={},o=e.map(function(l,u){for(var d=0,h={},m=0,g=0,b=0,y=r;b<y.length;b++){var E=y[b];if(i[E.index]==null||i[E.index].left===0)if(g===0){var B=void 0;Array.isArray(l)?B=l[E.index-m-d]:B=l[E.dataKey];var k={};typeof B=="object"&&!Array.isArray(B)&&(k=(B==null?void 0:B.styles)||{});var L=Woe(t,E,u,a,n,s,k),M=new XM(B,L,t);h[E.dataKey]=M,h[E.index]=M,g=M.colSpan-1,i[E.index]={left:M.rowSpan-1,times:g}}else g--,m++;else i[E.index].left--,g=i[E.index].times,d++}return new WM(l,u,t,h)});return o}function LF(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var a=Koe(e,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Koe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function $oe(t){return t.map(function(e,r){var n,a;return typeof e=="object"?a=(n=e.dataKey)!==null&&n!==void 0?n:r:a=r,new joe(a,e,r)})}function Woe(t,e,r,n,a,s,i){var o=Eoe(n),l;t==="head"?l=a.headStyles:t==="body"?l=a.bodyStyles:t==="foot"&&(l=a.footStyles);var u=CA({},o.table,o[t],a.styles,l),d=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},h=t==="body"?d:{},m=t==="body"&&r%2===0?CA({},o.alternateRow,a.alternateRowStyles):{},g=Coe(s),b=CA({},g,u,m,h);return CA(b,i)}function Xoe(t,e,r){var n;r===void 0&&(r={});var a=GM(t,e),s=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var g=e.columns.find(function(b){return b.dataKey===m||b.index===m});g&&!s.has(g.index)&&(s.set(g.index,!0),i.push(g.index),o.push(e.columns[g.index]),a-=g.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(u||a>=h)u=!1,i.push(d),o.push(e.columns[d]),a-=h;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function Yoe(t,e){for(var r=[],n=0;n<e.columns.length;n++){var a=Xoe(t,e,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function JM(t,e){var r=e.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(m,g){return m+g.height},0);o+=u}var d=new mm(t);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(eP(d),s.y=a.top),e.callWillDrawPageHooks(d,s);var h=CA({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?Joe(d,e,h,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(m){return UA(d,e,m,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(m,g){var b=g===e.body.length-1;py(d,e,m,b,h,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(m){return UA(d,e,m,s,e.columns)})),VM(d,e,h,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function Joe(t,e,r,n){var a=Yoe(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?Ug(t,e,r,n,u.columns,!0):UF(t,e,n,u.columns),Zoe(t,e,r,n,u.columns),AE(t,e,n,u.columns)});else for(var i=-1,o=a[0],l=function(){var u=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?Ug(t,e,r,n,d,!0):UF(t,e,n,d),u=MF(t,e,i+1,n,d),AE(t,e,n,d)}var h=u-i;a.slice(1).forEach(function(m){t.applyStyles(t.userStyles),Ug(t,e,r,n,m.columns,!0),MF(t,e,i+1,n,m.columns,h),AE(t,e,n,m.columns)}),i=u};i<e.body.length-1;)l()}function UF(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return UA(t,e,s,r,n)})}function Zoe(t,e,r,n,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,i){var o=i===e.body.length-1;py(t,e,s,o,r,n,a)})}function MF(t,e,r,n,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var i=Math.min(r+s,e.body.length),o=-1;return e.body.slice(r,i).forEach(function(l,u){var d=r+u===e.body.length-1,h=ZM(t,e,d,n);l.canEntireRowFit(h,a)&&(UA(t,e,l,n,a),o=r+u)}),o}function AE(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return UA(t,e,s,r,n)})}function ele(t,e,r){var n=r.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/n);return Math.max(0,s)}function tle(t,e,r,n){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var l=o[i],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new XM(u.raw,u.styles,u.section);d=CA(d,u),d.text=[];var h=ele(u,e,n);u.text.length>h&&(d.text=u.text.splice(h,u.text.length));var m=n.scaleFactor(),g=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,g),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,g),d.contentHeight>s&&(s=d.contentHeight),a[l.index]=d}}var b=new WM(t.raw,-1,t.section,a,!0);b.height=s;for(var y=0,E=r.columns;y<E.length;y++){var l=E[y],d=b.cells[l.index];d&&(d.height=b.height);var u=t.cells[l.index];u&&(u.height=t.height)}return b}function rle(t,e,r,n){var a=t.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),u=l<r;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),h=e.getMaxCellHeight(n.columns)>o;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function py(t,e,r,n,a,s,i){var o=ZM(t,e,n,s);if(r.canEntireRowFit(o,i))UA(t,e,r,s,i);else if(rle(t,r,o,e)){var l=tle(r,o,e,t);UA(t,e,r,s,i),Ug(t,e,a,s,i),py(t,e,l,n,a,s,i)}else Ug(t,e,a,s,i),py(t,e,r,n,a,s,i)}function UA(t,e,r,n,a){n.x=e.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(u===!1){n.x+=o.width;continue}nle(t,l,n);var d=l.getTextPos();OM(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function nle(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=zM(n.lineWidth,n.fillColor);a&&t.rect(e.x,r.y,e.width,e.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),ale(t,e,r,n.lineWidth))}function ale(t,e,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+e.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+e.height,i=r.x+e.width,o=r.y+e.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,a,s,i,o)),n.right&&(a=r.x+e.width,s=r.y,i=r.x+e.width,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,a,s,i,o));function l(u,d,h,m,g){t.getDocument().setLineWidth(u),t.getDocument().line(d,h,m,g,"S")}}function ZM(t,e,r,n){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-a}function Ug(t,e,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return UA(t,e,o,n,a)}),e.callEndPageHooks(t,n);var i=e.settings.margin;VM(t,e,r,n),eP(t),e.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return UA(t,e,o,n,a)}),t.applyStyles(t.userStyles))}function eP(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function sle(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],a=$M(this,n),s=YM(this,a);return JM(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,a){OM(e,r,n,a,this)},t.API.autoTableSetDefaults=function(e){return mm.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){mm.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new mm(this),s=KM(a,e,window,r,!1),i=s.head,o=s.body,l=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var dE;function al(t,e){var r=$M(t,e),n=YM(t,r);JM(t,n)}try{if(typeof window<"u"&&window){var PF=window,jF=PF.jsPDF||((dE=PF.jspdf)===null||dE===void 0?void 0:dE.jsPDF);jF&&sle(jF)}}catch(t){console.error("Could not apply autoTable plugin",t)}const _4="evaluaciones_pruebas",S4="evaluaciones_rubricas_estaticas",T4="evaluaciones_rubricas_interactivas",ile="usuarios",Ow=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},ole=t=>{const e=er(Ft(Tt,_4),gn("fechaCreacion","desc"));return Tr(e,n=>{t(n.docs.map(a=>Ow(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),t([])})},lle=async t=>{try{const{id:e,...r}=t,n=yr(Tt,_4,e);await $i(n,{...r,fechaCreacion:cr.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la prueba:",e),new Error("No se pudo guardar la prueba.")}},cle=async t=>{try{await mi(yr(Tt,_4,t))}catch(e){throw console.error("Error al eliminar la prueba:",e),new Error("No se pudo eliminar la prueba.")}},ule=t=>{const e=er(Ft(Tt,S4),gn("fechaCreacion","desc"));return Tr(e,n=>{t(n.docs.map(a=>Ow(a)))},n=>{console.error("Error al suscribirse a las rbricas estticas:",n),t([])})},Ale=async t=>{try{const{id:e,...r}=t,n=yr(Tt,S4,e);await $i(n,{...r,fechaCreacion:cr.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la rbrica esttica:",e),new Error("No se pudo guardar la rbrica.")}},dle=async t=>{try{await mi(yr(Tt,S4,t))}catch(e){throw console.error("Error al eliminar la rbrica esttica:",e),new Error("No se pudo eliminar la rbrica.")}},fle=t=>{const e=er(Ft(Tt,T4));return Tr(e,n=>{t(n.docs.map(a=>Ow(a)))},n=>{console.error("Error al suscribirse a las rbricas interactivas:",n),t([])})},hle=async t=>{try{const{id:e,...r}=t,n=yr(Tt,T4,e);await $i(n,r)}catch(e){throw console.error("Error al guardar la rbrica interactiva:",e),new Error("No se pudo guardar la rbrica interactiva.")}},mle=async t=>{try{return(await Ca(Ft(Tt,T4),t)).id}catch(e){throw console.error("Error al crear la rbrica interactiva:",e),new Error("No se pudo crear la rbrica interactiva.")}},ple=t=>{const e=er(Ft(Tt,ile));return Tr(e,n=>{t(n.docs.map(a=>Ow(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),t([])})},gle=["Seleccin mltiple","Verdadero o Falso","Desarrollo","Trminos pareados","Comprensin de lectura"],OF={"Seleccin mltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Trminos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de lectura":[1,2,3]},F2=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},xle=({open:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):c.jsxs(c.Fragment,{children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),vle=({item:t,index:e,showAnswers:r})=>{const n=ee.useMemo(()=>t.tipo==="Trminos pareados"?[...t.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[t]);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Seleccin mltiple"&&c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((a,s)=>{const i=r&&s===t.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),t.tipo==="Desarrollo"&&c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&c.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[c.jsx("span",{children:"V ___ F ___"}),r&&c.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Trminos pareados"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),c.jsx("div",{className:"space-y-2",children:t.pares.map((a,s)=>c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definicin"}),c.jsx("div",{className:"space-y-2",children:n.map((a,s)=>c.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[c.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),c.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((a,s)=>c.jsxs("li",{children:[c.jsx("strong",{children:a.concepto}),"  ",a.definicion]},s))})]})]}),t.tipo==="Comprensin de lectura"&&c.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((a,s)=>{if(a.tipo==="Seleccin mltiple"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=r&&l===i.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},t.id)},yle=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(null),[a,s]=ee.useState(!1),[i,o]=ee.useState(!1),[l,u]=ee.useState(null),[d,h]=ee.useState(!1),m={nombre:"",asignatura:sl[0],nivel:oy[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[g,b]=ee.useState(m);ee.useEffect(()=>{const C=ole(e);return()=>C()},[]);const y=C=>{const{name:S,value:N}=C.target;b(Q=>({...Q,[S]:N}))},E=C=>{b(S=>{const N={...S.tiposActividad};return N[C]?delete N[C]:N[C]=OF[C][0],{...S,tiposActividad:N}})},B=(C,S)=>{b(N=>({...N,tiposActividad:{...N.tiposActividad,[C]:S}}))},k=C=>{b(S=>{const N=S.selectedNee.includes(C)?S.selectedNee.filter(Q=>Q!==C):[...S.selectedNee,C];return{...S,selectedNee:N}})},L=async C=>{if(C.preventDefault(),!g.nombre.trim()||!g.contenido.trim()||Object.keys(g.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const S=Object.entries(g.tiposActividad).map(([D,I])=>`- ${I} tem(s) de tipo '${D}'`).join(`
`),N=g.isNee&&g.selectedNee.length>0?`
            **Adaptacin CRTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes caractersticas: ${g.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negacin o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes ms pequeas si es posible.
            - Para 'Comprensin de Lectura', usa textos ms cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Seleccin Mltiple', asegrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",Q=`
            Eres un experto en evaluacin educativa para la educacin media en Chile.
            Genera una prueba o gua de trabajo completa en formato JSON estructurado.
            
            Informacin base:
            - Nombre de la prueba: ${g.nombre}
            - Asignatura: ${g.asignatura}
            - Nivel: ${g.nivel}
            - Contenido a evaluar: "${g.contenido}"
            - Tipos y cantidad de tems solicitados:
              ${S}
            - Nivel de Dificultad General: ${g.dificultad}. 'Fcil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicacin y anlisis simple. 'Avanzado' requiere sntesis, evaluacin y resolucin de problemas complejos.
            
            ${N}

            Tu respuesta DEBE ser un nico objeto JSON que contenga:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluacin.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de tem solicitado. Cada actividad debe tener:
               - 'id': Un UUID.
               - 'titulo': Un ttulo descriptivo (ej: "Actividad 1: Seleccin Mltiple").
               - 'instrucciones': Instrucciones para esa actividad especfica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID.
                   - 'tipo': El tipo de tem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numrico.
                   - 'habilidadBloom': La habilidad principal de la Taxonoma de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales segn el tipo:
                       - Para 'Seleccin mltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (ndice numrico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Trminos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensin de lectura': 'texto' (string con el texto) y 'preguntas' (un array de sub-preguntas que pueden ser 'Seleccin mltiple' o 'Desarrollo', y cada una debe tener tambin 'habilidadBloom').
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{Kl("Evaluacin - Pruebas");const D="",ae=(await(await new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro"}).generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(ae);let G=0;K.actividades.forEach(ie=>{ie.items.forEach(j=>{G+=j.puntaje||0,j.tipo==="Comprensin de lectura"&&j.preguntas.forEach(X=>{G+=X.puntaje||0})})});const W={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:g.nombre,asignatura:g.asignatura,nivel:g.nivel,contenidoOriginal:g.contenido,tiposActividadOriginal:g.tiposActividad,objetivo:K.objetivo,instruccionesGenerales:K.instruccionesGenerales,puntajeIdeal:G,actividades:K.actividades,dificultad:g.dificultad,adaptacionNEE:g.isNee?g.selectedNee:void 0};n(W),h(!1)}catch(D){console.error(D),u("Error al generar la prueba con IA. Intntelo de nuevo.")}finally{s(!1)}},M=async()=>{if(r)try{await lle(r),alert("Prueba guardada con xito.")}catch(C){console.error(C),alert("No se pudo guardar la prueba.")}},P=async C=>{if(window.confirm("Eliminar esta prueba?"))try{await cle(C),(r==null?void 0:r.id)===C&&n(null)}catch(S){console.error(S),alert("No se pudo eliminar la prueba.")}},R=async C=>{o(!0);const S=new or("p","mm","a4"),N=20,Q=S.internal.pageSize.getHeight(),D=S.internal.pageSize.getWidth(),I=D-N*2;let O=N;const z=ae=>{ae.setFillColor(230,230,230),ae.rect(0,0,D,25,"F"),ae.setFontSize(9),ae.setTextColor(0,0,0),ae.text("LICEO INDUSTRIAL DE RECOLETA",N,15,{align:"left"}),ae.text("SUBDIRECCIN DE GESTIN PEDAGGICA",D-N,15,{align:"right"})};z(S),O=30,S.setTextColor(0,0,0),S.setFont("helvetica","bold"),S.setFontSize(16),S.text(C.nombre,D/2,O,{align:"center"}),O+=10,al(S,{startY:O,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},C.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},C.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},C.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:C.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:C.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:ae=>{z(S)}}),O=S.lastAutoTable.finalY+10;const re=ae=>{O+ae>Q-N&&(S.addPage(),z(S),O=N+15,S.setTextColor(0,0,0))},Y=(ae,K)=>{S.setFont("helvetica",K.isBold?"bold":"normal"),S.setFontSize(K.fontSize);const G=Array.isArray(ae)?ae.join(`
`):ae;return S.getTextDimensions(G,{maxWidth:K.width}).h};for(const ae of C.actividades){let K=Y(ae.titulo,{fontSize:12,width:I,isBold:!0})+Y(ae.instrucciones,{fontSize:10,width:I})+12;re(K),S.setFont("helvetica","bold"),S.setFontSize(12),S.setTextColor(0,0,0),S.text(ae.titulo,N,O),O+=8,S.setFont("helvetica","normal"),S.setFontSize(10);const G=S.splitTextToSize(ae.instrucciones,I);S.text(G,N,O),O+=G.length*(10*.35*1.15)+4;for(const[W,ie]of ae.items.entries()){let j=0;const X=`${W+1}. ${ie.pregunta} (${ie.puntaje} pts)`;switch(j+=Y(X,{fontSize:10,width:I,isBold:!0}),ie.tipo){case"Seleccin mltiple":ie.opciones.forEach(ce=>{j+=Y(ce,{fontSize:10,width:I-5})+3}),j+=7;break;case"Verdadero o Falso":j+=10;break;case"Desarrollo":j+=30;break;case"Trminos pareados":j+=ie.pares.length*12+20;break;case"Comprensin de lectura":const te=ie;j+=Y(te.texto,{fontSize:10,width:I-10})+10,te.preguntas.forEach(ce=>{const de=`${ce.pregunta} (${ce.puntaje} pts)`;j+=Y(de,{fontSize:10,width:I-5,isBold:!0}),ce.tipo==="Seleccin mltiple"?(ce.opciones.forEach(me=>{j+=Y(me,{fontSize:10,width:I-10})+3}),j+=7):ce.tipo==="Desarrollo"&&(j+=30),j+=5}),j+=15;break}re(j),S.setFont("helvetica","bold"),S.setFontSize(10),S.setTextColor(0,0,0);const Z=S.splitTextToSize(X,I);if(S.text(Z,N,O),O+=Z.length*5+4,S.setFont("helvetica","normal"),ie.tipo==="Seleccin mltiple")ie.opciones.forEach((te,ce)=>{S.text(`${String.fromCharCode(65+ce)}) ${te}`,N+5,O),O+=7});else if(ie.tipo==="Verdadero o Falso")S.text("V ______    F ______",N+5,O),O+=10;else if(ie.tipo==="Desarrollo")S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(N,O,I,25,"FD"),O+=30;else if(ie.tipo==="Trminos pareados"){const te=[...ie.pares.map(de=>de.definicion)].sort(()=>Math.random()-.5),ce=ie.pares.map((de,me)=>[`${me+1}. ${de.concepto}`,`(   ) ${te[me]}`]);al(S,{startY:O,head:[["Columna A: Concepto","Columna B: Definicin"]],body:ce,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:de=>z(S)}),O=S.lastAutoTable.finalY+10}else if(ie.tipo==="Comprensin de lectura"){const te=ie;S.setFillColor(240,240,240),S.setDrawColor(200,200,200);const ce=S.splitTextToSize(te.texto,I-10),de=ce.length*(10*.35*1.15)+8;S.rect(N,O,I,de,"FD"),O+=4,S.setFont("helvetica","normal"),S.setFontSize(10),S.setTextColor(0,0,0),S.text(ce,N+5,O),O+=de;for(const[me,ge]of te.preguntas.entries()){const Te=`${me+1}. ${ge.pregunta} (${ge.puntaje} pts)`;S.setFont("helvetica","bold");const xe=S.splitTextToSize(Te,I-5);S.text(xe,N+5,O),O+=xe.length*5+4,S.setFont("helvetica","normal"),ge.tipo==="Seleccin mltiple"?ge.opciones.forEach((oe,Me)=>{S.text(`${String.fromCharCode(65+Me)}) ${oe}`,N+10,O),O+=7}):ge.tipo==="Desarrollo"&&(S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(N+5,O,I-5,25,"FD"),O+=30)}}O+=5}}S.save(`${C.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>h(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[c.jsx(xle,{open:!d})," ",c.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),c.jsx("button",{onClick:M,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),c.jsxs("button",{onClick:()=>R(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":c.jsx(R8,{})," PDF"]})]})]}),c.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),c.jsx("span",{children:"SUBDIRECCIN DE GESTIN PEDAGGICA"})]}),c.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),c.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),c.jsxs("p",{className:"text-right",children:[c.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[c.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&c.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(C=>c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:C.titulo}),c.jsx("p",{className:"italic text-sm mb-4",children:C.instrucciones}),c.jsx("div",{className:"space-y-6",children:C.items.map((S,N)=>c.jsx(vle,{item:S,index:N,showAnswers:d},S.id))})]},C.id))]})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Gua"}),c.jsxs("form",{onSubmit:L,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Gua ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombre",value:g.nombre,onChange:y,placeholder:"Ej: Gua N1 - La Clula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),c.jsx("div",{}),c.jsx("select",{name:"asignatura",value:g.asignatura,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:sl.map(C=>c.jsx("option",{children:C},C))}),c.jsx("select",{name:"nivel",value:g.nivel,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:oy.map(C=>c.jsx("option",{children:C},C))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),c.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fcil","Intermedio","Avanzado"].map((C,S)=>c.jsx("button",{type:"button",onClick:()=>b(N=>({...N,dificultad:C})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${S===0?"rounded-l-lg":""} ${S===2?"rounded-r-lg":""}
                                            ${g.dificultad===C?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:C},C))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:g.isNee,onChange:C=>b(S=>({...S,isNee:C.target.checked,selectedNee:C.target.checked?S.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),g.isNee&&c.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:ly.map(C=>c.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:g.selectedNee.includes(C),onChange:()=>k(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:C})]},C))})]})]})]}),c.jsx("textarea",{name:"contenido",value:g.contenido,onChange:y,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"space-y-3",children:gle.map(C=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:!!g.tiposActividad[C],onChange:()=>E(C),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:C})]}),g.tiposActividad[C]&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),OF[C].map(S=>c.jsx("button",{type:"button",onClick:()=>B(C,S),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${g.tiposActividad[C]===S?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:S},S))]})]},C))}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),c.jsx("div",{className:"space-y-2",children:t.length>0?t.map(C=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[C.asignatura," - ",C.nivel," (",new Date(C.fechaCreacion).toLocaleDateString(),")"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n(C),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),c.jsx("button",{onClick:()=>P(C.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},C.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},wle=({rubricas:t,onSave:e,onDelete:r,onCreate:n})=>{const[a,s]=ee.useState(null),[i,o]=ee.useState("list"),[l,u]=ee.useState(!1),[d,h]=ee.useState(""),m=async(P,R)=>{if(!P.trim()||!R.trim()){alert("El ttulo y la descripcin son obligatorios.");return}u(!0);const C=`Crea una rbrica de evaluacin detallada sobre "${P}" con el propsito de "${R}". Genera entre 3 y 5 dimensiones de evaluacin. Para cada dimensin, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado.`,S={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{Kl("Evaluacin - Rbricas");const N="",re=(await(await new globalThis.GoogleGenerativeAI(N).getGenerativeModel({model:"gemini-pro"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(re),ae={id:crypto.randomUUID(),titulo:P,descripcion:R,fechaCreacion:new Date().toISOString(),dimensiones:Y.map(K=>({id:crypto.randomUUID(),nombre:K.dimension,niveles:{insuficiente:K.insuficiente,suficiente:K.suficiente,competente:K.competente,avanzado:K.avanzado}}))};s(ae)}catch(N){console.error(N),alert("Error al generar la rbrica con IA.")}finally{u(!1)}},g=async()=>{if(!d.trim()||!a)return;const P=crypto.randomUUID(),R={id:P,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(N=>N?{...N,dimensiones:[...N.dimensiones,R]}:null),h("");const C=`Para una rbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensin: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(N=>N.nombre).join(", ")}.`,S={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{Kl("Evaluacin - Rbricas (Aadir Dimensin)");const N="",re=(await(await new globalThis.GoogleGenerativeAI(N).getGenerativeModel({model:"gemini-pro"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(re);s(ae=>ae?{...ae,dimensiones:ae.dimensiones.map(K=>K.id===P?{...K,niveles:Y,isLoading:!1}:K)}:null)}catch(N){console.error("Error generating dimension descriptors:",N),alert("No se pudieron generar los descriptores."),s(Q=>Q?{...Q,dimensiones:Q.dimensiones.filter(D=>D.id!==P)}:null)}},b=()=>{if(!a)return;t.some(R=>R.id===a.id)?e(a):n(a),o("list"),s(null)},y=P=>{s(P),o("form")},E=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},B=(P,R,C)=>{a&&s(S=>S?{...S,dimensiones:S.dimensiones.map(N=>N.id!==P?N:R==="nombre"?{...N,nombre:C}:{...N,niveles:{...N.niveles,[R]:C}})}:null)},k=(P,R)=>{s(C=>C?{...C,[P]:R}:null)},L=P=>{a&&s(R=>R?{...R,dimensiones:R.dimensiones.filter(C=>C.id!==P)}:null)},M=()=>{if(!a)return null;const P="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",R=`${P} resize-none text-sm`;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rbrica de Aprendizaje"}),c.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la Rbrica"}),c.jsx("input",{value:a.titulo,onChange:C=>k("titulo",C.target.value),placeholder:"Ej. Rbrica de Presentaciones Orales",className:`${P} mt-1`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin de la Rbrica"}),c.jsx("textarea",{value:a.descripcion,onChange:C=>k("descripcion",C.target.value),placeholder:"Describe el propsito y los criterios de evaluacin de esta rbrica.",rows:3,className:`${P} mt-1`})]})]}),a.dimensiones.length===0&&c.jsx("div",{className:"text-center py-4",children:c.jsx("button",{onClick:()=>m(a.titulo,a.descripcion),disabled:l||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":" Generar Rbrica con IA"})}),a.dimensiones.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Dimensin","Insuficiente","Suficiente","Competente","Avanzado",""].map(C=>c.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:C},C))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(C=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 w-1/5",children:c.jsx("textarea",{value:C.nombre,onChange:S=>B(C.id,"nombre",S.target.value),rows:4,className:R})}),Object.keys(C.niveles).map(S=>c.jsx("td",{className:"p-2 w-1/5",children:C.isLoading?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):c.jsx("textarea",{value:C.niveles[S],onChange:N=>B(C.id,S,N.target.value),rows:4,className:R})},S)),c.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:c.jsx("button",{onClick:()=>L(C.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:""})})]},C.id))})]})}),c.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-sm font-medium",children:"Aadir Dimensin"}),c.jsx("input",{value:d,onChange:C=>h(C.target.value),placeholder:"Escribe el nombre de la nueva dimensin...",className:`${P} mt-1`})]}),c.jsx("button",{onClick:g,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),c.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:c.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rbrica"})})]})};return i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rbricas"}),c.jsx("button",{onClick:E,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(P=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:P.titulo}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:P.descripcion})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>y(P),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>r(P.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},P.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rbricas guardadas."})]}):M()},ble=({allUsers:t,rubricasEstaticas:e})=>{const[r,n]=ee.useState([]),[a,s]=ee.useState(null),[i,o]=ee.useState(null),[l,u]=ee.useState({rubricaEstaticaId:"",curso:""}),[d,h]=ee.useState(null);ee.useEffect(()=>{const k=fle(n);return()=>k()},[]);const m=async k=>{k.preventDefault();const L=e.find(P=>P.id===l.rubricaEstaticaId);if(!L||!l.curso){alert("Debe seleccionar una rbrica y un curso.");return}const M={nombre:L.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:L.id,resultados:{}};try{await mle(M),u({rubricaEstaticaId:"",curso:""})}catch(P){console.error(P),alert("No se pudo crear la evaluacin con rbrica.")}},g=k=>{s(k),o(JSON.parse(JSON.stringify(k)))},b=(k,L,M)=>{i&&o(P=>{if(!P)return null;const R=JSON.parse(JSON.stringify(P));return R.resultados[k]||(R.resultados[k]={puntajes:{},feedback:""}),R.resultados[k].puntajes[L]=M,R})},y=async()=>{if(i)try{await hle(i),s(i),alert("Cambios guardados.")}catch(k){console.error(k),alert("No se pudieron guardar los cambios.")}},E=ee.useCallback(k=>{const L=i,M=e.find(Q=>Q.id===(L==null?void 0:L.rubricaEstaticaId));if(!L||!M)return{score:0,maxScore:0,grade:"N/A"};const P=M.dimensiones.length*4,R=L.resultados[k];if(!R)return{score:0,maxScore:P,grade:"1.0"};const C=Object.values(R.puntajes).reduce((Q,D)=>Q+D,0),S=1+6*(C/P),N=P>0?S.toFixed(1):"1.0";return{score:C,maxScore:P,grade:N}},[i,e]),B=async k=>{if(!i)return;const L=e.find(C=>C.id===i.rubricaEstaticaId),M=i.resultados[k];if(!L||!M||Object.keys(M.puntajes).length===0)return;h(k);const R=`Genera una retroalimentacin constructiva para un estudiante basada en estos puntajes de rbrica (de 1 a 4): ${L.dimensiones.map(C=>`${C.nombre}: ${M.puntajes[C.nombre]||"N/A"}/4`).join("; ")}. Destaca fortalezas y sugiere 1-2 reas de mejora concretas. S breve y motivador.`;try{Kl("Evaluacin - Rbricas Interactivas (Feedback)");const C="",I=(await(await new globalThis.GoogleGenerativeAI(C).getGenerativeModel({model:"gemini-pro"}).generateContent(R)).response).text();o(O=>{if(!O)return null;const z=JSON.parse(JSON.stringify(O));return z.resultados[k].feedback=I.replace(/(\*\*|\*)/g,""),z})}catch(C){console.error(C),alert("Error al generar feedback.")}finally{h(null)}};if(a&&i){const k=e.find(M=>M.id===a.rubricaEstaticaId),L=t.filter(M=>M.profile===Vt.ESTUDIANTE&&F2(M.curso||"")===a.curso).map(M=>M.nombreCompleto).sort();return k?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),c.jsx("p",{className:"text-slate-500",children:a.curso})]}),c.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:" Volver"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),k.dimensiones.map(M=>c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:M.nombre},M.id)),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentacin"})]})}),c.jsx("tbody",{children:L.map(M=>{var S;const{score:P,maxScore:R,grade:C}=E(M);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:M}),k.dimensiones.map(N=>c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:c.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(Q=>{var D;return c.jsx("button",{onClick:()=>b(M,N.nombre,Q),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((D=i.resultados[M])==null?void 0:D.puntajes[N.nombre])===Q?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:Q},Q)})})},N.id)),c.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[P,"/",R]}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:C}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[c.jsx("p",{className:"text-xs w-full",children:((S=i.resultados[M])==null?void 0:S.feedback)||"Sin generar"}),c.jsx("button",{onClick:()=>B(M),disabled:d===M,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===M?"...":"Generar IA"})]})})]},M)})})]})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):c.jsxs("div",{children:["Error: Rbrica base no encontrada. ",c.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluacin con Rbrica"}),c.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsxs("select",{value:l.rubricaEstaticaId,onChange:k=>u({...l,rubricaEstaticaId:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una Rbrica Guardada"}),e.map(k=>c.jsx("option",{value:k.id,children:k.titulo},k.id))]}),c.jsxs("select",{value:l.curso,onChange:k=>u({...l,curso:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un Curso"}),ls.map(k=>c.jsx("option",{value:k,children:k},k))]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluacin"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),c.jsx("div",{className:"space-y-2",children:r.map(k=>c.jsxs("button",{onClick:()=>g(k),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[c.jsx("p",{className:"font-semibold",children:k.nombre}),c.jsx("p",{className:"text-sm text-slate-500",children:k.curso})]},k.id))})]})]})},Cle=({allUsers:t})=>{const[e,r]=ee.useState(""),n=ee.useMemo(()=>Array.from(new Set(t.filter(s=>s.profile===Vt.ESTUDIANTE&&s.curso).map(s=>F2(s.curso)))).sort(),[t]),a=ee.useMemo(()=>{const s=t.filter(i=>i.profile===Vt.ESTUDIANTE);return e?s.filter(i=>F2(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nminas de Cursos"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el mdulo de ",c.jsx("strong",{className:"font-semibold",children:"Administracin"}),"."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),c.jsxs("select",{id:"curso-filter",value:e,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>c.jsx("option",{value:s,children:s},s))]})]}),c.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:F2(s.curso||"")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},Ele=()=>{const[t,e]=ee.useState("pruebas"),[r,n]=ee.useState([]),[a,s]=ee.useState([]),[i,o]=ee.useState(!0);ee.useEffect(()=>{o(!0);const h=ple(n),m=ule(g=>{s(g),o(!1)});return()=>{h(),m()}},[]);const l=async h=>{try{await Ale(h)}catch(m){console.error(m),alert("No se pudo guardar la rbrica.")}},u=async h=>{try{await dle(h)}catch(m){console.error(m),alert("No se pudo eliminar la rbrica.")}},d=({tabName:h,label:m})=>c.jsx("button",{onClick:()=>e(h),className:`${t===h?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:m});return i?c.jsx("div",{className:"text-center py-10",children:"Cargando mdulo de evaluaciones..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluacin de Aprendizajes"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(d,{tabName:"pruebas",label:"Pruebas y Guas"}),c.jsx(d,{tabName:"rubricas",label:"Generador de Rbricas"}),c.jsx(d,{tabName:"rubricasInteractivas",label:"Rbricas Interactivas"}),c.jsx(d,{tabName:"nominas",label:"Gestin de Nminas"})]})}),c.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&c.jsx(yle,{}),t==="rubricas"&&c.jsx(wle,{rubricas:a,onSave:l,onDelete:u,onCreate:l}),t==="rubricasInteractivas"&&c.jsx(ble,{allUsers:r,rubricasEstaticas:a}),t==="nominas"&&c.jsx(Cle,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var gy={};gy.version="0.18.5";var tP=1252,_le=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],B4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},N4=function(t){_le.indexOf(t)!=-1&&(tP=B4[0]=t)};function Sle(){N4(1252)}var Tc=function(t){N4(t)};function k4(){Tc(1200),Sle()}function QF(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function Tle(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function rP(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var hg=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Tle(t.slice(2)):e==254&&r==255?rP(t.slice(2)):e==65279?t.slice(1):t},_v=function(e){return String.fromCharCode(e)},HF=function(e){return String.fromCharCode(e)},lx,qd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function cx(t){for(var e="",r=0,n=0,a=0,s=0,i=0,o=0,l=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,a=t.charCodeAt(u++),o=(n&15)<<2|a>>6,l=a&63,isNaN(n)?o=l=64:isNaN(a)&&(l=64),e+=qd.charAt(s)+qd.charAt(i)+qd.charAt(o)+qd.charAt(l);return e}function il(t){var e="",r=0,n=0,a=0,s=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=qd.indexOf(t.charAt(u++)),i=qd.indexOf(t.charAt(u++)),r=s<<2|i>>4,e+=String.fromCharCode(r),o=qd.indexOf(t.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=qd.indexOf(t.charAt(u++)),a=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(a));return e}var Yr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),zA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function xf(t){return Yr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function VF(t){return Yr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var el=function(e){return Yr?zA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Qw(t){if(typeof ArrayBuffer>"u")return el(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Sf(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function Ble(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function I4(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return I4(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Ys=Yr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:zA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Nle(t){for(var e=[],r=0,n=t.length+250,a=xf(t.length+255),s=0;s<t.length;++s){var i=t.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(e.push(a.slice(0,r)),r=0,a=xf(65535),n=65530)}return e.push(a.slice(0,r)),Ys(e)}var so=/\u0000/g,mg=/[\u0001-\u0006]/g;function pm(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Bc(t,e){var r=""+t;return r.length>=e?r:Va("0",e-r.length)+r}function F4(t,e){var r=""+t;return r.length>=e?r:Va(" ",e-r.length)+r}function xy(t,e){var r=""+t;return r.length>=e?r:r+Va(" ",e-r.length)}function kle(t,e){var r=""+Math.round(t);return r.length>=e?r:Va("0",e-r.length)+r}function Ile(t,e){var r=""+t;return r.length>=e?r:Va("0",e-r.length)+r}var zF=Math.pow(2,32);function S0(t,e){if(t>zF||t<-zF)return kle(t,e);var r=Math.round(t);return Ile(r,e)}function vy(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var GF=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],fE=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Fle(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var vr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},qF={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Dle={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function yy(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,i=1,o=0,l=1,u=0,d=0,h=Math.floor(a);u<e&&(h=Math.floor(a),o=h*i+s,d=h*u+l,!(a-h<5e-8));)a=1/(a-h),s=i,i=o,l=u,u=d;if(d>e&&(u>e?(d=l,o=s):(d=u,o=i)),!r)return[0,n*o,d];var m=Math.floor(n*o/d);return[m,n*o-m*d,d]}function lh(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,i=[],o={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=jle(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var nP=new Date(1899,11,31,0,0,0),Rle=nP.getTime(),Lle=new Date(1900,2,1,0,0,0);function aP(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=Lle&&(r+=1440*60*1e3),(r-(Rle+(t.getTimezoneOffset()-nP.getTimezoneOffset())*6e4))/(1440*60*1e3)}function D4(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Ule(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Mle(t){var e=t<0?12:11,r=D4(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function Ple(t){var e=D4(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function ux(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=Mle(t):e===10?r=t.toFixed(10).substr(0,12):r=Ple(t),D4(Ule(r.toUpperCase()))}function Bh(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):ux(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return $l(14,aP(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function jle(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function Ole(t,e,r,n){var a="",s=0,i=0,o=r.y,l,u=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,u=e.length;break;case 3:return fE[r.m-1][1];case 5:return fE[r.m-1][0];default:return fE[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,u=e.length;break;case 3:return GF[r.q][0];default:return GF[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Bc(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),e==="s"?s===0?"0":""+s/i:(a=Bc(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?Bc(l,u):"";return d}function Kd(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var sP=/%/g;function Qle(t,e,r){var n=e.replace(sP,""),a=e.length-n.length;return BA(t,n,r*Math.pow(10,2*a))+Va("%",a)}function Hle(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return BA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function iP(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+iP(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var oP=/# (\?+)( ?)\/( ?)(\d+)/;function Vle(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Va(" ",t[1].length+1+t[4].length):F4(i,t[1].length)+t[2]+"/"+t[3]+Bc(o,t[4].length))}function zle(t,e,r){return r+(e===0?"":""+e)+Va(" ",t[1].length+2+t[4].length)}var lP=/^#*0*\.([0#]+)/,cP=/\).*[0#]/,uP=/\(###\) ###\\?-####/;function to(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function KF(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function $F(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Gle(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function qle(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Fl(t,e,r){if(t.charCodeAt(0)===40&&!e.match(cP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Fl("n",n,r):"("+Fl("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Hle(t,e,r);if(e.indexOf("%")!==-1)return Qle(t,e,r);if(e.indexOf("E")!==-1)return iP(e,r);if(e.charCodeAt(0)===36)return"$"+Fl(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+S0(l,e.length);if(e.match(/^[#?]+$/))return a=S0(r,0),a==="0"&&(a=""),a.length>e.length?a:to(e.substr(0,e.length-a.length))+a;if(s=e.match(oP))return Vle(s,l,u);if(e.match(/^#+0+$/))return u+S0(l,e.length-e.indexOf("0"));if(s=e.match(lP))return a=KF(r,s[1].length).replace(/^([^\.]+)$/,"$1."+to(s[1])).replace(/\.$/,"."+to(s[1])).replace(/\.(\d*)$/,function(b,y){return"."+y+Va("0",to(s[1]).length-y.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+KF(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Kd(S0(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Fl(t,e,-r):Kd(""+(Math.floor(r)+Gle(r,s[1].length)))+"."+Bc($F(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Fl(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=pm(Fl(t,e.replace(/[\\-]/g,""),r)),i=0,pm(pm(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<a.length?a.charAt(i++):b==="0"?"0":""}));if(e.match(uP))return a=Fl(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=yy(l,Math.pow(10,i)-1,!1),a=""+u,d=BA("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=xy(o[2],i),d.length<s[4].length&&(d=to(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=yy(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?F4(o[1],i)+s[2]+"/"+s[3]+xy(o[2],i):Va(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=S0(r,0),e.length<=a.length?a:to(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var h=e.indexOf(".")-i,m=e.length-a.length-h;return to(e.substr(0,h)+a+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return i=$F(r,s[1].length),r<0?"-"+Fl(t,e,-r):Kd(qle(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Bc(0,3-b.length):"")+b})+"."+Bc(i,s[1].length);switch(e){case"###,##0.00":return Fl(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Kd(S0(l,0));return g!=="0"?u+g:"";case"###,###.00":return Fl(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Fl(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Kle(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return BA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function $le(t,e,r){var n=e.replace(sP,""),a=e.length-n.length;return BA(t,n,r*Math.pow(10,2*a))+Va("%",a)}function AP(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+AP(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function xu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(cP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?xu("n",n,r):"("+xu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Kle(t,e,r);if(e.indexOf("%")!==-1)return $le(t,e,r);if(e.indexOf("E")!==-1)return AP(e,r);if(e.charCodeAt(0)===36)return"$"+xu(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Bc(l,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:to(e.substr(0,e.length-a.length))+a;if(s=e.match(oP))return zle(s,l,u);if(e.match(/^#+0+$/))return u+Bc(l,e.length-e.indexOf("0"));if(s=e.match(lP))return a=(""+r).replace(/^([^\.]+)$/,"$1."+to(s[1])).replace(/\.$/,"."+to(s[1])),a=a.replace(/\.(\d*)$/,function(b,y){return"."+y+Va("0",to(s[1]).length-y.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Kd(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+xu(t,e,-r):Kd(""+r)+"."+Va("0",s[1].length);if(s=e.match(/^#,#*,#0/))return xu(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=pm(xu(t,e.replace(/[\\-]/g,""),r)),i=0,pm(pm(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<a.length?a.charAt(i++):b==="0"?"0":""}));if(e.match(uP))return a=xu(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=yy(l,Math.pow(10,i)-1,!1),a=""+u,d=BA("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=xy(o[2],i),d.length<s[4].length&&(d=to(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=yy(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?F4(o[1],i)+s[2]+"/"+s[3]+xy(o[2],i):Va(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:to(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var h=e.indexOf(".")-i,m=e.length-a.length-h;return to(e.substr(0,h)+a+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+xu(t,e,-r):Kd(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Bc(0,3-b.length):"")+b})+"."+Bc(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=Kd(""+l);return g!=="0"?u+g:"";default:if(e.match(/\.[0#?]*$/))return xu(t,e.slice(0,e.lastIndexOf(".")),r)+to(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function BA(t,e,r){return(r|0)===r?xu(t,e,r):Fl(t,e,r)}function Wle(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var dP=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ep(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":vy(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(dP))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Xle(t,e,r,n){for(var a=[],s="",i=0,o="",l="t",u,d,h,m="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!vy(t,i))throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(h=t.charCodeAt(++i))!==34&&i<t.length;)s+=String.fromCharCode(h);a[a.length]={t:"t",v:s},++i;break;case"\\":var g=t.charAt(++i),b=g==="("||g===")"?g:"t";a[a.length]={t:b,v:g},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=lh(e,r,t.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=lh(e,r),u==null))return"";for(s=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),a[a.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(u==null&&(u=lh(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",m="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,m="h"):t.substr(i,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",i+=5,m="h"):(y.t="t",++i),u==null&&y.t==="T")return"";a[a.length]=y,l=o;break;case"[":for(s=o;t.charAt(i++)!=="]"&&i<t.length;)s+=t.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(dP)){if(u==null&&(u=lh(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",ep(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<t.length&&(o=t.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)s+=t.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"t",v:o},++i;break}var E=0,B=0,k;for(i=a.length-1,l="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=m,l="h",E<1&&(E=1);break;case"s":(k=a[i].v.match(/\.0+$/))&&(B=Math.max(B,k[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":l=a[i].t;break;case"m":l==="s"&&(a[i].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&a[i].v.match(/[Hh]/)&&(E=1),E<2&&a[i].v.match(/[Mm]/)&&(E=2),E<3&&a[i].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var L="",M;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=Ole(a[i].t.charCodeAt(0),a[i].v,u,B),a[i].t="t";break;case"n":case"?":for(M=i+1;a[M]!=null&&((o=a[M].t)==="?"||o==="D"||(o===" "||o==="t")&&a[M+1]!=null&&(a[M+1].t==="?"||a[M+1].t==="t"&&a[M+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[M].v==="/"||a[M].v===" "&&a[M+1]!=null&&a[M+1].t=="?"));)a[i].v+=a[M].v,a[M]={v:"",t:";"},++M;L+=a[i].v,i=M-1;break;case"G":a[i].t="t",a[i].v=Bh(e,r);break}var P="",R,C;if(L.length>0){L.charCodeAt(0)==40?(R=e<0&&L.charCodeAt(0)===45?-e:e,C=BA("n",L,R)):(R=e<0&&n>1?-e:e,C=BA("n",L,R),R<0&&a[0]&&a[0].t=="t"&&(C=C.substr(1),a[0].v="-"+a[0].v)),M=C.length-1;var S=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){S=i;break}var N=a.length;if(S===a.length&&C.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(M>=a[i].v.length-1?(M-=a[i].v.length,a[i].v=C.substr(M+1,a[i].v.length)):M<0?a[i].v="":(a[i].v=C.substr(0,M+1),M=-1),a[i].t="t",N=i);M>=0&&N<a.length&&(a[N].v=C.substr(0,M+1)+a[N].v)}else if(S!==a.length&&C.indexOf("E")===-1){for(M=C.indexOf(".")-1,i=S;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===S?a[i].v.indexOf(".")-1:a[i].v.length-1,P=a[i].v.substr(d+1);d>=0;--d)M>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(P=C.charAt(M--)+P);a[i].v=P,a[i].t="t",N=i}for(M>=0&&N<a.length&&(a[N].v=C.substr(0,M+1)+a[N].v),M=C.indexOf(".")+1,i=S;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==S)){for(d=a[i].v.indexOf(".")>-1&&i===S?a[i].v.indexOf(".")+1:0,P=a[i].v.substr(0,d);d<a[i].v.length;++d)M<C.length&&(P+=C.charAt(M++));a[i].v=P,a[i].t="t",N=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(R=n>1&&e<0&&i>0&&a[i-1].v==="-"?-e:e,a[i].v=BA(a[i].t,a[i].v,R),a[i].t="t");var Q="";for(i=0;i!==a.length;++i)a[i]!=null&&(Q+=a[i].v);return Q}var WF=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function XF(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function Yle(t,e){var r=Wle(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(WF),o=r[1].match(WF);return XF(e,i)?[n,r[0]]:XF(e,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function $l(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:vr)[t],n==null&&(n=r.table&&r.table[qF[t]]||vr[qF[t]]),n==null&&(n=Dle[t]||"General");break}if(vy(n,0))return Bh(e,r);e instanceof Date&&(e=aP(e,r.date1904));var a=Yle(n,e);if(vy(a[1]))return Bh(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Xle(a[1],e,r,a[0])}function NA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(vr[r]==null){e<0&&(e=r);continue}if(vr[r]==t){e=r;break}}e<0&&(e=391)}return vr[e]=t,e}function Hw(t){for(var e=0;e!=392;++e)t[e]!==void 0&&NA(t[e],e)}function tp(){vr=Fle()}var Jle={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},fP=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Zle(t){var e=typeof t=="number"?vr[t]:t;return e=e.replace(fP,"(\\d+)"),new RegExp("^"+e+"$")}function ece(t,e,r){var n=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(e.match(fP)||[]).forEach(function(h,m){var g=parseInt(r[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=g;break;case"d":s=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:a=g;break}}),l>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var tce=function(){var t={};t.version="1.2.0";function e(){for(var C=0,S=new Array(256),N=0;N!=256;++N)C=N,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,S[N]=C;return typeof Int32Array<"u"?new Int32Array(S):S}var r=e();function n(C){var S=0,N=0,Q=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Q=0;Q!=256;++Q)D[Q]=C[Q];for(Q=0;Q!=256;++Q)for(N=C[Q],S=256+Q;S<4096;S+=256)N=D[S]=N>>>8^C[N&255];var I=[];for(Q=1;Q!=16;++Q)I[Q-1]=typeof Int32Array<"u"?D.subarray(Q*256,Q*256+256):D.slice(Q*256,Q*256+256);return I}var a=n(r),s=a[0],i=a[1],o=a[2],l=a[3],u=a[4],d=a[5],h=a[6],m=a[7],g=a[8],b=a[9],y=a[10],E=a[11],B=a[12],k=a[13],L=a[14];function M(C,S){for(var N=S^-1,Q=0,D=C.length;Q<D;)N=N>>>8^r[(N^C.charCodeAt(Q++))&255];return~N}function P(C,S){for(var N=S^-1,Q=C.length-15,D=0;D<Q;)N=L[C[D++]^N&255]^k[C[D++]^N>>8&255]^B[C[D++]^N>>16&255]^E[C[D++]^N>>>24]^y[C[D++]]^b[C[D++]]^g[C[D++]]^m[C[D++]]^h[C[D++]]^d[C[D++]]^u[C[D++]]^l[C[D++]]^o[C[D++]]^i[C[D++]]^s[C[D++]]^r[C[D++]];for(Q+=15;D<Q;)N=N>>>8^r[(N^C[D++])&255];return~N}function R(C,S){for(var N=S^-1,Q=0,D=C.length,I=0,O=0;Q<D;)I=C.charCodeAt(Q++),I<128?N=N>>>8^r[(N^I)&255]:I<2048?(N=N>>>8^r[(N^(192|I>>6&31))&255],N=N>>>8^r[(N^(128|I&63))&255]):I>=55296&&I<57344?(I=(I&1023)+64,O=C.charCodeAt(Q++)&1023,N=N>>>8^r[(N^(240|I>>8&7))&255],N=N>>>8^r[(N^(128|I>>2&63))&255],N=N>>>8^r[(N^(128|O>>6&15|(I&3)<<4))&255],N=N>>>8^r[(N^(128|O&63))&255]):(N=N>>>8^r[(N^(224|I>>12&15))&255],N=N>>>8^r[(N^(128|I>>6&63))&255],N=N>>>8^r[(N^(128|I&63))&255]);return~N}return t.table=r,t.bstr=M,t.buf=P,t.str=R,t}(),ur=function(){var e={};e.version="1.2.1";function r(fe,ke){for(var Ee=fe.split("/"),_e=ke.split("/"),Be=0,Ie=0,qe=Math.min(Ee.length,_e.length);Be<qe;++Be){if(Ie=Ee[Be].length-_e[Be].length)return Ie;if(Ee[Be]!=_e[Be])return Ee[Be]<_e[Be]?-1:1}return Ee.length-_e.length}function n(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:n(fe.slice(0,-1));var ke=fe.lastIndexOf("/");return ke===-1?fe:fe.slice(0,ke+1)}function a(fe){if(fe.charAt(fe.length-1)=="/")return a(fe.slice(0,-1));var ke=fe.lastIndexOf("/");return ke===-1?fe:fe.slice(ke+1)}function s(fe,ke){typeof ke=="string"&&(ke=new Date(ke));var Ee=ke.getHours();Ee=Ee<<6|ke.getMinutes(),Ee=Ee<<5|ke.getSeconds()>>>1,fe.write_shift(2,Ee);var _e=ke.getFullYear()-1980;_e=_e<<4|ke.getMonth()+1,_e=_e<<5|ke.getDate(),fe.write_shift(2,_e)}function i(fe){var ke=fe.read_shift(2)&65535,Ee=fe.read_shift(2)&65535,_e=new Date,Be=Ee&31;Ee>>>=5;var Ie=Ee&15;Ee>>>=4,_e.setMilliseconds(0),_e.setFullYear(Ee+1980),_e.setMonth(Ie-1),_e.setDate(Be);var qe=ke&31;ke>>>=5;var tt=ke&63;return ke>>>=6,_e.setHours(ke),_e.setMinutes(tt),_e.setSeconds(qe<<1),_e}function o(fe){ui(fe,0);for(var ke={},Ee=0;fe.l<=fe.length-4;){var _e=fe.read_shift(2),Be=fe.read_shift(2),Ie=fe.l+Be,qe={};switch(_e){case 21589:Ee=fe.read_shift(1),Ee&1&&(qe.mtime=fe.read_shift(4)),Be>5&&(Ee&2&&(qe.atime=fe.read_shift(4)),Ee&4&&(qe.ctime=fe.read_shift(4))),qe.mtime&&(qe.mt=new Date(qe.mtime*1e3));break}fe.l=Ie,ke[_e]=qe}return ke}var l;function u(){return l||(l={})}function d(fe,ke){if(fe[0]==80&&fe[1]==75)return nn(fe,ke);if((fe[0]|32)==109&&(fe[1]|32)==105)return Bs(fe,ke);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Ee=3,_e=512,Be=0,Ie=0,qe=0,tt=0,He=0,We=[],Je=fe.slice(0,512);ui(Je,0);var yt=h(Je);switch(Ee=yt[0],Ee){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(yt[1]==0)return nn(fe,ke);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ee)}_e!==512&&(Je=fe.slice(0,_e),ui(Je,28));var Nt=fe.slice(0,_e);m(Je,Ee);var Ot=Je.read_shift(4,"i");if(Ee===3&&Ot!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ot);Je.l+=4,qe=Je.read_shift(4,"i"),Je.l+=4,Je.chk("00100000","Mini Stream Cutoff Size: "),tt=Je.read_shift(4,"i"),Be=Je.read_shift(4,"i"),He=Je.read_shift(4,"i"),Ie=Je.read_shift(4,"i");for(var Bt=-1,Ut=0;Ut<109&&(Bt=Je.read_shift(4,"i"),!(Bt<0));++Ut)We[Ut]=Bt;var dr=g(fe,_e);E(He,Ie,dr,_e,We);var jr=k(dr,qe,We,_e);jr[qe].name="!Directory",Be>0&&tt!==O&&(jr[tt].name="!MiniFAT"),jr[We[0]].name="!FAT",jr.fat_addrs=We,jr.ssz=_e;var Or={},Gr=[],Ra=[],pi=[];L(qe,jr,dr,Gr,Be,Or,Ra,tt),b(Ra,pi,Gr),Gr.shift();var La={FileIndex:Ra,FullPaths:pi};return ke&&ke.raw&&(La.raw={header:Nt,sectors:dr}),La}function h(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(z,"Header Signature: "),fe.l+=16;var ke=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),ke]}function m(fe,ke){var Ee=9;switch(fe.l+=2,Ee=fe.read_shift(2)){case 9:if(ke!=3)throw new Error("Sector Shift: Expected 9 saw "+Ee);break;case 12:if(ke!=4)throw new Error("Sector Shift: Expected 12 saw "+Ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ee)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function g(fe,ke){for(var Ee=Math.ceil(fe.length/ke)-1,_e=[],Be=1;Be<Ee;++Be)_e[Be-1]=fe.slice(Be*ke,(Be+1)*ke);return _e[Ee-1]=fe.slice(Ee*ke),_e}function b(fe,ke,Ee){for(var _e=0,Be=0,Ie=0,qe=0,tt=0,He=Ee.length,We=[],Je=[];_e<He;++_e)We[_e]=Je[_e]=_e,ke[_e]=Ee[_e];for(;tt<Je.length;++tt)_e=Je[tt],Be=fe[_e].L,Ie=fe[_e].R,qe=fe[_e].C,We[_e]===_e&&(Be!==-1&&We[Be]!==Be&&(We[_e]=We[Be]),Ie!==-1&&We[Ie]!==Ie&&(We[_e]=We[Ie])),qe!==-1&&(We[qe]=_e),Be!==-1&&_e!=We[_e]&&(We[Be]=We[_e],Je.lastIndexOf(Be)<tt&&Je.push(Be)),Ie!==-1&&_e!=We[_e]&&(We[Ie]=We[_e],Je.lastIndexOf(Ie)<tt&&Je.push(Ie));for(_e=1;_e<He;++_e)We[_e]===_e&&(Ie!==-1&&We[Ie]!==Ie?We[_e]=We[Ie]:Be!==-1&&We[Be]!==Be&&(We[_e]=We[Be]));for(_e=1;_e<He;++_e)if(fe[_e].type!==0){if(tt=_e,tt!=We[tt])do tt=We[tt],ke[_e]=ke[tt]+"/"+ke[_e];while(tt!==0&&We[tt]!==-1&&tt!=We[tt]);We[_e]=-1}for(ke[0]+="/",_e=1;_e<He;++_e)fe[_e].type!==2&&(ke[_e]+="/")}function y(fe,ke,Ee){for(var _e=fe.start,Be=fe.size,Ie=[],qe=_e;Ee&&Be>0&&qe>=0;)Ie.push(ke.slice(qe*I,qe*I+I)),Be-=I,qe=sh(Ee,qe*4);return Ie.length===0?lt(0):Ys(Ie).slice(0,fe.size)}function E(fe,ke,Ee,_e,Be){var Ie=O;if(fe===O){if(ke!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var qe=Ee[fe],tt=(_e>>>2)-1;if(!qe)return;for(var He=0;He<tt&&(Ie=sh(qe,He*4))!==O;++He)Be.push(Ie);E(sh(qe,_e-4),ke-1,Ee,_e,Be)}}function B(fe,ke,Ee,_e,Be){var Ie=[],qe=[];Be||(Be=[]);var tt=_e-1,He=0,We=0;for(He=ke;He>=0;){Be[He]=!0,Ie[Ie.length]=He,qe.push(fe[He]);var Je=Ee[Math.floor(He*4/_e)];if(We=He*4&tt,_e<4+We)throw new Error("FAT boundary crossed: "+He+" 4 "+_e);if(!fe[Je])break;He=sh(fe[Je],We)}return{nodes:Ie,data:l6([qe])}}function k(fe,ke,Ee,_e){var Be=fe.length,Ie=[],qe=[],tt=[],He=[],We=_e-1,Je=0,yt=0,Nt=0,Ot=0;for(Je=0;Je<Be;++Je)if(tt=[],Nt=Je+ke,Nt>=Be&&(Nt-=Be),!qe[Nt]){He=[];var Bt=[];for(yt=Nt;yt>=0;){Bt[yt]=!0,qe[yt]=!0,tt[tt.length]=yt,He.push(fe[yt]);var Ut=Ee[Math.floor(yt*4/_e)];if(Ot=yt*4&We,_e<4+Ot)throw new Error("FAT boundary crossed: "+yt+" 4 "+_e);if(!fe[Ut]||(yt=sh(fe[Ut],Ot),Bt[yt]))break}Ie[Nt]={nodes:tt,data:l6([He])}}return Ie}function L(fe,ke,Ee,_e,Be,Ie,qe,tt){for(var He=0,We=_e.length?2:0,Je=ke[fe].data,yt=0,Nt=0,Ot;yt<Je.length;yt+=128){var Bt=Je.slice(yt,yt+128);ui(Bt,64),Nt=Bt.read_shift(2),Ot=O4(Bt,0,Nt-We),_e.push(Ot);var Ut={name:Ot,type:Bt.read_shift(1),color:Bt.read_shift(1),L:Bt.read_shift(4,"i"),R:Bt.read_shift(4,"i"),C:Bt.read_shift(4,"i"),clsid:Bt.read_shift(16),state:Bt.read_shift(4,"i"),start:0,size:0},dr=Bt.read_shift(2)+Bt.read_shift(2)+Bt.read_shift(2)+Bt.read_shift(2);dr!==0&&(Ut.ct=M(Bt,Bt.l-8));var jr=Bt.read_shift(2)+Bt.read_shift(2)+Bt.read_shift(2)+Bt.read_shift(2);jr!==0&&(Ut.mt=M(Bt,Bt.l-8)),Ut.start=Bt.read_shift(4,"i"),Ut.size=Bt.read_shift(4,"i"),Ut.size<0&&Ut.start<0&&(Ut.size=Ut.type=0,Ut.start=O,Ut.name=""),Ut.type===5?(He=Ut.start,Be>0&&He!==O&&(ke[He].name="!StreamData")):Ut.size>=4096?(Ut.storage="fat",ke[Ut.start]===void 0&&(ke[Ut.start]=B(Ee,Ut.start,ke.fat_addrs,ke.ssz)),ke[Ut.start].name=Ut.name,Ut.content=ke[Ut.start].data.slice(0,Ut.size)):(Ut.storage="minifat",Ut.size<0?Ut.size=0:He!==O&&Ut.start!==O&&ke[He]&&(Ut.content=y(Ut,ke[He].data,(ke[tt]||{}).data))),Ut.content&&ui(Ut.content,0),Ie[Ot]=Ut,qe.push(Ut)}}function M(fe,ke){return new Date((Zo(fe,ke+4)/1e7*Math.pow(2,32)+Zo(fe,ke)/1e7-11644473600)*1e3)}function P(fe,ke){return u(),d(l.readFileSync(fe),ke)}function R(fe,ke){var Ee=ke&&ke.type;switch(Ee||Yr&&Buffer.isBuffer(fe)&&(Ee="buffer"),Ee||"base64"){case"file":return P(fe,ke);case"base64":return d(el(il(fe)),ke);case"binary":return d(el(fe),ke)}return d(fe,ke)}function C(fe,ke){var Ee=ke||{},_e=Ee.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=_e+"/",fe.FileIndex[0]={name:_e,type:5}),Ee.CLSID&&(fe.FileIndex[0].clsid=Ee.CLSID),S(fe)}function S(fe){var ke="Sh33tJ5";if(!ur.find(fe,"/"+ke)){var Ee=lt(4);Ee[0]=55,Ee[1]=Ee[3]=50,Ee[2]=54,fe.FileIndex.push({name:ke,type:2,content:Ee,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+ke),N(fe)}}function N(fe,ke){C(fe);for(var Ee=!1,_e=!1,Be=fe.FullPaths.length-1;Be>=0;--Be){var Ie=fe.FileIndex[Be];switch(Ie.type){case 0:_e?Ee=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(Ie.R*Ie.L*Ie.C)&&(Ee=!0),Ie.R>-1&&Ie.L>-1&&Ie.R==Ie.L&&(Ee=!0);break;default:Ee=!0;break}}if(!(!Ee&&!ke)){var qe=new Date(1987,1,19),tt=0,He=Object.create?Object.create(null):{},We=[];for(Be=0;Be<fe.FullPaths.length;++Be)He[fe.FullPaths[Be]]=!0,fe.FileIndex[Be].type!==0&&We.push([fe.FullPaths[Be],fe.FileIndex[Be]]);for(Be=0;Be<We.length;++Be){var Je=n(We[Be][0]);_e=He[Je],_e||(We.push([Je,{name:a(Je).replace("/",""),type:1,clsid:Y,ct:qe,mt:qe,content:null}]),He[Je]=!0)}for(We.sort(function(Ot,Bt){return r(Ot[0],Bt[0])}),fe.FullPaths=[],fe.FileIndex=[],Be=0;Be<We.length;++Be)fe.FullPaths[Be]=We[Be][0],fe.FileIndex[Be]=We[Be][1];for(Be=0;Be<We.length;++Be){var yt=fe.FileIndex[Be],Nt=fe.FullPaths[Be];if(yt.name=a(Nt).replace("/",""),yt.L=yt.R=yt.C=-(yt.color=1),yt.size=yt.content?yt.content.length:0,yt.start=0,yt.clsid=yt.clsid||Y,Be===0)yt.C=We.length>1?1:-1,yt.size=0,yt.type=5;else if(Nt.slice(-1)=="/"){for(tt=Be+1;tt<We.length&&n(fe.FullPaths[tt])!=Nt;++tt);for(yt.C=tt>=We.length?-1:tt,tt=Be+1;tt<We.length&&n(fe.FullPaths[tt])!=n(Nt);++tt);yt.R=tt>=We.length?-1:tt,yt.type=1}else n(fe.FullPaths[Be+1]||"")==n(Nt)&&(yt.R=Be+1),yt.type=2}}}function Q(fe,ke){var Ee=ke||{};if(Ee.fileType=="mad")return Gt(fe,Ee);switch(N(fe),Ee.fileType){case"zip":return pa(fe,Ee)}var _e=function(Ot){for(var Bt=0,Ut=0,dr=0;dr<Ot.FileIndex.length;++dr){var jr=Ot.FileIndex[dr];if(jr.content){var Or=jr.content.length;Or>0&&(Or<4096?Bt+=Or+63>>6:Ut+=Or+511>>9)}}for(var Gr=Ot.FullPaths.length+3>>2,Ra=Bt+7>>3,pi=Bt+127>>7,La=Ra+Ut+Gr+pi,hs=La+127>>7,$a=hs<=109?0:Math.ceil((hs-109)/127);La+hs+$a+127>>7>hs;)$a=++hs<=109?0:Math.ceil((hs-109)/127);var Ns=[1,$a,hs,pi,Gr,Ut,Bt,0];return Ot.FileIndex[0].size=Bt<<6,Ns[7]=(Ot.FileIndex[0].start=Ns[0]+Ns[1]+Ns[2]+Ns[3]+Ns[4]+Ns[5])+(Ns[6]+7>>3),Ns}(fe),Be=lt(_e[7]<<9),Ie=0,qe=0;{for(Ie=0;Ie<8;++Ie)Be.write_shift(1,re[Ie]);for(Ie=0;Ie<8;++Ie)Be.write_shift(2,0);for(Be.write_shift(2,62),Be.write_shift(2,3),Be.write_shift(2,65534),Be.write_shift(2,9),Be.write_shift(2,6),Ie=0;Ie<3;++Ie)Be.write_shift(2,0);for(Be.write_shift(4,0),Be.write_shift(4,_e[2]),Be.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Be.write_shift(4,0),Be.write_shift(4,4096),Be.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:O),Be.write_shift(4,_e[3]),Be.write_shift(-4,_e[1]?_e[0]-1:O),Be.write_shift(4,_e[1]),Ie=0;Ie<109;++Ie)Be.write_shift(-4,Ie<_e[2]?_e[1]+Ie:-1)}if(_e[1])for(qe=0;qe<_e[1];++qe){for(;Ie<236+qe*127;++Ie)Be.write_shift(-4,Ie<_e[2]?_e[1]+Ie:-1);Be.write_shift(-4,qe===_e[1]-1?O:qe+1)}var tt=function(Ot){for(qe+=Ot;Ie<qe-1;++Ie)Be.write_shift(-4,Ie+1);Ot&&(++Ie,Be.write_shift(-4,O))};for(qe=Ie=0,qe+=_e[1];Ie<qe;++Ie)Be.write_shift(-4,ae.DIFSECT);for(qe+=_e[2];Ie<qe;++Ie)Be.write_shift(-4,ae.FATSECT);tt(_e[3]),tt(_e[4]);for(var He=0,We=0,Je=fe.FileIndex[0];He<fe.FileIndex.length;++He)Je=fe.FileIndex[He],Je.content&&(We=Je.content.length,!(We<4096)&&(Je.start=qe,tt(We+511>>9)));for(tt(_e[6]+7>>3);Be.l&511;)Be.write_shift(-4,ae.ENDOFCHAIN);for(qe=Ie=0,He=0;He<fe.FileIndex.length;++He)Je=fe.FileIndex[He],Je.content&&(We=Je.content.length,!(!We||We>=4096)&&(Je.start=qe,tt(We+63>>6)));for(;Be.l&511;)Be.write_shift(-4,ae.ENDOFCHAIN);for(Ie=0;Ie<_e[4]<<2;++Ie){var yt=fe.FullPaths[Ie];if(!yt||yt.length===0){for(He=0;He<17;++He)Be.write_shift(4,0);for(He=0;He<3;++He)Be.write_shift(4,-1);for(He=0;He<12;++He)Be.write_shift(4,0);continue}Je=fe.FileIndex[Ie],Ie===0&&(Je.start=Je.size?Je.start-1:O);var Nt=Ie===0&&Ee.root||Je.name;if(We=2*(Nt.length+1),Be.write_shift(64,Nt,"utf16le"),Be.write_shift(2,We),Be.write_shift(1,Je.type),Be.write_shift(1,Je.color),Be.write_shift(-4,Je.L),Be.write_shift(-4,Je.R),Be.write_shift(-4,Je.C),Je.clsid)Be.write_shift(16,Je.clsid,"hex");else for(He=0;He<4;++He)Be.write_shift(4,0);Be.write_shift(4,Je.state||0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,Je.start),Be.write_shift(4,Je.size),Be.write_shift(4,0)}for(Ie=1;Ie<fe.FileIndex.length;++Ie)if(Je=fe.FileIndex[Ie],Je.size>=4096)if(Be.l=Je.start+1<<9,Yr&&Buffer.isBuffer(Je.content))Je.content.copy(Be,Be.l,0,Je.size),Be.l+=Je.size+511&-512;else{for(He=0;He<Je.size;++He)Be.write_shift(1,Je.content[He]);for(;He&511;++He)Be.write_shift(1,0)}for(Ie=1;Ie<fe.FileIndex.length;++Ie)if(Je=fe.FileIndex[Ie],Je.size>0&&Je.size<4096)if(Yr&&Buffer.isBuffer(Je.content))Je.content.copy(Be,Be.l,0,Je.size),Be.l+=Je.size+63&-64;else{for(He=0;He<Je.size;++He)Be.write_shift(1,Je.content[He]);for(;He&63;++He)Be.write_shift(1,0)}if(Yr)Be.l=Be.length;else for(;Be.l<Be.length;)Be.write_shift(1,0);return Be}function D(fe,ke){var Ee=fe.FullPaths.map(function(He){return He.toUpperCase()}),_e=Ee.map(function(He){var We=He.split("/");return We[We.length-(He.slice(-1)=="/"?2:1)]}),Be=!1;ke.charCodeAt(0)===47?(Be=!0,ke=Ee[0].slice(0,-1)+ke):Be=ke.indexOf("/")!==-1;var Ie=ke.toUpperCase(),qe=Be===!0?Ee.indexOf(Ie):_e.indexOf(Ie);if(qe!==-1)return fe.FileIndex[qe];var tt=!Ie.match(mg);for(Ie=Ie.replace(so,""),tt&&(Ie=Ie.replace(mg,"!")),qe=0;qe<Ee.length;++qe)if((tt?Ee[qe].replace(mg,"!"):Ee[qe]).replace(so,"")==Ie||(tt?_e[qe].replace(mg,"!"):_e[qe]).replace(so,"")==Ie)return fe.FileIndex[qe];return null}var I=64,O=-2,z="d0cf11e0a1b11ae1",re=[208,207,17,224,161,177,26,225],Y="00000000000000000000000000000000",ae={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:O,FREESECT:-1,HEADER_SIGNATURE:z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Y,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function K(fe,ke,Ee){u();var _e=Q(fe,Ee);l.writeFileSync(ke,_e)}function G(fe){for(var ke=new Array(fe.length),Ee=0;Ee<fe.length;++Ee)ke[Ee]=String.fromCharCode(fe[Ee]);return ke.join("")}function W(fe,ke){var Ee=Q(fe,ke);switch(ke&&ke.type||"buffer"){case"file":return u(),l.writeFileSync(ke.filename,Ee),Ee;case"binary":return typeof Ee=="string"?Ee:G(Ee);case"base64":return cx(typeof Ee=="string"?Ee:G(Ee));case"buffer":if(Yr)return Buffer.isBuffer(Ee)?Ee:zA(Ee);case"array":return typeof Ee=="string"?el(Ee):Ee}return Ee}var ie;function j(fe){try{var ke=fe.InflateRaw,Ee=new ke;if(Ee._processChunk(new Uint8Array([3,0]),Ee._finishFlushFlag),Ee.bytesRead)ie=fe;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function X(fe,ke){if(!ie)return Fr(fe,ke);var Ee=ie.InflateRaw,_e=new Ee,Be=_e._processChunk(fe.slice(fe.l),_e._finishFlushFlag);return fe.l+=_e.bytesRead,Be}function Z(fe){return ie?ie.deflateRawSync(fe):Rt(fe)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],de=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(fe){var ke=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(ke>>16|ke>>8|ke)&255}for(var ge=typeof Uint8Array<"u",Te=ge?new Uint8Array(256):[],xe=0;xe<256;++xe)Te[xe]=me(xe);function oe(fe,ke){var Ee=Te[fe&255];return ke<=8?Ee>>>8-ke:(Ee=Ee<<8|Te[fe>>8&255],ke<=16?Ee>>>16-ke:(Ee=Ee<<8|Te[fe>>16&255],Ee>>>24-ke))}function Me(fe,ke){var Ee=ke&7,_e=ke>>>3;return(fe[_e]|(Ee<=6?0:fe[_e+1]<<8))>>>Ee&3}function at(fe,ke){var Ee=ke&7,_e=ke>>>3;return(fe[_e]|(Ee<=5?0:fe[_e+1]<<8))>>>Ee&7}function Se(fe,ke){var Ee=ke&7,_e=ke>>>3;return(fe[_e]|(Ee<=4?0:fe[_e+1]<<8))>>>Ee&15}function be(fe,ke){var Ee=ke&7,_e=ke>>>3;return(fe[_e]|(Ee<=3?0:fe[_e+1]<<8))>>>Ee&31}function je(fe,ke){var Ee=ke&7,_e=ke>>>3;return(fe[_e]|(Ee<=1?0:fe[_e+1]<<8))>>>Ee&127}function Ke(fe,ke,Ee){var _e=ke&7,Be=ke>>>3,Ie=(1<<Ee)-1,qe=fe[Be]>>>_e;return Ee<8-_e||(qe|=fe[Be+1]<<8-_e,Ee<16-_e)||(qe|=fe[Be+2]<<16-_e,Ee<24-_e)||(qe|=fe[Be+3]<<24-_e),qe&Ie}function st(fe,ke,Ee){var _e=ke&7,Be=ke>>>3;return _e<=5?fe[Be]|=(Ee&7)<<_e:(fe[Be]|=Ee<<_e&255,fe[Be+1]=(Ee&7)>>8-_e),ke+3}function pt(fe,ke,Ee){var _e=ke&7,Be=ke>>>3;return Ee=(Ee&1)<<_e,fe[Be]|=Ee,ke+1}function St(fe,ke,Ee){var _e=ke&7,Be=ke>>>3;return Ee<<=_e,fe[Be]|=Ee&255,Ee>>>=8,fe[Be+1]=Ee,ke+8}function ut(fe,ke,Ee){var _e=ke&7,Be=ke>>>3;return Ee<<=_e,fe[Be]|=Ee&255,Ee>>>=8,fe[Be+1]=Ee&255,fe[Be+2]=Ee>>>8,ke+16}function kt(fe,ke){var Ee=fe.length,_e=2*Ee>ke?2*Ee:ke+5,Be=0;if(Ee>=ke)return fe;if(Yr){var Ie=VF(_e);if(fe.copy)fe.copy(Ie);else for(;Be<fe.length;++Be)Ie[Be]=fe[Be];return Ie}else if(ge){var qe=new Uint8Array(_e);if(qe.set)qe.set(fe);else for(;Be<Ee;++Be)qe[Be]=fe[Be];return qe}return fe.length=_e,fe}function zt(fe){for(var ke=new Array(fe),Ee=0;Ee<fe;++Ee)ke[Ee]=0;return ke}function Yt(fe,ke,Ee){var _e=1,Be=0,Ie=0,qe=0,tt=0,He=fe.length,We=ge?new Uint16Array(32):zt(32);for(Ie=0;Ie<32;++Ie)We[Ie]=0;for(Ie=He;Ie<Ee;++Ie)fe[Ie]=0;He=fe.length;var Je=ge?new Uint16Array(He):zt(He);for(Ie=0;Ie<He;++Ie)We[Be=fe[Ie]]++,_e<Be&&(_e=Be),Je[Ie]=0;for(We[0]=0,Ie=1;Ie<=_e;++Ie)We[Ie+16]=tt=tt+We[Ie-1]<<1;for(Ie=0;Ie<He;++Ie)tt=fe[Ie],tt!=0&&(Je[Ie]=We[tt+16]++);var yt=0;for(Ie=0;Ie<He;++Ie)if(yt=fe[Ie],yt!=0)for(tt=oe(Je[Ie],_e)>>_e-yt,qe=(1<<_e+4-yt)-1;qe>=0;--qe)ke[tt|qe<<yt]=yt&15|Ie<<4;return _e}var It=ge?new Uint16Array(512):zt(512),Dt=ge?new Uint16Array(32):zt(32);if(!ge){for(var Wt=0;Wt<512;++Wt)It[Wt]=0;for(Wt=0;Wt<32;++Wt)Dt[Wt]=0}(function(){for(var fe=[],ke=0;ke<32;ke++)fe.push(5);Yt(fe,Dt,32);var Ee=[];for(ke=0;ke<=143;ke++)Ee.push(8);for(;ke<=255;ke++)Ee.push(9);for(;ke<=279;ke++)Ee.push(7);for(;ke<=287;ke++)Ee.push(8);Yt(Ee,It,288)})();var Lt=function(){for(var ke=ge?new Uint8Array(32768):[],Ee=0,_e=0;Ee<de.length-1;++Ee)for(;_e<de[Ee+1];++_e)ke[_e]=Ee;for(;_e<32768;++_e)ke[_e]=29;var Be=ge?new Uint8Array(259):[];for(Ee=0,_e=0;Ee<ce.length-1;++Ee)for(;_e<ce[Ee+1];++_e)Be[_e]=Ee;function Ie(tt,He){for(var We=0;We<tt.length;){var Je=Math.min(65535,tt.length-We),yt=We+Je==tt.length;for(He.write_shift(1,+yt),He.write_shift(2,Je),He.write_shift(2,~Je&65535);Je-- >0;)He[He.l++]=tt[We++]}return He.l}function qe(tt,He){for(var We=0,Je=0,yt=ge?new Uint16Array(32768):[];Je<tt.length;){var Nt=Math.min(65535,tt.length-Je);if(Nt<10){for(We=st(He,We,+(Je+Nt==tt.length)),We&7&&(We+=8-(We&7)),He.l=We/8|0,He.write_shift(2,Nt),He.write_shift(2,~Nt&65535);Nt-- >0;)He[He.l++]=tt[Je++];We=He.l*8;continue}We=st(He,We,+(Je+Nt==tt.length)+2);for(var Ot=0;Nt-- >0;){var Bt=tt[Je];Ot=(Ot<<5^Bt)&32767;var Ut=-1,dr=0;if((Ut=yt[Ot])&&(Ut|=Je&-32768,Ut>Je&&(Ut-=32768),Ut<Je))for(;tt[Ut+dr]==tt[Je+dr]&&dr<250;)++dr;if(dr>2){Bt=Be[dr],Bt<=22?We=St(He,We,Te[Bt+1]>>1)-1:(St(He,We,3),We+=5,St(He,We,Te[Bt-23]>>5),We+=3);var jr=Bt<8?0:Bt-4>>2;jr>0&&(ut(He,We,dr-ce[Bt]),We+=jr),Bt=ke[Je-Ut],We=St(He,We,Te[Bt]>>3),We-=3;var Or=Bt<4?0:Bt-2>>1;Or>0&&(ut(He,We,Je-Ut-de[Bt]),We+=Or);for(var Gr=0;Gr<dr;++Gr)yt[Ot]=Je&32767,Ot=(Ot<<5^tt[Je])&32767,++Je;Nt-=dr-1}else Bt<=143?Bt=Bt+48:We=pt(He,We,1),We=St(He,We,Te[Bt]),yt[Ot]=Je&32767,++Je}We=St(He,We,0)-1}return He.l=(We+7)/8|0,He.l}return function(He,We){return He.length<8?Ie(He,We):qe(He,We)}}();function Rt(fe){var ke=lt(50+Math.floor(fe.length*1.1)),Ee=Lt(fe,ke);return ke.slice(0,Ee)}var xt=ge?new Uint16Array(32768):zt(32768),wr=ge?new Uint16Array(32768):zt(32768),Jt=ge?new Uint16Array(128):zt(128),dn=1,gr=1;function Ur(fe,ke){var Ee=be(fe,ke)+257;ke+=5;var _e=be(fe,ke)+1;ke+=5;var Be=Se(fe,ke)+4;ke+=4;for(var Ie=0,qe=ge?new Uint8Array(19):zt(19),tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],He=1,We=ge?new Uint8Array(8):zt(8),Je=ge?new Uint8Array(8):zt(8),yt=qe.length,Nt=0;Nt<Be;++Nt)qe[te[Nt]]=Ie=at(fe,ke),He<Ie&&(He=Ie),We[Ie]++,ke+=3;var Ot=0;for(We[0]=0,Nt=1;Nt<=He;++Nt)Je[Nt]=Ot=Ot+We[Nt-1]<<1;for(Nt=0;Nt<yt;++Nt)(Ot=qe[Nt])!=0&&(tt[Nt]=Je[Ot]++);var Bt=0;for(Nt=0;Nt<yt;++Nt)if(Bt=qe[Nt],Bt!=0){Ot=Te[tt[Nt]]>>8-Bt;for(var Ut=(1<<7-Bt)-1;Ut>=0;--Ut)Jt[Ot|Ut<<Bt]=Bt&7|Nt<<3}var dr=[];for(He=1;dr.length<Ee+_e;)switch(Ot=Jt[je(fe,ke)],ke+=Ot&7,Ot>>>=3){case 16:for(Ie=3+Me(fe,ke),ke+=2,Ot=dr[dr.length-1];Ie-- >0;)dr.push(Ot);break;case 17:for(Ie=3+at(fe,ke),ke+=3;Ie-- >0;)dr.push(0);break;case 18:for(Ie=11+je(fe,ke),ke+=7;Ie-- >0;)dr.push(0);break;default:dr.push(Ot),He<Ot&&(He=Ot);break}var jr=dr.slice(0,Ee),Or=dr.slice(Ee);for(Nt=Ee;Nt<286;++Nt)jr[Nt]=0;for(Nt=_e;Nt<30;++Nt)Or[Nt]=0;return dn=Yt(jr,xt,286),gr=Yt(Or,wr,30),ke}function Dn(fe,ke){if(fe[0]==3&&!(fe[1]&3))return[xf(ke),2];for(var Ee=0,_e=0,Be=VF(ke||1<<18),Ie=0,qe=Be.length>>>0,tt=0,He=0;(_e&1)==0;){if(_e=at(fe,Ee),Ee+=3,_e>>>1)_e>>1==1?(tt=9,He=5):(Ee=Ur(fe,Ee),tt=dn,He=gr);else{Ee&7&&(Ee+=8-(Ee&7));var We=fe[Ee>>>3]|fe[(Ee>>>3)+1]<<8;if(Ee+=32,We>0)for(!ke&&qe<Ie+We&&(Be=kt(Be,Ie+We),qe=Be.length);We-- >0;)Be[Ie++]=fe[Ee>>>3],Ee+=8;continue}for(;;){!ke&&qe<Ie+32767&&(Be=kt(Be,Ie+32767),qe=Be.length);var Je=Ke(fe,Ee,tt),yt=_e>>>1==1?It[Je]:xt[Je];if(Ee+=yt&15,yt>>>=4,(yt>>>8&255)===0)Be[Ie++]=yt;else{if(yt==256)break;yt-=257;var Nt=yt<8?0:yt-4>>2;Nt>5&&(Nt=0);var Ot=Ie+ce[yt];Nt>0&&(Ot+=Ke(fe,Ee,Nt),Ee+=Nt),Je=Ke(fe,Ee,He),yt=_e>>>1==1?Dt[Je]:wr[Je],Ee+=yt&15,yt>>>=4;var Bt=yt<4?0:yt-2>>1,Ut=de[yt];for(Bt>0&&(Ut+=Ke(fe,Ee,Bt),Ee+=Bt),!ke&&qe<Ot&&(Be=kt(Be,Ot+100),qe=Be.length);Ie<Ot;)Be[Ie]=Be[Ie-Ut],++Ie}}}return ke?[Be,Ee+7>>>3]:[Be.slice(0,Ie),Ee+7>>>3]}function Fr(fe,ke){var Ee=fe.slice(fe.l||0),_e=Dn(Ee,ke);return fe.l+=_e[1],_e[0]}function ds(fe,ke){if(fe)typeof console<"u"&&console.error(ke);else throw new Error(ke)}function nn(fe,ke){var Ee=fe;ui(Ee,0);var _e=[],Be=[],Ie={FileIndex:_e,FullPaths:Be};C(Ie,{root:ke.root});for(var qe=Ee.length-4;(Ee[qe]!=80||Ee[qe+1]!=75||Ee[qe+2]!=5||Ee[qe+3]!=6)&&qe>=0;)--qe;Ee.l=qe+4,Ee.l+=4;var tt=Ee.read_shift(2);Ee.l+=6;var He=Ee.read_shift(4);for(Ee.l=He,qe=0;qe<tt;++qe){Ee.l+=20;var We=Ee.read_shift(4),Je=Ee.read_shift(4),yt=Ee.read_shift(2),Nt=Ee.read_shift(2),Ot=Ee.read_shift(2);Ee.l+=8;var Bt=Ee.read_shift(4),Ut=o(Ee.slice(Ee.l+yt,Ee.l+yt+Nt));Ee.l+=yt+Nt+Ot;var dr=Ee.l;Ee.l=Bt+4,na(Ee,We,Je,Ie,Ut),Ee.l=dr}return Ie}function na(fe,ke,Ee,_e,Be){fe.l+=2;var Ie=fe.read_shift(2),qe=fe.read_shift(2),tt=i(fe);if(Ie&8257)throw new Error("Unsupported ZIP encryption");for(var He=fe.read_shift(4),We=fe.read_shift(4),Je=fe.read_shift(4),yt=fe.read_shift(2),Nt=fe.read_shift(2),Ot="",Bt=0;Bt<yt;++Bt)Ot+=String.fromCharCode(fe[fe.l++]);if(Nt){var Ut=o(fe.slice(fe.l,fe.l+Nt));(Ut[21589]||{}).mt&&(tt=Ut[21589].mt),((Be||{})[21589]||{}).mt&&(tt=Be[21589].mt)}fe.l+=Nt;var dr=fe.slice(fe.l,fe.l+We);switch(qe){case 8:dr=X(fe,Je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+qe)}var jr=!1;Ie&8&&(He=fe.read_shift(4),He==134695760&&(He=fe.read_shift(4),jr=!0),We=fe.read_shift(4),Je=fe.read_shift(4)),We!=ke&&ds(jr,"Bad compressed size: "+ke+" != "+We),Je!=Ee&&ds(jr,"Bad uncompressed size: "+Ee+" != "+Je),an(_e,Ot,dr,{unsafe:!0,mt:tt})}function pa(fe,ke){var Ee=ke||{},_e=[],Be=[],Ie=lt(1),qe=Ee.compression?8:0,tt=0,He=0,We=0,Je=0,yt=0,Nt=fe.FullPaths[0],Ot=Nt,Bt=fe.FileIndex[0],Ut=[],dr=0;for(He=1;He<fe.FullPaths.length;++He)if(Ot=fe.FullPaths[He].slice(Nt.length),Bt=fe.FileIndex[He],!(!Bt.size||!Bt.content||Ot=="Sh33tJ5")){var jr=Je,Or=lt(Ot.length);for(We=0;We<Ot.length;++We)Or.write_shift(1,Ot.charCodeAt(We)&127);Or=Or.slice(0,Or.l),Ut[yt]=tce.buf(Bt.content,0);var Gr=Bt.content;qe==8&&(Gr=Z(Gr)),Ie=lt(30),Ie.write_shift(4,67324752),Ie.write_shift(2,20),Ie.write_shift(2,tt),Ie.write_shift(2,qe),Bt.mt?s(Ie,Bt.mt):Ie.write_shift(4,0),Ie.write_shift(-4,Ut[yt]),Ie.write_shift(4,Gr.length),Ie.write_shift(4,Bt.content.length),Ie.write_shift(2,Or.length),Ie.write_shift(2,0),Je+=Ie.length,_e.push(Ie),Je+=Or.length,_e.push(Or),Je+=Gr.length,_e.push(Gr),Ie=lt(46),Ie.write_shift(4,33639248),Ie.write_shift(2,0),Ie.write_shift(2,20),Ie.write_shift(2,tt),Ie.write_shift(2,qe),Ie.write_shift(4,0),Ie.write_shift(-4,Ut[yt]),Ie.write_shift(4,Gr.length),Ie.write_shift(4,Bt.content.length),Ie.write_shift(2,Or.length),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(4,0),Ie.write_shift(4,jr),dr+=Ie.l,Be.push(Ie),dr+=Or.length,Be.push(Or),++yt}return Ie=lt(22),Ie.write_shift(4,101010256),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,yt),Ie.write_shift(2,yt),Ie.write_shift(4,dr),Ie.write_shift(4,Je),Ie.write_shift(2,0),Ys([Ys(_e),Ys(Be),Ie])}var Pr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function nr(fe,ke){if(fe.ctype)return fe.ctype;var Ee=fe.name||"",_e=Ee.match(/\.([^\.]+)$/);return _e&&Pr[_e[1]]||ke&&(_e=(Ee=ke).match(/[\.\\]([^\.\\])+$/),_e&&Pr[_e[1]])?Pr[_e[1]]:"application/octet-stream"}function zr(fe){for(var ke=cx(fe),Ee=[],_e=0;_e<ke.length;_e+=76)Ee.push(ke.slice(_e,_e+76));return Ee.join(`\r
`)+`\r
`}function fs(fe){var ke=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(We){var Je=We.charCodeAt(0).toString(16).toUpperCase();return"="+(Je.length==1?"0"+Je:Je)});ke=ke.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ke.charAt(0)==`
`&&(ke="=0D"+ke.slice(1)),ke=ke.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ee=[],_e=ke.split(`\r
`),Be=0;Be<_e.length;++Be){var Ie=_e[Be];if(Ie.length==0){Ee.push("");continue}for(var qe=0;qe<Ie.length;){var tt=76,He=Ie.slice(qe,qe+tt);He.charAt(tt-1)=="="?tt--:He.charAt(tt-2)=="="?tt-=2:He.charAt(tt-3)=="="&&(tt-=3),He=Ie.slice(qe,qe+tt),qe+=tt,qe<Ie.length&&(He+="="),Ee.push(He)}}return Ee.join(`\r
`)}function Wn(fe){for(var ke=[],Ee=0;Ee<fe.length;++Ee){for(var _e=fe[Ee];Ee<=fe.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+fe[++Ee];ke.push(_e)}for(var Be=0;Be<ke.length;++Be)ke[Be]=ke[Be].replace(/[=][0-9A-Fa-f]{2}/g,function(Ie){return String.fromCharCode(parseInt(Ie.slice(1),16))});return el(ke.join(`\r
`))}function Ea(fe,ke,Ee){for(var _e="",Be="",Ie="",qe,tt=0;tt<10;++tt){var He=ke[tt];if(!He||He.match(/^\s*$/))break;var We=He.match(/^(.*?):\s*([^\s].*)$/);if(We)switch(We[1].toLowerCase()){case"content-location":_e=We[2].trim();break;case"content-type":Ie=We[2].trim();break;case"content-transfer-encoding":Be=We[2].trim();break}}switch(++tt,Be.toLowerCase()){case"base64":qe=el(il(ke.slice(tt).join("")));break;case"quoted-printable":qe=Wn(ke.slice(tt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Be)}var Je=an(fe,_e.slice(Ee.length),qe,{unsafe:!0});Ie&&(Je.ctype=Ie)}function Bs(fe,ke){if(G(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ee=ke&&ke.root||"",_e=(Yr&&Buffer.isBuffer(fe)?fe.toString("binary"):G(fe)).split(`\r
`),Be=0,Ie="";for(Be=0;Be<_e.length;++Be)if(Ie=_e[Be],!!/^Content-Location:/i.test(Ie)&&(Ie=Ie.slice(Ie.indexOf("file")),Ee||(Ee=Ie.slice(0,Ie.lastIndexOf("/")+1)),Ie.slice(0,Ee.length)!=Ee))for(;Ee.length>0&&(Ee=Ee.slice(0,Ee.length-1),Ee=Ee.slice(0,Ee.lastIndexOf("/")+1),Ie.slice(0,Ee.length)!=Ee););var qe=(_e[1]||"").match(/boundary="(.*?)"/);if(!qe)throw new Error("MAD cannot find boundary");var tt="--"+(qe[1]||""),He=[],We=[],Je={FileIndex:He,FullPaths:We};C(Je);var yt,Nt=0;for(Be=0;Be<_e.length;++Be){var Ot=_e[Be];Ot!==tt&&Ot!==tt+"--"||(Nt++&&Ea(Je,_e.slice(yt,Be),Ee),yt=Be)}return Je}function Gt(fe,ke){var Ee=ke||{},_e=Ee.boundary||"SheetJS";_e="------="+_e;for(var Be=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],Ie=fe.FullPaths[0],qe=Ie,tt=fe.FileIndex[0],He=1;He<fe.FullPaths.length;++He)if(qe=fe.FullPaths[He].slice(Ie.length),tt=fe.FileIndex[He],!(!tt.size||!tt.content||qe=="Sh33tJ5")){qe=qe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(dr){return"_x"+dr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(dr){return"_u"+dr.charCodeAt(0).toString(16)+"_"});for(var We=tt.content,Je=Yr&&Buffer.isBuffer(We)?We.toString("binary"):G(We),yt=0,Nt=Math.min(1024,Je.length),Ot=0,Bt=0;Bt<=Nt;++Bt)(Ot=Je.charCodeAt(Bt))>=32&&Ot<128&&++yt;var Ut=yt>=Nt*4/5;Be.push(_e),Be.push("Content-Location: "+(Ee.root||"file:///C:/SheetJS/")+qe),Be.push("Content-Transfer-Encoding: "+(Ut?"quoted-printable":"base64")),Be.push("Content-Type: "+nr(tt,qe)),Be.push(""),Be.push(Ut?fs(Je):zr(Je))}return Be.push(_e+`--\r
`),Be.join(`\r
`)}function fn(fe){var ke={};return C(ke,fe),ke}function an(fe,ke,Ee,_e){var Be=_e&&_e.unsafe;Be||C(fe);var Ie=!Be&&ur.find(fe,ke);if(!Ie){var qe=fe.FullPaths[0];ke.slice(0,qe.length)==qe?qe=ke:(qe.slice(-1)!="/"&&(qe+="/"),qe=(qe+ke).replace("//","/")),Ie={name:a(ke),type:2},fe.FileIndex.push(Ie),fe.FullPaths.push(qe),Be||ur.utils.cfb_gc(fe)}return Ie.content=Ee,Ie.size=Ee?Ee.length:0,_e&&(_e.CLSID&&(Ie.clsid=_e.CLSID),_e.mt&&(Ie.mt=_e.mt),_e.ct&&(Ie.ct=_e.ct)),Ie}function Rn(fe,ke){C(fe);var Ee=ur.find(fe,ke);if(Ee){for(var _e=0;_e<fe.FileIndex.length;++_e)if(fe.FileIndex[_e]==Ee)return fe.FileIndex.splice(_e,1),fe.FullPaths.splice(_e,1),!0}return!1}function jn(fe,ke,Ee){C(fe);var _e=ur.find(fe,ke);if(_e){for(var Be=0;Be<fe.FileIndex.length;++Be)if(fe.FileIndex[Be]==_e)return fe.FileIndex[Be].name=a(Ee),fe.FullPaths[Be]=Ee,!0}return!1}function Xn(fe){N(fe,!0)}return e.find=D,e.read=R,e.parse=d,e.write=W,e.writeFile=K,e.utils={cfb_new:fn,cfb_add:an,cfb_del:Rn,cfb_mov:jn,cfb_gc:Xn,ReadShift:Mg,CheckField:LP,prep_blob:ui,bconcat:Ys,use_zlib:j,_deflateRaw:Rt,_inflateRaw:Fr,consts:ae},e}();function rce(t){return typeof t=="string"?Qw(t):Array.isArray(t)?Ble(t):t}function Zx(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Qw(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Cu(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([rce(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Sf(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function nce(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Ka(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function YF(t,e){for(var r=[],n=Ka(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function Vw(t){for(var e=[],r=Ka(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function zw(t){for(var e=[],r=Ka(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function ace(t){for(var e=[],r=Ka(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var wy=new Date(1899,11,30,0,0,0);function Ps(t,e){var r=t.getTime(),n=wy.getTime()+(t.getTimezoneOffset()-wy.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var hP=new Date,sce=wy.getTime()+(hP.getTimezoneOffset()-wy.getTimezoneOffset())*6e4,JF=hP.getTimezoneOffset();function Gw(t){var e=new Date;return e.setTime(t*24*60*60*1e3+sce),e.getTimezoneOffset()!==JF&&e.setTime(e.getTime()+(e.getTimezoneOffset()-JF)*6e4),e}function ice(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var ZF=new Date("2017-02-19T19:06:09.000Z"),mP=isNaN(ZF.getFullYear())?new Date("2/19/17"):ZF,oce=mP.getFullYear()==2017;function ha(t,e){var r=new Date(t);if(oce)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(mP.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Nh(t,e){if(Yr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Cu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Cu(rP(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Cu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Cu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function ma(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ma(t[r]));return e}function Va(t,e){for(var r="";r.length<e;)r+=t;return r}function Nc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var lce=["january","february","march","april","may","june","july","august","september","october","november","december"];function Dm(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&lce.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var cce=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function pP(t){return t?t.content&&t.type?Nh(t.content,!0):t.data?hg(t.data):t.asNodeBuffer&&Yr?hg(t.asNodeBuffer().toString("binary")):t.asBinary?hg(t.asBinary()):t._data&&t._data.getContent?hg(Nh(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function gP(t){if(!t)return null;if(t.data)return QF(t.data);if(t.asNodeBuffer&&Yr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?QF(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function uce(t){return t&&t.name.slice(-4)===".bin"?gP(t):pP(t)}function Ll(t,e){for(var r=t.FullPaths||Ka(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function R4(t,e){var r=Ll(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function bs(t,e,r){if(!r)return uce(R4(t,e));if(!e)return null;try{return bs(t,e)}catch{return null}}function tl(t,e,r){if(!r)return pP(R4(t,e));if(!e)return null;try{return tl(t,e)}catch{return null}}function Ace(t,e,r){return gP(R4(t,e))}function e6(t){for(var e=t.FullPaths||Ka(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Vr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Yr?n=zA(r):n=Nle(r),ur.utils.cfb_add(t,e,n)}ur.utils.cfb_add(t,e,r)}else t.file(e,r)}function L4(){return ur.utils.cfb_new()}function xP(t,e){switch(e.type){case"base64":return ur.read(t,{type:"base64"});case"binary":return ur.read(t,{type:"binary"});case"buffer":case"array":return ur.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function pg(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var As=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,dce=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,t6=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,fce=/<[^>]*>/g,Wi=As.match(t6)?t6:fce,hce=/<\w*:/,mce=/<(\/?)\w+:/;function Nr(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var i=t.match(dce),o=0,l="",u=0,d="",h="",m=1;if(i)for(u=0;u!=i.length;++u){for(h=i[u],s=0;s!=h.length&&h.charCodeAt(s)!==61;++s);for(d=h.slice(0,s).trim();h.charCodeAt(s+1)==32;)++s;for(m=(a=h.charCodeAt(s+1))==34||a==39?1:0,l=h.slice(s+1+m,h.length-m),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[g]&&d.slice(o-3,o)=="ext")continue;n[g]=l,n[g.toLowerCase()]=l}}return n}function Mu(t){return t.replace(mce,"<$1")}var vP={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},U4=Vw(vP),Cn=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(o,l){return vP[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),M4=/[&<>'"]/g,pce=/[\u0000-\u0008\u000b-\u001f]/g;function Kn(t){var e=t+"";return e.replace(M4,function(r){return U4[r]}).replace(pce,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function r6(t){return Kn(t).replace(/ /g,"_x0020_")}var yP=/[\u0000-\u001f]/g;function P4(t){var e=t+"";return e.replace(M4,function(r){return U4[r]}).replace(/\n/g,"<br/>").replace(yP,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function gce(t){var e=t+"";return e.replace(M4,function(r){return U4[r]}).replace(yP,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var n6=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function xce(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function da(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function hE(t){for(var e="",r=0,n=0,a=0,s=0,i=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,e+=String.fromCharCode(i);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=t.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function a6(t){var e=xf(2*t.length),r,n,a=1,s=0,i=0,o;for(n=0;n<t.length;n+=a)a=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[s++]=i&255,e[s++]=i>>>8,i=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function s6(t){return zA(t,"binary").toString("utf8")}var Sv="foo bar baz",ra=Yr&&(s6(Sv)==hE(Sv)&&s6||a6(Sv)==hE(Sv)&&a6)||hE,Cu=Yr?function(t){return zA(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Ax=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),wP=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),vce=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),yce=/<\/?(?:vt:)?variant>/g,wce=/<(?:vt:)([^>]*)>([\s\S]*)</;function i6(t,e){var r=Nr(t),n=t.match(vce(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(yce,"").match(wce);i&&a.push({v:ra(i[2]),t:i[1]})}),a}var bP=/(^\s|\s$|\n)/;function di(t,e){return"<"+t+(e.match(bP)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function dx(t){return Ka(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Mt(t,e,r){return"<"+t+(r!=null?dx(r):"")+(e!=null?(e.match(bP)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function d5(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function bce(t,e){switch(typeof t){case"string":var r=Mt("vt:lpwstr",Kn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Mt((t|0)==t?"vt:i4":"vt:r8",Kn(String(t)));case"boolean":return Mt("vt:bool",t?"true":"false")}if(t instanceof Date)return Mt("vt:filetime",d5(t));throw new Error("Unable to serialize "+t)}function j4(t){if(Yr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return ra(Sf(I4(t)));throw new Error("Bad input format: expected Buffer or string")}var fx=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Us={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Vh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Jo={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Cce(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function Ece(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,i=n?-e:e;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var o6=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},l6=Yr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:zA(e)})):o6(t)}:o6,c6=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(EA(t,a)));return n.join("").replace(so,"")},O4=Yr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(so,""):c6(t,e,r)}:c6,u6=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},CP=Yr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):u6(t,e,r)}:u6,A6=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(W0(t,a)));return n.join("")},e1=Yr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):A6(e,r,n)}:A6,EP=function(t,e){var r=Zo(t,e);return r>0?e1(t,e+4,e+4+r-1):""},_P=EP,SP=function(t,e){var r=Zo(t,e);return r>0?e1(t,e+4,e+4+r-1):""},TP=SP,BP=function(t,e){var r=2*Zo(t,e);return r>0?e1(t,e+4,e+4+r-1):""},NP=BP,kP=function(e,r){var n=Zo(e,r);return n>0?O4(e,r+4,r+4+n):""},IP=kP,FP=function(t,e){var r=Zo(t,e);return r>0?e1(t,e+4,e+4+r):""},DP=FP,RP=function(t,e){return Cce(t,e)},by=RP,Q4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Yr&&(_P=function(e,r){if(!Buffer.isBuffer(e))return EP(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},TP=function(e,r){if(!Buffer.isBuffer(e))return SP(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},NP=function(e,r){if(!Buffer.isBuffer(e))return BP(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},IP=function(e,r){if(!Buffer.isBuffer(e))return kP(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},DP=function(e,r){if(!Buffer.isBuffer(e))return FP(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},by=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):RP(e,r)},Q4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var W0=function(t,e){return t[e]},EA=function(t,e){return t[e+1]*256+t[e]},_ce=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Zo=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},sh=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Sce=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Mg(t,e){var r="",n,a,s=[],i,o,l,u;switch(e){case"dbcs":if(u=this.l,Yr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(EA(this,u)),u+=2;t*=2;break;case"utf8":r=e1(this,this.l,this.l+t);break;case"utf16le":t*=2,r=O4(this,this.l,this.l+t);break;case"wstr":return Mg.call(this,t,"dbcs");case"lpstr-ansi":r=_P(this,this.l),t=4+Zo(this,this.l);break;case"lpstr-cp":r=TP(this,this.l),t=4+Zo(this,this.l);break;case"lpwstr":r=NP(this,this.l),t=4+2*Zo(this,this.l);break;case"lpp4":t=4+Zo(this,this.l),r=IP(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Zo(this,this.l),r=DP(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=W0(this,this.l+t++))!==0;)s.push(_v(i));r=s.join("");break;case"_wstr":for(t=0,r="";(i=EA(this,this.l+t))!==0;)s.push(_v(i)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=W0(this,u),this.l=u+1,o=Mg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(_v(EA(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=W0(this,u),this.l=u+1,o=Mg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(_v(W0(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=W0(this,this.l),this.l++,n;case 2:return n=(e==="i"?_ce:EA)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?sh:Sce)(this,this.l),this.l+=4,n):(a=Zo(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=by(this,this.l):a=by([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=CP(this,this.l,t);break}}return this.l+=t,r}var Tce=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},Bce=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},Nce=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function kce(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)Nce(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var i=e.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,Tce(this,e,this.l);break;case 8:if(n=8,r==="f"){Ece(this,e,this.l);break}case 16:break;case-4:n=4,Bce(this,e,this.l);break}return this.l+=n,this}function LP(t,e){var r=CP(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function ui(t,e){t.l=e,t.read_shift=Mg,t.chk=LP,t.write_shift=kce}function qi(t,e){t.l+=e}function lt(t){var e=xf(t);return ui(e,0),e}function GA(t,e,r){if(t){var n,a,s;ui(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=vx[o]||vx[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;l=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=l,e(d,u,o))return}}}function No(){var t=[],e=Yr?256:2048,r=function(u){var d=lt(u);return ui(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},i=function(){return a(),Ys(t)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:i,_bufs:t}}function Ct(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=vx[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=t.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&Q4(r)&&t.push(r)}}function Pg(t,e,r){var n=ma(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function d6(t,e,r){var n=ma(t);return n.s=Pg(n.s,e.s,r),n.e=Pg(n.e,e.s,r),n}function jg(t,e){if(t.cRel&&t.c<0)for(t=ma(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ma(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Er(t);return!t.cRel&&t.cRel!=null&&(r=Dce(r)),!t.rRel&&t.rRel!=null&&(r=Ice(r)),r}function mE(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ka(t.s.c)+":"+(t.e.cRel?"":"$")+ka(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+us(t.s.r)+":"+(t.e.rRel?"":"$")+us(t.e.r):jg(t.s,e.biff)+":"+jg(t.e,e.biff)}function H4(t){return parseInt(Fce(t),10)-1}function us(t){return""+(t+1)}function Ice(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Fce(t){return t.replace(/\$(\d+)$/,"$1")}function V4(t){for(var e=Rce(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function ka(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Dce(t){return t.replace(/^([A-Z])/,"$$$1")}function Rce(t){return t.replace(/^\$([A-Z])/,"$1")}function Lce(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ia(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function Er(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Io(t){var e=t.indexOf(":");return e==-1?{s:Ia(t),e:Ia(t)}:{s:Ia(t.slice(0,e)),e:Ia(t.slice(e+1))}}function Mr(t,e){return typeof e>"u"||typeof e=="number"?Mr(t.s,t.e):(typeof t!="string"&&(t=Er(t)),typeof e!="string"&&(e=Er(e)),t==e?t:t+":"+e)}function En(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function f6(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=$l(t.z,r?Ps(e):e)}catch{}try{return t.w=$l((t.XF||{}).numFmtId||(r?14:0),r?Ps(e):e)}catch{return""+e}}function MA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?qA[t.v]||t.v:e==null?f6(t,t.v):f6(t,e))}function Tf(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function UP(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Ia(n.origin):n.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=En(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=e[h].length;++m)if(!(typeof e[h][m]>"u")){var g={v:e[h][m]},b=i+h,y=o+m;if(u.s.r>b&&(u.s.r=b),u.s.c>y&&(u.s.c=y),u.e.r<b&&(u.e.r=b),u.e.c<y&&(u.e.c=y),e[h][m]&&typeof e[h][m]=="object"&&!Array.isArray(e[h][m])&&!(e[h][m]instanceof Date))g=e[h][m];else if(Array.isArray(g.v)&&(g.f=e[h][m][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||vr[14],n.cellDates?(g.t="d",g.w=$l(g.z,Ps(g.v))):(g.t="n",g.v=Ps(g.v),g.w=$l(g.z,g.v))):g.t="s";if(a)s[b]||(s[b]=[]),s[b][y]&&s[b][y].z&&(g.z=s[b][y].z),s[b][y]=g;else{var E=Er({c:y,r:b});s[E]&&s[E].z&&(g.z=s[E].z),s[E]=g}}}return u.s.c<1e7&&(s["!ref"]=Mr(u)),s}function rp(t,e){return UP(null,t,e)}function Uce(t){return t.read_shift(4,"i")}function kc(t,e){return e||(e=lt(4)),e.write_shift(4,t),e}function zi(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Js(t,e){var r=!1;return e==null&&(r=!0,e=lt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function Mce(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Pce(t,e){return e||(e=lt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function z4(t,e){var r=t.l,n=t.read_shift(1),a=zi(t),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)s.push(Mce(t));i.r=s}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function jce(t,e){var r=!1;return e==null&&(r=!0,e=lt(15+4*t.t.length)),e.write_shift(1,0),Js(t.t,e),r?e.slice(0,e.l):e}var Oce=z4;function Qce(t,e){var r=!1;return e==null&&(r=!0,e=lt(23+4*t.t.length)),e.write_shift(1,1),Js(t.t,e),e.write_shift(4,1),Pce({},e),r?e.slice(0,e.l):e}function Wl(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function zh(t,e){return e==null&&(e=lt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Gh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function qh(t,e){return e==null&&(e=lt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Hce=zi,MP=Js;function G4(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function Cy(t,e){var r=!1;return e==null&&(r=!0,e=lt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var Vce=zi,f5=G4,q4=Cy;function K4(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?by([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):sh(e,0)>>2;return r?a/100:a}function PP(t,e){e==null&&(e=lt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function jP(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function zce(t,e){return e||(e=lt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Kh=jP,np=zce;function Hi(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function kh(t,e){return(e||lt(8)).write_shift(8,t,"f")}function Gce(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=ph[a];u&&(e.rgb=mx(u));break;case 2:e.rgb=mx([i,o,l]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function Ey(t,e){if(e||(e=lt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function qce(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function Kce(t,e){e||(e=lt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function OP(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function $ce(t){return OP(t,1)}function Wce(t){return OP(t,2)}var $4=2,Co=3,Tv=11,h6=12,_y=19,Bv=64,Xce=65,Yce=71,Jce=4108,Zce=4126,Ws=80,QP=81,eue=[Ws,QP],h5={1:{n:"CodePage",t:$4},2:{n:"Category",t:Ws},3:{n:"PresentationFormat",t:Ws},4:{n:"ByteCount",t:Co},5:{n:"LineCount",t:Co},6:{n:"ParagraphCount",t:Co},7:{n:"SlideCount",t:Co},8:{n:"NoteCount",t:Co},9:{n:"HiddenCount",t:Co},10:{n:"MultimediaClipCount",t:Co},11:{n:"ScaleCrop",t:Tv},12:{n:"HeadingPairs",t:Jce},13:{n:"TitlesOfParts",t:Zce},14:{n:"Manager",t:Ws},15:{n:"Company",t:Ws},16:{n:"LinksUpToDate",t:Tv},17:{n:"CharacterCount",t:Co},19:{n:"SharedDoc",t:Tv},22:{n:"HyperlinksChanged",t:Tv},23:{n:"AppVersion",t:Co,p:"version"},24:{n:"DigSig",t:Xce},26:{n:"ContentType",t:Ws},27:{n:"ContentStatus",t:Ws},28:{n:"Language",t:Ws},29:{n:"Version",t:Ws},255:{},2147483648:{n:"Locale",t:_y},2147483651:{n:"Behavior",t:_y},1919054434:{}},m5={1:{n:"CodePage",t:$4},2:{n:"Title",t:Ws},3:{n:"Subject",t:Ws},4:{n:"Author",t:Ws},5:{n:"Keywords",t:Ws},6:{n:"Comments",t:Ws},7:{n:"Template",t:Ws},8:{n:"LastAuthor",t:Ws},9:{n:"RevNumber",t:Ws},10:{n:"EditTime",t:Bv},11:{n:"LastPrinted",t:Bv},12:{n:"CreatedDate",t:Bv},13:{n:"ModifiedDate",t:Bv},14:{n:"PageCount",t:Co},15:{n:"WordCount",t:Co},16:{n:"CharCount",t:Co},17:{n:"Thumbnail",t:Yce},18:{n:"Application",t:Ws},19:{n:"DocSecurity",t:Co},255:{},2147483648:{n:"Locale",t:_y},2147483651:{n:"Behavior",t:_y},1919054434:{}},m6={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},tue=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function rue(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var nue=rue([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ph=ma(nue),qA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},HP={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},p5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Nv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function W4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function aue(t){var e=W4();if(!t||!t.match)return e;var r={};if((t.match(Wi)||[]).forEach(function(n){var a=Nr(n);switch(a[0].replace(hce,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[p5[a.ContentType]]!==void 0&&e[p5[a.ContentType]].push(a.PartName);break}}),e.xmlns!==Us.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function VP(t,e){var r=ace(p5),n=[],a;n[n.length]=As,n[n.length]=Mt("Types",null,{xmlns:Us.CT,"xmlns:xsd":Us.xsd,"xmlns:xsi":Us.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Mt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(a=t[l][0],n[n.length]=Mt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:Nv[l][e.bookType]||Nv[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Mt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:Nv[l][e.bookType]||Nv[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Mt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var rn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function hx(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Og(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Wi)||[]).forEach(function(a){var s=Nr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:pg(s.Target,e);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function gm(t){var e=[As,Mt("Relationships",null,{xmlns:Us.RELS})];return Ka(t["!id"]).forEach(function(r){e[e.length]=Mt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Gn(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[rn.HLINK,rn.XPATH,rn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var sue="application/vnd.oasis.opendocument.spreadsheet";function iue(t,e){for(var r=j4(t),n,a;n=fx.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Nr(n[0],!1),a.path=="/"&&a.type!==sue)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function oue(t){var e=[As];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function p6(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function lue(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function cue(t){var e=[As];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(p6(t[r][0],t[r][1])),e.push(lue("",t[r][0]));return e.push(p6("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function zP(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+gy.version+"</meta:generator></office:meta></office:document-meta>"}var ql=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],uue=function(){for(var t=new Array(ql.length),e=0;e<ql.length;++e){var r=ql[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function GP(t){var e={};t=ra(t);for(var r=0;r<ql.length;++r){var n=ql[r],a=t.match(uue[r]);a!=null&&a.length>0&&(e[n[1]]=Cn(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=ha(e[n[1]]))}return e}function pE(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=Kn(e),n[n.length]=r?Mt(t,e,r):di(t,e))}function qP(t,e){var r=e||{},n=[As,Mt("cp:coreProperties",null,{"xmlns:cp":Us.CORE_PROPS,"xmlns:dc":Us.dc,"xmlns:dcterms":Us.dcterms,"xmlns:dcmitype":Us.dcmitype,"xmlns:xsi":Us.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&pE("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:d5(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&pE("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:d5(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=ql.length;++s){var i=ql[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&pE(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var gh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],KP=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function $P(t,e,r,n){var a=[];if(typeof t=="string")a=i6(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var i=typeof e=="string"?i6(e,n).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(l=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function Aue(t,e,r){var n={};return e||(e={}),t=ra(t),gh.forEach(function(a){var s=(t.match(Ax(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=Cn(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var i=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&$P(n.HeadingPairs,n.TitlesOfParts,e,r),e}function WP(t){var e=[],r=Mt;return t||(t={}),t.Application="SheetJS",e[e.length]=As,e[e.length]=Mt("Properties",null,{xmlns:Us.EXT_PROPS,"xmlns:vt":Us.vt}),gh.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Kn(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Kn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var due=/<[^>]+>[^<]*/g;function fue(t,e){var r={},n="",a=t.match(due);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=Nr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Cn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Cn(d);break;case"bool":r[n]=da(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=ha(d);break;case"cy":case"error":r[n]=Cn(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function XP(t){var e=[As,Mt("Properties",null,{xmlns:Us.CUST_PROPS,"xmlns:vt":Us.vt})];if(!t)return e.join("");var r=1;return Ka(t).forEach(function(a){++r,e[e.length]=Mt("property",bce(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Kn(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var g5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},gE;function hue(t,e,r){gE||(gE=Vw(g5)),e=gE[e]||e,t[e]=r}function mue(t,e){var r=[];return Ka(g5).map(function(n){for(var a=0;a<ql.length;++a)if(ql[a][1]==n)return ql[a];for(a=0;a<gh.length;++a)if(gh[a][1]==n)return gh[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(di(g5[n[1]]||n[1],a))}}),Mt("DocumentProperties",r.join(""),{xmlns:Jo.o})}function pue(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&Ka(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var i=0;i<ql.length;++i)if(s==ql[i][1])return;for(i=0;i<gh.length;++i)if(s==gh[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),a.push(Mt(r6(s),o,{"dt:dt":l}))}}),e&&Ka(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var i=e[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Mt(r6(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Jo.o+'">'+a.join("")+"</"+n+">"}function X4(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function gue(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=lt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function YP(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function JP(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function ZP(t,e,r){return e===31?JP(t):YP(t,e,r)}function x5(t,e,r){return ZP(t,e,r===!1?0:4)}function xue(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return ZP(t,e,0)}function vue(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(so,""),t.l-a&2&&(t.l+=2)}return r}function yue(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(so,"");return r}function wue(t){var e=t.l,r=Sy(t,QP);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=Sy(t,Co);return[r,n]}function bue(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(wue(t));return r}function g6(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),i=t.read_shift(4);n[s]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(so,"").replace(mg,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function ej(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function Cue(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function Sy(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==h6&&n!==e&&eue.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===h6?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return YP(t,n,4).replace(so,"");case 31:return JP(t);case 64:return X4(t);case 65:return ej(t);case 71:return Cue(t);case 80:return x5(t,n,!s.raw).replace(so,"");case 81:return xue(t,n).replace(so,"");case 4108:return bue(t);case 4126:case 4127:return n==4127?vue(t):yue(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function x6(t,e){var r=lt(4),n=lt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=lt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=gue(e);break;case 31:case 80:for(n=lt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Ys([r,n])}function v6(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0,o=0,l=-1,u={};for(i=0;i!=a;++i){var d=t.read_shift(4),h=t.read_shift(4);s[i]=[d,h+r]}s.sort(function(k,L){return k[1]-L[1]});var m={};for(i=0;i!=a;++i){if(t.l!==s[i][1]){var g=!0;if(i>0&&e)switch(e[s[i-1][0]].t){case 2:t.l+2===s[i][1]&&(t.l+=2,g=!1);break;case 80:t.l<=s[i][1]&&(t.l=s[i][1],g=!1);break;case 4108:t.l<=s[i][1]&&(t.l=s[i][1],g=!1);break}if((!e||i==0)&&t.l<=s[i][1]&&(g=!1,t.l=s[i][1]),g)throw new Error("Read Error: Expected address "+s[i][1]+" at "+t.l+" :"+i)}if(e){var b=e[s[i][0]];if(m[b.n]=Sy(t,b.t,{raw:!0}),b.p==="version"&&(m[b.n]=String(m[b.n]>>16)+"."+("0000"+String(m[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(m[b.n]){case 0:m[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Tc(o=m[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[b.n])}}else if(s[i][0]===1){if(o=m.CodePage=Sy(t,$4),Tc(o),l!==-1){var y=t.l;t.l=s[l][1],u=g6(t,o),t.l=y}}else if(s[i][0]===0){if(o===0){l=i,t.l=s[i+1][1];continue}u=g6(t,o)}else{var E=u[s[i][0]],B;switch(t[t.l]){case 65:t.l+=4,B=ej(t);break;case 30:t.l+=4,B=x5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,B=x5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,B=t.read_shift(4,"i");break;case 19:t.l+=4,B=t.read_shift(4);break;case 5:t.l+=4,B=t.read_shift(8,"f");break;case 11:t.l+=4,B=rs(t,4);break;case 64:t.l+=4,B=ha(X4(t));break;default:throw new Error("unparsed value: "+t[t.l])}m[E]=B}}return t.l=r+n,m}var tj=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Eue(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function y6(t,e,r){var n=lt(8),a=[],s=[],i=8,o=0,l=lt(8),u=lt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),a.push(u),i+=8+l.length,!e){u=lt(8),u.write_shift(4,0),a.unshift(u);var d=[lt(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var h=t[o][0];for(l=lt(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Ys(d),s.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(tj.indexOf(t[o][0])>-1||KP.indexOf(t[o][0])>-1)&&t[o][1]!=null){var m=t[o][1],g=0;if(e){g=+e[t[o][0]];var b=r[g];if(b.p=="version"&&typeof m=="string"){var y=m.split(".");m=(+y[0]<<16)+(+y[1]||0)}l=x6(b.t,m)}else{var E=Eue(m);E==-1&&(E=31,m=String(m)),l=x6(E,m)}s.push(l),u=lt(8),u.write_shift(4,e?g:2+o),a.push(u),i+=8+l.length}var B=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,B),B+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Ys([n].concat(a).concat(s))}function w6(t,e,r){var n=t.content;if(!n)return{};ui(n,0);var a,s,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==ur.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),l=n.read_shift(4));var h=v6(n,e),m={SystemIdentifier:u};for(var g in h)m[g]=h[g];if(m.FMTID=s,a===1)return m;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var b;try{b=v6(n,null)}catch{}for(g in b)m[g]=b[g];return m.FMTID=[s,i],m}function b6(t,e,r,n,a,s){var i=lt(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,ur.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,a?68:48);var l=y6(t,r,n);if(o.push(l),a){var u=y6(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(u)}return Ys(o)}function kd(t,e){return t.read_shift(e),null}function _ue(t,e){e||(e=lt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function Sue(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function rs(t,e){return t.read_shift(e)===1}function ro(t,e){return e||(e=lt(2)),e.write_shift(2,+!!t),e}function Cs(t){return t.read_shift(2,"u")}function Ml(t,e){return e||(e=lt(2)),e.write_shift(2,t),e}function rj(t,e){return Sue(t,e,Cs)}function Tue(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function nj(t,e,r){return r||(r=lt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function t1(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?t.read_shift(n,a):"";return i}function Bue(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,l={};a&&(i=t.read_shift(2)),n&&(o=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*i),n&&(t.l+=o),l.t=d,a||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Nue(t){var e=t.t||"",r=lt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=lt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return Ys(a)}function Ih(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function r1(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Ih(t,n,r)}function $h(t,e,r){if(r.biff>5)return r1(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function aj(t,e,r){return r||(r=lt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function kue(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function Iue(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(so,"");return n&&(t.l+=24),a}function Fue(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(s>>1,"utf16le").replace(so,"");return r+i}function Due(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Iue(t);case"0303000000000000c000000000000046":return Fue(t);default:throw new Error("Unsupported Moniker "+r)}}function kv(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(so,""):"";return r}function C6(t,e){e||(e=lt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function Rue(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,i,o,l,u="",d,h;a&16&&(s=kv(t,r-t.l)),a&128&&(i=kv(t,r-t.l)),(a&257)===257&&(o=kv(t,r-t.l)),(a&257)===1&&(l=Due(t,r-t.l)),a&8&&(u=kv(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(h=X4(t)),t.l=r;var m=i||o||l||"";m&&u&&(m+="#"+u),m||(m="#"+u),a&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var g={Target:m};return d&&(g.guid=d),h&&(g.time=h),s&&(g.Tooltip=s),g}function Lue(t){var e=lt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(s==28)n=n.slice(1),C6(n,e);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&C6(a>-1?n.slice(a+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function sj(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function ij(t,e){var r=sj(t);return r[3]=0,r}function Pu(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Fh(t,e,r,n){return n||(n=lt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function Uue(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function Mue(t,e,r){return e===0?"":$h(t,e,r)}function Pue(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[a,s,i]}function oj(t){var e=t.read_shift(2),r=K4(t);return[e,r]}function jue(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=t1(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function qw(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function lj(t,e){return e||(e=lt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function cj(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var Oue=cj;function uj(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function Que(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function Hue(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Di(t){t.l+=2,t.l+=t.read_shift(2)}var Vue={0:Di,4:Di,5:Di,6:Di,7:Hue,8:Di,9:Di,10:Di,11:Di,12:Di,13:Que,14:Di,15:Di,16:Di,17:Di,18:Di,19:Di,20:Di,21:uj};function zue(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(Vue[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Iv(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function Y4(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=lt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Gue(t,e){return e===0||t.read_shift(2),1200}function que(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=$h(t,0,r);return t.read_shift(e+n-t.l),a}function Kue(t,e){var r=!e||e.biff==8,n=lt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function $ue(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Wue(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=t1(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function Xue(t,e){var r=!e||e.biff>=8?2:1,n=lt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function Yue(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0;i!=a&&t.l<r;++i)s.push(Bue(t));return s.Count=n,s.Unique=a,s}function Jue(t,e){var r=lt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=Nue(t[a]);var s=Ys([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function Zue(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function eAe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function tAe(t){var e=Uue(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function rAe(t){return t.read_shift(2),t.read_shift(4)}function E6(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function nAe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function aAe(){var t=lt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function sAe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function iAe(t){var e=lt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function oAe(){}function lAe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=t1(t,0,r),n}function cAe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=lt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function uAe(t){var e=Pu(t);return e.isst=t.read_shift(4),e}function AAe(t,e,r,n){var a=lt(10);return Fh(t,e,n,a),a.write_shift(4,r),a}function dAe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=Pu(t);r.biff==2&&t.l++;var s=r1(t,n-t.l,r);return a.val=s,a}function fAe(t,e,r,n,a){var s=!a||a.biff==8,i=lt(8+ +s+(1+s)*r.length);return Fh(t,e,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function hAe(t,e,r){var n=t.read_shift(2),a=$h(t,0,r);return[n,a]}function mAe(t,e,r,n){var a=r&&r.biff==5;n||(n=lt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var pAe=$h;function _6(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),i=t.read_shift(a),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:s,c:o},e:{r:i,c:l}}}function gAe(t,e){var r=e.biff==8||!e.biff?4:2,n=lt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function xAe(t){var e=t.read_shift(2),r=t.read_shift(2),n=oj(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function vAe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(oj(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function yAe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function wAe(t,e,r,n){var a={},s=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return a.patternType=tue[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=l&127,a.icvBack=l>>7&127,a.fsxButton=l>>14&1),a}function bAe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=wAe(t,e,n.fStyle,r),n}function S6(t,e,r,n){var a=r&&r.biff==5;n||(n=lt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function CAe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function EAe(t){var e=lt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function T6(t,e,r){var n=Pu(t);(r.biff==2||e==9)&&++t.l;var a=Tue(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function _Ae(t,e,r,n,a,s){var i=lt(8);return Fh(t,e,n,i),nj(r,s,i),i}function SAe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Pu(t),a=Hi(t);return n.val=a,n}function TAe(t,e,r,n){var a=lt(14);return Fh(t,e,n,a),kh(r,a),a}var B6=Mue;function BAe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Ih(t,s),o=[];n>t.l;)o.push(r1(t));return[s,a,i,o]}function N6(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=jue(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var NAe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function k6(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=Ih(t,i,r);a&32&&(u=NAe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var h=n==t.l||o===0||!(d>0)?[]:z0e(t,d,r,o);return{chKey:s,Name:u,itab:l,rgce:h}}function Aj(t,e,r){if(r.biff<8)return kAe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(Pue(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function kAe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=t1(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function IAe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=Ih(t,n,r),i=Ih(t,a,r);return[s,i]}function FAe(t,e,r){var n=cj(t);t.l++;var a=t.read_shift(1);return e-=8,[G0e(t,e,r),a,n]}function I6(t,e,r){var n=Oue(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,H0e(t,e,r)]}function DAe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function RAe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=$h(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},o,i,s]}}function LAe(t,e,r){return RAe(t,e,r)}function UAe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(qw(t));return r}function MAe(t){var e=lt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)lj(t[r],e);return e}function PAe(t,e,r){if(r&&r.biff<8)return OAe(t,e,r);var n=uj(t),a=zue(t,e-22,n[1]);return{cmo:n,ft:a}}var jAe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function OAe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((jAe[n]||qi)(t,e,r)),{cmo:[a,n,s],ft:i}}function QAe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:i=kue(t,6,r);var o=t.read_shift(2);t.read_shift(2),Cs(t,2);var l=t.read_shift(2);t.l+=l;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],h=Ih(t,t.lens[u+1]-t.lens[u]-1);if(a+=h,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function HAe(t,e){var r=qw(t);t.l+=16;var n=Rue(t,e-24);return[r,n]}function VAe(t){var e=lt(24),r=Ia(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return Ys([e,Lue(t[1])])}function zAe(t,e){t.read_shift(2);var r=qw(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(so,""),[r,n]}function GAe(t){var e=t[1].Tooltip,r=lt(10+2*(e.length+1));r.write_shift(2,2048);var n=Ia(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function qAe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=m6[r]||r,r=t.read_shift(2),e[1]=m6[r]||r,e}function KAe(t){return t||(t=lt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function $Ae(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(ij(t));return r}function WAe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(ij(t));return r}function XAe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function dj(t,e,r){if(!r.cellStyles)return qi(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),i=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function YAe(t,e){var r=lt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function JAe(t,e){var r={};return e<32||(t.l+=16,r.header=Hi(t),r.footer=Hi(t),t.l+=2),r}function ZAe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function ede(t){for(var e=lt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var tde=Pu,rde=rj,nde=r1;function ade(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function sde(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Pu(t);++t.l;var a=$h(t,e-7,r);return n.t="str",n.val=a,n}function ide(t){var e=Pu(t);++t.l;var r=Hi(t);return e.t="n",e.val=r,e}function ode(t,e,r){var n=lt(15);return i1(n,t,e),n.write_shift(8,r,"f"),n}function lde(t){var e=Pu(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function cde(t,e,r){var n=lt(9);return i1(n,t,e),n.write_shift(2,r),n}function ude(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Ade(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function dde(t,e,r){var n=t.l+e,a=Pu(t),s=t.read_shift(2),i=Ih(t,s,r);return t.l=n,a.t="str",a.val=i,a}var fde=[2,3,48,49,131,139,140,245],v5=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Vw({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=xf(1);switch(l.type){case"base64":d=el(il(o));break;case"binary":d=el(o);break;case"buffer":case"array":d=o;break}ui(d,0);var h=d.read_shift(1),m=!!(h&136),g=!1,b=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,m=!0;break;case 49:g=!0,m=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var y=0,E=521;h==2&&(y=d.read_shift(2)),d.l+=3,h!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),h!=2&&(E=d.read_shift(2));var B=d.read_shift(2),k=l.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=t[d[d.l]]),d.l+=1,d.l+=2),b&&(d.l+=36);for(var L=[],M={},P=Math.min(d.length,h==2?521:E-10-(g?264:0)),R=b?32:11;d.l<P&&d[d.l]!=13;)switch(M={},M.name=lx.utils.decode(k,d.slice(d.l,d.l+R)).replace(/[\u0000\r\n].*$/g,""),d.l+=R,M.type=String.fromCharCode(d.read_shift(1)),h!=2&&!b&&(M.offset=d.read_shift(4)),M.len=d.read_shift(1),h==2&&(M.offset=d.read_shift(2)),M.dec=d.read_shift(1),M.name.length&&L.push(M),h!=2&&(d.l+=b?13:14),M.type){case"B":(!g||M.len!=8)&&l.WTF&&console.log("Skipping "+M.name+":"+M.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+M.name+":"+M.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+M.type)}if(d[d.l]!==13&&(d.l=E-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=E;var C=0,S=0;for(u[0]=[],S=0;S!=L.length;++S)u[0][S]=L[S].name;for(;y-- >0;){if(d[d.l]===42){d.l+=B;continue}for(++d.l,u[++C]=[],S=0,S=0;S!=L.length;++S){var N=d.slice(d.l,d.l+L[S].len);d.l+=L[S].len,ui(N,0);var Q=lx.utils.decode(k,N);switch(L[S].type){case"C":Q.trim().length&&(u[C][S]=Q.replace(/\s+$/,""));break;case"D":Q.length===8?u[C][S]=new Date(+Q.slice(0,4),+Q.slice(4,6)-1,+Q.slice(6,8)):u[C][S]=Q;break;case"F":u[C][S]=parseFloat(Q.trim());break;case"+":case"I":u[C][S]=b?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(Q.trim().toUpperCase()){case"Y":case"T":u[C][S]=!0;break;case"N":case"F":u[C][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Q+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));u[C][S]="##MEMO##"+(b?parseInt(Q.trim(),10):N.read_shift(4));break;case"N":Q=Q.replace(/\u0000/g,"").trim(),Q&&Q!="."&&(u[C][S]=+Q||0);break;case"@":u[C][S]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":u[C][S]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":u[C][S]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[C][S]=-N.read_shift(-8,"f");break;case"B":if(g&&L[S].len==8){u[C][S]=N.read_shift(8,"f");break}case"G":case"P":N.l+=L[S].len;break;case"0":if(L[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+L[S].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=L,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=rp(r(o,u),u);return d["!cols"]=u.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete u.DBF,d}function a(o,l){try{return Tf(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&Tc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=No(),h=Ny(o,{header:1,raw:!0,cellDates:!0}),m=h[0],g=h.slice(1),b=o["!cols"]||[],y=0,E=0,B=0,k=1;for(y=0;y<m.length;++y){if(((b[y]||{}).DBF||{}).name){m[y]=b[y].DBF.name,++B;continue}if(m[y]!=null){if(++B,typeof m[y]=="number"&&(m[y]=m[y].toString(10)),typeof m[y]!="string")throw new Error("DBF Invalid column name "+m[y]+" |"+typeof m[y]+"|");if(m.indexOf(m[y])!==y){for(E=0;E<1024;++E)if(m.indexOf(m[y]+"_"+E)==-1){m[y]+="_"+E;break}}}}var L=En(o["!ref"]),M=[],P=[],R=[];for(y=0;y<=L.e.c-L.s.c;++y){var C="",S="",N=0,Q=[];for(E=0;E<g.length;++E)g[E][y]!=null&&Q.push(g[E][y]);if(Q.length==0||m[y]==null){M[y]="?";continue}for(E=0;E<Q.length;++E){switch(typeof Q[E]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=Q[E]instanceof Date?"D":"C";break;default:S="C"}N=Math.max(N,String(Q[E]).length),C=C&&C!=S?"C":S}N>250&&(N=250),S=((b[y]||{}).DBF||{}).type,S=="C"&&b[y].DBF.len>N&&(N=b[y].DBF.len),C=="B"&&S=="N"&&(C="N",R[y]=b[y].DBF.dec,N=b[y].DBF.len),P[y]=C=="C"||S=="N"?N:s[C]||0,k+=P[y],M[y]=C}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,g.length),D.write_shift(2,296+32*B),D.write_shift(2,k),y=0;y<4;++y)D.write_shift(4,0);for(D.write_shift(4,0|(+e[tP]||3)<<8),y=0,E=0;y<m.length;++y)if(m[y]!=null){var I=d.next(32),O=(m[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,O,"sbcs"),I.write_shift(1,M[y]=="?"?"C":M[y],"sbcs"),I.write_shift(4,E),I.write_shift(1,P[y]||s[M[y]]||0),I.write_shift(1,R[y]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),E+=P[y]||s[M[y]]||0}var z=d.next(264);for(z.write_shift(4,13),y=0;y<65;++y)z.write_shift(4,0);for(y=0;y<g.length;++y){var re=d.next(k);for(re.write_shift(1,0),E=0;E<m.length;++E)if(m[E]!=null)switch(M[E]){case"L":re.write_shift(1,g[y][E]==null?63:g[y][E]?84:70);break;case"B":re.write_shift(8,g[y][E]||0,"f");break;case"N":var Y="0";for(typeof g[y][E]=="number"&&(Y=g[y][E].toFixed(R[E]||0)),B=0;B<P[E]-Y.length;++B)re.write_shift(1,32);re.write_shift(1,Y,"sbcs");break;case"D":g[y][E]?(re.write_shift(4,("0000"+g[y][E].getFullYear()).slice(-4),"sbcs"),re.write_shift(2,("00"+(g[y][E].getMonth()+1)).slice(-2),"sbcs"),re.write_shift(2,("00"+g[y][E].getDate()).slice(-2),"sbcs")):re.write_shift(8,"00000000","sbcs");break;case"C":var ae=String(g[y][E]!=null?g[y][E]:"").slice(0,P[E]);for(re.write_shift(1,ae,"sbcs"),B=0;B<P[E]-ae.length;++B)re.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),fj=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ka(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,g){var b=t[g];return typeof b=="number"?HF(b):b},n=function(m,g,b){var y=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return y==59?m:HF(y)};t["|"]=254;function a(m,g){switch(g.type){case"base64":return s(il(m),g);case"binary":return s(m,g);case"buffer":return s(Yr&&Buffer.isBuffer(m)?m.toString("binary"):Sf(m),g);case"array":return s(Nh(m),g)}throw new Error("Unrecognized type "+g.type)}function s(m,g){var b=m.split(/[\n\r]+/),y=-1,E=-1,B=0,k=0,L=[],M=[],P=null,R={},C=[],S=[],N=[],Q=0,D;for(+g.codepage>=0&&Tc(+g.codepage);B!==b.length;++B){Q=0;var I=b[B].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),O=I.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),z=O[0],re;if(I.length>0)switch(z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":O[1].charAt(0)=="P"&&M.push(I.slice(3).replace(/;;/g,";"));break;case"C":var Y=!1,ae=!1,K=!1,G=!1,W=-1,ie=-1;for(k=1;k<O.length;++k)switch(O[k].charAt(0)){case"A":break;case"X":E=parseInt(O[k].slice(1))-1,ae=!0;break;case"Y":for(y=parseInt(O[k].slice(1))-1,ae||(E=0),D=L.length;D<=y;++D)L[D]=[];break;case"K":re=O[k].slice(1),re.charAt(0)==='"'?re=re.slice(1,re.length-1):re==="TRUE"?re=!0:re==="FALSE"?re=!1:isNaN(Nc(re))?isNaN(Dm(re).getDate())||(re=ha(re)):(re=Nc(re),P!==null&&ep(P)&&(re=Gw(re))),Y=!0;break;case"E":G=!0;var j=xm(O[k].slice(1),{r:y,c:E});L[y][E]=[L[y][E],j];break;case"S":K=!0,L[y][E]=[L[y][E],"S5S"];break;case"G":break;case"R":W=parseInt(O[k].slice(1))-1;break;case"C":ie=parseInt(O[k].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+I)}if(Y&&(L[y][E]&&L[y][E].length==2?L[y][E][0]=re:L[y][E]=re,P=null),K){if(G)throw new Error("SYLK shared formula cannot have own formula");var X=W>-1&&L[W][ie];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");L[y][E][1]=Ij(X[1],{r:y-W,c:E-ie})}break;case"F":var Z=0;for(k=1;k<O.length;++k)switch(O[k].charAt(0)){case"X":E=parseInt(O[k].slice(1))-1,++Z;break;case"Y":for(y=parseInt(O[k].slice(1))-1,D=L.length;D<=y;++D)L[D]=[];break;case"M":Q=parseInt(O[k].slice(1))/20;break;case"F":break;case"G":break;case"P":P=M[parseInt(O[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(N=O[k].slice(1).split(" "),D=parseInt(N[0],10);D<=parseInt(N[1],10);++D)Q=parseInt(N[2],10),S[D-1]=Q===0?{hidden:!0}:{wch:Q},vf(S[D-1]);break;case"C":E=parseInt(O[k].slice(1))-1,S[E]||(S[E]={});break;case"R":y=parseInt(O[k].slice(1))-1,C[y]||(C[y]={}),Q>0?(C[y].hpt=Q,C[y].hpx=Lm(Q)):Q===0&&(C[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+I)}Z<1&&(P=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+I)}}return C.length>0&&(R["!rows"]=C),S.length>0&&(R["!cols"]=S),g&&g.sheetRows&&(L=L.slice(0,g.sheetRows)),[L,R]}function i(m,g){var b=a(m,g),y=b[0],E=b[1],B=rp(y,g);return Ka(E).forEach(function(k){B[k]=E[k]}),B}function o(m,g){return Tf(i(m,g),g)}function l(m,g,b,y){var E="C;Y"+(b+1)+";X"+(y+1)+";K";switch(m.t){case"n":E+=m.v||0,m.f&&!m.F&&(E+=";E"+nT(m.f,{r:b,c:y}));break;case"b":E+=m.v?"TRUE":"FALSE";break;case"e":E+=m.w||m.v;break;case"d":E+='"'+(m.w||m.v)+'"';break;case"s":E+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function u(m,g){g.forEach(function(b,y){var E="F;W"+(y+1)+" "+(y+1)+" ";b.hidden?E+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=px(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=gx(b.wpx)),typeof b.wch=="number"&&(E+=Math.round(b.wch))),E.charAt(E.length-1)!=" "&&m.push(E)})}function d(m,g){g.forEach(function(b,y){var E="F;";b.hidden?E+="M0;":b.hpt?E+="M"+20*b.hpt+";":b.hpx&&(E+="M"+20*xx(b.hpx)+";"),E.length>2&&m.push(E+"R"+(y+1))})}function h(m,g){var b=["ID;PWXL;N;E"],y=[],E=En(m["!ref"]),B,k=Array.isArray(m),L=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),m["!cols"]&&u(b,m["!cols"]),m["!rows"]&&d(b,m["!rows"]),b.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var M=E.s.r;M<=E.e.r;++M)for(var P=E.s.c;P<=E.e.c;++P){var R=Er({r:M,c:P});B=k?(m[M]||[])[P]:m[R],!(!B||B.v==null&&(!B.f||B.F))&&y.push(l(B,m,M,P))}return b.join(L)+L+y.join(L)+L+"E"+L}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),hj=function(){function t(s,i){switch(i.type){case"base64":return e(il(s),i);case"binary":return e(s,i);case"buffer":return e(Yr&&Buffer.isBuffer(s)?s.toString("binary"):Sf(s),i);case"array":return e(Nh(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){for(var o=s.split(`
`),l=-1,u=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++l]=[],u=0;continue}if(!(l<0)){var m=o[d].trim().split(","),g=m[0],b=m[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+g){case-1:if(y==="BOT"){h[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?h[l][u]=!0:y==="FALSE"?h[l][u]=!1:isNaN(Nc(b))?isNaN(Dm(b).getDate())?h[l][u]=b:h[l][u]=ha(b):h[l][u]=Nc(b),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),h[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function r(s,i){return rp(t(s,i),i)}function n(s,i){return Tf(r(s,i),i)}var a=function(){var s=function(l,u,d,h,m){l.push(u),l.push(d+","+h),l.push('"'+m.replace(/"/g,'""')+'"')},i=function(l,u,d,h){l.push(u+","+d),l.push(u==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var u=[],d=En(l["!ref"]),h,m=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var b=d.s.c;b<=d.e.c;++b){var y=Er({r:g,c:b});if(h=m?(l[g]||[])[b]:l[y],!h){i(u,1,0,"");continue}switch(h.t){case"n":var E=h.w;!E&&h.v!=null&&(E=h.v),E==null?h.f&&!h.F?i(u,1,0,"="+h.f):i(u,1,0,""):i(u,0,E,"V");break;case"b":i(u,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=$l(h.z||vr[14],Ps(ha(h.v)))),i(u,0,h.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var B=`\r
`,k=u.join(B);return k}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),mj=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,m){for(var g=h.split(`
`),b=-1,y=-1,E=0,B=[];E!==g.length;++E){var k=g[E].trim().split(":");if(k[0]==="cell"){var L=Ia(k[1]);if(B.length<=L.r)for(b=B.length;b<=L.r;++b)B[b]||(B[b]=[]);switch(b=L.r,y=L.c,k[2]){case"t":B[b][y]=t(k[3]);break;case"v":B[b][y]=+k[3];break;case"vtf":var M=k[k.length-1];case"vtc":switch(k[3]){case"nl":B[b][y]=!!+k[4];break;default:B[b][y]=+k[4];break}k[2]=="vtf"&&(B[b][y]=[B[b][y],M])}}}return m&&m.sheetRows&&(B=B.slice(0,m.sheetRows)),B}function n(h,m){return rp(r(h,m),m)}function a(h,m){return Tf(n(h,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(h){if(!h||!h["!ref"])return"";for(var m=[],g=[],b,y="",E=Io(h["!ref"]),B=Array.isArray(h),k=E.s.r;k<=E.e.r;++k)for(var L=E.s.c;L<=E.e.c;++L)if(y=Er({r:k,c:L}),b=B?(h[k]||[])[L]:h[y],!(!b||b.v==null||b.t==="z")){switch(g=["cell",y,"t"],b.t){case"s":case"str":g.push(e(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=e(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=e(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var M=Ps(ha(b.v));g[2]="vtc",g[3]="nd",g[4]=""+M,g[5]=b.w||$l(b.z||vr[14],M);break;case"e":continue}m.push(g.join(":"))}return m.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(h){return[s,i,o,i,u(h),l].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Rm=function(){function t(d,h,m,g,b){b.raw?h[m][g]=d:d===""||(d==="TRUE"?h[m][g]=!0:d==="FALSE"?h[m][g]=!1:isNaN(Nc(d))?isNaN(Dm(d).getDate())?h[m][g]=d:h[m][g]=ha(d):h[m][g]=Nc(d))}function e(d,h){var m=h||{},g=[];if(!d||d.length===0)return g;for(var b=d.split(/[\r\n]/),y=b.length-1;y>=0&&b[y].length===0;)--y;for(var E=10,B=0,k=0;k<=y;++k)B=b[k].indexOf(" "),B==-1?B=b[k].length:B++,E=Math.max(E,B);for(k=0;k<=y;++k){g[k]=[];var L=0;for(t(b[k].slice(0,E).trim(),g,k,L,m),L=1;L<=(b[k].length-E)/10+1;++L)t(b[k].slice(E+(L-1)*10,E+L*10).trim(),g,k,L,m)}return m.sheetRows&&(g=g.slice(0,m.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var h={},m=!1,g=0,b=0;g<d.length;++g)(b=d.charCodeAt(g))==34?m=!m:!m&&b in r&&(h[b]=(h[b]||0)+1);b=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g]);if(!b.length){h=n;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g])}return b.sort(function(y,E){return y[0]-E[0]||n[y[1]]-n[E[1]]}),r[b.pop()[1]]||44}function s(d,h){var m=h||{},g="",b=m.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=a(d.slice(0,1024)):m&&m.FS?g=m.FS:g=a(d.slice(0,1024));var E=0,B=0,k=0,L=0,M=0,P=g.charCodeAt(0),R=!1,C=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var N=m.dateNF!=null?Zle(m.dateNF):null;function Q(){var D=d.slice(L,M),I={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)I.t="z";else if(m.raw)I.t="s",I.v=D;else if(D.trim().length===0)I.t="s",I.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(I.t="s",I.v=D.slice(2,-1).replace(/""/g,'"')):Bhe(D)?(I.t="n",I.f=D.slice(1)):(I.t="s",I.v=D);else if(D=="TRUE")I.t="b",I.v=!0;else if(D=="FALSE")I.t="b",I.v=!1;else if(!isNaN(k=Nc(D)))I.t="n",m.cellText!==!1&&(I.w=D),I.v=k;else if(!isNaN(Dm(D).getDate())||N&&D.match(N)){I.z=m.dateNF||vr[14];var O=0;N&&D.match(N)&&(D=ece(D,m.dateNF,D.match(N)||[]),O=1),m.cellDates?(I.t="d",I.v=ha(D,O)):(I.t="n",I.v=Ps(ha(D,O))),m.cellText!==!1&&(I.w=$l(I.z,I.v instanceof Date?Ps(I.v):I.v)),m.cellNF||delete I.z}else I.t="s",I.v=D;if(I.t=="z"||(m.dense?(b[E]||(b[E]=[]),b[E][B]=I):b[Er({c:B,r:E})]=I),L=M+1,S=d.charCodeAt(L),y.e.c<B&&(y.e.c=B),y.e.r<E&&(y.e.r=E),C==P)++B;else if(B=0,++E,m.sheetRows&&m.sheetRows<=E)return!0}e:for(;M<d.length;++M)switch(C=d.charCodeAt(M)){case 34:S===34&&(R=!R);break;case P:case 10:case 13:if(!R&&Q())break e;break}return M-L>0&&Q(),b["!ref"]=Mr(y),b}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,h):rp(e(d,h),h)}function o(d,h){var m="",g=h.type=="string"?[0,0,0,0]:AT(d,h);switch(h.type){case"base64":m=il(d);break;case"binary":m=d;break;case"buffer":h.codepage==65001?m=d.toString("utf8"):h.codepage&&typeof lx<"u"||(m=Yr&&Buffer.isBuffer(d)?d.toString("binary"):Sf(d));break;case"array":m=Nh(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?m=ra(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=ra(m):h.type=="binary"&&typeof lx<"u",m.slice(0,19)=="socialcalc:version:"?mj.to_sheet(h.type=="string"?m:ra(m),h):i(m,h)}function l(d,h){return Tf(o(d,h),h)}function u(d){for(var h=[],m=En(d["!ref"]),g,b=Array.isArray(d),y=m.s.r;y<=m.e.r;++y){for(var E=[],B=m.s.c;B<=m.e.c;++B){var k=Er({r:y,c:B});if(g=b?(d[y]||[])[B]:d[k],!g||g.v==null){E.push("          ");continue}for(var L=(g.w||(MA(g),g.w)||"").slice(0,10);L.length<10;)L+=" ";E.push(L+(B===0?" ":""))}h.push(E.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function hde(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=fj.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Rm.to_workbook(t,e)}}var xh=function(){function t(j,X,Z){if(j){ui(j,j.l||0);for(var te=Z.Enum||W;j.l<j.length;){var ce=j.read_shift(2),de=te[ce]||te[65535],me=j.read_shift(2),ge=j.l+me,Te=de.f&&de.f(j,me,Z);if(j.l=ge,X(Te,de,ce))return}}}function e(j,X){switch(X.type){case"base64":return r(el(il(j)),X);case"binary":return r(el(j),X);case"buffer":case"array":return r(j,X)}throw"Unsupported type "+X.type}function r(j,X){if(!j)return j;var Z=X||{},te=Z.dense?[]:{},ce="Sheet1",de="",me=0,ge={},Te=[],xe=[],oe={s:{r:0,c:0},e:{r:0,c:0}},Me=Z.sheetRows||0;if(j[2]==0&&(j[3]==8||j[3]==9)&&j.length>=16&&j[14]==5&&j[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(j[2]==2)Z.Enum=W,t(j,function(je,Ke,st){switch(st){case 0:Z.vers=je,je>=4096&&(Z.qpro=!0);break;case 6:oe=je;break;case 204:je&&(de=je);break;case 222:de=je;break;case 15:case 51:Z.qpro||(je[1].v=je[1].v.slice(1));case 13:case 14:case 16:st==14&&(je[2]&112)==112&&(je[2]&15)>1&&(je[2]&15)<15&&(je[1].z=Z.dateNF||vr[14],Z.cellDates&&(je[1].t="d",je[1].v=Gw(je[1].v))),Z.qpro&&je[3]>me&&(te["!ref"]=Mr(oe),ge[ce]=te,Te.push(ce),te=Z.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},me=je[3],ce=de||"Sheet"+(me+1),de="");var pt=Z.dense?(te[je[0].r]||[])[je[0].c]:te[Er(je[0])];if(pt){pt.t=je[1].t,pt.v=je[1].v,je[1].z!=null&&(pt.z=je[1].z),je[1].f!=null&&(pt.f=je[1].f);break}Z.dense?(te[je[0].r]||(te[je[0].r]=[]),te[je[0].r][je[0].c]=je[1]):te[Er(je[0])]=je[1];break}},Z);else if(j[2]==26||j[2]==14)Z.Enum=ie,j[2]==14&&(Z.qpro=!0,j.l=0),t(j,function(je,Ke,st){switch(st){case 204:ce=je;break;case 22:je[1].v=je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(je[3]>me&&(te["!ref"]=Mr(oe),ge[ce]=te,Te.push(ce),te=Z.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},me=je[3],ce="Sheet"+(me+1)),Me>0&&je[0].r>=Me)break;Z.dense?(te[je[0].r]||(te[je[0].r]=[]),te[je[0].r][je[0].c]=je[1]):te[Er(je[0])]=je[1],oe.e.c<je[0].c&&(oe.e.c=je[0].c),oe.e.r<je[0].r&&(oe.e.r=je[0].r);break;case 27:je[14e3]&&(xe[je[14e3][0]]=je[14e3][1]);break;case 1537:xe[je[0]]=je[1],je[0]==me&&(ce=je[1]);break}},Z);else throw new Error("Unrecognized LOTUS BOF "+j[2]);if(te["!ref"]=Mr(oe),ge[de||ce]=te,Te.push(de||ce),!xe.length)return{SheetNames:Te,Sheets:ge};for(var at={},Se=[],be=0;be<xe.length;++be)ge[Te[be]]?(Se.push(xe[be]||Te[be]),at[xe[be]]=ge[xe[be]]||ge[Te[be]]):(Se.push(xe[be]),at[xe[be]]={"!ref":"A1"});return{SheetNames:Se,Sheets:at}}function n(j,X){var Z=X||{};if(+Z.codepage>=0&&Tc(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK1 to JS string");var te=No(),ce=En(j["!ref"]),de=Array.isArray(j),me=[];Pt(te,0,s(1030)),Pt(te,6,l(ce));for(var ge=Math.min(ce.e.r,8191),Te=ce.s.r;Te<=ge;++Te)for(var xe=us(Te),oe=ce.s.c;oe<=ce.e.c;++oe){Te===ce.s.r&&(me[oe]=ka(oe));var Me=me[oe]+xe,at=de?(j[Te]||[])[oe]:j[Me];if(!(!at||at.t=="z"))if(at.t=="n")(at.v|0)==at.v&&at.v>=-32768&&at.v<=32767?Pt(te,13,g(Te,oe,at.v)):Pt(te,14,y(Te,oe,at.v));else{var Se=MA(at);Pt(te,15,h(Te,oe,Se.slice(0,239)))}}return Pt(te,1),te.end()}function a(j,X){var Z=X||{};if(+Z.codepage>=0&&Tc(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK3 to JS string");var te=No();Pt(te,0,i(j));for(var ce=0,de=0;ce<j.SheetNames.length;++ce)(j.Sheets[j.SheetNames[ce]]||{})["!ref"]&&Pt(te,27,G(j.SheetNames[ce],de++));var me=0;for(ce=0;ce<j.SheetNames.length;++ce){var ge=j.Sheets[j.SheetNames[ce]];if(!(!ge||!ge["!ref"])){for(var Te=En(ge["!ref"]),xe=Array.isArray(ge),oe=[],Me=Math.min(Te.e.r,8191),at=Te.s.r;at<=Me;++at)for(var Se=us(at),be=Te.s.c;be<=Te.e.c;++be){at===Te.s.r&&(oe[be]=ka(be));var je=oe[be]+Se,Ke=xe?(ge[at]||[])[be]:ge[je];if(!(!Ke||Ke.t=="z"))if(Ke.t=="n")Pt(te,23,Q(at,be,me,Ke.v));else{var st=MA(Ke);Pt(te,22,C(at,be,me,st.slice(0,239)))}}++me}}return Pt(te,1),te.end()}function s(j){var X=lt(2);return X.write_shift(2,j),X}function i(j){var X=lt(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var Z=0,te=0,ce=0,de=0;de<j.SheetNames.length;++de){var me=j.SheetNames[de],ge=j.Sheets[me];if(!(!ge||!ge["!ref"])){++ce;var Te=Io(ge["!ref"]);Z<Te.e.r&&(Z=Te.e.r),te<Te.e.c&&(te=Te.e.c)}}return Z>8191&&(Z=8191),X.write_shift(2,Z),X.write_shift(1,ce),X.write_shift(1,te),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function o(j,X,Z){var te={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&Z.qpro?(te.s.c=j.read_shift(1),j.l++,te.s.r=j.read_shift(2),te.e.c=j.read_shift(1),j.l++,te.e.r=j.read_shift(2),te):(te.s.c=j.read_shift(2),te.s.r=j.read_shift(2),X==12&&Z.qpro&&(j.l+=2),te.e.c=j.read_shift(2),te.e.r=j.read_shift(2),X==12&&Z.qpro&&(j.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function l(j){var X=lt(8);return X.write_shift(2,j.s.c),X.write_shift(2,j.s.r),X.write_shift(2,j.e.c),X.write_shift(2,j.e.r),X}function u(j,X,Z){var te=[{c:0,r:0},{t:"n",v:0},0,0];return Z.qpro&&Z.vers!=20768?(te[0].c=j.read_shift(1),te[3]=j.read_shift(1),te[0].r=j.read_shift(2),j.l+=2):(te[2]=j.read_shift(1),te[0].c=j.read_shift(2),te[0].r=j.read_shift(2)),te}function d(j,X,Z){var te=j.l+X,ce=u(j,X,Z);if(ce[1].t="s",Z.vers==20768){j.l++;var de=j.read_shift(1);return ce[1].v=j.read_shift(de,"utf8"),ce}return Z.qpro&&j.l++,ce[1].v=j.read_shift(te-j.l,"cstr"),ce}function h(j,X,Z){var te=lt(7+Z.length);te.write_shift(1,255),te.write_shift(2,X),te.write_shift(2,j),te.write_shift(1,39);for(var ce=0;ce<te.length;++ce){var de=Z.charCodeAt(ce);te.write_shift(1,de>=128?95:de)}return te.write_shift(1,0),te}function m(j,X,Z){var te=u(j,X,Z);return te[1].v=j.read_shift(2,"i"),te}function g(j,X,Z){var te=lt(7);return te.write_shift(1,255),te.write_shift(2,X),te.write_shift(2,j),te.write_shift(2,Z,"i"),te}function b(j,X,Z){var te=u(j,X,Z);return te[1].v=j.read_shift(8,"f"),te}function y(j,X,Z){var te=lt(13);return te.write_shift(1,255),te.write_shift(2,X),te.write_shift(2,j),te.write_shift(8,Z,"f"),te}function E(j,X,Z){var te=j.l+X,ce=u(j,X,Z);if(ce[1].v=j.read_shift(8,"f"),Z.qpro)j.l=te;else{var de=j.read_shift(2);M(j.slice(j.l,j.l+de),ce),j.l+=de}return ce}function B(j,X,Z){var te=X&32768;return X&=-32769,X=(te?j:0)+(X>=8192?X-16384:X),(te?"":"$")+(Z?ka(X):us(X))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},L=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function M(j,X){ui(j,0);for(var Z=[],te=0,ce="",de="",me="",ge="";j.l<j.length;){var Te=j[j.l++];switch(Te){case 0:Z.push(j.read_shift(8,"f"));break;case 1:de=B(X[0].c,j.read_shift(2),!0),ce=B(X[0].r,j.read_shift(2),!1),Z.push(de+ce);break;case 2:{var xe=B(X[0].c,j.read_shift(2),!0),oe=B(X[0].r,j.read_shift(2),!1);de=B(X[0].c,j.read_shift(2),!0),ce=B(X[0].r,j.read_shift(2),!1),Z.push(xe+oe+":"+de+ce)}break;case 3:if(j.l<j.length){console.error("WK1 premature formula end");return}break;case 4:Z.push("("+Z.pop()+")");break;case 5:Z.push(j.read_shift(2));break;case 6:{for(var Me="";Te=j[j.l++];)Me+=String.fromCharCode(Te);Z.push('"'+Me.replace(/"/g,'""')+'"')}break;case 8:Z.push("-"+Z.pop());break;case 23:Z.push("+"+Z.pop());break;case 22:Z.push("NOT("+Z.pop()+")");break;case 20:case 21:ge=Z.pop(),me=Z.pop(),Z.push(["AND","OR"][Te-20]+"("+me+","+ge+")");break;default:if(Te<32&&L[Te])ge=Z.pop(),me=Z.pop(),Z.push(me+L[Te]+ge);else if(k[Te]){if(te=k[Te][1],te==69&&(te=j[j.l++]),te>Z.length){console.error("WK1 bad formula parse 0x"+Te.toString(16)+":|"+Z.join("|")+"|");return}var at=Z.slice(-te);Z.length-=te,Z.push(k[Te][0]+"("+at.join(",")+")")}else return Te<=7?console.error("WK1 invalid opcode "+Te.toString(16)):Te<=24?console.error("WK1 unsupported op "+Te.toString(16)):Te<=30?console.error("WK1 invalid opcode "+Te.toString(16)):Te<=115?console.error("WK1 unsupported function opcode "+Te.toString(16)):console.error("WK1 unrecognized opcode "+Te.toString(16))}}Z.length==1?X[1].f=""+Z[0]:console.error("WK1 bad formula parse |"+Z.join("|")+"|")}function P(j){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=j.read_shift(2),X[3]=j[j.l++],X[0].c=j[j.l++],X}function R(j,X){var Z=P(j);return Z[1].t="s",Z[1].v=j.read_shift(X-4,"cstr"),Z}function C(j,X,Z,te){var ce=lt(6+te.length);ce.write_shift(2,j),ce.write_shift(1,Z),ce.write_shift(1,X),ce.write_shift(1,39);for(var de=0;de<te.length;++de){var me=te.charCodeAt(de);ce.write_shift(1,me>=128?95:me)}return ce.write_shift(1,0),ce}function S(j,X){var Z=P(j);Z[1].v=j.read_shift(2);var te=Z[1].v>>1;if(Z[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return Z[1].v=te,Z}function N(j,X){var Z=P(j),te=j.read_shift(4),ce=j.read_shift(4),de=j.read_shift(2);if(de==65535)return te===0&&ce===3221225472?(Z[1].t="e",Z[1].v=15):te===0&&ce===3489660928?(Z[1].t="e",Z[1].v=42):Z[1].v=0,Z;var me=de&32768;return de=(de&32767)-16446,Z[1].v=(1-me*2)*(ce*Math.pow(2,de+32)+te*Math.pow(2,de)),Z}function Q(j,X,Z,te){var ce=lt(14);if(ce.write_shift(2,j),ce.write_shift(1,Z),ce.write_shift(1,X),te==0)return ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(2,65535),ce;var de=0,me=0,ge=0,Te=0;return te<0&&(de=1,te=-te),me=Math.log2(te)|0,te/=Math.pow(2,me-31),Te=te>>>0,(Te&2147483648)==0&&(te/=2,++me,Te=te>>>0),te-=Te,Te|=2147483648,Te>>>=0,te*=Math.pow(2,32),ge=te>>>0,ce.write_shift(4,ge),ce.write_shift(4,Te),me+=16383+(de?32768:0),ce.write_shift(2,me),ce}function D(j,X){var Z=N(j);return j.l+=X-14,Z}function I(j,X){var Z=P(j),te=j.read_shift(4);return Z[1].v=te>>6,Z}function O(j,X){var Z=P(j),te=j.read_shift(8,"f");return Z[1].v=te,Z}function z(j,X){var Z=O(j);return j.l+=X-10,Z}function re(j,X){return j[j.l+X-1]==0?j.read_shift(X,"cstr"):""}function Y(j,X){var Z=j[j.l++];Z>X-1&&(Z=X-1);for(var te="";te.length<Z;)te+=String.fromCharCode(j[j.l++]);return te}function ae(j,X,Z){if(!(!Z.qpro||X<21)){var te=j.read_shift(1);j.l+=17,j.l+=1,j.l+=2;var ce=j.read_shift(X-21,"cstr");return[te,ce]}}function K(j,X){for(var Z={},te=j.l+X;j.l<te;){var ce=j.read_shift(2);if(ce==14e3){for(Z[ce]=[0,""],Z[ce][0]=j.read_shift(2);j[j.l];)Z[ce][1]+=String.fromCharCode(j[j.l]),j.l++;j.l++}}return Z}function G(j,X){var Z=lt(5+j.length);Z.write_shift(2,14e3),Z.write_shift(2,X);for(var te=0;te<j.length;++te){var ce=j.charCodeAt(te);Z[Z.l++]=ce>127?95:ce}return Z[Z.l++]=0,Z}var W={0:{n:"BOF",f:Cs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:re},222:{n:"SHEETNAMELP",f:Y},65535:{n:""}},ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:R},23:{n:"NUMBER17",f:N},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:K},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:O},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:re},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ae},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function mde(t){var e={},r=t.match(Wi),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Nr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=B4[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var pde=function(){var t=Ax("t"),e=Ax("rPr");function r(s){var i=s.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:Cn(i[1])},l=s.match(e);return l&&(o.s=mde(l[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),gde=function(){var e=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var l=a.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),xde=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,vde=/<(?:\w+:)?r>/,yde=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function J4(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Cn(ra(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ra(t),r&&(n.h=P4(n.t))):t.match(vde)&&(n.r=ra(t),n.t=Cn(ra((t.replace(yde,"").match(xde)||[]).join("").replace(Wi,""))),r&&(n.h=gde(pde(n.r)))),n):{t:""}}var wde=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,bde=/<(?:\w+:)?(?:si|sstItem)>/g,Cde=/<\/(?:\w+:)?(?:si|sstItem)>/;function Ede(t,e){var r=[],n="";if(!t)return r;var a=t.match(wde);if(a){n=a[2].replace(bde,"").split(Cde);for(var s=0;s!=n.length;++s){var i=J4(n[s].trim(),e);i!=null&&(r[r.length]=i)}a=Nr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var _de=/^\s|\s$|[\t\n\r]/;function pj(t,e){if(!e.bookSST)return"";var r=[As];r[r.length]=Mt("sst",null,{xmlns:Vh[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(_de)&&(s+=' xml:space="preserve"'),s+=">"+Kn(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Sde(t){return[t.read_shift(4),t.read_shift(4)]}function Tde(t,e){var r=[],n=!1;return GA(t,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Bde(t,e){return e||(e=lt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var Nde=jce;function kde(t){var e=No();Ct(e,159,Bde(t));for(var r=0;r<t.length;++r)Ct(e,19,Nde(t[r]));return Ct(e,160),e.end()}function gj(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function kA(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function Ide(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=kA(t,4),e.U=kA(t,4),e.W=kA(t,4),e}function Fde(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function Dde(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(Fde(t));return e}function Rde(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function Lde(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=kA(t,4),e.U=kA(t,4),e.W=kA(t,4),e}function Ude(t){var e=Lde(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function xj(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function vj(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function Mde(t){var e=kA(t);switch(e.Minor){case 2:return[e.Minor,Pde(t)];case 3:return[e.Minor,jde()];case 4:return[e.Minor,Ode(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Pde(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=xj(t,r),a=vj(t,t.length-t.l);return{t:"Std",h:n,v:a}}function jde(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Ode(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Wi,function(s){var i=Nr(s);switch(Mu(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function Qde(t,e){var r={},n=r.EncryptionVersionInfo=kA(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=xj(t,a),e-=a,r.EncryptionVerifier=vj(t,e),r}function Hde(t){var e={},r=e.EncryptionVersionInfo=kA(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function Z4(t){var e=0,r,n=gj(t),a=n.length+1,s,i,o,l,u;for(r=xf(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^i;return e^52811}var yj=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=e[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],h=0;h!=7;++h)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=gj(i),l=s(o),u=o.length,d=xf(16),h=0;h!=16;++h)d[h]=0;var m,g,b;for((u&1)===1&&(m=l>>8,d[u]=a(t[0],m),--u,m=l&255,g=o[o.length-1],d[u]=a(g,m));u>0;)--u,m=l>>8,d[u]=a(o[u],m),--u,m=l&255,d[u]=a(o[u],m);for(u=15,b=15-o.length;b>0;)m=l>>8,d[u]=a(t[b],m),--u,--b,m=l&255,d[u]=a(o[u],m),--u,--b;return d}}(),Vde=function(t,e,r,n,a){a||(a=e),n||(n=yj(t));var s,i;for(s=0;s!=e.length;++s)i=e[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},zde=function(t){var e=0,r=yj(t);return function(n){var a=Vde("",n,e,r);return e=a[1],a[0]}};function Gde(t,e,r,n){var a={key:Cs(t),verificationBytes:Cs(t)};return r.password&&(a.verifier=Z4(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=zde(r.password)),a}function qde(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=Hde(t):n.Data=Qde(t,e),n}function Kde(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?qde(t,e-2,n):Gde(t,r.biff>=8?e:e-2,r,n),n}var wj=function(){function t(a,s){switch(s.type){case"base64":return e(il(a),s);case"binary":return e(a,s);case"buffer":return e(Yr&&Buffer.isBuffer(a)?a.toString("binary"):Sf(a),s);case"array":return e(Nh(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var i=s||{},o=i.dense?[]:{},l=a.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var m=/\\\w+\b/g,g=0,b,y=-1;b=m.exec(d);){switch(b[0]){case"\\cell":var E=d.slice(g,m.lastIndex-b[0].length);if(E[0]==" "&&(E=E.slice(1)),++y,E.length){var B={v:E,t:"s"};Array.isArray(o)?o[h][y]=B:o[Er({r:h,c:y})]=B}break}g=m.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=Mr(u),o}function r(a,s){return Tf(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=En(a["!ref"]),o,l=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=Er({r:u,c:d});o=l?(a[u]||[])[d]:a[h],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(MA(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function $de(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function mx(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function Wde(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),i=a-s;if(i===0)return[0,0,e];var o=0,l=0,u=a+s;switch(l=i/(u>1?2-u:u),a){case e:o=((r-n)/i+6)%6;break;case r:o=(n-e)/i+2;break;case n:o=(e-r)/i+4;break}return[o/6,l,u/2]}function Xde(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=a*o,i[0]+=a,i[1]+=l;break;case 1:l=a*(2-o),i[0]+=l,i[1]+=a;break;case 2:l=a*(o-2),i[1]+=a,i[2]+=l;break;case 3:l=a*(4-o),i[1]+=l,i[2]+=a;break;case 4:l=a*(o-4),i[2]+=a,i[0]+=l;break;case 5:l=a*(6-o),i[2]+=l,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function Ty(t,e){if(e===0)return t;var r=Wde($de(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),mx(Xde(r))}var bj=6,Yde=15,Jde=1,Oi=bj;function px(t){return Math.floor((t+Math.round(128/Oi)/256)*Oi)}function gx(t){return Math.floor((t-5)/Oi*100+.5)/100}function By(t){return Math.round((t*Oi+5)/Oi*256)/256}function xE(t){return By(gx(px(t)))}function eT(t){var e=Math.abs(t-xE(t)),r=Oi;if(e>.005)for(Oi=Jde;Oi<Yde;++Oi)Math.abs(t-xE(t))<=e&&(e=Math.abs(t-xE(t)),r=Oi);Oi=r}function vf(t){t.width?(t.wpx=px(t.width),t.wch=gx(t.wpx),t.MDW=Oi):t.wpx?(t.wch=gx(t.wpx),t.width=By(t.wch),t.MDW=Oi):typeof t.wch=="number"&&(t.width=By(t.wch),t.wpx=px(t.width),t.MDW=Oi),t.customWidth&&delete t.customWidth}var Zde=96,Cj=Zde;function xx(t){return t*96/Cj}function Lm(t){return t*Cj/96}var efe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function tfe(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(Wi)||[]).forEach(function(i){var o=Nr(i);switch(Mu(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=da(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=da(o.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function rfe(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(Wi)||[]).forEach(function(i){var o=Nr(i);switch(Mu(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function nfe(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(Wi)||[]).forEach(function(i){var o=Nr(i);switch(Mu(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=ra(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?da(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?da(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?da(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?da(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?da(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?da(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?da(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=B4[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=da(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var l=ph[a.color.index];a.color.index==81&&(l=ph[1]),l||(l=ph[1]),a.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=Ty(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function afe(t,e,r){e.NumberFmt=[];for(var n=Ka(vr),a=0;a<n.length;++a)e.NumberFmt[n[a]]=vr[n[a]];var s=t[0].match(Wi);if(s)for(a=0;a<s.length;++a){var i=Nr(s[a]);switch(Mu(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Cn(ra(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}NA(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function sfe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Mt("numFmt",null,{numFmtId:n,formatCode:Kn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Mt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Fv=["numFmtId","fillId","fontId","borderId","xfId"],Dv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function ife(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(Wi)||[]).forEach(function(s){var i=Nr(s),o=0;switch(Mu(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<Fv.length;++o)n[Fv[o]]&&(n[Fv[o]]=parseInt(n[Fv[o]],10));for(o=0;o<Dv.length;++o)n[Dv[o]]&&(n[Dv[o]]=da(n[Dv[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=da(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function ofe(t){var e=[];return e[e.length]=Mt("cellXfs",null),t.forEach(function(r){e[e.length]=Mt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Mt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var lfe=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&afe(h,d,u),(h=o.match(a))&&nfe(h,d,l,u),(h=o.match(n))&&rfe(h,d,l,u),(h=o.match(s))&&tfe(h,d,l,u),(h=o.match(r))&&ife(h,d,u),d}}();function Ej(t,e){var r=[As,Mt("styleSheet",null,{xmlns:Vh[0],"xmlns:vt":Us.vt})],n;return t.SSF&&(n=sfe(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=ofe(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function cfe(t,e){var r=t.read_shift(2),n=zi(t);return[r,n]}function ufe(t,e,r){r||(r=lt(6+4*e.length)),r.write_shift(2,t),Js(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Afe(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=qce(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=Gce(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=zi(t),n}function dfe(t,e){e||(e=lt(153)),e.write_shift(2,t.sz*20),Kce(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Ey(t.color,e);var n=0;return n=2,e.write_shift(1,n),Js(t.name,e),e.length>e.l?e.slice(0,e.l):e}var ffe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],vE,hfe=qi;function F6(t,e){e||(e=lt(84)),vE||(vE=Vw(ffe));var r=vE[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(Ey({auto:1},e),Ey({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function mfe(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function _j(t,e,r){r||(r=lt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Wp(t,e){return e||(e=lt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var pfe=qi;function gfe(t,e){return e||(e=lt(51)),e.write_shift(1,0),Wp(null,e),Wp(null,e),Wp(null,e),Wp(null,e),Wp(null,e),e.length>e.l?e.slice(0,e.l):e}function xfe(t,e){return e||(e=lt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Cy(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function vfe(t,e,r){var n=lt(2052);return n.write_shift(4,t),Cy(e,n),Cy(r,n),n.length>n.l?n.slice(0,n.l):n}function yfe(t,e,r){var n={};n.NumberFmt=[];for(var a in vr)n.NumberFmt[a]=vr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return GA(t,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],NA(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=Ty(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function wfe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(Ct(t,615,kc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Ct(t,44,ufe(a,e[a]))}),Ct(t,616))}}function bfe(t){var e=1;Ct(t,611,kc(e)),Ct(t,43,dfe({sz:12,color:{theme:1},name:"Calibri",family:2})),Ct(t,612)}function Cfe(t){var e=2;Ct(t,603,kc(e)),Ct(t,45,F6({patternType:"none"})),Ct(t,45,F6({patternType:"gray125"})),Ct(t,604)}function Efe(t){var e=1;Ct(t,613,kc(e)),Ct(t,46,gfe()),Ct(t,614)}function _fe(t){var e=1;Ct(t,626,kc(e)),Ct(t,47,_j({numFmtId:0},65535)),Ct(t,627)}function Sfe(t,e){Ct(t,617,kc(e.length)),e.forEach(function(r){Ct(t,47,_j(r,0))}),Ct(t,618)}function Tfe(t){var e=1;Ct(t,619,kc(e)),Ct(t,48,xfe({xfId:0,name:"Normal"})),Ct(t,620)}function Bfe(t){var e=0;Ct(t,505,kc(e)),Ct(t,506)}function Nfe(t){var e=0;Ct(t,508,vfe(e,"TableStyleMedium9","PivotStyleMedium4")),Ct(t,509)}function kfe(t,e){var r=No();return Ct(r,278),wfe(r,t.SSF),bfe(r),Cfe(r),Efe(r),_fe(r),Sfe(r,e.cellXfs),Tfe(r),Bfe(r),Nfe(r),Ct(r,279),r.end()}var Ife=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Ffe(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Wi)||[]).forEach(function(a){var s=Nr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[Ife.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Dfe(){}function Rfe(){}var Lfe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Ufe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Mfe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Pfe(t,e,r){e.themeElements={};var n;[["clrScheme",Lfe,Ffe],["fontScheme",Ufe,Dfe],["fmtScheme",Mfe,Rfe]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var jfe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Sj(t,e){(!t||t.length===0)&&(t=tT());var r,n={};if(!(r=t.match(jfe)))throw new Error("themeElements not found in theme");return Pfe(r[0],n,e),n.raw=t,n}function tT(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[As];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Ofe(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var i;try{i=xP(s,{type:"array"})}catch{return}var o=tl(i,"theme/theme/theme1.xml",!0);if(o)return Sj(o,r)}}function Qfe(t){return t.read_shift(4)}function Hfe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Vfe(t,4);break;case 2:e.xclrValue=sj(t);break;case 3:e.xclrValue=Qfe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Vfe(t,e){return qi(t,e)}function zfe(t,e){return qi(t,e)}function Gfe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Hfe(t);break;case 6:n[1]=zfe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function qfe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(Gfe(t,r-t.l));return{ixfe:n,ext:s}}function Kfe(t,e){e.forEach(function(r){r[0]})}function $fe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:zi(t)}}function Wfe(t){var e=lt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Js(t.name,e),e.slice(0,e.l)}function Xfe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Yfe(t){var e=lt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function Jfe(t,e){var r=lt(8+2*e.length);return r.write_shift(4,t),Js(e,r),r.slice(0,r.l)}function Zfe(t){return t.l+=4,t.read_shift(4)!=0}function ehe(t,e){var r=lt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function the(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return GA(t,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?n.Cell.push({type:n.Types[h[0]-1].name,index:h[1]}):o==0&&n.Value.push({type:n.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function rhe(){var t=No();return Ct(t,332),Ct(t,334,kc(1)),Ct(t,335,Wfe({name:"XLDAPR",version:12e4,flags:3496657072})),Ct(t,336),Ct(t,339,Jfe(1,"XLDAPR")),Ct(t,52),Ct(t,35,kc(514)),Ct(t,4096,kc(0)),Ct(t,4097,Ml(1)),Ct(t,36),Ct(t,53),Ct(t,340),Ct(t,337,ehe(1)),Ct(t,51,Yfe([[1,0]])),Ct(t,338),Ct(t,333),t.end()}function nhe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,i;return t.replace(Wi,function(o){var l=Nr(o);switch(Mu(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):s==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function Tj(){var t=[As];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function ahe(t){var e=[];if(!t)return e;var r=1;return(t.match(Wi)||[]).forEach(function(n){var a=Nr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function she(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Er(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function ihe(t,e,r){var n=[];return GA(t,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function ohe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;GA(t,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function lhe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var tm=1024;function Bj(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Mt("xml",null,{"xmlns:v":Jo.v,"xmlns:o":Jo.o,"xmlns:x":Jo.x,"xmlns:mv":Jo.mv}).replace(/\/>/,">"),Mt("o:shapelayout",Mt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Mt("v:shapetype",[Mt("v:stroke",null,{joinstyle:"miter"}),Mt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];tm<t*1e3;)tm+=1e3;return e.forEach(function(s){var i=Ia(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Mt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Mt("v:fill",l,o),d={on:"t",obscured:"t"};++tm,a=a.concat(["<v:shape"+dx({id:"_x0000_s"+tm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Mt("v:shadow",null,d),Mt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",di("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),di("x:AutoFill","False"),di("x:Row",String(i.r)),di("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function D6(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(i){var o=Ia(i.ref);if(a?(t[o.r]||(t[o.r]=[]),s=t[o.r][o.c]):s=t[i.ref],!s){s={t:"z"},a?t[o.r][o.c]=s:t[i.ref]=s;var l=En(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=Mr(l);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var h=s.c.length-1;h>=0;--h){if(!r&&s.c[h].T)return;r&&!s.c[h].T&&s.c.splice(h,1)}if(r&&n){for(h=0;h<n.length;++h)if(d.a==n[h].id){d.a=n[h].name||d.a;break}}s.c.push(d)})}function che(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Nr(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Ia(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&J4(h[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=m.h),n.push(u)}}}}),n}function Nj(t){var e=[As,Mt("comments",null,{xmlns:Vh[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=Kn(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(a=r.indexOf(Kn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(di("t",Kn(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;e.push(di("t",Kn(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function uhe(t,e){var r=[],n=!1,a={},s=0;return t.replace(Wi,function(o,l){var u=Nr(o);switch(Mu(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":a.t=t.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function Ahe(t,e,r){var n=[As,Mt("ThreadedComments",null,{xmlns:Us.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(Mt("threadedComment",di("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function dhe(t,e){var r=[],n=!1;return t.replace(Wi,function(s){var i=Nr(s);switch(Mu(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function fhe(t){var e=[As,Mt("personList",null,{xmlns:Us.TCMNT,"xmlns:x":Vh[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Mt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function hhe(t){var e={};e.iauthor=t.read_shift(4);var r=Kh(t);return e.rfx=r.s,e.ref=Er(r.s),t.l+=16,e}function mhe(t,e){return e==null&&(e=lt(36)),e.write_shift(4,t[1].iauthor),np(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var phe=zi;function ghe(t){return Js(t.slice(0,54))}function xhe(t,e){var r=[],n=[],a={},s=!1;return GA(t,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function vhe(t){var e=No(),r=[];return Ct(e,628),Ct(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Ct(e,632,ghe(a.a)))})}),Ct(e,631),Ct(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Ia(n[0]),e:Ia(n[0])};Ct(e,635,mhe([s,a])),a.t&&a.t.length>0&&Ct(e,637,Qce(a)),Ct(e,636),delete a.iauthor})}),Ct(e,634),Ct(e,629),e.end()}var yhe="application/vnd.ms-office.vbaProject";function whe(t){var e=ur.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");ur.utils.cfb_add(e,a,t.FileIndex[n].content)}}),ur.write(e)}function bhe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&ur.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var kj=["xlsb","xlsm","xlam","biff8","xla"];function Che(){return{"!type":"dialog"}}function Ehe(){return{"!type":"dialog"}}function _he(){return{"!type":"macro"}}function She(){return{"!type":"macro"}}var xm=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,i){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?u+=e.r:--u,a+(o?"":"$")+ka(d)+(l?"":"$")+us(u)}return function(a,s){return e=s,a.replace(t,r)}}(),rT=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,nT=function(){return function(e,r){return e.replace(rT,function(n,a,s,i,o,l){var u=V4(i)-(s?0:r.c),d=H4(l)-(o?0:r.r),h=d==0?"":o?d+1:"["+d+"]",m=u==0?"":s?u+1:"["+u+"]";return a+"R"+h+"C"+m})}}();function Ij(t,e){return t.replace(rT,function(r,n,a,s,i,o){return n+(a=="$"?a+s:ka(V4(s)+e.c))+(i=="$"?i+o:us(H4(o)+e.r))})}function The(t,e,r){var n=Io(e),a=n.s,s=Ia(r),i={r:s.r-a.r,c:s.c-a.c};return Ij(t,i)}function Bhe(t){return t.length!=1}function R6(t){return t.replace(/_xlfn\./g,"")}function ys(t){t.l+=1}function yf(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Fj(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Dj(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),i=yf(t),o=yf(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function Dj(t){var e=yf(t),r=yf(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function Nhe(t,e,r){if(r.biff<8)return Dj(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=yf(t),i=yf(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Rj(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return khe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=yf(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function khe(t){var e=yf(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function Ihe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Fhe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Dhe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function Dhe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function Rhe(t,e,r){var n=(t[t.l++]&96)>>5,a=Fj(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function Lhe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var i=Fj(t,s,r);return[n,a,i]}function Uhe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Mhe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function Phe(t,e,r){var n=(t[t.l++]&96)>>5,a=Nhe(t,e-1,r);return[n,a]}function jhe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function L6(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function Ohe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function Qhe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Hhe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Vhe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function zhe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Lj(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function Ghe(t){return t.read_shift(2),Lj(t)}function qhe(t){return t.read_shift(2),Lj(t)}function Khe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Rj(t,0,r);return[n,a]}function $he(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Fhe(t,0,r);return[n,a]}function Whe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Rj(t,0,r);return[n,a,s]}function Xhe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[Z0e[a],Pj[a],n]}function Yhe(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:Jhe(t);return[a,(s[0]===0?Pj:J0e)[s[1]]]}function Jhe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Zhe(t,e,r){t.l+=r&&r.biff==2?3:4}function e0e(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function t0e(t){return t.l++,qA[t.read_shift(1)]}function r0e(t){return t.l++,t.read_shift(2)}function n0e(t){return t.l++,t.read_shift(1)!==0}function a0e(t){return t.l++,Hi(t)}function s0e(t,e,r){return t.l++,t1(t,e-1,r)}function i0e(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=rs(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=qA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Hi(t);break;case 2:r[1]=$h(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function o0e(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Kh:qw)(t));return a}function l0e(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=i0e(t,r.biff);return i}function c0e(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function u0e(t,e,r){if(r.biff==5)return A0e(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function A0e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function d0e(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function f0e(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function h0e(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function m0e(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var p0e=qi,g0e=qi,x0e=qi;function n1(t,e,r){return t.l+=2,[Ihe(t)]}function aT(t){return t.l+=6,[]}var v0e=n1,y0e=aT,w0e=aT,b0e=n1;function Uj(t){return t.l+=2,[Cs(t),t.read_shift(2)&1]}var C0e=n1,E0e=Uj,_0e=aT,S0e=n1,T0e=n1,B0e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function N0e(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),i=B0e[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:a,C:s}}function k0e(t){return t.l+=2,[t.read_shift(4)]}function I0e(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function F0e(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function D0e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function R0e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function L0e(t){return t.l+=4,[0,0]}var U6={1:{n:"PtgExp",f:e0e},2:{n:"PtgTbl",f:x0e},3:{n:"PtgAdd",f:ys},4:{n:"PtgSub",f:ys},5:{n:"PtgMul",f:ys},6:{n:"PtgDiv",f:ys},7:{n:"PtgPower",f:ys},8:{n:"PtgConcat",f:ys},9:{n:"PtgLt",f:ys},10:{n:"PtgLe",f:ys},11:{n:"PtgEq",f:ys},12:{n:"PtgGe",f:ys},13:{n:"PtgGt",f:ys},14:{n:"PtgNe",f:ys},15:{n:"PtgIsect",f:ys},16:{n:"PtgUnion",f:ys},17:{n:"PtgRange",f:ys},18:{n:"PtgUplus",f:ys},19:{n:"PtgUminus",f:ys},20:{n:"PtgPercent",f:ys},21:{n:"PtgParen",f:ys},22:{n:"PtgMissArg",f:ys},23:{n:"PtgStr",f:s0e},26:{n:"PtgSheet",f:I0e},27:{n:"PtgEndSheet",f:F0e},28:{n:"PtgErr",f:t0e},29:{n:"PtgBool",f:n0e},30:{n:"PtgInt",f:r0e},31:{n:"PtgNum",f:a0e},32:{n:"PtgArray",f:jhe},33:{n:"PtgFunc",f:Xhe},34:{n:"PtgFuncVar",f:Yhe},35:{n:"PtgName",f:c0e},36:{n:"PtgRef",f:Khe},37:{n:"PtgArea",f:Rhe},38:{n:"PtgMemArea",f:d0e},39:{n:"PtgMemErr",f:p0e},40:{n:"PtgMemNoMem",f:g0e},41:{n:"PtgMemFunc",f:f0e},42:{n:"PtgRefErr",f:h0e},43:{n:"PtgAreaErr",f:Uhe},44:{n:"PtgRefN",f:$he},45:{n:"PtgAreaN",f:Phe},46:{n:"PtgMemAreaN",f:D0e},47:{n:"PtgMemNoMemN",f:R0e},57:{n:"PtgNameX",f:u0e},58:{n:"PtgRef3d",f:Whe},59:{n:"PtgArea3d",f:Lhe},60:{n:"PtgRefErr3d",f:m0e},61:{n:"PtgAreaErr3d",f:Mhe},255:{}},U0e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},M0e={1:{n:"PtgElfLel",f:Uj},2:{n:"PtgElfRw",f:S0e},3:{n:"PtgElfCol",f:v0e},6:{n:"PtgElfRwV",f:T0e},7:{n:"PtgElfColV",f:b0e},10:{n:"PtgElfRadical",f:C0e},11:{n:"PtgElfRadicalS",f:_0e},13:{n:"PtgElfColS",f:y0e},15:{n:"PtgElfColSV",f:w0e},16:{n:"PtgElfRadicalLel",f:E0e},25:{n:"PtgList",f:N0e},29:{n:"PtgSxName",f:k0e},255:{}},P0e={0:{n:"PtgAttrNoop",f:L0e},1:{n:"PtgAttrSemi",f:zhe},2:{n:"PtgAttrIf",f:Hhe},4:{n:"PtgAttrChoose",f:Ohe},8:{n:"PtgAttrGoto",f:Qhe},16:{n:"PtgAttrSum",f:Zhe},32:{n:"PtgAttrBaxcel",f:L6},33:{n:"PtgAttrBaxcel",f:L6},64:{n:"PtgAttrSpace",f:Ghe},65:{n:"PtgAttrSpaceSemi",f:qhe},128:{n:"PtgAttrIfError",f:Vhe},255:{}};function a1(t,e,r,n){if(n.biff<8)return qi(t,e);for(var a=t.l+e,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=l0e(t,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=o0e(t,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=a-t.l,e!==0&&s.push(qi(t,e)),s}function s1(t,e,r){for(var n=t.l+e,a,s,i=[];n!=t.l;)e=n-t.l,s=t[t.l],a=U6[s]||U6[U0e[s]],(s===24||s===25)&&(a=(s===24?M0e:P0e)[t[t.l+1]]),!a||!a.f?qi(t,e):i.push([a.n,a.f(t,e,r)]);return i}function j0e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var O0e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Q0e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Mj(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function M6(t,e,r){var n=Mj(t,e,r);return n=="#REF"?n:Q0e(n,r)}function Mi(t,e,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,h=0,m=0,g,b="";if(!t[0]||!t[0][0])return"";for(var y=-1,E="",B=0,k=t[0].length;B<k;++B){var L=t[0][B];switch(L[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(t[0][y][1][0]){case 0:E=Va(" ",t[0][y][1][1]);break;case 1:E=Va("\r",t[0][y][1][1]);break;default:if(E="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}u=u+E,y=-1}o.push(u+O0e[L[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Pg(L[1][1],i,a),o.push(jg(d,s));break;case"PtgRefN":d=r?Pg(L[1][1],r,a):L[1][1],o.push(jg(d,s));break;case"PtgRef3d":h=L[1][1],d=Pg(L[1][2],i,a),b=M6(n,h,a),o.push(b+"!"+jg(d,s));break;case"PtgFunc":case"PtgFuncVar":var M=L[1][0],P=L[1][1];M||(M=0),M&=127;var R=M==0?[]:o.slice(-M);o.length-=M,P==="User"&&(P=R.shift()),o.push(P+"("+R.join(",")+")");break;case"PtgBool":o.push(L[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(L[1]);break;case"PtgNum":o.push(String(L[1]));break;case"PtgStr":o.push('"'+L[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(L[1]);break;case"PtgAreaN":g=d6(L[1][1],r?{s:r}:i,a),o.push(mE(g,a));break;case"PtgArea":g=d6(L[1][1],i,a),o.push(mE(g,a));break;case"PtgArea3d":h=L[1][1],g=L[1][2],b=M6(n,h,a),o.push(b+"!"+mE(g,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=L[1][2];var C=(n.names||[])[m-1]||(n[0]||[])[m],S=C?C.Name:"SH33TJSNAME"+String(m);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),o.push(S);break;case"PtgNameX":var N=L[1][1];m=L[1][2];var Q;if(a.biff<=5)N<0&&(N=-N),n[N]&&(Q=n[N][m]);else{var D="";if(((n[N]||[])[0]||[])[0]==14849||(((n[N]||[])[0]||[])[0]==1025?n[N][m]&&n[N][m].itab>0&&(D=n.SheetNames[n[N][m].itab-1]+"!"):D=n.SheetNames[m-1]+"!"),n[N]&&n[N][m])D+=n[N][m].Name;else if(n[0]&&n[0][m])D+=n[0][m].Name;else{var I=(Mj(n,N,a)||"").split(";;");I[m-1]?D=I[m-1]:D+="SH33TJSERRX"}o.push(D);break}Q||(Q={Name:"SH33TJSERRY"}),o.push(Q.Name);break;case"PtgParen":var O="(",z=")";if(y>=0){switch(E="",t[0][y][1][0]){case 2:O=Va(" ",t[0][y][1][1])+O;break;case 3:O=Va("\r",t[0][y][1][1])+O;break;case 4:z=Va(" ",t[0][y][1][1])+z;break;case 5:z=Va("\r",t[0][y][1][1])+z;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}y=-1}o.push(O+o.pop()+z);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:L[1][1],r:L[1][0]};var re={c:r.c,r:r.r};if(n.sharedf[Er(d)]){var Y=n.sharedf[Er(d)];o.push(Mi(Y,i,re,n,a))}else{var ae=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Mi(u[1],i,re,n,a)),ae=!0;break}ae||o.push(L[1])}break;case"PtgArray":o.push("{"+j0e(L[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=B;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+L[1].idx+"[#"+L[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(L));default:throw new Error("Unrecognized Formula Token: "+String(L))}var K=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&y>=0&&K.indexOf(t[0][B][0])==-1){L=t[0][y];var G=!0;switch(L[1][0]){case 4:G=!1;case 0:E=Va(" ",L[1][1]);break;case 5:G=!1;case 1:E=Va("\r",L[1][1]);break;default:if(E="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+L[1][0])}o.push((G?E:"")+o.pop()+(G?"":E)),y=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function H0e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],qi(t,e-2)];var o=s1(t,i,r);return e!==i+a&&(s=a1(t,e-i-a,o,r)),t.l=n,[o,s]}function V0e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],qi(t,e-2)];var o=s1(t,i,r);return e!==i+a&&(s=a1(t,e-i-a,o,r)),t.l=n,[o,s]}function z0e(t,e,r,n){var a=t.l+e,s=s1(t,n,r),i;return a!==t.l&&(i=a1(t,a-t.l,s,r)),[s,i]}function G0e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),i=s1(t,s,r);return s==65535?[[],qi(t,e-2)]:(e!==s+2&&(a=a1(t,n-s-2,i,r)),[i,a])}function q0e(t){var e;if(EA(t,t.l+6)!==65535)return[Hi(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function K0e(t){if(t==null){var e=lt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return kh(t);return kh(0)}function yE(t,e,r){var n=t.l+e,a=Pu(t);r.biff==2&&++t.l;var s=q0e(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=V0e(t,n-t.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function $0e(t,e,r,n,a){var s=Fh(e,r,a),i=K0e(t.v),o=lt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=lt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var h=Ys([s,i,o,u]);return h}function Kw(t,e,r){var n=t.read_shift(4),a=s1(t,n,r),s=t.read_shift(4),i=s>0?a1(t,s,a,r):null;return[a,i]}var W0e=Kw,$w=Kw,X0e=Kw,Y0e=Kw,J0e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Pj={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Z0e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function P6(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function eme(t){var e="of:="+t.replace(rT,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function wE(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function tme(t){return t.replace(/\./,"!")}var Qg={},vm={},Hg=typeof Map<"u";function sT(t,e,r){var n=0,a=t.length;if(r){if(Hg?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Hg?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(Hg?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function Ww(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Oi=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=gx(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=By(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function vh(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Bf(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){NA(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function jj(t,e,r,n,a,s){try{n.cellNF&&(t.z=vr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ha(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(vr[e]==null&&NA(Jle[e]||"General",e),t.t==="e")t.w=t.w||qA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ux(t.v);else if(t.t==="d"){var i=Ps(t.v);(i|0)===i?t.w=i.toString(10):t.w=ux(i)}else{if(t.v===void 0)return"";t.w=Bh(t.v,vm)}else t.t==="d"?t.w=$l(e,Ps(t.v),vm):t.w=$l(e,t.v,vm)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Ty(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Ty(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function rme(t,e,r){if(t&&t["!ref"]){var n=En(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function nme(t,e){var r=En(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Mr(r))}var ame=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,sme=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,ime=/<(?:\w:)?hyperlink [^>]*>/mg,ome=/"(\w*:\w*)"/,lme=/<(?:\w:)?col\b[^>]*[\/]?>/g,cme=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,ume=/<(?:\w:)?pageMargins[^>]*\/>/g,Oj=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Ame=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,dme=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function fme(t,e,r,n,a,s,i){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",h=t.match(sme);h?(u=t.slice(0,h.index),d=t.slice(h.index+h[0].length)):u=d=t;var m=u.match(Oj);m?iT(m[0],o,a,r):(m=u.match(Ame))&&mme(m[0],m[1]||"",o,a,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var b=u.slice(g,g+50).match(ome);b&&nme(o,b[1])}var y=u.match(dme);y&&y[1]&&Bme(y[1],a);var E=[];if(e.cellStyles){var B=u.match(lme);B&&Cme(E,B)}h&&Ime(h[1],o,e,l,s,i);var k=d.match(cme);k&&(o["!autofilter"]=_me(k[0]));var L=[],M=d.match(ame);if(M)for(g=0;g!=M.length;++g)L[g]=En(M[g].slice(M[g].indexOf('"')+1));var P=d.match(ime);P&&yme(o,P,n);var R=d.match(ume);if(R&&(o["!margins"]=wme(Nr(R[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Mr(l)),e.sheetRows>0&&o["!ref"]){var C=En(o["!ref"]);e.sheetRows<=+C.e.r&&(C.e.r=e.sheetRows-1,C.e.r>l.e.r&&(C.e.r=l.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>l.e.c&&(C.e.c=l.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Mr(C))}return E.length>0&&(o["!cols"]=E),L.length>0&&(o["!merges"]=L),o}function hme(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Mr(t[r])+'"/>';return e+"</mergeCells>"}function iT(t,e,r,n){var a=Nr(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Cn(ra(a.codeName)))}function mme(t,e,r,n,a){iT(t.slice(0,t.indexOf(">")),r,n,a)}function pme(t,e,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,i.codeName=Cu(Kn(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Mt("outlinePr",null,u)}!s&&!o||(a[a.length]=Mt("sheetPr",o,i))}var gme=["objects","scenarios","selectLockedCells","selectUnlockedCells"],xme=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function vme(t){var e={sheet:1};return gme.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),xme.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=Z4(t.password).toString(16).toUpperCase()),Mt("sheetProtection",null,e)}function yme(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=Nr(ra(e[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Cn(s.location))):(s.Target="#"+Cn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=En(s.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Er({c:u,r:l});n?(t[l]||(t[l]=[]),t[l][u]||(t[l][u]={t:"z",v:void 0}),t[l][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function wme(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function bme(t){return vh(t),Mt("pageMargins",null,t)}function Cme(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=Nr(e[n],!0);a.hidden&&(a.hidden=da(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,eT(a.width)),vf(a);s<=i;)t[s++]=ma(a)}}function Eme(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=Mt("col",null,Ww(a,n)));return r[r.length]="</cols>",r.join("")}function _me(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function Sme(t,e,r,n){var a=typeof t.ref=="string"?t.ref:Mr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Io(a);i.s.r==i.e.r&&(i.e.r=Io(e["!ref"]).e.r,a=Mr(i));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Mt("autoFilter",null,{ref:a})}var Tme=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Bme(t,e){e.Views||(e.Views=[{}]),(t.match(Tme)||[]).forEach(function(r,n){var a=Nr(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),da(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function Nme(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Mt("sheetViews",Mt("sheetView",null,a),{})}function kme(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=qA[t.v];break;case"d":n&&n.cellDates?a=ha(t.v,-1).toISOString():(t=ma(t),t.t="n",a=""+(t.v=Ps(ha(t.v)))),typeof t.z>"u"&&(t.z=vr[14]);break;default:a=t.v;break}var o=di("v",Kn(a)),l={r:e},u=Bf(n.cellXfs,t,n);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=di("v",""+sT(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Mt("f",Kn(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Mt("c",o,l)}var Ime=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=Ax("v"),i=Ax("f");return function(l,u,d,h,m,g){for(var b=0,y="",E=[],B=[],k=0,L=0,M=0,P="",R,C,S=0,N=0,Q,D,I=0,O=0,z=Array.isArray(g.CellXf),re,Y=[],ae=[],K=Array.isArray(u),G=[],W={},ie=!1,j=!!d.sheetStubs,X=l.split(e),Z=0,te=X.length;Z!=te;++Z){y=X[Z].trim();var ce=y.length;if(ce!==0){var de=0;e:for(b=0;b<ce;++b)switch(y[b]){case">":if(y[b-1]!="/"){++b;break e}if(d&&d.cellStyles){if(C=Nr(y.slice(de,b),!0),S=C.r!=null?parseInt(C.r,10):S+1,N=-1,d.sheetRows&&d.sheetRows<S)continue;W={},ie=!1,C.ht&&(ie=!0,W.hpt=parseFloat(C.ht),W.hpx=Lm(W.hpt)),C.hidden=="1"&&(ie=!0,W.hidden=!0),C.outlineLevel!=null&&(ie=!0,W.level=+C.outlineLevel),ie&&(G[S-1]=W)}break;case"<":de=b;break}if(de>=b)break;if(C=Nr(y.slice(de,b),!0),S=C.r!=null?parseInt(C.r,10):S+1,N=-1,!(d.sheetRows&&d.sheetRows<S)){h.s.r>S-1&&(h.s.r=S-1),h.e.r<S-1&&(h.e.r=S-1),d&&d.cellStyles&&(W={},ie=!1,C.ht&&(ie=!0,W.hpt=parseFloat(C.ht),W.hpx=Lm(W.hpt)),C.hidden=="1"&&(ie=!0,W.hidden=!0),C.outlineLevel!=null&&(ie=!0,W.level=+C.outlineLevel),ie&&(G[S-1]=W)),E=y.slice(b).split(t);for(var me=0;me!=E.length&&E[me].trim().charAt(0)=="<";++me);for(E=E.slice(me),b=0;b!=E.length;++b)if(y=E[b].trim(),y.length!==0){if(B=y.match(r),k=b,L=0,M=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,B!=null&&B.length===2){for(k=0,P=B[1],L=0;L!=P.length&&!((M=P.charCodeAt(L)-64)<1||M>26);++L)k=26*k+M;--k,N=k}else++N;for(L=0;L!=y.length&&y.charCodeAt(L)!==62;++L);if(++L,C=Nr(y.slice(0,L),!0),C.r||(C.r=Er({r:S-1,c:N})),P=y.slice(L),R={t:""},(B=P.match(s))!=null&&B[1]!==""&&(R.v=Cn(B[1])),d.cellFormula){if((B=P.match(i))!=null&&B[1]!==""){if(R.f=Cn(ra(B[1])).replace(/\r\n/g,`
`),d.xlfn||(R.f=R6(R.f)),B[0].indexOf('t="array"')>-1)R.F=(P.match(a)||[])[1],R.F.indexOf(":")>-1&&Y.push([En(R.F),R.F]);else if(B[0].indexOf('t="shared"')>-1){D=Nr(B[0]);var ge=Cn(ra(B[1]));d.xlfn||(ge=R6(ge)),ae[parseInt(D.si,10)]=[D,ge,C.r]}}else(B=P.match(/<f[^>]*\/>/))&&(D=Nr(B[0]),ae[D.si]&&(R.f=The(ae[D.si][1],ae[D.si][2],C.r)));var Te=Ia(C.r);for(L=0;L<Y.length;++L)Te.r>=Y[L][0].s.r&&Te.r<=Y[L][0].e.r&&Te.c>=Y[L][0].s.c&&Te.c<=Y[L][0].e.c&&(R.F=Y[L][1])}if(C.t==null&&R.v===void 0)if(R.f||R.F)R.v=0,R.t="n";else if(j)R.t="z";else continue;else R.t=C.t||"n";switch(h.s.c>N&&(h.s.c=N),h.e.c<N&&(h.e.c=N),R.t){case"n":if(R.v==""||R.v==null){if(!j)continue;R.t="z"}else R.v=parseFloat(R.v);break;case"s":if(typeof R.v>"u"){if(!j)continue;R.t="z"}else Q=Qg[parseInt(R.v,10)],R.v=Q.t,R.r=Q.r,d.cellHTML&&(R.h=Q.h);break;case"str":R.t="s",R.v=R.v!=null?ra(R.v):"",d.cellHTML&&(R.h=P4(R.v));break;case"inlineStr":B=P.match(n),R.t="s",B!=null&&(Q=J4(B[1]))?(R.v=Q.t,d.cellHTML&&(R.h=Q.h)):R.v="";break;case"b":R.v=da(R.v);break;case"d":d.cellDates?R.v=ha(R.v,1):(R.v=Ps(ha(R.v,1)),R.t="n");break;case"e":(!d||d.cellText!==!1)&&(R.w=R.v),R.v=HP[R.v];break}if(I=O=0,re=null,z&&C.s!==void 0&&(re=g.CellXf[C.s],re!=null&&(re.numFmtId!=null&&(I=re.numFmtId),d.cellStyles&&re.fillId!=null&&(O=re.fillId))),jj(R,I,O,d,m,g),d.cellDates&&z&&R.t=="n"&&ep(vr[I])&&(R.t="d",R.v=Gw(R.v)),C.cm&&d.xlmeta){var xe=(d.xlmeta.Cell||[])[+C.cm-1];xe&&xe.type=="XLDAPR"&&(R.D=!0)}if(K){var oe=Ia(C.r);u[oe.r]||(u[oe.r]=[]),u[oe.r][oe.c]=R}else u[C.r]=R}}}}G.length>0&&(u["!rows"]=G)}}();function Fme(t,e,r,n){var a=[],s=[],i=En(t["!ref"]),o="",l,u="",d=[],h=0,m=0,g=t["!rows"],b=Array.isArray(t),y={r:u},E,B=-1;for(m=i.s.c;m<=i.e.c;++m)d[m]=ka(m);for(h=i.s.r;h<=i.e.r;++h){for(s=[],u=us(h),m=i.s.c;m<=i.e.c;++m){l=d[m]+u;var k=b?(t[h]||[])[m]:t[l];k!==void 0&&(o=kme(k,l,t,e))!=null&&s.push(o)}(s.length>0||g&&g[h])&&(y={r:u},g&&g[h]&&(E=g[h],E.hidden&&(y.hidden=1),B=-1,E.hpx?B=xx(E.hpx):E.hpt&&(B=E.hpt),B>-1&&(y.ht=B,y.customHeight=1),E.level&&(y.outlineLevel=E.level)),a[a.length]=Mt("row",s.join(""),y))}if(g)for(;h<g.length;++h)g&&g[h]&&(y={r:h+1},E=g[h],E.hidden&&(y.hidden=1),B=-1,E.hpx?B=xx(E.hpx):E.hpt&&(B=E.hpt),B>-1&&(y.ht=B,y.customHeight=1),E.level&&(y.outlineLevel=E.level),a[a.length]=Mt("row","",y));return a.join("")}function Qj(t,e,r,n){var a=[As,Mt("worksheet",null,{xmlns:Vh[0],"xmlns:r":Us.r})],s=r.SheetNames[t],i=0,o="",l=r.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",d=En(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Mr(d)}n||(n={}),l["!comments"]=[];var h=[];pme(l,r,t,e,a),a[a.length]=Mt("dimension",null,{ref:u}),a[a.length]=Nme(l,e,t,r),e.sheetFormat&&(a[a.length]=Mt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(a[a.length]=Eme(l,l["!cols"])),a[i=a.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=Fme(l,e),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),l["!protect"]&&(a[a.length]=vme(l["!protect"])),l["!autofilter"]!=null&&(a[a.length]=Sme(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(a[a.length]=hme(l["!merges"]));var m=-1,g,b=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(b=Gn(n,-1,Kn(y[1].Target).replace(/#.*$/,""),rn.HLINK),g["r:id"]="rId"+b),(m=y[1].Target.indexOf("#"))>-1&&(g.location=Kn(y[1].Target.slice(m+1))),y[1].Tooltip&&(g.tooltip=Kn(y[1].Tooltip)),a[a.length]=Mt("hyperlink",null,g))}),a[a.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(a[a.length]=bme(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=di("ignoredErrors",Mt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),h.length>0&&(b=Gn(n,-1,"../drawings/drawing"+(t+1)+".xml",rn.DRAW),a[a.length]=Mt("drawing",null,{"r:id":"rId"+b}),l["!drawing"]=h),l["!comments"].length>0&&(b=Gn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",rn.VML),a[a.length]=Mt("legacyDrawing",null,{"r:id":"rId"+b}),l["!legacy"]=b),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function Dme(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function Rme(t,e,r){var n=lt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=xx(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,m=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var b=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Er(u)];b&&(h<0&&(h=g),m=g)}h<0||(++o,n.write_shift(4,h),n.write_shift(4,m))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function Lme(t,e,r,n){var a=Rme(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&Ct(t,0,a)}var Ume=Kh,Mme=np;function Pme(){}function jme(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=Hce(t),r}function Ome(t,e,r){r==null&&(r=lt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return Ey({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),MP(t,r),r.slice(0,r.l)}function Qme(t){var e=Wl(t);return[e]}function Hme(t,e,r){return r==null&&(r=lt(8)),zh(e,r)}function Vme(t){var e=Gh(t);return[e]}function zme(t,e,r){return r==null&&(r=lt(4)),qh(e,r)}function Gme(t){var e=Wl(t),r=t.read_shift(1);return[e,r,"b"]}function qme(t,e,r){return r==null&&(r=lt(9)),zh(e,r),r.write_shift(1,t.v?1:0),r}function Kme(t){var e=Gh(t),r=t.read_shift(1);return[e,r,"b"]}function $me(t,e,r){return r==null&&(r=lt(5)),qh(e,r),r.write_shift(1,t.v?1:0),r}function Wme(t){var e=Wl(t),r=t.read_shift(1);return[e,r,"e"]}function Xme(t,e,r){return r==null&&(r=lt(9)),zh(e,r),r.write_shift(1,t.v),r}function Yme(t){var e=Gh(t),r=t.read_shift(1);return[e,r,"e"]}function Jme(t,e,r){return r==null&&(r=lt(8)),qh(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function Zme(t){var e=Wl(t),r=t.read_shift(4);return[e,r,"s"]}function epe(t,e,r){return r==null&&(r=lt(12)),zh(e,r),r.write_shift(4,e.v),r}function tpe(t){var e=Gh(t),r=t.read_shift(4);return[e,r,"s"]}function rpe(t,e,r){return r==null&&(r=lt(8)),qh(e,r),r.write_shift(4,e.v),r}function npe(t){var e=Wl(t),r=Hi(t);return[e,r,"n"]}function ape(t,e,r){return r==null&&(r=lt(16)),zh(e,r),kh(t.v,r),r}function Hj(t){var e=Gh(t),r=Hi(t);return[e,r,"n"]}function spe(t,e,r){return r==null&&(r=lt(12)),qh(e,r),kh(t.v,r),r}function ipe(t){var e=Wl(t),r=K4(t);return[e,r,"n"]}function ope(t,e,r){return r==null&&(r=lt(12)),zh(e,r),PP(t.v,r),r}function lpe(t){var e=Gh(t),r=K4(t);return[e,r,"n"]}function cpe(t,e,r){return r==null&&(r=lt(8)),qh(e,r),PP(t.v,r),r}function upe(t){var e=Wl(t),r=z4(t);return[e,r,"is"]}function Ape(t){var e=Wl(t),r=zi(t);return[e,r,"str"]}function dpe(t,e,r){return r==null&&(r=lt(12+4*t.v.length)),zh(e,r),Js(t.v,r),r.length>r.l?r.slice(0,r.l):r}function fpe(t){var e=Gh(t),r=zi(t);return[e,r,"str"]}function hpe(t,e,r){return r==null&&(r=lt(8+4*t.v.length)),qh(e,r),Js(t.v,r),r.length>r.l?r.slice(0,r.l):r}function mpe(t,e,r){var n=t.l+e,a=Wl(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"b"];if(r.cellFormula){t.l+=2;var o=$w(t,n-t.l,r);i[3]=Mi(o,null,a,r.supbooks,r)}else t.l=n;return i}function ppe(t,e,r){var n=t.l+e,a=Wl(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"e"];if(r.cellFormula){t.l+=2;var o=$w(t,n-t.l,r);i[3]=Mi(o,null,a,r.supbooks,r)}else t.l=n;return i}function gpe(t,e,r){var n=t.l+e,a=Wl(t);a.r=r["!row"];var s=Hi(t),i=[a,s,"n"];if(r.cellFormula){t.l+=2;var o=$w(t,n-t.l,r);i[3]=Mi(o,null,a,r.supbooks,r)}else t.l=n;return i}function xpe(t,e,r){var n=t.l+e,a=Wl(t);a.r=r["!row"];var s=zi(t),i=[a,s,"str"];if(r.cellFormula){t.l+=2;var o=$w(t,n-t.l,r);i[3]=Mi(o,null,a,r.supbooks,r)}else t.l=n;return i}var vpe=Kh,ype=np;function wpe(t,e){return e==null&&(e=lt(4)),e.write_shift(4,t),e}function bpe(t,e){var r=t.l+e,n=Kh(t),a=G4(t),s=zi(t),i=zi(t),o=zi(t);t.l=r;var l={rfx:n,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}function Cpe(t,e){var r=lt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));np({s:Ia(t[0]),e:Ia(t[0])},r),q4("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return Js(a||"",r),Js(t[1].Tooltip||"",r),Js("",r),r.slice(0,r.l)}function Epe(){}function _pe(t,e,r){var n=t.l+e,a=jP(t),s=t.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=W0e(t,n-t.l,r);i[1]=o}else t.l=n;return i}function Spe(t,e,r){var n=t.l+e,a=Kh(t),s=[a];if(r.cellFormula){var i=Y0e(t,n-t.l,r);s[1]=i,t.l=n}else t.l=n;return s}function Tpe(t,e,r){r==null&&(r=lt(18));var n=Ww(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var Vj=["left","right","top","bottom","header","footer"];function Bpe(t){var e={};return Vj.forEach(function(r){e[r]=Hi(t)}),e}function Npe(t,e){return e==null&&(e=lt(48)),vh(t),Vj.forEach(function(r){kh(t[r],e)}),e}function kpe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Ipe(t,e,r){r==null&&(r=lt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Fpe(t){var e=lt(24);return e.write_shift(4,4),e.write_shift(4,1),np(t,e),e}function Dpe(t,e){return e==null&&(e=lt(66)),e.write_shift(2,t.password?Z4(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function Rpe(){}function Lpe(){}function Upe(t,e,r,n,a,s,i){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,g,b,y,E,B,k,L,M,P,R=[];o.biff=12,o["!row"]=0;var C=0,S=!1,N=[],Q={},D=o.supbooks||a.supbooks||[[]];if(D.sharedf=Q,D.arrayf=N,D.SheetNames=a.SheetNames||a.Sheets.map(function(K){return K.name}),!o.supbooks&&(o.supbooks=D,a.Names))for(var I=0;I<a.Names.length;++I)D[0][I+1]=a.Names[I];var O=[],z=[],re=!1;vx[16]={n:"BrtShortReal",f:Hj};var Y;if(GA(t,function(G,W,ie){if(!m)switch(ie){case 148:u=G;break;case 0:g=G,o.sheetRows&&o.sheetRows<=g.r&&(m=!0),M=us(E=g.r),o["!row"]=g.r,(G.hidden||G.hpt||G.level!=null)&&(G.hpt&&(G.hpx=Lm(G.hpt)),z[G.r]=G);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:G[2]},G[2]){case"n":b.v=G[1];break;case"s":L=Qg[G[1]],b.v=L.t,b.r=L.r;break;case"b":b.v=!!G[1];break;case"e":b.v=G[1],o.cellText!==!1&&(b.w=qA[b.v]);break;case"str":b.t="s",b.v=G[1];break;case"is":b.t="s",b.v=G[1].t;break}if((y=i.CellXf[G[0].iStyleRef])&&jj(b,y.numFmtId,null,o,s,i),B=G[0].c==-1?B+1:G[0].c,o.dense?(l[E]||(l[E]=[]),l[E][B]=b):l[ka(B)+M]=b,o.cellFormula){for(S=!1,C=0;C<N.length;++C){var j=N[C];g.r>=j[0].s.r&&g.r<=j[0].e.r&&B>=j[0].s.c&&B<=j[0].e.c&&(b.F=Mr(j[0]),S=!0)}!S&&G.length>3&&(b.f=G[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>B&&(d.s.c=B),d.e.r<g.r&&(d.e.r=g.r),d.e.c<B&&(d.e.c=B),o.cellDates&&y&&b.t=="n"&&ep(vr[y.numFmtId])){var X=lh(b.v);X&&(b.t="d",b.v=new Date(X.y,X.m-1,X.d,X.H,X.M,X.S,X.u))}Y&&(Y.type=="XLDAPR"&&(b.D=!0),Y=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;b={t:"z",v:void 0},B=G[0].c==-1?B+1:G[0].c,o.dense?(l[E]||(l[E]=[]),l[E][B]=b):l[ka(B)+M]=b,d.s.r>g.r&&(d.s.r=g.r),d.s.c>B&&(d.s.c=B),d.e.r<g.r&&(d.e.r=g.r),d.e.c<B&&(d.e.c=B),Y&&(Y.type=="XLDAPR"&&(b.D=!0),Y=void 0);break;case 176:R.push(G);break;case 49:Y=((o.xlmeta||{}).Cell||[])[G-1];break;case 494:var Z=n["!id"][G.relId];for(Z?(G.Target=Z.Target,G.loc&&(G.Target+="#"+G.loc),G.Rel=Z):G.relId==""&&(G.Target="#"+G.loc),E=G.rfx.s.r;E<=G.rfx.e.r;++E)for(B=G.rfx.s.c;B<=G.rfx.e.c;++B)o.dense?(l[E]||(l[E]=[]),l[E][B]||(l[E][B]={t:"z",v:void 0}),l[E][B].l=G):(k=Er({c:B,r:E}),l[k]||(l[k]={t:"z",v:void 0}),l[k].l=G);break;case 426:if(!o.cellFormula)break;N.push(G),P=o.dense?l[E][B]:l[ka(B)+M],P.f=Mi(G[1],d,{r:g.r,c:B},D,o),P.F=Mr(G[0]);break;case 427:if(!o.cellFormula)break;Q[Er(G[0].s)]=G[1],P=o.dense?l[E][B]:l[ka(B)+M],P.f=Mi(G[1],d,{r:g.r,c:B},D,o);break;case 60:if(!o.cellStyles)break;for(;G.e>=G.s;)O[G.e--]={width:G.w/256,hidden:!!(G.flags&1),level:G.level},re||(re=!0,eT(G.w/256)),vf(O[G.e+1]);break;case 161:l["!autofilter"]={ref:Mr(G)};break;case 476:l["!margins"]=G;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),G.name&&(a.Sheets[r].CodeName=G.name),(G.above||G.left)&&(l["!outline"]={above:G.above,left:G.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),G.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!W.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+ie.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=Mr(u||d)),o.sheetRows&&l["!ref"]){var ae=En(l["!ref"]);o.sheetRows<=+ae.e.r&&(ae.e.r=o.sheetRows-1,ae.e.r>d.e.r&&(ae.e.r=d.e.r),ae.e.r<ae.s.r&&(ae.s.r=ae.e.r),ae.e.c>d.e.c&&(ae.e.c=d.e.c),ae.e.c<ae.s.c&&(ae.s.c=ae.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Mr(ae))}return R.length>0&&(l["!merges"]=R),O.length>0&&(l["!cols"]=O),z.length>0&&(l["!rows"]=z),l}function Mpe(t,e,r,n,a,s,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ma(e),e.z=e.z||vr[14],e.v=Ps(ha(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=Bf(a.cellXfs,e,a),e.l&&s["!links"].push([Er(l),e.l]),e.c&&s["!comments"].push([Er(l),e.c]),e.t){case"s":case"str":return a.bookSST?(o=sT(a.Strings,e.v,a.revStrings),l.t="s",l.v=o,i?Ct(t,18,rpe(e,l)):Ct(t,7,epe(e,l))):(l.t="str",i?Ct(t,17,hpe(e,l)):Ct(t,6,dpe(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Ct(t,13,cpe(e,l)):Ct(t,2,ope(e,l)):i?Ct(t,16,spe(e,l)):Ct(t,5,ape(e,l)),!0;case"b":return l.t="b",i?Ct(t,15,$me(e,l)):Ct(t,4,qme(e,l)),!0;case"e":return l.t="e",i?Ct(t,14,Jme(e,l)):Ct(t,3,Xme(e,l)),!0}return i?Ct(t,12,zme(e,l)):Ct(t,1,Hme(e,l)),!0}function Ppe(t,e,r,n){var a=En(e["!ref"]||"A1"),s,i="",o=[];Ct(t,145);var l=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=us(d),Lme(t,e,a,d);var h=!1;if(d<=a.e.r)for(var m=a.s.c;m<=a.e.c;++m){d===a.s.r&&(o[m]=ka(m)),s=o[m]+i;var g=l?(e[d]||[])[m]:e[s];if(!g){h=!1;continue}h=Mpe(t,g,d,m,n,e,h)}}Ct(t,146)}function jpe(t,e){!e||!e["!merges"]||(Ct(t,177,wpe(e["!merges"].length)),e["!merges"].forEach(function(r){Ct(t,176,ype(r))}),Ct(t,178))}function Ope(t,e){!e||!e["!cols"]||(Ct(t,390),e["!cols"].forEach(function(r,n){r&&Ct(t,60,Tpe(n,r))}),Ct(t,391))}function Qpe(t,e){!e||!e["!ref"]||(Ct(t,648),Ct(t,649,Fpe(En(e["!ref"]))),Ct(t,650))}function Hpe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=Gn(r,-1,n[1].Target.replace(/#.*$/,""),rn.HLINK);Ct(t,494,Cpe(n,a))}}),delete e["!links"]}function Vpe(t,e,r,n){if(e["!comments"].length>0){var a=Gn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",rn.VML);Ct(t,551,q4("rId"+a)),e["!legacy"]=a}}function zpe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:Mr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Io(s);o.s.r==o.e.r&&(o.e.r=Io(e["!ref"]).e.r,s=Mr(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Ct(t,161,np(En(s))),Ct(t,162)}}function Gpe(t,e,r){Ct(t,133),Ct(t,137,Ipe(e,r)),Ct(t,138),Ct(t,134)}function qpe(t,e){e["!protect"]&&Ct(t,535,Dpe(e["!protect"]))}function Kpe(t,e,r,n){var a=No(),s=r.SheetNames[t],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=En(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Ct(a,129),(r.vbaraw||i["!outline"])&&Ct(a,147,Ome(o,i["!outline"])),Ct(a,148,Mme(l)),Gpe(a,i,r.Workbook),Ope(a,i),Ppe(a,i,t,e),qpe(a,i),zpe(a,i,r,t),jpe(a,i),Hpe(a,i,n),i["!margins"]&&Ct(a,476,Npe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Qpe(a,i),Vpe(a,i,t,n),Ct(a,130),a.end()}function $pe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var a=Cn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function Wpe(t,e,r,n,a,s){var i=s||{"!type":"chart"};if(!t)return s;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=$pe(h);d.s.r=d.s.c=0,d.e.c=o,u=ka(o),m[0].forEach(function(g,b){i[u+us(b)]={t:"n",v:g,z:m[1]},l=b}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=Mr(d)),i}function Xpe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(Oj);return o&&iT(o[0],s,a,r),(i=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function Ype(t,e){t.l+=10;var r=zi(t);return{name:r}}function Jpe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return GA(t,function(l,u,d){switch(d){case 550:s["!rel"]=l;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),l.name&&(a.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var oT=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Zpe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],ege=[],tge=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function j6(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=da(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function O6(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=da(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function zj(t){O6(t.WBProps,oT),O6(t.CalcPr,tge),j6(t.WBView,Zpe),j6(t.Sheets,ege),vm.date1904=da(t.WBProps.date1904)}function rge(t){return!t.Workbook||!t.Workbook.WBProps?"false":da(t.Workbook.WBProps.date1904)?"true":"false"}var nge="][*?/\\".split("");function Gj(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return nge.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function age(t,e,r){t.forEach(function(n,a){Gj(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[a]&&e[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function sge(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];age(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)rme(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var ige=/<\w+:workbook/;function oge(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(t.replace(Wi,function(l,u){var d=Nr(l);switch(Mu(d[0])){case"<?xml":break;case"<workbook":l.match(ige)&&(a="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":oT.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=da(d[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:r.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(r.WBProps.CodeName=ra(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Cn(ra(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=ra(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),da(d.hidden||"0")&&(s.Hidden=!0),i=u+l.length;break;case"</definedName>":s.Ref=Cn(ra(t.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Vh.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return zj(r),r}function qj(t){var e=[As];e[e.length]=Mt("workbook",null,{xmlns:Vh[0],"xmlns:r":Us.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(oT.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Mt("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var i={name:Kn(t.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Mt("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Mt("definedName",Kn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function lge(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=f5(t),r.name=zi(t),r}function cge(t,e){return e||(e=lt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),q4(t.strRelID,e),Js(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function uge(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?zi(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Age(t,e){e||(e=lt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),MP(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function dge(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function fge(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=Vce(t),i=X0e(t,0,r),o=G4(t);t.l=n;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}function hge(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],vx[16]={n:"BrtFRTArchID$",f:dge},GA(t,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Mi(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),zj(r),r.Names=s,r.supbooks=i,r}function mge(t,e){Ct(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Ct(t,156,cge(a))}Ct(t,144)}function pge(t,e){e||(e=lt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Js("SheetJS",e),Js(gy.version,e),Js(gy.version,e),Js("7262",e),e.length>e.l?e.slice(0,e.l):e}function gge(t,e){e||(e=lt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function xge(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Ct(t,135),Ct(t,158,gge(a)),Ct(t,136))}}function vge(t,e){var r=No();return Ct(r,131),Ct(r,128,pge()),Ct(r,153,Age(t.Workbook&&t.Workbook.WBProps||null)),xge(r,t),mge(r,t),Ct(r,132),r.end()}function yge(t,e,r){return e.slice(-4)===".bin"?hge(t,r):oge(t,r)}function wge(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?Upe(t,n,r,a,s,i,o):fme(t,n,r,a,s,i,o)}function bge(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?Jpe(t,n,r,a,s):Xpe(t,n,r,a,s)}function Cge(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?_he():She()}function Ege(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?Che():Ehe()}function _ge(t,e,r,n){return e.slice(-4)===".bin"?yfe(t,r,n):lfe(t,r,n)}function Sge(t,e,r){return Sj(t,r)}function Tge(t,e,r){return e.slice(-4)===".bin"?Tde(t,r):Ede(t,r)}function Bge(t,e,r){return e.slice(-4)===".bin"?xhe(t,r):che(t,r)}function Nge(t,e,r){return e.slice(-4)===".bin"?ihe(t):ahe(t)}function kge(t,e,r,n){return r.slice(-4)===".bin"?ohe(t,e,r,n):void 0}function Ige(t,e,r){return e.slice(-4)===".bin"?the(t,e,r):nhe(t,e,r)}function Fge(t,e,r){return(e.slice(-4)===".bin"?vge:qj)(t)}function Dge(t,e,r,n,a){return(e.slice(-4)===".bin"?Kpe:Qj)(t,r,n,a)}function Rge(t,e,r){return(e.slice(-4)===".bin"?kfe:Ej)(t,r)}function Lge(t,e,r){return(e.slice(-4)===".bin"?kde:pj)(t,r)}function Uge(t,e,r){return(e.slice(-4)===".bin"?vhe:Nj)(t)}function Mge(t){return(t.slice(-4)===".bin"?rhe:Tj)()}var Kj=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,$j=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function wc(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(Kj),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match($j),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function Pge(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(Kj),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match($j),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var Vg;function jge(t,e){var r=Vg[t]||Cn(t);return r==="General"?Bh(e):$l(r,e)}function Oge(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=da(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=ha(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Cn(e)]=a}function Qge(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||qA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ux(t.v):t.w=Bh(t.v):t.w=jge(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=Vg[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&ep(n)){var a=lh(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function Hge(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=efe[n.Pattern]||n.Pattern)}t[e.ID]=e}function Vge(t,e,r,n,a,s,i,o,l,u){var d="General",h=n.StyleID,m={};u=u||{};var g=[],b=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);s[h]!==void 0&&(s[h].nf&&(d=s[h].nf),s[h].Interior&&g.push(s[h].Interior),!!s[h].Parent);)h=s[h].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=da(t);break;case"String":n.t="s",n.r=n6(Cn(t)),n.v=t.indexOf("<")>-1?Cn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(ha(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Cn(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=HP[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=n6(e||t));break}if(Qge(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=Cn(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=xm(y,a),delete n.Formula,n.ArrayRange=="RC"?n.F=xm("RC:RC",a):n.ArrayRange&&(n.F=xm(n.ArrayRange,a),l.push([En(n.F),n.F]))}else for(b=0;b<l.length;++b)a.r>=l[b][0].s.r&&a.r<=l[b][0].e.r&&a.c>=l[b][0].s.c&&a.c<=l[b][0].e.c&&(n.F=l[b][1]);u.cellStyles&&(g.forEach(function(E){!m.patternType&&E.patternType&&(m.patternType=E.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function zge(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function bE(t,e){var r=e||{};tp();var n=hg(j4(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ra(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=ma(r);return i.type="string",Rm.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ke){a.indexOf("<"+Ke)>=0&&(s=!0)}),s)return Nxe(n,r);Vg={"General Number":"General","General Date":vr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":vr[15],"Short Date":vr[14],"Long Time":vr[19],"Medium Time":vr[18],"Short Time":vr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:vr[2],Standard:vr[4],Percent:vr[10],Scientific:vr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},h=[],m=r.dense?[]:{},g="",b={},y={},E=wc('<Data ss:Type="String">'),B=0,k=0,L=0,M={s:{r:2e6,c:2e6},e:{r:0,c:0}},P={},R={},C="",S=0,N=[],Q={},D={},I=0,O=[],z=[],re={},Y=[],ae,K=!1,G=[],W=[],ie={},j=0,X=0,Z={Sheets:[],WBProps:{date1904:!1}},te={};fx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ce="";o=fx.exec(n);)switch(o[3]=(ce=o[3]).toLowerCase()){case"data":if(ce=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Vge(n.slice(B,o.index),C,E,l[l.length-1][0]=="comment"?re:b,{c:k,r:L},P,Y[k],y,G,r):(C="",E=wc(o[0]),B=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(z.length>0&&(b.c=z),(!r.sheetRows||r.sheetRows>L)&&b.v!==void 0&&(r.dense?(m[L]||(m[L]=[]),m[L][k]=b):m[ka(k)+us(L)]=b),b.HRef&&(b.l={Target:Cn(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(j=k+(parseInt(b.MergeAcross,10)|0),X=L+(parseInt(b.MergeDown,10)|0),N.push({s:{c:k,r:L},e:{c:j,r:X}})),!r.sheetStubs)b.MergeAcross?k=j+1:++k;else if(b.MergeAcross||b.MergeDown){for(var de=k;de<=j;++de)for(var me=L;me<=X;++me)(de>k||me>L)&&(r.dense?(m[me]||(m[me]=[]),m[me][de]={t:"z"}):m[ka(de)+us(me)]={t:"z"});k=j+1}else++k;else b=Pge(o[0]),b.Index&&(k=+b.Index-1),k<M.s.c&&(M.s.c=k),k>M.e.c&&(M.e.c=k),o[0].slice(-2)==="/>"&&++k,z=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(L<M.s.r&&(M.s.r=L),L>M.e.r&&(M.e.r=L),o[0].slice(-2)==="/>"&&(y=wc(o[0]),y.Index&&(L=+y.Index-1)),k=0,++L):(y=wc(o[0]),y.Index&&(L=+y.Index-1),ie={},(y.AutoFitHeight=="0"||y.Height)&&(ie.hpx=parseInt(y.Height,10),ie.hpt=xx(ie.hpx),W[L]=ie),y.Hidden=="1"&&(ie.hidden=!0,W[L]=ie));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));h.push(g),M.s.r<=M.e.r&&M.s.c<=M.e.c&&(m["!ref"]=Mr(M),r.sheetRows&&r.sheetRows<=M.e.r&&(m["!fullref"]=m["!ref"],M.e.r=r.sheetRows-1,m["!ref"]=Mr(M))),N.length&&(m["!merges"]=N),Y.length>0&&(m["!cols"]=Y),W.length>0&&(m["!rows"]=W),d[g]=m}else M={s:{r:2e6,c:2e6},e:{r:0,c:0}},L=k=0,l.push([o[3],!1]),u=wc(o[0]),g=Cn(u.Name),m=r.dense?[]:{},N=[],G=[],W=[],te={name:g,Hidden:0},Z.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),Y=[],K=!1}break;case"style":o[1]==="/"?Hge(P,R,r):R=wc(o[0]);break;case"numberformat":R.nf=Cn(wc(o[0]).Format||"General"),Vg[R.nf]&&(R.nf=Vg[R.nf]);for(var ge=0;ge!=392&&vr[ge]!=R.nf;++ge);if(ge==392){for(ge=57;ge!=392;++ge)if(vr[ge]==null){NA(R.nf,ge);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(ae=wc(o[0]),ae.Hidden&&(ae.hidden=!0,delete ae.Hidden),ae.Width&&(ae.wpx=parseInt(ae.Width,10)),!K&&ae.wpx>10){K=!0,Oi=bj;for(var Te=0;Te<Y.length;++Te)Y[Te]&&vf(Y[Te])}K&&vf(ae),Y[ae.Index-1||Y.length]=ae;for(var xe=0;xe<+ae.Span;++xe)Y[Y.length]=ma(ae);break;case"namedrange":if(o[1]==="/")break;Z.Names||(Z.Names=[]);var oe=Nr(o[0]),Me={Name:oe.Name,Ref:xm(oe.RefersTo.slice(1),{r:0,c:0})};Z.Sheets.length>0&&(Me.Sheet=Z.Sheets.length-1),Z.Names.push(Me);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?C+=n.slice(S,o.index):S=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;R.Interior=wc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?hue(Q,ce,n.slice(I,o.index)):I=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));zge(re),z.push(re)}else l.push([o[3],!1]),u=wc(o[0]),re={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var at=wc(o[0]);m["!autofilter"]={ref:xm(at.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return G6(n,r);var Se=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Se=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Se=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Se=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Se=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(I,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else I=o.index+o[0].length;break;case"header":m["!margins"]||vh(m["!margins"]={},"xlml"),isNaN(+Nr(o[0]).Margin)||(m["!margins"].header=+Nr(o[0]).Margin);break;case"footer":m["!margins"]||vh(m["!margins"]={},"xlml"),isNaN(+Nr(o[0]).Margin)||(m["!margins"].footer=+Nr(o[0]).Margin);break;case"pagemargins":var be=Nr(o[0]);m["!margins"]||vh(m["!margins"]={},"xlml"),isNaN(+be.Top)||(m["!margins"].top=+be.Top),isNaN(+be.Left)||(m["!margins"].left=+be.Left),isNaN(+be.Right)||(m["!margins"].right=+be.Right),isNaN(+be.Bottom)||(m["!margins"].bottom=+be.Bottom);break;case"displayrighttoleft":Z.Views||(Z.Views=[]),Z.Views[0]||(Z.Views[0]={}),Z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Se=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Se=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Se=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Se=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Se=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Se=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Se=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Se=!1}break;case"smarttags":break;default:Se=!1;break}if(Se||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Oge(D,ce,O,n.slice(I,o.index)):(O=o,I=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var je={};return!r.bookSheets&&!r.bookProps&&(je.Sheets=d),je.SheetNames=h,je.Workbook=Z,je.SSF=ma(vr),je.Props=Q,je.Custprops=D,je}function y5(t,e){switch(cT(e=e||{}),e.type||"base64"){case"base64":return bE(il(t),e);case"binary":case"buffer":case"file":return bE(t,e);case"array":return bE(Sf(t),e)}}function Gge(t,e){var r=[];return t.Props&&r.push(mue(t.Props,e)),t.Custprops&&r.push(pue(t.Props,t.Custprops)),r.join("")}function qge(){return""}function Kge(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(Mt("NumberFormat",null,{"ss:Format":Kn(vr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Mt("Style",s.join(""),i))}),Mt("Styles",r.join(""))}function Wj(t){return Mt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+nT(t.Ref,{r:0,c:0})})}function $ge(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Wj(a)))}return Mt("Names",r.join(""))}function Wge(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(Wj(o)))}return s.join("")}function Xge(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(Mt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(Mt("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(Mt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Mt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(di("ProtectContents","True")),t["!protect"].objects&&a.push(di("ProtectObjects","True")),t["!protect"].scenarios&&a.push(di("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(di("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(di("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Mt("WorksheetOptions",a.join(""),{xmlns:Jo.x})}function Yge(t){return t.map(function(e){var r=xce(e.t||""),n=Mt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Mt("Comment",n,{"ss:Author":e.a})}).join("")}function Jge(t,e,r,n,a,s,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Kn(nT(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=Ia(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Kn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Kn(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var h="",m="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",m=String(t.v);break;case"b":h="Boolean",m=t.v?"1":"0";break;case"e":h="Error",m=qA[t.v];break;case"d":h="DateTime",m=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||vr[14]);break;case"s":h="String",m=gce(t.v||"");break}var g=Bf(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var b=t.v!=null?m:"",y=t.t=="z"?"":'<Data ss:Type="'+h+'">'+b+"</Data>";return(t.c||[]).length>0&&(y+=Yge(t.c)),Mt("Cell",y,o)}function Zge(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Lm(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function exe(t,e,r,n){if(!t["!ref"])return"";var a=En(t["!ref"]),s=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(E,B){vf(E);var k=!!E.width,L=Ww(B,E),M={"ss:Index":B+1};k&&(M["ss:Width"]=px(L.width)),E.hidden&&(M["ss:Hidden"]="1"),o.push(Mt("Column",null,M))});for(var l=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[Zge(u,(t["!rows"]||[])[u])],h=a.s.c;h<=a.e.c;++h){var m=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>h)&&!(s[i].s.r>u)&&!(s[i].e.c<h)&&!(s[i].e.r<u)){(s[i].s.c!=h||s[i].s.r!=u)&&(m=!0);break}if(!m){var g={r:u,c:h},b=Er(g),y=l?(t[u]||[])[h]:t[b];d.push(Jge(y,b,t,e,r,n,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function txe(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],i=s?Wge(s,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?exe(s,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(Xge(s,e,t,r)),n.join("")}function rxe(t,e){e||(e={}),t.SSF||(t.SSF=ma(vr)),t.SSF&&(tp(),Hw(t.SSF),e.revssf=zw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Bf(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Gge(t,e)),r.push(qge()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Mt("Worksheet",txe(n,e,t),{"ss:Name":Kn(t.SheetNames[n])}));return r[2]=Kge(t,e),r[3]=$ge(t),As+Mt("Workbook",r.join(""),{xmlns:Jo.ss,"xmlns:o":Jo.o,"xmlns:x":Jo.x,"xmlns:ss":Jo.ss,"xmlns:dt":Jo.dt,"xmlns:html":Jo.html})}function nxe(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=$ce(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=Wce(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var axe=[60,1084,2066,2165,2175];function sxe(t,e,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var l=EA(r,r.l),u=w5[l],d=0;u!=null&&axe.indexOf(l)>-1;)s=EA(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=w5[l=EA(r,r.l)];var h=Ys(i);ui(h,0);var m=0;h.lens=[];for(var g=0;g<i.length;++g)h.lens.push(m),m+=i[g].length;if(h.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+n;return e.f(h,h.length,a)}function mu(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=vr[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||qA[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ux(t.v):t.w=Bh(t.v):t.w=$l(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&ep(vr[n]||String(n))){var a=lh(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function Rv(t,e,r){return{v:t,ixfe:e,t:r}}function ixe(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},i={},o=null,l=[],u="",d={},h,m="",g,b,y,E,B={},k=[],L,M,P=[],R=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},N=function(Rt){return Rt<8?ph[Rt]:Rt<64&&R[Rt-8]||ph[Rt]},Q=function(Rt,xt,wr){var Jt=xt.XF.data;if(!(!Jt||!Jt.patternType||!wr||!wr.cellStyles)){xt.s={},xt.s.patternType=Jt.patternType;var dn;(dn=mx(N(Jt.icvFore)))&&(xt.s.fgColor={rgb:dn}),(dn=mx(N(Jt.icvBack)))&&(xt.s.bgColor={rgb:dn})}},D=function(Rt,xt,wr){if(!(ie>1)&&!(wr.sheetRows&&Rt.r>=wr.sheetRows)){if(wr.cellStyles&&xt.XF&&xt.XF.data&&Q(Rt,xt,wr),delete xt.ixfe,delete xt.XF,h=Rt,m=Er(Rt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Rt.r<i.s.r&&(i.s.r=Rt.r),Rt.c<i.s.c&&(i.s.c=Rt.c),Rt.r+1>i.e.r&&(i.e.r=Rt.r+1),Rt.c+1>i.e.c&&(i.e.c=Rt.c+1),wr.cellFormula&&xt.f){for(var Jt=0;Jt<k.length;++Jt)if(!(k[Jt][0].s.c>Rt.c||k[Jt][0].s.r>Rt.r)&&!(k[Jt][0].e.c<Rt.c||k[Jt][0].e.r<Rt.r)){xt.F=Mr(k[Jt][0]),(k[Jt][0].s.c!=Rt.c||k[Jt][0].s.r!=Rt.r)&&delete xt.f,xt.f&&(xt.f=""+Mi(k[Jt][1],i,Rt,G,I));break}}wr.dense?(a[Rt.r]||(a[Rt.r]=[]),a[Rt.r][Rt.c]=xt):a[m]=xt}},I={enc:!1,sbcch:0,snames:[],sharedf:B,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(I.password=e.password);var O,z=[],re=[],Y=[],ae=[],K=!1,G=[];G.SheetNames=I.snames,G.sharedf=I.sharedf,G.arrayf=I.arrayf,G.names=[],G.XTI=[];var W=0,ie=0,j=0,X=[],Z=[],te;I.codepage=1200,Tc(1200);for(var ce=!1;t.l<t.length-1;){var de=t.l,me=t.read_shift(2);if(me===0&&W===10)break;var ge=t.l===t.length?0:t.read_shift(2),Te=w5[me];if(Te&&Te.f){if(e.bookSheets&&W===133&&me!==133)break;if(W=me,Te.r===2||Te.r==12){var xe=t.read_shift(2);if(ge-=2,!I.enc&&xe!==me&&((xe&255)<<8|xe>>8)!==me)throw new Error("rt mismatch: "+xe+"!="+me);Te.r==12&&(t.l+=10,ge-=10)}var oe={};if(me===10?oe=Te.f(t,ge,I):oe=sxe(me,Te,t,ge,I),ie==0&&[9,521,1033,2057].indexOf(W)===-1)continue;switch(me){case 34:r.opts.Date1904=C.WBProps.date1904=oe;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(I.enc||(t.l=0),I.enc=oe,!e.password)throw new Error("File is password-protected");if(oe.valid==null)throw new Error("Encryption scheme unsupported");if(!oe.valid)throw new Error("Password is incorrect");break;case 92:I.lastuser=oe;break;case 66:var Me=Number(oe);switch(Me){case 21010:Me=1200;break;case 32768:Me=1e4;break;case 32769:Me=1252;break}Tc(I.codepage=Me),ce=!0;break;case 317:I.rrtabid=oe;break;case 25:I.winlocked=oe;break;case 439:r.opts.RefreshAll=oe;break;case 12:r.opts.CalcCount=oe;break;case 16:r.opts.CalcDelta=oe;break;case 17:r.opts.CalcIter=oe;break;case 13:r.opts.CalcMode=oe;break;case 14:r.opts.CalcPrecision=oe;break;case 95:r.opts.CalcSaveRecalc=oe;break;case 15:I.CalcRefMode=oe;break;case 2211:r.opts.FullCalc=oe;break;case 129:oe.fDialog&&(a["!type"]="dialog"),oe.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),oe.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:P.push(oe);break;case 430:G.push([oe]),G[G.length-1].XTI=[];break;case 35:case 547:G[G.length-1].push(oe);break;case 24:case 536:te={Name:oe.Name,Ref:Mi(oe.rgce,i,null,G,I)},oe.itab>0&&(te.Sheet=oe.itab-1),G.names.push(te),G[0]||(G[0]=[],G[0].XTI=[]),G[G.length-1].push(oe),oe.Name=="_xlnm._FilterDatabase"&&oe.itab>0&&oe.rgce&&oe.rgce[0]&&oe.rgce[0][0]&&oe.rgce[0][0][0]=="PtgArea3d"&&(Z[oe.itab-1]={ref:Mr(oe.rgce[0][0][1][2])});break;case 22:I.ExternCount=oe;break;case 23:G.length==0&&(G[0]=[],G[0].XTI=[]),G[G.length-1].XTI=G[G.length-1].XTI.concat(oe),G.XTI=G.XTI.concat(oe);break;case 2196:if(I.biff<8)break;te!=null&&(te.Comment=oe[1]);break;case 18:a["!protect"]=oe;break;case 19:oe!==0&&I.WTF&&console.error("Password verifier: "+oe);break;case 133:s[oe.pos]=oe,I.snames.push(oe.name);break;case 10:{if(--ie)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=Mr(i),e.sheetRows&&e.sheetRows<=i.e.r){var at=i.e.r;i.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Mr(i),i.e.r=at}i.e.r++,i.e.c++}z.length>0&&(a["!merges"]=z),re.length>0&&(a["!objects"]=re),Y.length>0&&(a["!cols"]=Y),ae.length>0&&(a["!rows"]=ae),C.Sheets.push(S)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(I.biff===8&&(I.biff={9:2,521:3,1033:4}[me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[oe.BIFFVer]||8),I.biffguess=oe.BIFFVer==0,oe.BIFFVer==0&&oe.dt==4096&&(I.biff=5,ce=!0,Tc(I.codepage=28591)),I.biff==8&&oe.BIFFVer==0&&oe.dt==16&&(I.biff=2),ie++)break;if(a=e.dense?[]:{},I.biff<8&&!ce&&(ce=!0,Tc(I.codepage=e.codepage||1252)),I.biff<5||oe.BIFFVer==0&&oe.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Se={pos:t.l-ge,name:u};s[Se.pos]=Se,I.snames.push(u)}else u=(s[de]||{name:""}).name;oe.dt==32&&(a["!type"]="chart"),oe.dt==64&&(a["!type"]="macro"),z=[],re=[],I.arrayf=k=[],Y=[],ae=[],K=!1,S={Hidden:(s[de]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[oe.r]||[])[oe.c]:a[Er({c:oe.c,r:oe.r})])&&++oe.c,L={ixfe:oe.ixfe,XF:P[oe.ixfe]||{},v:oe.val,t:"n"},j>0&&(L.z=X[L.ixfe>>8&63]),mu(L,e,r.opts.Date1904),D({c:oe.c,r:oe.r},L,e);break;case 5:case 517:L={ixfe:oe.ixfe,XF:P[oe.ixfe],v:oe.val,t:oe.t},j>0&&(L.z=X[L.ixfe>>8&63]),mu(L,e,r.opts.Date1904),D({c:oe.c,r:oe.r},L,e);break;case 638:L={ixfe:oe.ixfe,XF:P[oe.ixfe],v:oe.rknum,t:"n"},j>0&&(L.z=X[L.ixfe>>8&63]),mu(L,e,r.opts.Date1904),D({c:oe.c,r:oe.r},L,e);break;case 189:for(var be=oe.c;be<=oe.C;++be){var je=oe.rkrec[be-oe.c][0];L={ixfe:je,XF:P[je],v:oe.rkrec[be-oe.c][1],t:"n"},j>0&&(L.z=X[L.ixfe>>8&63]),mu(L,e,r.opts.Date1904),D({c:be,r:oe.r},L,e)}break;case 6:case 518:case 1030:{if(oe.val=="String"){o=oe;break}if(L=Rv(oe.val,oe.cell.ixfe,oe.tt),L.XF=P[L.ixfe],e.cellFormula){var Ke=oe.formula;if(Ke&&Ke[0]&&Ke[0][0]&&Ke[0][0][0]=="PtgExp"){var st=Ke[0][0][1][0],pt=Ke[0][0][1][1],St=Er({r:st,c:pt});B[St]?L.f=""+Mi(oe.formula,i,oe.cell,G,I):L.F=((e.dense?(a[st]||[])[pt]:a[St])||{}).F}else L.f=""+Mi(oe.formula,i,oe.cell,G,I)}j>0&&(L.z=X[L.ixfe>>8&63]),mu(L,e,r.opts.Date1904),D(oe.cell,L,e),o=oe}break;case 7:case 519:if(o)o.val=oe,L=Rv(oe,o.cell.ixfe,"s"),L.XF=P[L.ixfe],e.cellFormula&&(L.f=""+Mi(o.formula,i,o.cell,G,I)),j>0&&(L.z=X[L.ixfe>>8&63]),mu(L,e,r.opts.Date1904),D(o.cell,L,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(oe);var ut=Er(oe[0].s);if(g=e.dense?(a[oe[0].s.r]||[])[oe[0].s.c]:a[ut],e.cellFormula&&g){if(!o||!ut||!g)break;g.f=""+Mi(oe[1],i,oe[0],G,I),g.F=Mr(oe[0])}}break;case 1212:{if(!e.cellFormula)break;if(m){if(!o)break;B[Er(o.cell)]=oe[0],g=e.dense?(a[o.cell.r]||[])[o.cell.c]:a[Er(o.cell)],(g||{}).f=""+Mi(oe[0],i,h,G,I)}}break;case 253:L=Rv(l[oe.isst].t,oe.ixfe,"s"),l[oe.isst].h&&(L.h=l[oe.isst].h),L.XF=P[L.ixfe],j>0&&(L.z=X[L.ixfe>>8&63]),mu(L,e,r.opts.Date1904),D({c:oe.c,r:oe.r},L,e);break;case 513:e.sheetStubs&&(L={ixfe:oe.ixfe,XF:P[oe.ixfe],t:"z"},j>0&&(L.z=X[L.ixfe>>8&63]),mu(L,e,r.opts.Date1904),D({c:oe.c,r:oe.r},L,e));break;case 190:if(e.sheetStubs)for(var kt=oe.c;kt<=oe.C;++kt){var zt=oe.ixfe[kt-oe.c];L={ixfe:zt,XF:P[zt],t:"z"},j>0&&(L.z=X[L.ixfe>>8&63]),mu(L,e,r.opts.Date1904),D({c:kt,r:oe.r},L,e)}break;case 214:case 516:case 4:L=Rv(oe.val,oe.ixfe,"s"),L.XF=P[L.ixfe],j>0&&(L.z=X[L.ixfe>>8&63]),mu(L,e,r.opts.Date1904),D({c:oe.c,r:oe.r},L,e);break;case 0:case 512:ie===1&&(i=oe);break;case 252:l=oe;break;case 1054:if(I.biff==4){X[j++]=oe[1];for(var Yt=0;Yt<j+163&&vr[Yt]!=oe[1];++Yt);Yt>=163&&NA(oe[1],j+163)}else NA(oe[1],oe[0]);break;case 30:{X[j++]=oe;for(var It=0;It<j+163&&vr[It]!=oe;++It);It>=163&&NA(oe,j+163)}break;case 229:z=z.concat(oe);break;case 93:re[oe.cmo[0]]=I.lastobj=oe;break;case 438:I.lastobj.TxO=oe;break;case 127:I.lastobj.ImData=oe;break;case 440:for(E=oe[0].s.r;E<=oe[0].e.r;++E)for(y=oe[0].s.c;y<=oe[0].e.c;++y)g=e.dense?(a[E]||[])[y]:a[Er({c:y,r:E})],g&&(g.l=oe[1]);break;case 2048:for(E=oe[0].s.r;E<=oe[0].e.r;++E)for(y=oe[0].s.c;y<=oe[0].e.c;++y)g=e.dense?(a[E]||[])[y]:a[Er({c:y,r:E})],g&&g.l&&(g.l.Tooltip=oe[1]);break;case 28:{if(I.biff<=5&&I.biff>=2)break;g=e.dense?(a[oe[0].r]||[])[oe[0].c]:a[Er(oe[0])];var Dt=re[oe[2]];g||(e.dense?(a[oe[0].r]||(a[oe[0].r]=[]),g=a[oe[0].r][oe[0].c]={t:"z"}):g=a[Er(oe[0])]={t:"z"},i.e.r=Math.max(i.e.r,oe[0].r),i.s.r=Math.min(i.s.r,oe[0].r),i.e.c=Math.max(i.e.c,oe[0].c),i.s.c=Math.min(i.s.c,oe[0].c)),g.c||(g.c=[]),b={a:oe[1],t:Dt.TxO.t},g.c.push(b)}break;case 2173:Kfe(P[oe.ixfe],oe.ext);break;case 125:{if(!I.cellStyles)break;for(;oe.e>=oe.s;)Y[oe.e--]={width:oe.w/256,level:oe.level||0,hidden:!!(oe.flags&1)},K||(K=!0,eT(oe.w/256)),vf(Y[oe.e+1])}break;case 520:{var Wt={};oe.level!=null&&(ae[oe.r]=Wt,Wt.level=oe.level),oe.hidden&&(ae[oe.r]=Wt,Wt.hidden=!0),oe.hpt&&(ae[oe.r]=Wt,Wt.hpt=oe.hpt,Wt.hpx=Lm(oe.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||vh(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[me]]=oe;break;case 161:a["!margins"]||vh(a["!margins"]={}),a["!margins"].header=oe.header,a["!margins"].footer=oe.footer;break;case 574:oe.RTL&&(C.Views[0].RTL=!0);break;case 146:R=oe;break;case 2198:O=oe;break;case 140:M=oe;break;case 442:u?S.CodeName=oe||S.name:C.WBProps.CodeName=oe||"ThisWorkbook";break}}else Te||console.error("Missing Info for XLS Record 0x"+me.toString(16)),t.l+=ge}return r.SheetNames=Ka(s).sort(function(Lt,Rt){return Number(Lt)-Number(Rt)}).map(function(Lt){return s[Lt].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Z.forEach(function(Lt,Rt){r.Sheets[r.SheetNames[Rt]]["!autofilter"]=Lt}),r.Strings=l,r.SSF=ma(vr),I.enc&&(r.Encryption=I.enc),O&&(r.Themes=O),r.Metadata={},M!==void 0&&(r.Metadata.Country=M),G.names.length>0&&(C.Names=G.names),r.Workbook=C,r}var zg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function oxe(t,e,r){var n=ur.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=w6(n,h5,zg.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var i=ur.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=w6(i,m5,zg.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&($P(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function lxe(t,e){var r=[],n=[],a=[],s=0,i,o=YF(h5,"n"),l=YF(m5,"n");if(t.Props)for(i=Ka(t.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],t.Props[i[s]]]);if(t.Custprops)for(i=Ka(t.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],t.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)tj.indexOf(a[s][0])>-1||KP.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&ur.utils.cfb_add(e,"/SummaryInformation",b6(n,zg.SI,l,m5)),(r.length||u.length)&&ur.utils.cfb_add(e,"/DocumentSummaryInformation",b6(r,zg.DSI,o,h5,u.length?u:null,zg.UDI))}function Xj(t,e){e||(e={}),cT(e),k4(),e.codepage&&N4(e.codepage);var r,n;if(t.FullPaths){if(ur.find(t,"/encryption"))throw new Error("File is password-protected");r=ur.find(t,"!CompObj"),n=ur.find(t,"/Workbook")||ur.find(t,"/Book")}else{switch(e.type){case"base64":t=el(il(t));break;case"binary":t=el(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}ui(t,0),n={content:t}}var a,s;if(r&&nxe(r),e.bookProps&&!e.bookSheets)a={};else{var i=Yr?"buffer":"array";if(n&&n.content)a=ixe(n.content,e);else if((s=ur.find(t,"PerfectOffice_MAIN"))&&s.content)a=xh.to_workbook(s.content,(e.type=i,e));else if((s=ur.find(t,"NativeContent_MAIN"))&&s.content)a=xh.to_workbook(s.content,(e.type=i,e));else throw(s=ur.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&ur.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=whe(t))}var o={};return t.FullPaths&&oxe(t,o,e),a.Props=a.Custprops=o,e.bookFiles&&(a.cfb=t),a}function cxe(t,e){var r=e||{},n=ur.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return ur.utils.cfb_add(n,a,Yj(t,r)),r.biff==8&&(t.Props||t.Custprops)&&lxe(t,n),r.biff==8&&t.vbaraw&&bhe(n,ur.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var vx={0:{f:Dme},1:{f:Qme},2:{f:ipe},3:{f:Wme},4:{f:Gme},5:{f:npe},6:{f:Ape},7:{f:Zme},8:{f:xpe},9:{f:gpe},10:{f:mpe},11:{f:ppe},12:{f:Vme},13:{f:lpe},14:{f:Yme},15:{f:Kme},16:{f:Hj},17:{f:fpe},18:{f:tpe},19:{f:z4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:fge},40:{},42:{},43:{f:Afe},44:{f:cfe},45:{f:hfe},46:{f:pfe},47:{f:mfe},48:{},49:{f:Uce},50:{},51:{f:Xfe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:dj},62:{f:upe},63:{f:she},64:{f:Rpe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:qi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:kpe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:jme},148:{f:Ume,p:16},151:{f:Epe},152:{},153:{f:uge},154:{},155:{},156:{f:lge},157:{},158:{},159:{T:1,f:Sde},160:{T:-1},161:{T:1,f:Kh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:vpe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:$fe},336:{T:-1},337:{f:Zfe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:f5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Aj},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:_pe},427:{f:Spe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Bpe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Pme},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:bpe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:f5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:phe},633:{T:1},634:{T:-1},635:{T:1,f:hhe},636:{T:-1},637:{f:Oce},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Ype},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Lpe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},w5={6:{f:yE},10:{f:kd},12:{f:Cs},13:{f:Cs},14:{f:rs},15:{f:rs},16:{f:Hi},17:{f:rs},18:{f:rs},19:{f:Cs},20:{f:B6},21:{f:B6},23:{f:Aj},24:{f:k6},25:{f:rs},26:{},27:{},28:{f:LAe},29:{},34:{f:rs},35:{f:N6},38:{f:Hi},39:{f:Hi},40:{f:Hi},41:{f:Hi},42:{f:rs},43:{f:rs},47:{f:Kde},49:{f:lAe},51:{f:Cs},60:{},61:{f:nAe},64:{f:rs},65:{f:oAe},66:{f:Cs},77:{},80:{},81:{},82:{},85:{f:Cs},89:{},90:{},91:{},92:{f:que},93:{f:PAe},94:{},95:{f:rs},96:{},97:{},99:{f:rs},125:{f:dj},128:{f:CAe},129:{f:$ue},130:{f:Cs},131:{f:rs},132:{f:rs},133:{f:Wue},134:{},140:{f:qAe},141:{f:Cs},144:{},146:{f:WAe},151:{},152:{},153:{},154:{},155:{},156:{f:Cs},157:{},158:{},160:{f:rde},161:{f:JAe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:vAe},190:{f:yAe},193:{f:kd},197:{},198:{},199:{},200:{},201:{},202:{f:rs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Cs},220:{},221:{f:rs},222:{},224:{f:bAe},225:{f:Gue},226:{f:kd},227:{},229:{f:UAe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Yue},253:{f:uAe},255:{f:Zue},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:rj},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:rs},353:{f:kd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:BAe},431:{f:rs},432:{},433:{},434:{},437:{},438:{f:QAe},439:{f:rs},440:{f:HAe},441:{},442:{f:r1},443:{},444:{f:Cs},445:{},446:{},448:{f:kd},449:{f:rAe,r:2},450:{f:kd},512:{f:_6},513:{f:tde},515:{f:SAe},516:{f:dAe},517:{f:T6},519:{f:nde},520:{f:eAe},523:{},545:{f:I6},549:{f:E6},566:{},574:{f:sAe},638:{f:xAe},659:{},1048:{},1054:{f:hAe},1084:{},1212:{f:FAe},2048:{f:zAe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Iv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:kd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:XAe,r:12},2173:{f:qfe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:rs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:IAe,r:12},2197:{},2198:{f:Ofe,r:12},2199:{},2200:{},2201:{},2202:{f:DAe,r:12},2203:{f:kd},2204:{},2205:{},2206:{},2207:{},2211:{f:tAe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Cs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:ZAe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:$Ae},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:_6},1:{},2:{f:lde},3:{f:ide},4:{f:sde},5:{f:T6},7:{f:ude},8:{},9:{f:Iv},11:{},22:{f:Cs},30:{f:pAe},31:{},32:{},33:{f:I6},36:{},37:{f:E6},50:{f:Ade},62:{},52:{},67:{},68:{f:Cs},69:{},86:{},126:{},127:{f:ade},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:dde},223:{},234:{},354:{},421:{},518:{f:yE},521:{f:Iv},536:{f:k6},547:{f:N6},561:{},579:{},1030:{f:yE},1033:{f:Iv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Pt(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&Q4(r)&&t.push(r)}}function uxe(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return Pt(t,e,r,a);var s=e;if(!isNaN(s)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u;l<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u}}}function i1(t,e,r){return t||(t=lt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function Axe(t,e,r,n){var a=lt(9);return i1(a,t,e),nj(r,n||"b",a),a}function dxe(t,e,r){var n=lt(8+2*r.length);return i1(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function fxe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Ps(ha(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?Pt(t,2,cde(r,n,a)):Pt(t,3,ode(r,n,a));return;case"b":case"e":Pt(t,5,Axe(r,n,e.v,e.t));return;case"s":case"str":Pt(t,4,dxe(r,n,(e.v||"").slice(0,255)));return}Pt(t,1,i1(null,r,n))}function hxe(t,e,r,n){var a=Array.isArray(e),s=En(e["!ref"]||"A1"),i,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=Mr(s)}for(var u=s.s.r;u<=s.e.r;++u){o=us(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(l[d]=ka(d)),i=l[d]+o;var h=a?(e[u]||[])[d]:e[i];h&&fxe(t,h,u,d)}}}function mxe(t,e){for(var r=e||{},n=No(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Pt(n,r.biff==4?1033:r.biff==3?521:9,Y4(t,16,r)),hxe(n,t.Sheets[t.SheetNames[a]],a,r),Pt(n,10),n.end()}function pxe(t,e,r){Pt(t,49,cAe({sz:12,name:"Arial"},r))}function gxe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Pt(t,1054,mAe(a,e[a],r))})}function xxe(t,e){var r=lt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Pt(t,2151,r),r=lt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),lj(En(e["!ref"]||"A1"),r),r.write_shift(4,4),Pt(t,2152,r)}function vxe(t,e){for(var r=0;r<16;++r)Pt(t,224,S6({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Pt(t,224,S6(n,0,e))})}function yxe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Pt(t,440,VAe(n)),n[1].Tooltip&&Pt(t,2048,GAe(n))}delete e["!links"]}function wxe(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&Pt(t,125,YAe(Ww(a,n),a))})}}function bxe(t,e,r,n,a){var s=16+Bf(a.cellXfs,e,a);if(e.v==null&&!e.bf){Pt(t,513,Fh(r,n,s));return}if(e.bf)Pt(t,6,$0e(e,r,n,a,s));else switch(e.t){case"d":case"n":var i=e.t=="d"?Ps(ha(e.v)):e.v;Pt(t,515,TAe(r,n,i,s));break;case"b":case"e":Pt(t,517,_Ae(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var o=sT(a.Strings,e.v,a.revStrings);Pt(t,253,AAe(r,n,o,s))}else Pt(t,516,fAe(r,n,(e.v||"").slice(0,255),s,a));break;default:Pt(t,513,Fh(r,n,s))}}function Cxe(t,e,r){var n=No(),a=r.SheetNames[t],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(s),u=e.biff==8,d,h="",m=[],g=En(s["!ref"]||"A1"),b=u?65536:16384;if(g.e.c>255||g.e.r>=b){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,b-1)}Pt(n,2057,Y4(r,16,e)),Pt(n,13,Ml(1)),Pt(n,12,Ml(100)),Pt(n,15,ro(!0)),Pt(n,17,ro(!1)),Pt(n,16,kh(.001)),Pt(n,95,ro(!0)),Pt(n,42,ro(!1)),Pt(n,43,ro(!1)),Pt(n,130,Ml(1)),Pt(n,128,EAe()),Pt(n,131,ro(!1)),Pt(n,132,ro(!1)),u&&wxe(n,s["!cols"]),Pt(n,512,gAe(g,e)),u&&(s["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){h=us(y);for(var E=g.s.c;E<=g.e.c;++E){y===g.s.r&&(m[E]=ka(E)),d=m[E]+h;var B=l?(s[y]||[])[E]:s[d];B&&(bxe(n,B,y,E,e),u&&B.l&&s["!links"].push([d,B.l]))}}var k=o.CodeName||o.name||a;return u&&Pt(n,574,iAe((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&Pt(n,229,MAe(s["!merges"])),u&&yxe(n,s),Pt(n,442,aj(k)),u&&xxe(n,s),Pt(n,10),n.end()}function Exe(t,e,r){var n=No(),a=(t||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,l=r.biff==5;if(Pt(n,2057,Y4(t,5,r)),r.bookType=="xla"&&Pt(n,135),Pt(n,225,o?Ml(1200):null),Pt(n,193,_ue(2)),l&&Pt(n,191),l&&Pt(n,192),Pt(n,226),Pt(n,92,Kue("SheetJS",r)),Pt(n,66,Ml(o?1200:1252)),o&&Pt(n,353,Ml(0)),o&&Pt(n,448),Pt(n,317,ede(t.SheetNames.length)),o&&t.vbaraw&&Pt(n,211),o&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";Pt(n,442,aj(u))}Pt(n,156,Ml(17)),Pt(n,25,ro(!1)),Pt(n,18,ro(!1)),Pt(n,19,Ml(0)),o&&Pt(n,431,ro(!1)),o&&Pt(n,444,Ml(0)),Pt(n,61,aAe()),Pt(n,64,ro(!1)),Pt(n,141,Ml(0)),Pt(n,34,ro(rge(t)=="true")),Pt(n,14,ro(!0)),o&&Pt(n,439,ro(!1)),Pt(n,218,Ml(0)),pxe(n,t,r),gxe(n,t.SSF,r),vxe(n,r),o&&Pt(n,352,ro(!1));var d=n.end(),h=No();o&&Pt(h,140,KAe()),o&&r.Strings&&uxe(h,252,Jue(r.Strings)),Pt(h,10);var m=h.end(),g=No(),b=0,y=0;for(y=0;y<t.SheetNames.length;++y)b+=(o?12:11)+(o?2:1)*t.SheetNames[y].length;var E=d.length+b+m.length;for(y=0;y<t.SheetNames.length;++y){var B=s[y]||{};Pt(g,133,Xue({pos:E,hs:B.Hidden||0,dt:0,name:t.SheetNames[y]},r)),E+=e[y].length}var k=g.end();if(b!=k.length)throw new Error("BS8 "+b+" != "+k.length);var L=[];return d.length&&L.push(d),k.length&&L.push(k),m.length&&L.push(m),Ys(L)}function _xe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ma(vr)),t&&t.SSF&&(tp(),Hw(t.SSF),r.revssf=zw(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,uT(r),r.cellXfs=[],Bf(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=Cxe(a,r,t);return n.unshift(Exe(t,n,r)),Ys(n)}function Yj(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Io(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return _xe(t,e);case 4:case 3:case 2:return mxe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function Q6(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),i=a.index,o=s&&s.index||t.length,l=cce(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,h=0,m=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(i=0;i<l.length;++i){var y=l[i].trim(),E=y.slice(0,3).toLowerCase();if(E=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(E!="<td"&&E!="<th")){var B=y.split(/<\/t[dh]>/i);for(o=0;o<B.length;++o){var k=B[o].trim();if(k.match(/<t[dh]/i)){for(var L=k,M=0;L.charAt(0)=="<"&&(M=L.indexOf(">"))>-1;)L=L.slice(M+1);for(var P=0;P<b.length;++P){var R=b[P];R.s.c==d&&R.s.r<u&&u<=R.e.r&&(d=R.e.c+1,P=-1)}var C=Nr(k.slice(0,k.indexOf(">")));m=C.colspan?+C.colspan:1,((h=+C.rowspan)>1||m>1)&&b.push({s:{r:u,c:d},e:{r:u+(h||1)-1,c:d+m-1}});var S=C.t||C["data-t"]||"";if(!L.length){d+=m;continue}if(L=wP(L),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!L.length){d+=m;continue}var N={t:"s",v:L};r.raw||!L.trim().length||S=="s"||(L==="TRUE"?N={t:"b",v:!0}:L==="FALSE"?N={t:"b",v:!1}:isNaN(Nc(L))?isNaN(Dm(L).getDate())||(N={t:"d",v:ha(L)},r.cellDates||(N={t:"n",v:Ps(N.v)}),N.z=r.dateNF||vr[14]):N={t:"n",v:Nc(L)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=N):n[Er({r:u,c:d})]=N,d+=m}}}}return n["!ref"]=Mr(g),b.length&&(n["!merges"]=b),n}function Sxe(t,e,r,n){for(var a=t["!merges"]||[],s=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,l=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Er({r,c:i}),h=n.dense?(t[r]||[])[i]:t[d],m=h&&h.v!=null&&(h.h||P4(h.w||(MA(h),h.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),n.editable?m='<span contenteditable="true">'+m+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),g.id=(n.id||"sjs")+"-"+d,s.push(Mt("td",m,g))}}var b="<tr>";return b+s.join("")+"</tr>"}var Txe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Bxe="</body></html>";function Nxe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Tf(Q6(r[0],e),e);var n=hT();return r.forEach(function(a,s){mT(n,Q6(a,e),"Sheet"+(s+1))}),n}function kxe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Jj(t,e){var r=e||{},n=r.header!=null?r.header:Txe,a=r.footer!=null?r.footer:Bxe,s=[n],i=Io(t["!ref"]);r.dense=Array.isArray(t),s.push(kxe(t,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(Sxe(t,i,o,r));return s.push("</table>"+a),s.join("")}function Zj(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?Ia(n.origin):n.origin;a=i.r,s=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=Io(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var h=[],m=0,g=t["!rows"]||(t["!rows"]=[]),b=0,y=0,E=0,B=0,k=0,L=0;for(t["!cols"]||(t["!cols"]=[]);b<o.length&&y<l;++b){var M=o[b];if(H6(M)){if(n.display)continue;g[y]={hidden:!0}}var P=M.children;for(E=B=0;E<P.length;++E){var R=P[E];if(!(n.display&&H6(R))){var C=R.hasAttribute("data-v")?R.getAttribute("data-v"):R.hasAttribute("v")?R.getAttribute("v"):wP(R.innerHTML),S=R.getAttribute("data-z")||R.getAttribute("z");for(m=0;m<h.length;++m){var N=h[m];N.s.c==B+s&&N.s.r<y+a&&y+a<=N.e.r&&(B=N.e.c+1-s,m=-1)}L=+R.getAttribute("colspan")||1,((k=+R.getAttribute("rowspan")||1)>1||L>1)&&h.push({s:{r:y+a,c:B+s},e:{r:y+a+(k||1)-1,c:B+s+(L||1)-1}});var Q={t:"s",v:C},D=R.getAttribute("data-t")||R.getAttribute("t")||"";C!=null&&(C.length==0?Q.t=D||"z":n.raw||C.trim().length==0||D=="s"||(C==="TRUE"?Q={t:"b",v:!0}:C==="FALSE"?Q={t:"b",v:!1}:isNaN(Nc(C))?isNaN(Dm(C).getDate())||(Q={t:"d",v:ha(C)},n.cellDates||(Q={t:"n",v:Ps(Q.v)}),Q.z=n.dateNF||vr[14]):Q={t:"n",v:Nc(C)})),Q.z===void 0&&S!=null&&(Q.z=S);var I="",O=R.getElementsByTagName("A");if(O&&O.length)for(var z=0;z<O.length&&!(O[z].hasAttribute("href")&&(I=O[z].getAttribute("href"),I.charAt(0)!="#"));++z);I&&I.charAt(0)!="#"&&(Q.l={Target:I}),n.dense?(t[y+a]||(t[y+a]=[]),t[y+a][B+s]=Q):t[Er({c:B+s,r:y+a})]=Q,u.e.c<B+s&&(u.e.c=B+s),B+=L}}++y}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,y-1+a),t["!ref"]=Mr(u),y>=l&&(t["!fullref"]=Mr((u.e.r=o.length-b+y-1+a,u))),t}function e7(t,e){var r=e||{},n=r.dense?[]:{};return Zj(n,t,e)}function Ixe(t,e){return Tf(e7(t,e),e)}function H6(t){var e="",r=Fxe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Fxe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Dxe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Cn(e.replace(/<[^>]*>/g,""));return[r]}var V6={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function t7(t,e){var r=e||{},n=j4(t),a=[],s,i,o={name:""},l="",u=0,d,h,m={},g=[],b=r.dense?[]:{},y,E,B={value:""},k="",L=0,M=[],P=-1,R=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,N={},Q=[],D={},I=0,O=0,z=[],re=1,Y=1,ae=[],K={Names:[]},G={},W=["",""],ie=[],j={},X="",Z=0,te=!1,ce=!1,de=0;for(fx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=fx.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?b["!ref"]=Mr(C):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(b["!fullref"]=b["!ref"],C.e.r=r.sheetRows-1,b["!ref"]=Mr(C)),Q.length&&(b["!merges"]=Q),z.length&&(b["!rows"]=z),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),m[d.name]=b,ce=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=Nr(y[0],!1),P=R=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,b=r.dense?[]:{},Q=[],z=[],ce=!0);break;case"table-row-group":y[1]==="/"?--S:++S;break;case"table-row":case"":if(y[1]==="/"){P+=re,re=1;break}if(h=Nr(y[0],!1),h.?P=h.-1:P==-1&&(P=0),re=+h["number-rows-repeated"]||1,re<10)for(de=0;de<re;++de)S>0&&(z[P+de]={level:S});R=-1;break;case"covered-table-cell":y[1]!=="/"&&++R,r.sheetStubs&&(r.dense?(b[P]||(b[P]=[]),b[P][R]={t:"z"}):b[Er({r:P,c:R})]={t:"z"}),k="",M=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++R,B=Nr(y[0],!1),Y=parseInt(B["number-columns-repeated"]||"1",10),E={t:"z",v:null},B.formula&&r.cellFormula!=!1&&(E.f=P6(Cn(B.formula))),(B.||B["value-type"])=="string"&&(E.t="s",E.v=Cn(B["string-value"]||""),r.dense?(b[P]||(b[P]=[]),b[P][R]=E):b[Er({r:P,c:R})]=E),R+=Y-1;else if(y[1]!=="/"){++R,k="",L=0,M=[],Y=1;var me=re?P+re-1:P;if(R>C.e.c&&(C.e.c=R),R<C.s.c&&(C.s.c=R),P<C.s.r&&(C.s.r=P),me>C.e.r&&(C.e.r=me),B=Nr(y[0],!1),ie=[],j={},E={t:B.||B["value-type"],v:null},r.cellFormula)if(B.formula&&(B.formula=Cn(B.formula)),B["number-matrix-columns-spanned"]&&B["number-matrix-rows-spanned"]&&(I=parseInt(B["number-matrix-rows-spanned"],10)||0,O=parseInt(B["number-matrix-columns-spanned"],10)||0,D={s:{r:P,c:R},e:{r:P+I-1,c:R+O-1}},E.F=Mr(D),ae.push([D,E.F])),B.formula)E.f=P6(B.formula);else for(de=0;de<ae.length;++de)P>=ae[de][0].s.r&&P<=ae[de][0].e.r&&R>=ae[de][0].s.c&&R<=ae[de][0].e.c&&(E.F=ae[de][1]);switch((B["number-columns-spanned"]||B["number-rows-spanned"])&&(I=parseInt(B["number-rows-spanned"],10)||0,O=parseInt(B["number-columns-spanned"],10)||0,D={s:{r:P,c:R},e:{r:P+I-1,c:R+O-1}},Q.push(D)),B["number-columns-repeated"]&&(Y=parseInt(B["number-columns-repeated"],10)),E.t){case"boolean":E.t="b",E.v=da(B["boolean-value"]);break;case"float":E.t="n",E.v=parseFloat(B.value);break;case"percentage":E.t="n",E.v=parseFloat(B.value);break;case"currency":E.t="n",E.v=parseFloat(B.value);break;case"date":E.t="d",E.v=ha(B["date-value"]),r.cellDates||(E.t="n",E.v=Ps(E.v)),E.z="m/d/yy";break;case"time":E.t="n",E.v=ice(B["time-value"])/86400,r.cellDates&&(E.t="d",E.v=Gw(E.v)),E.z="HH:MM:SS";break;case"number":E.t="n",E.v=parseFloat(B.);break;default:if(E.t==="string"||E.t==="text"||!E.t)E.t="s",B["string-value"]!=null&&(k=Cn(B["string-value"]),M=[]);else throw new Error("Unsupported value type "+E.t)}}else{if(te=!1,E.t==="s"&&(E.v=k||"",M.length&&(E.R=M),te=L==0),G.Target&&(E.l=G),ie.length>0&&(E.c=ie,ie=[]),k&&r.cellText!==!1&&(E.w=k),te&&(E.t="z",delete E.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=P))for(var ge=0;ge<re;++ge){if(Y=parseInt(B["number-columns-repeated"]||"1",10),r.dense)for(b[P+ge]||(b[P+ge]=[]),b[P+ge][R]=ge==0?E:ma(E);--Y>0;)b[P+ge][R+Y]=ma(E);else for(b[Er({r:P+ge,c:R})]=E;--Y>0;)b[Er({r:P+ge,c:R+Y})]=ma(E);C.e.c<=R&&(C.e.c=R)}Y=parseInt(B["number-columns-repeated"]||"1",10),R+=Y-1,Y=0,E={},k="",M=[]}G={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((s=a.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((s=a.pop())[0]!==y[3])throw"Bad state: "+s;j.t=k,M.length&&(j.R=M),j.a=X,ie.push(j)}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!1]);X="",Z=0,k="",L=0,M=[];break;case"creator":y[1]==="/"?X=n.slice(Z,y.index):Z=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((s=a.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!1]);k="",L=0,M=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(N[o.name]=l,(s=a.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=Nr(y[0],!1),a.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Nr(y[0],!1),l+=V6[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Nr(y[0],!1),l+=V6[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=Nr(y[0],!1),W=wE(i["cell-range-address"]);var Te={Name:i.name,Ref:W[0]+"!"+W[1]};ce&&(Te.Sheet=g.length),K.Names.push(Te);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(y[1]==="/"&&(!B||!B["string-value"])){var xe=Dxe(n.slice(L,y.index));k=(k.length>0?k+`
`:"")+xe[0]}else Nr(y[0],!1),L=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{W=wE(Nr(y[0])["target-range-address"]),m[W[0]]["!autofilter"]={ref:W[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(G=Nr(y[0],!1),!G.href)break;G.Target=Cn(G.href),delete G.href,G.Target.charAt(0)=="#"&&G.Target.indexOf(".")>-1?(W=wE(G.Target.slice(1)),G.Target="#"+W[0]+"!"+W[1]):G.Target.match(/^\.\.[\\\/]/)&&(G.Target=G.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var oe={Sheets:m,SheetNames:g,Workbook:K};return r.bookSheets&&delete oe.Sheets,oe}function z6(t,e){e=e||{},Ll(t,"META-INF/manifest.xml")&&iue(bs(t,"META-INF/manifest.xml"),e);var r=tl(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=t7(ra(r),e);return Ll(t,"meta.xml")&&(n.Props=GP(bs(t,"meta.xml"))),n}function G6(t,e){return t7(t,e)}var Rxe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+dx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return As+e}}(),q6=function(){var t=function(s){return Kn(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var l=[];l.push('      <table:table table:name="'+Kn(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,h=Io(s["!ref"]||"A1"),m=s["!merges"]||[],g=0,b=Array.isArray(s);if(s["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",E=s["!rows"]||[];for(u=0;u<h.s.r;++u)y=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=h.e.r;++u){for(y=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var B=!1,k={},L="";for(g=0;g!=m.length;++g)if(!(m[g].s.c>d)&&!(m[g].s.r>u)&&!(m[g].e.c<d)&&!(m[g].e.r<u)){(m[g].s.c!=d||m[g].s.r!=u)&&(B=!0),k["table:number-columns-spanned"]=m[g].e.c-m[g].s.c+1,k["table:number-rows-spanned"]=m[g].e.r-m[g].s.r+1;break}if(B){l.push(r);continue}var M=Er({r:u,c:d}),P=b?(s[u]||[])[d]:s[M];if(P&&P.f&&(k["table:formula"]=Kn(eme(P.f)),P.F&&P.F.slice(0,M.length)==M)){var R=Io(P.F);k["table:number-matrix-columns-spanned"]=R.e.c-R.s.c+1,k["table:number-matrix-rows-spanned"]=R.e.r-R.s.r+1}if(!P){l.push(e);continue}switch(P.t){case"b":L=P.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=P.v?"true":"false";break;case"n":L=P.w||String(P.v||0),k["office:value-type"]="float",k["office:value"]=P.v||0;break;case"s":case"str":L=P.v==null?"":P.v,k["office:value-type"]="string";break;case"d":L=P.w||ha(P.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=ha(P.v).toISOString(),k["table:style-name"]="ce1";break;default:l.push(e);continue}var C=t(L);if(P.l&&P.l.Target){var S=P.l.Target;S=S.charAt(0)=="#"?"#"+tme(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),C=Mt("text:a",C,{"xlink:href":S.replace(/&/g,"&amp;")})}l.push("          "+Mt("table:table-cell",Mt("text:p",C,{}),k)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var h=u["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;vf(h),h.ods=o;var m=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var h=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var l=[As],u=dx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=dx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(zP().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),a(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(n(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function r7(t,e){if(e.bookType=="fods")return q6(t,e);var r=L4(),n="",a=[],s=[];return n="mimetype",Vr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Vr(r,n,q6(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Vr(r,n,Rxe(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Vr(r,n,As+zP()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Vr(r,n,cue(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Vr(r,n,oue(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Dh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function b5(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):ra(Sf(t))}function Lxe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):el(Cu(t))}function Uxe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function wf(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function K6(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Mxe(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function Pxe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function yx(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function zn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function qa(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function In(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=yx(t,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:i=4,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=yx(t,r),o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function oi(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(zn(n*8+a.type)),a.type==2&&e.push(zn(a.data.length)),e.push(a.data))})}),wf(e)}function lT(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Dl(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=yx(t,n),s=In(t.slice(n[0],n[0]+a));n[0]+=a;var i={id:qa(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=In(o.data),u=qa(l[3][0].data);i.messages.push({meta:l,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(i.merge=qa(s[3][0].data)>>>0>0),r.push(i)}return r}function T0(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:zn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:zn(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:zn(i.data.length)}],n[2].push({data:oi(i.meta),type:2})});var s=oi(n);e.push(zn(s.length)),e.push(s),a.forEach(function(i){return e.push(i)})}),wf(e)}function jxe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=yx(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[r[0]],o>1&&(i|=e[r[0]+1]<<8),o>2&&(i|=e[r[0]+2]<<16),o>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[wf(a)],l==0)throw new Error("Invalid offset 0");if(l>a[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(a.push(a[0].slice(-l)),u-=l;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-l,-l+u))}}var d=wf(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Rl(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(jxe(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return wf(e)}function B0(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=zn(n),i=s.length;e.push(s),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return wf(e)}function Oxe(t,e,r,n){var a=Dh(t),s=a.getUint32(4,!0),i=(n>1?12:8)+K6(s&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=K6(s&(n>1?12288:4096))*4,s&16&&(l=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:u};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(u))h={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function Qxe(t,e,r){var n=Dh(t),a=n.getUint32(8,!0),s=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(l=Mxe(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return h}function CE(t,e){var r=new Uint8Array(32),n=Dh(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,Pxe(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function EE(t,e){var r=new Uint8Array(32),n=Dh(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function Hxe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return Oxe(t,e,r,t[0]);case 5:return Qxe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Ui(t){var e=In(t);return yx(e[1][0].data)}function $6(t,e){var r=In(e.data),n=qa(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=In(i.data),l=qa(o[1][0].data)>>>0;switch(n){case 1:s[l]=b5(o[3][0].data);break;case 8:{var u=t[Ui(o[9][0].data)][0],d=In(u.data),h=t[Ui(d[1][0].data)][0],m=qa(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var g=In(h.data);s[l]=g[3].map(function(b){return b5(b.data)}).join("")}break}}),s}function Vxe(t,e){var r,n,a,s,i,o,l,u,d,h,m,g,b,y,E=In(t),B=qa(E[1][0].data)>>>0,k=qa(E[2][0].data)>>>0,L=((n=(r=E[8])==null?void 0:r[0])==null?void 0:n.data)&&qa(E[8][0].data)>0||!1,M,P;if((s=(a=E[7])==null?void 0:a[0])!=null&&s.data&&e!=0)M=(o=(i=E[7])==null?void 0:i[0])==null?void 0:o.data,P=(u=(l=E[6])==null?void 0:l[0])==null?void 0:u.data;else if((h=(d=E[4])==null?void 0:d[0])!=null&&h.data&&e!=1)M=(g=(m=E[4])==null?void 0:m[0])==null?void 0:g.data,P=(y=(b=E[3])==null?void 0:b[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var R=L?4:1,C=Dh(M),S=[],N=0;N<M.length/2;++N){var Q=C.getUint16(N*2,!0);Q<65535&&S.push([N,Q])}if(S.length!=k)throw"Expected ".concat(k," cells, found ").concat(S.length);var D=[];for(N=0;N<S.length-1;++N)D[S[N][0]]=P.subarray(S[N][1]*R,S[N+1][1]*R);return S.length>=1&&(D[S[S.length-1][0]]=P.subarray(S[S.length-1][1]*R)),{R:B,cells:D}}function zxe(t,e){var r,n=In(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?qa(n[7][0].data)>>>0>0?1:0:-1,s=lT(n[5],function(i){return Vxe(i,a)});return{nrows:qa(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function Gxe(t,e,r){var n,a=In(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(qa(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(qa(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Mr(s);var i=In(a[4][0].data),o=$6(t,t[Ui(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?$6(t,t[Ui(i[17][0].data)][0]):[],u=In(i[3][0].data),d=0;u[1].forEach(function(h){var m=In(h.data),g=t[Ui(m[2][0].data)][0],b=qa(g.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var y=zxe(t,g);y.data.forEach(function(E,B){E.forEach(function(k,L){var M=Er({r:d+B,c:L}),P=Hxe(k,o,l);P&&(r[M]=P)})}),d+=y.nrows})}function qxe(t,e){var r=In(e.data),n={"!ref":"A1"},a=t[Ui(r[2][0].data)],s=qa(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return Gxe(t,a[0],n),n}function Kxe(t,e){var r,n=In(e.data),a={name:(r=n[1])!=null&&r[0]?b5(n[1][0].data):"",sheets:[]},s=lT(n[2],Ui);return s.forEach(function(i){t[i].forEach(function(o){var l=qa(o.meta[1][0].data);l==6e3&&a.sheets.push(qxe(t,o))})}),a}function $xe(t,e){var r=hT(),n=In(e.data),a=lT(n[1],Ui);if(a.forEach(function(s){t[s].forEach(function(i){var o=qa(i.meta[1][0].data);if(o==2){var l=Kxe(t,i);l.sheets.forEach(function(u,d){mT(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function _E(t){var e,r,n,a,s={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=Rl(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var d;try{d=Dl(u)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){s[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&qa(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(l){s[l].forEach(function(u){var d=qa(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return $xe(s,o)}function Wxe(t,e,r){var n,a,s,i;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=t[8])==null?void 0:s[0])==null?void 0:i.data)&&qa(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Dh(t[7][0].data),d=0,h=[],m=Dh(t[4][0].data),g=0,b=[],y=0;y<e.length;++y){if(e[y]==null){u.setUint16(y*2,65535,!0),m.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),m.setUint16(y*2,g,!0);var E,B;switch(typeof e[y]){case"string":E=CE({t:"s",v:e[y]},r),B=EE({t:"s",v:e[y]},r);break;case"number":E=CE({t:"n",v:e[y]},r),B=EE({t:"n",v:e[y]},r);break;case"boolean":E=CE({t:"b",v:e[y]},r),B=EE({t:"b",v:e[y]},r);break;default:throw new Error("Unsupported value "+e[y])}h.push(E),d+=E.length,b.push(B),g+=B.length,++l}for(t[2][0].data=zn(l);y<t[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),m.setUint16(y*2,65535,!0);return t[6][0].data=wf(h),t[3][0].data=wf(b),l}function Xxe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Io(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Mr(n)));var s=Ny(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(X){return X.forEach(function(Z){typeof Z=="string"&&i.push(Z)})});var o={},l=[],u=ur.read(e.numbers,{type:"base64"});u.FileIndex.map(function(X,Z){return[X,u.FullPaths[Z]]}).forEach(function(X){var Z=X[0],te=X[1];if(Z.type==2&&Z.name.match(/\.iwa/)){var ce=Z.content,de=Rl(ce),me=Dl(de);me.forEach(function(ge){l.push(ge.id),o[ge.id]={deps:[],location:te,type:qa(ge.messages[0].meta[1][0].data)}})}}),l.sort(function(X,Z){return X-Z});var d=l.filter(function(X){return X>1}).map(function(X){return[X,zn(X)]});u.FileIndex.map(function(X,Z){return[X,u.FullPaths[Z]]}).forEach(function(X){var Z=X[0];if(X[1],!!Z.name.match(/\.iwa/)){var te=Dl(Rl(Z.content));te.forEach(function(ce){ce.messages.forEach(function(de){d.forEach(function(me){ce.messages.some(function(ge){return qa(ge.meta[1][0].data)!=11006&&Uxe(ge.data,me[1])})&&o[me[0]].deps.push(ce.id)})})})}});for(var h=ur.find(u,o[1].location),m=Dl(Rl(h.content)),g,b=0;b<m.length;++b){var y=m[b];y.id==1&&(g=y)}var E=Ui(In(g.messages[0].data)[1][0].data);for(h=ur.find(u,o[E].location),m=Dl(Rl(h.content)),b=0;b<m.length;++b)y=m[b],y.id==E&&(g=y);for(E=Ui(In(g.messages[0].data)[2][0].data),h=ur.find(u,o[E].location),m=Dl(Rl(h.content)),b=0;b<m.length;++b)y=m[b],y.id==E&&(g=y);for(E=Ui(In(g.messages[0].data)[2][0].data),h=ur.find(u,o[E].location),m=Dl(Rl(h.content)),b=0;b<m.length;++b)y=m[b],y.id==E&&(g=y);var B=In(g.messages[0].data);{B[6][0].data=zn(n.e.r+1),B[7][0].data=zn(n.e.c+1);var k=Ui(B[46][0].data),L=ur.find(u,o[k].location),M=Dl(Rl(L.content));{for(var P=0;P<M.length&&M[P].id!=k;++P);if(M[P].id!=k)throw"Bad ColumnRowUIDMapArchive";var R=In(M[P].messages[0].data);R[1]=[],R[2]=[],R[3]=[];for(var C=0;C<=n.e.c;++C){var S=[];S[1]=S[2]=[{type:0,data:zn(C+420690)}],R[1].push({type:2,data:oi(S)}),R[2].push({type:0,data:zn(C)}),R[3].push({type:0,data:zn(C)})}R[4]=[],R[5]=[],R[6]=[];for(var N=0;N<=n.e.r;++N)S=[],S[1]=S[2]=[{type:0,data:zn(N+726270)}],R[4].push({type:2,data:oi(S)}),R[5].push({type:0,data:zn(N)}),R[6].push({type:0,data:zn(N)});M[P].messages[0].data=oi(R)}L.content=B0(T0(M)),L.size=L.content.length,delete B[46];var Q=In(B[4][0].data);{Q[7][0].data=zn(n.e.r+1);var D=In(Q[1][0].data),I=Ui(D[2][0].data);L=ur.find(u,o[I].location),M=Dl(Rl(L.content));{if(M[0].id!=I)throw"Bad HeaderStorageBucket";var O=In(M[0].messages[0].data);for(N=0;N<s.length;++N){var z=In(O[2][0].data);z[1][0].data=zn(N),z[4][0].data=zn(s[N].length),O[2][N]={type:O[2][0].type,data:oi(z)}}M[0].messages[0].data=oi(O)}L.content=B0(T0(M)),L.size=L.content.length;var re=Ui(Q[2][0].data);L=ur.find(u,o[re].location),M=Dl(Rl(L.content));{if(M[0].id!=re)throw"Bad HeaderStorageBucket";for(O=In(M[0].messages[0].data),C=0;C<=n.e.c;++C)z=In(O[2][0].data),z[1][0].data=zn(C),z[4][0].data=zn(n.e.r+1),O[2][C]={type:O[2][0].type,data:oi(z)};M[0].messages[0].data=oi(O)}L.content=B0(T0(M)),L.size=L.content.length;var Y=Ui(Q[4][0].data);(function(){for(var X=ur.find(u,o[Y].location),Z=Dl(Rl(X.content)),te,ce=0;ce<Z.length;++ce){var de=Z[ce];de.id==Y&&(te=de)}var me=In(te.messages[0].data);{me[3]=[];var ge=[];i.forEach(function(oe,Me){ge[1]=[{type:0,data:zn(Me)}],ge[2]=[{type:0,data:zn(1)}],ge[3]=[{type:2,data:Lxe(oe)}],me[3].push({type:2,data:oi(ge)})})}te.messages[0].data=oi(me);var Te=T0(Z),xe=B0(Te);X.content=xe,X.size=X.content.length})();var ae=In(Q[3][0].data);{var K=ae[1][0];delete ae[2];var G=In(K.data);{var W=Ui(G[2][0].data);(function(){for(var X=ur.find(u,o[W].location),Z=Dl(Rl(X.content)),te,ce=0;ce<Z.length;++ce){var de=Z[ce];de.id==W&&(te=de)}var me=In(te.messages[0].data);{delete me[6],delete ae[7];var ge=new Uint8Array(me[5][0].data);me[5]=[];for(var Te=0,xe=0;xe<=n.e.r;++xe){var oe=In(ge);Te+=Wxe(oe,s[xe],i),oe[1][0].data=zn(xe),me[5].push({data:oi(oe),type:2})}me[1]=[{type:0,data:zn(n.e.c+1)}],me[2]=[{type:0,data:zn(n.e.r+1)}],me[3]=[{type:0,data:zn(Te)}],me[4]=[{type:0,data:zn(n.e.r+1)}]}te.messages[0].data=oi(me);var Me=T0(Z),at=B0(Me);X.content=at,X.size=X.content.length})()}K.data=oi(G)}Q[3][0].data=oi(ae)}B[4][0].data=oi(Q)}g.messages[0].data=oi(B);var ie=T0(m),j=B0(ie);return h.content=j,h.size=h.content.length,u}function n7(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function cT(t){n7([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function uT(t){n7([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Yxe(t){return rn.WS.indexOf(t)>-1?"sheet":t==rn.CS?"chart":t==rn.DS?"dialog":t==rn.MS?"macro":t&&t.length?t:"sheet"}function Jxe(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,Yxe(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Zxe(t,e,r,n,a,s,i,o,l,u,d,h){try{s[n]=Og(tl(t,r,!0),e);var m=bs(t,e),g;switch(o){case"sheet":g=wge(m,e,a,l,s[n],u,d,h);break;case"chart":if(g=bge(m,e,a,l,s[n],u,d,h),!g||!g["!drawel"])break;var b=pg(g["!drawel"].Target,e),y=hx(b),E=lhe(tl(t,b,!0),Og(tl(t,y,!0),b)),B=pg(E,b),k=hx(B);g=Wpe(tl(t,B,!0),B,l,Og(tl(t,k,!0),B),u,g);break;case"macro":g=Cge(m,e,a,l,s[n],u,d,h);break;case"dialog":g=Ege(m,e,a,l,s[n],u,d,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var L=[];s&&s[n]&&Ka(s[n]).forEach(function(M){var P="";if(s[n][M].Type==rn.CMNT){P=pg(s[n][M].Target,e);var R=Bge(bs(t,P,!0),P,l);if(!R||!R.length)return;D6(g,R,!1)}s[n][M].Type==rn.TCMNT&&(P=pg(s[n][M].Target,e),L=L.concat(uhe(bs(t,P,!0),l)))}),L&&L.length&&D6(g,L,!0,l.people||[])}catch(M){if(l.WTF)throw M}}function Il(t){return t.charAt(0)=="/"?t.slice(1):t}function e1e(t,e){if(tp(),e=e||{},cT(e),Ll(t,"META-INF/manifest.xml")||Ll(t,"objectdata.xml"))return z6(t,e);if(Ll(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof _E<"u"){if(t.FileIndex)return _E(t);var r=ur.utils.cfb_new();return e6(t).forEach(function(z){Vr(r,z,Ace(t,z))}),_E(r)}throw new Error("Unsupported NUMBERS file")}if(!Ll(t,"[Content_Types].xml"))throw Ll(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ll(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=e6(t),a=aue(tl(t,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",bs(t,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!bs(t,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},u={};if(!e.bookSheets&&!e.bookProps){if(Qg=[],a.sst)try{Qg=Tge(bs(t,Il(a.sst)),a.sst,e)}catch(z){if(e.WTF)throw z}e.cellStyles&&a.themes.length&&(l=Sge(tl(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=_ge(bs(t,Il(a.style)),a.style,l,e))}a.links.map(function(z){try{var re=Og(tl(t,hx(Il(z))),z);return kge(bs(t,Il(z)),re,z,e)}catch{}});var d=yge(bs(t,Il(a.workbooks[0])),a.workbooks[0],e),h={},m="";a.coreprops.length&&(m=bs(t,Il(a.coreprops[0]),!0),m&&(h=GP(m)),a.extprops.length!==0&&(m=bs(t,Il(a.extprops[0]),!0),m&&Aue(m,h,e)));var g={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(m=tl(t,Il(a.custprops[0]),!0),m&&(g=fue(m,e)));var b={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(re){return re.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),e.bookProps&&(b.Props=h,b.Custprops=g),e.bookSheets&&typeof i<"u"&&(b.SheetNames=i),e.bookSheets?b.SheetNames:e.bookProps))return b;i={};var y={};e.bookDeps&&a.calcchain&&(y=Nge(bs(t,Il(a.calcchain)),a.calcchain));var E=0,B={},k,L;{var M=d.Sheets;h.Worksheets=M.length,h.SheetNames=[];for(var P=0;P!=M.length;++P)h.SheetNames[P]=M[P].name}var R=s?"bin":"xml",C=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,C+1)+"_rels/"+a.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");Ll(t,S)||(S="xl/_rels/workbook."+R+".rels");var N=Og(tl(t,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=Ige(bs(t,Il(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=dhe(bs(t,Il(a.people[0])),e)),N&&(N=Jxe(N,d.Sheets));var Q=bs(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(E=0;E!=h.Worksheets;++E){var D="sheet";if(N&&N[E]?(k="xl/"+N[E][1].replace(/[\/]?xl\//,""),Ll(t,k)||(k=N[E][1]),Ll(t,k)||(k=S.replace(/_rels\/.*$/,"")+N[E][1]),D=N[E][2]):(k="xl/worksheets/sheet"+(E+1-Q)+"."+R,k=k.replace(/sheet0\./,"sheet.")),L=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(E!=e.sheets)continue e;break;case"string":if(h.SheetNames[E].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var I=!1,O=0;O!=e.sheets.length;++O)typeof e.sheets[O]=="number"&&e.sheets[O]==E&&(I=1),typeof e.sheets[O]=="string"&&e.sheets[O].toLowerCase()==h.SheetNames[E].toLowerCase()&&(I=1);if(!I)continue e}}Zxe(t,k,L,h.SheetNames[E],E,B,i,D,e,d,l,u)}return b={Directory:a,Workbook:d,Props:h,Custprops:g,Deps:y,Sheets:i,SheetNames:h.SheetNames,Strings:Qg,Styles:u,Themes:l,SSF:ma(vr)},e&&e.bookFiles&&(t.files?(b.keys=n,b.files=t.files):(b.keys=[],b.files={},t.FullPaths.forEach(function(z,re){z=z.replace(/^Root Entry[\/]/,""),b.keys.push(z),b.files[z]=t.FileIndex[re]}))),e&&e.bookVBA&&(a.vba.length>0?b.vbaraw=bs(t,Il(a.vba[0]),!0):a.defaults&&a.defaults.bin===yhe&&(b.vbaraw=bs(t,"xl/vbaProject.bin",!0))),b}function t1e(t,e){var r=e||{},n="Workbook",a=ur.find(t,n);try{if(n="/!DataSpaces/Version",a=ur.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Ide(a.content),n="/!DataSpaces/DataSpaceMap",a=ur.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=Dde(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=ur.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=Rde(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=ur.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);Ude(a.content)}catch{}if(n="/EncryptionInfo",a=ur.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Mde(a.content);if(n="/EncryptedPackage",a=ur.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function r1e(t,e){return e.bookType=="ods"?r7(t,e):e.bookType=="numbers"?Xxe(t,e):e.bookType=="xlsb"?n1e(t,e):a1e(t,e)}function n1e(t,e){tm=1024,t&&!t.SSF&&(t.SSF=ma(vr)),t&&t.SSF&&(tp(),Hw(t.SSF),e.revssf=zw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Hg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=kj.indexOf(e.bookType)>-1,a=W4();uT(e=e||{});var s=L4(),i="",o=0;if(e.cellXfs=[],Bf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Vr(s,i,qP(t.Props,e)),a.coreprops.push(i),Gn(e.rels,2,i,rn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Vr(s,i,WP(t.Props)),a.extprops.push(i),Gn(e.rels,3,i,rn.EXT_PROPS),t.Custprops!==t.Props&&Ka(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Vr(s,i,XP(t.Custprops)),a.custprops.push(i),Gn(e.rels,4,i,rn.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Vr(s,i,Dge(o-1,i,e,t,d)),a.sheets.push(i),Gn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,rn.WS[0])}if(h){var g=h["!comments"],b=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+r,Vr(s,y,Uge(g,y)),a.comments.push(y),Gn(d,-1,"../comments"+o+"."+r,rn.CMNT),b=!0),h["!legacy"]&&b&&Vr(s,"xl/drawings/vmlDrawing"+o+".vml",Bj(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&Vr(s,hx(i),gm(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Vr(s,i,Lge(e.Strings,i,e)),a.strs.push(i),Gn(e.wbrels,-1,"sharedStrings."+r,rn.SST)),i="xl/workbook."+r,Vr(s,i,Fge(t,i)),a.workbooks.push(i),Gn(e.rels,1,i,rn.WB),i="xl/theme/theme1.xml",Vr(s,i,tT(t.Themes,e)),a.themes.push(i),Gn(e.wbrels,-1,"theme/theme1.xml",rn.THEME),i="xl/styles."+r,Vr(s,i,Rge(t,i,e)),a.styles.push(i),Gn(e.wbrels,-1,"styles."+r,rn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Vr(s,i,t.vbaraw),a.vba.push(i),Gn(e.wbrels,-1,"vbaProject.bin",rn.VBA)),i="xl/metadata."+r,Vr(s,i,Mge(i)),a.metadata.push(i),Gn(e.wbrels,-1,"metadata."+r,rn.XLMETA),Vr(s,"[Content_Types].xml",VP(a,e)),Vr(s,"_rels/.rels",gm(e.rels)),Vr(s,"xl/_rels/workbook."+r+".rels",gm(e.wbrels)),delete e.revssf,delete e.ssf,s}function a1e(t,e){tm=1024,t&&!t.SSF&&(t.SSF=ma(vr)),t&&t.SSF&&(tp(),Hw(t.SSF),e.revssf=zw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Hg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=kj.indexOf(e.bookType)>-1,a=W4();uT(e=e||{});var s=L4(),i="",o=0;if(e.cellXfs=[],Bf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Vr(s,i,qP(t.Props,e)),a.coreprops.push(i),Gn(e.rels,2,i,rn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Vr(s,i,WP(t.Props)),a.extprops.push(i),Gn(e.rels,3,i,rn.EXT_PROPS),t.Custprops!==t.Props&&Ka(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Vr(s,i,XP(t.Custprops)),a.custprops.push(i),Gn(e.rels,4,i,rn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},m=t.Sheets[t.SheetNames[o-1]],g=(m||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Vr(s,i,Qj(o-1,e,t,h)),a.sheets.push(i),Gn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,rn.WS[0])}if(m){var b=m["!comments"],y=!1,E="";if(b&&b.length>0){var B=!1;b.forEach(function(k){k[1].forEach(function(L){L.T==!0&&(B=!0)})}),B&&(E="xl/threadedComments/threadedComment"+o+"."+r,Vr(s,E,Ahe(b,d,e)),a.threadedcomments.push(E),Gn(h,-1,"../threadedComments/threadedComment"+o+"."+r,rn.TCMNT)),E="xl/comments"+o+"."+r,Vr(s,E,Nj(b)),a.comments.push(E),Gn(h,-1,"../comments"+o+"."+r,rn.CMNT),y=!0}m["!legacy"]&&y&&Vr(s,"xl/drawings/vmlDrawing"+o+".vml",Bj(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}h["!id"].rId1&&Vr(s,hx(i),gm(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Vr(s,i,pj(e.Strings,e)),a.strs.push(i),Gn(e.wbrels,-1,"sharedStrings."+r,rn.SST)),i="xl/workbook."+r,Vr(s,i,qj(t)),a.workbooks.push(i),Gn(e.rels,1,i,rn.WB),i="xl/theme/theme1.xml",Vr(s,i,tT(t.Themes,e)),a.themes.push(i),Gn(e.wbrels,-1,"theme/theme1.xml",rn.THEME),i="xl/styles."+r,Vr(s,i,Ej(t,e)),a.styles.push(i),Gn(e.wbrels,-1,"styles."+r,rn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Vr(s,i,t.vbaraw),a.vba.push(i),Gn(e.wbrels,-1,"vbaProject.bin",rn.VBA)),i="xl/metadata."+r,Vr(s,i,Tj()),a.metadata.push(i),Gn(e.wbrels,-1,"metadata."+r,rn.XLMETA),d.length>1&&(i="xl/persons/person.xml",Vr(s,i,fhe(d)),a.people.push(i),Gn(e.wbrels,-1,"persons/person.xml",rn.PEOPLE)),Vr(s,"[Content_Types].xml",VP(a,e)),Vr(s,"_rels/.rels",gm(e.rels)),Vr(s,"xl/_rels/workbook."+r+".rels",gm(e.wbrels)),delete e.revssf,delete e.ssf,s}function AT(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=il(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function s1e(t,e){return ur.find(t,"EncryptedPackage")?t1e(t,e):Xj(t,e)}function i1e(t,e){var r,n=t,a=e||{};return a.type||(a.type=Yr&&Buffer.isBuffer(t)?"buffer":"base64"),r=xP(n,a),e1e(r,a)}function a7(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return y5(t.slice(r),e);default:break e}return Rm.to_workbook(t,e)}function o1e(t,e){var r="",n=AT(t,e);switch(e.type){case"base64":r=il(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Nh(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ra(r)),e.type="binary",a7(r,e)}function l1e(t,e){var r=t;return e.type=="base64"&&(r=il(r)),r=lx.utils.decode(1200,r.slice(2),"str"),e.type="binary",a7(r,e)}function c1e(t){return t.match(/[^\x00-\x7F]/)?Cu(t):t}function SE(t,e,r,n){return n?(r.type="string",Rm.to_workbook(t,r)):Rm.to_workbook(e,r)}function wx(t,e){k4();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return wx(new Uint8Array(t),(r=ma(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),vm={},r.dateNF&&(vm.dateNF=r.dateNF),r.type||(r.type=Yr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Yr?"buffer":"binary",n=nce(t),typeof Uint8Array<"u"&&!Yr&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=c1e(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=ma(r),r.type="array",wx(I4(n),r)}switch((a=AT(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return s1e(ur.read(n,r),r);break;case 9:if(a[1]<=8)return Xj(n,r);break;case 60:return y5(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return hde(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return hj.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?i1e(n,r):SE(t,n,r,s);case 239:return a[3]===60?y5(n,r):SE(t,n,r,s);case 255:if(a[1]===254)return l1e(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return xh.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return xh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return v5.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return wj.to_workbook(n,r);break;case 10:case 13:case 32:return o1e(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return fde.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?v5.to_workbook(n,r):SE(t,n,r,s)}function s7(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Zx(e.file,ur.write(t,{type:Yr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return ur.write(t,e)}function u1e(t,e){var r=ma(e||{}),n=r1e(t,r);return A1e(n,r)}function A1e(t,e){var r={},n=Yr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?ur.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(Qw(a))}return e.password&&typeof encrypt_agile<"u"?s7(encrypt_agile(a,e.password),e):e.type==="file"?Zx(e.file,a):e.type=="string"?ra(a):a}function d1e(t,e){var r=e||{},n=cxe(t,r);return s7(n,r)}function vu(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return cx(Cu(n));case"binary":return Cu(n);case"string":return t;case"file":return Zx(e.file,n,"utf8");case"buffer":return Yr?zA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):vu(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function f1e(t,e){switch(e.type){case"base64":return cx(t);case"binary":return t;case"string":return t;case"file":return Zx(e.file,t,"binary");case"buffer":return Yr?zA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Lv(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?cx(r):e.type=="string"?ra(r):r;case"file":return Zx(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function i7(t,e){k4(),sge(t);var r=ma(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=i7(t,r);return r.type="array",Qw(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return vu(rxe(t,r),r);case"slk":case"sylk":return vu(fj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return vu(Jj(t.Sheets[t.SheetNames[a]],r),r);case"txt":return f1e(o7(t.Sheets[t.SheetNames[a]],r),r);case"csv":return vu(fT(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return vu(hj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return Lv(v5.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return vu(Rm.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return vu(wj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return vu(mj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return vu(r7(t,r),r);case"wk1":return Lv(xh.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return Lv(xh.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Lv(Yj(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),d1e(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return u1e(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function h1e(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function dT(t,e,r){var n={};return n.type="file",n.file=e,h1e(n),i7(t,n)}function m1e(t,e,r,n,a,s,i,o){var l=us(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,m=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!i||t[r])for(var g=e.s.c;g<=e.e.c;++g){var b=i?t[r][g]:t[n[g]+l];if(b===void 0||b.t===void 0){if(u===void 0)continue;s[g]!=null&&(m[s[g]]=u);continue}var y=b.v;switch(b.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(s[g]!=null){if(y==null)if(b.t=="e"&&y===null)m[s[g]]=null;else if(u!==void 0)m[s[g]]=u;else if(d&&y===null)m[s[g]]=null;else continue;else m[s[g]]=d&&(b.t!=="n"||b.t==="n"&&o.rawNumbers!==!1)?y:MA(b,y,o);y!=null&&(h=!1)}}return{row:m,isempty:h}}function Ny(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=En(d);break;case"number":l=En(t["!ref"]),l.s.r=d;break;default:l=d}n>0&&(a=0);var h=us(l.s.r),m=[],g=[],b=0,y=0,E=Array.isArray(t),B=l.s.r,k=0,L={};E&&!t[B]&&(t[B]=[]);var M=u.skipHidden&&t["!cols"]||[],P=u.skipHidden&&t["!rows"]||[];for(k=l.s.c;k<=l.e.c;++k)if(!(M[k]||{}).hidden)switch(m[k]=ka(k),r=E?t[B][k]:t[m[k]+h],n){case 1:s[k]=k-l.s.c;break;case 2:s[k]=m[k];break;case 3:s[k]=u.header[k-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=MA(r,null,u),y=L[i]||0,!y)L[i]=1;else{do o=i+"_"+y++;while(L[o]);L[i]=y,L[o]=1}s[k]=o}for(B=l.s.r+a;B<=l.e.r;++B)if(!(P[B]||{}).hidden){var R=m1e(t,l,B,m,n,s,E,u);(R.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[b++]=R.row)}return g.length=b,g}var W6=/"/g;function p1e(t,e,r,n,a,s,i,o){for(var l=!0,u=[],d="",h=us(r),m=e.s.c;m<=e.e.c;++m)if(n[m]){var g=o.dense?(t[r]||[])[m]:t[n[m]+h];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:MA(g,null,o));for(var b=0,y=0;b!==d.length;++b)if((y=d.charCodeAt(b))===a||y===s||y===34||o.forceQuotes){d='"'+d.replace(W6,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(W6,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function fT(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=En(t["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",h=[];n.dense=Array.isArray(t);for(var m=n.skipHidden&&t["!cols"]||[],g=n.skipHidden&&t["!rows"]||[],b=a.s.c;b<=a.e.c;++b)(m[b]||{}).hidden||(h[b]=ka(b));for(var y=0,E=a.s.r;E<=a.e.r;++E)(g[E]||{}).hidden||(d=p1e(t,a,E,h,i,l,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function o7(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=fT(t,e);return r}function g1e(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=En(t["!ref"]),s="",i=[],o,l=[],u=Array.isArray(t);for(o=a.s.c;o<=a.e.c;++o)i[o]=ka(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=us(d),o=a.s.c;o<=a.e.c;++o)if(e=i[o]+s,r=u?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function l7(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Ia(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+a}};if(s["!ref"]){var h=En(s["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+e.length-1+a)}else i==-1&&(i=0,d.e.r=e.length-1+a);var m=n.header||[],g=0;e.forEach(function(y,E){Ka(y).forEach(function(B){(g=m.indexOf(B))==-1&&(m[g=m.length]=B);var k=y[B],L="z",M="",P=Er({c:o+g,r:i+E+a});u=bx(s,P),k&&typeof k=="object"&&!(k instanceof Date)?s[P]=k:(typeof k=="number"?L="n":typeof k=="boolean"?L="b":typeof k=="string"?L="s":k instanceof Date?(L="d",n.cellDates||(L="n",k=Ps(k)),M=n.dateNF||vr[14]):k===null&&n.nullError&&(L="e",k=0),u?(u.t=L,u.v=k,delete u.w,delete u.R,M&&(u.z=M)):s[P]=u={t:L,v:k},M&&(u.z=M))})}),d.e.c=Math.max(d.e.c,o+m.length-1);var b=us(i);if(a)for(g=0;g<m.length;++g)s[ka(g+o)+b]={t:"s",v:m[g]};return s["!ref"]=Mr(d),s}function x1e(t,e){return l7(null,t,e)}function bx(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Ia(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?bx(t,Er(e)):bx(t,Er({r:e,c:r||0}))}function v1e(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function hT(){return{SheetNames:[],Sheets:{}}}function mT(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Gj(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function y1e(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=v1e(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function w1e(t,e){return t.z=e,t}function c7(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function b1e(t,e,r){return c7(t,"#"+e,r)}function C1e(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function E1e(t,e,r,n){for(var a=typeof e!="string"?e:En(e),s=typeof e=="string"?e:Mr(e),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=bx(t,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Ql={encode_col:ka,encode_row:us,encode_cell:Er,encode_range:Mr,decode_col:V4,decode_row:H4,split_cell:Lce,decode_cell:Ia,decode_range:Io,format_cell:MA,sheet_add_aoa:UP,sheet_add_json:l7,sheet_add_dom:Zj,aoa_to_sheet:rp,json_to_sheet:x1e,table_to_sheet:e7,table_to_book:Ixe,sheet_to_csv:fT,sheet_to_txt:o7,sheet_to_json:Ny,sheet_to_html:Jj,sheet_to_formulae:g1e,sheet_to_row_object_array:Ny,sheet_get_cell:bx,book_new:hT,book_append_sheet:mT,book_set_sheet_visibility:y1e,cell_set_number_format:w1e,cell_set_hyperlink:c7,cell_set_internal_link:b1e,cell_add_comment:C1e,sheet_set_array_formula:E1e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const _1e=async()=>{try{const t=er(Ft(Kr,"apiLogs"),gn("timestamp","desc"));return(await cs(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener logs de API:",t),new Error("No se pudieron cargar los logs de API")}},S1e=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const l of r)try{const u=Ft(Kr,l),d=await cs(u),h=d.size;n+=h,s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:h});let m=0;d.docs.forEach(g=>{const b=g.data();b.createdAt&&new Date(b.createdAt)>=e&&m++}),a+=m}catch(u){console.warn(`Error accediendo a coleccin ${l}:`,u),s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=Ft(Kr,"apiLogs"),u=new Date(t.getTime()-10080*60*1e3),d=er(l,Fn("timestamp",">=",u.toISOString()),gn("timestamp","desc")),h=await cs(d),m={};h.docs.forEach(g=>{const b=g.data(),y=new Date(b.timestamp).toLocaleDateString("es-CL");m[y]=(m[y]||0)+1}),Object.entries(m).sort(([g],[b])=>new Date(g).getTime()-new Date(b).getTime()).forEach(([g,b])=>{i.push({label:g,value:b})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadsticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},X6=500,N0=({title:t,value:e,description:r,alert:n})=>c.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),c.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),r&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),TE=({title:t,data:e,colorClass:r})=>{const n=ee.useMemo(()=>Math.max(...e.map(a=>a.value),1),[e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(a=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},T1e=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!1),[a,s]=ee.useState(null),[i,o]=ee.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}),l=ee.useCallback(async()=>{n(!0);try{const g=await _1e();e(g),s(null)}catch(g){console.error("Error al cargar logs de la API desde Firestore:",g),s("No se pudieron cargar los logs de API desde la nube.")}finally{n(!1)}},[]),u=ee.useCallback(async()=>{try{const g=await S1e();o(g)}catch(g){console.error("Error al cargar estadsticas de Firestore:",g)}},[]);ee.useEffect(()=>{l(),u();const g=setInterval(()=>{l(),u()},300*1e3);return()=>clearInterval(g)},[l,u]);const{stats:d,userStats:h,moduleStats:m}=ee.useMemo(()=>{const g=new Date,b=new Date(g.getFullYear(),g.getMonth(),g.getDate()).getTime(),y=b-g.getDay()*24*60*60*1e3,E=new Date(g.getFullYear(),g.getMonth(),1).getTime(),B={today:0,week:0,month:0},k={},L={};t.forEach(R=>{const C=new Date(R.timestamp).getTime();C>=b&&B.today++,C>=y&&B.week++,C>=E&&B.month++,k[R.userId]||(k[R.userId]={email:R.userEmail,today:0,month:0,total:0}),k[R.userId].total++,C>=b&&k[R.userId].today++,C>=E&&k[R.userId].month++,L[R.module]=(L[R.module]||0)+1});const M=Object.values(k).sort((R,C)=>C.total-R.total),P=Object.entries(L).map(([R,C])=>({label:R,value:C})).sort((R,C)=>C.value-R.value);return{stats:B,userStats:M,moduleStats:P}},[t]);return c.jsxs("div",{className:"space-y-8",children:[r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadsticas desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(N0,{title:"Llamadas Hoy",value:r?"--":d.today,description:`Lmite recomendado: ${X6}`,alert:d.today>X6}),c.jsx(N0,{title:"Llamadas esta Semana",value:r?"--":d.week}),c.jsx(N0,{title:"Llamadas este Mes",value:r?"--":d.month})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(TE,{title:"Uso por Mdulo",data:m,colorClass:"bg-sky-500"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&h.length>0?h.map(g=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:g.email}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.today}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.month}),c.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:g.total})]},g.email)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadsticas de uso de Firestore en tiempo real."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(N0,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),c.jsx(N0,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),c.jsx(N0,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(TE,{title:"Actividad por Coleccin",data:i.collectionsActivity,colorClass:"bg-green-500"}),c.jsx(TE,{title:"Actividad Diaria (ltimos 7 das)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1e="type.googleapis.com/google.protobuf.Int64Value",N1e="type.googleapis.com/google.protobuf.UInt64Value";function u7(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function ky(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>ky(e));if(typeof t=="function"||typeof t=="object")return u7(t,e=>ky(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Um(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case B1e:case N1e:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Um(e)):typeof t=="function"||typeof t=="object"?u7(t,e=>Um(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class To extends Lu{constructor(e,r,n){super(`${pT}/${e}`,r||""),this.details=n,Object.setPrototypeOf(this,To.prototype)}}function k1e(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Iy(t,e){let r=k1e(t),n=r,a;try{const s=e&&e.error;if(s){const i=s.status;if(typeof i=="string"){if(!Y6[i])return new To("internal","internal");r=Y6[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=Um(a))}}catch{}return r==="ok"?null:new To(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1e{constructor(e,r,n,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,jl(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="us-central1",F1e=/^data: (.*?)(?:\n|$)/;function D1e(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new To("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class R1e{constructor(e,r,n,a,s=C5,i=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new I1e(e,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=C5}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function L1e(t,e,r){const n=Uh(e);t.emulatorOrigin=`http${n?"s":""}://${e}:${r}`,n&&(fS(t.emulatorOrigin),hS("Functions",!0))}function U1e(t,e,r){const n=a=>P1e(t,e,a,{});return n.stream=(a,s)=>O1e(t,e,a,s),n}async function M1e(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function A7(t,e){const r={},n=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function P1e(t,e,r,n){const a=t._url(e);return j1e(t,a,r,n)}async function j1e(t,e,r,n){r=ky(r);const a={data:r},s=await A7(t,n),i=n.timeout||7e4,o=D1e(i),l=await Promise.race([M1e(e,a,s,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new To("cancelled","Firebase Functions instance was deleted.");const u=Iy(l.status,l.json);if(u)throw u;if(!l.json)throw new To("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new To("internal","Response is missing data field.");return{data:Um(d)}}function O1e(t,e,r,n){const a=t._url(e);return Q1e(t,a,r,n||{})}async function Q1e(t,e,r,n){var m;r=ky(r);const a={data:r},s=await A7(t,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const y=new To("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const b=Iy(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let o,l;const u=new Promise((g,b)=>{o=g,l=b});(m=n==null?void 0:n.signal)==null||m.addEventListener("abort",()=>{const g=new To("cancelled","Request was cancelled.");l(g)});const d=i.body.getReader(),h=H1e(d,o,l,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:b,done:y}=await g.read();return{value:b,done:y}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function H1e(t,e,r,n){const a=(i,o)=>{const l=i.match(F1e);if(!l)return;const u=l[1];try{const d=JSON.parse(u);if("result"in d){e(Um(d.result));return}if("message"in d){o.enqueue(Um(d.message));return}if("error"in d){const h=Iy(0,d);o.error(h),r(h);return}}catch(d){if(d instanceof To){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return l();async function l(){if(n!=null&&n.aborted){const u=new To("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const m=new To("cancelled","Request was cancelled");i.error(m),r(m),await t.cancel();return}o+=s.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const m of h)m.trim()&&a(m.trim(),i);return l()}catch(u){const d=u instanceof To?u:Iy(0,null);i.error(d),r(d)}}},cancel(){return t.cancel()}})}const J6="@firebase/functions",Z6="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1e="auth-internal",z1e="app-check-internal",G1e="messaging-internal";function q1e(t){const e=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(V1e),i=r.getProvider(G1e),o=r.getProvider(z1e);return new R1e(a,s,i,o,n)};Ch(new cf(pT,e,"PUBLIC").setMultipleInstances(!0)),Eu(J6,Z6,t),Eu(J6,Z6,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t=xS(),e=C5){const n=nw(ba(t),pT).getImmediate({identifier:e}),a=pL("functions");return a&&K1e(n,...a),n}function K1e(t,e,r){L1e(ba(t),e,r)}function k0(t,e,r){return U1e(ba(t),e)}q1e();const eD=Ft(Kr,"usuarios");async function d7(){try{console.log(" [DEBUG] Obteniendo usuarios de Firestore..."),console.log(" [DEBUG] Collection ref:",eD);const t=await cs(eD);if(console.log(` [DEBUG] Encontrados ${t.docs.length} documentos en la coleccin usuarios`),t.empty)return console.log("  [DEBUG] La coleccin usuarios est vaca"),[];const e=t.docs.map(r=>{const n=r.data();return console.log(" [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log(" [DEBUG] Usuarios procesados correctamente:",e.length),console.log(" [DEBUG] Lista completa de usuarios:",e),e}catch(t){throw console.error(" [DEBUG] Error al obtener usuarios:",t),console.error(" [DEBUG] Error details:",{code:t.code,message:t.message,stack:t.stack}),t}}const tD=Object.values(Vt),BE=t=>t?t.trim().toLowerCase().replace(//g,"").replace(/\s+(medio|bsico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1").replace(/^(\d)(?![])/,"$1").replace(/\s+/g,"").toUpperCase():"",$1e=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!1),[a,s]=ee.useState("Usuarios"),[i,o]=ee.useState({nombreCompleto:"",email:"",rut:"",profile:Vt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=ee.useState(null),[d,h]=ee.useState(""),[m,g]=ee.useState(""),[b,y]=ee.useState(""),[E,B]=ee.useState(null),[k,L]=ee.useState(null),[M,P]=ee.useState(null),R=ee.useCallback(async()=>{n(!0);try{const K=await d7();e(K)}catch(K){console.error("Error al cargar usuarios",K),B("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);ee.useEffect(()=>{R()},[R]);const C=ee.useCallback(K=>{const{name:G,value:W}=K.target;o(ie=>({...ie,[G]:W,curso:G==="profile"&&W!==Vt.ESTUDIANTE?"":ie.curso,cursos:G==="profile"&&W!==Vt.PROFESORADO?[]:ie.cursos,asignaturas:G==="profile"&&W!==Vt.PROFESORADO?[]:ie.asignaturas}))},[]),S=ee.useCallback((K,G)=>{o(W=>{const ie=W[K]||[],j=ie.includes(G)?ie.filter(X=>X!==G):[...ie,G];return{...W,[K]:j}})},[]),N=ee.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Vt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),B(null)},[]),Q=ee.useCallback(async K=>{K.preventDefault(),B(null);const{nombreCompleto:G,email:W,profile:ie,curso:j,password:X}=i;if(!G.trim()||!W.trim()){B("Nombre Completo y Email son obligatorios.");return}if(ie===Vt.ESTUDIANTE&&!j){B('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(X!=null&&X.trim())){B("La contrasea es obligatoria al crear un nuevo usuario.");return}const Z=Xp();try{if(l){const te=k0(Z,"updateUser"),ce={...i,password:(X==null?void 0:X.trim())||void 0,curso:ie===Vt.ESTUDIANTE?BE(j||""):void 0};await te(ce)}else{const te=k0(Z,"createUser"),ce={...i,curso:ie===Vt.ESTUDIANTE?BE(j||""):void 0};await te(ce)}await R(),N()}catch(te){console.error("Error al guardar usuario:",te),B(te.message||"Error al guardar el usuario.")}},[i,l,R,N]),D=ee.useCallback(K=>{u(K.email),o({nombreCompleto:K.nombreCompleto,email:K.email,rut:K.rut||"",profile:K.profile,password:"",curso:K.curso||"",cursos:K.cursos||[],asignaturas:K.asignaturas||[]}),setTimeout(()=>{const G=document.querySelector("form");G&&G.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),I=ee.useCallback(async K=>{if(window.confirm(`Est seguro de que desea eliminar al usuario ${K}? Esta accin es irreversible.`))try{const G=Xp();await k0(G,"deleteUser")({email:K}),await R()}catch(G){console.error("Error al eliminar usuario:",G),B(G.message||"No se pudo borrar el usuario.")}},[R]),O=async K=>{var X;const G=(X=K.target.files)==null?void 0:X[0];if(!G)return;L({message:"Procesando archivo...",isError:!1});const W=Xp(),ie=k0(W,"createUser"),j=new FileReader;j.onload=async Z=>{var te;try{const ce=new Uint8Array((te=Z.target)==null?void 0:te.result),de=wx(ce,{type:"array"}),me=de.Sheets[de.SheetNames[0]],ge=Ql.sheet_to_json(me);if(ge.length===0){L({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const Te=ge.map(Se=>{const be=Se.Nombre||Se.nombre,je=Se.Correo||Se.correo||Se.Email||Se.email,Ke=Se.Curso||Se.curso,st=Se.RUT||Se.rut;return!be||!je||!Ke?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):ie({nombreCompleto:String(be).trim(),email:String(je).trim(),profile:Vt.ESTUDIANTE,curso:BE(String(Ke).trim()),rut:st?String(st).trim():"",password:"recoleta"}).catch(pt=>({email:je,error:pt.message}))}),xe=await Promise.all(Te),oe=xe.filter(Se=>!Se.error).length,Me=xe.filter(Se=>Se.error);let at=`Carga completada. ${oe} estudiantes agregados.`;Me.length>0&&(at+=` ${Me.length} fallaron.`,console.error("Errores en carga masiva:",Me)),L({message:at,isError:Me.length>0}),await R()}catch(ce){L({message:`Error: ${ce.message}`,isError:!0})}},j.readAsArrayBuffer(G),K.target.value=""},z=async K=>{var X;const G=(X=K.target.files)==null?void 0:X[0];if(!G)return;P({message:"Procesando archivo...",isError:!1});const W=Xp(),ie=k0(W,"createUser"),j=new FileReader;j.onload=async Z=>{var te;try{const ce=new Uint8Array((te=Z.target)==null?void 0:te.result),de=wx(ce,{type:"array"}),me=de.Sheets[de.SheetNames[0]],ge=Ql.sheet_to_json(me);if(ge.length===0){P({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const Te=ge.map(Se=>{const be=Se.Nombre||Se.nombre,je=Se.Correo||Se.correo||Se.Email||Se.email,Ke=Se.Perfil||Se.perfil||Se.Profile||Se.profile,st=Se.RUT||Se.rut;return!be||!je||!Ke?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):ie({nombreCompleto:String(be).trim(),email:String(je).trim(),profile:Ke,rut:st?String(st).trim():"",password:"recoleta"}).catch(pt=>({email:je,error:pt.message}))}),xe=await Promise.all(Te),oe=xe.filter(Se=>!Se.error).length,Me=xe.filter(Se=>Se.error);let at=`Carga completada. ${oe} usuarios agregados.`;Me.length>0&&(at+=` ${Me.length} fallaron.`,console.error("Errores en carga masiva:",Me)),P({message:at,isError:Me.length>0}),await R()}catch(ce){P({message:`Error: ${ce.message}`,isError:!0})}},j.readAsArrayBuffer(G),K.target.value=""},re="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Y=ee.useMemo(()=>Array.from(new Set(t.filter(K=>K.profile===Vt.ESTUDIANTE&&K.curso).map(K=>K.curso))).sort(),[t]),ae=ee.useMemo(()=>t.filter(K=>(d===""||K.nombreCompleto.toLowerCase().includes(d.toLowerCase())||K.email.toLowerCase().includes(d.toLowerCase()))&&(m===""||K.profile===m)&&(b===""||K.curso===b)),[t,d,m,b]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administracin"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestin de Usuarios"}),c.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:O,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),k&&c.jsx("p",{className:`text-sm mt-2 ${k.isError?"text-red-600":"text-green-600"}`,children:k.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:z,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),M&&c.jsx("p",{className:`text-sm mt-2 ${M.isError?"text-red-600":"text-green-600"}`,children:M.message})]})]})]}),c.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),c.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:C,className:re,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:C,className:re,required:!0,readOnly:!!l})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contrasea"}),c.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:C,placeholder:l?"Dejar en blanco para no cambiar":"Contrasea temporal",className:re})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),c.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:C,placeholder:"12.345.678-9",className:re})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),c.jsx("select",{name:"profile",value:i.profile,onChange:C,className:re,required:!0,children:tD.map(K=>c.jsx("option",{value:K,children:K},K))})]}),i.profile===Vt.ESTUDIANTE&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:i.curso,onChange:C,className:re,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),ls.map(K=>c.jsx("option",{value:K,children:K},K))]})]})]}),i.profile===Vt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Cursos"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ls.map(K=>{var G;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[c.jsx("input",{type:"checkbox",checked:((G=i.cursos)==null?void 0:G.includes(K))||!1,onChange:()=>S("cursos",K),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:K})]},K)})})]}),i.profile===Vt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Asignaturas"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:sl.map(K=>{var G;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[c.jsx("input",{type:"checkbox",checked:((G=i.asignaturas)==null?void 0:G.includes(K))||!1,onChange:()=>S("asignaturas",K),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:K})]},K)})})]}),E&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:E}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&c.jsx("button",{type:"button",onClick:N,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:async()=>{try{console.log(" Agregando custom claim...");const K=Xp(),W=await k0(K,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log(" Custom claim agregado:",W),B(" Custom claim agregado exitosamente")}catch(K){console.error(" Error al agregar custom claim:",K),B(`Error: ${K.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:" Claim"}),c.jsx("button",{type:"button",onClick:async()=>{var K,G,W,ie,j;try{const{auth:X}=await dy(async()=>{const{auth:ce}=await Promise.resolve().then(()=>RW);return{auth:ce}},void 0);console.log(" Usuario actual:",(K=X.currentUser)==null?void 0:K.email);const Z=await((G=X.currentUser)==null?void 0:G.getIdToken(!0));console.log(" Token refreshed:",!!Z);const te=await((W=X.currentUser)==null?void 0:W.getIdTokenResult());console.log(" Claims completos:",te==null?void 0:te.claims),console.log(" Profile claim:",(ie=te==null?void 0:te.claims)==null?void 0:ie.profile),((j=te==null?void 0:te.claims)==null?void 0:j.profile)==="SUBDIRECCION"?B(" Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):B(` Custom claim faltante. Claims: ${JSON.stringify(te==null?void 0:te.claims)}`)}catch(X){console.error(" Error verificando token:",X),B(`Error verificando token: ${X.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:" Token"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsx("div",{children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:K=>h(K.target.value),className:re})}),c.jsx("div",{children:c.jsxs("select",{value:m,onChange:K=>g(K.target.value),className:re,children:[c.jsx("option",{value:"",children:"Todos los perfiles"}),tD.map(K=>c.jsx("option",{value:K,children:K},K))]})}),c.jsx("div",{children:c.jsxs("select",{value:b,onChange:K=>y(K.target.value),className:re,children:[c.jsx("option",{value:"",children:"Todos los cursos"}),Y.map(K=>c.jsx("option",{value:K,children:K},K))]})})]}),r?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ae.map(K=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:K.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:K.email}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${K.profile===Vt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":K.profile===Vt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:K.profile})}),c.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[K.profile===Vt.ESTUDIANTE&&c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:K.curso||"Sin curso"}),K.profile===Vt.PROFESORADO&&c.jsxs("div",{className:"space-y-1",children:[K.cursos&&K.cursos.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[K.cursos.slice(0,3).map(G=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:G},G)),K.cursos.length>3&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",K.cursos.length-3]})]})]}),K.asignaturas&&K.asignaturas.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[K.asignaturas.slice(0,2).map(G=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:G},G)),K.asignaturas.length>2&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",K.asignaturas.length-2]})]})]}),(!K.cursos||K.cursos.length===0)&&(!K.asignaturas||K.asignaturas.length===0)&&c.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),K.profile!==Vt.ESTUDIANTE&&K.profile!==Vt.PROFESORADO&&c.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>D(K),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),c.jsx("button",{onClick:()=>I(K.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},K.email))})]}),ae.length===0&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:t.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&c.jsx(T1e,{})]})},Mm="seguimiento_dual_records",W1e=t=>{const e=t.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:t.id,...e,fechaDesvinculacion:r(e.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(e.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(e.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(e.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(e.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(e.fechaSupervisionExcepcional)}},X1e=t=>{const e=er(Ft(Tt,Mm),gn("nombreEstudiante","asc"));return Tr(e,n=>{const a=n.docs.map(s=>W1e(s));t(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),t([])})},Fy=t=>{const e={...t};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{e[n]&&typeof e[n]=="string"&&(e[n]=cr.fromDate(new Date(e[n]+"T00:00:00")))}),e},Y1e=async t=>{try{const e=Fy(t);return(await Ca(Ft(Tt,Mm),e)).id}catch(e){throw console.error("Error al crear el registro:",e),new Error("No se pudo crear el registro de seguimiento.")}},rD=async(t,e)=>{try{const r=yr(Tt,Mm,t),n=Fy(e);await $i(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},J1e=async t=>{try{const e=yr(Tt,Mm,t);await mi(e)}catch(e){throw console.error("Error al eliminar el registro:",e),new Error("No se pudo eliminar el registro.")}},Z1e=async t=>{const e=d4(Tt),r=Ft(Tt,Mm);let n=0,a=0;for(const s of t){const i=er(r,Fn("rutEstudiante","==",s.rutEstudiante)),o=await cs(i);if(o.empty){const l=yr(r);e.set(l,Fy(s)),a++}else{const l=o.docs[0].id,u=yr(Tt,Mm,l);e.set(u,Fy(s),{merge:!0}),n++}}return await e.commit(),{updated:n,created:a}},eve={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},tve=({record:t,onSave:e,onClose:r})=>{const[n,a]=ee.useState(t),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:h,checked:m}=l.target;a(g=>({...g,[u]:h==="checkbox"?m:d}))},o=()=>{e(n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisin"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:t.nombreEstudiante}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),c.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),c.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),c.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),c.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisin Excepcional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisin"}),c.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Gua (Empresa)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Gua"}),c.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Telfono)"}),c.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},rve=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!0),a=ee.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:hh[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:YC[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=ee.useState(a),[o,l]=ee.useState(null),[u,d]=ee.useState(""),[h,m]=ee.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[g,b]=ee.useState(null),[y,E]=ee.useState(null),[B,k]=ee.useState(!1),[L,M]=ee.useState(null);ee.useEffect(()=>{n(!0);const K=X1e(G=>{e(G),n(!1)});return()=>K()},[]);const P=ee.useCallback(K=>{const{name:G,value:W}=K.target;i(ie=>({...ie,[G]:W}))},[]),R=ee.useCallback(K=>{const{name:G,value:W}=K.target;m(ie=>({...ie,[G]:W}))},[]),C=ee.useCallback(()=>{i(a),l(null),b(null)},[a]),S=async K=>{K.preventDefault(),b(null);const W=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ie=>{var j;return!((j=s[ie])!=null&&j.trim())});if(W){b(`El campo '${W}' es obligatorio.`);return}try{o?await rD(o,s):await Y1e(s),C()}catch(ie){console.error(ie),b("No se pudo guardar el registro.")}},N=ee.useCallback(K=>{window.scrollTo({top:0,behavior:"smooth"}),l(K.id),i(K)},[]),Q=async K=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await J1e(K)}catch(G){console.error(G),b("No se pudo eliminar el registro.")}},D=K=>{M(K),k(!0)},I=()=>{M(null),k(!1)},O=async K=>{try{await rD(K.id,K),I()}catch(G){console.error(G),alert("No se pudieron guardar los cambios de supervisin.")}},z=()=>{const K=["Nombre","RUT","Curso 2025","Profesor Tutor","1 Visita 1 Semestre","Realizada 1 Visita S1","2 Visita 1 Semestre","Realizada 2 Visita S1","Visita Emergencia 1 Semestre","3 Visita","Realizada 3 Visita S2","4 Visita","Realizada 4 Visita S2","Empresa","RUT-Empresa","Direccin","Comuna","Estado","Fecha de Desvinculacin","Motivo Desvinculacin","Maestro Gua","Correo maestro gua"],G=Ql.aoa_to_sheet([K]),W=Ql.book_new();Ql.book_append_sheet(W,G,"Plantilla"),dT(W,"Plantilla_Seguimiento_Dual.xlsx")},re=K=>{var ie;const G=(ie=K.target.files)==null?void 0:ie[0];if(!G)return;E({message:"Procesando archivo...",isError:!1});const W=new FileReader;W.onload=async j=>{var X;try{const Z=new Uint8Array((X=j.target)==null?void 0:X.result),te=wx(Z,{type:"array",cellDates:!0}),ce=te.SheetNames[0],de=te.Sheets[ce],me=Ql.sheet_to_json(de);if(me.length===0)throw new Error("El archivo est vaco.");const ge={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1 visita 1 semestre":"fecha1raSupervision1erSemestre","realizada 1 visita s1":"realizada1raSupervision1erSemestre","2 visita 1 semestre":"fecha2daSupervision1erSemestre","realizada 2 visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1 semestre":"fechaSupervisionExcepcional","3 visita":"fecha1raSupervision2doSemestre","realizada 3 visita s2":"realizada1raSupervision2doSemestre","4 visita":"fecha2daSupervision2doSemestre","realizada 4 visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",direccin:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculacin":"fechaDesvinculacion","motivo desvinculacin":"motivoDesvinculacion","maestro gua":"nombreMaestroGuia","correo maestro gua":"contactoMaestroGuia"},Te=Object.keys(me[0]).map(at=>at.trim().toLowerCase()),oe=["nombre","rut","curso 2025","empresa","estado"].find(at=>!Te.includes(at));if(oe)throw new Error(`Falta la columna requerida: '${oe}'`);const Me=me.map(at=>{const Se={};for(const be in at){const je=ge[be.trim().toLowerCase()];if(je){let Ke=at[be];Ke instanceof Date&&(Ke=Ke.toISOString().split("T")[0]),typeof Ke=="boolean"||typeof Ke=="string"&&["true","false","verdadero","falso"].includes(Ke.toLowerCase())?Se[je]=["true","verdadero"].includes(String(Ke).toLowerCase()):Ke!=null&&(Se[je]=Ke)}}return!Se.nombreEstudiante||!Se.rutEstudiante?null:Se}).filter(at=>at!==null);if(Me.length>0){const{updated:at,created:Se}=await Z1e(Me);E({message:`Carga exitosa. ${Se} registros creados, ${at} actualizados.`,isError:!1})}else E({message:"No se encontraron nuevos registros vlidos para agregar.",isError:!1})}catch(Z){console.error(Z),E({message:`Error al procesar el archivo: ${Z.message}`,isError:!0})}},W.readAsArrayBuffer(G)},Y="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ae=ee.useMemo(()=>t.filter(K=>(u===""||K.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||K.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||K.rutEstudiante.includes(u))&&(h.curso===""||K.curso===h.curso)&&(h.empresa===""||K.nombreEmpresa===h.empresa)&&(h.estado===""||K.estado===h.estado)&&(h.comuna===""||K.comuna===h.comuna)&&(h.profesor===""||K.profesorTutorEmpresa===h.profesor)).sort((K,G)=>K.nombreEstudiante.localeCompare(G.nombreEstudiante)),[t,u,h]);return ee.useMemo(()=>{const K=new Set,G=new Set;return t.forEach(W=>{W.nombreEmpresa&&K.add(W.nombreEmpresa),W.comuna&&G.add(W.comuna)}),{empresas:Array.from(K).sort(),comunas:Array.from(G).sort()}},[t]),r?c.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Prctica Dual"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:o?"Editando registro existente.":"Registre un nuevo estudiante en prctica."}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),c.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:P,className:Y,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),c.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:P,className:Y,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{name:"curso",value:s.curso,onChange:P,className:Y,required:!0,children:hh.map(K=>c.jsx("option",{value:K,children:K},K))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),c.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:P,className:Y,children:[c.jsx("option",{value:"",children:"Seleccione un profesor"}),P_.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),c.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:P,className:Y,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),c.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:P,className:Y})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Direccin Empresa"}),c.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:P,className:Y})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),c.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:P,className:Y})]}),c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),c.jsx("select",{name:"estado",value:s.estado,onChange:P,className:Y,children:YC.map(K=>c.jsx("option",{value:K,children:K},K))})]})]}),s.estado==="Desvinculado"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculacin"}),c.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:P,className:`${Y} border-red-300`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculacin"}),c.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:P,className:`${Y} border-red-300`})]})]}),g&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:g}),c.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&c.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[c.jsx("button",{onClick:z,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),c.jsx("input",{type:"file",onChange:re,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),y&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${y.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:y.message})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Registros de Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:K=>d(K.target.value),className:`${Y} md:col-span-2 lg:col-span-1`}),c.jsxs("select",{name:"curso",value:h.curso,onChange:R,className:Y,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),hh.map(K=>c.jsx("option",{children:K},K))]}),c.jsxs("select",{name:"estado",value:h.estado,onChange:R,className:Y,children:[c.jsx("option",{value:"",children:"Todos los Estados"}),YC.map(K=>c.jsx("option",{children:K},K))]}),c.jsxs("select",{name:"profesor",value:h.profesor,onChange:R,className:Y,children:[c.jsx("option",{value:"",children:"Todos los Profesores"}),P_.map(K=>c.jsx("option",{children:K},K))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ae.map(K=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:K.nombreEstudiante}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:K.curso})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:K.nombreEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:K.profesorTutorEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${eve[K.estado]}`,children:K.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[c.jsx("button",{onClick:()=>D(K),className:"text-blue-600 hover:underline",children:"Supervisin"}),c.jsx("button",{onClick:()=>N(K),className:"text-yellow-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>Q(K.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},K.id))})]})})]}),B&&L&&c.jsx(tve,{record:L,onClose:I,onSave:O})]})},f7="actividades_remotas",nve="respuestas_actividades",ave="usuarios",gT=t=>{var r,n,a,s,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((s=(a=e.plazoEntrega)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},sve=t=>{const e=er(Ft(Tt,f7),gn("fechaCreacion","desc"));return Tr(e,n=>{const a=n.docs.map(s=>gT(s));t(a)},n=>{console.error("Error al suscribirse a las actividades:",n),t([])})},ive=async t=>{try{const e={...t,fechaCreacion:cr.fromDate(new Date),plazoEntrega:cr.fromDate(new Date(t.plazoEntrega+"T00:00:00"))};return(await Ca(Ft(Tt,f7),e)).id}catch(e){throw console.error("Error al crear la actividad:",e),new Error("No se pudo crear la actividad.")}},ove=t=>{const e=er(Ft(Tt,nve));return Tr(e,n=>{const a=n.docs.map(s=>gT(s));t(a)},n=>{console.error("Error al suscribirse a las respuestas:",n),t([])})},lve=t=>{const e=er(Ft(Tt,ave));return Tr(e,n=>{const a=n.docs.map(s=>gT(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},NE={Quiz:[5,10,15],"Trminos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de Lectura":[1,2,3]},cve=t=>new Promise((e,r)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=a=>r(a)}),uve=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState([]),[a,s]=ee.useState([]),[i,o]=ee.useState(null),[l,u]=ee.useState(!1),[d,h]=ee.useState(!1),[m,g]=ee.useState(!0),[b,y]=ee.useState(null),[E,B]=ee.useState(""),[k,L]=ee.useState(null),[M,P]=ee.useState([]),R={asignatura:sl[0],nivel:oy[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[C,S]=ee.useState(R);ee.useEffect(()=>{g(!0);const de=sve(e),me=ove(n),ge=lve(Te=>{s(Te),g(!1)});return()=>{de(),me(),ge()}},[]);const N=de=>{S(me=>({...me,[de.target.name]:de.target.value}))},Q=de=>{S(me=>({...me,recursos:{...me.recursos,[de.target.name]:de.target.value}}))},D=de=>{de.target.files&&P(Array.from(de.target.files))},I=de=>{S(me=>{const ge=me.tipos.includes(de)?me.tipos.filter(xe=>xe!==de):[...me.tipos,de],Te={...me.cantidadPreguntas};return ge.includes(de)?Te[de]||(Te[de]=NE[de][0]):delete Te[de],{...me,tipos:ge,cantidadPreguntas:Te}})},O=(de,me)=>{S(ge=>({...ge,cantidadPreguntas:{...ge.cantidadPreguntas,[de]:me}}))},z=de=>{S(me=>{var Te;const ge=(Te=me.cursosDestino)!=null&&Te.includes(de)?me.cursosDestino.filter(xe=>xe!==de):[...me.cursosDestino||[],de];return{...me,cursosDestino:ge}})},re=de=>{S(me=>{var Te;const ge=(Te=me.estudiantesDestino)!=null&&Te.includes(de)?me.estudiantesDestino.filter(xe=>xe!==de):[...me.estudiantesDestino||[],de];return{...me,estudiantesDestino:ge}})},Y=()=>{const{tipos:de,contenido:me,asignatura:ge,nivel:Te,cantidadPreguntas:xe}=C;let oe=`Eres un experto diseador de actividades pedaggicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${me}"
Asignatura: ${ge}
Nivel: ${Te}

Genera los siguientes elementos:
- **introduccion**: Una breve introduccin motivadora para el estudiante sobre el tema: "${me}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return de.forEach(Me=>{const at=xe[Me]||NE[Me][0];switch(Me){case"Quiz":oe+=`- **Quiz**: Genera un quiz de ${at} preguntas de seleccin mltiple sobre el contenido. Cada una con 4 opciones.
`;break;case"Comprensin de Lectura":oe+=`- **Comprensin de Lectura**: Genera ${at} actividad(es) de comprensin. Cada una con un texto de 150-200 palabras y 4 preguntas de seleccin mltiple.
`;break;case"Trminos Pareados":oe+=`- **Trminos Pareados**: Genera ${at} pares de trminos pareados (concepto y definicin).
`;break;case"Desarrollo":oe+=`- **Desarrollo**: Genera ${at} pregunta(s) de desarrollo con una rbrica simple en texto.
`;break}}),oe},ae=async de=>{if(de.preventDefault(),!C.contenido.trim()||C.tipos.length===0){y("Contenido y al menos un tipo de actividad son obligatorios.");return}h(!0),y(null);try{const me=await Promise.all(M.map(async st=>({nombre:st.name,url:await cve(st)}))),ge="",xe=new GoogleGenAI({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).getGenerativeModel({model:"gemini-pro"}),oe=Y(),be=(await(await xe.generateContent(oe)).response).text().replace(/^```json\s*|```\s*$/g,""),je=JSON.parse(be),Ke={id:"",fechaCreacion:new Date().toISOString(),...C,recursos:{...C.recursos,archivos:me},introduccion:je.introduccion,generatedContent:je.actividades};L(Ke)}catch(me){console.error("Error al generar actividad con IA",me),y("Error al generar la actividad. Por favor, revise el contenido e intntelo de nuevo.")}finally{h(!1)}},K=async()=>{if(k)try{await ive(k),S(R),P([]),u(!1),L(null)}catch(de){console.error("Error al guardar la actividad:",de),y("No se pudo guardar la actividad en la base de datos.")}},G=ee.useMemo(()=>{var ge,Te;if(!i||!a)return[];const de=a.filter(xe=>{var oe;return xe.profile===Vt.ESTUDIANTE&&((oe=i.cursosDestino)==null?void 0:oe.includes(xe.curso||""))}).map(xe=>xe.nombreCompleto),me=i.estudiantesDestino||[];if(!((ge=i.cursosDestino)!=null&&ge.length)&&!((Te=i.estudiantesDestino)!=null&&Te.length)){const xe=i.nivel.charAt(0);return a.filter(oe=>{var Me;return oe.profile===Vt.ESTUDIANTE&&((Me=oe.curso)==null?void 0:Me.startsWith(xe))}).map(oe=>oe.nombreCompleto).sort()}return Array.from(new Set([...de,...me])).sort()},[i,a]),W=ee.useMemo(()=>r.filter(de=>de.actividadId===(i==null?void 0:i.id)),[r,i]),ie=ee.useMemo(()=>a.filter(de=>de.profile===Vt.ESTUDIANTE).sort((de,me)=>de.nombreCompleto.localeCompare(me.nombreCompleto)),[a]),j=ee.useMemo(()=>E.trim()?ie.filter(de=>de.nombreCompleto.toLowerCase().includes(E.toLowerCase())):ie,[ie,E]),X=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:[i==null?void 0:i.asignatura," - ",i==null?void 0:i.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",i==null?void 0:i.nivel," | Plazo: ",i==null?void 0:i.plazoEntrega]})]}),c.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver al listado"})]}),c.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:G.map(de=>{const me=W.find(ge=>ge.estudianteId===de);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:de}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:me?c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:me?`${me.puntaje}/${me.puntajeMaximo}`:"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:me?new Date(me.fechaCompletado).toLocaleString("es-CL"):"-"})]},de)})})]})})]})]}),Z=()=>{var de,me;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),c.jsx("button",{onClick:()=>u(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generar una actividad interactiva para sus estudiantes."}),c.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:C.asignatura,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm",children:sl.map(ge=>c.jsx("option",{value:ge,children:ge},ge))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:C.nivel,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm",children:oy.map(ge=>c.jsx("option",{value:ge,children:ge},ge))})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),c.jsx("textarea",{name:"instrucciones",value:(de=C.recursos)==null?void 0:de.instrucciones,onChange:Q,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),c.jsx("textarea",{name:"enlaces",value:(me=C.recursos)==null?void 0:me.enlaces,onChange:Q,placeholder:"Pega un enlace por lnea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imgenes, etc.)"}),c.jsx("input",{type:"file",multiple:!0,onChange:D,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad ser visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:ls.map(ge=>{var Te;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Te=C.cursosDestino)==null?void 0:Te.includes(ge),onChange:()=>z(ge),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:ge})]},ge)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:E,onChange:ge=>B(ge.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:j.map(ge=>{var Te;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Te=C.estudiantesDestino)==null?void 0:Te.includes(ge.nombreCompleto),onChange:()=>re(ge.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:ge.nombreCompleto,children:ge.nombreCompleto})]},ge.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),c.jsx("div",{className:"space-y-3",children:nX.map(ge=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:C.tipos.includes(ge),onChange:()=>I(ge),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:ge})]}),C.tipos.includes(ge)&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),NE[ge].map(Te=>c.jsx("button",{type:"button",onClick:()=>O(ge,Te),className:`px-3 py-1 rounded-full font-semibold text-xs ${C.cantidadPreguntas[ge]===Te?"bg-amber-500 text-white":"bg-slate-200"}`,children:Te},Te))]})]},ge))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:C.contenido,onChange:N,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:C.plazoEntrega,onChange:N,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:d,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:d?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},te=()=>{var de;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin de la Actividad"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo est correcto, confirma para asignar la actividad."}),c.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introduccin para el Estudiante"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:k==null?void 0:k.introduccion})]}),(k==null?void 0:k.recursos)&&(k.recursos.instrucciones||k.recursos.enlaces||((de=k.recursos.archivos)==null?void 0:de.length))&&c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),c.jsxs("div",{className:"space-y-3",children:[k.recursos.instrucciones&&c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:k.recursos.instrucciones}),k.recursos.enlaces&&c.jsx("div",{children:k.recursos.enlaces.split(`
`).map((me,ge)=>me.trim()&&c.jsx("a",{href:me,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:me},ge))}),k.recursos.archivos&&k.recursos.archivos.length>0&&c.jsx("ul",{className:"list-disc list-inside",children:k.recursos.archivos.map(me=>c.jsx("li",{className:"text-slate-700",children:me.nombre},me.nombre))})]})]}),k==null?void 0:k.tipos.map(me=>{const ge=k.generatedContent[me];return ge?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:me}),c.jsxs("div",{className:"space-y-4 text-sm",children:[me==="Quiz"&&ge.map((Te,xe)=>c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold",children:[xe+1,". ",Te.pregunta]}),c.jsx("ul",{className:"list-disc pl-5 mt-1",children:Te.opciones.map(oe=>c.jsx("li",{children:oe},oe))}),c.jsxs("p",{className:"text-xs text-green-600",children:["R: ",Te.respuestaCorrecta]})]},xe)),me==="Comprensin de Lectura"&&c.jsxs("div",{children:[c.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-2 rounded",children:ge.texto}),ge.preguntas.map((Te,xe)=>c.jsxs("div",{className:"mt-2",children:[c.jsxs("p",{className:"font-semibold",children:[xe+1,". ",Te.pregunta]}),c.jsx("ul",{className:"list-disc pl-5 mt-1",children:Te.opciones.map(oe=>c.jsx("li",{children:oe},oe))}),c.jsxs("p",{className:"text-xs text-green-600",children:["R: ",Te.respuestaCorrecta]})]},xe))]}),me==="Trminos Pareados"&&c.jsx("ul",{className:"list-disc pl-5",children:ge.map(Te=>c.jsxs("li",{children:[c.jsxs("strong",{children:[Te.concepto,":"]})," ",Te.definicion]},Te.id))}),me==="Desarrollo"&&ge.map((Te,xe)=>c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:Te.pregunta}),c.jsxs("p",{className:"text-xs italic mt-1",children:["Rbrica: ",Te.rubrica]})]},xe))]})]},me):null})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>L(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:K,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},ce=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>u(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:t.length>0?t.map(de=>{var Te,xe;const me=[];(Te=de.cursosDestino)!=null&&Te.length&&me.push(`Cursos: ${de.cursosDestino.join(", ")}`),(xe=de.estudiantesDestino)!=null&&xe.length&&me.push(`Estudiantes: ${de.estudiantesDestino.length}`);const ge=me.length?me.join(" | "):`Todo ${de.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[de.asignatura," - ",de.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",ge," | Creado: ",new Date(de.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("button",{onClick:()=>o(de),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},de.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsx("div",{className:"animate-fade-in",children:k?te():i?X():l?Z():ce()})},Ave="actividades_remotas",h7="respuestas_actividades",m7=t=>{var r,n,a,s,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((s=(a=e.plazoEntrega)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},dve=(t,e)=>{if(!t.curso)return e([]),()=>{};const r=t.curso.charAt(0),n=er(Ft(Tt,Ave),gn("fechaCreacion","desc"));return Tr(n,a=>{const i=a.docs.map(o=>m7(o)).filter(o=>{var h,m,g,b;const l=!((h=o.cursosDestino)!=null&&h.length)&&!((m=o.estudiantesDestino)!=null&&m.length),u=((g=o.cursosDestino)==null?void 0:g.includes(t.curso))??!1,d=((b=o.estudiantesDestino)==null?void 0:b.includes(t.nombreCompleto))??!1;return u||d?!0:l?o.nivel.charAt(0)===r:!1});e(i)},a=>{console.error("Error al suscribirse a actividades disponibles:",a),e([])})},fve=(t,e)=>{const r=er(Ft(Tt,h7),Fn("estudianteId","==",t));return Tr(r,n=>{const a=n.docs.map(s=>m7(s));e(a)},n=>{console.error("Error al suscribirse a las respuestas del estudiante:",n),e([])})},hve=async t=>{try{const e={...t,fechaCompletado:cr.fromDate(new Date)};return(await Ca(Ft(Tt,h7),e)).id}catch(e){throw console.error("Error al guardar la respuesta:",e),new Error("No se pudo guardar la respuesta.")}},mve=t=>[...t].sort(()=>Math.random()-.5),pve=(t,e)=>{if(e===0)return"1.0";const n=e*.6;let a;return t>=n?a=4+(t-n)*3/(e-n):a=1+t*3/(n||1),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},nD=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),gve=({actividad:t,onComplete:e,currentUser:r})=>{var k,L,M,P;const[n,a]=ee.useState({}),[s,i]=ee.useState(!1),[o,l]=ee.useState(!1),[u,d]=ee.useState(!1),[h,m]=ee.useState({}),g=`progress-${r.id}-${t.id}`;ee.useEffect(()=>{const R={};t.tipos.forEach(C=>{if(C==="Trminos Pareados"){const S=t.generatedContent[C];S&&(R[C]=mve(S.map(N=>N.definicion)))}}),m(R);try{const C=localStorage.getItem(g);C&&a(JSON.parse(C))}catch(C){console.error("Could not load saved progress",C)}},[t,g]);const b=(R,C)=>{a(S=>({...S,[R]:C}))},y=()=>{l(!0),d(!1),setTimeout(()=>{try{localStorage.setItem(g,JSON.stringify(n)),d(!0),setTimeout(()=>d(!1),2e3)}catch(R){console.error("Could not save progress",R),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},E=async()=>{i(!0);let R=0,C=0;const S=[],N={};for(const D of t.tipos){const I=t.generatedContent[D],O=n[D];if(D==="Quiz"||D==="Comprensin de Lectura"){const z=D==="Quiz"?I:I.preguntas,re=O||{};let Y=0,ae=0;z.forEach((K,G)=>{ae+=1,re[G]===K.respuestaCorrecta&&(Y+=1)}),R+=Y,C+=ae,S.push(`${D}: ${Y}/${ae} correctas.`),N[D]={puntaje:Y,puntajeMaximo:ae}}else if(D==="Trminos Pareados"){const z=I,re=O||{};let Y=0,ae=0;z.forEach(K=>{ae+=2,re[K.id]===K.definicion&&(Y+=2)}),R+=Y,C+=ae,S.push(`${D}: ${Y/2}/${z.length} correctas.`),N[D]={puntaje:Y,puntajeMaximo:ae}}else if(D==="Desarrollo"){const z=I,re=O||{};let Y=0,ae=0;for(let K=0;K<z.length;K++){const G=z[K];ae+=3;try{Kl("Autoaprendizaje - Evaluar Desarrollo");const W="",j=new globalThis.GoogleGenerativeAI(W).getGenerativeModel({model:"gemini-pro"}),X=`Evala la siguiente respuesta de un estudiante a la pregunta de desarrollo, basndote en la rbrica proporcionada. Asigna un puntaje de 0 a 3. Pregunta: "${G.pregunta}". Rbrica: "${G.rubrica}". Respuesta: "${re[K]||""}". Proporciona tambin una frase corta de feedback.`,de=(await(await j.generateContent(X)).response).text().replace(/^```json\s*|```\s*$/g,""),me=JSON.parse(de),ge=Math.max(0,Math.min(3,me.puntaje||0));Y+=ge,S.push(`${D} #${K+1}: Puntaje ${ge}/3. (${me.feedback})`)}catch(W){console.error(W),S.push(`${D} #${K+1}: No se pudo evaluar automticamente.`)}}R+=Y,C+=ae,N[D]={puntaje:Y,puntajeMaximo:ae}}}let Q=`Buen trabajo! Tu puntaje total es ${R} de ${C}.`;e({respuestas:n,puntaje:R,puntajeMaximo:C,retroalimentacion:Q,calificacion:pve(R,C),puntajesPorSeccion:N}),localStorage.removeItem(g),i(!1)},B=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((k=t.recursos.archivos)==null?void 0:k.length));return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"Hola!"}),c.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),B&&c.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),c.jsxs("div",{className:"space-y-4",children:[((L=t.recursos)==null?void 0:L.instrucciones)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((M=t.recursos)==null?void 0:M.enlaces)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((R,C)=>R.trim()&&c.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:R},C))]}),((P=t.recursos)==null?void 0:P.archivos)&&t.recursos.archivos.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),c.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((R,C)=>c.jsx("li",{children:c.jsx("a",{href:R.url,download:R.nombre,className:"text-blue-500 hover:underline",children:R.nombre})},C))})]})]})]}),t.tipos.map(R=>{const C=t.generatedContent[R];if(!C)return null;switch(R){case"Quiz":case"Comprensin de Lectura":{const S=R==="Quiz",N=C,Q=S?N:N.preguntas;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:R}),!S&&c.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:N.texto}),c.jsx("div",{className:"space-y-6",children:Q.map((D,I)=>c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[I+1,". ",D.pregunta]}),c.jsx("div",{className:"mt-2 space-y-2",children:D.opciones.map((O,z)=>{var re;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[c.jsx("input",{type:"radio",name:`q-${R}-${I}-${t.id}`,value:O,checked:((re=n[R])==null?void 0:re[I])===O,onChange:()=>b(R,{...n[R]||{},[I]:O}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:O})]},z)})})]},`${R}-${I}`))})]},R)}case"Trminos Pareados":{const S=C,N=h[R]||[];return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:R}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),S.map(Q=>c.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:Q.concepto},Q.id))]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definicin"}),S.map(Q=>{var D;return c.jsx("div",{className:"h-14 flex items-center",children:c.jsxs("select",{value:((D=n[R])==null?void 0:D[Q.id])||"",onChange:I=>b(R,{...n[R]||{},[Q.id]:I.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[c.jsx("option",{value:"",children:"Seleccionar definicin..."}),N.map((I,O)=>c.jsx("option",{value:I,children:I},O))]})},Q.id)})]})]})]},R)}case"Desarrollo":{const S=C;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:R}),S.map((N,Q)=>{var D;return c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:N.pregunta}),c.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[c.jsx("strong",{children:"Rbrica:"})," ",N.rubrica]}),c.jsx("textarea",{value:((D=n[R])==null?void 0:D[Q])||"",onChange:I=>b(R,{...n[R]||{},[Q]:I.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},Q)})]},R)}default:return null}}),c.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[c.jsx("button",{onClick:y,disabled:s||o||u,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?c.jsxs(c.Fragment,{children:[c.jsx(nD,{})," Guardando..."]}):u?" Guardado":"Guardar Progreso"}),c.jsx("button",{onClick:E,disabled:s||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:s?c.jsxs(c.Fragment,{children:[c.jsx(nD,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},xve=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,a]=ee.useState([]),[s,i]=ee.useState(null),[o,l]=ee.useState("list"),[u,d]=ee.useState(null),[h,m]=ee.useState(null),[g,b]=ee.useState(!0);ee.useEffect(()=>{b(!0);const k=dve(t,r),L=fve(t.nombreCompleto,M=>{a(M),b(!1)});return()=>{k(),L()}},[t]);const y=k=>{m(k)},E=()=>{h&&(i(h),l("activity"),m(null))},B=ee.useCallback(async k=>{if(!s)return;let L;const M=`
            Un estudiante ha completado una actividad sobre "${s.contenido}".
            Su puntaje total fue ${k.puntaje} de ${k.puntajeMaximo}.
            Detalle por seccin: ${JSON.stringify(k.puntajesPorSeccion||{})}
            Respuestas de desarrollo: ${JSON.stringify(k.respuestas.Desarrollo||{})}
            
            Genera una retroalimentacin detallada y constructiva en espaol. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
            - "resumenGeneral": Un prrafo breve y motivador sobre el desempeo general.
            - "areasDeFortaleza": Un array de 2 o 3 strings destacando lo que hizo bien.
            - "areasDeMejora": Un array de 2 o 3 strings con reas a mejorar.
            - "planDeMejora": Un array de 3 objetos, cada uno con "paso" (string, ej: "Repasar conceptos clave") y "detalle" (string, una sugerencia concreta).
            - "feedbackPorSeccion": Un objeto donde cada clave es el tipo de actividad (ej: "Quiz") y el valor es un string con feedback especfico para esa seccin.
        `;try{Kl("Autoaprendizaje - Retroalimentacin Detallada");const R="",I=(await(await new globalThis.GoogleGenerativeAI(R).getGenerativeModel({model:"gemini-pro"}).generateContent(M)).response).text().replace(/^```json\s*|```\s*$/g,"");L=JSON.parse(I)}catch(R){console.error("Error generating detailed feedback:",R)}const P={actividadId:s.id,estudianteId:t.nombreCompleto,...k,retroalimentacionDetallada:L};try{const R=await hve(P);d({...P,id:R,fechaCompletado:new Date().toISOString()}),l("result")}catch(R){console.error("Error saving submission:",R),alert("No se pudo guardar tu respuesta.")}},[s,t.nombreCompleto]);if(g)return c.jsx("div",{className:"text-center py-10",children:"Cargando actividades..."});if(o==="activity"&&s)return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[s.asignatura,": ",s.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",s.plazoEntrega]}),c.jsx(gve,{actividad:s,onComplete:B,currentUser:t})]});if(o==="result"&&u){const k=u.retroalimentacionDetallada,L=u.puntajesPorSeccion||{},M=(P,R)=>{const C=R>0?P/R:0;return C<.4?"bg-red-100 text-red-800":C<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentacin de la Actividad"}),k?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentacin General"}),c.jsx("p",{className:"text-slate-600 mb-6",children:k.resumenGeneral}),c.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[c.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),c.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${M(u.puntaje,u.puntajeMaximo)}`,children:[u.puntaje," / ",u.puntajeMaximo]})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:" reas de Fortaleza"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:k.areasDeFortaleza.map((P,R)=>c.jsx("li",{children:P},R))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:" reas de Mejora"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:k.areasDeMejora.map((P,R)=>c.jsx("li",{children:P},R))})]})]})]}),c.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(L).map(([P,{puntaje:R,puntajeMaximo:C}])=>{var S;return c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h3",{className:"text-xl font-bold",children:P}),c.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${M(R,C)}`,children:[R," / ",C]})]}),c.jsx("p",{className:"text-slate-500 text-sm",children:(S=k.feedbackPorSeccion)==null?void 0:S[P]})]},P)})}),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),c.jsx("div",{className:"space-y-4",children:k.planDeMejora.map((P,R)=>c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:""}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold",children:P.paso}),c.jsx("p",{className:"text-slate-600 text-sm",children:P.detalle})]})]},R))})]})]}):c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[c.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"Actividad Completada!"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),c.jsxs("p",{className:"text-2xl font-bold",children:[u.puntaje," / ",u.puntajeMaximo]})]}),c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Calificacin"}),c.jsx("p",{className:"text-2xl font-bold",children:u.calificacion})]})]}),c.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[c.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentacin"}),c.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:u.retroalimentacion})]})]}),c.jsx("button",{onClick:()=>{l("list"),d(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),c.jsxs("p",{className:"mt-4 text-slate-600",children:["Ests seguro de que deseas comenzar esta actividad? ",c.jsx("strong",{children:"Tendrs solo una oportunidad para responder."})]}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habr una segunda oportunidad."}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>m(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"S, comenzar"})]})]})}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(k=>{const L=n.find(P=>P.actividadId===k.id),M=!!L;return c.jsx("div",{className:`p-4 border rounded-lg ${M?"bg-green-50":"bg-slate-50"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[k.asignatura," - ",k.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",k.plazoEntrega]})]}),M?c.jsxs("div",{className:"text-right",children:[c.jsx("button",{onClick:()=>{d(L),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),c.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",L.puntaje,"/",L.puntajeMaximo]})]}):c.jsx("button",{onClick:()=>y(k),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},k.id)}):c.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},Xw="estudiantes_inclusion",vve="usuarios",p7=t=>{const e=t.data();return{id:t.id,...e}},yve=t=>{const e=er(Ft(Tt,Xw));return Tr(e,n=>{const a=n.docs.map(s=>p7(s));t(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusin:",n),t([])})},wve=t=>{const e=er(Ft(Tt,vve));return Tr(e,n=>{const a=n.docs.map(s=>p7(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},bve=async t=>{try{return(await Ca(Ft(Tt,Xw),t)).id}catch(e){throw console.error("Error al agregar estudiante a inclusin:",e),new Error("No se pudo agregar al estudiante.")}},Cve=async(t,e)=>{try{const{id:r,...n}=e,a=yr(Tt,Xw,t);await $i(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusin:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},Eve=async t=>{try{const e=yr(Tt,Xw,t);await mi(e)}catch(e){throw console.error("Error al eliminar estudiante de inclusin:",e),new Error("No se pudo eliminar al estudiante.")}},_ve=({student:t,onClose:e,onSave:r,profesores:n})=>{const[a,s]=ee.useState("intervenciones"),[i,o]=ee.useState(t);ee.useEffect(()=>{o(t)},[t]);const[l,u]=ee.useState(null),d={responsable:"",accion:"",observaciones:""},[h,m]=ee.useState(d),[g,b]=ee.useState({trimestre:"T1",meta:""}),[y,E]=ee.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[B,k]=ee.useState(null),[L,M]=ee.useState(!1),P={motivo:"",acuerdos:"",asistentes:""},[R,C]=ee.useState(P),S=()=>{r(i),e()},N=()=>{if(!h.responsable||!h.accion){alert("Responsable y Accin son campos obligatorios.");return}let xe;l?xe=(i.intervenciones||[]).map(Me=>Me.id===l.id?{...Me,...h}:Me):xe=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const oe=xe.sort((Me,at)=>new Date(at.fecha).getTime()-new Date(Me.fecha).getTime());o(Me=>({...Me,intervenciones:oe})),m(d),u(null)},Q=xe=>{u(xe),m({responsable:xe.responsable,accion:xe.accion,observaciones:xe.observaciones})},D=xe=>{window.confirm("Eliminar esta intervencin?")&&o(oe=>({...oe,intervenciones:(oe.intervenciones||[]).filter(Me=>Me.id!==xe)}))},I=xe=>{const{name:oe,value:Me}=xe.target;o(at=>({...at,[oe]:Me,fechaActualizacionApoyos:new Date().toISOString()}))},O=()=>{if(!g.meta.trim())return;const xe={...g,id:crypto.randomUUID(),cumplida:!1};o(oe=>({...oe,metasProgreso:[...oe.metasProgreso||[],xe]})),b({trimestre:"T1",meta:""})},z=xe=>{o(oe=>({...oe,metasProgreso:(oe.metasProgreso||[]).map(Me=>Me.id===xe?{...Me,cumplida:!Me.cumplida}:Me)}))},re=xe=>{o(oe=>({...oe,metasProgreso:(oe.metasProgreso||[]).filter(Me=>Me.id!==xe)}))},Y=ee.useMemo(()=>{const xe=i.metasProgreso||[];if(xe.length===0)return{percent:0,color:"bg-slate-300"};const oe=xe.filter(Se=>Se.cumplida).length,Me=Math.round(oe/xe.length*100),at=Me<40?"bg-red-500":Me<75?"bg-yellow-500":"bg-green-500";return{percent:Me,color:at}},[i.metasProgreso]),ae=ee.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const xe=new Date(i.fechaActualizacionApoyos),oe=new Date;return oe.setMonth(oe.getMonth()-3),xe<oe},[i.fechaActualizacionApoyos]),K=()=>{if(!y.titulo.trim()||!y.fecha)return;const xe={...y,id:crypto.randomUUID(),resuelta:!1};o(oe=>({...oe,alertas:[...oe.alertas||[],xe].sort((Me,at)=>new Date(Me.fecha).getTime()-new Date(at.fecha).getTime())})),E({titulo:"",fecha:new Date().toISOString().split("T")[0]})},G=xe=>{o(oe=>({...oe,alertas:(oe.alertas||[]).map(Me=>Me.id===xe?{...Me,resuelta:!Me.resuelta}:Me)}))},W=xe=>{o(oe=>({...oe,alertas:(oe.alertas||[]).filter(Me=>Me.id!==xe)}))},ie=xe=>{xe.target.files&&xe.target.files[0]&&k(xe.target.files[0])},j=()=>{if(!B)return;M(!0);const xe=new FileReader;xe.readAsDataURL(B),xe.onloadend=()=>{const oe={id:crypto.randomUUID(),nombre:B.name,url:xe.result,fechaSubida:new Date().toISOString()};o(Me=>({...Me,archivos:[oe,...Me.archivos||[]]})),k(null),M(!1)},xe.onerror=()=>{alert("Error al leer el archivo."),M(!1)}},X=xe=>{window.confirm("Eliminar este archivo?")&&o(oe=>({...oe,archivos:(oe.archivos||[]).filter(Me=>Me.id!==xe)}))},Z=()=>{if(!R.motivo.trim()||!R.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const xe={...R,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(oe=>({...oe,reuniones:[xe,...oe.reuniones||[]].sort((Me,at)=>new Date(at.fecha).getTime()-new Date(Me.fecha).getTime())})),C(P)},te=xe=>{window.confirm("Eliminar este registro de reunin?")&&o(oe=>({...oe,reuniones:(oe.reuniones||[]).filter(Me=>Me.id!==xe)}))},ce=()=>{var st,pt,St;const xe=new or("p","mm","a4"),oe=20,Me=xe.internal.pageSize.getWidth(),at=xe.internal.pageSize.getHeight();let Se=oe;const be=ut=>{ut.setFontSize(10),ut.setTextColor(100),ut.text("Ficha de Seguimiento - Mdulo Inclusin",oe,15)};be(xe),xe.setFontSize(18),xe.setFont("helvetica","bold"),xe.setTextColor(40),xe.text(i.nombre,oe,Se+10),Se+=15,xe.setFontSize(11),xe.setFont("helvetica","normal"),xe.setTextColor(80),xe.text(`Curso: ${i.curso}`,oe,Se),xe.text(`Dificultad: ${i.dificultad}`,oe,Se+6),Se+=15;const je=ut=>{Se+ut>at-oe&&(xe.addPage(),be(xe),Se=oe)},Ke=ut=>{je(15),xe.setFontSize(14),xe.setFont("helvetica","bold"),xe.text(ut,oe,Se),Se+=10};if((st=i.intervenciones)!=null&&st.length&&(Ke("Historial de Intervenciones"),al(xe,{startY:Se,head:[["Fecha","Responsable","Accin","Observaciones"]],body:i.intervenciones.map(ut=>[new Date(ut.fecha).toLocaleDateString("es-CL"),ut.responsable,ut.accion,ut.observaciones||""]),theme:"grid",didDrawPage:ut=>be(xe)}),Se=xe.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){je(30),Ke("Seguimiento y Apoyos"),xe.setFontSize(11),xe.setFont("helvetica","normal");const ut=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,kt=xe.splitTextToSize(ut,Me-oe*2);xe.text(kt,oe,Se),Se+=kt.length*5+10}(pt=i.metasProgreso)!=null&&pt.length&&(je(30),Ke("Metas de Progreso"),al(xe,{startY:Se,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(ut=>[ut.trimestre,ut.meta,ut.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:ut=>be(xe)}),Se=xe.lastAutoTable.finalY+10),(St=i.reuniones)!=null&&St.length&&(Ke("Reuniones con Apoderados"),al(xe,{startY:Se,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(ut=>[new Date(ut.fecha).toLocaleDateString("es-CL"),ut.motivo,ut.acuerdos,ut.asistentes]),theme:"grid",didDrawPage:ut=>be(xe)})),xe.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},de=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervencin":"Registrar Nueva Intervencin"}),c.jsxs("select",{value:h.responsable,onChange:xe=>m(oe=>({...oe,responsable:xe.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(xe=>c.jsx("option",{value:xe,children:xe},xe))]}),c.jsx("textarea",{value:h.accion,onChange:xe=>m(oe=>({...oe,accion:xe.target.value})),placeholder:"Accin realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:h.observaciones,onChange:xe=>m(oe=>({...oe,observaciones:xe.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[l&&c.jsx("button",{onClick:()=>{u(null),m(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edicin"}),c.jsx("button",{onClick:N,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.intervenciones||[]).map(xe=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:xe.accion}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:xe.observaciones}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(xe.fecha).toLocaleString("es-CL")," - ",xe.responsable]})]}),c.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[c.jsx("button",{onClick:()=>Q(xe),className:"text-blue-500",children:""}),c.jsx("button",{onClick:()=>D(xe.id),className:"text-red-500",children:""})]})]})},xe.id))})]}),me=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),ae&&c.jsx("span",{title:"Informacin no actualizada en los ltimos 3 meses",className:"text-yellow-500 text-xl",children:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),c.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:I,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),c.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:I,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",Y.percent,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:c.jsx("div",{className:`${Y.color} h-4 rounded-full transition-all duration-500`,style:{width:`${Y.percent}%`}})})]}),c.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[c.jsxs("select",{value:g.trimestre,onChange:xe=>b(oe=>({...oe,trimestre:xe.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"T1",children:"T1"}),c.jsx("option",{value:"T2",children:"T2"}),c.jsx("option",{value:"T3",children:"T3"})]}),c.jsx("input",{value:g.meta,onChange:xe=>b(oe=>({...oe,meta:xe.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:O,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(xe=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("input",{type:"checkbox",checked:xe.cumplida,onChange:()=>z(xe.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${xe.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[c.jsxs("strong",{children:[xe.trimestre,":"]})," ",xe.meta]}),c.jsx("button",{onClick:()=>re(xe.id),className:"text-red-500 text-sm",children:""})]},xe.id))})]})]}),ge=()=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),c.jsx("input",{type:"text",value:y.titulo,onChange:xe=>E(oe=>({...oe,titulo:xe.target.value})),placeholder:"Ttulo de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("input",{type:"date",value:y.fecha,onChange:xe=>E(oe=>({...oe,fecha:xe.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("button",{onClick:K,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(xe=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("input",{type:"checkbox",checked:xe.resuelta,onChange:()=>G(xe.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${xe.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[xe.titulo," (",new Date(xe.fecha+"T12:00:00").toLocaleDateString(),")"]}),c.jsx("button",{onClick:()=>W(xe.id),className:"text-red-500 text-sm",children:""})]},xe.id))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),c.jsx("input",{type:"file",onChange:ie,className:"w-full text-sm"}),c.jsx("button",{onClick:j,disabled:!B||L,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:L?"Subiendo...":"Subir"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(xe=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("a",{href:xe.url,download:xe.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:xe.nombre}),c.jsx("button",{onClick:()=>X(xe.id),className:"text-red-500 text-sm ml-2",children:""})]},xe.id))})]})]}),Te=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunin"}),c.jsx("input",{value:R.motivo,onChange:xe=>C(oe=>({...oe,motivo:xe.target.value})),placeholder:"Motivo de la reunin...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:R.acuerdos,onChange:xe=>C(oe=>({...oe,acuerdos:xe.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{value:R.asistentes,onChange:xe=>C(oe=>({...oe,asistentes:xe.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"text-right",children:c.jsx("button",{onClick:Z,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunin"})})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.reuniones||[]).map(xe=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:xe.motivo}),c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("strong",{children:"Acuerdos:"})," ",xe.acuerdos]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(xe.fecha).toLocaleString("es-CL")," - Asistentes: ",xe.asistentes]})]}),c.jsx("button",{onClick:()=>te(xe.id),className:"text-red-500 flex-shrink-0 ml-4",children:""})]})},xe.id))})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:xe=>xe.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:ce,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),c.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:""})]})]}),c.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:c.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(xe=>c.jsx("button",{onClick:()=>s(xe),className:`${a===xe?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:xe==="alertas"?"Alertas y Archivos":xe==="seguimiento"?"Seguimiento y Metas":xe},xe))})}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[a==="intervenciones"&&de(),a==="seguimiento"&&me(),a==="reuniones"&&Te(),a==="alertas"&&ge()]}),c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),c.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},Sve=({student:t,onClose:e,onConfirm:r})=>{const[n,a]=ee.useState(ly[0]),s=()=>{r(t,n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),c.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:ly.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},aD=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,a]=ee.useState([]),[s,i]=ee.useState(!0),[o,l]=ee.useState(null),[u,d]=ee.useState(null),[h,m]=ee.useState(""),[g,b]=ee.useState(""),[y,E]=ee.useState("");ee.useEffect(()=>{i(!0);const S=yve(Q=>{r(Q),i(!1)}),N=wve(Q=>{a(Q)});return()=>{S(),N()}},[]);const B=async(S,N)=>{if(e.some(D=>D.nombre===S.nombreCompleto)){alert("Este estudiante ya est en el programa de inclusin.");return}const Q={nombre:S.nombreCompleto,curso:S.curso||"",dificultad:N,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await bve(Q)}catch(D){console.error("Error al agregar estudiante:",D),alert("Hubo un error al agregar al estudiante al programa.")}},k=async S=>{try{await Cve(S.id,S)}catch(N){console.error("Error al actualizar la ficha:",N),alert("Hubo un error al guardar los cambios en la ficha.")}},L=async S=>{if(window.confirm("Est seguro de que desea eliminar a este estudiante del programa de inclusin? Esta accin es irreversible."))try{await Eve(S),(o==null?void 0:o.id)===S&&l(null)}catch(N){console.error("Error al eliminar estudiante:",N),alert("Hubo un error al eliminar al estudiante.")}},M=S=>{if(R.length===0){alert("No hay datos para exportar.");return}const N=R.map(Q=>{var D;return{Nombre:Q.nombre,Curso:Q.curso,Dificultad:Q.dificultad,"N Intervenciones":((D=Q.intervenciones)==null?void 0:D.length)||0,"Alertas Pendientes":(Q.alertas||[]).filter(I=>!I.resuelta).length}});if(S==="xlsx"){const Q=Ql.json_to_sheet(N),D=Ql.book_new();Ql.book_append_sheet(D,Q,"Estudiantes_Inclusion"),dT(D,"Estudiantes_Inclusion.xlsx")}else{const Q=new or;Q.text("Listado de Estudiantes - Programa de Inclusin",14,15),al(Q,{startY:20,head:[Object.keys(N[0])],body:N.map(Object.values)}),Q.save("Estudiantes_Inclusion.pdf")}},P=ee.useMemo(()=>n.filter(S=>{var N;return S.profile===Vt.ESTUDIANTE&&(((N=t.cursos)==null?void 0:N.includes(S.curso||""))||t.profile===Vt.SUBDIRECCION)}).filter(S=>!e.some(N=>N.nombre===S.nombreCompleto)),[n,e,t]),R=ee.useMemo(()=>e.filter(S=>S.nombre.toLowerCase().includes(h.toLowerCase())&&(g===""||S.curso===g)&&(y===""||S.dificultad===y)).sort((S,N)=>S.nombre.localeCompare(N.nombre)),[e,h,g,y]),C=ee.useMemo(()=>n.filter(S=>S.profile===Vt.PROFESORADO).map(S=>S.nombreCompleto).sort(),[n]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusin Escolar (PIE)"}),s?c.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",R.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>M("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:()=>M("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:h,onChange:S=>m(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("select",{value:g,onChange:S=>b(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),ls.map(S=>c.jsx("option",{children:S},S))]}),c.jsxs("select",{value:y,onChange:S=>E(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas las Dificultades"}),ly.map(S=>c.jsx("option",{children:S},S))]})]}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:R.map(S=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:S.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[S.curso," - ",S.dificultad]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>l(S),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),c.jsx("button",{onClick:()=>L(S.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:""})]})]},S.id))})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nmina"}),c.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:P.map(S=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:S.nombreCompleto}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:S.curso})]}),c.jsx("button",{onClick:()=>d(S),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},S.id))})]})]}),u&&c.jsx(Sve,{student:u,onClose:()=>d(null),onConfirm:(S,N)=>{B(S,N),d(null)}}),o&&c.jsx(_ve,{student:o,onClose:()=>l(null),onSave:k,profesores:C})]})},g7="asistencia_dual",Tve=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaHora:((n=(r=e.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaHora}},Bve=(t,e)=>{const r=er(Ft(Tt,g7),Fn("emailEstudiante","==",t),gn("fechaHora","desc"));return Tr(r,a=>{const s=a.docs.map(i=>Tve(i));e(s)},a=>{console.error("Error subscribing to personal attendance:",a),e([])})},Nve=async t=>{try{const e={...t,fechaHora:cr.fromDate(new Date(t.fechaHora))};await Ca(Ft(Tt,g7),e)}catch(e){throw console.error("Error adding attendance record:",e),new Error("Could not save the attendance record.")}},kve=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),Ive=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),Fve=({currentUser:t})=>{const[e,r]=ee.useState(t.curso||""),[n,a]=ee.useState([]),[s,i]=ee.useState(!1),[o,l]=ee.useState(!0),[u,d]=ee.useState(null);ee.useEffect(()=>{if(!t.email){l(!1);return}l(!0);const m=Bve(t.email,g=>{a(g),l(!1)});return()=>m()},[t.email]);const h=m=>{if(!e){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async g=>{const b={nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:m,fechaHora:new Date().toISOString(),ubicacion:{latitud:g.coords.latitude,longitud:g.coords.longitude}};try{await Nve(b),d({text:`Marca de ${m} registrada con xito!`,type:"success"})}catch(y){console.error("Error saving record to Firestore:",y),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},g=>{console.error("Geolocation error:",g);let b="No se pudo obtener la ubicacin.";switch(g.code){case g.PERMISSION_DENIED:b="Permiso de ubicacin denegado. Por favor, habilite la ubicacin en su navegador y dispositivo.";break;case g.POSITION_UNAVAILABLE:b="La informacin de ubicacin no est disponible en este momento. Verifique su conexin y GPS.";break;case g.TIMEOUT:b="La solicitud de ubicacin ha tardado demasiado. Intntelo de nuevo en un lugar con mejor seal.";break;default:b=`Ocurri un error desconocido al obtener la ubicacin (cdigo: ${g.code}).`;break}d({text:b,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de prctica."}),c.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),c.jsxs("select",{id:"curso",value:e,onChange:m=>r(m.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"-- Mi curso --"}),hh.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>h("Entrada"),disabled:s||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),c.jsx("button",{onClick:()=>h("Salida"),disabled:s||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&c.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{children:"Obteniendo ubicacin..."})]}),u&&c.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(m=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(m.fechaHora).toLocaleString("es-CL")}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${m.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[m.tipo==="Entrada"?c.jsx(kve,{}):c.jsx(Ive,{}),m.tipo]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:m.curso})]},m.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},Dve=async()=>{try{console.log(" Debugging users collection...");const t=Ft(Kr,"users"),e=er(t,TA(10)),r=await cs(e),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),l={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(t){return console.error("Error debugging users collection:",t),{exists:!1,error:t instanceof Error?t.message:"Unknown error"}}},Rve=async(t,e)=>{var l,u,d;const r=new Date(t,e,1),n=new Date(t,e+1,0,23,59,59,999),a=cr.fromDate(r),s=cr.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const h of i)try{const m=Ft(Kr,h);try{const g=er(m,Fn("fechaHora",">=",a),Fn("fechaHora","<=",s)),b=await cs(g);o[h]={exists:!0,hasDateField:!0,count:b.size,sampleDoc:((l=b.docs[0])==null?void 0:l.data())||null}}catch{const b=["fecha","timestamp","createdAt"];let y=!1;for(const E of b)try{const B=er(m,Fn(E,">=",a),Fn(E,"<=",s)),k=await cs(B);o[h]={exists:!0,hasDateField:E,count:k.size,sampleDoc:((u=k.docs[0])==null?void 0:u.data())||null},y=!0;break}catch{continue}if(!y){const E=er(m,gn("__name__"),TA(5)),B=await cs(E);o[h]={exists:!0,hasDateField:!1,count:B.size,sampleDoc:((d=B.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(m){o[h]={exists:!1,error:m instanceof Error?m.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},Lve=(t,e,r,n)=>{try{const a=new Date(t,e,1);a.setHours(0,0,0,0);const s=new Date(t,e+1,0);s.setHours(23,59,59,999),console.log(` Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(` Mes actual: ${t}-${(e+1).toString().padStart(2,"0")}`);const i=cr.fromDate(a),o=cr.fromDate(s),l=[],u=new Map,d=()=>{const m=Array.from(u.values());console.log(` Total registros encontrados: ${m.length}`),m.length>0&&console.log(" Registros por da:",m.reduce((g,b)=>{let y;b.fechaHora instanceof Date?y=b.fechaHora:typeof b.fechaHora=="string"?y=new Date(b.fechaHora):y=new Date;const E=y.getDate();return g[E]=(g[E]||0)+1,g},{})),r(m)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(m=>{try{console.log(` Configurando suscripcin para: ${m}`);const g=Ft(Kr,m),b=er(g,Fn("fechaHora",">=",i),Fn("fechaHora","<=",o),gn("fechaHora","desc")),y=Tr(b,E=>{console.log(` ${m}: ${E.size} documentos encontrados con filtro`),E.size>0?(console.log(` Registros encontrados en ${m}:`),Array.from(u.keys()).filter(k=>k.startsWith(`${m}_`)).forEach(k=>u.delete(k)),E.docs.forEach((k,L)=>{var M;if(L<5){const P=k.data();let R;(M=P.fechaHora)!=null&&M.toDate?R=P.fechaHora.toDate():typeof P.fechaHora=="string"?R=new Date(P.fechaHora):R=new Date,console.log(`   ${L+1}. ${P.emailEstudiante} - ${R.toLocaleString()} - ${P.tipo}`),console.log(`       Fecha original: ${P.fechaHora} (tipo: ${typeof P.fechaHora})`)}}),E.forEach(k=>{var C;const L=k.data();let M;(C=L.fechaHora)!=null&&C.toDate?M=L.fechaHora.toDate():typeof L.fechaHora=="string"?M=new Date(L.fechaHora):L.fechaHora instanceof Date?M=L.fechaHora:L.fechaHora?M=new Date(L.fechaHora):M=new Date;const P={id:k.id,emailEstudiante:L.emailEstudiante||L.email||"",nombreEstudiante:L.nombreEstudiante||L.nombre||"",curso:L.curso||"",fechaHora:M,tipo:L.tipo,ubicacion:L.ubicacion||null,observaciones:L.observaciones||"",...L},R=`${m}_${k.id}`;u.set(R,P)}),d()):console.log(` ${m}: vaca, manteniendo datos existentes`)},E=>{console.warn(` Error con filtro en ${m}:`,E),console.log(` Intentando estrategia alternativa en ${m}...`);const B=er(g,TA(200)),k=Tr(B,M=>{if(console.log(` ${m} (sin filtro): ${M.size} documentos`),M.size>0){const R=M.docs[0].data();console.log(` Estructura en ${m}:`,Object.keys(R)),console.log(" Primer documento:",R)}const P=M.docs.filter(R=>{var N;const C=R.data();if(!C.fechaHora)return!1;let S;return(N=C.fechaHora)!=null&&N.toDate?S=C.fechaHora.toDate():typeof C.fechaHora=="string"?S=new Date(C.fechaHora):C.fechaHora instanceof Date?S=C.fechaHora:S=new Date(C.fechaHora),S>=a&&S<=s});console.log(` ${m}: ${P.length} registros despus de filtro manual`),P.length>0&&(Array.from(u.keys()).filter(C=>C.startsWith(`${m}_`)).forEach(C=>u.delete(C)),P.forEach(C=>{var I;const S=C.data();let N;(I=S.fechaHora)!=null&&I.toDate?N=S.fechaHora.toDate():typeof S.fechaHora=="string"?N=new Date(S.fechaHora):S.fechaHora instanceof Date?N=S.fechaHora:N=new Date(S.fechaHora);const Q={id:C.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:N,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},D=`${m}_${C.id}`;u.set(D,Q)}),d())}),L=l.findIndex(M=>M===y);L>=0?l[L]=k:l.push(k)});l.push(y)}catch(g){console.warn(` Error configurando ${m}:`,g)}}),()=>{l.forEach(m=>{try{m()}catch(g){console.warn("Error unsubscribing:",g)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripcin: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},Uve=(t,e)=>{try{console.log(" Buscando usuarios en mltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(` Total usuarios encontrados: ${o.length}`);const l=o.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log(" Usuarios por perfil:",l);const u=o.filter(d=>d.profile===Vt.ESTUDIANTE);console.log(` Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),t(o)};let i=!1;return r.forEach(o=>{try{const l=Ft(Kr,o),u=er(l),d=Tr(u,h=>{h.size>0?(console.log(` Encontrados ${h.size} usuarios en coleccin: ${o}`),i=!0,Array.from(a.keys()).filter(g=>g.startsWith(`${o}_`)).forEach(g=>a.delete(g)),h.forEach(g=>{var b,y,E,B;try{const k=g.data(),L=k.email||k.userEmail||k.mail||k.correo||"",M=k.nombreCompleto||k.displayName||k.name||k.nombre||k.fullName||"",P=k.curso||k.course||k.class||k.grade||"";let R=k.profile||k.role||k.tipo||k.userType||Vt.ESTUDIANTE;if(typeof R=="string"){const N=R.toLowerCase();N.includes("estudiante")||N.includes("student")||N.includes("alumno")?R=Vt.ESTUDIANTE:N.includes("coordinador")||N.includes("coordinator")?R=Vt.COORDINADOR_TP:N.includes("profesor")||N.includes("teacher")||N.includes("docente")?R=Vt.PROFESOR:(N.includes("subdireccion")||N.includes("subdir"))&&(R=Vt.COORDINADOR_TP)}const C={id:g.id,email:L,nombreCompleto:M,curso:P,profile:R,activo:k.activo!==!1,fechaCreacion:((y=(b=k.fechaCreacion)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(k.fechaCreacion)||new Date,ultimaActividad:((B=(E=k.ultimaActividad)==null?void 0:E.toDate)==null?void 0:B.call(E))||new Date(k.ultimaActividad)||new Date,...k},S=`${o}_${g.id}`;a.set(S,C)}catch(k){console.warn(`Error procesando documento ${g.id} en ${o}:`,k)}}),s()):console.log(` Coleccin ${o}: vaca`)},h=>{console.warn(` Error en coleccin ${o}:`,h)});n.push(d)}catch(l){console.warn(` Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error(" No se encontraron usuarios en ninguna coleccin"),e&&e(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),e&&e(new Error(`Error al configurar suscripcin multi-coleccin: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},Mve=(t,e)=>{try{console.log("Setting up users subscription...");const r=Ft(Kr,"users"),n=er(r);return Tr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var h,m,g,b;try{const y=d.data();console.log(`Processing user doc ${d.id}:`,y);const E=y.email||y.userEmail||y.mail||"",B=y.nombreCompleto||y.displayName||y.name||y.nombre||"",k=y.curso||y.course||y.class||"";let L=y.profile||y.role||y.tipo||Vt.ESTUDIANTE;if(typeof L=="string"){const P=L.toLowerCase();P.includes("estudiante")||P.includes("student")||P.includes("alumno")?L=Vt.ESTUDIANTE:P.includes("coordinador")||P.includes("coordinator")?L=Vt.COORDINADOR_TP:P.includes("profesor")||P.includes("teacher")||P.includes("docente")?L=Vt.PROFESOR:(P.includes("subdireccion")||P.includes("subdir"))&&(L=Vt.COORDINADOR_TP)}const M={id:d.id,email:E,nombreCompleto:B,curso:k,profile:L,activo:y.activo!==!1,fechaCreacion:((m=(h=y.fechaCreacion)==null?void 0:h.toDate)==null?void 0:m.call(h))||new Date(y.fechaCreacion)||new Date,ultimaActividad:((b=(g=y.ultimaActividad)==null?void 0:g.toDate)==null?void 0:b.call(g))||new Date(y.ultimaActividad)||new Date,...y};i.push(M)}catch(y){console.warn(`Error processing user document ${d.id}:`,y)}}),i.sort((d,h)=>d.nombreCompleto.localeCompare(h.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("Users by profile:",o);const l=i.filter(d=>d.profile===Vt.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const u=l.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),t(i)},s=>{console.error("Error in subscribeToAllUsers:",s),e&&e(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),e&&e(new Error(`Error al configurar suscripcin de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},Uv=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},Pve=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),jve=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),Ove=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState([]),[a,s]=ee.useState(!0),[i,o]=ee.useState(null),[l,u]=ee.useState(new Date),[d,h]=ee.useState("todos"),[m,g]=ee.useState("");ee.useEffect(()=>{s(!0),o(null);const R=l.getFullYear(),C=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Ao:",R,"Mes:",C);let S=!1,N=!1;const Q=()=>{S&&N&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log(" INICIANDO PRUEBA DIRECTA SIMPLE...");try{const I=Ft(Kr,"asistencia_dual"),O=er(I,TA(5)),z=await cs(O);if(console.log(` asistencia_dual - Documentos encontrados: ${z.size}`),z.size>0)z.docs.forEach((re,Y)=>{const ae=re.data();console.log(`   ${Y+1}. ${re.id.slice(0,8)} - ${ae.emailEstudiante} - ${ae.tipo}`),console.log("      Fecha original:",ae.fechaHora),console.log("      Todos los campos:",Object.keys(ae))});else{console.log(" No se encontraron documentos en asistencia_dual");const re=["asistenciaEmpresa","asistencia_empresa"];for(const Y of re)try{const ae=Ft(Kr,Y),K=er(ae,TA(3)),G=await cs(K);if(console.log(` ${Y}: ${G.size} documentos`),G.size>0){const W=G.docs[0].data();console.log("   Estructura:",Object.keys(W)),console.log("   Email:",W.emailEstudiante||W.email),console.log("   Fecha:",W.fechaHora||W.fecha)}}catch(ae){console.log(` ${Y}: ${ae instanceof Error?ae.message:"Error"}`)}}}catch(I){console.error(" Error en prueba directa:",I),I.code==="permission-denied"?(console.log(" PROBLEMA: Permisos de Firestore denegados"),console.log(" Ve a Firebase Console  Firestore  Rules y verifica los permisos")):I.code==="failed-precondition"&&(console.log(" PROBLEMA: Faltan ndices en Firestore"),console.log(" Ve a Firebase Console  Firestore  Indexes"))}})(),Rve(R,C).then(I=>{console.log(" Debug info for collections:",I),Object.entries(I).forEach(([O,z])=>{if(z.exists&&z.totalDocs>0){if(console.log(`
 COLECCIN ${O.toUpperCase()}:`),console.log(`    Total documentos: ${z.totalDocs}`),console.log(`    Documentos del perodo: ${z.count}`),console.log(`    Campo de fecha: ${z.hasDateField}`),z.sampleDoc){console.log("    Documento ejemplo:",z.sampleDoc);const re=z.sampleDoc,Y=re.emailEstudiante||re.email||re.userEmail||re.correo||"NO ENCONTRADO",ae=re.tipo||re.type||re.action||re.tipoRegistro||"NO ENCONTRADO",K=re.fechaHora||re.fecha||re.timestamp||re.createdAt||"NO ENCONTRADO";console.log(`    Email estudiante: ${Y}`),console.log(`    Tipo registro: ${ae}`),console.log(`    Fecha: ${K}`),console.log("    Todos los campos:",Object.keys(re))}z.filteredDocs&&z.filteredDocs.length>0&&(console.log("    Registros del perodo encontrados:",z.filteredDocs.length),z.filteredDocs.forEach((re,Y)=>{Y<3&&console.log(`      ${Y+1}. ID: ${re.id}`,re.data)}))}else z.exists?console.log(` Coleccin ${O}: vaca`):console.log(` Coleccin ${O}: no existe`)})}).catch(I=>{console.error("Debug error:",I)}),Dve().then(I=>{console.log(" Debug info for users:",I),(!I.exists||I.totalDocs===0)&&(console.log(' Coleccin "users" vaca o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async z=>{var re;try{const Y=Ft(Kr,z),ae=er(Y,TA(5)),K=await cs(ae);K.size>0?(console.log(` Encontrada coleccin alternativa: ${z} con ${K.size} documentos`),console.log("Documento muestra:",(re=K.docs[0])==null?void 0:re.data())):console.log(` Coleccin ${z}: vaca`)}catch{console.log(` Coleccin ${z}: no existe`)}}))}).catch(I=>{console.error("Users debug error:",I)});try{console.log("Configurando suscripcin a asistencia...");const I=Lve(R,C,z=>{if(console.log(" Received registros:",z.length),z.length>0){console.log(" ANLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",z[0]);const re=[...new Set(z.map(ie=>ie.emailEstudiante).filter(Boolean))];console.log(" Emails de estudiantes en registros:",re);const Y=[...new Set(z.map(ie=>ie.tipo).filter(Boolean))];console.log(" Tipos de registro encontrados:",Y);const ae=z.reduce((ie,j)=>{const X=new Date(j.fechaHora).getDate();return ie[X]||(ie[X]=[]),ie[X].push(j),ie},{});console.log(" Registros por da del mes:",Object.keys(ae).map(ie=>({dia:parseInt(ie),cantidad:ae[parseInt(ie)].length})));const K=r.map(ie=>ie.email).filter(Boolean);console.log(" Emails de estudiantes cargados:",K);const G=re.filter(ie=>K.includes(ie)),W=re.filter(ie=>!K.includes(ie));console.log(" Emails que coinciden:",G),console.log(" Emails que NO coinciden:",W)}else console.log(" No se encontraron registros de asistencia para el perodo");e(z),S=!0,Q()},z=>{console.error(" Error fetching asistencia:",z),o("Error al cargar datos de asistencia: "+z.message),S=!0,Q()});console.log("Configurando suscripcin a usuarios...");const O=Uve(z=>{if(console.log(" Received users (multi-collection):",z.length),z.length>0){console.log("Sample user:",z[0]);const re=z.filter(Y=>Y.profile===Vt.ESTUDIANTE&&Y.curso);console.log("Dual students found:",re.length),re.forEach(Y=>{console.log(`- ${Y.nombreCompleto} (${Y.curso}) - ${Y.email}`)})}n(z),N=!0,Q()},z=>{console.error(" Error fetching users (multi-collection):",z),console.log(" Intentando con funcin original de usuarios...");const re=Mve(Y=>{console.log(" Received users (fallback):",Y.length),n(Y),N=!0,Q()},Y=>{console.error(" Error en fallback tambin:",Y),o("Error al cargar estudiantes: "+z.message),N=!0,Q()})});return()=>{console.log("Limpiando suscripciones..."),I&&I(),O&&O()}}catch(I){console.error(" Error setting up subscriptions:",I),o("Error al inicializar conexiones: "+(I instanceof Error?I.message:"Error desconocido")),s(!1)}},[l]);const{monthDays:b,monthName:y,year:E}=ee.useMemo(()=>{const R=l.getFullYear(),C=l.getMonth();return{monthDays:new Date(R,C+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:R}},[l]),B=ee.useMemo(()=>{let R=r.filter(C=>C.profile===Vt.ESTUDIANTE&&C.curso&&hh.includes(Uv(C.curso)));if(d!=="todos"&&(R=R.filter(C=>Uv(C.curso||"")===d)),m&&(R=R.filter(C=>C.nombreCompleto.toLowerCase().includes(m.toLowerCase()))),t.length>0){const C=[...new Set(t.map(Q=>Q.emailEstudiante).filter(Boolean))],S=R.map(Q=>Q.email),N=C.filter(Q=>!S.includes(Q));if(N.length>0){console.log(" Agregando estudiantes faltantes con registros:",N);const D=N.map(I=>{const O=t.find(z=>z.emailEstudiante===I);return{id:I,email:I,nombreCompleto:(O==null?void 0:O.nombreEstudiante)||I.split("@")[0],curso:(O==null?void 0:O.curso)||"3C",profile:Vt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(I=>{const O=d==="todos"||Uv(I.curso)===d,z=!m||I.nombreCompleto.toLowerCase().includes(m.toLowerCase());return O&&z&&hh.includes(Uv(I.curso))});R=[...R,...D]}}return console.log(` Estudiantes filtrados para mostrar: ${R.length}`),R.forEach(C=>{console.log(`   - ${C.nombreCompleto} (${C.curso}) - ${C.email}`)}),R.sort((C,S)=>C.nombreCompleto.localeCompare(S.nombreCompleto))},[r,d,m,t]),k=ee.useMemo(()=>{console.log(" Procesando datos de asistencia para la tabla..."),console.log(` Total registros a procesar: ${t.length}`),console.log(` Estudiantes disponibles: ${B.length}`);const R=new Map;return t.length===0?(console.log(" No hay registros para procesar an"),R):(t.forEach((C,S)=>{const N=C.emailEstudiante;if(!N)return;let Q;if(C.fechaHora instanceof Date)Q=C.fechaHora;else if(C.fechaHora&&typeof C.fechaHora=="object"&&"toDate"in C.fechaHora)Q=C.fechaHora.toDate();else if(typeof C.fechaHora=="string")Q=new Date(C.fechaHora);else{console.warn("Fecha no vlida en registro:",C);return}const D=Q.getDate(),I=Q.getMonth(),O=Q.getFullYear();S<3&&console.log(` Registro ${S+1}:`,{email:N,tipo:C.tipo,fechaOriginal:C.fechaHora,fechaProcesada:Q.toLocaleString(),ao:O,mes:I,da:D}),R.has(N)||R.set(N,new Map);const z=R.get(N);z.has(D)||z.set(D,{});const re=z.get(D);C.tipo==="Entrada"?(!re.entrada||Q<new Date(re.entrada.fechaHora))&&(re.entrada=C):C.tipo==="Salida"&&(!re.salida||Q>new Date(re.salida.fechaHora))&&(re.salida=C)}),console.log(" Datos de asistencia procesados:",{estudiantesConRegistros:R.size,estudiantes:Array.from(R.keys()),registrosPorEstudiante:Array.from(R.entries()).map(([C,S])=>({email:C,dias:Array.from(S.keys()),totalRegistros:Array.from(S.values()).reduce((N,Q)=>N+(Q.entrada?1:0)+(Q.salida?1:0),0)}))}),R)},[t]),L=R=>{u(C=>{const S=new Date(C);return S.setMonth(S.getMonth()+R),S})},M=R=>{R!=null&&R.latitud&&(R!=null&&R.longitud)&&window.open(`https://www.google.com/maps?q=${R.latitud},${R.longitud}`,"_blank")},P=["D","L","M","M","J","V","S"];return i?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[c.jsx("button",{onClick:()=>L(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:""}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${y} ${E}`}),c.jsx("button",{onClick:()=>L(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:""})]}),c.jsxs("select",{value:d,onChange:R=>h(R.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todos",children:"Todos los Cursos"}),hh.map(R=>c.jsx("option",{value:R,children:R},R))]}),c.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:m,onChange:R=>g(R.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?c.jsxs("div",{className:"text-center text-amber-600 py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),c.jsx("div",{children:"Cargando datos de asistencia..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:b},(R,C)=>{const N=new Date(E,l.getMonth(),C+1).getDay(),Q=N===0||N===6;return c.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${Q?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[c.jsx("div",{className:"font-semibold",children:P[N]}),c.jsx("div",{children:C+1})]},C)})]})}),c.jsx("tbody",{children:B.length>0?B.map(R=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:R.nombreCompleto}),Array.from({length:b},(C,S)=>{var O;const N=S+1,Q=(O=k.get(R.email))==null?void 0:O.get(N),D=new Date(E,l.getMonth(),S+1),I=D.getDay()===0||D.getDay()===6;return R.email==="alexis.robles@industrialderecoleta.cl"&&N===2&&console.log(" Verificando da 2 para Alexis:",{email:R.email,day:N,hasDataForStudent:k.has(R.email),studentDayRecords:Q,allAttendanceKeys:Array.from(k.keys()),daysForStudent:k.get(R.email)?Array.from(k.get(R.email).keys()):[]}),c.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${I?"bg-slate-100 dark:bg-slate-700/50":""}`,children:c.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(Q==null?void 0:Q.entrada)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var z;return M((z=Q.entrada)==null?void 0:z.ubicacion)},children:[c.jsx(Pve,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(Q.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(Q==null?void 0:Q.salida)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var z;return M((z=Q.salida)==null?void 0:z.ubicacion)},children:[c.jsx(jve,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(Q.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},N)})]},R.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:b+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la bsqueda."})})})]})})]})},Yw="evaluaciones_formativas",Jw="calificaciones_formativas",xT="trabajos_grupales_formativos",Qve="usuarios",vT=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((s=(a=e.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.fechaPresentacion}},Hve=(t,e,r)=>{const n=er(Ft(Tt,Yw),Fn("curso","==",t),Fn("asignatura","==",e),gn("fecha","asc"));return Tr(n,a=>{r(a.docs.map(s=>vT(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},Vve=async(t,e)=>{const r=d4(Tt),n=yr(Ft(Tt,Yw));r.set(n,{...t,fecha:cr.fromDate(new Date(t.fecha+"T00:00:00"))});const a=yr(Tt,Jw,n.id);return r.set(a,e),await r.commit(),n.id},zve=async(t,e)=>{const r=yr(Tt,Yw,t);await $i(r,e,{merge:!0})},Gve=async t=>{const e=d4(Tt);e.delete(yr(Tt,Yw,t)),e.delete(yr(Tt,Jw,t)),await e.commit()},qve=(t,e)=>{if(t.length===0)return e({}),()=>{};const r=t.map(n=>{const a=yr(Tt,Jw,n);return Tr(a,s=>{s.exists()&&e({[n]:s.data()})})});return()=>r.forEach(n=>n())},Kve=async(t,e)=>{const r=yr(Tt,Jw,t);await $i(r,e,{merge:!0})},$ve=(t,e,r)=>{const n=er(Ft(Tt,xT),Fn("curso","==",t),Fn("asignatura","==",e),gn("fechaPresentacion","desc"));return Tr(n,a=>{r(a.docs.map(s=>vT(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},Wve=async t=>{const e={...t,fechaPresentacion:cr.fromDate(new Date(t.fechaPresentacion+"T00:00:00"))};await Ca(Ft(Tt,xT),e)},Xve=async(t,e)=>{const r=yr(Tt,xT,t);await $i(r,e,{merge:!0})},Yve=t=>{const e=er(Ft(Tt,Qve));return Tr(e,r=>{t(r.docs.map(n=>vT(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),t([])})},x7=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},Dy={"Lengua y Literatura":"",Matemtica:"",Ingls:"",Filosofa:"","Historia y Geografa":"","Educacin Ciudadana":"",Ciencias:"","Ciencias para la Ciudadana":"",Artes:"",Msica:"","Educacin Fsica":"",Orientacin:"","Mecnica Industrial":"","Mecnica Automotriz":"",Emprendimiento:"",Tecnologa:"","Pensamiento Lgico":"","Competencia Lectora":"",Default:""},v7=t=>t.startsWith("1")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},Jve=({cursos:t,onSelect:e})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(r=>{const n=v7(r);return c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsxs("button",{onClick:()=>e(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[c.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),c.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[c.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),c.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),Zve=({curso:t,asignaturas:e,onSelect:r,onBack:n})=>{const a=v7(t);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:" Volver a Cursos"}),c.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",t]})]}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(s=>c.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[c.jsx("span",{className:"text-2xl",children:Dy[s]||Dy.Default}),c.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},e2e=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[a,s]=ee.useState([]),[i,o]=ee.useState({}),[l,u]=ee.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,h]=ee.useState(null),[m,g]=ee.useState(null),[b,y]=ee.useState(!0),E=ee.useMemo(()=>r.filter(S=>S.profile===Vt.ESTUDIANTE&&x7(S.curso||"")===t).map(S=>S.nombreCompleto).sort((S,N)=>S.localeCompare(N)),[r,t]);ee.useEffect(()=>{y(!0);const S=Hve(t,e,N=>{s(N);const Q=N.map(I=>I.id),D=qve(Q,I=>{o(O=>({...O,...I}))});return y(!1),()=>D()});return()=>S()},[t,e]);const B=S=>{const{name:N,value:Q}=S.target;d?h(D=>D?{...D,[N]:Q}:null):u(D=>({...D,[N]:Q}))},k=async S=>{if(S.preventDefault(),g(null),!l.nombreActividad.trim()){g("El nombre de la actividad es obligatorio.");return}const N={asignatura:e,curso:t,...l},Q=E.reduce((D,I)=>(D[I]="trabajado",D),{});try{await Vve(N,Q),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(D){console.error(D),g("No se pudo crear la evaluacin.")}},L=(S,N)=>{var O;const D=(((O=i[S])==null?void 0:O[N])||"trabajado")==="trabajado"?"no trabajado":"trabajado",I={...i,[S]:{...i[S]||{},[N]:D}};o(I),Kve(S,{[N]:D}).catch(z=>{console.error("Error updating grade:",z)})},M=S=>h(S),P=async()=>{if(d)try{await zve(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),h(null)}catch(S){console.error(S),g("No se pudo guardar la edicin.")}},R=async S=>{if(window.confirm("Eliminar esta evaluacin y todas sus calificaciones?"))try{await Gve(S)}catch(N){console.error(N),g("No se pudo eliminar la evaluacin.")}},C=ee.useCallback(S=>{if(a.length===0)return"-";let N=0,Q=0;return a.forEach(D=>{var O;const I=(O=i[D.id])==null?void 0:O[S];I==="trabajado"?(N+=7,Q++):I==="no trabajado"&&(N+=2,Q++)}),Q===0?"-":(N/Q).toFixed(1)},[i,a]);return b?c.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluacin"}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),c.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:B,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),c.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:B,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"w-full",children:c.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),m&&c.jsx("p",{className:"text-red-500 text-sm col-span-full",children:m})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(S=>c.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===S.id?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:B,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:B,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("button",{onClick:P,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:""})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"font-semibold",children:S.nombreActividad}),c.jsx("span",{className:"font-normal text-slate-500",children:S.fecha}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("button",{onClick:()=>M(S),className:"text-blue-500 hover:text-blue-700",children:""}),c.jsx("button",{onClick:()=>R(S.id),className:"text-red-500 hover:text-red-700",children:""})]})]})},S.id)),c.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:E.map(S=>c.jsxs("tr",{children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:S}),a.map(N=>{var I;const D=((I=i[N.id])==null?void 0:I[S])==="trabajado";return c.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:c.jsx("button",{onClick:()=>L(N.id,S),className:`text-3xl transition-opacity duration-200 ${D?"opacity-100":"opacity-20"}`,children:Dy[e]||Dy.Default})},N.id)}),c.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:C(S)})]},S))})]})})]})},t2e=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[a,s]=ee.useState([]),[i,o]=ee.useState(null),[l,u]=ee.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,h]=ee.useState({}),[m,g]=ee.useState(2),b=ee.useMemo(()=>r.filter(M=>M.profile===Vt.ESTUDIANTE&&x7(M.curso||"")===t).sort((M,P)=>M.nombreCompleto.localeCompare(P.nombreCompleto)),[r,t]);ee.useEffect(()=>{const M=$ve(t,e,s);return()=>M()},[t,e]),ee.useEffect(()=>{if(i){const M={};i.grupos.forEach(P=>{P.integrantes.forEach(R=>{M[R.nombre]={groupNumber:String(P.numero),role:R.rol||""}})}),h(M)}else h({})},[i]);const y=async M=>{if(M.preventDefault(),!l.nombre.trim())return;const P={curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await Wve(P),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(R){console.error(R),alert("No se pudo crear la actividad grupal.")}},E=async()=>{if(!i)return;const M=new Map;for(const R of b){const C=d[R.nombreCompleto];if(C&&C.groupNumber){const S=parseInt(C.groupNumber,10);isNaN(S)||(M.has(S)||M.set(S,[]),M.get(S).push({nombre:R.nombreCompleto,rol:C.role||void 0}))}}const P=Array.from(M.entries()).map(([R,C])=>({numero:R,integrantes:C})).sort((R,C)=>R.numero-C.numero);try{await Xve(i.id,{grupos:P}),alert("Grupos guardados con xito.")}catch(R){console.error(R),alert("No se pudieron guardar los grupos.")}},B=()=>{if(m<2){alert("Debe haber al menos 2 grupos.");return}const M=[...b].sort(()=>Math.random()-.5),P={};M.forEach((R,C)=>{var S;P[R.nombreCompleto]={groupNumber:String(C%m+1),role:((S=d[R.nombreCompleto])==null?void 0:S.role)||""}}),h(P)},k=(M,P,R)=>{h(C=>({...C,[M]:{...C[M]||{groupNumber:"",role:""},[P]:R}}))},L=ee.useMemo(()=>{const M=new Map;return Object.entries(d).forEach(([P,R])=>{R.groupNumber&&(M.has(R.groupNumber)||M.set(R.groupNumber,[]),M.get(R.groupNumber).push({nombre:P,rol:R.role}))}),Array.from(M.entries()).sort((P,R)=>parseInt(P[0])-parseInt(R[0]))},[d]);return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a Actividades"}),c.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),c.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignacin"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:m,onChange:M=>g(parseInt(M.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),c.jsx("button",{onClick:B,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Nmina del Curso"}),c.jsx("table",{className:"w-full text-sm",children:c.jsx("tbody",{children:b.map(M=>{var P;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-1 pr-2",children:M.nombreCompleto}),c.jsx("td",{className:"py-1",children:c.jsx("input",{type:"number",value:((P=d[M.nombreCompleto])==null?void 0:P.groupNumber)||"",onChange:R=>k(M.nombreCompleto,"groupNumber",R.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N"})})]},M.id)})})})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:L.map(([M,P])=>c.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",M]}),c.jsx("ul",{className:"space-y-2",children:P.map(R=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"flex-1 truncate",children:R.nombre}),c.jsxs("select",{value:R.rol||"",onChange:C=>k(R.nombre,"role",C.target.value),className:"p-1 border rounded text-xs w-32",children:[c.jsx("option",{value:"",children:"-- Asignar Rol --"}),L8.map(C=>c.jsx("option",{value:C,children:C},C))]})]},R.nombre))})]},M))})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),c.jsxs("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsx("input",{value:l.nombre,onChange:M=>u({...l,nombre:M.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("input",{type:"date",value:l.fecha,onChange:M=>u({...l,fecha:M.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(M=>c.jsxs("button",{onClick:()=>o(M),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[c.jsx("p",{className:"font-bold",children:M.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",M.fechaPresentacion]})]},M.id))]})]})},r2e=({currentUser:t})=>{const[e,r]=ee.useState("calificaciones"),[n,a]=ee.useState(null),[s,i]=ee.useState(null),[o,l]=ee.useState([]),[u,d]=ee.useState(!0);ee.useEffect(()=>{d(!0);const y=Yve(E=>{l(E),d(!1)});return()=>y()},[]);const h=ee.useMemo(()=>t.cursos||[],[t.cursos]),m=ee.useMemo(()=>t.asignaturas||[],[t.asignaturas]),g=({tab:y,label:E})=>c.jsx("button",{onClick:()=>r(y),className:`${e===y?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:E}),b=()=>{if(u)return c.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return c.jsx(Jve,{cursos:h,onSelect:a});if(!s)return c.jsx(Zve,{curso:n,asignaturas:m,onSelect:i,onBack:()=>a(null)});if(e==="calificaciones")return c.jsx(e2e,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return c.jsx(t2e,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(g,{tab:"calificaciones",label:"Calificaciones"}),c.jsx(g,{tab:"grupos",label:"Trabajos Grupales"})]})}),c.jsx("div",{className:"mt-6",children:b()})]})},o1="acompanamientos",n2e=async()=>{try{const t=er(Ft(Kr,o1),gn("fecha","desc"));return(await cs(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acompaamientos:",t),new Error("No se pudieron cargar los registros de acompaamiento")}},a2e=async t=>{try{return{id:(await Ca(Ft(Kr,o1),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompaamiento:",e),new Error("No se pudo crear el registro de acompaamiento")}},s2e=async(t,e)=>{try{const r=yr(Kr,o1,t);await $x(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompaamiento:",r,"ID:",t),new Error("No se pudo actualizar el registro de acompaamiento")}},i2e=async t=>{try{const e=yr(Kr,o1,t);await mi(e)}catch(e){throw console.error("Error al eliminar acompaamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompaamiento")}},o2e=async t=>{try{const e=er(Ft(Kr,o1),Fn("docente","==",t),gn("fecha","desc"));return(await cs(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error al obtener acompaamientos por docente:",e),new Error("No se pudieron cargar los acompaamientos del docente")}},l2e=async()=>{try{const t=yr(Kr,"configuracion","rubricaAcompanamiento"),e=await Kx(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rbrica personalizada:",t),null}},c2e=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState([]),[a,s]=ee.useState(!1),[i,o]=ee.useState(!1),[l,u]=ee.useState(null),[d,h]=ee.useState("list"),[m,g]=ee.useState(null),[b,y]=ee.useState(!1),[E,B]=ee.useState(!1),k=Dg,L=ee.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[M,P]=ee.useState(L),R=ee.useCallback(async()=>{s(!0);try{const K=await n2e();e(K),u(null)}catch(K){console.error("Error al cargar acompaamientos desde Firestore",K),u("No se pudieron cargar los registros de acompaamiento desde la nube.")}finally{s(!1)}},[]),C=ee.useCallback(async()=>{o(!0);try{const G=(await d7()).filter(W=>W.profile===Vt.PROFESORADO).map(W=>W.nombreCompleto).sort();n(G)}catch(K){console.error("Error al cargar profesores desde Firestore",K),u("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);ee.useEffect(()=>{R(),C()},[R,C]);const S=K=>{P(G=>({...G,[K.target.name]:K.target.value}))},N=(K,G)=>{P(W=>({...W,rubricaResultados:{...W.rubricaResultados,[K]:G}}))},Q=async()=>{y(!0);const{rubricaResultados:K,observacionesGenerales:G}=M;let W=`Resultados de la Rbrica:
`;k.forEach(j=>{j.criteria.forEach(X=>{const Z=K[X.name];if(Z&&X.levels[Z-1]){const te=X.levels[Z-1];W+=`- Criterio: "${X.name}" | Nivel: ${Z} (${te})
`}})}),W+=`
Observaciones Generales del Evaluador:
${G||"No se proveyeron observaciones adicionales."}`;const ie=`
            Eres un asesor pedaggico experto. Tu tarea es generar una retroalimentacin formal, tcnica y constructiva para un docente, basada en una observacin de clase.
            La retroalimentacin debe ser estructurada y usar un lenguaje pedaggico preciso.

            A continuacin, los datos de la observacin:
            ${W}

            Genera una retroalimentacin que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectndolos con los criterios de la rbrica.
            - ## reas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqu con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prcticas y accionables que el docente pueda implementar.
        `;try{Kl("Acompaamiento - Consolidar Feedback");const Z=(await new ix({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:ie})).text.replace(/(\*\*|\*)/g,"");P(te=>({...te,retroalimentacionConsolidada:Z}))}catch(j){console.error("Error al generar retroalimentacin con IA",j),alert("No se pudo generar la retroalimentacin. Intntelo de nuevo.")}finally{y(!1)}},D=async()=>{const K=m;if(!K)return;B(!0);const G=t.find(Te=>Te.id===K);if(!G){B(!1);return}const W=new or({orientation:"p",unit:"mm",format:"a4"}),ie=20,j=W.internal.pageSize.getWidth(),X=W.internal.pageSize.getHeight(),Z=j-ie*2;let te=ie;const ce=Te=>{Te.setFont("helvetica","bold"),Te.setFontSize(10),Te.setTextColor(100),Te.text("LICEO INDUSTRIAL DE RECOLETA",j/2,15,{align:"center"})};ce(W),W.setFont("helvetica","bold"),W.setFontSize(18),W.setTextColor(40),W.text("Informe de Acompaamiento Docente",j/2,te+10,{align:"center"}),te+=25,al(W,{startY:te,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},G.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(G.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},G.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},G.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),te=W.lastAutoTable.finalY+10;const de=[],me=["Dbil","Incipiente","Satisfactorio","Avanzado"];k.forEach(Te=>{de.push([{content:Te.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),Te.criteria.forEach(xe=>{const oe=G.rubricaResultados[xe.name],Me=oe?me[oe-1]:"No evaluado";de.push([xe.name,Me])})}),al(W,{startY:te,head:[["Indicador","Nivel de Logro"]],body:de,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:Te=>{Te.pageNumber>1&&ce(W)}}),te=W.lastAutoTable.finalY+15;const ge=(Te,xe)=>{te>X-ie-10&&(W.addPage(),ce(W),te=ie),W.setFont("helvetica",xe.style),W.setFontSize(xe.size);const oe=W.splitTextToSize(Te,Z),Me=oe.length*(xe.size*.352778*1.15);te+Me>X-ie&&(W.addPage(),ce(W),te=ie),W.text(oe,ie,te,{align:"left"}),te+=Me+(xe.isTitle?5:8)};G.retroalimentacionConsolidada?G.retroalimentacionConsolidada.split(/(?=## )/).forEach(xe=>{if(xe.trim()){const oe=xe.trim().split(`
`),Me=oe[0].replace("## ",""),at=oe.slice(1).join(`
`).trim();ge(Me,{size:14,style:"bold",isTitle:!0}),ge(at,{size:11,style:"normal",isTitle:!1})}}):(ge("Retroalimentacin Consolidada",{size:14,style:"bold",isTitle:!0}),ge("No se ha generado retroalimentacin.",{size:11,style:"normal",isTitle:!1})),W.save(`Acompanamiento_${G.docente.replace(/\s/g,"_")}_${new Date(G.fecha).toLocaleDateString("es-CL")}.pdf`),B(!1)},I=async K=>{if(K.preventDefault(),!M.docente||!M.curso||!M.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let G=m;if(m)await s2e(m,M);else{const W=await a2e(M);g(W.id),P({...M}),G=W.id}await R(),G&&alert("Guardado correctamente!")}catch(G){console.error("Error al guardar acompaamiento:",G),u("Error al guardar el registro en la nube.")}},O=()=>{P(L),g(null),h("form"),u(null)},z=K=>{P(K),g(K.id),h("form"),u(null)},re=async K=>{if(window.confirm("Est seguro de que desea eliminar este registro de acompaamiento?"))try{await i2e(K),await R()}catch(G){console.error("Error al eliminar acompaamiento:",G),u("No se pudo eliminar el registro en la nube.")}},Y=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompaamiento"}),c.jsx("button",{onClick:O,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),a&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!a&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompaamiento en la nube."}),c.jsx("div",{className:"space-y-4",children:!a&&t.length>0&&t.map(K=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:K.docente}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[K.curso," - ",K.asignatura]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(K.fecha).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>z(K),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),c.jsx("button",{onClick:()=>re(K.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},K.id))})]}),ae=()=>c.jsx("div",{className:"animate-fade-in",children:c.jsxs("form",{onSubmit:I,className:"space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:m?"Editando Acompaamiento":"Nuevo Acompaamiento Docente"}),c.jsx("button",{type:"button",onClick:()=>h("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:" Volver al listado"})]}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{name:"docente",value:M.docente,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[c.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),r.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:M.curso,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),ls.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:M.asignatura,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),sl.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),c.jsx("input",{type:"text",name:"bloques",value:M.bloques,onChange:S,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Dbil (1)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:k.map(K=>c.jsx(At.Fragment,{children:K.criteria.map((G,W)=>c.jsxs("tr",{children:[W===0&&c.jsx("td",{rowSpan:K.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:K.domain}),c.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:G.name}),G.levels.map((ie,j)=>{const X=j+1,Z=M.rubricaResultados[G.name]===X;return c.jsx("td",{onClick:()=>N(G.name,X),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Z?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:ie},X)})]},G.name))},K.domain))})]})}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{name:"observacionesGenerales",value:M.observacionesGenerales,onChange:S,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentacin Consolidada"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("textarea",{name:"retroalimentacionConsolidada",value:M.retroalimentacionConsolidada,onChange:S,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentacin aqu..."}),c.jsx("button",{type:"button",onClick:Q,disabled:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:b?"...":"Consolidar"})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[c.jsx("button",{type:"button",onClick:D,disabled:!m||E,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:E?"...":"Exportar PDF"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompaamiento"})]})]})});return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompaamiento Docente"}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d==="list"?Y():ae()})]})},yT="mensajes_internos",u2e="usuarios",y7="mensajes_read_status",w7=t=>{var r,n;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fecha}},A2e=(t,e)=>{const r=er(Ft(Tt,yT),Fn("participants","array-contains",t),gn("fecha","desc"));return Tr(r,a=>{const s=a.docs.map(i=>w7(i));e(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),e([])})},d2e=async t=>{try{const e={...t,participants:[t.de,t.para],fecha:cr.fromDate(new Date)};await Ca(Ft(Tt,yT),e)}catch(e){throw console.error("Error al enviar el mensaje:",e),new Error("No se pudo enviar el mensaje.")}},f2e=async t=>{try{const e=yr(Tt,yT,t);await mi(e)}catch(e){throw console.error("Error al eliminar el mensaje:",e),new Error("No se pudo eliminar el mensaje.")}},h2e=(t,e)=>{const r=yr(Tt,y7,t);return Tr(r,a=>{a.exists()?e(a.data()):e({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),e({announcements:[],messages:[]})})},m2e=async(t,e)=>{try{const r=yr(Tt,y7,t);await $i(r,{messages:FW(e)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como ledo:",r),new Error("No se pudo actualizar el estado de lectura.")}},p2e=t=>{const e=er(Ft(Tt,u2e),gn("nombreCompleto","asc"));return Tr(e,n=>{const a=n.docs.map(s=>w7(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},g2e=({currentUser:t,refreshUnreadCount:e})=>{const[r,n]=ee.useState("inbox"),[a,s]=ee.useState([]),[i,o]=ee.useState([]),[l,u]=ee.useState(null),[d,h]=ee.useState({announcements:[],messages:[]}),[m,g]=ee.useState(!0),b={para:"",asunto:"",cuerpo:""},[y,E]=ee.useState(b);ee.useEffect(()=>{if(!t.id||!t.email){g(!1);return}g(!0);const C=A2e(t.email,Q=>{s(Q),g(!1)}),S=p2e(o),N=h2e(t.id,Q=>{h(Q),e()});return()=>{C(),S(),N()}},[t.id,t.email,e]);const B=C=>{u(C),r==="inbox"&&!d.messages.includes(C.id)&&m2e(t.id,C.id).catch(S=>{console.error("Failed to mark message as read:",S)})},k=async C=>{if(C.preventDefault(),!y.para||!y.asunto.trim()||!y.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const S={de:t.email,para:y.para,asunto:y.asunto,cuerpo:y.cuerpo};try{await d2e(S),E(b),n("sent")}catch(N){console.error("Error sending message:",N),alert("No se pudo enviar el mensaje. Intntelo de nuevo.")}},L=async C=>{if(window.confirm("Est seguro de que desea eliminar este mensaje? Esta accin es irreversible."))try{await f2e(C),u(null)}catch(S){console.error("Error deleting message:",S),alert("No se pudo eliminar el mensaje.")}},M=C=>{E({para:C.de,asunto:`Re: ${C.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${C.de}
Fecha: ${new Date(C.fecha).toLocaleString("es-CL")}

${C.cuerpo}`}),n("compose")},P=ee.useMemo(()=>a.filter(C=>C.para===t.email),[a,t.email]),R=ee.useMemo(()=>a.filter(C=>C.de===t.email),[a,t.email]);return m?c.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajera..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[c.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:c.jsx("button",{onClick:()=>{n("compose"),u(null),E(b)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),c.jsxs("nav",{className:"p-2 space-y-1",children:[c.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),c.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&c.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?P:R).map(C=>{const S=r==="inbox"&&!d.messages.includes(C.id);return c.jsxs("div",{onClick:()=>B(C),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===C.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:`font-bold truncate ${S?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?C.de:`Para: ${C.para}`}),S&&c.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),c.jsx("p",{className:`truncate text-sm ${S?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:C.asunto}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(C.fecha).toLocaleString("es-CL")})]},C.id)})}),c.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),c.jsxs("select",{id:"para",value:y.para,onChange:C=>E({...y,para:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(C=>C.email!==t.email).map(C=>c.jsxs("option",{value:C.email,children:[C.nombreCompleto," (",C.email,")"]},C.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),c.jsx("input",{type:"text",id:"asunto",value:y.asunto,onChange:C=>E({...y,asunto:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),c.jsx("textarea",{id:"cuerpo",value:y.cuerpo,onChange:C=>E({...y,cuerpo:C.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?c.jsxs("div",{children:[c.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"De:"})," ",l.de," ",c.jsx("br",{}),c.jsx("strong",{children:"Para:"})," ",l.para," ",c.jsx("br",{}),c.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),c.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),c.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&c.jsx("button",{onClick:()=>M(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),c.jsx("button",{onClick:()=>L(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:c.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var E5=function(t,e){return E5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},E5(t,e)};function Uc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");E5(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var _5=function(){return _5=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_5.apply(this,arguments)};function eo(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(h){i(h)}}function l(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):a(d.value).then(o,l)}u((n=n.apply(t,[])).next())})}function Ri(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Mv(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var PA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Zw=function(t,e){return PA.fromClientRect(t,e.getBoundingClientRect())},x2e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new PA(0,0,n,a)},eb=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},ns=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},sD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Pv=0;Pv<sD.length;Pv++)v2e[sD.charCodeAt(Pv)]=Pv;var iD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jv=0;jv<iD.length;jv++)gg[iD.charCodeAt(jv)]=jv;var y2e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=gg[t.charCodeAt(n)],i=gg[t.charCodeAt(n+1)],o=gg[t.charCodeAt(n+2)],l=gg[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},w2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},b2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},yh=5,wT=11,kE=2,C2e=wT-yh,b7=65536>>yh,E2e=1<<yh,IE=E2e-1,_2e=1024>>yh,S2e=b7+_2e,T2e=S2e,B2e=32,N2e=T2e+B2e,k2e=65536>>wT,I2e=1<<C2e,F2e=I2e-1,oD=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},D2e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},R2e=function(t,e){var r=y2e(t),n=Array.isArray(r)?b2e(r):new Uint32Array(r),a=Array.isArray(r)?w2e(r):new Uint16Array(r),s=24,i=oD(a,s/2,n[4]/2),o=n[5]===2?oD(a,(s+n[4])/2):D2e(n,Math.ceil((s+n[4])/4));return new L2e(n[0],n[1],n[2],n[3],i,o)},L2e=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>yh],r=(r<<kE)+(e&IE),this.data[r];if(e<=65535)return r=this.index[b7+(e-55296>>yh)],r=(r<<kE)+(e&IE),this.data[r];if(e<this.highStart)return r=N2e-k2e+(e>>wT),r=this.index[r],r+=e>>yh&F2e,r=this.index[r],r=(r<<kE)+(e&IE),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),lD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ov=0;Ov<lD.length;Ov++)U2e[lD.charCodeAt(Ov)]=Ov;var M2e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",cD=50,P2e=1,C7=2,E7=3,j2e=4,O2e=5,uD=7,_7=8,AD=9,$d=10,S5=11,dD=12,T5=13,Q2e=14,xg=15,B5=16,Qv=17,Yp=18,H2e=19,fD=20,N5=21,Jp=22,FE=23,I0=24,Yo=25,vg=26,yg=27,F0=28,V2e=29,ih=30,z2e=31,Hv=32,Vv=33,k5=34,I5=35,F5=36,Cx=37,D5=38,D2=39,R2=40,DE=41,S7=42,G2e=43,q2e=[9001,65288],T7="!",ln="",zv="",R5=R2e(M2e),xA=[ih,F5],L5=[P2e,C7,E7,O2e],B7=[$d,_7],hD=[yg,vg],K2e=L5.concat(B7),mD=[D5,D2,R2,k5,I5],$2e=[xg,T5],W2e=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,i){var o=R5.get(s);if(o>cD?(a.push(!0),o-=cD):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(B5);if(o===j2e||o===S5){if(i===0)return n.push(i),r.push(ih);var l=r[i-1];return K2e.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(ih))}if(n.push(i),o===z2e)return r.push(e==="strict"?N5:Cx);if(o===S7||o===V2e)return r.push(ih);if(o===G2e)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(Cx):r.push(ih);r.push(o)}),[n,r,a]},RE=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==$d)break}if(a===$d)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===e)return!0;if(i!==$d)break}if(o!==$d)break}return!1},pD=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===$d)r--;else return n}return 0},X2e=function(t,e,r,n,a){if(r[n]===0)return ln;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return ln;var i=s-1,o=s+1,l=e[s],u=i>=0?e[i]:0,d=e[o];if(l===C7&&d===E7)return ln;if(L5.indexOf(l)!==-1)return T7;if(L5.indexOf(d)!==-1||B7.indexOf(d)!==-1)return ln;if(pD(s,e)===_7)return zv;if(R5.get(t[s])===S5||(l===Hv||l===Vv)&&R5.get(t[o])===S5||l===uD||d===uD||l===AD||[$d,T5,xg].indexOf(l)===-1&&d===AD||[Qv,Yp,H2e,I0,F0].indexOf(d)!==-1||pD(s,e)===Jp||RE(FE,Jp,s,e)||RE([Qv,Yp],N5,s,e)||RE(dD,dD,s,e))return ln;if(l===$d)return zv;if(l===FE||d===FE)return ln;if(d===B5||l===B5)return zv;if([T5,xg,N5].indexOf(d)!==-1||l===Q2e||u===F5&&$2e.indexOf(l)!==-1||l===F0&&d===F5||d===fD||xA.indexOf(d)!==-1&&l===Yo||xA.indexOf(l)!==-1&&d===Yo||l===yg&&[Cx,Hv,Vv].indexOf(d)!==-1||[Cx,Hv,Vv].indexOf(l)!==-1&&d===vg||xA.indexOf(l)!==-1&&hD.indexOf(d)!==-1||hD.indexOf(l)!==-1&&xA.indexOf(d)!==-1||[yg,vg].indexOf(l)!==-1&&(d===Yo||[Jp,xg].indexOf(d)!==-1&&e[o+1]===Yo)||[Jp,xg].indexOf(l)!==-1&&d===Yo||l===Yo&&[Yo,F0,I0].indexOf(d)!==-1)return ln;if([Yo,F0,I0,Qv,Yp].indexOf(d)!==-1)for(var h=s;h>=0;){var m=e[h];if(m===Yo)return ln;if([F0,I0].indexOf(m)!==-1)h--;else break}if([yg,vg].indexOf(d)!==-1)for(var h=[Qv,Yp].indexOf(l)!==-1?i:s;h>=0;){var m=e[h];if(m===Yo)return ln;if([F0,I0].indexOf(m)!==-1)h--;else break}if(D5===l&&[D5,D2,k5,I5].indexOf(d)!==-1||[D2,k5].indexOf(l)!==-1&&[D2,R2].indexOf(d)!==-1||[R2,I5].indexOf(l)!==-1&&d===R2||mD.indexOf(l)!==-1&&[fD,vg].indexOf(d)!==-1||mD.indexOf(d)!==-1&&l===yg||xA.indexOf(l)!==-1&&xA.indexOf(d)!==-1||l===I0&&xA.indexOf(d)!==-1||xA.concat(Yo).indexOf(l)!==-1&&d===Jp&&q2e.indexOf(t[o])===-1||xA.concat(Yo).indexOf(d)!==-1&&l===Yp)return ln;if(l===DE&&d===DE){for(var g=r[s],b=1;g>0&&(g--,e[g]===DE);)b++;if(b%2!==0)return ln}return l===Hv&&d===Vv?ln:zv},Y2e=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=W2e(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(o){return[Yo,ih,S7].indexOf(o)!==-1?Cx:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,a,i]},J2e=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===T7,this.start=n,this.end=a}return t.prototype.slice=function(){return ns.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Z2e=function(t,e){var r=eb(t),n=Y2e(r,e),a=n[0],s=n[1],i=n[2],o=r.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=ln;u<o&&(d=X2e(r,s,a,++u,i))===ln;);if(d!==ln||u===o){var h=new J2e(r,d,l,u);return l=u,{value:h,done:!1}}return{done:!0,value:null}}}},eye=1,tye=2,l1=4,gD=8,Ry=10,xD=47,Gg=92,rye=9,nye=32,Gv=34,Zp=61,aye=35,sye=36,iye=37,qv=39,Kv=40,eg=41,oye=95,_o=45,lye=33,cye=60,uye=62,Aye=64,dye=91,fye=93,hye=61,mye=123,$v=63,pye=125,vD=124,gye=126,xye=128,yD=65533,LE=42,ch=43,vye=44,yye=58,wye=59,Ex=46,bye=0,Cye=8,Eye=11,_ye=14,Sye=31,Tye=127,pu=-1,N7=48,k7=97,I7=101,Bye=102,Nye=117,kye=122,F7=65,D7=69,R7=70,Iye=85,Fye=90,Pi=function(t){return t>=N7&&t<=57},Dye=function(t){return t>=55296&&t<=57343},D0=function(t){return Pi(t)||t>=F7&&t<=R7||t>=k7&&t<=Bye},Rye=function(t){return t>=k7&&t<=kye},Lye=function(t){return t>=F7&&t<=Fye},Uye=function(t){return Rye(t)||Lye(t)},Mye=function(t){return t>=xye},Wv=function(t){return t===Ry||t===rye||t===nye},Ly=function(t){return Uye(t)||Mye(t)||t===oye},wD=function(t){return Ly(t)||Pi(t)||t===_o},Pye=function(t){return t>=bye&&t<=Cye||t===Eye||t>=_ye&&t<=Sye||t===Tye},Ld=function(t,e){return t!==Gg?!1:e!==Ry},Xv=function(t,e,r){return t===_o?Ly(e)||Ld(e,r):Ly(t)?!0:!!(t===Gg&&Ld(t,e))},UE=function(t,e,r){return t===ch||t===_o?Pi(e)?!0:e===Ex&&Pi(r):Pi(t===Ex?e:t)},jye=function(t){var e=0,r=1;(t[e]===ch||t[e]===_o)&&(t[e]===_o&&(r=-1),e++);for(var n=[];Pi(t[e]);)n.push(t[e++]);var a=n.length?parseInt(ns.apply(void 0,n),10):0;t[e]===Ex&&e++;for(var s=[];Pi(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(ns.apply(void 0,s),10):0;(t[e]===D7||t[e]===I7)&&e++;var l=1;(t[e]===ch||t[e]===_o)&&(t[e]===_o&&(l=-1),e++);for(var u=[];Pi(t[e]);)u.push(t[e++]);var d=u.length?parseInt(ns.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,l*d)},Oye={type:2},Qye={type:3},Hye={type:4},Vye={type:13},zye={type:8},Gye={type:21},qye={type:9},Kye={type:10},$ye={type:11},Wye={type:12},Xye={type:14},Yv={type:23},Yye={type:1},Jye={type:25},Zye={type:24},ewe={type:26},twe={type:27},rwe={type:28},nwe={type:29},awe={type:31},U5={type:32},L7=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(eb(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==U5;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Gv:return this.consumeStringToken(Gv);case aye:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(wD(r)||Ld(n,a)){var s=Xv(r,n,a)?tye:eye,i=this.consumeName();return{type:5,value:i,flags:s}}break;case sye:if(this.peekCodePoint(0)===Zp)return this.consumeCodePoint(),Vye;break;case qv:return this.consumeStringToken(qv);case Kv:return Oye;case eg:return Qye;case LE:if(this.peekCodePoint(0)===Zp)return this.consumeCodePoint(),Xye;break;case ch:if(UE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case vye:return Hye;case _o:var o=e,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(UE(o,l,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Xv(o,l,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===_o&&u===uye)return this.consumeCodePoint(),this.consumeCodePoint(),Zye;break;case Ex:if(UE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case xD:if(this.peekCodePoint(0)===LE)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===LE&&(d=this.consumeCodePoint(),d===xD))return this.consumeToken();if(d===pu)return this.consumeToken()}break;case yye:return ewe;case wye:return twe;case cye:if(this.peekCodePoint(0)===lye&&this.peekCodePoint(1)===_o&&this.peekCodePoint(2)===_o)return this.consumeCodePoint(),this.consumeCodePoint(),Jye;break;case Aye:var h=this.peekCodePoint(0),m=this.peekCodePoint(1),g=this.peekCodePoint(2);if(Xv(h,m,g)){var i=this.consumeName();return{type:7,value:i}}break;case dye:return rwe;case Gg:if(Ld(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case fye:return nwe;case hye:if(this.peekCodePoint(0)===Zp)return this.consumeCodePoint(),zye;break;case mye:return $ye;case pye:return Wye;case Nye:case Iye:var b=this.peekCodePoint(0),y=this.peekCodePoint(1);return b===ch&&(D0(y)||y===$v)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case vD:if(this.peekCodePoint(0)===Zp)return this.consumeCodePoint(),qye;if(this.peekCodePoint(0)===vD)return this.consumeCodePoint(),Gye;break;case gye:if(this.peekCodePoint(0)===Zp)return this.consumeCodePoint(),Kye;break;case pu:return U5}return Wv(e)?(this.consumeWhiteSpace(),awe):Pi(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Ly(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ns(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();D0(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===$v&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(ns.apply(void 0,e.map(function(l){return l===$v?N7:l})),16),s=parseInt(ns.apply(void 0,e.map(function(l){return l===$v?R7:l})),16);return{type:30,start:a,end:s}}var i=parseInt(ns.apply(void 0,e),16);if(this.peekCodePoint(0)===_o&&D0(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];D0(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(ns.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Kv?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Kv?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===pu)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===qv||r===Gv){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===pu||this.peekCodePoint(0)===eg)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Yv)}for(;;){var a=this.consumeCodePoint();if(a===pu||a===eg)return{type:22,value:ns.apply(void 0,e)};if(Wv(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===pu||this.peekCodePoint(0)===eg?(this.consumeCodePoint(),{type:22,value:ns.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Yv);if(a===Gv||a===qv||a===Kv||Pye(a))return this.consumeBadUrlRemnants(),Yv;if(a===Gg)if(Ld(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Yv;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;Wv(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===eg||e===pu)return;Ld(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=ns.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===pu||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===Ry)return this._value.splice(0,n),Yye;if(a===Gg){var s=this._value[n+1];s!==pu&&s!==void 0&&(s===Ry?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Ld(a,s)&&(r+=this.consumeStringSlice(n),r+=ns(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=l1,n=this.peekCodePoint(0);for((n===ch||n===_o)&&e.push(this.consumeCodePoint());Pi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===Ex&&Pi(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=gD;Pi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===D7||n===I7)&&((a===ch||a===_o)&&Pi(s)||Pi(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=gD;Pi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[jye(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Xv(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===iye?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(D0(e)){for(var r=ns(e);D0(this.peekCodePoint(0))&&r.length<6;)r+=ns(this.consumeCodePoint());Wv(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Dye(n)||n>1114111?yD:n}return e===pu?yD:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(wD(r))e+=ns(r);else if(Ld(r,this.peekCodePoint(0)))e+=ns(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),U7=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new L7;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||iwe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?U5:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),c1=function(t){return t.type===15},ap=function(t){return t.type===17},ta=function(t){return t.type===20},swe=function(t){return t.type===0},M5=function(t,e){return ta(t)&&t.value===e},M7=function(t){return t.type!==31},Pm=function(t){return t.type!==31&&t.type!==4},ju=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},iwe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},bf=function(t){return t.type===17||t.type===15},Es=function(t){return t.type===16||bf(t)},P7=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},fi={type:17,number:0,flags:l1},bT={type:16,number:50,flags:l1},Wd={type:16,number:100,flags:l1},wg=function(t,e,r){var n=t[0],a=t[1];return[ca(n,e),ca(typeof a<"u"?a:n,r)]},ca=function(t,e){if(t.type===16)return t.number/100*e;if(c1(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},j7="deg",O7="grad",Q7="rad",H7="turn",tb={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case j7:return Math.PI*e.number/180;case O7:return Math.PI/200*e.number;case Q7:return e.number;case H7:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},V7=function(t){return t.type===15&&(t.unit===j7||t.unit===O7||t.unit===Q7||t.unit===H7)},z7=function(t){var e=t.filter(ta).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[fi,fi];case"to top":case"bottom":return Hl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[fi,Wd];case"to right":case"left":return Hl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Wd,Wd];case"to bottom":case"top":return Hl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Wd,fi];case"to left":case"right":return Hl(270)}return 0},Hl=function(t){return Math.PI*t/180},rf={name:"color",parse:function(t,e){if(e.type===18){var r=owe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return Xd(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Xd(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return Xd(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Xd(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=IA[e.value.toUpperCase()];if(typeof o<"u")return o}return IA.TRANSPARENT}},nf=function(t){return(255&t)===0},Ks=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},Xd=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},bD=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},CD=function(t,e){var r=e.filter(Pm);if(r.length===3){var n=r.map(bD),a=n[0],s=n[1],i=n[2];return Xd(a,s,i,1)}if(r.length===4){var o=r.map(bD),a=o[0],s=o[1],i=o[2],l=o[3];return Xd(a,s,i,l)}return 0};function ME(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var ED=function(t,e){var r=e.filter(Pm),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?Hl(n.number):tb.parse(t,n))/(Math.PI*2),l=Es(a)?a.number/100:0,u=Es(s)?s.number/100:0,d=typeof i<"u"&&Es(i)?ca(i,1):1;if(l===0)return Xd(u*255,u*255,u*255,1);var h=u<=.5?u*(l+1):u+l-u*l,m=u*2-h,g=ME(m,h,o+1/3),b=ME(m,h,o),y=ME(m,h,o-1/3);return Xd(g*255,b*255,y*255,d)},owe={hsl:ED,hsla:ED,rgb:CD,rgba:CD},qg=function(t,e){return rf.parse(t,U7.create(e).parseComponentValue())},IA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},lwe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(ta(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},cwe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},rb=function(t,e){var r=rf.parse(t,e[0]),n=e[1];return n&&Es(n)?{color:r,stop:n}:{color:r,stop:null}},_D=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=fi),n.stop===null&&(n.stop=Wd);for(var a=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=ca(o,e);l>s?a.push(l):a.push(s),s=l}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var h=i-u,m=a[u-1],g=(d-m)/(h+1),b=1;b<=h;b++)a[u+b-1]=g*b;u=null}}return t.map(function(y,E){var B=y.color;return{color:B,stop:Math.max(Math.min(1,a[E]/e),0)}})},uwe=function(t,e,r){var n=e/2,a=r/2,s=ca(t[0],e)-n,i=a-ca(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},Awe=function(t,e,r){var n=typeof t=="number"?t:uwe(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,o=a/2,l=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-l,i+l]},bc=function(t,e){return Math.sqrt(t*t+e*e)},SD=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var l=o[0],u=o[1],d=bc(r-l,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},dwe=function(t,e,r,n,a){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=i=Math.min(bc(e,r),bc(e,r-a),bc(e-n,r),bc(e-n,r-a));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),l=SD(n,a,e,r,!0),u=l[0],d=l[1];s=bc(u-e,(d-r)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=i=Math.max(bc(e,r),bc(e,r-a),bc(e-n,r),bc(e-n,r-a));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),h=SD(n,a,e,r,!1),u=h[0],d=h[1];s=bc(u-e,(d-r)/o),i=o*s}break}return Array.isArray(t.size)&&(s=ca(t.size[0],n),i=t.size.length===2?ca(t.size[1],a):s),[s,i]},fwe=function(t,e){var r=Hl(180),n=[];return ju(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=z7(a);return}else if(V7(i)){r=tb.parse(t,i);return}}var o=rb(t,a);n.push(o)}),{angle:r,stops:n,type:1}},Jv=function(t,e){var r=Hl(180),n=[];return ju(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=z7(a);return}else if(V7(i)){r=(tb.parse(t,i)+Hl(270))%Hl(360);return}}var o=rb(t,a);n.push(o)}),{angle:r,stops:n,type:1}},hwe=function(t,e){var r=Hl(180),n=[],a=1,s=0,i=3,o=[];return ju(e).forEach(function(l,u){var d=l[0];if(u===0){if(ta(d)&&d.value==="linear"){a=1;return}else if(ta(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var h=rf.parse(t,d.values[0]);n.push({stop:fi,color:h})}else if(d.name==="to"){var h=rf.parse(t,d.values[0]);n.push({stop:Wd,color:h})}else if(d.name==="color-stop"){var m=d.values.filter(Pm);if(m.length===2){var h=rf.parse(t,m[1]),g=m[0];ap(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:h})}}}}),a===1?{angle:(r+Hl(180))%Hl(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},G7="closest-side",q7="farthest-side",K7="closest-corner",$7="farthest-corner",W7="circle",X7="ellipse",Y7="cover",J7="contain",mwe=function(t,e){var r=0,n=3,a=[],s=[];return ju(e).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(h,m){if(u)if(ta(m))switch(m.value){case"center":return s.push(bT),h;case"top":case"left":return s.push(fi),h;case"right":case"bottom":return s.push(Wd),h}else(Es(m)||bf(m))&&s.push(m);else if(ta(m))switch(m.value){case W7:return r=0,!1;case X7:return r=1,!1;case"at":return u=!0,!1;case G7:return n=0,!1;case Y7:case q7:return n=1,!1;case J7:case K7:return n=2,!1;case $7:return n=3,!1}else if(bf(m)||Es(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return h},l)}if(l){var d=rb(t,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},Zv=function(t,e){var r=0,n=3,a=[],s=[];return ju(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,h){if(ta(h))switch(h.value){case"center":return s.push(bT),!1;case"top":case"left":return s.push(fi),!1;case"right":case"bottom":return s.push(Wd),!1}else if(Es(h)||bf(h))return s.push(h),!1;return d},l):o===1&&(l=i.reduce(function(d,h){if(ta(h))switch(h.value){case W7:return r=0,!1;case X7:return r=1,!1;case J7:case G7:return n=0,!1;case q7:return n=1,!1;case K7:return n=2,!1;case Y7:case $7:return n=3,!1}else if(bf(h)||Es(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},l)),l){var u=rb(t,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},pwe=function(t){return t.type===1},gwe=function(t){return t.type===2},CT={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=Z7[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function xwe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Z7[t.name])}var Z7={"linear-gradient":fwe,"-moz-linear-gradient":Jv,"-ms-linear-gradient":Jv,"-o-linear-gradient":Jv,"-webkit-linear-gradient":Jv,"radial-gradient":mwe,"-moz-radial-gradient":Zv,"-ms-radial-gradient":Zv,"-o-radial-gradient":Zv,"-webkit-radial-gradient":Zv,"-webkit-gradient":hwe},vwe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Pm(n)&&xwe(n)}).map(function(n){return CT.parse(t,n)})}},ywe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(ta(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},wwe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return ju(e).map(function(r){return r.filter(Es)}).map(P7)}},bwe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return ju(e).map(function(r){return r.filter(ta).map(function(n){return n.value}).join(" ")}).map(Cwe)}},Cwe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ym;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(ym||(ym={}));var Ewe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return ju(e).map(function(r){return r.filter(_we)})}},_we=function(t){return ta(t)||Es(t)},nb=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Swe=nb("top"),Twe=nb("right"),Bwe=nb("bottom"),Nwe=nb("left"),ab=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return P7(r.filter(Es))}}},kwe=ab("top-left"),Iwe=ab("top-right"),Fwe=ab("bottom-right"),Dwe=ab("bottom-left"),sb=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Rwe=sb("top"),Lwe=sb("right"),Uwe=sb("bottom"),Mwe=sb("left"),ib=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return c1(r)?r.number:0}}},Pwe=ib("top"),jwe=ib("right"),Owe=ib("bottom"),Qwe=ib("left"),Hwe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Vwe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},zwe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(ta).reduce(function(r,n){return r|Gwe(n.value)},0)}},Gwe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},qwe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Kwe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Uy;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Uy||(Uy={}));var $we={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Uy.STRICT;case"normal":default:return Uy.NORMAL}}},Wwe={name:"line-height",initialValue:"normal",prefix:!1,type:4},TD=function(t,e){return ta(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Es(t)?ca(t,e):e},Xwe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:CT.parse(t,e)}},Ywe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},P5={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},ob=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Jwe=ob("top"),Zwe=ob("right"),ebe=ob("bottom"),tbe=ob("left"),rbe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(ta).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},nbe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},lb=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},abe=lb("top"),sbe=lb("right"),ibe=lb("bottom"),obe=lb("left"),lbe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},cbe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},ube={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&M5(e[0],"none")?[]:ju(e).map(function(r){for(var n={color:IA.TRANSPARENT,offsetX:fi,offsetY:fi,blur:fi},a=0,s=0;s<r.length;s++){var i=r[s];bf(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=rf.parse(t,i)}return n})}},Abe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},dbe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=mbe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},fbe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},hbe=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,a,s,i,o]:null},mbe={matrix:fbe,matrix3d:hbe},BD={type:16,number:50,flags:l1},pbe=[BD,BD],gbe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Es);return r.length!==2?pbe:[r[0],r[1]]}},xbe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Kg;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Kg||(Kg={}));var vbe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Kg.BREAK_ALL;case"keep-all":return Kg.KEEP_ALL;case"normal":default:return Kg.NORMAL}}},ybe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(ap(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},eO={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},wbe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return ap(e)?e.number:1}},bbe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Cbe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(ta).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Ebe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},_be={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Sbe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(ap(e))return e.number;if(ta(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Tbe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(ta).map(function(r){return r.value})}},Bbe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ls=function(t,e){return(t&e)!==0},Nbe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},kbe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(M7),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var l=o&&ap(o)?o.number:1;n.push({counter:i.value,increment:l})}}return n}},Ibe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(M7),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(ta(s)&&s.value!=="none"){var o=i&&ap(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},Fbe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(c1).map(function(r){return eO.parse(t,r)})}},Dbe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(swe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},ND=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},Rbe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&M5(e[0],"none")?[]:ju(e).map(function(r){for(var n={color:255,offsetX:fi,offsetY:fi,blur:fi,spread:fi,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];M5(i,"inset")?n.inset=!0:bf(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=rf.parse(t,i)}return n})}},Lbe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(ta).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},Ube={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Mbe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return c1(e)?e.number:0}},Pbe=function(){function t(e,r){var n,a;this.animationDuration=Xt(e,Fbe,r.animationDuration),this.backgroundClip=Xt(e,lwe,r.backgroundClip),this.backgroundColor=Xt(e,cwe,r.backgroundColor),this.backgroundImage=Xt(e,vwe,r.backgroundImage),this.backgroundOrigin=Xt(e,ywe,r.backgroundOrigin),this.backgroundPosition=Xt(e,wwe,r.backgroundPosition),this.backgroundRepeat=Xt(e,bwe,r.backgroundRepeat),this.backgroundSize=Xt(e,Ewe,r.backgroundSize),this.borderTopColor=Xt(e,Swe,r.borderTopColor),this.borderRightColor=Xt(e,Twe,r.borderRightColor),this.borderBottomColor=Xt(e,Bwe,r.borderBottomColor),this.borderLeftColor=Xt(e,Nwe,r.borderLeftColor),this.borderTopLeftRadius=Xt(e,kwe,r.borderTopLeftRadius),this.borderTopRightRadius=Xt(e,Iwe,r.borderTopRightRadius),this.borderBottomRightRadius=Xt(e,Fwe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Xt(e,Dwe,r.borderBottomLeftRadius),this.borderTopStyle=Xt(e,Rwe,r.borderTopStyle),this.borderRightStyle=Xt(e,Lwe,r.borderRightStyle),this.borderBottomStyle=Xt(e,Uwe,r.borderBottomStyle),this.borderLeftStyle=Xt(e,Mwe,r.borderLeftStyle),this.borderTopWidth=Xt(e,Pwe,r.borderTopWidth),this.borderRightWidth=Xt(e,jwe,r.borderRightWidth),this.borderBottomWidth=Xt(e,Owe,r.borderBottomWidth),this.borderLeftWidth=Xt(e,Qwe,r.borderLeftWidth),this.boxShadow=Xt(e,Rbe,r.boxShadow),this.color=Xt(e,Hwe,r.color),this.direction=Xt(e,Vwe,r.direction),this.display=Xt(e,zwe,r.display),this.float=Xt(e,qwe,r.cssFloat),this.fontFamily=Xt(e,Ebe,r.fontFamily),this.fontSize=Xt(e,_be,r.fontSize),this.fontStyle=Xt(e,Bbe,r.fontStyle),this.fontVariant=Xt(e,Tbe,r.fontVariant),this.fontWeight=Xt(e,Sbe,r.fontWeight),this.letterSpacing=Xt(e,Kwe,r.letterSpacing),this.lineBreak=Xt(e,$we,r.lineBreak),this.lineHeight=Xt(e,Wwe,r.lineHeight),this.listStyleImage=Xt(e,Xwe,r.listStyleImage),this.listStylePosition=Xt(e,Ywe,r.listStylePosition),this.listStyleType=Xt(e,P5,r.listStyleType),this.marginTop=Xt(e,Jwe,r.marginTop),this.marginRight=Xt(e,Zwe,r.marginRight),this.marginBottom=Xt(e,ebe,r.marginBottom),this.marginLeft=Xt(e,tbe,r.marginLeft),this.opacity=Xt(e,wbe,r.opacity);var s=Xt(e,rbe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Xt(e,nbe,r.overflowWrap),this.paddingTop=Xt(e,abe,r.paddingTop),this.paddingRight=Xt(e,sbe,r.paddingRight),this.paddingBottom=Xt(e,ibe,r.paddingBottom),this.paddingLeft=Xt(e,obe,r.paddingLeft),this.paintOrder=Xt(e,Lbe,r.paintOrder),this.position=Xt(e,cbe,r.position),this.textAlign=Xt(e,lbe,r.textAlign),this.textDecorationColor=Xt(e,bbe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Xt(e,Cbe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Xt(e,ube,r.textShadow),this.textTransform=Xt(e,Abe,r.textTransform),this.transform=Xt(e,dbe,r.transform),this.transformOrigin=Xt(e,gbe,r.transformOrigin),this.visibility=Xt(e,xbe,r.visibility),this.webkitTextStrokeColor=Xt(e,Ube,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Xt(e,Mbe,r.webkitTextStrokeWidth),this.wordBreak=Xt(e,vbe,r.wordBreak),this.zIndex=Xt(e,ybe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return nf(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Ls(this.display,4)||Ls(this.display,33554432)||Ls(this.display,268435456)||Ls(this.display,536870912)||Ls(this.display,67108864)||Ls(this.display,134217728)},t}(),jbe=function(){function t(e,r){this.content=Xt(e,Nbe,r.content),this.quotes=Xt(e,Dbe,r.quotes)}return t}(),kD=function(){function t(e,r){this.counterIncrement=Xt(e,kbe,r.counterIncrement),this.counterReset=Xt(e,Ibe,r.counterReset)}return t}(),Xt=function(t,e,r){var n=new L7,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new U7(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,ta(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return tb.parse(t,s.parseComponentValue());case"color":return rf.parse(t,s.parseComponentValue());case"image":return CT.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return bf(o)?o:fi;case"length-percentage":var l=s.parseComponentValue();return Es(l)?l:fi;case"time":return eO.parse(t,s.parseComponentValue())}break}},Obe="data-html2canvas-debug",Qbe=function(t){var e=t.getAttribute(Obe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},j5=function(t,e){var r=Qbe(t);return r===1||e===r},Ou=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,j5(r,3))debugger;this.styles=new Pbe(e,window.getComputedStyle(r,null)),H5(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Zw(this.context,r),j5(r,4)&&(this.flags|=16)}return t}(),Hbe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ID="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var e2=0;e2<ID.length;e2++)bg[ID.charCodeAt(e2)]=e2;var Vbe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=bg[t.charCodeAt(n)],i=bg[t.charCodeAt(n+1)],o=bg[t.charCodeAt(n+2)],l=bg[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},zbe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},Gbe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},wh=5,ET=11,PE=2,qbe=ET-wh,tO=65536>>wh,Kbe=1<<wh,jE=Kbe-1,$be=1024>>wh,Wbe=tO+$be,Xbe=Wbe,Ybe=32,Jbe=Xbe+Ybe,Zbe=65536>>ET,eCe=1<<qbe,tCe=eCe-1,FD=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},rCe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},nCe=function(t,e){var r=Vbe(t),n=Array.isArray(r)?Gbe(r):new Uint32Array(r),a=Array.isArray(r)?zbe(r):new Uint16Array(r),s=24,i=FD(a,s/2,n[4]/2),o=n[5]===2?FD(a,(s+n[4])/2):rCe(n,Math.ceil((s+n[4])/4));return new aCe(n[0],n[1],n[2],n[3],i,o)},aCe=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>wh],r=(r<<PE)+(e&jE),this.data[r];if(e<=65535)return r=this.index[tO+(e-55296>>wh)],r=(r<<PE)+(e&jE),this.data[r];if(e<this.highStart)return r=Jbe-Zbe+(e>>ET),r=this.index[r],r+=e>>wh&tCe,r=this.index[r],r=(r<<PE)+(e&jE),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),DD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sCe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var t2=0;t2<DD.length;t2++)sCe[DD.charCodeAt(t2)]=t2;var iCe=1,OE=2,QE=3,RD=4,LD=5,oCe=7,UD=8,HE=9,VE=10,MD=11,PD=12,jD=13,OD=14,zE=15,lCe=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},cCe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},uCe=nCe(Hbe),Ul="",GE="",ACe=function(t){return uCe.get(t)},dCe=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],i=e[r];if(s===OE&&i===QE)return Ul;if(s===OE||s===QE||s===RD||i===OE||i===QE||i===RD)return GE;if(s===UD&&[UD,HE,MD,PD].indexOf(i)!==-1||(s===MD||s===HE)&&(i===HE||i===VE)||(s===PD||s===VE)&&i===VE||i===jD||i===LD||i===oCe||s===iCe)return Ul;if(s===jD&&i===OD){for(;a===LD;)a=e[--n];if(a===OD)return Ul}if(s===zE&&i===zE){for(var o=0;a===zE;)o++,a=e[--n];if(o%2===0)return Ul}return GE},fCe=function(t){var e=lCe(t),r=e.length,n=0,a=0,s=e.map(ACe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Ul;n<r&&(i=dCe(e,s,++n))===Ul;);if(i!==Ul||n===r){var o=cCe.apply(null,e.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},hCe=function(t){for(var e=fCe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},mCe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},pCe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=eb(n.data).map(function(l){return ns(l)}),s=0,i={},o=a.every(function(l,u){r.setStart(n,s),r.setEnd(n,s+l.length);var d=r.getBoundingClientRect();s+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,u===0?!0:h});return t.body.removeChild(e),o},gCe=function(){return typeof new Image().crossOrigin<"u"},xCe=function(){return typeof new XMLHttpRequest().responseType=="string"},vCe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},QD=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},yCe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var i=O5(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),HD(i).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",QD(l)?HD(O5(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),QD(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},O5=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},HD=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},li={get SUPPORT_RANGE_BOUNDS(){var t=mCe(document);return Object.defineProperty(li,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=li.SUPPORT_RANGE_BOUNDS&&pCe(document);return Object.defineProperty(li,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=vCe(document);return Object.defineProperty(li,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?yCe(document):Promise.resolve(!1);return Object.defineProperty(li,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=gCe();return Object.defineProperty(li,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=xCe();return Object.defineProperty(li,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(li,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(li,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},$g=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),wCe=function(t,e,r,n){var a=ECe(e,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(li.SUPPORT_RANGE_BOUNDS){var l=VD(n,i,o.length).getClientRects();if(l.length>1){var u=_T(o),d=0;u.forEach(function(m){s.push(new $g(m,PA.fromDOMRectList(t,VD(n,d+i,m.length).getClientRects()))),d+=m.length})}else s.push(new $g(o,PA.fromDOMRectList(t,l)))}else{var h=n.splitText(o.length);s.push(new $g(o,bCe(t,n))),n=h}else li.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},bCe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=Zw(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return PA.EMPTY},VD=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},_T=function(t){if(li.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return hCe(t)},CCe=function(t,e){if(li.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return SCe(t,e)},ECe=function(t,e){return e.letterSpacing!==0?_T(t):CCe(t,e)},_Ce=[32,160,4961,65792,65793,4153,4241],SCe=function(t,e){for(var r=Z2e(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=eb(i),l="";o.forEach(function(u){_Ce.indexOf(u)===-1?l+=ns(u):(l.length&&n.push(l),n.push(ns(u)),l="")}),l.length&&n.push(l)}};!(a=r.next()).done;)s();return n},TCe=function(){function t(e,r,n){this.text=BCe(r.data,n.textTransform),this.textBounds=wCe(e,this.text,n,r)}return t}(),BCe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(NCe,kCe);case 2:return t.toUpperCase();default:return t}},NCe=/(^|\s|:|-|\(|\))([a-z])/g,kCe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},rO=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Ou),nO=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(Ou),aO=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,i=Zw(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Ou),sO=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Ou),Q5=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(Ou),ICe=[{type:15,flags:0,unit:"px",number:3}],FCe=[{type:16,flags:0,number:50}],DCe=function(t){return t.width>t.height?new PA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new PA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},RCe=function(t){var e=t.type===LCe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},My="checkbox",Py="radio",LCe="password",zD=707406591,ST=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=RCe(n),(a.type===My||a.type===Py)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=DCe(a.bounds)),a.type){case My:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=ICe;break;case Py:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=FCe;break}return a}return e}(Ou),iO=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(Ou),oO=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Ou),lO=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=uO(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?qg(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):IA.TRANSPARENT,i=n.contentWindow.document.body?qg(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):IA.TRANSPARENT;a.backgroundColor=nf(s)?nf(i)?a.styles.backgroundColor:i:s}}catch{}return a}return e}(Ou),UCe=["OL","UL","MENU"],L2=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,AO(a)&&a.data.trim().length>0)r.textNodes.push(new TCe(t,a,r.styles));else if(rm(a))if(mO(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return L2(t,o,r,n)});else{var i=cO(t,a);i.styles.isVisible()&&(MCe(a,i,n)?i.flags|=4:PCe(i.styles)&&(i.flags|=2),UCe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?L2(t,a.shadowRoot,i,n):!jy(a)&&!dO(a)&&!Oy(a)&&L2(t,a,i,n))}},cO=function(t,e){return V5(e)?new rO(t,e):fO(e)?new nO(t,e):dO(e)?new aO(t,e):jCe(e)?new sO(t,e):OCe(e)?new Q5(t,e):QCe(e)?new ST(t,e):Oy(e)?new iO(t,e):jy(e)?new oO(t,e):hO(e)?new lO(t,e):new Ou(t,e)},uO=function(t,e){var r=cO(t,e);return r.flags|=4,L2(t,e,r,r),r},MCe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||TT(t)&&r.styles.isTransparent()},PCe=function(t){return t.isPositioned()||t.isFloating()},AO=function(t){return t.nodeType===Node.TEXT_NODE},rm=function(t){return t.nodeType===Node.ELEMENT_NODE},H5=function(t){return rm(t)&&typeof t.style<"u"&&!U2(t)},U2=function(t){return typeof t.className=="object"},jCe=function(t){return t.tagName==="LI"},OCe=function(t){return t.tagName==="OL"},QCe=function(t){return t.tagName==="INPUT"},HCe=function(t){return t.tagName==="HTML"},dO=function(t){return t.tagName==="svg"},TT=function(t){return t.tagName==="BODY"},fO=function(t){return t.tagName==="CANVAS"},GD=function(t){return t.tagName==="VIDEO"},V5=function(t){return t.tagName==="IMG"},hO=function(t){return t.tagName==="IFRAME"},qD=function(t){return t.tagName==="STYLE"},VCe=function(t){return t.tagName==="SCRIPT"},jy=function(t){return t.tagName==="TEXTAREA"},Oy=function(t){return t.tagName==="SELECT"},mO=function(t){return t.tagName==="SLOT"},KD=function(t){return t.tagName.indexOf("-")>0},zCe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(s=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var l=r.counters[o.counter];i.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),$D={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},WD={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},GCe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},qCe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},R0=function(t,e,r,n,a,s){return t<e||t>r?_x(t,a,s.length>0):n.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=n.values[l];return i},"")+s},pO=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},ts=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(pO(Math.abs(t),s,n,function(i){return ns(Math.floor(i%s)+e)})+a)},Zf=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return pO(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},X0=1,Dd=2,Rd=4,Cg=8,vA=function(t,e,r,n,a,s){if(t<-9999||t>9999)return _x(t,4,a.length>0);var i=Math.abs(t),o=a;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&Ls(s,X0)&&o!==""?o=e[u]+o:u>1||u===1&&l===0||u===1&&l===1&&Ls(s,Dd)||u===1&&l===1&&Ls(s,Rd)&&t>100||u===1&&l>1&&Ls(s,Cg)?o=e[u]+(l>0?r[l-1]:"")+o:u===1&&l>0&&(o=r[l-1]+o),i=Math.floor(i/10)}return(t<0?n:"")+o},XD="",YD="",JD="",qE="",_x=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=ts(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Zf(t,"",a);case 6:return R0(t,1,3999,$D,3,n).toLowerCase();case 7:return R0(t,1,3999,$D,3,n);case 8:return ts(t,945,969,!1,n);case 9:return ts(t,97,122,!1,n);case 10:return ts(t,65,90,!1,n);case 11:return ts(t,1632,1641,!0,n);case 12:case 49:return R0(t,1,9999,WD,3,n);case 35:return R0(t,1,9999,WD,3,n).toLowerCase();case 13:return ts(t,2534,2543,!0,n);case 14:case 30:return ts(t,6112,6121,!0,n);case 15:return Zf(t,"",a);case 16:return Zf(t,"",a);case 17:case 48:return vA(t,"",XD,"",a,Dd|Rd|Cg);case 47:return vA(t,"",YD,"",a,X0|Dd|Rd|Cg);case 42:return vA(t,"",XD,"",a,Dd|Rd|Cg);case 41:return vA(t,"",YD,"",a,X0|Dd|Rd|Cg);case 26:return vA(t,"","",JD,a,0);case 25:return vA(t,"","",JD,a,X0|Dd|Rd);case 31:return vA(t,"","",qE,s,X0|Dd|Rd);case 33:return vA(t,"","",qE,s,0);case 32:return vA(t,"","",qE,s,X0|Dd|Rd);case 18:return ts(t,2406,2415,!0,n);case 20:return R0(t,1,19999,qCe,3,n);case 21:return ts(t,2790,2799,!0,n);case 22:return ts(t,2662,2671,!0,n);case 22:return R0(t,1,10999,GCe,3,n);case 23:return Zf(t,"");case 24:return Zf(t,"");case 27:return ts(t,3302,3311,!0,n);case 28:return Zf(t,"",a);case 29:return Zf(t,"",a);case 34:return ts(t,3792,3801,!0,n);case 37:return ts(t,6160,6169,!0,n);case 38:return ts(t,4160,4169,!0,n);case 39:return ts(t,2918,2927,!0,n);case 40:return ts(t,1776,1785,!0,n);case 43:return ts(t,3046,3055,!0,n);case 44:return ts(t,3174,3183,!0,n);case 45:return ts(t,3664,3673,!0,n);case 46:return ts(t,3872,3881,!0,n);case 3:default:return ts(t,48,57,!0,n)}},gO="data-html2canvas-ignore",ZD=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new zCe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=KCe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=a.contentWindow,l=o.document,u=XCe(a).then(function(){return eo(n,void 0,void 0,function(){var d,h;return Ri(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(eEe),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,WCe(l)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return a})]:[2,a]}})})});return l.open(),l.write(JCe(document.doctype)+"<html></html>"),ZCe(this.referenceElement.ownerDocument,s,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},t.prototype.createElementClone=function(e){if(j5(e,2))debugger;if(fO(e))return this.createCanvasClone(e);if(GD(e))return this.createVideoClone(e);if(qD(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return V5(r)&&(V5(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),KD(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return KE(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!rm(r)||!VCe(r)&&!r.hasAttribute(gO)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!rm(r)||!qD(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(rm(s)&&mO(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(AO(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&rm(e)&&(H5(e)||U2(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&H5(a)&&(this.clonedReferenceElement=a),TT(a)&&nEe(a);var l=this.counters.parse(new kD(this.context,s)),u=this.resolvePseudoContent(e,a,i,Wg.BEFORE);KD(e)&&(r=!0),GD(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,o,Wg.AFTER);return d&&a.appendChild(d),this.counters.pop(l),(s&&(this.options.copyStyles||U2(e))&&!hO(e)||r)&&KE(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(jy(e)||Oy(e))&&(jy(a)||Oy(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new kD(this.context,n));var l=new jbe(this.context,n),u=o.createElement("html2canvaspseudoelement");KE(n,u),l.content.forEach(function(h){if(h.type===0)u.appendChild(o.createTextNode(h.value));else if(h.type===22){var m=o.createElement("img");m.src=h.value,m.style.opacity="1",u.appendChild(m)}else if(h.type===18){if(h.name==="attr"){var g=h.values.filter(ta);g.length&&u.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(h.name==="counter"){var b=h.values.filter(Pm),y=b[0],E=b[1];if(y&&ta(y)){var B=s.counters.getCounterValue(y.value),k=E&&ta(E)?P5.parse(s.context,E.value):3;u.appendChild(o.createTextNode(_x(B,k,!1)))}}else if(h.name==="counters"){var L=h.values.filter(Pm),y=L[0],M=L[1],E=L[2];if(y&&ta(y)){var P=s.counters.getCounterValues(y.value),R=E&&ta(E)?P5.parse(s.context,E.value):3,C=M&&M.type===0?M.value:"",S=P.map(function(D){return _x(D,R,!1)}).join(C);u.appendChild(o.createTextNode(S))}}}else if(h.type===20)switch(h.value){case"open-quote":u.appendChild(o.createTextNode(ND(l.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(ND(l.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(h.value))}}),u.className=z5+" "+G5;var d=a===Wg.BEFORE?" "+z5:" "+G5;return U2(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Wg;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Wg||(Wg={}));var KCe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(gO,"true"),t.body.appendChild(r),r},$Ce=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},WCe=function(t){return Promise.all([].slice.call(t.images,0).map($Ce))},XCe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},YCe=["all","d","content"],KE=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);YCe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},JCe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},ZCe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},eEe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},tEe=":before",rEe=":after",z5="___html2canvas___pseudoelement_before",G5="___html2canvas___pseudoelement_after",eR=`{
    content: "" !important;
    display: none !important;
}`,nEe=function(t){aEe(t,"."+z5+tEe+eR+`
         .`+G5+rEe+eR)},aEe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},xO=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),sEe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(WE(e)||cEe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return eo(this,void 0,void 0,function(){var r,n,a,s,i=this;return Ri(this,function(o){switch(o.label){case 0:return r=xO.isSameOrigin(e),n=!$E(e)&&this._options.useCORS===!0&&li.SUPPORT_CORS_IMAGES&&!r,a=!$E(e)&&!r&&!WE(e)&&typeof this._options.proxy=="string"&&li.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!$E(e)&&!WE(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(uEe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,i){var o=li.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")s(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(m){return i(m)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+a+" with status code "+l.status)},l.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}l.send()})},t}(),iEe=/^data:image\/svg\+xml/i,oEe=/^data:image\/.*;base64,/i,lEe=/^data:image\/.*/i,cEe=function(t){return li.SUPPORT_SVG_DRAWING||!AEe(t)},$E=function(t){return lEe.test(t)},uEe=function(t){return oEe.test(t)},WE=function(t){return t.substr(0,4)==="blob"},AEe=function(t){return t.substr(-3).toLowerCase()==="svg"||iEe.test(t)},$t=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),L0=function(t,e,r){return new $t(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},r2=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=L0(this.start,this.startControl,e),a=L0(this.startControl,this.endControl,e),s=L0(this.endControl,this.end,e),i=L0(n,a,e),o=L0(a,s,e),l=L0(i,o,e);return r?new t(this.start,n,i,l):new t(l,o,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Pl=function(t){return t.type===1},dEe=function(){function t(e){var r=e.styles,n=e.bounds,a=wg(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=wg(r.borderTopRightRadius,n.width,n.height),l=o[0],u=o[1],d=wg(r.borderBottomRightRadius,n.width,n.height),h=d[0],m=d[1],g=wg(r.borderBottomLeftRadius,n.width,n.height),b=g[0],y=g[1],E=[];E.push((s+l)/n.width),E.push((b+h)/n.width),E.push((i+y)/n.height),E.push((u+m)/n.height);var B=Math.max.apply(Math,E);B>1&&(s/=B,i/=B,l/=B,u/=B,h/=B,m/=B,b/=B,y/=B);var k=n.width-l,L=n.height-m,M=n.width-h,P=n.height-y,R=r.borderTopWidth,C=r.borderRightWidth,S=r.borderBottomWidth,N=r.borderLeftWidth,Q=ca(r.paddingTop,e.bounds.width),D=ca(r.paddingRight,e.bounds.width),I=ca(r.paddingBottom,e.bounds.width),O=ca(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?wa(n.left+N/3,n.top+R/3,s-N/3,i-R/3,Mn.TOP_LEFT):new $t(n.left+N/3,n.top+R/3),this.topRightBorderDoubleOuterBox=s>0||i>0?wa(n.left+k,n.top+R/3,l-C/3,u-R/3,Mn.TOP_RIGHT):new $t(n.left+n.width-C/3,n.top+R/3),this.bottomRightBorderDoubleOuterBox=h>0||m>0?wa(n.left+M,n.top+L,h-C/3,m-S/3,Mn.BOTTOM_RIGHT):new $t(n.left+n.width-C/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=b>0||y>0?wa(n.left+N/3,n.top+P,b-N/3,y-S/3,Mn.BOTTOM_LEFT):new $t(n.left+N/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?wa(n.left+N*2/3,n.top+R*2/3,s-N*2/3,i-R*2/3,Mn.TOP_LEFT):new $t(n.left+N*2/3,n.top+R*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?wa(n.left+k,n.top+R*2/3,l-C*2/3,u-R*2/3,Mn.TOP_RIGHT):new $t(n.left+n.width-C*2/3,n.top+R*2/3),this.bottomRightBorderDoubleInnerBox=h>0||m>0?wa(n.left+M,n.top+L,h-C*2/3,m-S*2/3,Mn.BOTTOM_RIGHT):new $t(n.left+n.width-C*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||y>0?wa(n.left+N*2/3,n.top+P,b-N*2/3,y-S*2/3,Mn.BOTTOM_LEFT):new $t(n.left+N*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||i>0?wa(n.left+N/2,n.top+R/2,s-N/2,i-R/2,Mn.TOP_LEFT):new $t(n.left+N/2,n.top+R/2),this.topRightBorderStroke=s>0||i>0?wa(n.left+k,n.top+R/2,l-C/2,u-R/2,Mn.TOP_RIGHT):new $t(n.left+n.width-C/2,n.top+R/2),this.bottomRightBorderStroke=h>0||m>0?wa(n.left+M,n.top+L,h-C/2,m-S/2,Mn.BOTTOM_RIGHT):new $t(n.left+n.width-C/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=b>0||y>0?wa(n.left+N/2,n.top+P,b-N/2,y-S/2,Mn.BOTTOM_LEFT):new $t(n.left+N/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||i>0?wa(n.left,n.top,s,i,Mn.TOP_LEFT):new $t(n.left,n.top),this.topRightBorderBox=l>0||u>0?wa(n.left+k,n.top,l,u,Mn.TOP_RIGHT):new $t(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||m>0?wa(n.left+M,n.top+L,h,m,Mn.BOTTOM_RIGHT):new $t(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=b>0||y>0?wa(n.left,n.top+P,b,y,Mn.BOTTOM_LEFT):new $t(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?wa(n.left+N,n.top+R,Math.max(0,s-N),Math.max(0,i-R),Mn.TOP_LEFT):new $t(n.left+N,n.top+R),this.topRightPaddingBox=l>0||u>0?wa(n.left+Math.min(k,n.width-C),n.top+R,k>n.width+C?0:Math.max(0,l-C),Math.max(0,u-R),Mn.TOP_RIGHT):new $t(n.left+n.width-C,n.top+R),this.bottomRightPaddingBox=h>0||m>0?wa(n.left+Math.min(M,n.width-N),n.top+Math.min(L,n.height-S),Math.max(0,h-C),Math.max(0,m-S),Mn.BOTTOM_RIGHT):new $t(n.left+n.width-C,n.top+n.height-S),this.bottomLeftPaddingBox=b>0||y>0?wa(n.left+N,n.top+Math.min(P,n.height-S),Math.max(0,b-N),Math.max(0,y-S),Mn.BOTTOM_LEFT):new $t(n.left+N,n.top+n.height-S),this.topLeftContentBox=s>0||i>0?wa(n.left+N+O,n.top+R+Q,Math.max(0,s-(N+O)),Math.max(0,i-(R+Q)),Mn.TOP_LEFT):new $t(n.left+N+O,n.top+R+Q),this.topRightContentBox=l>0||u>0?wa(n.left+Math.min(k,n.width+N+O),n.top+R+Q,k>n.width+N+O?0:l-N+O,u-(R+Q),Mn.TOP_RIGHT):new $t(n.left+n.width-(C+D),n.top+R+Q),this.bottomRightContentBox=h>0||m>0?wa(n.left+Math.min(M,n.width-(N+O)),n.top+Math.min(L,n.height+R+Q),Math.max(0,h-(C+D)),m-(S+I),Mn.BOTTOM_RIGHT):new $t(n.left+n.width-(C+D),n.top+n.height-(S+I)),this.bottomLeftContentBox=b>0||y>0?wa(n.left+N+O,n.top+P,Math.max(0,b-(N+O)),y-(S+I),Mn.BOTTOM_LEFT):new $t(n.left+N+O,n.top+n.height-(S+I))}return t}(),Mn;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Mn||(Mn={}));var wa=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,l=t+r,u=e+n;switch(a){case Mn.TOP_LEFT:return new r2(new $t(t,u),new $t(t,u-o),new $t(l-i,e),new $t(l,e));case Mn.TOP_RIGHT:return new r2(new $t(t,e),new $t(t+i,e),new $t(l,u-o),new $t(l,u));case Mn.BOTTOM_RIGHT:return new r2(new $t(l,e),new $t(l,e+o),new $t(t+i,u),new $t(t,u));case Mn.BOTTOM_LEFT:default:return new r2(new $t(l,u),new $t(l-i,u),new $t(t,e+o),new $t(t,e))}},Qy=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},fEe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Hy=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},hEe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),n2=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),mEe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),pEe=function(t){return t.type===0},vO=function(t){return t.type===1},gEe=function(t){return t.type===2},tR=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},xEe=function(t,e,r,n,a){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},yO=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),wO=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new dEe(this.container),this.container.styles.opacity<1&&this.effects.push(new mEe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new hEe(n,a,s))}if(this.container.styles.overflowX!==0){var i=Qy(this.curves),o=Hy(this.curves);tR(i,o)?this.effects.push(new n2(i,6)):(this.effects.push(new n2(i,2)),this.effects.push(new n2(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(l){return!vO(l)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=Qy(n.curves),o=Hy(n.curves);tR(i,o)||a.unshift(new n2(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(l){return Ls(l.target,e)})},t}(),q5=function(t,e,r,n){t.container.elements.forEach(function(a){var s=Ls(a.flags,4),i=Ls(a.flags,2),o=new wO(a,t);Ls(a.styles.display,2048)&&n.push(o);var l=Ls(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:e,d=new yO(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var h=a.styles.zIndex.order;if(h<0){var m=0;u.negativeZIndex.some(function(b,y){return h>b.element.container.styles.zIndex.order?(m=y,!1):m>0}),u.negativeZIndex.splice(m,0,d)}else if(h>0){var g=0;u.positiveZIndex.some(function(b,y){return h>=b.element.container.styles.zIndex.order?(g=y+1,!1):g>0}),u.positiveZIndex.splice(g,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);q5(o,d,s?d:r,l)}else a.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),q5(o,e,r,l);Ls(a.flags,8)&&bO(a,l)})},bO=function(t,e){for(var r=t instanceof Q5?t.start:1,n=t instanceof Q5?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof sO&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=_x(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},vEe=function(t){var e=new wO(t,null),r=new yO(e),n=[];return q5(e,r,r,n),bO(e.container,n),r},rR=function(t,e){switch(e){case 0:return Vl(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Vl(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Vl(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Vl(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},yEe=function(t,e){switch(e){case 0:return Vl(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Vl(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Vl(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Vl(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},wEe=function(t,e){switch(e){case 0:return Vl(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Vl(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Vl(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Vl(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},bEe=function(t,e){switch(e){case 0:return a2(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return a2(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return a2(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return a2(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},a2=function(t,e){var r=[];return Pl(t)?r.push(t.subdivide(.5,!1)):r.push(t),Pl(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Vl=function(t,e,r,n){var a=[];return Pl(t)?a.push(t.subdivide(.5,!1)):a.push(t),Pl(r)?a.push(r.subdivide(.5,!0)):a.push(r),Pl(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Pl(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},CO=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Vy=function(t){var e=t.styles,r=t.bounds,n=ca(e.paddingLeft,r.width),a=ca(e.paddingRight,r.width),s=ca(e.paddingTop,r.width),i=ca(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+i))},CEe=function(t,e){return t===0?e.bounds:t===2?Vy(e):CO(e)},EEe=function(t,e){return t===0?e.bounds:t===2?Vy(e):CO(e)},XE=function(t,e,r){var n=CEe(Y0(t.styles.backgroundOrigin,e),t),a=EEe(Y0(t.styles.backgroundClip,e),t),s=_Ee(Y0(t.styles.backgroundSize,e),r,n),i=s[0],o=s[1],l=wg(Y0(t.styles.backgroundPosition,e),n.width-i,n.height-o),u=SEe(Y0(t.styles.backgroundRepeat,e),l,s,n,a),d=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[u,d,h,i,o]},U0=function(t){return ta(t)&&t.value===ym.AUTO},s2=function(t){return typeof t=="number"},_Ee=function(t,e,r){var n=e[0],a=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(Es(i)&&o&&Es(o))return[ca(i,r.width),ca(o,r.height)];var l=s2(s);if(ta(i)&&(i.value===ym.CONTAIN||i.value===ym.COVER)){if(s2(s)){var u=r.width/r.height;return u<s!=(i.value===ym.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=s2(n),h=s2(a),m=d||h;if(U0(i)&&(!o||U0(o))){if(d&&h)return[n,a];if(!l&&!m)return[r.width,r.height];if(m&&l){var g=d?n:a*s,b=h?a:n/s;return[g,b]}var y=d?n:r.width,E=h?a:r.height;return[y,E]}if(l){var B=0,k=0;return Es(i)?B=ca(i,r.width):Es(o)&&(k=ca(o,r.height)),U0(i)?B=k*s:(!o||U0(o))&&(k=B/s),[B,k]}var L=null,M=null;if(Es(i)?L=ca(i,r.width):o&&Es(o)&&(M=ca(o,r.height)),L!==null&&(!o||U0(o))&&(M=d&&h?L/n*a:r.height),M!==null&&U0(i)&&(L=d&&h?M/a*n:r.width),L!==null&&M!==null)return[L,M];throw new Error("Unable to calculate background-size for element")},Y0=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},SEe=function(t,e,r,n,a){var s=e[0],i=e[1],o=r[0],l=r[1];switch(t){case 2:return[new $t(Math.round(n.left),Math.round(n.top+i)),new $t(Math.round(n.left+n.width),Math.round(n.top+i)),new $t(Math.round(n.left+n.width),Math.round(l+n.top+i)),new $t(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new $t(Math.round(n.left+s),Math.round(n.top)),new $t(Math.round(n.left+s+o),Math.round(n.top)),new $t(Math.round(n.left+s+o),Math.round(n.height+n.top)),new $t(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new $t(Math.round(n.left+s),Math.round(n.top+i)),new $t(Math.round(n.left+s+o),Math.round(n.top+i)),new $t(Math.round(n.left+s+o),Math.round(n.top+i+l)),new $t(Math.round(n.left+s),Math.round(n.top+i+l))];default:return[new $t(Math.round(a.left),Math.round(a.top)),new $t(Math.round(a.left+a.width),Math.round(a.top)),new $t(Math.round(a.left+a.width),Math.round(a.height+a.top)),new $t(Math.round(a.left),Math.round(a.height+a.top))]}},TEe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",nR="Hidden Text",BEe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=TEe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(nR)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(nR)),n.style.lineHeight="normal",a.style.verticalAlign="super";var l=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),EO=function(){function t(e,r){this.context=e,this.options=r}return t}(),NEe=1e4,kEe=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new BEe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),gEe(r)&&(this.ctx.globalAlpha=r.opacity),pEe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),vO(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return eo(this,void 0,void 0,function(){var n;return Ri(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return eo(this,void 0,void 0,function(){return Ri(this,function(n){switch(n.label){case 0:if(Ls(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=_T(r.text);i.reduce(function(o,l){return s.ctx.fillText(l,o,r.bounds.top+a),o+s.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=LEe(r.fontFamily).join(", "),s=c1(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return eo(this,void 0,void 0,function(){var a,s,i,o,l,u,d,h,m=this;return Ri(this,function(g){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,h=n.paintOrder,r.textBounds.forEach(function(b){h.forEach(function(y){switch(y){case 0:m.ctx.fillStyle=Ks(n.color),m.renderTextWithLetterSpacing(b,n.letterSpacing,u);var E=n.textShadow;E.length&&b.text.trim().length&&(E.slice(0).reverse().forEach(function(B){m.ctx.shadowColor=Ks(B.color),m.ctx.shadowOffsetX=B.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=B.offsetY.number*m.options.scale,m.ctx.shadowBlur=B.blur.number,m.renderTextWithLetterSpacing(b,n.letterSpacing,u)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),n.textDecorationLine.length&&(m.ctx.fillStyle=Ks(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(B){switch(B){case 1:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+u),b.bounds.width,1);break;case 2:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:m.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+d),b.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&b.text.trim().length&&(m.ctx.strokeStyle=Ks(n.webkitTextStrokeColor),m.ctx.lineWidth=n.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+u)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=Vy(r),i=Hy(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return eo(this,void 0,void 0,function(){var n,a,s,i,o,l,k,k,u,d,h,m,M,g,b,P,y,E,B,k,L,M,P;return Ri(this,function(R){switch(R.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,R.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,s)]):[3,4];case 2:R.sent(),R.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof rO))return[3,8];R.label=5;case 5:return R.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return k=R.sent(),this.renderReplacedElement(n,a,k),[3,8];case 7:return R.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof nO&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof aO))return[3,12];R.label=9;case 9:return R.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return k=R.sent(),this.renderReplacedElement(n,a,k),[3,12];case 11:return R.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof lO&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=R.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),R.label=14;case 14:if(n instanceof ST&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===My?n.checked&&(this.ctx.save(),this.path([new $t(n.bounds.left+h*.39363,n.bounds.top+h*.79),new $t(n.bounds.left+h*.16,n.bounds.top+h*.5549),new $t(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new $t(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new $t(n.bounds.left+h*.72983,n.bounds.top+h*.23),new $t(n.bounds.left+h*.84,n.bounds.top+h*.34085),new $t(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=Ks(zD),this.ctx.fill(),this.ctx.restore()):n.type===Py&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ks(zD),this.ctx.fill(),this.ctx.restore())),IEe(n)&&n.value.length){switch(m=this.createFontStyle(s),M=m[0],g=m[1],b=this.fontMetrics.getMetrics(M,g).baseline,this.ctx.font=M,this.ctx.fillStyle=Ks(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=DEe(n.styles.textAlign),P=Vy(n),y=0,n.styles.textAlign){case 1:y+=P.width/2;break;case 2:y+=P.width;break}E=P.add(y,0,0,-P.height/2+1),this.ctx.save(),this.path([new $t(P.left,P.top),new $t(P.left+P.width,P.top),new $t(P.left+P.width,P.top+P.height),new $t(P.left,P.top+P.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new $g(n.value,E),s.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ls(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(B=n.styles.listStyleImage,B.type!==0)return[3,18];k=void 0,L=B.url,R.label=15;case 15:return R.trys.push([15,17,,18]),[4,this.context.cache.match(L)];case 16:return k=R.sent(),this.ctx.drawImage(k,n.bounds.left-(k.width+10),n.bounds.top),[3,18];case 17:return R.sent(),this.context.logger.error("Error loading list-style-image "+L),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(M=this.createFontStyle(s)[0],this.ctx.font=M,this.ctx.fillStyle=Ks(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",P=new PA(n.bounds.left,n.bounds.top+ca(n.styles.paddingTop,n.bounds.width),n.bounds.width,TD(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new $g(r.listValue,P),s.letterSpacing,TD(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),R.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return eo(this,void 0,void 0,function(){var n,a,B,s,i,B,o,l,B,u,d,B,h,m,B,g,b,B,y,E,B;return Ri(this,function(k){switch(k.label){case 0:if(Ls(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:k.sent(),n=0,a=r.negativeZIndex,k.label=2;case 2:return n<a.length?(B=a[n],[4,this.renderStack(B)]):[3,5];case 3:k.sent(),k.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:k.sent(),s=0,i=r.nonInlineLevel,k.label=7;case 7:return s<i.length?(B=i[s],[4,this.renderNode(B)]):[3,10];case 8:k.sent(),k.label=9;case 9:return s++,[3,7];case 10:o=0,l=r.nonPositionedFloats,k.label=11;case 11:return o<l.length?(B=l[o],[4,this.renderStack(B)]):[3,14];case 12:k.sent(),k.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,k.label=15;case 15:return u<d.length?(B=d[u],[4,this.renderStack(B)]):[3,18];case 16:k.sent(),k.label=17;case 17:return u++,[3,15];case 18:h=0,m=r.inlineLevel,k.label=19;case 19:return h<m.length?(B=m[h],[4,this.renderNode(B)]):[3,22];case 20:k.sent(),k.label=21;case 21:return h++,[3,19];case 22:g=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,k.label=23;case 23:return g<b.length?(B=b[g],[4,this.renderStack(B)]):[3,26];case 24:k.sent(),k.label=25;case 25:return g++,[3,23];case 26:y=0,E=r.positiveZIndex,k.label=27;case 27:return y<E.length?(B=E[y],[4,this.renderStack(B)]):[3,30];case 28:k.sent(),k.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Pl(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Pl(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},e.prototype.renderBackgroundImage=function(r){return eo(this,void 0,void 0,function(){var n,a,s,i,o,l;return Ri(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var h,m,g,Q,Y,ae,O,z,S,b,Q,Y,ae,O,z,y,E,B,k,L,M,P,R,C,S,N,Q,D,I,O,z,re,Y,ae,K,G,W,ie,j,X,Z,te;return Ri(this,function(ce){switch(ce.label){case 0:if(d.type!==0)return[3,5];h=void 0,m=d.url,ce.label=1;case 1:return ce.trys.push([1,3,,4]),[4,s.context.cache.match(m)];case 2:return h=ce.sent(),[3,4];case 3:return ce.sent(),s.context.logger.error("Error loading background-image "+m),[3,4];case 4:return h&&(g=XE(r,n,[h.width,h.height,h.width/h.height]),Q=g[0],Y=g[1],ae=g[2],O=g[3],z=g[4],S=s.ctx.createPattern(s.resizeImage(h,O,z),"repeat"),s.renderRepeat(Q,S,Y,ae)),[3,6];case 5:pwe(d)?(b=XE(r,n,[null,null,null]),Q=b[0],Y=b[1],ae=b[2],O=b[3],z=b[4],y=Awe(d.angle,O,z),E=y[0],B=y[1],k=y[2],L=y[3],M=y[4],P=document.createElement("canvas"),P.width=O,P.height=z,R=P.getContext("2d"),C=R.createLinearGradient(B,L,k,M),_D(d.stops,E).forEach(function(de){return C.addColorStop(de.stop,Ks(de.color))}),R.fillStyle=C,R.fillRect(0,0,O,z),O>0&&z>0&&(S=s.ctx.createPattern(P,"repeat"),s.renderRepeat(Q,S,Y,ae))):gwe(d)&&(N=XE(r,n,[null,null,null]),Q=N[0],D=N[1],I=N[2],O=N[3],z=N[4],re=d.position.length===0?[bT]:d.position,Y=ca(re[0],O),ae=ca(re[re.length-1],z),K=dwe(d,Y,ae,O,z),G=K[0],W=K[1],G>0&&W>0&&(ie=s.ctx.createRadialGradient(D+Y,I+ae,0,D+Y,I+ae,G),_D(d.stops,G*2).forEach(function(de){return ie.addColorStop(de.stop,Ks(de.color))}),s.path(Q),s.ctx.fillStyle=ie,G!==W?(j=r.bounds.left+.5*r.bounds.width,X=r.bounds.top+.5*r.bounds.height,Z=W/G,te=1/Z,s.ctx.save(),s.ctx.translate(j,X),s.ctx.transform(1,0,0,Z,0,0),s.ctx.translate(-j,-X),s.ctx.fillRect(D,te*(I-X)+X,O,z*te),s.ctx.restore()):s.ctx.fill())),ce.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,a(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return eo(this,void 0,void 0,function(){return Ri(this,function(s){return this.path(rR(a,n)),this.ctx.fillStyle=Ks(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return eo(this,void 0,void 0,function(){var i,o;return Ri(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return l.sent(),[2];case 2:return i=yEe(s,a),this.path(i),this.ctx.fillStyle=Ks(r),this.ctx.fill(),o=wEe(s,a),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return eo(this,void 0,void 0,function(){var n,a,s,i,o,l,u,d,h=this;return Ri(this,function(m){switch(m.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!nf(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=FEe(Y0(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),nf(n.backgroundColor)||(this.ctx.fillStyle=Ks(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){h.ctx.save();var b=Qy(r.curves),y=g.inset?0:NEe,E=xEe(b,-y+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(h.path(b),h.ctx.clip(),h.mask(E)):(h.mask(b),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=g.offsetX.number+y,h.ctx.shadowOffsetY=g.offsetY.number,h.ctx.shadowColor=Ks(g.color),h.ctx.shadowBlur=g.blur.number,h.ctx.fillStyle=g.inset?Ks(g.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),m.label=2;case 2:o=0,l=0,u=s,m.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!nf(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return eo(this,void 0,void 0,function(){var o,l,u,d,h,m,g,b,y,E,B,k,L,M,P,R,P,R;return Ri(this,function(C){return this.ctx.save(),o=bEe(s,a),l=rR(s,a),i===2&&(this.path(l),this.ctx.clip()),Pl(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),Pl(l[1])?(h=l[1].end.x,m=l[1].end.y):(h=l[1].x,m=l[1].y),a===0||a===2?g=Math.abs(u-h):g=Math.abs(d-m),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),b=n<3?n*3:n*2,y=n<3?n*2:n,i===3&&(b=n,y=n),E=!0,g<=b*2?E=!1:g<=b*2+y?(B=g/(2*b+y),b*=B,y*=B):(k=Math.floor((g+y)/(b+y)),L=(g-k*b)/(k-1),M=(g-(k+1)*b)/k,y=M<=0||Math.abs(y-L)<Math.abs(y-M)?L:M),E&&(i===3?this.ctx.setLineDash([0,b+y]):this.ctx.setLineDash([b,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ks(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Pl(l[0])&&(P=l[3],R=l[0],this.ctx.beginPath(),this.formatPath([new $t(P.end.x,P.end.y),new $t(R.start.x,R.start.y)]),this.ctx.stroke()),Pl(l[1])&&(P=l[1],R=l[2],this.ctx.beginPath(),this.formatPath([new $t(P.end.x,P.end.y),new $t(R.start.x,R.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return eo(this,void 0,void 0,function(){var n;return Ri(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ks(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=vEe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(EO),IEe=function(t){return t instanceof oO||t instanceof iO?!0:t instanceof ST&&t.type!==Py&&t.type!==My},FEe=function(t,e){switch(t){case 0:return Qy(e);case 2:return fEe(e);case 1:default:return Hy(e)}},DEe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},REe=["-apple-system","system-ui"],LEe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return REe.indexOf(e)===-1}):t},UEe=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return eo(this,void 0,void 0,function(){var n,a;return Ri(this,function(s){switch(s.label){case 0:return n=O5(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,MEe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ks(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(EO),MEe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},PEe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Mv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Mv([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Mv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Mv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),jEe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new PEe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new sEe(this,e)}return t.instanceCount=1,t}(),_O=function(t,e){return e===void 0&&(e={}),OEe(t,e)};typeof window<"u"&&xO.setContext(window);var OEe=function(t,e){return eo(void 0,void 0,void 0,function(){var r,n,a,s,i,o,l,u,d,h,m,g,b,y,E,B,k,L,M,P,C,R,C,S,N,Q,D,I,O,z,re,Y,ae,K,G,W,ie,j,X,Z;return Ri(this,function(te){switch(te.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=e.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(N=e.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},s=_5({logging:(D=e.logging)!==null&&D!==void 0?D:!0,cache:e.cache},a),i={windowWidth:(I=e.windowWidth)!==null&&I!==void 0?I:n.innerWidth,windowHeight:(O=e.windowHeight)!==null&&O!==void 0?O:n.innerHeight,scrollX:(z=e.scrollX)!==null&&z!==void 0?z:n.pageXOffset,scrollY:(re=e.scrollY)!==null&&re!==void 0?re:n.pageYOffset},o=new PA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new jEe(s,o),u=(Y=e.foreignObjectRendering)!==null&&Y!==void 0?Y:!1,d={allowTaint:(ae=e.allowTaint)!==null&&ae!==void 0?ae:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new ZD(l,t,d),m=h.clonedReferenceElement,m?[4,h.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=te.sent(),b=TT(m)||HCe(m)?x2e(m.ownerDocument):Zw(l,m),y=b.width,E=b.height,B=b.left,k=b.top,L=QEe(l,m,e.backgroundColor),M={canvas:e.canvas,backgroundColor:L,scale:(G=(K=e.scale)!==null&&K!==void 0?K:n.devicePixelRatio)!==null&&G!==void 0?G:1,x:((W=e.x)!==null&&W!==void 0?W:0)+B,y:((ie=e.y)!==null&&ie!==void 0?ie:0)+k,width:(j=e.width)!==null&&j!==void 0?j:Math.ceil(y),height:(X=e.height)!==null&&X!==void 0?X:Math.ceil(E)},u?(l.logger.debug("Document cloned, using foreign object rendering"),C=new UEe(l,M),[4,C.render(m)]):[3,3];case 2:return P=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+B+","+k+" with size "+y+"x"+E+" using computed rendering"),l.logger.debug("Starting DOM parsing"),R=uO(l,m),L===R.styles.backgroundColor&&(R.styles.backgroundColor=IA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+M.x+","+M.y+" with size "+M.width+"x"+M.height),C=new kEe(l,M),[4,C.render(R)];case 4:P=te.sent(),te.label=5;case 5:return(!((Z=e.removeContainer)!==null&&Z!==void 0)||Z)&&(ZD.destroy(g)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,P]}})})},QEe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?qg(t,getComputedStyle(n.documentElement).backgroundColor):IA.TRANSPARENT,s=n.body?qg(t,getComputedStyle(n.body).backgroundColor):IA.TRANSPARENT,i=typeof r=="string"?qg(t,r):r===null?IA.TRANSPARENT:4294967295;return e===n.documentElement?nf(a)?nf(s)?i:s:a:i};const HEe=Object.freeze(Object.defineProperty({__proto__:null,default:_O},Symbol.toStringTag,{value:"Module"})),cb="proyectos_interdisciplinarios",SO="entregas_interdisciplinarias",VEe="usuarios",BT=t=>{const e=t.data();return{id:t.id,...e}},zEe=t=>{const e=er(Ft(Tt,cb),gn("nombreProyecto","asc"));return Tr(e,n=>{const a=n.docs.map(s=>BT(s));t(a)},n=>{console.error("Error al suscribirse a las planificaciones:",n),t([])})},GEe=async t=>{try{return(await Ca(Ft(Tt,cb),t)).id}catch(e){throw console.error("Error al crear la planificacin:",e),new Error("No se pudo crear la planificacin.")}},aR=async(t,e)=>{try{const{id:r,...n}=e,a=yr(Tt,cb,t);await $i(a,n)}catch(r){throw console.error("Error al actualizar la planificacin:",r),new Error("No se pudo actualizar la planificacin.")}},qEe=async t=>{try{const e=yr(Tt,cb,t);await mi(e)}catch(e){throw console.error("Error al eliminar la planificacin:",e),new Error("No se pudo eliminar la planificacin.")}},KEe=(t,e)=>{const r=er(Ft(Tt,SO),Fn("planificacionId","==",t));return Tr(r,a=>{const s=a.docs.map(i=>BT(i));e(s)},a=>{console.error("Error al suscribirse a las entregas:",a),e([])})},$Ee=async(t,e)=>{try{const r=yr(Tt,SO,t);await $i(r,{feedbackProfesor:e,fechaFeedback:cr.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentacin:",r),new Error("No se pudo guardar la retroalimentacin.")}},WEe=t=>{const e=er(Ft(Tt,VEe));return Tr(e,n=>{const a=n.docs.map(s=>BT(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},XEe=({planificaciones:t,onActivityUpdate:e})=>{const[r,n]=ee.useState(null),a=ee.useMemo(()=>{const l=[];return t.forEach(u=>{(u.actividades||[]).forEach(d=>l.push({...d,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[t]),s=ee.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),h=new Date(`${l.fechaFin}T00:00:00`);return h<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&h>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(g=>g[0]).join("").toUpperCase(),d=g=>{let b=0;for(let y=0;y<g.length;y++)b=g.charCodeAt(y)+((b<<5)-b);return b},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],m=Math.abs(d(l))%h.length;return c.jsx("div",{className:`w-9 h-9 rounded-full ${h[m]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[h,m]=ee.useState(l.activity),g=y=>{m({...h,[y.target.name]:y.target.value})},b=()=>{d(l.planId,h),u()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),c.jsx("input",{name:"nombre",value:h.nombre,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),c.jsx("input",{name:"responsables",value:h.responsables,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),c.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),c.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:b,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return a.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificacin primero."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(l=>{const u=s(l),d=l.type==="activity";return c.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&n({planId:l.planId,activity:l}),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),r&&c.jsx(o,{data:r,onClose:()=>n(null),onSave:e})]})},YEe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),JEe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),ZEe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),e_e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),t_e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r_e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),n_e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),a_e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),sR=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Id=({icon:t,label:e,children:r,aiButton:n})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,c.jsx("span",{children:e})]}),n]}),r]}),s_e=({initialPlan:t,onSave:e,onCancel:r})=>{const[n,a]=ee.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[s,i]=ee.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=ee.useState({nombre:"",fecha:""}),[u,d]=ee.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[h,m]=ee.useState(!1),[g,b]=ee.useState(!1);ee.useEffect(()=>{a(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const y=async P=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripcin del proyecto para usar la IA.");return}P==="objetivos"?m(!0):b(!0);let R="";P==="objetivos"?R=`Basado en la siguiente descripcin de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista.
            Descripcin del Proyecto: "${n.descripcionProyecto}"`:R=`Basado en la siguiente descripcin y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista.
            Descripcin del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"An no definidos, genralos a partir de la descripcin."}"`;try{const I=(await(await new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}).generateContent(R)).response).text();a(O=>({...O,[P]:I.replace(/(\*\*|\*)/g,"")}))}catch(C){console.error(`Error al generar ${P}`,C),alert(`Hubo un error al generar los ${P}. Intntelo de nuevo.`)}finally{P==="objetivos"?m(!1):b(!1)}},E=P=>{a(R=>({...R,[P.target.name]:P.target.value}))},B=(P,R)=>{a(C=>{const S=C[P],N=S.includes(R)?S.filter(Q=>Q!==R):[...S,R];return{...C,[P]:N}})},k=()=>{if(!s.nombre||!s.fechaInicio||!s.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}a(P=>({...P,actividades:[...P.actividades||[],{...s,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},L=()=>{!o.nombre||!o.fecha||(a(P=>({...P,fechasClave:[...P.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},M=()=>{var R;if(!u.instrucciones||!u.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const P={id:crypto.randomUUID(),numero:(((R=n.tareas)==null?void 0:R.length)||0)+1,...u};a(C=>({...C,tareas:[...C.tareas||[],P]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return c.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsx("div",{className:"text-center mb-12",children:c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:t?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Id,{icon:c.jsx(YEe,{}),label:"Nombre del Proyecto",children:c.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:E,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Id,{icon:c.jsx(JEe,{}),label:"Profesores",children:c.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:E,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Id,{icon:c.jsx(ZEe,{}),label:"Cursos",children:c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:ls.map(P=>c.jsx("button",{type:"button",onClick:()=>B("cursos",P),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(P)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:P},P))})}),c.jsx(Id,{icon:c.jsx(e_e,{}),label:"Asignaturas",children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:sl.map(P=>c.jsx("button",{type:"button",onClick:()=>B("asignaturas",P),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(P)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:P},P))})}),c.jsx(Id,{icon:c.jsx(t_e,{}),label:"Descripcin del Proyecto",children:c.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:E,placeholder:"Detalle aqu la metodologa, el producto final esperado y el propsito del proyecto. Esta informacin es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Id,{icon:c.jsx(r_e,{}),label:"Objetivos",aiButton:c.jsx("button",{type:"button",onClick:()=>y("objetivos"),disabled:!n.descripcionProyecto.trim()||h,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(sR,{})}),children:h?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:E,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Id,{icon:c.jsx(n_e,{}),label:"Indicadores de xito",aiButton:c.jsx("button",{type:"button",onClick:()=>y("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||g,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(sR,{})}),children:g?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:E,placeholder:"Liste los indicadores de logro o evaluacin...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Id,{icon:c.jsx(a_e,{}),label:"Carta Gantt",children:c.jsxs("div",{className:"space-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[c.jsx("input",{value:s.nombre,onChange:P=>i({...s,nombre:P.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:s.fechaInicio,onChange:P=>i({...s,fechaInicio:P.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",value:s.fechaFin,onChange:P=>i({...s,fechaFin:P.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:k,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.actividades.map(P=>c.jsx("li",{children:P.nombre},P.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[c.jsx("input",{value:o.nombre,onChange:P=>l({...o,nombre:P.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),c.jsx("input",{type:"date",value:o.fecha,onChange:P=>l({...o,fecha:P.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:L,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.fechasClave.map(P=>c.jsxs("li",{children:[P.nombre," (",P.fecha,")"]},P.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[c.jsx("input",{value:u.instrucciones,onChange:P=>d({...u,instrucciones:P.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:u.fechaEntrega,onChange:P=>d({...u,fechaEntrega:P.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{type:"button",onClick:M,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(P=>c.jsxs("li",{children:[P.numero,". ",P.instrucciones]},P.id))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[c.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{onClick:()=>e(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},iR=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState(!0),[a,s]=ee.useState("list"),[i,o]=ee.useState(null),[l,u]=ee.useState(null),[d,h]=ee.useState(null);ee.useEffect(()=>{n(!0);const L=zEe(M=>{e(M),n(!1)});return()=>L()},[]);const m=ee.useCallback(async(L,M)=>{const P=t.find(R=>R.id===L);if(P){const R={...P,actividades:(P.actividades||[]).map(C=>C.id===M.id?M:C)};await aR(L,R)}},[t]),g=async L=>{try{"id"in L&&L.id?await aR(L.id,L):await GEe(L),s("list"),o(null)}catch(M){console.error("Error al guardar la planificacin:",M),alert("No se pudo guardar la planificacin.")}},b=L=>{o(L),s("form")},y=async L=>{if(window.confirm("Est seguro de eliminar esta planificacin?"))try{await qEe(L)}catch(M){console.error("Error al eliminar la planificacin:",M),alert("No se pudo eliminar la planificacin.")}},E=()=>{o(null),s("form")},B=async L=>{u(L.id);const M=new or("p","mm","a4"),P=15,R=M.internal.pageSize.getWidth(),C=M.internal.pageSize.getHeight(),S=R-P*2;let N=P;const Q=22,D=14,I=11,O=()=>{M.setFont("helvetica","normal"),M.setFontSize(9),M.setTextColor(150),M.text("Proyecto Interdisciplinario",P,12),M.text("Liceo Industrial de Recoleta",R-P,12,{align:"right"}),M.setDrawColor(220),M.line(P,15,R-P,15)},z=G=>{N+G>C-P&&(M.addPage(),O(),N=P+15)},re=(G,W)=>{if(!W||Array.isArray(W)&&W.length===0||typeof W=="string"&&!W.trim())return;const ie=10;M.setFontSize(I);const j=Array.isArray(W)?W.join(", "):String(W),X=M.splitTextToSize(j,S),Z=X.length*(I*.35*1.15);z(ie+Z+12),M.setFont("helvetica","bold"),M.setFontSize(D),M.setTextColor(40),M.text(G,P,N),N+=6,M.setDrawColor(200),M.line(P,N,P+30,N),N+=8,M.setFont("helvetica","normal"),M.setFontSize(I),M.setTextColor(80),M.text(X,P,N),N+=Z+12};O(),N=P+20,M.setFont("helvetica","bold"),M.setFontSize(Q),M.setTextColor(0);const Y=M.splitTextToSize(L.nombreProyecto,S);if(M.text(Y,P,N),N+=Y.length*(Q*.4)+10,al(M,{startY:N,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},L.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},L.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},L.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:I,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),N=M.lastAutoTable.finalY+15,re("Descripcin del Proyecto",L.descripcionProyecto),re("Objetivos de Aprendizaje",L.objetivos),re("Indicadores de Logro",L.indicadoresLogro),L.tareas&&L.tareas.length>0){const G=L.tareas.map(ie=>[ie.numero.toString(),ie.instrucciones,ie.fechaEntrega]),W=(G.length+1)*10+15;z(W+15),M.setFont("helvetica","bold"),M.setFontSize(D),M.setTextColor(40),M.text("Tareas para Estudiantes",P,N),N+=10,al(M,{startY:N,head:[["#","Instrucciones","Fecha de Entrega"]],body:G,theme:"striped",headStyles:{fillColor:[52,73,94]}}),N=M.lastAutoTable.finalY+15}const ae=document.getElementById("gantt-container-vertical");if(ae)try{const W=(await _O(ae,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");M.addPage(),O(),N=P+15,M.setFont("helvetica","bold"),M.setFontSize(D),M.setTextColor(40),M.text("Cronograma del Proyecto",P,N),N+=10;const ie=M.getImageProperties(W),j=S,X=ie.height*j/ie.width;M.addImage(W,"PNG",P,N,j,X)}catch(G){console.error("Error generating timeline image:",G)}const K=M.internal.pages.length-1;for(let G=1;G<=K;G++)M.setPage(G),M.setFont("helvetica","normal"),M.setFontSize(9),M.setTextColor(150),M.text(`Pgina ${G} de ${K}`,R-P,M.internal.pageSize.getHeight()-10,{align:"right"});M.save(`Proyecto_${L.nombreProyecto.replace(/\s/g,"_")}.pdf`),u(null)},k=({plan:L,onBack:M})=>{var O,z;const[P,R]=ee.useState([]),[C,S]=ee.useState([]),[N,Q]=ee.useState(((O=L.tareas)==null?void 0:O[0])||null);ee.useEffect(()=>{const re=WEe(R),Y=KEe(L.id,S);return()=>{re(),Y()}},[L.id]);const D=ee.useMemo(()=>P.filter(re=>re.profile===Vt.ESTUDIANTE&&L.cursos.includes(re.curso||"")).sort((re,Y)=>re.nombreCompleto.localeCompare(Y.nombreCompleto)),[P,L.cursos]),I=async(re,Y)=>{try{await $Ee(re,Y)}catch(ae){console.error("Error saving feedback:",ae),alert("No se pudo guardar la retroalimentacin.")}};return N?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",L.nombreProyecto]}),c.jsx("button",{onClick:M,className:"font-semibold",children:" Volver a Proyectos"})]}),c.jsx("select",{value:N.id,onChange:re=>{var Y;return Q(((Y=L.tareas)==null?void 0:Y.find(ae=>ae.id===re.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(z=L.tareas)==null?void 0:z.map(re=>c.jsxs("option",{value:re.id,children:["Tarea ",re.numero,": ",re.instrucciones]},re.id))}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:D.map(re=>{const Y=C.find(ae=>ae.tareaId===N.id&&ae.estudianteId===re.id);return c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[re.nombreCompleto," - ",Y!=null&&Y.completada?c.jsx("span",{className:"text-green-600",children:"Entregado"}):c.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),Y&&c.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[Y.observacionesEstudiante&&c.jsxs("p",{children:[c.jsx("strong",{children:"Comentario:"})," ",Y.observacionesEstudiante]}),Y.enlaceUrl&&c.jsxs("p",{children:[c.jsx("strong",{children:"Enlace:"})," ",c.jsx("a",{href:Y.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:Y.enlaceUrl})]}),Y.archivoAdjunto&&c.jsxs("p",{children:[c.jsx("strong",{children:"Archivo:"})," ",c.jsx("a",{href:Y.archivoAdjunto.url,download:Y.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:Y.archivoAdjunto.nombre})]}),c.jsx("textarea",{placeholder:"Escribir retroalimentacin...",defaultValue:Y.feedbackProfesor||"",onBlur:ae=>I(Y.id,ae.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]},re.id)})})]}):c.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?c.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?c.jsx(k,{plan:d,onBack:()=>h(null)}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),c.jsx("button",{onClick:E,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"space-y-4",children:t.map(L=>c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:L.nombreProyecto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(L.cursos||[]).join(", ")]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>h(L),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),c.jsx("button",{onClick:()=>B(L),disabled:l===L.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===L.id?"Exportando...":"Exportar PDF"}),c.jsx("button",{onClick:()=>b(L),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>y(L.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]})},L.id))})]}):c.jsx(s_e,{initialPlan:i,onSave:g,onCancel:()=>{s("list"),o(null)}}),t.length>0&&c.jsx("div",{id:"gantt-container-vertical",children:c.jsx(XEe,{planificaciones:t,onActivityUpdate:m})})]})},YE="paolMaquinas",oR="paolRegistros",i_e=()=>{const[t,e]=ee.useState([]),[r,n]=ee.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=ee.useState(a),[o,l]=ee.useState(null),u={nombre:"",especialidad:"Industrial"},[d,h]=ee.useState(u),[m,g]=ee.useState(null),[b,y]=ee.useState({maquinaId:"",curso:"",profesor:"",fecha:""});ee.useEffect(()=>{try{const I=localStorage.getItem(YE);if(I&&JSON.parse(I).length>0)e(JSON.parse(I));else{const z=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidrulica",especialidad:"Automotriz"}];e(z),localStorage.setItem(YE,JSON.stringify(z))}const O=localStorage.getItem(oR);O&&n(JSON.parse(O))}catch(I){console.error("Error al cargar datos de Paol desde localStorage",I)}},[]);const E=ee.useCallback(I=>{e(I),localStorage.setItem(YE,JSON.stringify(I))},[]),B=ee.useCallback(I=>{n(I),localStorage.setItem(oR,JSON.stringify(I))},[]),k=I=>{I.preventDefault(),d.nombre.trim()&&(E(m?t.map(O=>O.id===m.id?{...m,...d}:O):[{...d,id:crypto.randomUUID()},...t]),h(u),g(null))},L=ee.useCallback(I=>{if(r.some(O=>O.maquinaId===I)){alert("No se puede eliminar una mquina con registros de uso. Elimine los registros primero.");return}window.confirm("Eliminar esta mquina?")&&E(t.filter(O=>O.id!==I))},[t,r,E]),M=I=>{I.preventDefault();const O=o||s;if(!O.curso||!O.profesorResponsable.trim()||!O.maquinaId||O.totalHoras<=0){alert("Curso, Profesor, Mquina y un Total de Horas mayor a cero son obligatorios.");return}B(o?r.map(z=>z.id===o.id?o:z):[{...s,id:crypto.randomUUID()},...r]),i(a),l(null)},P=ee.useCallback(I=>{window.confirm("Eliminar este registro de uso?")&&B(r.filter(O=>O.id!==I))},[r,B]),R=ee.useMemo(()=>r.filter(I=>(b.maquinaId===""||I.maquinaId===b.maquinaId)&&(b.curso===""||I.curso===b.curso)&&(b.profesor===""||I.profesorResponsable.toLowerCase().includes(b.profesor.toLowerCase()))&&(b.fecha===""||I.fecha===b.fecha)).sort((I,O)=>new Date(O.fecha).getTime()-new Date(I.fecha).getTime()),[r,b]),C=ee.useMemo(()=>new Map(t.map(I=>[I.id,I])),[t]),S=()=>{const I=R.map(re=>{var Y,ae;return{Fecha:re.fecha,Curso:re.curso,Profesor:re.profesorResponsable,Mquina:((Y=C.get(re.maquinaId))==null?void 0:Y.nombre)||"N/A",Especialidad:((ae=C.get(re.maquinaId))==null?void 0:ae.especialidad)||"N/A","Total Horas":re.totalHoras,Observaciones:re.observaciones}}),O=Ql.json_to_sheet(I),z=Ql.book_new();Ql.book_append_sheet(z,O,"RegistrosPaol"),dT(z,"Registros_Paol.xlsx")},N=()=>{const I=new or;al(I,{head:[["Fecha","Curso","Profesor","Mquina","Especialidad","Total Horas","Observaciones"]],body:R.map(O=>{var z,re;return[O.fecha,O.curso,O.profesorResponsable,((z=C.get(O.maquinaId))==null?void 0:z.nombre)||"N/A",((re=C.get(O.maquinaId))==null?void 0:re.especialidad)||"N/A",O.totalHoras,O.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:O=>{I.setFontSize(10),I.setFont("helvetica","bold"),I.text("LICEO INDUSTRIAL DE RECOLETA",O.settings.margin.left,15)}}),I.save("Registros_Paol.pdf")},Q="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",D=()=>{const I=o||s,O=o?l:i;return c.jsxs("form",{onSubmit:M,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),c.jsx("input",{name:"fecha",type:"date",value:I.fecha,onChange:z=>O({...I,fecha:z.target.value}),className:Q,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Curso"}),c.jsxs("select",{name:"curso",value:I.curso,onChange:z=>O({...I,curso:z.target.value}),className:Q,required:!0,children:[c.jsx("option",{value:"",children:"Curso"}),ls.map(z=>c.jsx("option",{children:z},z))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),c.jsxs("select",{name:"profesorResponsable",value:I.profesorResponsable,onChange:z=>O({...I,profesorResponsable:z.target.value}),className:Q,required:!0,children:[c.jsx("option",{value:"",children:"Profesor Responsable"}),P_.map(z=>c.jsx("option",{value:z,children:z},z))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Mquina"}),c.jsxs("select",{name:"maquinaId",value:I.maquinaId,onChange:z=>O({...I,maquinaId:z.target.value}),className:Q,required:!0,children:[c.jsx("option",{value:"",children:"Mquina"}),t.map(z=>c.jsx("option",{value:z.id,children:z.nombre},z.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),c.jsx("input",{name:"totalHoras",type:"number",value:I.totalHoras,onChange:z=>O({...I,totalHoras:Number(z.target.value)}),className:Q,required:!0,min:"0.5",step:"0.5"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),c.jsx("textarea",{name:"observaciones",value:I.observaciones,onChange:z=>O({...I,observaciones:z.target.value}),placeholder:"Observaciones...",className:`${Q}`,rows:1})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&c.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Paol: Registro de Uso de Mquinas"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),D()]}),c.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Mquinas"}),c.jsxs("form",{onSubmit:k,className:"flex gap-2 mb-4",children:[c.jsx("input",{value:d.nombre,onChange:I=>h({...d,nombre:I.target.value}),placeholder:"Nombre mquina",className:Q}),c.jsxs("select",{value:d.especialidad,onChange:I=>h({...d,especialidad:I.target.value}),className:Q,children:[c.jsx("option",{value:"Industrial",children:"Industrial"}),c.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),c.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:m?"":"+"})]}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(I=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("span",{children:[I.nombre," ",c.jsxs("span",{className:"text-xs text-slate-500",children:["(",I.especialidad,")"]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:()=>{g(I),h(I)},className:"text-blue-500",children:""}),c.jsx("button",{onClick:()=>L(I.id),className:"text-red-500",children:""})]})]},I.id))})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:S,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:N,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[c.jsx("input",{type:"date",value:b.fecha,onChange:I=>y({...b,fecha:I.target.value}),className:Q}),c.jsxs("select",{value:b.curso,onChange:I=>y({...b,curso:I.target.value}),className:Q,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),ls.map(I=>c.jsx("option",{children:I},I))]}),c.jsxs("select",{value:b.maquinaId,onChange:I=>y({...b,maquinaId:I.target.value}),className:Q,children:[c.jsx("option",{value:"",children:"Todas las Mquinas"}),t.map(I=>c.jsx("option",{value:I.id,children:I.nombre},I.id))]}),c.jsx("input",{value:b.profesor,onChange:I=>y({...b,profesor:I.target.value}),placeholder:"Buscar profesor...",className:Q})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Mquina"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:R.map(I=>{var O;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:I.fecha}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((O=C.get(I.maquinaId))==null?void 0:O.nombre)||"N/A"}),c.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[I.profesorResponsable," (",I.curso,")"]}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:I.totalHoras}),c.jsxs("td",{className:"px-3 py-2 text-center",children:[c.jsx("button",{onClick:()=>l(I),className:"text-blue-500",children:""}),c.jsx("button",{onClick:()=>P(I.id),className:"text-red-500 ml-2",children:""})]})]},I.id)})})]})})]})]})]})};function io(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let r=0,n;r<t.length;r++)(n=io(t[r]))!==""&&(e+=(e&&" ")+n);else for(let r in t)t[r]&&(e+=(e&&" ")+r);return e}var JE={exports:{}},ZE={},e_={exports:{}},t_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lR;function o_e(){if(lR)return t_;lR=1;var t=Dx();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,a=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function o(h,m){var g=m(),b=n({inst:{value:g,getSnapshot:m}}),y=b[0].inst,E=b[1];return s(function(){y.value=g,y.getSnapshot=m,l(y)&&E({inst:y})},[h,g,m]),a(function(){return l(y)&&E({inst:y}),h(function(){l(y)&&E({inst:y})})},[h]),i(g),g}function l(h){var m=h.getSnapshot;h=h.value;try{var g=m();return!r(h,g)}catch{return!0}}function u(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return t_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,t_}var cR;function l_e(){return cR||(cR=1,e_.exports=o_e()),e_.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uR;function c_e(){if(uR)return ZE;uR=1;var t=Dx(),e=l_e();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=e.useSyncExternalStore,s=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return ZE.useSyncExternalStoreWithSelector=function(u,d,h,m,g){var b=s(null);if(b.current===null){var y={hasValue:!1,value:null};b.current=y}else y=b.current;b=o(function(){function B(R){if(!k){if(k=!0,L=R,R=m(R),g!==void 0&&y.hasValue){var C=y.value;if(g(C,R))return M=C}return M=R}if(C=M,n(L,R))return C;var S=m(R);return g!==void 0&&g(C,S)?(L=R,C):(L=R,M=S)}var k=!1,L,M,P=h===void 0?null:h;return[function(){return B(d())},P===null?void 0:function(){return B(P())}]},[d,h,m,g]);var E=a(u,b[0],b[1]);return i(function(){y.hasValue=!0,y.value=E},[E]),l(E),E},ZE}var AR;function u_e(){return AR||(AR=1,JE.exports=c_e()),JE.exports}var A_e=u_e();const d_e=dS(A_e),f_e={},dR=t=>{let e;const r=new Set,n=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const g=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(b=>b(e,g))}},a=()=>e,l={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(f_e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=e=t(n,a,l);return l},h_e=t=>t?dR(t):dR,{useDebugValue:m_e}=At,{useSyncExternalStoreWithSelector:p_e}=d_e,g_e=t=>t;function TO(t,e=g_e,r){const n=p_e(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return m_e(n),n}const fR=(t,e)=>{const r=h_e(t),n=(a,s=e)=>TO(r,a,s);return Object.assign(n,r),n},x_e=(t,e)=>t?fR(t,e):fR;function Ki(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[n,a]of t)if(!Object.is(a,e.get(n)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(e,n)||!Object.is(t[n],e[n]))return!1;return!0}var v_e={value:()=>{}};function ub(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new M2(r)}function M2(t){this._=t}function y_e(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}M2.prototype=ub.prototype={constructor:M2,on:function(t,e){var r=this._,n=y_e(t+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(t=n[s]).type)&&(a=w_e(r[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<i;)if(a=(t=n[s]).type)r[a]=hR(r[a],t.name,e);else if(e==null)for(a in r)r[a]=hR(r[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new M2(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],n=0,a=s.length;n<a;++n)s[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,s=n.length;a<s;++a)n[a].value.apply(e,r)}};function w_e(t,e){for(var r=0,n=t.length,a;r<n;++r)if((a=t[r]).name===e)return a.value}function hR(t,e,r){for(var n=0,a=t.length;n<a;++n)if(t[n].name===e){t[n]=v_e,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var K5="http://www.w3.org/1999/xhtml";const mR={svg:"http://www.w3.org/2000/svg",xhtml:K5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ab(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),mR.hasOwnProperty(e)?{space:mR[e],local:t}:t}function b_e(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===K5&&e.documentElement.namespaceURI===K5?e.createElement(t):e.createElementNS(r,t)}}function C_e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function BO(t){var e=Ab(t);return(e.local?C_e:b_e)(e)}function E_e(){}function NT(t){return t==null?E_e:function(){return this.querySelector(t)}}function __e(t){typeof t!="function"&&(t=NT(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var s=e[a],i=s.length,o=n[a]=new Array(i),l,u,d=0;d<i;++d)(l=s[d])&&(u=t.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new ol(n,this._parents)}function S_e(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function T_e(){return[]}function NO(t){return t==null?T_e:function(){return this.querySelectorAll(t)}}function B_e(t){return function(){return S_e(t.apply(this,arguments))}}function N_e(t){typeof t=="function"?t=B_e(t):t=NO(t);for(var e=this._groups,r=e.length,n=[],a=[],s=0;s<r;++s)for(var i=e[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(n.push(t.call(l,l.__data__,u,i)),a.push(l));return new ol(n,a)}function kO(t){return function(){return this.matches(t)}}function IO(t){return function(e){return e.matches(t)}}var k_e=Array.prototype.find;function I_e(t){return function(){return k_e.call(this.children,t)}}function F_e(){return this.firstElementChild}function D_e(t){return this.select(t==null?F_e:I_e(typeof t=="function"?t:IO(t)))}var R_e=Array.prototype.filter;function L_e(){return Array.from(this.children)}function U_e(t){return function(){return R_e.call(this.children,t)}}function M_e(t){return this.selectAll(t==null?L_e:U_e(typeof t=="function"?t:IO(t)))}function P_e(t){typeof t!="function"&&(t=kO(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var s=e[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new ol(n,this._parents)}function FO(t){return new Array(t.length)}function j_e(){return new ol(this._enter||this._groups.map(FO),this._parents)}function zy(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}zy.prototype={constructor:zy,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function O_e(t){return function(){return t}}function Q_e(t,e,r,n,a,s){for(var i=0,o,l=e.length,u=s.length;i<u;++i)(o=e[i])?(o.__data__=s[i],n[i]=o):r[i]=new zy(t,s[i]);for(;i<l;++i)(o=e[i])&&(a[i]=o)}function H_e(t,e,r,n,a,s,i){var o,l,u=new Map,d=e.length,h=s.length,m=new Array(d),g;for(o=0;o<d;++o)(l=e[o])&&(m[o]=g=i.call(l,l.__data__,o,e)+"",u.has(g)?a[o]=l:u.set(g,l));for(o=0;o<h;++o)g=i.call(t,s[o],o,s)+"",(l=u.get(g))?(n[o]=l,l.__data__=s[o],u.delete(g)):r[o]=new zy(t,s[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(m[o])===l&&(a[o]=l)}function V_e(t){return t.__data__}function z_e(t,e){if(!arguments.length)return Array.from(this,V_e);var r=e?H_e:Q_e,n=this._parents,a=this._groups;typeof t!="function"&&(t=O_e(t));for(var s=a.length,i=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var d=n[u],h=a[u],m=h.length,g=G_e(t.call(d,d&&d.__data__,u,n)),b=g.length,y=o[u]=new Array(b),E=i[u]=new Array(b),B=l[u]=new Array(m);r(d,h,y,E,B,g,e);for(var k=0,L=0,M,P;k<b;++k)if(M=y[k]){for(k>=L&&(L=k+1);!(P=E[L])&&++L<b;);M._next=P||null}}return i=new ol(i,n),i._enter=o,i._exit=l,i}function G_e(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function q_e(){return new ol(this._exit||this._groups.map(FO),this._parents)}function K_e(t,e,r){var n=this.enter(),a=this,s=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function $_e(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),l=0;l<i;++l)for(var u=r[l],d=n[l],h=u.length,m=o[l]=new Array(h),g,b=0;b<h;++b)(g=u[b]||d[b])&&(m[b]=g);for(;l<a;++l)o[l]=r[l];return new ol(o,this._parents)}function W_e(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function X_e(t){t||(t=Y_e);function e(h,m){return h&&m?t(h.__data__,m.__data__):!h-!m}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,l=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(e)}return new ol(a,this._parents).order()}function Y_e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function J_e(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Z_e(){return Array.from(this)}function e5e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function t5e(){let t=0;for(const e of this)++t;return t}function r5e(){return!this.node()}function n5e(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var a=e[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&t.call(o,o.__data__,s,a);return this}function a5e(t){return function(){this.removeAttribute(t)}}function s5e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function i5e(t,e){return function(){this.setAttribute(t,e)}}function o5e(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function l5e(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function c5e(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function u5e(t,e){var r=Ab(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?s5e:a5e:typeof e=="function"?r.local?c5e:l5e:r.local?o5e:i5e)(r,e))}function DO(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function A5e(t){return function(){this.style.removeProperty(t)}}function d5e(t,e,r){return function(){this.style.setProperty(t,e,r)}}function f5e(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function h5e(t,e,r){return arguments.length>1?this.each((e==null?A5e:typeof e=="function"?f5e:d5e)(t,e,r??"")):jm(this.node(),t)}function jm(t,e){return t.style.getPropertyValue(e)||DO(t).getComputedStyle(t,null).getPropertyValue(e)}function m5e(t){return function(){delete this[t]}}function p5e(t,e){return function(){this[t]=e}}function g5e(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function x5e(t,e){return arguments.length>1?this.each((e==null?m5e:typeof e=="function"?g5e:p5e)(t,e)):this.node()[t]}function RO(t){return t.trim().split(/^|\s+/)}function kT(t){return t.classList||new LO(t)}function LO(t){this._node=t,this._names=RO(t.getAttribute("class")||"")}LO.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function UO(t,e){for(var r=kT(t),n=-1,a=e.length;++n<a;)r.add(e[n])}function MO(t,e){for(var r=kT(t),n=-1,a=e.length;++n<a;)r.remove(e[n])}function v5e(t){return function(){UO(this,t)}}function y5e(t){return function(){MO(this,t)}}function w5e(t,e){return function(){(e.apply(this,arguments)?UO:MO)(this,t)}}function b5e(t,e){var r=RO(t+"");if(arguments.length<2){for(var n=kT(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?w5e:e?v5e:y5e)(r,e))}function C5e(){this.textContent=""}function E5e(t){return function(){this.textContent=t}}function _5e(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function S5e(t){return arguments.length?this.each(t==null?C5e:(typeof t=="function"?_5e:E5e)(t)):this.node().textContent}function T5e(){this.innerHTML=""}function B5e(t){return function(){this.innerHTML=t}}function N5e(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function k5e(t){return arguments.length?this.each(t==null?T5e:(typeof t=="function"?N5e:B5e)(t)):this.node().innerHTML}function I5e(){this.nextSibling&&this.parentNode.appendChild(this)}function F5e(){return this.each(I5e)}function D5e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function R5e(){return this.each(D5e)}function L5e(t){var e=typeof t=="function"?t:BO(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function U5e(){return null}function M5e(t,e){var r=typeof t=="function"?t:BO(t),n=e==null?U5e:typeof e=="function"?e:NT(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function P5e(){var t=this.parentNode;t&&t.removeChild(this)}function j5e(){return this.each(P5e)}function O5e(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Q5e(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function H5e(t){return this.select(t?Q5e:O5e)}function V5e(t){return arguments.length?this.property("__data__",t):this.node().__data__}function z5e(t){return function(e){t.call(this,e,this.__data__)}}function G5e(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function q5e(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,a=e.length,s;r<a;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function K5e(t,e,r){return function(){var n=this.__on,a,s=z5e(e);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=e;return}}this.addEventListener(t.type,s,r),a={type:t.type,name:t.name,value:e,listener:s,options:r},n?n.push(a):this.__on=[a]}}function $5e(t,e,r){var n=G5e(t+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(a=0,d=o[l];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=e?K5e:q5e,a=0;a<s;++a)this.each(o(n[a],e,r));return this}function PO(t,e,r){var n=DO(t),a=n.CustomEvent;typeof a=="function"?a=new a(e,r):(a=n.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function W5e(t,e){return function(){return PO(this,t,e)}}function X5e(t,e){return function(){return PO(this,t,e.apply(this,arguments))}}function Y5e(t,e){return this.each((typeof e=="function"?X5e:W5e)(t,e))}function*J5e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var jO=[null];function ol(t,e){this._groups=t,this._parents=e}function u1(){return new ol([[document.documentElement]],jO)}function Z5e(){return this}ol.prototype=u1.prototype={constructor:ol,select:__e,selectAll:N_e,selectChild:D_e,selectChildren:M_e,filter:P_e,data:z_e,enter:j_e,exit:q_e,join:K_e,merge:$_e,selection:Z5e,order:W_e,sort:X_e,call:J_e,nodes:Z_e,node:e5e,size:t5e,empty:r5e,each:n5e,attr:u5e,style:h5e,property:x5e,classed:b5e,text:S5e,html:k5e,raise:F5e,lower:R5e,append:L5e,insert:M5e,remove:j5e,clone:H5e,datum:V5e,on:$5e,dispatch:Y5e,[Symbol.iterator]:J5e};function Ec(t){return typeof t=="string"?new ol([[document.querySelector(t)]],[document.documentElement]):new ol([[t]],jO)}function eSe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function wu(t,e){if(t=eSe(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const tSe={passive:!1},Sx={capture:!0,passive:!1};function r_(t){t.stopImmediatePropagation()}function wm(t){t.preventDefault(),t.stopImmediatePropagation()}function OO(t){var e=t.document.documentElement,r=Ec(t).on("dragstart.drag",wm,Sx);"onselectstart"in e?r.on("selectstart.drag",wm,Sx):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function QO(t,e){var r=t.document.documentElement,n=Ec(t).on("dragstart.drag",null);e&&(n.on("click.drag",wm,Sx),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const i2=t=>()=>t;function $5(t,{sourceEvent:e,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}$5.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function rSe(t){return!t.ctrlKey&&!t.button}function nSe(){return this.parentNode}function aSe(t,e){return e??{x:t.x,y:t.y}}function sSe(){return navigator.maxTouchPoints||"ontouchstart"in this}function iSe(){var t=rSe,e=nSe,r=aSe,n=sSe,a={},s=ub("start","drag","end"),i=0,o,l,u,d,h=0;function m(M){M.on("mousedown.drag",g).filter(n).on("touchstart.drag",E).on("touchmove.drag",B,tSe).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(M,P){if(!(d||!t.call(this,M,P))){var R=L(this,e.call(this,M,P),M,P,"mouse");R&&(Ec(M.view).on("mousemove.drag",b,Sx).on("mouseup.drag",y,Sx),OO(M.view),r_(M),u=!1,o=M.clientX,l=M.clientY,R("start",M))}}function b(M){if(wm(M),!u){var P=M.clientX-o,R=M.clientY-l;u=P*P+R*R>h}a.mouse("drag",M)}function y(M){Ec(M.view).on("mousemove.drag mouseup.drag",null),QO(M.view,u),wm(M),a.mouse("end",M)}function E(M,P){if(t.call(this,M,P)){var R=M.changedTouches,C=e.call(this,M,P),S=R.length,N,Q;for(N=0;N<S;++N)(Q=L(this,C,M,P,R[N].identifier,R[N]))&&(r_(M),Q("start",M,R[N]))}}function B(M){var P=M.changedTouches,R=P.length,C,S;for(C=0;C<R;++C)(S=a[P[C].identifier])&&(wm(M),S("drag",M,P[C]))}function k(M){var P=M.changedTouches,R=P.length,C,S;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<R;++C)(S=a[P[C].identifier])&&(r_(M),S("end",M,P[C]))}function L(M,P,R,C,S,N){var Q=s.copy(),D=wu(N||R,P),I,O,z;if((z=r.call(M,new $5("beforestart",{sourceEvent:R,target:m,identifier:S,active:i,x:D[0],y:D[1],dx:0,dy:0,dispatch:Q}),C))!=null)return I=z.x-D[0]||0,O=z.y-D[1]||0,function re(Y,ae,K){var G=D,W;switch(Y){case"start":a[S]=re,W=i++;break;case"end":delete a[S],--i;case"drag":D=wu(K||ae,P),W=i;break}Q.call(Y,M,new $5(Y,{sourceEvent:ae,subject:z,target:m,identifier:S,active:W,x:D[0]+I,y:D[1]+O,dx:D[0]-G[0],dy:D[1]-G[1],dispatch:Q}),C)}}return m.filter=function(M){return arguments.length?(t=typeof M=="function"?M:i2(!!M),m):t},m.container=function(M){return arguments.length?(e=typeof M=="function"?M:i2(M),m):e},m.subject=function(M){return arguments.length?(r=typeof M=="function"?M:i2(M),m):r},m.touchable=function(M){return arguments.length?(n=typeof M=="function"?M:i2(!!M),m):n},m.on=function(){var M=s.on.apply(s,arguments);return M===s?m:M},m.clickDistance=function(M){return arguments.length?(h=(M=+M)*M,m):Math.sqrt(h)},m}function IT(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function HO(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function A1(){}var Tx=.7,Gy=1/Tx,bm="\\s*([+-]?\\d+)\\s*",Bx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oSe=/^#([0-9a-f]{3,8})$/,lSe=new RegExp(`^rgb\\(${bm},${bm},${bm}\\)$`),cSe=new RegExp(`^rgb\\(${Fu},${Fu},${Fu}\\)$`),uSe=new RegExp(`^rgba\\(${bm},${bm},${bm},${Bx}\\)$`),ASe=new RegExp(`^rgba\\(${Fu},${Fu},${Fu},${Bx}\\)$`),dSe=new RegExp(`^hsl\\(${Bx},${Fu},${Fu}\\)$`),fSe=new RegExp(`^hsla\\(${Bx},${Fu},${Fu},${Bx}\\)$`),pR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};IT(A1,Nx,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gR,formatHex:gR,formatHex8:hSe,formatHsl:mSe,formatRgb:xR,toString:xR});function gR(){return this.rgb().formatHex()}function hSe(){return this.rgb().formatHex8()}function mSe(){return VO(this).formatHsl()}function xR(){return this.rgb().formatRgb()}function Nx(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=oSe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?vR(e):r===3?new Bo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?o2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?o2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lSe.exec(t))?new Bo(e[1],e[2],e[3],1):(e=cSe.exec(t))?new Bo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uSe.exec(t))?o2(e[1],e[2],e[3],e[4]):(e=ASe.exec(t))?o2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dSe.exec(t))?bR(e[1],e[2]/100,e[3]/100,1):(e=fSe.exec(t))?bR(e[1],e[2]/100,e[3]/100,e[4]):pR.hasOwnProperty(t)?vR(pR[t]):t==="transparent"?new Bo(NaN,NaN,NaN,0):null}function vR(t){return new Bo(t>>16&255,t>>8&255,t&255,1)}function o2(t,e,r,n){return n<=0&&(t=e=r=NaN),new Bo(t,e,r,n)}function pSe(t){return t instanceof A1||(t=Nx(t)),t?(t=t.rgb(),new Bo(t.r,t.g,t.b,t.opacity)):new Bo}function W5(t,e,r,n){return arguments.length===1?pSe(t):new Bo(t,e,r,n??1)}function Bo(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}IT(Bo,W5,HO(A1,{brighter(t){return t=t==null?Gy:Math.pow(Gy,t),new Bo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Tx:Math.pow(Tx,t),new Bo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bo(bh(this.r),bh(this.g),bh(this.b),qy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yR,formatHex:yR,formatHex8:gSe,formatRgb:wR,toString:wR}));function yR(){return`#${uh(this.r)}${uh(this.g)}${uh(this.b)}`}function gSe(){return`#${uh(this.r)}${uh(this.g)}${uh(this.b)}${uh((isNaN(this.opacity)?1:this.opacity)*255)}`}function wR(){const t=qy(this.opacity);return`${t===1?"rgb(":"rgba("}${bh(this.r)}, ${bh(this.g)}, ${bh(this.b)}${t===1?")":`, ${t})`}`}function qy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function uh(t){return t=bh(t),(t<16?"0":"")+t.toString(16)}function bR(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new _c(t,e,r,n)}function VO(t){if(t instanceof _c)return new _c(t.h,t.s,t.l,t.opacity);if(t instanceof A1||(t=Nx(t)),!t)return new _c;if(t instanceof _c)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(e===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-e)/o+2:i=(e-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new _c(i,o,l,t.opacity)}function xSe(t,e,r,n){return arguments.length===1?VO(t):new _c(t,e,r,n??1)}function _c(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}IT(_c,xSe,HO(A1,{brighter(t){return t=t==null?Gy:Math.pow(Gy,t),new _c(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Tx:Math.pow(Tx,t),new _c(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Bo(n_(t>=240?t-240:t+120,a,n),n_(t,a,n),n_(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new _c(CR(this.h),l2(this.s),l2(this.l),qy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qy(this.opacity);return`${t===1?"hsl(":"hsla("}${CR(this.h)}, ${l2(this.s)*100}%, ${l2(this.l)*100}%${t===1?")":`, ${t})`}`}}));function CR(t){return t=(t||0)%360,t<0?t+360:t}function l2(t){return Math.max(0,Math.min(1,t||0))}function n_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const zO=t=>()=>t;function vSe(t,e){return function(r){return t+r*e}}function ySe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function wSe(t){return(t=+t)==1?GO:function(e,r){return r-e?ySe(e,r,t):zO(isNaN(e)?r:e)}}function GO(t,e){var r=e-t;return r?vSe(t,r):zO(isNaN(t)?e:t)}const ER=function t(e){var r=wSe(e);function n(a,s){var i=r((a=W5(a)).r,(s=W5(s)).r),o=r(a.g,s.g),l=r(a.b,s.b),u=GO(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=l(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function Ud(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var X5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a_=new RegExp(X5.source,"g");function bSe(t){return function(){return t}}function CSe(t){return function(e){return t(e)+""}}function ESe(t,e){var r=X5.lastIndex=a_.lastIndex=0,n,a,s,i=-1,o=[],l=[];for(t=t+"",e=e+"";(n=X5.exec(t))&&(a=a_.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,l.push({i,x:Ud(n,a)})),r=a_.lastIndex;return r<e.length&&(s=e.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?l[0]?CSe(l[0].x):bSe(e):(e=l.length,function(u){for(var d=0,h;d<e;++d)o[(h=l[d]).i]=h.x(u);return o.join("")})}var _R=180/Math.PI,Y5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qO(t,e,r,n,a,s){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),t*n<e*r&&(t=-t,e=-e,l=-l,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(e,t)*_R,skewX:Math.atan(l)*_R,scaleX:i,scaleY:o}}var c2;function _Se(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Y5:qO(e.a,e.b,e.c,e.d,e.e,e.f)}function SSe(t){return t==null||(c2||(c2=document.createElementNS("http://www.w3.org/2000/svg","g")),c2.setAttribute("transform",t),!(t=c2.transform.baseVal.consolidate()))?Y5:(t=t.matrix,qO(t.a,t.b,t.c,t.d,t.e,t.f))}function KO(t,e,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,h,m,g,b){if(u!==h||d!==m){var y=g.push("translate(",null,e,null,r);b.push({i:y-4,x:Ud(u,h)},{i:y-2,x:Ud(d,m)})}else(h||m)&&g.push("translate("+h+e+m+r)}function i(u,d,h,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:h.push(a(h)+"rotate(",null,n)-2,x:Ud(u,d)})):d&&h.push(a(h)+"rotate("+d+n)}function o(u,d,h,m){u!==d?m.push({i:h.push(a(h)+"skewX(",null,n)-2,x:Ud(u,d)}):d&&h.push(a(h)+"skewX("+d+n)}function l(u,d,h,m,g,b){if(u!==h||d!==m){var y=g.push(a(g)+"scale(",null,",",null,")");b.push({i:y-4,x:Ud(u,h)},{i:y-2,x:Ud(d,m)})}else(h!==1||m!==1)&&g.push(a(g)+"scale("+h+","+m+")")}return function(u,d){var h=[],m=[];return u=t(u),d=t(d),s(u.translateX,u.translateY,d.translateX,d.translateY,h,m),i(u.rotate,d.rotate,h,m),o(u.skewX,d.skewX,h,m),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,m),u=d=null,function(g){for(var b=-1,y=m.length,E;++b<y;)h[(E=m[b]).i]=E.x(g);return h.join("")}}}var TSe=KO(_Se,"px, ","px)","deg)"),BSe=KO(SSe,", ",")",")"),NSe=1e-12;function SR(t){return((t=Math.exp(t))+1/t)/2}function kSe(t){return((t=Math.exp(t))-1/t)/2}function ISe(t){return((t=Math.exp(2*t))-1)/(t+1)}const FSe=function t(e,r,n){function a(s,i){var o=s[0],l=s[1],u=s[2],d=i[0],h=i[1],m=i[2],g=d-o,b=h-l,y=g*g+b*b,E,B;if(y<NSe)B=Math.log(m/u)/e,E=function(C){return[o+C*g,l+C*b,u*Math.exp(e*C*B)]};else{var k=Math.sqrt(y),L=(m*m-u*u+n*y)/(2*u*r*k),M=(m*m-u*u-n*y)/(2*m*r*k),P=Math.log(Math.sqrt(L*L+1)-L),R=Math.log(Math.sqrt(M*M+1)-M);B=(R-P)/e,E=function(C){var S=C*B,N=SR(P),Q=u/(r*k)*(N*ISe(e*S+P)-kSe(P));return[o+Q*g,l+Q*b,u*N/SR(e*S+P)]}}return E.duration=B*1e3*e/Math.SQRT2,E}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,l=o*o;return t(i,o,l)},a}(Math.SQRT2,2,4);var Om=0,Eg=0,tg=0,$O=1e3,Ky,_g,$y=0,Rh=0,db=0,kx=typeof performance=="object"&&performance.now?performance:Date,WO=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function FT(){return Rh||(WO(DSe),Rh=kx.now()+db)}function DSe(){Rh=0}function Wy(){this._call=this._time=this._next=null}Wy.prototype=XO.prototype={constructor:Wy,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?FT():+r)+(e==null?0:+e),!this._next&&_g!==this&&(_g?_g._next=this:Ky=this,_g=this),this._call=t,this._time=r,J5()},stop:function(){this._call&&(this._call=null,this._time=1/0,J5())}};function XO(t,e,r){var n=new Wy;return n.restart(t,e,r),n}function RSe(){FT(),++Om;for(var t=Ky,e;t;)(e=Rh-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Om}function TR(){Rh=($y=kx.now())+db,Om=Eg=0;try{RSe()}finally{Om=0,USe(),Rh=0}}function LSe(){var t=kx.now(),e=t-$y;e>$O&&(db-=e,$y=t)}function USe(){for(var t,e=Ky,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Ky=r);_g=t,J5(n)}function J5(t){if(!Om){Eg&&(Eg=clearTimeout(Eg));var e=t-Rh;e>24?(t<1/0&&(Eg=setTimeout(TR,t-kx.now()-db)),tg&&(tg=clearInterval(tg))):(tg||($y=kx.now(),tg=setInterval(LSe,$O)),Om=1,WO(TR))}}function BR(t,e,r){var n=new Wy;return e=e==null?0:+e,n.restart(a=>{n.stop(),t(a+e)},e,r),n}var MSe=ub("start","end","cancel","interrupt"),PSe=[],YO=0,NR=1,Z5=2,P2=3,kR=4,eS=5,j2=6;function fb(t,e,r,n,a,s){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;jSe(t,r,{name:e,index:n,group:a,on:MSe,tween:PSe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:YO})}function DT(t,e){var r=Mc(t,e);if(r.state>YO)throw new Error("too late; already scheduled");return r}function Qu(t,e){var r=Mc(t,e);if(r.state>P2)throw new Error("too late; already running");return r}function Mc(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function jSe(t,e,r){var n=t.__transition,a;n[e]=r,r.timer=XO(s,0,r.time);function s(u){r.state=NR,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,h,m,g;if(r.state!==NR)return l();for(d in n)if(g=n[d],g.name===r.name){if(g.state===P2)return BR(i);g.state===kR?(g.state=j2,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete n[d]):+d<e&&(g.state=j2,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete n[d])}if(BR(function(){r.state===P2&&(r.state=kR,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=Z5,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Z5){for(r.state=P2,a=new Array(m=r.tween.length),d=0,h=-1;d<m;++d)(g=r.tween[d].value.call(t,t.__data__,r.index,r.group))&&(a[++h]=g);a.length=h+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=eS,1),h=-1,m=a.length;++h<m;)a[h].call(t,d);r.state===eS&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=j2,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function O2(t,e){var r=t.__transition,n,a,s=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){s=!1;continue}a=n.state>Z5&&n.state<eS,n.state=j2,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}s&&delete t.__transition}}function OSe(t){return this.each(function(){O2(this,t)})}function QSe(t,e){var r,n;return function(){var a=Qu(this,t),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function HSe(t,e,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=Qu(this,t),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:e,value:r},l=0,u=a.length;l<u;++l)if(a[l].name===e){a[l]=o;break}l===u&&a.push(o)}s.tween=a}}function VSe(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=Mc(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===t)return i.value;return null}return this.each((e==null?QSe:HSe)(r,t,e))}function RT(t,e,r){var n=t._id;return t.each(function(){var a=Qu(this,n);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return Mc(a,n).value[e]}}function JO(t,e){var r;return(typeof e=="number"?Ud:e instanceof Nx?ER:(r=Nx(e))?(e=r,ER):ESe)(t,e)}function zSe(t){return function(){this.removeAttribute(t)}}function GSe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qSe(t,e,r){var n,a=r+"",s;return function(){var i=this.getAttribute(t);return i===a?null:i===n?s:s=e(n=i,r)}}function KSe(t,e,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(t.space,t.local);return i===a?null:i===n?s:s=e(n=i,r)}}function $Se(t,e,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=e(n=i,o)))}}function WSe(t,e,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=e(n=i,o)))}}function XSe(t,e){var r=Ab(t),n=r==="transform"?BSe:JO;return this.attrTween(t,typeof e=="function"?(r.local?WSe:$Se)(r,n,RT(this,"attr."+t,e)):e==null?(r.local?GSe:zSe)(r):(r.local?KSe:qSe)(r,n,e))}function YSe(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function JSe(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function ZSe(t,e){var r,n;function a(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&JSe(t,s)),r}return a._value=e,a}function e4e(t,e){var r,n;function a(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&YSe(t,s)),r}return a._value=e,a}function t4e(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Ab(t);return this.tween(r,(n.local?ZSe:e4e)(n,e))}function r4e(t,e){return function(){DT(this,t).delay=+e.apply(this,arguments)}}function n4e(t,e){return e=+e,function(){DT(this,t).delay=e}}function a4e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?r4e:n4e)(e,t)):Mc(this.node(),e).delay}function s4e(t,e){return function(){Qu(this,t).duration=+e.apply(this,arguments)}}function i4e(t,e){return e=+e,function(){Qu(this,t).duration=e}}function o4e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?s4e:i4e)(e,t)):Mc(this.node(),e).duration}function l4e(t,e){if(typeof e!="function")throw new Error;return function(){Qu(this,t).ease=e}}function c4e(t){var e=this._id;return arguments.length?this.each(l4e(e,t)):Mc(this.node(),e).ease}function u4e(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Qu(this,t).ease=r}}function A4e(t){if(typeof t!="function")throw new Error;return this.each(u4e(this._id,t))}function d4e(t){typeof t!="function"&&(t=kO(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var s=e[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new jA(n,this._parents,this._name,this._id)}function f4e(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var l=e[o],u=r[o],d=l.length,h=i[o]=new Array(d),m,g=0;g<d;++g)(m=l[g]||u[g])&&(h[g]=m);for(;o<n;++o)i[o]=e[o];return new jA(i,this._parents,this._name,this._id)}function h4e(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function m4e(t,e,r){var n,a,s=h4e(e)?DT:Qu;return function(){var i=s(this,t),o=i.on;o!==n&&(a=(n=o).copy()).on(e,r),i.on=a}}function p4e(t,e){var r=this._id;return arguments.length<2?Mc(this.node(),r).on.on(t):this.each(m4e(r,t,e))}function g4e(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function x4e(){return this.on("end.remove",g4e(this._id))}function v4e(t){var e=this._name,r=this._id;typeof t!="function"&&(t=NT(t));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],l=o.length,u=s[i]=new Array(l),d,h,m=0;m<l;++m)(d=o[m])&&(h=t.call(d,d.__data__,m,o))&&("__data__"in d&&(h.__data__=d.__data__),u[m]=h,fb(u[m],e,r,m,u,Mc(d,r)));return new jA(s,this._parents,e,r)}function y4e(t){var e=this._name,r=this._id;typeof t!="function"&&(t=NO(t));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var l=n[o],u=l.length,d,h=0;h<u;++h)if(d=l[h]){for(var m=t.call(d,d.__data__,h,l),g,b=Mc(d,r),y=0,E=m.length;y<E;++y)(g=m[y])&&fb(g,e,r,y,m,b);s.push(m),i.push(d)}return new jA(s,i,e,r)}var w4e=u1.prototype.constructor;function b4e(){return new w4e(this._groups,this._parents)}function C4e(t,e){var r,n,a;return function(){var s=jm(this,t),i=(this.style.removeProperty(t),jm(this,t));return s===i?null:s===r&&i===n?a:a=e(r=s,n=i)}}function ZO(t){return function(){this.style.removeProperty(t)}}function E4e(t,e,r){var n,a=r+"",s;return function(){var i=jm(this,t);return i===a?null:i===n?s:s=e(n=i,r)}}function _4e(t,e,r){var n,a,s;return function(){var i=jm(this,t),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),jm(this,t))),i===l?null:i===n&&l===a?s:(a=l,s=e(n=i,o))}}function S4e(t,e){var r,n,a,s="style."+e,i="end."+s,o;return function(){var l=Qu(this,t),u=l.on,d=l.value[s]==null?o||(o=ZO(e)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),l.on=n}}function T4e(t,e,r){var n=(t+="")=="transform"?TSe:JO;return e==null?this.styleTween(t,C4e(t,n)).on("end.style."+t,ZO(t)):typeof e=="function"?this.styleTween(t,_4e(t,n,RT(this,"style."+t,e))).each(S4e(this._id,t)):this.styleTween(t,E4e(t,n,e),r).on("end.style."+t,null)}function B4e(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function N4e(t,e,r){var n,a;function s(){var i=e.apply(this,arguments);return i!==a&&(n=(a=i)&&B4e(t,i,r)),n}return s._value=e,s}function k4e(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,N4e(t,e,r??""))}function I4e(t){return function(){this.textContent=t}}function F4e(t){return function(){var e=t(this);this.textContent=e??""}}function D4e(t){return this.tween("text",typeof t=="function"?F4e(RT(this,"text",t)):I4e(t==null?"":t+""))}function R4e(t){return function(e){this.textContent=t.call(this,e)}}function L4e(t){var e,r;function n(){var a=t.apply(this,arguments);return a!==r&&(e=(r=a)&&R4e(a)),e}return n._value=t,n}function U4e(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,L4e(t))}function M4e(){for(var t=this._name,e=this._id,r=eQ(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=Mc(l,e);fb(l,t,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new jA(n,this._parents,t,r)}function P4e(){var t,e,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},l={value:function(){--a===0&&s()}};r.each(function(){var u=Qu(this,n),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),a===0&&s()})}var j4e=0;function jA(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function eQ(){return++j4e}var yA=u1.prototype;jA.prototype={constructor:jA,select:v4e,selectAll:y4e,selectChild:yA.selectChild,selectChildren:yA.selectChildren,filter:d4e,merge:f4e,selection:b4e,transition:M4e,call:yA.call,nodes:yA.nodes,node:yA.node,size:yA.size,empty:yA.empty,each:yA.each,on:p4e,attr:XSe,attrTween:t4e,style:T4e,styleTween:k4e,text:D4e,textTween:U4e,remove:x4e,tween:VSe,delay:a4e,duration:o4e,ease:c4e,easeVarying:A4e,end:P4e,[Symbol.iterator]:yA[Symbol.iterator]};function O4e(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Q4e={time:null,delay:0,duration:250,ease:O4e};function H4e(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function V4e(t){var e,r;t instanceof jA?(e=t._id,t=t._name):(e=eQ(),(r=Q4e).time=FT(),t=t==null?null:t+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&fb(l,t,e,u,i,r||H4e(l,e));return new jA(n,this._parents,t,e)}u1.prototype.interrupt=OSe;u1.prototype.transition=V4e;const u2=t=>()=>t;function z4e(t,{sourceEvent:e,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function _A(t,e,r){this.k=t,this.x=e,this.y=r}_A.prototype={constructor:_A,scale:function(t){return t===1?this:new _A(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new _A(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var af=new _A(1,0,0);_A.prototype;function s_(t){t.stopImmediatePropagation()}function rg(t){t.preventDefault(),t.stopImmediatePropagation()}function G4e(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function q4e(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function IR(){return this.__zoom||af}function K4e(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function $4e(){return navigator.maxTouchPoints||"ontouchstart"in this}function W4e(t,e,r){var n=t.invertX(e[0][0])-r[0][0],a=t.invertX(e[1][0])-r[1][0],s=t.invertY(e[0][1])-r[0][1],i=t.invertY(e[1][1])-r[1][1];return t.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function X4e(){var t=G4e,e=q4e,r=W4e,n=K4e,a=$4e,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=FSe,u=ub("start","zoom","end"),d,h,m,g=500,b=150,y=0,E=10;function B(z){z.property("__zoom",IR).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",Q).filter(a).on("touchstart.zoom",D).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}B.transform=function(z,re,Y,ae){var K=z.selection?z.selection():z;K.property("__zoom",IR),z!==K?P(z,re,Y,ae):K.interrupt().each(function(){R(this,arguments).event(ae).start().zoom(null,typeof re=="function"?re.apply(this,arguments):re).end()})},B.scaleBy=function(z,re,Y,ae){B.scaleTo(z,function(){var K=this.__zoom.k,G=typeof re=="function"?re.apply(this,arguments):re;return K*G},Y,ae)},B.scaleTo=function(z,re,Y,ae){B.transform(z,function(){var K=e.apply(this,arguments),G=this.__zoom,W=Y==null?M(K):typeof Y=="function"?Y.apply(this,arguments):Y,ie=G.invert(W),j=typeof re=="function"?re.apply(this,arguments):re;return r(L(k(G,j),W,ie),K,i)},Y,ae)},B.translateBy=function(z,re,Y,ae){B.transform(z,function(){return r(this.__zoom.translate(typeof re=="function"?re.apply(this,arguments):re,typeof Y=="function"?Y.apply(this,arguments):Y),e.apply(this,arguments),i)},null,ae)},B.translateTo=function(z,re,Y,ae,K){B.transform(z,function(){var G=e.apply(this,arguments),W=this.__zoom,ie=ae==null?M(G):typeof ae=="function"?ae.apply(this,arguments):ae;return r(af.translate(ie[0],ie[1]).scale(W.k).translate(typeof re=="function"?-re.apply(this,arguments):-re,typeof Y=="function"?-Y.apply(this,arguments):-Y),G,i)},ae,K)};function k(z,re){return re=Math.max(s[0],Math.min(s[1],re)),re===z.k?z:new _A(re,z.x,z.y)}function L(z,re,Y){var ae=re[0]-Y[0]*z.k,K=re[1]-Y[1]*z.k;return ae===z.x&&K===z.y?z:new _A(z.k,ae,K)}function M(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function P(z,re,Y,ae){z.on("start.zoom",function(){R(this,arguments).event(ae).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(ae).end()}).tween("zoom",function(){var K=this,G=arguments,W=R(K,G).event(ae),ie=e.apply(K,G),j=Y==null?M(ie):typeof Y=="function"?Y.apply(K,G):Y,X=Math.max(ie[1][0]-ie[0][0],ie[1][1]-ie[0][1]),Z=K.__zoom,te=typeof re=="function"?re.apply(K,G):re,ce=l(Z.invert(j).concat(X/Z.k),te.invert(j).concat(X/te.k));return function(de){if(de===1)de=te;else{var me=ce(de),ge=X/me[2];de=new _A(ge,j[0]-me[0]*ge,j[1]-me[1]*ge)}W.zoom(null,de)}})}function R(z,re,Y){return!Y&&z.__zooming||new C(z,re)}function C(z,re){this.that=z,this.args=re,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,re),this.taps=0}C.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,re){return this.mouse&&z!=="mouse"&&(this.mouse[1]=re.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=re.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=re.invert(this.touch1[0])),this.that.__zoom=re,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var re=Ec(this.that).datum();u.call(z,this.that,new z4e(z,{sourceEvent:this.sourceEvent,target:B,transform:this.that.__zoom,dispatch:u}),re)}};function S(z,...re){if(!t.apply(this,arguments))return;var Y=R(this,re).event(z),ae=this.__zoom,K=Math.max(s[0],Math.min(s[1],ae.k*Math.pow(2,n.apply(this,arguments)))),G=wu(z);if(Y.wheel)(Y.mouse[0][0]!==G[0]||Y.mouse[0][1]!==G[1])&&(Y.mouse[1]=ae.invert(Y.mouse[0]=G)),clearTimeout(Y.wheel);else{if(ae.k===K)return;Y.mouse=[G,ae.invert(G)],O2(this),Y.start()}rg(z),Y.wheel=setTimeout(W,b),Y.zoom("mouse",r(L(k(ae,K),Y.mouse[0],Y.mouse[1]),Y.extent,i));function W(){Y.wheel=null,Y.end()}}function N(z,...re){if(m||!t.apply(this,arguments))return;var Y=z.currentTarget,ae=R(this,re,!0).event(z),K=Ec(z.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",X,!0),G=wu(z,Y),W=z.clientX,ie=z.clientY;OO(z.view),s_(z),ae.mouse=[G,this.__zoom.invert(G)],O2(this),ae.start();function j(Z){if(rg(Z),!ae.moved){var te=Z.clientX-W,ce=Z.clientY-ie;ae.moved=te*te+ce*ce>y}ae.event(Z).zoom("mouse",r(L(ae.that.__zoom,ae.mouse[0]=wu(Z,Y),ae.mouse[1]),ae.extent,i))}function X(Z){K.on("mousemove.zoom mouseup.zoom",null),QO(Z.view,ae.moved),rg(Z),ae.event(Z).end()}}function Q(z,...re){if(t.apply(this,arguments)){var Y=this.__zoom,ae=wu(z.changedTouches?z.changedTouches[0]:z,this),K=Y.invert(ae),G=Y.k*(z.shiftKey?.5:2),W=r(L(k(Y,G),ae,K),e.apply(this,re),i);rg(z),o>0?Ec(this).transition().duration(o).call(P,W,ae,z):Ec(this).call(B.transform,W,ae,z)}}function D(z,...re){if(t.apply(this,arguments)){var Y=z.touches,ae=Y.length,K=R(this,re,z.changedTouches.length===ae).event(z),G,W,ie,j;for(s_(z),W=0;W<ae;++W)ie=Y[W],j=wu(ie,this),j=[j,this.__zoom.invert(j),ie.identifier],K.touch0?!K.touch1&&K.touch0[2]!==j[2]&&(K.touch1=j,K.taps=0):(K.touch0=j,G=!0,K.taps=1+!!d);d&&(d=clearTimeout(d)),G&&(K.taps<2&&(h=j[0],d=setTimeout(function(){d=null},g)),O2(this),K.start())}}function I(z,...re){if(this.__zooming){var Y=R(this,re).event(z),ae=z.changedTouches,K=ae.length,G,W,ie,j;for(rg(z),G=0;G<K;++G)W=ae[G],ie=wu(W,this),Y.touch0&&Y.touch0[2]===W.identifier?Y.touch0[0]=ie:Y.touch1&&Y.touch1[2]===W.identifier&&(Y.touch1[0]=ie);if(W=Y.that.__zoom,Y.touch1){var X=Y.touch0[0],Z=Y.touch0[1],te=Y.touch1[0],ce=Y.touch1[1],de=(de=te[0]-X[0])*de+(de=te[1]-X[1])*de,me=(me=ce[0]-Z[0])*me+(me=ce[1]-Z[1])*me;W=k(W,Math.sqrt(de/me)),ie=[(X[0]+te[0])/2,(X[1]+te[1])/2],j=[(Z[0]+ce[0])/2,(Z[1]+ce[1])/2]}else if(Y.touch0)ie=Y.touch0[0],j=Y.touch0[1];else return;Y.zoom("touch",r(L(W,ie,j),Y.extent,i))}}function O(z,...re){if(this.__zooming){var Y=R(this,re).event(z),ae=z.changedTouches,K=ae.length,G,W;for(s_(z),m&&clearTimeout(m),m=setTimeout(function(){m=null},g),G=0;G<K;++G)W=ae[G],Y.touch0&&Y.touch0[2]===W.identifier?delete Y.touch0:Y.touch1&&Y.touch1[2]===W.identifier&&delete Y.touch1;if(Y.touch1&&!Y.touch0&&(Y.touch0=Y.touch1,delete Y.touch1),Y.touch0)Y.touch0[1]=this.__zoom.invert(Y.touch0[0]);else if(Y.end(),Y.taps===2&&(W=wu(W,this),Math.hypot(h[0]-W[0],h[1]-W[1])<E)){var ie=Ec(this).on("dblclick.zoom");ie&&ie.apply(this,arguments)}}}return B.wheelDelta=function(z){return arguments.length?(n=typeof z=="function"?z:u2(+z),B):n},B.filter=function(z){return arguments.length?(t=typeof z=="function"?z:u2(!!z),B):t},B.touchable=function(z){return arguments.length?(a=typeof z=="function"?z:u2(!!z),B):a},B.extent=function(z){return arguments.length?(e=typeof z=="function"?z:u2([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),B):e},B.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],B):[s[0],s[1]]},B.translateExtent=function(z){return arguments.length?(i[0][0]=+z[0][0],i[1][0]=+z[1][0],i[0][1]=+z[0][1],i[1][1]=+z[1][1],B):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},B.constrain=function(z){return arguments.length?(r=z,B):r},B.duration=function(z){return arguments.length?(o=+z,B):o},B.interpolate=function(z){return arguments.length?(l=z,B):l},B.on=function(){var z=u.on.apply(u,arguments);return z===u?B:z},B.clickDistance=function(z){return arguments.length?(y=(z=+z)*z,B):Math.sqrt(y)},B.tapDistance=function(z){return arguments.length?(E=+z,B):E},B}AL();const hb=ee.createContext(null),Y4e=hb.Provider,OA={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},tQ=OA.error001();function Da(t,e){const r=ee.useContext(hb);if(r===null)throw new Error(tQ);return TO(r,t,e)}const Zs=()=>{const t=ee.useContext(hb);if(t===null)throw new Error(tQ);return ee.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},J4e=t=>t.userSelectionActive?"none":"all";function rQ({position:t,children:e,className:r,style:n,...a}){const s=Da(J4e),i=`${t}`.split("-");return At.createElement("div",{className:io(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},e)}function Z4e({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:At.createElement(rQ,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},At.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const eTe=({x:t,y:e,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const h=ee.useRef(null),[m,g]=ee.useState({x:0,y:0,width:0,height:0}),b=io(["react-flow__edge-textwrapper",u]);return ee.useEffect(()=>{if(h.current){const y=h.current.getBBox();g({x:y.x,y:y.y,width:y.width,height:y.height})}},[r]),typeof r>"u"||!r?null:At.createElement("g",{transform:`translate(${t-m.width/2} ${e-m.height/2})`,className:b,visibility:m.width?"visible":"hidden",...d},a&&At.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),At.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:h,style:n},r),l)};var tTe=ee.memo(eTe);const LT=t=>({width:t.offsetWidth,height:t.offsetHeight}),Qm=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),UT=(t={x:0,y:0},e)=>({x:Qm(t.x,e[0][0],e[1][0]),y:Qm(t.y,e[0][1],e[1][1])}),FR=(t,e,r)=>t<e?Qm(Math.abs(t-e),1,50)/50:t>r?-Qm(Math.abs(t-r),1,50)/50:0,nQ=(t,e)=>{const r=FR(t.x,35,e.width-35)*20,n=FR(t.y,35,e.height-35)*20;return[r,n]},aQ=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},rTe=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),MT=({x:t,y:e,width:r,height:n})=>({x:t,y:e,x2:t+r,y2:e+n}),nTe=({x:t,y:e,x2:r,y2:n})=>({x:t,y:e,width:r-t,height:n-e}),DR=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),tS=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),n=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*n)},aTe=t=>zl(t.width)&&zl(t.height)&&zl(t.x)&&zl(t.y),zl=t=>!isNaN(t)&&isFinite(t),Ga=Symbol.for("internals"),sQ=["Enter"," ","Escape"],sTe=(t,e)=>{},iTe=t=>"nativeEvent"in t;function rS(t){var a,s;const e=iTe(t)?t.nativeEvent:t,r=((s=(a=e.composedPath)==null?void 0:a.call(e))==null?void 0:s[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const iQ=t=>"clientX"in t,sf=(t,e)=>{var s,i;const r=iQ(t),n=r?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,a=r?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:n-((e==null?void 0:e.left)??0),y:a-((e==null?void 0:e.top)??0)}},Xy=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},d1=({id:t,path:e,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g=20})=>At.createElement(At.Fragment,null,At.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:m}),g&&At.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),a&&zl(r)&&zl(n)?At.createElement(tTe,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);d1.displayName="BaseEdge";function ng(t,e,r){return r===void 0?r:n=>{const a=e().edges.find(s=>s.id===t);a&&r(n,{...a})}}function oQ({sourceX:t,sourceY:e,targetX:r,targetY:n}){const a=Math.abs(r-t)/2,s=r<t?r+a:r-a,i=Math.abs(n-e)/2,o=n<e?n+i:n-i;return[s,o,a,i]}function lQ({sourceX:t,sourceY:e,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const l=t*.125+a*.375+i*.375+r*.125,u=e*.125+s*.375+o*.375+n*.125,d=Math.abs(l-t),h=Math.abs(u-e);return[l,u,d,h]}var Lh;(function(t){t.Strict="strict",t.Loose="loose"})(Lh||(Lh={}));var Ah;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ah||(Ah={}));var Ix;(function(t){t.Partial="partial",t.Full="full"})(Ix||(Ix={}));var Vd;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Vd||(Vd={}));var Yy;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Yy||(Yy={}));var lr;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(lr||(lr={}));function RR({pos:t,x1:e,y1:r,x2:n,y2:a}){return t===lr.Left||t===lr.Right?[.5*(e+n),r]:[e,.5*(r+a)]}function cQ({sourceX:t,sourceY:e,sourcePosition:r=lr.Bottom,targetX:n,targetY:a,targetPosition:s=lr.Top}){const[i,o]=RR({pos:r,x1:t,y1:e,x2:n,y2:a}),[l,u]=RR({pos:s,x1:n,y1:a,x2:t,y2:e}),[d,h,m,g]=lQ({sourceX:t,sourceY:e,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${t},${e} C${i},${o} ${l},${u} ${n},${a}`,d,h,m,g]}const PT=ee.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:a=lr.Bottom,targetPosition:s=lr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:y})=>{const[E,B,k]=cQ({sourceX:t,sourceY:e,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return At.createElement(d1,{path:E,labelX:B,labelY:k,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:y})});PT.displayName="SimpleBezierEdge";const LR={[lr.Left]:{x:-1,y:0},[lr.Right]:{x:1,y:0},[lr.Top]:{x:0,y:-1},[lr.Bottom]:{x:0,y:1}},oTe=({source:t,sourcePosition:e=lr.Bottom,target:r})=>e===lr.Left||e===lr.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},UR=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function lTe({source:t,sourcePosition:e=lr.Bottom,target:r,targetPosition:n=lr.Top,center:a,offset:s}){const i=LR[e],o=LR[n],l={x:t.x+i.x*s,y:t.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=oTe({source:l,sourcePosition:e,target:u}),h=d.x!==0?"x":"y",m=d[h];let g=[],b,y;const E={x:0,y:0},B={x:0,y:0},[k,L,M,P]=oQ({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(i[h]*o[h]===-1){b=a.x??k,y=a.y??L;const C=[{x:b,y:l.y},{x:b,y:u.y}],S=[{x:l.x,y},{x:u.x,y}];i[h]===m?g=h==="x"?C:S:g=h==="x"?S:C}else{const C=[{x:l.x,y:u.y}],S=[{x:u.x,y:l.y}];if(h==="x"?g=i.x===m?S:C:g=i.y===m?C:S,e===n){const O=Math.abs(t[h]-r[h]);if(O<=s){const z=Math.min(s-1,s-O);i[h]===m?E[h]=(l[h]>t[h]?-1:1)*z:B[h]=(u[h]>r[h]?-1:1)*z}}if(e!==n){const O=h==="x"?"y":"x",z=i[h]===o[O],re=l[O]>u[O],Y=l[O]<u[O];(i[h]===1&&(!z&&re||z&&Y)||i[h]!==1&&(!z&&Y||z&&re))&&(g=h==="x"?C:S)}const N={x:l.x+E.x,y:l.y+E.y},Q={x:u.x+B.x,y:u.y+B.y},D=Math.max(Math.abs(N.x-g[0].x),Math.abs(Q.x-g[0].x)),I=Math.max(Math.abs(N.y-g[0].y),Math.abs(Q.y-g[0].y));D>=I?(b=(N.x+Q.x)/2,y=g[0].y):(b=g[0].x,y=(N.y+Q.y)/2)}return[[t,{x:l.x+E.x,y:l.y+E.y},...g,{x:u.x+B.x,y:u.y+B.y},r],b,y,M,P]}function cTe(t,e,r,n){const a=Math.min(UR(t,e)/2,UR(e,r)/2,n),{x:s,y:i}=e;if(t.x===s&&s===r.x||t.y===i&&i===r.y)return`L${s} ${i}`;if(t.y===i){const u=t.x<r.x?-1:1,d=t.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=t.x<r.x?1:-1,l=t.y<r.y?-1:1;return`L ${s},${i+a*l}Q ${s},${i} ${s+a*o},${i}`}function nS({sourceX:t,sourceY:e,sourcePosition:r=lr.Bottom,targetX:n,targetY:a,targetPosition:s=lr.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,h,m,g,b]=lTe({source:{x:t,y:e},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:l},offset:u});return[d.reduce((E,B,k)=>{let L="";return k>0&&k<d.length-1?L=cTe(d[k-1],B,d[k+1],i):L=`${k===0?"M":"L"}${B.x} ${B.y}`,E+=L,E},""),h,m,g,b]}const mb=ee.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:h=lr.Bottom,targetPosition:m=lr.Top,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:E})=>{const[B,k,L]=nS({sourceX:t,sourceY:e,sourcePosition:h,targetX:r,targetY:n,targetPosition:m,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return At.createElement(d1,{path:B,labelX:k,labelY:L,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:g,markerStart:b,interactionWidth:E})});mb.displayName="SmoothStepEdge";const jT=ee.memo(t=>{var e;return At.createElement(mb,{...t,pathOptions:ee.useMemo(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});jT.displayName="StepEdge";function uTe({sourceX:t,sourceY:e,targetX:r,targetY:n}){const[a,s,i,o]=oQ({sourceX:t,sourceY:e,targetX:r,targetY:n});return[`M ${t},${e}L ${r},${n}`,a,s,i,o]}const OT=ee.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g})=>{const[b,y,E]=uTe({sourceX:t,sourceY:e,targetX:r,targetY:n});return At.createElement(d1,{path:b,labelX:y,labelY:E,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g})});OT.displayName="StraightEdge";function A2(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function MR({pos:t,x1:e,y1:r,x2:n,y2:a,c:s}){switch(t){case lr.Left:return[e-A2(e-n,s),r];case lr.Right:return[e+A2(n-e,s),r];case lr.Top:return[e,r-A2(r-a,s)];case lr.Bottom:return[e,r+A2(a-r,s)]}}function uQ({sourceX:t,sourceY:e,sourcePosition:r=lr.Bottom,targetX:n,targetY:a,targetPosition:s=lr.Top,curvature:i=.25}){const[o,l]=MR({pos:r,x1:t,y1:e,x2:n,y2:a,c:i}),[u,d]=MR({pos:s,x1:n,y1:a,x2:t,y2:e,c:i}),[h,m,g,b]=lQ({sourceX:t,sourceY:e,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${n},${a}`,h,m,g,b]}const Jy=ee.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:a=lr.Bottom,targetPosition:s=lr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:E})=>{const[B,k,L]=uQ({sourceX:t,sourceY:e,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:y==null?void 0:y.curvature});return At.createElement(d1,{path:B,labelX:k,labelY:L,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:E})});Jy.displayName="BezierEdge";const QT=ee.createContext(null),ATe=QT.Provider;QT.Consumer;const dTe=()=>ee.useContext(QT),fTe=t=>"id"in t&&"source"in t&&"target"in t,hTe=({source:t,sourceHandle:e,target:r,targetHandle:n})=>`reactflow__edge-${t}${e||""}-${r}${n||""}`,aS=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("&")}`,mTe=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),pTe=(t,e)=>{if(!t.source||!t.target)return e;let r;return fTe(t)?r={...t}:r={...t,id:hTe(t)},mTe(r,e)?e:e.concat(r)},sS=({x:t,y:e},[r,n,a],s,[i,o])=>{const l={x:(t-r)/a,y:(e-n)/a};return s?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},AQ=({x:t,y:e},[r,n,a])=>({x:t*a+r,y:e*a+n}),Cm=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(t.width??0)*e[0],n=(t.height??0)*e[1],a={x:t.position.x-r,y:t.position.y-n};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-n}:a}},HT=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((n,a)=>{const{x:s,y:i}=Cm(a,e).positionAbsolute;return rTe(n,MT({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return nTe(r)},dQ=(t,e,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const l={x:(e.x-r)/a,y:(e.y-n)/a,width:e.width/a,height:e.height/a},u=[];return t.forEach(d=>{const{width:h,height:m,selectable:g=!0,hidden:b=!1}=d;if(i&&!g||b)return!1;const{positionAbsolute:y}=Cm(d,o),E={x:y.x,y:y.y,width:h||0,height:m||0},B=tS(l,E),k=typeof h>"u"||typeof m>"u"||h===null||m===null,L=s&&B>0,M=(h||0)*(m||0);(k||L||B>=M||d.dragging)&&u.push(d)}),u},fQ=(t,e)=>{const r=t.map(n=>n.id);return e.filter(n=>r.includes(n.source)||r.includes(n.target))},hQ=(t,e,r,n,a,s=.1)=>{const i=e/(t.width*(1+s)),o=r/(t.height*(1+s)),l=Math.min(i,o),u=Qm(l,n,a),d=t.x+t.width/2,h=t.y+t.height/2,m=e/2-d*u,g=r/2-h*u;return{x:m,y:g,zoom:u}},rh=(t,e=0)=>t.transition().duration(e);function PR(t,e,r,n){return(e[r]||[]).reduce((a,s)=>{var i,o;return`${t.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function gTe(t,e,r,n,a,s){const{x:i,y:o}=sf(t),u=e.elementsFromPoint(i,o).find(b=>b.classList.contains("react-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const y=VT(void 0,u),E=u.getAttribute("data-handleid"),B=s({nodeId:b,id:E,type:y});if(B){const k=a.find(L=>L.nodeId===b&&L.type===y&&L.id===E);return{handle:{id:E,type:y,nodeId:b,x:(k==null?void 0:k.x)||r.x,y:(k==null?void 0:k.y)||r.y},validHandleResult:B}}}}let d=[],h=1/0;if(a.forEach(b=>{const y=Math.sqrt((b.x-r.x)**2+(b.y-r.y)**2);if(y<=n){const E=s(b);y<=h&&(y<h?d=[{handle:b,validHandleResult:E}]:y===h&&d.push({handle:b,validHandleResult:E}),h=y)}}),!d.length)return{handle:null,validHandleResult:mQ()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:b})=>b.isValid),g=d.some(({handle:b})=>b.type==="target");return d.find(({handle:b,validHandleResult:y})=>g?b.type==="target":m?y.isValid:!0)||d[0]}const xTe={source:null,target:null,sourceHandle:null,targetHandle:null},mQ=()=>({handleDomNode:null,isValid:!1,connection:xTe,endHandle:null});function pQ(t,e,r,n,a,s,i){const o=a==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...mQ(),handleDomNode:l};if(l){const d=VT(void 0,l),h=l.getAttribute("data-nodeid"),m=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),b=l.classList.contains("connectableend"),y={source:o?h:r,sourceHandle:o?m:n,target:o?r:h,targetHandle:o?n:m};u.connection=y,g&&b&&(e===Lh.Strict?o&&d==="source"||!o&&d==="target":h!==r||m!==n)&&(u.endHandle={nodeId:h,handleId:m,type:d},u.isValid=s(y))}return u}function vTe({nodes:t,nodeId:e,handleId:r,handleType:n}){return t.reduce((a,s)=>{if(s[Ga]){const{handleBounds:i}=s[Ga];let o=[],l=[];i&&(o=PR(s,i,"source",`${e}-${r}-${n}`),l=PR(s,i,"target",`${e}-${r}-${n}`)),a.push(...o,...l)}return a},[])}function VT(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function i_(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function yTe(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function gQ({event:t,handleId:e,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=aQ(t.target),{connectionMode:h,domNode:m,autoPanOnConnect:g,connectionRadius:b,onConnectStart:y,panBy:E,getNodes:B,cancelConnection:k}=s();let L=0,M;const{x:P,y:R}=sf(t),C=d==null?void 0:d.elementFromPoint(P,R),S=VT(l,C),N=m==null?void 0:m.getBoundingClientRect();if(!N||!S)return;let Q,D=sf(t,N),I=!1,O=null,z=!1,re=null;const Y=vTe({nodes:B(),nodeId:r,handleId:e,handleType:S}),ae=()=>{if(!g)return;const[W,ie]=nQ(D,N);E({x:W,y:ie}),L=requestAnimationFrame(ae)};i({connectionPosition:D,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:S,connectionStartHandle:{nodeId:r,handleId:e,type:S},connectionEndHandle:null}),y==null||y(t,{nodeId:r,handleId:e,handleType:S});function K(W){const{transform:ie}=s();D=sf(W,N);const{handle:j,validHandleResult:X}=gTe(W,d,sS(D,ie,!1,[1,1]),b,Y,Z=>pQ(Z,h,r,e,a?"target":"source",o,d));if(M=j,I||(ae(),I=!0),re=X.handleDomNode,O=X.connection,z=X.isValid,i({connectionPosition:M&&z?AQ({x:M.x,y:M.y},ie):D,connectionStatus:yTe(!!M,z),connectionEndHandle:X.endHandle}),!M&&!z&&!re)return i_(Q);O.source!==O.target&&re&&(i_(Q),Q=re,re.classList.add("connecting","react-flow__handle-connecting"),re.classList.toggle("valid",z),re.classList.toggle("react-flow__handle-valid",z))}function G(W){var ie,j;(M||re)&&O&&z&&(n==null||n(O)),(j=(ie=s()).onConnectEnd)==null||j.call(ie,W),l&&(u==null||u(W)),i_(Q),k(),cancelAnimationFrame(L),I=!1,z=!1,O=null,re=null,d.removeEventListener("mousemove",K),d.removeEventListener("mouseup",G),d.removeEventListener("touchmove",K),d.removeEventListener("touchend",G)}d.addEventListener("mousemove",K),d.addEventListener("mouseup",G),d.addEventListener("touchmove",K),d.addEventListener("touchend",G)}const jR=()=>!0,wTe=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),bTe=(t,e,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===r}},xQ=ee.forwardRef(({type:t="source",position:e=lr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:h,...m},g)=>{var N,Q;const b=i||null,y=t==="target",E=Zs(),B=dTe(),{connectOnClick:k,noPanClassName:L}=Da(wTe,Ki),{connecting:M,clickConnecting:P}=Da(bTe(B,b,t),Ki);B||(Q=(N=E.getState()).onError)==null||Q.call(N,"010",OA.error010());const R=D=>{const{defaultEdgeOptions:I,onConnect:O,hasDefaultEdges:z}=E.getState(),re={...I,...D};if(z){const{edges:Y,setEdges:ae}=E.getState();ae(pTe(re,Y))}O==null||O(re),o==null||o(re)},C=D=>{if(!B)return;const I=iQ(D);a&&(I&&D.button===0||!I)&&gQ({event:D,handleId:b,nodeId:B,onConnect:R,isTarget:y,getState:E.getState,setState:E.setState,isValidConnection:r||E.getState().isValidConnection||jR}),I?d==null||d(D):h==null||h(D)},S=D=>{const{onClickConnectStart:I,onClickConnectEnd:O,connectionClickStartHandle:z,connectionMode:re,isValidConnection:Y}=E.getState();if(!B||!z&&!a)return;if(!z){I==null||I(D,{nodeId:B,handleId:b,handleType:t}),E.setState({connectionClickStartHandle:{nodeId:B,type:t,handleId:b}});return}const ae=aQ(D.target),K=r||Y||jR,{connection:G,isValid:W}=pQ({nodeId:B,id:b,type:t},re,z.nodeId,z.handleId||null,z.type,K,ae);W&&R(G),O==null||O(D),E.setState({connectionClickStartHandle:null})};return At.createElement("div",{"data-handleid":b,"data-nodeid":B,"data-handlepos":e,"data-id":`${B}-${b}-${t}`,className:io(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",L,u,{source:!y,target:y,connectable:n,connectablestart:a,connectableend:s,connecting:P,connectionindicator:n&&(a&&!M||s&&M)}]),onMouseDown:C,onTouchStart:C,onClick:k?S:void 0,ref:g,...m},l)});xQ.displayName="Handle";var Zy=ee.memo(xQ);const vQ=({data:t,isConnectable:e,targetPosition:r=lr.Top,sourcePosition:n=lr.Bottom})=>At.createElement(At.Fragment,null,At.createElement(Zy,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,At.createElement(Zy,{type:"source",position:n,isConnectable:e}));vQ.displayName="DefaultNode";var iS=ee.memo(vQ);const yQ=({data:t,isConnectable:e,sourcePosition:r=lr.Bottom})=>At.createElement(At.Fragment,null,t==null?void 0:t.label,At.createElement(Zy,{type:"source",position:r,isConnectable:e}));yQ.displayName="InputNode";var wQ=ee.memo(yQ);const bQ=({data:t,isConnectable:e,targetPosition:r=lr.Top})=>At.createElement(At.Fragment,null,At.createElement(Zy,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label);bQ.displayName="OutputNode";var CQ=ee.memo(bQ);const zT=()=>null;zT.displayName="GroupNode";const CTe=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),d2=t=>t.id;function ETe(t,e){return Ki(t.selectedNodes.map(d2),e.selectedNodes.map(d2))&&Ki(t.selectedEdges.map(d2),e.selectedEdges.map(d2))}const EQ=ee.memo(({onSelectionChange:t})=>{const e=Zs(),{selectedNodes:r,selectedEdges:n}=Da(CTe,ETe);return ee.useEffect(()=>{const a={nodes:r,edges:n};t==null||t(a),e.getState().onSelectionChange.forEach(s=>s(a))},[r,n,t]),null});EQ.displayName="SelectionListener";const _Te=t=>!!t.onSelectionChange;function STe({onSelectionChange:t}){const e=Da(_Te);return t||e?At.createElement(EQ,{onSelectionChange:t}):null}const TTe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function M0(t,e){ee.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function tn(t,e,r){ee.useEffect(()=>{typeof e<"u"&&r({[t]:e})},[e])}const BTe=({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:h,edgesFocusable:m,edgesUpdatable:g,elevateNodesOnSelect:b,minZoom:y,maxZoom:E,nodeExtent:B,onNodesChange:k,onEdgesChange:L,elementsSelectable:M,connectionMode:P,snapGrid:R,snapToGrid:C,translateExtent:S,connectOnClick:N,defaultEdgeOptions:Q,fitView:D,fitViewOptions:I,onNodesDelete:O,onEdgesDelete:z,onNodeDrag:re,onNodeDragStart:Y,onNodeDragStop:ae,onSelectionDrag:K,onSelectionDragStart:G,onSelectionDragStop:W,noPanClassName:ie,nodeOrigin:j,rfId:X,autoPanOnConnect:Z,autoPanOnNodeDrag:te,onError:ce,connectionRadius:de,isValidConnection:me,nodeDragThreshold:ge})=>{const{setNodes:Te,setEdges:xe,setDefaultNodesAndEdges:oe,setMinZoom:Me,setMaxZoom:at,setTranslateExtent:Se,setNodeExtent:be,reset:je}=Da(TTe,Ki),Ke=Zs();return ee.useEffect(()=>{const st=n==null?void 0:n.map(pt=>({...pt,...Q}));return oe(r,st),()=>{je()}},[]),tn("defaultEdgeOptions",Q,Ke.setState),tn("connectionMode",P,Ke.setState),tn("onConnect",a,Ke.setState),tn("onConnectStart",s,Ke.setState),tn("onConnectEnd",i,Ke.setState),tn("onClickConnectStart",o,Ke.setState),tn("onClickConnectEnd",l,Ke.setState),tn("nodesDraggable",u,Ke.setState),tn("nodesConnectable",d,Ke.setState),tn("nodesFocusable",h,Ke.setState),tn("edgesFocusable",m,Ke.setState),tn("edgesUpdatable",g,Ke.setState),tn("elementsSelectable",M,Ke.setState),tn("elevateNodesOnSelect",b,Ke.setState),tn("snapToGrid",C,Ke.setState),tn("snapGrid",R,Ke.setState),tn("onNodesChange",k,Ke.setState),tn("onEdgesChange",L,Ke.setState),tn("connectOnClick",N,Ke.setState),tn("fitViewOnInit",D,Ke.setState),tn("fitViewOnInitOptions",I,Ke.setState),tn("onNodesDelete",O,Ke.setState),tn("onEdgesDelete",z,Ke.setState),tn("onNodeDrag",re,Ke.setState),tn("onNodeDragStart",Y,Ke.setState),tn("onNodeDragStop",ae,Ke.setState),tn("onSelectionDrag",K,Ke.setState),tn("onSelectionDragStart",G,Ke.setState),tn("onSelectionDragStop",W,Ke.setState),tn("noPanClassName",ie,Ke.setState),tn("nodeOrigin",j,Ke.setState),tn("rfId",X,Ke.setState),tn("autoPanOnConnect",Z,Ke.setState),tn("autoPanOnNodeDrag",te,Ke.setState),tn("onError",ce,Ke.setState),tn("connectionRadius",de,Ke.setState),tn("isValidConnection",me,Ke.setState),tn("nodeDragThreshold",ge,Ke.setState),M0(t,Te),M0(e,xe),M0(y,Me),M0(E,at),M0(S,Se),M0(B,be),null},OR={display:"none"},NTe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},_Q="react-flow__node-desc",SQ="react-flow__edge-desc",kTe="react-flow__aria-live",ITe=t=>t.ariaLiveMessage;function FTe({rfId:t}){const e=Da(ITe);return At.createElement("div",{id:`${kTe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:NTe},e)}function DTe({rfId:t,disableKeyboardA11y:e}){return At.createElement(At.Fragment,null,At.createElement("div",{id:`${_Q}-${t}`,style:OR},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),At.createElement("div",{id:`${SQ}-${t}`,style:OR},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&At.createElement(FTe,{rfId:t}))}var Fx=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,n]=ee.useState(!1),a=ee.useRef(!1),s=ee.useRef(new Set([])),[i,o]=ee.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=u.reduce((h,m)=>h.concat(...m),[]);return[u,d]}return[[],[]]},[t]);return ee.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const d=g=>{if(a.current=g.ctrlKey||g.metaKey||g.shiftKey,(!a.current||a.current&&!e.actInsideInputWithModifier)&&rS(g))return!1;const y=HR(g.code,o);s.current.add(g[y]),QR(i,s.current,!1)&&(g.preventDefault(),n(!0))},h=g=>{if((!a.current||a.current&&!e.actInsideInputWithModifier)&&rS(g))return!1;const y=HR(g.code,o);QR(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(g[y]),g.key==="Meta"&&s.current.clear(),a.current=!1},m=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",h),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[t,n]),r};function QR(t,e,r){return t.filter(n=>r||n.length===e.size).some(n=>n.every(a=>e.has(a)))}function HR(t,e){return e.includes(t)?"code":"key"}function TQ(t,e,r,n){var o,l;const a=t.parentNode||t.parentId;if(!a)return r;const s=e.get(a),i=Cm(s,n);return TQ(s,e,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[Ga])==null?void 0:o.z)??0)>(r.z??0)?((l=s[Ga])==null?void 0:l.z)??0:r.z??0},n)}function BQ(t,e,r){t.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:l}=TQ(n,t,{...n.position,z:((s=n[Ga])==null?void 0:s.z)??0},e);n.positionAbsolute={x:i,y:o},n[Ga].z=l,r!=null&&r[n.id]&&(n[Ga].isParent=!0)}})}function o_(t,e,r,n){const a=new Map,s={},i=n?1e3:0;return t.forEach(o=>{var g;const l=(zl(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(s[h]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Ga,{enumerable:!1,value:{handleBounds:m||(g=u==null?void 0:u[Ga])==null?void 0:g.handleBounds,z:l}}),a.set(o.id,d)}),BQ(a,r,s),a}function NQ(t,e={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:h}=t(),m=e.initial&&!u&&d;if(o&&l&&(m||!e.initial)){const b=r().filter(E=>{var k;const B=e.includeHiddenNodes?E.width&&E.height:!E.hidden;return(k=e.nodes)!=null&&k.length?B&&e.nodes.some(L=>L.id===E.id):B}),y=b.every(E=>E.width&&E.height);if(b.length>0&&y){const E=HT(b,h),{x:B,y:k,zoom:L}=hQ(E,n,a,e.minZoom??s,e.maxZoom??i,e.padding??.1),M=af.translate(B,k).scale(L);return typeof e.duration=="number"&&e.duration>0?o.transform(rh(l,e.duration),M):o.transform(l,M),!0}}return!1}function RTe(t,e){return t.forEach(r=>{const n=e.get(r.id);n&&e.set(n.id,{...n,[Ga]:n[Ga],selected:r.selected})}),new Map(e)}function LTe(t,e){return e.map(r=>{const n=t.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function f2({changedNodes:t,changedEdges:e,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=r();t!=null&&t.length&&(l&&n({nodeInternals:RTe(t,a)}),i==null||i(t)),e!=null&&e.length&&(u&&n({edges:LTe(e,s)}),o==null||o(e))}const P0=()=>{},UTe={zoomIn:P0,zoomOut:P0,zoomTo:P0,getZoom:()=>1,setViewport:P0,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:P0,fitBounds:P0,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},MTe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),PTe=()=>{const t=Zs(),{d3Zoom:e,d3Selection:r}=Da(MTe,Ki);return ee.useMemo(()=>r&&e?{zoomIn:a=>e.scaleBy(rh(r,a==null?void 0:a.duration),1.2),zoomOut:a=>e.scaleBy(rh(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>e.scaleTo(rh(r,s==null?void 0:s.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,s)=>{const[i,o,l]=t.getState().transform,u=af.translate(a.x??i,a.y??o).scale(a.zoom??l);e.transform(rh(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=t.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>NQ(t.getState,a),setCenter:(a,s,i)=>{const{width:o,height:l,maxZoom:u}=t.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,h=o/2-a*d,m=l/2-s*d,g=af.translate(h,m).scale(d);e.transform(rh(r,i==null?void 0:i.duration),g)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=t.getState(),{x:d,y:h,zoom:m}=hQ(a,i,o,l,u,(s==null?void 0:s.padding)??.1),g=af.translate(d,h).scale(m);e.transform(rh(r,s==null?void 0:s.duration),g)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),sS(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return a;const{x:u,y:d}=l.getBoundingClientRect(),h={x:a.x-u,y:a.y-d};return sS(h,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=t.getState();if(!i)return a;const{x:o,y:l}=i.getBoundingClientRect(),u=AQ(a,s);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:UTe,[e,r])};function pb(){const t=PTe(),e=Zs(),r=ee.useCallback(()=>e.getState().getNodes().map(y=>({...y})),[]),n=ee.useCallback(y=>e.getState().nodeInternals.get(y),[]),a=ee.useCallback(()=>{const{edges:y=[]}=e.getState();return y.map(E=>({...E}))},[]),s=ee.useCallback(y=>{const{edges:E=[]}=e.getState();return E.find(B=>B.id===y)},[]),i=ee.useCallback(y=>{const{getNodes:E,setNodes:B,hasDefaultNodes:k,onNodesChange:L}=e.getState(),M=E(),P=typeof y=="function"?y(M):y;if(k)B(P);else if(L){const R=P.length===0?M.map(C=>({type:"remove",id:C.id})):P.map(C=>({item:C,type:"reset"}));L(R)}},[]),o=ee.useCallback(y=>{const{edges:E=[],setEdges:B,hasDefaultEdges:k,onEdgesChange:L}=e.getState(),M=typeof y=="function"?y(E):y;if(k)B(M);else if(L){const P=M.length===0?E.map(R=>({type:"remove",id:R.id})):M.map(R=>({item:R,type:"reset"}));L(P)}},[]),l=ee.useCallback(y=>{const E=Array.isArray(y)?y:[y],{getNodes:B,setNodes:k,hasDefaultNodes:L,onNodesChange:M}=e.getState();if(L){const R=[...B(),...E];k(R)}else if(M){const P=E.map(R=>({item:R,type:"add"}));M(P)}},[]),u=ee.useCallback(y=>{const E=Array.isArray(y)?y:[y],{edges:B=[],setEdges:k,hasDefaultEdges:L,onEdgesChange:M}=e.getState();if(L)k([...B,...E]);else if(M){const P=E.map(R=>({item:R,type:"add"}));M(P)}},[]),d=ee.useCallback(()=>{const{getNodes:y,edges:E=[],transform:B}=e.getState(),[k,L,M]=B;return{nodes:y().map(P=>({...P})),edges:E.map(P=>({...P})),viewport:{x:k,y:L,zoom:M}}},[]),h=ee.useCallback(({nodes:y,edges:E})=>{const{nodeInternals:B,getNodes:k,edges:L,hasDefaultNodes:M,hasDefaultEdges:P,onNodesDelete:R,onEdgesDelete:C,onNodesChange:S,onEdgesChange:N}=e.getState(),Q=(y||[]).map(re=>re.id),D=(E||[]).map(re=>re.id),I=k().reduce((re,Y)=>{const ae=Y.parentNode||Y.parentId,K=!Q.includes(Y.id)&&ae&&re.find(W=>W.id===ae);return(typeof Y.deletable=="boolean"?Y.deletable:!0)&&(Q.includes(Y.id)||K)&&re.push(Y),re},[]),O=L.filter(re=>typeof re.deletable=="boolean"?re.deletable:!0),z=O.filter(re=>D.includes(re.id));if(I||z){const re=fQ(I,O),Y=[...z,...re],ae=Y.reduce((K,G)=>(K.includes(G.id)||K.push(G.id),K),[]);if((P||M)&&(P&&e.setState({edges:L.filter(K=>!ae.includes(K.id))}),M&&(I.forEach(K=>{B.delete(K.id)}),e.setState({nodeInternals:new Map(B)}))),ae.length>0&&(C==null||C(Y),N&&N(ae.map(K=>({id:K,type:"remove"})))),I.length>0&&(R==null||R(I),S)){const K=I.map(G=>({id:G.id,type:"remove"}));S(K)}}},[]),m=ee.useCallback(y=>{const E=aTe(y),B=E?null:e.getState().nodeInternals.get(y.id);return!E&&!B?[null,null,E]:[E?y:DR(B),B,E]},[]),g=ee.useCallback((y,E=!0,B)=>{const[k,L,M]=m(y);return k?(B||e.getState().getNodes()).filter(P=>{if(!M&&(P.id===L.id||!P.positionAbsolute))return!1;const R=DR(P),C=tS(R,k);return E&&C>0||C>=k.width*k.height}):[]},[]),b=ee.useCallback((y,E,B=!0)=>{const[k]=m(y);if(!k)return!1;const L=tS(k,E);return B&&L>0||L>=k.width*k.height},[]);return ee.useMemo(()=>({...t,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:h,getIntersectingNodes:g,isNodeIntersecting:b}),[t,r,n,a,s,i,o,l,u,d,h,g,b])}const jTe={actInsideInputWithModifier:!1};var OTe=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=Zs(),{deleteElements:n}=pb(),a=Fx(t,jTe),s=Fx(e);ee.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:l,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),ee.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function QTe(t){const e=Zs();ee.useEffect(()=>{let r;const n=()=>{var s,i;if(!t.current)return;const a=LT(t.current);(a.height===0||a.width===0)&&((i=(s=e.getState()).onError)==null||i.call(s,"004",OA.error004())),e.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),t.current&&(r=new ResizeObserver(()=>n()),r.observe(t.current)),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}},[])}const GT={position:"absolute",width:"100%",height:"100%",top:0,left:0},HTe=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,h2=t=>({x:t.x,y:t.y,zoom:t.k}),j0=(t,e)=>t.target.closest(`.${e}`),VR=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),zR=t=>{const e=t.ctrlKey&&Xy()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},VTe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),zTe=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Ah.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:m,translateExtent:g,minZoom:b,maxZoom:y,zoomActivationKeyCode:E,preventScrolling:B=!0,children:k,noWheelClassName:L,noPanClassName:M})=>{const P=ee.useRef(),R=Zs(),C=ee.useRef(!1),S=ee.useRef(!1),N=ee.useRef(null),Q=ee.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:I,d3ZoomHandler:O,userSelectionActive:z}=Da(VTe,Ki),re=Fx(E),Y=ee.useRef(0),ae=ee.useRef(!1),K=ee.useRef();return QTe(N),ee.useEffect(()=>{if(N.current){const G=N.current.getBoundingClientRect(),W=X4e().scaleExtent([b,y]).translateExtent(g),ie=Ec(N.current).call(W),j=af.translate(m.x,m.y).scale(Qm(m.zoom,b,y)),X=[[0,0],[G.width,G.height]],Z=W.constrain()(j,X,g);W.transform(ie,Z),W.wheelDelta(zR),R.setState({d3Zoom:W,d3Selection:ie,d3ZoomHandler:ie.on("wheel.zoom"),transform:[Z.x,Z.y,Z.k],domNode:N.current.closest(".react-flow")})}},[]),ee.useEffect(()=>{I&&D&&(i&&!re&&!z?I.on("wheel.zoom",G=>{if(j0(G,L))return!1;G.preventDefault(),G.stopImmediatePropagation();const W=I.property("__zoom").k||1;if(G.ctrlKey&&s){const me=wu(G),ge=zR(G),Te=W*Math.pow(2,ge);D.scaleTo(I,Te,me,G);return}const ie=G.deltaMode===1?20:1;let j=l===Ah.Vertical?0:G.deltaX*ie,X=l===Ah.Horizontal?0:G.deltaY*ie;!Xy()&&G.shiftKey&&l!==Ah.Vertical&&(j=G.deltaY*ie,X=0),D.translateBy(I,-(j/W)*o,-(X/W)*o,{internal:!0});const Z=h2(I.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ce,onViewportChangeEnd:de}=R.getState();clearTimeout(K.current),ae.current||(ae.current=!0,e==null||e(G,Z),te==null||te(Z)),ae.current&&(t==null||t(G,Z),ce==null||ce(Z),K.current=setTimeout(()=>{r==null||r(G,Z),de==null||de(Z),ae.current=!1},150))},{passive:!1}):typeof O<"u"&&I.on("wheel.zoom",function(G,W){if(!B&&G.type==="wheel"&&!G.ctrlKey||j0(G,L))return null;G.preventDefault(),O.call(this,G,W)},{passive:!1}))},[z,i,l,I,D,O,re,s,B,L,e,t,r]),ee.useEffect(()=>{D&&D.on("start",G=>{var j,X;if(!G.sourceEvent||G.sourceEvent.internal)return null;Y.current=(j=G.sourceEvent)==null?void 0:j.button;const{onViewportChangeStart:W}=R.getState(),ie=h2(G.transform);C.current=!0,Q.current=ie,((X=G.sourceEvent)==null?void 0:X.type)==="mousedown"&&R.setState({paneDragging:!0}),W==null||W(ie),e==null||e(G.sourceEvent,ie)})},[D,e]),ee.useEffect(()=>{D&&(z&&!C.current?D.on("zoom",null):z||D.on("zoom",G=>{var ie;const{onViewportChange:W}=R.getState();if(R.setState({transform:[G.transform.x,G.transform.y,G.transform.k]}),S.current=!!(n&&VR(h,Y.current??0)),(t||W)&&!((ie=G.sourceEvent)!=null&&ie.internal)){const j=h2(G.transform);W==null||W(j),t==null||t(G.sourceEvent,j)}}))},[z,D,t,h,n]),ee.useEffect(()=>{D&&D.on("end",G=>{if(!G.sourceEvent||G.sourceEvent.internal)return null;const{onViewportChangeEnd:W}=R.getState();if(C.current=!1,R.setState({paneDragging:!1}),n&&VR(h,Y.current??0)&&!S.current&&n(G.sourceEvent),S.current=!1,(r||W)&&HTe(Q.current,G.transform)){const ie=h2(G.transform);Q.current=ie,clearTimeout(P.current),P.current=setTimeout(()=>{W==null||W(ie),r==null||r(G.sourceEvent,ie)},i?150:0)}})},[D,i,h,r,n]),ee.useEffect(()=>{D&&D.filter(G=>{const W=re||a,ie=s&&G.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&G.button===1&&G.type==="mousedown"&&(j0(G,"react-flow__node")||j0(G,"react-flow__edge")))return!0;if(!h&&!W&&!i&&!u&&!s||z||!u&&G.type==="dblclick"||j0(G,L)&&G.type==="wheel"||j0(G,M)&&(G.type!=="wheel"||i&&G.type==="wheel"&&!re)||!s&&G.ctrlKey&&G.type==="wheel"||!W&&!i&&!ie&&G.type==="wheel"||!h&&(G.type==="mousedown"||G.type==="touchstart")||Array.isArray(h)&&!h.includes(G.button)&&G.type==="mousedown")return!1;const j=Array.isArray(h)&&h.includes(G.button)||!G.button||G.button<=1;return(!G.ctrlKey||G.type==="wheel")&&j})},[z,D,a,s,i,u,h,d,re]),At.createElement("div",{className:"react-flow__renderer",ref:N,style:GT},k)},GTe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function qTe(){const{userSelectionActive:t,userSelectionRect:e}=Da(GTe,Ki);return t&&e?At.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function GR(t,e){const r=e.parentNode||e.parentId,n=t.find(a=>a.id===r);if(n){const a=e.position.x+e.width-n.width,s=e.position.y+e.height-n.height;if(a>0||s>0||e.position.x<0||e.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),e.position.x<0){const i=Math.abs(e.position.x);n.position.x=n.position.x-i,n.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);n.position.y=n.position.y-i,n.style.height+=i,e.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function kQ(t,e){if(t.some(n=>n.type==="reset"))return t.filter(n=>n.type==="reset").map(n=>n.item);const r=t.filter(n=>n.type==="add").map(n=>n.item);return e.reduce((n,a)=>{const s=t.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&GR(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&GR(n,i);break}case"remove":return n}return n.push(i),n},r)}function IQ(t,e){return kQ(t,e)}function KTe(t,e){return kQ(t,e)}const Md=(t,e)=>({id:t,type:"select",selected:e});function nm(t,e){return t.reduce((r,n)=>{const a=e.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(Md(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(Md(n.id,!1))),r},[])}const l_=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},$Te=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),FQ=ee.memo(({isSelecting:t,selectionMode:e=Ix.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:h})=>{const m=ee.useRef(null),g=Zs(),b=ee.useRef(0),y=ee.useRef(0),E=ee.useRef(),{userSelectionActive:B,elementsSelectable:k,dragging:L}=Da($Te,Ki),M=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,y.current=0},P=O=>{s==null||s(O),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},R=O=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){O.preventDefault();return}i==null||i(O)},C=o?O=>o(O):void 0,S=O=>{const{resetSelectedElements:z,domNode:re}=g.getState();if(E.current=re==null?void 0:re.getBoundingClientRect(),!k||!t||O.button!==0||O.target!==m.current||!E.current)return;const{x:Y,y:ae}=sf(O,E.current);z(),g.setState({userSelectionRect:{width:0,height:0,startX:Y,startY:ae,x:Y,y:ae}}),n==null||n(O)},N=O=>{const{userSelectionRect:z,nodeInternals:re,edges:Y,transform:ae,onNodesChange:K,onEdgesChange:G,nodeOrigin:W,getNodes:ie}=g.getState();if(!t||!E.current||!z)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const j=sf(O,E.current),X=z.startX??0,Z=z.startY??0,te={...z,x:j.x<X?j.x:X,y:j.y<Z?j.y:Z,width:Math.abs(j.x-X),height:Math.abs(j.y-Z)},ce=ie(),de=dQ(re,te,ae,e===Ix.Partial,!0,W),me=fQ(de,Y).map(Te=>Te.id),ge=de.map(Te=>Te.id);if(b.current!==ge.length){b.current=ge.length;const Te=nm(ce,ge);Te.length&&(K==null||K(Te))}if(y.current!==me.length){y.current=me.length;const Te=nm(Y,me);Te.length&&(G==null||G(Te))}g.setState({userSelectionRect:te})},Q=O=>{if(O.button!==0)return;const{userSelectionRect:z}=g.getState();!B&&z&&O.target===m.current&&(P==null||P(O)),g.setState({nodesSelectionActive:b.current>0}),M(),a==null||a(O)},D=O=>{B&&(g.setState({nodesSelectionActive:b.current>0}),a==null||a(O)),M()},I=k&&(t||B);return At.createElement("div",{className:io(["react-flow__pane",{dragging:L,selection:t}]),onClick:I?void 0:l_(P,m),onContextMenu:l_(R,m),onWheel:l_(C,m),onMouseEnter:I?void 0:l,onMouseDown:I?S:void 0,onMouseMove:I?N:u,onMouseUp:I?Q:void 0,onMouseLeave:I?D:d,ref:m,style:GT},h,At.createElement(qTe,null))});FQ.displayName="Pane";function DQ(t,e){const r=t.parentNode||t.parentId;if(!r)return!1;const n=e.get(r);return n?n.selected?!0:DQ(n,e):!1}function qR(t,e,r){let n=t;do{if(n!=null&&n.matches(e))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function WTe(t,e,r,n){return Array.from(t.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!DQ(a,t))&&(a.draggable||e&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function XTe(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function RQ(t,e,r,n,a=[0,0],s){const i=XTe(t,t.extent||n);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=r.get(l),{x:m,y:g}=Cm(h,a).positionAbsolute;o=h&&zl(m)&&zl(g)&&zl(h.width)&&zl(h.height)?[[m+t.width*a[0],g+t.height*a[1]],[m+h.width-t.width+t.width*a[0],g+h.height-t.height+t.height*a[1]]]:o}else s==null||s("005",OA.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const h=r.get(l),{x:m,y:g}=Cm(h,a).positionAbsolute;o=[[t.extent[0][0]+m,t.extent[0][1]+g],[t.extent[1][0]+m,t.extent[1][1]+g]]}let u={x:0,y:0};if(l){const h=r.get(l);u=Cm(h,a).positionAbsolute}const d=o&&o!=="parent"?UT(e,o):e;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function c_({nodeId:t,dragItems:e,nodeInternals:r}){const n=e.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?n.find(a=>a.id===t):n[0],n]}const KR=(t,e,r,n)=>{const a=e.querySelectorAll(t);if(!a||!a.length)return null;const s=Array.from(a),i=e.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...LT(l)}})};function ag(t,e,r){return r===void 0?r:n=>{const a=e().nodeInternals.get(t);a&&r(n,{...a})}}function oS({id:t,store:e,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),u=o.get(t);if(!u){l==null||l("012",OA.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([t])}function YTe(){const t=Zs();return ee.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=t.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,l={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(l.x/a[0]):l.x,ySnapped:s?a[1]*Math.round(l.y/a[1]):l.y,...l}},[])}function u_(t){return(e,r,n)=>t==null?void 0:t(e,n)}function LQ({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=Zs(),[l,u]=ee.useState(!1),d=ee.useRef([]),h=ee.useRef({x:null,y:null}),m=ee.useRef(0),g=ee.useRef(null),b=ee.useRef({x:0,y:0}),y=ee.useRef(null),E=ee.useRef(!1),B=ee.useRef(!1),k=ee.useRef(!1),L=YTe();return ee.useEffect(()=>{if(t!=null&&t.current){const M=Ec(t.current),P=({x:S,y:N})=>{const{nodeInternals:Q,onNodeDrag:D,onSelectionDrag:I,updateNodePositions:O,nodeExtent:z,snapGrid:re,snapToGrid:Y,nodeOrigin:ae,onError:K}=o.getState();h.current={x:S,y:N};let G=!1,W={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&z){const j=HT(d.current,ae);W=MT(j)}if(d.current=d.current.map(j=>{const X={x:S-j.distance.x,y:N-j.distance.y};Y&&(X.x=re[0]*Math.round(X.x/re[0]),X.y=re[1]*Math.round(X.y/re[1]));const Z=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];d.current.length>1&&z&&!j.extent&&(Z[0][0]=j.positionAbsolute.x-W.x+z[0][0],Z[1][0]=j.positionAbsolute.x+(j.width??0)-W.x2+z[1][0],Z[0][1]=j.positionAbsolute.y-W.y+z[0][1],Z[1][1]=j.positionAbsolute.y+(j.height??0)-W.y2+z[1][1]);const te=RQ(j,X,Q,Z,ae,K);return G=G||j.position.x!==te.position.x||j.position.y!==te.position.y,j.position=te.position,j.positionAbsolute=te.positionAbsolute,j}),!G)return;O(d.current,!0,!0),u(!0);const ie=a?D:u_(I);if(ie&&y.current){const[j,X]=c_({nodeId:a,dragItems:d.current,nodeInternals:Q});ie(y.current,j,X)}},R=()=>{if(!g.current)return;const[S,N]=nQ(b.current,g.current);if(S!==0||N!==0){const{transform:Q,panBy:D}=o.getState();h.current.x=(h.current.x??0)-S/Q[2],h.current.y=(h.current.y??0)-N/Q[2],D({x:S,y:N})&&P(h.current)}m.current=requestAnimationFrame(R)},C=S=>{var ae;const{nodeInternals:N,multiSelectionActive:Q,nodesDraggable:D,unselectNodesAndEdges:I,onNodeDragStart:O,onSelectionDragStart:z}=o.getState();B.current=!0;const re=a?O:u_(z);(!i||!s)&&!Q&&a&&((ae=N.get(a))!=null&&ae.selected||I()),a&&s&&i&&oS({id:a,store:o,nodeRef:t});const Y=L(S);if(h.current=Y,d.current=WTe(N,D,Y,a),re&&d.current){const[K,G]=c_({nodeId:a,dragItems:d.current,nodeInternals:N});re(S.sourceEvent,K,G)}};if(e)M.on(".drag",null);else{const S=iSe().on("start",N=>{const{domNode:Q,nodeDragThreshold:D}=o.getState();D===0&&C(N),k.current=!1;const I=L(N);h.current=I,g.current=(Q==null?void 0:Q.getBoundingClientRect())||null,b.current=sf(N.sourceEvent,g.current)}).on("drag",N=>{var O,z;const Q=L(N),{autoPanOnNodeDrag:D,nodeDragThreshold:I}=o.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&(k.current=!0),!k.current){if(!E.current&&B.current&&D&&(E.current=!0,R()),!B.current){const re=Q.xSnapped-(((O=h==null?void 0:h.current)==null?void 0:O.x)??0),Y=Q.ySnapped-(((z=h==null?void 0:h.current)==null?void 0:z.y)??0);Math.sqrt(re*re+Y*Y)>I&&C(N)}(h.current.x!==Q.xSnapped||h.current.y!==Q.ySnapped)&&d.current&&B.current&&(y.current=N.sourceEvent,b.current=sf(N.sourceEvent,g.current),P(Q))}}).on("end",N=>{if(!(!B.current||k.current)&&(u(!1),E.current=!1,B.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:Q,nodeInternals:D,onNodeDragStop:I,onSelectionDragStop:O}=o.getState(),z=a?I:u_(O);if(Q(d.current,!1,!1),z){const[re,Y]=c_({nodeId:a,dragItems:d.current,nodeInternals:D});z(N.sourceEvent,re,Y)}}}).filter(N=>{const Q=N.target;return!N.button&&(!r||!qR(Q,`.${r}`,t))&&(!n||qR(Q,n,t))});return M.call(S),()=>{M.on(".drag",null)}}}},[t,e,r,n,s,o,a,i,L]),l}function UQ(){const t=Zs();return ee.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=t.getState(),h=i().filter(k=>k.selected&&(k.draggable||d&&typeof k.draggable>"u")),m=o?l[0]:5,g=o?l[1]:5,b=r.isShiftPressed?4:1,y=r.x*m*b,E=r.y*g*b,B=h.map(k=>{if(k.positionAbsolute){const L={x:k.positionAbsolute.x+y,y:k.positionAbsolute.y+E};o&&(L.x=l[0]*Math.round(L.x/l[0]),L.y=l[1]*Math.round(L.y/l[1]));const{positionAbsolute:M,position:P}=RQ(k,L,n,a,void 0,u);k.position=P,k.positionAbsolute=M}return k});s(B,!0,!1)},[])}const Em={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var sg=t=>{const e=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:h,onMouseMove:m,onMouseLeave:g,onContextMenu:b,onDoubleClick:y,style:E,className:B,isDraggable:k,isSelectable:L,isConnectable:M,isFocusable:P,selectNodesOnDrag:R,sourcePosition:C,targetPosition:S,hidden:N,resizeObserver:Q,dragHandle:D,zIndex:I,isParent:O,noDragClassName:z,noPanClassName:re,initialized:Y,disableKeyboardA11y:ae,ariaLabel:K,rfId:G,hasHandleBounds:W})=>{const ie=Zs(),j=ee.useRef(null),X=ee.useRef(null),Z=ee.useRef(C),te=ee.useRef(S),ce=ee.useRef(n),de=L||k||d||h||m||g,me=UQ(),ge=ag(r,ie.getState,h),Te=ag(r,ie.getState,m),xe=ag(r,ie.getState,g),oe=ag(r,ie.getState,b),Me=ag(r,ie.getState,y),at=je=>{const{nodeDragThreshold:Ke}=ie.getState();if(L&&(!R||!k||Ke>0)&&oS({id:r,store:ie,nodeRef:j}),d){const st=ie.getState().nodeInternals.get(r);st&&d(je,{...st})}},Se=je=>{if(!rS(je)&&!ae)if(sQ.includes(je.key)&&L){const Ke=je.key==="Escape";oS({id:r,store:ie,unselect:Ke,nodeRef:j})}else k&&u&&Object.prototype.hasOwnProperty.call(Em,je.key)&&(ie.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),me({x:Em[je.key].x,y:Em[je.key].y,isShiftPressed:je.shiftKey}))};ee.useEffect(()=>()=>{X.current&&(Q==null||Q.unobserve(X.current),X.current=null)},[]),ee.useEffect(()=>{if(j.current&&!N){const je=j.current;(!Y||!W||X.current!==je)&&(X.current&&(Q==null||Q.unobserve(X.current)),Q==null||Q.observe(je),X.current=je)}},[N,Y,W]),ee.useEffect(()=>{const je=ce.current!==n,Ke=Z.current!==C,st=te.current!==S;j.current&&(je||Ke||st)&&(je&&(ce.current=n),Ke&&(Z.current=C),st&&(te.current=S),ie.getState().updateNodeDimensions([{id:r,nodeElement:j.current,forceUpdate:!0}]))},[r,n,C,S]);const be=LQ({nodeRef:j,disabled:N||!k,noDragClassName:z,handleSelector:D,nodeId:r,isSelectable:L,selectNodesOnDrag:R});return N?null:At.createElement("div",{className:io(["react-flow__node",`react-flow__node-${n}`,{[re]:k},B,{selected:u,selectable:L,parent:O,dragging:be}]),ref:j,style:{zIndex:I,transform:`translate(${o}px,${l}px)`,pointerEvents:de?"all":"none",visibility:Y?"visible":"hidden",...E},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ge,onMouseMove:Te,onMouseLeave:xe,onContextMenu:oe,onClick:at,onDoubleClick:Me,onKeyDown:P?Se:void 0,tabIndex:P?0:void 0,role:P?"button":void 0,"aria-describedby":ae?void 0:`${_Q}-${G}`,"aria-label":K},At.createElement(ATe,{value:r},At.createElement(t,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:M,sourcePosition:C,targetPosition:S,dragging:be,dragHandle:D,zIndex:I})))};return e.displayName="NodeWrapper",ee.memo(e)};const JTe=t=>{const e=t.getNodes().filter(r=>r.selected);return{...HT(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function ZTe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const n=Zs(),{width:a,height:s,x:i,y:o,transformString:l,userSelectionActive:u}=Da(JTe,Ki),d=UQ(),h=ee.useRef(null);if(ee.useEffect(()=>{var b;r||(b=h.current)==null||b.focus({preventScroll:!0})},[r]),LQ({nodeRef:h}),u||!a||!s)return null;const m=t?b=>{const y=n.getState().getNodes().filter(E=>E.selected);t(b,y)}:void 0,g=b=>{Object.prototype.hasOwnProperty.call(Em,b.key)&&d({x:Em[b.key].x,y:Em[b.key].y,isShiftPressed:b.shiftKey})};return At.createElement("div",{className:io(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},At.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:g,style:{width:a,height:s,top:o,left:i}}))}var eBe=ee.memo(ZTe);const tBe=t=>t.nodesSelectionActive,MQ=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:m,selectionMode:g,onSelectionStart:b,onSelectionEnd:y,multiSelectionKeyCode:E,panActivationKeyCode:B,zoomActivationKeyCode:k,elementsSelectable:L,zoomOnScroll:M,zoomOnPinch:P,panOnScroll:R,panOnScrollSpeed:C,panOnScrollMode:S,zoomOnDoubleClick:N,panOnDrag:Q,defaultViewport:D,translateExtent:I,minZoom:O,maxZoom:z,preventScrolling:re,onSelectionContextMenu:Y,noWheelClassName:ae,noPanClassName:K,disableKeyboardA11y:G})=>{const W=Da(tBe),ie=Fx(h),j=Fx(B),X=j||Q,Z=j||R,te=ie||m&&X!==!0;return OTe({deleteKeyCode:o,multiSelectionKeyCode:E}),At.createElement(zTe,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:L,zoomOnScroll:M,zoomOnPinch:P,panOnScroll:Z,panOnScrollSpeed:C,panOnScrollMode:S,zoomOnDoubleClick:N,panOnDrag:!ie&&X,defaultViewport:D,translateExtent:I,minZoom:O,maxZoom:z,zoomActivationKeyCode:k,preventScrolling:re,noWheelClassName:ae,noPanClassName:K},At.createElement(FQ,{onSelectionStart:b,onSelectionEnd:y,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:X,isSelecting:!!te,selectionMode:g},t,W&&At.createElement(eBe,{onSelectionContextMenu:Y,noPanClassName:K,disableKeyboardA11y:G})))};MQ.displayName="FlowRenderer";var rBe=ee.memo(MQ);function nBe(t){return Da(ee.useCallback(r=>t?dQ(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function aBe(t){const e={input:sg(t.input||wQ),default:sg(t.default||iS),output:sg(t.output||CQ),group:sg(t.group||zT)},r={},n=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=sg(t[s]||iS),a),r);return{...e,...n}}const sBe=({x:t,y:e,width:r,height:n,origin:a})=>!r||!n?{x:t,y:e}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:e}:{x:t-r*a[0],y:e-n*a[1]},iBe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),PQ=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=Da(iBe,Ki),o=nBe(t.onlyRenderVisibleElements),l=ee.useRef(),u=ee.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const m=h.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));s(m)});return l.current=d,d},[]);return ee.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),At.createElement("div",{className:"react-flow__nodes",style:GT},o.map(d=>{var P,R,C;let h=d.type||"default";t.nodeTypes[h]||(i==null||i("003",OA.error003(h)),h="default");const m=t.nodeTypes[h]||t.nodeTypes.default,g=!!(d.draggable||e&&typeof d.draggable>"u"),b=!!(d.selectable||a&&typeof d.selectable>"u"),y=!!(d.connectable||r&&typeof d.connectable>"u"),E=!!(d.focusable||n&&typeof d.focusable>"u"),B=t.nodeExtent?UT(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,k=(B==null?void 0:B.x)??0,L=(B==null?void 0:B.y)??0,M=sBe({x:k,y:L,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return At.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||lr.Bottom,targetPosition:d.targetPosition||lr.Top,hidden:d.hidden,xPos:k,yPos:L,xPosOrigin:M.x,yPosOrigin:M.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:g,isSelectable:b,isConnectable:y,isFocusable:E,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((P=d[Ga])==null?void 0:P.z)??0,isParent:!!((R=d[Ga])!=null&&R.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[Ga])!=null&&C.handleBounds)})}))};PQ.displayName="NodeRenderer";var oBe=ee.memo(PQ);const lBe=(t,e,r)=>r===lr.Left?t-e:r===lr.Right?t+e:t,cBe=(t,e,r)=>r===lr.Top?t-e:r===lr.Bottom?t+e:t,$R="react-flow__edgeupdater",WR=({position:t,centerX:e,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>At.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:io([$R,`${$R}-${o}`]),cx:lBe(e,n,t),cy:cBe(r,n,t),r:n,stroke:"transparent",fill:"transparent"}),uBe=()=>!0;var O0=t=>{const e=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,style:E,source:B,target:k,sourceX:L,sourceY:M,targetX:P,targetY:R,sourcePosition:C,targetPosition:S,elementsSelectable:N,hidden:Q,sourceHandleId:D,targetHandleId:I,onContextMenu:O,onMouseEnter:z,onMouseMove:re,onMouseLeave:Y,reconnectRadius:ae,onReconnect:K,onReconnectStart:G,onReconnectEnd:W,markerEnd:ie,markerStart:j,rfId:X,ariaLabel:Z,isFocusable:te,isReconnectable:ce,pathOptions:de,interactionWidth:me,disableKeyboardA11y:ge})=>{const Te=ee.useRef(null),[xe,oe]=ee.useState(!1),[Me,at]=ee.useState(!1),Se=Zs(),be=ee.useMemo(()=>`url('#${aS(j,X)}')`,[j,X]),je=ee.useMemo(()=>`url('#${aS(ie,X)}')`,[ie,X]);if(Q)return null;const Ke=xt=>{var Dn;const{edges:wr,addSelectedEdges:Jt,unselectNodesAndEdges:dn,multiSelectionActive:gr}=Se.getState(),Ur=wr.find(Fr=>Fr.id===r);Ur&&(N&&(Se.setState({nodesSelectionActive:!1}),Ur.selected&&gr?(dn({nodes:[],edges:[Ur]}),(Dn=Te.current)==null||Dn.blur()):Jt([r])),i&&i(xt,Ur))},st=ng(r,Se.getState,o),pt=ng(r,Se.getState,O),St=ng(r,Se.getState,z),ut=ng(r,Se.getState,re),kt=ng(r,Se.getState,Y),zt=(xt,wr)=>{if(xt.button!==0)return;const{edges:Jt,isValidConnection:dn}=Se.getState(),gr=wr?k:B,Ur=(wr?I:D)||null,Dn=wr?"target":"source",Fr=dn||uBe,ds=wr,nn=Jt.find(Pr=>Pr.id===r);at(!0),G==null||G(xt,nn,Dn);const na=Pr=>{at(!1),W==null||W(Pr,nn,Dn)};gQ({event:xt,handleId:Ur,nodeId:gr,onConnect:Pr=>K==null?void 0:K(nn,Pr),isTarget:ds,getState:Se.getState,setState:Se.setState,isValidConnection:Fr,edgeUpdaterType:Dn,onReconnectEnd:na})},Yt=xt=>zt(xt,!0),It=xt=>zt(xt,!1),Dt=()=>oe(!0),Wt=()=>oe(!1),Lt=!N&&!i,Rt=xt=>{var wr;if(!ge&&sQ.includes(xt.key)&&N){const{unselectNodesAndEdges:Jt,addSelectedEdges:dn,edges:gr}=Se.getState();xt.key==="Escape"?((wr=Te.current)==null||wr.blur(),Jt({edges:[gr.find(Dn=>Dn.id===r)]})):dn([r])}};return At.createElement("g",{className:io(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:l,animated:u,inactive:Lt,updating:xe}]),onClick:Ke,onDoubleClick:st,onContextMenu:pt,onMouseEnter:St,onMouseMove:ut,onMouseLeave:kt,onKeyDown:te?Rt:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Z===null?void 0:Z||`Edge from ${B} to ${k}`,"aria-describedby":te?`${SQ}-${X}`:void 0,ref:Te},!Me&&At.createElement(t,{id:r,source:B,target:k,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,data:s,style:E,sourceX:L,sourceY:M,targetX:P,targetY:R,sourcePosition:C,targetPosition:S,sourceHandleId:D,targetHandleId:I,markerStart:be,markerEnd:je,pathOptions:de,interactionWidth:me}),ce&&At.createElement(At.Fragment,null,(ce==="source"||ce===!0)&&At.createElement(WR,{position:C,centerX:L,centerY:M,radius:ae,onMouseDown:Yt,onMouseEnter:Dt,onMouseOut:Wt,type:"source"}),(ce==="target"||ce===!0)&&At.createElement(WR,{position:S,centerX:P,centerY:R,radius:ae,onMouseDown:It,onMouseEnter:Dt,onMouseOut:Wt,type:"target"})))};return e.displayName="EdgeWrapper",ee.memo(e)};function ABe(t){const e={default:O0(t.default||Jy),straight:O0(t.bezier||OT),step:O0(t.step||jT),smoothstep:O0(t.step||mb),simplebezier:O0(t.simplebezier||PT)},r={},n=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=O0(t[s]||Jy),a),r);return{...e,...n}}function XR(t,e,r=null){const n=((r==null?void 0:r.x)||0)+e.x,a=((r==null?void 0:r.y)||0)+e.y,s=(r==null?void 0:r.width)||e.width,i=(r==null?void 0:r.height)||e.height;switch(t){case lr.Top:return{x:n+s/2,y:a};case lr.Right:return{x:n+s,y:a+i/2};case lr.Bottom:return{x:n+s/2,y:a+i};case lr.Left:return{x:n,y:a+i/2}}}function YR(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const dBe=(t,e,r,n,a,s)=>{const i=XR(r,t,e),o=XR(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function fBe({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+a),y2:Math.max(t.y+n,e.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=MT({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*m)>0}function JR(t){var n,a,s,i,o;const e=((n=t==null?void 0:t[Ga])==null?void 0:n.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const hBe=[{level:0,isMaxLevel:!0,edges:[]}];function mBe(t,e,r=!1){let n=-1;const a=t.reduce((i,o)=>{var d,h;const l=zl(o.zIndex);let u=l?o.zIndex:0;if(r){const m=e.get(o.target),g=e.get(o.source),b=o.selected||(m==null?void 0:m.selected)||(g==null?void 0:g.selected),y=Math.max(((d=g==null?void 0:g[Ga])==null?void 0:d.z)||0,((h=m==null?void 0:m[Ga])==null?void 0:h.z)||0,1e3);u=(l?o.zIndex:0)+(b?y:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===n}});return s.length===0?hBe:s}function pBe(t,e,r){const n=Da(ee.useCallback(a=>t?a.edges.filter(s=>{const i=e.get(s.source),o=e.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&fBe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,e]));return mBe(n,e,r)}const gBe=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),xBe=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ZR={[Yy.Arrow]:gBe,[Yy.ArrowClosed]:xBe};function vBe(t){const e=Zs();return ee.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(ZR,t)?ZR[t]:((s=(a=e.getState()).onError)==null||s.call(a,"009",OA.error009(t)),null)},[t])}const yBe=({id:t,type:e,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=vBe(e);return l?At.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},At.createElement(l,{color:r,strokeWidth:i})):null},wBe=({defaultColor:t,rfId:e})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=aS(i,e);n.includes(o)||(a.push({id:o,color:i.color||t,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},jQ=({defaultColor:t,rfId:e})=>{const r=Da(ee.useCallback(wBe({defaultColor:t,rfId:e}),[t,e]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return At.createElement("defs",null,r.map(n=>At.createElement(yBe,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};jQ.displayName="MarkerDefinitions";var bBe=ee.memo(jQ);const CBe=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),OQ=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,children:E,disableKeyboardA11y:B})=>{const{edgesFocusable:k,edgesUpdatable:L,elementsSelectable:M,width:P,height:R,connectionMode:C,nodeInternals:S,onError:N}=Da(CBe,Ki),Q=pBe(e,S,r);return P?At.createElement(At.Fragment,null,Q.map(({level:D,edges:I,isMaxLevel:O})=>At.createElement("svg",{key:D,style:{zIndex:D},width:P,height:R,className:"react-flow__edges react-flow__container"},O&&At.createElement(bBe,{defaultColor:t,rfId:n}),At.createElement("g",null,I.map(z=>{const[re,Y,ae]=JR(S.get(z.source)),[K,G,W]=JR(S.get(z.target));if(!ae||!W)return null;let ie=z.type||"default";a[ie]||(N==null||N("011",OA.error011(ie)),ie="default");const j=a[ie]||a.default,X=C===Lh.Strict?G.target:(G.target??[]).concat(G.source??[]),Z=YR(Y.source,z.sourceHandle),te=YR(X,z.targetHandle),ce=(Z==null?void 0:Z.position)||lr.Bottom,de=(te==null?void 0:te.position)||lr.Top,me=!!(z.focusable||k&&typeof z.focusable>"u"),ge=z.reconnectable||z.updatable,Te=typeof m<"u"&&(ge||L&&typeof ge>"u");if(!Z||!te)return N==null||N("008",OA.error008(Z,z)),null;const{sourceX:xe,sourceY:oe,targetX:Me,targetY:at}=dBe(re,Z,ce,K,te,de);return At.createElement(j,{key:z.id,id:z.id,className:io([z.className,s]),type:ie,data:z.data,selected:!!z.selected,animated:!!z.animated,hidden:!!z.hidden,label:z.label,labelStyle:z.labelStyle,labelShowBg:z.labelShowBg,labelBgStyle:z.labelBgStyle,labelBgPadding:z.labelBgPadding,labelBgBorderRadius:z.labelBgBorderRadius,style:z.style,source:z.source,target:z.target,sourceHandleId:z.sourceHandle,targetHandleId:z.targetHandle,markerEnd:z.markerEnd,markerStart:z.markerStart,sourceX:xe,sourceY:oe,targetX:Me,targetY:at,sourcePosition:ce,targetPosition:de,elementsSelectable:M,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,rfId:n,ariaLabel:z.ariaLabel,isFocusable:me,isReconnectable:Te,pathOptions:"pathOptions"in z?z.pathOptions:void 0,interactionWidth:z.interactionWidth,disableKeyboardA11y:B})})))),E):null};OQ.displayName="EdgeRenderer";var EBe=ee.memo(OQ);const _Be=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function SBe({children:t}){const e=Da(_Be);return At.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function TBe(t){const e=pb(),r=ee.useRef(!1);ee.useEffect(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const BBe={[lr.Left]:lr.Right,[lr.Right]:lr.Left,[lr.Top]:lr.Bottom,[lr.Bottom]:lr.Top},QQ=({nodeId:t,handleType:e,style:r,type:n=Vd.Bezier,CustomComponent:a,connectionStatus:s})=>{var R,C,S;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=Da(ee.useCallback(N=>({fromNode:N.nodeInternals.get(t),handleId:N.connectionHandleId,toX:(N.connectionPosition.x-N.transform[0])/N.transform[2],toY:(N.connectionPosition.y-N.transform[1])/N.transform[2],connectionMode:N.connectionMode}),[t]),Ki),h=(R=i==null?void 0:i[Ga])==null?void 0:R.handleBounds;let m=h==null?void 0:h[e];if(d===Lh.Loose&&(m=m||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!m)return null;const g=o?m.find(N=>N.id===o):m[0],b=g?g.x+g.width/2:(i.width??0)/2,y=g?g.y+g.height/2:i.height??0,E=(((C=i.positionAbsolute)==null?void 0:C.x)??0)+b,B=(((S=i.positionAbsolute)==null?void 0:S.y)??0)+y,k=g==null?void 0:g.position,L=k?BBe[k]:null;if(!k||!L)return null;if(a)return At.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:g,fromX:E,fromY:B,toX:l,toY:u,fromPosition:k,toPosition:L,connectionStatus:s});let M="";const P={sourceX:E,sourceY:B,sourcePosition:k,targetX:l,targetY:u,targetPosition:L};return n===Vd.Bezier?[M]=uQ(P):n===Vd.Step?[M]=nS({...P,borderRadius:0}):n===Vd.SmoothStep?[M]=nS(P):n===Vd.SimpleBezier?[M]=cQ(P):M=`M${E},${B} ${l},${u}`,At.createElement("path",{d:M,fill:"none",className:"react-flow__connection-path",style:r})};QQ.displayName="ConnectionLine";const NBe=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function kBe({containerStyle:t,style:e,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:l,connectionStatus:u}=Da(NBe,Ki);return!(a&&s&&o&&i)?null:At.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},At.createElement("g",{className:io(["react-flow__connection",u])},At.createElement(QQ,{nodeId:a,handleType:s,style:e,type:r,CustomComponent:n,connectionStatus:u})))}function eL(t,e){return ee.useRef(null),Zs(),ee.useMemo(()=>e(t),[t])}const HQ=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,onSelectionContextMenu:b,onSelectionStart:y,onSelectionEnd:E,connectionLineType:B,connectionLineStyle:k,connectionLineComponent:L,connectionLineContainerStyle:M,selectionKeyCode:P,selectionOnDrag:R,selectionMode:C,multiSelectionKeyCode:S,panActivationKeyCode:N,zoomActivationKeyCode:Q,deleteKeyCode:D,onlyRenderVisibleElements:I,elementsSelectable:O,selectNodesOnDrag:z,defaultViewport:re,translateExtent:Y,minZoom:ae,maxZoom:K,preventScrolling:G,defaultMarkerColor:W,zoomOnScroll:ie,zoomOnPinch:j,panOnScroll:X,panOnScrollSpeed:Z,panOnScrollMode:te,zoomOnDoubleClick:ce,panOnDrag:de,onPaneClick:me,onPaneMouseEnter:ge,onPaneMouseMove:Te,onPaneMouseLeave:xe,onPaneScroll:oe,onPaneContextMenu:Me,onEdgeContextMenu:at,onEdgeMouseEnter:Se,onEdgeMouseMove:be,onEdgeMouseLeave:je,onReconnect:Ke,onReconnectStart:st,onReconnectEnd:pt,reconnectRadius:St,noDragClassName:ut,noWheelClassName:kt,noPanClassName:zt,elevateEdgesOnSelect:Yt,disableKeyboardA11y:It,nodeOrigin:Dt,nodeExtent:Wt,rfId:Lt})=>{const Rt=eL(t,aBe),xt=eL(e,ABe);return TBe(s),At.createElement(rBe,{onPaneClick:me,onPaneMouseEnter:ge,onPaneMouseMove:Te,onPaneMouseLeave:xe,onPaneContextMenu:Me,onPaneScroll:oe,deleteKeyCode:D,selectionKeyCode:P,selectionOnDrag:R,selectionMode:C,onSelectionStart:y,onSelectionEnd:E,multiSelectionKeyCode:S,panActivationKeyCode:N,zoomActivationKeyCode:Q,elementsSelectable:O,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:ie,zoomOnPinch:j,zoomOnDoubleClick:ce,panOnScroll:X,panOnScrollSpeed:Z,panOnScrollMode:te,panOnDrag:de,defaultViewport:re,translateExtent:Y,minZoom:ae,maxZoom:K,onSelectionContextMenu:b,preventScrolling:G,noDragClassName:ut,noWheelClassName:kt,noPanClassName:zt,disableKeyboardA11y:It},At.createElement(SBe,null,At.createElement(EBe,{edgeTypes:xt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:I,onEdgeContextMenu:at,onEdgeMouseEnter:Se,onEdgeMouseMove:be,onEdgeMouseLeave:je,onReconnect:Ke,onReconnectStart:st,onReconnectEnd:pt,reconnectRadius:St,defaultMarkerColor:W,noPanClassName:zt,elevateEdgesOnSelect:!!Yt,disableKeyboardA11y:It,rfId:Lt},At.createElement(kBe,{style:k,type:B,component:L,containerStyle:M})),At.createElement("div",{className:"react-flow__edgelabel-renderer"}),At.createElement(oBe,{nodeTypes:Rt,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,selectNodesOnDrag:z,onlyRenderVisibleElements:I,noPanClassName:zt,noDragClassName:ut,disableKeyboardA11y:It,nodeOrigin:Dt,nodeExtent:Wt,rfId:Lt})))};HQ.displayName="GraphView";var IBe=ee.memo(HQ);const lS=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Fd={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:lS,nodeExtent:lS,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Lh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:sTe,isValidConnection:void 0},FBe=()=>x_e((t,e)=>({...Fd,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=e();t({nodeInternals:o_(r,n,a,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=e();t({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?o_(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(h.transform),g=r.reduce((y,E)=>{const B=a.get(E.id);if(B!=null&&B.hidden)a.set(B.id,{...B,[Ga]:{...B[Ga],handleBounds:void 0}});else if(B){const k=LT(E.nodeElement);!!(k.width&&k.height&&(B.width!==k.width||B.height!==k.height||E.forceUpdate))&&(a.set(B.id,{...B,[Ga]:{...B[Ga],handleBounds:{source:KR(".source",E.nodeElement,m,u),target:KR(".target",E.nodeElement,m,u)}},...k}),y.push({id:B.id,type:"dimensions",dimensions:k}))}return y},[]);BQ(a,u);const b=i||s&&!i&&NQ(e,{initial:!0,...o});t({nodeInternals:new Map(a),fitViewOnInitDone:b}),(g==null?void 0:g.length)>0&&(n==null||n(g))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=e(),i=r.map(o=>{const l={id:o.id,type:"position",dragging:a};return n&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(r!=null&&r.length){if(s){const u=IQ(r,o()),d=o_(u,a,i,l);t({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=e();let i,o=null;n?i=r.map(l=>Md(l,!0)):(i=nm(s(),r),o=nm(a,[])),f2({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=e();let i,o=null;n?i=r.map(l=>Md(l,!0)):(i=nm(a,r),o=nm(s(),[])),f2({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=e(),i=r||s(),o=n||a,l=i.map(d=>(d.selected=!1,Md(d.id,!1))),u=o.map(d=>Md(d.id,!1));f2({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=e();n==null||n.scaleExtent([r,a]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=e();n==null||n.scaleExtent([a,r]),t({maxZoom:r})},setTranslateExtent:r=>{var n;(n=e().d3Zoom)==null||n.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=e(),s=n().filter(o=>o.selected).map(o=>Md(o.id,!1)),i=r.filter(o=>o.selected).map(o=>Md(o.id,!1));f2({changedNodes:s,changedEdges:i,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:n}=e();n.forEach(a=>{a.positionAbsolute=UT(a.position,r)}),t({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!r.x&&!r.y)return!1;const u=af.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],h=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,h),n[0]!==h.x||n[1]!==h.y||n[2]!==h.k},cancelConnection:()=>t({connectionNodeId:Fd.connectionNodeId,connectionHandleId:Fd.connectionHandleId,connectionHandleType:Fd.connectionHandleType,connectionStatus:Fd.connectionStatus,connectionStartHandle:Fd.connectionStartHandle,connectionEndHandle:Fd.connectionEndHandle}),reset:()=>t({...Fd})}),Object.is),qT=({children:t})=>{const e=ee.useRef(null);return e.current||(e.current=FBe()),At.createElement(Y4e,{value:e.current},t)};qT.displayName="ReactFlowProvider";const VQ=({children:t})=>ee.useContext(hb)?At.createElement(At.Fragment,null,t):At.createElement(qT,null,t);VQ.displayName="ReactFlowWrapper";const DBe={input:wQ,default:iS,output:CQ,group:zT},RBe={default:Jy,straight:OT,step:jT,smoothstep:mb,simplebezier:PT},LBe=[0,0],UBe=[15,15],MBe={x:0,y:0,zoom:1},PBe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},zQ=ee.forwardRef(({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=DBe,edgeTypes:i=RBe,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:E,onClickConnectEnd:B,onNodeMouseEnter:k,onNodeMouseMove:L,onNodeMouseLeave:M,onNodeContextMenu:P,onNodeDoubleClick:R,onNodeDragStart:C,onNodeDrag:S,onNodeDragStop:N,onNodesDelete:Q,onEdgesDelete:D,onSelectionChange:I,onSelectionDragStart:O,onSelectionDrag:z,onSelectionDragStop:re,onSelectionContextMenu:Y,onSelectionStart:ae,onSelectionEnd:K,connectionMode:G=Lh.Strict,connectionLineType:W=Vd.Bezier,connectionLineStyle:ie,connectionLineComponent:j,connectionLineContainerStyle:X,deleteKeyCode:Z="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ce=!1,selectionMode:de=Ix.Full,panActivationKeyCode:me="Space",multiSelectionKeyCode:ge=Xy()?"Meta":"Control",zoomActivationKeyCode:Te=Xy()?"Meta":"Control",snapToGrid:xe=!1,snapGrid:oe=UBe,onlyRenderVisibleElements:Me=!1,selectNodesOnDrag:at=!0,nodesDraggable:Se,nodesConnectable:be,nodesFocusable:je,nodeOrigin:Ke=LBe,edgesFocusable:st,edgesUpdatable:pt,elementsSelectable:St,defaultViewport:ut=MBe,minZoom:kt=.5,maxZoom:zt=2,translateExtent:Yt=lS,preventScrolling:It=!0,nodeExtent:Dt,defaultMarkerColor:Wt="#b1b1b7",zoomOnScroll:Lt=!0,zoomOnPinch:Rt=!0,panOnScroll:xt=!1,panOnScrollSpeed:wr=.5,panOnScrollMode:Jt=Ah.Free,zoomOnDoubleClick:dn=!0,panOnDrag:gr=!0,onPaneClick:Ur,onPaneMouseEnter:Dn,onPaneMouseMove:Fr,onPaneMouseLeave:ds,onPaneScroll:nn,onPaneContextMenu:na,children:pa,onEdgeContextMenu:Pr,onEdgeDoubleClick:nr,onEdgeMouseEnter:zr,onEdgeMouseMove:fs,onEdgeMouseLeave:Wn,onEdgeUpdate:Ea,onEdgeUpdateStart:Bs,onEdgeUpdateEnd:Gt,onReconnect:fn,onReconnectStart:an,onReconnectEnd:Rn,reconnectRadius:jn=10,edgeUpdaterRadius:Xn=10,onNodesChange:fe,onEdgesChange:ke,noDragClassName:Ee="nodrag",noWheelClassName:_e="nowheel",noPanClassName:Be="nopan",fitView:Ie=!1,fitViewOptions:qe,connectOnClick:tt=!0,attributionPosition:He,proOptions:We,defaultEdgeOptions:Je,elevateNodesOnSelect:yt=!0,elevateEdgesOnSelect:Nt=!1,disableKeyboardA11y:Ot=!1,autoPanOnConnect:Bt=!0,autoPanOnNodeDrag:Ut=!0,connectionRadius:dr=20,isValidConnection:jr,onError:Or,style:Gr,id:Ra,nodeDragThreshold:pi,...La},hs)=>{const $a=Ra||"1";return At.createElement("div",{...La,style:{...Gr,...PBe},ref:hs,className:io(["react-flow",a]),"data-testid":"rf__wrapper",id:Ra},At.createElement(VQ,null,At.createElement(IBe,{onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:k,onNodeMouseMove:L,onNodeMouseLeave:M,onNodeContextMenu:P,onNodeDoubleClick:R,nodeTypes:s,edgeTypes:i,connectionLineType:W,connectionLineStyle:ie,connectionLineComponent:j,connectionLineContainerStyle:X,selectionKeyCode:te,selectionOnDrag:ce,selectionMode:de,deleteKeyCode:Z,multiSelectionKeyCode:ge,panActivationKeyCode:me,zoomActivationKeyCode:Te,onlyRenderVisibleElements:Me,selectNodesOnDrag:at,defaultViewport:ut,translateExtent:Yt,minZoom:kt,maxZoom:zt,preventScrolling:It,zoomOnScroll:Lt,zoomOnPinch:Rt,zoomOnDoubleClick:dn,panOnScroll:xt,panOnScrollSpeed:wr,panOnScrollMode:Jt,panOnDrag:gr,onPaneClick:Ur,onPaneMouseEnter:Dn,onPaneMouseMove:Fr,onPaneMouseLeave:ds,onPaneScroll:nn,onPaneContextMenu:na,onSelectionContextMenu:Y,onSelectionStart:ae,onSelectionEnd:K,onEdgeContextMenu:Pr,onEdgeDoubleClick:nr,onEdgeMouseEnter:zr,onEdgeMouseMove:fs,onEdgeMouseLeave:Wn,onReconnect:fn??Ea,onReconnectStart:an??Bs,onReconnectEnd:Rn??Gt,reconnectRadius:jn??Xn,defaultMarkerColor:Wt,noDragClassName:Ee,noWheelClassName:_e,noPanClassName:Be,elevateEdgesOnSelect:Nt,rfId:$a,disableKeyboardA11y:Ot,nodeOrigin:Ke,nodeExtent:Dt}),At.createElement(BTe,{nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:E,onClickConnectEnd:B,nodesDraggable:Se,nodesConnectable:be,nodesFocusable:je,edgesFocusable:st,edgesUpdatable:pt,elementsSelectable:St,elevateNodesOnSelect:yt,minZoom:kt,maxZoom:zt,nodeExtent:Dt,onNodesChange:fe,onEdgesChange:ke,snapToGrid:xe,snapGrid:oe,connectionMode:G,translateExtent:Yt,connectOnClick:tt,defaultEdgeOptions:Je,fitView:Ie,fitViewOptions:qe,onNodesDelete:Q,onEdgesDelete:D,onNodeDragStart:C,onNodeDrag:S,onNodeDragStop:N,onSelectionDrag:z,onSelectionDragStart:O,onSelectionDragStop:re,noPanClassName:Be,nodeOrigin:Ke,rfId:$a,autoPanOnConnect:Bt,autoPanOnNodeDrag:Ut,onError:Or,connectionRadius:dr,isValidConnection:jr,nodeDragThreshold:pi}),At.createElement(STe,{onSelectionChange:I}),pa,At.createElement(Z4e,{proOptions:We,position:He}),At.createElement(DTe,{rfId:$a,disableKeyboardA11y:Ot})))});zQ.displayName="ReactFlow";function GQ(t){return e=>{const[r,n]=ee.useState(e),a=ee.useCallback(s=>n(i=>t(s,i)),[]);return[r,n,a]}}const jBe=GQ(IQ),OBe=GQ(KTe);function QBe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},At.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function HBe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},At.createElement("path",{d:"M0 0h32v4.2H0z"}))}function VBe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},At.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function zBe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function GBe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Sg=({children:t,className:e,...r})=>At.createElement("button",{type:"button",className:io(["react-flow__controls-button",e]),...r},t);Sg.displayName="ControlButton";const qBe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),qQ=({style:t,showZoom:e=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:h="bottom-left"})=>{const m=Zs(),[g,b]=ee.useState(!1),{isInteractive:y,minZoomReached:E,maxZoomReached:B}=Da(qBe,Ki),{zoomIn:k,zoomOut:L,fitView:M}=pb();if(ee.useEffect(()=>{b(!0)},[]),!g)return null;const P=()=>{k(),s==null||s()},R=()=>{L(),i==null||i()},C=()=>{M(a),o==null||o()},S=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)};return At.createElement(rQ,{className:io(["react-flow__controls",u]),position:h,style:t,"data-testid":"rf__controls"},e&&At.createElement(At.Fragment,null,At.createElement(Sg,{onClick:P,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:B},At.createElement(QBe,null)),At.createElement(Sg,{onClick:R,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},At.createElement(HBe,null))),r&&At.createElement(Sg,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},At.createElement(VBe,null)),n&&At.createElement(Sg,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},y?At.createElement(GBe,null):At.createElement(zBe,null)),d)};qQ.displayName="Controls";var KBe=ee.memo(qQ),Ic;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Ic||(Ic={}));function $Be({color:t,dimensions:e,lineWidth:r}){return At.createElement("path",{stroke:t,strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function WBe({color:t,radius:e}){return At.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const XBe={[Ic.Dots]:"#91919a",[Ic.Lines]:"#eee",[Ic.Cross]:"#e2e2e2"},YBe={[Ic.Dots]:1,[Ic.Lines]:1,[Ic.Cross]:6},JBe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function KQ({id:t,variant:e=Ic.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:l}){const u=ee.useRef(null),{transform:d,patternId:h}=Da(JBe,Ki),m=i||XBe[e],g=n||YBe[e],b=e===Ic.Dots,y=e===Ic.Cross,E=Array.isArray(r)?r:[r,r],B=[E[0]*d[2]||1,E[1]*d[2]||1],k=g*d[2],L=y?[k,k]:B,M=b?[k/s,k/s]:[L[0]/s,L[1]/s];return At.createElement("svg",{className:io(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},At.createElement("pattern",{id:h+t,x:d[0]%B[0],y:d[1]%B[1],width:B[0],height:B[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},b?At.createElement(WBe,{color:m,radius:k/s}):At.createElement($Be,{dimensions:L,color:m,lineWidth:a})),At.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}KQ.displayName="Background";var ZBe=ee.memo(KQ);function eNe(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),e&&(n.href=e),a.href=t,a.href}const tNe=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function of(t){const e=[];for(let r=0,n=t.length;r<n;r++)e.push(t[r]);return e}let Q0=null;function $Q(t={}){return Q0||(t.includeStyleProperties?(Q0=t.includeStyleProperties,Q0):(Q0=of(window.getComputedStyle(document.documentElement)),Q0))}function ew(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function rNe(t){const e=ew(t,"border-left-width"),r=ew(t,"border-right-width");return t.clientWidth+e+r}function nNe(t){const e=ew(t,"border-top-width"),r=ew(t,"border-bottom-width");return t.clientHeight+e+r}function WQ(t,e={}){const r=e.width||rNe(t),n=e.height||nNe(t);return{width:r,height:n}}function aNe(){let t,e;try{e=process}catch{}const r=e&&e.env?e.env.devicePixelRatio:null;return r&&(t=parseInt(r,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Xo=16384;function sNe(t){(t.width>Xo||t.height>Xo)&&(t.width>Xo&&t.height>Xo?t.width>t.height?(t.height*=Xo/t.width,t.width=Xo):(t.width*=Xo/t.height,t.height=Xo):t.width>Xo?(t.height*=Xo/t.width,t.width=Xo):(t.width*=Xo/t.height,t.height=Xo))}function tw(t){return new Promise((e,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>e(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=t})}async function iNe(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function oNe(t,e,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${e}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${e} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(t),iNe(a)}const ko=(t,e)=>{if(t instanceof e)return!0;const r=Object.getPrototypeOf(t);return r===null?!1:r.constructor.name===e.name||ko(r,e)};function lNe(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function cNe(t,e){return $Q(e).map(r=>{const n=t.getPropertyValue(r),a=t.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function uNe(t,e,r,n){const a=`.${t}:${e}`,s=r.cssText?lNe(r):cNe(r,n);return document.createTextNode(`${a}{${s}}`)}function tL(t,e,r,n){const a=window.getComputedStyle(t,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=tNe();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(uNe(i,r,a,n)),e.appendChild(o)}function ANe(t,e,r){tL(t,e,":before",r),tL(t,e,":after",r)}const rL="application/font-woff",nL="image/jpeg",dNe={woff:rL,woff2:rL,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:nL,jpeg:nL,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function fNe(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function KT(t){const e=fNe(t).toLowerCase();return dNe[e]||""}function hNe(t){return t.split(/,/)[1]}function cS(t){return t.search(/^(data:)/)!==-1}function mNe(t,e){return`data:${e};base64,${t}`}async function XQ(t,e,r){const n=await fetch(t,e);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(a)})}const A_={};function pNe(t,e,r){let n=t.replace(/\?.*/,"");return r&&(n=t),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),e?`[${e}]${n}`:n}async function $T(t,e,r){const n=pNe(t,e,r.includeQueryParams);if(A_[n]!=null)return A_[n];r.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let a;try{const s=await XQ(t,r.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),hNe(o)));a=mNe(s,e)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return A_[n]=a,a}async function gNe(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):tw(e)}async function xNe(t,e){if(t.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,i==null||i.drawImage(t,0,0,s.width,s.height);const o=s.toDataURL();return tw(o)}const r=t.poster,n=KT(r),a=await $T(r,n,e);return tw(a)}async function vNe(t,e){var r;try{if(!((r=t==null?void 0:t.contentDocument)===null||r===void 0)&&r.body)return await gb(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function yNe(t,e){return ko(t,HTMLCanvasElement)?gNe(t):ko(t,HTMLVideoElement)?xNe(t,e):ko(t,HTMLIFrameElement)?vNe(t,e):t.cloneNode(YQ(t))}const wNe=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",YQ=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function bNe(t,e,r){var n,a;if(YQ(e))return e;let s=[];return wNe(t)&&t.assignedNodes?s=of(t.assignedNodes()):ko(t,HTMLIFrameElement)&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?s=of(t.contentDocument.body.childNodes):s=of(((a=t.shadowRoot)!==null&&a!==void 0?a:t).childNodes),s.length===0||ko(t,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>gb(o,r)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function CNe(t,e,r){const n=e.style;if(!n)return;const a=window.getComputedStyle(t);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):$Q(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),ko(t,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function ENe(t,e){ko(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),ko(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function _Ne(t,e){if(ko(t,HTMLSelectElement)){const r=e,n=Array.from(r.children).find(a=>t.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function SNe(t,e,r){return ko(e,Element)&&(CNe(t,e,r),ANe(t,e,r),ENe(t,e),_Ne(t,e)),e}async function TNe(t,e){const r=t.querySelectorAll?t.querySelectorAll("use"):[];if(r.length===0)return t;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const l=t.querySelector(o),u=document.querySelector(o);!l&&u&&!n[o]&&(n[o]=await gb(u,e,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let l=0;l<a.length;l++)o.appendChild(a[l]);t.appendChild(i)}return t}async function gb(t,e,r){return!r&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(n=>yNe(n,e)).then(n=>bNe(t,n,e)).then(n=>SNe(t,n,e)).then(n=>TNe(n,e))}const JQ=/url\((['"]?)([^'"]+?)\1\)/g,BNe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,NNe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function kNe(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function INe(t){const e=[];return t.replace(JQ,(r,n,a)=>(e.push(a),r)),e.filter(r=>!cS(r))}async function FNe(t,e,r,n,a){try{const s=r?eNe(e,r):e,i=KT(e);let o;return a||(o=await $T(s,i,n)),t.replace(kNe(e),`$1${o}$3`)}catch{}return t}function DNe(t,{preferredFontFormat:e}){return e?t.replace(NNe,r=>{for(;;){const[n,,a]=BNe.exec(r)||[];if(!a)return"";if(a===e)return`src: ${n};`}}):t}function ZQ(t){return t.search(JQ)!==-1}async function e9(t,e,r){if(!ZQ(t))return t;const n=DNe(t,r);return INe(n).reduce((s,i)=>s.then(o=>FNe(o,i,e,r)),Promise.resolve(n))}async function H0(t,e,r){var n;const a=(n=e.style)===null||n===void 0?void 0:n.getPropertyValue(t);if(a){const s=await e9(a,null,r);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function RNe(t,e){await H0("background",t,e)||await H0("background-image",t,e),await H0("mask",t,e)||await H0("-webkit-mask",t,e)||await H0("mask-image",t,e)||await H0("-webkit-mask-image",t,e)}async function LNe(t,e){const r=ko(t,HTMLImageElement);if(!(r&&!cS(t.src))&&!(ko(t,SVGImageElement)&&!cS(t.href.baseVal)))return;const n=r?t.src:t.href.baseVal,a=await $T(n,KT(n),e);await new Promise((s,i)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...l)=>{try{s(e.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=t;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(t.srcset="",t.src=a):t.href.baseVal=a})}async function UNe(t,e){const n=of(t.childNodes).map(a=>t9(a,e));await Promise.all(n).then(()=>t)}async function t9(t,e){ko(t,Element)&&(await RNe(t,e),await LNe(t,e),await UNe(t,e))}function MNe(t,e){const{style:r}=t;e.backgroundColor&&(r.backgroundColor=e.backgroundColor),e.width&&(r.width=`${e.width}px`),e.height&&(r.height=`${e.height}px`);const n=e.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),t}const aL={};async function sL(t){let e=aL[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},aL[t]=e,e}async function iL(t,e){let r=t.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),XQ(o,e.fetchRequestInit,({result:l})=>(r=r.replace(i,`url(${l})`),[i,l]))});return Promise.all(s).then(()=>r)}function oL(t){if(t==null)return[];const e=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=t.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=a.exec(n);if(l===null)break;e.push(l[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=s.exec(n);if(l===null){if(l=o.exec(n),l===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;e.push(l[0])}return e}async function PNe(t,e){const r=[],n=[];return t.forEach(a=>{if("cssRules"in a)try{of(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const l=s.href,u=sL(l).then(d=>iL(d,e)).then(d=>oL(d).forEach(h=>{try{a.insertRule(h,h.startsWith("@import")?o+=1:a.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:h,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=t.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(sL(a.href).then(o=>iL(o,e)).then(o=>oL(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(t.forEach(a=>{if("cssRules"in a)try{of(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function jNe(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>ZQ(e.style.getPropertyValue("src")))}async function ONe(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=of(t.ownerDocument.styleSheets),n=await PNe(r,e);return jNe(n)}function r9(t){return t.trim().replace(/["']/g,"")}function QNe(t){const e=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{e.add(r9(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(t),e}async function HNe(t,e){const r=await ONe(t,e),n=QNe(t);return(await Promise.all(r.filter(s=>n.has(r9(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return e9(s.cssText,i,e)}))).join(`
`)}async function VNe(t,e){const r=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await HNe(t,e);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}}async function zNe(t,e={}){const{width:r,height:n}=WQ(t,e),a=await gb(t,e,!0);return await VNe(a,e),await t9(a,e),MNe(a,e),await oNe(a,r,n)}async function GNe(t,e={}){const{width:r,height:n}=WQ(t,e),a=await zNe(t,e),s=await tw(a),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||aNe(),u=e.canvasWidth||r,d=e.canvasHeight||n;return i.width=u*l,i.height=d*l,e.skipAutoScale||sNe(i),i.style.width=`${u}`,i.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function xb(t,e={}){return(await GNe(t,e)).toDataURL()}const n9="recursos_crucigramas",vb="recursos_lineas_de_tiempo",yb="recursos_mapas_mentales",a9="recursos_sopas_de_letras",wb=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,createdAt:((s=(a=e.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||e.createdAt}},qNe=t=>{const e=er(Ft(Tt,n9),gn("fechaCreacion","desc"));return Tr(e,r=>{const n=r.docs.map(a=>wb(a));t(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),t([])})},KNe=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:cr.fromDate(new Date)};return(await Ca(Ft(Tt,n9),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},$Ne=t=>{const e=er(Ft(Tt,vb),gn("createdAt","desc"));return Tr(e,r=>{const n=r.docs.map(a=>wb(a));t(n)},r=>{console.error("Error al suscribirse a las lneas de tiempo:",r),t([])})},WNe=async(t,e)=>{try{const{id:r,...n}=t,a=yr(Tt,vb,r);await $i(a,{...n,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:cr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la lnea de tiempo:",r),new Error("No se pudo guardar la lnea de tiempo.")}},XNe=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:cr.fromDate(new Date)};return(await Ca(Ft(Tt,vb),r)).id}catch(r){throw console.error("Error al crear la lnea de tiempo:",r),new Error("No se pudo crear la lnea de tiempo.")}},YNe=async t=>{try{const e=yr(Tt,vb,t);await mi(e)}catch(e){throw console.error("Error al eliminar la lnea de tiempo:",e),new Error("No se pudo eliminar la lnea de tiempo.")}},JNe=t=>{const e=er(Ft(Tt,yb),gn("createdAt","desc"));return Tr(e,r=>{const n=r.docs.map(a=>wb(a));t(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),t([])})},ZNe=async(t,e)=>{try{const{id:r,...n}=t,a=yr(Tt,yb,r);await $i(a,{...n,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:cr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},eke=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:cr.fromDate(new Date)};return(await Ca(Ft(Tt,yb),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},tke=async t=>{try{const e=yr(Tt,yb,t);await mi(e)}catch(e){throw console.error("Error al eliminar el mapa mental:",e),new Error("No se pudo eliminar el mapa mental.")}},rke=t=>{const e=er(Ft(Tt,a9),gn("createdAt","desc"));return Tr(e,r=>{const n=r.docs.map(a=>wb(a));t(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),t([])})},nke=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:cr.fromDate(new Date)};return(await Ca(Ft(Tt,a9),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},ake=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ske=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1v4m0 0h-4m4-4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 4l-5-5"})}),ike=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),oke=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),uS=(t,e)=>!t.children||t.children.length===0?e:t.children.reduce((r,n)=>r+uS(n,e),0),AS=(t,e="tree")=>{const r=[],n=[];if(e==="tree"){const i=(o,l,u)=>{r.push({id:o.id,position:{x:l*250,y:u},data:{label:o.label},type:l===0?"input":"default",sourcePosition:lr.Right,targetPosition:lr.Left});const d=uS(o,80);let h=u-d/2;(o.children||[]).forEach(m=>{const g=uS(m,80),b=h+g/2;n.push({id:`e-${o.id}-${m.id}`,source:o.id,target:m.id,type:"smoothstep",animated:!0}),i(m,l+1,b),h+=g})};i(t,0,0)}else{r.push({id:t.id,position:{x:0,y:0},data:{label:t.label},type:"input"});const i=250,o=450;(t.children||[]).forEach((l,u)=>{const d=u/t.children.length*2*Math.PI;r.push({id:l.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:l.label}}),n.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((h,m)=>{const g=d+(m-(l.children.length-1)/2)*.2;r.push({id:h.id,position:{x:i*Math.cos(d)+o*.5*Math.cos(g),y:i*Math.sin(d)+o*.5*Math.sin(g)},data:{label:h.label}}),n.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},s9=({node:t,onUpdate:e,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return c.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[c.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),c.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""}),a>0&&c.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""})]})}),(t.children||[]).map(o=>c.jsx(s9,{node:o,onUpdate:e,onAddChild:r,onDelete:n,level:a+1},o.id))]})},lke=({mapData:t,onBack:e,onSave:r})=>{const[n,a]=ee.useState(t.treeData),[s,i]=ee.useState("tree"),[o,l]=ee.useState(!1),[u,d,h]=jBe([]),[m,g,b]=OBe([]),{fitView:y}=pb();ee.useEffect(()=>{const{nodes:P,edges:R}=AS(n,s);d(P),g(R),setTimeout(()=>y({duration:300}),50)},[n,s,d,g,y]);const E=(P,R)=>{const C=JSON.parse(JSON.stringify(n)),S=N=>N.id===P?(N.label=R,!0):(N.children||[]).some(S);S(C),a(C)},B=P=>{const R=JSON.parse(JSON.stringify(n)),C=S=>S.id===P?(S.children||(S.children=[]),S.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(S.children||[]).some(C);C(R),a(R)},k=P=>{const R=JSON.parse(JSON.stringify(n)),C=S=>{const N=(S.children||[]).findIndex(Q=>Q.id===P);return N!==-1?(S.children.splice(N,1),!0):(S.children||[]).some(C)};C(R),a(R)},L=()=>{l(!0);const{nodes:P,edges:R}=AS(n,s);r({...t,treeData:n,nodes:P,edges:R}),setTimeout(()=>l(!1),1e3)},M=async P=>{const R=document.querySelector(".react-flow");R&&xb(R,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(C=>{{const S=document.createElement("a");S.download=`${t.tema}.png`,S.href=C,S.click()}}).catch(C=>console.error("oops, something went wrong!",C))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),c.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:" Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:[c.jsxs(zQ,{nodes:u,edges:m,onNodesChange:h,onEdgesChange:b,fitView:!0,children:[c.jsx(KBe,{}),c.jsx(ZBe,{})]}),c.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:c.jsxs("button",{onClick:()=>{},className:"bg-white/80 backdrop-blur-sm dark:bg-slate-800/80 p-2 rounded-lg shadow border dark:border-slate-700 flex items-center gap-2 text-sm",children:[c.jsx(ske,{})," Pantalla completa"]})})]}),c.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[c.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(ike,{})," Vista en rbol"]}),c.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(oke,{})," Vista con tema central"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.jsx(s9,{node:n,onUpdate:E,onAddChild:B,onDelete:k})}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>M(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),c.jsx("button",{onClick:L,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},cke=({onBack:t,currentUser:e})=>{const[r,n]=ee.useState("list"),[a,s]=ee.useState([]),[i,o]=ee.useState(null),[l,u]=ee.useState(!1),[d,h]=ee.useState(!0),[m,g]=ee.useState(""),[b,y]=ee.useState(""),[E,B]=ee.useState("");ee.useEffect(()=>{h(!0);const C=JNe(S=>{s(S),h(!1)});return()=>C()},[]);const k=async C=>{if(C.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}u(!0);const S=`Basado en el tema central "${m}", y considerando el contenido adicional "${E}", genera una estructura jerrquica detallada para un mapa mental con al menos 3 niveles de profundidad. La estructura debe ser un desglose lgico del tema en subtemas. La respuesta DEBE ser un nico objeto JSON vlido. Cada nodo en el JSON debe tener las propiedades "id" (un string nico generado con crypto.randomUUID()), "label" (el texto del nodo), y "children" (un array de nodos hijos con la misma estructura).`;try{const re=(await(await new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}).generateContent(S)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(re),{nodes:ae,edges:K}=AS(Y),G={tema:m,nivel:b,treeData:Y,nodes:ae,edges:K},W=await eke(G,e);o({...G,id:W,createdAt:new Date().toISOString()}),n("editor")}catch(N){console.error("AI Generation Error:",N),alert("Hubo un error al generar el mapa mental con la IA. Intntelo de nuevo.")}finally{u(!1)}},L=async C=>{try{await ZNe(C,e)}catch(S){console.error("Error saving mind map:",S),alert("No se pudo guardar el mapa mental.")}},M=C=>{o(C),n("editor")},P=async C=>{if(window.confirm("Eliminar este mapa mental?"))try{await tke(C)}catch(S){console.error("Error deleting mind map:",S),alert("No se pudo eliminar el mapa mental.")}},R=()=>{switch(r){case"editor":return i?c.jsx(qT,{children:c.jsx(lke,{mapData:i,onBack:()=>n("list"),onSave:L})}):null;case"config":return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),c.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver"})]}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:m,onChange:C=>g(C.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),c.jsx("textarea",{id:"contenido",value:E,onChange:C=>B(C.target.value),rows:4,placeholder:"Aade ms detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?c.jsx(ake,{}):"Generar Mapa con IA"})})]})]});case"list":default:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),c.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(C=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[c.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:C.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(C.createdAt).toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:()=>M(C),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>P(C.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},C.id)):c.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningn mapa mental todava."})})]})}};return d?c.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),R()]})},uke=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ake=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),dke=({onBack:t,currentUser:e})=>{const[r,n]=ee.useState([]),[a,s]=ee.useState("Media"),[i,o]=ee.useState(10),[l,u]=ee.useState(!1),[d,h]=ee.useState(Array(10).fill("")),[m,g]=ee.useState(""),[b,y]=ee.useState(null),[E,B]=ee.useState({ai:!1,puzzle:!1,data:!0}),k=ee.useRef(null);ee.useEffect(()=>{B(D=>({...D,data:!0}));const Q=rke(D=>{n(D),B(I=>({...I,data:!1}))});return()=>Q()},[]),ee.useEffect(()=>{h(Q=>{const D=Array(i).fill("");for(let I=0;I<Math.min(Q.length,i);I++)D[I]=Q[I];return D})},[i]);const L=(Q,D)=>{const I=[...d];I[Q]=D,h(I)},M=async()=>{if(m.trim()){B(Q=>({...Q,ai:!0}));try{const I=new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}),O=`Genera una lista de ${i} palabras clave, en espaol, relacionadas con el tema "${m}". Las palabras no deben contener espacios ni caracteres especiales.`,ae=(await(await I.generateContent(O)).response).text().replace(/^```json\s*|```\s*$/g,""),W=[...JSON.parse(ae).palabras.map(ie=>ie.toUpperCase().replace(/\s/g,"")).slice(0,i)];for(;W.length<i;)W.push("");h(W)}catch(Q){console.error("Error generating words with AI:",Q),alert("No se pudieron generar las palabras. Intntelo de nuevo.")}finally{B(Q=>({...Q,ai:!1}))}}},P=(Q,D,I,O,z,re)=>{for(let Y=0;Y<Q.length;Y++){const ae=I+Y*z.y,K=O+Y*z.x;if(ae<0||ae>=re||K<0||K>=re||D[ae][K]&&D[ae][K]!==Q[Y])return!1}return!0},R=(Q,D,I,O,z)=>{for(let re=0;re<Q.length;re++)D[I+re*z.y][O+re*z.x]=Q[re]},C=async()=>{B(ae=>({...ae,puzzle:!0})),y(null),await new Promise(ae=>setTimeout(ae,100));const Q=d.map(ae=>ae.toUpperCase().replace(/[^A-Z]/g,"")).filter(Boolean);if(Q.length===0){alert("Por favor, ingrese al menos una palabra vlida."),B(ae=>({...ae,puzzle:!1}));return}const D=Math.max(...Q.map(ae=>ae.length));let I=Math.max(D,Q.length)+2;a==="Media"&&(I+=3),a==="Difcil"&&(I+=5),I=Math.min(Math.max(I,10),25);const O=Array(I).fill(null).map(()=>Array(I).fill(null)),z=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fcil"&&z.push({x:1,y:-1}),a==="Difcil"&&z.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const ae of Q.sort((K,G)=>G.length-K.length)){let K=!1;for(let G=0;G<100;G++){const W=z[Math.floor(Math.random()*z.length)],ie=Math.floor(Math.random()*I),j=Math.floor(Math.random()*I);if(P(ae,O,ie,j,W,I)){R(ae,O,ie,j,W),K=!0;break}}K||console.warn(`No se pudo colocar la palabra: ${ae}`)}const re=O.map(ae=>ae.map(K=>K||"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*27)])),Y={tema:m,grid:re,words:Q.sort()};try{const ae=await nke(Y,e);y({...Y,id:ae,createdAt:new Date().toISOString()})}catch(ae){console.error("Error saving puzzle:",ae),alert("No se pudo guardar la sopa de letras.")}finally{B(ae=>({...ae,puzzle:!1}))}},S=()=>{k.current&&xb(k.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(Q=>{const D=document.createElement("a");D.download="sopa-de-letras.png",D.href=Q,D.click()}).catch(Q=>{console.error("oops, something went wrong!",Q),alert("No se pudo generar la imagen. Intntelo de nuevo.")})},N=()=>b?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:k,className:"p-6 bg-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${b.grid.length}, minmax(0, 1fr))`},children:b.grid.flat().map((Q,D)=>c.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:Q},D))})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),c.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:b.words.map(Q=>c.jsx("li",{children:Q},Q))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),c.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]}):null;return E.data?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),!b&&c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),c.jsxs("select",{value:a,onChange:Q=>s(Q.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:"Fcil"}),c.jsx("option",{children:"Media"}),c.jsx("option",{children:"Difcil"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(Q=>c.jsx("button",{onClick:()=>{o(Q),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&i===Q?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:Q},Q)),c.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&c.jsx("input",{type:"number",value:i,onChange:Q=>o(parseInt(Q.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:Q=>g(Q.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:M,disabled:E.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:E.ai?c.jsx(uke,{}):c.jsxs(c.Fragment,{children:[c.jsx(Ake,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((Q,D)=>c.jsx("input",{type:"text",value:Q,onChange:I=>L(D,I.target.value),placeholder:`Palabra ${D+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},D))})]}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:C,disabled:E.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:E.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),b&&N()]})},fke=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),hke=({timeline:t,onSave:e,onBack:r})=>{const[n,a]=ee.useState(t),s=ee.useRef(null),i=(d,h,m)=>{a(g=>({...g,events:g.events.map(b=>b.id===d?{...b,[h]:m}:b)}))},o=()=>{const d={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:""},h=[...n.events,d].sort((m,g)=>parseInt(m.date)-parseInt(g.date));a(m=>({...m,events:h}))},l=d=>{a(h=>({...h,events:h.events.filter(m=>m.id!==d)}))},u=()=>{s.current&&xb(s.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(d=>{const h=document.createElement("a");h.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,h.href=d,h.click()}).catch(d=>{console.error("Error al generar la imagen:",d),alert("No se pudo generar la imagen. Intntelo de nuevo.")})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),c.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:c.jsxs("div",{ref:s,className:"relative p-10",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),c.jsx("div",{className:"relative",children:n.events.sort((d,h)=>parseInt(d.date)-parseInt(h.date)).map((d,h)=>{const m=h%2===0;return c.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[c.jsx("div",{className:"w-1/2",children:m&&c.jsx("div",{className:"text-right pr-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})}),c.jsx("div",{className:"z-10 flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),c.jsx("div",{className:"w-1/2",children:!m&&c.jsx("div",{className:"text-left pl-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})})]},d.id)})})]})}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(d=>c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[c.jsx("input",{type:"text",value:d.date,onChange:h=>i(d.id,"date",h.target.value),placeholder:"Ao/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),c.jsx("textarea",{value:d.description,onChange:h=>i(d.id,"description",h.target.value),placeholder:"Descripcin",rows:2,className:"w-full bg-transparent text-sm dark:text-slate-300"}),c.jsx("button",{onClick:()=>l(d.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},d.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:o,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Aadir Hito"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:u,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),c.jsx("button",{onClick:()=>e(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},mke=({onBack:t,currentUser:e})=>{const[r,n]=ee.useState("list"),[a,s]=ee.useState([]),[i,o]=ee.useState(null),[l,u]=ee.useState(!1),[d,h]=ee.useState(!0),[m,g]=ee.useState(""),[b,y]=ee.useState(""),[E,B]=ee.useState("");ee.useEffect(()=>{h(!0);const P=$Ne(R=>{s(R),h(!1)});return()=>P()},[]);const k=async P=>{if(P.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}u(!0);const R=b&&E?`entre ${b} y ${E}`:b?`a partir de ${b}`:E?`hasta ${E}`:"",C=`Genera una lnea de tiempo sobre el tema "${m}" ${R}. Crea entre 5 y 10 hitos clave ordenados cronolgicamente. Para cada hito, proporciona una fecha o ao, una descripcin breve y un emoji representativo.`;try{const z=(await(await new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}).generateContent(C)).response).text().replace(/^```json\s*|```\s*$/g,""),re=JSON.parse(z),Y={tema:m,fechaInicio:b,fechaFin:E,events:re.events.map(K=>({...K,id:crypto.randomUUID()}))},ae=await XNe(Y,e);o({...Y,id:ae,createdAt:new Date().toISOString()}),n("editor")}catch(S){console.error("AI Generation Error:",S),alert("Hubo un error al generar la lnea de tiempo. Intntelo de nuevo.")}finally{u(!1)}},L=async P=>{try{await WNe(P,e),n("list"),o(null)}catch(R){console.error("Error saving timeline:",R),alert("No se pudo guardar la lnea de tiempo.")}},M=async P=>{if(window.confirm("Eliminar esta lnea de tiempo?"))try{await YNe(P)}catch(R){console.error("Error deleting timeline:",R),alert("No se pudo eliminar la lnea de tiempo.")}};return r==="editor"&&i?c.jsx(hke,{timeline:i,onSave:L,onBack:()=>n("list")}):d?c.jsx("div",{className:"text-center py-10",children:"Cargando lneas de tiempo..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Lnea de Tiempo"}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:m,onChange:P=>g(P.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),c.jsx("input",{type:"text",id:"fechaInicio",value:b,onChange:P=>y(P.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Trmino (Opcional)"}),c.jsx("input",{type:"text",id:"fechaFin",value:E,onChange:P=>B(P.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?c.jsx(fke,{}):"Generar con IA"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo Guardadas"}),a.length>0?a.map(P=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:P.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(P.createdAt).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{o(P),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),c.jsx("button",{onClick:()=>M(P.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},P.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay lneas de tiempo guardadas."})]})]})},pke=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),gke=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),xke=({onBack:t,currentUser:e})=>{const[r,n]=ee.useState([]),[a,s]=ee.useState(10),[i,o]=ee.useState(!1),[l,u]=ee.useState(Array(10).fill("")),[d,h]=ee.useState(Array(10).fill("")),[m,g]=ee.useState(""),[b,y]=ee.useState(null),[E,B]=ee.useState(!1),[k,L]=ee.useState({ai:!1,puzzle:!1,data:!0}),M=ee.useRef(null);ee.useEffect(()=>{L(O=>({...O,data:!0}));const I=qNe(O=>{n(O),L(z=>({...z,data:!1}))});return()=>I()},[]),ee.useEffect(()=>{const I=a;u(O=>Array.from({length:I},(z,re)=>O[re]||"")),h(O=>Array.from({length:I},(z,re)=>O[re]||""))},[a]);const P=(I,O)=>{const z=[...l];z[I]=O,u(z)},R=(I,O)=>{const z=[...d];z[I]=O,h(z)},C=async()=>{if(m.trim()){L(I=>({...I,ai:!0}));try{const z=new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}),re=`Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${m}". Las palabras no deben contener espacios.`,K=(await(await z.generateContent(re)).response).text(),G=JSON.parse(K),W=G.items.map(j=>j.word.toUpperCase().replace(/\s/g,"")),ie=G.items.map(j=>j.clue);u(Array.from({length:a},(j,X)=>W[X]||"")),h(Array.from({length:a},(j,X)=>ie[X]||""))}catch(I){console.error("Error generating words/clues with AI:",I),alert("No se pudieron generar las palabras y pistas. Intntelo de nuevo.")}finally{L(I=>({...I,ai:!1}))}}},S=ee.useCallback(()=>{try{const I=l.map((Se,be)=>({word:Se.toUpperCase().replace(/[^A-Z]/g,""),clue:d[be]})).filter(Se=>Se.word.length>0);if(I.length===0)return alert("Por favor, ingrese al menos una palabra vlida."),null;I.sort((Se,be)=>be.word.length-Se.word.length);const O=I[0].word.length,z=Math.max(O,I.length)*2;let re=Array.from({length:z},()=>Array(z).fill(null));const Y=[],ae=I.shift(),K=Math.floor(z/2),G=Math.floor((z-ae.word.length)/2);for(let Se=0;Se<ae.word.length;Se++)re[K][G+Se]=ae.word[Se];Y.push({word:ae.word,clue:ae.clue,direction:"across",row:K,col:G});for(const Se of I){let be={score:-1,row:-1,col:-1,direction:"across"};for(const je of Y)for(let Ke=0;Ke<je.word.length;Ke++)for(let st=0;st<Se.word.length;st++)if(je.word[Ke]===Se.word[st]){let pt=0,St,ut,kt;je.direction==="across"?(kt="down",St=je.row-st,ut=je.col+Ke):(kt="across",St=je.row+Ke,ut=je.col-st);let zt=!0;for(let Yt=0;Yt<Se.word.length;Yt++){const It=St+(kt==="down"?Yt:0),Dt=ut+(kt==="across"?Yt:0);if(It<0||It>=z||Dt<0||Dt>=z){zt=!1;break}const Wt=re[It][Dt],Lt=It===je.row+(je.direction==="down"?Ke:0)&&Dt===je.col+(je.direction==="across"?Ke:0);if(Wt&&!Lt){zt=!1;break}if(Wt&&Lt&&Wt!==Se.word[st]){zt=!1;break}if(!Lt){if(kt==="across"&&(It>0&&re[It-1][Dt]||It<z-1&&re[It+1][Dt])){zt=!1;break}if(kt==="down"&&(Dt>0&&re[It][Dt-1]||Dt<z-1&&re[It][Dt+1])){zt=!1;break}}Wt&&pt++}zt&&pt>be.score&&(be={score:pt,row:St,col:ut,direction:kt})}if(be.score>-1){for(let je=0;je<Se.word.length;je++){const Ke=be.row+(be.direction==="down"?je:0),st=be.col+(be.direction==="across"?je:0);re[Ke][st]=Se.word[je]}Y.push({word:Se.word,clue:Se.clue,direction:be.direction,row:be.row,col:be.col})}}let W=z,ie=-1,j=z,X=-1;Y.forEach(Se=>{W=Math.min(W,Se.row),ie=Math.max(ie,Se.row+(Se.direction==="down"?Se.word.length-1:0)),j=Math.min(j,Se.col),X=Math.max(X,Se.col+(Se.direction==="across"?Se.word.length-1:0))}),ie===-1&&(W=Y[0].row,ie=Y[0].row,j=Y[0].col,X=Y[0].col+Y[0].word.length-1);const Z=1,te=Math.max(0,W-Z),ce=Math.min(z,ie+1+Z),de=Math.max(0,j-Z),me=Math.min(z,X+1+Z),ge=re.slice(te,ce).map(Se=>Se.slice(de,me)),Te=Y.map(Se=>({...Se,row:Se.row-te,col:Se.col-de})).sort((Se,be)=>Se.row-be.row||Se.col-be.col);let xe=1;const oe=[],Me=new Map;Te.forEach(Se=>{const be=`${Se.row},${Se.col}`;Me.has(be)||Me.set(be,xe++),oe.push({...Se,number:Me.get(be)})});const at=ge.map(Se=>Se.map(be=>({char:be,number:null})));return oe.forEach(Se=>{const be=`${Se.row},${Se.col}`;at[Se.row]&&at[Se.row][Se.col]!==void 0&&(at[Se.row][Se.col].number=Me.get(be))}),{grid:at,clues:{across:oe.filter(Se=>Se.direction==="across").sort((Se,be)=>Se.number-be.number),down:oe.filter(Se=>Se.direction==="down").sort((Se,be)=>Se.number-be.number)}}}catch(I){return console.error("Error generating crossword grid:",I),alert("Ocurri un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,d]),N=async()=>{L(O=>({...O,puzzle:!0})),y(null),await new Promise(O=>setTimeout(O,100));const I=S();if(I){const O={tema:m,grid:I.grid,clues:I.clues};try{const z=await KNe(O,e);y({...O,id:z,fechaCreacion:new Date().toISOString(),creadorId:e.id,creadorNombre:e.nombreCompleto})}catch(z){console.error("Error saving puzzle:",z),alert("No se pudo guardar el crucigrama en la base de datos.")}}L(O=>({...O,puzzle:!1}))},Q=()=>{M.current&&(B(!1),setTimeout(()=>{xb(M.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(I=>{const O=document.createElement("a");O.download="crucigrama.png",O.href=I,O.click()}).catch(I=>console.error("Error generating image",I))},100))},D=()=>b?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:M,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${b.grid[0].length}, 2rem)`},children:b.grid.flat().map((I,O)=>c.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:I.char?"white":"black"},children:[I.number&&c.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:I.number}),E&&I.char&&c.jsx("span",{children:I.char})]},O))})}),c.jsxs("div",{className:"text-sm",children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),c.jsx("ul",{className:"space-y-1",children:b.clues.across.map(I=>c.jsxs("li",{children:[c.jsxs("strong",{children:[I.number,"."]})," ",I.clue]},`${I.word}-${I.clue}`))}),c.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),c.jsx("ul",{className:"space-y-1",children:b.clues.down.map(I=>c.jsxs("li",{children:[c.jsxs("strong",{children:[I.number,"."]})," ",I.clue]},`${I.word}-${I.clue}`))})]})]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:E,onChange:()=>B(!E),className:"h-5 w-5 rounded"}),c.jsx("span",{children:"Mostrar Solucin"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),c.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):null;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),b?D():c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(I=>c.jsx("button",{onClick:()=>{s(I),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===I?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:I},I)),c.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&c.jsx("input",{type:"number",value:a,onChange:I=>s(parseInt(I.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:I=>g(I.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:C,disabled:k.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:k.ai?c.jsx(pke,{}):c.jsxs(c.Fragment,{children:[c.jsx(gke,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((I,O)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx("input",{type:"text",value:l[O],onChange:z=>P(O,z.target.value),placeholder:`Palabra ${O+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:d[O],onChange:z=>R(O,z.target.value),placeholder:`Pista ${O+1}`,rows:1,className:"md:col-span-2 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]},O))}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:N,disabled:k.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:k.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},vke=[{id:"sopaDeLetras",icon:"",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"",nombre:"Lneas de Tiempo",descripcion:"Construye lneas de tiempo para comprender procesos, hechos histricos o secuencias."}],yke=({recurso:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[c.jsx("div",{className:"text-6xl mb-4",children:t.icon}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),wke=()=>{const[t,e]=ee.useState("menu"),r=()=>t==="mapasMentales"?c.jsx(cke,{onBack:()=>e("menu")}):t==="sopaDeLetras"?c.jsx(dke,{onBack:()=>e("menu")}):t==="lineasDeTiempo"?c.jsx(mke,{onBack:()=>e("menu")}):t==="crucigramas"?c.jsx(xke,{onBack:()=>e("menu")}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:vke.map(n=>c.jsx(yke,{recurso:n,onClick:()=>e(n.id)},n.id))})]});return c.jsx("div",{className:"animate-fade-in space-y-6",children:r()})},bke="evaluaciones_formativas",Cke="calificaciones_formativas",i9="trabajos_grupales_formativos",o9=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((s=(a=e.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.fechaPresentacion}},Eke=(t,e)=>{const r=er(Ft(Tt,bke),Fn("curso","==",t));return Tr(r,n=>{e(n.docs.map(a=>o9(a)))},n=>{console.error("Error subscribing to student evaluations:",n),e([])})},_ke=t=>{const e=er(Ft(Tt,Cke));return Tr(e,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),t(n)},r=>{console.error("Error subscribing to grades:",r),t({})})},Ske=(t,e)=>{const r=er(Ft(Tt,i9),Fn("curso","==",t));return Tr(r,n=>{e(n.docs.map(a=>o9(a)))},n=>{console.error("Error subscribing to group projects:",n),e([])})},Tke=async t=>{try{const{id:e,...r}=t,n=yr(Tt,i9,e);await $i(n,r)}catch(e){throw console.error("Error updating group project:",e),new Error("Could not update group project.")}},Bke=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,a]=ee.useState({}),[s,i]=ee.useState([]),[o,l]=ee.useState(!0),[u,d]=ee.useState(null),[h,m]=ee.useState(!1),[g,b]=ee.useState(null),y=ee.useRef(null);ee.useEffect(()=>{if(!t.curso){l(!1);return}l(!0);const M=Eke(t.curso,r),P=_ke(a),R=Ske(t.curso,C=>{i(C),l(!1)});return()=>{M(),P(),R()}},[t.curso]);const E=ee.useMemo(()=>{if(!t.curso)return[];const P=e.filter(R=>R.curso===t.curso).reduce((R,C)=>((R[C.asignatura]=R[C.asignatura]||[]).push(C),R),{});return Object.entries(P).map(([R,C])=>{let S=0,N=0;const Q=C.map(I=>{var re;const O=(re=n[I.id])==null?void 0:re[t.nombreCompleto];let z="No Trabajado";return O==="trabajado"?(S+=7,N++,z="Trabajado"):O==="no trabajado"&&(S+=2,N++,z="No Trabajado"),{id:I.id,nombreActividad:I.nombreActividad,fecha:I.fecha,estado:z}}).filter(I=>{var O;return(O=n[I.id])==null?void 0:O[t.nombreCompleto]}),D=N>0?(S/N).toFixed(1):"N/A";return{asignatura:R,promedio:D,actividades:Q.sort((I,O)=>new Date(O.fecha).getTime()-new Date(I.fecha).getTime())}}).filter(R=>R.actividades.length>0).sort((R,C)=>R.asignatura.localeCompare(C.asignatura))},[e,n,t]);ee.useEffect(()=>{if(E.reduce((N,Q)=>N+Q.actividades.length,0)===0){d(null);return}const P=E.reduce((N,Q)=>{const D=parseFloat(Q.promedio);return isNaN(D)?N:N+D},0),R=E.length>0?P/E.length:0,C=xv.find(N=>R>=N.promedioMin&&R<=N.promedioMax)||null,S=xv.filter(N=>R>=N.promedioMin);if(d({puntajeTotal:0,promedio:R,rangoActual:C,insigniasGanadas:S}),y.current!==null){const N=xv.find(Q=>y.current>=Q.promedioMin&&y.current<=Q.promedioMax)||null;C&&(!N||C.nombre!==N.nombre)&&b(C)}y.current=R},[E]);const B=ee.useMemo(()=>t.curso?s.filter(M=>M.curso===t.curso).map(M=>{const P=M.grupos.find(R=>R.integrantes.some(C=>C.nombre===t.nombreCompleto));return P?{...M,miGrupo:P}:null}).filter(M=>M!==null).sort((M,P)=>new Date(P.fechaPresentacion).getTime()-new Date(M.fechaPresentacion).getTime()):[],[s,t]),k=async(M,P)=>{const R=s.find(S=>S.id===M);if(!R)return;const C={...R,grupos:R.grupos.map(S=>S.integrantes.some(Q=>Q.nombre===t.nombreCompleto)?{...S,integrantes:S.integrantes.map(Q=>Q.nombre===t.nombreCompleto?{...Q,rol:P||void 0}:Q)}:S)};try{await Tke(C)}catch(S){console.error("Error updating role:",S),alert("No se pudo actualizar el rol.")}},L=M=>{const P=parseFloat(M);return isNaN(P)?"bg-slate-400":P<4?"bg-red-500":P<5.5?"bg-yellow-500":"bg-green-500"};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[g&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>b(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:M=>M.stopPropagation(),children:[c.jsx("div",{className:"text-8xl animate-bounce",children:g.emoji}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"Subiste de Rango!"}),c.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:g.nombre}),c.jsx("p",{className:"text-slate-600 mt-4",children:g.mensaje}),c.jsx("button",{onClick:()=>b(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"Genial!"})]})}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>m(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:M=>M.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),c.jsx("div",{className:"overflow-y-auto space-y-3",children:xv.map(M=>{const P=u==null?void 0:u.insigniasGanadas.some(R=>R.nombre===M.nombre);return c.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${P?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[c.jsx("div",{className:"text-5xl",children:M.emoji}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${P?"text-amber-700":"text-slate-600"}`,children:M.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",M.promedioMin," y ",M.promedioMax]})]})]},M.nombre)})})]})}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Aqu puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&c.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),c.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),c.jsx("button",{onClick:()=>m(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),c.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),c.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),E.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(M=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:M.asignatura}),c.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${L(M.promedio)}`,children:M.promedio})]}),c.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),M.actividades.map(P=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-700",children:P.nombreActividad}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(P.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),c.jsx("span",{className:`font-semibold ${P.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:P.estado==="Trabajado"?" Trabajado":" No Trabajado"})]},P.id))]})]},M.asignatura))}):c.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:""}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"An sin registros"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"Todava no tienes evaluaciones formativas registradas por tus profesores."})]})]}),B.length>0&&c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),c.jsx("div",{className:"space-y-4",children:B.map(M=>{const P=M.miGrupo.integrantes.filter(C=>C.nombre!==t.nombreCompleto&&C.rol).map(C=>C.rol),R=L8.filter(C=>!P.includes(C));return c.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:M.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:[M.asignatura," - Presentacin: ",new Date(M.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",M.miGrupo.numero]}),c.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:M.miGrupo.integrantes.map(C=>c.jsxs("li",{className:"grid grid-cols-2 items-center",children:[c.jsx("span",{className:C.nombre===t.nombreCompleto?"font-bold":"",children:C.nombre}),C.nombre===t.nombreCompleto?c.jsxs("select",{value:C.rol||"",onChange:S=>k(M.id,S.target.value),className:"text-sm p-1 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- Seleccionar rol --"}),C.rol&&!R.includes(C.rol)&&c.jsx("option",{value:C.rol,children:C.rol}),R.map(S=>c.jsx("option",{value:S,children:S},S))]}):c.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:C.rol||"Sin rol"})]},C.nombre))})]})]},M.id)})})]})]})},Nke="proyectos_interdisciplinarios",l9="entregas_interdisciplinarias",c9=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaCompletado:((s=(a=e.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||e.fechaCompletado}},kke=(t,e)=>{const r=er(Ft(Tt,Nke),Fn("cursos","array-contains",t));return Tr(r,n=>{const a=n.docs.map(s=>c9(s));e(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),e([])})},Ike=(t,e)=>{const r=er(Ft(Tt,l9),Fn("estudianteId","==",t));return Tr(r,n=>{const a=n.docs.map(s=>c9(s));e(a)},n=>{console.error("Error al suscribirse a las entregas:",n),e([])})},Fke=async t=>{try{const{id:e,...r}=t,n=yr(Tt,l9,e),a={...r,fechaCompletado:cr.fromDate(new Date(r.fechaCompletado||Date.now()))};await $i(n,a,{merge:!0})}catch(e){throw console.error("Error al actualizar la entrega:",e),new Error("No se pudo guardar la entrega.")}},Dke=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,a]=ee.useState([]),[s,i]=ee.useState(null),[o,l]=ee.useState(!0);ee.useEffect(()=>{if(!t.curso||!t.id){l(!1);return}l(!0);const h=kke(t.curso,r),m=Ike(t.id,g=>{a(g),l(!1)});return()=>{h(),m()}},[t.curso,t.id]);const u=async h=>{try{await Fke(h)}catch(m){console.error("Failed to update submission:",m),alert("Hubo un error al guardar tu entrega.")}},d=({plan:h,tarea:m})=>{const g=ee.useMemo(()=>{const P=n.find(R=>R.planificacionId===h.id&&R.tareaId===m.id);return P||{id:`${h.id}_${m.id}_${t.id}`,planificacionId:h.id,tareaId:m.id,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}},[h.id,m.id,n]),[b,y]=ee.useState(!1),[E,B]=ee.useState({observaciones:g.observacionesEstudiante||"",enlace:g.enlaceUrl||""}),k=P=>{var C;const R=(C=P.target.files)==null?void 0:C[0];R&&(alert(`Simulacin: Archivo "${R.name}" listo para subir.`),u({...g,archivoAdjunto:{nombre:R.name,url:`simulated/path/${R.name}`},fechaCompletado:new Date().toISOString()}))},L=()=>{u({...g,observacionesEstudiante:E.observaciones,enlaceUrl:E.enlace,fechaCompletado:new Date().toISOString()})},M=()=>{u({...g,completada:!g.completada,fechaCompletado:new Date().toISOString()})};return c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("input",{type:"checkbox",checked:g.completada,onChange:M,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:`font-semibold ${g.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",m.numero,": ",m.instrucciones]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",m.fechaEntrega]}),m.recursoUrl&&c.jsx("a",{href:m.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),c.jsx("button",{onClick:()=>y(!b),className:"text-sm font-semibold",children:b?"Ocultar":"Entregar"})]}),b&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[c.jsx("textarea",{value:E.observaciones,onChange:P=>B({...E,observaciones:P.target.value}),onBlur:L,placeholder:"Aadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"url",value:E.enlace,onChange:P=>B({...E,enlace:P.target.value}),onBlur:L,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"file",onChange:k,className:"text-sm"}),g.archivoAdjunto&&c.jsxs("p",{className:"text-xs text-green-600",children:[" Archivo subido: ",g.archivoAdjunto.nombre]})]}),g.feedbackProfesor&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[c.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentacin del profesor:"}),c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:g.feedbackProfesor})]})]})};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),e.length>0?e.map(h=>{const m=h.tareas||[],b=n.filter(E=>E.planificacionId===h.id).filter(E=>E.completada).length,y=m.length>0?b/m.length*100:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c.jsxs("button",{onClick:()=>i(s===h.id?null:h.id),className:"w-full text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:h.nombreProyecto}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[c.jsx("span",{children:"Progreso"}),c.jsxs("span",{children:[Math.round(y),"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${y}%`}})})]})]}),s===h.id&&c.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:m.length>0?m.map(E=>c.jsx(d,{plan:h,tarea:E},E.id)):c.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto an no tiene tareas asignadas."})})]},h.id)}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[c.jsx("span",{className:"text-5xl",children:""}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Todo al da!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},Rke=({data:t})=>c.jsx("div",{className:"space-y-4",children:t.map((r,n)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),c.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),Lke=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,a]=ee.useState(!1),[s,i]=ee.useState(null),[o,l]=ee.useState(null),[u,d]=ee.useState(Dg),h=ee.useCallback(async()=>{a(!0);try{const E=(await o2e(t.nombreCompleto)).sort((B,k)=>new Date(k.fecha).getTime()-new Date(B.fecha).getTime());r(E),i(null)}catch(y){console.error("Error al cargar acompaamientos desde Firestore",y),i("No se pudieron cargar tus acompaamientos desde la nube.")}finally{a(!1)}},[t.nombreCompleto]),m=ee.useCallback(async()=>{try{const y=await l2e();y&&d(y)}catch(y){console.error("Error al cargar rbrica personalizada",y)}},[]);ee.useEffect(()=>{h(),m()},[h,m]);const g=ee.useMemo(()=>{if(!o)return[];const y={};return u.forEach(E=>{y[E.domain]={total:0,count:0},E.criteria.forEach(B=>{const k=o.rubricaResultados[B.name];k&&(y[E.domain].total+=k,y[E.domain].count++)})}),Object.entries(y).map(([E,B])=>({label:E,value:B.count>0?B.total/B.count:0}))},[o,u]),b=y=>{const E=new or;E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(100),E.text("LICEO INDUSTRIAL DE RECOLETA",E.internal.pageSize.getWidth()/2,15,{align:"center"}),E.setFont("helvetica","bold"),E.setFontSize(16),E.setTextColor(40),E.text("Informe de Acompaamiento Docente",E.internal.pageSize.getWidth()/2,25,{align:"center"}),E.setFontSize(12),E.setFont("helvetica","normal"),al(E,{startY:35,body:[["Docente:",y.docente],["Fecha:",new Date(y.fecha).toLocaleDateString("es-CL")],["Asignatura:",y.asignatura],["Curso:",y.curso],["Bloques:",y.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let B=E.lastAutoTable.finalY+15;if(Object.keys(y.rubricaResultados).length>0){const M=[],P=["Dbil","Incipiente","Satisfactorio","Avanzado"];u.forEach(R=>{M.push([{content:R.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),R.criteria.forEach(C=>{const S=y.rubricaResultados[C.name],N=S?P[S-1]:"No evaluado";M.push([C.name,N])})}),al(E,{startY:B,head:[["Indicador","Nivel de Logro"]],body:M,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),B=E.lastAutoTable.finalY+15}const k=(M,P)=>{if(!P)return;B>250&&(E.addPage(),B=20,E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(100),E.text("LICEO INDUSTRIAL DE RECOLETA",E.internal.pageSize.getWidth()/2,15,{align:"center"}),B=25),E.setFont("helvetica","bold"),E.setFontSize(14),E.setTextColor(40),E.text(M,14,B),B+=8,E.setFont("helvetica","normal"),E.setFontSize(11),E.setTextColor(60);const R=E.splitTextToSize(P.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);E.text(R,14,B),B+=R.length*5+10};k("Observaciones Generales",y.observacionesGenerales),k("Retroalimentacin Consolidada",y.retroalimentacionConsolidada);const L=E.getNumberOfPages();for(let M=1;M<=L;M++)E.setPage(M),E.setFontSize(8),E.setTextColor(128),E.text(`Pgina ${M} de ${L}`,E.internal.pageSize.getWidth()/2,E.internal.pageSize.getHeight()-10,{align:"center"});E.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(y.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a mi historial"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompaamiento"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),c.jsxs("button",{onClick:()=>b(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[c.jsx(R8,{})," Exportar PDF"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-6",children:c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsx("h3",{children:"Retroalimentacin Consolidada (IA)"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentacin."})}),c.jsx("h3",{children:"Observaciones Generales"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeo por Dominio"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx(Rke,{data:g})})]})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompaamientos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aqu encontrars el historial de tus observaciones de clase y la retroalimentacin asociada."}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompaamientos desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompaamientos registrados en la nube."}),c.jsx("div",{className:"space-y-4",children:!n&&e.length>0?e.map(y=>c.jsx("button",{onClick:()=>l(y),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[y.curso," - ",y.asignatura]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(y.fecha).toLocaleDateString("es-CL"),y.bloques&&` | Bloques: ${y.bloques}`]}),Object.keys(y.rubricaResultados).length>0&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(y.rubricaResultados).length," criterios"]})]}),c.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},y.id)):!n&&c.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:""}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"An no tienes acompaamientos de clase registrados."})]})})]})},Uke=t=>{console.log(" Iniciando suscripcin a todas las planificaciones...");try{const e=Ft(Kr,"planificaciones"),r=er(e,gn("fechaCreacion","desc"));return Tr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Todas las planificaciones cargadas:",s.length),t(s)},a=>{throw console.error(" Error al cargar todas las planificaciones:",a),a})}catch(e){throw console.error(" Error al configurar suscripcin a todas las planificaciones:",e),e}},Mke=(t,e)=>{if(console.log(" Iniciando suscripcin a planificaciones del usuario:",t),!t)throw console.error(" userId no proporcionado"),new Error("userId es requerido");try{const r=Ft(Kr,"planificaciones"),n=er(r,Fn("userId","==",t),gn("fechaCreacion","desc"));return Tr(n,s=>{const i=[];s.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log(" Planificaciones del usuario cargadas:",i.length),e(i)},s=>{throw console.error(" Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error(" Error al configurar suscripcin a planificaciones del usuario:",r),r}},Pke=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),jke=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Oke=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Qke=({plan:t,onClose:e})=>{const r=a=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",a.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",a.indicadoresEvaluacion]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"Contenidos Clave:"})," ",a.contenidos]})]}),c.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",a.cantidadClases,")"]}),c.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:a.detallesLeccion.map((s,i)=>c.jsxs("div",{className:"p-3 border dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",i+1,": ",s.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Objetivo:"})," ",s.objetivosAprendizaje]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Contenidos:"})," ",s.contenidosConceptuales]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",s.habilidadesBloom]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",s.perfilEgreso]}),c.jsxs("span",{className:"md:col-span-2",children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",s.asignaturasInterdisciplinariedad]})]})]},i))})]}),n=a=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[c.jsx("strong",{children:"Contenidos:"})," ",a.contenidos]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Inicio"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.inicio})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Desarrollo"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.desarrollo})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Cierre"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.cierre})]})]})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:a=>a.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.tipo==="Unidad"?t.nombreUnidad:t.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),c.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:c.jsx(jke,{})})]}),c.jsx("main",{className:"p-4 flex-1 overflow-y-auto",children:t.tipo==="Unidad"?r(t):n(t)})]})})},Hke=t=>{const[e,r]=ee.useState([]),[n,a]=ee.useState(!0),[s,i]=ee.useState(null),o=ee.useMemo(()=>(t==null?void 0:t.profile)==="SUBDIRECCION",[t]);return ee.useEffect(()=>{if(!(t!=null&&t.email)&&!(t!=null&&t.id)){i("Usuario no autenticado"),a(!1);return}console.log(" Configurando suscripcin a planificaciones..."),console.log(" Usuario actual:",{email:t.email,id:t.id,profile:t.profile,canViewAll:o});try{let l;if(o)console.log(" Cargando todas las planificaciones (vista admin)"),l=Uke(u=>{console.log(" Planificaciones admin cargadas:",u.length),r(u),a(!1),i(null)});else{const u=t.email||t.id||"";console.log(" Cargando planificaciones del usuario:",u),l=Mke(u,d=>{console.log(" Planificaciones del usuario cargadas:",d.length),r(d),a(!1),i(null)})}return l}catch(l){console.error(" Error al configurar suscripcin:",l),i(l instanceof Error?l.message:"Error al conectar con la base de datos"),a(!1)}},[t,o]),{planificaciones:e,loading:n,error:s,canViewAllPlans:o}},Vke=({currentUser:t})=>{console.log(" SeguimientoCurricular - currentUser recibido:",t),console.log(" currentUser.email:",t==null?void 0:t.email),console.log(" currentUser.id:",t==null?void 0:t.id),console.log(" currentUser.profile:",t==null?void 0:t.profile);const{planificaciones:e,loading:r,error:n,canViewAllPlans:a}=Hke(t),[s,i]=ee.useState("1"),[o,l]=ee.useState(null),[u,d]=ee.useState(null),h=ee.useMemo(()=>{const y={"1":"1 Medio","2":"2 Medio","3":"3 Medio","4":"4 Medio"}[s];return e.filter(E=>E.nivel===y)},[e,s]),m=b=>{l(y=>y===b?null:b)},g=[{key:"1",label:"1 Medio"},{key:"2",label:"2 Medio"},{key:"3",label:"3 Medio"},{key:"4",label:"4 Medio"}];return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Oke,{}),c.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cargando planificaciones..."})]})})]}):n?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error al cargar las planificaciones"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n})]})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&c.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:" Vista administrativa - Todas las planificaciones"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>c.jsx("button",{onClick:()=>i(b.key),className:`${s===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg transition-colors focus:outline-none`,children:b.label},b.key))})}),e.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay planificaciones disponibles"}),c.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-2",children:a?"Ningn profesor ha creado planificaciones an":"Crea planificaciones desde el mdulo de Planificacin"})]}):c.jsx("div",{className:"space-y-4",children:sl.map(b=>{const y=h.filter(B=>B.asignatura===b);if(y.length===0)return null;const E=o===b;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[c.jsxs("button",{onClick:()=>m(b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," planificacin",y.length!==1?"es":""]})]}),c.jsx("span",{className:`transform transition-transform duration-200 ${E?"rotate-180":""}`,children:c.jsx(Pke,{})})]}),E&&c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 animate-fade-in-up",children:c.jsx("ul",{className:"space-y-3",children:y.map(B=>c.jsx("li",{children:c.jsx("button",{onClick:()=>d(B),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors",children:B.tipo==="Unidad"?B.nombreUnidad:B.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Autor:"})," ",B.autor||"No especificado"]}),c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Creado: ",new Date(B.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("div",{className:"ml-3",children:c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${B.tipo==="Unidad"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:B.tipo})})]})})},B.id))})})]},b)})})]}),u&&c.jsx(Qke,{plan:u,onClose:()=>d(null)})]})},WT="analisis",zke=async()=>{try{const t=er(Ft(Kr,WT),gn("uploadDate","desc"));return(await cs(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener anlisis:",t),new Error("No se pudieron cargar los anlisis taxonmicos")}},Gke=async t=>{try{return{id:(await Ca(Ft(Kr,WT),{...t,uploadDate:t.uploadDate||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anlisis:",e),new Error("No se pudo crear el anlisis taxonmico")}},qke=async t=>{try{const e=yr(Kr,WT,t);await mi(e)}catch(e){throw console.error("Error al eliminar anlisis:",e,"ID:",t),new Error("No se pudo eliminar el anlisis taxonmico")}},lL=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],cL={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},Kke=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),uL=({currentUser:t})=>{const[e,r]=ee.useState([]),[n,a]=ee.useState(!1),[s,i]=ee.useState(null),[o,l]=ee.useState(null),[u,d]=ee.useState(""),[h,m]=ee.useState(!1),[g,b]=ee.useState(null),[y,E]=ee.useState(null),B=ee.useCallback(async()=>{a(!0);try{const R=await zke();r(R),i(null)}catch(R){console.error("Error al cargar anlisis desde Firestore",R),i("No se pudieron cargar los anlisis desde la nube.")}finally{a(!1)}},[]);ee.useEffect(()=>{B()},[B]);const k=async R=>{var S;const C=(S=R.target.files)==null?void 0:S[0];if(C){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(C.type)){i("Por favor, suba un archivo PDF o DOCX vlido."),b(null),E(null),d("");return}b(C),d(C.name),i(null);const Q=new FileReader;Q.onloadend=()=>{const D=Q.result.split(",")[1];if(!D){i("No se pudo procesar el archivo. Puede que est vaco o corrupto."),E(null);return}E({mimeType:C.type,data:D})},Q.onerror=()=>{i("Error al leer el archivo."),E(null)},Q.readAsDataURL(C)}},L=async()=>{if(!u.trim()||!y){i("Debe subir un documento PDF o DOCX y asignarle un nombre para analizar.");return}m(!0),i(null);const R=`
            Eres un experto en pedagoga y en la Taxonoma de Bloom. Analiza el siguiente documento de una evaluacin educativa.
            Tu tarea es:
            1. Identificar cada pregunta o tem de evaluacin en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonoma de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados.
        `,C={type:pn.OBJECT,properties:{analysisResults:{type:pn.ARRAY,description:"Un array con cada pregunta identificada y su clasificacin de Bloom.",items:{type:pn.OBJECT,properties:{question:{type:pn.STRING,description:"El texto exacto de la pregunta."},habilidadBloom:{type:pn.STRING,description:"El nivel de Bloom correspondiente.",enum:lL}},required:["question","habilidadBloom"]}},summary:{type:pn.OBJECT,description:"Un resumen con el conteo de preguntas por cada nivel de Bloom.",properties:{Recordar:{type:pn.INTEGER},Comprender:{type:pn.INTEGER},Aplicar:{type:pn.INTEGER},Analizar:{type:pn.INTEGER},Evaluar:{type:pn.INTEGER},Crear:{type:pn.INTEGER}}}},required:["analysisResults","summary"]};try{Kl("Anlisis Taxonmico");const S=new ix({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),N={inlineData:{mimeType:y.mimeType,data:y.data}},Q=await S.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:R},N]},config:{responseMimeType:"application/json",responseSchema:C}}),D=JSON.parse(Q.text),I={documentName:u,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:D.analysisResults,summary:D.summary},O=await Gke(I);await B(),l(O),d(""),b(null),E(null)}catch(S){console.error(S),i("Hubo un error al analizar el documento. Asegrese de que el archivo no est protegido o vaco. Intntelo de nuevo.")}finally{m(!1)}},M=async R=>{if(window.confirm("Est seguro de eliminar este anlisis?"))try{await qke(R),await B(),(o==null?void 0:o.id)===R&&l(null)}catch(C){console.error("Error al eliminar anlisis:",C),i("No se pudo eliminar el anlisis en la nube.")}},P=ee.useMemo(()=>o?Object.values(o.summary).reduce((R,C)=>R+(C||0),0):0,[o]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Anlisis Taxonmico de Evaluaciones"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anlisis desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500 focus-within:outline-none",children:[c.jsx("span",{children:"Cargue un archivo"}),c.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:k,accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"})]}),c.jsx("p",{className:"pl-1",children:"o arrstrelo aqu"})]}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:g?g.name:"PDF, DOCX hasta 10MB"})]})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento/Prueba"}),c.jsx("input",{type:"text",id:"documentName",value:u,onChange:R=>d(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("button",{onClick:L,disabled:h||!y,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:h?c.jsx(Kke,{}):"Analizar con IA"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Anlisis"}),!n&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay anlisis guardados en la nube."}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:!n&&e.length>0&&e.map(R=>c.jsxs("button",{onClick:()=>l(R),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===R.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/30 dark:border-amber-700":"bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold truncate",children:R.documentName}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(R.uploadDate).toLocaleString("es-CL")})]},R.id))})]})]}),c.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),c.jsx("button",{onClick:()=>M(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonmico (",P," preguntas)"]}),c.jsx("div",{className:"space-y-3",children:lL.map(R=>{const C=o.summary[R]||0,S=P>0?C/P*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:R}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[C," (",S.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${cL[R]} h-4 rounded-full`,style:{width:`${S}%`}})})]},R)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Anlisis"}),c.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / tem"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((R,C)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:R.question}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${cL[R.habilidadBloom]}`,children:R.habilidadBloom})})]},C))})]})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:""}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Anlisis"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo anlisis o seleccione uno del historial para ver los resultados aqu."})]})})]})]})},$ke=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},Wke=({currentUser:t,onLogout:e,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=t.profile,l=ee.useMemo(()=>{const B=eX[o];return o!==Vt.ESTUDIANTE?B:B.filter(k=>{if(k.name==="Asistencia a Empresa"){const L=$ke(t.curso||"");return L.startsWith("3")||L.startsWith("4")}return!0})},[o,t.curso]),[u,d]=ee.useState(null),[h,m]=ee.useState(!1);ee.useEffect(()=>{l&&l.length>0?d(l[0]):d(null)},[o,l]);const g=ee.useCallback(B=>{d(B),window.innerWidth<768&&m(!1)},[]),b=ee.useCallback(B=>{const k=l.find(L=>L.name===B);k&&g(k)},[l,g]),y=()=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[c.jsx(PW,{}),c.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestin LIR"})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(B=>c.jsxs("button",{onClick:()=>g(B),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(u==null?void 0:u.name)===B.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[B.icon,c.jsx("span",{className:"ml-4",children:B.name})]},B.name))})]}),E=()=>{if(!u)return c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un mdulo del men para comenzar."})});if(u.name==="Calendario Acadmico")return c.jsx(die,{profile:o});if(u.name==="Muro de Anuncios")return c.jsx(gie,{currentUser:t});if(u.name==="Mensajera Interna")return c.jsx(g2e,{currentUser:t,refreshUnreadCount:i});if(u.name==="Generador de Actas")return c.jsx(Cie,{});if(o===Vt.SUBDIRECCION){if(u.name==="Dashboard")return c.jsx(BX,{currentUser:t});if(u.name==="Administracin")return c.jsx($1e,{});if(u.name==="Seguimiento Curricular")return c.jsx(Vke,{currentUser:t});if(u.name==="Acompaamiento docente")return c.jsx(c2e,{currentUser:t});if(u.name==="Anlisis Taxonmico")return c.jsx(uL,{currentUser:t});if(u.name==="Interdisciplinario")return c.jsx(iR,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return c.jsx(CX,{currentUser:t});if(u.name==="Crear horarios")return c.jsx(UX,{});if(u.name==="Seguimiento de acciones pedaggicas")return c.jsx(QX,{});if(u.name==="Inclusin")return c.jsx(aD,{currentUser:t})}if(o===Vt.PROFESORADO){if(u.name==="Planificacin")return c.jsx(aie,{currentUser:t});if(u.name==="Mis Acompaamientos")return c.jsx(Lke,{currentUser:t});if(u.name==="Recursos de Aprendizaje")return c.jsx(wke,{});if(u.name==="Anlisis Taxonmico")return c.jsx(uL,{currentUser:t});if(u.name==="Interdisciplinario")return c.jsx(iR,{});if(u.name==="Inclusin")return c.jsx(aD,{currentUser:t});if(u.name==="Actividades Remotas")return c.jsx(uve,{});if(u.name==="Evaluacin de Aprendizajes")return c.jsx(Ele,{});if(u.name==="Evaluaciones Formativas")return c.jsx(r2e,{currentUser:t})}if(o===Vt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return c.jsx(rve,{});if(u.name==="Asistencia Dual")return c.jsx(Ove,{});if(u.name==="Paol")return c.jsx(i_e,{})}if(o===Vt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return c.jsx(xve,{currentUser:t});if(u.name==="Evaluacin Formativa")return c.jsx(Bke,{currentUser:t});if(u.name==="Tareas Interdisciplinarias")return c.jsx(Dke,{currentUser:t});if(u.name==="Asistencia a Empresa")return c.jsx(Fve,{currentUser:t})}return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),c.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aqu ir la funcionalidad de ",c.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return c.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[c.jsx(lX,{currentUser:t,onLogout:e,onNavigate:b,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>m(!h),unreadMessagesCount:s,refreshUnreadCount:i}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h&&c.jsx("div",{onClick:()=>m(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),c.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${h?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:c.jsx(y,{})}),c.jsx("main",{className:"flex-1 overflow-y-auto",children:c.jsx("div",{className:"p-6 md:p-8",children:E()})})]})]})},Xke=({onSelectProfile:t,isAdminView:e=!1})=>c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(f4,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:ZW.map(r=>c.jsxs("button",{onClick:()=>t(r.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[c.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:r.icon}),c.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:r.label})]},r.id))}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),Yke=()=>{const[t,e]=ee.useState(null),[r,n]=ee.useState(null),[a,s]=ee.useState(!0),[i,o]=ee.useState(null),[l,u]=ee.useState(!1),[d,h]=ee.useState(null);ee.useEffect(()=>{const k=lG(Xx,async L=>{if(e(L),L)try{const M=await MW(L.email);M?(n(M),M.profile===Vt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await qC())}catch{o("Error al conectar con la base de datos."),await qC()}else n(null),h(null),u(!1),o(null);s(!1)});return()=>k()},[]);const m=async(k,L)=>{if(o(null),!k.trim()||!L.trim()){o("Por favor ingrese email y contrasea");return}try{await LW(k.trim(),L)}catch(M){switch(M.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales invlidas. Verifique su email y contrasea.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente ms tarde.");break;case"auth/network-request-failed":o("Error de conexin. Verifique su internet.");break;default:o("Ocurri un error al intentar iniciar sesin.")}}},g=async k=>{try{await UW(k)}catch(L){console.error("Error al enviar email de recuperacin:",L)}},b=k=>{h(k),u(!1)},y=()=>{u(!0),h(null)},E=async()=>{try{await qC()}catch(k){console.error("Error al cerrar sesin:",k)}};if(a)return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(f4,{})}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicacin..."})]})});if(!t||!r)return c.jsx(aX,{onLoginAttempt:m,onForgotPasswordRequest:g,error:i});if(l&&r.profile===Vt.SUBDIRECCION)return c.jsx(Xke,{onSelectProfile:b,isAdminView:!0});const B=d||r.profile;return c.jsx(Wke,{currentUser:{...r,profile:B},onLogout:E,onChangeProfile:r.profile===Vt.SUBDIRECCION?y:void 0,canChangeProfile:r.profile===Vt.SUBDIRECCION})},u9=document.getElementById("root");if(!u9)throw new Error("Could not find root element to mount to");const Jke=bH.createRoot(u9);Jke.render(c.jsx(At.StrictMode,{children:c.jsx(Yke,{})}));export{qn as _,Zke as c,dS as g};
