var ZAe=Object.defineProperty;var efe=(e,t,r)=>t in e?ZAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var JB=(e,t,r)=>efe(e,typeof t!="symbol"?t+"":t,r);function tfe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var vft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rfe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var ZB={exports:{}},Ob={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l7;function nfe(){if(l7)return Ob;l7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return Ob.Fragment=t,Ob.jsx=r,Ob.jsxs=r,Ob}var c7;function afe(){return c7||(c7=1,ZB.exports=nfe()),ZB.exports}var l=afe(),eT={exports:{}},cn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u7;function sfe(){if(u7)return cn;u7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(q){return q===null||typeof q!="object"?null:(q=f&&q[f]||q["@@iterator"],typeof q=="function"?q:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function b(q,ne,M){this.props=q,this.context=ne,this.refs=x,this.updater=M||p}b.prototype.isReactComponent={},b.prototype.setState=function(q,ne){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ne,"setState")},b.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function y(){}y.prototype=b.prototype;function w(q,ne,M){this.props=q,this.context=ne,this.refs=x,this.updater=M||p}var S=w.prototype=new y;S.constructor=w,g(S,b.prototype),S.isPureReactComponent=!0;var j=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function E(q,ne,M,W,Z,re){return M=re.ref,{$$typeof:e,type:q,key:ne,ref:M!==void 0?M:null,props:re}}function _(q,ne){return E(q.type,ne,void 0,void 0,void 0,q.props)}function B(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function P(q){var ne={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(M){return ne[M]})}var D=/\/+/g;function I(q,ne){return typeof q=="object"&&q!==null&&q.key!=null?P(""+q.key):ne.toString(36)}function U(){}function R(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(U,U):(q.status="pending",q.then(function(ne){q.status==="pending"&&(q.status="fulfilled",q.value=ne)},function(ne){q.status==="pending"&&(q.status="rejected",q.reason=ne)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Y(q,ne,M,W,Z){var re=typeof q;(re==="undefined"||re==="boolean")&&(q=null);var ae=!1;if(q===null)ae=!0;else switch(re){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(q.$$typeof){case e:case t:ae=!0;break;case d:return ae=q._init,Y(ae(q._payload),ne,M,W,Z)}}if(ae)return Z=Z(q),ae=W===""?"."+I(q,0):W,j(Z)?(M="",ae!=null&&(M=ae.replace(D,"$&/")+"/"),Y(Z,ne,M,"",function(le){return le})):Z!=null&&(B(Z)&&(Z=_(Z,M+(Z.key==null||q&&q.key===Z.key?"":(""+Z.key).replace(D,"$&/")+"/")+ae)),ne.push(Z)),1;ae=0;var ce=W===""?".":W+":";if(j(q))for(var oe=0;oe<q.length;oe++)W=q[oe],re=ce+I(W,oe),ae+=Y(W,ne,M,re,Z);else if(oe=h(q),typeof oe=="function")for(q=oe.call(q),oe=0;!(W=q.next()).done;)W=W.value,re=ce+I(W,oe++),ae+=Y(W,ne,M,re,Z);else if(re==="object"){if(typeof q.then=="function")return Y(R(q),ne,M,W,Z);throw ne=String(q),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ae}function H(q,ne,M){if(q==null)return q;var W=[],Z=0;return Y(q,W,"","",function(re){return ne.call(M,re,Z++)}),W}function X(q){if(q._status===-1){var ne=q._result;ne=ne(),ne.then(function(M){(q._status===0||q._status===-1)&&(q._status=1,q._result=M)},function(M){(q._status===0||q._status===-1)&&(q._status=2,q._result=M)}),q._status===-1&&(q._status=0,q._result=ne)}if(q._status===1)return q._result.default;throw q._result}var V=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function z(){}return cn.Children={map:H,forEach:function(q,ne,M){H(q,function(){ne.apply(this,arguments)},M)},count:function(q){var ne=0;return H(q,function(){ne++}),ne},toArray:function(q){return H(q,function(ne){return ne})||[]},only:function(q){if(!B(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},cn.Component=b,cn.Fragment=r,cn.Profiler=a,cn.PureComponent=w,cn.StrictMode=n,cn.Suspense=c,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,cn.__COMPILER_RUNTIME={__proto__:null,c:function(q){return N.H.useMemoCache(q)}},cn.cache=function(q){return function(){return q.apply(null,arguments)}},cn.cloneElement=function(q,ne,M){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var W=g({},q.props),Z=q.key,re=void 0;if(ne!=null)for(ae in ne.ref!==void 0&&(re=void 0),ne.key!==void 0&&(Z=""+ne.key),ne)!F.call(ne,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&ne.ref===void 0||(W[ae]=ne[ae]);var ae=arguments.length-2;if(ae===1)W.children=M;else if(1<ae){for(var ce=Array(ae),oe=0;oe<ae;oe++)ce[oe]=arguments[oe+2];W.children=ce}return E(q.type,Z,void 0,void 0,re,W)},cn.createContext=function(q){return q={$$typeof:i,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:s,_context:q},q},cn.createElement=function(q,ne,M){var W,Z={},re=null;if(ne!=null)for(W in ne.key!==void 0&&(re=""+ne.key),ne)F.call(ne,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(Z[W]=ne[W]);var ae=arguments.length-2;if(ae===1)Z.children=M;else if(1<ae){for(var ce=Array(ae),oe=0;oe<ae;oe++)ce[oe]=arguments[oe+2];Z.children=ce}if(q&&q.defaultProps)for(W in ae=q.defaultProps,ae)Z[W]===void 0&&(Z[W]=ae[W]);return E(q,re,void 0,void 0,null,Z)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(q){return{$$typeof:o,render:q}},cn.isValidElement=B,cn.lazy=function(q){return{$$typeof:d,_payload:{_status:-1,_result:q},_init:X}},cn.memo=function(q,ne){return{$$typeof:u,type:q,compare:ne===void 0?null:ne}},cn.startTransition=function(q){var ne=N.T,M={};N.T=M;try{var W=q(),Z=N.S;Z!==null&&Z(M,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(z,V)}catch(re){V(re)}finally{N.T=ne}},cn.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},cn.use=function(q){return N.H.use(q)},cn.useActionState=function(q,ne,M){return N.H.useActionState(q,ne,M)},cn.useCallback=function(q,ne){return N.H.useCallback(q,ne)},cn.useContext=function(q){return N.H.useContext(q)},cn.useDebugValue=function(){},cn.useDeferredValue=function(q,ne){return N.H.useDeferredValue(q,ne)},cn.useEffect=function(q,ne,M){var W=N.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(q,ne)},cn.useId=function(){return N.H.useId()},cn.useImperativeHandle=function(q,ne,M){return N.H.useImperativeHandle(q,ne,M)},cn.useInsertionEffect=function(q,ne){return N.H.useInsertionEffect(q,ne)},cn.useLayoutEffect=function(q,ne){return N.H.useLayoutEffect(q,ne)},cn.useMemo=function(q,ne){return N.H.useMemo(q,ne)},cn.useOptimistic=function(q,ne){return N.H.useOptimistic(q,ne)},cn.useReducer=function(q,ne,M){return N.H.useReducer(q,ne,M)},cn.useRef=function(q){return N.H.useRef(q)},cn.useState=function(q){return N.H.useState(q)},cn.useSyncExternalStore=function(q,ne,M){return N.H.useSyncExternalStore(q,ne,M)},cn.useTransition=function(){return N.H.useTransition()},cn.version="19.1.1",cn}var d7;function m1(){return d7||(d7=1,eT.exports=sfe()),eT.exports}var k=m1();const ct=yl(k),ife=tfe({__proto__:null,default:ct},[k]);var tT={exports:{}},Db={},rT={exports:{}},nT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A7;function ofe(){return A7||(A7=1,function(e){function t(H,X){var V=H.length;H.push(X);e:for(;0<V;){var z=V-1>>>1,q=H[z];if(0<a(q,X))H[z]=X,H[V]=q,V=z;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var X=H[0],V=H.pop();if(V!==X){H[0]=V;e:for(var z=0,q=H.length,ne=q>>>1;z<ne;){var M=2*(z+1)-1,W=H[M],Z=M+1,re=H[Z];if(0>a(W,V))Z<q&&0>a(re,W)?(H[z]=re,H[Z]=V,z=Z):(H[z]=W,H[M]=V,z=M);else if(Z<q&&0>a(re,V))H[z]=re,H[Z]=V,z=Z;else break e}}return X}function a(H,X){var V=H.sortIndex-X.sortIndex;return V!==0?V:H.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,x=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function j(H){for(var X=r(u);X!==null;){if(X.callback===null)n(u);else if(X.startTime<=H)n(u),X.sortIndex=X.expirationTime,t(c,X);else break;X=r(u)}}function N(H){if(x=!1,j(H),!g)if(r(c)!==null)g=!0,F||(F=!0,I());else{var X=r(u);X!==null&&Y(N,X.startTime-H)}}var F=!1,E=-1,_=5,B=-1;function P(){return b?!0:!(e.unstable_now()-B<_)}function D(){if(b=!1,F){var H=e.unstable_now();B=H;var X=!0;try{e:{g=!1,x&&(x=!1,w(E),E=-1),p=!0;var V=h;try{t:{for(j(H),f=r(c);f!==null&&!(f.expirationTime>H&&P());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var q=z(f.expirationTime<=H);if(H=e.unstable_now(),typeof q=="function"){f.callback=q,j(H),X=!0;break t}f===r(c)&&n(c),j(H)}else n(c);f=r(c)}if(f!==null)X=!0;else{var ne=r(u);ne!==null&&Y(N,ne.startTime-H),X=!1}}break e}finally{f=null,h=V,p=!1}X=void 0}}finally{X?I():F=!1}}}var I;if(typeof S=="function")I=function(){S(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,R=U.port2;U.port1.onmessage=D,I=function(){R.postMessage(null)}}else I=function(){y(D,0)};function Y(H,X){E=y(function(){H(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(H){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var V=h;h=X;try{return H()}finally{h=V}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var V=h;h=H;try{return X()}finally{h=V}},e.unstable_scheduleCallback=function(H,X,V){var z=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?z+V:z):V=z,H){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=V+q,H={id:d++,callback:X,priorityLevel:H,startTime:V,expirationTime:q,sortIndex:-1},V>z?(H.sortIndex=V,t(u,H),r(c)===null&&H===r(u)&&(x?(w(E),E=-1):x=!0,Y(N,V-z))):(H.sortIndex=q,t(c,H),g||p||(g=!0,F||(F=!0,I()))),H},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(H){var X=h;return function(){var V=h;h=X;try{return H.apply(this,arguments)}finally{h=V}}}}(nT)),nT}var f7;function lfe(){return f7||(f7=1,rT.exports=ofe()),rT.exports}var aT={exports:{}},jo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h7;function cfe(){if(h7)return jo;h7=1;var e=m1();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return jo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,jo.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},jo.flushSync=function(c){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,c)return c()}finally{i.T=u,n.p=d,n.d.f()}},jo.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},jo.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},jo.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:p}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},jo.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},jo.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},jo.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},jo.requestFormReset=function(c){n.d.r(c)},jo.unstable_batchedUpdates=function(c,u){return c(u)},jo.useFormState=function(c,u,d){return i.H.useFormState(c,u,d)},jo.useFormStatus=function(){return i.H.useHostTransitionStatus()},jo.version="19.1.1",jo}var m7;function YX(){if(m7)return aT.exports;m7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),aT.exports=cfe(),aT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p7;function ufe(){if(p7)return Db;p7=1;var e=lfe(),t=m1(),r=YX();function n(A){var m="https://react.dev/errors/"+A;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+A+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var m=A,v=A;if(A.alternate)for(;m.return;)m=m.return;else{A=m;do m=A,(m.flags&4098)!==0&&(v=m.return),A=m.return;while(A)}return m.tag===3?v:null}function i(A){if(A.tag===13){var m=A.memoizedState;if(m===null&&(A=A.alternate,A!==null&&(m=A.memoizedState)),m!==null)return m.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function c(A){var m=A.alternate;if(!m){if(m=s(A),m===null)throw Error(n(188));return m!==A?null:A}for(var v=A,C=m;;){var L=v.return;if(L===null)break;var G=L.alternate;if(G===null){if(C=L.return,C!==null){v=C;continue}break}if(L.child===G.child){for(G=L.child;G;){if(G===v)return o(L),A;if(G===C)return o(L),m;G=G.sibling}throw Error(n(188))}if(v.return!==C.return)v=L,C=G;else{for(var ue=!1,be=L.child;be;){if(be===v){ue=!0,v=L,C=G;break}if(be===C){ue=!0,C=L,v=G;break}be=be.sibling}if(!ue){for(be=G.child;be;){if(be===v){ue=!0,v=G,C=L;break}if(be===C){ue=!0,C=G,v=L;break}be=be.sibling}if(!ue)throw Error(n(189))}}if(v.alternate!==C)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?A:m}function u(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A;for(A=A.child;A!==null;){if(m=u(A),m!==null)return m;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function I(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var U=Symbol.for("react.client.reference");function R(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===U?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case F:return"SuspenseList";case B:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case p:return"Portal";case S:return(A.displayName||"Context")+".Provider";case w:return(A._context.displayName||"Context")+".Consumer";case j:var m=A.render;return A=A.displayName,A||(A=m.displayName||m.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case E:return m=A.displayName||null,m!==null?m:R(A.type)||"Memo";case _:m=A._payload,A=A._init;try{return R(A(m))}catch{}}return null}var Y=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},z=[],q=-1;function ne(A){return{current:A}}function M(A){0>q||(A.current=z[q],z[q]=null,q--)}function W(A,m){q++,z[q]=A.current,A.current=m}var Z=ne(null),re=ne(null),ae=ne(null),ce=ne(null);function oe(A,m){switch(W(ae,m),W(re,A),W(Z,null),m.nodeType){case 9:case 11:A=(A=m.documentElement)&&(A=A.namespaceURI)?PU(A):0;break;default:if(A=m.tagName,m=m.namespaceURI)m=PU(m),A=RU(m,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}M(Z),W(Z,A)}function le(){M(Z),M(re),M(ae)}function pe(A){A.memoizedState!==null&&W(ce,A);var m=Z.current,v=RU(m,A.type);m!==v&&(W(re,A),W(Z,v))}function Be(A){re.current===A&&(M(Z),M(re)),ce.current===A&&(M(ce),Bb._currentValue=V)}var te=Object.prototype.hasOwnProperty,_e=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,Ne=e.unstable_shouldYield,fe=e.unstable_requestPaint,Ie=e.unstable_now,Ue=e.unstable_getCurrentPriorityLevel,Ye=e.unstable_ImmediatePriority,ye=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,Re=e.unstable_LowPriority,qe=e.unstable_IdlePriority,Ze=e.log,lt=e.unstable_setDisableYieldValue,mt=null,It=null;function Mt(A){if(typeof Ze=="function"&&lt(A),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(mt,A)}catch{}}var Pt=Math.clz32?Math.clz32:kr,Qt=Math.log,yt=Math.LN2;function kr(A){return A>>>=0,A===0?32:31-(Qt(A)/yt|0)|0}var er=256,an=4194304;function _r(A){var m=A&42;if(m!==0)return m;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Vr(A,m,v){var C=A.pendingLanes;if(C===0)return 0;var L=0,G=A.suspendedLanes,ue=A.pingedLanes;A=A.warmLanes;var be=C&134217727;return be!==0?(C=be&~G,C!==0?L=_r(C):(ue&=be,ue!==0?L=_r(ue):v||(v=be&~A,v!==0&&(L=_r(v))))):(be=C&~G,be!==0?L=_r(be):ue!==0?L=_r(ue):v||(v=C&~A,v!==0&&(L=_r(v)))),L===0?0:m!==0&&m!==L&&(m&G)===0&&(G=L&-L,v=m&-m,G>=v||G===32&&(v&4194048)!==0)?m:L}function jn(A,m){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&m)===0}function Or(A,m){switch(A){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function As(){var A=er;return er<<=1,(er&4194048)===0&&(er=256),A}function hn(){var A=an;return an<<=1,(an&62914560)===0&&(an=4194304),A}function oa(A){for(var m=[],v=0;31>v;v++)m.push(A);return m}function Ba(A,m){A.pendingLanes|=m,m!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function en(A,m,v,C,L,G){var ue=A.pendingLanes;A.pendingLanes=v,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=v,A.entangledLanes&=v,A.errorRecoveryDisabledLanes&=v,A.shellSuspendCounter=0;var be=A.entanglements,Pe=A.expirationTimes,ot=A.hiddenUpdates;for(v=ue&~v;0<v;){var St=31-Pt(v),Ot=1<<St;be[St]=0,Pe[St]=-1;var At=ot[St];if(At!==null)for(ot[St]=null,St=0;St<At.length;St++){var ft=At[St];ft!==null&&(ft.lane&=-536870913)}v&=~Ot}C!==0&&mr(A,C,0),G!==0&&L===0&&A.tag!==0&&(A.suspendedLanes|=G&~(ue&~m))}function mr(A,m,v){A.pendingLanes|=m,A.suspendedLanes&=~m;var C=31-Pt(m);A.entangledLanes|=m,A.entanglements[C]=A.entanglements[C]|1073741824|v&4194090}function et(A,m){var v=A.entangledLanes|=m;for(A=A.entanglements;v;){var C=31-Pt(v),L=1<<C;L&m|A[C]&m&&(A[C]|=m),v&=~L}}function gt(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Je(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function xt(){var A=X.p;return A!==0?A:(A=window.event,A===void 0?32:r7(A.type))}function wt(A,m){var v=X.p;try{return X.p=A,m()}finally{X.p=v}}var bt=Math.random().toString(36).slice(2),nr="__reactFiber$"+bt,gr="__reactProps$"+bt,Kr="__reactContainer$"+bt,Yr="__reactEvents$"+bt,Gr="__reactListeners$"+bt,he="__reactHandles$"+bt,Te="__reactResources$"+bt,Ce="__reactMarker$"+bt;function we(A){delete A[nr],delete A[gr],delete A[Yr],delete A[Gr],delete A[he]}function Se(A){var m=A[nr];if(m)return m;for(var v=A.parentNode;v;){if(m=v[Kr]||v[nr]){if(v=m.alternate,m.child!==null||v!==null&&v.child!==null)for(A=QU(A);A!==null;){if(v=A[nr])return v;A=QU(A)}return m}A=v,v=A.parentNode}return null}function je(A){if(A=A[nr]||A[Kr]){var m=A.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return A}return null}function Xe(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A.stateNode;throw Error(n(33))}function dt(A){var m=A[Te];return m||(m=A[Te]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function $e(A){A[Ce]=!0}var rt=new Set,st={};function Ft(A,m){Vt(A,m),Vt(A+"Capture",m)}function Vt(A,m){for(st[A]=m,A=0;A<m.length;A++)rt.add(m[A])}var Yt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ht={},zt={};function Sr(A){return te.call(zt,A)?!0:te.call(Ht,A)?!1:Yt.test(A)?zt[A]=!0:(Ht[A]=!0,!1)}function sn(A,m,v){if(Sr(m))if(v===null)A.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":A.removeAttribute(m);return;case"boolean":var C=m.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){A.removeAttribute(m);return}}A.setAttribute(m,""+v)}}function on(A,m,v){if(v===null)A.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(m);return}A.setAttribute(m,""+v)}}function An(A,m,v,C){if(C===null)A.removeAttribute(v);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(v);return}A.setAttributeNS(m,v,""+C)}}var fs,bo;function hs(A){if(fs===void 0)try{throw Error()}catch(v){var m=v.stack.trim().match(/\n( *(at )?)/);fs=m&&m[1]||"",bo=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fs+A+bo}var Js=!1;function js(A,m){if(!A||Js)return"";Js=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(m){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(ft){var At=ft}Reflect.construct(A,[],Ot)}else{try{Ot.call()}catch(ft){At=ft}A.call(Ot.prototype)}}else{try{throw Error()}catch(ft){At=ft}(Ot=A())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(ft){if(ft&&At&&typeof ft.stack=="string")return[ft.stack,At.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var G=C.DetermineComponentFrameRoot(),ue=G[0],be=G[1];if(ue&&be){var Pe=ue.split(`
`),ot=be.split(`
`);for(L=C=0;C<Pe.length&&!Pe[C].includes("DetermineComponentFrameRoot");)C++;for(;L<ot.length&&!ot[L].includes("DetermineComponentFrameRoot");)L++;if(C===Pe.length||L===ot.length)for(C=Pe.length-1,L=ot.length-1;1<=C&&0<=L&&Pe[C]!==ot[L];)L--;for(;1<=C&&0<=L;C--,L--)if(Pe[C]!==ot[L]){if(C!==1||L!==1)do if(C--,L--,0>L||Pe[C]!==ot[L]){var St=`
`+Pe[C].replace(" at new "," at ");return A.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",A.displayName)),St}while(1<=C&&0<=L);break}}}finally{Js=!1,Error.prepareStackTrace=v}return(v=A?A.displayName||A.name:"")?hs(v):""}function pi(A){switch(A.tag){case 26:case 27:case 5:return hs(A.type);case 16:return hs("Lazy");case 13:return hs("Suspense");case 19:return hs("SuspenseList");case 0:case 15:return js(A.type,!1);case 11:return js(A.type.render,!1);case 1:return js(A.type,!0);case 31:return hs("Activity");default:return""}}function xa(A){try{var m="";do m+=pi(A),A=A.return;while(A);return m}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function Zs(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Vd(A){var m=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Ph(A){var m=Vd(A)?"checked":"value",v=Object.getOwnPropertyDescriptor(A.constructor.prototype,m),C=""+A[m];if(!A.hasOwnProperty(m)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var L=v.get,G=v.set;return Object.defineProperty(A,m,{configurable:!0,get:function(){return L.call(this)},set:function(ue){C=""+ue,G.call(this,ue)}}),Object.defineProperty(A,m,{enumerable:v.enumerable}),{getValue:function(){return C},setValue:function(ue){C=""+ue},stopTracking:function(){A._valueTracker=null,delete A[m]}}}}function Vc(A){A._valueTracker||(A._valueTracker=Ph(A))}function nf(A){if(!A)return!1;var m=A._valueTracker;if(!m)return!0;var v=m.getValue(),C="";return A&&(C=Vd(A)?A.checked?"true":"false":A.value),A=C,A!==v?(m.setValue(A),!0):!1}function gi(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var zd=/[\n"\\]/g;function In(A){return A.replace(zd,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function xi(A,m,v,C,L,G,ue,be){A.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?A.type=ue:A.removeAttribute("type"),m!=null?ue==="number"?(m===0&&A.value===""||A.value!=m)&&(A.value=""+Zs(m)):A.value!==""+Zs(m)&&(A.value=""+Zs(m)):ue!=="submit"&&ue!=="reset"||A.removeAttribute("value"),m!=null?$c(A,ue,Zs(m)):v!=null?$c(A,ue,Zs(v)):C!=null&&A.removeAttribute("value"),L==null&&G!=null&&(A.defaultChecked=!!G),L!=null&&(A.checked=L&&typeof L!="function"&&typeof L!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?A.name=""+Zs(be):A.removeAttribute("name")}function zc(A,m,v,C,L,G,ue,be){if(G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(A.type=G),m!=null||v!=null){if(!(G!=="submit"&&G!=="reset"||m!=null))return;v=v!=null?""+Zs(v):"",m=m!=null?""+Zs(m):v,be||m===A.value||(A.value=m),A.defaultValue=m}C=C??L,C=typeof C!="function"&&typeof C!="symbol"&&!!C,A.checked=be?A.checked:!!C,A.defaultChecked=!!C,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(A.name=ue)}function $c(A,m,v){m==="number"&&gi(A.ownerDocument)===A||A.defaultValue===""+v||(A.defaultValue=""+v)}function El(A,m,v,C){if(A=A.options,m){m={};for(var L=0;L<v.length;L++)m["$"+v[L]]=!0;for(v=0;v<A.length;v++)L=m.hasOwnProperty("$"+A[v].value),A[v].selected!==L&&(A[v].selected=L),L&&C&&(A[v].defaultSelected=!0)}else{for(v=""+Zs(v),m=null,L=0;L<A.length;L++){if(A[L].value===v){A[L].selected=!0,C&&(A[L].defaultSelected=!0);return}m!==null||A[L].disabled||(m=A[L])}m!==null&&(m.selected=!0)}}function Hn(A,m,v){if(m!=null&&(m=""+Zs(m),m!==A.value&&(A.value=m),v==null)){A.defaultValue!==m&&(A.defaultValue=m);return}A.defaultValue=v!=null?""+Zs(v):""}function Gc(A,m,v,C){if(m==null){if(C!=null){if(v!=null)throw Error(n(92));if(Y(C)){if(1<C.length)throw Error(n(93));C=C[0]}v=C}v==null&&(v=""),m=v}v=Zs(m),A.defaultValue=v,C=A.textContent,C===v&&C!==""&&C!==null&&(A.value=C)}function yo(A,m){if(m){var v=A.firstChild;if(v&&v===A.lastChild&&v.nodeType===3){v.nodeValue=m;return}}A.textContent=m}var rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rh(A,m,v){var C=m.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?C?A.setProperty(m,""):m==="float"?A.cssFloat="":A[m]="":C?A.setProperty(m,v):typeof v!="number"||v===0||rc.has(m)?m==="float"?A.cssFloat=v:A[m]=(""+v).trim():A[m]=v+"px"}function af(A,m,v){if(m!=null&&typeof m!="object")throw Error(n(62));if(A=A.style,v!=null){for(var C in v)!v.hasOwnProperty(C)||m!=null&&m.hasOwnProperty(C)||(C.indexOf("--")===0?A.setProperty(C,""):C==="float"?A.cssFloat="":A[C]="");for(var L in m)C=m[L],m.hasOwnProperty(L)&&v[L]!==C&&Rh(A,L,C)}else for(var G in m)m.hasOwnProperty(G)&&Rh(A,G,m[G])}function sf(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$d=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ac(A){return $d.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Cl=null;function la(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var sc=null,_l=null;function jr(A){var m=je(A);if(m&&(A=m.stateNode)){var v=A[gr]||null;e:switch(A=m.stateNode,m.type){case"input":if(xi(A,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),m=v.name,v.type==="radio"&&m!=null){for(v=A;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+In(""+m)+'"][type="radio"]'),m=0;m<v.length;m++){var C=v[m];if(C!==A&&C.form===A.form){var L=C[gr]||null;if(!L)throw Error(n(90));xi(C,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(m=0;m<v.length;m++)C=v[m],C.form===A.form&&nf(C)}break e;case"textarea":Hn(A,v.value,v.defaultValue);break e;case"select":m=v.value,m!=null&&El(A,!!v.multiple,m,!1)}}}var Sl=!1;function Lh(A,m,v){if(Sl)return A(m,v);Sl=!0;try{var C=A(m);return C}finally{if(Sl=!1,(sc!==null||_l!==null)&&(PE(),sc&&(m=sc,A=_l,_l=sc=null,jr(m),A)))for(m=0;m<A.length;m++)jr(A[m])}}function ji(A,m){var v=A.stateNode;if(v===null)return null;var C=v[gr]||null;if(C===null)return null;v=C[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(A=A.type,C=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!C;break e;default:A=!1}if(A)return null;if(v&&typeof v!="function")throw Error(n(231,m,typeof v));return v}var wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=!1;if(wo)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){to=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{to=!1}var Eo=null,Kc=null,ic=null;function of(){if(ic)return ic;var A,m=Kc,v=m.length,C,L="value"in Eo?Eo.value:Eo.textContent,G=L.length;for(A=0;A<v&&m[A]===L[A];A++);var ue=v-A;for(C=1;C<=ue&&m[v-C]===L[G-C];C++);return ic=L.slice(A,1<C?1-C:void 0)}function Co(A){var m=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&m===13&&(A=13)):A=m,A===10&&(A=13),32<=A||A===13?A:0}function Ii(){return!0}function kl(){return!1}function ms(A){function m(v,C,L,G,ue){this._reactName=v,this._targetInst=L,this.type=C,this.nativeEvent=G,this.target=ue,this.currentTarget=null;for(var be in A)A.hasOwnProperty(be)&&(v=A[be],this[be]=v?v(G):G[be]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?Ii:kl,this.isPropagationStopped=kl,this}return d(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),m}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qc=ms(vn),Bl=d({},vn,{view:0,detail:0}),lf=ms(Bl),Hu,Vu,sl,Fi=d({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jc,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==sl&&(sl&&A.type==="mousemove"?(Hu=A.screenX-sl.screenX,Vu=A.screenY-sl.screenY):Vu=Hu=0,sl=A),Hu)},movementY:function(A){return"movementY"in A?A.movementY:Vu}}),ps=ms(Fi),Mh=d({},Fi,{dataTransfer:0}),Wc=ms(Mh),vi=d({},Bl,{relatedTarget:0}),Xc=ms(vi),oc=d({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Gd=ms(oc),zu=d({},vn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Kd=ms(zu),cf=d({},vn,{data:0}),$u=ms(cf),Yc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ku(A){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(A):(A=qd[A])?!!m[A]:!1}function Jc(){return Ku}var Uh=d({},Bl,{key:function(A){if(A.key){var m=Yc[A.key]||A.key;if(m!=="Unidentified")return m}return A.type==="keypress"?(A=Co(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Gu[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jc,charCode:function(A){return A.type==="keypress"?Co(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Co(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),lc=ms(Uh),Zc=d({},Fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qu=ms(Zc),Oi=d({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jc}),Wd=ms(Oi),K=d({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ae=ms(K),Fe=d({},Fi,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=ms(Fe),Ge=d({},vn,{newState:0,oldState:0}),vt=ms(Ge),Lt=[9,13,27,32],Jt=wo&&"CompositionEvent"in window,O=null;wo&&"documentMode"in document&&(O=document.documentMode);var ee=wo&&"TextEvent"in window&&!O,ie=wo&&(!Jt||O&&8<O&&11>=O),ve=" ",ze=!1;function it(A,m){switch(A){case"keyup":return Lt.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Ir=!1;function bn(A,m){switch(A){case"compositionend":return Ut(m);case"keypress":return m.which!==32?null:(ze=!0,ve);case"textInput":return A=m.data,A===ve&&ze?null:A;default:return null}}function qr(A,m){if(Ir)return A==="compositionend"||!Jt&&it(A,m)?(A=of(),ic=Kc=Eo=null,Ir=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return ie&&m.locale!=="ko"?null:m.data;default:return null}}var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ea(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m==="input"?!!Vn[A.type]:m==="textarea"}function Tl(A,m,v,C){sc?_l?_l.push(C):_l=[C]:sc=C,m=HE(m,"onChange"),0<m.length&&(v=new qc("onChange","change",null,v,C),A.push({event:v,listeners:m}))}var es=null,_o=null;function eu(A){jU(A,0)}function Xd(A){var m=Xe(A);if(nf(m))return A}function Qh(A,m){if(A==="change")return m}var uf=!1;if(wo){var Is;if(wo){var Yd="oninput"in document;if(!Yd){var df=document.createElement("div");df.setAttribute("oninput","return;"),Yd=typeof df.oninput=="function"}Is=Yd}else Is=!1;uf=Is&&(!document.documentMode||9<document.documentMode)}function Af(){es&&(es.detachEvent("onpropertychange",Hh),_o=es=null)}function Hh(A){if(A.propertyName==="value"&&Xd(_o)){var m=[];Tl(m,_o,A,la(A)),Lh(eu,m)}}function So(A,m,v){A==="focusin"?(Af(),es=m,_o=v,es.attachEvent("onpropertychange",Hh)):A==="focusout"&&Af()}function X1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Xd(_o)}function Qm(A,m){if(A==="click")return Xd(m)}function Og(A,m){if(A==="input"||A==="change")return Xd(m)}function jl(A,m){return A===m&&(A!==0||1/A===1/m)||A!==A&&m!==m}var ei=typeof Object.is=="function"?Object.is:jl;function Jd(A,m){if(ei(A,m))return!0;if(typeof A!="object"||A===null||typeof m!="object"||m===null)return!1;var v=Object.keys(A),C=Object.keys(m);if(v.length!==C.length)return!1;for(C=0;C<v.length;C++){var L=v[C];if(!te.call(m,L)||!ei(A[L],m[L]))return!1}return!0}function Hm(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Wu(A,m){var v=Hm(A);A=0;for(var C;v;){if(v.nodeType===3){if(C=A+v.textContent.length,A<=m&&C>=m)return{node:v,offset:m-A};A=C}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Hm(v)}}function Zd(A,m){return A&&m?A===m?!0:A&&A.nodeType===3?!1:m&&m.nodeType===3?Zd(A,m.parentNode):"contains"in A?A.contains(m):A.compareDocumentPosition?!!(A.compareDocumentPosition(m)&16):!1:!1}function ro(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var m=gi(A.document);m instanceof A.HTMLIFrameElement;){try{var v=typeof m.contentWindow.location.href=="string"}catch{v=!1}if(v)A=m.contentWindow;else break;m=gi(A.document)}return m}function bi(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m&&(m==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||m==="textarea"||A.contentEditable==="true")}var eA=wo&&"documentMode"in document&&11>=document.documentMode,No=null,cc=null,tu=null,uc=!1;function $a(A,m,v){var C=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;uc||No==null||No!==gi(C)||(C=No,"selectionStart"in C&&bi(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),tu&&Jd(tu,C)||(tu=C,C=HE(cc,"onSelect"),0<C.length&&(m=new qc("onSelect","select",null,m,v),A.push({event:m,listeners:C}),m.target=No)))}function dc(A,m){var v={};return v[A.toLowerCase()]=m.toLowerCase(),v["Webkit"+A]="webkit"+m,v["Moz"+A]="moz"+m,v}var gs={animationend:dc("Animation","AnimationEnd"),animationiteration:dc("Animation","AnimationIteration"),animationstart:dc("Animation","AnimationStart"),transitionrun:dc("Transition","TransitionRun"),transitionstart:dc("Transition","TransitionStart"),transitioncancel:dc("Transition","TransitionCancel"),transitionend:dc("Transition","TransitionEnd")},ko={},ff={};wo&&(ff=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function ru(A){if(ko[A])return ko[A];if(!gs[A])return A;var m=gs[A],v;for(v in m)if(m.hasOwnProperty(v)&&v in ff)return ko[A]=m[v];return A}var Vh=ru("animationend"),tA=ru("animationiteration"),rA=ru("animationstart"),nA=ru("transitionrun"),hf=ru("transitionstart"),zh=ru("transitioncancel"),aA=ru("transitionend"),Xu=new Map,mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mf.push("scrollEnd");function Ga(A,m){Xu.set(A,m),Ft(m,[A])}var il=new WeakMap;function mn(A,m){if(typeof A=="object"&&A!==null){var v=il.get(A);return v!==void 0?v:(m={value:A,source:m,stack:xa(m)},il.set(A,m),m)}return{value:A,source:m,stack:xa(m)}}var pn=[],va=0,ts=0;function Il(){for(var A=va,m=ts=va=0;m<A;){var v=pn[m];pn[m++]=null;var C=pn[m];pn[m++]=null;var L=pn[m];pn[m++]=null;var G=pn[m];if(pn[m++]=null,C!==null&&L!==null){var ue=C.pending;ue===null?L.next=L:(L.next=ue.next,ue.next=L),C.pending=L}G!==0&&Dg(v,L,G)}}function sA(A,m,v,C){pn[va++]=A,pn[va++]=m,pn[va++]=v,pn[va++]=C,ts|=C,A.lanes|=C,A=A.alternate,A!==null&&(A.lanes|=C)}function iA(A,m,v,C){return sA(A,m,v,C),pf(A)}function Yu(A,m){return sA(A,null,null,m),pf(A)}function Dg(A,m,v){A.lanes|=v;var C=A.alternate;C!==null&&(C.lanes|=v);for(var L=!1,G=A.return;G!==null;)G.childLanes|=v,C=G.alternate,C!==null&&(C.childLanes|=v),G.tag===22&&(A=G.stateNode,A===null||A._visibility&1||(L=!0)),A=G,G=G.return;return A.tag===3?(G=A.stateNode,L&&m!==null&&(L=31-Pt(v),A=G.hiddenUpdates,C=A[L],C===null?A[L]=[m]:C.push(m),m.lane=v|536870912),G):null}function pf(A){if(50<yb)throw yb=0,wB=null,Error(n(185));for(var m=A.return;m!==null;)A=m,m=A.return;return A.tag===3?A.stateNode:null}var ti={};function Fl(A,m,v,C){this.tag=A,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(A,m,v,C){return new Fl(A,m,v,C)}function $h(A){return A=A.prototype,!(!A||!A.isReactComponent)}function nu(A,m){var v=A.alternate;return v===null?(v=Di(A.tag,m,A.key,A.mode),v.elementType=A.elementType,v.type=A.type,v.stateNode=A.stateNode,v.alternate=A,A.alternate=v):(v.pendingProps=m,v.type=A.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=A.flags&65011712,v.childLanes=A.childLanes,v.lanes=A.lanes,v.child=A.child,v.memoizedProps=A.memoizedProps,v.memoizedState=A.memoizedState,v.updateQueue=A.updateQueue,m=A.dependencies,v.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},v.sibling=A.sibling,v.index=A.index,v.ref=A.ref,v.refCleanup=A.refCleanup,v}function Vm(A,m){A.flags&=65011714;var v=A.alternate;return v===null?(A.childLanes=0,A.lanes=m,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=v.childLanes,A.lanes=v.lanes,A.child=v.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=v.memoizedProps,A.memoizedState=v.memoizedState,A.updateQueue=v.updateQueue,A.type=v.type,m=v.dependencies,A.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),A}function gf(A,m,v,C,L,G){var ue=0;if(C=A,typeof A=="function")$h(A)&&(ue=1);else if(typeof A=="string")ue=UAe(A,v,Z.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case B:return A=Di(31,v,m,L),A.elementType=B,A.lanes=G,A;case g:return Ju(v.children,L,G,m);case x:ue=8,L|=24;break;case b:return A=Di(12,v,m,L|2),A.elementType=b,A.lanes=G,A;case N:return A=Di(13,v,m,L),A.elementType=N,A.lanes=G,A;case F:return A=Di(19,v,m,L),A.elementType=F,A.lanes=G,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case S:ue=10;break e;case w:ue=9;break e;case j:ue=11;break e;case E:ue=14;break e;case _:ue=16,C=null;break e}ue=29,v=Error(n(130,A===null?"null":typeof A,"")),C=null}return m=Di(ue,v,m,L),m.elementType=A,m.type=C,m.lanes=G,m}function Ju(A,m,v,C){return A=Di(7,A,C,m),A.lanes=v,A}function Pg(A,m,v){return A=Di(6,A,null,m),A.lanes=v,A}function zm(A,m,v){return m=Di(4,A.children!==null?A.children:[],A.key,m),m.lanes=v,m.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},m}var oA=[],Zu=0,Gh=null,Rg=0,Ol=[],ol=0,xf=null,ed=1,td="";function vf(A,m){oA[Zu++]=Rg,oA[Zu++]=Gh,Gh=A,Rg=m}function iE(A,m,v){Ol[ol++]=ed,Ol[ol++]=td,Ol[ol++]=xf,xf=A;var C=ed;A=td;var L=32-Pt(C)-1;C&=~(1<<L),v+=1;var G=32-Pt(m)+L;if(30<G){var ue=L-L%5;G=(C&(1<<ue)-1).toString(32),C>>=ue,L-=ue,ed=1<<32-Pt(m)+L|v<<L|C,td=G+A}else ed=1<<G|v<<L|C,td=A}function $m(A){A.return!==null&&(vf(A,1),iE(A,1,0))}function Gm(A){for(;A===Gh;)Gh=oA[--Zu],oA[Zu]=null,Rg=oA[--Zu],oA[Zu]=null;for(;A===xf;)xf=Ol[--ol],Ol[ol]=null,td=Ol[--ol],Ol[ol]=null,ed=Ol[--ol],Ol[ol]=null}var Fs=null,Ka=null,Mn=!1,lA=null,au=!1,Y1=Error(n(519));function bf(A){var m=Error(n(418,""));throw Kh(mn(m,A)),Y1}function oE(A){var m=A.stateNode,v=A.type,C=A.memoizedProps;switch(m[nr]=A,m[gr]=C,v){case"dialog":_n("cancel",m),_n("close",m);break;case"iframe":case"object":case"embed":_n("load",m);break;case"video":case"audio":for(v=0;v<Eb.length;v++)_n(Eb[v],m);break;case"source":_n("error",m);break;case"img":case"image":case"link":_n("error",m),_n("load",m);break;case"details":_n("toggle",m);break;case"input":_n("invalid",m),zc(m,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0),Vc(m);break;case"select":_n("invalid",m);break;case"textarea":_n("invalid",m),Gc(m,C.value,C.defaultValue,C.children),Vc(m)}v=C.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||m.textContent===""+v||C.suppressHydrationWarning===!0||DU(m.textContent,v)?(C.popover!=null&&(_n("beforetoggle",m),_n("toggle",m)),C.onScroll!=null&&_n("scroll",m),C.onScrollEnd!=null&&_n("scrollend",m),C.onClick!=null&&(m.onclick=VE),m=!0):m=!1,m||bf(A)}function rd(A){for(Fs=A.return;Fs;)switch(Fs.tag){case 5:case 13:au=!1;return;case 27:case 3:au=!0;return;default:Fs=Fs.return}}function no(A){if(A!==Fs)return!1;if(!Mn)return rd(A),Mn=!0,!1;var m=A.tag,v;if((v=m!==3&&m!==27)&&((v=m===5)&&(v=A.type,v=!(v!=="form"&&v!=="button")||LB(A.type,A.memoizedProps)),v=!v),v&&Ka&&bf(A),rd(A),m===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,m=0;A;){if(A.nodeType===8)if(v=A.data,v==="/$"){if(m===0){Ka=ud(A.nextSibling);break e}m--}else v!=="$"&&v!=="$!"&&v!=="$?"||m++;A=A.nextSibling}Ka=null}}else m===27?(m=Ka,u0(A.type)?(A=HB,HB=null,Ka=A):Ka=m):Ka=Fs?ud(A.stateNode.nextSibling):null;return!0}function ll(){Ka=Fs=null,Mn=!1}function lE(){var A=lA;return A!==null&&(Rl===null?Rl=A:Rl.push.apply(Rl,A),lA=null),A}function Kh(A){lA===null?lA=[A]:lA.push(A)}var su=ne(null),ri=null,nd=null;function cA(A,m,v){W(su,m._currentValue),m._currentValue=v}function iu(A){A._currentValue=su.current,M(su)}function Lg(A,m,v){for(;A!==null;){var C=A.alternate;if((A.childLanes&m)!==m?(A.childLanes|=m,C!==null&&(C.childLanes|=m)):C!==null&&(C.childLanes&m)!==m&&(C.childLanes|=m),A===v)break;A=A.return}}function Mg(A,m,v,C){var L=A.child;for(L!==null&&(L.return=A);L!==null;){var G=L.dependencies;if(G!==null){var ue=L.child;G=G.firstContext;e:for(;G!==null;){var be=G;G=L;for(var Pe=0;Pe<m.length;Pe++)if(be.context===m[Pe]){G.lanes|=v,be=G.alternate,be!==null&&(be.lanes|=v),Lg(G.return,v,A),C||(ue=null);break e}G=be.next}}else if(L.tag===18){if(ue=L.return,ue===null)throw Error(n(341));ue.lanes|=v,G=ue.alternate,G!==null&&(G.lanes|=v),Lg(ue,v,A),ue=null}else ue=L.child;if(ue!==null)ue.return=L;else for(ue=L;ue!==null;){if(ue===A){ue=null;break}if(L=ue.sibling,L!==null){L.return=ue.return,ue=L;break}ue=ue.return}L=ue}}function qh(A,m,v,C){A=null;for(var L=m,G=!1;L!==null;){if(!G){if((L.flags&524288)!==0)G=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var ue=L.alternate;if(ue===null)throw Error(n(387));if(ue=ue.memoizedProps,ue!==null){var be=L.type;ei(L.pendingProps.value,ue.value)||(A!==null?A.push(be):A=[be])}}else if(L===ce.current){if(ue=L.alternate,ue===null)throw Error(n(387));ue.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(A!==null?A.push(Bb):A=[Bb])}L=L.return}A!==null&&Mg(m,A,v,C),m.flags|=262144}function Ug(A){for(A=A.firstContext;A!==null;){if(!ei(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function ou(A){ri=A,nd=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Os(A){return Qg(ri,A)}function uA(A,m){return ri===null&&ou(A),Qg(A,m)}function Qg(A,m){var v=m._currentValue;if(m={context:m,memoizedValue:v,next:null},nd===null){if(A===null)throw Error(n(308));nd=m,A.dependencies={lanes:0,firstContext:m},A.flags|=524288}else nd=nd.next=m;return v}var Kk=typeof AbortController<"u"?AbortController:function(){var A=[],m=this.signal={aborted:!1,addEventListener:function(v,C){A.push(C)}};this.abort=function(){m.aborted=!0,A.forEach(function(v){return v()})}},cE=e.unstable_scheduleCallback,qk=e.unstable_NormalPriority,Ds={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function J1(){return{controller:new Kk,data:new Map,refCount:0}}function Km(A){A.refCount--,A.refCount===0&&cE(qk,function(){A.controller.abort()})}var qm=null,Z1=0,yf=0,ad=null;function Wk(A,m){if(qm===null){var v=qm=[];Z1=0,yf=BB(),ad={status:"pending",value:void 0,then:function(C){v.push(C)}}}return Z1++,m.then(uE,uE),m}function uE(){if(--Z1===0&&qm!==null){ad!==null&&(ad.status="fulfilled");var A=qm;qm=null,yf=0,ad=null;for(var m=0;m<A.length;m++)(0,A[m])()}}function dE(A,m){var v=[],C={status:"pending",value:null,reason:null,then:function(L){v.push(L)}};return A.then(function(){C.status="fulfilled",C.value=m;for(var L=0;L<v.length;L++)(0,v[L])(m)},function(L){for(C.status="rejected",C.reason=L,L=0;L<v.length;L++)(0,v[L])(void 0)}),C}var T=H.S;H.S=function(A,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&Wk(A,m),T!==null&&T(A,m)};var Q=ne(null);function J(){var A=Q.current;return A!==null?A:ja.pooledCache}function se(A,m){m===null?W(Q,Q.current):W(Q,m.pool)}function de(){var A=J();return A===null?null:{parent:Ds._currentValue,pool:A}}var me=Error(n(460)),ge=Error(n(474)),xe=Error(n(542)),Ee={then:function(){}};function ke(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Me(){}function at(A,m,v){switch(v=A[v],v===void 0?A.push(m):v!==m&&(m.then(Me,Me),m=v),m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Bt(A),A;default:if(typeof m.status=="string")m.then(Me,Me);else{if(A=ja,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=m,A.status="pending",A.then(function(C){if(m.status==="pending"){var L=m;L.status="fulfilled",L.value=C}},function(C){if(m.status==="pending"){var L=m;L.status="rejected",L.reason=C}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Bt(A),A}throw tt=m,me}}var tt=null;function Ke(){if(tt===null)throw Error(n(459));var A=tt;return tt=null,A}function Bt(A){if(A===me||A===xe)throw Error(n(483))}var ht=!1;function Qe(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,m){A=A.updateQueue,m.updateQueue===A&&(m.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function _t(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function jt(A,m,v){var C=A.updateQueue;if(C===null)return null;if(C=C.shared,(ua&2)!==0){var L=C.pending;return L===null?m.next=m:(m.next=L.next,L.next=m),C.pending=m,m=pf(A),Dg(A,null,v),m}return sA(A,C,m,v),pf(A)}function Nt(A,m,v){if(m=m.updateQueue,m!==null&&(m=m.shared,(v&4194048)!==0)){var C=m.lanes;C&=A.pendingLanes,v|=C,m.lanes=v,et(A,v)}}function tr(A,m){var v=A.updateQueue,C=A.alternate;if(C!==null&&(C=C.updateQueue,v===C)){var L=null,G=null;if(v=v.firstBaseUpdate,v!==null){do{var ue={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};G===null?L=G=ue:G=G.next=ue,v=v.next}while(v!==null);G===null?L=G=m:G=G.next=m}else L=G=m;v={baseState:C.baseState,firstBaseUpdate:L,lastBaseUpdate:G,shared:C.shared,callbacks:C.callbacks},A.updateQueue=v;return}A=v.lastBaseUpdate,A===null?v.firstBaseUpdate=m:A.next=m,v.lastBaseUpdate=m}var Xt=!1;function xr(){if(Xt){var A=ad;if(A!==null)throw A}}function Zt(A,m,v,C){Xt=!1;var L=A.updateQueue;ht=!1;var G=L.firstBaseUpdate,ue=L.lastBaseUpdate,be=L.shared.pending;if(be!==null){L.shared.pending=null;var Pe=be,ot=Pe.next;Pe.next=null,ue===null?G=ot:ue.next=ot,ue=Pe;var St=A.alternate;St!==null&&(St=St.updateQueue,be=St.lastBaseUpdate,be!==ue&&(be===null?St.firstBaseUpdate=ot:be.next=ot,St.lastBaseUpdate=Pe))}if(G!==null){var Ot=L.baseState;ue=0,St=ot=Pe=null,be=G;do{var At=be.lane&-536870913,ft=At!==be.lane;if(ft?(Pn&At)===At:(C&At)===At){At!==0&&At===yf&&(Xt=!0),St!==null&&(St=St.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var zr=A,Fr=be;At=m;var ya=v;switch(Fr.tag){case 1:if(zr=Fr.payload,typeof zr=="function"){Ot=zr.call(ya,Ot,At);break e}Ot=zr;break e;case 3:zr.flags=zr.flags&-65537|128;case 0:if(zr=Fr.payload,At=typeof zr=="function"?zr.call(ya,Ot,At):zr,At==null)break e;Ot=d({},Ot,At);break e;case 2:ht=!0}}At=be.callback,At!==null&&(A.flags|=64,ft&&(A.flags|=8192),ft=L.callbacks,ft===null?L.callbacks=[At]:ft.push(At))}else ft={lane:At,tag:be.tag,payload:be.payload,callback:be.callback,next:null},St===null?(ot=St=ft,Pe=Ot):St=St.next=ft,ue|=At;if(be=be.next,be===null){if(be=L.shared.pending,be===null)break;ft=be,be=ft.next,ft.next=null,L.lastBaseUpdate=ft,L.shared.pending=null}}while(!0);St===null&&(Pe=Ot),L.baseState=Pe,L.firstBaseUpdate=ot,L.lastBaseUpdate=St,G===null&&(L.shared.lanes=0),i0|=ue,A.lanes=ue,A.memoizedState=Ot}}function On(A,m){if(typeof A!="function")throw Error(n(191,A));A.call(m)}function zn(A,m){var v=A.callbacks;if(v!==null)for(A.callbacks=null,A=0;A<v.length;A++)On(v[A],m)}var fn=ne(null),ln=ne(0);function ta(A,m){A=jf,W(ln,A),W(fn,m),jf=A|m.baseLanes}function $n(){W(ln,jf),W(fn,fn.current)}function Wr(){jf=ln.current,M(fn),M(ln)}var ca=0,Nr=null,Lr=null,Fn=null,Dn=!1,ni=!1,Ps=!1,rs=0,ns=0,xs=null,Dl=0;function Gn(){throw Error(n(321))}function vs(A,m){if(m===null)return!1;for(var v=0;v<m.length&&v<A.length;v++)if(!ei(A[v],m[v]))return!1;return!0}function Ac(A,m,v,C,L,G){return ca=G,Nr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,H.H=A===null||A.memoizedState===null?mM:pM,Ps=!1,G=v(C,L),Ps=!1,ni&&(G=wf(m,v,C,L)),dA(A),G}function dA(A){H.H=EE;var m=Lr!==null&&Lr.next!==null;if(ca=0,Fn=Lr=Nr=null,Dn=!1,ns=0,xs=null,m)throw Error(n(300));A===null||Pi||(A=A.dependencies,A!==null&&Ug(A)&&(Pi=!0))}function wf(A,m,v,C){Nr=A;var L=0;do{if(ni&&(xs=null),ns=0,ni=!1,25<=L)throw Error(n(301));if(L+=1,Fn=Lr=null,A.updateQueue!=null){var G=A.updateQueue;G.lastEffect=null,G.events=null,G.stores=null,G.memoCache!=null&&(G.memoCache.index=0)}H.H=Yde,G=m(v,C)}while(ni);return G}function AA(){var A=H.H,m=A.useState()[0];return m=typeof m.then=="function"?fA(m):m,A=A.useState()[0],(Lr!==null?Lr.memoizedState:null)!==A&&(Nr.flags|=1024),m}function Ta(){var A=rs!==0;return rs=0,A}function Wm(A,m,v){m.updateQueue=A.updateQueue,m.flags&=-2053,A.lanes&=~v}function Hg(A){if(Dn){for(A=A.memoizedState;A!==null;){var m=A.queue;m!==null&&(m.pending=null),A=A.next}Dn=!1}ca=0,Fn=Lr=Nr=null,ni=!1,ns=rs=0,xs=null}function ao(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?Nr.memoizedState=Fn=A:Fn=Fn.next=A,Fn}function Ra(){if(Lr===null){var A=Nr.alternate;A=A!==null?A.memoizedState:null}else A=Lr.next;var m=Fn===null?Nr.memoizedState:Fn.next;if(m!==null)Fn=m,Lr=A;else{if(A===null)throw Nr.alternate===null?Error(n(467)):Error(n(310));Lr=A,A={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Fn===null?Nr.memoizedState=Fn=A:Fn=Fn.next=A}return Fn}function Ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fA(A){var m=ns;return ns+=1,xs===null&&(xs=[]),A=at(xs,A,m),m=Nr,(Fn===null?m.memoizedState:Fn.next)===null&&(m=m.alternate,H.H=m===null||m.memoizedState===null?mM:pM),A}function Bo(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return fA(A);if(A.$$typeof===S)return Os(A)}throw Error(n(438,String(A)))}function hA(A){var m=null,v=Nr.updateQueue;if(v!==null&&(m=v.memoCache),m==null){var C=Nr.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(m={data:C.data.map(function(L){return L.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),v===null&&(v=Ef(),Nr.updateQueue=v),v.memoCache=m,v=m.data[m.index],v===void 0)for(v=m.data[m.index]=Array(A),C=0;C<A;C++)v[C]=P;return m.index++,v}function To(A,m){return typeof m=="function"?m(A):m}function Xm(A){var m=Ra();return Wh(m,Lr,A)}function Wh(A,m,v){var C=A.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=v;var L=A.baseQueue,G=C.pending;if(G!==null){if(L!==null){var ue=L.next;L.next=G.next,G.next=ue}m.baseQueue=L=G,C.pending=null}if(G=A.baseState,L===null)A.memoizedState=G;else{m=L.next;var be=ue=null,Pe=null,ot=m,St=!1;do{var Ot=ot.lane&-536870913;if(Ot!==ot.lane?(Pn&Ot)===Ot:(ca&Ot)===Ot){var At=ot.revertLane;if(At===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),Ot===yf&&(St=!0);else if((ca&At)===At){ot=ot.next,At===yf&&(St=!0);continue}else Ot={lane:0,revertLane:ot.revertLane,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},Pe===null?(be=Pe=Ot,ue=G):Pe=Pe.next=Ot,Nr.lanes|=At,i0|=At;Ot=ot.action,Ps&&v(G,Ot),G=ot.hasEagerState?ot.eagerState:v(G,Ot)}else At={lane:Ot,revertLane:ot.revertLane,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},Pe===null?(be=Pe=At,ue=G):Pe=Pe.next=At,Nr.lanes|=Ot,i0|=Ot;ot=ot.next}while(ot!==null&&ot!==m);if(Pe===null?ue=G:Pe.next=be,!ei(G,A.memoizedState)&&(Pi=!0,St&&(v=ad,v!==null)))throw v;A.memoizedState=G,A.baseState=ue,A.baseQueue=Pe,C.lastRenderedState=G}return L===null&&(C.lanes=0),[A.memoizedState,C.dispatch]}function Vg(A){var m=Ra(),v=m.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=A;var C=v.dispatch,L=v.pending,G=m.memoizedState;if(L!==null){v.pending=null;var ue=L=L.next;do G=A(G,ue.action),ue=ue.next;while(ue!==L);ei(G,m.memoizedState)||(Pi=!0),m.memoizedState=G,m.baseQueue===null&&(m.baseState=G),v.lastRenderedState=G}return[G,C]}function Ym(A,m,v){var C=Nr,L=Ra(),G=Mn;if(G){if(v===void 0)throw Error(n(407));v=v()}else v=m();var ue=!ei((Lr||L).memoizedState,v);ue&&(L.memoizedState=v,Pi=!0),L=L.queue;var be=Xh.bind(null,C,L,A);if(Zh(2048,8,be,[A]),L.getSnapshot!==m||ue||Fn!==null&&Fn.memoizedState.tag&1){if(C.flags|=2048,id(9,tp(),Jm.bind(null,C,L,v,m),null),ja===null)throw Error(n(349));G||(ca&124)!==0||zg(C,m,v)}return v}function zg(A,m,v){A.flags|=16384,A={getSnapshot:m,value:v},m=Nr.updateQueue,m===null?(m=Ef(),Nr.updateQueue=m,m.stores=[A]):(v=m.stores,v===null?m.stores=[A]:v.push(A))}function Jm(A,m,v,C){m.value=v,m.getSnapshot=C,AE(m)&&fE(A)}function Xh(A,m,v){return v(function(){AE(m)&&fE(A)})}function AE(A){var m=A.getSnapshot;A=A.value;try{var v=m();return!ei(A,v)}catch{return!0}}function fE(A){var m=Yu(A,2);m!==null&&xc(m,A,2)}function Zm(A){var m=ao();if(typeof A=="function"){var v=A;if(A=v(),Ps){Mt(!0);try{v()}finally{Mt(!1)}}}return m.memoizedState=m.baseState=A,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:A},m}function sd(A,m,v,C){return A.baseState=v,Wh(A,Lr,typeof C=="function"?C:To)}function Xk(A,m,v,C,L){if(wE(A))throw Error(n(485));if(A=m.action,A!==null){var G={payload:L,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){G.listeners.push(ue)}};H.T!==null?v(!0):G.isTransition=!1,C(G),v=m.pending,v===null?(G.next=m.pending=G,hE(m,G)):(G.next=v.next,m.pending=v.next=G)}}function hE(A,m){var v=m.action,C=m.payload,L=A.state;if(m.isTransition){var G=H.T,ue={};H.T=ue;try{var be=v(L,C),Pe=H.S;Pe!==null&&Pe(ue,be),mE(A,m,be)}catch(ot){Yh(A,m,ot)}finally{H.T=G}}else try{G=v(L,C),mE(A,m,G)}catch(ot){Yh(A,m,ot)}}function mE(A,m,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(C){eb(A,m,C)},function(C){return Yh(A,m,C)}):eb(A,m,v)}function eb(A,m,v){m.status="fulfilled",m.value=v,tb(m),A.state=v,m=A.pending,m!==null&&(v=m.next,v===m?A.pending=null:(v=v.next,m.next=v,hE(A,v)))}function Yh(A,m,v){var C=A.pending;if(A.pending=null,C!==null){C=C.next;do m.status="rejected",m.reason=v,tb(m),m=m.next;while(m!==C)}A.action=null}function tb(A){A=A.listeners;for(var m=0;m<A.length;m++)(0,A[m])()}function rb(A,m){return m}function ep(A,m){if(Mn){var v=ja.formState;if(v!==null){e:{var C=Nr;if(Mn){if(Ka){t:{for(var L=Ka,G=au;L.nodeType!==8;){if(!G){L=null;break t}if(L=ud(L.nextSibling),L===null){L=null;break t}}G=L.data,L=G==="F!"||G==="F"?L:null}if(L){Ka=ud(L.nextSibling),C=L.data==="F!";break e}}bf(C)}C=!1}C&&(m=v[0])}}return v=ao(),v.memoizedState=v.baseState=m,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rb,lastRenderedState:m},v.queue=C,v=AM.bind(null,Nr,C),C.dispatch=v,C=Zm(!1),G=Yk.bind(null,Nr,!1,C.queue),C=ao(),L={state:m,dispatch:null,action:A,pending:null},C.queue=L,v=Xk.bind(null,Nr,L,G,v),L.dispatch=v,C.memoizedState=A,[m,v,!1]}function $g(A){var m=Ra();return Jh(m,Lr,A)}function Jh(A,m,v){if(m=Wh(A,m,rb)[0],A=Xm(To)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var C=fA(m)}catch(ue){throw ue===me?xe:ue}else C=m;m=Ra();var L=m.queue,G=L.dispatch;return v!==m.memoizedState&&(Nr.flags|=2048,id(9,tp(),pE.bind(null,L,v),null)),[C,G,A]}function pE(A,m){A.action=m}function gE(A){var m=Ra(),v=Lr;if(v!==null)return Jh(m,v,A);Ra(),m=m.memoizedState,v=Ra();var C=v.queue.dispatch;return v.memoizedState=A,[m,C,!1]}function id(A,m,v,C){return A={tag:A,create:v,deps:C,inst:m,next:null},m=Nr.updateQueue,m===null&&(m=Ef(),Nr.updateQueue=m),v=m.lastEffect,v===null?m.lastEffect=A.next=A:(C=v.next,v.next=A,A.next=C,m.lastEffect=A),A}function tp(){return{destroy:void 0,resource:void 0}}function Gg(){return Ra().memoizedState}function fc(A,m,v,C){var L=ao();C=C===void 0?null:C,Nr.flags|=A,L.memoizedState=id(1|m,tp(),v,C)}function Zh(A,m,v,C){var L=Ra();C=C===void 0?null:C;var G=L.memoizedState.inst;Lr!==null&&C!==null&&vs(C,Lr.memoizedState.deps)?L.memoizedState=id(m,G,v,C):(Nr.flags|=A,L.memoizedState=id(1|m,G,v,C))}function nb(A,m){fc(8390656,8,A,m)}function xE(A,m){Zh(2048,8,A,m)}function ab(A,m){return Zh(4,2,A,m)}function Cf(A,m){return Zh(4,4,A,m)}function vE(A,m){if(typeof m=="function"){A=A();var v=m(A);return function(){typeof v=="function"?v():m(null)}}if(m!=null)return A=A(),m.current=A,function(){m.current=null}}function sb(A,m,v){v=v!=null?v.concat([A]):null,Zh(4,4,vE.bind(null,m,A),v)}function ib(){}function ob(A,m){var v=Ra();m=m===void 0?null:m;var C=v.memoizedState;return m!==null&&vs(m,C[1])?C[0]:(v.memoizedState=[A,m],A)}function bE(A,m){var v=Ra();m=m===void 0?null:m;var C=v.memoizedState;if(m!==null&&vs(m,C[1]))return C[0];if(C=A(),Ps){Mt(!0);try{A()}finally{Mt(!1)}}return v.memoizedState=[C,m],C}function _f(A,m,v){return v===void 0||(ca&1073741824)!==0?A.memoizedState=m:(A.memoizedState=v,A=lU(),Nr.lanes|=A,i0|=A,v)}function Kg(A,m,v,C){return ei(v,m)?v:fn.current!==null?(A=_f(A,v,C),ei(A,m)||(Pi=!0),A):(ca&42)===0?(Pi=!0,A.memoizedState=v):(A=lU(),Nr.lanes|=A,i0|=A,m)}function rp(A,m,v,C,L){var G=X.p;X.p=G!==0&&8>G?G:8;var ue=H.T,be={};H.T=be,Yk(A,!1,m,v);try{var Pe=L(),ot=H.S;if(ot!==null&&ot(be,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var St=dE(Pe,C);db(A,m,St,gc(A))}else db(A,m,C,gc(A))}catch(Ot){db(A,m,{then:function(){},status:"rejected",reason:Ot},gc())}finally{X.p=G,H.T=ue}}function od(){}function lu(A,m,v,C){if(A.tag!==5)throw Error(n(476));var L=ld(A).queue;rp(A,L,m,V,v===null?od:function(){return np(A),v(C)})}function ld(A){var m=A.memoizedState;if(m!==null)return m;m={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:V},next:null};var v={};return m.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:v},next:null},A.memoizedState=m,A=A.alternate,A!==null&&(A.memoizedState=m),m}function np(A){var m=ld(A).next.queue;db(A,m,{},gc())}function ap(){return Os(Bb)}function lb(){return Ra().memoizedState}function yE(){return Ra().memoizedState}function cb(A){for(var m=A.return;m!==null;){switch(m.tag){case 24:case 3:var v=gc();A=_t(v);var C=jt(m,A,v);C!==null&&(xc(C,m,v),Nt(C,m,v)),m={cache:J1()},A.payload=m;return}m=m.return}}function ub(A,m,v){var C=gc();v={lane:C,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},wE(A)?fM(m,v):(v=iA(A,m,v,C),v!==null&&(xc(v,A,C),hM(v,m,C)))}function AM(A,m,v){var C=gc();db(A,m,v,C)}function db(A,m,v,C){var L={lane:C,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(wE(A))fM(m,L);else{var G=A.alternate;if(A.lanes===0&&(G===null||G.lanes===0)&&(G=m.lastRenderedReducer,G!==null))try{var ue=m.lastRenderedState,be=G(ue,v);if(L.hasEagerState=!0,L.eagerState=be,ei(be,ue))return sA(A,m,L,0),ja===null&&Il(),!1}catch{}finally{}if(v=iA(A,m,L,C),v!==null)return xc(v,A,C),hM(v,m,C),!0}return!1}function Yk(A,m,v,C){if(C={lane:2,revertLane:BB(),action:C,hasEagerState:!1,eagerState:null,next:null},wE(A)){if(m)throw Error(n(479))}else m=iA(A,v,C,2),m!==null&&xc(m,A,2)}function wE(A){var m=A.alternate;return A===Nr||m!==null&&m===Nr}function fM(A,m){ni=Dn=!0;var v=A.pending;v===null?m.next=m:(m.next=v.next,v.next=m),A.pending=m}function hM(A,m,v){if((v&4194048)!==0){var C=m.lanes;C&=A.pendingLanes,v|=C,m.lanes=v,et(A,v)}}var EE={readContext:Os,use:Bo,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn,useHostTransitionStatus:Gn,useFormState:Gn,useActionState:Gn,useOptimistic:Gn,useMemoCache:Gn,useCacheRefresh:Gn},mM={readContext:Os,use:Bo,useCallback:function(A,m){return ao().memoizedState=[A,m===void 0?null:m],A},useContext:Os,useEffect:nb,useImperativeHandle:function(A,m,v){v=v!=null?v.concat([A]):null,fc(4194308,4,vE.bind(null,m,A),v)},useLayoutEffect:function(A,m){return fc(4194308,4,A,m)},useInsertionEffect:function(A,m){fc(4,2,A,m)},useMemo:function(A,m){var v=ao();m=m===void 0?null:m;var C=A();if(Ps){Mt(!0);try{A()}finally{Mt(!1)}}return v.memoizedState=[C,m],C},useReducer:function(A,m,v){var C=ao();if(v!==void 0){var L=v(m);if(Ps){Mt(!0);try{v(m)}finally{Mt(!1)}}}else L=m;return C.memoizedState=C.baseState=L,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:L},C.queue=A,A=A.dispatch=ub.bind(null,Nr,A),[C.memoizedState,A]},useRef:function(A){var m=ao();return A={current:A},m.memoizedState=A},useState:function(A){A=Zm(A);var m=A.queue,v=AM.bind(null,Nr,m);return m.dispatch=v,[A.memoizedState,v]},useDebugValue:ib,useDeferredValue:function(A,m){var v=ao();return _f(v,A,m)},useTransition:function(){var A=Zm(!1);return A=rp.bind(null,Nr,A.queue,!0,!1),ao().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,m,v){var C=Nr,L=ao();if(Mn){if(v===void 0)throw Error(n(407));v=v()}else{if(v=m(),ja===null)throw Error(n(349));(Pn&124)!==0||zg(C,m,v)}L.memoizedState=v;var G={value:v,getSnapshot:m};return L.queue=G,nb(Xh.bind(null,C,G,A),[A]),C.flags|=2048,id(9,tp(),Jm.bind(null,C,G,v,m),null),v},useId:function(){var A=ao(),m=ja.identifierPrefix;if(Mn){var v=td,C=ed;v=(C&~(1<<32-Pt(C)-1)).toString(32)+v,m="«"+m+"R"+v,v=rs++,0<v&&(m+="H"+v.toString(32)),m+="»"}else v=Dl++,m="«"+m+"r"+v.toString(32)+"»";return A.memoizedState=m},useHostTransitionStatus:ap,useFormState:ep,useActionState:ep,useOptimistic:function(A){var m=ao();m.memoizedState=m.baseState=A;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=v,m=Yk.bind(null,Nr,!0,v),v.dispatch=m,[A,m]},useMemoCache:hA,useCacheRefresh:function(){return ao().memoizedState=cb.bind(null,Nr)}},pM={readContext:Os,use:Bo,useCallback:ob,useContext:Os,useEffect:xE,useImperativeHandle:sb,useInsertionEffect:ab,useLayoutEffect:Cf,useMemo:bE,useReducer:Xm,useRef:Gg,useState:function(){return Xm(To)},useDebugValue:ib,useDeferredValue:function(A,m){var v=Ra();return Kg(v,Lr.memoizedState,A,m)},useTransition:function(){var A=Xm(To)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:fA(A),m]},useSyncExternalStore:Ym,useId:lb,useHostTransitionStatus:ap,useFormState:$g,useActionState:$g,useOptimistic:function(A,m){var v=Ra();return sd(v,Lr,A,m)},useMemoCache:hA,useCacheRefresh:yE},Yde={readContext:Os,use:Bo,useCallback:ob,useContext:Os,useEffect:xE,useImperativeHandle:sb,useInsertionEffect:ab,useLayoutEffect:Cf,useMemo:bE,useReducer:Vg,useRef:Gg,useState:function(){return Vg(To)},useDebugValue:ib,useDeferredValue:function(A,m){var v=Ra();return Lr===null?_f(v,A,m):Kg(v,Lr.memoizedState,A,m)},useTransition:function(){var A=Vg(To)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:fA(A),m]},useSyncExternalStore:Ym,useId:lb,useHostTransitionStatus:ap,useFormState:gE,useActionState:gE,useOptimistic:function(A,m){var v=Ra();return Lr!==null?sd(v,Lr,A,m):(v.baseState=A,[A,v.queue.dispatch])},useMemoCache:hA,useCacheRefresh:yE},qg=null,Ab=0;function CE(A){var m=Ab;return Ab+=1,qg===null&&(qg=[]),at(qg,A,m)}function fb(A,m){m=m.props.ref,A.ref=m!==void 0?m:null}function _E(A,m){throw m.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(m),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":A)))}function gM(A){var m=A._init;return m(A._payload)}function xM(A){function m(We,He){if(A){var nt=We.deletions;nt===null?(We.deletions=[He],We.flags|=16):nt.push(He)}}function v(We,He){if(!A)return null;for(;He!==null;)m(We,He),He=He.sibling;return null}function C(We){for(var He=new Map;We!==null;)We.key!==null?He.set(We.key,We):He.set(We.index,We),We=We.sibling;return He}function L(We,He){return We=nu(We,He),We.index=0,We.sibling=null,We}function G(We,He,nt){return We.index=nt,A?(nt=We.alternate,nt!==null?(nt=nt.index,nt<He?(We.flags|=67108866,He):nt):(We.flags|=67108866,He)):(We.flags|=1048576,He)}function ue(We){return A&&We.alternate===null&&(We.flags|=67108866),We}function be(We,He,nt,kt){return He===null||He.tag!==6?(He=Pg(nt,We.mode,kt),He.return=We,He):(He=L(He,nt),He.return=We,He)}function Pe(We,He,nt,kt){var fr=nt.type;return fr===g?St(We,He,nt.props.children,kt,nt.key):He!==null&&(He.elementType===fr||typeof fr=="object"&&fr!==null&&fr.$$typeof===_&&gM(fr)===He.type)?(He=L(He,nt.props),fb(He,nt),He.return=We,He):(He=gf(nt.type,nt.key,nt.props,null,We.mode,kt),fb(He,nt),He.return=We,He)}function ot(We,He,nt,kt){return He===null||He.tag!==4||He.stateNode.containerInfo!==nt.containerInfo||He.stateNode.implementation!==nt.implementation?(He=zm(nt,We.mode,kt),He.return=We,He):(He=L(He,nt.children||[]),He.return=We,He)}function St(We,He,nt,kt,fr){return He===null||He.tag!==7?(He=Ju(nt,We.mode,kt,fr),He.return=We,He):(He=L(He,nt),He.return=We,He)}function Ot(We,He,nt){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=Pg(""+He,We.mode,nt),He.return=We,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case h:return nt=gf(He.type,He.key,He.props,null,We.mode,nt),fb(nt,He),nt.return=We,nt;case p:return He=zm(He,We.mode,nt),He.return=We,He;case _:var kt=He._init;return He=kt(He._payload),Ot(We,He,nt)}if(Y(He)||I(He))return He=Ju(He,We.mode,nt,null),He.return=We,He;if(typeof He.then=="function")return Ot(We,CE(He),nt);if(He.$$typeof===S)return Ot(We,uA(We,He),nt);_E(We,He)}return null}function At(We,He,nt,kt){var fr=He!==null?He.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return fr!==null?null:be(We,He,""+nt,kt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case h:return nt.key===fr?Pe(We,He,nt,kt):null;case p:return nt.key===fr?ot(We,He,nt,kt):null;case _:return fr=nt._init,nt=fr(nt._payload),At(We,He,nt,kt)}if(Y(nt)||I(nt))return fr!==null?null:St(We,He,nt,kt,null);if(typeof nt.then=="function")return At(We,He,CE(nt),kt);if(nt.$$typeof===S)return At(We,He,uA(We,nt),kt);_E(We,nt)}return null}function ft(We,He,nt,kt,fr){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return We=We.get(nt)||null,be(He,We,""+kt,fr);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case h:return We=We.get(kt.key===null?nt:kt.key)||null,Pe(He,We,kt,fr);case p:return We=We.get(kt.key===null?nt:kt.key)||null,ot(He,We,kt,fr);case _:var yn=kt._init;return kt=yn(kt._payload),ft(We,He,nt,kt,fr)}if(Y(kt)||I(kt))return We=We.get(nt)||null,St(He,We,kt,fr,null);if(typeof kt.then=="function")return ft(We,He,nt,CE(kt),fr);if(kt.$$typeof===S)return ft(We,He,nt,uA(He,kt),fr);_E(He,kt)}return null}function zr(We,He,nt,kt){for(var fr=null,yn=null,yr=He,Dr=He=0,Li=null;yr!==null&&Dr<nt.length;Dr++){yr.index>Dr?(Li=yr,yr=null):Li=yr.sibling;var Kn=At(We,yr,nt[Dr],kt);if(Kn===null){yr===null&&(yr=Li);break}A&&yr&&Kn.alternate===null&&m(We,yr),He=G(Kn,He,Dr),yn===null?fr=Kn:yn.sibling=Kn,yn=Kn,yr=Li}if(Dr===nt.length)return v(We,yr),Mn&&vf(We,Dr),fr;if(yr===null){for(;Dr<nt.length;Dr++)yr=Ot(We,nt[Dr],kt),yr!==null&&(He=G(yr,He,Dr),yn===null?fr=yr:yn.sibling=yr,yn=yr);return Mn&&vf(We,Dr),fr}for(yr=C(yr);Dr<nt.length;Dr++)Li=ft(yr,We,Dr,nt[Dr],kt),Li!==null&&(A&&Li.alternate!==null&&yr.delete(Li.key===null?Dr:Li.key),He=G(Li,He,Dr),yn===null?fr=Li:yn.sibling=Li,yn=Li);return A&&yr.forEach(function(m0){return m(We,m0)}),Mn&&vf(We,Dr),fr}function Fr(We,He,nt,kt){if(nt==null)throw Error(n(151));for(var fr=null,yn=null,yr=He,Dr=He=0,Li=null,Kn=nt.next();yr!==null&&!Kn.done;Dr++,Kn=nt.next()){yr.index>Dr?(Li=yr,yr=null):Li=yr.sibling;var m0=At(We,yr,Kn.value,kt);if(m0===null){yr===null&&(yr=Li);break}A&&yr&&m0.alternate===null&&m(We,yr),He=G(m0,He,Dr),yn===null?fr=m0:yn.sibling=m0,yn=m0,yr=Li}if(Kn.done)return v(We,yr),Mn&&vf(We,Dr),fr;if(yr===null){for(;!Kn.done;Dr++,Kn=nt.next())Kn=Ot(We,Kn.value,kt),Kn!==null&&(He=G(Kn,He,Dr),yn===null?fr=Kn:yn.sibling=Kn,yn=Kn);return Mn&&vf(We,Dr),fr}for(yr=C(yr);!Kn.done;Dr++,Kn=nt.next())Kn=ft(yr,We,Dr,Kn.value,kt),Kn!==null&&(A&&Kn.alternate!==null&&yr.delete(Kn.key===null?Dr:Kn.key),He=G(Kn,He,Dr),yn===null?fr=Kn:yn.sibling=Kn,yn=Kn);return A&&yr.forEach(function(JAe){return m(We,JAe)}),Mn&&vf(We,Dr),fr}function ya(We,He,nt,kt){if(typeof nt=="object"&&nt!==null&&nt.type===g&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case h:e:{for(var fr=nt.key;He!==null;){if(He.key===fr){if(fr=nt.type,fr===g){if(He.tag===7){v(We,He.sibling),kt=L(He,nt.props.children),kt.return=We,We=kt;break e}}else if(He.elementType===fr||typeof fr=="object"&&fr!==null&&fr.$$typeof===_&&gM(fr)===He.type){v(We,He.sibling),kt=L(He,nt.props),fb(kt,nt),kt.return=We,We=kt;break e}v(We,He);break}else m(We,He);He=He.sibling}nt.type===g?(kt=Ju(nt.props.children,We.mode,kt,nt.key),kt.return=We,We=kt):(kt=gf(nt.type,nt.key,nt.props,null,We.mode,kt),fb(kt,nt),kt.return=We,We=kt)}return ue(We);case p:e:{for(fr=nt.key;He!==null;){if(He.key===fr)if(He.tag===4&&He.stateNode.containerInfo===nt.containerInfo&&He.stateNode.implementation===nt.implementation){v(We,He.sibling),kt=L(He,nt.children||[]),kt.return=We,We=kt;break e}else{v(We,He);break}else m(We,He);He=He.sibling}kt=zm(nt,We.mode,kt),kt.return=We,We=kt}return ue(We);case _:return fr=nt._init,nt=fr(nt._payload),ya(We,He,nt,kt)}if(Y(nt))return zr(We,He,nt,kt);if(I(nt)){if(fr=I(nt),typeof fr!="function")throw Error(n(150));return nt=fr.call(nt),Fr(We,He,nt,kt)}if(typeof nt.then=="function")return ya(We,He,CE(nt),kt);if(nt.$$typeof===S)return ya(We,He,uA(We,nt),kt);_E(We,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,He!==null&&He.tag===6?(v(We,He.sibling),kt=L(He,nt),kt.return=We,We=kt):(v(We,He),kt=Pg(nt,We.mode,kt),kt.return=We,We=kt),ue(We)):v(We,He)}return function(We,He,nt,kt){try{Ab=0;var fr=ya(We,He,nt,kt);return qg=null,fr}catch(yr){if(yr===me||yr===xe)throw yr;var yn=Di(29,yr,null,We.mode);return yn.lanes=kt,yn.return=We,yn}finally{}}}var Wg=xM(!0),vM=xM(!1),cu=ne(null),mA=null;function e0(A){var m=A.alternate;W(yi,yi.current&1),W(cu,A),mA===null&&(m===null||fn.current!==null||m.memoizedState!==null)&&(mA=A)}function bM(A){if(A.tag===22){if(W(yi,yi.current),W(cu,A),mA===null){var m=A.alternate;m!==null&&m.memoizedState!==null&&(mA=A)}}else t0()}function t0(){W(yi,yi.current),W(cu,cu.current)}function Sf(A){M(cu),mA===A&&(mA=null),M(yi)}var yi=ne(0);function SE(A){for(var m=A;m!==null;){if(m.tag===13){var v=m.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||QB(v)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function Jk(A,m,v,C){m=A.memoizedState,v=v(C,m),v=v==null?m:d({},m,v),A.memoizedState=v,A.lanes===0&&(A.updateQueue.baseState=v)}var Zk={enqueueSetState:function(A,m,v){A=A._reactInternals;var C=gc(),L=_t(C);L.payload=m,v!=null&&(L.callback=v),m=jt(A,L,C),m!==null&&(xc(m,A,C),Nt(m,A,C))},enqueueReplaceState:function(A,m,v){A=A._reactInternals;var C=gc(),L=_t(C);L.tag=1,L.payload=m,v!=null&&(L.callback=v),m=jt(A,L,C),m!==null&&(xc(m,A,C),Nt(m,A,C))},enqueueForceUpdate:function(A,m){A=A._reactInternals;var v=gc(),C=_t(v);C.tag=2,m!=null&&(C.callback=m),m=jt(A,C,v),m!==null&&(xc(m,A,v),Nt(m,A,v))}};function yM(A,m,v,C,L,G,ue){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(C,G,ue):m.prototype&&m.prototype.isPureReactComponent?!Jd(v,C)||!Jd(L,G):!0}function wM(A,m,v,C){A=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(v,C),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(v,C),m.state!==A&&Zk.enqueueReplaceState(m,m.state,null)}function sp(A,m){var v=m;if("ref"in m){v={};for(var C in m)C!=="ref"&&(v[C]=m[C])}if(A=A.defaultProps){v===m&&(v=d({},v));for(var L in A)v[L]===void 0&&(v[L]=A[L])}return v}var NE=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function EM(A){NE(A)}function CM(A){console.error(A)}function _M(A){NE(A)}function kE(A,m){try{var v=A.onUncaughtError;v(m.value,{componentStack:m.stack})}catch(C){setTimeout(function(){throw C})}}function SM(A,m,v){try{var C=A.onCaughtError;C(v.value,{componentStack:v.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function eB(A,m,v){return v=_t(v),v.tag=3,v.payload={element:null},v.callback=function(){kE(A,m)},v}function NM(A){return A=_t(A),A.tag=3,A}function kM(A,m,v,C){var L=v.type.getDerivedStateFromError;if(typeof L=="function"){var G=C.value;A.payload=function(){return L(G)},A.callback=function(){SM(m,v,C)}}var ue=v.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(A.callback=function(){SM(m,v,C),typeof L!="function"&&(o0===null?o0=new Set([this]):o0.add(this));var be=C.stack;this.componentDidCatch(C.value,{componentStack:be!==null?be:""})})}function Jde(A,m,v,C,L){if(v.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(m=v.alternate,m!==null&&qh(m,v,L,!0),v=cu.current,v!==null){switch(v.tag){case 13:return mA===null?CB():v.alternate===null&&bs===0&&(bs=3),v.flags&=-257,v.flags|=65536,v.lanes=L,C===Ee?v.flags|=16384:(m=v.updateQueue,m===null?v.updateQueue=new Set([C]):m.add(C),SB(A,C,L)),!1;case 22:return v.flags|=65536,C===Ee?v.flags|=16384:(m=v.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([C])},v.updateQueue=m):(v=m.retryQueue,v===null?m.retryQueue=new Set([C]):v.add(C)),SB(A,C,L)),!1}throw Error(n(435,v.tag))}return SB(A,C,L),CB(),!1}if(Mn)return m=cu.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=L,C!==Y1&&(A=Error(n(422),{cause:C}),Kh(mn(A,v)))):(C!==Y1&&(m=Error(n(423),{cause:C}),Kh(mn(m,v))),A=A.current.alternate,A.flags|=65536,L&=-L,A.lanes|=L,C=mn(C,v),L=eB(A.stateNode,C,L),tr(A,L),bs!==4&&(bs=2)),!1;var G=Error(n(520),{cause:C});if(G=mn(G,v),bb===null?bb=[G]:bb.push(G),bs!==4&&(bs=2),m===null)return!0;C=mn(C,v),v=m;do{switch(v.tag){case 3:return v.flags|=65536,A=L&-L,v.lanes|=A,A=eB(v.stateNode,C,A),tr(v,A),!1;case 1:if(m=v.type,G=v.stateNode,(v.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(o0===null||!o0.has(G))))return v.flags|=65536,L&=-L,v.lanes|=L,L=NM(L),kM(L,A,v,C),tr(v,L),!1}v=v.return}while(v!==null);return!1}var BM=Error(n(461)),Pi=!1;function so(A,m,v,C){m.child=A===null?vM(m,null,v,C):Wg(m,A.child,v,C)}function TM(A,m,v,C,L){v=v.render;var G=m.ref;if("ref"in C){var ue={};for(var be in C)be!=="ref"&&(ue[be]=C[be])}else ue=C;return ou(m),C=Ac(A,m,v,ue,G,L),be=Ta(),A!==null&&!Pi?(Wm(A,m,L),Nf(A,m,L)):(Mn&&be&&$m(m),m.flags|=1,so(A,m,C,L),m.child)}function jM(A,m,v,C,L){if(A===null){var G=v.type;return typeof G=="function"&&!$h(G)&&G.defaultProps===void 0&&v.compare===null?(m.tag=15,m.type=G,IM(A,m,G,C,L)):(A=gf(v.type,null,C,m,m.mode,L),A.ref=m.ref,A.return=m,m.child=A)}if(G=A.child,!lB(A,L)){var ue=G.memoizedProps;if(v=v.compare,v=v!==null?v:Jd,v(ue,C)&&A.ref===m.ref)return Nf(A,m,L)}return m.flags|=1,A=nu(G,C),A.ref=m.ref,A.return=m,m.child=A}function IM(A,m,v,C,L){if(A!==null){var G=A.memoizedProps;if(Jd(G,C)&&A.ref===m.ref)if(Pi=!1,m.pendingProps=C=G,lB(A,L))(A.flags&131072)!==0&&(Pi=!0);else return m.lanes=A.lanes,Nf(A,m,L)}return tB(A,m,v,C,L)}function FM(A,m,v){var C=m.pendingProps,L=C.children,G=A!==null?A.memoizedState:null;if(C.mode==="hidden"){if((m.flags&128)!==0){if(C=G!==null?G.baseLanes|v:v,A!==null){for(L=m.child=A.child,G=0;L!==null;)G=G|L.lanes|L.childLanes,L=L.sibling;m.childLanes=G&~C}else m.childLanes=0,m.child=null;return OM(A,m,C,v)}if((v&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},A!==null&&se(m,G!==null?G.cachePool:null),G!==null?ta(m,G):$n(),bM(m);else return m.lanes=m.childLanes=536870912,OM(A,m,G!==null?G.baseLanes|v:v,v)}else G!==null?(se(m,G.cachePool),ta(m,G),t0(),m.memoizedState=null):(A!==null&&se(m,null),$n(),t0());return so(A,m,L,v),m.child}function OM(A,m,v,C){var L=J();return L=L===null?null:{parent:Ds._currentValue,pool:L},m.memoizedState={baseLanes:v,cachePool:L},A!==null&&se(m,null),$n(),bM(m),A!==null&&qh(A,m,C,!0),null}function BE(A,m){var v=m.ref;if(v===null)A!==null&&A.ref!==null&&(m.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(n(284));(A===null||A.ref!==v)&&(m.flags|=4194816)}}function tB(A,m,v,C,L){return ou(m),v=Ac(A,m,v,C,void 0,L),C=Ta(),A!==null&&!Pi?(Wm(A,m,L),Nf(A,m,L)):(Mn&&C&&$m(m),m.flags|=1,so(A,m,v,L),m.child)}function DM(A,m,v,C,L,G){return ou(m),m.updateQueue=null,v=wf(m,C,v,L),dA(A),C=Ta(),A!==null&&!Pi?(Wm(A,m,G),Nf(A,m,G)):(Mn&&C&&$m(m),m.flags|=1,so(A,m,v,G),m.child)}function PM(A,m,v,C,L){if(ou(m),m.stateNode===null){var G=ti,ue=v.contextType;typeof ue=="object"&&ue!==null&&(G=Os(ue)),G=new v(C,G),m.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,G.updater=Zk,m.stateNode=G,G._reactInternals=m,G=m.stateNode,G.props=C,G.state=m.memoizedState,G.refs={},Qe(m),ue=v.contextType,G.context=typeof ue=="object"&&ue!==null?Os(ue):ti,G.state=m.memoizedState,ue=v.getDerivedStateFromProps,typeof ue=="function"&&(Jk(m,v,ue,C),G.state=m.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(ue=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),ue!==G.state&&Zk.enqueueReplaceState(G,G.state,null),Zt(m,C,G,L),xr(),G.state=m.memoizedState),typeof G.componentDidMount=="function"&&(m.flags|=4194308),C=!0}else if(A===null){G=m.stateNode;var be=m.memoizedProps,Pe=sp(v,be);G.props=Pe;var ot=G.context,St=v.contextType;ue=ti,typeof St=="object"&&St!==null&&(ue=Os(St));var Ot=v.getDerivedStateFromProps;St=typeof Ot=="function"||typeof G.getSnapshotBeforeUpdate=="function",be=m.pendingProps!==be,St||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(be||ot!==ue)&&wM(m,G,C,ue),ht=!1;var At=m.memoizedState;G.state=At,Zt(m,C,G,L),xr(),ot=m.memoizedState,be||At!==ot||ht?(typeof Ot=="function"&&(Jk(m,v,Ot,C),ot=m.memoizedState),(Pe=ht||yM(m,v,Pe,C,At,ot,ue))?(St||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(m.flags|=4194308)):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=C,m.memoizedState=ot),G.props=C,G.state=ot,G.context=ue,C=Pe):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),C=!1)}else{G=m.stateNode,Ve(A,m),ue=m.memoizedProps,St=sp(v,ue),G.props=St,Ot=m.pendingProps,At=G.context,ot=v.contextType,Pe=ti,typeof ot=="object"&&ot!==null&&(Pe=Os(ot)),be=v.getDerivedStateFromProps,(ot=typeof be=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ue!==Ot||At!==Pe)&&wM(m,G,C,Pe),ht=!1,At=m.memoizedState,G.state=At,Zt(m,C,G,L),xr();var ft=m.memoizedState;ue!==Ot||At!==ft||ht||A!==null&&A.dependencies!==null&&Ug(A.dependencies)?(typeof be=="function"&&(Jk(m,v,be,C),ft=m.memoizedState),(St=ht||yM(m,v,St,C,At,ft,Pe)||A!==null&&A.dependencies!==null&&Ug(A.dependencies))?(ot||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(C,ft,Pe),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(C,ft,Pe)),typeof G.componentDidUpdate=="function"&&(m.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof G.componentDidUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),m.memoizedProps=C,m.memoizedState=ft),G.props=C,G.state=ft,G.context=Pe,C=St):(typeof G.componentDidUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),C=!1)}return G=C,BE(A,m),C=(m.flags&128)!==0,G||C?(G=m.stateNode,v=C&&typeof v.getDerivedStateFromError!="function"?null:G.render(),m.flags|=1,A!==null&&C?(m.child=Wg(m,A.child,null,L),m.child=Wg(m,null,v,L)):so(A,m,v,L),m.memoizedState=G.state,A=m.child):A=Nf(A,m,L),A}function RM(A,m,v,C){return ll(),m.flags|=256,so(A,m,v,C),m.child}var rB={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nB(A){return{baseLanes:A,cachePool:de()}}function aB(A,m,v){return A=A!==null?A.childLanes&~v:0,m&&(A|=uu),A}function LM(A,m,v){var C=m.pendingProps,L=!1,G=(m.flags&128)!==0,ue;if((ue=G)||(ue=A!==null&&A.memoizedState===null?!1:(yi.current&2)!==0),ue&&(L=!0,m.flags&=-129),ue=(m.flags&32)!==0,m.flags&=-33,A===null){if(Mn){if(L?e0(m):t0(),Mn){var be=Ka,Pe;if(Pe=be){e:{for(Pe=be,be=au;Pe.nodeType!==8;){if(!be){be=null;break e}if(Pe=ud(Pe.nextSibling),Pe===null){be=null;break e}}be=Pe}be!==null?(m.memoizedState={dehydrated:be,treeContext:xf!==null?{id:ed,overflow:td}:null,retryLane:536870912,hydrationErrors:null},Pe=Di(18,null,null,0),Pe.stateNode=be,Pe.return=m,m.child=Pe,Fs=m,Ka=null,Pe=!0):Pe=!1}Pe||bf(m)}if(be=m.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return QB(be)?m.lanes=32:m.lanes=536870912,null;Sf(m)}return be=C.children,C=C.fallback,L?(t0(),L=m.mode,be=TE({mode:"hidden",children:be},L),C=Ju(C,L,v,null),be.return=m,C.return=m,be.sibling=C,m.child=be,L=m.child,L.memoizedState=nB(v),L.childLanes=aB(A,ue,v),m.memoizedState=rB,C):(e0(m),sB(m,be))}if(Pe=A.memoizedState,Pe!==null&&(be=Pe.dehydrated,be!==null)){if(G)m.flags&256?(e0(m),m.flags&=-257,m=iB(A,m,v)):m.memoizedState!==null?(t0(),m.child=A.child,m.flags|=128,m=null):(t0(),L=C.fallback,be=m.mode,C=TE({mode:"visible",children:C.children},be),L=Ju(L,be,v,null),L.flags|=2,C.return=m,L.return=m,C.sibling=L,m.child=C,Wg(m,A.child,null,v),C=m.child,C.memoizedState=nB(v),C.childLanes=aB(A,ue,v),m.memoizedState=rB,m=L);else if(e0(m),QB(be)){if(ue=be.nextSibling&&be.nextSibling.dataset,ue)var ot=ue.dgst;ue=ot,C=Error(n(419)),C.stack="",C.digest=ue,Kh({value:C,source:null,stack:null}),m=iB(A,m,v)}else if(Pi||qh(A,m,v,!1),ue=(v&A.childLanes)!==0,Pi||ue){if(ue=ja,ue!==null&&(C=v&-v,C=(C&42)!==0?1:gt(C),C=(C&(ue.suspendedLanes|v))!==0?0:C,C!==0&&C!==Pe.retryLane))throw Pe.retryLane=C,Yu(A,C),xc(ue,A,C),BM;be.data==="$?"||CB(),m=iB(A,m,v)}else be.data==="$?"?(m.flags|=192,m.child=A.child,m=null):(A=Pe.treeContext,Ka=ud(be.nextSibling),Fs=m,Mn=!0,lA=null,au=!1,A!==null&&(Ol[ol++]=ed,Ol[ol++]=td,Ol[ol++]=xf,ed=A.id,td=A.overflow,xf=m),m=sB(m,C.children),m.flags|=4096);return m}return L?(t0(),L=C.fallback,be=m.mode,Pe=A.child,ot=Pe.sibling,C=nu(Pe,{mode:"hidden",children:C.children}),C.subtreeFlags=Pe.subtreeFlags&65011712,ot!==null?L=nu(ot,L):(L=Ju(L,be,v,null),L.flags|=2),L.return=m,C.return=m,C.sibling=L,m.child=C,C=L,L=m.child,be=A.child.memoizedState,be===null?be=nB(v):(Pe=be.cachePool,Pe!==null?(ot=Ds._currentValue,Pe=Pe.parent!==ot?{parent:ot,pool:ot}:Pe):Pe=de(),be={baseLanes:be.baseLanes|v,cachePool:Pe}),L.memoizedState=be,L.childLanes=aB(A,ue,v),m.memoizedState=rB,C):(e0(m),v=A.child,A=v.sibling,v=nu(v,{mode:"visible",children:C.children}),v.return=m,v.sibling=null,A!==null&&(ue=m.deletions,ue===null?(m.deletions=[A],m.flags|=16):ue.push(A)),m.child=v,m.memoizedState=null,v)}function sB(A,m){return m=TE({mode:"visible",children:m},A.mode),m.return=A,A.child=m}function TE(A,m){return A=Di(22,A,null,m),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function iB(A,m,v){return Wg(m,A.child,null,v),A=sB(m,m.pendingProps.children),A.flags|=2,m.memoizedState=null,A}function MM(A,m,v){A.lanes|=m;var C=A.alternate;C!==null&&(C.lanes|=m),Lg(A.return,m,v)}function oB(A,m,v,C,L){var G=A.memoizedState;G===null?A.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:C,tail:v,tailMode:L}:(G.isBackwards=m,G.rendering=null,G.renderingStartTime=0,G.last=C,G.tail=v,G.tailMode=L)}function UM(A,m,v){var C=m.pendingProps,L=C.revealOrder,G=C.tail;if(so(A,m,C.children,v),C=yi.current,(C&2)!==0)C=C&1|2,m.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=m.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&MM(A,v,m);else if(A.tag===19)MM(A,v,m);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break e;for(;A.sibling===null;){if(A.return===null||A.return===m)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}C&=1}switch(W(yi,C),L){case"forwards":for(v=m.child,L=null;v!==null;)A=v.alternate,A!==null&&SE(A)===null&&(L=v),v=v.sibling;v=L,v===null?(L=m.child,m.child=null):(L=v.sibling,v.sibling=null),oB(m,!1,L,v,G);break;case"backwards":for(v=null,L=m.child,m.child=null;L!==null;){if(A=L.alternate,A!==null&&SE(A)===null){m.child=L;break}A=L.sibling,L.sibling=v,v=L,L=A}oB(m,!0,v,null,G);break;case"together":oB(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Nf(A,m,v){if(A!==null&&(m.dependencies=A.dependencies),i0|=m.lanes,(v&m.childLanes)===0)if(A!==null){if(qh(A,m,v,!1),(v&m.childLanes)===0)return null}else return null;if(A!==null&&m.child!==A.child)throw Error(n(153));if(m.child!==null){for(A=m.child,v=nu(A,A.pendingProps),m.child=v,v.return=m;A.sibling!==null;)A=A.sibling,v=v.sibling=nu(A,A.pendingProps),v.return=m;v.sibling=null}return m.child}function lB(A,m){return(A.lanes&m)!==0?!0:(A=A.dependencies,!!(A!==null&&Ug(A)))}function Zde(A,m,v){switch(m.tag){case 3:oe(m,m.stateNode.containerInfo),cA(m,Ds,A.memoizedState.cache),ll();break;case 27:case 5:pe(m);break;case 4:oe(m,m.stateNode.containerInfo);break;case 10:cA(m,m.type,m.memoizedProps.value);break;case 13:var C=m.memoizedState;if(C!==null)return C.dehydrated!==null?(e0(m),m.flags|=128,null):(v&m.child.childLanes)!==0?LM(A,m,v):(e0(m),A=Nf(A,m,v),A!==null?A.sibling:null);e0(m);break;case 19:var L=(A.flags&128)!==0;if(C=(v&m.childLanes)!==0,C||(qh(A,m,v,!1),C=(v&m.childLanes)!==0),L){if(C)return UM(A,m,v);m.flags|=128}if(L=m.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),W(yi,yi.current),C)break;return null;case 22:case 23:return m.lanes=0,FM(A,m,v);case 24:cA(m,Ds,A.memoizedState.cache)}return Nf(A,m,v)}function QM(A,m,v){if(A!==null)if(A.memoizedProps!==m.pendingProps)Pi=!0;else{if(!lB(A,v)&&(m.flags&128)===0)return Pi=!1,Zde(A,m,v);Pi=(A.flags&131072)!==0}else Pi=!1,Mn&&(m.flags&1048576)!==0&&iE(m,Rg,m.index);switch(m.lanes=0,m.tag){case 16:e:{A=m.pendingProps;var C=m.elementType,L=C._init;if(C=L(C._payload),m.type=C,typeof C=="function")$h(C)?(A=sp(C,A),m.tag=1,m=PM(null,m,C,A,v)):(m.tag=0,m=tB(null,m,C,A,v));else{if(C!=null){if(L=C.$$typeof,L===j){m.tag=11,m=TM(null,m,C,A,v);break e}else if(L===E){m.tag=14,m=jM(null,m,C,A,v);break e}}throw m=R(C)||C,Error(n(306,m,""))}}return m;case 0:return tB(A,m,m.type,m.pendingProps,v);case 1:return C=m.type,L=sp(C,m.pendingProps),PM(A,m,C,L,v);case 3:e:{if(oe(m,m.stateNode.containerInfo),A===null)throw Error(n(387));C=m.pendingProps;var G=m.memoizedState;L=G.element,Ve(A,m),Zt(m,C,null,v);var ue=m.memoizedState;if(C=ue.cache,cA(m,Ds,C),C!==G.cache&&Mg(m,[Ds],v,!0),xr(),C=ue.element,G.isDehydrated)if(G={element:C,isDehydrated:!1,cache:ue.cache},m.updateQueue.baseState=G,m.memoizedState=G,m.flags&256){m=RM(A,m,C,v);break e}else if(C!==L){L=mn(Error(n(424)),m),Kh(L),m=RM(A,m,C,v);break e}else{switch(A=m.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Ka=ud(A.firstChild),Fs=m,Mn=!0,lA=null,au=!0,v=vM(m,null,C,v),m.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(ll(),C===L){m=Nf(A,m,v);break e}so(A,m,C,v)}m=m.child}return m;case 26:return BE(A,m),A===null?(v=$U(m.type,null,m.pendingProps,null))?m.memoizedState=v:Mn||(v=m.type,A=m.pendingProps,C=zE(ae.current).createElement(v),C[nr]=m,C[gr]=A,oo(C,v,A),$e(C),m.stateNode=C):m.memoizedState=$U(m.type,A.memoizedProps,m.pendingProps,A.memoizedState),null;case 27:return pe(m),A===null&&Mn&&(C=m.stateNode=HU(m.type,m.pendingProps,ae.current),Fs=m,au=!0,L=Ka,u0(m.type)?(HB=L,Ka=ud(C.firstChild)):Ka=L),so(A,m,m.pendingProps.children,v),BE(A,m),A===null&&(m.flags|=4194304),m.child;case 5:return A===null&&Mn&&((L=C=Ka)&&(C=NAe(C,m.type,m.pendingProps,au),C!==null?(m.stateNode=C,Fs=m,Ka=ud(C.firstChild),au=!1,L=!0):L=!1),L||bf(m)),pe(m),L=m.type,G=m.pendingProps,ue=A!==null?A.memoizedProps:null,C=G.children,LB(L,G)?C=null:ue!==null&&LB(L,ue)&&(m.flags|=32),m.memoizedState!==null&&(L=Ac(A,m,AA,null,null,v),Bb._currentValue=L),BE(A,m),so(A,m,C,v),m.child;case 6:return A===null&&Mn&&((A=v=Ka)&&(v=kAe(v,m.pendingProps,au),v!==null?(m.stateNode=v,Fs=m,Ka=null,A=!0):A=!1),A||bf(m)),null;case 13:return LM(A,m,v);case 4:return oe(m,m.stateNode.containerInfo),C=m.pendingProps,A===null?m.child=Wg(m,null,C,v):so(A,m,C,v),m.child;case 11:return TM(A,m,m.type,m.pendingProps,v);case 7:return so(A,m,m.pendingProps,v),m.child;case 8:return so(A,m,m.pendingProps.children,v),m.child;case 12:return so(A,m,m.pendingProps.children,v),m.child;case 10:return C=m.pendingProps,cA(m,m.type,C.value),so(A,m,C.children,v),m.child;case 9:return L=m.type._context,C=m.pendingProps.children,ou(m),L=Os(L),C=C(L),m.flags|=1,so(A,m,C,v),m.child;case 14:return jM(A,m,m.type,m.pendingProps,v);case 15:return IM(A,m,m.type,m.pendingProps,v);case 19:return UM(A,m,v);case 31:return C=m.pendingProps,v=m.mode,C={mode:C.mode,children:C.children},A===null?(v=TE(C,v),v.ref=m.ref,m.child=v,v.return=m,m=v):(v=nu(A.child,C),v.ref=m.ref,m.child=v,v.return=m,m=v),m;case 22:return FM(A,m,v);case 24:return ou(m),C=Os(Ds),A===null?(L=J(),L===null&&(L=ja,G=J1(),L.pooledCache=G,G.refCount++,G!==null&&(L.pooledCacheLanes|=v),L=G),m.memoizedState={parent:C,cache:L},Qe(m),cA(m,Ds,L)):((A.lanes&v)!==0&&(Ve(A,m),Zt(m,null,null,v),xr()),L=A.memoizedState,G=m.memoizedState,L.parent!==C?(L={parent:C,cache:C},m.memoizedState=L,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=L),cA(m,Ds,C)):(C=G.cache,cA(m,Ds,C),C!==L.cache&&Mg(m,[Ds],v,!0))),so(A,m,m.pendingProps.children,v),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function kf(A){A.flags|=4}function HM(A,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!XU(m)){if(m=cu.current,m!==null&&((Pn&4194048)===Pn?mA!==null:(Pn&62914560)!==Pn&&(Pn&536870912)===0||m!==mA))throw tt=Ee,ge;A.flags|=8192}}function jE(A,m){m!==null&&(A.flags|=4),A.flags&16384&&(m=A.tag!==22?hn():536870912,A.lanes|=m,Zg|=m)}function hb(A,m){if(!Mn)switch(A.tailMode){case"hidden":m=A.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?A.tail=null:v.sibling=null;break;case"collapsed":v=A.tail;for(var C=null;v!==null;)v.alternate!==null&&(C=v),v=v.sibling;C===null?m||A.tail===null?A.tail=null:A.tail.sibling=null:C.sibling=null}}function as(A){var m=A.alternate!==null&&A.alternate.child===A.child,v=0,C=0;if(m)for(var L=A.child;L!==null;)v|=L.lanes|L.childLanes,C|=L.subtreeFlags&65011712,C|=L.flags&65011712,L.return=A,L=L.sibling;else for(L=A.child;L!==null;)v|=L.lanes|L.childLanes,C|=L.subtreeFlags,C|=L.flags,L.return=A,L=L.sibling;return A.subtreeFlags|=C,A.childLanes=v,m}function eAe(A,m,v){var C=m.pendingProps;switch(Gm(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(m),null;case 1:return as(m),null;case 3:return v=m.stateNode,C=null,A!==null&&(C=A.memoizedState.cache),m.memoizedState.cache!==C&&(m.flags|=2048),iu(Ds),le(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(A===null||A.child===null)&&(no(m)?kf(m):A===null||A.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,lE())),as(m),null;case 26:return v=m.memoizedState,A===null?(kf(m),v!==null?(as(m),HM(m,v)):(as(m),m.flags&=-16777217)):v?v!==A.memoizedState?(kf(m),as(m),HM(m,v)):(as(m),m.flags&=-16777217):(A.memoizedProps!==C&&kf(m),as(m),m.flags&=-16777217),null;case 27:Be(m),v=ae.current;var L=m.type;if(A!==null&&m.stateNode!=null)A.memoizedProps!==C&&kf(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return as(m),null}A=Z.current,no(m)?oE(m):(A=HU(L,C,v),m.stateNode=A,kf(m))}return as(m),null;case 5:if(Be(m),v=m.type,A!==null&&m.stateNode!=null)A.memoizedProps!==C&&kf(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return as(m),null}if(A=Z.current,no(m))oE(m);else{switch(L=zE(ae.current),A){case 1:A=L.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:A=L.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":A=L.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":A=L.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":A=L.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof C.is=="string"?L.createElement("select",{is:C.is}):L.createElement("select"),C.multiple?A.multiple=!0:C.size&&(A.size=C.size);break;default:A=typeof C.is=="string"?L.createElement(v,{is:C.is}):L.createElement(v)}}A[nr]=m,A[gr]=C;e:for(L=m.child;L!==null;){if(L.tag===5||L.tag===6)A.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===m)break e;for(;L.sibling===null;){if(L.return===null||L.return===m)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}m.stateNode=A;e:switch(oo(A,v,C),v){case"button":case"input":case"select":case"textarea":A=!!C.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&kf(m)}}return as(m),m.flags&=-16777217,null;case 6:if(A&&m.stateNode!=null)A.memoizedProps!==C&&kf(m);else{if(typeof C!="string"&&m.stateNode===null)throw Error(n(166));if(A=ae.current,no(m)){if(A=m.stateNode,v=m.memoizedProps,C=null,L=Fs,L!==null)switch(L.tag){case 27:case 5:C=L.memoizedProps}A[nr]=m,A=!!(A.nodeValue===v||C!==null&&C.suppressHydrationWarning===!0||DU(A.nodeValue,v)),A||bf(m)}else A=zE(A).createTextNode(C),A[nr]=m,m.stateNode=A}return as(m),null;case 13:if(C=m.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(L=no(m),C!==null&&C.dehydrated!==null){if(A===null){if(!L)throw Error(n(318));if(L=m.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(n(317));L[nr]=m}else ll(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;as(m),L=!1}else L=lE(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=L),L=!0;if(!L)return m.flags&256?(Sf(m),m):(Sf(m),null)}if(Sf(m),(m.flags&128)!==0)return m.lanes=v,m;if(v=C!==null,A=A!==null&&A.memoizedState!==null,v){C=m.child,L=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(L=C.alternate.memoizedState.cachePool.pool);var G=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(G=C.memoizedState.cachePool.pool),G!==L&&(C.flags|=2048)}return v!==A&&v&&(m.child.flags|=8192),jE(m,m.updateQueue),as(m),null;case 4:return le(),A===null&&FB(m.stateNode.containerInfo),as(m),null;case 10:return iu(m.type),as(m),null;case 19:if(M(yi),L=m.memoizedState,L===null)return as(m),null;if(C=(m.flags&128)!==0,G=L.rendering,G===null)if(C)hb(L,!1);else{if(bs!==0||A!==null&&(A.flags&128)!==0)for(A=m.child;A!==null;){if(G=SE(A),G!==null){for(m.flags|=128,hb(L,!1),A=G.updateQueue,m.updateQueue=A,jE(m,A),m.subtreeFlags=0,A=v,v=m.child;v!==null;)Vm(v,A),v=v.sibling;return W(yi,yi.current&1|2),m.child}A=A.sibling}L.tail!==null&&Ie()>OE&&(m.flags|=128,C=!0,hb(L,!1),m.lanes=4194304)}else{if(!C)if(A=SE(G),A!==null){if(m.flags|=128,C=!0,A=A.updateQueue,m.updateQueue=A,jE(m,A),hb(L,!0),L.tail===null&&L.tailMode==="hidden"&&!G.alternate&&!Mn)return as(m),null}else 2*Ie()-L.renderingStartTime>OE&&v!==536870912&&(m.flags|=128,C=!0,hb(L,!1),m.lanes=4194304);L.isBackwards?(G.sibling=m.child,m.child=G):(A=L.last,A!==null?A.sibling=G:m.child=G,L.last=G)}return L.tail!==null?(m=L.tail,L.rendering=m,L.tail=m.sibling,L.renderingStartTime=Ie(),m.sibling=null,A=yi.current,W(yi,C?A&1|2:A&1),m):(as(m),null);case 22:case 23:return Sf(m),Wr(),C=m.memoizedState!==null,A!==null?A.memoizedState!==null!==C&&(m.flags|=8192):C&&(m.flags|=8192),C?(v&536870912)!==0&&(m.flags&128)===0&&(as(m),m.subtreeFlags&6&&(m.flags|=8192)):as(m),v=m.updateQueue,v!==null&&jE(m,v.retryQueue),v=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(v=A.memoizedState.cachePool.pool),C=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==v&&(m.flags|=2048),A!==null&&M(Q),null;case 24:return v=null,A!==null&&(v=A.memoizedState.cache),m.memoizedState.cache!==v&&(m.flags|=2048),iu(Ds),as(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function tAe(A,m){switch(Gm(m),m.tag){case 1:return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 3:return iu(Ds),le(),A=m.flags,(A&65536)!==0&&(A&128)===0?(m.flags=A&-65537|128,m):null;case 26:case 27:case 5:return Be(m),null;case 13:if(Sf(m),A=m.memoizedState,A!==null&&A.dehydrated!==null){if(m.alternate===null)throw Error(n(340));ll()}return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 19:return M(yi),null;case 4:return le(),null;case 10:return iu(m.type),null;case 22:case 23:return Sf(m),Wr(),A!==null&&M(Q),A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 24:return iu(Ds),null;case 25:return null;default:return null}}function VM(A,m){switch(Gm(m),m.tag){case 3:iu(Ds),le();break;case 26:case 27:case 5:Be(m);break;case 4:le();break;case 13:Sf(m);break;case 19:M(yi);break;case 10:iu(m.type);break;case 22:case 23:Sf(m),Wr(),A!==null&&M(Q);break;case 24:iu(Ds)}}function mb(A,m){try{var v=m.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var L=C.next;v=L;do{if((v.tag&A)===A){C=void 0;var G=v.create,ue=v.inst;C=G(),ue.destroy=C}v=v.next}while(v!==L)}}catch(be){Ca(m,m.return,be)}}function r0(A,m,v){try{var C=m.updateQueue,L=C!==null?C.lastEffect:null;if(L!==null){var G=L.next;C=G;do{if((C.tag&A)===A){var ue=C.inst,be=ue.destroy;if(be!==void 0){ue.destroy=void 0,L=m;var Pe=v,ot=be;try{ot()}catch(St){Ca(L,Pe,St)}}}C=C.next}while(C!==G)}}catch(St){Ca(m,m.return,St)}}function zM(A){var m=A.updateQueue;if(m!==null){var v=A.stateNode;try{zn(m,v)}catch(C){Ca(A,A.return,C)}}}function $M(A,m,v){v.props=sp(A.type,A.memoizedProps),v.state=A.memoizedState;try{v.componentWillUnmount()}catch(C){Ca(A,m,C)}}function pb(A,m){try{var v=A.ref;if(v!==null){switch(A.tag){case 26:case 27:case 5:var C=A.stateNode;break;case 30:C=A.stateNode;break;default:C=A.stateNode}typeof v=="function"?A.refCleanup=v(C):v.current=C}}catch(L){Ca(A,m,L)}}function pA(A,m){var v=A.ref,C=A.refCleanup;if(v!==null)if(typeof C=="function")try{C()}catch(L){Ca(A,m,L)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(L){Ca(A,m,L)}else v.current=null}function GM(A){var m=A.type,v=A.memoizedProps,C=A.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":v.autoFocus&&C.focus();break e;case"img":v.src?C.src=v.src:v.srcSet&&(C.srcset=v.srcSet)}}catch(L){Ca(A,A.return,L)}}function cB(A,m,v){try{var C=A.stateNode;wAe(C,A.type,v,m),C[gr]=m}catch(L){Ca(A,A.return,L)}}function KM(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&u0(A.type)||A.tag===4}function uB(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||KM(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&u0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function dB(A,m,v){var C=A.tag;if(C===5||C===6)A=A.stateNode,m?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(A,m):(m=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,m.appendChild(A),v=v._reactRootContainer,v!=null||m.onclick!==null||(m.onclick=VE));else if(C!==4&&(C===27&&u0(A.type)&&(v=A.stateNode,m=null),A=A.child,A!==null))for(dB(A,m,v),A=A.sibling;A!==null;)dB(A,m,v),A=A.sibling}function IE(A,m,v){var C=A.tag;if(C===5||C===6)A=A.stateNode,m?v.insertBefore(A,m):v.appendChild(A);else if(C!==4&&(C===27&&u0(A.type)&&(v=A.stateNode),A=A.child,A!==null))for(IE(A,m,v),A=A.sibling;A!==null;)IE(A,m,v),A=A.sibling}function qM(A){var m=A.stateNode,v=A.memoizedProps;try{for(var C=A.type,L=m.attributes;L.length;)m.removeAttributeNode(L[0]);oo(m,C,v),m[nr]=A,m[gr]=v}catch(G){Ca(A,A.return,G)}}var Bf=!1,Rs=!1,AB=!1,WM=typeof WeakSet=="function"?WeakSet:Set,Ri=null;function rAe(A,m){if(A=A.containerInfo,PB=XE,A=ro(A),bi(A)){if("selectionStart"in A)var v={start:A.selectionStart,end:A.selectionEnd};else e:{v=(v=A.ownerDocument)&&v.defaultView||window;var C=v.getSelection&&v.getSelection();if(C&&C.rangeCount!==0){v=C.anchorNode;var L=C.anchorOffset,G=C.focusNode;C=C.focusOffset;try{v.nodeType,G.nodeType}catch{v=null;break e}var ue=0,be=-1,Pe=-1,ot=0,St=0,Ot=A,At=null;t:for(;;){for(var ft;Ot!==v||L!==0&&Ot.nodeType!==3||(be=ue+L),Ot!==G||C!==0&&Ot.nodeType!==3||(Pe=ue+C),Ot.nodeType===3&&(ue+=Ot.nodeValue.length),(ft=Ot.firstChild)!==null;)At=Ot,Ot=ft;for(;;){if(Ot===A)break t;if(At===v&&++ot===L&&(be=ue),At===G&&++St===C&&(Pe=ue),(ft=Ot.nextSibling)!==null)break;Ot=At,At=Ot.parentNode}Ot=ft}v=be===-1||Pe===-1?null:{start:be,end:Pe}}else v=null}v=v||{start:0,end:0}}else v=null;for(RB={focusedElem:A,selectionRange:v},XE=!1,Ri=m;Ri!==null;)if(m=Ri,A=m.child,(m.subtreeFlags&1024)!==0&&A!==null)A.return=m,Ri=A;else for(;Ri!==null;){switch(m=Ri,G=m.alternate,A=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&G!==null){A=void 0,v=m,L=G.memoizedProps,G=G.memoizedState,C=v.stateNode;try{var zr=sp(v.type,L,v.elementType===v.type);A=C.getSnapshotBeforeUpdate(zr,G),C.__reactInternalSnapshotBeforeUpdate=A}catch(Fr){Ca(v,v.return,Fr)}}break;case 3:if((A&1024)!==0){if(A=m.stateNode.containerInfo,v=A.nodeType,v===9)UB(A);else if(v===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":UB(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=m.sibling,A!==null){A.return=m.return,Ri=A;break}Ri=m.return}}function XM(A,m,v){var C=v.flags;switch(v.tag){case 0:case 11:case 15:n0(A,v),C&4&&mb(5,v);break;case 1:if(n0(A,v),C&4)if(A=v.stateNode,m===null)try{A.componentDidMount()}catch(ue){Ca(v,v.return,ue)}else{var L=sp(v.type,m.memoizedProps);m=m.memoizedState;try{A.componentDidUpdate(L,m,A.__reactInternalSnapshotBeforeUpdate)}catch(ue){Ca(v,v.return,ue)}}C&64&&zM(v),C&512&&pb(v,v.return);break;case 3:if(n0(A,v),C&64&&(A=v.updateQueue,A!==null)){if(m=null,v.child!==null)switch(v.child.tag){case 27:case 5:m=v.child.stateNode;break;case 1:m=v.child.stateNode}try{zn(A,m)}catch(ue){Ca(v,v.return,ue)}}break;case 27:m===null&&C&4&&qM(v);case 26:case 5:n0(A,v),m===null&&C&4&&GM(v),C&512&&pb(v,v.return);break;case 12:n0(A,v);break;case 13:n0(A,v),C&4&&ZM(A,v),C&64&&(A=v.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(v=dAe.bind(null,v),BAe(A,v))));break;case 22:if(C=v.memoizedState!==null||Bf,!C){m=m!==null&&m.memoizedState!==null||Rs,L=Bf;var G=Rs;Bf=C,(Rs=m)&&!G?a0(A,v,(v.subtreeFlags&8772)!==0):n0(A,v),Bf=L,Rs=G}break;case 30:break;default:n0(A,v)}}function YM(A){var m=A.alternate;m!==null&&(A.alternate=null,YM(m)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(m=A.stateNode,m!==null&&we(m)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var qa=null,Pl=!1;function Tf(A,m,v){for(v=v.child;v!==null;)JM(A,m,v),v=v.sibling}function JM(A,m,v){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(mt,v)}catch{}switch(v.tag){case 26:Rs||pA(v,m),Tf(A,m,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Rs||pA(v,m);var C=qa,L=Pl;u0(v.type)&&(qa=v.stateNode,Pl=!1),Tf(A,m,v),_b(v.stateNode),qa=C,Pl=L;break;case 5:Rs||pA(v,m);case 6:if(C=qa,L=Pl,qa=null,Tf(A,m,v),qa=C,Pl=L,qa!==null)if(Pl)try{(qa.nodeType===9?qa.body:qa.nodeName==="HTML"?qa.ownerDocument.body:qa).removeChild(v.stateNode)}catch(G){Ca(v,m,G)}else try{qa.removeChild(v.stateNode)}catch(G){Ca(v,m,G)}break;case 18:qa!==null&&(Pl?(A=qa,UU(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,v.stateNode),Fb(A)):UU(qa,v.stateNode));break;case 4:C=qa,L=Pl,qa=v.stateNode.containerInfo,Pl=!0,Tf(A,m,v),qa=C,Pl=L;break;case 0:case 11:case 14:case 15:Rs||r0(2,v,m),Rs||r0(4,v,m),Tf(A,m,v);break;case 1:Rs||(pA(v,m),C=v.stateNode,typeof C.componentWillUnmount=="function"&&$M(v,m,C)),Tf(A,m,v);break;case 21:Tf(A,m,v);break;case 22:Rs=(C=Rs)||v.memoizedState!==null,Tf(A,m,v),Rs=C;break;default:Tf(A,m,v)}}function ZM(A,m){if(m.memoizedState===null&&(A=m.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Fb(A)}catch(v){Ca(m,m.return,v)}}function nAe(A){switch(A.tag){case 13:case 19:var m=A.stateNode;return m===null&&(m=A.stateNode=new WM),m;case 22:return A=A.stateNode,m=A._retryCache,m===null&&(m=A._retryCache=new WM),m;default:throw Error(n(435,A.tag))}}function fB(A,m){var v=nAe(A);m.forEach(function(C){var L=AAe.bind(null,A,C);v.has(C)||(v.add(C),C.then(L,L))})}function hc(A,m){var v=m.deletions;if(v!==null)for(var C=0;C<v.length;C++){var L=v[C],G=A,ue=m,be=ue;e:for(;be!==null;){switch(be.tag){case 27:if(u0(be.type)){qa=be.stateNode,Pl=!1;break e}break;case 5:qa=be.stateNode,Pl=!1;break e;case 3:case 4:qa=be.stateNode.containerInfo,Pl=!0;break e}be=be.return}if(qa===null)throw Error(n(160));JM(G,ue,L),qa=null,Pl=!1,G=L.alternate,G!==null&&(G.return=null),L.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)eU(m,A),m=m.sibling}var cd=null;function eU(A,m){var v=A.alternate,C=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:hc(m,A),mc(A),C&4&&(r0(3,A,A.return),mb(3,A),r0(5,A,A.return));break;case 1:hc(m,A),mc(A),C&512&&(Rs||v===null||pA(v,v.return)),C&64&&Bf&&(A=A.updateQueue,A!==null&&(C=A.callbacks,C!==null&&(v=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=v===null?C:v.concat(C))));break;case 26:var L=cd;if(hc(m,A),mc(A),C&512&&(Rs||v===null||pA(v,v.return)),C&4){var G=v!==null?v.memoizedState:null;if(C=A.memoizedState,v===null)if(C===null)if(A.stateNode===null){e:{C=A.type,v=A.memoizedProps,L=L.ownerDocument||L;t:switch(C){case"title":G=L.getElementsByTagName("title")[0],(!G||G[Ce]||G[nr]||G.namespaceURI==="http://www.w3.org/2000/svg"||G.hasAttribute("itemprop"))&&(G=L.createElement(C),L.head.insertBefore(G,L.querySelector("head > title"))),oo(G,C,v),G[nr]=A,$e(G),C=G;break e;case"link":var ue=qU("link","href",L).get(C+(v.href||""));if(ue){for(var be=0;be<ue.length;be++)if(G=ue[be],G.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&G.getAttribute("rel")===(v.rel==null?null:v.rel)&&G.getAttribute("title")===(v.title==null?null:v.title)&&G.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){ue.splice(be,1);break t}}G=L.createElement(C),oo(G,C,v),L.head.appendChild(G);break;case"meta":if(ue=qU("meta","content",L).get(C+(v.content||""))){for(be=0;be<ue.length;be++)if(G=ue[be],G.getAttribute("content")===(v.content==null?null:""+v.content)&&G.getAttribute("name")===(v.name==null?null:v.name)&&G.getAttribute("property")===(v.property==null?null:v.property)&&G.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&G.getAttribute("charset")===(v.charSet==null?null:v.charSet)){ue.splice(be,1);break t}}G=L.createElement(C),oo(G,C,v),L.head.appendChild(G);break;default:throw Error(n(468,C))}G[nr]=A,$e(G),C=G}A.stateNode=C}else WU(L,A.type,A.stateNode);else A.stateNode=KU(L,C,A.memoizedProps);else G!==C?(G===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):G.count--,C===null?WU(L,A.type,A.stateNode):KU(L,C,A.memoizedProps)):C===null&&A.stateNode!==null&&cB(A,A.memoizedProps,v.memoizedProps)}break;case 27:hc(m,A),mc(A),C&512&&(Rs||v===null||pA(v,v.return)),v!==null&&C&4&&cB(A,A.memoizedProps,v.memoizedProps);break;case 5:if(hc(m,A),mc(A),C&512&&(Rs||v===null||pA(v,v.return)),A.flags&32){L=A.stateNode;try{yo(L,"")}catch(ft){Ca(A,A.return,ft)}}C&4&&A.stateNode!=null&&(L=A.memoizedProps,cB(A,L,v!==null?v.memoizedProps:L)),C&1024&&(AB=!0);break;case 6:if(hc(m,A),mc(A),C&4){if(A.stateNode===null)throw Error(n(162));C=A.memoizedProps,v=A.stateNode;try{v.nodeValue=C}catch(ft){Ca(A,A.return,ft)}}break;case 3:if(KE=null,L=cd,cd=$E(m.containerInfo),hc(m,A),cd=L,mc(A),C&4&&v!==null&&v.memoizedState.isDehydrated)try{Fb(m.containerInfo)}catch(ft){Ca(A,A.return,ft)}AB&&(AB=!1,tU(A));break;case 4:C=cd,cd=$E(A.stateNode.containerInfo),hc(m,A),mc(A),cd=C;break;case 12:hc(m,A),mc(A);break;case 13:hc(m,A),mc(A),A.child.flags&8192&&A.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(vB=Ie()),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,fB(A,C)));break;case 22:L=A.memoizedState!==null;var Pe=v!==null&&v.memoizedState!==null,ot=Bf,St=Rs;if(Bf=ot||L,Rs=St||Pe,hc(m,A),Rs=St,Bf=ot,mc(A),C&8192)e:for(m=A.stateNode,m._visibility=L?m._visibility&-2:m._visibility|1,L&&(v===null||Pe||Bf||Rs||ip(A)),v=null,m=A;;){if(m.tag===5||m.tag===26){if(v===null){Pe=v=m;try{if(G=Pe.stateNode,L)ue=G.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{be=Pe.stateNode;var Ot=Pe.memoizedProps.style,At=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;be.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(ft){Ca(Pe,Pe.return,ft)}}}else if(m.tag===6){if(v===null){Pe=m;try{Pe.stateNode.nodeValue=L?"":Pe.memoizedProps}catch(ft){Ca(Pe,Pe.return,ft)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===A)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break e;for(;m.sibling===null;){if(m.return===null||m.return===A)break e;v===m&&(v=null),m=m.return}v===m&&(v=null),m.sibling.return=m.return,m=m.sibling}C&4&&(C=A.updateQueue,C!==null&&(v=C.retryQueue,v!==null&&(C.retryQueue=null,fB(A,v))));break;case 19:hc(m,A),mc(A),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,fB(A,C)));break;case 30:break;case 21:break;default:hc(m,A),mc(A)}}function mc(A){var m=A.flags;if(m&2){try{for(var v,C=A.return;C!==null;){if(KM(C)){v=C;break}C=C.return}if(v==null)throw Error(n(160));switch(v.tag){case 27:var L=v.stateNode,G=uB(A);IE(A,G,L);break;case 5:var ue=v.stateNode;v.flags&32&&(yo(ue,""),v.flags&=-33);var be=uB(A);IE(A,be,ue);break;case 3:case 4:var Pe=v.stateNode.containerInfo,ot=uB(A);dB(A,ot,Pe);break;default:throw Error(n(161))}}catch(St){Ca(A,A.return,St)}A.flags&=-3}m&4096&&(A.flags&=-4097)}function tU(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var m=A;tU(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),A=A.sibling}}function n0(A,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)XM(A,m.alternate,m),m=m.sibling}function ip(A){for(A=A.child;A!==null;){var m=A;switch(m.tag){case 0:case 11:case 14:case 15:r0(4,m,m.return),ip(m);break;case 1:pA(m,m.return);var v=m.stateNode;typeof v.componentWillUnmount=="function"&&$M(m,m.return,v),ip(m);break;case 27:_b(m.stateNode);case 26:case 5:pA(m,m.return),ip(m);break;case 22:m.memoizedState===null&&ip(m);break;case 30:ip(m);break;default:ip(m)}A=A.sibling}}function a0(A,m,v){for(v=v&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var C=m.alternate,L=A,G=m,ue=G.flags;switch(G.tag){case 0:case 11:case 15:a0(L,G,v),mb(4,G);break;case 1:if(a0(L,G,v),C=G,L=C.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(ot){Ca(C,C.return,ot)}if(C=G,L=C.updateQueue,L!==null){var be=C.stateNode;try{var Pe=L.shared.hiddenCallbacks;if(Pe!==null)for(L.shared.hiddenCallbacks=null,L=0;L<Pe.length;L++)On(Pe[L],be)}catch(ot){Ca(C,C.return,ot)}}v&&ue&64&&zM(G),pb(G,G.return);break;case 27:qM(G);case 26:case 5:a0(L,G,v),v&&C===null&&ue&4&&GM(G),pb(G,G.return);break;case 12:a0(L,G,v);break;case 13:a0(L,G,v),v&&ue&4&&ZM(L,G);break;case 22:G.memoizedState===null&&a0(L,G,v),pb(G,G.return);break;case 30:break;default:a0(L,G,v)}m=m.sibling}}function hB(A,m){var v=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(v=A.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==v&&(A!=null&&A.refCount++,v!=null&&Km(v))}function mB(A,m){A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Km(A))}function gA(A,m,v,C){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)rU(A,m,v,C),m=m.sibling}function rU(A,m,v,C){var L=m.flags;switch(m.tag){case 0:case 11:case 15:gA(A,m,v,C),L&2048&&mb(9,m);break;case 1:gA(A,m,v,C);break;case 3:gA(A,m,v,C),L&2048&&(A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Km(A)));break;case 12:if(L&2048){gA(A,m,v,C),A=m.stateNode;try{var G=m.memoizedProps,ue=G.id,be=G.onPostCommit;typeof be=="function"&&be(ue,m.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Pe){Ca(m,m.return,Pe)}}else gA(A,m,v,C);break;case 13:gA(A,m,v,C);break;case 23:break;case 22:G=m.stateNode,ue=m.alternate,m.memoizedState!==null?G._visibility&2?gA(A,m,v,C):gb(A,m):G._visibility&2?gA(A,m,v,C):(G._visibility|=2,Xg(A,m,v,C,(m.subtreeFlags&10256)!==0)),L&2048&&hB(ue,m);break;case 24:gA(A,m,v,C),L&2048&&mB(m.alternate,m);break;default:gA(A,m,v,C)}}function Xg(A,m,v,C,L){for(L=L&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var G=A,ue=m,be=v,Pe=C,ot=ue.flags;switch(ue.tag){case 0:case 11:case 15:Xg(G,ue,be,Pe,L),mb(8,ue);break;case 23:break;case 22:var St=ue.stateNode;ue.memoizedState!==null?St._visibility&2?Xg(G,ue,be,Pe,L):gb(G,ue):(St._visibility|=2,Xg(G,ue,be,Pe,L)),L&&ot&2048&&hB(ue.alternate,ue);break;case 24:Xg(G,ue,be,Pe,L),L&&ot&2048&&mB(ue.alternate,ue);break;default:Xg(G,ue,be,Pe,L)}m=m.sibling}}function gb(A,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var v=A,C=m,L=C.flags;switch(C.tag){case 22:gb(v,C),L&2048&&hB(C.alternate,C);break;case 24:gb(v,C),L&2048&&mB(C.alternate,C);break;default:gb(v,C)}m=m.sibling}}var xb=8192;function Yg(A){if(A.subtreeFlags&xb)for(A=A.child;A!==null;)nU(A),A=A.sibling}function nU(A){switch(A.tag){case 26:Yg(A),A.flags&xb&&A.memoizedState!==null&&HAe(cd,A.memoizedState,A.memoizedProps);break;case 5:Yg(A);break;case 3:case 4:var m=cd;cd=$E(A.stateNode.containerInfo),Yg(A),cd=m;break;case 22:A.memoizedState===null&&(m=A.alternate,m!==null&&m.memoizedState!==null?(m=xb,xb=16777216,Yg(A),xb=m):Yg(A));break;default:Yg(A)}}function aU(A){var m=A.alternate;if(m!==null&&(A=m.child,A!==null)){m.child=null;do m=A.sibling,A.sibling=null,A=m;while(A!==null)}}function vb(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];Ri=C,iU(C,A)}aU(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)sU(A),A=A.sibling}function sU(A){switch(A.tag){case 0:case 11:case 15:vb(A),A.flags&2048&&r0(9,A,A.return);break;case 3:vb(A);break;case 12:vb(A);break;case 22:var m=A.stateNode;A.memoizedState!==null&&m._visibility&2&&(A.return===null||A.return.tag!==13)?(m._visibility&=-3,FE(A)):vb(A);break;default:vb(A)}}function FE(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];Ri=C,iU(C,A)}aU(A)}for(A=A.child;A!==null;){switch(m=A,m.tag){case 0:case 11:case 15:r0(8,m,m.return),FE(m);break;case 22:v=m.stateNode,v._visibility&2&&(v._visibility&=-3,FE(m));break;default:FE(m)}A=A.sibling}}function iU(A,m){for(;Ri!==null;){var v=Ri;switch(v.tag){case 0:case 11:case 15:r0(8,v,m);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var C=v.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Km(v.memoizedState.cache)}if(C=v.child,C!==null)C.return=v,Ri=C;else e:for(v=A;Ri!==null;){C=Ri;var L=C.sibling,G=C.return;if(YM(C),C===v){Ri=null;break e}if(L!==null){L.return=G,Ri=L;break e}Ri=G}}}var aAe={getCacheForType:function(A){var m=Os(Ds),v=m.data.get(A);return v===void 0&&(v=A(),m.data.set(A,v)),v}},sAe=typeof WeakMap=="function"?WeakMap:Map,ua=0,ja=null,Cn=null,Pn=0,da=0,pc=null,s0=!1,Jg=!1,pB=!1,jf=0,bs=0,i0=0,op=0,gB=0,uu=0,Zg=0,bb=null,Rl=null,xB=!1,vB=0,OE=1/0,DE=null,o0=null,io=0,l0=null,ex=null,tx=0,bB=0,yB=null,oU=null,yb=0,wB=null;function gc(){if((ua&2)!==0&&Pn!==0)return Pn&-Pn;if(H.T!==null){var A=yf;return A!==0?A:BB()}return xt()}function lU(){uu===0&&(uu=(Pn&536870912)===0||Mn?As():536870912);var A=cu.current;return A!==null&&(A.flags|=32),uu}function xc(A,m,v){(A===ja&&(da===2||da===9)||A.cancelPendingCommit!==null)&&(rx(A,0),c0(A,Pn,uu,!1)),Ba(A,v),((ua&2)===0||A!==ja)&&(A===ja&&((ua&2)===0&&(op|=v),bs===4&&c0(A,Pn,uu,!1)),xA(A))}function cU(A,m,v){if((ua&6)!==0)throw Error(n(327));var C=!v&&(m&124)===0&&(m&A.expiredLanes)===0||jn(A,m),L=C?lAe(A,m):_B(A,m,!0),G=C;do{if(L===0){Jg&&!C&&c0(A,m,0,!1);break}else{if(v=A.current.alternate,G&&!iAe(v)){L=_B(A,m,!1),G=!1;continue}if(L===2){if(G=m,A.errorRecoveryDisabledLanes&G)var ue=0;else ue=A.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){m=ue;e:{var be=A;L=bb;var Pe=be.current.memoizedState.isDehydrated;if(Pe&&(rx(be,ue).flags|=256),ue=_B(be,ue,!1),ue!==2){if(pB&&!Pe){be.errorRecoveryDisabledLanes|=G,op|=G,L=4;break e}G=Rl,Rl=L,G!==null&&(Rl===null?Rl=G:Rl.push.apply(Rl,G))}L=ue}if(G=!1,L!==2)continue}}if(L===1){rx(A,0),c0(A,m,0,!0);break}e:{switch(C=A,G=L,G){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:c0(C,m,uu,!s0);break e;case 2:Rl=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(L=vB+300-Ie(),10<L)){if(c0(C,m,uu,!s0),Vr(C,0,!0)!==0)break e;C.timeoutHandle=LU(uU.bind(null,C,v,Rl,DE,xB,m,uu,op,Zg,s0,G,2,-0,0),L);break e}uU(C,v,Rl,DE,xB,m,uu,op,Zg,s0,G,0,-0,0)}}break}while(!0);xA(A)}function uU(A,m,v,C,L,G,ue,be,Pe,ot,St,Ot,At,ft){if(A.timeoutHandle=-1,Ot=m.subtreeFlags,(Ot&8192||(Ot&16785408)===16785408)&&(kb={stylesheets:null,count:0,unsuspend:QAe},nU(m),Ot=VAe(),Ot!==null)){A.cancelPendingCommit=Ot(gU.bind(null,A,m,G,v,C,L,ue,be,Pe,St,1,At,ft)),c0(A,G,ue,!ot);return}gU(A,m,G,v,C,L,ue,be,Pe)}function iAe(A){for(var m=A;;){var v=m.tag;if((v===0||v===11||v===15)&&m.flags&16384&&(v=m.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var C=0;C<v.length;C++){var L=v[C],G=L.getSnapshot;L=L.value;try{if(!ei(G(),L))return!1}catch{return!1}}if(v=m.child,m.subtreeFlags&16384&&v!==null)v.return=m,m=v;else{if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function c0(A,m,v,C){m&=~gB,m&=~op,A.suspendedLanes|=m,A.pingedLanes&=~m,C&&(A.warmLanes|=m),C=A.expirationTimes;for(var L=m;0<L;){var G=31-Pt(L),ue=1<<G;C[G]=-1,L&=~ue}v!==0&&mr(A,v,m)}function PE(){return(ua&6)===0?(wb(0),!1):!0}function EB(){if(Cn!==null){if(da===0)var A=Cn.return;else A=Cn,nd=ri=null,Hg(A),qg=null,Ab=0,A=Cn;for(;A!==null;)VM(A.alternate,A),A=A.return;Cn=null}}function rx(A,m){var v=A.timeoutHandle;v!==-1&&(A.timeoutHandle=-1,CAe(v)),v=A.cancelPendingCommit,v!==null&&(A.cancelPendingCommit=null,v()),EB(),ja=A,Cn=v=nu(A.current,null),Pn=m,da=0,pc=null,s0=!1,Jg=jn(A,m),pB=!1,Zg=uu=gB=op=i0=bs=0,Rl=bb=null,xB=!1,(m&8)!==0&&(m|=m&32);var C=A.entangledLanes;if(C!==0)for(A=A.entanglements,C&=m;0<C;){var L=31-Pt(C),G=1<<L;m|=A[L],C&=~G}return jf=m,Il(),v}function dU(A,m){Nr=null,H.H=EE,m===me||m===xe?(m=Ke(),da=3):m===ge?(m=Ke(),da=4):da=m===BM?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,pc=m,Cn===null&&(bs=1,kE(A,mn(m,A.current)))}function AU(){var A=H.H;return H.H=EE,A===null?EE:A}function fU(){var A=H.A;return H.A=aAe,A}function CB(){bs=4,s0||(Pn&4194048)!==Pn&&cu.current!==null||(Jg=!0),(i0&134217727)===0&&(op&134217727)===0||ja===null||c0(ja,Pn,uu,!1)}function _B(A,m,v){var C=ua;ua|=2;var L=AU(),G=fU();(ja!==A||Pn!==m)&&(DE=null,rx(A,m)),m=!1;var ue=bs;e:do try{if(da!==0&&Cn!==null){var be=Cn,Pe=pc;switch(da){case 8:EB(),ue=6;break e;case 3:case 2:case 9:case 6:cu.current===null&&(m=!0);var ot=da;if(da=0,pc=null,nx(A,be,Pe,ot),v&&Jg){ue=0;break e}break;default:ot=da,da=0,pc=null,nx(A,be,Pe,ot)}}oAe(),ue=bs;break}catch(St){dU(A,St)}while(!0);return m&&A.shellSuspendCounter++,nd=ri=null,ua=C,H.H=L,H.A=G,Cn===null&&(ja=null,Pn=0,Il()),ue}function oAe(){for(;Cn!==null;)hU(Cn)}function lAe(A,m){var v=ua;ua|=2;var C=AU(),L=fU();ja!==A||Pn!==m?(DE=null,OE=Ie()+500,rx(A,m)):Jg=jn(A,m);e:do try{if(da!==0&&Cn!==null){m=Cn;var G=pc;t:switch(da){case 1:da=0,pc=null,nx(A,m,G,1);break;case 2:case 9:if(ke(G)){da=0,pc=null,mU(m);break}m=function(){da!==2&&da!==9||ja!==A||(da=7),xA(A)},G.then(m,m);break e;case 3:da=7;break e;case 4:da=5;break e;case 7:ke(G)?(da=0,pc=null,mU(m)):(da=0,pc=null,nx(A,m,G,7));break;case 5:var ue=null;switch(Cn.tag){case 26:ue=Cn.memoizedState;case 5:case 27:var be=Cn;if(!ue||XU(ue)){da=0,pc=null;var Pe=be.sibling;if(Pe!==null)Cn=Pe;else{var ot=be.return;ot!==null?(Cn=ot,RE(ot)):Cn=null}break t}}da=0,pc=null,nx(A,m,G,5);break;case 6:da=0,pc=null,nx(A,m,G,6);break;case 8:EB(),bs=6;break e;default:throw Error(n(462))}}cAe();break}catch(St){dU(A,St)}while(!0);return nd=ri=null,H.H=C,H.A=L,ua=v,Cn!==null?0:(ja=null,Pn=0,Il(),bs)}function cAe(){for(;Cn!==null&&!Ne();)hU(Cn)}function hU(A){var m=QM(A.alternate,A,jf);A.memoizedProps=A.pendingProps,m===null?RE(A):Cn=m}function mU(A){var m=A,v=m.alternate;switch(m.tag){case 15:case 0:m=DM(v,m,m.pendingProps,m.type,void 0,Pn);break;case 11:m=DM(v,m,m.pendingProps,m.type.render,m.ref,Pn);break;case 5:Hg(m);default:VM(v,m),m=Cn=Vm(m,jf),m=QM(v,m,jf)}A.memoizedProps=A.pendingProps,m===null?RE(A):Cn=m}function nx(A,m,v,C){nd=ri=null,Hg(m),qg=null,Ab=0;var L=m.return;try{if(Jde(A,L,m,v,Pn)){bs=1,kE(A,mn(v,A.current)),Cn=null;return}}catch(G){if(L!==null)throw Cn=L,G;bs=1,kE(A,mn(v,A.current)),Cn=null;return}m.flags&32768?(Mn||C===1?A=!0:Jg||(Pn&536870912)!==0?A=!1:(s0=A=!0,(C===2||C===9||C===3||C===6)&&(C=cu.current,C!==null&&C.tag===13&&(C.flags|=16384))),pU(m,A)):RE(m)}function RE(A){var m=A;do{if((m.flags&32768)!==0){pU(m,s0);return}A=m.return;var v=eAe(m.alternate,m,jf);if(v!==null){Cn=v;return}if(m=m.sibling,m!==null){Cn=m;return}Cn=m=A}while(m!==null);bs===0&&(bs=5)}function pU(A,m){do{var v=tAe(A.alternate,A);if(v!==null){v.flags&=32767,Cn=v;return}if(v=A.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!m&&(A=A.sibling,A!==null)){Cn=A;return}Cn=A=v}while(A!==null);bs=6,Cn=null}function gU(A,m,v,C,L,G,ue,be,Pe){A.cancelPendingCommit=null;do LE();while(io!==0);if((ua&6)!==0)throw Error(n(327));if(m!==null){if(m===A.current)throw Error(n(177));if(G=m.lanes|m.childLanes,G|=ts,en(A,v,G,ue,be,Pe),A===ja&&(Cn=ja=null,Pn=0),ex=m,l0=A,tx=v,bB=G,yB=L,oU=C,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,fAe(Oe,function(){return wU(),null})):(A.callbackNode=null,A.callbackPriority=0),C=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||C){C=H.T,H.T=null,L=X.p,X.p=2,ue=ua,ua|=4;try{rAe(A,m,v)}finally{ua=ue,X.p=L,H.T=C}}io=1,xU(),vU(),bU()}}function xU(){if(io===1){io=0;var A=l0,m=ex,v=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||v){v=H.T,H.T=null;var C=X.p;X.p=2;var L=ua;ua|=4;try{eU(m,A);var G=RB,ue=ro(A.containerInfo),be=G.focusedElem,Pe=G.selectionRange;if(ue!==be&&be&&be.ownerDocument&&Zd(be.ownerDocument.documentElement,be)){if(Pe!==null&&bi(be)){var ot=Pe.start,St=Pe.end;if(St===void 0&&(St=ot),"selectionStart"in be)be.selectionStart=ot,be.selectionEnd=Math.min(St,be.value.length);else{var Ot=be.ownerDocument||document,At=Ot&&Ot.defaultView||window;if(At.getSelection){var ft=At.getSelection(),zr=be.textContent.length,Fr=Math.min(Pe.start,zr),ya=Pe.end===void 0?Fr:Math.min(Pe.end,zr);!ft.extend&&Fr>ya&&(ue=ya,ya=Fr,Fr=ue);var We=Wu(be,Fr),He=Wu(be,ya);if(We&&He&&(ft.rangeCount!==1||ft.anchorNode!==We.node||ft.anchorOffset!==We.offset||ft.focusNode!==He.node||ft.focusOffset!==He.offset)){var nt=Ot.createRange();nt.setStart(We.node,We.offset),ft.removeAllRanges(),Fr>ya?(ft.addRange(nt),ft.extend(He.node,He.offset)):(nt.setEnd(He.node,He.offset),ft.addRange(nt))}}}}for(Ot=[],ft=be;ft=ft.parentNode;)ft.nodeType===1&&Ot.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<Ot.length;be++){var kt=Ot[be];kt.element.scrollLeft=kt.left,kt.element.scrollTop=kt.top}}XE=!!PB,RB=PB=null}finally{ua=L,X.p=C,H.T=v}}A.current=m,io=2}}function vU(){if(io===2){io=0;var A=l0,m=ex,v=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||v){v=H.T,H.T=null;var C=X.p;X.p=2;var L=ua;ua|=4;try{XM(A,m.alternate,m)}finally{ua=L,X.p=C,H.T=v}}io=3}}function bU(){if(io===4||io===3){io=0,fe();var A=l0,m=ex,v=tx,C=oU;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?io=5:(io=0,ex=l0=null,yU(A,A.pendingLanes));var L=A.pendingLanes;if(L===0&&(o0=null),Je(v),m=m.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(mt,m,void 0,(m.current.flags&128)===128)}catch{}if(C!==null){m=H.T,L=X.p,X.p=2,H.T=null;try{for(var G=A.onRecoverableError,ue=0;ue<C.length;ue++){var be=C[ue];G(be.value,{componentStack:be.stack})}}finally{H.T=m,X.p=L}}(tx&3)!==0&&LE(),xA(A),L=A.pendingLanes,(v&4194090)!==0&&(L&42)!==0?A===wB?yb++:(yb=0,wB=A):yb=0,wb(0)}}function yU(A,m){(A.pooledCacheLanes&=m)===0&&(m=A.pooledCache,m!=null&&(A.pooledCache=null,Km(m)))}function LE(A){return xU(),vU(),bU(),wU()}function wU(){if(io!==5)return!1;var A=l0,m=bB;bB=0;var v=Je(tx),C=H.T,L=X.p;try{X.p=32>v?32:v,H.T=null,v=yB,yB=null;var G=l0,ue=tx;if(io=0,ex=l0=null,tx=0,(ua&6)!==0)throw Error(n(331));var be=ua;if(ua|=4,sU(G.current),rU(G,G.current,ue,v),ua=be,wb(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(mt,G)}catch{}return!0}finally{X.p=L,H.T=C,yU(A,m)}}function EU(A,m,v){m=mn(v,m),m=eB(A.stateNode,m,2),A=jt(A,m,2),A!==null&&(Ba(A,2),xA(A))}function Ca(A,m,v){if(A.tag===3)EU(A,A,v);else for(;m!==null;){if(m.tag===3){EU(m,A,v);break}else if(m.tag===1){var C=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(o0===null||!o0.has(C))){A=mn(v,A),v=NM(2),C=jt(m,v,2),C!==null&&(kM(v,C,m,A),Ba(C,2),xA(C));break}}m=m.return}}function SB(A,m,v){var C=A.pingCache;if(C===null){C=A.pingCache=new sAe;var L=new Set;C.set(m,L)}else L=C.get(m),L===void 0&&(L=new Set,C.set(m,L));L.has(v)||(pB=!0,L.add(v),A=uAe.bind(null,A,m,v),m.then(A,A))}function uAe(A,m,v){var C=A.pingCache;C!==null&&C.delete(m),A.pingedLanes|=A.suspendedLanes&v,A.warmLanes&=~v,ja===A&&(Pn&v)===v&&(bs===4||bs===3&&(Pn&62914560)===Pn&&300>Ie()-vB?(ua&2)===0&&rx(A,0):gB|=v,Zg===Pn&&(Zg=0)),xA(A)}function CU(A,m){m===0&&(m=hn()),A=Yu(A,m),A!==null&&(Ba(A,m),xA(A))}function dAe(A){var m=A.memoizedState,v=0;m!==null&&(v=m.retryLane),CU(A,v)}function AAe(A,m){var v=0;switch(A.tag){case 13:var C=A.stateNode,L=A.memoizedState;L!==null&&(v=L.retryLane);break;case 19:C=A.stateNode;break;case 22:C=A.stateNode._retryCache;break;default:throw Error(n(314))}C!==null&&C.delete(m),CU(A,v)}function fAe(A,m){return _e(A,m)}var ME=null,ax=null,NB=!1,UE=!1,kB=!1,lp=0;function xA(A){A!==ax&&A.next===null&&(ax===null?ME=ax=A:ax=ax.next=A),UE=!0,NB||(NB=!0,mAe())}function wb(A,m){if(!kB&&UE){kB=!0;do for(var v=!1,C=ME;C!==null;){if(A!==0){var L=C.pendingLanes;if(L===0)var G=0;else{var ue=C.suspendedLanes,be=C.pingedLanes;G=(1<<31-Pt(42|A)+1)-1,G&=L&~(ue&~be),G=G&201326741?G&201326741|1:G?G|2:0}G!==0&&(v=!0,kU(C,G))}else G=Pn,G=Vr(C,C===ja?G:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(G&3)===0||jn(C,G)||(v=!0,kU(C,G));C=C.next}while(v);kB=!1}}function hAe(){_U()}function _U(){UE=NB=!1;var A=0;lp!==0&&(EAe()&&(A=lp),lp=0);for(var m=Ie(),v=null,C=ME;C!==null;){var L=C.next,G=SU(C,m);G===0?(C.next=null,v===null?ME=L:v.next=L,L===null&&(ax=v)):(v=C,(A!==0||(G&3)!==0)&&(UE=!0)),C=L}wb(A)}function SU(A,m){for(var v=A.suspendedLanes,C=A.pingedLanes,L=A.expirationTimes,G=A.pendingLanes&-62914561;0<G;){var ue=31-Pt(G),be=1<<ue,Pe=L[ue];Pe===-1?((be&v)===0||(be&C)!==0)&&(L[ue]=Or(be,m)):Pe<=m&&(A.expiredLanes|=be),G&=~be}if(m=ja,v=Pn,v=Vr(A,A===m?v:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C=A.callbackNode,v===0||A===m&&(da===2||da===9)||A.cancelPendingCommit!==null)return C!==null&&C!==null&&De(C),A.callbackNode=null,A.callbackPriority=0;if((v&3)===0||jn(A,v)){if(m=v&-v,m===A.callbackPriority)return m;switch(C!==null&&De(C),Je(v)){case 2:case 8:v=ye;break;case 32:v=Oe;break;case 268435456:v=qe;break;default:v=Oe}return C=NU.bind(null,A),v=_e(v,C),A.callbackPriority=m,A.callbackNode=v,m}return C!==null&&C!==null&&De(C),A.callbackPriority=2,A.callbackNode=null,2}function NU(A,m){if(io!==0&&io!==5)return A.callbackNode=null,A.callbackPriority=0,null;var v=A.callbackNode;if(LE()&&A.callbackNode!==v)return null;var C=Pn;return C=Vr(A,A===ja?C:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C===0?null:(cU(A,C,m),SU(A,Ie()),A.callbackNode!=null&&A.callbackNode===v?NU.bind(null,A):null)}function kU(A,m){if(LE())return null;cU(A,m,!0)}function mAe(){_Ae(function(){(ua&6)!==0?_e(Ye,hAe):_U()})}function BB(){return lp===0&&(lp=As()),lp}function BU(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:ac(""+A)}function TU(A,m){var v=m.ownerDocument.createElement("input");return v.name=m.name,v.value=m.value,A.id&&v.setAttribute("form",A.id),m.parentNode.insertBefore(v,m),A=new FormData(A),v.parentNode.removeChild(v),A}function pAe(A,m,v,C,L){if(m==="submit"&&v&&v.stateNode===L){var G=BU((L[gr]||null).action),ue=C.submitter;ue&&(m=(m=ue[gr]||null)?BU(m.formAction):ue.getAttribute("formAction"),m!==null&&(G=m,ue=null));var be=new qc("action","action",null,C,L);A.push({event:be,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(lp!==0){var Pe=ue?TU(L,ue):new FormData(L);lu(v,{pending:!0,data:Pe,method:L.method,action:G},null,Pe)}}else typeof G=="function"&&(be.preventDefault(),Pe=ue?TU(L,ue):new FormData(L),lu(v,{pending:!0,data:Pe,method:L.method,action:G},G,Pe))},currentTarget:L}]})}}for(var TB=0;TB<mf.length;TB++){var jB=mf[TB],gAe=jB.toLowerCase(),xAe=jB[0].toUpperCase()+jB.slice(1);Ga(gAe,"on"+xAe)}Ga(Vh,"onAnimationEnd"),Ga(tA,"onAnimationIteration"),Ga(rA,"onAnimationStart"),Ga("dblclick","onDoubleClick"),Ga("focusin","onFocus"),Ga("focusout","onBlur"),Ga(nA,"onTransitionRun"),Ga(hf,"onTransitionStart"),Ga(zh,"onTransitionCancel"),Ga(aA,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),Ft("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ft("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ft("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ft("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vAe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eb));function jU(A,m){m=(m&4)!==0;for(var v=0;v<A.length;v++){var C=A[v],L=C.event;C=C.listeners;e:{var G=void 0;if(m)for(var ue=C.length-1;0<=ue;ue--){var be=C[ue],Pe=be.instance,ot=be.currentTarget;if(be=be.listener,Pe!==G&&L.isPropagationStopped())break e;G=be,L.currentTarget=ot;try{G(L)}catch(St){NE(St)}L.currentTarget=null,G=Pe}else for(ue=0;ue<C.length;ue++){if(be=C[ue],Pe=be.instance,ot=be.currentTarget,be=be.listener,Pe!==G&&L.isPropagationStopped())break e;G=be,L.currentTarget=ot;try{G(L)}catch(St){NE(St)}L.currentTarget=null,G=Pe}}}}function _n(A,m){var v=m[Yr];v===void 0&&(v=m[Yr]=new Set);var C=A+"__bubble";v.has(C)||(IU(m,A,2,!1),v.add(C))}function IB(A,m,v){var C=0;m&&(C|=4),IU(v,A,C,m)}var QE="_reactListening"+Math.random().toString(36).slice(2);function FB(A){if(!A[QE]){A[QE]=!0,rt.forEach(function(v){v!=="selectionchange"&&(vAe.has(v)||IB(v,!1,A),IB(v,!0,A))});var m=A.nodeType===9?A:A.ownerDocument;m===null||m[QE]||(m[QE]=!0,IB("selectionchange",!1,m))}}function IU(A,m,v,C){switch(r7(m)){case 2:var L=GAe;break;case 8:L=KAe;break;default:L=KB}v=L.bind(null,m,v,A),L=void 0,!to||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(L=!0),C?L!==void 0?A.addEventListener(m,v,{capture:!0,passive:L}):A.addEventListener(m,v,!0):L!==void 0?A.addEventListener(m,v,{passive:L}):A.addEventListener(m,v,!1)}function OB(A,m,v,C,L){var G=C;if((m&1)===0&&(m&2)===0&&C!==null)e:for(;;){if(C===null)return;var ue=C.tag;if(ue===3||ue===4){var be=C.stateNode.containerInfo;if(be===L)break;if(ue===4)for(ue=C.return;ue!==null;){var Pe=ue.tag;if((Pe===3||Pe===4)&&ue.stateNode.containerInfo===L)return;ue=ue.return}for(;be!==null;){if(ue=Se(be),ue===null)return;if(Pe=ue.tag,Pe===5||Pe===6||Pe===26||Pe===27){C=G=ue;continue e}be=be.parentNode}}C=C.return}Lh(function(){var ot=G,St=la(v),Ot=[];e:{var At=Xu.get(A);if(At!==void 0){var ft=qc,zr=A;switch(A){case"keypress":if(Co(v)===0)break e;case"keydown":case"keyup":ft=lc;break;case"focusin":zr="focus",ft=Xc;break;case"focusout":zr="blur",ft=Xc;break;case"beforeblur":case"afterblur":ft=Xc;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=ps;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Wd;break;case Vh:case tA:case rA:ft=Gd;break;case aA:ft=Ae;break;case"scroll":case"scrollend":ft=lf;break;case"wheel":ft=Le;break;case"copy":case"cut":case"paste":ft=Kd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=qu;break;case"toggle":case"beforetoggle":ft=vt}var Fr=(m&4)!==0,ya=!Fr&&(A==="scroll"||A==="scrollend"),We=Fr?At!==null?At+"Capture":null:At;Fr=[];for(var He=ot,nt;He!==null;){var kt=He;if(nt=kt.stateNode,kt=kt.tag,kt!==5&&kt!==26&&kt!==27||nt===null||We===null||(kt=ji(He,We),kt!=null&&Fr.push(Cb(He,kt,nt))),ya)break;He=He.return}0<Fr.length&&(At=new ft(At,zr,null,v,St),Ot.push({event:At,listeners:Fr}))}}if((m&7)===0){e:{if(At=A==="mouseover"||A==="pointerover",ft=A==="mouseout"||A==="pointerout",At&&v!==Cl&&(zr=v.relatedTarget||v.fromElement)&&(Se(zr)||zr[Kr]))break e;if((ft||At)&&(At=St.window===St?St:(At=St.ownerDocument)?At.defaultView||At.parentWindow:window,ft?(zr=v.relatedTarget||v.toElement,ft=ot,zr=zr?Se(zr):null,zr!==null&&(ya=s(zr),Fr=zr.tag,zr!==ya||Fr!==5&&Fr!==27&&Fr!==6)&&(zr=null)):(ft=null,zr=ot),ft!==zr)){if(Fr=ps,kt="onMouseLeave",We="onMouseEnter",He="mouse",(A==="pointerout"||A==="pointerover")&&(Fr=qu,kt="onPointerLeave",We="onPointerEnter",He="pointer"),ya=ft==null?At:Xe(ft),nt=zr==null?At:Xe(zr),At=new Fr(kt,He+"leave",ft,v,St),At.target=ya,At.relatedTarget=nt,kt=null,Se(St)===ot&&(Fr=new Fr(We,He+"enter",zr,v,St),Fr.target=nt,Fr.relatedTarget=ya,kt=Fr),ya=kt,ft&&zr)t:{for(Fr=ft,We=zr,He=0,nt=Fr;nt;nt=sx(nt))He++;for(nt=0,kt=We;kt;kt=sx(kt))nt++;for(;0<He-nt;)Fr=sx(Fr),He--;for(;0<nt-He;)We=sx(We),nt--;for(;He--;){if(Fr===We||We!==null&&Fr===We.alternate)break t;Fr=sx(Fr),We=sx(We)}Fr=null}else Fr=null;ft!==null&&FU(Ot,At,ft,Fr,!1),zr!==null&&ya!==null&&FU(Ot,ya,zr,Fr,!0)}}e:{if(At=ot?Xe(ot):window,ft=At.nodeName&&At.nodeName.toLowerCase(),ft==="select"||ft==="input"&&At.type==="file")var fr=Qh;else if(ea(At))if(uf)fr=Og;else{fr=X1;var yn=So}else ft=At.nodeName,!ft||ft.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?ot&&sf(ot.elementType)&&(fr=Qh):fr=Qm;if(fr&&(fr=fr(A,ot))){Tl(Ot,fr,v,St);break e}yn&&yn(A,At,ot),A==="focusout"&&ot&&At.type==="number"&&ot.memoizedProps.value!=null&&$c(At,"number",At.value)}switch(yn=ot?Xe(ot):window,A){case"focusin":(ea(yn)||yn.contentEditable==="true")&&(No=yn,cc=ot,tu=null);break;case"focusout":tu=cc=No=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,$a(Ot,v,St);break;case"selectionchange":if(eA)break;case"keydown":case"keyup":$a(Ot,v,St)}var yr;if(Jt)e:{switch(A){case"compositionstart":var Dr="onCompositionStart";break e;case"compositionend":Dr="onCompositionEnd";break e;case"compositionupdate":Dr="onCompositionUpdate";break e}Dr=void 0}else Ir?it(A,v)&&(Dr="onCompositionEnd"):A==="keydown"&&v.keyCode===229&&(Dr="onCompositionStart");Dr&&(ie&&v.locale!=="ko"&&(Ir||Dr!=="onCompositionStart"?Dr==="onCompositionEnd"&&Ir&&(yr=of()):(Eo=St,Kc="value"in Eo?Eo.value:Eo.textContent,Ir=!0)),yn=HE(ot,Dr),0<yn.length&&(Dr=new $u(Dr,A,null,v,St),Ot.push({event:Dr,listeners:yn}),yr?Dr.data=yr:(yr=Ut(v),yr!==null&&(Dr.data=yr)))),(yr=ee?bn(A,v):qr(A,v))&&(Dr=HE(ot,"onBeforeInput"),0<Dr.length&&(yn=new $u("onBeforeInput","beforeinput",null,v,St),Ot.push({event:yn,listeners:Dr}),yn.data=yr)),pAe(Ot,A,ot,v,St)}jU(Ot,m)})}function Cb(A,m,v){return{instance:A,listener:m,currentTarget:v}}function HE(A,m){for(var v=m+"Capture",C=[];A!==null;){var L=A,G=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||G===null||(L=ji(A,v),L!=null&&C.unshift(Cb(A,L,G)),L=ji(A,m),L!=null&&C.push(Cb(A,L,G))),A.tag===3)return C;A=A.return}return[]}function sx(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function FU(A,m,v,C,L){for(var G=m._reactName,ue=[];v!==null&&v!==C;){var be=v,Pe=be.alternate,ot=be.stateNode;if(be=be.tag,Pe!==null&&Pe===C)break;be!==5&&be!==26&&be!==27||ot===null||(Pe=ot,L?(ot=ji(v,G),ot!=null&&ue.unshift(Cb(v,ot,Pe))):L||(ot=ji(v,G),ot!=null&&ue.push(Cb(v,ot,Pe)))),v=v.return}ue.length!==0&&A.push({event:m,listeners:ue})}var bAe=/\r\n?/g,yAe=/\u0000|\uFFFD/g;function OU(A){return(typeof A=="string"?A:""+A).replace(bAe,`
`).replace(yAe,"")}function DU(A,m){return m=OU(m),OU(A)===m}function VE(){}function ba(A,m,v,C,L,G){switch(v){case"children":typeof C=="string"?m==="body"||m==="textarea"&&C===""||yo(A,C):(typeof C=="number"||typeof C=="bigint")&&m!=="body"&&yo(A,""+C);break;case"className":on(A,"class",C);break;case"tabIndex":on(A,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":on(A,v,C);break;case"style":af(A,C,G);break;case"data":if(m!=="object"){on(A,"data",C);break}case"src":case"href":if(C===""&&(m!=="a"||v!=="href")){A.removeAttribute(v);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(v);break}C=ac(""+C),A.setAttribute(v,C);break;case"action":case"formAction":if(typeof C=="function"){A.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof G=="function"&&(v==="formAction"?(m!=="input"&&ba(A,m,"name",L.name,L,null),ba(A,m,"formEncType",L.formEncType,L,null),ba(A,m,"formMethod",L.formMethod,L,null),ba(A,m,"formTarget",L.formTarget,L,null)):(ba(A,m,"encType",L.encType,L,null),ba(A,m,"method",L.method,L,null),ba(A,m,"target",L.target,L,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(v);break}C=ac(""+C),A.setAttribute(v,C);break;case"onClick":C!=null&&(A.onclick=VE);break;case"onScroll":C!=null&&_n("scroll",A);break;case"onScrollEnd":C!=null&&_n("scrollend",A);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(L.children!=null)throw Error(n(60));A.innerHTML=v}}break;case"multiple":A.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":A.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){A.removeAttribute("xlink:href");break}v=ac(""+C),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,""+C):A.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,""):A.removeAttribute(v);break;case"capture":case"download":C===!0?A.setAttribute(v,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,C):A.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?A.setAttribute(v,C):A.removeAttribute(v);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?A.removeAttribute(v):A.setAttribute(v,C);break;case"popover":_n("beforetoggle",A),_n("toggle",A),sn(A,"popover",C);break;case"xlinkActuate":An(A,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":An(A,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":An(A,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":An(A,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":An(A,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":An(A,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":An(A,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":An(A,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":An(A,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":sn(A,"is",C);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=nc.get(v)||v,sn(A,v,C))}}function DB(A,m,v,C,L,G){switch(v){case"style":af(A,C,G);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(L.children!=null)throw Error(n(60));A.innerHTML=v}}break;case"children":typeof C=="string"?yo(A,C):(typeof C=="number"||typeof C=="bigint")&&yo(A,""+C);break;case"onScroll":C!=null&&_n("scroll",A);break;case"onScrollEnd":C!=null&&_n("scrollend",A);break;case"onClick":C!=null&&(A.onclick=VE);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!st.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(L=v.endsWith("Capture"),m=v.slice(2,L?v.length-7:void 0),G=A[gr]||null,G=G!=null?G[v]:null,typeof G=="function"&&A.removeEventListener(m,G,L),typeof C=="function")){typeof G!="function"&&G!==null&&(v in A?A[v]=null:A.hasAttribute(v)&&A.removeAttribute(v)),A.addEventListener(m,C,L);break e}v in A?A[v]=C:C===!0?A.setAttribute(v,""):sn(A,v,C)}}}function oo(A,m,v){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_n("error",A),_n("load",A);var C=!1,L=!1,G;for(G in v)if(v.hasOwnProperty(G)){var ue=v[G];if(ue!=null)switch(G){case"src":C=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ba(A,m,G,ue,v,null)}}L&&ba(A,m,"srcSet",v.srcSet,v,null),C&&ba(A,m,"src",v.src,v,null);return;case"input":_n("invalid",A);var be=G=ue=L=null,Pe=null,ot=null;for(C in v)if(v.hasOwnProperty(C)){var St=v[C];if(St!=null)switch(C){case"name":L=St;break;case"type":ue=St;break;case"checked":Pe=St;break;case"defaultChecked":ot=St;break;case"value":G=St;break;case"defaultValue":be=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(n(137,m));break;default:ba(A,m,C,St,v,null)}}zc(A,G,be,Pe,ot,ue,L,!1),Vc(A);return;case"select":_n("invalid",A),C=ue=G=null;for(L in v)if(v.hasOwnProperty(L)&&(be=v[L],be!=null))switch(L){case"value":G=be;break;case"defaultValue":ue=be;break;case"multiple":C=be;default:ba(A,m,L,be,v,null)}m=G,v=ue,A.multiple=!!C,m!=null?El(A,!!C,m,!1):v!=null&&El(A,!!C,v,!0);return;case"textarea":_n("invalid",A),G=L=C=null;for(ue in v)if(v.hasOwnProperty(ue)&&(be=v[ue],be!=null))switch(ue){case"value":C=be;break;case"defaultValue":L=be;break;case"children":G=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(91));break;default:ba(A,m,ue,be,v,null)}Gc(A,C,L,G),Vc(A);return;case"option":for(Pe in v)if(v.hasOwnProperty(Pe)&&(C=v[Pe],C!=null))switch(Pe){case"selected":A.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:ba(A,m,Pe,C,v,null)}return;case"dialog":_n("beforetoggle",A),_n("toggle",A),_n("cancel",A),_n("close",A);break;case"iframe":case"object":_n("load",A);break;case"video":case"audio":for(C=0;C<Eb.length;C++)_n(Eb[C],A);break;case"image":_n("error",A),_n("load",A);break;case"details":_n("toggle",A);break;case"embed":case"source":case"link":_n("error",A),_n("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ot in v)if(v.hasOwnProperty(ot)&&(C=v[ot],C!=null))switch(ot){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ba(A,m,ot,C,v,null)}return;default:if(sf(m)){for(St in v)v.hasOwnProperty(St)&&(C=v[St],C!==void 0&&DB(A,m,St,C,v,void 0));return}}for(be in v)v.hasOwnProperty(be)&&(C=v[be],C!=null&&ba(A,m,be,C,v,null))}function wAe(A,m,v,C){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,G=null,ue=null,be=null,Pe=null,ot=null,St=null;for(ft in v){var Ot=v[ft];if(v.hasOwnProperty(ft)&&Ot!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":Pe=Ot;default:C.hasOwnProperty(ft)||ba(A,m,ft,null,C,Ot)}}for(var At in C){var ft=C[At];if(Ot=v[At],C.hasOwnProperty(At)&&(ft!=null||Ot!=null))switch(At){case"type":G=ft;break;case"name":L=ft;break;case"checked":ot=ft;break;case"defaultChecked":St=ft;break;case"value":ue=ft;break;case"defaultValue":be=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,m));break;default:ft!==Ot&&ba(A,m,At,ft,C,Ot)}}xi(A,ue,be,Pe,ot,St,G,L);return;case"select":ft=ue=be=At=null;for(G in v)if(Pe=v[G],v.hasOwnProperty(G)&&Pe!=null)switch(G){case"value":break;case"multiple":ft=Pe;default:C.hasOwnProperty(G)||ba(A,m,G,null,C,Pe)}for(L in C)if(G=C[L],Pe=v[L],C.hasOwnProperty(L)&&(G!=null||Pe!=null))switch(L){case"value":At=G;break;case"defaultValue":be=G;break;case"multiple":ue=G;default:G!==Pe&&ba(A,m,L,G,C,Pe)}m=be,v=ue,C=ft,At!=null?El(A,!!v,At,!1):!!C!=!!v&&(m!=null?El(A,!!v,m,!0):El(A,!!v,v?[]:"",!1));return;case"textarea":ft=At=null;for(be in v)if(L=v[be],v.hasOwnProperty(be)&&L!=null&&!C.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:ba(A,m,be,null,C,L)}for(ue in C)if(L=C[ue],G=v[ue],C.hasOwnProperty(ue)&&(L!=null||G!=null))switch(ue){case"value":At=L;break;case"defaultValue":ft=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:L!==G&&ba(A,m,ue,L,C,G)}Hn(A,At,ft);return;case"option":for(var zr in v)if(At=v[zr],v.hasOwnProperty(zr)&&At!=null&&!C.hasOwnProperty(zr))switch(zr){case"selected":A.selected=!1;break;default:ba(A,m,zr,null,C,At)}for(Pe in C)if(At=C[Pe],ft=v[Pe],C.hasOwnProperty(Pe)&&At!==ft&&(At!=null||ft!=null))switch(Pe){case"selected":A.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:ba(A,m,Pe,At,C,ft)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fr in v)At=v[Fr],v.hasOwnProperty(Fr)&&At!=null&&!C.hasOwnProperty(Fr)&&ba(A,m,Fr,null,C,At);for(ot in C)if(At=C[ot],ft=v[ot],C.hasOwnProperty(ot)&&At!==ft&&(At!=null||ft!=null))switch(ot){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,m));break;default:ba(A,m,ot,At,C,ft)}return;default:if(sf(m)){for(var ya in v)At=v[ya],v.hasOwnProperty(ya)&&At!==void 0&&!C.hasOwnProperty(ya)&&DB(A,m,ya,void 0,C,At);for(St in C)At=C[St],ft=v[St],!C.hasOwnProperty(St)||At===ft||At===void 0&&ft===void 0||DB(A,m,St,At,C,ft);return}}for(var We in v)At=v[We],v.hasOwnProperty(We)&&At!=null&&!C.hasOwnProperty(We)&&ba(A,m,We,null,C,At);for(Ot in C)At=C[Ot],ft=v[Ot],!C.hasOwnProperty(Ot)||At===ft||At==null&&ft==null||ba(A,m,Ot,At,C,ft)}var PB=null,RB=null;function zE(A){return A.nodeType===9?A:A.ownerDocument}function PU(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function RU(A,m){if(A===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&m==="foreignObject"?0:A}function LB(A,m){return A==="textarea"||A==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var MB=null;function EAe(){var A=window.event;return A&&A.type==="popstate"?A===MB?!1:(MB=A,!0):(MB=null,!1)}var LU=typeof setTimeout=="function"?setTimeout:void 0,CAe=typeof clearTimeout=="function"?clearTimeout:void 0,MU=typeof Promise=="function"?Promise:void 0,_Ae=typeof queueMicrotask=="function"?queueMicrotask:typeof MU<"u"?function(A){return MU.resolve(null).then(A).catch(SAe)}:LU;function SAe(A){setTimeout(function(){throw A})}function u0(A){return A==="head"}function UU(A,m){var v=m,C=0,L=0;do{var G=v.nextSibling;if(A.removeChild(v),G&&G.nodeType===8)if(v=G.data,v==="/$"){if(0<C&&8>C){v=C;var ue=A.ownerDocument;if(v&1&&_b(ue.documentElement),v&2&&_b(ue.body),v&4)for(v=ue.head,_b(v),ue=v.firstChild;ue;){var be=ue.nextSibling,Pe=ue.nodeName;ue[Ce]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&ue.rel.toLowerCase()==="stylesheet"||v.removeChild(ue),ue=be}}if(L===0){A.removeChild(G),Fb(m);return}L--}else v==="$"||v==="$?"||v==="$!"?L++:C=v.charCodeAt(0)-48;else C=0;v=G}while(v);Fb(m)}function UB(A){var m=A.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var v=m;switch(m=m.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":UB(v),we(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}A.removeChild(v)}}function NAe(A,m,v,C){for(;A.nodeType===1;){var L=v;if(A.nodeName.toLowerCase()!==m.toLowerCase()){if(!C&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(C){if(!A[Ce])switch(m){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(G=A.getAttribute("rel"),G==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(G!==L.rel||A.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||A.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||A.getAttribute("title")!==(L.title==null?null:L.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(G=A.getAttribute("src"),(G!==(L.src==null?null:L.src)||A.getAttribute("type")!==(L.type==null?null:L.type)||A.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&G&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(m==="input"&&A.type==="hidden"){var G=L.name==null?null:""+L.name;if(L.type==="hidden"&&A.getAttribute("name")===G)return A}else return A;if(A=ud(A.nextSibling),A===null)break}return null}function kAe(A,m,v){if(m==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!v||(A=ud(A.nextSibling),A===null))return null;return A}function QB(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function BAe(A,m){var v=A.ownerDocument;if(A.data!=="$?"||v.readyState==="complete")m();else{var C=function(){m(),v.removeEventListener("DOMContentLoaded",C)};v.addEventListener("DOMContentLoaded",C),A._reactRetry=C}}function ud(A){for(;A!=null;A=A.nextSibling){var m=A.nodeType;if(m===1||m===3)break;if(m===8){if(m=A.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return A}var HB=null;function QU(A){A=A.previousSibling;for(var m=0;A;){if(A.nodeType===8){var v=A.data;if(v==="$"||v==="$!"||v==="$?"){if(m===0)return A;m--}else v==="/$"&&m++}A=A.previousSibling}return null}function HU(A,m,v){switch(m=zE(v),A){case"html":if(A=m.documentElement,!A)throw Error(n(452));return A;case"head":if(A=m.head,!A)throw Error(n(453));return A;case"body":if(A=m.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function _b(A){for(var m=A.attributes;m.length;)A.removeAttributeNode(m[0]);we(A)}var du=new Map,VU=new Set;function $E(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var If=X.d;X.d={f:TAe,r:jAe,D:IAe,C:FAe,L:OAe,m:DAe,X:RAe,S:PAe,M:LAe};function TAe(){var A=If.f(),m=PE();return A||m}function jAe(A){var m=je(A);m!==null&&m.tag===5&&m.type==="form"?np(m):If.r(A)}var ix=typeof document>"u"?null:document;function zU(A,m,v){var C=ix;if(C&&typeof m=="string"&&m){var L=In(m);L='link[rel="'+A+'"][href="'+L+'"]',typeof v=="string"&&(L+='[crossorigin="'+v+'"]'),VU.has(L)||(VU.add(L),A={rel:A,crossOrigin:v,href:m},C.querySelector(L)===null&&(m=C.createElement("link"),oo(m,"link",A),$e(m),C.head.appendChild(m)))}}function IAe(A){If.D(A),zU("dns-prefetch",A,null)}function FAe(A,m){If.C(A,m),zU("preconnect",A,m)}function OAe(A,m,v){If.L(A,m,v);var C=ix;if(C&&A&&m){var L='link[rel="preload"][as="'+In(m)+'"]';m==="image"&&v&&v.imageSrcSet?(L+='[imagesrcset="'+In(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(L+='[imagesizes="'+In(v.imageSizes)+'"]')):L+='[href="'+In(A)+'"]';var G=L;switch(m){case"style":G=ox(A);break;case"script":G=lx(A)}du.has(G)||(A=d({rel:"preload",href:m==="image"&&v&&v.imageSrcSet?void 0:A,as:m},v),du.set(G,A),C.querySelector(L)!==null||m==="style"&&C.querySelector(Sb(G))||m==="script"&&C.querySelector(Nb(G))||(m=C.createElement("link"),oo(m,"link",A),$e(m),C.head.appendChild(m)))}}function DAe(A,m){If.m(A,m);var v=ix;if(v&&A){var C=m&&typeof m.as=="string"?m.as:"script",L='link[rel="modulepreload"][as="'+In(C)+'"][href="'+In(A)+'"]',G=L;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":G=lx(A)}if(!du.has(G)&&(A=d({rel:"modulepreload",href:A},m),du.set(G,A),v.querySelector(L)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(Nb(G)))return}C=v.createElement("link"),oo(C,"link",A),$e(C),v.head.appendChild(C)}}}function PAe(A,m,v){If.S(A,m,v);var C=ix;if(C&&A){var L=dt(C).hoistableStyles,G=ox(A);m=m||"default";var ue=L.get(G);if(!ue){var be={loading:0,preload:null};if(ue=C.querySelector(Sb(G)))be.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":m},v),(v=du.get(G))&&VB(A,v);var Pe=ue=C.createElement("link");$e(Pe),oo(Pe,"link",A),Pe._p=new Promise(function(ot,St){Pe.onload=ot,Pe.onerror=St}),Pe.addEventListener("load",function(){be.loading|=1}),Pe.addEventListener("error",function(){be.loading|=2}),be.loading|=4,GE(ue,m,C)}ue={type:"stylesheet",instance:ue,count:1,state:be},L.set(G,ue)}}}function RAe(A,m){If.X(A,m);var v=ix;if(v&&A){var C=dt(v).hoistableScripts,L=lx(A),G=C.get(L);G||(G=v.querySelector(Nb(L)),G||(A=d({src:A,async:!0},m),(m=du.get(L))&&zB(A,m),G=v.createElement("script"),$e(G),oo(G,"link",A),v.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},C.set(L,G))}}function LAe(A,m){If.M(A,m);var v=ix;if(v&&A){var C=dt(v).hoistableScripts,L=lx(A),G=C.get(L);G||(G=v.querySelector(Nb(L)),G||(A=d({src:A,async:!0,type:"module"},m),(m=du.get(L))&&zB(A,m),G=v.createElement("script"),$e(G),oo(G,"link",A),v.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},C.set(L,G))}}function $U(A,m,v,C){var L=(L=ae.current)?$E(L):null;if(!L)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(m=ox(v.href),v=dt(L).hoistableStyles,C=v.get(m),C||(C={type:"style",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){A=ox(v.href);var G=dt(L).hoistableStyles,ue=G.get(A);if(ue||(L=L.ownerDocument||L,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},G.set(A,ue),(G=L.querySelector(Sb(A)))&&!G._p&&(ue.instance=G,ue.state.loading=5),du.has(A)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},du.set(A,v),G||MAe(L,A,v,ue.state))),m&&C===null)throw Error(n(528,""));return ue}if(m&&C!==null)throw Error(n(529,""));return null;case"script":return m=v.async,v=v.src,typeof v=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=lx(v),v=dt(L).hoistableScripts,C=v.get(m),C||(C={type:"script",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function ox(A){return'href="'+In(A)+'"'}function Sb(A){return'link[rel="stylesheet"]['+A+"]"}function GU(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function MAe(A,m,v,C){A.querySelector('link[rel="preload"][as="style"]['+m+"]")?C.loading=1:(m=A.createElement("link"),C.preload=m,m.addEventListener("load",function(){return C.loading|=1}),m.addEventListener("error",function(){return C.loading|=2}),oo(m,"link",v),$e(m),A.head.appendChild(m))}function lx(A){return'[src="'+In(A)+'"]'}function Nb(A){return"script[async]"+A}function KU(A,m,v){if(m.count++,m.instance===null)switch(m.type){case"style":var C=A.querySelector('style[data-href~="'+In(v.href)+'"]');if(C)return m.instance=C,$e(C),C;var L=d({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return C=(A.ownerDocument||A).createElement("style"),$e(C),oo(C,"style",L),GE(C,v.precedence,A),m.instance=C;case"stylesheet":L=ox(v.href);var G=A.querySelector(Sb(L));if(G)return m.state.loading|=4,m.instance=G,$e(G),G;C=GU(v),(L=du.get(L))&&VB(C,L),G=(A.ownerDocument||A).createElement("link"),$e(G);var ue=G;return ue._p=new Promise(function(be,Pe){ue.onload=be,ue.onerror=Pe}),oo(G,"link",C),m.state.loading|=4,GE(G,v.precedence,A),m.instance=G;case"script":return G=lx(v.src),(L=A.querySelector(Nb(G)))?(m.instance=L,$e(L),L):(C=v,(L=du.get(G))&&(C=d({},v),zB(C,L)),A=A.ownerDocument||A,L=A.createElement("script"),$e(L),oo(L,"link",C),A.head.appendChild(L),m.instance=L);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(C=m.instance,m.state.loading|=4,GE(C,v.precedence,A));return m.instance}function GE(A,m,v){for(var C=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=C.length?C[C.length-1]:null,G=L,ue=0;ue<C.length;ue++){var be=C[ue];if(be.dataset.precedence===m)G=be;else if(G!==L)break}G?G.parentNode.insertBefore(A,G.nextSibling):(m=v.nodeType===9?v.head:v,m.insertBefore(A,m.firstChild))}function VB(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.title==null&&(A.title=m.title)}function zB(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.integrity==null&&(A.integrity=m.integrity)}var KE=null;function qU(A,m,v){if(KE===null){var C=new Map,L=KE=new Map;L.set(v,C)}else L=KE,C=L.get(v),C||(C=new Map,L.set(v,C));if(C.has(A))return C;for(C.set(A,null),v=v.getElementsByTagName(A),L=0;L<v.length;L++){var G=v[L];if(!(G[Ce]||G[nr]||A==="link"&&G.getAttribute("rel")==="stylesheet")&&G.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=G.getAttribute(m)||"";ue=A+ue;var be=C.get(ue);be?be.push(G):C.set(ue,[G])}}return C}function WU(A,m,v){A=A.ownerDocument||A,A.head.insertBefore(v,m==="title"?A.querySelector("head > title"):null)}function UAe(A,m,v){if(v===1||m.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return A=m.disabled,typeof m.precedence=="string"&&A==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function XU(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var kb=null;function QAe(){}function HAe(A,m,v){if(kb===null)throw Error(n(475));var C=kb;if(m.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var L=ox(v.href),G=A.querySelector(Sb(L));if(G){A=G._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(C.count++,C=qE.bind(C),A.then(C,C)),m.state.loading|=4,m.instance=G,$e(G);return}G=A.ownerDocument||A,v=GU(v),(L=du.get(L))&&VB(v,L),G=G.createElement("link"),$e(G);var ue=G;ue._p=new Promise(function(be,Pe){ue.onload=be,ue.onerror=Pe}),oo(G,"link",v),m.instance=G}C.stylesheets===null&&(C.stylesheets=new Map),C.stylesheets.set(m,A),(A=m.state.preload)&&(m.state.loading&3)===0&&(C.count++,m=qE.bind(C),A.addEventListener("load",m),A.addEventListener("error",m))}}function VAe(){if(kb===null)throw Error(n(475));var A=kb;return A.stylesheets&&A.count===0&&$B(A,A.stylesheets),0<A.count?function(m){var v=setTimeout(function(){if(A.stylesheets&&$B(A,A.stylesheets),A.unsuspend){var C=A.unsuspend;A.unsuspend=null,C()}},6e4);return A.unsuspend=m,function(){A.unsuspend=null,clearTimeout(v)}}:null}function qE(){if(this.count--,this.count===0){if(this.stylesheets)$B(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var WE=null;function $B(A,m){A.stylesheets=null,A.unsuspend!==null&&(A.count++,WE=new Map,m.forEach(zAe,A),WE=null,qE.call(A))}function zAe(A,m){if(!(m.state.loading&4)){var v=WE.get(A);if(v)var C=v.get(null);else{v=new Map,WE.set(A,v);for(var L=A.querySelectorAll("link[data-precedence],style[data-precedence]"),G=0;G<L.length;G++){var ue=L[G];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(v.set(ue.dataset.precedence,ue),C=ue)}C&&v.set(null,C)}L=m.instance,ue=L.getAttribute("data-precedence"),G=v.get(ue)||C,G===C&&v.set(null,L),v.set(ue,L),this.count++,C=qE.bind(this),L.addEventListener("load",C),L.addEventListener("error",C),G?G.parentNode.insertBefore(L,G.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(L,A.firstChild)),m.state.loading|=4}}var Bb={$$typeof:S,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function $Ae(A,m,v,C,L,G,ue,be){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oa(0),this.hiddenUpdates=oa(null),this.identifierPrefix=C,this.onUncaughtError=L,this.onCaughtError=G,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function YU(A,m,v,C,L,G,ue,be,Pe,ot,St,Ot){return A=new $Ae(A,m,v,ue,be,Pe,ot,Ot),m=1,G===!0&&(m|=24),G=Di(3,null,null,m),A.current=G,G.stateNode=A,m=J1(),m.refCount++,A.pooledCache=m,m.refCount++,G.memoizedState={element:C,isDehydrated:v,cache:m},Qe(G),A}function JU(A){return A?(A=ti,A):ti}function ZU(A,m,v,C,L,G){L=JU(L),C.context===null?C.context=L:C.pendingContext=L,C=_t(m),C.payload={element:v},G=G===void 0?null:G,G!==null&&(C.callback=G),v=jt(A,C,m),v!==null&&(xc(v,A,m),Nt(v,A,m))}function e7(A,m){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var v=A.retryLane;A.retryLane=v!==0&&v<m?v:m}}function GB(A,m){e7(A,m),(A=A.alternate)&&e7(A,m)}function t7(A){if(A.tag===13){var m=Yu(A,67108864);m!==null&&xc(m,A,67108864),GB(A,67108864)}}var XE=!0;function GAe(A,m,v,C){var L=H.T;H.T=null;var G=X.p;try{X.p=2,KB(A,m,v,C)}finally{X.p=G,H.T=L}}function KAe(A,m,v,C){var L=H.T;H.T=null;var G=X.p;try{X.p=8,KB(A,m,v,C)}finally{X.p=G,H.T=L}}function KB(A,m,v,C){if(XE){var L=qB(C);if(L===null)OB(A,m,C,YE,v),n7(A,C);else if(WAe(L,A,m,v,C))C.stopPropagation();else if(n7(A,C),m&4&&-1<qAe.indexOf(A)){for(;L!==null;){var G=je(L);if(G!==null)switch(G.tag){case 3:if(G=G.stateNode,G.current.memoizedState.isDehydrated){var ue=_r(G.pendingLanes);if(ue!==0){var be=G;for(be.pendingLanes|=2,be.entangledLanes|=2;ue;){var Pe=1<<31-Pt(ue);be.entanglements[1]|=Pe,ue&=~Pe}xA(G),(ua&6)===0&&(OE=Ie()+500,wb(0))}}break;case 13:be=Yu(G,2),be!==null&&xc(be,G,2),PE(),GB(G,2)}if(G=qB(C),G===null&&OB(A,m,C,YE,v),G===L)break;L=G}L!==null&&C.stopPropagation()}else OB(A,m,C,null,v)}}function qB(A){return A=la(A),WB(A)}var YE=null;function WB(A){if(YE=null,A=Se(A),A!==null){var m=s(A);if(m===null)A=null;else{var v=m.tag;if(v===13){if(A=i(m),A!==null)return A;A=null}else if(v===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;A=null}else m!==A&&(A=null)}}return YE=A,null}function r7(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case Ye:return 2;case ye:return 8;case Oe:case Re:return 32;case qe:return 268435456;default:return 32}default:return 32}}var XB=!1,d0=null,A0=null,f0=null,Tb=new Map,jb=new Map,h0=[],qAe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n7(A,m){switch(A){case"focusin":case"focusout":d0=null;break;case"dragenter":case"dragleave":A0=null;break;case"mouseover":case"mouseout":f0=null;break;case"pointerover":case"pointerout":Tb.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":jb.delete(m.pointerId)}}function Ib(A,m,v,C,L,G){return A===null||A.nativeEvent!==G?(A={blockedOn:m,domEventName:v,eventSystemFlags:C,nativeEvent:G,targetContainers:[L]},m!==null&&(m=je(m),m!==null&&t7(m)),A):(A.eventSystemFlags|=C,m=A.targetContainers,L!==null&&m.indexOf(L)===-1&&m.push(L),A)}function WAe(A,m,v,C,L){switch(m){case"focusin":return d0=Ib(d0,A,m,v,C,L),!0;case"dragenter":return A0=Ib(A0,A,m,v,C,L),!0;case"mouseover":return f0=Ib(f0,A,m,v,C,L),!0;case"pointerover":var G=L.pointerId;return Tb.set(G,Ib(Tb.get(G)||null,A,m,v,C,L)),!0;case"gotpointercapture":return G=L.pointerId,jb.set(G,Ib(jb.get(G)||null,A,m,v,C,L)),!0}return!1}function a7(A){var m=Se(A.target);if(m!==null){var v=s(m);if(v!==null){if(m=v.tag,m===13){if(m=i(v),m!==null){A.blockedOn=m,wt(A.priority,function(){if(v.tag===13){var C=gc();C=gt(C);var L=Yu(v,C);L!==null&&xc(L,v,C),GB(v,C)}});return}}else if(m===3&&v.stateNode.current.memoizedState.isDehydrated){A.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}A.blockedOn=null}function JE(A){if(A.blockedOn!==null)return!1;for(var m=A.targetContainers;0<m.length;){var v=qB(A.nativeEvent);if(v===null){v=A.nativeEvent;var C=new v.constructor(v.type,v);Cl=C,v.target.dispatchEvent(C),Cl=null}else return m=je(v),m!==null&&t7(m),A.blockedOn=v,!1;m.shift()}return!0}function s7(A,m,v){JE(A)&&v.delete(m)}function XAe(){XB=!1,d0!==null&&JE(d0)&&(d0=null),A0!==null&&JE(A0)&&(A0=null),f0!==null&&JE(f0)&&(f0=null),Tb.forEach(s7),jb.forEach(s7)}function ZE(A,m){A.blockedOn===m&&(A.blockedOn=null,XB||(XB=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,XAe)))}var eC=null;function i7(A){eC!==A&&(eC=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){eC===A&&(eC=null);for(var m=0;m<A.length;m+=3){var v=A[m],C=A[m+1],L=A[m+2];if(typeof C!="function"){if(WB(C||v)===null)continue;break}var G=je(v);G!==null&&(A.splice(m,3),m-=3,lu(G,{pending:!0,data:L,method:v.method,action:C},C,L))}}))}function Fb(A){function m(Pe){return ZE(Pe,A)}d0!==null&&ZE(d0,A),A0!==null&&ZE(A0,A),f0!==null&&ZE(f0,A),Tb.forEach(m),jb.forEach(m);for(var v=0;v<h0.length;v++){var C=h0[v];C.blockedOn===A&&(C.blockedOn=null)}for(;0<h0.length&&(v=h0[0],v.blockedOn===null);)a7(v),v.blockedOn===null&&h0.shift();if(v=(A.ownerDocument||A).$$reactFormReplay,v!=null)for(C=0;C<v.length;C+=3){var L=v[C],G=v[C+1],ue=L[gr]||null;if(typeof G=="function")ue||i7(v);else if(ue){var be=null;if(G&&G.hasAttribute("formAction")){if(L=G,ue=G[gr]||null)be=ue.formAction;else if(WB(L)!==null)continue}else be=ue.action;typeof be=="function"?v[C+1]=be:(v.splice(C,3),C-=3),i7(v)}}}function YB(A){this._internalRoot=A}tC.prototype.render=YB.prototype.render=function(A){var m=this._internalRoot;if(m===null)throw Error(n(409));var v=m.current,C=gc();ZU(v,C,A,m,null,null)},tC.prototype.unmount=YB.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var m=A.containerInfo;ZU(A.current,2,null,A,null,null),PE(),m[Kr]=null}};function tC(A){this._internalRoot=A}tC.prototype.unstable_scheduleHydration=function(A){if(A){var m=xt();A={blockedOn:null,target:A,priority:m};for(var v=0;v<h0.length&&m!==0&&m<h0[v].priority;v++);h0.splice(v,0,A),v===0&&a7(A)}};var o7=t.version;if(o7!=="19.1.1")throw Error(n(527,o7,"19.1.1"));X.findDOMNode=function(A){var m=A._reactInternals;if(m===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=c(m),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var YAe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rC.isDisabled&&rC.supportsFiber)try{mt=rC.inject(YAe),It=rC}catch{}}return Db.createRoot=function(A,m){if(!a(A))throw Error(n(299));var v=!1,C="",L=EM,G=CM,ue=_M,be=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(L=m.onUncaughtError),m.onCaughtError!==void 0&&(G=m.onCaughtError),m.onRecoverableError!==void 0&&(ue=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(be=m.unstable_transitionCallbacks)),m=YU(A,1,!1,null,null,v,C,L,G,ue,be,null),A[Kr]=m.current,FB(A),new YB(m)},Db.hydrateRoot=function(A,m,v){if(!a(A))throw Error(n(299));var C=!1,L="",G=EM,ue=CM,be=_M,Pe=null,ot=null;return v!=null&&(v.unstable_strictMode===!0&&(C=!0),v.identifierPrefix!==void 0&&(L=v.identifierPrefix),v.onUncaughtError!==void 0&&(G=v.onUncaughtError),v.onCaughtError!==void 0&&(ue=v.onCaughtError),v.onRecoverableError!==void 0&&(be=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(Pe=v.unstable_transitionCallbacks),v.formState!==void 0&&(ot=v.formState)),m=YU(A,1,!0,m,v??null,C,L,G,ue,be,Pe,ot),m.context=JU(null),v=m.current,C=gc(),C=gt(C),L=_t(C),L.callback=null,jt(v,L,C),v=C,m.current.lanes=v,Ba(m,v),xA(m),A[Kr]=m.current,FB(A),new tC(m)},Db.version="19.1.1",Db}var g7;function dfe(){if(g7)return tT.exports;g7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),tT.exports=ufe(),tT.exports}var Afe=dfe();const ffe=yl(Afe),hfe=()=>{};var x7={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JX=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},mfe=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],o=e[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},ZX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,o=i?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;c||(p=64,i||(h=64)),n.push(r[d],r[f],r[h],r[p])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(JX(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):mfe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||o==null||u==null||f==null)throw new pfe;const h=s<<2|o>>4;if(n.push(h),u!==64){const p=o<<4&240|u>>2;if(n.push(p),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class pfe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gfe=function(e){const t=JX(e);return ZX.encodeByteArray(t,!0)},wS=function(e){return gfe(e).replace(/\./g,"")},eY=function(e){try{return ZX.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xfe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vfe=()=>xfe().__FIREBASE_DEFAULTS__,bfe=()=>{if(typeof process>"u"||typeof x7>"u")return;const e=x7.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},yfe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&eY(e[1]);return t&&JSON.parse(t)},BN=()=>{try{return hfe()||vfe()||bfe()||yfe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},tY=e=>{var t,r;return(r=(t=BN())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},eD=e=>{const t=tY(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},rY=()=>{var e;return(e=BN())==null?void 0:e.config},nY=e=>{var t;return(t=BN())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wfe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TN(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aY(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[wS(JSON.stringify(r)),wS(JSON.stringify(i)),""].join(".")}const Oy={};function Efe(){const e={prod:[],emulator:[]};for(const t of Object.keys(Oy))Oy[t]?e.emulator.push(t):e.prod.push(t);return e}function Cfe(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let v7=!1;function jN(e,t){if(typeof window>"u"||typeof document>"u"||!Sh(window.location.host)||Oy[e]===t||Oy[e]||v7)return;Oy[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=Efe().prod.length>0;function i(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{v7=!0,i()},h}function d(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=Cfe(n),p=r("text"),g=document.getElementById(p)||document.createElement("span"),x=r("learnmore"),b=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const S=h.element;o(S),d(b,x);const j=u();c(w,y),S.append(w,g,b,j),document.body.appendChild(S)}s?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _fe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zo())}function Sfe(){var t;const e=(t=BN())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nfe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kfe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Bfe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tfe(){const e=Zo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function jfe(){return!Sfe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ife(){try{return typeof indexedDB=="object"}catch{return!1}}function Ffe(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ofe="FirebaseError";class Pd extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=Ofe,Object.setPrototypeOf(this,Pd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,d2.prototype.create)}}class d2{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?Dfe(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new Pd(a,o,n)}}function Dfe(e,t){return e.replace(Pfe,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const Pfe=/\{\$([^}]+)}/g;function Rfe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function om(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(b7(s)&&b7(i)){if(!om(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function b7(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function uy(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function dy(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function Lfe(e,t){const r=new Mfe(e,t);return r.subscribe.bind(r)}class Mfe{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Ufe(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=sT),a.error===void 0&&(a.error=sT),a.complete===void 0&&(a.complete=sT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ufe(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function sT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(e){return e&&e._delegate?e._delegate:e}class lh{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qfe=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new wfe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Vfe(t))try{this.getOrInitializeService({instanceIdentifier:hp})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=hp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=hp){return this.instances.has(t)}getOptions(t=hp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Hfe(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=hp){return this.component?this.component.multipleInstances?t:hp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Hfe(e){return e===hp?void 0:e}function Vfe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zfe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new Qfe(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Nn||(Nn={}));const $fe={debug:Nn.DEBUG,verbose:Nn.VERBOSE,info:Nn.INFO,warn:Nn.WARN,error:Nn.ERROR,silent:Nn.SILENT},Gfe=Nn.INFO,Kfe={[Nn.DEBUG]:"log",[Nn.VERBOSE]:"log",[Nn.INFO]:"info",[Nn.WARN]:"warn",[Nn.ERROR]:"error"},qfe=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=Kfe[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let tD=class{constructor(t){this.name=t,this._logLevel=Gfe,this._logHandler=qfe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?$fe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nn.DEBUG,...t),this._logHandler(this,Nn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nn.VERBOSE,...t),this._logHandler(this,Nn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nn.INFO,...t),this._logHandler(this,Nn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nn.WARN,...t),this._logHandler(this,Nn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nn.ERROR,...t),this._logHandler(this,Nn.ERROR,...t)}};const Wfe=(e,t)=>t.some(r=>e instanceof r);let y7,w7;function Xfe(){return y7||(y7=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Yfe(){return w7||(w7=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sY=new WeakMap,qI=new WeakMap,iY=new WeakMap,iT=new WeakMap,rD=new WeakMap;function Jfe(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(K0(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&sY.set(r,e)}).catch(()=>{}),rD.set(t,e),t}function Zfe(e){if(qI.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});qI.set(e,t)}let WI={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return qI.get(e);if(t==="objectStoreNames")return e.objectStoreNames||iY.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return K0(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function ehe(e){WI=e(WI)}function the(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(oT(this),t,...r);return iY.set(n,t.sort?t.sort():[t]),K0(n)}:Yfe().includes(e)?function(...t){return e.apply(oT(this),t),K0(sY.get(this))}:function(...t){return K0(e.apply(oT(this),t))}}function rhe(e){return typeof e=="function"?the(e):(e instanceof IDBTransaction&&Zfe(e),Wfe(e,Xfe())?new Proxy(e,WI):e)}function K0(e){if(e instanceof IDBRequest)return Jfe(e);if(iT.has(e))return iT.get(e);const t=rhe(e);return t!==e&&(iT.set(e,t),rD.set(t,e)),t}const oT=e=>rD.get(e);function nhe(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=K0(i);return n&&i.addEventListener("upgradeneeded",c=>{n(K0(i.result),c.oldVersion,c.newVersion,K0(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const ahe=["get","getKey","getAll","getAllKeys","count"],she=["put","add","delete","clear"],lT=new Map;function E7(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(lT.get(t))return lT.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=she.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||ahe.includes(r)))return;const s=async function(i,...o){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&c.done]))[0]};return lT.set(t,s),s}ehe(e=>({...e,get:(t,r,n)=>E7(t,r)||e.get(t,r,n),has:(t,r)=>!!E7(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ihe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(ohe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function ohe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const XI="@firebase/app",C7="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new tD("@firebase/app"),lhe="@firebase/app-compat",che="@firebase/analytics-compat",uhe="@firebase/analytics",dhe="@firebase/app-check-compat",Ahe="@firebase/app-check",fhe="@firebase/auth",hhe="@firebase/auth-compat",mhe="@firebase/database",phe="@firebase/data-connect",ghe="@firebase/database-compat",xhe="@firebase/functions",vhe="@firebase/functions-compat",bhe="@firebase/installations",yhe="@firebase/installations-compat",whe="@firebase/messaging",Ehe="@firebase/messaging-compat",Che="@firebase/performance",_he="@firebase/performance-compat",She="@firebase/remote-config",Nhe="@firebase/remote-config-compat",khe="@firebase/storage",Bhe="@firebase/storage-compat",The="@firebase/firestore",jhe="@firebase/ai",Ihe="@firebase/firestore-compat",Fhe="firebase",Ohe="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="[DEFAULT]",Dhe={[XI]:"fire-core",[lhe]:"fire-core-compat",[uhe]:"fire-analytics",[che]:"fire-analytics-compat",[Ahe]:"fire-app-check",[dhe]:"fire-app-check-compat",[fhe]:"fire-auth",[hhe]:"fire-auth-compat",[mhe]:"fire-rtdb",[phe]:"fire-data-connect",[ghe]:"fire-rtdb-compat",[xhe]:"fire-fn",[vhe]:"fire-fn-compat",[bhe]:"fire-iid",[yhe]:"fire-iid-compat",[whe]:"fire-fcm",[Ehe]:"fire-fcm-compat",[Che]:"fire-perf",[_he]:"fire-perf-compat",[She]:"fire-rc",[Nhe]:"fire-rc-compat",[khe]:"fire-gcs",[Bhe]:"fire-gcs-compat",[The]:"fire-fst",[Ihe]:"fire-fst-compat",[jhe]:"fire-vertex","fire-js":"fire-js",[Fhe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Map,Phe=new Map,JI=new Map;function _7(e,t){try{e.container.addComponent(t)}catch(r){ch.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function lm(e){const t=e.name;if(JI.has(t))return ch.debug(`There were multiple attempts to register component ${t}.`),!1;JI.set(t,e);for(const r of uw.values())_7(r,e);for(const r of Phe.values())_7(r,e);return!0}function f2(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Sc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rhe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},q0=new d2("app","Firebase",Rhe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lhe{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new lh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw q0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=Ohe;function nD(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:YI,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw q0.create("bad-app-name",{appName:String(a)});if(r||(r=rY()),!r)throw q0.create("no-options");const s=uw.get(a);if(s){if(om(r,s.options)&&om(n,s.config))return s;throw q0.create("duplicate-app",{appName:a})}const i=new zfe(a);for(const c of JI.values())i.addComponent(c);const o=new Lhe(r,n,i);return uw.set(a,o),o}function IN(e=YI){const t=uw.get(e);if(!t&&e===YI&&rY())return nD();if(!t)throw q0.create("no-app",{appName:e});return t}function S7(){return Array.from(uw.values())}function Fu(e,t,r){let n=Dhe[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ch.warn(i.join(" "));return}lm(new lh(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mhe="firebase-heartbeat-database",Uhe=1,dw="firebase-heartbeat-store";let cT=null;function oY(){return cT||(cT=nhe(Mhe,Uhe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(dw)}catch(r){console.warn(r)}}}}).catch(e=>{throw q0.create("idb-open",{originalErrorMessage:e.message})})),cT}async function Qhe(e){try{const r=(await oY()).transaction(dw),n=await r.objectStore(dw).get(lY(e));return await r.done,n}catch(t){if(t instanceof Pd)ch.warn(t.message);else{const r=q0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ch.warn(r.message)}}}async function N7(e,t){try{const n=(await oY()).transaction(dw,"readwrite");await n.objectStore(dw).put(t,lY(e)),await n.done}catch(r){if(r instanceof Pd)ch.warn(r.message);else{const n=q0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ch.warn(n.message)}}}function lY(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hhe=1024,Vhe=30;class zhe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Ghe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=k7();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>Vhe){const i=Khe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ch.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=k7(),{heartbeatsToSend:n,unsentEntries:a}=$he(this._heartbeatsCache.heartbeats),s=wS(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return ch.warn(r),""}}}function k7(){return new Date().toISOString().substring(0,10)}function $he(e,t=Hhe){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),B7(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),B7(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Ghe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ife()?Ffe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Qhe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return N7(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return N7(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function B7(e){return wS(JSON.stringify({version:2,heartbeats:e})).length}function Khe(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qhe(e){lm(new lh("platform-logger",t=>new ihe(t),"PRIVATE")),lm(new lh("heartbeat",t=>new zhe(t),"PRIVATE")),Fu(XI,C7,e),Fu(XI,C7,"esm2020"),Fu("fire-js","")}qhe("");function cY(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Whe=cY,uY=new d2("auth","Firebase",cY());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=new tD("@firebase/auth");function Xhe(e,...t){ES.logLevel<=Nn.WARN&&ES.warn(`Auth (${mg}): ${e}`,...t)}function I_(e,...t){ES.logLevel<=Nn.ERROR&&ES.error(`Auth (${mg}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(e,...t){throw aD(e,...t)}function UA(e,...t){return aD(e,...t)}function dY(e,t,r){const n={...Whe(),[t]:r};return new d2("auth","Firebase",n).create(t,{appName:e.name})}function W0(e){return dY(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aD(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return uY.create(e,...t)}function Qr(e,t,...r){if(!e)throw aD(t,...r)}function Vf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw I_(t),new Error(t)}function uh(e,t){e||Vf(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function Yhe(){return T7()==="http:"||T7()==="https:"}function T7(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jhe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Yhe()||kfe()||"connection"in navigator)?navigator.onLine:!0}function Zhe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(t,r){this.shortDelay=t,this.longDelay=r,uh(r>t,"Short delay should be less than long delay!"),this.isMobile=_fe()||Bfe()}get(){return Jhe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(e,t){uh(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],r0e=new h2(3e4,6e4);function Nm(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Nh(e,t,r,n,a={}){return fY(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const o=A2({key:e.config.apiKey,...i}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return Nfe()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Sh(e.emulatorConfig.host)&&(u.credentials="include"),AY.fetch()(await hY(e,e.config.apiHost,r,o),u)})}async function fY(e,t,r){e._canInitEmulator=!1;const n={...e0e,...t};try{const a=new a0e(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw nC(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw nC(e,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw nC(e,"email-already-in-use",i);if(c==="USER_DISABLED")throw nC(e,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw dY(e,d,u);Fd(e,d)}}catch(a){if(a instanceof Pd)throw a;Fd(e,"network-request-failed",{message:String(a)})}}async function FN(e,t,r,n,a={}){const s=await Nh(e,t,r,n,a);return"mfaPendingCredential"in s&&Fd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function hY(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?sD(e.config,a):`${e.config.apiScheme}://${a}`;return t0e.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function n0e(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class a0e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(UA(this.auth,"network-request-failed")),r0e.get())})}}function nC(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=UA(e,t,n);return a.customData._tokenResponse=r,a}function j7(e){return e!==void 0&&e.enterprise!==void 0}class s0e{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return n0e(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function i0e(e,t){return Nh(e,"GET","/v2/recaptchaConfig",Nm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o0e(e,t){return Nh(e,"POST","/v1/accounts:delete",t)}async function CS(e,t){return Nh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function l0e(e,t=!1){const r=Xn(e),n=await r.getIdToken(t),a=iD(n);Qr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Dy(uT(a.auth_time)),issuedAtTime:Dy(uT(a.iat)),expirationTime:Dy(uT(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function uT(e){return Number(e)*1e3}function iD(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return I_("JWT malformed, contained fewer than 3 sections"),null;try{const a=eY(r);return a?JSON.parse(a):(I_("Failed to decode base64 JWT payload"),null)}catch(a){return I_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function I7(e){const t=iD(e);return Qr(t,"internal-error"),Qr(typeof t.exp<"u","internal-error"),Qr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aw(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Pd&&c0e(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function c0e({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0e{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dy(this.lastLoginAt),this.creationTime=Dy(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(e){var f;const t=e.auth,r=await e.getIdToken(),n=await Aw(e,CS(t,{idToken:r}));Qr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?mY(a.providerUserInfo):[],i=A0e(e.providerData,s),o=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new e6(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function d0e(e){const t=Xn(e);await _S(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function A0e(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function mY(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0e(e,t){const r=await fY(e,{},async()=>{const n=A2({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await hY(e,a,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:n};return e.emulatorConfig&&Sh(e.emulatorConfig.host)&&(c.credentials="include"),AY.fetch()(i,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function h0e(e,t){return Nh(e,"POST","/v2/accounts:revokeToken",Nm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Qr(t.idToken,"internal-error"),Qr(typeof t.idToken<"u","internal-error"),Qr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):I7(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Qr(t.length!==0,"internal-error");const r=I7(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Qr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await f0e(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new cv;return n&&(Qr(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Qr(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Qr(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new cv,this.toJSON())}_performRefresh(){return Vf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(e,t){Qr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class bd{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new u0e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new e6(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await Aw(this,this.stsTokenManager.getToken(this.auth,t));return Qr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return l0e(this,t)}reload(){return d0e(this)}_assign(t){this!==t&&(Qr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new bd({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await _S(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sc(this.auth.app))return Promise.reject(W0(this.auth));const t=await this.getIdToken();return await Aw(this,o0e(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:p,providerData:g,stsTokenManager:x}=r;Qr(f&&x,t,"internal-error");const b=cv.fromJSON(this.name,x);Qr(typeof f=="string",t,"internal-error"),p0(n,t.name),p0(a,t.name),Qr(typeof h=="boolean",t,"internal-error"),Qr(typeof p=="boolean",t,"internal-error"),p0(s,t.name),p0(i,t.name),p0(o,t.name),p0(c,t.name),p0(u,t.name),p0(d,t.name);const y=new bd({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:p,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new cv;a.updateFromServerResponse(r);const s=new bd({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await _S(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Qr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?mY(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new cv;o.updateFromIdToken(n);const c=new bd({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new e6(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7=new Map;function zf(e){uh(e instanceof Function,"Expected a class definition");let t=F7.get(e);return t?(uh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,F7.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pY{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}pY.type="NONE";const O7=pY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(e,t,r){return`firebase:${e}:${t}:${r}`}class uv{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=F_(this.userKey,a.apiKey,s),this.fullPersistenceKey=F_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await CS(this.auth,{idToken:t}).catch(()=>{});return r?bd._fromGetAccountInfoResponse(this.auth,r,t):null}return bd._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new uv(zf(O7),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||zf(O7);const i=F_(n,t.config.apiKey,t.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let f;if(typeof d=="string"){const h=await CS(t,{idToken:d}).catch(()=>{});if(!h)break;f=await bd._fromGetAccountInfoResponse(t,h,d)}else f=bd._fromJSON(t,d);u!==s&&(o=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new uv(s,t,n):(s=c[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new uv(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(bY(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gY(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(wY(t))return"Blackberry";if(EY(t))return"Webos";if(xY(t))return"Safari";if((t.includes("chrome/")||vY(t))&&!t.includes("edge/"))return"Chrome";if(yY(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function gY(e=Zo()){return/firefox\//i.test(e)}function xY(e=Zo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function vY(e=Zo()){return/crios\//i.test(e)}function bY(e=Zo()){return/iemobile/i.test(e)}function yY(e=Zo()){return/android/i.test(e)}function wY(e=Zo()){return/blackberry/i.test(e)}function EY(e=Zo()){return/webos/i.test(e)}function oD(e=Zo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function m0e(e=Zo()){var t;return oD(e)&&!!((t=window.navigator)!=null&&t.standalone)}function p0e(){return Tfe()&&document.documentMode===10}function CY(e=Zo()){return oD(e)||yY(e)||EY(e)||wY(e)||/windows phone/i.test(e)||bY(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Y(e,t=[]){let r;switch(e){case"Browser":r=D7(Zo());break;case"Worker":r=`${D7(Zo())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${mg}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0e{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,o)=>{try{const c=t(s);i(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x0e(e,t={}){return Nh(e,"GET","/v2/passwordPolicy",Nm(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0e=6;class b0e{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??v0e,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0e{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P7(this),this.idTokenSubscription=new P7(this),this.beforeStateQueue=new g0e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=zf(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await uv.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await CS(this,{idToken:t}),n=await bd._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Sc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!i||i===o)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await _S(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Zhe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Sc(this.app))return Promise.reject(W0(this));const r=t?Xn(t):null;return r&&Qr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Qr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Sc(this.app)?Promise.reject(W0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Sc(this.app)?Promise.reject(W0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zf(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await x0e(this),r=new b0e(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new d2("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await h0e(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&zf(t)||this._popupRedirectResolver;Qr(r,this,"argument-error"),this.redirectPersistenceManager=await uv.create(this,[zf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=t.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=_Y(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Sc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&Xhe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function pg(e){return Xn(e)}class P7{constructor(t){this.auth=t,this.observer=null,this.addObserver=Lfe(r=>this.observer=r)}get next(){return Qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ON={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function w0e(e){ON=e}function SY(e){return ON.loadJS(e)}function E0e(){return ON.recaptchaEnterpriseScript}function C0e(){return ON.gapiScript}function _0e(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class S0e{constructor(){this.enterprise=new N0e}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class N0e{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const k0e="recaptcha-enterprise",NY="NO_RECAPTCHA";class B0e{constructor(t){this.type=k0e,this.auth=pg(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{i0e(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new s0e(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{o(c)})})}function a(s,i,o){const c=window.grecaptcha;j7(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(NY)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new S0e().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&j7(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=E0e();c.length!==0&&(c+=o),SY(c).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function R7(e,t,r,n=!1,a=!1){const s=new B0e(e);let i;if(a)i=NY;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function t6(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await R7(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await R7(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0e(e,t){const r=f2(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(om(s,t??{}))return a;Fd(a,"already-initialized")}return r.initialize({options:t})}function j0e(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(zf);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function I0e(e,t,r){const n=pg(e);Qr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=kY(t),{host:i,port:o}=F0e(t),c=o===null?"":`:${o}`,u={url:`${s}//${i}${c}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Qr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Qr(om(u,n.config.emulator)&&om(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Sh(i)?(TN(`${s}//${i}${c}`),jN("Auth",!0)):O0e()}function kY(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function F0e(e){const t=kY(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:L7(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:L7(i)}}}function L7(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function O0e(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Vf("not implemented")}_getIdTokenResponse(t){return Vf("not implemented")}_linkToIdToken(t,r){return Vf("not implemented")}_getReauthenticationResolver(t){return Vf("not implemented")}}async function D0e(e,t){return Nh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P0e(e,t){return FN(e,"POST","/v1/accounts:signInWithPassword",Nm(e,t))}async function R0e(e,t){return Nh(e,"POST","/v1/accounts:sendOobCode",Nm(e,t))}async function L0e(e,t){return R0e(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M0e(e,t){return FN(e,"POST","/v1/accounts:signInWithEmailLink",Nm(e,t))}async function U0e(e,t){return FN(e,"POST","/v1/accounts:signInWithEmailLink",Nm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw extends lD{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new fw(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new fw(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return t6(t,r,"signInWithPassword",P0e);case"emailLink":return M0e(t,{email:this._email,oobCode:this._password});default:Fd(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return t6(t,n,"signUpPassword",D0e);case"emailLink":return U0e(t,{idToken:r,email:this._email,oobCode:this._password});default:Fd(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dv(e,t){return FN(e,"POST","/v1/accounts:signInWithIdp",Nm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0e="http://localhost";class Yp extends lD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Yp(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Fd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new Yp(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return dv(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,dv(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,dv(t,r)}buildRequest(){const t={requestUri:Q0e,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=A2(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0e(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V0e(e){const t=uy(dy(e)).link,r=t?uy(dy(t)).deep_link_id:null,n=uy(dy(e)).deep_link_id;return(n?uy(dy(n)).link:null)||n||r||t||e}class cD{constructor(t){const r=uy(dy(t)),n=r.apiKey??null,a=r.oobCode??null,s=H0e(r.mode??null);Qr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=V0e(t);try{return new cD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.providerId=p1.PROVIDER_ID}static credential(t,r){return fw._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=cD.parseLink(r);return Qr(n,"argument-error"),fw._fromEmailAndCode(t,n.code,n.tenantId)}}p1.PROVIDER_ID="password";p1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";p1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BY{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2 extends BY{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0 extends m2{constructor(){super("facebook.com")}static credential(t){return Yp._fromParams({providerId:j0.PROVIDER_ID,signInMethod:j0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return j0.credentialFromTaggedObject(t)}static credentialFromError(t){return j0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return j0.credential(t.oauthAccessToken)}catch{return null}}}j0.FACEBOOK_SIGN_IN_METHOD="facebook.com";j0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0 extends m2{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Yp._fromParams({providerId:I0.PROVIDER_ID,signInMethod:I0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return I0.credentialFromTaggedObject(t)}static credentialFromError(t){return I0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return I0.credential(r,n)}catch{return null}}}I0.GOOGLE_SIGN_IN_METHOD="google.com";I0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends m2{constructor(){super("github.com")}static credential(t){return Yp._fromParams({providerId:F0.PROVIDER_ID,signInMethod:F0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return F0.credentialFromTaggedObject(t)}static credentialFromError(t){return F0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return F0.credential(t.oauthAccessToken)}catch{return null}}}F0.GITHUB_SIGN_IN_METHOD="github.com";F0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0 extends m2{constructor(){super("twitter.com")}static credential(t,r){return Yp._fromParams({providerId:O0.PROVIDER_ID,signInMethod:O0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return O0.credentialFromTaggedObject(t)}static credentialFromError(t){return O0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return O0.credential(r,n)}catch{return null}}}O0.TWITTER_SIGN_IN_METHOD="twitter.com";O0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await bd._fromIdTokenResponse(t,n,a),i=M7(n);return new Iv({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=M7(n);return new Iv({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function M7(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS extends Pd{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,SS.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new SS(t,r,n,a)}}function TY(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?SS._fromErrorAndOperation(e,s,t,n):s})}async function z0e(e,t,r=!1){const n=await Aw(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return Iv._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0e(e,t,r=!1){const{auth:n}=e;if(Sc(n.app))return Promise.reject(W0(n));const a="reauthenticate";try{const s=await Aw(e,TY(n,a,t,e),r);Qr(s.idToken,n,"internal-error");const i=iD(s.idToken);Qr(i,n,"internal-error");const{sub:o}=i;return Qr(e.uid===o,n,"user-mismatch"),Iv._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jY(e,t,r=!1){if(Sc(e.app))return Promise.reject(W0(e));const n="signIn",a=await TY(e,n,t),s=await Iv._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function G0e(e,t){return jY(pg(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0e(e){const t=pg(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function q0e(e,t,r){const n=pg(e);await t6(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",L0e)}function W0e(e,t,r){return Sc(e.app)?Promise.reject(W0(e)):G0e(Xn(e),p1.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&K0e(e),n})}function X0e(e,t,r,n){return Xn(e).onIdTokenChanged(t,r,n)}function Y0e(e,t,r){return Xn(e).beforeAuthStateChanged(t,r)}function IY(e,t,r,n){return Xn(e).onAuthStateChanged(t,r,n)}function J0e(e){return Xn(e).signOut()}const NS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FY{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(NS,"1"),this.storage.removeItem(NS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0e=1e3,eme=10;class OY extends FY{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CY(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,c)=>{this.notifyListeners(i,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);p0e()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,eme):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},Z0e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}OY.type="LOCAL";const tme=OY;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY extends FY{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}DY.type="SESSION";const PY=DY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rme(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new DN(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),c=await rme(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}DN.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nme{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,c)=>{const u=uD("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(){return window}function ame(e){QA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RY(){return typeof QA().WorkerGlobalScope<"u"&&typeof QA().importScripts=="function"}async function sme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ime(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function ome(){return RY()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LY="firebaseLocalStorageDb",lme=1,kS="firebaseLocalStorage",MY="fbase_key";class p2{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function PN(e,t){return e.transaction([kS],t?"readwrite":"readonly").objectStore(kS)}function cme(){const e=indexedDB.deleteDatabase(LY);return new p2(e).toPromise()}function r6(){const e=indexedDB.open(LY,lme);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(kS,{keyPath:MY})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(kS)?t(n):(n.close(),await cme(),t(await r6()))})})}async function U7(e,t,r){const n=PN(e,!0).put({[MY]:t,value:r});return new p2(n).toPromise()}async function ume(e,t){const r=PN(e,!1).get(t),n=await new p2(r).toPromise();return n===void 0?null:n.value}function Q7(e,t){const r=PN(e,!0).delete(t);return new p2(r).toPromise()}const dme=800,Ame=3;class UY{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await r6(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>Ame)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RY()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=DN._getInstance(ome()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await sme(),!this.activeServiceWorker)return;this.sender=new nme(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ime()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await r6();return await U7(t,NS,"1"),await Q7(t,NS),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>U7(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>ume(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q7(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=PN(a,!1).getAll();return new p2(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UY.type="LOCAL";const fme=UY;new h2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hme(e,t){return t?zf(t):(Qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD extends lD{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return dv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return dv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return dv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function mme(e){return jY(e.auth,new dD(e),e.bypassAuthState)}function pme(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),$0e(r,new dD(e),e.bypassAuthState)}async function gme(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),z0e(r,new dD(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QY{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=t;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return mme;case"linkViaPopup":case"linkViaRedirect":return gme;case"reauthViaPopup":case"reauthViaRedirect":return pme;default:Fd(this.auth,"internal-error")}}resolve(t){uh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){uh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xme=new h2(2e3,1e4);class qx extends QY{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,qx.currentPopupAction&&qx.currentPopupAction.cancel(),qx.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Qr(t,this.auth,"internal-error"),t}async onExecution(){uh(this.filter.length===1,"Popup operations only handle one event");const t=uD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(UA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(UA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qx.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(UA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,xme.get())};t()}}qx.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vme="pendingRedirect",O_=new Map;class bme extends QY{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=O_.get(this.auth._key());if(!t){try{const n=await yme(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}O_.set(this.auth._key(),t)}return this.bypassAuthState||O_.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yme(e,t){const r=Cme(t),n=Eme(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function wme(e,t){O_.set(e._key(),t)}function Eme(e){return zf(e._redirectPersistence)}function Cme(e){return F_(vme,e.config.apiKey,e.name)}async function _me(e,t,r=!1){if(Sc(e.app))return Promise.reject(W0(e));const n=pg(e),a=hme(n,t),i=await new bme(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sme=600*1e3;class Nme{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!kme(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!HY(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(UA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Sme&&this.cachedEventUids.clear(),this.cachedEventUids.has(H7(t))}saveEventToCache(t){this.cachedEventUids.add(H7(t)),this.lastProcessedEventTime=Date.now()}}function H7(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function HY({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function kme(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HY(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bme(e,t={}){return Nh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jme=/^https?/;async function Ime(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Bme(e);for(const r of t)try{if(Fme(r))return}catch{}Fd(e,"unauthorized-domain")}function Fme(e){const t=ZI(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!jme.test(r))return!1;if(Tme.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ome=new h2(3e4,6e4);function V7(){const e=QA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function Dme(e){return new Promise((t,r)=>{var a,s,i;function n(){V7(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{V7(),r(UA(e,"network-request-failed"))},timeout:Ome.get()})}if((s=(a=QA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=QA().gapi)!=null&&i.load)n();else{const o=_0e("iframefcb");return QA()[o]=()=>{gapi.load?n():r(UA(e,"network-request-failed"))},SY(`${C0e()}?onload=${o}`).catch(c=>r(c))}}).catch(t=>{throw D_=null,t})}let D_=null;function Pme(e){return D_=D_||Dme(e),D_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rme=new h2(5e3,15e3),Lme="__/auth/iframe",Mme="emulator/auth/iframe",Ume={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hme(e){const t=e.config;Qr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?sD(t,Mme):`https://${e.config.authDomain}/${Lme}`,n={apiKey:t.apiKey,appName:e.name,v:mg},a=Qme.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${A2(n).slice(1)}`}async function Vme(e){const t=await Pme(e),r=QA().gapi;return Qr(r,e,"internal-error"),t.open({where:document.body,url:Hme(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ume,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=UA(e,"network-request-failed"),o=QA().setTimeout(()=>{s(i)},Rme.get());function c(){QA().clearTimeout(o),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$me=500,Gme=600,Kme="_blank",qme="http://localhost";class z7{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wme(e,t,r,n=$me,a=Gme){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c={...zme,width:n.toString(),height:a.toString(),top:s,left:i},u=Zo().toLowerCase();r&&(o=vY(u)?Kme:r),gY(u)&&(t=t||qme,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(m0e(u)&&o!=="_self")return Xme(t||"",o),new z7(null);const f=window.open(t||"",o,d);Qr(f,e,"popup-blocked");try{f.focus()}catch{}return new z7(f)}function Xme(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yme="__/auth/handler",Jme="emulator/auth/handler",Zme=encodeURIComponent("fac");async function $7(e,t,r,n,a,s){Qr(e.config.authDomain,e,"auth-domain-config-required"),Qr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:mg,eventId:a};if(t instanceof BY){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",Rfe(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(t instanceof m2){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await e._getAppCheckToken(),u=c?`#${Zme}=${encodeURIComponent(c)}`:"";return`${epe(e)}?${A2(o).slice(1)}${u}`}function epe({config:e}){return e.emulator?sD(e,Jme):`https://${e.authDomain}/${Yme}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="webStorageSupport";class tpe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PY,this._completeRedirectFn=_me,this._overrideRedirectResult=wme}async _openPopup(t,r,n,a){var i;uh((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await $7(t,r,n,ZI(),a);return Wme(t,s,uD())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await $7(t,r,n,ZI(),a);return ame(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(uh(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await Vme(t),n=new Nme(t);return r.register("authEvent",a=>(Qr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(dT,{type:dT},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[dT];s!==void 0&&r(!!s),Fd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Ime(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return CY()||xY()||oD()}}const rpe=tpe;var G7="@firebase/auth",K7="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class npe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ape(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function spe(e){lm(new lh("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Qr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_Y(e)},u=new y0e(n,a,s,c);return j0e(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),lm(new lh("auth-internal",t=>{const r=pg(t.getProvider("auth").getImmediate());return(n=>new npe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fu(G7,K7,ape(e)),Fu(G7,K7,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ipe=300,ope=nY("authIdTokenMaxAge")||ipe;let q7=null;const lpe=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>ope)return;const a=r==null?void 0:r.token;q7!==a&&(q7=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function VY(e=IN()){const t=f2(e,"auth");if(t.isInitialized())return t.getImmediate();const r=T0e(e,{popupRedirectResolver:rpe,persistence:[fme,tme,PY]}),n=nY("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=lpe(s.toString());Y0e(r,i,()=>i(r.currentUser)),X0e(r,o=>i(o))}}const a=tY("auth");return a&&I0e(r,`http://${a}`),r}function cpe(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}w0e({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=UA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",cpe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});spe("Browser");var upe="firebase",dpe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fu(upe,dpe,"app");var W7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X0,zY;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,_){function B(){}B.prototype=_.prototype,E.D=_.prototype,E.prototype=new B,E.prototype.constructor=E,E.C=function(P,D,I){for(var U=Array(arguments.length-2),R=2;R<arguments.length;R++)U[R-2]=arguments[R];return _.prototype[D].apply(P,U)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,_,B){B||(B=0);var P=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)P[D]=_.charCodeAt(B++)|_.charCodeAt(B++)<<8|_.charCodeAt(B++)<<16|_.charCodeAt(B++)<<24;else for(D=0;16>D;++D)P[D]=_[B++]|_[B++]<<8|_[B++]<<16|_[B++]<<24;_=E.g[0],B=E.g[1],D=E.g[2];var I=E.g[3],U=_+(I^B&(D^I))+P[0]+3614090360&4294967295;_=B+(U<<7&4294967295|U>>>25),U=I+(D^_&(B^D))+P[1]+3905402710&4294967295,I=_+(U<<12&4294967295|U>>>20),U=D+(B^I&(_^B))+P[2]+606105819&4294967295,D=I+(U<<17&4294967295|U>>>15),U=B+(_^D&(I^_))+P[3]+3250441966&4294967295,B=D+(U<<22&4294967295|U>>>10),U=_+(I^B&(D^I))+P[4]+4118548399&4294967295,_=B+(U<<7&4294967295|U>>>25),U=I+(D^_&(B^D))+P[5]+1200080426&4294967295,I=_+(U<<12&4294967295|U>>>20),U=D+(B^I&(_^B))+P[6]+2821735955&4294967295,D=I+(U<<17&4294967295|U>>>15),U=B+(_^D&(I^_))+P[7]+4249261313&4294967295,B=D+(U<<22&4294967295|U>>>10),U=_+(I^B&(D^I))+P[8]+1770035416&4294967295,_=B+(U<<7&4294967295|U>>>25),U=I+(D^_&(B^D))+P[9]+2336552879&4294967295,I=_+(U<<12&4294967295|U>>>20),U=D+(B^I&(_^B))+P[10]+4294925233&4294967295,D=I+(U<<17&4294967295|U>>>15),U=B+(_^D&(I^_))+P[11]+2304563134&4294967295,B=D+(U<<22&4294967295|U>>>10),U=_+(I^B&(D^I))+P[12]+1804603682&4294967295,_=B+(U<<7&4294967295|U>>>25),U=I+(D^_&(B^D))+P[13]+4254626195&4294967295,I=_+(U<<12&4294967295|U>>>20),U=D+(B^I&(_^B))+P[14]+2792965006&4294967295,D=I+(U<<17&4294967295|U>>>15),U=B+(_^D&(I^_))+P[15]+1236535329&4294967295,B=D+(U<<22&4294967295|U>>>10),U=_+(D^I&(B^D))+P[1]+4129170786&4294967295,_=B+(U<<5&4294967295|U>>>27),U=I+(B^D&(_^B))+P[6]+3225465664&4294967295,I=_+(U<<9&4294967295|U>>>23),U=D+(_^B&(I^_))+P[11]+643717713&4294967295,D=I+(U<<14&4294967295|U>>>18),U=B+(I^_&(D^I))+P[0]+3921069994&4294967295,B=D+(U<<20&4294967295|U>>>12),U=_+(D^I&(B^D))+P[5]+3593408605&4294967295,_=B+(U<<5&4294967295|U>>>27),U=I+(B^D&(_^B))+P[10]+38016083&4294967295,I=_+(U<<9&4294967295|U>>>23),U=D+(_^B&(I^_))+P[15]+3634488961&4294967295,D=I+(U<<14&4294967295|U>>>18),U=B+(I^_&(D^I))+P[4]+3889429448&4294967295,B=D+(U<<20&4294967295|U>>>12),U=_+(D^I&(B^D))+P[9]+568446438&4294967295,_=B+(U<<5&4294967295|U>>>27),U=I+(B^D&(_^B))+P[14]+3275163606&4294967295,I=_+(U<<9&4294967295|U>>>23),U=D+(_^B&(I^_))+P[3]+4107603335&4294967295,D=I+(U<<14&4294967295|U>>>18),U=B+(I^_&(D^I))+P[8]+1163531501&4294967295,B=D+(U<<20&4294967295|U>>>12),U=_+(D^I&(B^D))+P[13]+2850285829&4294967295,_=B+(U<<5&4294967295|U>>>27),U=I+(B^D&(_^B))+P[2]+4243563512&4294967295,I=_+(U<<9&4294967295|U>>>23),U=D+(_^B&(I^_))+P[7]+1735328473&4294967295,D=I+(U<<14&4294967295|U>>>18),U=B+(I^_&(D^I))+P[12]+2368359562&4294967295,B=D+(U<<20&4294967295|U>>>12),U=_+(B^D^I)+P[5]+4294588738&4294967295,_=B+(U<<4&4294967295|U>>>28),U=I+(_^B^D)+P[8]+2272392833&4294967295,I=_+(U<<11&4294967295|U>>>21),U=D+(I^_^B)+P[11]+1839030562&4294967295,D=I+(U<<16&4294967295|U>>>16),U=B+(D^I^_)+P[14]+4259657740&4294967295,B=D+(U<<23&4294967295|U>>>9),U=_+(B^D^I)+P[1]+2763975236&4294967295,_=B+(U<<4&4294967295|U>>>28),U=I+(_^B^D)+P[4]+1272893353&4294967295,I=_+(U<<11&4294967295|U>>>21),U=D+(I^_^B)+P[7]+4139469664&4294967295,D=I+(U<<16&4294967295|U>>>16),U=B+(D^I^_)+P[10]+3200236656&4294967295,B=D+(U<<23&4294967295|U>>>9),U=_+(B^D^I)+P[13]+681279174&4294967295,_=B+(U<<4&4294967295|U>>>28),U=I+(_^B^D)+P[0]+3936430074&4294967295,I=_+(U<<11&4294967295|U>>>21),U=D+(I^_^B)+P[3]+3572445317&4294967295,D=I+(U<<16&4294967295|U>>>16),U=B+(D^I^_)+P[6]+76029189&4294967295,B=D+(U<<23&4294967295|U>>>9),U=_+(B^D^I)+P[9]+3654602809&4294967295,_=B+(U<<4&4294967295|U>>>28),U=I+(_^B^D)+P[12]+3873151461&4294967295,I=_+(U<<11&4294967295|U>>>21),U=D+(I^_^B)+P[15]+530742520&4294967295,D=I+(U<<16&4294967295|U>>>16),U=B+(D^I^_)+P[2]+3299628645&4294967295,B=D+(U<<23&4294967295|U>>>9),U=_+(D^(B|~I))+P[0]+4096336452&4294967295,_=B+(U<<6&4294967295|U>>>26),U=I+(B^(_|~D))+P[7]+1126891415&4294967295,I=_+(U<<10&4294967295|U>>>22),U=D+(_^(I|~B))+P[14]+2878612391&4294967295,D=I+(U<<15&4294967295|U>>>17),U=B+(I^(D|~_))+P[5]+4237533241&4294967295,B=D+(U<<21&4294967295|U>>>11),U=_+(D^(B|~I))+P[12]+1700485571&4294967295,_=B+(U<<6&4294967295|U>>>26),U=I+(B^(_|~D))+P[3]+2399980690&4294967295,I=_+(U<<10&4294967295|U>>>22),U=D+(_^(I|~B))+P[10]+4293915773&4294967295,D=I+(U<<15&4294967295|U>>>17),U=B+(I^(D|~_))+P[1]+2240044497&4294967295,B=D+(U<<21&4294967295|U>>>11),U=_+(D^(B|~I))+P[8]+1873313359&4294967295,_=B+(U<<6&4294967295|U>>>26),U=I+(B^(_|~D))+P[15]+4264355552&4294967295,I=_+(U<<10&4294967295|U>>>22),U=D+(_^(I|~B))+P[6]+2734768916&4294967295,D=I+(U<<15&4294967295|U>>>17),U=B+(I^(D|~_))+P[13]+1309151649&4294967295,B=D+(U<<21&4294967295|U>>>11),U=_+(D^(B|~I))+P[4]+4149444226&4294967295,_=B+(U<<6&4294967295|U>>>26),U=I+(B^(_|~D))+P[11]+3174756917&4294967295,I=_+(U<<10&4294967295|U>>>22),U=D+(_^(I|~B))+P[2]+718787259&4294967295,D=I+(U<<15&4294967295|U>>>17),U=B+(I^(D|~_))+P[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(D+(U<<21&4294967295|U>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+I&4294967295}n.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var B=_-this.blockSize,P=this.B,D=this.h,I=0;I<_;){if(D==0)for(;I<=B;)a(this,E,I),I+=this.blockSize;if(typeof E=="string"){for(;I<_;)if(P[D++]=E.charCodeAt(I++),D==this.blockSize){a(this,P),D=0;break}}else for(;I<_;)if(P[D++]=E[I++],D==this.blockSize){a(this,P),D=0;break}}this.h=D,this.o+=_},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var B=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=B&255,B/=256;for(this.u(E),E=Array(16),_=B=0;4>_;++_)for(var P=0;32>P;P+=8)E[B++]=this.g[_]>>>P&255;return E};function s(E,_){var B=o;return Object.prototype.hasOwnProperty.call(B,E)?B[E]:B[E]=_(E)}function i(E,_){this.h=_;for(var B=[],P=!0,D=E.length-1;0<=D;D--){var I=E[D]|0;P&&I==_||(B[D]=I,P=!1)}this.g=B}var o={};function c(E){return-128<=E&&128>E?s(E,function(_){return new i([_|0],0>_?-1:0)}):new i([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return b(u(-E));for(var _=[],B=1,P=0;E>=B;P++)_[P]=E/B|0,B*=4294967296;return new i(_,0)}function d(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return b(d(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(_,8)),P=f,D=0;D<E.length;D+=8){var I=Math.min(8,E.length-D),U=parseInt(E.substring(D,D+I),_);8>I?(I=u(Math.pow(_,I)),P=P.j(I).add(u(U))):(P=P.j(B),P=P.add(u(U)))}return P}var f=c(0),h=c(1),p=c(16777216);e=i.prototype,e.m=function(){if(x(this))return-b(this).m();for(var E=0,_=1,B=0;B<this.g.length;B++){var P=this.i(B);E+=(0<=P?P:4294967296+P)*_,_*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(g(this))return"0";if(x(this))return"-"+b(this).toString(E);for(var _=u(Math.pow(E,6)),B=this,P="";;){var D=j(B,_).g;B=y(B,D.j(_));var I=((0<B.g.length?B.g[0]:B.h)>>>0).toString(E);if(B=D,g(B))return I+P;for(;6>I.length;)I="0"+I;P=I+P}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function g(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function x(E){return E.h==-1}e.l=function(E){return E=y(this,E),x(E)?-1:g(E)?0:1};function b(E){for(var _=E.g.length,B=[],P=0;P<_;P++)B[P]=~E.g[P];return new i(B,~E.h).add(h)}e.abs=function(){return x(this)?b(this):this},e.add=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],P=0,D=0;D<=_;D++){var I=P+(this.i(D)&65535)+(E.i(D)&65535),U=(I>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);P=U>>>16,I&=65535,U&=65535,B[D]=U<<16|I}return new i(B,B[B.length-1]&-2147483648?-1:0)};function y(E,_){return E.add(b(_))}e.j=function(E){if(g(this)||g(E))return f;if(x(this))return x(E)?b(this).j(b(E)):b(b(this).j(E));if(x(E))return b(this.j(b(E)));if(0>this.l(p)&&0>E.l(p))return u(this.m()*E.m());for(var _=this.g.length+E.g.length,B=[],P=0;P<2*_;P++)B[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<E.g.length;D++){var I=this.i(P)>>>16,U=this.i(P)&65535,R=E.i(D)>>>16,Y=E.i(D)&65535;B[2*P+2*D]+=U*Y,w(B,2*P+2*D),B[2*P+2*D+1]+=I*Y,w(B,2*P+2*D+1),B[2*P+2*D+1]+=U*R,w(B,2*P+2*D+1),B[2*P+2*D+2]+=I*R,w(B,2*P+2*D+2)}for(P=0;P<_;P++)B[P]=B[2*P+1]<<16|B[2*P];for(P=_;P<2*_;P++)B[P]=0;return new i(B,0)};function w(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function S(E,_){this.g=E,this.h=_}function j(E,_){if(g(_))throw Error("division by zero");if(g(E))return new S(f,f);if(x(E))return _=j(b(E),_),new S(b(_.g),b(_.h));if(x(_))return _=j(E,b(_)),new S(b(_.g),_.h);if(30<E.g.length){if(x(E)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var B=h,P=_;0>=P.l(E);)B=N(B),P=N(P);var D=F(B,1),I=F(P,1);for(P=F(P,2),B=F(B,2);!g(P);){var U=I.add(P);0>=U.l(E)&&(D=D.add(B),I=U),P=F(P,1),B=F(B,1)}return _=y(E,D.j(_)),new S(D,_)}for(D=f;0<=E.l(_);){for(B=Math.max(1,Math.floor(E.m()/_.m())),P=Math.ceil(Math.log(B)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),I=u(B),U=I.j(_);x(U)||0<U.l(E);)B-=P,I=u(B),U=I.j(_);g(I)&&(I=h),D=D.add(I),E=y(E,U)}return new S(D,E)}e.A=function(E){return j(this,E).h},e.and=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],P=0;P<_;P++)B[P]=this.i(P)&E.i(P);return new i(B,this.h&E.h)},e.or=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],P=0;P<_;P++)B[P]=this.i(P)|E.i(P);return new i(B,this.h|E.h)},e.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],P=0;P<_;P++)B[P]=this.i(P)^E.i(P);return new i(B,this.h^E.h)};function N(E){for(var _=E.g.length+1,B=[],P=0;P<_;P++)B[P]=E.i(P)<<1|E.i(P-1)>>>31;return new i(B,E.h)}function F(E,_){var B=_>>5;_%=32;for(var P=E.g.length-B,D=[],I=0;I<P;I++)D[I]=0<_?E.i(I+B)>>>_|E.i(I+B+1)<<32-_:E.i(I+B);return new i(D,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,zY=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,X0=i}).apply(typeof W7<"u"?W7:typeof self<"u"?self:typeof window<"u"?window:{});var aC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $Y,Ay,GY,P_,n6,KY,qY,WY;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,ee,ie){return O==Array.prototype||O==Object.prototype||(O[ee]=ie.value),O};function r(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof aC=="object"&&aC];for(var ee=0;ee<O.length;++ee){var ie=O[ee];if(ie&&ie.Math==Math)return ie}throw Error("Cannot find global object")}var n=r(this);function a(O,ee){if(ee)e:{var ie=n;O=O.split(".");for(var ve=0;ve<O.length-1;ve++){var ze=O[ve];if(!(ze in ie))break e;ie=ie[ze]}O=O[O.length-1],ve=ie[O],ee=ee(ve),ee!=ve&&ee!=null&&t(ie,O,{configurable:!0,writable:!0,value:ee})}}function s(O,ee){O instanceof String&&(O+="");var ie=0,ve=!1,ze={next:function(){if(!ve&&ie<O.length){var it=ie++;return{value:ee(it,O[it]),done:!1}}return ve=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(O){return O||function(){return s(this,function(ee,ie){return ie})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(O){var ee=typeof O;return ee=ee!="object"?ee:O?Array.isArray(O)?"array":ee:"null",ee=="array"||ee=="object"&&typeof O.length=="number"}function u(O){var ee=typeof O;return ee=="object"&&O!=null||ee=="function"}function d(O,ee,ie){return O.call.apply(O.bind,arguments)}function f(O,ee,ie){if(!O)throw Error();if(2<arguments.length){var ve=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,ve),O.apply(ee,ze)}}return function(){return O.apply(ee,arguments)}}function h(O,ee,ie){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function p(O,ee){var ie=Array.prototype.slice.call(arguments,1);return function(){var ve=ie.slice();return ve.push.apply(ve,arguments),O.apply(this,ve)}}function g(O,ee){function ie(){}ie.prototype=ee.prototype,O.aa=ee.prototype,O.prototype=new ie,O.prototype.constructor=O,O.Qb=function(ve,ze,it){for(var Ut=Array(arguments.length-2),Ir=2;Ir<arguments.length;Ir++)Ut[Ir-2]=arguments[Ir];return ee.prototype[ze].apply(ve,Ut)}}function x(O){const ee=O.length;if(0<ee){const ie=Array(ee);for(let ve=0;ve<ee;ve++)ie[ve]=O[ve];return ie}return[]}function b(O,ee){for(let ie=1;ie<arguments.length;ie++){const ve=arguments[ie];if(c(ve)){const ze=O.length||0,it=ve.length||0;O.length=ze+it;for(let Ut=0;Ut<it;Ut++)O[ze+Ut]=ve[Ut]}else O.push(ve)}}class y{constructor(ee,ie){this.i=ee,this.j=ie,this.h=0,this.g=null}get(){let ee;return 0<this.h?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function w(O){return/^[\s\xa0]*$/.test(O)}function S(){var O=o.navigator;return O&&(O=O.userAgent)?O:""}function j(O){return j[" "](O),O}j[" "]=function(){};var N=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function F(O,ee,ie){for(const ve in O)ee.call(ie,O[ve],ve,O)}function E(O,ee){for(const ie in O)ee.call(void 0,O[ie],ie,O)}function _(O){const ee={};for(const ie in O)ee[ie]=O[ie];return ee}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(O,ee){let ie,ve;for(let ze=1;ze<arguments.length;ze++){ve=arguments[ze];for(ie in ve)O[ie]=ve[ie];for(let it=0;it<B.length;it++)ie=B[it],Object.prototype.hasOwnProperty.call(ve,ie)&&(O[ie]=ve[ie])}}function D(O){var ee=1;O=O.split(":");const ie=[];for(;0<ee&&O.length;)ie.push(O.shift()),ee--;return O.length&&ie.push(O.join(":")),ie}function I(O){o.setTimeout(()=>{throw O},0)}function U(){var O=z;let ee=null;return O.g&&(ee=O.g,O.g=O.g.next,O.g||(O.h=null),ee.next=null),ee}class R{constructor(){this.h=this.g=null}add(ee,ie){const ve=Y.get();ve.set(ee,ie),this.h?this.h.next=ve:this.g=ve,this.h=ve}}var Y=new y(()=>new H,O=>O.reset());class H{constructor(){this.next=this.g=this.h=null}set(ee,ie){this.h=ee,this.g=ie,this.next=null}reset(){this.next=this.g=this.h=null}}let X,V=!1,z=new R,q=()=>{const O=o.Promise.resolve(void 0);X=()=>{O.then(ne)}};var ne=()=>{for(var O;O=U();){try{O.h.call(O.g)}catch(ie){I(ie)}var ee=Y;ee.j(O),100>ee.h&&(ee.h++,O.next=ee.g,ee.g=O)}V=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(O,ee){this.type=O,this.g=this.target=ee,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var O=!1,ee=Object.defineProperty({},"passive",{get:function(){O=!0}});try{const ie=()=>{};o.addEventListener("test",ie,ee),o.removeEventListener("test",ie,ee)}catch{}return O}();function re(O,ee){if(W.call(this,O?O.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,O){var ie=this.type=O.type,ve=O.changedTouches&&O.changedTouches.length?O.changedTouches[0]:null;if(this.target=O.target||O.srcElement,this.g=ee,ee=O.relatedTarget){if(N){e:{try{j(ee.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(ee=null)}}else ie=="mouseover"?ee=O.fromElement:ie=="mouseout"&&(ee=O.toElement);this.relatedTarget=ee,ve?(this.clientX=ve.clientX!==void 0?ve.clientX:ve.pageX,this.clientY=ve.clientY!==void 0?ve.clientY:ve.pageY,this.screenX=ve.screenX||0,this.screenY=ve.screenY||0):(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0),this.button=O.button,this.key=O.key||"",this.ctrlKey=O.ctrlKey,this.altKey=O.altKey,this.shiftKey=O.shiftKey,this.metaKey=O.metaKey,this.pointerId=O.pointerId||0,this.pointerType=typeof O.pointerType=="string"?O.pointerType:ae[O.pointerType]||"",this.state=O.state,this.i=O,O.defaultPrevented&&re.aa.h.call(this)}}g(re,W);var ae={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var O=this.i;O.preventDefault?O.preventDefault():O.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),oe=0;function le(O,ee,ie,ve,ze){this.listener=O,this.proxy=null,this.src=ee,this.type=ie,this.capture=!!ve,this.ha=ze,this.key=++oe,this.da=this.fa=!1}function pe(O){O.da=!0,O.listener=null,O.proxy=null,O.src=null,O.ha=null}function Be(O){this.src=O,this.g={},this.h=0}Be.prototype.add=function(O,ee,ie,ve,ze){var it=O.toString();O=this.g[it],O||(O=this.g[it]=[],this.h++);var Ut=_e(O,ee,ve,ze);return-1<Ut?(ee=O[Ut],ie||(ee.fa=!1)):(ee=new le(ee,this.src,it,!!ve,ze),ee.fa=ie,O.push(ee)),ee};function te(O,ee){var ie=ee.type;if(ie in O.g){var ve=O.g[ie],ze=Array.prototype.indexOf.call(ve,ee,void 0),it;(it=0<=ze)&&Array.prototype.splice.call(ve,ze,1),it&&(pe(ee),O.g[ie].length==0&&(delete O.g[ie],O.h--))}}function _e(O,ee,ie,ve){for(var ze=0;ze<O.length;++ze){var it=O[ze];if(!it.da&&it.listener==ee&&it.capture==!!ie&&it.ha==ve)return ze}return-1}var De="closure_lm_"+(1e6*Math.random()|0),Ne={};function fe(O,ee,ie,ve,ze){if(Array.isArray(ee)){for(var it=0;it<ee.length;it++)fe(O,ee[it],ie,ve,ze);return null}return ie=lt(ie),O&&O[ce]?O.K(ee,ie,u(ve)?!!ve.capture:!1,ze):Ie(O,ee,ie,!1,ve,ze)}function Ie(O,ee,ie,ve,ze,it){if(!ee)throw Error("Invalid event type");var Ut=u(ze)?!!ze.capture:!!ze,Ir=qe(O);if(Ir||(O[De]=Ir=new Be(O)),ie=Ir.add(ee,ie,ve,Ut,it),ie.proxy)return ie;if(ve=Ue(),ie.proxy=ve,ve.src=O,ve.listener=ie,O.addEventListener)Z||(ze=Ut),ze===void 0&&(ze=!1),O.addEventListener(ee.toString(),ve,ze);else if(O.attachEvent)O.attachEvent(Oe(ee.toString()),ve);else if(O.addListener&&O.removeListener)O.addListener(ve);else throw Error("addEventListener and attachEvent are unavailable.");return ie}function Ue(){function O(ie){return ee.call(O.src,O.listener,ie)}const ee=Re;return O}function Ye(O,ee,ie,ve,ze){if(Array.isArray(ee))for(var it=0;it<ee.length;it++)Ye(O,ee[it],ie,ve,ze);else ve=u(ve)?!!ve.capture:!!ve,ie=lt(ie),O&&O[ce]?(O=O.i,ee=String(ee).toString(),ee in O.g&&(it=O.g[ee],ie=_e(it,ie,ve,ze),-1<ie&&(pe(it[ie]),Array.prototype.splice.call(it,ie,1),it.length==0&&(delete O.g[ee],O.h--)))):O&&(O=qe(O))&&(ee=O.g[ee.toString()],O=-1,ee&&(O=_e(ee,ie,ve,ze)),(ie=-1<O?ee[O]:null)&&ye(ie))}function ye(O){if(typeof O!="number"&&O&&!O.da){var ee=O.src;if(ee&&ee[ce])te(ee.i,O);else{var ie=O.type,ve=O.proxy;ee.removeEventListener?ee.removeEventListener(ie,ve,O.capture):ee.detachEvent?ee.detachEvent(Oe(ie),ve):ee.addListener&&ee.removeListener&&ee.removeListener(ve),(ie=qe(ee))?(te(ie,O),ie.h==0&&(ie.src=null,ee[De]=null)):pe(O)}}}function Oe(O){return O in Ne?Ne[O]:Ne[O]="on"+O}function Re(O,ee){if(O.da)O=!0;else{ee=new re(ee,this);var ie=O.listener,ve=O.ha||O.src;O.fa&&ye(O),O=ie.call(ve,ee)}return O}function qe(O){return O=O[De],O instanceof Be?O:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function lt(O){return typeof O=="function"?O:(O[Ze]||(O[Ze]=function(ee){return O.handleEvent(ee)}),O[Ze])}function mt(){M.call(this),this.i=new Be(this),this.M=this,this.F=null}g(mt,M),mt.prototype[ce]=!0,mt.prototype.removeEventListener=function(O,ee,ie,ve){Ye(this,O,ee,ie,ve)};function It(O,ee){var ie,ve=O.F;if(ve)for(ie=[];ve;ve=ve.F)ie.push(ve);if(O=O.M,ve=ee.type||ee,typeof ee=="string")ee=new W(ee,O);else if(ee instanceof W)ee.target=ee.target||O;else{var ze=ee;ee=new W(ve,O),P(ee,ze)}if(ze=!0,ie)for(var it=ie.length-1;0<=it;it--){var Ut=ee.g=ie[it];ze=Mt(Ut,ve,!0,ee)&&ze}if(Ut=ee.g=O,ze=Mt(Ut,ve,!0,ee)&&ze,ze=Mt(Ut,ve,!1,ee)&&ze,ie)for(it=0;it<ie.length;it++)Ut=ee.g=ie[it],ze=Mt(Ut,ve,!1,ee)&&ze}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var O=this.i,ee;for(ee in O.g){for(var ie=O.g[ee],ve=0;ve<ie.length;ve++)pe(ie[ve]);delete O.g[ee],O.h--}}this.F=null},mt.prototype.K=function(O,ee,ie,ve){return this.i.add(String(O),ee,!1,ie,ve)},mt.prototype.L=function(O,ee,ie,ve){return this.i.add(String(O),ee,!0,ie,ve)};function Mt(O,ee,ie,ve){if(ee=O.i.g[String(ee)],!ee)return!0;ee=ee.concat();for(var ze=!0,it=0;it<ee.length;++it){var Ut=ee[it];if(Ut&&!Ut.da&&Ut.capture==ie){var Ir=Ut.listener,bn=Ut.ha||Ut.src;Ut.fa&&te(O.i,Ut),ze=Ir.call(bn,ve)!==!1&&ze}}return ze&&!ve.defaultPrevented}function Pt(O,ee,ie){if(typeof O=="function")ie&&(O=h(O,ie));else if(O&&typeof O.handleEvent=="function")O=h(O.handleEvent,O);else throw Error("Invalid listener argument");return 2147483647<Number(ee)?-1:o.setTimeout(O,ee||0)}function Qt(O){O.g=Pt(()=>{O.g=null,O.i&&(O.i=!1,Qt(O))},O.l);const ee=O.h;O.h=null,O.m.apply(null,ee)}class yt extends M{constructor(ee,ie){super(),this.m=ee,this.l=ie,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(O){M.call(this),this.h=O,this.g={}}g(kr,M);var er=[];function an(O){F(O.g,function(ee,ie){this.g.hasOwnProperty(ie)&&ye(ee)},O),O.g={}}kr.prototype.N=function(){kr.aa.N.call(this),an(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=o.JSON.stringify,Vr=o.JSON.parse,jn=class{stringify(O){return o.JSON.stringify(O,void 0)}parse(O){return o.JSON.parse(O,void 0)}};function Or(){}Or.prototype.h=null;function As(O){return O.h||(O.h=O.i())}function hn(){}var oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ba(){W.call(this,"d")}g(Ba,W);function en(){W.call(this,"c")}g(en,W);var mr={},et=null;function gt(){return et=et||new mt}mr.La="serverreachability";function Je(O){W.call(this,mr.La,O)}g(Je,W);function xt(O){const ee=gt();It(ee,new Je(ee))}mr.STAT_EVENT="statevent";function wt(O,ee){W.call(this,mr.STAT_EVENT,O),this.stat=ee}g(wt,W);function bt(O){const ee=gt();It(ee,new wt(ee,O))}mr.Ma="timingevent";function nr(O,ee){W.call(this,mr.Ma,O),this.size=ee}g(nr,W);function gr(O,ee){if(typeof O!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){O()},ee)}function Kr(){this.g=!0}Kr.prototype.xa=function(){this.g=!1};function Yr(O,ee,ie,ve,ze,it){O.info(function(){if(O.g)if(it)for(var Ut="",Ir=it.split("&"),bn=0;bn<Ir.length;bn++){var qr=Ir[bn].split("=");if(1<qr.length){var Vn=qr[0];qr=qr[1];var ea=Vn.split("_");Ut=2<=ea.length&&ea[1]=="type"?Ut+(Vn+"="+qr+"&"):Ut+(Vn+"=redacted&")}}else Ut=null;else Ut=it;return"XMLHTTP REQ ("+ve+") [attempt "+ze+"]: "+ee+`
`+ie+`
`+Ut})}function Gr(O,ee,ie,ve,ze,it,Ut){O.info(function(){return"XMLHTTP RESP ("+ve+") [ attempt "+ze+"]: "+ee+`
`+ie+`
`+it+" "+Ut})}function he(O,ee,ie,ve){O.info(function(){return"XMLHTTP TEXT ("+ee+"): "+Ce(O,ie)+(ve?" "+ve:"")})}function Te(O,ee){O.info(function(){return"TIMEOUT: "+ee})}Kr.prototype.info=function(){};function Ce(O,ee){if(!O.g)return ee;if(!ee)return null;try{var ie=JSON.parse(ee);if(ie){for(O=0;O<ie.length;O++)if(Array.isArray(ie[O])){var ve=ie[O];if(!(2>ve.length)){var ze=ve[1];if(Array.isArray(ze)&&!(1>ze.length)){var it=ze[0];if(it!="noop"&&it!="stop"&&it!="close")for(var Ut=1;Ut<ze.length;Ut++)ze[Ut]=""}}}}return _r(ie)}catch{return ee}}var we={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Se={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},je;function Xe(){}g(Xe,Or),Xe.prototype.g=function(){return new XMLHttpRequest},Xe.prototype.i=function(){return{}},je=new Xe;function dt(O,ee,ie,ve){this.j=O,this.i=ee,this.l=ie,this.R=ve||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var rt={},st={};function Ft(O,ee,ie){O.L=1,O.v=Gc(xi(ee)),O.m=ie,O.P=!0,Vt(O,null)}function Vt(O,ee){O.F=Date.now(),zt(O),O.A=xi(O.v);var ie=O.A,ve=O.R;Array.isArray(ve)||(ve=[String(ve)]),jr(ie.i,"t",ve),O.C=0,ie=O.j.J,O.h=new $e,O.g=Ae(O.j,ie?ee:null,!O.m),0<O.O&&(O.M=new yt(h(O.Y,O,O.g),O.O)),ee=O.U,ie=O.g,ve=O.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(er[0]=ze.toString()),ze=er);for(var it=0;it<ze.length;it++){var Ut=fe(ie,ze[it],ve||ee.handleEvent,!1,ee.h||ee);if(!Ut)break;ee.g[Ut.key]=Ut}ee=O.H?_(O.H):{},O.m?(O.u||(O.u="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",O.g.ea(O.A,O.u,O.m,ee)):(O.u="GET",O.g.ea(O.A,O.u,null,ee)),xt(),Yr(O.i,O.u,O.A,O.l,O.R,O.m)}dt.prototype.ca=function(O){O=O.target;const ee=this.M;ee&&ps(O)==3?ee.j():this.Y(O)},dt.prototype.Y=function(O){try{if(O==this.g)e:{const ea=ps(this.g);var ee=this.g.Ba();const Tl=this.g.Z();if(!(3>ea)&&(ea!=3||this.g&&(this.h.h||this.g.oa()||Mh(this.g)))){this.J||ea!=4||ee==7||(ee==8||0>=Tl?xt(3):xt(2)),sn(this);var ie=this.g.Z();this.X=ie;t:if(Yt(this)){var ve=Mh(this.g);O="";var ze=ve.length,it=ps(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),on(this);var Ut="";break t}this.h.i=new o.TextDecoder}for(ee=0;ee<ze;ee++)this.h.h=!0,O+=this.h.i.decode(ve[ee],{stream:!(it&&ee==ze-1)});ve.length=0,this.h.g+=O,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=ie==200,Gr(this.i,this.u,this.A,this.l,this.R,ea,ie),this.o){if(this.T&&!this.K){t:{if(this.g){var Ir,bn=this.g;if((Ir=bn.g?bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ir)){var qr=Ir;break t}}qr=null}if(ie=qr)he(this.i,this.l,ie,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fs(this,ie);else{this.o=!1,this.s=3,bt(12),An(this),on(this);break e}}if(this.P){ie=!0;let es;for(;!this.J&&this.C<Ut.length;)if(es=Ht(this,Ut),es==st){ea==4&&(this.s=4,bt(14),ie=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(es==rt){this.s=4,bt(15),he(this.i,this.l,Ut,"[Invalid Chunk]"),ie=!1;break}else he(this.i,this.l,es,null),fs(this,es);if(Yt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ea!=4||Ut.length!=0||this.h.h||(this.s=1,bt(16),ie=!1),this.o=this.o&&ie,!ie)he(this.i,this.l,Ut,"[Invalid Chunked Response]"),An(this),on(this);else if(0<Ut.length&&!this.W){this.W=!0;var Vn=this.j;Vn.g==this&&Vn.ba&&!Vn.M&&(Vn.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),Jc(Vn),Vn.M=!0,bt(11))}}else he(this.i,this.l,Ut,null),fs(this,Ut);ea==4&&An(this),this.o&&!this.J&&(ea==4?Zc(this.j,this):(this.o=!1,zt(this)))}else Wc(this.g),ie==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),An(this),on(this)}}}catch{}finally{}};function Yt(O){return O.g?O.u=="GET"&&O.L!=2&&O.j.Ca:!1}function Ht(O,ee){var ie=O.C,ve=ee.indexOf(`
`,ie);return ve==-1?st:(ie=Number(ee.substring(ie,ve)),isNaN(ie)?rt:(ve+=1,ve+ie>ee.length?st:(ee=ee.slice(ve,ve+ie),O.C=ve+ie,ee)))}dt.prototype.cancel=function(){this.J=!0,An(this)};function zt(O){O.S=Date.now()+O.I,Sr(O,O.I)}function Sr(O,ee){if(O.B!=null)throw Error("WatchDog timer not null");O.B=gr(h(O.ba,O),ee)}function sn(O){O.B&&(o.clearTimeout(O.B),O.B=null)}dt.prototype.ba=function(){this.B=null;const O=Date.now();0<=O-this.S?(Te(this.i,this.A),this.L!=2&&(xt(),bt(17)),An(this),this.s=2,on(this)):Sr(this,this.S-O)};function on(O){O.j.G==0||O.J||Zc(O.j,O)}function An(O){sn(O);var ee=O.M;ee&&typeof ee.ma=="function"&&ee.ma(),O.M=null,an(O.U),O.g&&(ee=O.g,O.g=null,ee.abort(),ee.ma())}function fs(O,ee){try{var ie=O.j;if(ie.G!=0&&(ie.g==O||pi(ie.h,O))){if(!O.K&&pi(ie.h,O)&&ie.G==3){try{var ve=ie.Da.g.parse(ee)}catch{ve=null}if(Array.isArray(ve)&&ve.length==3){var ze=ve;if(ze[0]==0){e:if(!ie.u){if(ie.g)if(ie.g.F+3e3<O.F)lc(ie),Gd(ie);else break e;Ku(ie),bt(18)}}else ie.za=ze[1],0<ie.za-ie.T&&37500>ze[2]&&ie.F&&ie.v==0&&!ie.C&&(ie.C=gr(h(ie.Za,ie),6e3));if(1>=js(ie.h)&&ie.ca){try{ie.ca()}catch{}ie.ca=void 0}}else Oi(ie,11)}else if((O.K||ie.g==O)&&lc(ie),!w(ee))for(ze=ie.Da.g.parse(ee),ee=0;ee<ze.length;ee++){let qr=ze[ee];if(ie.T=qr[0],qr=qr[1],ie.G==2)if(qr[0]=="c"){ie.K=qr[1],ie.ia=qr[2];const Vn=qr[3];Vn!=null&&(ie.la=Vn,ie.j.info("VER="+ie.la));const ea=qr[4];ea!=null&&(ie.Aa=ea,ie.j.info("SVER="+ie.Aa));const Tl=qr[5];Tl!=null&&typeof Tl=="number"&&0<Tl&&(ve=1.5*Tl,ie.L=ve,ie.j.info("backChannelRequestTimeoutMs_="+ve)),ve=ie;const es=O.g;if(es){const _o=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_o){var it=ve.h;it.g||_o.indexOf("spdy")==-1&&_o.indexOf("quic")==-1&&_o.indexOf("h2")==-1||(it.j=it.l,it.g=new Set,it.h&&(xa(it,it.h),it.h=null))}if(ve.D){const eu=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;eu&&(ve.ya=eu,Hn(ve.I,ve.D,eu))}}ie.G=3,ie.l&&ie.l.ua(),ie.ba&&(ie.R=Date.now()-O.F,ie.j.info("Handshake RTT: "+ie.R+"ms")),ve=ie;var Ut=O;if(ve.qa=K(ve,ve.J?ve.ia:null,ve.W),Ut.K){Zs(ve.h,Ut);var Ir=Ut,bn=ve.L;bn&&(Ir.I=bn),Ir.B&&(sn(Ir),zt(Ir)),ve.g=Ut}else qd(ve);0<ie.i.length&&Kd(ie)}else qr[0]!="stop"&&qr[0]!="close"||Oi(ie,7);else ie.G==3&&(qr[0]=="stop"||qr[0]=="close"?qr[0]=="stop"?Oi(ie,7):oc(ie):qr[0]!="noop"&&ie.l&&ie.l.ta(qr),ie.v=0)}}xt(4)}catch{}}var bo=class{constructor(O,ee){this.g=O,this.map=ee}};function hs(O){this.l=O||10,o.PerformanceNavigationTiming?(O=o.performance.getEntriesByType("navigation"),O=0<O.length&&(O[0].nextHopProtocol=="hq"||O[0].nextHopProtocol=="h2")):O=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=O?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Js(O){return O.h?!0:O.g?O.g.size>=O.j:!1}function js(O){return O.h?1:O.g?O.g.size:0}function pi(O,ee){return O.h?O.h==ee:O.g?O.g.has(ee):!1}function xa(O,ee){O.g?O.g.add(ee):O.h=ee}function Zs(O,ee){O.h&&O.h==ee?O.h=null:O.g&&O.g.has(ee)&&O.g.delete(ee)}hs.prototype.cancel=function(){if(this.i=Vd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const O of this.g.values())O.cancel();this.g.clear()}};function Vd(O){if(O.h!=null)return O.i.concat(O.h.D);if(O.g!=null&&O.g.size!==0){let ee=O.i;for(const ie of O.g.values())ee=ee.concat(ie.D);return ee}return x(O.i)}function Ph(O){if(O.V&&typeof O.V=="function")return O.V();if(typeof Map<"u"&&O instanceof Map||typeof Set<"u"&&O instanceof Set)return Array.from(O.values());if(typeof O=="string")return O.split("");if(c(O)){for(var ee=[],ie=O.length,ve=0;ve<ie;ve++)ee.push(O[ve]);return ee}ee=[],ie=0;for(ve in O)ee[ie++]=O[ve];return ee}function Vc(O){if(O.na&&typeof O.na=="function")return O.na();if(!O.V||typeof O.V!="function"){if(typeof Map<"u"&&O instanceof Map)return Array.from(O.keys());if(!(typeof Set<"u"&&O instanceof Set)){if(c(O)||typeof O=="string"){var ee=[];O=O.length;for(var ie=0;ie<O;ie++)ee.push(ie);return ee}ee=[],ie=0;for(const ve in O)ee[ie++]=ve;return ee}}}function nf(O,ee){if(O.forEach&&typeof O.forEach=="function")O.forEach(ee,void 0);else if(c(O)||typeof O=="string")Array.prototype.forEach.call(O,ee,void 0);else for(var ie=Vc(O),ve=Ph(O),ze=ve.length,it=0;it<ze;it++)ee.call(void 0,ve[it],ie&&ie[it],O)}var gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zd(O,ee){if(O){O=O.split("&");for(var ie=0;ie<O.length;ie++){var ve=O[ie].indexOf("="),ze=null;if(0<=ve){var it=O[ie].substring(0,ve);ze=O[ie].substring(ve+1)}else it=O[ie];ee(it,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function In(O){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,O instanceof In){this.h=O.h,zc(this,O.j),this.o=O.o,this.g=O.g,$c(this,O.s),this.l=O.l;var ee=O.i,ie=new Cl;ie.i=ee.i,ee.g&&(ie.g=new Map(ee.g),ie.h=ee.h),El(this,ie),this.m=O.m}else O&&(ee=String(O).match(gi))?(this.h=!1,zc(this,ee[1]||"",!0),this.o=yo(ee[2]||""),this.g=yo(ee[3]||"",!0),$c(this,ee[4]),this.l=yo(ee[5]||"",!0),El(this,ee[6]||"",!0),this.m=yo(ee[7]||"")):(this.h=!1,this.i=new Cl(null,this.h))}In.prototype.toString=function(){var O=[],ee=this.j;ee&&O.push(rc(ee,af,!0),":");var ie=this.g;return(ie||ee=="file")&&(O.push("//"),(ee=this.o)&&O.push(rc(ee,af,!0),"@"),O.push(encodeURIComponent(String(ie)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ie=this.s,ie!=null&&O.push(":",String(ie))),(ie=this.l)&&(this.g&&ie.charAt(0)!="/"&&O.push("/"),O.push(rc(ie,ie.charAt(0)=="/"?nc:sf,!0))),(ie=this.i.toString())&&O.push("?",ie),(ie=this.m)&&O.push("#",rc(ie,ac)),O.join("")};function xi(O){return new In(O)}function zc(O,ee,ie){O.j=ie?yo(ee,!0):ee,O.j&&(O.j=O.j.replace(/:$/,""))}function $c(O,ee){if(ee){if(ee=Number(ee),isNaN(ee)||0>ee)throw Error("Bad port number "+ee);O.s=ee}else O.s=null}function El(O,ee,ie){ee instanceof Cl?(O.i=ee,Lh(O.i,O.h)):(ie||(ee=rc(ee,$d)),O.i=new Cl(ee,O.h))}function Hn(O,ee,ie){O.i.set(ee,ie)}function Gc(O){return Hn(O,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),O}function yo(O,ee){return O?ee?decodeURI(O.replace(/%25/g,"%2525")):decodeURIComponent(O):""}function rc(O,ee,ie){return typeof O=="string"?(O=encodeURI(O).replace(ee,Rh),ie&&(O=O.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O):null}function Rh(O){return O=O.charCodeAt(0),"%"+(O>>4&15).toString(16)+(O&15).toString(16)}var af=/[#\/\?@]/g,sf=/[#\?:]/g,nc=/[#\?]/g,$d=/[#\?@]/g,ac=/#/g;function Cl(O,ee){this.h=this.g=null,this.i=O||null,this.j=!!ee}function la(O){O.g||(O.g=new Map,O.h=0,O.i&&zd(O.i,function(ee,ie){O.add(decodeURIComponent(ee.replace(/\+/g," ")),ie)}))}e=Cl.prototype,e.add=function(O,ee){la(this),this.i=null,O=Sl(this,O);var ie=this.g.get(O);return ie||this.g.set(O,ie=[]),ie.push(ee),this.h+=1,this};function sc(O,ee){la(O),ee=Sl(O,ee),O.g.has(ee)&&(O.i=null,O.h-=O.g.get(ee).length,O.g.delete(ee))}function _l(O,ee){return la(O),ee=Sl(O,ee),O.g.has(ee)}e.forEach=function(O,ee){la(this),this.g.forEach(function(ie,ve){ie.forEach(function(ze){O.call(ee,ze,ve,this)},this)},this)},e.na=function(){la(this);const O=Array.from(this.g.values()),ee=Array.from(this.g.keys()),ie=[];for(let ve=0;ve<ee.length;ve++){const ze=O[ve];for(let it=0;it<ze.length;it++)ie.push(ee[ve])}return ie},e.V=function(O){la(this);let ee=[];if(typeof O=="string")_l(this,O)&&(ee=ee.concat(this.g.get(Sl(this,O))));else{O=Array.from(this.g.values());for(let ie=0;ie<O.length;ie++)ee=ee.concat(O[ie])}return ee},e.set=function(O,ee){return la(this),this.i=null,O=Sl(this,O),_l(this,O)&&(this.h-=this.g.get(O).length),this.g.set(O,[ee]),this.h+=1,this},e.get=function(O,ee){return O?(O=this.V(O),0<O.length?String(O[0]):ee):ee};function jr(O,ee,ie){sc(O,ee),0<ie.length&&(O.i=null,O.g.set(Sl(O,ee),x(ie)),O.h+=ie.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const O=[],ee=Array.from(this.g.keys());for(var ie=0;ie<ee.length;ie++){var ve=ee[ie];const it=encodeURIComponent(String(ve)),Ut=this.V(ve);for(ve=0;ve<Ut.length;ve++){var ze=it;Ut[ve]!==""&&(ze+="="+encodeURIComponent(String(Ut[ve]))),O.push(ze)}}return this.i=O.join("&")};function Sl(O,ee){return ee=String(ee),O.j&&(ee=ee.toLowerCase()),ee}function Lh(O,ee){ee&&!O.j&&(la(O),O.i=null,O.g.forEach(function(ie,ve){var ze=ve.toLowerCase();ve!=ze&&(sc(this,ve),jr(this,ze,ie))},O)),O.j=ee}function ji(O,ee){const ie=new Kr;if(o.Image){const ve=new Image;ve.onload=p(to,ie,"TestLoadImage: loaded",!0,ee,ve),ve.onerror=p(to,ie,"TestLoadImage: error",!1,ee,ve),ve.onabort=p(to,ie,"TestLoadImage: abort",!1,ee,ve),ve.ontimeout=p(to,ie,"TestLoadImage: timeout",!1,ee,ve),o.setTimeout(function(){ve.ontimeout&&ve.ontimeout()},1e4),ve.src=O}else ee(!1)}function wo(O,ee){const ie=new Kr,ve=new AbortController,ze=setTimeout(()=>{ve.abort(),to(ie,"TestPingServer: timeout",!1,ee)},1e4);fetch(O,{signal:ve.signal}).then(it=>{clearTimeout(ze),it.ok?to(ie,"TestPingServer: ok",!0,ee):to(ie,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(ze),to(ie,"TestPingServer: error",!1,ee)})}function to(O,ee,ie,ve,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),ve(ie)}catch{}}function Nl(){this.g=new jn}function Eo(O,ee,ie){const ve=ie||"";try{nf(O,function(ze,it){let Ut=ze;u(ze)&&(Ut=_r(ze)),ee.push(ve+it+"="+encodeURIComponent(Ut))})}catch(ze){throw ee.push(ve+"type="+encodeURIComponent("_badmap")),ze}}function Kc(O){this.l=O.Ub||null,this.j=O.eb||!1}g(Kc,Or),Kc.prototype.g=function(){return new ic(this.l,this.j)},Kc.prototype.i=function(O){return function(){return O}}({});function ic(O,ee){mt.call(this),this.D=O,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(ic,mt),e=ic.prototype,e.open=function(O,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=O,this.A=ee,this.readyState=1,Ii(this)},e.send=function(O){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ee={headers:this.u,method:this.B,credentials:this.m,cache:void 0};O&&(ee.body=O),(this.D||o).fetch(new Request(this.A,ee)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},e.Sa=function(O){if(this.g&&(this.l=O,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=O.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")O.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in O){if(this.j=O.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;of(this)}else O.text().then(this.Ra.bind(this),this.ga.bind(this))};function of(O){O.j.read().then(O.Pa.bind(O)).catch(O.ga.bind(O))}e.Pa=function(O){if(this.g){if(this.o&&O.value)this.response.push(O.value);else if(!this.o){var ee=O.value?O.value:new Uint8Array(0);(ee=this.v.decode(ee,{stream:!O.done}))&&(this.response=this.responseText+=ee)}O.done?Co(this):Ii(this),this.readyState==3&&of(this)}},e.Ra=function(O){this.g&&(this.response=this.responseText=O,Co(this))},e.Qa=function(O){this.g&&(this.response=O,Co(this))},e.ga=function(){this.g&&Co(this)};function Co(O){O.readyState=4,O.l=null,O.j=null,O.v=null,Ii(O)}e.setRequestHeader=function(O,ee){this.u.append(O,ee)},e.getResponseHeader=function(O){return this.h&&this.h.get(O.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const O=[],ee=this.h.entries();for(var ie=ee.next();!ie.done;)ie=ie.value,O.push(ie[0]+": "+ie[1]),ie=ee.next();return O.join(`\r
`)};function Ii(O){O.onreadystatechange&&O.onreadystatechange.call(O)}Object.defineProperty(ic.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(O){this.m=O?"include":"same-origin"}});function kl(O){let ee="";return F(O,function(ie,ve){ee+=ve,ee+=":",ee+=ie,ee+=`\r
`}),ee}function ms(O,ee,ie){e:{for(ve in ie){var ve=!1;break e}ve=!0}ve||(ie=kl(ie),typeof O=="string"?ie!=null&&encodeURIComponent(String(ie)):Hn(O,ee,ie))}function vn(O){mt.call(this),this.headers=new Map,this.o=O||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(vn,mt);var qc=/^https?$/i,Bl=["POST","PUT"];e=vn.prototype,e.Ha=function(O){this.J=O},e.ea=function(O,ee,ie,ve){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+O);ee=ee?ee.toUpperCase():"GET",this.D=O,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?As(this.o):As(je),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ee,String(O),!0),this.B=!1}catch(it){lf(this,it);return}if(O=ie||"",ie=new Map(this.headers),ve)if(Object.getPrototypeOf(ve)===Object.prototype)for(var ze in ve)ie.set(ze,ve[ze]);else if(typeof ve.keys=="function"&&typeof ve.get=="function")for(const it of ve.keys())ie.set(it,ve.get(it));else throw Error("Unknown input type for opt_headers: "+String(ve));ve=Array.from(ie.keys()).find(it=>it.toLowerCase()=="content-type"),ze=o.FormData&&O instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Bl,ee,void 0))||ve||ze||ie.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[it,Ut]of ie)this.g.setRequestHeader(it,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fi(this),this.u=!0,this.g.send(O),this.u=!1}catch(it){lf(this,it)}};function lf(O,ee){O.h=!1,O.g&&(O.j=!0,O.g.abort(),O.j=!1),O.l=ee,O.m=5,Hu(O),sl(O)}function Hu(O){O.A||(O.A=!0,It(O,"complete"),It(O,"error"))}e.abort=function(O){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=O||7,It(this,"complete"),It(this,"abort"),sl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sl(this,!0)),vn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vu(this):this.bb())},e.bb=function(){Vu(this)};function Vu(O){if(O.h&&typeof i<"u"&&(!O.v[1]||ps(O)!=4||O.Z()!=2)){if(O.u&&ps(O)==4)Pt(O.Ea,0,O);else if(It(O,"readystatechange"),ps(O)==4){O.h=!1;try{const Ut=O.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var ie;if(!(ie=ee)){var ve;if(ve=Ut===0){var ze=String(O.D).match(gi)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),ve=!qc.test(ze?ze.toLowerCase():"")}ie=ve}if(ie)It(O,"complete"),It(O,"success");else{O.m=6;try{var it=2<ps(O)?O.g.statusText:""}catch{it=""}O.l=it+" ["+O.Z()+"]",Hu(O)}}finally{sl(O)}}}}function sl(O,ee){if(O.g){Fi(O);const ie=O.g,ve=O.v[0]?()=>{}:null;O.g=null,O.v=null,ee||It(O,"ready");try{ie.onreadystatechange=ve}catch{}}}function Fi(O){O.I&&(o.clearTimeout(O.I),O.I=null)}e.isActive=function(){return!!this.g};function ps(O){return O.g?O.g.readyState:0}e.Z=function(){try{return 2<ps(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(O){if(this.g){var ee=this.g.responseText;return O&&ee.indexOf(O)==0&&(ee=ee.substring(O.length)),Vr(ee)}};function Mh(O){try{if(!O.g)return null;if("response"in O.g)return O.g.response;switch(O.H){case"":case"text":return O.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in O.g)return O.g.mozResponseArrayBuffer}return null}catch{return null}}function Wc(O){const ee={};O=(O.g&&2<=ps(O)&&O.g.getAllResponseHeaders()||"").split(`\r
`);for(let ve=0;ve<O.length;ve++){if(w(O[ve]))continue;var ie=D(O[ve]);const ze=ie[0];if(ie=ie[1],typeof ie!="string")continue;ie=ie.trim();const it=ee[ze]||[];ee[ze]=it,it.push(ie)}E(ee,function(ve){return ve.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(O,ee,ie){return ie&&ie.internalChannelParams&&ie.internalChannelParams[O]||ee}function Xc(O){this.Aa=0,this.i=[],this.j=new Kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vi("failFast",!1,O),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vi("baseRetryDelayMs",5e3,O),this.cb=vi("retryDelaySeedMs",1e4,O),this.Wa=vi("forwardChannelMaxRetries",2,O),this.wa=vi("forwardChannelRequestTimeoutMs",2e4,O),this.pa=O&&O.xmlHttpFactory||void 0,this.Xa=O&&O.Tb||void 0,this.Ca=O&&O.useFetchStreams||!1,this.L=void 0,this.J=O&&O.supportsCrossDomainXhr||!1,this.K="",this.h=new hs(O&&O.concurrentRequestLimit),this.Da=new Nl,this.P=O&&O.fastHandshake||!1,this.O=O&&O.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=O&&O.Rb||!1,O&&O.xa&&this.j.xa(),O&&O.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&O&&O.detectBufferingProxy||!1,this.ja=void 0,O&&O.longPollingTimeout&&0<O.longPollingTimeout&&(this.ja=O.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Xc.prototype,e.la=8,e.G=1,e.connect=function(O,ee,ie,ve){bt(0),this.W=O,this.H=ee||{},ie&&ve!==void 0&&(this.H.OSID=ie,this.H.OAID=ve),this.F=this.X,this.I=K(this,null,this.W),Kd(this)};function oc(O){if(zu(O),O.G==3){var ee=O.U++,ie=xi(O.I);if(Hn(ie,"SID",O.K),Hn(ie,"RID",ee),Hn(ie,"TYPE","terminate"),Yc(O,ie),ee=new dt(O,O.j,ee),ee.L=2,ee.v=Gc(xi(ie)),ie=!1,o.navigator&&o.navigator.sendBeacon)try{ie=o.navigator.sendBeacon(ee.v.toString(),"")}catch{}!ie&&o.Image&&(new Image().src=ee.v,ie=!0),ie||(ee.g=Ae(ee.j,null),ee.g.ea(ee.v)),ee.F=Date.now(),zt(ee)}Wd(O)}function Gd(O){O.g&&(Jc(O),O.g.cancel(),O.g=null)}function zu(O){Gd(O),O.u&&(o.clearTimeout(O.u),O.u=null),lc(O),O.h.cancel(),O.s&&(typeof O.s=="number"&&o.clearTimeout(O.s),O.s=null)}function Kd(O){if(!Js(O.h)&&!O.s){O.s=!0;var ee=O.Ga;X||q(),V||(X(),V=!0),z.add(ee,O),O.B=0}}function cf(O,ee){return js(O.h)>=O.h.j-(O.s?1:0)?!1:O.s?(O.i=ee.D.concat(O.i),!0):O.G==1||O.G==2||O.B>=(O.Va?0:O.Wa)?!1:(O.s=gr(h(O.Ga,O,ee),qu(O,O.B)),O.B++,!0)}e.Ga=function(O){if(this.s)if(this.s=null,this.G==1){if(!O){this.U=Math.floor(1e5*Math.random()),O=this.U++;const ze=new dt(this,this.j,O);let it=this.o;if(this.S&&(it?(it=_(it),P(it,this.S)):it=this.S),this.m!==null||this.O||(ze.H=it,it=null),this.P)e:{for(var ee=0,ie=0;ie<this.i.length;ie++){t:{var ve=this.i[ie];if("__data__"in ve.map&&(ve=ve.map.__data__,typeof ve=="string")){ve=ve.length;break t}ve=void 0}if(ve===void 0)break;if(ee+=ve,4096<ee){ee=ie;break e}if(ee===4096||ie===this.i.length-1){ee=ie+1;break e}}ee=1e3}else ee=1e3;ee=Gu(this,ze,ee),ie=xi(this.I),Hn(ie,"RID",O),Hn(ie,"CVER",22),this.D&&Hn(ie,"X-HTTP-Session-Id",this.D),Yc(this,ie),it&&(this.O?ee="headers="+encodeURIComponent(String(kl(it)))+"&"+ee:this.m&&ms(ie,this.m,it)),xa(this.h,ze),this.Ua&&Hn(ie,"TYPE","init"),this.P?(Hn(ie,"$req",ee),Hn(ie,"SID","null"),ze.T=!0,Ft(ze,ie,null)):Ft(ze,ie,ee),this.G=2}}else this.G==3&&(O?$u(this,O):this.i.length==0||Js(this.h)||$u(this))};function $u(O,ee){var ie;ee?ie=ee.l:ie=O.U++;const ve=xi(O.I);Hn(ve,"SID",O.K),Hn(ve,"RID",ie),Hn(ve,"AID",O.T),Yc(O,ve),O.m&&O.o&&ms(ve,O.m,O.o),ie=new dt(O,O.j,ie,O.B+1),O.m===null&&(ie.H=O.o),ee&&(O.i=ee.D.concat(O.i)),ee=Gu(O,ie,1e3),ie.I=Math.round(.5*O.wa)+Math.round(.5*O.wa*Math.random()),xa(O.h,ie),Ft(ie,ve,ee)}function Yc(O,ee){O.H&&F(O.H,function(ie,ve){Hn(ee,ve,ie)}),O.l&&nf({},function(ie,ve){Hn(ee,ve,ie)})}function Gu(O,ee,ie){ie=Math.min(O.i.length,ie);var ve=O.l?h(O.l.Na,O.l,O):null;e:{var ze=O.i;let it=-1;for(;;){const Ut=["count="+ie];it==-1?0<ie?(it=ze[0].g,Ut.push("ofs="+it)):it=0:Ut.push("ofs="+it);let Ir=!0;for(let bn=0;bn<ie;bn++){let qr=ze[bn].g;const Vn=ze[bn].map;if(qr-=it,0>qr)it=Math.max(0,ze[bn].g-100),Ir=!1;else try{Eo(Vn,Ut,"req"+qr+"_")}catch{ve&&ve(Vn)}}if(Ir){ve=Ut.join("&");break e}}}return O=O.i.splice(0,ie),ee.D=O,ve}function qd(O){if(!O.g&&!O.u){O.Y=1;var ee=O.Fa;X||q(),V||(X(),V=!0),z.add(ee,O),O.v=0}}function Ku(O){return O.g||O.u||3<=O.v?!1:(O.Y++,O.u=gr(h(O.Fa,O),qu(O,O.v)),O.v++,!0)}e.Fa=function(){if(this.u=null,Uh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var O=2*this.R;this.j.info("BP detection timer enabled: "+O),this.A=gr(h(this.ab,this),O)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Gd(this),Uh(this))};function Jc(O){O.A!=null&&(o.clearTimeout(O.A),O.A=null)}function Uh(O){O.g=new dt(O,O.j,"rpc",O.Y),O.m===null&&(O.g.H=O.o),O.g.O=0;var ee=xi(O.qa);Hn(ee,"RID","rpc"),Hn(ee,"SID",O.K),Hn(ee,"AID",O.T),Hn(ee,"CI",O.F?"0":"1"),!O.F&&O.ja&&Hn(ee,"TO",O.ja),Hn(ee,"TYPE","xmlhttp"),Yc(O,ee),O.m&&O.o&&ms(ee,O.m,O.o),O.L&&(O.g.I=O.L);var ie=O.g;O=O.ia,ie.L=1,ie.v=Gc(xi(ee)),ie.m=null,ie.P=!0,Vt(ie,O)}e.Za=function(){this.C!=null&&(this.C=null,Gd(this),Ku(this),bt(19))};function lc(O){O.C!=null&&(o.clearTimeout(O.C),O.C=null)}function Zc(O,ee){var ie=null;if(O.g==ee){lc(O),Jc(O),O.g=null;var ve=2}else if(pi(O.h,ee))ie=ee.D,Zs(O.h,ee),ve=1;else return;if(O.G!=0){if(ee.o)if(ve==1){ie=ee.m?ee.m.length:0,ee=Date.now()-ee.F;var ze=O.B;ve=gt(),It(ve,new nr(ve,ie)),Kd(O)}else qd(O);else if(ze=ee.s,ze==3||ze==0&&0<ee.X||!(ve==1&&cf(O,ee)||ve==2&&Ku(O)))switch(ie&&0<ie.length&&(ee=O.h,ee.i=ee.i.concat(ie)),ze){case 1:Oi(O,5);break;case 4:Oi(O,10);break;case 3:Oi(O,6);break;default:Oi(O,2)}}}function qu(O,ee){let ie=O.Ta+Math.floor(Math.random()*O.cb);return O.isActive()||(ie*=2),ie*ee}function Oi(O,ee){if(O.j.info("Error code "+ee),ee==2){var ie=h(O.fb,O),ve=O.Xa;const ze=!ve;ve=new In(ve||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||zc(ve,"https"),Gc(ve),ze?ji(ve.toString(),ie):wo(ve.toString(),ie)}else bt(2);O.G=0,O.l&&O.l.sa(ee),Wd(O),zu(O)}e.fb=function(O){O?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Wd(O){if(O.G=0,O.ka=[],O.l){const ee=Vd(O.h);(ee.length!=0||O.i.length!=0)&&(b(O.ka,ee),b(O.ka,O.i),O.h.i.length=0,x(O.i),O.i.length=0),O.l.ra()}}function K(O,ee,ie){var ve=ie instanceof In?xi(ie):new In(ie);if(ve.g!="")ee&&(ve.g=ee+"."+ve.g),$c(ve,ve.s);else{var ze=o.location;ve=ze.protocol,ee=ee?ee+"."+ze.hostname:ze.hostname,ze=+ze.port;var it=new In(null);ve&&zc(it,ve),ee&&(it.g=ee),ze&&$c(it,ze),ie&&(it.l=ie),ve=it}return ie=O.D,ee=O.ya,ie&&ee&&Hn(ve,ie,ee),Hn(ve,"VER",O.la),Yc(O,ve),ve}function Ae(O,ee,ie){if(ee&&!O.J)throw Error("Can't create secondary domain capable XhrIo object.");return ee=O.Ca&&!O.pa?new vn(new Kc({eb:ie})):new vn(O.pa),ee.Ha(O.J),ee}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fe(){}e=Fe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Le(){}Le.prototype.g=function(O,ee){return new Ge(O,ee)};function Ge(O,ee){mt.call(this),this.g=new Xc(ee),this.l=O,this.h=ee&&ee.messageUrlParams||null,O=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(O?O["X-Client-Protocol"]="webchannel":O={"X-Client-Protocol":"webchannel"}),this.g.o=O,O=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(O?O["X-WebChannel-Content-Type"]=ee.messageContentType:O={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.va&&(O?O["X-WebChannel-Client-Profile"]=ee.va:O={"X-WebChannel-Client-Profile":ee.va}),this.g.S=O,(O=ee&&ee.Sb)&&!w(O)&&(this.g.m=O),this.v=ee&&ee.supportsCrossDomainXhr||!1,this.u=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!w(ee)&&(this.g.D=ee,O=this.h,O!==null&&ee in O&&(O=this.h,ee in O&&delete O[ee])),this.j=new Jt(this)}g(Ge,mt),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){oc(this.g)},Ge.prototype.o=function(O){var ee=this.g;if(typeof O=="string"){var ie={};ie.__data__=O,O=ie}else this.u&&(ie={},ie.__data__=_r(O),O=ie);ee.i.push(new bo(ee.Ya++,O)),ee.G==3&&Kd(ee)},Ge.prototype.N=function(){this.g.l=null,delete this.j,oc(this.g),delete this.g,Ge.aa.N.call(this)};function vt(O){Ba.call(this),O.__headers__&&(this.headers=O.__headers__,this.statusCode=O.__status__,delete O.__headers__,delete O.__status__);var ee=O.__sm__;if(ee){e:{for(const ie in ee){O=ie;break e}O=void 0}(this.i=O)&&(O=this.i,ee=ee!==null&&O in ee?ee[O]:void 0),this.data=ee}else this.data=O}g(vt,Ba);function Lt(){en.call(this),this.status=1}g(Lt,en);function Jt(O){this.g=O}g(Jt,Fe),Jt.prototype.ua=function(){It(this.g,"a")},Jt.prototype.ta=function(O){It(this.g,new vt(O))},Jt.prototype.sa=function(O){It(this.g,new Lt)},Jt.prototype.ra=function(){It(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,WY=function(){return new Le},qY=function(){return gt()},KY=mr,n6={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},we.NO_ERROR=0,we.TIMEOUT=8,we.HTTP_ERROR=6,P_=we,Se.COMPLETE="complete",GY=Se,hn.EventType=oa,oa.OPEN="a",oa.CLOSE="b",oa.ERROR="c",oa.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Ay=hn,vn.prototype.listenOnce=vn.prototype.L,vn.prototype.getLastError=vn.prototype.Ka,vn.prototype.getLastErrorCode=vn.prototype.Ba,vn.prototype.getStatus=vn.prototype.Z,vn.prototype.getResponseJson=vn.prototype.Oa,vn.prototype.getResponseText=vn.prototype.oa,vn.prototype.send=vn.prototype.ea,vn.prototype.setWithCredentials=vn.prototype.Ha,$Y=vn}).apply(typeof aC<"u"?aC:typeof self<"u"?self:typeof window<"u"?window:{});const X7="@firebase/firestore",Y7="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Uo.UNAUTHENTICATED=new Uo(null),Uo.GOOGLE_CREDENTIALS=new Uo("google-credentials-uid"),Uo.FIRST_PARTY=new Uo("first-party-uid"),Uo.MOCK_USER=new Uo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g1="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=new tD("@firebase/firestore");function Rx(){return Jp.logLevel}function cr(e,...t){if(Jp.logLevel<=Nn.DEBUG){const r=t.map(AD);Jp.debug(`Firestore (${g1}): ${e}`,...r)}}function dh(e,...t){if(Jp.logLevel<=Nn.ERROR){const r=t.map(AD);Jp.error(`Firestore (${g1}): ${e}`,...r)}}function Zp(e,...t){if(Jp.logLevel<=Nn.WARN){const r=t.map(AD);Jp.warn(`Firestore (${g1}): ${e}`,...r)}}function AD(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,XY(e,n,r)}function XY(e,t,r){let n=`FIRESTORE (${g1}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw dh(n),new Error(n)}function sa(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||XY(t,a,n)}function Zr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qt extends Pd{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YY{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class JY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Uo.UNAUTHENTICATED))}shutdown(){}}class Ape{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class fpe{constructor(t){this.t=t,this.currentUser=Uo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){sa(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Yf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yf,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},o=c=>{cr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(cr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yf)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(cr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(sa(typeof n.accessToken=="string",31837,{l:n}),new YY(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return sa(t===null||typeof t=="string",2055,{h:t}),new Uo(t)}}class hpe{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Uo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mpe{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new hpe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Uo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class J7{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ppe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){sa(this.o===void 0,3512);const n=s=>{s.error!=null&&cr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,cr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{cr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):cr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new J7(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(sa(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new J7(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gpe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=gpe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function kn(e,t){return e<t?-1:e>t?1:0}function a6(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return AT(a)===AT(s)?kn(a,s):AT(a)?1:-1}return kn(e.length,t.length)}const xpe=55296,vpe=57343;function AT(e){const t=e.charCodeAt(0);return t>=xpe&&t<=vpe}function Fv(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7="__name__";class SA{constructor(t,r,n){r===void 0?r=0:r>t.length&&Hr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Hr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return SA.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof SA?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=SA.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return kn(t.length,r.length)}static compareSegments(t,r){const n=SA.isNumericId(t),a=SA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?SA.extractNumericId(t).compare(SA.extractNumericId(r)):a6(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return X0.fromString(t.substring(4,t.length-2))}}class Sa extends SA{construct(t,r,n){return new Sa(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new qt(Ct.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Sa(r)}static emptyPath(){return new Sa([])}}const bpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $i extends SA{construct(t,r,n){return new $i(t,r,n)}static isValidIdentifier(t){return bpe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$i.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Z7}static keyField(){return new $i([Z7])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new qt(Ct.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new qt(Ct.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new qt(Ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new qt(Ct.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new $i(r)}static emptyPath(){return new $i([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t){this.path=t}static fromPath(t){return new br(Sa.fromString(t))}static fromName(t){return new br(Sa.fromString(t).popFirst(5))}static empty(){return new br(Sa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Sa.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Sa.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new br(new Sa(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZY(e,t,r){if(!r)throw new qt(Ct.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function eJ(e,t,r,n){if(t===!0&&n===!0)throw new qt(Ct.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function e9(e){if(!br.isDocumentKey(e))throw new qt(Ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function t9(e){if(br.isDocumentKey(e))throw new qt(Ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function tJ(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function LN(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Hr(12329,{type:typeof e})}function Yo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new qt(Ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=LN(e);throw new qt(Ct.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function ype(e,t){if(t<=0)throw new qt(Ct.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(e,t){const r={typeString:e};return t&&(r.value=t),r}function g2(e,t){if(!tJ(e))throw new qt(Ct.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new qt(Ct.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=-62135596800,n9=1e6;class ir{static now(){return ir.fromMillis(Date.now())}static fromDate(t){return ir.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*n9);return new ir(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new qt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new qt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<r9)throw new qt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/n9}_compareTo(t){return this.seconds===t.seconds?kn(this.nanoseconds,t.nanoseconds):kn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ir._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(g2(t,ir._jsonSchema))return new ir(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-r9;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ir._jsonSchemaVersion="firestore/timestamp/1.0",ir._jsonSchema={type:fi("string",ir._jsonSchemaVersion),seconds:fi("number"),nanoseconds:fi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{static fromTimestamp(t){return new Xr(t)}static min(){return new Xr(new ir(0,0))}static max(){return new Xr(new ir(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=-1;function wpe(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Xr.fromTimestamp(n===1e9?new ir(r+1,0):new ir(r,n));return new cm(a,br.empty(),t)}function Epe(e){return new cm(e.readTime,e.key,hw)}class cm{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new cm(Xr.min(),br.empty(),hw)}static max(){return new cm(Xr.max(),br.empty(),hw)}}function Cpe(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=br.comparator(e.documentKey,t.documentKey),r!==0?r:kn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Spe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(e){if(e.code!==Ct.FAILED_PRECONDITION||e.message!==_pe)throw e;cr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Hr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Dt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Dt?r:Dt.resolve(r)}catch(r){return Dt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.reject(r)}static resolve(t){return new Dt((r,n)=>{r(t)})}static reject(t){return new Dt((r,n)=>{n(t)})}static waitFor(t){return new Dt((r,n)=>{let a=0,s=0,i=!1;t.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(t){let r=Dt.resolve(!1);for(const n of t)r=r.next(a=>a?Dt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Dt((n,a)=>{const s=t.length,i=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new Dt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function Npe(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function v1(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}MN.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=-1;function UN(e){return e==null}function BS(e){return e===0&&1/e==-1/0}function kpe(e){return typeof e=="number"&&Number.isInteger(e)&&!BS(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rJ="";function Bpe(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=a9(t)),t=Tpe(e.get(r),t);return a9(t)}function Tpe(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case rJ:r+="";break;default:r+=s}}return r}function a9(e){return e+rJ+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function km(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function nJ(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t,r){this.comparator=t,this.root=r||fo.EMPTY}insert(t,r){return new ls(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,fo.BLACK,null,null))}remove(t){return new ls(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new sC(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new sC(this.root,t,this.comparator,!1)}getReverseIterator(){return new sC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new sC(this.root,t,this.comparator,!0)}}class sC{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class fo{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??fo.RED,this.left=a??fo.EMPTY,this.right=s??fo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new fo(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return fo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return fo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,fo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,fo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Hr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Hr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Hr(27949);return t+(this.isRed()?0:1)}}fo.EMPTY=null,fo.RED=!0,fo.BLACK=!1;fo.EMPTY=new class{constructor(){this.size=0}get key(){throw Hr(57766)}get value(){throw Hr(16141)}get color(){throw Hr(16727)}get left(){throw Hr(29726)}get right(){throw Hr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new fo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t){this.comparator=t,this.data=new ls(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new i9(this.data.getIterator())}getIteratorFrom(t){return new i9(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof _i)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new _i(this.comparator);return r.data=t,r}}class i9{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t){this.fields=t,t.sort($i.comparator)}static empty(){return new jc([])}unionWith(t){let r=new _i($i.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new jc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Fv(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new aJ("Invalid base64 string: "+s):s}}(t);return new Xi(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new Xi(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return kn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Xi.EMPTY_BYTE_STRING=new Xi("");const jpe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function um(e){if(sa(!!e,39018),typeof e=="string"){let t=0;const r=jpe.exec(e);if(sa(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Hs(e.seconds),nanos:Hs(e.nanos)}}function Hs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function dm(e){return typeof e=="string"?Xi.fromBase64String(e):Xi.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sJ="server_timestamp",iJ="__type__",oJ="__previous_value__",lJ="__local_write_time__";function QN(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[iJ])==null?void 0:n.stringValue)===sJ}function HN(e){const t=e.mapValue.fields[oJ];return QN(t)?HN(t):t}function mw(e){const t=um(e.mapValue.fields[lJ].timestampValue);return new ir(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ipe{constructor(t,r,n,a,s,i,o,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const TS="(default)";class Ov{constructor(t,r){this.projectId=t,this.database=r||TS}static empty(){return new Ov("","")}get isDefaultDatabase(){return this.database===TS}isEqual(t){return t instanceof Ov&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cJ="__type__",Fpe="__max__",iC={mapValue:{}},uJ="__vector__",jS="value";function Am(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?QN(e)?4:Dpe(e)?9007199254740991:Ope(e)?10:11:Hr(28295,{value:e})}function qA(e,t){if(e===t)return!0;const r=Am(e);if(r!==Am(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return mw(e).isEqual(mw(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=um(a.timestampValue),o=um(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return dm(a.bytesValue).isEqual(dm(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Hs(a.geoPointValue.latitude)===Hs(s.geoPointValue.latitude)&&Hs(a.geoPointValue.longitude)===Hs(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Hs(a.integerValue)===Hs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=Hs(a.doubleValue),o=Hs(s.doubleValue);return i===o?BS(i)===BS(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return Fv(e.arrayValue.values||[],t.arrayValue.values||[],qA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(s9(i)!==s9(o))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(o[c]===void 0||!qA(i[c],o[c])))return!1;return!0}(e,t);default:return Hr(52216,{left:e})}}function pw(e,t){return(e.values||[]).find(r=>qA(r,t))!==void 0}function Dv(e,t){if(e===t)return 0;const r=Am(e),n=Am(t);if(r!==n)return kn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return kn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const o=Hs(s.integerValue||s.doubleValue),c=Hs(i.integerValue||i.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(e,t);case 3:return o9(e.timestampValue,t.timestampValue);case 4:return o9(mw(e),mw(t));case 5:return a6(e.stringValue,t.stringValue);case 6:return function(s,i){const o=dm(s),c=dm(i);return o.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const o=s.split("/"),c=i.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=kn(o[u],c[u]);if(d!==0)return d}return kn(o.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const o=kn(Hs(s.latitude),Hs(i.latitude));return o!==0?o:kn(Hs(s.longitude),Hs(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return l9(e.arrayValue,t.arrayValue);case 10:return function(s,i){var h,p,g,x;const o=s.fields||{},c=i.fields||{},u=(h=o[jS])==null?void 0:h.arrayValue,d=(p=c[jS])==null?void 0:p.arrayValue,f=kn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:l9(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===iC.mapValue&&i===iC.mapValue)return 0;if(s===iC.mapValue)return 1;if(i===iC.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=a6(c[f],d[f]);if(h!==0)return h;const p=Dv(o[c[f]],u[d[f]]);if(p!==0)return p}return kn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw Hr(23264,{he:r})}}function o9(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return kn(e,t);const r=um(e),n=um(t),a=kn(r.seconds,n.seconds);return a!==0?a:kn(r.nanos,n.nanos)}function l9(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=Dv(r[a],n[a]);if(s)return s}return kn(r.length,n.length)}function Pv(e){return s6(e)}function s6(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=um(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return dm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return br.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=s6(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${s6(r.fields[i])}`;return a+"}"}(e.mapValue):Hr(61005,{value:e})}function R_(e){switch(Am(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=HN(e);return t?16+R_(t):16;case 5:return 2*e.stringValue.length;case 6:return dm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+R_(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return km(n.fields,(s,i)=>{a+=s.length+R_(i)}),a}(e.mapValue);default:throw Hr(13486,{value:e})}}function IS(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function i6(e){return!!e&&"integerValue"in e}function hD(e){return!!e&&"arrayValue"in e}function c9(e){return!!e&&"nullValue"in e}function u9(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function L_(e){return!!e&&"mapValue"in e}function Ope(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[cJ])==null?void 0:n.stringValue)===uJ}function Py(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return km(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=Py(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Py(e.arrayValue.values[r]);return t}return{...e}}function Dpe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Fpe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t){this.value=t}static empty(){return new Gl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!L_(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Py(r)}setAll(t){let r=$i.emptyPath(),n={},a=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=Py(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());L_(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return qA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];L_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){km(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new Gl(Py(this.value))}}function dJ(e){const t=[];return km(e.fields,(r,n)=>{const a=new $i([r]);if(L_(n)){const s=dJ(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new jc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t,r,n,a,s,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new zo(t,0,Xr.min(),Xr.min(),Xr.min(),Gl.empty(),0)}static newFoundDocument(t,r,n,a){return new zo(t,1,r,Xr.min(),n,a,0)}static newNoDocument(t,r){return new zo(t,2,r,Xr.min(),Xr.min(),Gl.empty(),0)}static newUnknownDocument(t,r){return new zo(t,3,r,Xr.min(),Xr.min(),Gl.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Xr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Gl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Gl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(t,r){this.position=t,this.inclusive=r}}function d9(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=br.comparator(br.fromName(i.referenceValue),r.key):n=Dv(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function A9(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!qA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(t,r="asc"){this.field=t,this.dir=r}}function Ppe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJ{}class Ai extends AJ{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new Lpe(t,r,n):r==="array-contains"?new Qpe(t,n):r==="in"?new Hpe(t,n):r==="not-in"?new Vpe(t,n):r==="array-contains-any"?new zpe(t,n):new Ai(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new Mpe(t,n):new Upe(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Dv(r,this.value)):r!==null&&Am(this.value)===Am(r)&&this.matchesComparison(Dv(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Hr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Od extends AJ{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Od(t,r)}matches(t){return fJ(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fJ(e){return e.op==="and"}function hJ(e){return Rpe(e)&&fJ(e)}function Rpe(e){for(const t of e.filters)if(t instanceof Od)return!1;return!0}function o6(e){if(e instanceof Ai)return e.field.canonicalString()+e.op.toString()+Pv(e.value);if(hJ(e))return e.filters.map(t=>o6(t)).join(",");{const t=e.filters.map(r=>o6(r)).join(",");return`${e.op}(${t})`}}function mJ(e,t){return e instanceof Ai?function(n,a){return a instanceof Ai&&n.op===a.op&&n.field.isEqual(a.field)&&qA(n.value,a.value)}(e,t):e instanceof Od?function(n,a){return a instanceof Od&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&mJ(i,a.filters[o]),!0):!1}(e,t):void Hr(19439)}function pJ(e){return e instanceof Ai?function(r){return`${r.field.canonicalString()} ${r.op} ${Pv(r.value)}`}(e):e instanceof Od?function(r){return r.op.toString()+" {"+r.getFilters().map(pJ).join(" ,")+"}"}(e):"Filter"}class Lpe extends Ai{constructor(t,r,n){super(t,r,n),this.key=br.fromName(n.referenceValue)}matches(t){const r=br.comparator(t.key,this.key);return this.matchesComparison(r)}}class Mpe extends Ai{constructor(t,r){super(t,"in",r),this.keys=gJ("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Upe extends Ai{constructor(t,r){super(t,"not-in",r),this.keys=gJ("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function gJ(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>br.fromName(n.referenceValue))}class Qpe extends Ai{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return hD(r)&&pw(r.arrayValue,this.value)}}class Hpe extends Ai{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&pw(this.value.arrayValue,r)}}class Vpe extends Ai{constructor(t,r){super(t,"not-in",r)}matches(t){if(pw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!pw(this.value.arrayValue,r)}}class zpe extends Ai{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!hD(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>pw(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $pe{constructor(t,r=null,n=[],a=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function f9(e,t=null,r=[],n=[],a=null,s=null,i=null){return new $pe(e,t,r,n,a,s,i)}function mD(e){const t=Zr(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>o6(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),UN(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>Pv(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>Pv(n)).join(",")),t.Te=r}return t.Te}function pD(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!Ppe(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!mJ(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!A9(e.startAt,t.startAt)&&A9(e.endAt,t.endAt)}function l6(e){return br.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(t,r=null,n=[],a=[],s=null,i="F",o=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Gpe(e,t,r,n,a,s,i,o){return new gg(e,t,r,n,a,s,i,o)}function VN(e){return new gg(e)}function h9(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function gD(e){return e.collectionGroup!==null}function Av(e){const t=Zr(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new _i($i.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new gw(s,n))}),r.has($i.keyField().canonicalString())||t.Ie.push(new gw($i.keyField(),n))}return t.Ie}function HA(e){const t=Zr(e);return t.Ee||(t.Ee=Kpe(t,Av(e))),t.Ee}function Kpe(e,t){if(e.limitType==="F")return f9(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new gw(a.field,s)});const r=e.endAt?new Rv(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new Rv(e.startAt.position,e.startAt.inclusive):null;return f9(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function c6(e,t){const r=e.filters.concat([t]);return new gg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function FS(e,t,r){return new gg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function zN(e,t){return pD(HA(e),HA(t))&&e.limitType===t.limitType}function xJ(e){return`${mD(HA(e))}|lt:${e.limitType}`}function Lx(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>pJ(a)).join(", ")}]`),UN(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Pv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Pv(a)).join(",")),`Target(${n})`}(HA(e))}; limitType=${e.limitType})`}function $N(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):br.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of Av(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,o,c){const u=d9(i,o,c);return i.inclusive?u<=0:u<0}(n.startAt,Av(n),a)||n.endAt&&!function(i,o,c){const u=d9(i,o,c);return i.inclusive?u>=0:u>0}(n.endAt,Av(n),a))}(e,t)}function qpe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vJ(e){return(t,r)=>{let n=!1;for(const a of Av(e)){const s=Wpe(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Wpe(e,t,r){const n=e.field.isKeyField()?br.comparator(t.key,r.key):function(s,i,o){const c=i.data.field(s),u=o.data.field(s);return c!==null&&u!==null?Dv(c,u):Hr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Hr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){km(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return nJ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xpe=new ls(br.comparator);function Ah(){return Xpe}const bJ=new ls(br.comparator);function fy(...e){let t=bJ;for(const r of e)t=t.insert(r.key,r);return t}function yJ(e){let t=bJ;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function _p(){return Ry()}function wJ(){return Ry()}function Ry(){return new xg(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ype=new ls(br.comparator),Jpe=new _i(br.comparator);function Bn(...e){let t=Jpe;for(const r of e)t=t.add(r);return t}const Zpe=new _i(kn);function ege(){return Zpe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:BS(t)?"-0":t}}function EJ(e){return{integerValue:""+e}}function tge(e,t){return kpe(t)?EJ(t):xD(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(){this._=void 0}}function rge(e,t,r){return e instanceof xw?function(a,s){const i={fields:{[iJ]:{stringValue:sJ},[lJ]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&QN(s)&&(s=HN(s)),s&&(i.fields[oJ]=s),{mapValue:i}}(r,t):e instanceof Lv?_J(e,t):e instanceof vw?SJ(e,t):function(a,s){const i=CJ(a,s),o=m9(i)+m9(a.Ae);return i6(i)&&i6(a.Ae)?EJ(o):xD(a.serializer,o)}(e,t)}function nge(e,t,r){return e instanceof Lv?_J(e,t):e instanceof vw?SJ(e,t):r}function CJ(e,t){return e instanceof OS?function(n){return i6(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class xw extends GN{}class Lv extends GN{constructor(t){super(),this.elements=t}}function _J(e,t){const r=NJ(t);for(const n of e.elements)r.some(a=>qA(a,n))||r.push(n);return{arrayValue:{values:r}}}class vw extends GN{constructor(t){super(),this.elements=t}}function SJ(e,t){let r=NJ(t);for(const n of e.elements)r=r.filter(a=>!qA(a,n));return{arrayValue:{values:r}}}class OS extends GN{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function m9(e){return Hs(e.integerValue||e.doubleValue)}function NJ(e){return hD(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{constructor(t,r){this.field=t,this.transform=r}}function age(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof Lv&&a instanceof Lv||n instanceof vw&&a instanceof vw?Fv(n.elements,a.elements,qA):n instanceof OS&&a instanceof OS?qA(n.Ae,a.Ae):n instanceof xw&&a instanceof xw}(e.transform,t.transform)}class sge{constructor(t,r){this.version=t,this.transformResults=r}}class xl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new xl}static exists(t){return new xl(void 0,t)}static updateTime(t){return new xl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function M_(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class KN{}function BJ(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new qN(e.key,xl.none()):new x2(e.key,e.data,xl.none());{const r=e.data,n=Gl.empty();let a=new _i($i.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Bm(e.key,n,new jc(a.toArray()),xl.none())}}function ige(e,t,r){e instanceof x2?function(a,s,i){const o=a.value.clone(),c=g9(a.fieldTransforms,s,i.transformResults);o.setAll(c),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof Bm?function(a,s,i){if(!M_(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=g9(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(TJ(a)),c.setAll(o),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function Ly(e,t,r,n){return e instanceof x2?function(s,i,o,c){if(!M_(s.precondition,i))return o;const u=s.value.clone(),d=x9(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Bm?function(s,i,o,c){if(!M_(s.precondition,i))return o;const u=x9(s.fieldTransforms,c,i),d=i.data;return d.setAll(TJ(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,i,o){return M_(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function oge(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=CJ(n.transform,a||null);s!=null&&(r===null&&(r=Gl.empty()),r.set(n.field,s))}return r||null}function p9(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Fv(n,a,(s,i)=>age(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class x2 extends KN{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Bm extends KN{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function TJ(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function g9(e,t,r){const n=new Map;sa(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);n.set(s.field,nge(i,o,r[a]))}return n}function x9(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,rge(s,i,t))}return n}class qN extends KN{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lge extends KN{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cge{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&ige(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=Ly(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=Ly(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=wJ();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const c=BJ(i,o);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Xr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Bn())}isEqual(t){return this.batchId===t.batchId&&Fv(this.mutations,t.mutations,(r,n)=>p9(r,n))&&Fv(this.baseMutations,t.baseMutations,(r,n)=>p9(r,n))}}class vD{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){sa(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return Ype}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new vD(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uge{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dge{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,Rn;function Age(e){switch(e){case Ct.OK:return Hr(64938);case Ct.CANCELLED:case Ct.UNKNOWN:case Ct.DEADLINE_EXCEEDED:case Ct.RESOURCE_EXHAUSTED:case Ct.INTERNAL:case Ct.UNAVAILABLE:case Ct.UNAUTHENTICATED:return!1;case Ct.INVALID_ARGUMENT:case Ct.NOT_FOUND:case Ct.ALREADY_EXISTS:case Ct.PERMISSION_DENIED:case Ct.FAILED_PRECONDITION:case Ct.ABORTED:case Ct.OUT_OF_RANGE:case Ct.UNIMPLEMENTED:case Ct.DATA_LOSS:return!0;default:return Hr(15467,{code:e})}}function jJ(e){if(e===void 0)return dh("GRPC error has no .code"),Ct.UNKNOWN;switch(e){case si.OK:return Ct.OK;case si.CANCELLED:return Ct.CANCELLED;case si.UNKNOWN:return Ct.UNKNOWN;case si.DEADLINE_EXCEEDED:return Ct.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return Ct.RESOURCE_EXHAUSTED;case si.INTERNAL:return Ct.INTERNAL;case si.UNAVAILABLE:return Ct.UNAVAILABLE;case si.UNAUTHENTICATED:return Ct.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return Ct.INVALID_ARGUMENT;case si.NOT_FOUND:return Ct.NOT_FOUND;case si.ALREADY_EXISTS:return Ct.ALREADY_EXISTS;case si.PERMISSION_DENIED:return Ct.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return Ct.FAILED_PRECONDITION;case si.ABORTED:return Ct.ABORTED;case si.OUT_OF_RANGE:return Ct.OUT_OF_RANGE;case si.UNIMPLEMENTED:return Ct.UNIMPLEMENTED;case si.DATA_LOSS:return Ct.DATA_LOSS;default:return Hr(39323,{code:e})}}(Rn=si||(si={}))[Rn.OK=0]="OK",Rn[Rn.CANCELLED=1]="CANCELLED",Rn[Rn.UNKNOWN=2]="UNKNOWN",Rn[Rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rn[Rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rn[Rn.NOT_FOUND=5]="NOT_FOUND",Rn[Rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rn[Rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rn[Rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rn[Rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rn[Rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rn[Rn.ABORTED=10]="ABORTED",Rn[Rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rn[Rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rn[Rn.INTERNAL=13]="INTERNAL",Rn[Rn.UNAVAILABLE=14]="UNAVAILABLE",Rn[Rn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fge(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hge=new X0([4294967295,4294967295],0);function v9(e){const t=fge().encode(e),r=new zY;return r.update(t),new Uint8Array(r.digest())}function b9(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new X0([r,n],0),new X0([a,s],0)]}class bD{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new hy(`Invalid padding: ${r}`);if(n<0)throw new hy(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new hy(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new hy(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=X0.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(X0.fromNumber(n)));return a.compare(hge)===1&&(a=new X0([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=v9(t),[n,a]=b9(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new bD(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.ge===0)return;const r=v9(t),[n,a]=b9(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class hy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,v2.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new WN(Xr.min(),a,new ls(kn),Ah(),Bn())}}class v2{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new v2(n,r,Bn(),Bn(),Bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class IJ{constructor(t,r){this.targetId=t,this.Ce=r}}class FJ{constructor(t,r,n=Xi.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class y9{constructor(){this.ve=0,this.Fe=w9(),this.Me=Xi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Bn(),r=Bn(),n=Bn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Hr(38017,{changeType:s})}}),new v2(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=w9()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,sa(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mge{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ah(),this.Je=oC(),this.He=oC(),this.Ye=new ls(kn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Hr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(l6(s))if(n===0){const i=new br(s.path);this.et(r,i,zo.newNoDocument(i,Xr.min()))}else sa(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(t),c=o?this.ct(o,t,i):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=dm(n).toUint8Array()}catch(c){if(c instanceof aJ)return Zp("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new bD(i,a,s)}catch(c){return Zp(c instanceof hy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&l6(o.target)){const c=new br(o.target.path);this.It(c).has(i)||this.Et(i,c)||this.et(i,c,zo.newNoDocument(c,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=Bn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new WN(t,r,this.Ye,this.je,n);return this.je=Ah(),this.Je=oC(),this.He=oC(),this.Ye=new ls(kn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new y9,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new _i(kn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new _i(kn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||cr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new y9),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function oC(){return new ls(br.comparator)}function w9(){return new ls(br.comparator)}const pge={asc:"ASCENDING",desc:"DESCENDING"},gge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xge={and:"AND",or:"OR"};class vge{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function u6(e,t){return e.useProto3Json||UN(t)?t:{value:t}}function DS(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function OJ(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bge(e,t){return DS(e,t.toTimestamp())}function VA(e){return sa(!!e,49232),Xr.fromTimestamp(function(r){const n=um(r);return new ir(n.seconds,n.nanos)}(e))}function yD(e,t){return d6(e,t).canonicalString()}function d6(e,t){const r=function(a){return new Sa(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function DJ(e){const t=Sa.fromString(e);return sa(UJ(t),10190,{key:t.toString()}),t}function A6(e,t){return yD(e.databaseId,t.path)}function fT(e,t){const r=DJ(t);if(r.get(1)!==e.databaseId.projectId)throw new qt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new qt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new br(RJ(r))}function PJ(e,t){return yD(e.databaseId,t)}function yge(e){const t=DJ(e);return t.length===4?Sa.emptyPath():RJ(t)}function f6(e){return new Sa(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function RJ(e){return sa(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function E9(e,t,r){return{name:A6(e,t),fields:r.value.mapValue.fields}}function wge(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Hr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(sa(d===void 0||typeof d=="string",58123),Xi.fromBase64String(d||"")):(sa(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Xi.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(u){const d=u.code===void 0?Ct.UNKNOWN:jJ(u.code);return new qt(d,u.message||"")}(i);r=new FJ(n,a,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=fT(e,n.document.name),s=VA(n.document.updateTime),i=n.document.createTime?VA(n.document.createTime):Xr.min(),o=new Gl({mapValue:{fields:n.document.fields}}),c=zo.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new U_(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=fT(e,n.document),s=n.readTime?VA(n.readTime):Xr.min(),i=zo.newNoDocument(a,s),o=n.removedTargetIds||[];r=new U_([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=fT(e,n.document),s=n.removedTargetIds||[];r=new U_([],s,a,null)}else{if(!("filter"in t))return Hr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new dge(a,s),o=n.targetId;r=new IJ(o,i)}}return r}function Ege(e,t){let r;if(t instanceof x2)r={update:E9(e,t.key,t.value)};else if(t instanceof qN)r={delete:A6(e,t.key)};else if(t instanceof Bm)r={update:E9(e,t.key,t.data),updateMask:Ige(t.fieldMask)};else{if(!(t instanceof lge))return Hr(16599,{Vt:t.type});r={verify:A6(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof xw)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Lv)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof vw)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof OS)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Hr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:bge(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Hr(27497)}(e,t.precondition)),r}function Cge(e,t){return e&&e.length>0?(sa(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?VA(a.updateTime):VA(s);return i.isEqual(Xr.min())&&(i=VA(s)),new sge(i,a.transformResults||[])}(r,t))):[]}function _ge(e,t){return{documents:[PJ(e,t.path)]}}function Sge(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=PJ(e,a);const s=function(u){if(u.length!==0)return MJ(Od.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Mx(h.field),direction:Bge(h.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=u6(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function Nge(e){let t=yge(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){sa(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=LJ(f);return h instanceof Od&&hJ(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(g){return new gw(Ux(g.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,UN(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,p=f.values||[];return new Rv(p,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new Rv(p,h)}(r.endAt)),Gpe(t,a,i,s,o,"F",c,u)}function kge(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function LJ(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Ux(r.unaryFilter.field);return Ai.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Ux(r.unaryFilter.field);return Ai.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ux(r.unaryFilter.field);return Ai.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ux(r.unaryFilter.field);return Ai.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Hr(61313);default:return Hr(60726)}}(e):e.fieldFilter!==void 0?function(r){return Ai.create(Ux(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Hr(58110);default:return Hr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Od.create(r.compositeFilter.filters.map(n=>LJ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Hr(1026)}}(r.compositeFilter.op))}(e):Hr(30097,{filter:e})}function Bge(e){return pge[e]}function Tge(e){return gge[e]}function jge(e){return xge[e]}function Mx(e){return{fieldPath:e.canonicalString()}}function Ux(e){return $i.fromServerFormat(e.fieldPath)}function MJ(e){return e instanceof Ai?function(r){if(r.op==="=="){if(u9(r.value))return{unaryFilter:{field:Mx(r.field),op:"IS_NAN"}};if(c9(r.value))return{unaryFilter:{field:Mx(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(u9(r.value))return{unaryFilter:{field:Mx(r.field),op:"IS_NOT_NAN"}};if(c9(r.value))return{unaryFilter:{field:Mx(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mx(r.field),op:Tge(r.op),value:r.value}}}(e):e instanceof Od?function(r){const n=r.getFilters().map(a=>MJ(a));return n.length===1?n[0]:{compositeFilter:{op:jge(r.op),filters:n}}}(e):Hr(54877,{filter:e})}function Ige(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function UJ(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(t,r,n,a,s=Xr.min(),i=Xr.min(),o=Xi.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(t){return new L0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new L0(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new L0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new L0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fge{constructor(t){this.yt=t}}function Oge(e){const t=Nge({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?FS(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dge{constructor(){this.Cn=new Pge}addToCollectionParentIndex(t,r){return this.Cn.add(r),Dt.resolve()}getCollectionParents(t,r){return Dt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Dt.resolve()}deleteFieldIndex(t,r){return Dt.resolve()}deleteAllFieldIndexes(t){return Dt.resolve()}createTargetIndexes(t,r){return Dt.resolve()}getDocumentsMatchingTarget(t,r){return Dt.resolve(null)}getIndexType(t,r){return Dt.resolve(0)}getFieldIndexes(t,r){return Dt.resolve([])}getNextCollectionGroupToUpdate(t){return Dt.resolve(null)}getMinOffset(t,r){return Dt.resolve(cm.min())}getMinOffsetFromCollectionGroup(t,r){return Dt.resolve(cm.min())}updateCollectionGroup(t,r,n){return Dt.resolve()}updateIndexEntries(t,r){return Dt.resolve()}}class Pge{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new _i(Sa.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new _i(Sa.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QJ=41943040;class Ql{static withCacheSize(t){return new Ql(t,Ql.DEFAULT_COLLECTION_PERCENTILE,Ql.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ql.DEFAULT_COLLECTION_PERCENTILE=10,Ql.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ql.DEFAULT=new Ql(QJ,Ql.DEFAULT_COLLECTION_PERCENTILE,Ql.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ql.DISABLED=new Ql(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Mv(0)}static cr(){return new Mv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="LruGarbageCollector",Rge=1048576;function S9([e,t],[r,n]){const a=kn(e,r);return a===0?kn(t,n):a}class Lge{constructor(t){this.Ir=t,this.buffer=new _i(S9),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();S9(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Mge{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){cr(_9,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){v1(r)?cr(_9,"Ignoring IndexedDB error during garbage collection: ",r):await x1(r)}await this.Vr(3e5)})}}class Uge{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Dt.resolve(MN.ce);const n=new Lge(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(cr("LruGarbageCollector","Garbage collection skipped; disabled"),Dt.resolve(C9)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(cr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C9):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,o,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(cr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,o=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),Rx()<=Nn.DEBUG&&cr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function Qge(e,t){return new Uge(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hge{constructor(){this.changes=new xg(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,zo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Dt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vge{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zge{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&Ly(n.mutation,a,jc.empty(),ir.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Bn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Bn()){const a=_p();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=fy();return s.forEach((o,c)=>{i=i.insert(o,c.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=_p();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Bn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,a){let s=Ah();const i=Ry(),o=function(){return Ry()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Bm)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Ly(d.mutation,u,d.mutation.getFieldMask(),ir.now())):i.set(u.key,jc.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new Vge(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(t,r){const n=Ry();let a=new ls((i,o)=>i-o),s=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||jc.empty();d=o.applyToLocalView(u,d),n.set(c,d);const f=(a.get(o.batchId)||Bn()).add(c);a=a.insert(o.batchId,f)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,f=wJ();d.forEach(h=>{if(!s.has(h)){const p=BJ(r.get(h),n.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Dt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return br.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):gD(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Dt.resolve(_p());let o=hw,c=s;return i.next(u=>Dt.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?Dt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Bn())).next(d=>({batchId:o,changes:yJ(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new br(r)).next(n=>{let a=fy();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=fy();return this.indexManager.getCollectionParents(t,s).next(o=>Dt.forEach(o,c=>{const u=function(f,h){return new gg(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,zo.newInvalidDocument(d)))});let o=fy();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Ly(d.mutation,u,jc.empty(),ir.now()),$N(r,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ge{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Dt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:VA(a.createTime)}}(r)),Dt.resolve()}getNamedQuery(t,r){return Dt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Oge(a.bundledQuery),readTime:VA(a.readTime)}}(r)),Dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gge{constructor(){this.overlays=new ls(br.comparator),this.qr=new Map}getOverlay(t,r){return Dt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=_p();return Dt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Dt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Dt.resolve()}getOverlaysForCollection(t,r,n){const a=_p(),s=r.length+1,i=new br(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Dt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new ls((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=_p(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=_p(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return Dt.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new uge(r,n));let s=this.qr.get(r);s===void 0&&(s=Bn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kge{constructor(){this.sessionToken=Xi.EMPTY_BYTE_STRING}getSessionToken(t){return Dt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.Qr=new _i(Qi.$r),this.Ur=new _i(Qi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Qi(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Qi(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new br(new Sa([])),n=new Qi(r,t),a=new Qi(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new br(new Sa([])),n=new Qi(r,t),a=new Qi(r,t+1);let s=Bn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new Qi(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Qi{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return br.comparator(t.key,r.key)||kn(t.Yr,r.Yr)}static Kr(t,r){return kn(t.Yr,r.Yr)||br.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qge{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new _i(Qi.$r)}checkEmpty(t){return Dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new cge(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Qi(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Dt.resolve(i)}lookupMutationBatch(t,r){return Dt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Dt.resolve(this.mutationQueue.length===0?fD:this.tr-1)}getAllMutationBatches(t){return Dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Qi(r,0),a=new Qi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),Dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new _i(kn);return r.forEach(a=>{const s=new Qi(a,0),i=new Qi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),Dt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;br.isDocumentKey(s)||(s=s.child(""));const i=new Qi(new br(s),0);let o=new _i(kn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(c.Yr)),!0)},i),Dt.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){sa(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Dt.forEach(r.mutations,a=>{const s=new Qi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Qi(r,0),a=this.Zr.firstAfterOrEqual(n);return Dt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Dt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wge{constructor(t){this.ri=t,this.docs=function(){return new ls(br.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Dt.resolve(n?n.document.mutableCopy():zo.newInvalidDocument(r))}getEntries(t,r){let n=Ah();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():zo.newInvalidDocument(a))}),Dt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=Ah();const i=r.path,o=new br(i.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||Cpe(Epe(d),n)<=0||(a.has(d.key)||$N(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Dt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Hr(9500)}ii(t,r){return Dt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new Xge(this)}getSize(t){return Dt.resolve(this.size)}}class Xge extends Hge{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Dt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yge{constructor(t){this.persistence=t,this.si=new xg(r=>mD(r),pD),this.lastRemoteSnapshotVersion=Xr.min(),this.highestTargetId=0,this.oi=0,this._i=new wD,this.targetCount=0,this.ai=Mv.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Dt.resolve()}getLastRemoteSnapshotVersion(t){return Dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Dt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Dt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Dt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new Mv(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Dt.resolve()}updateTargetData(t,r){return this.Pr(r),Dt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Dt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),Dt.waitFor(s).next(()=>a)}getTargetCount(t){return Dt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Dt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Dt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),Dt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Dt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Dt.resolve(n)}containsKey(t,r){return Dt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HJ{constructor(t,r){this.ui={},this.overlays={},this.ci=new MN(0),this.li=!1,this.li=!0,this.hi=new Kge,this.referenceDelegate=t(this),this.Pi=new Yge(this),this.indexManager=new Dge,this.remoteDocumentCache=function(a){return new Wge(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Fge(r),this.Ii=new $ge(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Gge,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new qge(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){cr("MemoryPersistence","Starting transaction:",t);const a=new Jge(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Dt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class Jge extends Spe{constructor(t){super(),this.currentSequenceNumber=t}}class ED{constructor(t){this.persistence=t,this.Ri=new wD,this.Vi=null}static mi(t){return new ED(t)}get fi(){if(this.Vi)return this.Vi;throw Hr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Dt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Dt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Dt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dt.forEach(this.fi,n=>{const a=br.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Xr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Dt.or([()=>Dt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class PS{constructor(t,r){this.persistence=t,this.pi=new xg(n=>Bpe(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=Qge(this,r)}static mi(t,r){return new PS(t,r)}Ei(){}di(t){return Dt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Dt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Dt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(o=>{o||(n++,s.removeEntry(i,Xr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=R_(t.data.value)),r}br(t,r,n){return Dt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Dt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=Bn(),a=Bn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new CD(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zge{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class exe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return jfe()?8:Npe(Zo())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new Zge;return this.Ss(t,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(t,r,i,o.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(Rx()<=Nn.DEBUG&&cr("QueryEngine","SDK will not create cache indexes for query:",Lx(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Dt.resolve()):(Rx()<=Nn.DEBUG&&cr("QueryEngine","Query:",Lx(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Rx()<=Nn.DEBUG&&cr("QueryEngine","The SDK decides to create cache indexes for query:",Lx(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,HA(r))):Dt.resolve())}ys(t,r){if(h9(r))return Dt.resolve(null);let n=HA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=FS(r,null,"F"),n=HA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=Bn(...s);return this.ps.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,o);return this.Cs(r,u,i,c.readTime)?this.ys(t,FS(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return h9(r)||a.isEqual(Xr.min())?Dt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?Dt.resolve(null):(Rx()<=Nn.DEBUG&&cr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Lx(r)),this.vs(t,i,r,wpe(a,hw)).next(o=>o))})}Ds(t,r){let n=new _i(vJ(t));return r.forEach((a,s)=>{$N(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return Rx()<=Nn.DEBUG&&cr("QueryEngine","Using full collection scan to execute query:",Lx(r)),this.ps.getDocumentsMatchingQuery(t,r,cm.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="LocalStore",txe=3e8;class rxe{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new ls(kn),this.xs=new xg(s=>mD(s),pD),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new zge(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function nxe(e,t,r,n){return new rxe(e,t,r,n)}async function VJ(e,t){const r=Zr(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let c=Bn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function axe(e,t){const r=Zr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const f=u.batch,h=f.keys();let p=Dt.resolve();return h.forEach(g=>{p=p.next(()=>d.getEntry(c,g)).next(x=>{const b=u.docVersions.get(g);sa(b!==null,48541),x.version.compareTo(b)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let c=Bn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function zJ(e){const t=Zr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function sxe(e,t){const r=Zr(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(Xi.EMPTY_BYTE_STRING,Xr.min()).withLastLimboFreeSnapshotVersion(Xr.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),a=a.insert(f,p),function(x,b,y){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=txe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,p,d)&&o.push(r.Pi.updateTargetData(s,p))});let c=Ah(),u=Bn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(ixe(s,i,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(Xr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return Dt.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function ixe(e,t,r){let n=Bn(),a=Bn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=Ah();return r.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),c.isNoDocument()&&c.version.isEqual(Xr.min())?(t.removeEntry(o,c.readTime),i=i.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),i=i.insert(o,c)):cr(_D,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{ks:i,qs:a}})}function oxe(e,t){const r=Zr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=fD),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function lxe(e,t){const r=Zr(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Dt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new L0(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function h6(e,t,r){const n=Zr(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!v1(i))throw i;cr(_D,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function N9(e,t,r){const n=Zr(e);let a=Xr.min(),s=Bn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const f=Zr(c),h=f.xs.get(d);return h!==void 0?Dt.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,i,HA(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Xr.min(),r?s:Bn())).next(o=>(cxe(n,qpe(t),o),{documents:o,Qs:s})))}function cxe(e,t,r){let n=e.Os.get(t)||Xr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class k9{constructor(){this.activeTargetIds=ege()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class uxe{constructor(){this.Mo=new k9,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new k9,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9="ConnectivityMonitor";class T9{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){cr(B9,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){cr(B9,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lC=null;function m6(){return lC===null?lC=function(){return 268435456+Math.round(2147483648*Math.random())}():lC++,"0x"+lC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="RestConnection",Axe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fxe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===TS?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=m6(),o=this.zo(t,r.toUriEncodedString());cr(hT,`Sending RPC '${t}' ${i}:`,o,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(o),d=Sh(u);return this.Jo(t,o,c,n,d).then(f=>(cr(hT,`Received RPC '${t}' ${i}: `,f),f),f=>{throw Zp(hT,`RPC '${t}' ${i} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+g1}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=Axe[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hxe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="WebChannelConnection";class mxe extends fxe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=m6();return new Promise((o,c)=>{const u=new $Y;u.setWithCredentials(!0),u.listenOnce(GY.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case P_.NO_ERROR:const f=u.getResponseJson();cr(Io,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(f)),o(f);break;case P_.TIMEOUT:cr(Io,`RPC '${t}' ${i} timed out`),c(new qt(Ct.DEADLINE_EXCEEDED,"Request time out"));break;case P_.HTTP_ERROR:const h=u.getStatus();if(cr(Io,`RPC '${t}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Ct).indexOf(w)>=0?w:Ct.UNKNOWN}(g.status);c(new qt(x,g.message))}else c(new qt(Ct.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new qt(Ct.UNAVAILABLE,"Connection failed."));break;default:Hr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{cr(Io,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);cr(Io,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=m6(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=WY(),o=qY(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");cr(Io,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=i.createWebChannel(d,c);this.I_(f);let h=!1,p=!1;const g=new hxe({Yo:b=>{p?cr(Io,`Not sending because RPC '${t}' stream ${a} is closed:`,b):(h||(cr(Io,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),cr(Io,`RPC '${t}' stream ${a} sending:`,b),f.send(b))},Zo:()=>f.close()}),x=(b,y,w)=>{b.listen(y,S=>{try{w(S)}catch(j){setTimeout(()=>{throw j},0)}})};return x(f,Ay.EventType.OPEN,()=>{p||(cr(Io,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(f,Ay.EventType.CLOSE,()=>{p||(p=!0,cr(Io,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),x(f,Ay.EventType.ERROR,b=>{p||(p=!0,Zp(Io,`RPC '${t}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),g.a_(new qt(Ct.UNAVAILABLE,"The operation could not be completed")))}),x(f,Ay.EventType.MESSAGE,b=>{var y;if(!p){const w=b.data[0];sa(!!w,16349);const S=w,j=(S==null?void 0:S.error)||((y=S[0])==null?void 0:y.error);if(j){cr(Io,`RPC '${t}' stream ${a} received error:`,j);const N=j.status;let F=function(B){const P=si[B];if(P!==void 0)return jJ(P)}(N),E=j.message;F===void 0&&(F=Ct.INTERNAL,E="Unknown error status: "+N+" with message "+j.message),p=!0,g.a_(new qt(F,E)),f.close()}else cr(Io,`RPC '${t}' stream ${a} received:`,w),g.u_(w)}}),x(o,KY.STAT_EVENT,b=>{b.stat===n6.PROXY?cr(Io,`RPC '${t}' stream ${a} detected buffering proxy`):b.stat===n6.NOPROXY&&cr(Io,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function mT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(e){return new vge(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $J{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&cr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9="PersistentStream";class GJ{constructor(t,r,n,a,s,i,o,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $J(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Ct.RESOURCE_EXHAUSTED?(dh(r.toString()),dh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new qt(Ct.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return cr(j9,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(cr(j9,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pxe extends GJ{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=wge(this.serializer,t),n=function(s){if(!("targetChange"in s))return Xr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Xr.min():i.readTime?VA(i.readTime):Xr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=f6(this.serializer),r.addTarget=function(s,i){let o;const c=i.target;if(o=l6(c)?{documents:_ge(s,c)}:{query:Sge(s,c).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=OJ(s,i.resumeToken);const u=u6(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Xr.min())>0){o.readTime=DS(s,i.snapshotVersion.toTimestamp());const u=u6(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,t);const n=kge(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=f6(this.serializer),r.removeTarget=t,this.q_(r)}}class gxe extends GJ{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return sa(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,sa(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){sa(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Cge(t.writeResults,t.commitTime),n=VA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=f6(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>Ege(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xxe{}class vxe extends xxe{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new qt(Ct.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,d6(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new qt(Ct.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(t,d6(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new qt(Ct.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class bxe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dh(r),this.aa=!1):cr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="RemoteStore";class yxe{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{vg(this)&&(cr(eg,"Restarting streams for network reachability change."),await async function(c){const u=Zr(c);u.Ea.add(4),await b2(u),u.Ra.set("Unknown"),u.Ea.delete(4),await YN(u)}(this))})}),this.Ra=new bxe(n,a)}}async function YN(e){if(vg(e))for(const t of e.da)await t(!0)}async function b2(e){for(const t of e.da)await t(!1)}function KJ(e,t){const r=Zr(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),BD(r)?kD(r):b1(r).O_()&&ND(r,t))}function SD(e,t){const r=Zr(e),n=b1(r);r.Ia.delete(t),n.O_()&&qJ(r,t),r.Ia.size===0&&(n.O_()?n.L_():vg(r)&&r.Ra.set("Unknown"))}function ND(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Xr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}b1(e).Y_(t)}function qJ(e,t){e.Va.Ue(t),b1(e).Z_(t)}function kD(e){e.Va=new mge({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),b1(e).start(),e.Ra.ua()}function BD(e){return vg(e)&&!b1(e).x_()&&e.Ia.size>0}function vg(e){return Zr(e).Ea.size===0}function WJ(e){e.Va=void 0}async function wxe(e){e.Ra.set("Online")}async function Exe(e){e.Ia.forEach((t,r)=>{ND(e,t)})}async function Cxe(e,t){WJ(e),BD(e)?(e.Ra.ha(t),kD(e)):e.Ra.set("Unknown")}async function _xe(e,t,r){if(e.Ra.set("Online"),t instanceof FJ&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){cr(eg,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await RS(e,n)}else if(t instanceof U_?e.Va.Ze(t):t instanceof IJ?e.Va.st(t):e.Va.tt(t),!r.isEqual(Xr.min()))try{const n=await zJ(e.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,i))}}),o.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(Xi.EMPTY_BYTE_STRING,d.snapshotVersion)),qJ(s,c);const f=new L0(d.target,c,u,d.sequenceNumber);ND(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){cr(eg,"Failed to raise snapshot:",n),await RS(e,n)}}async function RS(e,t,r){if(!v1(t))throw t;e.Ea.add(1),await b2(e),e.Ra.set("Offline"),r||(r=()=>zJ(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{cr(eg,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await YN(e)})}function XJ(e,t){return t().catch(r=>RS(e,r,t))}async function JN(e){const t=Zr(e),r=fm(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:fD;for(;Sxe(t);)try{const a=await oxe(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,Nxe(t,a)}catch(a){await RS(t,a)}YJ(t)&&JJ(t)}function Sxe(e){return vg(e)&&e.Ta.length<10}function Nxe(e,t){e.Ta.push(t);const r=fm(e);r.O_()&&r.X_&&r.ea(t.mutations)}function YJ(e){return vg(e)&&!fm(e).x_()&&e.Ta.length>0}function JJ(e){fm(e).start()}async function kxe(e){fm(e).ra()}async function Bxe(e){const t=fm(e);for(const r of e.Ta)t.ea(r.mutations)}async function Txe(e,t,r){const n=e.Ta.shift(),a=vD.from(n,t,r);await XJ(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await JN(e)}async function jxe(e,t){t&&fm(e).X_&&await async function(n,a){if(function(i){return Age(i)&&i!==Ct.ABORTED}(a.code)){const s=n.Ta.shift();fm(n).B_(),await XJ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await JN(n)}}(e,t),YJ(e)&&JJ(e)}async function I9(e,t){const r=Zr(e);r.asyncQueue.verifyOperationInProgress(),cr(eg,"RemoteStore received new credentials");const n=vg(r);r.Ea.add(3),await b2(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await YN(r)}async function Ixe(e,t){const r=Zr(e);t?(r.Ea.delete(2),await YN(r)):t||(r.Ea.add(2),await b2(r),r.Ra.set("Unknown"))}function b1(e){return e.ma||(e.ma=function(r,n,a){const s=Zr(r);return s.sa(),new pxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:wxe.bind(null,e),t_:Exe.bind(null,e),r_:Cxe.bind(null,e),H_:_xe.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),BD(e)?kD(e):e.Ra.set("Unknown")):(await e.ma.stop(),WJ(e))})),e.ma}function fm(e){return e.fa||(e.fa=function(r,n,a){const s=Zr(r);return s.sa(),new gxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:kxe.bind(null,e),r_:jxe.bind(null,e),ta:Bxe.bind(null,e),na:Txe.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await JN(e)):(await e.fa.stop(),e.Ta.length>0&&(cr(eg,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Yf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,o=new TD(t,r,i,a,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qt(Ct.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jD(e,t){if(dh("AsyncQueue",`${t}: ${e}`),v1(e))return new qt(Ct.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{static emptySet(t){return new fv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||br.comparator(r.key,n.key):(r,n)=>br.comparator(r.key,n.key),this.keyedMap=fy(),this.sortedSet=new ls(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof fv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new fv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(){this.ga=new ls(br.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Hr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class Uv{constructor(t,r,n,a,s,i,o,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Uv(t,r,fv.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&zN(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fxe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Oxe{constructor(){this.queries=O9(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=Zr(r),s=a.queries;a.queries=O9(),s.forEach((i,o)=>{for(const c of o.Sa)c.onError(n)})})(this,new qt(Ct.ABORTED,"Firestore shutting down"))}}function O9(){return new xg(e=>xJ(e),zN)}async function ID(e,t){const r=Zr(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new Fxe,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=jD(i,`Initialization of query '${Lx(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&OD(r)}async function FD(e,t){const r=Zr(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Dxe(e,t){const r=Zr(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&OD(r)}function Pxe(e,t,r){const n=Zr(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function OD(e){e.Ca.forEach(t=>{t.next()})}var p6,D9;(D9=p6||(p6={})).Ma="default",D9.Cache="cache";class DD{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new Uv(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Uv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==p6.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZJ{constructor(t){this.key=t}}class eZ{constructor(t){this.key=t}}class Rxe{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bn(),this.mutatedKeys=Bn(),this.eu=vJ(t),this.tu=new fv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new F9,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),p=$N(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;h&&p?h.data.isEqual(p.data)?g!==x&&(n.track({type:3,doc:p}),b=!0):this.su(h,p)||(n.track({type:2,doc:p}),b=!0,(c&&this.eu(p,c)>0||u&&this.eu(p,u)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),b=!0):h&&!p&&(n.track({type:1,doc:h}),b=!0,(c||u)&&(o=!0)),b&&(p?(i=i.add(p),s=x?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,f)=>function(p,g){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hr(20277,{Rt:b})}};return x(p)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,i.length!==0||u?{snapshot:new Uv(this.query,t.tu,s,i,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new F9,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Bn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new eZ(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new ZJ(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=Bn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Uv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const PD="SyncEngine";class Lxe{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class Mxe{constructor(t){this.key=t,this.hu=!1}}class Uxe{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new xg(o=>xJ(o),zN),this.Iu=new Map,this.Eu=new Set,this.du=new ls(br.comparator),this.Au=new Map,this.Ru=new wD,this.Vu={},this.mu=new Map,this.fu=Mv.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Qxe(e,t,r=!0){const n=iZ(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await tZ(n,t,r,!0),a}async function Hxe(e,t){const r=iZ(e);await tZ(r,t,!0,!1)}async function tZ(e,t,r,n){const a=await lxe(e.localStore,HA(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await Vxe(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&KJ(e.remoteStore,a),o}async function Vxe(e,t,r,n,a){e.pu=(f,h,p)=>async function(x,b,y,w){let S=b.view.ru(y);S.Cs&&(S=await N9(x.localStore,b.query,!1).then(({documents:E})=>b.view.ru(E,S)));const j=w&&w.targetChanges.get(b.targetId),N=w&&w.targetMismatches.get(b.targetId)!=null,F=b.view.applyChanges(S,x.isPrimaryClient,j,N);return R9(x,b.targetId,F.au),F.snapshot}(e,f,h,p);const s=await N9(e.localStore,t,!0),i=new Rxe(t,s.Qs),o=i.ru(s.documents),c=v2.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(o,e.isPrimaryClient,c);R9(e,r,u.au);const d=new Lxe(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function zxe(e,t,r){const n=Zr(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!zN(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await h6(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&SD(n.remoteStore,a.targetId),g6(n,a.targetId)}).catch(x1)):(g6(n,a.targetId),await h6(n.localStore,a.targetId,!0))}async function $xe(e,t){const r=Zr(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),SD(r.remoteStore,n.targetId))}async function Gxe(e,t,r){const n=Zxe(e);try{const a=await function(i,o){const c=Zr(i),u=ir.now(),d=o.reduce((p,g)=>p.add(g.key),Bn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Ah(),x=Bn();return c.Ns.getEntries(p,d).next(b=>{g=b,g.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,g)).next(b=>{f=b;const y=[];for(const w of o){const S=oge(w,f.get(w.key).overlayedDocument);S!=null&&y.push(new Bm(w.key,S,dJ(S.value.mapValue),xl.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,y,o)}).next(b=>{h=b;const y=b.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(p,b.batchId,y)})}).then(()=>({batchId:h.batchId,changes:yJ(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,c){let u=i.Vu[i.currentUser.toKey()];u||(u=new ls(kn)),u=u.insert(o,c),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await y2(n,a.changes),await JN(n.remoteStore)}catch(a){const s=jD(a,"Failed to persist write");r.reject(s)}}async function rZ(e,t){const r=Zr(e);try{const n=await sxe(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(sa(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?sa(i.hu,14607):a.removedDocuments.size>0&&(sa(i.hu,42227),i.hu=!1))}),await y2(r,n,t)}catch(n){await x1(n)}}function P9(e,t,r){const n=Zr(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(i,o){const c=Zr(i);c.onlineState=o;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(o)&&(u=!0)}),u&&OD(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Kxe(e,t,r){const n=Zr(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new ls(br.comparator);i=i.insert(s,zo.newNoDocument(s,Xr.min()));const o=Bn().add(s),c=new WN(Xr.min(),new Map,new ls(kn),i,o);await rZ(n,c),n.du=n.du.remove(s),n.Au.delete(t),RD(n)}else await h6(n.localStore,t,!1).then(()=>g6(n,t,r)).catch(x1)}async function qxe(e,t){const r=Zr(e),n=t.batch.batchId;try{const a=await axe(r.localStore,t);aZ(r,n,null),nZ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await y2(r,a)}catch(a){await x1(a)}}async function Wxe(e,t,r){const n=Zr(e);try{const a=await function(i,o){const c=Zr(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(f=>(sa(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);aZ(n,t,r),nZ(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await y2(n,a)}catch(a){await x1(a)}}function nZ(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function aZ(e,t,r){const n=Zr(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function g6(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||sZ(e,n)})}function sZ(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(SD(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),RD(e))}function R9(e,t,r){for(const n of r)n instanceof ZJ?(e.Ru.addReference(n.key,t),Xxe(e,n)):n instanceof eZ?(cr(PD,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||sZ(e,n.key)):Hr(19791,{wu:n})}function Xxe(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(cr(PD,"New document in limbo: "+r),e.Eu.add(n),RD(e))}function RD(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new br(Sa.fromString(t)),n=e.fu.next();e.Au.set(n,new Mxe(r)),e.du=e.du.insert(r,n),KJ(e.remoteStore,new L0(HA(VN(r.path)),n,"TargetPurposeLimboResolution",MN.ce))}}async function y2(e,t,r){const n=Zr(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,c)=>{i.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=CD.As(c.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(c,u){const d=Zr(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Dt.forEach(u,h=>Dt.forEach(h.Es,p=>d.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Dt.forEach(h.ds,p=>d.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!v1(f))throw f;cr(_D,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=d.Ms.get(h),g=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(n.localStore,s))}async function Yxe(e,t){const r=Zr(e);if(!r.currentUser.isEqual(t)){cr(PD,"User change. New user:",t.toKey());const n=await VJ(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(o=>{o.forEach(c=>{c.reject(new qt(Ct.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await y2(r,n.Ls)}}function Jxe(e,t){const r=Zr(e),n=r.Au.get(t);if(n&&n.hu)return Bn().add(n.key);{let a=Bn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function iZ(e){const t=Zr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rZ.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jxe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Kxe.bind(null,t),t.Pu.H_=Dxe.bind(null,t.eventManager),t.Pu.yu=Pxe.bind(null,t.eventManager),t}function Zxe(e){const t=Zr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qxe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wxe.bind(null,t),t}class LS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=XN(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return nxe(this.persistence,new exe,t.initialUser,this.serializer)}Cu(t){return new HJ(ED.mi,this.serializer)}Du(t){return new uxe}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}LS.provider={build:()=>new LS};class eve extends LS{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){sa(this.persistence.referenceDelegate instanceof PS,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Mge(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Ql.withCacheSize(this.cacheSizeBytes):Ql.DEFAULT;return new HJ(n=>PS.mi(n,r),this.serializer)}}class x6{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>P9(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yxe.bind(null,this.syncEngine),await Ixe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Oxe}()}createDatastore(t){const r=XN(t.databaseInfo.databaseId),n=function(s){return new mxe(s)}(t.databaseInfo);return function(s,i,o,c){return new vxe(s,i,o,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,o){return new yxe(n,a,s,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>P9(this.syncEngine,r,0),function(){return T9.v()?new T9:new dxe}())}createSyncEngine(t,r){return function(a,s,i,o,c,u,d){const f=new Uxe(a,s,i,o,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=Zr(a);cr(eg,"RemoteStore shutting down."),s.Ea.add(5),await b2(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}x6.provider={build:()=>new x6};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):dh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="FirestoreClient";class tve{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Uo.UNAUTHENTICATED,this.clientId=RN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{cr(hm,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(cr(hm,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Yf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=jD(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function pT(e,t){e.asyncQueue.verifyOperationInProgress(),cr(hm,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await VJ(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function L9(e,t){e.asyncQueue.verifyOperationInProgress();const r=await rve(e);cr(hm,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>I9(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>I9(t.remoteStore,a)),e._onlineComponents=t}async function rve(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){cr(hm,"Using user provided OfflineComponentProvider");try{await pT(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===Ct.FAILED_PRECONDITION||a.code===Ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Zp("Error using user provided cache. Falling back to memory cache: "+r),await pT(e,new LS)}}else cr(hm,"Using default OfflineComponentProvider"),await pT(e,new eve(void 0));return e._offlineComponents}async function oZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(cr(hm,"Using user provided OnlineComponentProvider"),await L9(e,e._uninitializedComponentsProvider._online)):(cr(hm,"Using default OnlineComponentProvider"),await L9(e,new x6))),e._onlineComponents}function nve(e){return oZ(e).then(t=>t.syncEngine)}async function MS(e){const t=await oZ(e),r=t.eventManager;return r.onListen=Qxe.bind(null,t.syncEngine),r.onUnlisten=zxe.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=Hxe.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=$xe.bind(null,t.syncEngine),r}function ave(e,t,r={}){const n=new Yf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new LD({next:h=>{d.Nu(),i.enqueueAndForget(()=>FD(s,f));const p=h.docs.has(o);!p&&h.fromCache?u.reject(new qt(Ct.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?u.reject(new qt(Ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new DD(VN(o.path),d,{includeMetadataChanges:!0,qa:!0});return ID(s,f)}(await MS(e),e.asyncQueue,t,r,n)),n.promise}function sve(e,t,r={}){const n=new Yf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new LD({next:h=>{d.Nu(),i.enqueueAndForget(()=>FD(s,f)),h.fromCache&&c.source==="server"?u.reject(new qt(Ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new DD(o,d,{includeMetadataChanges:!0,qa:!0});return ID(s,f)}(await MS(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lZ(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cZ="firestore.googleapis.com",U9=!0;class Q9{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new qt(Ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cZ,this.ssl=U9}else this.host=t.host,this.ssl=t.ssl??U9;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=QJ;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Rge)throw new qt(Ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}eJ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lZ(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new qt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new qt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new qt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ZN{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Q9({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qt(Ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new qt(Ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Q9(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new JY;switch(n.type){case"firstParty":return new mpe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new qt(Ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=M9.get(r);n&&(cr("ComponentProvider","Removing Datastore"),M9.delete(r),n.terminate())}(this),Promise.resolve()}}function uZ(e,t,r,n={}){var u;e=Yo(e,ZN);const a=Sh(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(TN(`https://${o}`),jN("Firestore",!0)),s.host!==cZ&&s.host!==o&&Zp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:o,ssl:a,emulatorOptions:n};if(!om(c,i)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=Uo.MOCK_USER;else{d=aY(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new qt(Ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Uo(h)}e._authCredentials=new Ape(new YY(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Rd(this.firestore,t,this._query)}}class ss{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jf(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ss(this.firestore,t,this._key)}toJSON(){return{type:ss._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(g2(r,ss._jsonSchema))return new ss(t,n||null,new br(Sa.fromString(r.referencePath)))}}ss._jsonSchemaVersion="firestore/documentReference/1.0",ss._jsonSchema={type:fi("string",ss._jsonSchemaVersion),referencePath:fi("string")};class Jf extends Rd{constructor(t,r,n){super(t,r,VN(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ss(this.firestore,null,new br(t))}withConverter(t){return new Jf(this.firestore,t,this._path)}}function Tt(e,t,...r){if(e=Xn(e),ZY("collection","path",t),e instanceof ZN){const n=Sa.fromString(t,...r);return t9(n),new Jf(e,null,n)}{if(!(e instanceof ss||e instanceof Jf))throw new qt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Sa.fromString(t,...r));return t9(n),new Jf(e.firestore,null,n)}}function dr(e,t,...r){if(e=Xn(e),arguments.length===1&&(t=RN.newId()),ZY("doc","path",t),e instanceof ZN){const n=Sa.fromString(t,...r);return e9(n),new ss(e,null,new br(n))}{if(!(e instanceof ss||e instanceof Jf))throw new qt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Sa.fromString(t,...r));return e9(n),new ss(e.firestore,e instanceof Jf?e.converter:null,new br(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9="AsyncQueue";class V9{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $J(this,"async_queue_retry"),this._c=()=>{const n=mT();n&&cr(H9,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=mT();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=mT();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Yf;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!v1(t))throw t;cr(H9,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,dh("INTERNAL UNHANDLED ERROR: ",z9(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=TD.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Hr(47125,{Pc:z9(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function z9(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Dd extends ZN{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new V9,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new V9(t),this._firestoreClient=void 0,await t}}}function MD(e,t){const r=typeof e=="object"?e:IN(),n=typeof e=="string"?e:TS,a=f2(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=eD("firestore");s&&uZ(a,...s)}return a}function y1(e){if(e._terminated)throw new qt(Ct.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ive(e),e._firestoreClient}function ive(e){var n,a,s;const t=e._freezeSettings(),r=function(o,c,u,d){return new Ipe(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,lZ(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new tve(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Nc(Xi.fromBase64String(t))}catch(r){throw new qt(Ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Nc(Xi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Nc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(g2(t,Nc._jsonSchema))return Nc.fromBase64String(t.bytes)}}Nc._jsonSchemaVersion="firestore/bytes/1.0",Nc._jsonSchema={type:fi("string",Nc._jsonSchemaVersion),bytes:fi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new qt(Ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $i(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new qt(Ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new qt(Ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return kn(this._lat,t._lat)||kn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_d._jsonSchemaVersion}}static fromJSON(t){if(g2(t,_d._jsonSchema))return new _d(t.latitude,t.longitude)}}_d._jsonSchemaVersion="firestore/geoPoint/1.0",_d._jsonSchema={type:fi("string",_d._jsonSchemaVersion),latitude:fi("number"),longitude:fi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Sd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(g2(t,Sd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Sd(t.vectorValues);throw new qt(Ct.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sd._jsonSchemaVersion="firestore/vectorValue/1.0",Sd._jsonSchema={type:fi("string",Sd._jsonSchemaVersion),vectorValues:fi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ove=/^__.*__$/;class lve{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Bm(t,this.data,this.fieldMask,r,this.fieldTransforms):new x2(t,this.data,r,this.fieldTransforms)}}class dZ{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Bm(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function AZ(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hr(40011,{Ac:e})}}class e4{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new e4({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return US(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(AZ(this.Ac)&&ove.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class cve{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||XN(t)}Cc(t,r,n,a=!1){return new e4({Ac:t,methodName:r,Dc:n,path:$i.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function C1(e){const t=e._freezeSettings(),r=XN(e._databaseId);return new cve(e._databaseId,!!t.ignoreUndefinedProperties,r)}function UD(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);VD("Data must be an object, but it was:",i,n);const o=pZ(n,i);let c,u;if(s.merge)c=new jc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=v6(t,f,r);if(!i.contains(h))throw new qt(Ct.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);xZ(d,h)||d.push(h)}c=new jc(d),u=i.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=i.fieldTransforms;return new lve(new Gl(o),c,u)}class t4 extends E1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof t4}}function uve(e,t,r){return new e4({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class QD extends E1{_toFieldTransform(t){return new kJ(t.path,new xw)}isEqual(t){return t instanceof QD}}class HD extends E1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=uve(this,t,!0),n=this.vc.map(s=>_1(s,r)),a=new Lv(n);return new kJ(t.path,a)}isEqual(t){return t instanceof HD&&om(this.vc,t.vc)}}function fZ(e,t,r,n){const a=e.Cc(1,t,r);VD("Data must be an object, but it was:",a,n);const s=[],i=Gl.empty();km(n,(c,u)=>{const d=zD(t,c,r);u=Xn(u);const f=a.yc(d);if(u instanceof t4)s.push(d);else{const h=_1(u,f);h!=null&&(s.push(d),i.set(d,h))}});const o=new jc(s);return new dZ(i,o,a.fieldTransforms)}function hZ(e,t,r,n,a,s){const i=e.Cc(1,t,r),o=[v6(t,n,r)],c=[a];if(s.length%2!=0)throw new qt(Ct.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(v6(t,s[h])),c.push(s[h+1]);const u=[],d=Gl.empty();for(let h=o.length-1;h>=0;--h)if(!xZ(u,o[h])){const p=o[h];let g=c[h];g=Xn(g);const x=i.yc(p);if(g instanceof t4)u.push(p);else{const b=_1(g,x);b!=null&&(u.push(p),d.set(p,b))}}const f=new jc(u);return new dZ(d,f,i.fieldTransforms)}function mZ(e,t,r,n=!1){return _1(r,e.Cc(n?4:3,t))}function _1(e,t){if(gZ(e=Xn(e)))return VD("Unsupported field value:",t,e),pZ(e,t);if(e instanceof E1)return function(n,a){if(!AZ(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let c=_1(o,a.wc(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Xn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return tge(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ir.fromDate(n);return{timestampValue:DS(a.serializer,s)}}if(n instanceof ir){const s=new ir(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:DS(a.serializer,s)}}if(n instanceof _d)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Nc)return{bytesValue:OJ(a.serializer,n._byteString)};if(n instanceof ss){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yD(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Sd)return function(i,o){return{mapValue:{fields:{[cJ]:{stringValue:uJ},[jS]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return xD(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${LN(n)}`)}(e,t)}function pZ(e,t){const r={};return nJ(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):km(e,(n,a)=>{const s=_1(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function gZ(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ir||e instanceof _d||e instanceof Nc||e instanceof ss||e instanceof E1||e instanceof Sd)}function VD(e,t,r){if(!gZ(r)||!tJ(r)){const n=LN(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function v6(e,t,r){if((t=Xn(t))instanceof w1)return t._internalPath;if(typeof t=="string")return zD(e,t);throw US("Field path arguments must be of type string or ",e,!1,void 0,r)}const dve=new RegExp("[~\\*/\\[\\]]");function zD(e,t,r){if(t.search(dve)>=0)throw US(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new w1(...t.split("."))._internalPath}catch{throw US(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function US(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new qt(Ct.INVALID_ARGUMENT,o+e+c)}function xZ(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Ave(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(r4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Ave extends $D{data(){return super.data()}}function r4(e,t){return typeof t=="string"?zD(e,t):t instanceof w1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vZ(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new qt(Ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GD{}class w2 extends GD{}function Wt(e,t,...r){let n=[];t instanceof GD&&n.push(t),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof n4).length,o=s.filter(c=>c instanceof E2).length;if(i>1||i>0&&o>0)throw new qt(Ct.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class E2 extends w2{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new E2(t,r,n)}_apply(t){const r=this._parse(t);return yZ(t._query,r),new Rd(t.firestore,t.converter,c6(t._query,r))}_parse(t){const r=C1(t.firestore);return function(s,i,o,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new qt(Ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){K9(f,d);const g=[];for(const x of f)g.push(G9(c,s,x));h={arrayValue:{values:g}}}else h=G9(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||K9(f,d),h=mZ(o,i,f,d==="in"||d==="not-in");return Ai.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function nn(e,t,r){const n=t,a=r4("where",e);return E2._create(a,n,r)}class n4 extends GD{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new n4(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Od.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const c of o)yZ(i,c),i=c6(i,c)}(t._query,r),new Rd(t.firestore,t.converter,c6(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class a4 extends w2{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new a4(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new qt(Ct.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new qt(Ct.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gw(s,i)}(t._query,this._field,this._direction);return new Rd(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new gg(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function Tr(e,t="asc"){const r=t,n=r4("orderBy",e);return a4._create(n,r)}class s4 extends w2{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new s4(t,r,n)}_apply(t){return new Rd(t.firestore,t.converter,FS(t._query,this._limit,this._limitType))}}function Nd(e){return ype("limit",e),s4._create("limit",e,"F")}class i4 extends w2{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new i4(t,r,n)}_apply(t){const r=fve(t,this.type,this._docOrFields,this._inclusive);return new Rd(t.firestore,t.converter,function(a,s){return new gg(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function bZ(...e){return i4._create("startAfter",e,!1)}function fve(e,t,r,n){if(r[0]=Xn(r[0]),r[0]instanceof $D)return function(s,i,o,c,u){if(!c)throw new qt(Ct.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const f of Av(s))if(f.field.isKeyField())d.push(IS(i,c.key));else{const h=c.data.field(f.field);if(QN(h))throw new qt(Ct.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=f.field.canonicalString();throw new qt(Ct.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(h)}return new Rv(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=C1(e.firestore);return function(i,o,c,u,d,f){const h=i.explicitOrderBy;if(d.length>h.length)throw new qt(Ct.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new qt(Ct.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!gD(i)&&x.indexOf("/")!==-1)throw new qt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const b=i.path.child(Sa.fromString(x));if(!br.isDocumentKey(b))throw new qt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const y=new br(b);p.push(IS(o,y))}else{const b=mZ(c,u,x);p.push(b)}}return new Rv(p,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function G9(e,t,r){if(typeof(r=Xn(r))=="string"){if(r==="")throw new qt(Ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gD(t)&&r.indexOf("/")!==-1)throw new qt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Sa.fromString(r));if(!br.isDocumentKey(n))throw new qt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return IS(e,new br(n))}if(r instanceof ss)return IS(e,r._key);throw new qt(Ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${LN(r)}.`)}function K9(e,t){if(!Array.isArray(e)||e.length===0)throw new qt(Ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yZ(e,t){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new qt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new qt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class wZ{convertValue(t,r="none"){switch(Am(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Hs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(dm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Hr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return km(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[jS].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>Hs(i.doubleValue));return new Sd(r)}convertGeoPoint(t){return new _d(Hs(t.latitude),Hs(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=HN(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(mw(t));default:return null}}convertTimestamp(t){const r=um(t);return new ir(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Sa.fromString(t);sa(UJ(n),9688,{name:t});const a=new Ov(n.get(1),n.get(3)),s=new br(n.popFirst(5));return a.isEqual(r)||dh(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class Wx{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Y0 extends $D{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new My(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(r4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(Ct.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Y0._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Y0._jsonSchemaVersion="firestore/documentSnapshot/1.0",Y0._jsonSchema={type:fi("string",Y0._jsonSchemaVersion),bundleSource:fi("string","DocumentSnapshot"),bundleName:fi("string"),bundle:fi("string")};class My extends Y0{data(t={}){return super.data(t)}}class J0{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new Wx(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new My(this._firestore,this._userDataWriter,n.key,n,new Wx(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new qt(Ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const c=new My(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Wx(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new My(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Wx(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:hve(o.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(Ct.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=J0._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=RN.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function hve(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(e){e=Yo(e,ss);const t=Yo(e.firestore,Dd);return ave(y1(t),e._key).then(r=>EZ(t,e,r))}J0._jsonSchemaVersion="firestore/querySnapshot/1.0",J0._jsonSchema={type:fi("string",J0._jsonSchemaVersion),bundleSource:fi("string","QuerySnapshot"),bundleName:fi("string"),bundle:fi("string")};class qD extends wZ{constructor(t){super(),this.firestore=t}convertBytes(t){return new Nc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ss(this.firestore,null,r)}}function ga(e){e=Yo(e,Rd);const t=Yo(e.firestore,Dd),r=y1(t),n=new qD(t);return vZ(e._query),sve(r,e._query).then(a=>new J0(t,n,e,a))}function Yi(e,t,r){e=Yo(e,ss);const n=Yo(e.firestore,Dd),a=KD(e.converter,t,r);return N1(n,[UD(C1(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,xl.none())])}function Lu(e,t,r,...n){e=Yo(e,ss);const a=Yo(e.firestore,Dd),s=C1(a);let i;return i=typeof(t=Xn(t))=="string"||t instanceof w1?hZ(s,"updateDoc",e._key,t,r,n):fZ(s,"updateDoc",e._key,t),N1(a,[i.toMutation(e._key,xl.exists(!0))])}function Za(e){return N1(Yo(e.firestore,Dd),[new qN(e._key,xl.none())])}function Ln(e,t){const r=Yo(e.firestore,Dd),n=dr(e),a=KD(e.converter,t);return N1(r,[UD(C1(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,xl.exists(!1))]).then(()=>n)}function pr(e,...t){var c,u,d;e=Xn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||$9(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if($9(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,i,o;if(e instanceof ss)i=Yo(e.firestore,Dd),o=VN(e._key.path),s={next:f=>{t[n]&&t[n](EZ(i,e,f))},error:t[n+1],complete:t[n+2]};else{const f=Yo(e,Rd);i=Yo(f.firestore,Dd),o=f._query;const h=new qD(i);s={next:p=>{t[n]&&t[n](new J0(i,h,f,p))},error:t[n+1],complete:t[n+2]},vZ(e._query)}return function(h,p,g,x){const b=new LD(x),y=new DD(p,b,g);return h.asyncQueue.enqueueAndForget(async()=>ID(await MS(h),y)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>FD(await MS(h),y))}}(y1(i),o,a,s)}function N1(e,t){return function(n,a){const s=new Yf;return n.asyncQueue.enqueueAndForget(async()=>Gxe(await nve(n),a,s)),s.promise}(y1(e),t)}function EZ(e,t,r){const n=r.docs.get(t._key),a=new qD(e);return new Y0(e,a,t._key,n,new Wx(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=C1(t)}set(t,r,n){this._verifyNotCommitted();const a=gT(t,this._firestore),s=KD(a.converter,r,n),i=UD(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,xl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=gT(t,this._firestore);let i;return i=typeof(r=Xn(r))=="string"||r instanceof w1?hZ(this._dataReader,"WriteBatch.update",s._key,r,n,a):fZ(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,xl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=gT(t,this._firestore);return this._mutations=this._mutations.concat(new qN(r._key,xl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qt(Ct.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gT(e,t){if((e=Xn(e)).firestore!==t)throw new qt(Ct.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function el(){return new QD("serverTimestamp")}function _Z(...e){return new HD("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(e){return y1(e=Yo(e,Dd)),new CZ(e,t=>N1(e,t))}(function(t,r=!0){(function(a){g1=a})(mg),lm(new lh("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Dd(new fpe(n.getProvider("auth-internal")),new ppe(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new qt(Ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ov(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Fu(X7,Y7,t),Fu(X7,Y7,"esm2020")})();const mve=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:wZ,Bytes:Nc,CollectionReference:Jf,DocumentReference:ss,DocumentSnapshot:Y0,FieldPath:w1,FieldValue:E1,Firestore:Dd,FirestoreError:qt,GeoPoint:_d,Query:Rd,QueryCompositeFilterConstraint:n4,QueryConstraint:w2,QueryDocumentSnapshot:My,QueryFieldFilterConstraint:E2,QueryLimitConstraint:s4,QueryOrderByConstraint:a4,QuerySnapshot:J0,QueryStartAtConstraint:i4,SnapshotMetadata:Wx,Timestamp:ir,VectorValue:Sd,WriteBatch:CZ,_AutoId:RN,_ByteString:Xi,_DatabaseId:Ov,_DocumentKey:br,_EmptyAuthCredentialsProvider:JY,_FieldPath:$i,_cast:Yo,_logWarn:Zp,_validateIsNotUsedTogether:eJ,addDoc:Ln,arrayUnion:_Z,collection:Tt,connectFirestoreEmulator:uZ,deleteDoc:Za,doc:dr,ensureFirestoreConfigured:y1,executeWrite:N1,getDoc:S1,getDocs:ga,getFirestore:MD,limit:Nd,onSnapshot:pr,orderBy:Tr,query:Wt,serverTimestamp:el,setDoc:Yi,startAfter:bZ,updateDoc:Lu,where:nn,writeBatch:bg},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SZ="firebasestorage.googleapis.com",NZ="storageBucket",pve=120*1e3,gve=600*1e3,xve=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Pd{constructor(t,r,n=0){super(xT(t),`Firebase Storage: ${r} (${xT(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ds.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return xT(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Va;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Va||(Va={}));function xT(e){return"storage/"+e}function WD(){const e="An unknown error occurred, please check the error payload for server response.";return new ds(Va.UNKNOWN,e)}function vve(e){return new ds(Va.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function bve(e){return new ds(Va.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yve(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ds(Va.UNAUTHENTICATED,e)}function wve(){return new ds(Va.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Eve(e){return new ds(Va.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function kZ(){return new ds(Va.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BZ(){return new ds(Va.CANCELED,"User canceled the upload/download.")}function Cve(e){return new ds(Va.INVALID_URL,"Invalid URL '"+e+"'.")}function _ve(e){return new ds(Va.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Sve(){return new ds(Va.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+NZ+"' property when initializing the app?")}function TZ(){return new ds(Va.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Nve(){return new ds(Va.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function kve(){return new ds(Va.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Bve(e){return new ds(Va.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function b6(e){return new ds(Va.INVALID_ARGUMENT,e)}function jZ(){return new ds(Va.APP_DELETED,"The Firebase app was deleted.")}function Tve(e){return new ds(Va.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Uy(e,t){return new ds(Va.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Pb(e){throw new ds(Va.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=ml.makeFromUrl(t,r)}catch{return new ml(t,"")}if(n.path==="")return n;throw _ve(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+a+i,"i"),c={bucket:1,path:3};function u(j){j.path_=decodeURIComponent(j.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},x=r===SZ?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${b}`,"i"),S=[{regex:o,indices:c,postModify:s},{regex:p,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let j=0;j<S.length;j++){const N=S[j],F=N.regex.exec(t);if(F){const E=F[N.indices.bucket];let _=F[N.indices.path];_||(_=""),n=new ml(E,_),N.postModify(n);break}}if(n==null)throw Cve(t);return n}}class jve{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ive(e,t,r){let n=1,a=null,s=null,i=!1,o=0;function c(){return o===2}let u=!1;function d(...b){u||(u=!0,t.apply(null,b))}function f(b){a=setTimeout(()=>{a=null,e(p,c())},b)}function h(){s&&clearTimeout(s)}function p(b,...y){if(u){h();return}if(b){h(),d.call(null,b,...y);return}if(c()||i){h(),d.call(null,b,...y);return}n<64&&(n*=2);let S;o===1?(o=2,S=0):S=(n+Math.random())*1e3,f(S)}let g=!1;function x(b){g||(g=!0,h(),!u&&(a!==null?(b||(o=2),clearTimeout(a),f(0)):b||(o=1)))}return f(0),s=setTimeout(()=>{i=!0,x(!0)},r),x}function Fve(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ove(e){return e!==void 0}function Dve(e){return typeof e=="function"}function Pve(e){return typeof e=="object"&&!Array.isArray(e)}function o4(e){return typeof e=="string"||e instanceof String}function q9(e){return XD()&&e instanceof Blob}function XD(){return typeof Blob<"u"}function y6(e,t,r,n){if(n<t)throw b6(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw b6(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function IZ(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Dp;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Dp||(Dp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FZ(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rve{constructor(t,r,n,a,s,i,o,c,u,d,f,h=!0,p=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new cC(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=o=>{const c=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const o=s.getErrorCode()===Dp.NO_ERROR,c=s.getStatus();if(!o||FZ(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Dp.ABORT;n(!1,new cC(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new cC(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());Ove(c)?s(c):s()}catch(c){i(c)}else if(o!==null){const c=WD();c.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,c)):i(c)}else if(a.canceled){const c=this.appDelete_?jZ():BZ();i(c)}else{const c=kZ();i(c)}};this.canceled_?r(!1,new cC(!1,null,!0)):this.backoffId_=Ive(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Fve(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cC{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function Lve(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Mve(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Uve(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Qve(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Hve(e,t,r,n,a,s,i=!0,o=!1){const c=IZ(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return Uve(d,t),Lve(d,r),Mve(d,s),Qve(d,n),new Rve(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vve(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zve(...e){const t=Vve();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(XD())return new Blob(e);throw new ds(Va.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $ve(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gve(e){if(typeof atob>"u")throw Bve("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vT{constructor(t,r){this.data=t,this.contentType=r||null}}function Kve(e,t){switch(e){case OA.RAW:return new vT(OZ(t));case OA.BASE64:case OA.BASE64URL:return new vT(DZ(e,t));case OA.DATA_URL:return new vT(Wve(t),Xve(t))}throw WD()}function OZ(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function qve(e){let t;try{t=decodeURIComponent(e)}catch{throw Uy(OA.DATA_URL,"Malformed data URL.")}return OZ(t)}function DZ(e,t){switch(e){case OA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw Uy(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case OA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw Uy(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Gve(t)}catch(a){throw a.message.includes("polyfill")?a:Uy(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class PZ{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw Uy(OA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Yve(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function Wve(e){const t=new PZ(e);return t.base64?DZ(OA.BASE64,t.rest):qve(t.rest)}function Xve(e){return new PZ(e).contentType}function Yve(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(t,r){let n=0,a="";q9(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(q9(this.data_)){const n=this.data_,a=$ve(n,t,r);return a===null?null:new Uf(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new Uf(n,!0)}}static getBlob(...t){if(XD()){const r=t.map(n=>n instanceof Uf?n.data_:n);return new Uf(zve.apply(null,r))}else{const r=t.map(i=>o4(i)?Kve(OA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)a[s++]=i[o]}),new Uf(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(e){let t;try{t=JSON.parse(e)}catch{return null}return Pve(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jve(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Zve(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function RZ(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1e(e,t){return t}class cl{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||e1e}}let uC=null;function t1e(e){return!o4(e)||e.length<2?e:RZ(e)}function JD(){if(uC)return uC;const e=[];e.push(new cl("bucket")),e.push(new cl("generation")),e.push(new cl("metageneration")),e.push(new cl("name","fullPath",!0));function t(s,i){return t1e(i)}const r=new cl("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new cl("size");return a.xform=n,e.push(a),e.push(new cl("timeCreated")),e.push(new cl("updated")),e.push(new cl("md5Hash",null,!0)),e.push(new cl("cacheControl",null,!0)),e.push(new cl("contentDisposition",null,!0)),e.push(new cl("contentEncoding",null,!0)),e.push(new cl("contentLanguage",null,!0)),e.push(new cl("contentType",null,!0)),e.push(new cl("metadata","customMetadata",!0)),uC=e,uC}function r1e(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new ml(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function n1e(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return r1e(n,e),n}function LZ(e,t,r){const n=YD(t);return n===null?null:n1e(e,n,r)}function a1e(e,t,r,n){const a=YD(t);if(a===null||!o4(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+i(d)+"/o/"+i(f),p=yg(h,r,n),g=IZ({alt:"media",token:u});return p+g})[0]}function MZ(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9="prefixes",X9="items";function s1e(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[W9])for(const a of r[W9]){const s=a.replace(/\/$/,""),i=e._makeStorageReference(new ml(t,s));n.prefixes.push(i)}if(r[X9])for(const a of r[X9]){const s=e._makeStorageReference(new ml(t,a.name));n.items.push(s)}return n}function i1e(e,t,r){const n=YD(r);return n===null?null:s1e(e,t,n)}class Tm{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(e){if(!e)throw WD()}function ZD(e,t){function r(n,a){const s=LZ(e,a,t);return zA(s!==null),s}return r}function o1e(e,t){function r(n,a){const s=i1e(e,t,a);return zA(s!==null),s}return r}function l1e(e,t){function r(n,a){const s=LZ(e,a,t);return zA(s!==null),a1e(s,a,e.host,e._protocol)}return r}function k1(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=wve():a=yve():r.getStatus()===402?a=bve(e.bucket):r.getStatus()===403?a=Eve(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function eP(e){const t=k1(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=vve(e.path)),s.serverResponse=a.serverResponse,s}return r}function c1e(e,t,r){const n=t.fullServerUrl(),a=yg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new Tm(a,s,ZD(e,r),i);return o.errorHandler=eP(t),o}function u1e(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const i=t.bucketOnlyServerUrl(),o=yg(i,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new Tm(o,c,o1e(e,t.bucket),u);return d.urlParams=s,d.errorHandler=k1(t),d}function d1e(e,t,r){const n=t.fullServerUrl(),a=yg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new Tm(a,s,l1e(e,r),i);return o.errorHandler=eP(t),o}function A1e(e,t){const r=t.fullServerUrl(),n=yg(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function i(c,u){}const o=new Tm(n,a,i,s);return o.successCodes=[200,204],o.errorHandler=eP(t),o}function f1e(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function UZ(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=f1e(null,t)),n}function QZ(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let S="";for(let j=0;j<2;j++)S=S+Math.random().toString().slice(2);return S}const c=o();i["Content-Type"]="multipart/related; boundary="+c;const u=UZ(t,n,a),d=MZ(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",p=Uf.getBlob(f,n,h);if(p===null)throw TZ();const g={name:u.fullPath},x=yg(s,e.host,e._protocol),b="POST",y=e.maxUploadRetryTime,w=new Tm(x,b,ZD(e,r),y);return w.urlParams=g,w.headers=i,w.body=p.uploadData(),w.errorHandler=k1(t),w}class QS{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function tP(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{zA(!1)}return zA(!!r&&(t||["active"]).indexOf(r)!==-1),r}function h1e(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i=UZ(t,n,a),o={name:i.fullPath},c=yg(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":i.contentType,"Content-Type":"application/json; charset=utf-8"},f=MZ(i,r),h=e.maxUploadRetryTime;function p(x){tP(x);let b;try{b=x.getResponseHeader("X-Goog-Upload-URL")}catch{zA(!1)}return zA(o4(b)),b}const g=new Tm(c,u,p,h);return g.urlParams=o,g.headers=d,g.body=f,g.errorHandler=k1(t),g}function m1e(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=tP(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{zA(!1)}f||zA(!1);const h=Number(f);return zA(!isNaN(h)),new QS(h,n.size(),d==="final")}const i="POST",o=e.maxUploadRetryTime,c=new Tm(r,i,s,o);return c.headers=a,c.errorHandler=k1(t),c}const Y9=256*1024;function p1e(e,t,r,n,a,s,i,o){const c=new QS(0,0);if(i?(c.current=i.current,c.total=i.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw Nve();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,h=f+d;let p="";d===0?p="finalize":u===d?p="upload, finalize":p="upload";const g={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(f,h);if(x===null)throw TZ();function b(j,N){const F=tP(j,["active","final"]),E=c.current+d,_=n.size();let B;return F==="final"?B=ZD(t,s)(j,N):B=null,new QS(E,_,F==="final",B)}const y="POST",w=t.maxUploadRetryTime,S=new Tm(r,y,b,w);return S.headers=g,S.body=x.uploadData(),S.progressCallback=o||null,S.errorHandler=k1(e),S}const Hl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bT(e){switch(e){case"running":case"pausing":case"canceling":return Hl.RUNNING;case"paused":return Hl.PAUSED;case"success":return Hl.SUCCESS;case"canceled":return Hl.CANCELED;case"error":return Hl.ERROR;default:return Hl.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1e{constructor(t,r,n){if(Dve(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class x1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Dp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Dp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Dp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw Pb("cannot .send() more than once");if(Sh(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pb("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class v1e extends x1e{initXhr(){this.xhr_.responseType="text"}}function Qf(){return new v1e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1e{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=JD(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Va.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(FZ(a.status,[]))if(s)a=kZ();else{this.sleepTime=Math.max(this.sleepTime*2,xve),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Va.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=h1e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Qf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=m1e(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,Qf,r,n);this._request=s,s.getPromise().then(i=>{i=i,this._request=void 0,this._updateProgress(i.current),this._needToFetchStatus=!1,i.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=Y9*this._chunkMultiplier,r=new QS(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let i;try{i=p1e(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const o=this._ref.storage._makeRequest(i,Qf,a,s,!1);this._request=o,o.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Y9*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=c1e(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,Qf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=QZ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Qf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=BZ(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=bT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new g1e(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(bT(this._state)){case Hl.SUCCESS:cx(this._resolve.bind(null,this.snapshot))();break;case Hl.CANCELED:case Hl.ERROR:const r=this._reject;cx(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(bT(this._state)){case Hl.RUNNING:case Hl.PAUSED:t.next&&cx(t.next.bind(t,this.snapshot))();break;case Hl.SUCCESS:t.complete&&cx(t.complete.bind(t))();break;case Hl.CANCELED:case Hl.ERROR:t.error&&cx(t.error.bind(t,this._error))();break;default:t.error&&cx(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,r){this._service=t,r instanceof ml?this._location=r:this._location=ml.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new tg(t,r)}get root(){const t=new ml(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RZ(this._location.path)}get storage(){return this._service}get parent(){const t=Jve(this._location.path);if(t===null)return null;const r=new ml(this._location.bucket,t);return new tg(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw Tve(t)}}function y1e(e,t,r){e._throwIfRoot("uploadBytes");const n=QZ(e.storage,e._location,JD(),new Uf(t,!0),r);return e.storage.makeRequestWithTokens(n,Qf).then(a=>({metadata:a,ref:e}))}function w1e(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new b1e(e,new Uf(t),r)}function E1e(e){const t={prefixes:[],items:[]};return HZ(e,t).then(()=>t)}async function HZ(e,t,r){const a=await C1e(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await HZ(e,t,a.nextPageToken)}function C1e(e,t){t!=null&&typeof t.maxResults=="number"&&y6("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=u1e(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,Qf)}function _1e(e){e._throwIfRoot("getDownloadURL");const t=d1e(e.storage,e._location,JD());return e.storage.makeRequestWithTokens(t,Qf).then(r=>{if(r===null)throw kve();return r})}function S1e(e){e._throwIfRoot("deleteObject");const t=A1e(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Qf)}function N1e(e,t){const r=Zve(e._location.path,t),n=new ml(e._location.bucket,r);return new tg(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1e(e){return/^[A-Za-z]+:\/\//.test(e)}function B1e(e,t){return new tg(e,t)}function VZ(e,t){if(e instanceof rP){const r=e;if(r._bucket==null)throw Sve();const n=new tg(r,r._bucket);return t!=null?VZ(n,t):n}else return t!==void 0?N1e(e,t):e}function T1e(e,t){if(t&&k1e(t)){if(e instanceof rP)return B1e(e,t);throw b6("To use ref(service, url), the first argument must be a Storage instance.")}else return VZ(e,t)}function J9(e,t){const r=t==null?void 0:t[NZ];return r==null?null:ml.makeFromBucketSpec(r,e)}function j1e(e,t,r,n={}){e.host=`${t}:${r}`;const a=Sh(t);a&&(TN(`https://${e.host}/b`),jN("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:aY(s,e.app.options.projectId))}class rP{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=SZ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pve,this._maxUploadRetryTime=gve,this._requests=new Set,a!=null?this._bucket=ml.makeFromBucketSpec(a,this._host):this._bucket=J9(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ml.makeFromBucketSpec(this._url,t):this._bucket=J9(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){y6("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){y6("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Sc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new tg(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new jve(jZ());{const i=Hve(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const Z9="@firebase/storage",eQ="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zZ="storage";function $Z(e,t,r){return e=Xn(e),y1e(e,t,r)}function I1e(e,t,r){return e=Xn(e),w1e(e,t,r)}function F1e(e){return e=Xn(e),E1e(e)}function nP(e){return e=Xn(e),_1e(e)}function O1e(e){return e=Xn(e),S1e(e)}function l4(e,t){return e=Xn(e),T1e(e,t)}function aP(e=IN(),t){e=Xn(e);const n=f2(e,zZ).getImmediate({identifier:t}),a=eD("storage");return a&&D1e(n,...a),n}function D1e(e,t,r,n={}){j1e(e,t,r,n)}function P1e(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new rP(r,n,a,t,mg)}function R1e(){lm(new lh(zZ,P1e,"PUBLIC").setMultipleInstances(!0)),Fu(Z9,eQ,""),Fu(Z9,eQ,"esm2020")}R1e();const L1e={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},sP=nD(L1e),C2=VY(sP),tn=MD(sP),GZ=aP(sP),KZ=Object.freeze(Object.defineProperty({__proto__:null,auth:C2,db:tn,storage:GZ},Symbol.toStringTag,{value:"Module"})),M1e=async(e,t)=>{try{return(await W0e(C2,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},yT=async()=>{try{await J0e(C2)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},U1e=async e=>{try{await q0e(C2,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},qZ=async e=>{try{const t=dr(tn,"usuarios",e),r=await S1(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Kt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Kt||{}),dn=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(dn||{}),bp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(bp||{});const Q1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),mi="w-6 h-6",c4="w-24 h-24",iP=()=>l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),H1e=()=>l.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M9 18h6"}),l.jsx("path",{d:"M10 22h4"}),l.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),V1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),z1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),my=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),py=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),WZ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),$1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:c4,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),G1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:c4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),K1e=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:c4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),q1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:c4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),W1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),tQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),dC=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),wT=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),AC=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),ET=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),rQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),X1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),Y1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),J1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),Z1e=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),nQ=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),ebe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),CT=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),tbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:mi,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),rbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),aQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:mi,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),nbe=[{id:Kt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:l.jsx($1e,{})},{id:Kt.PROFESORADO,label:"Profesorado",icon:l.jsx(G1e,{})},{id:Kt.COORDINACION_TP,label:"Coordinación TP",icon:l.jsx(K1e,{})},{id:Kt.ESTUDIANTE,label:"Estudiantes",icon:l.jsx(q1e,{})}],abe={[Kt.SUBDIRECCION]:[{name:"Dashboard",icon:l.jsx(W1e,{})},{name:"Administración",icon:l.jsx(Z1e,{})},{name:"Seguimiento Curricular",icon:l.jsx(rbe,{})},{name:"Acompañamiento docente",icon:l.jsx(J1e,{})},{name:"Análisis Taxonómico",icon:l.jsx(aQ,{})},{name:"Interdisciplinario",icon:l.jsx(CT,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:l.jsx(tQ,{})},{name:"Crear horarios",icon:l.jsx(wT,{})},{name:"Seguimiento de acciones pedagógicas",icon:l.jsx(AC,{})},{name:"Inclusión",icon:l.jsx(nQ,{})},{name:"Calendario Académico",icon:l.jsx(dC,{})},{name:"Muro de Anuncios",icon:l.jsx(my,{})},{name:"Mensajería Interna",icon:l.jsx(py,{})},{name:"Generador de Actas",icon:l.jsx(ET,{})}],[Kt.PROFESORADO]:[{name:"Planificación",icon:l.jsx(rQ,{})},{name:"Mis Acompañamientos",icon:l.jsx(ebe,{})},{name:"Recursos de Aprendizaje",icon:l.jsx(X1e,{})},{name:"Análisis Taxonómico",icon:l.jsx(aQ,{})},{name:"Interdisciplinario",icon:l.jsx(CT,{})},{name:"Inclusión",icon:l.jsx(nQ,{})},{name:"Actividades Remotas",icon:l.jsx(Y1e,{})},{name:"Evaluación de Aprendizajes",icon:l.jsx(ET,{})},{name:"Evaluaciones Formativas",icon:l.jsx(AC,{})},{name:"Calendario Académico",icon:l.jsx(dC,{})},{name:"Muro de Anuncios",icon:l.jsx(my,{})},{name:"Mensajería Interna",icon:l.jsx(py,{})},{name:"Generador de Actas",icon:l.jsx(tQ,{})}],[Kt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:l.jsx(AC,{})},{name:"Asistencia Dual",icon:l.jsx(wT,{})},{name:"Pañol",icon:l.jsx(tbe,{})},{name:"Gestión de Empresas",icon:l.jsx(Q1e,{})},{name:"Calendario Académico",icon:l.jsx(dC,{})},{name:"Muro de Anuncios",icon:l.jsx(my,{})},{name:"Mensajería Interna",icon:l.jsx(py,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Generador de Actas",icon:l.jsx(ET,{})}],[Kt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:l.jsx(rQ,{})},{name:"Evaluación Formativa",icon:l.jsx(AC,{})},{name:"Tareas Interdisciplinarias",icon:l.jsx(CT,{})},{name:"Asistencia a Empresa",icon:l.jsx(wT,{})},{name:"Calendario Académico",icon:l.jsx(dC,{})},{name:"Muro de Anuncios",icon:l.jsx(my,{})},{name:"Mensajería Interna",icon:l.jsx(py,{})}]},sQ=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],fC=["Pendiente","En Proceso","Cumplida"],iQ=["1º Medio","2º Medio","3º Medio","4º Medio"],Ki=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],Ks=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],w6=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Q_=["Lunes","Martes","Miércoles","Jueves","Viernes"],E6=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],sbe={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},hv={[dn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[dn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[dn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[dn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},ibe=Object.values(bp),_T=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],ST=["Vinculado","Desvinculado","En proceso","Empresa"],Pp=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],obe=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],HS=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],Qy=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],XZ=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],hC=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],lbe=["Mecánica Industrial","Mecánica Automotriz"],cbe=["INACAP","UNAB","DUOC","Universidad de Las Américas"],ube={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},dbe=["Pasantía","Visita","Certificación","Formación en empresa"],Abe={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},fbe={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},hbe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=k.useState(""),[s,i]=k.useState(""),[o,c]=k.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),c("forgot_sent")},f=()=>o==="forgot"?l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",l.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),l.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:l.jsx("p",{children:r})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(iP,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),l.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},mC=({trigger:e,children:t,onOpen:r})=>{const[n,a]=k.useState(!1),s=k.useRef(null),i=()=>{const c=!n;a(c),c&&r&&r()},o=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return k.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),l.jsxs("div",{className:"relative",ref:s,children:[l.jsx("div",{onClick:i,children:e}),n&&l.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},oQ="usuariosLiceo",mbe=({user:e,onClose:t,onSave:r})=>{const[n,a]=k.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(oQ);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(oQ,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:l.jsxs("form",{onSubmit:i,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),l.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),l.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},lQ="usuariosLiceo",pbe=({user:e,onClose:t,onSave:r})=>{const[n,a]=k.useState(""),[s,i]=k.useState(""),[o,c]=k.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(lQ);let p=h?JSON.parse(h):[];const g=p.findIndex(x=>x.id===e.id);g>-1?p[g]=f:p.push(f),localStorage.setItem(lQ,JSON.stringify(p)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contraseña.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:l.jsxs("form",{onSubmit:u,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:l.jsx("p",{children:o})})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gbe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xbe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),cQ=e=>{const t=xbe(e);return t.charAt(0).toUpperCase()+t.slice(1)},YZ=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),vbe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bbe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ybe=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},c)=>k.createElement("svg",{ref:c,...bbe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:YZ("lucide",a),...!s&&!vbe(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>k.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=(e,t)=>{const r=k.forwardRef(({className:n,...a},s)=>k.createElement(ybe,{ref:s,iconNode:t,className:YZ(`lucide-${gbe(cQ(e))}`,`lucide-${e}`,n),...a}));return r.displayName=cQ(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wbe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ebe=rr("activity",wbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cbe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],pC=rr("arrow-left",Cbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _be=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],Sbe=rr("bell-ring",_be);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nbe=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],kbe=rr("book-open-check",Nbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bbe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],fh=rr("book-open",Bbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tbe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],JZ=rr("brain",Tbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jbe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ZZ=rr("briefcase",jbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ibe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],VS=rr("building-2",Ibe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fbe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Obe=rr("building",Fbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dbe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Pbe=rr("calendar-check",Dbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rbe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$f=rr("calendar",Rbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lbe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Hy=rr("chart-column",Lbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mbe=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Ube=rr("chart-no-axes-column",Mbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qbe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Hbe=rr("chart-pie",Qbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vbe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],bw=rr("chevron-left",Vbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zbe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],eee=rr("chevron-right",zbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $be=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],kd=rr("circle-alert",$be);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gbe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],oP=rr("circle-check-big",Gbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kbe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yd=rr("circle-check",Kbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qbe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Xx=rr("circle-plus",qbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wbe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Xbe=rr("clipboard-check",Wbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ybe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],C6=rr("clipboard-list",Ybe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jbe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],M0=rr("clock",Jbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zbe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],u4=rr("download",Zbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eye=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],tye=rr("factory",eye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],nye=rr("file-check",rye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],sye=rr("file-spreadsheet",aye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Zf=rr("file-text",iye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oye=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],uQ=rr("folder-open",oye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lye=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],lP=rr("funnel",lye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cye=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],dQ=rr("gauge",cye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uye=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Qv=rr("graduation-cap",uye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dye=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Aye=rr("hash",dye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fye=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],hye=rr("hourglass",fye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],pye=rr("info",mye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gye=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],xye=rr("layout-dashboard",gye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vye=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],bye=rr("layers",vye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yye=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],wye=rr("layout-list",yye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],AQ=rr("link-2",Eye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cye=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],_ye=rr("link",Cye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sye=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Nye=rr("list-checks",Sye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kye=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],U0=rr("loader-circle",kye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bye=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Tye=rr("mail",Bye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jye=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],zS=rr("map-pin",jye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iye=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Fye=rr("megaphone",Iye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oye=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Dye=rr("menu",Oye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pye=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Rye=rr("message-square",Pye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lye=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_6=rr("pen-line",Lye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mye=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],$S=rr("pencil",Mye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uye=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Qye=rr("percent",Uye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hye=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],eh=rr("plus",Hye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vye=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],zye=rr("puzzle",Vye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ye=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Gye=rr("rotate-ccw",$ye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kye=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],qye=rr("route",Kye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wye=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yw=rr("save",Wye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xye=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],NT=rr("school",Xye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yye=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ww=rr("search",Yye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jye=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zye=rr("shield-check",Jye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ewe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],H_=rr("sparkles",ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const twe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],tee=rr("square-pen",twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rwe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],S6=rr("square-plus",rwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nwe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],awe=rr("star",nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const swe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ree=rr("target",swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iwe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Fc=rr("trash-2",iwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const owe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],nee=rr("trending-up",owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lwe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],aee=rr("upload",lwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cwe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],uwe=rr("user-minus",cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dwe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Awe=rr("user-plus",dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fwe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ew=rr("user",fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hwe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Bd=rr("users",hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mwe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Qx=rr("video",mwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pwe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],V_=rr("wrench",pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gwe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],GS=rr("x",gwe);async function xwe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:el()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await Ln(Tt(tn,"notificaciones"),t)).id}function vwe(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(c=>{c.id&&(i.has(c.id)||i.set(c.id,c))});const o=Array.from(i.values()).sort((c,u)=>{var h,p;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((p=u.createdAt)!=null&&p.toDate?u.createdAt.toDate().getTime():0)-d});t(o)};if(e.email){const i=Wt(Tt(tn,"notificaciones"),nn("docenteEmailLower","==",e.email.toLowerCase()),Tr("createdAt","desc"));r.push(pr(i,o=>{n=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const i=Wt(Tt(tn,"notificaciones"),nn("docenteNombre","==",e.nombreCompleto),Tr("createdAt","desc"));r.push(pr(i,o=>{a=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(i=>i())}async function bwe(e){const t=dr(tn,"notificaciones",e);await Lu(t,{leida:!0})}async function ywe(e){const t=dr(tn,"notificaciones",e);await Za(t)}const fQ="anunciosMuro",hQ="mensajesInternos",mQ="lir-read-status",wwe=({user:e})=>{if(e.fotoUrl)return l.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return l.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},Ewe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:c})=>{const[u,d]=k.useState([]),[f,h]=k.useState([]),[p,g]=k.useState(!1),[x,b]=k.useState(!1),[y,w]=k.useState([]),S=k.useCallback(()=>{try{const B=localStorage.getItem(`${mQ}-${e.id}`);return B?JSON.parse(B):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),j=k.useCallback(B=>{try{localStorage.setItem(`${mQ}-${e.id}`,JSON.stringify(B))}catch(P){console.error("Failed to set read status:",P)}},[e.id]);k.useEffect(()=>{const B=JSON.parse(localStorage.getItem(fQ)||"[]"),P=S();d(B.filter(I=>!P.announcements.includes(I.id)));const D=JSON.parse(localStorage.getItem(hQ)||"[]");h(D.filter(I=>I.para===e.email).sort((I,U)=>new Date(U.fecha).getTime()-new Date(I.fecha).getTime()).slice(0,5))},[e.id,S,o]),k.useEffect(()=>{if(!(e!=null&&e.email))return;const B=vwe({email:e.email,nombreCompleto:e.nombreCompleto},P=>{const D=P.filter(I=>I.tipo&&(I.tipo.toLowerCase()==="pie"||I.tipo==="nueva_intervencion"));w(D)});return()=>B()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const N=()=>{const B=S(),P=JSON.parse(localStorage.getItem(fQ)||"[]").map(D=>D.id);B.announcements=P,j(B),d([])},F=()=>{const B=S(),D=JSON.parse(localStorage.getItem(hQ)||"[]").filter(I=>I.para===e.email).map(I=>I.id);B.messages=[...new Set([...B.messages,...D])],j(B),c()},E=y.filter(B=>!B.leida).length,_=B=>{var P;try{const D=(P=B.createdAt)!=null&&P.toDate?B.createdAt.toDate():new Date(B.createdAt);return D?D.toLocaleString("es-CL"):""}catch{return""}};return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:l.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:l.jsx(V1e,{})}),l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[l.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),l.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),l.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),l.jsx("div",{className:"flex-1 flex justify-center",children:l.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:l.jsx(z1e,{})})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),l.jsx(mC,{onOpen:N,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[l.jsx(my,{}),u.length>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),l.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(B=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsx("p",{className:"font-bold dark:text-slate-200",children:B.titulo}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.mensaje})]},B.id)),u.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),l.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),l.jsx(mC,{trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[l.jsx(zye,{className:"w-5 h-5"}),E>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:E})]}),children:l.jsxs("div",{className:"p-2 w-80",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),l.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&l.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(B=>l.jsx("li",{className:"p-2 text-sm",children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),l.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:B.mensaje}),B.estudianteNombre&&l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",l.jsx("b",{children:B.estudianteNombre})]}),l.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:_(B)})]}),l.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!B.leida&&l.jsx("button",{onClick:()=>B.id&&bwe(B.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),l.jsx("button",{onClick:()=>B.id&&ywe(B.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},B.id))]})]})}),l.jsx(mC,{onOpen:F,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[l.jsx(py,{}),o>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),l.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(B=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",B.de]}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.asunto})]},B.id)),f.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),l.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),l.jsx(mC,{trigger:l.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(wwe,{user:e})}),children:l.jsxs("div",{className:"p-2",children:[l.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),l.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[l.jsx("li",{children:l.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),l.jsx("li",{children:l.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&l.jsx("li",{children:l.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),l.jsx("li",{children:l.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),p&&l.jsx(mbe,{user:e,onClose:()=>g(!1),onSave:n}),x&&l.jsx(pbe,{user:e,onClose:()=>b(!1),onSave:n})]})},Cwe={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},cP=S7().length?S7()[0]:nD(Cwe),pt=MD(cP),N6=VY(cP),_we=aP(cP),_2="reemplazos_docentes",Swe="usuarios",uP=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},Nwe=e=>{const t=e.data();return{id:e.id,...t}},kwe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await Ln(Tt(pt,_2),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},Bwe=async(e,t)=>{try{const r=dr(pt,_2,e),n=await S1(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await Za(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},Twe=(e,t,r=50)=>{try{const n=Wt(Tt(pt,_2),nn("userId","==",e),Tr("diaAusencia","desc"),Nd(r));return pr(n,a=>{const s=a.docs.map(uP);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},jwe=e=>{try{const t=Wt(Tt(pt,Swe),nn("profile","==",Kt.PROFESORADO));return pr(t,n=>{const a=n.docs.map(Nwe);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},Iwe=async e=>{try{const t=Wt(Tt(pt,_2),nn("userId","==",e)),n=(await ga(t)).docs.map(uP),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},Fwe=async(e,t)=>{try{if(!t.trim())return[];const r=Wt(Tt(pt,_2),nn("userId","==",e),Tr("diaAusencia","desc"),Nd(100)),a=(await ga(r)).docs.map(uP),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},Owe=Array.from({length:12},(e,t)=>t+1),pQ={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},Dwe=e=>{const[t,r]=k.useState([]),[n,a]=k.useState(!0),[s,i]=k.useState(null);k.useEffect(()=>e?Twe(e,f=>{r(f),a(!1)}):void 0,[e]);const o=k.useCallback(async d=>{try{return i(null),await kwe(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=k.useCallback(async d=>{try{i(null),await Bwe(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=k.useCallback(async d=>{try{return i(null),d.trim()?await Fwe(e,d):t}catch(f){return i(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:o,remove:c,search:u}},Pwe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0);k.useEffect(()=>jwe(i=>{t(i),n(!1)}),[]);const a=k.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},ux=({label:e,icon:t,children:r})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),l.jsxs("div",{className:"relative",children:[t&&l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),Rwe="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",Lwe="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",Mwe="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",g0=({title:e,value:t,icon:r})=>l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:r}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),l.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),Uwe=({data:e})=>{const t=Math.max(1,...e.map(r=>r.value));return l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Distribución (graficable)"}),l.jsx("div",{className:"grid gap-3",children:e.map(r=>l.jsxs("div",{children:[l.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:r.label}),l.jsx("span",{children:r.value})]}),l.jsx("div",{className:"h-2 w-full rounded bg-slate-200/60 dark:bg-slate-700",children:l.jsx("div",{className:"h-2 rounded bg-slate-900 dark:bg-amber-500",style:{width:`${r.value/t*100}%`}})})]},r.label))})]})},Qwe=({userId:e,reemplazos:t})=>{const[r,n]=k.useState(null),[a,s]=k.useState(!1),i=k.useCallback(async()=>{try{s(!0);const b=await Iwe(e);n(b)}finally{s(!1)}},[e]);k.useEffect(()=>{e&&i()},[e,i]);const o=new Date,c=o.getMonth(),u=o.getFullYear(),d=k.useMemo(()=>(t||[]).filter(b=>{const y=new Date(b.diaAusencia+"T00:00:00");return y.getMonth()===c&&y.getFullYear()===u}),[t,c,u]),f=new Set(d.map(b=>b.docenteAusente).filter(Boolean)),h=new Set(d.map(b=>b.docenteReemplazante).filter(Boolean)),p=new Set(d.map(b=>b.curso).filter(Boolean)),g=new Set(d.map(b=>b.asignaturaAusente).filter(Boolean)),x=[{label:"Prof. ausentes",value:f.size},{label:"Prof. que reemplazan",value:h.size},{label:"Cursos",value:p.size},{label:"Asignaturas ausentes",value:g.size}];return a||!r?l.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[l.jsx(U0,{className:"h-5 w-5 animate-spin"}),"Cargando estadísticas…"]})}):l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(g0,{title:"Total",value:r.totalReemplazos,icon:l.jsx(Sbe,{className:"h-6 w-6"})}),l.jsx(g0,{title:"Realizadas",value:r.horasRealizadas,icon:l.jsx(yd,{className:"h-6 w-6"})}),l.jsx(g0,{title:"Cubiertas",value:r.horasCubiertas,icon:l.jsx(Xbe,{className:"h-6 w-6"})}),l.jsx(g0,{title:"Efectividad",value:`${r.porcentajeRealizadas.toFixed(1)}%`,icon:l.jsx(Qye,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(g0,{title:"Profesores ausentes",value:f.size,icon:l.jsx(uwe,{className:"h-6 w-6"})}),l.jsx(g0,{title:"Profesores que reemplazan",value:h.size,icon:l.jsx(Awe,{className:"h-6 w-6"})}),l.jsx(g0,{title:"Cursos (únicos)",value:p.size,icon:l.jsx(Bd,{className:"h-6 w-6"})}),l.jsx(g0,{title:"Asignaturas ausentes",value:g.size,icon:l.jsx(fh,{className:"h-6 w-6"})})]}),l.jsx(Uwe,{data:x})]})},Hwe=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=Dwe(t),{profesorNames:c,loading:u}=Pwe(),[d,f]=k.useState(pQ),[h,p]=k.useState(""),[g,x]=k.useState([]),[b,y]=k.useState(null),[w,S]=k.useState(!1),[j,N]=k.useState(!1);k.useEffect(()=>{(async()=>{if(!h.trim())return x(r);N(!0);try{const I=await s(h);x(I)}finally{N(!1)}})()},[r,h,s]);const F=k.useCallback(D=>{const{name:I,value:U}=D.target;f(R=>({...R,[I]:U}))},[]),E=k.useCallback(D=>{f(I=>{const R=I.bloquesAfectados.includes(D)?I.bloquesAfectados.filter(Y=>Y!==D):[...I.bloquesAfectados,D].sort((Y,H)=>Y-H);return{...I,bloquesAfectados:R}})},[]),_=k.useCallback(async D=>{D.preventDefault(),y(null),S(!0);const{docenteAusente:I,asignaturaAusente:U,curso:R,diaAusencia:Y,bloquesAfectados:H,docenteReemplazante:X,asignaturaReemplazante:V}=d;if(!I||!U||!R||!Y||!X||!V||H.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),S(!1);return}if(I===X){y("El docente ausente y el reemplazante no pueden ser la misma persona."),S(!1);return}try{const z=U.trim().toLowerCase()===V.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",q={...d,resultado:z};await n(q),f(pQ);const ne=document.createElement("div");ne.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",ne.textContent=z==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(ne),setTimeout(()=>{document.body.contains(ne)&&document.body.removeChild(ne)},2500)}catch(z){console.error(z),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{S(!1)}},[d,n]),B=k.useCallback(async D=>{if(window.confirm("¿Eliminar este registro?"))try{await a(D)}catch(I){console.error(I),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),P="w-full rounded-lg border bg-white px-10 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";return!e||!e.email&&!e.id?l.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"mb-1 text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas del Mes"}),l.jsx(Qwe,{userId:t,reemplazos:r})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[l.jsx(U0,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):l.jsxs("form",{onSubmit:_,className:"space-y-8",children:[l.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Bd,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),l.jsx(ux,{label:"Nombre",icon:l.jsx(Qv,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:F,className:P,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(D=>l.jsx("option",{value:D,children:D},D))]})}),l.jsx(ux,{label:"Asignatura",icon:l.jsx(fh,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:F,className:P,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),Ki.map(D=>l.jsx("option",{value:D,children:D},D))]})}),l.jsx(ux,{label:"Curso",icon:l.jsx(Bd,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"curso",value:d.curso,onChange:F,className:P,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(D=>l.jsx("option",{value:D,children:D},D))]})}),l.jsx(ux,{label:"Día de ausencia",icon:l.jsx($f,{className:"h-5 w-5"}),children:l.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:F,className:P,required:!0,disabled:w})}),l.jsxs("div",{children:[l.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[l.jsx(M0,{className:"h-5 w-5 text-slate-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),l.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:Owe.map(D=>{const I=d.bloquesAfectados.includes(D);return l.jsx("button",{type:"button",onClick:()=>E(D),disabled:w,className:`${Rwe} ${I?Lwe:Mwe}`,"aria-pressed":I,children:D},D)})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Bd,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),l.jsx(ux,{label:"Nombre",icon:l.jsx(Qv,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:F,className:P,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(D=>l.jsx("option",{value:D,children:D},D))]})}),l.jsx(ux,{label:"Asignatura",icon:l.jsx(fh,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:F,className:P,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),Ki.map(D=>l.jsx("option",{value:D,children:D},D))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&l.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(yd,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(b||o)&&l.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:b||o}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:w||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:w?l.jsxs(l.Fragment,{children:[l.jsx(U0,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):l.jsxs(l.Fragment,{children:[l.jsx(yw,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:j?l.jsx(U0,{className:"h-5 w-5 animate-spin"}):l.jsx(ww,{className:"h-5 w-5"})}),l.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:D=>p(D.target.value),className:P,disabled:j})]})]}),i?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[l.jsx(U0,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Fecha","Curso","Docente Ausente","Docente Reemplazante","Bloques","Resultado","Acciones"].map(D=>l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:D},D))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:g.length>0?g.map(D=>l.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(D.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:D.curso}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[D.docenteAusente,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:D.asignaturaAusente})]}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[D.docenteReemplazante,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:D.asignaturaReemplazante})]}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:D.bloquesAfectados.join(", ")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${D.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(yd,{className:"h-4 w-4"}),D.resultado]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsx("button",{onClick:()=>B(D.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:w,children:l.jsx(Fc,{className:"h-4 w-4"})})})]},D.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),g.length>0&&!h&&l.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",g.length," registros"]})]})]})]})},Vwe=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=Tt(tn,"reemplazos"),r=Wt(t,Tr("fecha","desc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},zwe=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=Tt(tn,"acompanamientos"),r=Wt(t,Tr("fecha","desc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},$we=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=Tt(tn,"calendar_events"),r=Wt(t,Tr("date","asc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},vA=({title:e,value:t,description:r,isLoading:n=!1})=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),cp=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=k.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),i=k.useMemo(()=>Math.max(...s,1),[s]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):l.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,c)=>(typeof c.value=="number"?c.value:0)-(typeof o.value=="number"?o.value:0)).map((o,c)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+c)}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},Gwe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState([]),[i,o]=k.useState(!0),[c,u]=k.useState(null);return k.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const p=Vwe(b=>{t(b),h()}),g=zwe(b=>{n(b),h()}),x=$we(b=>{s(b),h()});return()=>{p(),g(),x()}}catch(p){console.error("❌ Error al configurar suscripciones del dashboard:",p),u(p instanceof Error?p.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:c}},Kwe=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=Gwe(),[i,o]=k.useState(Qy);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),k.useEffect(()=>{try{const p=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(p?JSON.parse(p):Qy)}catch(p){console.error("Error al leer rúbrica personalizada",p),o(Qy)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),l.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[l.jsx("p",{children:l.jsx("strong",{children:"Debug Info:"})}),l.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),l.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),l.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),l.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=k.useMemo(()=>{const p=t.length;if(p===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(N=>N.resultado==="Hora realizada").length,x=p-g,b=`${(g/p*100).toFixed(1)}%`,y=(N,F)=>N.reduce((E,_)=>{const B=_[F];return typeof B=="string"&&(E[B]=(E[B]||0)+1),E},{}),w=y(t,"docenteAusente"),S=y(t,"docenteReemplazante"),j=y(t,"curso");return{totalInasistencias:p,horasRealizadas:g,horasCubiertas:x,tasaCobertura:b,inasistenciasPorDocente:Object.entries(w).map(([N,F])=>({label:N,value:F})),reemplazosPorDocente:Object.entries(S).map(([N,F])=>({label:N,value:F})),inasistenciasPorCurso:Object.entries(j).map(([N,F])=>({label:N,value:F})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=k.useMemo(()=>{const p=r.length;if(p===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;i.forEach(F=>{F.criteria.forEach(E=>{g.set(E.name,F.domain)})});let x=0,b=0;const y={},w={};r.forEach(F=>{y[F.docente]||(y[F.docente]={total:0,count:0}),Object.entries(F.rubricaResultados).forEach(([E,_])=>{x+=_,b++,y[F.docente].total+=_,y[F.docente].count++;const B=g.get(E);B&&(w[B]||(w[B]={total:0,count:0}),w[B].total+=_,w[B].count++)})});const S=b>0?(x/b).toFixed(2):"N/A",j=Object.entries(y).map(([F,E])=>({label:F,value:E.count>0?(E.total/E.count).toFixed(2):0})),N=Object.entries(w).map(([F,E])=>({label:F,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:p,promedioGeneral:S,desempenoPorDocente:j,desempenoPorDominio:N}},[r,i]),d=k.useMemo(()=>{const p={[dn.EVALUACION]:0,[dn.ACTO]:0,[dn.ACTIVIDAD_FOCALIZADA]:0,[dn.SALIDA_PEDAGOGICA]:0};for(const x of n)p.hasOwnProperty(x.type)&&p[x.type]++;const g=Object.entries(p).map(([x,b])=>({label:hv[x].label,value:b}));return{totalEvaluaciones:p[dn.EVALUACION],totalActos:p[dn.ACTO],totalActividadesFocalizadas:p[dn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:p[dn.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"📊"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),l.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[l.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),l.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),l.jsx("p",{children:"• Calendario Académico"})]})]}):l.jsxs("div",{className:"space-y-12 animate-fade-in",children:[l.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),l.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(vA,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),l.jsx(vA,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),l.jsx(vA,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),l.jsx(vA,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(cp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),l.jsx(cp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),l.jsx(cp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),l.jsx(cp,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(vA,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),l.jsx(vA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(cp,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a}),l.jsx(cp,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a})]})]}),n.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(vA,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),l.jsx(vA,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),l.jsx(vA,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),l.jsx(vA,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(cp,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(p=>new Date(p.date)>=new Date).slice(0,5).map((p,g)=>{var x,b;return l.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:p.responsables||"Evento sin título"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(p.date).toLocaleDateString("es-CL")}),p.ubicacion&&l.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",p.ubicacion]})]}),l.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=hv[p.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((b=hv[p.type])==null?void 0:b.label)||p.type})]})},p.id||g)}),n.filter(p=>new Date(p.date)>=new Date).length===0&&l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(p=>p.docenteAusente),...r.map(p=>p.docente)]).size}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(p=>p.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),l.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[l.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),l.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var gQ;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(gQ||(gQ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xQ;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(xQ||(xQ={}));var vQ;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(vQ||(vQ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bQ=["user","model","function","system"];var yQ;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(yQ||(yQ={}));var wQ;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(wQ||(wQ={}));var EQ;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(EQ||(EQ={}));var CQ;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(CQ||(CQ={}));var Vy;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Vy||(Vy={}));var _Q;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(_Q||(_Q={}));var SQ;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(SQ||(SQ={}));var NQ;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(NQ||(NQ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class dx extends qo{constructor(t,r){super(t),this.response=r}}class see extends qo{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class Z0 extends qo{}class iee extends qo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qwe="https://generativelanguage.googleapis.com",Wwe="v1beta",Xwe="0.24.1",Ywe="genai-js";var rg;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(rg||(rg={}));class Jwe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Wwe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||qwe}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function Zwe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Ywe}/${Xwe}`),t.join(" ")}async function e2e(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",Zwe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new Z0(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new Z0(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new Z0(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function t2e(e,t,r,n,a,s){const i=new Jwe(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},s2e(s)),{method:"POST",headers:await e2e(i),body:a})}}async function S2(e,t,r,n,a,s={},i=fetch){const{url:o,fetchOptions:c}=await t2e(e,t,r,n,a,s);return r2e(o,c,i)}async function r2e(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){n2e(a,e)}return n.ok||await a2e(n,e),n}function n2e(e,t){let r=e;throw r.name==="AbortError"?(r=new iee(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof see||e instanceof Z0||(r=new qo(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function a2e(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new see(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function s2e(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),z_(e.candidates[0]))throw new dx(`${N0(e)}`,e);return i2e(e)}else if(e.promptFeedback)throw new dx(`Text not available. ${N0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),z_(e.candidates[0]))throw new dx(`${N0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),kQ(e)[0]}else if(e.promptFeedback)throw new dx(`Function call not available. ${N0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),z_(e.candidates[0]))throw new dx(`${N0(e)}`,e);return kQ(e)}else if(e.promptFeedback)throw new dx(`Function call not available. ${N0(e)}`,e)},e}function i2e(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function kQ(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const o2e=[Vy.RECITATION,Vy.SAFETY,Vy.LANGUAGE];function z_(e){return!!e.finishReason&&o2e.includes(e.finishReason)}function N0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];z_(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function Cw(e){return this instanceof Cw?(this.v=e,this):new Cw(e)}function l2e(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(p){return new Promise(function(g,x){s.push([h,p,g,x])>1||o(h,p)})})}function o(h,p){try{c(n[h](p))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof Cw?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){o("next",h)}function d(h){o("throw",h)}function f(h,p){h(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BQ=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function c2e(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=A2e(t),[n,a]=r.tee();return{stream:d2e(n),response:u2e(a)}}async function u2e(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return dP(f2e(t));t.push(a)}}function d2e(e){return l2e(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield Cw(r.read());if(a)break;yield yield Cw(dP(n))}})}function A2e(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new qo("Failed to parse stream"));return}n.close();return}a+=i;let c=a.match(BQ),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new qo(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(BQ)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new iee("Request aborted when reading from the stream"):o=new qo("Error reading from the stream"),o})}}})}function f2e(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oee(e,t,r,n){const a=await S2(t,rg.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return c2e(a)}async function lee(e,t,r,n){const s=await(await S2(t,rg.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:dP(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cee(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function _w(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return h2e(t)}function h2e(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new qo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new qo("No content is provided for sending chat message.");return n?t:r}function m2e(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new Z0("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=_w(e);n.contents=[s]}return{generateContentRequest:n}}function TQ(e){let t;return e.contents?t=e:t={contents:[_w(e)]},e.systemInstruction&&(t.systemInstruction=cee(e.systemInstruction)),t}function p2e(e){return typeof e=="string"||Array.isArray(e)?{content:_w(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jQ=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],g2e={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function x2e(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new qo(`First content should be with role 'user', got ${n}`);if(!bQ.includes(n))throw new qo(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(bQ)}`);if(!Array.isArray(a))throw new qo("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new qo("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const c of jQ)c in o&&(s[c]+=1);const i=g2e[n];for(const o of jQ)if(!i.includes(o)&&s[o]>0)throw new qo(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function IQ(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FQ="SILENT_ERROR";class v2e{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(x2e(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=_w(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>lee(this._apiKey,this.model,d,f)).then(p=>{var g;if(IQ(p.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=p.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=N0(p.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=_w(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=oee(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(p=>{throw new Error(FQ)}).then(p=>p.response).then(p=>{if(IQ(p)){this._history.push(u);const g=Object.assign({},p.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=N0(p);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(p=>{p.message!==FQ&&console.error(p)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2e(e,t,r,n){return(await S2(t,rg.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2e(e,t,r,n){return(await S2(t,rg.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function w2e(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await S2(t,rg.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=cee(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=TQ(t),s=Object.assign(Object.assign({},this._requestOptions),r);return lee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=TQ(t),s=Object.assign(Object.assign({},this._requestOptions),r);return oee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new v2e(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=m2e(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return b2e(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=p2e(t),a=Object.assign(Object.assign({},this._requestOptions),r);return y2e(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return w2e(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new qo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new OQ(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new Z0("Cached content must contain a `name` field.");if(!t.model)throw new Z0("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===c)continue}throw new Z0(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new OQ(this.apiKey,s,n)}}const AP="horario_asignaciones",uee="horarios_generados",E2e="usuarios",dee=e=>{const t=e.data();return{id:e.id,...t}},C2e=e=>{const t=Wt(Tt(pt,AP));return pr(t,n=>{const a=n.docs.map(s=>dee(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},_2e=async e=>{try{return(await Ln(Tt(pt,AP),e)).id}catch(t){throw console.error("Error al agregar asignación:",t),new Error("No se pudo agregar la asignación.")}},S2e=async e=>{try{const t=dr(pt,AP,e);await Za(t)}catch(t){throw console.error("Error al eliminar asignación:",t),new Error("No se pudo eliminar la asignación.")}},DQ=async e=>{try{const t=dr(pt,uee,"global");await Yi(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},N2e=e=>{const t=dr(pt,uee,"global");return pr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})},k2e=e=>{const t=Wt(Tt(pt,E2e),nn("profile","==",Kt.PROFESORADO));return pr(t,n=>{const a=n.docs.map(s=>dee(s));e(a)},n=>{console.error("Error al suscribirse a los profesores:",n),e([])})},B2e=({horarios:e})=>Object.keys(e).length===0?l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):l.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Ks.map(t=>l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:t},t))]})}),l.jsx("tbody",{children:Q_.map(t=>l.jsxs(ct.Fragment,{children:[l.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:l.jsx("th",{colSpan:2+Ks.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:t.toUpperCase()})}),E6.map(({bloque:r,inicio:n,fin:a})=>l.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),Ks.map(s=>{var o,c;const i=(c=(o=e[s])==null?void 0:o[t])==null?void 0:c[r];return l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?l.jsxs("div",{className:"flex flex-col justify-center h-full",children:[l.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),l.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):l.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${t}-${r}`)})]},`${t}-${r}`))]},t))})]})}),T2e=()=>{const[e,t]=k.useState([]),[r,n]=k.useState({curso:"",asignatura:"",profesor:""}),[a,s]=k.useState([]),[i,o]=k.useState({}),[c,u]=k.useState(Ks[0]),[d,f]=k.useState(!1),[h,p]=k.useState(!0),[g,x]=k.useState(null),[b,y]=k.useState(null),[w,S]=k.useState(null),[j,N]=k.useState({asignatura:"",profesor:""}),[F,E]=k.useState("edicion"),[_,B]=k.useState("");k.useEffect(()=>{p(!0);const V=C2e(t),z=N2e(o),q=k2e(ne=>{const M=ne.map(W=>W.nombreCompleto).sort();s(M),p(!1)});return()=>{V(),z(),q()}},[]);const P=async V=>{if(V.preventDefault(),x(null),!r.curso||!r.asignatura||!r.profesor){x("Todos los campos de la asignación son obligatorios.");return}try{await _2e({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(z){x(z instanceof Error?z.message:"Error al guardar la asignación.")}},D=async V=>{try{await S2e(V)}catch(z){x(z instanceof Error?z.message:"Error al eliminar la asignación.")}},I=async()=>{if(e.length===0){x("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}f(!0),x(null),y(null);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new Bs(V),q=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${Q_.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(E6,null,2)}
                - Cursos del liceo: ${Ks.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(sbe,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(e,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${_||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,re=(await(await z.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(q)).response).text().replace(/^```json\s*|```\s*$/g,""),ae=JSON.parse(re);await DQ(ae),y("¡Horario generado y guardado con éxito!")}catch(V){console.error("Error al generar horario con IA:",V),x("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{f(!1)}},U=(V,z,q)=>{S({dia:V,bloque:z}),N({asignatura:(q==null?void 0:q.asignatura)||"",profesor:(q==null?void 0:q.profesor)||""})},R=async()=>{if(!w)return;const{dia:V,bloque:z}=w,q=JSON.parse(JSON.stringify(i));q[c]||(q[c]={}),q[c][V]||(q[c][V]={}),q[c][V][z]={asignatura:j.asignatura||null,profesor:j.profesor||null};try{await DQ(q),S(null)}catch(ne){x(ne instanceof Error?ne.message:"Error al guardar la edición.")}},Y="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",H=()=>{const V=i[c]||{};return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),Q_.map(z=>l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:z},z))]})}),l.jsx("tbody",{children:E6.map(({bloque:z,inicio:q,fin:ne})=>l.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[l.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:z}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${q} - ${ne}`})]}),Q_.map(M=>{var re;const W=(w==null?void 0:w.dia)===M&&(w==null?void 0:w.bloque)===z,Z=(re=V[M])==null?void 0:re[z];return l.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!W&&U(M,z,Z),children:W?l.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[l.jsx("input",{type:"text",placeholder:"Asignatura",value:j.asignatura,onChange:ae=>N(ce=>({...ce,asignatura:ae.target.value})),className:Y+" text-xs mb-1"}),l.jsx("input",{type:"text",placeholder:"Profesor",value:j.profesor,onChange:ae=>N(ce=>({...ce,profesor:ae.target.value})),className:Y+" text-xs"}),l.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[l.jsx("button",{onClick:()=>S(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),l.jsx("button",{onClick:R,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):Z!=null&&Z.asignatura?l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:Z.asignatura}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",Z.profesor,")"]})]}):l.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${M}-${z}`)})]},z))})]})})},X=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),l.jsxs("form",{onSubmit:P,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:r.curso,onChange:V=>n(z=>({...z,curso:V.target.value})),className:Y,children:[l.jsx("option",{value:"",children:"Seleccione"}),Ks.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:V=>n(z=>({...z,asignatura:V.target.value})),className:Y,children:[l.jsx("option",{value:"",children:"Seleccione"}),Ki.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),l.jsxs("select",{name:"profesor",value:r.profesor,onChange:V=>n(z=>({...z,profesor:V.target.value})),className:Y,children:[l.jsx("option",{value:"",children:"Seleccione"}),a.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),l.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:l.jsx("ul",{className:"space-y-2",children:e.map(V=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[l.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[V.curso," - ",V.asignatura," - ",l.jsx("strong",{children:V.profesor})]}),l.jsx("button",{onClick:()=>D(V.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},V.id))})})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),l.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:_,onChange:V=>B(V.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:Y})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:I,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),g&&l.jsx("p",{className:"text-red-600",children:g}),b&&l.jsx("p",{className:"text-green-600",children:b})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),l.jsx("select",{id:"selectCurso",value:c,onChange:V=>u(V.target.value),className:Y+" md:w-1/3",children:Ks.map(V=>l.jsx("option",{value:V,children:V},V))})]}),Object.keys(i).length>0?H():l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return h?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>E("edicion"),className:`${F==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),l.jsx("button",{onClick:()=>E("global"),className:`${F==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),F==="edicion"?X():l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),l.jsx(B2e,{horarios:i})]})]})},d4="acciones",j2e=async()=>{try{const e=Wt(Tt(tn,d4),Tr("fechaRegistro","desc"));return(await ga(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acciones:",e),new Error("No se pudieron cargar las acciones pedagógicas")}},I2e=async e=>{try{return{id:(await Ln(Tt(tn,d4),{...e,fechaRegistro:e.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear acción:",t),new Error("No se pudo crear la acción pedagógica")}},PQ=async(e,t)=>{try{const r=dr(tn,d4,e);await Lu(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",e),new Error("No se pudo actualizar la acción pedagógica")}},F2e=async e=>{try{const t=dr(tn,d4,e);await Za(t)}catch(t){throw console.error("Error al eliminar acción:",t,"ID:",e),new Error("No se pudo eliminar la acción pedagógica")}},RQ={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},kT={Pendiente:{badge:"bg-red-50 text-red-700 ring-1 ring-inset ring-red-200 dark:bg-red-900/30 dark:text-red-200 dark:ring-red-800",dot:"bg-red-500",icon:l.jsx(kd,{className:"h-4 w-4","aria-hidden":!0})},"En Proceso":{badge:"bg-yellow-50 text-yellow-700 ring-1 ring-inset ring-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:ring-yellow-800",dot:"bg-yellow-500",icon:l.jsx(hye,{className:"h-4 w-4","aria-hidden":!0})},Cumplida:{badge:"bg-green-50 text-green-700 ring-1 ring-inset ring-green-200 dark:bg-green-900/30 dark:text-green-200 dark:ring-green-800",dot:"bg-green-500",icon:l.jsx(yd,{className:"h-4 w-4","aria-hidden":!0})}},Ff="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/70 focus:border-amber-500/70 transition",Ax="block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",O2e="inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold",BT="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/70 dark:bg-slate-900/60 backdrop-blur shadow-sm",LQ="inline-flex items-center justify-center gap-2 rounded-xl bg-slate-900 text-white dark:bg-amber-500 dark:text-slate-900 px-4 py-2 font-semibold hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500/70 transition",MQ="inline-flex items-center justify-center gap-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 px-4 py-2 font-semibold hover:bg-slate-200 dark:hover:bg-slate-700 transition",UQ="inline-flex items-center justify-center rounded-lg p-2 hover:bg-slate-100 dark:hover:bg-slate-800 transition",Rb="px-4 py-3 text-left text-[10px] md:text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",Hx="px-4 py-4 align-top text-sm text-slate-700 dark:text-slate-200",D2e="flex flex-col items-center justify-center gap-3 py-12 text-slate-500 dark:text-slate-400",P2e=()=>l.jsx("tr",{children:l.jsx("td",{className:Hx,colSpan:5,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-200 dark:bg-slate-700 animate-pulse"}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx("div",{className:"h-3 w-1/3 bg-slate-200 dark:bg-slate-700 animate-pulse rounded"}),l.jsx("div",{className:"h-3 w-2/3 bg-slate-200 dark:bg-slate-700 animate-pulse rounded"})]})]})})}),R2e=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!1),[a,s]=k.useState(null),[i,o]=k.useState(RQ),[c,u]=k.useState(null),[d,f]=k.useState(""),[h,p]=k.useState(""),[g,x]=k.useState(""),b=k.useCallback(async()=>{n(!0);try{const _=await j2e();t(_),s(null)}catch(_){console.error("Error al cargar acciones:",_),s("No se pudieron cargar las acciones pedagógicas.")}finally{n(!1)}},[]);k.useEffect(()=>{b()},[b]);const y=k.useCallback(_=>{const{name:B,value:P}=_.target;o(D=>({...D,[B]:P}))},[]),w=k.useCallback(()=>{o(RQ),u(null),s(null)},[]),S=k.useCallback(async _=>{if(_.preventDefault(),!i.responsable||!i.area||!i.descripcion||!i.fechaCumplimiento){s("Los campos responsables, área, descripción y fecha de cumplimiento son obligatorios.");return}try{c?await PQ(c,i):await I2e(i),await b(),w()}catch(B){console.error("Error al guardar acción:",B),s("Error al guardar la acción.")}},[i,c,b,w]),j=k.useCallback(_=>{window.scrollTo({top:0,behavior:"smooth"}),u(_.id),o({..._,enlaceDocumento:_.enlaceDocumento||""})},[]),N=k.useCallback(async _=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await F2e(_),await b()}catch(B){console.error("Error al eliminar acción:",B),s("No se pudo eliminar la acción.")}},[b]),F=k.useCallback(async _=>{try{const B=e.find(P=>P.id===_);if(B){const D=(fC.indexOf(B.estado)+1)%fC.length,I=fC[D];await PQ(_,{estado:I}),await b()}}catch(B){console.error("Error al cambiar estado:",B),s("No se pudo cambiar el estado de la acción.")}},[e,b]),E=k.useMemo(()=>e.filter(_=>{const B=d===""||_.responsable.toLowerCase().includes(d.toLowerCase())||_.descripcion.toLowerCase().includes(d.toLowerCase()),P=h===""||_.area===h,D=g===""||_.estado===g;return B&&P&&D}),[e,d,h,g]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Seguimiento de Acciones Pedagógicas"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:c?"Editando acción existente.":"Registre una nueva acción de seguimiento."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>b(),className:MQ,title:"Recargar",children:[l.jsx(Gye,{className:"h-4 w-4"}),"Refrescar"]}),l.jsxs("button",{type:"button",onClick:w,className:LQ,title:"Nueva acción",children:[l.jsx(Xx,{className:"h-4 w-4"}),"Nueva"]})]})]}),l.jsx("div",{className:BT,children:l.jsxs("form",{onSubmit:S,className:"p-6 md:p-8 space-y-6",children:[a&&l.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-red-200 bg-red-50 p-3 text-red-700 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800",children:[l.jsx(kd,{className:"h-5 w-5"}),l.jsx("span",{children:a})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaRegistro",className:Ax,children:"Fecha de Registro"}),l.jsxs("div",{className:"relative",children:[l.jsx($f,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsx("input",{id:"fechaRegistro",type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:y,className:Ff+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:Ax,children:"Responsable"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ew,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsx("input",{id:"responsable",type:"text",name:"responsable",value:i.responsable,onChange:y,placeholder:"Nombre del responsable",className:Ff+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"area",className:Ax,children:"Área Vinculada"}),l.jsxs("div",{className:"relative",children:[l.jsx(lP,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsxs("select",{id:"area",name:"area",value:i.area,onChange:y,className:Ff+" pl-10",children:[l.jsx("option",{value:"",children:"Seleccione un área"}),sQ.map(_=>l.jsx("option",{value:_,children:_},_))]})]})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{htmlFor:"descripcion",className:Ax,children:"Descripción de la Acción"}),l.jsxs("div",{className:"relative",children:[l.jsx(Zf,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),l.jsx("textarea",{id:"descripcion",name:"descripcion",value:i.descripcion,onChange:y,rows:3,placeholder:"Detalle de la acción a realizar...",className:Ff+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaCumplimiento",className:Ax,children:"Fecha de Cumplimiento"}),l.jsxs("div",{className:"relative",children:[l.jsx($f,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsx("input",{id:"fechaCumplimiento",type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:y,className:Ff+" pl-10"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"enlaceDocumento",className:Ax,children:"Enlace a Documento (Opcional)"}),l.jsxs("div",{className:"relative",children:[l.jsx(AQ,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsx("input",{id:"enlaceDocumento",type:"url",name:"enlaceDocumento",value:i.enlaceDocumento||"",onChange:y,placeholder:"https://ejemplo.com/documento",className:Ff+" pl-10"})]})]})]}),l.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[c&&l.jsx("button",{type:"button",onClick:w,className:MQ,children:"Cancelar"}),l.jsxs("button",{type:"submit",className:LQ,children:[c?l.jsx($S,{className:"h-4 w-4"}):l.jsx(Xx,{className:"h-4 w-4"}),c?"Actualizar Acción":"Registrar Acción"]})]})]})}),l.jsx("div",{className:BT,children:l.jsx("div",{className:"p-4 md:p-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx(ww,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:_=>f(_.target.value),className:Ff+" pl-10"})]}),l.jsxs("select",{value:h,onChange:_=>p(_.target.value),className:Ff,children:[l.jsx("option",{value:"",children:"Filtrar por Área"}),sQ.map(_=>l.jsx("option",{value:_,children:_},_))]}),l.jsxs("select",{value:g,onChange:_=>x(_.target.value),className:Ff,children:[l.jsx("option",{value:"",children:"Filtrar por Estado"}),fC.map(_=>l.jsx("option",{value:_,children:_},_))]})]})})}),l.jsx("div",{className:BT,children:l.jsx("div",{className:"overflow-x-auto rounded-2xl",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-slate-50/80 dark:bg-slate-800/80 backdrop-blur",children:l.jsxs("tr",{children:[l.jsx("th",{className:Rb,children:"Responsable"}),l.jsx("th",{className:Rb,children:"Descripción"}),l.jsx("th",{className:Rb,children:"Fechas"}),l.jsx("th",{className:`${Rb} text-center`,children:"Estado"}),l.jsx("th",{className:`${Rb} text-center`,children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:r?l.jsx(P2e,{}):E.length>0?E.map(_=>{var B,P;return l.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/60 transition",children:[l.jsx("td",{className:Hx+" whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-amber-400 to-rose-400 text-white flex items-center justify-center font-bold shadow-sm",children:((P=(B=_.responsable)==null?void 0:B.slice(0,1))==null?void 0:P.toUpperCase())||"?"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:_.responsable}),l.jsx("div",{className:"text-xs text-slate-500",children:_.area})]})]})}),l.jsxs("td",{className:Hx+" max-w-lg",children:[l.jsx("p",{className:"text-sm leading-relaxed",children:_.descripcion}),_.enlaceDocumento&&l.jsxs("a",{href:_.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"mt-2 inline-flex items-center gap-1 text-xs font-semibold text-indigo-600 hover:text-indigo-800 dark:text-indigo-300 dark:hover:text-indigo-200",children:[l.jsx(AQ,{className:"h-3.5 w-3.5"}),"Documento"]})]}),l.jsxs("td",{className:Hx+" whitespace-nowrap",children:[l.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[l.jsx($f,{className:"h-4 w-4"}),"Reg: ",_.fechaRegistro]}),l.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2 mt-1",children:[l.jsx($f,{className:"h-4 w-4"}),"Comp: ",_.fechaCumplimiento]})]}),l.jsx("td",{className:Hx+" whitespace-nowrap text-center",children:l.jsxs("button",{onClick:()=>F(_.id),className:`${O2e} ${kT[_.estado].badge}`,title:"Cambiar estado",children:[l.jsx("span",{className:`h-2 w-2 rounded-full ${kT[_.estado].dot}`}),kT[_.estado].icon,_.estado]})}),l.jsx("td",{className:Hx+" whitespace-nowrap text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[l.jsx("button",{onClick:()=>j(_),title:"Editar",className:UQ+" text-yellow-600 dark:text-yellow-300",children:l.jsx($S,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>N(_.id),title:"Eliminar",className:UQ+" text-red-600 dark:text-red-300",children:l.jsx(Fc,{className:"h-5 w-5"})})]})})]},_.id)}):l.jsx("tr",{children:l.jsx("td",{colSpan:5,children:l.jsxs("div",{className:D2e,children:[l.jsx(ww,{className:"h-10 w-10"}),l.jsx("p",{children:"No se encontraron acciones."})]})})})})]})})})]})},A4="planificaciones",Aee="actividades_calendario",fee=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},L2e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await Ln(Tt(pt,A4),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},M2e=async(e,t,r)=>{try{const n=dr(pt,A4,e),a=await S1(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await Lu(n,{...t,fechaActualizacion:ir.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},U2e=async(e,t)=>{try{const r=dr(pt,A4,e),n=await S1(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await Za(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},Q2e=(e,t)=>{const r=Wt(Tt(pt,A4),nn("userId","==",e),Tr("fechaCreacion","desc"));return pr(r,n=>{const a=n.docs.map(fee);t(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},H2e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await Ln(Tt(pt,Aee),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},V2e=(e,t)=>{const r=Wt(Tt(pt,Aee),nn("userId","==",e),Tr("fecha","desc"));return pr(r,n=>{const a=n.docs.map(fee);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},z2e=e=>{const[t,r]=k.useState([]),[n,a]=k.useState(!0),[s,i]=k.useState(null);return k.useEffect(()=>e?(a(!0),Q2e(e,f=>{r(f),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await L2e(d,e)}catch(f){throw i(f.message||"Error al guardar planificación"),f}},update:async(d,f)=>{try{i(null),await M2e(d,f,e)}catch(h){throw i(h.message||"Error al actualizar planificación"),h}},remove:async d=>{try{i(null),await U2e(d,e)}catch(f){throw i(f.message||"Error al eliminar planificación"),f}}}},k6=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},$2e=e=>{const[t,r]=k.useState([]),[n,a]=k.useState(!0),[s,i]=k.useState(null);k.useEffect(()=>e?V2e(e,u=>{r(u),a(!1)}):void 0,[e]);const o=k.useCallback(async c=>{try{return i(null),await H2e(c,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:o}},G2e=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=k.useState(e),i=c=>{s({...a,[c.target.name]:c.target.value})},o=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar lección:",c)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),l.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),l.jsx("textarea",{name:c,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),l.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},K2e=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=k.useState(e.progreso??0),[o,c]=k.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);i(f),c(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),i(e.progreso??0)}finally{c(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:o||n}),l.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),o&&l.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),l.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),l.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},q2e=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=k.useState(e),[o,c]=k.useState(!1),u=f=>{const{name:h,value:p}=f.target,[g,x]=h.split(".");i(g==="momentosClase"?b=>({...b,momentosClase:{...b.momentosClase,[x]:p}}):b=>({...b,[h]:p}))},d=async()=>{c(!0);try{await r(s)}catch(f){console.error("Error al guardar plan de clase:",f)}finally{c(!1)}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),l.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:"← Volver"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),l.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),l.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),l.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),l.jsx("div",{className:"text-right mt-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:"🗑️ Eliminar Plan"}),l.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},W2e=({userId:e})=>{const{actividades:t,save:r}=$2e(e),[n,a]=k.useState("list"),[s,i]=k.useState(null),[o,c]=k.useState(!1),[u,d]=k.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,p]=k.useState(f);k.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(F){console.error("Error al verificar evento en calendario:",F)}},x=F=>{const{name:E,value:_}=F.target;p(B=>({...B,[E]:_}))},b=(F,E,_)=>{p(B=>({...B,tareas:B.tareas.map(P=>P.id===F?{...P,[E]:_}:P)}))},y=()=>{p(F=>({...F,tareas:[...F.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},w=F=>{p(E=>({...E,tareas:E.tareas.filter(_=>_.id!==F)}))},S=async F=>{F.preventDefault(),c(!0);const E=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(_=>_.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{k6("Planificación - Actividad Calendario");const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",U=(await(await new Bs(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(E)).response).text(),R={...h,objetivo:U.replace(/(\*\*|\*)/g,"")},Y=await r(R),H={...R,id:Y};i(H),a("summary")}catch(_){console.error("Error al generar objetivo con IA:",_),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const B={...h,objetivo:"No generado"},P=await r(B),D={...B,id:P};i(D),a("summary")}catch(B){console.error("Error al guardar actividad:",B),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{c(!1)}},j=async F=>{if(F)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},N="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsxs("form",{onSubmit:S,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:N,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:N,required:!0,disabled:o}),l.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:N,required:!0,disabled:o})]}),l.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:N,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicación",className:N,required:!0,disabled:o}),l.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:N,required:!0,disabled:o})]}),l.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:N,disabled:o})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),l.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),l.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((F,E)=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[l.jsx("button",{type:"button",onClick:()=>w(F.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),l.jsx("textarea",{value:F.descripcion,onChange:_=>b(F.id,"descripcion",_.target.value),placeholder:`Descripción de la Tarea ${E+1}`,rows:2,className:N,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[l.jsx("input",{value:F.responsable,onChange:_=>b(F.id,"responsable",_.target.value),placeholder:"Responsable",className:N,required:!0,disabled:o}),l.jsx("input",{value:F.recursos,onChange:_=>b(F.id,"recursos",_.target.value),placeholder:"Recursos Necesarios",className:N,disabled:o})]})]},F.id))})]}),l.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[l.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),l.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[l.jsx("span",{className:"text-2xl",children:"✓"}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),l.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),l.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),l.jsxs("div",{className:"space-y-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),l.jsx("span",{children:s.nombre})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),l.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),l.jsx("p",{children:s.descripcion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),l.jsx("span",{children:s.ubicacion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),l.jsx("span",{children:s.participantes})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),l.jsx("p",{children:s.recursosGenerales})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),l.jsx("p",{children:s.objetivo})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[l.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),l.jsx("button",{onClick:()=>j(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),l.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),l.jsx("button",{onClick:()=>{a("form"),p(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),l.jsx("div",{className:"space-y-3",children:t.length>0?t.map(F=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:F.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(F.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",F.ubicacion]})]},F.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},X2e=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=z2e(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[c,u]=k.useState(o),[d,f]=k.useState(null),[h,p]=k.useState(!1),[g,x]=k.useState(null),[b,y]=k.useState("unidad"),[w,S]=k.useState(null),[j,N]=k.useState(null),F=k.useMemo(()=>e.asignaturas||[],[e.asignaturas]),E=k.useMemo(()=>{const q=e.cursos||[],ne=new Set;return q.forEach(M=>{M.startsWith("1º")?ne.add("1º Medio"):M.startsWith("2º")?ne.add("2º Medio"):M.startsWith("3º")?ne.add("3º Medio"):M.startsWith("4º")&&ne.add("4º Medio")}),Array.from(ne)},[e.cursos]);k.useEffect(()=>{u(q=>({...q,asignatura:F[0]||"",nivel:E[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(q=>({id:q.id,autor:q.autor,tipo:q.tipo,coincideConUserId:q.autor===t}))})},[F,E,e,t,r]);const _=q=>{const{name:ne,value:M}=q.target;u(W=>({...W,[ne]:ne==="cantidadClases"?parseInt(M,10):M}))},B=()=>{const{asignatura:q,nivel:ne,nombreUnidad:M,contenidos:W,cantidadClases:Z,observaciones:re,ideasParaUnidad:ae}=c;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${q}
    - Nivel: ${ne}
    - Nombre de la Unidad: "${M}"
    - Contenidos clave a trabajar (insumo principal): "${W}"
    - Cantidad de clases para la unidad: ${Z}
    - Ideas y perspectiva del docente para la unidad: "${ae||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${re||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Z} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},P=async q=>{if(q.preventDefault(),p(!0),x(null),!c.contenidos||!c.nombreUnidad){x("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),p(!1);return}try{k6("Planificación - Unidad");const ne="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new Bs(ne).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Z=B(),re={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},oe=(await(await W.generateContent({contents:[{parts:[{text:Z}]}],generationConfig:{responseMimeType:"application/json",responseSchema:re}})).response).text(),le=JSON.parse(oe),pe={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:c.asignatura,nivel:c.nivel,nombreUnidad:c.nombreUnidad,contenidos:c.contenidos,cantidadClases:c.cantidadClases,observaciones:c.observaciones,ideasParaUnidad:c.ideasParaUnidad,objetivosAprendizaje:le.objetivosAprendizaje,indicadoresEvaluacion:le.indicadoresEvaluacion,detallesLeccion:le.detallesLeccion};if(d)await a(d.id,pe),f({...pe,id:d.id});else{const Be=await n(pe);f({...pe,id:Be})}}catch(ne){console.error("Error al generar planificación con IA",ne),x("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{p(!1)}},D=async(q,ne)=>{p(!0),x(null);const M=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ne.asignatura}
    - Nivel: ${ne.nivel}
    - Objetivo de la clase: ${q.objetivosAprendizaje}
    - Contenidos: ${q.contenidosConceptuales}
    - Actividades sugeridas: ${q.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{k6("Planificación - Utilizar Clase");const W="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",re=new Bs(W).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ae={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},le=(await(await re.generateContent({contents:[{parts:[{text:M}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ae}})).response).text(),pe=JSON.parse(le),Be={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:ne.asignatura,nivel:ne.nivel,contenidos:q.contenidosConceptuales,observaciones:"",nombreClase:q.actividades,duracionClase:80,momentosClase:pe,detalleLeccionOrigen:q};await n(Be),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),y("clase")}catch(W){console.error("Error al generar plan de clase con IA",W),x("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{p(!1)}},I=q=>{q.tipo==="Unidad"&&(u({asignatura:q.asignatura,nivel:q.nivel,nombreUnidad:q.nombreUnidad,contenidos:q.contenidos,cantidadClases:q.cantidadClases,observaciones:q.observaciones,ideasParaUnidad:q.ideasParaUnidad||""}),f(q),window.scrollTo({top:0,behavior:"smooth"}))},U=async q=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(q),(d==null?void 0:d.id)===q&&(f(null),u(o))}catch(ne){console.error("Error al eliminar planificación:",ne),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},R=async q=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await s(q),(w==null?void 0:w.id)===q&&S(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(ne){console.error("Error al eliminar plan de clase:",ne),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},Y=(q,ne)=>{d&&N({planId:d.id,lessonIndex:q,lessonData:ne})},H=async q=>{if(j)try{const{planId:ne,lessonIndex:M}=j,W=r.find(ae=>ae.id===ne&&ae.tipo==="Unidad");if(!W)return;const Z=[...W.detallesLeccion];Z[M]=q;const re={...W,detallesLeccion:Z};await a(ne,re),f(re),N(null)}catch(ne){console.error("Error al actualizar lección:",ne),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},X="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("form",{onSubmit:P,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:c.asignatura,onChange:_,className:X,disabled:h,children:F.length>0?F.map(q=>l.jsx("option",{value:q,children:q},q)):l.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:c.nivel,onChange:_,className:X,disabled:h,children:E.length>0?E.map(q=>l.jsx("option",{value:q,children:q},q)):l.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombreUnidad",value:c.nombreUnidad,onChange:_,className:X,placeholder:"Ej: La Célula y sus procesos",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenidos",value:c.contenidos,onChange:_,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:X,disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),l.jsx("textarea",{name:"ideasParaUnidad",value:c.ideasParaUnidad,onChange:_,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:X,disabled:h})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),l.jsx("input",{type:"number",name:"cantidadClases",value:c.cantidadClases,onChange:_,className:X,min:"1",max:"20",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),l.jsx("textarea",{name:"observaciones",value:c.observaciones,onChange:_,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:X,disabled:h})]})]}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:h||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:h?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),g&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g})]})]}),d&&l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),l.jsx(K2e,{plan:d,onEditLesson:Y,onUseLesson:D,onUpdatePlan:a,isLoading:h})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:r.filter(q=>q.tipo==="Unidad").length>0?r.filter(q=>q.tipo==="Unidad").map(q=>l.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===q.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:q.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(q.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",q.contenidos]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>I(q),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:h,children:"Ver y Editar"}),l.jsx("button",{onClick:()=>U(q.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:h,children:"🗑️"})]})]})},q.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),z=()=>{const q=r.filter(ne=>ne.tipo==="Clase").sort((ne,M)=>new Date(M.fechaCreacion).getTime()-new Date(ne.fechaCreacion).getTime());return w?l.jsx(q2e,{plan:w,onBack:()=>S(null),onDelete:R,onSave:async ne=>{try{await a(ne.id,ne),S(ne)}catch(M){console.error("Error al actualizar plan de clase:",M),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:h}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:q.length>0?q.map(ne=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ne.nombreClase}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ne.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ne.contenidos]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>S(ne),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ne.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!e||!e.email&&!e.id?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>y("unidad"),className:`${b==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),l.jsx("button",{onClick:()=>y("clase"),className:`${b==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),l.jsx("button",{onClick:()=>y("calendario"),className:`${b==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),b==="unidad"&&V(),b==="clase"&&z(),b==="calendario"&&l.jsx(W2e,{userId:t}),j&&l.jsx(G2e,{lesson:j.lessonData,onClose:()=>N(null),onSave:H,isLoading:h})]})},f4="events",Y2e=async()=>{try{const e=Wt(Tt(tn,f4),Tr("date","asc"));return(await ga(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},J2e=async e=>{try{return{id:(await Ln(Tt(tn,f4),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},Z2e=async(e,t)=>{try{const r=dr(tn,f4,e);await Lu(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},eEe=async e=>{try{const t=dr(tn,f4,e);await Za(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},tEe=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],QQ={[dn.EVALUACION]:l.jsx(fh,{className:"h-4 w-4"}),[dn.ACTO]:l.jsx(Fye,{className:"h-4 w-4"}),[dn.ACTIVIDAD_FOCALIZADA]:l.jsx(ree,{className:"h-4 w-4"}),[dn.SALIDA_PEDAGOGICA]:l.jsx(qye,{className:"h-4 w-4"})},rEe=e=>{switch(e.type){case dn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case dn.ACTO:return`Acto: ${e.ubicacion}`;case dn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case dn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},nEe=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,c]=k.useState({});k.useEffect(()=>{c(a||{type:dn.EVALUACION,subtype:bp.PRUEBA_PARCIAL,asignatura:Ki[0],curso:Ks[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:b,value:y}=x.target;c(w=>({...w,[b]:y}))},f=x=>{c(b=>{if(b.type===dn.SALIDA_PEDAGOGICA){const y=b.cursos||[],w=y.includes(x)?y.filter(S=>S!==x):[...y,x];return{...b,cursos:w.sort()}}return b})},h=x=>{var y;x.preventDefault();let b;switch(o.type){case dn.EVALUACION:{const w={date:s,type:dn.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===bp.RUBRICA||o.subtype===bp.PAUTA_COTEJO)&&((y=o.enlace)!=null&&y.trim())&&(w.enlace=o.enlace.trim()),b=w;break}case dn.ACTO:b={date:s,type:dn.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case dn.ACTIVIDAD_FOCALIZADA:b={date:s,type:dn.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case dn.SALIDA_PEDAGOGICA:b={date:s,type:dn.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(b)};if(!e)return null;const p=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(o.type){case dn.EVALUACION:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),l.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:ibe.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:Ki.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:Ks.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),l.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===bp.RUBRICA||o.subtype===bp.PAUTA_COTEJO)&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),l.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case dn.ACTO:case dn.ACTIVIDAD_FOCALIZADA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),l.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),l.jsxs("div",{className:"relative",children:[l.jsx(zS,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),l.jsxs("div",{className:"relative",children:[l.jsx(M0,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case dn.SALIDA_PEDAGOGICA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),l.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),l.jsxs("div",{className:"relative",children:[l.jsx(zS,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("fieldset",{children:[l.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),l.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:Ks.map(x=>l.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),l.jsx("span",{children:x})]},x))})]})]});default:return null}};return l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:l.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:l.jsxs("form",{onSubmit:h,children:[l.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:p})]}),l.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:l.jsx(GS,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),l.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(dn).map(x=>l.jsx("option",{value:x,children:x},x))})]}),g()]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[l.jsx("div",{children:a&&n&&l.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[l.jsx(Fc,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[l.jsx(GS,{className:"h-4 w-4"}),"Cancelar"]}),l.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[l.jsx(yw,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},aEe=({profile:e})=>{const[t,r]=k.useState(new Date),[n,a]=k.useState([]),[s,i]=k.useState(!1),[o,c]=k.useState(null),[u,d]=k.useState(!1),[f,h]=k.useState(Object.values(dn)),[p,g]=k.useState(!1),[x,b]=k.useState(null),[y,w]=k.useState(null),S=k.useCallback(async()=>{i(!0);try{const D=await Y2e();a(D),c(null)}catch(D){console.error("Error al cargar eventos desde Firestore",D),c("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);k.useEffect(()=>{S()},[S]);const j=k.useMemo(()=>{const D=t.getFullYear(),I=t.getMonth(),U=new Date(D,I,1).getDay(),R=new Date(D,I+1,0).getDate(),Y=[];let H=1;for(let X=0;X<6;X++){const V=[];for(let z=0;z<7;z++)X===0&&z<U||H>R?V.push(null):(V.push(new Date(D,I,H)),H++);if(Y.push(V),H>R)break}return Y},[t]),N=D=>{h(I=>I.includes(D)?I.filter(U=>U!==D):[...I,D])},F=()=>{f.length===Object.values(dn).length?h([]):h(Object.values(dn))},E=D=>{e!==Kt.ESTUDIANTE&&(b(D.toISOString().split("T")[0]),w(null),g(!0))},_=(D,I)=>{I.stopPropagation(),e!==Kt.ESTUDIANTE&&(b(D.date),w(D),g(!0))},B=async D=>{d(!0);try{y?await Z2e(y.id,D):await J2e(D),await S(),g(!1)}catch(I){console.error("Error al guardar evento:",I);const U=I instanceof Error?I.message:"Error desconocido";c(`Error al guardar el evento: ${U}`)}finally{d(!1)}},P=async()=>{if(y){d(!0);try{await eEe(y.id),await S(),g(!1)}catch(D){console.error("Error al eliminar evento:",D);const I=D instanceof Error?D.message:"Error desconocido";c(`No se pudo eliminar el evento: ${I}`)}finally{d(!1)}}};return l.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),l.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),l.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&l.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),o&&l.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:o}),!s&&n.length===0&&l.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[l.jsx(pye,{className:"h-5 w-5 mt-0.5"}),l.jsx("p",{children:"No hay eventos registrados en la nube."})]}),l.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[l.jsx(lP,{className:"h-4 w-4"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[l.jsx("button",{onClick:F,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(dn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(dn).map(D=>l.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(D)?`shadow-sm ${hv[D].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[l.jsx("input",{type:"checkbox",checked:f.includes(D),onChange:()=>N(D),className:"hidden"}),l.jsx("span",{className:"shrink-0",children:QQ[D]}),l.jsx("span",{children:hv[D].label})]},D))]})]}),l.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[l.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(bw,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(eee,{className:"h-5 w-5"})})]}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),l.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),l.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:tEe.map(D=>l.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:D},D))}),l.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:j.flat().map((D,I)=>{const U=D&&D.toDateString()===new Date().toDateString(),R=D==null?void 0:D.toISOString().split("T")[0],Y=R?n.filter(H=>H.date===R&&f.includes(H.type)):[];return l.jsx("div",{onClick:()=>D&&E(D),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${D?e!==Kt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:D&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:`self-end text-sm font-semibold ${U?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:D.getDate()}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:Y.map(H=>l.jsxs("div",{onClick:X=>_(H,X),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${hv[H.type].color}`,children:[l.jsx("span",{className:"shrink-0",children:QQ[H.type]}),l.jsx("span",{className:"truncate",children:rEe(H)})]},H.id))}),e!==Kt.ESTUDIANTE&&l.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:l.jsx(eh,{className:"h-4 w-4"})})]})},I)})})]}),p&&l.jsx(nEe,{isOpen:p,onClose:()=>g(!1),onSave:B,onDelete:P,event:y,date:x,isLoading:u})]})},h4="anuncios",sEe=async()=>{try{const e=Wt(Tt(tn,h4),Tr("fechaPublicacion","desc"));return(await ga(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},iEe=async e=>{try{return{id:(await Ln(Tt(tn,h4),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},oEe=async(e,t)=>{try{const r=dr(tn,h4,e);await Lu(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},lEe=async e=>{try{const t=dr(tn,h4,e);await Za(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},HQ=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],cEe=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState(!1),[s,i]=k.useState(null),[o,c]=k.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=k.useState({tipo:"Todos",cursos:[]}),f=k.useCallback(async()=>{a(!0);try{const E=await sEe();r(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);k.useEffect(()=>{f()},[f]);const h=E=>{const{name:_,value:B}=E.target;c(P=>({...P,[_]:B}))},p=E=>{d({tipo:E,cursos:E==="Cursos"?[]:void 0})},g=E=>{d(_=>{var P;if(_.tipo!=="Cursos")return _;const B=(P=_.cursos)!=null&&P.includes(E)?_.cursos.filter(D=>D!==E):[..._.cursos||[],E];return{..._,cursos:B}})},x=async E=>{if(E.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const _={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...o};await iEe(_),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(_){console.error("Error al crear anuncio:",_),i("Error al publicar el anuncio en la nube.")}},b=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await lEe(E),await f()}catch(_){console.error("Error al eliminar anuncio:",_),i("No se pudo eliminar el anuncio en la nube.")}},y=async E=>{try{const _=t.find(B=>B.id===E);_&&(await oEe(E,{destacado:!_.destacado}),await f())}catch(_){console.error("Error al actualizar anuncio:",_),i("No se pudo actualizar el estado del anuncio en la nube.")}},w=k.useMemo(()=>[...t].sort((E,_)=>E.destacado&&!_.destacado?-1:!E.destacado&&_.destacado?1:new Date(_.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[t]),S=k.useMemo(()=>{const E=e.profile,_=e.curso;return w.filter(B=>{if(E===Kt.SUBDIRECCION)return!0;if(!B.destinatarios)return E!==Kt.ESTUDIANTE;const{tipo:P,cursos:D}=B.destinatarios;return P==="Todos"||P==="Profesores"&&E===Kt.PROFESORADO||P==="Coordinación TP"&&E===Kt.COORDINACION_TP?!0:P==="Cursos"?E===Kt.ESTUDIANTE?D==null?void 0:D.includes(_||""):!0:!1})},[w,e]),j=E=>e.profile===Kt.ESTUDIANTE?!1:e.profile===Kt.SUBDIRECCION||e.profile===E.profileCreador,N=()=>e.profile===Kt.SUBDIRECCION||e.profile===Kt.PROFESORADO,F="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Kt.ESTUDIANTE?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),l.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:h,required:!0,className:F})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),l.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:h,required:!0,rows:4,className:F})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),l.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(E=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>p(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),l.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinación TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&l.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Ks.map(E=>{var _;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(_=u.cursos)==null?void 0:_.includes(E),onChange:()=>g(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),l.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:F})]}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&S.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&S.length>0&&S.map((E,_)=>{const B=HQ[_%HQ.length];return l.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${B.bg} ${B.rotate}`,children:[E.destacado&&l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:l.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),l.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),l.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&l.jsx("div",{className:"font-sans text-sm mb-4",children:l.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),l.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:E.autor}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"flex items-center",children:[N()&&l.jsx("button",{onClick:()=>y(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),j(E)&&l.jsx("button",{onClick:()=>b(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},hee="api_logs",uEe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:ir.fromDate(new Date)};await Ln(Tt(pt,hee),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},dEe=e=>{const t=Wt(Tt(pt,hee),Tr("timestamp","desc"));return pr(t,n=>{const a=n.docs.map(s=>{var o,c;const i=s.data();return{id:s.id,...i,timestamp:((c=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:c.call(o).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},mm=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}uEe(e,t)},fP="actas_de_reunion",AEe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},fEe=e=>{const t=Wt(Tt(pt,fP),Tr("fechaCreacion","desc"));return pr(t,n=>{const a=n.docs.map(s=>AEe(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},hEe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date(e.fechaCreacion))};return(await Ln(Tt(pt,fP),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},mEe=async e=>{try{const t=dr(pt,fP,e);await Za(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},mee=window.SpeechRecognition||window.webkitSpeechRecognition,VQ=!!mee,pEe=({isListening:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),gEe=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState(null),[s,i]=k.useState({tipoReunion:_T[0],asistentes:"",textoReunion:""}),[o,c]=k.useState(!1),[u,d]=k.useState(!1),[f,h]=k.useState(!0),[p,g]=k.useState(null),x=k.useRef(null);k.useEffect(()=>{h(!0);const E=fEe(_=>{r(_),!n&&_.length>0&&a(_[0]),h(!1)});return()=>E()},[n]);const b=E=>{const{name:_,value:B}=E.target;i(P=>({...P,[_]:B}))},y=k.useCallback(()=>{var E;if(!VQ){g("El reconocimiento de voz no es compatible con este navegador.");return}o?(E=x.current)==null||E.stop():(x.current=new mee,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=_=>{let B="";for(let P=_.resultIndex;P<_.results.length;++P)_.results[P].isFinal&&(B+=_.results[P][0].transcript+". ");i(P=>({...P,textoReunion:P.textoReunion+B}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=_=>{console.error("Speech recognition error",_.error),g(`Error de reconocimiento: ${_.error}`),c(!1)},x.current.start())},[o]),w=async E=>{E.preventDefault();const{tipoReunion:_,asistentes:B,textoReunion:P}=s;if(!_||!B.trim()||!P.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{mm("Generador de Actas");const D="",U=new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro"}),R=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${P}"
                
                Asistentes a la reunión para referencia de nombres: ${B}
            `,V=(await(await U.generateContent(R)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(V),q={fechaCreacion:new Date().toISOString(),...s,...z},ne=await hEe(q,e);i({tipoReunion:_T[0],asistentes:"",textoReunion:""})}catch(D){console.error("Error al analizar acta con IA:",D),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},S=async E=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await mEe(E),(n==null?void 0:n.id)===E&&a(t.length>1?t[1]:null)}catch(_){console.error("Error deleting acta:",_),alert("No se pudo eliminar el acta.")}},j=E=>{a(E)},N=E=>E.temas||E.acuerdos||E.plazos||E.responsables?l.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),E.temas&&E.temas.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((B,P)=>l.jsx("li",{children:B},P))})]}),E.acuerdos&&E.acuerdos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((B,P)=>l.jsx("li",{children:B},P))})]}),E.plazos&&E.plazos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((B,P)=>l.jsx("li",{children:B},P))})]}),E.responsables&&E.responsables.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((B,P)=>l.jsx("li",{children:B},P))})]})]}):null,F="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?l.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[l.jsxs("div",{className:"md:col-span-1 space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),l.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",l.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),l.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:b,required:!0,className:F,children:_T.map(E=>l.jsx("option",{value:E,children:E},E))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),l.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:b,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:F})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:b,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:F}),VQ&&l.jsx("button",{type:"button",onClick:y,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:l.jsx(pEe,{isListening:o})})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(E=>l.jsxs("button",{onClick:()=>j(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),l.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),l.jsx("button",{onClick:()=>S(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[l.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),l.jsx("h2",{children:"Asistentes"}),l.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((E,_)=>E.trim()&&l.jsx("li",{children:E.trim()},_))}),N(n),l.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:l.jsx("p",{children:n.textoReunion})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[l.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},xEe="modulepreload",vEe=function(e){return"/"+e},zQ={},Hv=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=vEe(u),u in zQ)return;zQ[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":xEe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function ma(e){"@babel/helpers - typeof";return ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ma(e)}var Wo=Uint8Array,Ic=Uint16Array,hP=Int32Array,m4=new Wo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),p4=new Wo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),B6=new Wo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pee=function(e,t){for(var r=new Ic(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new hP(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},gee=pee(m4,2),xee=gee.b,T6=gee.r;xee[28]=258,T6[258]=28;var vee=pee(p4,0),bEe=vee.b,$Q=vee.r,j6=new Ic(32768);for(var Ua=0;Ua<32768;++Ua){var x0=(Ua&43690)>>1|(Ua&21845)<<1;x0=(x0&52428)>>2|(x0&13107)<<2,x0=(x0&61680)>>4|(x0&3855)<<4,j6[Ua]=((x0&65280)>>8|(x0&255)<<8)>>1}var $A=function(e,t,r){for(var n=e.length,a=0,s=new Ic(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new Ic(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new Ic(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=i[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)o[j6[f]>>c]=u}else for(o=new Ic(n),a=0;a<n;++a)e[a]&&(o[a]=j6[i[e[a]-1]++]>>15-e[a]);return o},pm=new Wo(288);for(var Ua=0;Ua<144;++Ua)pm[Ua]=8;for(var Ua=144;Ua<256;++Ua)pm[Ua]=9;for(var Ua=256;Ua<280;++Ua)pm[Ua]=7;for(var Ua=280;Ua<288;++Ua)pm[Ua]=8;var Sw=new Wo(32);for(var Ua=0;Ua<32;++Ua)Sw[Ua]=5;var yEe=$A(pm,9,0),wEe=$A(pm,9,1),EEe=$A(Sw,5,0),CEe=$A(Sw,5,1),TT=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},dd=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},jT=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},mP=function(e){return(e+7)/8|0},bee=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Wo(e.subarray(t,r))},_Ee=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],md=function(e,t,r){var n=new Error(t||_Ee[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,md),!r)throw n;return n},SEe=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Wo(0);var i=!r,o=i||t.i!=2,c=t.i;i&&(r=new Wo(a*3));var u=function(Be){var te=r.length;if(Be>te){var _e=new Wo(Math.max(te*2,Be));_e.set(r),r=_e}},d=t.f||0,f=t.p||0,h=t.b||0,p=t.l,g=t.d,x=t.m,b=t.n,y=a*8;do{if(!p){d=dd(e,f,1);var w=dd(e,f+1,3);if(f+=3,w)if(w==1)p=wEe,g=CEe,x=9,b=5;else if(w==2){var F=dd(e,f,31)+257,E=dd(e,f+10,15)+4,_=F+dd(e,f+5,31)+1;f+=14;for(var B=new Wo(_),P=new Wo(19),D=0;D<E;++D)P[B6[D]]=dd(e,f+D*3,7);f+=E*3;for(var I=TT(P),U=(1<<I)-1,R=$A(P,I,1),D=0;D<_;){var Y=R[dd(e,f,U)];f+=Y&15;var S=Y>>4;if(S<16)B[D++]=S;else{var H=0,X=0;for(S==16?(X=3+dd(e,f,3),f+=2,H=B[D-1]):S==17?(X=3+dd(e,f,7),f+=3):S==18&&(X=11+dd(e,f,127),f+=7);X--;)B[D++]=H}}var V=B.subarray(0,F),z=B.subarray(F);x=TT(V),b=TT(z),p=$A(V,x,1),g=$A(z,b,1)}else md(1);else{var S=mP(f)+4,j=e[S-4]|e[S-3]<<8,N=S+j;if(N>a){c&&md(0);break}o&&u(h+j),r.set(e.subarray(S,N),h),t.b=h+=j,t.p=f=N*8,t.f=d;continue}if(f>y){c&&md(0);break}}o&&u(h+131072);for(var q=(1<<x)-1,ne=(1<<b)-1,M=f;;M=f){var H=p[jT(e,f)&q],W=H>>4;if(f+=H&15,f>y){c&&md(0);break}if(H||md(2),W<256)r[h++]=W;else if(W==256){M=f,p=null;break}else{var Z=W-254;if(W>264){var D=W-257,re=m4[D];Z=dd(e,f,(1<<re)-1)+xee[D],f+=re}var ae=g[jT(e,f)&ne],ce=ae>>4;ae||md(3),f+=ae&15;var z=bEe[ce];if(ce>3){var re=p4[ce];z+=jT(e,f)&(1<<re)-1,f+=re}if(f>y){c&&md(0);break}o&&u(h+131072);var oe=h+Z;if(h<z){var le=s-z,pe=Math.min(z,oe);for(le+h<0&&md(3);h<pe;++h)r[h]=n[le+h]}for(;h<oe;++h)r[h]=r[h-z]}}t.l=p,t.p=M,t.b=h,t.f=d,p&&(d=1,t.m=x,t.d=g,t.n=b)}while(!d);return h!=r.length&&i?bee(r,0,h):r.subarray(0,h)},Of=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Lb=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},IT=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:wee,l:0};if(a==1){var i=new Wo(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(N,F){return N.f-F.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var p=new Ic(h+1),g=I6(r[d-1],p,0);if(g>t){var n=0,x=0,b=g-t,y=1<<b;for(s.sort(function(F,E){return p[E.s]-p[F.s]||F.f-E.f});n<a;++n){var w=s[n].s;if(p[w]>t)x+=y-(1<<g-p[w]),p[w]=t;else break}for(x>>=b;x>0;){var S=s[n].s;p[S]<t?x-=1<<t-p[S]++-1:++n}for(;n>=0&&x;--n){var j=s[n].s;p[j]==t&&(--p[j],++x)}g=t}return{t:new Wo(p),l:g}},I6=function(e,t,r){return e.s==-1?Math.max(I6(e.l,t,r+1),I6(e.r,t,r+1)):t[e.s]=r},GQ=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ic(++t),n=0,a=e[0],s=1,i=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},Mb=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},yee=function(e,t,r){var n=r.length,a=mP(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},KQ=function(e,t,r,n,a,s,i,o,c,u,d){Of(t,d++,r),++a[256];for(var f=IT(a,15),h=f.t,p=f.l,g=IT(s,15),x=g.t,b=g.l,y=GQ(h),w=y.c,S=y.n,j=GQ(x),N=j.c,F=j.n,E=new Ic(19),_=0;_<w.length;++_)++E[w[_]&31];for(var _=0;_<N.length;++_)++E[N[_]&31];for(var B=IT(E,7),P=B.t,D=B.l,I=19;I>4&&!P[B6[I-1]];--I);var U=u+5<<3,R=Mb(a,pm)+Mb(s,Sw)+i,Y=Mb(a,h)+Mb(s,x)+i+14+3*I+Mb(E,P)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&U<=R&&U<=Y)return yee(t,d,e.subarray(c,c+u));var H,X,V,z;if(Of(t,d,1+(Y<R)),d+=2,Y<R){H=$A(h,p,0),X=h,V=$A(x,b,0),z=x;var q=$A(P,D,0);Of(t,d,S-257),Of(t,d+5,F-1),Of(t,d+10,I-4),d+=14;for(var _=0;_<I;++_)Of(t,d+3*_,P[B6[_]]);d+=3*I;for(var ne=[w,N],M=0;M<2;++M)for(var W=ne[M],_=0;_<W.length;++_){var Z=W[_]&31;Of(t,d,q[Z]),d+=P[Z],Z>15&&(Of(t,d,W[_]>>5&127),d+=W[_]>>12)}}else H=yEe,X=pm,V=EEe,z=Sw;for(var _=0;_<o;++_){var re=n[_];if(re>255){var Z=re>>18&31;Lb(t,d,H[Z+257]),d+=X[Z+257],Z>7&&(Of(t,d,re>>23&31),d+=m4[Z]);var ae=re&31;Lb(t,d,V[ae]),d+=z[ae],ae>3&&(Lb(t,d,re>>5&8191),d+=p4[ae])}else Lb(t,d,H[re]),d+=X[re]}return Lb(t,d,H[256]),d+X[256]},NEe=new hP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wee=new Wo(0),kEe=function(e,t,r,n,a,s){var i=s.z||e.length,o=new Wo(n+i+5*(1+Math.ceil(i/7e3))+a),c=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=NEe[t-1],h=f>>13,p=f&8191,g=(1<<r)-1,x=s.p||new Ic(32768),b=s.h||new Ic(g+1),y=Math.ceil(r/3),w=2*y,S=function(De){return(e[De]^e[De+1]<<y^e[De+2]<<w)&g},j=new hP(25e3),N=new Ic(288),F=new Ic(32),E=0,_=0,B=s.i||0,P=0,D=s.w||0,I=0;B+2<i;++B){var U=S(B),R=B&32767,Y=b[U];if(x[R]=Y,b[U]=R,D<=B){var H=i-B;if((E>7e3||P>24576)&&(H>423||!u)){d=KQ(e,c,0,j,N,F,_,P,I,B-I,d),P=E=_=0,I=B;for(var X=0;X<286;++X)N[X]=0;for(var X=0;X<30;++X)F[X]=0}var V=2,z=0,q=p,ne=R-Y&32767;if(H>2&&U==S(B-ne))for(var M=Math.min(h,H)-1,W=Math.min(32767,B),Z=Math.min(258,H);ne<=W&&--q&&R!=Y;){if(e[B+V]==e[B+V-ne]){for(var re=0;re<Z&&e[B+re]==e[B+re-ne];++re);if(re>V){if(V=re,z=ne,re>M)break;for(var ae=Math.min(ne,re-2),ce=0,X=0;X<ae;++X){var oe=B-ne+X&32767,le=x[oe],pe=oe-le&32767;pe>ce&&(ce=pe,Y=oe)}}}R=Y,Y=x[R],ne+=R-Y&32767}if(z){j[P++]=268435456|T6[V]<<18|$Q[z];var Be=T6[V]&31,te=$Q[z]&31;_+=m4[Be]+p4[te],++N[257+Be],++F[te],D=B+V,++E}else j[P++]=e[B],++N[e[B]]}}for(B=Math.max(B,D);B<i;++B)j[P++]=e[B],++N[e[B]];d=KQ(e,c,u,j,N,F,_,P,I,B-I,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=b,s.p=x,s.i=B,s.w=D)}else{for(var B=s.w||0;B<i+u;B+=65535){var _e=B+65535;_e>=i&&(c[d/8|0]=u,_e=i),d=yee(c,d+1,e.subarray(B,_e))}s.i=i}return bee(o,0,n+mP(d)+a)},Eee=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},BEe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new Wo(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return kEe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},Cee=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},TEe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Eee();a.p(t.dictionary),Cee(e,2,a.d())}},jEe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&md(6,"invalid zlib data"),(e[1]>>5&1)==1&&md(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function F6(e,t){t||(t={});var r=Eee();r.p(e);var n=BEe(e,t,t.dictionary?6:2,4);return TEe(n,t),Cee(n,n.length-4,r.d()),n}function IEe(e,t){return SEe(e.subarray(jEe(e),-4),{i:2},t,t)}var FEe=typeof TextDecoder<"u"&&new TextDecoder,OEe=0;try{FEe.decode(wee,{stream:!0}),OEe=1}catch{}var Mr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function FT(){Mr.console&&typeof Mr.console.log=="function"&&Mr.console.log.apply(Mr.console,arguments)}var _a={log:FT,warn:function(e){Mr.console&&(typeof Mr.console.warn=="function"?Mr.console.warn.apply(Mr.console,arguments):FT.call(null,arguments))},error:function(e){Mr.console&&(typeof Mr.console.error=="function"?Mr.console.error.apply(Mr.console,arguments):FT(e))}};function OT(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){mp(n.response,t,r)},n.onerror=function(){_a.error("could not download file")},n.send()}function qQ(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function gC(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var zy,O6,mp=Mr.saveAs||((typeof window>"u"?"undefined":ma(window))!=="object"||window!==Mr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Mr.URL||Mr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?qQ(a.href)?OT(e,t,r):gC(a,a.target="_blank"):gC(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){gC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(qQ(e))OT(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){gC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ma(s)!=="object"&&(_a.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return OT(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Mr.HTMLElement)||Mr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":ma(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=Mr.URL||Mr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function _ee(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function DT(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Fo(r,n,a,s,t[0],7,-680876936),s=Fo(s,r,n,a,t[1],12,-389564586),a=Fo(a,s,r,n,t[2],17,606105819),n=Fo(n,a,s,r,t[3],22,-1044525330),r=Fo(r,n,a,s,t[4],7,-176418897),s=Fo(s,r,n,a,t[5],12,1200080426),a=Fo(a,s,r,n,t[6],17,-1473231341),n=Fo(n,a,s,r,t[7],22,-45705983),r=Fo(r,n,a,s,t[8],7,1770035416),s=Fo(s,r,n,a,t[9],12,-1958414417),a=Fo(a,s,r,n,t[10],17,-42063),n=Fo(n,a,s,r,t[11],22,-1990404162),r=Fo(r,n,a,s,t[12],7,1804603682),s=Fo(s,r,n,a,t[13],12,-40341101),a=Fo(a,s,r,n,t[14],17,-1502002290),r=Oo(r,n=Fo(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Oo(s,r,n,a,t[6],9,-1069501632),a=Oo(a,s,r,n,t[11],14,643717713),n=Oo(n,a,s,r,t[0],20,-373897302),r=Oo(r,n,a,s,t[5],5,-701558691),s=Oo(s,r,n,a,t[10],9,38016083),a=Oo(a,s,r,n,t[15],14,-660478335),n=Oo(n,a,s,r,t[4],20,-405537848),r=Oo(r,n,a,s,t[9],5,568446438),s=Oo(s,r,n,a,t[14],9,-1019803690),a=Oo(a,s,r,n,t[3],14,-187363961),n=Oo(n,a,s,r,t[8],20,1163531501),r=Oo(r,n,a,s,t[13],5,-1444681467),s=Oo(s,r,n,a,t[2],9,-51403784),a=Oo(a,s,r,n,t[7],14,1735328473),r=Do(r,n=Oo(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Do(s,r,n,a,t[8],11,-2022574463),a=Do(a,s,r,n,t[11],16,1839030562),n=Do(n,a,s,r,t[14],23,-35309556),r=Do(r,n,a,s,t[1],4,-1530992060),s=Do(s,r,n,a,t[4],11,1272893353),a=Do(a,s,r,n,t[7],16,-155497632),n=Do(n,a,s,r,t[10],23,-1094730640),r=Do(r,n,a,s,t[13],4,681279174),s=Do(s,r,n,a,t[0],11,-358537222),a=Do(a,s,r,n,t[3],16,-722521979),n=Do(n,a,s,r,t[6],23,76029189),r=Do(r,n,a,s,t[9],4,-640364487),s=Do(s,r,n,a,t[12],11,-421815835),a=Do(a,s,r,n,t[15],16,530742520),r=Po(r,n=Do(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Po(s,r,n,a,t[7],10,1126891415),a=Po(a,s,r,n,t[14],15,-1416354905),n=Po(n,a,s,r,t[5],21,-57434055),r=Po(r,n,a,s,t[12],6,1700485571),s=Po(s,r,n,a,t[3],10,-1894986606),a=Po(a,s,r,n,t[10],15,-1051523),n=Po(n,a,s,r,t[1],21,-2054922799),r=Po(r,n,a,s,t[8],6,1873313359),s=Po(s,r,n,a,t[15],10,-30611744),a=Po(a,s,r,n,t[6],15,-1560198380),n=Po(n,a,s,r,t[13],21,1309151649),r=Po(r,n,a,s,t[4],6,-145523070),s=Po(s,r,n,a,t[11],10,-1120210379),a=Po(a,s,r,n,t[2],15,718787259),n=Po(n,a,s,r,t[9],21,-343485551),e[0]=Q0(r,e[0]),e[1]=Q0(n,e[1]),e[2]=Q0(a,e[2]),e[3]=Q0(s,e[3])}function g4(e,t,r,n,a,s){return t=Q0(Q0(t,e),Q0(n,s)),Q0(t<<a|t>>>32-a,r)}function Fo(e,t,r,n,a,s,i){return g4(t&r|~t&n,e,t,a,s,i)}function Oo(e,t,r,n,a,s,i){return g4(t&n|r&~n,e,t,a,s,i)}function Do(e,t,r,n,a,s,i){return g4(t^r^n,e,t,a,s,i)}function Po(e,t,r,n,a,s,i){return g4(r^(t|~n),e,t,a,s,i)}function See(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)DT(n,DEe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(DT(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,DT(n,a),n}function DEe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}zy=Mr.atob.bind(Mr),O6=Mr.btoa.bind(Mr);var WQ="0123456789abcdef".split("");function PEe(e){for(var t="",r=0;r<4;r++)t+=WQ[e>>8*r+4&15]+WQ[e>>8*r&15];return t}function REe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function D6(e){return See(e).map(REe).join("")}var LEe=function(e){for(var t=0;t<e.length;t++)e[t]=PEe(e[t]);return e.join("")}(See("hello"))!="5d41402abc4b2a76b9719d911017c592";function Q0(e,t){if(LEe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P6(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+i.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,h=0,p=0,g="";for(c=0;c<f;c++)p=(p+(d=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=d,i=o[(o[h]+o[p])%256],g+=String.fromCharCode(t.charCodeAt(c)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var XQ={print:4,modify:8,copy:16,"annot-forms":32};function Vx(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(XQ.perm!==void 0)throw new Error("Invalid permission: "+o);a+=XQ[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=D6(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=P6(this.encryptionKey,this.padding)}function zx(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function YQ(e){if(ma(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(o){Mr.console&&_a.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function KS(e){if(!(this instanceof KS))return new KS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Nee(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function yp(e,t,r,n,a){if(!(this instanceof yp))return new yp(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Nee.call(this,n,a)}function Yx(e,t,r,n,a){if(!(this instanceof Yx))return new Yx(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Nee.call(this,n,a)}function vr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,c=16,u="S",d=null;ma(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=YQ;var g="1.3",x=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(K){g=K};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(K){return b[K]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},S=w.COMPAT;function j(){this.saveGraphicsState(),fe(new bt(yt,0,0,-yt,0,Oi()*yt).toString()+" cm"),this.setFontSize(this.getFontSize()/yt),u="n",S=w.ADVANCED}function N(){this.restoreGraphicsState(),u="S",S=w.COMPAT}var F=p.__private__.combineFontStyleAndFontWeight=function(K,Ae){if(K=="bold"&&Ae=="normal"||K=="bold"&&Ae==400||K=="normal"&&Ae=="italic"||K=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(K=Ae==400||Ae==="normal"?K==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||K!=="normal"?(Ae==700?"bold":Ae)+""+K:"bold"),K};p.advancedAPI=function(K){var Ae=S===w.COMPAT;return Ae&&j.call(this),typeof K!="function"||(K(this),Ae&&N.call(this)),this},p.compatAPI=function(K){var Ae=S===w.ADVANCED;return Ae&&N.call(this),typeof K!="function"||(K(this),Ae&&j.call(this)),this},p.isAdvancedAPI=function(){return S===w.ADVANCED};var E,_=function(K){if(S!==w.ADVANCED)throw new Error(K+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=p.roundToPrecision=p.__private__.roundToPrecision=function(K,Ae){var Fe=t||Ae;if(isNaN(K)||isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return K.toFixed(Fe).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof c=="number"?function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return B(K,c)}:c==="smart"?function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return B(K,K>-1&&K<1?16:5)}:function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return B(K,16)};var P=p.f2=p.__private__.f2=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.f2");return B(K,2)},D=p.__private__.f3=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.f3");return B(K,3)},I=p.scale=p.__private__.scale=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.scale");return S===w.COMPAT?K*yt:S===w.ADVANCED?K:void 0},U=function(K){return S===w.COMPAT?Oi()-K:S===w.ADVANCED?K:void 0},R=function(K){return I(U(K))};p.__private__.setPrecision=p.setPrecision=function(K){typeof parseInt(K,10)=="number"&&(t=parseInt(K,10))};var Y,H="00000000000000000000000000000000",X=p.__private__.getFileId=function(){return H},V=p.__private__.setFileId=function(K){return H=K!==void 0&&/^[a-fA-F0-9]{32}$/.test(K)?K.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(la=new Vx(d.userPermissions,d.userPassword,d.ownerPassword,H)),H};p.setFileId=function(K){return V(K),this},p.getFileId=function(){return X()};var z=p.__private__.convertDateToPDFDate=function(K){var Ae=K.getTimezoneOffset(),Fe=Ae<0?"+":"-",Le=Math.floor(Math.abs(Ae/60)),Ge=Math.abs(Ae%60),vt=[Fe,Z(Le),"'",Z(Ge),"'"].join("");return["D:",K.getFullYear(),Z(K.getMonth()+1),Z(K.getDate()),Z(K.getHours()),Z(K.getMinutes()),Z(K.getSeconds()),vt].join("")},q=p.__private__.convertPDFDateToDate=function(K){var Ae=parseInt(K.substr(2,4),10),Fe=parseInt(K.substr(6,2),10)-1,Le=parseInt(K.substr(8,2),10),Ge=parseInt(K.substr(10,2),10),vt=parseInt(K.substr(12,2),10),Lt=parseInt(K.substr(14,2),10);return new Date(Ae,Fe,Le,Ge,vt,Lt,0)},ne=p.__private__.setCreationDate=function(K){var Ae;if(K===void 0&&(K=new Date),K instanceof Date)Ae=z(K);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(K))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=K}return Y=Ae},M=p.__private__.getCreationDate=function(K){var Ae=Y;return K==="jsDate"&&(Ae=q(Y)),Ae};p.setCreationDate=function(K){return ne(K),this},p.getCreationDate=function(K){return M(K)};var W,Z=p.__private__.padd2=function(K){return("0"+parseInt(K)).slice(-2)},re=p.__private__.padd2Hex=function(K){return("00"+(K=K.toString())).substr(K.length)},ae=0,ce=[],oe=[],le=0,pe=[],Be=[],te=!1,_e=oe,De=function(){ae=0,le=0,oe=[],ce=[],pe=[],Ce=Gr(),we=Gr()};p.__private__.setCustomOutputDestination=function(K){te=!0,_e=K};var Ne=function(K){te||(_e=K)};p.__private__.resetCustomOutputDestination=function(){te=!1,_e=oe};var fe=p.__private__.out=function(K){return K=K.toString(),le+=K.length+1,_e.push(K),_e},Ie=p.__private__.write=function(K){return fe(arguments.length===1?K.toString():Array.prototype.join.call(arguments," "))},Ue=p.__private__.getArrayBuffer=function(K){for(var Ae=K.length,Fe=new ArrayBuffer(Ae),Le=new Uint8Array(Fe);Ae--;)Le[Ae]=K.charCodeAt(Ae);return Fe},Ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ye};var ye=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(K){return ye=S===w.ADVANCED?K/yt:K,this};var Oe,Re=p.__private__.getFontSize=p.getFontSize=function(){return S===w.COMPAT?ye:ye*yt},qe=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(K){return qe=K,this},p.__private__.getR2L=p.getR2L=function(){return qe};var Ze,lt=p.__private__.setZoomMode=function(K){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(K))Oe=K;else if(isNaN(K)){if(Ae.indexOf(K)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+K+'" is not recognized.');Oe=K}else Oe=parseInt(K,10)};p.__private__.getZoomMode=function(){return Oe};var mt,It=p.__private__.setPageMode=function(K){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(K)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+K+'" is not recognized.');Ze=K};p.__private__.getPageMode=function(){return Ze};var Mt=p.__private__.setLayoutMode=function(K){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(K)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+K+'" is not recognized.');mt=K};p.__private__.getLayoutMode=function(){return mt},p.__private__.setDisplayMode=p.setDisplayMode=function(K,Ae,Fe){return lt(K),Mt(Ae),It(Fe),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(K){if(Object.keys(Pt).indexOf(K)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[K]},p.__private__.getDocumentProperties=function(){return Pt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(K){for(var Ae in Pt)Pt.hasOwnProperty(Ae)&&K[Ae]&&(Pt[Ae]=K[Ae]);return this},p.__private__.setDocumentProperty=function(K,Ae){if(Object.keys(Pt).indexOf(K)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[K]=Ae};var Qt,yt,kr,er,an,_r={},Vr={},jn=[],Or={},As={},hn={},oa={},Ba=null,en=0,mr=[],et=new YQ(p),gt=e.hotfixes||[],Je={},xt={},wt=[],bt=function K(Ae,Fe,Le,Ge,vt,Lt){if(!(this instanceof K))return new K(Ae,Fe,Le,Ge,vt,Lt);isNaN(Ae)&&(Ae=1),isNaN(Fe)&&(Fe=0),isNaN(Le)&&(Le=0),isNaN(Ge)&&(Ge=1),isNaN(vt)&&(vt=0),isNaN(Lt)&&(Lt=0),this._matrix=[Ae,Fe,Le,Ge,vt,Lt]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(K){this._matrix[0]=K}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(K){this._matrix[1]=K}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(K){this._matrix[2]=K}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(K){this._matrix[3]=K}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(K){this._matrix[4]=K}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(K){this._matrix[5]=K}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(K){this._matrix[0]=K}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(K){this._matrix[1]=K}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(K){this._matrix[2]=K}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(K){this._matrix[3]=K}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(K){this._matrix[4]=K}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(K){this._matrix[5]=K}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(K){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(K)},bt.prototype.multiply=function(K){var Ae=K.sx*this.sx+K.shy*this.shx,Fe=K.sx*this.shy+K.shy*this.sy,Le=K.shx*this.sx+K.sy*this.shx,Ge=K.shx*this.shy+K.sy*this.sy,vt=K.tx*this.sx+K.ty*this.shx+this.tx,Lt=K.tx*this.shy+K.ty*this.sy+this.ty;return new bt(Ae,Fe,Le,Ge,vt,Lt)},bt.prototype.decompose=function(){var K=this.sx,Ae=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,vt=this.ty,Lt=Math.sqrt(K*K+Ae*Ae),Jt=(K/=Lt)*Fe+(Ae/=Lt)*Le;Fe-=K*Jt,Le-=Ae*Jt;var O=Math.sqrt(Fe*Fe+Le*Le);return Jt/=O,K*(Le/=O)<Ae*(Fe/=O)&&(K=-K,Ae=-Ae,Jt=-Jt,Lt=-Lt),{scale:new bt(Lt,0,0,O,0,0),translate:new bt(1,0,0,1,Ge,vt),rotate:new bt(K,Ae,-Ae,K,0,0),skew:new bt(1,0,Jt,1,0,0)}},bt.prototype.toString=function(K){return this.join(" ")},bt.prototype.inversed=function(){var K=this.sx,Ae=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,vt=this.ty,Lt=1/(K*Le-Ae*Fe),Jt=Le*Lt,O=-Ae*Lt,ee=-Fe*Lt,ie=K*Lt;return new bt(Jt,O,ee,ie,-Jt*Ge-ee*vt,-O*Ge-ie*vt)},bt.prototype.applyToPoint=function(K){var Ae=K.x*this.sx+K.y*this.shx+this.tx,Fe=K.x*this.shy+K.y*this.sy+this.ty;return new Gu(Ae,Fe)},bt.prototype.applyToRectangle=function(K){var Ae=this.applyToPoint(K),Fe=this.applyToPoint(new Gu(K.x+K.w,K.y+K.h));return new qd(Ae.x,Ae.y,Fe.x-Ae.x,Fe.y-Ae.y)},bt.prototype.clone=function(){var K=this.sx,Ae=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,vt=this.ty;return new bt(K,Ae,Fe,Le,Ge,vt)},p.Matrix=bt;var nr=p.matrixMult=function(K,Ae){return Ae.multiply(K)},gr=new bt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=gr;var Kr=function(K,Ae){if(!As[K]){var Fe=(Ae instanceof yp?"Sh":"P")+(Object.keys(Or).length+1).toString(10);Ae.id=Fe,As[K]=Fe,Or[Fe]=Ae,et.publish("addPattern",Ae)}};p.ShadingPattern=yp,p.TilingPattern=Yx,p.addShadingPattern=function(K,Ae){return _("addShadingPattern()"),Kr(K,Ae),this},p.beginTilingPattern=function(K){_("beginTilingPattern()"),Jc(K.boundingBox[0],K.boundingBox[1],K.boundingBox[2]-K.boundingBox[0],K.boundingBox[3]-K.boundingBox[1],K.matrix)},p.endTilingPattern=function(K,Ae){_("endTilingPattern()"),Ae.stream=Be[W].join(`
`),Kr(K,Ae),et.publish("endTilingPattern",Ae),wt.pop().restore()};var Yr=p.__private__.newObject=function(){var K=Gr();return he(K,!0),K},Gr=p.__private__.newObjectDeferred=function(){return ae++,ce[ae]=function(){return le},ae},he=function(K,Ae){return Ae=typeof Ae=="boolean"&&Ae,ce[K]=le,Ae&&fe(K+" 0 obj"),K},Te=p.__private__.newAdditionalObject=function(){var K={objId:Gr(),content:""};return pe.push(K),K},Ce=Gr(),we=Gr(),Se=p.__private__.decodeColorString=function(K){var Ae=K.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var Fe=parseFloat(Ae[0]);Ae=[Fe,Fe,Fe,"r"]}for(var Le="#",Ge=0;Ge<3;Ge++)Le+=("0"+Math.floor(255*parseFloat(Ae[Ge])).toString(16)).slice(-2);return Le},je=p.__private__.encodeColorString=function(K){var Ae;typeof K=="string"&&(K={ch1:K});var Fe=K.ch1,Le=K.ch2,Ge=K.ch3,vt=K.ch4,Lt=K.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Fe=="string"&&Fe.charAt(0)!=="#"){var Jt=new _ee(Fe);if(Jt.ok)Fe=Jt.toHex();else if(!/^\d*\.?\d*$/.test(Fe))throw new Error('Invalid color "'+Fe+'" passed to jsPDF.encodeColorString.')}if(typeof Fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Fe)&&(Fe="#"+Fe[1]+Fe[1]+Fe[2]+Fe[2]+Fe[3]+Fe[3]),typeof Fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Fe)){var O=parseInt(Fe.substr(1),16);Fe=O>>16&255,Le=O>>8&255,Ge=255&O}if(Le===void 0||vt===void 0&&Fe===Le&&Le===Ge)if(typeof Fe=="string")Ae=Fe+" "+Lt[0];else switch(K.precision){case 2:Ae=P(Fe/255)+" "+Lt[0];break;case 3:default:Ae=D(Fe/255)+" "+Lt[0]}else if(vt===void 0||ma(vt)==="object"){if(vt&&!isNaN(vt.a)&&vt.a===0)return Ae=["1.","1.","1.",Lt[1]].join(" ");if(typeof Fe=="string")Ae=[Fe,Le,Ge,Lt[1]].join(" ");else switch(K.precision){case 2:Ae=[P(Fe/255),P(Le/255),P(Ge/255),Lt[1]].join(" ");break;default:case 3:Ae=[D(Fe/255),D(Le/255),D(Ge/255),Lt[1]].join(" ")}}else if(typeof Fe=="string")Ae=[Fe,Le,Ge,vt,Lt[2]].join(" ");else switch(K.precision){case 2:Ae=[P(Fe),P(Le),P(Ge),P(vt),Lt[2]].join(" ");break;case 3:default:Ae=[D(Fe),D(Le),D(Ge),D(vt),Lt[2]].join(" ")}return Ae},Xe=p.__private__.getFilters=function(){return i},dt=p.__private__.putStream=function(K){var Ae=(K=K||{}).data||"",Fe=K.filters||Xe(),Le=K.alreadyAppliedFilters||[],Ge=K.addLength1||!1,vt=Ae.length,Lt=K.objectId,Jt=function(Ir){return Ir};if(d!==null&&Lt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Jt=la.encryptor(Lt,0));var O={};Fe===!0&&(Fe=["FlateEncode"]);var ee=K.additionalKeyValues||[],ie=(O=vr.API.processDataByFilters!==void 0?vr.API.processDataByFilters(Ae,Fe):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(O.data.length!==0&&(ee.push({key:"Length",value:O.data.length}),Ge===!0&&ee.push({key:"Length1",value:vt})),ie.length!=0)if(ie.split("/").length-1==1)ee.push({key:"Filter",value:ie});else{ee.push({key:"Filter",value:"["+ie+"]"});for(var ve=0;ve<ee.length;ve+=1)if(ee[ve].key==="DecodeParms"){for(var ze=[],it=0;it<O.reverseChain.split("/").length-1;it+=1)ze.push("null");ze.push(ee[ve].value),ee[ve].value="["+ze.join(" ")+"]"}}fe("<<");for(var Ut=0;Ut<ee.length;Ut++)fe("/"+ee[Ut].key+" "+ee[Ut].value);fe(">>"),O.data.length!==0&&(fe("stream"),fe(Jt(O.data)),fe("endstream"))},$e=p.__private__.putPage=function(K){var Ae=K.number,Fe=K.data,Le=K.objId,Ge=K.contentsObjId;he(Le,!0),fe("<</Type /Page"),fe("/Parent "+K.rootDictionaryObjId+" 0 R"),fe("/Resources "+K.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(E(K.mediaBox.bottomLeftX))+" "+parseFloat(E(K.mediaBox.bottomLeftY))+" "+E(K.mediaBox.topRightX)+" "+E(K.mediaBox.topRightY)+"]"),K.cropBox!==null&&fe("/CropBox ["+E(K.cropBox.bottomLeftX)+" "+E(K.cropBox.bottomLeftY)+" "+E(K.cropBox.topRightX)+" "+E(K.cropBox.topRightY)+"]"),K.bleedBox!==null&&fe("/BleedBox ["+E(K.bleedBox.bottomLeftX)+" "+E(K.bleedBox.bottomLeftY)+" "+E(K.bleedBox.topRightX)+" "+E(K.bleedBox.topRightY)+"]"),K.trimBox!==null&&fe("/TrimBox ["+E(K.trimBox.bottomLeftX)+" "+E(K.trimBox.bottomLeftY)+" "+E(K.trimBox.topRightX)+" "+E(K.trimBox.topRightY)+"]"),K.artBox!==null&&fe("/ArtBox ["+E(K.artBox.bottomLeftX)+" "+E(K.artBox.bottomLeftY)+" "+E(K.artBox.topRightX)+" "+E(K.artBox.topRightY)+"]"),typeof K.userUnit=="number"&&K.userUnit!==1&&fe("/UserUnit "+K.userUnit),et.publish("putPage",{objId:Le,pageContext:mr[Ae],pageNumber:Ae,page:Fe}),fe("/Contents "+Ge+" 0 R"),fe(">>"),fe("endobj");var vt=Fe.join(`
`);return S===w.ADVANCED&&(vt+=`
Q`),he(Ge,!0),dt({data:vt,filters:Xe(),objectId:Ge}),fe("endobj"),Le},rt=p.__private__.putPages=function(){var K,Ae,Fe=[];for(K=1;K<=en;K++)mr[K].objId=Gr(),mr[K].contentsObjId=Gr();for(K=1;K<=en;K++)Fe.push($e({number:K,data:Be[K],objId:mr[K].objId,contentsObjId:mr[K].contentsObjId,mediaBox:mr[K].mediaBox,cropBox:mr[K].cropBox,bleedBox:mr[K].bleedBox,trimBox:mr[K].trimBox,artBox:mr[K].artBox,userUnit:mr[K].userUnit,rootDictionaryObjId:Ce,resourceDictionaryObjId:we}));he(Ce,!0),fe("<</Type /Pages");var Le="/Kids [";for(Ae=0;Ae<en;Ae++)Le+=Fe[Ae]+" 0 R ";fe(Le+"]"),fe("/Count "+en),fe(">>"),fe("endobj"),et.publish("postPutPages")},st=function(K){et.publish("putFont",{font:K,out:fe,newObject:Yr,putStream:dt}),K.isAlreadyPutted!==!0&&(K.objectNumber=Yr(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+zx(K.postScriptName)),fe("/Subtype /Type1"),typeof K.encoding=="string"&&fe("/Encoding /"+K.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},Ft=function(){for(var K in _r)_r.hasOwnProperty(K)&&(f===!1||f===!0&&h.hasOwnProperty(K))&&st(_r[K])},Vt=function(K){K.objectNumber=Yr();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[E(K.x),E(K.y),E(K.x+K.width),E(K.y+K.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+K.matrix.toString()+"]"});var Fe=K.pages[1].join(`
`);dt({data:Fe,additionalKeyValues:Ae,objectId:K.objectNumber}),fe("endobj")},Yt=function(){for(var K in Je)Je.hasOwnProperty(K)&&Vt(Je[K])},Ht=function(K,Ae){var Fe,Le=[],Ge=1/(Ae-1);for(Fe=0;Fe<1;Fe+=Ge)Le.push(Fe);if(Le.push(1),K[0].offset!=0){var vt={offset:0,color:K[0].color};K.unshift(vt)}if(K[K.length-1].offset!=1){var Lt={offset:1,color:K[K.length-1].color};K.push(Lt)}for(var Jt="",O=0,ee=0;ee<Le.length;ee++){for(Fe=Le[ee];Fe>K[O+1].offset;)O++;var ie=K[O].offset,ve=(Fe-ie)/(K[O+1].offset-ie),ze=K[O].color,it=K[O+1].color;Jt+=re(Math.round((1-ve)*ze[0]+ve*it[0]).toString(16))+re(Math.round((1-ve)*ze[1]+ve*it[1]).toString(16))+re(Math.round((1-ve)*ze[2]+ve*it[2]).toString(16))}return Jt.trim()},zt=function(K,Ae){Ae||(Ae=21);var Fe=Yr(),Le=Ht(K.colors,Ae),Ge=[];Ge.push({key:"FunctionType",value:"0"}),Ge.push({key:"Domain",value:"[0.0 1.0]"}),Ge.push({key:"Size",value:"["+Ae+"]"}),Ge.push({key:"BitsPerSample",value:"8"}),Ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dt({data:Le,additionalKeyValues:Ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Fe}),fe("endobj"),K.objectNumber=Yr(),fe("<< /ShadingType "+K.type),fe("/ColorSpace /DeviceRGB");var vt="/Coords ["+E(parseFloat(K.coords[0]))+" "+E(parseFloat(K.coords[1]))+" ";K.type===2?vt+=E(parseFloat(K.coords[2]))+" "+E(parseFloat(K.coords[3])):vt+=E(parseFloat(K.coords[2]))+" "+E(parseFloat(K.coords[3]))+" "+E(parseFloat(K.coords[4]))+" "+E(parseFloat(K.coords[5])),fe(vt+="]"),K.matrix&&fe("/Matrix ["+K.matrix.toString()+"]"),fe("/Function "+Fe+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},Sr=function(K,Ae){var Fe=Gr(),Le=Yr();Ae.push({resourcesOid:Fe,objectOid:Le}),K.objectNumber=Le;var Ge=[];Ge.push({key:"Type",value:"/Pattern"}),Ge.push({key:"PatternType",value:"1"}),Ge.push({key:"PaintType",value:"1"}),Ge.push({key:"TilingType",value:"1"}),Ge.push({key:"BBox",value:"["+K.boundingBox.map(E).join(" ")+"]"}),Ge.push({key:"XStep",value:E(K.xStep)}),Ge.push({key:"YStep",value:E(K.yStep)}),Ge.push({key:"Resources",value:Fe+" 0 R"}),K.matrix&&Ge.push({key:"Matrix",value:"["+K.matrix.toString()+"]"}),dt({data:K.stream,additionalKeyValues:Ge,objectId:K.objectNumber}),fe("endobj")},sn=function(K){var Ae;for(Ae in Or)Or.hasOwnProperty(Ae)&&(Or[Ae]instanceof yp?zt(Or[Ae]):Or[Ae]instanceof Yx&&Sr(Or[Ae],K))},on=function(K){for(var Ae in K.objectNumber=Yr(),fe("<<"),K)switch(Ae){case"opacity":fe("/ca "+P(K[Ae]));break;case"stroke-opacity":fe("/CA "+P(K[Ae]))}fe(">>"),fe("endobj")},An=function(){var K;for(K in hn)hn.hasOwnProperty(K)&&on(hn[K])},fs=function(){for(var K in fe("/XObject <<"),Je)Je.hasOwnProperty(K)&&Je[K].objectNumber>=0&&fe("/"+K+" "+Je[K].objectNumber+" 0 R");et.publish("putXobjectDict"),fe(">>")},bo=function(){la.oid=Yr(),fe("<<"),fe("/Filter /Standard"),fe("/V "+la.v),fe("/R "+la.r),fe("/U <"+la.toHexString(la.U)+">"),fe("/O <"+la.toHexString(la.O)+">"),fe("/P "+la.P),fe(">>"),fe("endobj")},hs=function(){for(var K in fe("/Font <<"),_r)_r.hasOwnProperty(K)&&(f===!1||f===!0&&h.hasOwnProperty(K))&&fe("/"+K+" "+_r[K].objectNumber+" 0 R");fe(">>")},Js=function(){if(Object.keys(Or).length>0){for(var K in fe("/Shading <<"),Or)Or.hasOwnProperty(K)&&Or[K]instanceof yp&&Or[K].objectNumber>=0&&fe("/"+K+" "+Or[K].objectNumber+" 0 R");et.publish("putShadingPatternDict"),fe(">>")}},js=function(K){if(Object.keys(Or).length>0){for(var Ae in fe("/Pattern <<"),Or)Or.hasOwnProperty(Ae)&&Or[Ae]instanceof p.TilingPattern&&Or[Ae].objectNumber>=0&&Or[Ae].objectNumber<K&&fe("/"+Ae+" "+Or[Ae].objectNumber+" 0 R");et.publish("putTilingPatternDict"),fe(">>")}},pi=function(){if(Object.keys(hn).length>0){var K;for(K in fe("/ExtGState <<"),hn)hn.hasOwnProperty(K)&&hn[K].objectNumber>=0&&fe("/"+K+" "+hn[K].objectNumber+" 0 R");et.publish("putGStateDict"),fe(">>")}},xa=function(K){he(K.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),hs(),Js(),js(K.objectOid),pi(),fs(),fe(">>"),fe("endobj")},Zs=function(){var K=[];Ft(),An(),Yt(),sn(K),et.publish("putResources"),K.forEach(xa),xa({resourcesOid:we,objectOid:Number.MAX_SAFE_INTEGER}),et.publish("postPutResources")},Vd=function(){et.publish("putAdditionalObjects");for(var K=0;K<pe.length;K++){var Ae=pe[K];he(Ae.objId,!0),fe(Ae.content),fe("endobj")}et.publish("postPutAdditionalObjects")},Ph=function(K){Vr[K.fontName]=Vr[K.fontName]||{},Vr[K.fontName][K.fontStyle]=K.id},Vc=function(K,Ae,Fe,Le,Ge){var vt={id:"F"+(Object.keys(_r).length+1).toString(10),postScriptName:K,fontName:Ae,fontStyle:Fe,encoding:Le,isStandardFont:Ge||!1,metadata:{}};return et.publish("addFont",{font:vt,instance:this}),_r[vt.id]=vt,Ph(vt),vt.id},nf=function(K){for(var Ae=0,Fe=Ye.length;Ae<Fe;Ae++){var Le=Vc.call(this,K[Ae][0],K[Ae][1],K[Ae][2],Ye[Ae][3],!0);f===!1&&(h[Le]=!0);var Ge=K[Ae][0].split("-");Ph({id:Le,fontName:Ge[0],fontStyle:Ge[1]||""})}et.publish("addFonts",{fonts:_r,dictionary:Vr})},gi=function(K){return K.foo=function(){try{return K.apply(this,arguments)}catch(Le){var Ae=Le.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var Fe="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Mr.console)throw new Error(Fe);Mr.console.error(Fe,Le),Mr.alert&&alert(Fe)}},K.foo.bar=K,K.foo},zd=function(K,Ae){var Fe,Le,Ge,vt,Lt,Jt,O,ee,ie;if(Ge=(Ae=Ae||{}).sourceEncoding||"Unicode",Lt=Ae.outputEncoding,(Ae.autoencode||Lt)&&_r[Qt].metadata&&_r[Qt].metadata[Ge]&&_r[Qt].metadata[Ge].encoding&&(vt=_r[Qt].metadata[Ge].encoding,!Lt&&_r[Qt].encoding&&(Lt=_r[Qt].encoding),!Lt&&vt.codePages&&(Lt=vt.codePages[0]),typeof Lt=="string"&&(Lt=vt[Lt]),Lt)){for(O=!1,Jt=[],Fe=0,Le=K.length;Fe<Le;Fe++)(ee=Lt[K.charCodeAt(Fe)])?Jt.push(String.fromCharCode(ee)):Jt.push(K[Fe]),Jt[Fe].charCodeAt(0)>>8&&(O=!0);K=Jt.join("")}for(Fe=K.length;O===void 0&&Fe!==0;)K.charCodeAt(Fe-1)>>8&&(O=!0),Fe--;if(!O)return K;for(Jt=Ae.noBOM?[]:[254,255],Fe=0,Le=K.length;Fe<Le;Fe++){if((ie=(ee=K.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+K+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Jt.push(ie),Jt.push(ee-(ie<<8))}return String.fromCharCode.apply(void 0,Jt)},In=p.__private__.pdfEscape=p.pdfEscape=function(K,Ae){return zd(K,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xi=p.__private__.beginPage=function(K){Be[++en]=[],mr[en]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(K[0]),topRightY:Number(K[1])}},El(en),Ne(Be[W])},zc=function(K,Ae){var Fe,Le,Ge;switch(r=Ae||r,typeof K=="string"&&(Fe=y(K.toLowerCase()),Array.isArray(Fe)&&(Le=Fe[0],Ge=Fe[1])),Array.isArray(K)&&(Le=K[0]*yt,Ge=K[1]*yt),isNaN(Le)&&(Le=a[0],Ge=a[1]),(Le>14400||Ge>14400)&&(_a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Ge=Math.min(14400,Ge)),a=[Le,Ge],r.substr(0,1)){case"l":Ge>Le&&(a=[Ge,Le]);break;case"p":Le>Ge&&(a=[Ge,Le])}xi(a),lf(qc),fe(vi),cf!==0&&fe(cf+" J"),$u!==0&&fe($u+" j"),et.publish("addPage",{pageNumber:en})},$c=function(K){K>0&&K<=en&&(Be.splice(K,1),mr.splice(K,1),en--,W>en&&(W=en),this.setPage(W))},El=function(K){K>0&&K<=en&&(W=K)},Hn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Be.length-1},Gc=function(K,Ae,Fe){var Le,Ge=void 0;return Fe=Fe||{},K=K!==void 0?K:_r[Qt].fontName,Ae=Ae!==void 0?Ae:_r[Qt].fontStyle,Le=K.toLowerCase(),Vr[Le]!==void 0&&Vr[Le][Ae]!==void 0?Ge=Vr[Le][Ae]:Vr[K]!==void 0&&Vr[K][Ae]!==void 0?Ge=Vr[K][Ae]:Fe.disableWarning===!1&&_a.warn("Unable to look up font label for font '"+K+"', '"+Ae+"'. Refer to getFontList() for available fonts."),Ge||Fe.noFallback||(Ge=Vr.times[Ae])==null&&(Ge=Vr.times.normal),Ge},yo=p.__private__.putInfo=function(){var K=Yr(),Ae=function(Le){return Le};for(var Fe in d!==null&&(Ae=la.encryptor(K,0)),fe("<<"),fe("/Producer ("+In(Ae("jsPDF "+vr.version))+")"),Pt)Pt.hasOwnProperty(Fe)&&Pt[Fe]&&fe("/"+Fe.substr(0,1).toUpperCase()+Fe.substr(1)+" ("+In(Ae(Pt[Fe]))+")");fe("/CreationDate ("+In(Ae(Y))+")"),fe(">>"),fe("endobj")},rc=p.__private__.putCatalog=function(K){var Ae=(K=K||{}).rootDictionaryObjId||Ce;switch(Yr(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+Ae+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Fe=""+Oe;Fe.substr(Fe.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+P(Oe)+"]")}switch(mt||(mt="continuous"),mt){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}Ze&&fe("/PageMode /"+Ze),et.publish("putCatalog"),fe(">>"),fe("endobj")},Rh=p.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(ae+1)),fe("/Root "+ae+" 0 R"),fe("/Info "+(ae-1)+" 0 R"),d!==null&&fe("/Encrypt "+la.oid+" 0 R"),fe("/ID [ <"+H+"> <"+H+"> ]"),fe(">>")},af=p.__private__.putHeader=function(){fe("%PDF-"+g),fe("%ºß¬à")},sf=p.__private__.putXRef=function(){var K="0000000000";fe("xref"),fe("0 "+(ae+1)),fe("0000000000 65535 f ");for(var Ae=1;Ae<=ae;Ae++)typeof ce[Ae]=="function"?fe((K+ce[Ae]()).slice(-10)+" 00000 n "):ce[Ae]!==void 0?fe((K+ce[Ae]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},nc=p.__private__.buildDocument=function(){De(),Ne(oe),et.publish("buildDocument"),af(),rt(),Vd(),Zs(),d!==null&&bo(),yo(),rc();var K=le;return sf(),Rh(),fe("startxref"),fe(""+K),fe("%%EOF"),Ne(Be[W]),oe.join(`
`)},$d=p.__private__.getBlob=function(K){return new Blob([Ue(K)],{type:"application/pdf"})},ac=p.output=p.__private__.output=gi(function(K,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",K){case void 0:return nc();case"save":p.save(Ae.filename);break;case"arraybuffer":return Ue(nc());case"blob":return $d(nc());case"bloburi":case"bloburl":if(Mr.URL!==void 0&&typeof Mr.URL.createObjectURL=="function")return Mr.URL&&Mr.URL.createObjectURL($d(nc()))||void 0;_a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Fe="",Le=nc();try{Fe=O6(Le)}catch{Fe=O6(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+Fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var Ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(Ge=Ae.pdfObjectUrl,vt="");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ge+'"'+vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",Jt=Mr.open();return Jt!==null&&Jt.document.write(Lt),Jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var O='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',ee=Mr.open();if(ee!==null){ee.document.write(O);var ie=this;ee.document.documentElement.querySelector("#pdfViewer").onload=function(){ee.document.title=Ae.filename,ee.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ie.output("bloburl"))}}return ee}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',ze=Mr.open();if(ze!==null&&(ze.document.write(ve),ze.document.title=Ae.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return Mr.document.location.href=this.output("datauristring",Ae);default:return null}}),Cl=function(K){return Array.isArray(gt)===!0&&gt.indexOf(K)>-1};switch(n){case"pt":yt=1;break;case"mm":yt=72/25.4;break;case"cm":yt=72/2.54;break;case"in":yt=72;break;case"px":yt=Cl("px_scaling")==1?.75:96/72;break;case"pc":case"em":yt=12;break;case"ex":yt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);yt=n}var la=null;ne(),V();var sc=function(K){return d!==null?la.encryptor(K,0):function(Ae){return Ae}},_l=p.__private__.getPageInfo=p.getPageInfo=function(K){if(isNaN(K)||K%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mr[K].objId,pageNumber:K,pageContext:mr[K]}},jr=p.__private__.getPageInfoByObjId=function(K){if(isNaN(K)||K%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in mr)if(mr[Ae].objId===K)break;return _l(Ae)},Sl=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:mr[W].objId,pageNumber:W,pageContext:mr[W]}};p.addPage=function(){return zc.apply(this,arguments),this},p.setPage=function(){return El.apply(this,arguments),Ne.call(this,Be[W]),this},p.insertPage=function(K){return this.addPage(),this.movePage(W,K),this},p.movePage=function(K,Ae){var Fe,Le;if(K>Ae){Fe=Be[K],Le=mr[K];for(var Ge=K;Ge>Ae;Ge--)Be[Ge]=Be[Ge-1],mr[Ge]=mr[Ge-1];Be[Ae]=Fe,mr[Ae]=Le,this.setPage(Ae)}else if(K<Ae){Fe=Be[K],Le=mr[K];for(var vt=K;vt<Ae;vt++)Be[vt]=Be[vt+1],mr[vt]=mr[vt+1];Be[Ae]=Fe,mr[Ae]=Le,this.setPage(Ae)}return this},p.deletePage=function(){return $c.apply(this,arguments),this},p.__private__.text=p.text=function(K,Ae,Fe,Le,Ge){var vt,Lt,Jt,O,ee,ie,ve,ze,it,Ut=(Le=Le||{}).scope||this;if(typeof K=="number"&&typeof Ae=="number"&&(typeof Fe=="string"||Array.isArray(Fe))){var Ir=Fe;Fe=Ae,Ae=K,K=Ir}if(arguments[3]instanceof bt?(_("The transform parameter of text() with a Matrix value"),it=Ge):(Jt=arguments[4],O=arguments[5],ma(ve=arguments[3])==="object"&&ve!==null||(typeof Jt=="string"&&(O=Jt,Jt=null),typeof ve=="string"&&(O=ve,ve=null),typeof ve=="number"&&(Jt=ve,ve=null),Le={flags:ve,angle:Jt,align:O})),isNaN(Ae)||isNaN(Fe)||K==null)throw new Error("Invalid arguments passed to jsPDF.text");if(K.length===0)return Ut;var bn="",qr=!1,Vn=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:vn,ea=Ut.internal.scaleFactor;function Tl(mn){return mn=mn.split("	").join(Array(Le.TabLen||9).join(" ")),In(mn,ve)}function es(mn){for(var pn,va=mn.concat(),ts=[],Il=va.length;Il--;)typeof(pn=va.shift())=="string"?ts.push(pn):Array.isArray(mn)&&(pn.length===1||pn[1]===void 0&&pn[2]===void 0)?ts.push(pn[0]):ts.push([pn[0],pn[1],pn[2]]);return ts}function _o(mn,pn){var va;if(typeof mn=="string")va=pn(mn)[0];else if(Array.isArray(mn)){for(var ts,Il,sA=mn.concat(),iA=[],Yu=sA.length;Yu--;)typeof(ts=sA.shift())=="string"?iA.push(pn(ts)[0]):Array.isArray(ts)&&typeof ts[0]=="string"&&(Il=pn(ts[0],ts[1],ts[2]),iA.push([Il[0],Il[1],Il[2]]));va=iA}return va}var eu=!1,Xd=!0;if(typeof K=="string")eu=!0;else if(Array.isArray(K)){var Qh=K.concat();Lt=[];for(var uf,Is=Qh.length;Is--;)(typeof(uf=Qh.shift())!="string"||Array.isArray(uf)&&typeof uf[0]!="string")&&(Xd=!1);eu=Xd}if(eu===!1)throw new Error('Type of text must be string or Array. "'+K+'" is not recognized.');typeof K=="string"&&(K=K.match(/[\r?\n]/)?K.split(/\r\n|\r|\n/g):[K]);var Yd=ye/Ut.internal.scaleFactor,df=Yd*(Vn-1);switch(Le.baseline){case"bottom":Fe-=df;break;case"top":Fe+=Yd-df;break;case"hanging":Fe+=Yd-2*df;break;case"middle":Fe+=Yd/2-df}if((ie=Le.maxWidth||0)>0&&(typeof K=="string"?K=Ut.splitTextToSize(K,ie):Object.prototype.toString.call(K)==="[object Array]"&&(K=K.reduce(function(mn,pn){return mn.concat(Ut.splitTextToSize(pn,ie))},[]))),vt={text:K,x:Ae,y:Fe,options:Le,mutex:{pdfEscape:In,activeFontKey:Qt,fonts:_r,activeFontSize:ye}},et.publish("preProcessText",vt),K=vt.text,Jt=(Le=vt.options).angle,!(it instanceof bt)&&Jt&&typeof Jt=="number"){Jt*=Math.PI/180,Le.rotationDirection===0&&(Jt=-Jt),S===w.ADVANCED&&(Jt=-Jt);var Af=Math.cos(Jt),Hh=Math.sin(Jt);it=new bt(Af,Hh,-Hh,Af,0,0)}else Jt&&Jt instanceof bt&&(it=Jt);S!==w.ADVANCED||it||(it=gr),(ee=Le.charSpace||zu)!==void 0&&(bn+=E(I(ee))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Le.horizontalScale)!==void 0&&(bn+=E(100*ze)+` Tz
`),Le.lang;var So=-1,X1=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,Qm=Ut.internal.getCurrentPageInfo().pageContext;switch(X1){case 0:case!1:case"fill":So=0;break;case 1:case!0:case"stroke":So=1;break;case 2:case"fillThenStroke":So=2;break;case 3:case"invisible":So=3;break;case 4:case"fillAndAddForClipping":So=4;break;case 5:case"strokeAndAddPathForClipping":So=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":So=6;break;case 7:case"addToPathForClipping":So=7}var Og=Qm.usedRenderingMode!==void 0?Qm.usedRenderingMode:-1;So!==-1?bn+=So+` Tr
`:Og!==-1&&(bn+=`0 Tr
`),So!==-1&&(Qm.usedRenderingMode=So),O=Le.align||"left";var jl,ei=ye*Vn,Jd=Ut.internal.pageSize.getWidth(),Hm=_r[Qt];ee=Le.charSpace||zu,ie=Le.maxWidth||0,ve=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var Wu=[],Zd=function(mn){return Ut.getStringUnitWidth(mn,{font:Hm,charSpace:ee,fontSize:ye,doKerning:!1})*ye/ea};if(Object.prototype.toString.call(K)==="[object Array]"){var ro;Lt=es(K),O!=="left"&&(jl=Lt.map(Zd));var bi,eA=0;if(O==="right"){Ae-=jl[0],K=[],Is=Lt.length;for(var No=0;No<Is;No++)No===0?(bi=Fi(Ae),ro=ps(Fe)):(bi=I(eA-jl[No]),ro=-ei),K.push([Lt[No],bi,ro]),eA=jl[No]}else if(O==="center"){Ae-=jl[0]/2,K=[],Is=Lt.length;for(var cc=0;cc<Is;cc++)cc===0?(bi=Fi(Ae),ro=ps(Fe)):(bi=I((eA-jl[cc])/2),ro=-ei),K.push([Lt[cc],bi,ro]),eA=jl[cc]}else if(O==="left"){K=[],Is=Lt.length;for(var tu=0;tu<Is;tu++)K.push(Lt[tu])}else if(O==="justify"&&Hm.encoding==="Identity-H"){K=[],Is=Lt.length,ie=ie!==0?ie:Jd;for(var uc=0,$a=0;$a<Is;$a++)if(ro=$a===0?ps(Fe):-ei,bi=$a===0?Fi(Ae):uc,$a<Is-1){var dc=I((ie-jl[$a])/(Lt[$a].split(" ").length-1)),gs=Lt[$a].split(" ");K.push([gs[0]+" ",bi,ro]),uc=0;for(var ko=1;ko<gs.length;ko++){var ff=(Zd(gs[ko-1]+" "+gs[ko])-Zd(gs[ko]))*ea+dc;ko==gs.length-1?K.push([gs[ko],ff,0]):K.push([gs[ko]+" ",ff,0]),uc-=ff}}else K.push([Lt[$a],bi,ro]);K.push(["",uc,0])}else{if(O!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(K=[],Is=Lt.length,ie=ie!==0?ie:Jd,$a=0;$a<Is;$a++)ro=$a===0?ps(Fe):-ei,bi=$a===0?Fi(Ae):0,$a<Is-1?Wu.push(E(I((ie-jl[$a])/(Lt[$a].split(" ").length-1)))):Wu.push(0),K.push([Lt[$a],bi,ro])}}var ru=typeof Le.R2L=="boolean"?Le.R2L:qe;ru===!0&&(K=_o(K,function(mn,pn,va){return[mn.split("").reverse().join(""),pn,va]})),vt={text:K,x:Ae,y:Fe,options:Le,mutex:{pdfEscape:In,activeFontKey:Qt,fonts:_r,activeFontSize:ye}},et.publish("postProcessText",vt),K=vt.text,qr=vt.mutex.isHex||!1;var Vh=_r[Qt].encoding;Vh!=="WinAnsiEncoding"&&Vh!=="StandardEncoding"||(K=_o(K,function(mn,pn,va){return[Tl(mn),pn,va]})),Lt=es(K),K=[];for(var tA,rA,nA,hf=0,zh=1,aA=Array.isArray(Lt[0])?zh:hf,Xu="",mf=function(mn,pn,va){var ts="";return va instanceof bt?(va=typeof Le.angle=="number"?nr(va,new bt(1,0,0,1,mn,pn)):nr(new bt(1,0,0,1,mn,pn),va),S===w.ADVANCED&&(va=nr(new bt(1,0,0,-1,0,0),va)),ts=va.join(" ")+` Tm
`):ts=E(mn)+" "+E(pn)+` Td
`,ts},Ga=0;Ga<Lt.length;Ga++){switch(Xu="",aA){case zh:nA=(qr?"<":"(")+Lt[Ga][0]+(qr?">":")"),tA=parseFloat(Lt[Ga][1]),rA=parseFloat(Lt[Ga][2]);break;case hf:nA=(qr?"<":"(")+Lt[Ga]+(qr?">":")"),tA=Fi(Ae),rA=ps(Fe)}Wu!==void 0&&Wu[Ga]!==void 0&&(Xu=Wu[Ga]+` Tw
`),Ga===0?K.push(Xu+mf(tA,rA,it)+nA):aA===hf?K.push(Xu+nA):aA===zh&&K.push(Xu+mf(tA,rA,it)+nA)}K=aA===hf?K.join(` Tj
T* `):K.join(` Tj
`),K+=` Tj
`;var il=`BT
/`;return il+=Qt+" "+ye+` Tf
`,il+=E(ye*Vn)+` TL
`,il+=oc+`
`,il+=bn,il+=K,fe(il+="ET"),h[Qt]=!0,Ut};var Lh=p.__private__.clip=p.clip=function(K){return fe(K==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Lh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return fe("n"),this};var ji=p.__private__.isValidStyle=function(K){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(K)!==-1&&(Ae=!0),Ae};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(K){return ji(K)&&(u=K),this};var wo=p.__private__.getStyle=p.getStyle=function(K){var Ae=u;switch(K){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=K}return Ae},to=p.close=function(){return fe("h"),this};p.stroke=function(){return fe("S"),this},p.fill=function(K){return Nl("f",K),this},p.fillEvenOdd=function(K){return Nl("f*",K),this},p.fillStroke=function(K){return Nl("B",K),this},p.fillStrokeEvenOdd=function(K){return Nl("B*",K),this};var Nl=function(K,Ae){ma(Ae)==="object"?ic(Ae,K):fe(K)},Eo=function(K){K===null||S===w.ADVANCED&&K===void 0||(K=wo(K),fe(K))};function Kc(K,Ae,Fe,Le,Ge){var vt=new Yx(Ae||this.boundingBox,Fe||this.xStep,Le||this.yStep,this.gState,Ge||this.matrix);vt.stream=this.stream;var Lt=K+"$$"+this.cloneIndex+++"$$";return Kr(Lt,vt),vt}var ic=function(K,Ae){var Fe=As[K.key],Le=Or[Fe];if(Le instanceof yp)fe("q"),fe(of(Ae)),Le.gState&&p.setGState(Le.gState),fe(K.matrix.toString()+" cm"),fe("/"+Fe+" sh"),fe("Q");else if(Le instanceof Yx){var Ge=new bt(1,0,0,-1,0,Oi());K.matrix&&(Ge=Ge.multiply(K.matrix||gr),Fe=Kc.call(Le,K.key,K.boundingBox,K.xStep,K.yStep,Ge).id),fe("q"),fe("/Pattern cs"),fe("/"+Fe+" scn"),Le.gState&&p.setGState(Le.gState),fe(Ae),fe("Q")}},of=function(K){switch(K){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Co=p.moveTo=function(K,Ae){return fe(E(I(K))+" "+E(R(Ae))+" m"),this},Ii=p.lineTo=function(K,Ae){return fe(E(I(K))+" "+E(R(Ae))+" l"),this},kl=p.curveTo=function(K,Ae,Fe,Le,Ge,vt){return fe([E(I(K)),E(R(Ae)),E(I(Fe)),E(R(Le)),E(I(Ge)),E(R(vt)),"c"].join(" ")),this};p.__private__.line=p.line=function(K,Ae,Fe,Le,Ge){if(isNaN(K)||isNaN(Ae)||isNaN(Fe)||isNaN(Le)||!ji(Ge))throw new Error("Invalid arguments passed to jsPDF.line");return S===w.COMPAT?this.lines([[Fe-K,Le-Ae]],K,Ae,[1,1],Ge||"S"):this.lines([[Fe-K,Le-Ae]],K,Ae,[1,1]).stroke()},p.__private__.lines=p.lines=function(K,Ae,Fe,Le,Ge,vt){var Lt,Jt,O,ee,ie,ve,ze,it,Ut,Ir,bn,qr;if(typeof K=="number"&&(qr=Fe,Fe=Ae,Ae=K,K=qr),Le=Le||[1,1],vt=vt||!1,isNaN(Ae)||isNaN(Fe)||!Array.isArray(K)||!Array.isArray(Le)||!ji(Ge)||typeof vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Co(Ae,Fe),Lt=Le[0],Jt=Le[1],ee=K.length,Ir=Ae,bn=Fe,O=0;O<ee;O++)(ie=K[O]).length===2?(Ir=ie[0]*Lt+Ir,bn=ie[1]*Jt+bn,Ii(Ir,bn)):(ve=ie[0]*Lt+Ir,ze=ie[1]*Jt+bn,it=ie[2]*Lt+Ir,Ut=ie[3]*Jt+bn,Ir=ie[4]*Lt+Ir,bn=ie[5]*Jt+bn,kl(ve,ze,it,Ut,Ir,bn));return vt&&to(),Eo(Ge),this},p.path=function(K){for(var Ae=0;Ae<K.length;Ae++){var Fe=K[Ae],Le=Fe.c;switch(Fe.op){case"m":Co(Le[0],Le[1]);break;case"l":Ii(Le[0],Le[1]);break;case"c":kl.apply(this,Le);break;case"h":to()}}return this},p.__private__.rect=p.rect=function(K,Ae,Fe,Le,Ge){if(isNaN(K)||isNaN(Ae)||isNaN(Fe)||isNaN(Le)||!ji(Ge))throw new Error("Invalid arguments passed to jsPDF.rect");return S===w.COMPAT&&(Le=-Le),fe([E(I(K)),E(R(Ae)),E(I(Fe)),E(I(Le)),"re"].join(" ")),Eo(Ge),this},p.__private__.triangle=p.triangle=function(K,Ae,Fe,Le,Ge,vt,Lt){if(isNaN(K)||isNaN(Ae)||isNaN(Fe)||isNaN(Le)||isNaN(Ge)||isNaN(vt)||!ji(Lt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Fe-K,Le-Ae],[Ge-Fe,vt-Le],[K-Ge,Ae-vt]],K,Ae,[1,1],Lt,!0),this},p.__private__.roundedRect=p.roundedRect=function(K,Ae,Fe,Le,Ge,vt,Lt){if(isNaN(K)||isNaN(Ae)||isNaN(Fe)||isNaN(Le)||isNaN(Ge)||isNaN(vt)||!ji(Lt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Jt=4/3*(Math.SQRT2-1);return Ge=Math.min(Ge,.5*Fe),vt=Math.min(vt,.5*Le),this.lines([[Fe-2*Ge,0],[Ge*Jt,0,Ge,vt-vt*Jt,Ge,vt],[0,Le-2*vt],[0,vt*Jt,-Ge*Jt,vt,-Ge,vt],[2*Ge-Fe,0],[-Ge*Jt,0,-Ge,-vt*Jt,-Ge,-vt],[0,2*vt-Le],[0,-vt*Jt,Ge*Jt,-vt,Ge,-vt]],K+Ge,Ae,[1,1],Lt,!0),this},p.__private__.ellipse=p.ellipse=function(K,Ae,Fe,Le,Ge){if(isNaN(K)||isNaN(Ae)||isNaN(Fe)||isNaN(Le)||!ji(Ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var vt=4/3*(Math.SQRT2-1)*Fe,Lt=4/3*(Math.SQRT2-1)*Le;return Co(K+Fe,Ae),kl(K+Fe,Ae-Lt,K+vt,Ae-Le,K,Ae-Le),kl(K-vt,Ae-Le,K-Fe,Ae-Lt,K-Fe,Ae),kl(K-Fe,Ae+Lt,K-vt,Ae+Le,K,Ae+Le),kl(K+vt,Ae+Le,K+Fe,Ae+Lt,K+Fe,Ae),Eo(Ge),this},p.__private__.circle=p.circle=function(K,Ae,Fe,Le){if(isNaN(K)||isNaN(Ae)||isNaN(Fe)||!ji(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(K,Ae,Fe,Fe,Le)},p.setFont=function(K,Ae,Fe){return Fe&&(Ae=F(Ae,Fe)),Qt=Gc(K,Ae,{disableWarning:!1}),this};var ms=p.__private__.getFont=p.getFont=function(){return _r[Gc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var K,Ae,Fe={};for(K in Vr)if(Vr.hasOwnProperty(K))for(Ae in Fe[K]=[],Vr[K])Vr[K].hasOwnProperty(Ae)&&Fe[K].push(Ae);return Fe},p.addFont=function(K,Ae,Fe,Le,Ge){var vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&vt.indexOf(arguments[3])!==-1?Ge=arguments[3]:arguments[3]&&vt.indexOf(arguments[3])==-1&&(Fe=F(Fe,Le)),Ge=Ge||"Identity-H",Vc.call(this,K,Ae,Fe,Ge)};var vn,qc=e.lineWidth||.200025,Bl=p.__private__.getLineWidth=p.getLineWidth=function(){return qc},lf=p.__private__.setLineWidth=p.setLineWidth=function(K){return qc=K,fe(E(I(K))+" w"),this};p.__private__.setLineDash=vr.API.setLineDash=vr.API.setLineDashPattern=function(K,Ae){if(K=K||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(K))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return K=K.map(function(Fe){return E(I(Fe))}).join(" "),Ae=E(I(Ae)),fe("["+K+"] "+Ae+" d"),this};var Hu=p.__private__.getLineHeight=p.getLineHeight=function(){return ye*vn};p.__private__.getLineHeight=p.getLineHeight=function(){return ye*vn};var Vu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(K){return typeof(K=K||1.15)=="number"&&(vn=K),this},sl=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return vn};Vu(e.lineHeight);var Fi=p.__private__.getHorizontalCoordinate=function(K){return I(K)},ps=p.__private__.getVerticalCoordinate=function(K){return S===w.ADVANCED?K:mr[W].mediaBox.topRightY-mr[W].mediaBox.bottomLeftY-I(K)},Mh=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(K){return E(Fi(K))},Wc=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(K){return E(ps(K))},vi=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Se(vi)},p.__private__.setStrokeColor=p.setDrawColor=function(K,Ae,Fe,Le){return vi=je({ch1:K,ch2:Ae,ch3:Fe,ch4:Le,pdfColorType:"draw",precision:2}),fe(vi),this};var Xc=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Se(Xc)},p.__private__.setFillColor=p.setFillColor=function(K,Ae,Fe,Le){return Xc=je({ch1:K,ch2:Ae,ch3:Fe,ch4:Le,pdfColorType:"fill",precision:2}),fe(Xc),this};var oc=e.textColor||"0 g",Gd=p.__private__.getTextColor=p.getTextColor=function(){return Se(oc)};p.__private__.setTextColor=p.setTextColor=function(K,Ae,Fe,Le){return oc=je({ch1:K,ch2:Ae,ch3:Fe,ch4:Le,pdfColorType:"text",precision:3}),this};var zu=e.charSpace,Kd=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(zu||0)};p.__private__.setCharSpace=p.setCharSpace=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return zu=K,this};var cf=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(K){var Ae=p.CapJoinStyles[K];if(Ae===void 0)throw new Error("Line cap style of '"+K+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return cf=Ae,fe(Ae+" J"),this};var $u=0;p.__private__.setLineJoin=p.setLineJoin=function(K){var Ae=p.CapJoinStyles[K];if(Ae===void 0)throw new Error("Line join style of '"+K+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $u=Ae,fe(Ae+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(K){if(K=K||0,isNaN(K))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(E(I(K))+" M"),this},p.GState=KS,p.setGState=function(K){(K=typeof K=="string"?hn[oa[K]]:Yc(null,K)).equals(Ba)||(fe("/"+K.id+" gs"),Ba=K)};var Yc=function(K,Ae){if(!K||!oa[K]){var Fe=!1;for(var Le in hn)if(hn.hasOwnProperty(Le)&&hn[Le].equals(Ae)){Fe=!0;break}if(Fe)Ae=hn[Le];else{var Ge="GS"+(Object.keys(hn).length+1).toString(10);hn[Ge]=Ae,Ae.id=Ge}return K&&(oa[K]=Ae.id),et.publish("addGState",Ae),Ae}};p.addGState=function(K,Ae){return Yc(K,Ae),this},p.saveGraphicsState=function(){return fe("q"),jn.push({key:Qt,size:ye,color:oc}),this},p.restoreGraphicsState=function(){fe("Q");var K=jn.pop();return Qt=K.key,ye=K.size,oc=K.color,Ba=null,this},p.setCurrentTransformationMatrix=function(K){return fe(K.toString()+" cm"),this},p.comment=function(K){return fe("#"+K),this};var Gu=function(K,Ae){var Fe=K||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Fe},set:function(vt){isNaN(vt)||(Fe=parseFloat(vt))}});var Le=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(vt){isNaN(vt)||(Le=parseFloat(vt))}});var Ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ge},set:function(vt){Ge=vt.toString()}}),this},qd=function(K,Ae,Fe,Le){Gu.call(this,K,Ae),this.type="rect";var Ge=Fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ge},set:function(Lt){isNaN(Lt)||(Ge=parseFloat(Lt))}});var vt=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return vt},set:function(Lt){isNaN(Lt)||(vt=parseFloat(Lt))}}),this},Ku=function(){this.page=en,this.currentPage=W,this.pages=Be.slice(0),this.pagesContext=mr.slice(0),this.x=kr,this.y=er,this.matrix=an,this.width=Zc(W),this.height=Oi(W),this.outputDestination=_e,this.id="",this.objectNumber=-1};Ku.prototype.restore=function(){en=this.page,W=this.currentPage,mr=this.pagesContext,Be=this.pages,kr=this.x,er=this.y,an=this.matrix,qu(W,this.width),Wd(W,this.height),_e=this.outputDestination};var Jc=function(K,Ae,Fe,Le,Ge){wt.push(new Ku),en=W=0,Be=[],kr=K,er=Ae,an=Ge,xi([Fe,Le])},Uh=function(K){if(xt[K])wt.pop().restore();else{var Ae=new Ku,Fe="Xo"+(Object.keys(Je).length+1).toString(10);Ae.id=Fe,xt[K]=Fe,Je[Fe]=Ae,et.publish("addFormObject",Ae),wt.pop().restore()}};for(var lc in p.beginFormObject=function(K,Ae,Fe,Le,Ge){return Jc(K,Ae,Fe,Le,Ge),this},p.endFormObject=function(K){return Uh(K),this},p.doFormObject=function(K,Ae){var Fe=Je[xt[K]];return fe("q"),fe(Ae.toString()+" cm"),fe("/"+Fe.id+" Do"),fe("Q"),this},p.getFormObject=function(K){var Ae=Je[xt[K]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},p.save=function(K,Ae){return K=K||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(mp($d(nc()),K),typeof mp.unload=="function"&&Mr.setTimeout&&setTimeout(mp.unload,911),this):new Promise(function(Fe,Le){try{var Ge=mp($d(nc()),K);typeof mp.unload=="function"&&Mr.setTimeout&&setTimeout(mp.unload,911),Fe(Ge)}catch(vt){Le(vt.message)}})},vr.API)vr.API.hasOwnProperty(lc)&&(lc==="events"&&vr.API.events.length?function(K,Ae){var Fe,Le,Ge;for(Ge=Ae.length-1;Ge!==-1;Ge--)Fe=Ae[Ge][0],Le=Ae[Ge][1],K.subscribe.apply(K,[Fe].concat(typeof Le=="function"?[Le]:Le))}(et,vr.API.events):p[lc]=vr.API[lc]);var Zc=p.getPageWidth=function(K){return(mr[K=K||W].mediaBox.topRightX-mr[K].mediaBox.bottomLeftX)/yt},qu=p.setPageWidth=function(K,Ae){mr[K].mediaBox.topRightX=Ae*yt+mr[K].mediaBox.bottomLeftX},Oi=p.getPageHeight=function(K){return(mr[K=K||W].mediaBox.topRightY-mr[K].mediaBox.bottomLeftY)/yt},Wd=p.setPageHeight=function(K,Ae){mr[K].mediaBox.topRightY=Ae*yt+mr[K].mediaBox.bottomLeftY};return p.internal={pdfEscape:In,getStyle:wo,getFont:ms,getFontSize:Re,getCharSpace:Kd,getTextColor:Gd,getLineHeight:Hu,getLineHeightFactor:sl,getLineWidth:Bl,write:Ie,getHorizontalCoordinate:Fi,getVerticalCoordinate:ps,getCoordinateString:Mh,getVerticalCoordinateString:Wc,collections:{},newObject:Yr,newAdditionalObject:Te,newObjectDeferred:Gr,newObjectDeferredBegin:he,getFilters:Xe,putStream:dt,events:et,scaleFactor:yt,pageSize:{getWidth:function(){return Zc(W)},setWidth:function(K){qu(W,K)},getHeight:function(){return Oi(W)},setHeight:function(K){Wd(W,K)}},encryptionOptions:d,encryption:la,getEncryptor:sc,output:ac,getNumberOfPages:Hn,pages:Be,out:fe,f2:P,f3:D,getPageInfo:_l,getPageInfoByObjId:jr,getCurrentPageInfo:Sl,getPDFVersion:x,Point:Gu,Rectangle:qd,Matrix:bt,hasHotfix:Cl},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Zc(W)},set:function(K){qu(W,K)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Oi(W)},set:function(K){Wd(W,K)},enumerable:!0,configurable:!0}),nf.call(p,Ye),Qt="F1",zc(a,r),et.publish("initialized"),p}Vx.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Vx.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Vx.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Vx.prototype.processOwnerPassword=function(e,t){return P6(D6(t).substr(0,5),e)},Vx.prototype.encryptor=function(e,t){var r=D6(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return P6(r,n)}},KS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ma(e)!==ma(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},vr.API={events:[]},vr.version="2.5.2";var Es=vr.API,pP=1,wg=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fx=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jr=function(e){return e.toFixed(2)},v0=function(e){return e.toFixed(5)};Es.__acroform__={};var ec=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},JQ=function(e){return e*pP},EA=function(e){var t=new Bee,r=hr.internal.getHeight(e)||0,n=hr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Jr(n)),Number(Jr(r))],t},MEe=Es.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},UEe=Es.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},QEe=Es.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},zs=Es.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return QEe(e,t-1)},$s=Es.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return MEe(e,t-1)},Gs=Es.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return UEe(e,t-1)},HEe=Es.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(Jr(c.lowerLeft_X)),Number(Jr(c.lowerLeft_Y)),Number(Jr(c.upperRight_X)),Number(Jr(c.upperRight_Y))]},VEe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=R6(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Jr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=EA(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},R6=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var s=r,i=hr.internal.getHeight(e)||0;i=i<0?-i:i;var o=hr.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(D,I,U){if(D+1<a.length){var R=I+" "+a[D+1][0];return xC(R,e,U).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=xC("3",e,s).height,h=e.multiline?i-s:(i-f)/2,p=h+=2,g=0,x=0,b=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+xC(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",w=0,S=0;S<a.length;S++)if(a.hasOwnProperty(S)){var j=!1;if(a[S].length!==1&&b!==a[S].length-1){if((f+2)*(w+2)+2>i)continue e;y+=a[S][b],j=!0,x=S,S--}else{y=(y+=a[S][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var N=parseInt(S),F=c(N,y,s),E=S>=a.length-1;if(F&&!E){y+=" ",b=0;continue}if(F||E){if(E)x=N;else if(e.multiline&&(f+2)*(w+2)+2>i)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>i)continue e;x=N}}for(var _="",B=g;B<=x;B++){var P=a[B];if(e.multiline){if(B===x){_+=P[b]+" ",b=(b+1)%P.length;continue}if(B===g){_+=P[P.length-1]+" ";continue}}_+=P[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,d=xC(_,e,s).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}t+=Jr(u)+" "+Jr(p)+` Td
`,t+="("+wg(_)+`) Tj
`,t+=-Jr(u)+` 0 Td
`,p=-(s+2),d=0,g=j?x:x+1,w++,y=""}break}return n.text=t,n.fontSize=s,n},xC=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},zEe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},$Ee=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},GEe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ma(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},KEe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Ld.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(zEe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");pP=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Tee,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&$Ee(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],c=[],u=o.Rect;if(o.Rect&&(o.Rect=HEe(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=hr.createDefaultAppearanceStream(o),ma(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=VEe(o);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var p=o.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var g=p[i];typeof g=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=p)=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}s&&GEe(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},kee=Es.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ma(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+wg(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},PT=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+wg(n(e))+")"},DA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};DA.prototype.toString=function(){return this.objId+" 0 R"},DA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},DA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:kee(a,this.objId,this.scope)}):a instanceof DA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var Bee=function(){DA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};ec(Bee,DA);var Tee=function(){DA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+wg(r(e))+")"}},set:function(r){e=r}})};ec(Tee,DA);var Ld=function e(){DA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zs(t,3)},set:function(y){y?this.F=$s(t,3):this.F=Gs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof qS)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+wg(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/pP:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof qS||this instanceof Rp))return PT(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof zi?h:PT(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof zi?y:y.substr(0,1)==="("?fx(y.substr(1,y.length-2)):fx(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof zi?fx(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof zi?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof zi?p:PT(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof zi?y:y.substr(0,1)==="("?fx(y.substr(1,y.length-2)):fx(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof zi?fx(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof zi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,1)},set:function(y){y?this.Ff=$s(this.Ff,1):this.Ff=Gs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,2)},set:function(y){y?this.Ff=$s(this.Ff,2):this.Ff=Gs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,3)},set:function(y){y?this.Ff=$s(this.Ff,3):this.Ff=Gs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};ec(Ld,DA);var mv=function(){Ld.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return kee(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var c,u=[];c=i.exec(s);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,18)},set:function(r){r?this.Ff=$s(this.Ff,18):this.Ff=Gs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=$s(this.Ff,19):this.Ff=Gs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,20)},set:function(r){r?(this.Ff=$s(this.Ff,20),t.sort()):this.Ff=Gs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,22)},set:function(r){r?this.Ff=$s(this.Ff,22):this.Ff=Gs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(r){r?this.Ff=$s(this.Ff,23):this.Ff=Gs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,27)},set:function(r){r?this.Ff=$s(this.Ff,27):this.Ff=Gs(this.Ff,27)}}),this.hasAppearanceStream=!1};ec(mv,Ld);var pv=function(){mv.call(this),this.fontName="helvetica",this.combo=!1};ec(pv,mv);var gv=function(){pv.call(this),this.combo=!0};ec(gv,pv);var $_=function(){gv.call(this),this.edit=!0};ec($_,gv);var zi=function(){Ld.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,15)},set:function(r){r?this.Ff=$s(this.Ff,15):this.Ff=Gs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,16)},set:function(r){r?this.Ff=$s(this.Ff,16):this.Ff=Gs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,17)},set:function(r){r?this.Ff=$s(this.Ff,17):this.Ff=Gs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(r){r?this.Ff=$s(this.Ff,26):this.Ff=Gs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+wg(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ma(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};ec(zi,Ld);var G_=function(){zi.call(this),this.pushButton=!0};ec(G_,zi);var xv=function(){zi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ec(xv,zi);var qS=function(){var e,t;Ld.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+wg(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){ma(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=hr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ec(qS,Ld),xv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},xv.prototype.createOption=function(e){var t=new qS;return t.Parent=this,t.optionName=e,this.Kids.push(t),qEe.call(this.scope,t),t};var K_=function(){zi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=hr.CheckBox.createAppearanceStream()};ec(K_,zi);var Rp=function(){Ld.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,13)},set:function(t){t?this.Ff=$s(this.Ff,13):this.Ff=Gs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,21)},set:function(t){t?this.Ff=$s(this.Ff,21):this.Ff=Gs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(t){t?this.Ff=$s(this.Ff,23):this.Ff=Gs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,24)},set:function(t){t?this.Ff=$s(this.Ff,24):this.Ff=Gs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,25)},set:function(t){t?this.Ff=$s(this.Ff,25):this.Ff=Gs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(t){t?this.Ff=$s(this.Ff,26):this.Ff=Gs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ec(Rp,Ld);var q_=function(){Rp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,14)},set:function(e){e?this.Ff=$s(this.Ff,14):this.Ff=Gs(this.Ff,14)}}),this.password=!0};ec(q_,Rp);var hr={CheckBox:{createAppearanceStream:function(){return{N:{On:hr.CheckBox.YesNormal},D:{On:hr.CheckBox.YesPushDown,Off:hr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=EA(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=R6(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Jr(hr.internal.getWidth(e))+" "+Jr(hr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Jr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=EA(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=hr.internal.getHeight(e),i=hr.internal.getWidth(e),o=R6(e,e.caption);return a.push("1 g"),a.push("0 0 "+Jr(i)+" "+Jr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Jr(i-1)+" "+Jr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Jr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=EA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jr(hr.internal.getWidth(e))+" "+Jr(hr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:hr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=hr.RadioButton.Circle.YesNormal,t.D[e]=hr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=EA(e);t.scope=e.scope;var r=[],n=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=hr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+v0(hr.internal.getWidth(e)/2)+" "+v0(hr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=EA(e);t.scope=e.scope;var r=[],n=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*hr.internal.Bezier_C).toFixed(5)),i=Number((n*hr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+v0(hr.internal.getWidth(e)/2)+" "+v0(hr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+v0(hr.internal.getWidth(e)/2)+" "+v0(hr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=EA(e);t.scope=e.scope;var r=[],n=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*hr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+v0(hr.internal.getWidth(e)/2)+" "+v0(hr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:hr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=hr.RadioButton.Cross.YesNormal,t.D[e]=hr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=EA(e);t.scope=e.scope;var r=[],n=hr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Jr(hr.internal.getWidth(e)-2)+" "+Jr(hr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Jr(n.x1.x)+" "+Jr(n.x1.y)+" m"),r.push(Jr(n.x2.x)+" "+Jr(n.x2.y)+" l"),r.push(Jr(n.x4.x)+" "+Jr(n.x4.y)+" m"),r.push(Jr(n.x3.x)+" "+Jr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=EA(e);t.scope=e.scope;var r=hr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Jr(hr.internal.getWidth(e))+" "+Jr(hr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Jr(hr.internal.getWidth(e)-2)+" "+Jr(hr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Jr(r.x1.x)+" "+Jr(r.x1.y)+" m"),n.push(Jr(r.x2.x)+" "+Jr(r.x2.y)+" l"),n.push(Jr(r.x4.x)+" "+Jr(r.x4.y)+" m"),n.push(Jr(r.x3.x)+" "+Jr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=EA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jr(hr.internal.getWidth(e))+" "+Jr(hr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};hr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=hr.internal.getWidth(e),r=hr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},hr.internal.getWidth=function(e){var t=0;return ma(e)==="object"&&(t=JQ(e.Rect[2])),t},hr.internal.getHeight=function(e){var t=0;return ma(e)==="object"&&(t=JQ(e.Rect[3])),t};var qEe=Es.addField=function(e){if(KEe(this,e),!(e instanceof Ld))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Es.AcroFormChoiceField=mv,Es.AcroFormListBox=pv,Es.AcroFormComboBox=gv,Es.AcroFormEditBox=$_,Es.AcroFormButton=zi,Es.AcroFormPushButton=G_,Es.AcroFormRadioButton=xv,Es.AcroFormCheckBox=K_,Es.AcroFormTextField=Rp,Es.AcroFormPasswordField=q_,Es.AcroFormAppearance=hr,Es.AcroForm={ChoiceField:mv,ListBox:pv,ComboBox:gv,EditBox:$_,Button:zi,PushButton:G_,RadioButton:xv,CheckBox:K_,TextField:Rp,PasswordField:q_,Appearance:hr},vr.AcroForm={ChoiceField:mv,ListBox:pv,ComboBox:gv,EditBox:$_,Button:zi,PushButton:G_,RadioButton:xv,CheckBox:K_,TextField:Rp,PasswordField:q_,Appearance:hr};vr.AcroForm;function jee(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(D,I){var U,R,Y,H,X,V=t;if((I=I||t)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(F(D))for(X in r)for(Y=r[X],U=0;U<Y.length;U+=1){for(H=!0,R=0;R<Y[U].length;R+=1)if(Y[U][R]!==void 0&&Y[U][R]!==D[R]){H=!1;break}if(H===!0){V=X;break}}else for(X in r)for(Y=r[X],U=0;U<Y.length;U+=1){for(H=!0,R=0;R<Y[U].length;R+=1)if(Y[U][R]!==void 0&&Y[U][R]!==D.charCodeAt(R)){H=!1;break}if(H===!0){V=X;break}}return V===t&&I!==t&&(V=I),V},a=function D(I){for(var U=this.internal.write,R=this.internal.putStream,Y=(0,this.internal.getFilters)();Y.indexOf("FlateEncode")!==-1;)Y.splice(Y.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:I.width}),H.push({key:"Height",value:I.height}),I.colorSpace===b.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===b.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var X="",V=0,z=I.transparency.length;V<z;V++)X+=I.transparency[V]+" "+I.transparency[V]+" ";H.push({key:"Mask",value:"["+X+"]"})}I.sMask!==void 0&&H.push({key:"SMask",value:I.objectId+1+" 0 R"});var q=I.filter!==void 0?["/"+I.filter]:void 0;if(R({data:I.data,additionalKeyValues:H,alreadyAppliedFilters:q,objectId:I.objectId}),U("endobj"),"sMask"in I&&I.sMask!==void 0){var ne="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,M={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:ne,data:I.sMask};"filter"in I&&(M.filter=I.filter),D.call(this,M)}if(I.colorSpace===b.INDEXED){var W=this.internal.newObject();R({data:_(new Uint8Array(I.palette)),objectId:W}),U("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var I in D)a.call(this,D[I])},i=function(){var D,I=this.internal.collections.addImage_images,U=this.internal.write;for(var R in I)U("/I"+(D=I[R]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof e["process"+D.toUpperCase()]=="function"},f=function(D){return ma(D)==="object"&&D.nodeType===1},h=function(D,I){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var U=""+D.getAttribute("src");if(U.indexOf("data:image/")===0)return zy(unescape(U).split("base64,").pop());var R=e.loadFile(U,!0);if(R!==void 0)return R}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var Y;switch(I){case"PNG":Y="image/png";break;case"WEBP":Y="image/webp";break;case"JPEG":case"JPG":default:Y="image/jpeg"}return zy(D.toDataURL(Y,1).split("base64,").pop())}},p=function(D){var I=this.internal.collections.addImage_images;if(I){for(var U in I)if(D===I[U].alias)return I[U]}},g=function(D,I,U){return D||I||(D=-96,I=-96),D<0&&(D=-1*U.width*72/D/this.internal.scaleFactor),I<0&&(I=-1*U.height*72/I/this.internal.scaleFactor),D===0&&(D=I*U.width/U.height),I===0&&(I=D*U.height/U.width),[D,I]},x=function(D,I,U,R,Y,H){var X=g.call(this,U,R,Y),V=this.internal.getCoordinateString,z=this.internal.getVerticalCoordinateString,q=c.call(this);if(U=X[0],R=X[1],q[Y.index]=Y,H){H*=Math.PI/180;var ne=Math.cos(H),M=Math.sin(H),W=function(re){return re.toFixed(4)},Z=[W(ne),W(M),W(-1*M),W(ne),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,V(D),z(I+R),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([V(U),"0","0",V(R),"0","0","cm"].join(" "))):this.internal.write([V(U),"0","0",V(R),V(D),z(I+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Y.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(D){var I,U,R=0;if(typeof D=="string")for(U=D.length,I=0;I<U;I++)R=(R<<5)-R+D.charCodeAt(I),R|=0;else if(F(D))for(U=D.byteLength/2,I=0;I<U;I++)R=(R<<5)-R+D[I],R|=0;return R},S=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var I=!0;return D.length===0&&(I=!1),D.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(I=!1),I},j=e.__addimage__.extractImageFromDataUrl=function(D){var I=(D=D||"").split("base64,"),U=null;if(I.length===2){var R=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(R)&&(U={mimeType:R[1],charset:R[2],data:I[1]})}return U},N=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(D){return N()&&D instanceof ArrayBuffer};var F=e.__addimage__.isArrayBufferView=function(D){return N()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(D){for(var I=D.length,U=new Uint8Array(I),R=0;R<I;R++)U[R]=D.charCodeAt(R);return U},_=e.__addimage__.arrayBufferToBinaryString=function(D){for(var I="",U=F(D)?D:new Uint8Array(D),R=0;R<U.length;R+=8192)I+=String.fromCharCode.apply(null,U.subarray(R,R+8192));return I};e.addImage=function(){var D,I,U,R,Y,H,X,V,z;if(typeof arguments[1]=="number"?(I=t,U=arguments[1],R=arguments[2],Y=arguments[3],H=arguments[4],X=arguments[5],V=arguments[6],z=arguments[7]):(I=arguments[1],U=arguments[2],R=arguments[3],Y=arguments[4],H=arguments[5],X=arguments[6],V=arguments[7],z=arguments[8]),ma(D=arguments[0])==="object"&&!f(D)&&"imageData"in D){var q=D;D=q.imageData,I=q.format||I||t,U=q.x||U||0,R=q.y||R||0,Y=q.w||q.width||Y,H=q.h||q.height||H,X=q.alias||X,V=q.compression||V,z=q.rotation||q.angle||z}var ne=this.internal.getFilters();if(V===void 0&&ne.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(U)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var M=B.call(this,D,I,X,V);return x.call(this,U,R,Y,H,M,z),this};var B=function(D,I,U,R){var Y,H,X;if(typeof D=="string"&&n(D)===t){D=unescape(D);var V=P(D,!1);(V!==""||(V=e.loadFile(D,!0))!==void 0)&&(D=V)}if(f(D)&&(D=h(D,I)),I=n(D,I),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((X=U)==null||X.length===0)&&(U=function(z){return typeof z=="string"||F(z)?w(z):F(z.data)?w(z.data):null}(D)),(Y=p.call(this,U))||(N()&&(D instanceof Uint8Array||I==="RGBA"||(H=D,D=E(D))),Y=this["process"+I.toUpperCase()](D,u.call(this),U,function(z){return z&&typeof z=="string"&&(z=z.toUpperCase()),z in e.image_compression?z:y.NONE}(R),H)),!Y)throw new Error("An unknown error occurred whilst processing the image.");return Y},P=e.__addimage__.convertBase64ToBinaryString=function(D,I){var U;I=typeof I!="boolean"||I;var R,Y="";if(typeof D=="string"){R=(U=j(D))!==null?U.data:D;try{Y=zy(R)}catch(H){if(I)throw S(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};e.getImageProperties=function(D){var I,U,R="";if(f(D)&&(D=h(D)),typeof D=="string"&&n(D)===t&&((R=P(D,!1))===""&&(R=e.loadFile(D)||""),D=R),U=n(D),!d(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!N()||D instanceof Uint8Array||(D=E(D)),!(I=this["process"+U.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=U,I}})(vr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};vr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var p=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+p(y(w))+") >>",x.content=s;var S=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+S,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(x.objId,"0 R",b.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var N=this.annotations._nameMap[n.options.name];n.options.pageNumber=N.page,n.options.top=N.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var F=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+F+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,o,i,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(vr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=e.__arabicParser__.isArabicEndLetter=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return i(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var b=0,y=r,w="",S=0;for(b=0;b<x.length;b+=1)y[x.charCodeAt(b)]!==void 0?(S++,typeof(y=y[x.charCodeAt(b)])=="number"&&(w+=String.fromCharCode(y),y=r,S=0),b===x.length-1&&(y=r,w+=x.charAt(b-(S-1)),b-=S-1,S=0)):(y=r,w+=x.charAt(b-S),b-=S,S=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,b,y){return i(x)?s(x)===!1?-1:!u(x)||!i(b)&&!i(y)||!i(y)&&o(b)||o(x)&&!i(b)||o(x)&&c(b)||o(x)&&o(b)?0:d(x)&&i(b)&&!o(b)&&i(y)&&u(y)?3:o(x)||!i(y)?1:2:-1},p=function(x){var b=0,y=0,w=0,S="",j="",N="",F=(x=x||"").split("\\s+"),E=[];for(b=0;b<F.length;b+=1){for(E.push(""),y=0;y<F[b].length;y+=1)S=F[b][y],j=F[b][y-1],N=F[b][y+1],i(S)?(w=h(S,j,N),E[b]+=w!==-1?String.fromCharCode(t[S.charCodeAt(0)][w]):S):E[b]+=S;E[b]=f(E[b])}return E.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var w=0;for(y=[],w=0;w<b.length;w+=1)Array.isArray(b[w])?y.push([p(b[w][0]),b[w][1],b[w][2]]):y.push([p(b[w])]);x=y}else x=p(b);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(vr.API),vr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(vr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,p=0,g=0,x=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(S,j){return S.concat(b.splitTextToSize(j,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)p<(x=this.getStringUnitWidth(c[w],{font:f})*d)&&(p=x);return p!==0&&(g=c.length),{w:p/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,p&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var p,g,x,b,y=[],w=[],S=[],j={},N={},F=[],E=[],_=(h=h||{}).autoSize||!1,B=h.printHeaders!==!1,P=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,D=h.margins||Object.assign({width:this.getPageWidth()},t),I=typeof h.padding=="number"?h.padding:3,U=h.headerBackgroundColor||"#c8c8c8",R=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=P,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=R,this.setFontSize(P),f==null)w=y=Object.keys(d[0]),S=y.map(function(){return"left"});else if(Array.isArray(f)&&ma(f[0])==="object")for(y=f.map(function(q){return q.name}),w=f.map(function(q){return q.prompt||q.name||""}),S=f.map(function(q){return q.align||"left"}),p=0;p<f.length;p+=1)N[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,S=y.map(function(){return"left"}));if(_||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<y.length;p+=1){for(j[b=y[p]]=d.map(function(q){return q[b]}),this.setFont(void 0,"bold"),F.push(this.getTextDimensions(w[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=j[b],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)F.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[b]=Math.max.apply(null,F)+I+I,F=[]}if(B){var Y={};for(p=0;p<y.length;p+=1)Y[y[p]]={},Y[y[p]].text=w[p],Y[y[p]].align=S[p];var H=o.call(this,Y,N);E=y.map(function(q){return new s(c,u,N[q],H,Y[q].text,void 0,Y[q].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var X=f.reduce(function(q,ne){return q[ne.name]=ne.align,q},{});for(p=0;p<d.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:d[p]},this);var V=o.call(this,d[p],N);for(x=0;x<y.length;x+=1){var z=d[p][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:x,data:z},this),i.call(this,new s(c,u,N[y[x]],V,z,p+2,X[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(p){var g=c[p];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/h+d+d},this).reduce(function(p,g){return Math.max(p,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(vr.API);var Iee={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Fee=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],L6=jee(Fee),Oee=[100,200,300,400,500,600,700,800,900],WEe=jee(Oee);function M6(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Iee[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof L6[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function ZQ(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var XEe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},eH={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function tH(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function YEe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},XEe,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=M6(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+tH(s)+"' and default family '"+n+"'.");if(i=function(c,u){if(u[c])return u[c];var d=L6[c],f=d<=L6.normal?-1:1,h=ZQ(u,Fee,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,i),i=function(c,u){if(u[c])return u[c];for(var d=Iee[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,i),!(i=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=WEe[c],f=ZQ(u,Oee,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+tH(s)+"'.");return i}function rH(e){return e.trimLeft()}function JEe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function ZEe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var vC,nH,aH,RT=["times"];(function(e){var t,r,n,a,s,i,o,c,u,d=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new c,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new i,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new i,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=M;Object.defineProperty(this,"pdf",{get:function(){return W}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Ne){Z=!!Ne}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Ne){re=!!Ne}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Ne){isNaN(Ne)||(ae=Ne)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(Ne){isNaN(Ne)||(ce=Ne)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ne){var fe;typeof Ne=="number"?fe=[Ne,Ne,Ne,Ne]:((fe=new Array(4))[0]=Ne[0],fe[1]=Ne.length>=2?Ne[1]:fe[0],fe[2]=Ne.length>=3?Ne[2]:fe[0],fe[3]=Ne.length>=4?Ne[3]:fe[1]),u.margin=fe}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(Ne){oe=Ne}});var le=0;Object.defineProperty(this,"lastBreak",{get:function(){return le},set:function(Ne){le=Ne}});var pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pe},set:function(Ne){pe=Ne}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ne){Ne instanceof d&&(u=Ne)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ne){u.path=Ne}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(Ne){Be=Ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ne){var fe;fe=h(Ne),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ne){var fe=h(Ne);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ne){["butt","round","square"].indexOf(Ne)!==-1&&(this.ctx.lineCap=Ne,this.pdf.setLineCap(Ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ne){isNaN(Ne)||(this.ctx.lineWidth=Ne,this.pdf.setLineWidth(Ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ne){["bevel","round","miter"].indexOf(Ne)!==-1&&(this.ctx.lineJoin=Ne,this.pdf.setLineJoin(Ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ne){isNaN(Ne)||(this.ctx.miterLimit=Ne,this.pdf.setMiterLimit(Ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ne){this.ctx.textBaseline=Ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ne){["right","end","center","left","start"].indexOf(Ne)!==-1&&(this.ctx.textAlign=Ne)}});var te=null;function _e(Ne,fe){if(te===null){var Ie=function(Ue){var Ye=[];return Object.keys(Ue).forEach(function(ye){Ue[ye].forEach(function(Oe){var Re=null;switch(Oe){case"bold":Re={family:ye,weight:"bold"};break;case"italic":Re={family:ye,style:"italic"};break;case"bolditalic":Re={family:ye,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:ye}}Re!==null&&(Re.ref={name:ye,style:Oe},Ye.push(Re))})}),Ye}(Ne.getFontList());te=function(Ue){for(var Ye={},ye=0;ye<Ue.length;++ye){var Oe=M6(Ue[ye]),Re=Oe.family,qe=Oe.stretch,Ze=Oe.style,lt=Oe.weight;Ye[Re]=Ye[Re]||{},Ye[Re][qe]=Ye[Re][qe]||{},Ye[Re][qe][Ze]=Ye[Re][qe][Ze]||{},Ye[Re][qe][Ze][lt]=Oe}return Ye}(Ie.concat(fe))}return te}var De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(Ne){te=null,De=Ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ne){var fe;if(this.ctx.font=Ne,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ne))!==null){var Ie=fe[1],Ue=(fe[2],fe[3]),Ye=fe[4],ye=(fe[5],fe[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ye)[2];Ye=Math.floor(Oe==="px"?parseFloat(Ye)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Ye)*this.pdf.getFontSize():parseFloat(Ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ye);var Re=function(Pt){var Qt,yt,kr=[],er=Pt.trim();if(er==="")return RT;if(er in eH)return[eH[er]];for(;er!=="";){switch(yt=null,Qt=(er=rH(er)).charAt(0)){case'"':case"'":yt=JEe(er.substring(1),Qt);break;default:yt=ZEe(er)}if(yt===null||(kr.push(yt[0]),(er=rH(yt[1]))!==""&&er.charAt(0)!==","))return RT;er=er.replace(/^,/,"")}return kr}(ye);if(this.fontFaces){var qe=YEe(_e(this.pdf,this.fontFaces),Re.map(function(Pt){return{family:Pt,stretch:"normal",weight:Ue,style:Ie}}));this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var Ze="";(Ue==="bold"||parseInt(Ue,10)>=700||Ie==="bold")&&(Ze="bold"),Ie==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var lt="",mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},It=0;It<Re.length;It++){if(this.pdf.internal.getFont(Re[It],Ze,{noFallback:!0,disableWarning:!0})!==void 0){lt=Re[It];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Re[It],"bold",{noFallback:!0,disableWarning:!0})!==void 0)lt=Re[It],Ze="bold";else if(this.pdf.internal.getFont(Re[It],"normal",{noFallback:!0,disableWarning:!0})!==void 0){lt=Re[It],Ze="normal";break}}if(lt===""){for(var Mt=0;Mt<Re.length;Mt++)if(mt[Re[Mt]]){lt=mt[Re[Mt]];break}}lt=lt===""?"Times":lt,this.pdf.setFont(lt,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ne){this.ctx.globalCompositeOperation=Ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ne){this.ctx.globalAlpha=Ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ne){this.ctx.lineDashOffset=Ne,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ne){this.ctx.lineDash=Ne,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ne){this.ctx.ignoreClearRect=!!Ne}})};f.prototype.setLineDash=function(M){this.lineDash=M},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){j.call(this,"fill",!1)},f.prototype.stroke=function(){j.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(M,W){if(isNaN(M)||isNaN(W))throw _a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new i(M,W));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(M,W)},f.prototype.closePath=function(){var M=new i(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&ma(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){M=new i(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(M.x,M.y)},f.prototype.lineTo=function(M,W){if(isNaN(M)||isNaN(W))throw _a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new i(M,W));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(Z.x,Z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},f.prototype.quadraticCurveTo=function(M,W,Z,re){if(isNaN(Z)||isNaN(re)||isNaN(M)||isNaN(W))throw _a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new i(Z,re)),ce=this.ctx.transform.applyToPoint(new i(M,W));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new i(ae.x,ae.y)},f.prototype.bezierCurveTo=function(M,W,Z,re,ae,ce){if(isNaN(ae)||isNaN(ce)||isNaN(M)||isNaN(W)||isNaN(Z)||isNaN(re))throw _a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new i(ae,ce)),le=this.ctx.transform.applyToPoint(new i(M,W)),pe=this.ctx.transform.applyToPoint(new i(Z,re));this.path.push({type:"bct",x1:le.x,y1:le.y,x2:pe.x,y2:pe.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new i(oe.x,oe.y)},f.prototype.arc=function(M,W,Z,re,ae,ce){if(isNaN(M)||isNaN(W)||isNaN(Z)||isNaN(re)||isNaN(ae))throw _a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new i(M,W));M=oe.x,W=oe.y;var le=this.ctx.transform.applyToPoint(new i(0,Z)),pe=this.ctx.transform.applyToPoint(new i(0,0));Z=Math.sqrt(Math.pow(le.x-pe.x,2)+Math.pow(le.y-pe.y,2))}Math.abs(ae-re)>=2*Math.PI&&(re=0,ae=2*Math.PI),this.path.push({type:"arc",x:M,y:W,radius:Z,startAngle:re,endAngle:ae,counterclockwise:ce})},f.prototype.arcTo=function(M,W,Z,re,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(M,W,Z,re){if(isNaN(M)||isNaN(W)||isNaN(Z)||isNaN(re))throw _a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,W),this.lineTo(M+Z,W),this.lineTo(M+Z,W+re),this.lineTo(M,W+re),this.lineTo(M,W),this.lineTo(M+Z,W),this.lineTo(M,W)},f.prototype.fillRect=function(M,W,Z,re){if(isNaN(M)||isNaN(W)||isNaN(Z)||isNaN(re))throw _a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,W,Z,re),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(M,W,Z,re){if(isNaN(M)||isNaN(W)||isNaN(Z)||isNaN(re))throw _a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(M,W,Z,re),this.stroke())},f.prototype.clearRect=function(M,W,Z,re){if(isNaN(M)||isNaN(W)||isNaN(Z)||isNaN(re))throw _a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,W,Z,re))},f.prototype.save=function(M){M=typeof M!="boolean"||M;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},f.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(W),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(M){var W,Z,re,ae;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))W=0,Z=0,re=0,ae=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ce!==null)W=parseInt(ce[1]),Z=parseInt(ce[2]),re=parseInt(ce[3]),ae=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)W=parseInt(ce[1]),Z=parseInt(ce[2]),re=parseInt(ce[3]),ae=parseFloat(ce[4]);else{if(ae=1,typeof M=="string"&&M.charAt(0)!=="#"){var oe=new _ee(M);M=oe.ok?oe.toHex():"#000000"}M.length===4?(W=M.substring(1,2),W+=W,Z=M.substring(2,3),Z+=Z,re=M.substring(3,4),re+=re):(W=M.substring(1,3),Z=M.substring(3,5),re=M.substring(5,7)),W=parseInt(W,16),Z=parseInt(Z,16),re=parseInt(re,16)}}return{r:W,g:Z,b:re,a:ae,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(M,W,Z,re){if(isNaN(W)||isNaN(Z)||typeof M!="string")throw _a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!p.call(this)){var ae=V(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;I.call(this,{text:M,x:W,y:Z,scale:ce,angle:ae,align:this.textAlign,maxWidth:re})}},f.prototype.strokeText=function(M,W,Z,re){if(isNaN(W)||isNaN(Z)||typeof M!="string")throw _a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){re=isNaN(re)?void 0:re;var ae=V(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;I.call(this,{text:M,x:W,y:Z,scale:ce,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:re})}},f.prototype.measureText=function(M){if(typeof M!="string")throw _a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,Z=this.pdf.internal.scaleFactor,re=W.internal.getFontSize(),ae=W.getStringUnitWidth(M)*re/W.internal.scaleFactor,ce=function(oe){var le=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return le}}),this};return new ce({width:ae*=Math.round(96*Z/72*1e4)/1e4})},f.prototype.scale=function(M,W){if(isNaN(M)||isNaN(W))throw _a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new c(M,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.rotate=function(M){if(isNaN(M))throw _a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new c(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.translate=function(M,W){if(isNaN(M)||isNaN(W))throw _a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new c(1,0,0,1,M,W);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.transform=function(M,W,Z,re,ae,ce){if(isNaN(M)||isNaN(W)||isNaN(Z)||isNaN(re)||isNaN(ae)||isNaN(ce))throw _a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new c(M,W,Z,re,ae,ce);this.ctx.transform=this.ctx.transform.multiply(oe)},f.prototype.setTransform=function(M,W,Z,re,ae,ce){M=isNaN(M)?1:M,W=isNaN(W)?0:W,Z=isNaN(Z)?0:Z,re=isNaN(re)?1:re,ae=isNaN(ae)?0:ae,ce=isNaN(ce)?0:ce,this.ctx.transform=new c(M,W,Z,re,ae,ce)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(M,W,Z,re,ae,ce,oe,le,pe){var Be=this.pdf.getImageProperties(M),te=1,_e=1,De=1,Ne=1;re!==void 0&&le!==void 0&&(De=le/re,Ne=pe/ae,te=Be.width/re*le/re,_e=Be.height/ae*pe/ae),ce===void 0&&(ce=W,oe=Z,W=0,Z=0),re!==void 0&&le===void 0&&(le=re,pe=ae),re===void 0&&le===void 0&&(le=Be.width,pe=Be.height);for(var fe,Ie=this.ctx.transform.decompose(),Ue=V(Ie.rotate.shx),Ye=new c,ye=(Ye=(Ye=(Ye=Ye.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new o(ce-W*De,oe-Z*Ne,re*te,ae*_e)),Oe=b.call(this,ye),Re=[],qe=0;qe<Oe.length;qe+=1)Re.indexOf(Oe[qe])===-1&&Re.push(Oe[qe]);if(S(Re),this.autoPaging)for(var Ze=Re[0],lt=Re[Re.length-1],mt=Ze;mt<lt+1;mt++){this.pdf.setPage(mt);var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=mt===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yt=mt===1?0:Pt+(mt-2)*Qt;if(this.ctx.clip_path.length!==0){var kr=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(fe,this.posX+this.margin[3],-yt+Mt+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=kr}var er=JSON.parse(JSON.stringify(ye));er=w([er],this.posX+this.margin[3],-yt+Mt+this.ctx.prevPageLastElemOffset)[0];var an=(mt>Ze||mt<lt)&&x.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Qt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",er.x,er.y,er.w,er.h,null,null,Ue),an&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",ye.x,ye.y,ye.w,ye.h,null,null,Ue)};var b=function(M,W,Z){var re=[];W=W||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":re.push(Math.floor((M.y+ae)/Z)+1);break;case"arc":re.push(Math.floor((M.y+ae-M.radius)/Z)+1),re.push(Math.floor((M.y+ae+M.radius)/Z)+1);break;case"qct":var ce=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);re.push(Math.floor((ce.y+ae)/Z)+1),re.push(Math.floor((ce.y+ce.h+ae)/Z)+1);break;case"bct":var oe=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);re.push(Math.floor((oe.y+ae)/Z)+1),re.push(Math.floor((oe.y+oe.h+ae)/Z)+1);break;case"rect":re.push(Math.floor((M.y+ae)/Z)+1),re.push(Math.floor((M.y+M.h+ae)/Z)+1)}for(var le=0;le<re.length;le+=1)for(;this.pdf.internal.getNumberOfPages()<re[le];)y.call(this);return re},y=function(){var M=this.fillStyle,W=this.strokeStyle,Z=this.font,re=this.lineCap,ae=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=W,this.font=Z,this.lineCap=re,this.lineWidth=ae,this.lineJoin=ce},w=function(M,W,Z){for(var re=0;re<M.length;re++)switch(M[re].type){case"bct":M[re].x2+=W,M[re].y2+=Z;case"qct":M[re].x1+=W,M[re].y1+=Z;case"mt":case"lt":case"arc":default:M[re].x+=W,M[re].y+=Z}return M},S=function(M){return M.sort(function(W,Z){return W-Z})},j=function(M,W){for(var Z,re,ae=this.fillStyle,ce=this.strokeStyle,oe=this.lineCap,le=this.lineWidth,pe=Math.abs(le*this.ctx.transform.scaleX),Be=this.lineJoin,te=JSON.parse(JSON.stringify(this.path)),_e=JSON.parse(JSON.stringify(this.path)),De=[],Ne=0;Ne<_e.length;Ne++)if(_e[Ne].x!==void 0)for(var fe=b.call(this,_e[Ne]),Ie=0;Ie<fe.length;Ie+=1)De.indexOf(fe[Ie])===-1&&De.push(fe[Ie]);for(var Ue=0;Ue<De.length;Ue++)for(;this.pdf.internal.getNumberOfPages()<De[Ue];)y.call(this);if(S(De),this.autoPaging)for(var Ye=De[0],ye=De[De.length-1],Oe=Ye;Oe<ye+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=ae,this.strokeStyle=ce,this.lineCap=oe,this.lineWidth=pe,this.lineJoin=Be;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=Oe===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=Oe===1?0:Ze+(Oe-2)*lt;if(this.ctx.clip_path.length!==0){var It=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Z,this.posX+this.margin[3],-mt+qe+this.ctx.prevPageLastElemOffset),N.call(this,M,!0),this.path=It}if(re=JSON.parse(JSON.stringify(te)),this.path=w(re,this.posX+this.margin[3],-mt+qe+this.ctx.prevPageLastElemOffset),W===!1||Oe===0){var Mt=(Oe>Ye||Oe<ye)&&x.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,lt,null).clip().discardPath()),N.call(this,M,W),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=le}else this.lineWidth=pe,N.call(this,M,W),this.lineWidth=le;this.path=te},N=function(M,W){if((M!=="stroke"||W||!g.call(this))&&(M==="stroke"||W||!p.call(this))){for(var Z,re,ae=[],ce=this.path,oe=0;oe<ce.length;oe++){var le=ce[oe];switch(le.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:le,deltas:[],abs:[]});break;case"lt":var pe=ae.length;if(ce[oe-1]&&!isNaN(ce[oe-1].x)&&(Z=[le.x-ce[oe-1].x,le.y-ce[oe-1].y],pe>0)){for(;pe>=0;pe--)if(ae[pe-1].close!==!0&&ae[pe-1].begin!==!0){ae[pe-1].deltas.push(Z),ae[pe-1].abs.push(le);break}}break;case"bct":Z=[le.x1-ce[oe-1].x,le.y1-ce[oe-1].y,le.x2-ce[oe-1].x,le.y2-ce[oe-1].y,le.x-ce[oe-1].x,le.y-ce[oe-1].y],ae[ae.length-1].deltas.push(Z);break;case"qct":var Be=ce[oe-1].x+2/3*(le.x1-ce[oe-1].x),te=ce[oe-1].y+2/3*(le.y1-ce[oe-1].y),_e=le.x+2/3*(le.x1-le.x),De=le.y+2/3*(le.y1-le.y),Ne=le.x,fe=le.y;Z=[Be-ce[oe-1].x,te-ce[oe-1].y,_e-ce[oe-1].x,De-ce[oe-1].y,Ne-ce[oe-1].x,fe-ce[oe-1].y],ae[ae.length-1].deltas.push(Z);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(le)}}re=W?null:M==="stroke"?"stroke":"fill";for(var Ie=!1,Ue=0;Ue<ae.length;Ue++)if(ae[Ue].arc)for(var Ye=ae[Ue].abs,ye=0;ye<Ye.length;ye++){var Oe=Ye[ye];Oe.type==="arc"?_.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,W,!Ie):U.call(this,Oe.x,Oe.y),Ie=!0}else if(ae[Ue].close===!0)this.pdf.internal.out("h"),Ie=!1;else if(ae[Ue].begin!==!0){var Re=ae[Ue].start.x,qe=ae[Ue].start.y;R.call(this,ae[Ue].deltas,Re,qe),Ie=!0}re&&B.call(this,re),W&&P.call(this)}},F=function(M){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-Z;case"top":return M+W-Z;case"hanging":return M+W-2*Z;case"middle":return M+W/2-Z;case"ideographic":return M;case"alphabetic":default:return M}},E=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(W,Z){this.colorStops.push([W,Z])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(M,W,Z,re,ae,ce,oe,le,pe){for(var Be=H.call(this,Z,re,ae,ce),te=0;te<Be.length;te++){var _e=Be[te];te===0&&(pe?D.call(this,_e.x1+M,_e.y1+W):U.call(this,_e.x1+M,_e.y1+W)),Y.call(this,M,W,_e.x2,_e.y2,_e.x3,_e.y3,_e.x4,_e.y4)}le?P.call(this):B.call(this,oe)},B=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},P=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(M,W){this.pdf.internal.out(r(M)+" "+n(W)+" m")},I=function(M){var W;switch(M.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var Z=this.pdf.getTextDimensions(M.text),re=F.call(this,M.y),ae=E.call(this,re)-Z.h,ce=this.ctx.transform.applyToPoint(new i(M.x,re)),oe=this.ctx.transform.decompose(),le=new c;le=(le=(le=le.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var pe,Be,te,_e=this.ctx.transform.applyToRectangle(new o(M.x,re,Z.w,Z.h)),De=le.applyToRectangle(new o(M.x,ae,Z.w,Z.h)),Ne=b.call(this,De),fe=[],Ie=0;Ie<Ne.length;Ie+=1)fe.indexOf(Ne[Ie])===-1&&fe.push(Ne[Ie]);if(S(fe),this.autoPaging)for(var Ue=fe[0],Ye=fe[fe.length-1],ye=Ue;ye<Ye+1;ye++){this.pdf.setPage(ye);var Oe=ye===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],Ze=qe-this.margin[0],lt=this.pdf.internal.pageSize.width-this.margin[1],mt=lt-this.margin[3],It=ye===1?0:Re+(ye-2)*Ze;if(this.ctx.clip_path.length!==0){var Mt=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(pe,this.posX+this.margin[3],-1*It+Oe),N.call(this,"fill",!0),this.path=Mt}var Pt=w([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-It+Oe+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*M.scale),te=this.lineWidth,this.lineWidth=te*M.scale);var Qt=this.autoPaging!=="text";if(Qt||Pt.y+Pt.h<=qe){if(Qt||Pt.y>=Oe&&Pt.x<=lt){var yt=Qt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||lt-Pt.x)[0],kr=w([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-It+Oe+this.ctx.prevPageLastElemOffset)[0],er=Qt&&(ye>Ue||ye<Ye)&&x.call(this);er&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Ze,null).clip().discardPath()),this.pdf.text(yt,kr.x,kr.y,{angle:M.angle,align:W,renderingMode:M.renderingMode}),er&&this.pdf.restoreGraphicsState()}}else Pt.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-Pt.y);M.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=te)}else M.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*M.scale),te=this.lineWidth,this.lineWidth=te*M.scale),this.pdf.text(M.text,ce.x+this.posX,ce.y+this.posY,{angle:M.angle,align:W,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=te)},U=function(M,W,Z,re){Z=Z||0,re=re||0,this.pdf.internal.out(r(M+Z)+" "+n(W+re)+" l")},R=function(M,W,Z){return this.pdf.lines(M,W,Z,null,null)},Y=function(M,W,Z,re,ae,ce,oe,le){this.pdf.internal.out([t(a(Z+M)),t(s(re+W)),t(a(ae+M)),t(s(ce+W)),t(a(oe+M)),t(s(le+W)),"c"].join(" "))},H=function(M,W,Z,re){for(var ae=2*Math.PI,ce=Math.PI/2;W>Z;)W-=ae;var oe=Math.abs(Z-W);oe<ae&&re&&(oe=ae-oe);for(var le=[],pe=re?-1:1,Be=W;oe>1e-5;){var te=Be+pe*Math.min(oe,ce);le.push(X.call(this,M,Be,te)),oe-=Math.abs(te-Be),Be=te}return le},X=function(M,W,Z){var re=(Z-W)/2,ae=M*Math.cos(re),ce=M*Math.sin(re),oe=ae,le=-ce,pe=oe*oe+le*le,Be=pe+oe*ae+le*ce,te=4/3*(Math.sqrt(2*pe*Be)-Be)/(oe*ce-le*ae),_e=oe-te*le,De=le+te*oe,Ne=_e,fe=-De,Ie=re+W,Ue=Math.cos(Ie),Ye=Math.sin(Ie);return{x1:M*Math.cos(W),y1:M*Math.sin(W),x2:_e*Ue-De*Ye,y2:_e*Ye+De*Ue,x3:Ne*Ue-fe*Ye,y3:Ne*Ye+fe*Ue,x4:M*Math.cos(Z),y4:M*Math.sin(Z)}},V=function(M){return 180*M/Math.PI},z=function(M,W,Z,re,ae,ce){var oe=M+.5*(Z-M),le=W+.5*(re-W),pe=ae+.5*(Z-ae),Be=ce+.5*(re-ce),te=Math.min(M,ae,oe,pe),_e=Math.max(M,ae,oe,pe),De=Math.min(W,ce,le,Be),Ne=Math.max(W,ce,le,Be);return new o(te,De,_e-te,Ne-De)},q=function(M,W,Z,re,ae,ce,oe,le){var pe,Be,te,_e,De,Ne,fe,Ie,Ue,Ye,ye,Oe,Re,qe,Ze=Z-M,lt=re-W,mt=ae-Z,It=ce-re,Mt=oe-ae,Pt=le-ce;for(Be=0;Be<41;Be++)Ue=(fe=(te=M+(pe=Be/40)*Ze)+pe*((De=Z+pe*mt)-te))+pe*(De+pe*(ae+pe*Mt-De)-fe),Ye=(Ie=(_e=W+pe*lt)+pe*((Ne=re+pe*It)-_e))+pe*(Ne+pe*(ce+pe*Pt-Ne)-Ie),Be==0?(ye=Ue,Oe=Ye,Re=Ue,qe=Ye):(ye=Math.min(ye,Ue),Oe=Math.min(Oe,Ye),Re=Math.max(Re,Ue),qe=Math.max(qe,Ye));return new o(Math.round(ye),Math.round(Oe),Math.round(Re-ye),Math.round(qe-Oe))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,W,Z=(M=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:W}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(vr.API),function(e){var t=function(s){var i,o,c,u,d,f,h,p,g,x;for(o=[],c=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)-(h=d%85))/85)%85,o.push(f+33,h+33,p+33,g+33,x+33)):o.push(122);return function(b,y){for(var w=y;w>0;w--)b.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,c,u,d,f=String,h="length",p=255,g="charCodeAt",x="slice",b="replace";for(s[x](-2),s=s[x](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],u=0,d=(s+=i="uuuuu"[x](s[h]%5||5))[h];d>u;u+=5)o=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(y,w){for(var S=w;S>0;S--)y.pop()}(c,i[h]),f.fromCharCode.apply(f,c)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=F6(i)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var o=0,c=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(vr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,h=0,p=function(g){var x=g.length,b=[],y=String.fromCharCode;for(h=0;h<x;h+=1)b.push(y(255&g.charCodeAt(h)));return b.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(p(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(a,s,i)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(vr.API),function(e){function t(){return(Mr.html2canvas?Promise.resolve(Mr.html2canvas):Hv(()=>Promise.resolve().then(()=>TAt),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Mr.DOMPurify?Promise.resolve(Mr.DOMPurify):Hv(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=ma(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var c=document.createElement(i);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function i(o){var c=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:i,dompurify:c})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],g=p.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=i[c]};switch(c){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[c]=i[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var c=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(c):c})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(i=i||vr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,c,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,c,u){return this.setProgress(i?this.progress.val+i:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var c=this;return this.thenCore(i,o,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(i,o,c){c=c||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,vr.getPageSize=function(i,o,c){if(ma(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",i=(""+(i||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,g=0,x=0;if(h.hasOwnProperty(f))g=h[f][1]/d,x=h[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(i==="p"||i==="portrait")i="p",x>g&&(p=x,x=g,g=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>x&&(p=x,x=g,g=p)}return{width:x,height:g,unit:o,k:d,orientation:i}},e.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(M6):null;var c=new s(o);return o.worker?c:c.from(i).doCallback()}}(vr.API),vr.API.addJS=function(e){return aH=e,this.internal.events.subscribe("postPutResources",function(){vC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(vC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),nH=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+aH+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){vC!==void 0&&nH!==void 0&&this.internal.out("/Names <</JavaScript "+vC+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(vr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,p=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},b=4;b<g;b+=2){if(b+=p,t.indexOf(f.charCodeAt(b+1))!==-1){h=256*f.charCodeAt(b+5)+f.charCodeAt(b+6),x={width:256*f.charCodeAt(b+7)+f.charCodeAt(b+8),height:h,numcomponents:f.charCodeAt(b+9)};break}p=256*f.charCodeAt(b+2)+f.charCodeAt(b+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(vr.API);var hx,bC,sH,iH,oH,eCe=function(){var e,t,r;function n(s){var i,o,c,u,d,f,h,p,g,x,b,y,w,S;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),g=(function(){var j,N;for(N=[],j=0;j<4;++j)N.push(String.fromCharCode(this.data[this.pos++]));return N}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(b=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,b.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,p,g){var x,b,y,w,S,j,N,F,E,_,B,P,D,I,U,R,Y,H,X,V,z,q=Math.ceil((u.width-f)/p),ne=Math.ceil((u.height-h)/g),M=u.width==q&&u.height==ne;for(I=i*q,P=M?o:new Uint8Array(I*ne),j=s.length,D=0,b=0;D<ne&&c<j;){switch(s[c++]){case 0:for(w=Y=0;Y<I;w=Y+=1)P[b++]=s[c++];break;case 1:for(w=H=0;H<I;w=H+=1)x=s[c++],S=w<i?0:P[b-i],P[b++]=(x+S)%256;break;case 2:for(w=X=0;X<I;w=X+=1)x=s[c++],y=(w-w%i)/i,U=D&&P[(D-1)*I+y*i+w%i],P[b++]=(U+x)%256;break;case 3:for(w=V=0;V<I;w=V+=1)x=s[c++],y=(w-w%i)/i,S=w<i?0:P[b-i],U=D&&P[(D-1)*I+y*i+w%i],P[b++]=(x+Math.floor((S+U)/2))%256;break;case 4:for(w=z=0;z<I;w=z+=1)x=s[c++],y=(w-w%i)/i,S=w<i?0:P[b-i],D===0?U=R=0:(U=P[(D-1)*I+y*i+w%i],R=y&&P[(D-1)*I+(y-1)*i+w%i]),N=S+U-R,F=Math.abs(N-S),_=Math.abs(N-U),B=Math.abs(N-R),E=F<=_&&F<=B?S:_<=B?U:R,P[b++]=(x+E)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!M){var W=((h+D*g)*u.width+f)*i,Z=D*I;for(w=0;w<q;w+=1){for(var re=0;re<i;re+=1)o[W++]=P[Z++];W+=(p-1)*i}}D++}}return s=IEe(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,c,u,d,f,h,p;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),c=0,s=0,i=f=0,h=o.length;f<h;i=f+=3)u[c++]=o[i],u[c++]=o[i+1],u[c++]=o[i+2],u[c++]=(p=d[s++])!=null?p:255;return u},n.prototype.copyToImageData=function(s,i){var o,c,u,d,f,h,p,g,x,b,y;if(c=this.colors,x=null,o=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,o=!0),g=(u=s.data||s).length,f=x||i,d=h=0,c===1)for(;d<g;)p=x?4*i[d/4]:h,b=f[p++],u[d++]=b,u[d++]=b,u[d++]=b,u[d++]=o?f[p++]:255,h=p;else for(;d<g;)p=x?4*i[d/4]:h,u[d++]=f[p++],u[d++]=f[p++],u[d++]=f[p++],u[d++]=o?f[p++]:255,h=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Mr)==="[object Window]"){try{t=Mr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,c,u,d,f,h,p;if(this.animation){for(p=[],o=d=0,f=(h=this.animation.frames).length;d<f;o=++d)i=h[o],c=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(c,u),i.imageData=c,p.push(i.image=e(c));return p}},n.prototype.renderFrame=function(s,i){var o,c,u;return o=(c=this.animation.frames)[i],u=c[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,c,u,d,f,h=this;return o=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(i=function(){var p,g;if(p=o++%u,g=c[p],h.renderFrame(s,p),u>1&&o/u<d)return h.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function tCe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var o=null,c=null;s&&(o=t,c=i,t+=3*i);var u=!0,d=[],f=0,h=null,p=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),p=x>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,j=e[t++],N=j>>6&1,F=1<<(7&j)+1,E=o,_=c,B=!1;j>>7&&(B=!0,E=t,_=F,t+=3*F);var P=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}d.push({x:b,y,width:w,height:S,has_local_palette:B,palette_offset:E,palette_size:_,data_offset:P,data_length:t-P,transparent_index:h,interlaced:!!N,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,U){var R=this.frameInfo(I),Y=R.width*R.height,H=new Uint8Array(Y);lH(e,R.data_offset,H,Y);var X=R.palette_offset,V=R.transparent_index;V===null&&(V=256);var z=R.width,q=r-z,ne=z,M=4*(R.y*r+R.x),W=4*((R.y+R.height)*r+R.x),Z=M,re=4*q;R.interlaced===!0&&(re+=4*r*7);for(var ae=8,ce=0,oe=H.length;ce<oe;++ce){var le=H[ce];if(ne===0&&(ne=z,(Z+=re)>=W&&(re=4*q+4*r*(ae-1),Z=M+(z+q)*(ae<<1),ae>>=1)),le===V)Z+=4;else{var pe=e[X+3*le],Be=e[X+3*le+1],te=e[X+3*le+2];U[Z++]=te,U[Z++]=Be,U[Z++]=pe,U[Z++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(I,U){var R=this.frameInfo(I),Y=R.width*R.height,H=new Uint8Array(Y);lH(e,R.data_offset,H,Y);var X=R.palette_offset,V=R.transparent_index;V===null&&(V=256);var z=R.width,q=r-z,ne=z,M=4*(R.y*r+R.x),W=4*((R.y+R.height)*r+R.x),Z=M,re=4*q;R.interlaced===!0&&(re+=4*r*7);for(var ae=8,ce=0,oe=H.length;ce<oe;++ce){var le=H[ce];if(ne===0&&(ne=z,(Z+=re)>=W&&(re=4*q+4*r*(ae-1),Z=M+(z+q)*(ae<<1),ae>>=1)),le===V)Z+=4;else{var pe=e[X+3*le],Be=e[X+3*le+1],te=e[X+3*le+2];U[Z++]=pe,U[Z++]=Be,U[Z++]=te,U[Z++]=255}--ne}}}function lH(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,p=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&p!==0;)f|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<c)break;var b=f&u;if(f>>=c,d-=c,b!==s){if(b===i)break;for(var y=b<o?b:x,w=0,S=y;S>s;)S=g[S]>>8,++w;var j=S;if(h+w+(y!==b?1:0)>n)return void _a.log("Warning, gif stream longer than expected.");r[h++]=j;var N=h+=w;for(y!==b&&(r[h++]=j),S=y;w--;)S=g[S],r[--N]=255&S,S>>=8;x!==null&&o<4096&&(g[o++]=x<<8|j,o>=u+1&&c<12&&(++c,u=u<<1|1)),x=b}else o=i+1,u=(1<<(c=a+1))-1,x=null}return h!==n&&_a.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function LT(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),p=new Array(64),g=new Array(64),x=[],b=0,y=7,w=new Array(64),S=new Array(64),j=new Array(64),N=new Array(256),F=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(M,W){for(var Z=0,re=0,ae=new Array,ce=1;ce<=16;ce++){for(var oe=1;oe<=M[ce];oe++)ae[W[re]]=[],ae[W[re]][0]=Z,ae[W[re]][1]=ce,re++,Z++;Z*=2}return ae}function X(M){for(var W=M[0],Z=M[1]-1;Z>=0;)W&1<<Z&&(b|=1<<y),Z--,--y<0&&(b==255?(V(255),V(0)):V(b),y=7,b=0)}function V(M){x.push(M)}function z(M){V(M>>8&255),V(255&M)}function q(M,W,Z,re,ae){for(var ce,oe=ae[0],le=ae[240],pe=function(Ye,ye){var Oe,Re,qe,Ze,lt,mt,It,Mt,Pt,Qt,yt=0;for(Pt=0;Pt<8;++Pt){Oe=Ye[yt],Re=Ye[yt+1],qe=Ye[yt+2],Ze=Ye[yt+3],lt=Ye[yt+4],mt=Ye[yt+5],It=Ye[yt+6];var kr=Oe+(Mt=Ye[yt+7]),er=Oe-Mt,an=Re+It,_r=Re-It,Vr=qe+mt,jn=qe-mt,Or=Ze+lt,As=Ze-lt,hn=kr+Or,oa=kr-Or,Ba=an+Vr,en=an-Vr;Ye[yt]=hn+Ba,Ye[yt+4]=hn-Ba;var mr=.707106781*(en+oa);Ye[yt+2]=oa+mr,Ye[yt+6]=oa-mr;var et=.382683433*((hn=As+jn)-(en=_r+er)),gt=.5411961*hn+et,Je=1.306562965*en+et,xt=.707106781*(Ba=jn+_r),wt=er+xt,bt=er-xt;Ye[yt+5]=bt+gt,Ye[yt+3]=bt-gt,Ye[yt+1]=wt+Je,Ye[yt+7]=wt-Je,yt+=8}for(yt=0,Pt=0;Pt<8;++Pt){Oe=Ye[yt],Re=Ye[yt+8],qe=Ye[yt+16],Ze=Ye[yt+24],lt=Ye[yt+32],mt=Ye[yt+40],It=Ye[yt+48];var nr=Oe+(Mt=Ye[yt+56]),gr=Oe-Mt,Kr=Re+It,Yr=Re-It,Gr=qe+mt,he=qe-mt,Te=Ze+lt,Ce=Ze-lt,we=nr+Te,Se=nr-Te,je=Kr+Gr,Xe=Kr-Gr;Ye[yt]=we+je,Ye[yt+32]=we-je;var dt=.707106781*(Xe+Se);Ye[yt+16]=Se+dt,Ye[yt+48]=Se-dt;var $e=.382683433*((we=Ce+he)-(Xe=Yr+gr)),rt=.5411961*we+$e,st=1.306562965*Xe+$e,Ft=.707106781*(je=he+Yr),Vt=gr+Ft,Yt=gr-Ft;Ye[yt+40]=Yt+rt,Ye[yt+24]=Yt-rt,Ye[yt+8]=Vt+st,Ye[yt+56]=Vt-st,yt++}for(Pt=0;Pt<64;++Pt)Qt=Ye[Pt]*ye[Pt],p[Pt]=Qt>0?Qt+.5|0:Qt-.5|0;return p}(M,W),Be=0;Be<64;++Be)g[E[Be]]=pe[Be];var te=g[0]-Z;Z=g[0],te==0?X(re[0]):(X(re[h[ce=32767+te]]),X(f[ce]));for(var _e=63;_e>0&&g[_e]==0;)_e--;if(_e==0)return X(oe),Z;for(var De,Ne=1;Ne<=_e;){for(var fe=Ne;g[Ne]==0&&Ne<=_e;)++Ne;var Ie=Ne-fe;if(Ie>=16){De=Ie>>4;for(var Ue=1;Ue<=De;++Ue)X(le);Ie&=15}ce=32767+g[Ne],X(ae[(Ie<<4)+h[ce]]),X(f[ce]),Ne++}return _e!=63&&X(oe),Z}function ne(M){M=Math.min(Math.max(M,1),100),s!=M&&(function(W){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var ae=i((Z[re]*W+50)/100);ae=Math.min(Math.max(ae,1),255),o[E[re]]=ae}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var le=i((ce[oe]*W+50)/100);le=Math.min(Math.max(le,1),255),c[E[oe]]=le}for(var pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,te=0;te<8;te++)for(var _e=0;_e<8;_e++)u[Be]=1/(o[E[Be]]*pe[te]*pe[_e]*8),d[Be]=1/(c[E[Be]]*pe[te]*pe[_e]*8),Be++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),s=M)}this.encode=function(M,W){W&&ne(W),x=new Array,b=0,y=7,z(65496),z(65504),z(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),z(1),z(1),V(0),V(0),function(){z(65499),z(132),V(0);for(var Re=0;Re<64;Re++)V(o[Re]);V(1);for(var qe=0;qe<64;qe++)V(c[qe])}(),function(Re,qe){z(65472),z(17),V(8),z(qe),z(Re),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(M.width,M.height),function(){z(65476),z(418),V(0);for(var Re=0;Re<16;Re++)V(_[Re+1]);for(var qe=0;qe<=11;qe++)V(B[qe]);V(16);for(var Ze=0;Ze<16;Ze++)V(P[Ze+1]);for(var lt=0;lt<=161;lt++)V(D[lt]);V(1);for(var mt=0;mt<16;mt++)V(I[mt+1]);for(var It=0;It<=11;It++)V(U[It]);V(17);for(var Mt=0;Mt<16;Mt++)V(R[Mt+1]);for(var Pt=0;Pt<=161;Pt++)V(Y[Pt])}(),z(65498),z(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var Z=0,re=0,ae=0;b=0,y=7,this.encode.displayName="_encode_";for(var ce,oe,le,pe,Be,te,_e,De,Ne,fe=M.data,Ie=M.width,Ue=M.height,Ye=4*Ie,ye=0;ye<Ue;){for(ce=0;ce<Ye;){for(Be=Ye*ye+ce,_e=-1,De=0,Ne=0;Ne<64;Ne++)te=Be+(De=Ne>>3)*Ye+(_e=4*(7&Ne)),ye+De>=Ue&&(te-=Ye*(ye+1+De-Ue)),ce+_e>=Ye&&(te-=ce+_e-Ye+4),oe=fe[te++],le=fe[te++],pe=fe[te++],w[Ne]=(F[oe]+F[le+256>>0]+F[pe+512>>0]>>16)-128,S[Ne]=(F[oe+768>>0]+F[le+1024>>0]+F[pe+1280>>0]>>16)-128,j[Ne]=(F[oe+1280>>0]+F[le+1536>>0]+F[pe+1792>>0]>>16)-128;Z=q(w,u,Z,t,n),re=q(S,d,re,r,a),ae=q(j,d,ae,r,a),ce+=32}ye+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,X(Oe)}return z(65497),new Uint8Array(x)},e=e||50,function(){for(var M=String.fromCharCode,W=0;W<256;W++)N[W]=M(W)}(),t=H(_,B),r=H(I,U),n=H(P,D),a=H(R,Y),function(){for(var M=1,W=2,Z=1;Z<=15;Z++){for(var re=M;re<W;re++)h[32767+re]=Z,f[32767+re]=[],f[32767+re][1]=Z,f[32767+re][0]=re;for(var ae=-(W-1);ae<=-M;ae++)h[32767+ae]=Z,f[32767+ae]=[],f[32767+ae][1]=Z,f[32767+ae][0]=W-1+ae;M<<=1,W<<=1}}(),function(){for(var M=0;M<256;M++)F[M]=19595*M,F[M+256>>0]=38470*M,F[M+512>>0]=7471*M+32768,F[M+768>>0]=-11059*M,F[M+1024>>0]=-21709*M,F[M+1280>>0]=32768*M+8421375,F[M+1536>>0]=-27439*M,F[M+1792>>0]=-5329*M}(),ne(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ad(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function cH(e){function t(_){if(!_)throw Error("assert :P")}function r(_,B,P){for(var D=0;4>D;D++)if(_[B+D]!=P.charCodeAt(D))return!0;return!1}function n(_,B,P,D,I){for(var U=0;U<I;U++)_[B+U]=P[D+U]}function a(_,B,P,D){for(var I=0;I<D;I++)_[B+I]=P}function s(_){return new Int32Array(_)}function i(_,B){for(var P=[],D=0;D<_;D++)P.push(new B);return P}function o(_,B){var P=[];return function D(I,U,R){for(var Y=R[U],H=0;H<Y&&(I.push(R.length>U+1?[]:new B),!(R.length<U+1));H++)D(I[H],U+1,R)}(P,0,_),P}var c=function(){var _=this;function B(T,Q){for(var J=1<<Q-1>>>0;T&J;)J>>>=1;return J?(T&J-1)+J:T}function P(T,Q,J,se,de){t(!(se%J));do T[Q+(se-=J)]=de;while(0<se)}function D(T,Q,J,se,de){if(t(2328>=de),512>=de)var me=s(512);else if((me=s(de))==null)return 0;return function(ge,xe,Ee,ke,Me,at){var tt,Ke,Bt=xe,ht=1<<Ee,Qe=s(16),Ve=s(16);for(t(Me!=0),t(ke!=null),t(ge!=null),t(0<Ee),Ke=0;Ke<Me;++Ke){if(15<ke[Ke])return 0;++Qe[ke[Ke]]}if(Qe[0]==Me)return 0;for(Ve[1]=0,tt=1;15>tt;++tt){if(Qe[tt]>1<<tt)return 0;Ve[tt+1]=Ve[tt]+Qe[tt]}for(Ke=0;Ke<Me;++Ke)tt=ke[Ke],0<ke[Ke]&&(at[Ve[tt]++]=Ke);if(Ve[15]==1)return(ke=new I).g=0,ke.value=at[0],P(ge,Bt,1,ht,ke),ht;var _t,jt=-1,Nt=ht-1,tr=0,Xt=1,xr=1,Zt=1<<Ee;for(Ke=0,tt=1,Me=2;tt<=Ee;++tt,Me<<=1){if(Xt+=xr<<=1,0>(xr-=Qe[tt]))return 0;for(;0<Qe[tt];--Qe[tt])(ke=new I).g=tt,ke.value=at[Ke++],P(ge,Bt+tr,Me,Zt,ke),tr=B(tr,tt)}for(tt=Ee+1,Me=2;15>=tt;++tt,Me<<=1){if(Xt+=xr<<=1,0>(xr-=Qe[tt]))return 0;for(;0<Qe[tt];--Qe[tt]){if(ke=new I,(tr&Nt)!=jt){for(Bt+=Zt,_t=1<<(jt=tt)-Ee;15>jt&&!(0>=(_t-=Qe[jt]));)++jt,_t<<=1;ht+=Zt=1<<(_t=jt-Ee),ge[xe+(jt=tr&Nt)].g=_t+Ee,ge[xe+jt].value=Bt-xe-jt}ke.g=tt-Ee,ke.value=at[Ke++],P(ge,Bt+(tr>>Ee),Me,Zt,ke),tr=B(tr,tt)}}return Xt!=2*Ve[15]-1?0:ht}(T,Q,J,se,de,me)}function I(){this.value=this.g=0}function U(){this.value=this.g=0}function R(){this.G=i(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Is,U)}function Y(T,Q,J,se){t(T!=null),t(Q!=null),t(2147483648>se),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=Q,T.pa=J,T.Jd=Q,T.Yc=J+se,T.Zc=4<=se?J+se-4+1:J,ce(T)}function H(T,Q){for(var J=0;0<Q--;)J|=le(T,128)<<Q;return J}function X(T,Q){var J=H(T,Q);return oe(T)?-J:J}function V(T,Q,J,se){var de,me=0;for(t(T!=null),t(Q!=null),t(4294967288>se),T.Sb=se,T.Ra=0,T.u=0,T.h=0,4<se&&(se=4),de=0;de<se;++de)me+=Q[J+de]<<8*de;T.Ra=me,T.bb=se,T.oa=Q,T.pa=J}function z(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<Af-8>>>0,++T.bb,T.u-=8;Z(T)&&(T.h=1,T.u=0)}function q(T,Q){if(t(0<=Q),!T.h&&Q<=df){var J=W(T)&Yd[Q];return T.u+=Q,z(T),J}return T.h=1,T.u=0}function ne(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(T){return T.Ra>>>(T.u&Af-1)>>>0}function Z(T){return t(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>Af}function re(T,Q){T.u=Q,T.h=Z(T)}function ae(T){T.u>=Hh&&(t(T.u>=Hh),z(T))}function ce(T){t(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(t(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function oe(T){return H(T,1)}function le(T,Q){var J=T.Ca;0>T.b&&ce(T);var se=T.b,de=J*Q>>>8,me=(T.I>>>se>de)+0;for(me?(J-=de,T.I-=de+1<<se>>>0):J=de+1,se=J,de=0;256<=se;)de+=8,se>>=8;return se=7^de+So[se],T.b-=se,T.Ca=(J<<se)-1,me}function pe(T,Q,J){T[Q+0]=J>>24&255,T[Q+1]=J>>16&255,T[Q+2]=J>>8&255,T[Q+3]=J>>0&255}function Be(T,Q){return T[Q+0]<<0|T[Q+1]<<8}function te(T,Q){return Be(T,Q)|T[Q+2]<<16}function _e(T,Q){return Be(T,Q)|Be(T,Q+2)<<16}function De(T,Q){var J=1<<Q;return t(T!=null),t(0<Q),T.X=s(J),T.X==null?0:(T.Mb=32-Q,T.Xa=Q,1)}function Ne(T,Q){t(T!=null),t(Q!=null),t(T.Xa==Q.Xa),n(Q.X,0,T.X,0,1<<Q.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function Ie(T,Q,J,se){t(J!=null),t(se!=null);var de=J[0],me=se[0];return de==0&&(de=(T*me+Q/2)/Q),me==0&&(me=(Q*de+T/2)/T),0>=de||0>=me?0:(J[0]=de,se[0]=me,1)}function Ue(T,Q){return T+(1<<Q)-1>>>Q}function Ye(T,Q){return((4278255360&T)+(4278255360&Q)>>>0&4278255360)+((16711935&T)+(16711935&Q)>>>0&16711935)>>>0}function ye(T,Q){_[Q]=function(J,se,de,me,ge,xe,Ee){var ke;for(ke=0;ke<ge;++ke){var Me=_[T](xe[Ee+ke-1],de,me+ke);xe[Ee+ke]=Ye(J[se+ke],Me)}}}function Oe(){this.ud=this.hd=this.jd=0}function Re(T,Q){return((4278124286&(T^Q))>>>1)+(T&Q)>>>0}function qe(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function Ze(T,Q){return qe(T+(T-Q+.5>>1))}function lt(T,Q,J){return Math.abs(Q-J)-Math.abs(T-J)}function mt(T,Q,J,se,de,me,ge){for(se=me[ge-1],J=0;J<de;++J)me[ge+J]=se=Ye(T[Q+J],se)}function It(T,Q,J,se,de){var me;for(me=0;me<J;++me){var ge=T[Q+me],xe=ge>>8&255,Ee=16711935&(Ee=(Ee=16711935&ge)+((xe<<16)+xe));se[de+me]=(4278255360&ge)+Ee>>>0}}function Mt(T,Q){Q.jd=T>>0&255,Q.hd=T>>8&255,Q.ud=T>>16&255}function Pt(T,Q,J,se,de,me){var ge;for(ge=0;ge<se;++ge){var xe=Q[J+ge],Ee=xe>>>8,ke=xe,Me=255&(Me=(Me=xe>>>16)+((T.jd<<24>>24)*(Ee<<24>>24)>>>5));ke=255&(ke=(ke=ke+((T.hd<<24>>24)*(Ee<<24>>24)>>>5))+((T.ud<<24>>24)*(Me<<24>>24)>>>5)),de[me+ge]=(4278255360&xe)+(Me<<16)+ke}}function Qt(T,Q,J,se,de){_[Q]=function(me,ge,xe,Ee,ke,Me,at,tt,Ke){for(Ee=at;Ee<tt;++Ee)for(at=0;at<Ke;++at)ke[Me++]=de(xe[se(me[ge++])])},_[T]=function(me,ge,xe,Ee,ke,Me,at){var tt=8>>me.b,Ke=me.Ea,Bt=me.K[0],ht=me.w;if(8>tt)for(me=(1<<me.b)-1,ht=(1<<tt)-1;ge<xe;++ge){var Qe,Ve=0;for(Qe=0;Qe<Ke;++Qe)Qe&me||(Ve=se(Ee[ke++])),Me[at++]=de(Bt[Ve&ht]),Ve>>=tt}else _["VP8LMapColor"+J](Ee,ke,Bt,ht,Me,at,ge,xe,Ke)}}function yt(T,Q,J,se,de){for(J=Q+J;Q<J;){var me=T[Q++];se[de++]=me>>16&255,se[de++]=me>>8&255,se[de++]=me>>0&255}}function kr(T,Q,J,se,de){for(J=Q+J;Q<J;){var me=T[Q++];se[de++]=me>>16&255,se[de++]=me>>8&255,se[de++]=me>>0&255,se[de++]=me>>24&255}}function er(T,Q,J,se,de){for(J=Q+J;Q<J;){var me=(ge=T[Q++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;se[de++]=me,se[de++]=ge}}function an(T,Q,J,se,de){for(J=Q+J;Q<J;){var me=(ge=T[Q++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;se[de++]=me,se[de++]=ge}}function _r(T,Q,J,se,de){for(J=Q+J;Q<J;){var me=T[Q++];se[de++]=me>>0&255,se[de++]=me>>8&255,se[de++]=me>>16&255}}function Vr(T,Q,J,se,de,me){if(me==0)for(J=Q+J;Q<J;)pe(se,((me=T[Q++])[0]>>24|me[1]>>8&65280|me[2]<<8&16711680|me[3]<<24)>>>0),de+=32;else n(se,de,T,Q,J)}function jn(T,Q){_[Q][0]=_[T+"0"],_[Q][1]=_[T+"1"],_[Q][2]=_[T+"2"],_[Q][3]=_[T+"3"],_[Q][4]=_[T+"4"],_[Q][5]=_[T+"5"],_[Q][6]=_[T+"6"],_[Q][7]=_[T+"7"],_[Q][8]=_[T+"8"],_[Q][9]=_[T+"9"],_[Q][10]=_[T+"10"],_[Q][11]=_[T+"11"],_[Q][12]=_[T+"12"],_[Q][13]=_[T+"13"],_[Q][14]=_[T+"0"],_[Q][15]=_[T+"0"]}function Or(T){return T==zm||T==oA||T==Zu||T==Gh}function As(){this.eb=[],this.size=this.A=this.fb=0}function hn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function oa(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new As,this.f.kb=new hn,this.sd=null}function Ba(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function en(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mr(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function et(T,Q){var J=T.T,se=Q.ba.f.RGBA,de=se.eb,me=se.fb+T.ka*se.A,ge=ri[Q.ba.S],xe=T.y,Ee=T.O,ke=T.f,Me=T.N,at=T.ea,tt=T.W,Ke=Q.cc,Bt=Q.dc,ht=Q.Mc,Qe=Q.Nc,Ve=T.ka,_t=T.ka+T.T,jt=T.U,Nt=jt+1>>1;for(Ve==0?ge(xe,Ee,null,null,ke,Me,at,tt,ke,Me,at,tt,de,me,null,null,jt):(ge(Q.ec,Q.fc,xe,Ee,Ke,Bt,ht,Qe,ke,Me,at,tt,de,me-se.A,de,me,jt),++J);Ve+2<_t;Ve+=2)Ke=ke,Bt=Me,ht=at,Qe=tt,Me+=T.Rc,tt+=T.Rc,me+=2*se.A,ge(xe,(Ee+=2*T.fa)-T.fa,xe,Ee,Ke,Bt,ht,Qe,ke,Me,at,tt,de,me-se.A,de,me,jt);return Ee+=T.fa,T.j+_t<T.o?(n(Q.ec,Q.fc,xe,Ee,jt),n(Q.cc,Q.dc,ke,Me,Nt),n(Q.Mc,Q.Nc,at,tt,Nt),J--):1&_t||ge(xe,Ee,null,null,ke,Me,at,tt,ke,Me,at,tt,de,me+se.A,null,null,jt),J}function gt(T,Q,J){var se=T.F,de=[T.J];if(se!=null){var me=T.U,ge=Q.ba.S,xe=ge==gf||ge==Zu;Q=Q.ba.f.RGBA;var Ee=[0],ke=T.ka;Ee[0]=T.T,T.Kb&&(ke==0?--Ee[0]:(--ke,de[0]-=T.width),T.j+T.ka+T.T==T.o&&(Ee[0]=T.o-T.j-ke));var Me=Q.eb;ke=Q.fb+ke*Q.A,T=pn(se,de[0],T.width,me,Ee,Me,ke+(xe?0:3),Q.A),t(J==Ee),T&&Or(ge)&&il(Me,ke,xe,me,Ee,Q.A)}return 0}function Je(T){var Q=T.ma,J=Q.ba.S,se=11>J,de=J==$h||J==Vm||J==gf||J==Ju||J==12||Or(J);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!Xd(Q.Oa,T,de?11:12))return 0;if(de&&Or(J)&&Lt(),T.da)alert("todo:use_scaling");else{if(se){if(Q.Ib=mr,T.Kb){if(J=T.U+1>>1,Q.memory=s(T.U+2*J),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+T.U,Q.Mc=Q.cc,Q.Nc=Q.dc+J,Q.Ib=et,Lt()}}else alert("todo:EmitYUV");de&&(Q.Jb=gt,se&&Ge())}if(se&&!cE){for(T=0;256>T;++T)qk[T]=89858*(T-128)+Os>>ou,Km[T]=-22014*(T-128)+Os,J1[T]=-45773*(T-128),Ds[T]=113618*(T-128)+Os>>ou;for(T=uA;T<Qg;++T)Q=76283*(T-16)+Os>>ou,qm[T-uA]=Vn(Q,255),Z1[T-uA]=Vn(Q+8>>4,15);cE=1}return 1}function xt(T){var Q=T.ma,J=T.U,se=T.T;return t(!(1&T.ka)),0>=J||0>=se?0:(J=Q.Ib(T,Q),Q.Jb!=null&&Q.Jb(T,Q,J),Q.Dc+=J,1)}function wt(T){T.ma.memory=null}function bt(T,Q,J,se){return q(T,8)!=47?0:(Q[0]=q(T,14)+1,J[0]=q(T,14)+1,se[0]=q(T,1),q(T,3)!=0?0:!T.h)}function nr(T,Q){if(4>T)return T+1;var J=T-2>>1;return(2+(1&T)<<J)+q(Q,J)+1}function gr(T,Q){return 120<Q?Q-120:1<=(J=((J=td[Q-1])>>4)*T+(8-(15&J)))?J:1;var J}function Kr(T,Q,J){var se=W(J),de=T[Q+=255&se].g-8;return 0<de&&(re(J,J.u+8),se=W(J),Q+=T[Q].value,Q+=se&(1<<de)-1),re(J,J.u+T[Q].g),T[Q].value}function Yr(T,Q,J){return J.g+=T.g,J.value+=T.value<<Q>>>0,t(8>=J.g),T.g}function Gr(T,Q,J){var se=T.xc;return t((Q=se==0?0:T.vc[T.md*(J>>se)+(Q>>se)])<T.Wb),T.Ya[Q]}function he(T,Q,J,se){var de=T.ab,me=T.c*Q,ge=T.C;Q=ge+Q;var xe=J,Ee=se;for(se=T.Ta,J=T.Ua;0<de--;){var ke=T.gc[de],Me=ge,at=Q,tt=xe,Ke=Ee,Bt=(Ee=se,xe=J,ke.Ea);switch(t(Me<at),t(at<=ke.nc),ke.hc){case 2:Og(tt,Ke,(at-Me)*Bt,Ee,xe);break;case 0:var ht=Me,Qe=at,Ve=Ee,_t=xe,jt=(Zt=ke).Ea;ht==0&&(X1(tt,Ke,null,null,1,Ve,_t),mt(tt,Ke+1,0,0,jt-1,Ve,_t+1),Ke+=jt,_t+=jt,++ht);for(var Nt=1<<Zt.b,tr=Nt-1,Xt=Ue(jt,Zt.b),xr=Zt.K,Zt=Zt.w+(ht>>Zt.b)*Xt;ht<Qe;){var On=xr,zn=Zt,fn=1;for(Qm(tt,Ke,Ve,_t-jt,1,Ve,_t);fn<jt;){var ln=(fn&~tr)+Nt;ln>jt&&(ln=jt),(0,Wu[On[zn++]>>8&15])(tt,Ke+ +fn,Ve,_t+fn-jt,ln-fn,Ve,_t+fn),fn=ln}Ke+=jt,_t+=jt,++ht&tr||(Zt+=Xt)}at!=ke.nc&&n(Ee,xe-Bt,Ee,xe+(at-Me-1)*Bt,Bt);break;case 1:for(Bt=tt,Qe=Ke,jt=(tt=ke.Ea)-(_t=tt&~(Ve=(Ke=1<<ke.b)-1)),ht=Ue(tt,ke.b),Nt=ke.K,ke=ke.w+(Me>>ke.b)*ht;Me<at;){for(tr=Nt,Xt=ke,xr=new Oe,Zt=Qe+_t,On=Qe+tt;Qe<Zt;)Mt(tr[Xt++],xr),Zd(xr,Bt,Qe,Ke,Ee,xe),Qe+=Ke,xe+=Ke;Qe<On&&(Mt(tr[Xt++],xr),Zd(xr,Bt,Qe,jt,Ee,xe),Qe+=jt,xe+=jt),++Me&Ve||(ke+=ht)}break;case 3:if(tt==Ee&&Ke==xe&&0<ke.b){for(Qe=Ee,tt=Bt=xe+(at-Me)*Bt-(_t=(at-Me)*Ue(ke.Ea,ke.b)),Ke=Ee,Ve=xe,ht=[],_t=(jt=_t)-1;0<=_t;--_t)ht[_t]=Ke[Ve+_t];for(_t=jt-1;0<=_t;--_t)Qe[tt+_t]=ht[_t];jl(ke,Me,at,Ee,Bt,Ee,xe)}else jl(ke,Me,at,tt,Ke,Ee,xe)}xe=se,Ee=J}Ee!=J&&n(se,J,xe,Ee,me)}function Te(T,Q){var J=T.V,se=T.Ba+T.c*T.C,de=Q-T.C;if(t(Q<=T.l.o),t(16>=de),0<de){var me=T.l,ge=T.Ta,xe=T.Ua,Ee=me.width;if(he(T,de,J,se),de=xe=[xe],t((J=T.C)<(se=Q)),t(me.v<me.va),se>me.o&&(se=me.o),J<me.j){var ke=me.j-J;J=me.j,de[0]+=ke*Ee}if(J>=se?J=0:(de[0]+=4*me.v,me.ka=J-me.j,me.U=me.va-me.v,me.T=se-J,J=1),J){if(xe=xe[0],11>(J=T.ca).S){var Me=J.f.RGBA,at=(se=J.S,de=me.U,me=me.T,ke=Me.eb,Me.A),tt=me;for(Me=Me.fb+T.Ma*Me.A;0<tt--;){var Ke=ge,Bt=xe,ht=de,Qe=ke,Ve=Me;switch(se){case Di:ro(Ke,Bt,ht,Qe,Ve);break;case $h:bi(Ke,Bt,ht,Qe,Ve);break;case zm:bi(Ke,Bt,ht,Qe,Ve),il(Qe,Ve,0,ht,1,0);break;case nu:cc(Ke,Bt,ht,Qe,Ve);break;case Vm:Vr(Ke,Bt,ht,Qe,Ve,1);break;case oA:Vr(Ke,Bt,ht,Qe,Ve,1),il(Qe,Ve,0,ht,1,0);break;case gf:Vr(Ke,Bt,ht,Qe,Ve,0);break;case Zu:Vr(Ke,Bt,ht,Qe,Ve,0),il(Qe,Ve,1,ht,1,0);break;case Ju:eA(Ke,Bt,ht,Qe,Ve);break;case Gh:eA(Ke,Bt,ht,Qe,Ve),mn(Qe,Ve,ht,1,0);break;case Pg:No(Ke,Bt,ht,Qe,Ve);break;default:t(0)}xe+=Ee,Me+=at}T.Ma+=me}else alert("todo:EmitRescaledRowsYUVA");t(T.Ma<=J.height)}}T.C=Q,t(T.C<=T.i)}function Ce(T){var Q;if(0<T.ua)return 0;for(Q=0;Q<T.Wb;++Q){var J=T.Ya[Q].G,se=T.Ya[Q].H;if(0<J[1][se[1]+0].g||0<J[2][se[2]+0].g||0<J[3][se[3]+0].g)return 0}return 1}function we(T,Q,J,se,de,me){if(T.Z!=0){var ge=T.qd,xe=T.rd;for(t(su[T.Z]!=null);Q<J;++Q)su[T.Z](ge,xe,se,de,se,de,me),ge=se,xe=de,de+=me;T.qd=ge,T.rd=xe}}function Se(T,Q){var J=T.l.ma,se=J.Z==0||J.Z==1?T.l.j:T.C;if(se=T.C<se?se:T.C,t(Q<=T.l.o),Q>se){var de=T.l.width,me=J.ca,ge=J.tb+de*se,xe=T.V,Ee=T.Ba+T.c*se,ke=T.gc;t(T.ab==1),t(ke[0].hc==3),Jd(ke[0],se,Q,xe,Ee,me,ge),we(J,se,Q,me,ge,de)}T.C=T.Ma=Q}function je(T,Q,J,se,de,me,ge){var xe=T.$/se,Ee=T.$%se,ke=T.m,Me=T.s,at=J+T.$,tt=at;de=J+se*de;var Ke=J+se*me,Bt=280+Me.ua,ht=T.Pb?xe:16777216,Qe=0<Me.ua?Me.Wa:null,Ve=Me.wc,_t=at<Ke?Gr(Me,Ee,xe):null;t(T.C<me),t(Ke<=de);var jt=!1;e:for(;;){for(;jt||at<Ke;){var Nt=0;if(xe>=ht){var tr=at-J;t((ht=T).Pb),ht.wd=ht.m,ht.xd=tr,0<ht.s.ua&&Ne(ht.s.Wa,ht.s.vb),ht=xe+iE}if(Ee&Ve||(_t=Gr(Me,Ee,xe)),t(_t!=null),_t.Qb&&(Q[at]=_t.qb,jt=!0),!jt)if(ae(ke),_t.jc){Nt=ke,tr=Q;var Xt=at,xr=_t.pd[W(Nt)&Is-1];t(_t.jc),256>xr.g?(re(Nt,Nt.u+xr.g),tr[Xt]=xr.value,Nt=0):(re(Nt,Nt.u+xr.g-256),t(256<=xr.value),Nt=xr.value),Nt==0&&(jt=!0)}else Nt=Kr(_t.G[0],_t.H[0],ke);if(ke.h)break;if(jt||256>Nt){if(!jt)if(_t.nd)Q[at]=(_t.qb|Nt<<8)>>>0;else{if(ae(ke),jt=Kr(_t.G[1],_t.H[1],ke),ae(ke),tr=Kr(_t.G[2],_t.H[2],ke),Xt=Kr(_t.G[3],_t.H[3],ke),ke.h)break;Q[at]=(Xt<<24|jt<<16|Nt<<8|tr)>>>0}if(jt=!1,++at,++Ee>=se&&(Ee=0,++xe,ge!=null&&xe<=me&&!(xe%16)&&ge(T,xe),Qe!=null))for(;tt<at;)Nt=Q[tt++],Qe.X[(506832829*Nt&4294967295)>>>Qe.Mb]=Nt}else if(280>Nt){if(Nt=nr(Nt-256,ke),tr=Kr(_t.G[4],_t.H[4],ke),ae(ke),tr=gr(se,tr=nr(tr,ke)),ke.h)break;if(at-J<tr||de-at<Nt)break e;for(Xt=0;Xt<Nt;++Xt)Q[at+Xt]=Q[at+Xt-tr];for(at+=Nt,Ee+=Nt;Ee>=se;)Ee-=se,++xe,ge!=null&&xe<=me&&!(xe%16)&&ge(T,xe);if(t(at<=de),Ee&Ve&&(_t=Gr(Me,Ee,xe)),Qe!=null)for(;tt<at;)Nt=Q[tt++],Qe.X[(506832829*Nt&4294967295)>>>Qe.Mb]=Nt}else{if(!(Nt<Bt))break e;for(jt=Nt-280,t(Qe!=null);tt<at;)Nt=Q[tt++],Qe.X[(506832829*Nt&4294967295)>>>Qe.Mb]=Nt;Nt=at,t(!(jt>>>(tr=Qe).Xa)),Q[Nt]=tr.X[jt],jt=!0}jt||t(ke.h==Z(ke))}if(T.Pb&&ke.h&&at<de)t(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&Ne(T.s.vb,T.s.Wa);else{if(ke.h)break e;ge!=null&&ge(T,xe>me?me:xe),T.a=0,T.$=at-J}return 1}return T.a=3,0}function Xe(T){t(T!=null),T.vc=null,T.yc=null,T.Ya=null;var Q=T.Wa;Q!=null&&(Q.X=null),T.vb=null,t(T!=null)}function dt(){var T=new Uh;return T==null?null:(T.a=0,T.xb=Kh,jn("Predictor","VP8LPredictors"),jn("Predictor","VP8LPredictors_C"),jn("PredictorAdd","VP8LPredictorsAdd"),jn("PredictorAdd","VP8LPredictorsAdd_C"),Og=It,Zd=Pt,ro=yt,bi=kr,eA=er,No=an,cc=_r,_.VP8LMapColor32b=ei,_.VP8LMapColor8b=Hm,T)}function $e(T,Q,J,se,de){var me=1,ge=[T],xe=[Q],Ee=se.m,ke=se.s,Me=null,at=0;e:for(;;){if(J)for(;me&&q(Ee,1);){var tt=ge,Ke=xe,Bt=se,ht=1,Qe=Bt.m,Ve=Bt.gc[Bt.ab],_t=q(Qe,2);if(Bt.Oc&1<<_t)me=0;else{switch(Bt.Oc|=1<<_t,Ve.hc=_t,Ve.Ea=tt[0],Ve.nc=Ke[0],Ve.K=[null],++Bt.ab,t(4>=Bt.ab),_t){case 0:case 1:Ve.b=q(Qe,3)+2,ht=$e(Ue(Ve.Ea,Ve.b),Ue(Ve.nc,Ve.b),0,Bt,Ve.K),Ve.K=Ve.K[0];break;case 3:var jt,Nt=q(Qe,8)+1,tr=16<Nt?0:4<Nt?1:2<Nt?2:3;if(tt[0]=Ue(Ve.Ea,tr),Ve.b=tr,jt=ht=$e(Nt,1,0,Bt,Ve.K)){var Xt,xr=Nt,Zt=Ve,On=1<<(8>>Zt.b),zn=s(On);if(zn==null)jt=0;else{var fn=Zt.K[0],ln=Zt.w;for(zn[0]=Zt.K[0][0],Xt=1;Xt<1*xr;++Xt)zn[Xt]=Ye(fn[ln+Xt],zn[Xt-1]);for(;Xt<4*On;++Xt)zn[Xt]=0;Zt.K[0]=null,Zt.K[0]=zn,jt=1}}ht=jt;break;case 2:break;default:t(0)}me=ht}}if(ge=ge[0],xe=xe[0],me&&q(Ee,1)&&!(me=1<=(at=q(Ee,4))&&11>=at)){se.a=3;break e}var ta;if(ta=me)t:{var $n,Wr,ca,Nr=se,Lr=ge,Fn=xe,Dn=at,ni=J,Ps=Nr.m,rs=Nr.s,ns=[null],xs=1,Dl=0,Gn=vf[Dn];r:for(;;){if(ni&&q(Ps,1)){var vs=q(Ps,3)+2,Ac=Ue(Lr,vs),dA=Ue(Fn,vs),wf=Ac*dA;if(!$e(Ac,dA,0,Nr,ns))break r;for(ns=ns[0],rs.xc=vs,$n=0;$n<wf;++$n){var AA=ns[$n]>>8&65535;ns[$n]=AA,AA>=xs&&(xs=AA+1)}}if(Ps.h)break r;for(Wr=0;5>Wr;++Wr){var Ta=ol[Wr];!Wr&&0<Dn&&(Ta+=1<<Dn),Dl<Ta&&(Dl=Ta)}var Wm=i(xs*Gn,I),Hg=xs,ao=i(Hg,R);if(ao==null)var Ra=null;else t(65536>=Hg),Ra=ao;var Ef=s(Dl);if(Ra==null||Ef==null||Wm==null){Nr.a=1;break r}var fA=Wm;for($n=ca=0;$n<xs;++$n){var Bo=Ra[$n],hA=Bo.G,To=Bo.H,Xm=0,Wh=1,Vg=0;for(Wr=0;5>Wr;++Wr){Ta=ol[Wr],hA[Wr]=fA,To[Wr]=ca,!Wr&&0<Dn&&(Ta+=1<<Dn);a:{var Ym,zg=Ta,Jm=Nr,Xh=Ef,AE=fA,fE=ca,Zm=0,sd=Jm.m,Xk=q(sd,1);if(a(Xh,0,0,zg),Xk){var hE=q(sd,1)+1,mE=q(sd,1),eb=q(sd,mE==0?1:8);Xh[eb]=1,hE==2&&(Xh[eb=q(sd,8)]=1);var Yh=1}else{var tb=s(19),rb=q(sd,4)+4;if(19<rb){Jm.a=3;var ep=0;break a}for(Ym=0;Ym<rb;++Ym)tb[ed[Ym]]=q(sd,3);var $g=void 0,Jh=void 0,pE=Jm,gE=tb,id=zg,tp=Xh,Gg=0,fc=pE.m,Zh=8,nb=i(128,I);n:for(;D(nb,0,7,gE,19);){if(q(fc,1)){var xE=2+2*q(fc,3);if(($g=2+q(fc,xE))>id)break n}else $g=id;for(Jh=0;Jh<id&&$g--;){ae(fc);var ab=nb[0+(127&W(fc))];re(fc,fc.u+ab.g);var Cf=ab.value;if(16>Cf)tp[Jh++]=Cf,Cf!=0&&(Zh=Cf);else{var vE=Cf==16,sb=Cf-16,ib=Ol[sb],ob=q(fc,Rg[sb])+ib;if(Jh+ob>id)break n;for(var bE=vE?Zh:0;0<ob--;)tp[Jh++]=bE}}Gg=1;break n}Gg||(pE.a=3),Yh=Gg}(Yh=Yh&&!sd.h)&&(Zm=D(AE,fE,8,Xh,zg)),Yh&&Zm!=0?ep=Zm:(Jm.a=3,ep=0)}if(ep==0)break r;if(Wh&&xf[Wr]==1&&(Wh=fA[ca].g==0),Xm+=fA[ca].g,ca+=ep,3>=Wr){var _f,Kg=Ef[0];for(_f=1;_f<Ta;++_f)Ef[_f]>Kg&&(Kg=Ef[_f]);Vg+=Kg}}if(Bo.nd=Wh,Bo.Qb=0,Wh&&(Bo.qb=(hA[3][To[3]+0].value<<24|hA[1][To[1]+0].value<<16|hA[2][To[2]+0].value)>>>0,Xm==0&&256>hA[0][To[0]+0].value&&(Bo.Qb=1,Bo.qb+=hA[0][To[0]+0].value<<8)),Bo.jc=!Bo.Qb&&6>Vg,Bo.jc){var rp,od=Bo;for(rp=0;rp<Is;++rp){var lu=rp,ld=od.pd[lu],np=od.G[0][od.H[0]+lu];256<=np.value?(ld.g=np.g+256,ld.value=np.value):(ld.g=0,ld.value=0,lu>>=Yr(np,8,ld),lu>>=Yr(od.G[1][od.H[1]+lu],16,ld),lu>>=Yr(od.G[2][od.H[2]+lu],0,ld),Yr(od.G[3][od.H[3]+lu],24,ld))}}}rs.vc=ns,rs.Wb=xs,rs.Ya=Ra,rs.yc=Wm,ta=1;break t}ta=0}if(!(me=ta)){se.a=3;break e}if(0<at){if(ke.ua=1<<at,!De(ke.Wa,at)){se.a=1,me=0;break e}}else ke.ua=0;var ap=se,lb=ge,yE=xe,cb=ap.s,ub=cb.xc;if(ap.c=lb,ap.i=yE,cb.md=Ue(lb,ub),cb.wc=ub==0?-1:(1<<ub)-1,J){se.xb=lE;break e}if((Me=s(ge*xe))==null){se.a=1,me=0;break e}me=(me=je(se,Me,0,ge,xe,xe,null))&&!Ee.h;break e}return me?(de!=null?de[0]=Me:(t(Me==null),t(J)),se.$=0,J||Xe(ke)):Xe(ke),me}function rt(T,Q){var J=T.c*T.i,se=J+Q+16*Q;return t(T.c<=Q),T.V=s(se),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+J+Q,1)}function st(T,Q){var J=T.C,se=Q-J,de=T.V,me=T.Ba+T.c*J;for(t(Q<=T.l.o);0<se;){var ge=16<se?16:se,xe=T.l.ma,Ee=T.l.width,ke=Ee*ge,Me=xe.ca,at=xe.tb+Ee*J,tt=T.Ta,Ke=T.Ua;he(T,ge,de,me),va(tt,Ke,Me,at,ke),we(xe,J,J+ge,Me,at,Ee),se-=ge,de+=ge*T.c,J+=ge}t(J==Q),T.C=T.Ma=Q}function Ft(){this.ub=this.yd=this.td=this.Rb=0}function Vt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Yt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var T=[];return function Q(J,se,de){for(var me=de[se],ge=0;ge<me&&(J.push(de.length>se+1?[]:0),!(de.length<se+1));ge++)Q(J[ge],se+1,de)}(T,0,[3,11]),T}()}function zt(){this.jb=s(3),this.Wc=o([4,8],Ht),this.Xc=o([4,17],Ht)}function Sr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function sn(){this.ld=this.La=this.dd=this.tc=0}function on(){this.Na=this.la=0}function An(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function fs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bo(){this.uc=this.M=this.Nb=0,this.wa=Array(new sn),this.Y=0,this.ya=Array(new fs),this.aa=0,this.l=new js}function hs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Js(){this.cb=this.a=0,this.sc="",this.m=new ne,this.Od=new Ft,this.Kc=new Vt,this.ed=new Sr,this.Qa=new Yt,this.Ic=this.$c=this.Aa=0,this.D=new bo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ne),this.ia=0,this.pb=i(4,An),this.Pa=new zt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new hs),this.Hd=0,this.rb=Array(new on),this.sb=0,this.wa=Array(new sn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new fs),this.L=this.aa=0,this.gd=o([4,2],sn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function js(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function pi(){var T=new Js;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,Fs||(Fs=Ph)),T}function xa(T,Q,J){return T.a==0&&(T.a=Q,T.sc=J,T.cb=0),0}function Zs(T,Q,J){return 3<=J&&T[Q+0]==157&&T[Q+1]==1&&T[Q+2]==42}function Vd(T,Q){if(T==null)return 0;if(T.a=0,T.sc="OK",Q==null)return xa(T,2,"null VP8Io passed to VP8GetHeaders()");var J=Q.data,se=Q.w,de=Q.ha;if(4>de)return xa(T,7,"Truncated header.");var me=J[se+0]|J[se+1]<<8|J[se+2]<<16,ge=T.Od;if(ge.Rb=!(1&me),ge.td=me>>1&7,ge.yd=me>>4&1,ge.ub=me>>5,3<ge.td)return xa(T,3,"Incorrect keyframe parameters.");if(!ge.yd)return xa(T,4,"Frame not displayable.");se+=3,de-=3;var xe=T.Kc;if(ge.Rb){if(7>de)return xa(T,7,"cannot parse picture header");if(!Zs(J,se,de))return xa(T,3,"Bad code word");xe.c=16383&(J[se+4]<<8|J[se+3]),xe.Td=J[se+4]>>6,xe.i=16383&(J[se+6]<<8|J[se+5]),xe.Ud=J[se+6]>>6,se+=7,de-=7,T.za=xe.c+15>>4,T.Ub=xe.i+15>>4,Q.width=xe.c,Q.height=xe.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,a((me=T.Pa).jb,0,255,me.jb.length),t((me=T.Qa)!=null),me.Cb=0,me.Bb=0,me.Fb=1,a(me.Zb,0,0,me.Zb.length),a(me.Lb,0,0,me.Lb)}if(ge.ub>de)return xa(T,7,"bad partition length");Y(me=T.m,J,se,ge.ub),se+=ge.ub,de-=ge.ub,ge.Rb&&(xe.Ld=oe(me),xe.Kd=oe(me)),xe=T.Qa;var Ee,ke=T.Pa;if(t(me!=null),t(xe!=null),xe.Cb=oe(me),xe.Cb){if(xe.Bb=oe(me),oe(me)){for(xe.Fb=oe(me),Ee=0;4>Ee;++Ee)xe.Zb[Ee]=oe(me)?X(me,7):0;for(Ee=0;4>Ee;++Ee)xe.Lb[Ee]=oe(me)?X(me,6):0}if(xe.Bb)for(Ee=0;3>Ee;++Ee)ke.jb[Ee]=oe(me)?H(me,8):255}else xe.Bb=0;if(me.Ka)return xa(T,3,"cannot parse segment header");if((xe=T.ed).zd=oe(me),xe.Tb=H(me,6),xe.wb=H(me,3),xe.Pc=oe(me),xe.Pc&&oe(me)){for(ke=0;4>ke;++ke)oe(me)&&(xe.vd[ke]=X(me,6));for(ke=0;4>ke;++ke)oe(me)&&(xe.od[ke]=X(me,6))}if(T.L=xe.Tb==0?0:xe.zd?1:2,me.Ka)return xa(T,3,"cannot parse filter header");var Me=de;if(de=Ee=se,se=Ee+Me,xe=Me,T.Xb=(1<<H(T.m,2))-1,Me<3*(ke=T.Xb))J=7;else{for(Ee+=3*ke,xe-=3*ke,Me=0;Me<ke;++Me){var at=J[de+0]|J[de+1]<<8|J[de+2]<<16;at>xe&&(at=xe),Y(T.Jc[+Me],J,Ee,at),Ee+=at,xe-=at,de+=3}Y(T.Jc[+ke],J,Ee,xe),J=Ee<se?0:5}if(J!=0)return xa(T,J,"cannot parse partitions");for(J=H(Ee=T.m,7),de=oe(Ee)?X(Ee,4):0,se=oe(Ee)?X(Ee,4):0,xe=oe(Ee)?X(Ee,4):0,ke=oe(Ee)?X(Ee,4):0,Ee=oe(Ee)?X(Ee,4):0,Me=T.Qa,at=0;4>at;++at){if(Me.Cb){var tt=Me.Zb[at];Me.Fb||(tt+=J)}else{if(0<at){T.pb[at]=T.pb[0];continue}tt=J}var Ke=T.pb[at];Ke.Sc[0]=$m[Vn(tt+de,127)],Ke.Sc[1]=Gm[Vn(tt+0,127)],Ke.Eb[0]=2*$m[Vn(tt+se,127)],Ke.Eb[1]=101581*Gm[Vn(tt+xe,127)]>>16,8>Ke.Eb[1]&&(Ke.Eb[1]=8),Ke.Qc[0]=$m[Vn(tt+ke,117)],Ke.Qc[1]=Gm[Vn(tt+Ee,127)],Ke.lc=tt+Ee}if(!ge.Rb)return xa(T,4,"Not a key frame.");for(oe(me),ge=T.Pa,J=0;4>J;++J){for(de=0;8>de;++de)for(se=0;3>se;++se)for(xe=0;11>xe;++xe)ke=le(me,bf[J][de][se][xe])?H(me,8):au[J][de][se][xe],ge.Wc[J][de].Yb[se][xe]=ke;for(de=0;17>de;++de)ge.Xc[J][de]=ge.Wc[J][oE[de]]}return T.kc=oe(me),T.kc&&(T.Bd=H(me,8)),T.cb=1}function Ph(T,Q,J,se,de,me,ge){var xe=Q[de].Yb[J];for(J=0;16>de;++de){if(!le(T,xe[J+0]))return de;for(;!le(T,xe[J+1]);)if(xe=Q[++de].Yb[0],J=0,de==16)return 16;var Ee=Q[de+1].Yb;if(le(T,xe[J+2])){var ke=T,Me=0;if(le(ke,(tt=xe)[(at=J)+3]))if(le(ke,tt[at+6])){for(xe=0,at=2*(Me=le(ke,tt[at+8]))+(tt=le(ke,tt[at+9+Me])),Me=0,tt=Ka[at];tt[xe];++xe)Me+=Me+le(ke,tt[xe]);Me+=3+(8<<at)}else le(ke,tt[at+7])?(Me=7+2*le(ke,165),Me+=le(ke,145)):Me=5+le(ke,159);else Me=le(ke,tt[at+4])?3+le(ke,tt[at+5]):2;xe=Ee[2]}else Me=1,xe=Ee[1];Ee=ge+Mn[de],0>(ke=T).b&&ce(ke);var at,tt=ke.b,Ke=(at=ke.Ca>>1)-(ke.I>>tt)>>31;--ke.b,ke.Ca+=Ke,ke.Ca|=1,ke.I-=(at+1&Ke)<<tt,me[Ee]=((Me^Ke)-Ke)*se[(0<de)+0]}return 16}function Vc(T){var Q=T.rb[T.sb-1];Q.la=0,Q.Na=0,a(T.zc,0,0,T.zc.length),T.ja=0}function nf(T,Q){if(T==null)return 0;if(Q==null)return xa(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!Vd(T,Q))return 0;if(t(T.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(T.L=0);var J=ad[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=Q.v-J>>4,T.zb=Q.j-J>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=Q.o+15+J>>4,T.Hb=Q.va+15+J>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var se=T.ed;for(J=0;4>J;++J){var de;if(T.Qa.Cb){var me=T.Qa.Lb[J];T.Qa.Fb||(me+=se.Tb)}else me=se.Tb;for(de=0;1>=de;++de){var ge=T.gd[J][de],xe=me;if(se.Pc&&(xe+=se.vd[0],de&&(xe+=se.od[0])),0<(xe=0>xe?0:63<xe?63:xe)){var Ee=xe;0<se.wb&&(Ee=4<se.wb?Ee>>2:Ee>>1)>9-se.wb&&(Ee=9-se.wb),1>Ee&&(Ee=1),ge.dd=Ee,ge.tc=2*xe+Ee,ge.ld=40<=xe?2:15<=xe?1:0}else ge.tc=0;ge.La=de}}}J=0}else xa(T,6,"Frame setup failed"),J=T.a;if(J=J==0){if(J){T.$c=0,0<T.Aa||(T.Ic=uE);e:{J=T.Ic,se=4*(Ee=T.za);var ke=32*Ee,Me=Ee+1,at=0<T.L?Ee*(0<T.Aa?2:1):0,tt=(T.Aa==2?2:1)*Ee;if((ge=se+832+(de=3*(16*J+ad[T.L])/2*ke)+(me=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=ge)J=0;else{if(ge>T.Vb){if(T.Vb=0,T.Ec=s(ge),T.Fc=0,T.Ec==null){J=xa(T,1,"no memory during frame initialization.");break e}T.Vb=ge}ge=T.Ec,xe=T.Fc,T.Ac=ge,T.Bc=xe,xe+=se,T.Gd=i(ke,hs),T.Hd=0,T.rb=i(Me+1,on),T.sb=1,T.wa=at?i(at,sn):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=Ee),t(!0),T.oc=ge,T.pc=xe,xe+=832,T.ya=i(tt,fs),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=Ee),T.R=16*Ee,T.B=8*Ee,Ee=(ke=ad[T.L])*T.R,ke=ke/2*T.B,T.sa=ge,T.ta=xe+Ee,T.qa=T.sa,T.ra=T.ta+16*J*T.R+ke,T.Ha=T.qa,T.Ia=T.ra+8*J*T.B+ke,T.$c=0,xe+=de,T.mb=me?ge:null,T.nb=me?xe:null,t(xe+me<=T.Fc+T.Vb),Vc(T),a(T.Ac,T.Bc,0,se),J=1}}if(J){if(Q.ka=0,Q.y=T.sa,Q.O=T.ta,Q.f=T.qa,Q.N=T.ra,Q.ea=T.Ha,Q.Vd=T.Ia,Q.fa=T.R,Q.Rc=T.B,Q.F=null,Q.J=0,!Yu){for(J=-255;255>=J;++J)ts[255+J]=0>J?-J:J;for(J=-1020;1020>=J;++J)Il[1020+J]=-128>J?-128:127<J?127:J;for(J=-112;112>=J;++J)sA[112+J]=-16>J?-16:15<J?15:J;for(J=-255;510>=J;++J)iA[255+J]=0>J?0:255<J?255:J;Yu=1}tu=yo,uc=$c,dc=El,gs=Hn,ko=Gc,$a=zc,ff=Xc,ru=oc,Vh=Kd,tA=cf,rA=Gd,nA=zu,hf=$u,zh=Yc,aA=sl,Xu=Fi,mf=ps,Ga=Mh,no[0]=ji,no[1]=Rh,no[2]=Sl,no[3]=Lh,no[4]=wo,no[5]=Nl,no[6]=to,no[7]=Eo,no[8]=ic,no[9]=Kc,rd[0]=Cl,rd[1]=sf,rd[2]=nc,rd[3]=$d,rd[4]=la,rd[5]=sc,rd[6]=_l,ll[0]=kl,ll[1]=af,ll[2]=of,ll[3]=Co,ll[4]=vn,ll[5]=ms,ll[6]=qc,J=1}else J=0}J&&(J=function(Ke,Bt){for(Ke.M=0;Ke.M<Ke.Va;++Ke.M){var ht,Qe=Ke.Jc[Ke.M&Ke.Xb],Ve=Ke.m,_t=Ke;for(ht=0;ht<_t.za;++ht){var jt=Ve,Nt=_t,tr=Nt.Ac,Xt=Nt.Bc+4*ht,xr=Nt.zc,Zt=Nt.ya[Nt.aa+ht];if(Nt.Qa.Bb?Zt.$b=le(jt,Nt.Pa.jb[0])?2+le(jt,Nt.Pa.jb[2]):le(jt,Nt.Pa.jb[1]):Zt.$b=0,Nt.kc&&(Zt.Ad=le(jt,Nt.Bd)),Zt.Za=!le(jt,145)+0,Zt.Za){var On=Zt.Ob,zn=0;for(Nt=0;4>Nt;++Nt){var fn,ln=xr[0+Nt];for(fn=0;4>fn;++fn){ln=Y1[tr[Xt+fn]][ln];for(var ta=lA[le(jt,ln[0])];0<ta;)ta=lA[2*ta+le(jt,ln[ta])];ln=-ta,tr[Xt+fn]=ln}n(On,zn,tr,Xt,4),zn+=4,xr[0+Nt]=ln}}else ln=le(jt,156)?le(jt,128)?1:3:le(jt,163)?2:0,Zt.Ob[0]=ln,a(tr,Xt,ln,4),a(xr,0,ln,4);Zt.Dd=le(jt,142)?le(jt,114)?le(jt,183)?1:3:2:0}if(_t.m.Ka)return xa(Ke,7,"Premature end-of-partition0 encountered.");for(;Ke.ja<Ke.za;++Ke.ja){if(_t=Qe,jt=(Ve=Ke).rb[Ve.sb-1],tr=Ve.rb[Ve.sb+Ve.ja],ht=Ve.ya[Ve.aa+Ve.ja],Xt=Ve.kc?ht.Ad:0)jt.la=tr.la=0,ht.Za||(jt.Na=tr.Na=0),ht.Hc=0,ht.Gc=0,ht.ia=0;else{var $n,Wr;if(jt=tr,tr=_t,Xt=Ve.Pa.Xc,xr=Ve.ya[Ve.aa+Ve.ja],Zt=Ve.pb[xr.$b],Nt=xr.ad,On=0,zn=Ve.rb[Ve.sb-1],ln=fn=0,a(Nt,On,0,384),xr.Za)var ca=0,Nr=Xt[3];else{ta=s(16);var Lr=jt.Na+zn.Na;if(Lr=Fs(tr,Xt[1],Lr,Zt.Eb,0,ta,0),jt.Na=zn.Na=(0<Lr)+0,1<Lr)tu(ta,0,Nt,On);else{var Fn=ta[0]+3>>3;for(ta=0;256>ta;ta+=16)Nt[On+ta]=Fn}ca=1,Nr=Xt[0]}var Dn=15&jt.la,ni=15&zn.la;for(ta=0;4>ta;++ta){var Ps=1&ni;for(Fn=Wr=0;4>Fn;++Fn)Dn=Dn>>1|(Ps=(Lr=Fs(tr,Nr,Lr=Ps+(1&Dn),Zt.Sc,ca,Nt,On))>ca)<<7,Wr=Wr<<2|(3<Lr?3:1<Lr?2:Nt[On+0]!=0),On+=16;Dn>>=4,ni=ni>>1|Ps<<7,fn=(fn<<8|Wr)>>>0}for(Nr=Dn,ca=ni>>4,$n=0;4>$n;$n+=2){for(Wr=0,Dn=jt.la>>4+$n,ni=zn.la>>4+$n,ta=0;2>ta;++ta){for(Ps=1&ni,Fn=0;2>Fn;++Fn)Lr=Ps+(1&Dn),Dn=Dn>>1|(Ps=0<(Lr=Fs(tr,Xt[2],Lr,Zt.Qc,0,Nt,On)))<<3,Wr=Wr<<2|(3<Lr?3:1<Lr?2:Nt[On+0]!=0),On+=16;Dn>>=2,ni=ni>>1|Ps<<5}ln|=Wr<<4*$n,Nr|=Dn<<4<<$n,ca|=(240&ni)<<$n}jt.la=Nr,zn.la=ca,xr.Hc=fn,xr.Gc=ln,xr.ia=43690&ln?0:Zt.ia,Xt=!(fn|ln)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[ht.$b][ht.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Xt),_t.Ka)return xa(Ke,7,"Premature end-of-file encountered.")}if(Vc(Ke),Ve=Bt,_t=1,ht=(Qe=Ke).D,jt=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)e:{if(ht.M=Qe.M,ht.uc=jt,_o(Qe,ht),_t=1,ht=(Wr=Qe.D).Nb,jt=(ln=ad[Qe.L])*Qe.R,tr=ln/2*Qe.B,ta=16*ht*Qe.R,Fn=8*ht*Qe.B,Xt=Qe.sa,xr=Qe.ta-jt+ta,Zt=Qe.qa,Nt=Qe.ra-tr+Fn,On=Qe.Ha,zn=Qe.Ia-tr+Fn,ni=(Dn=Wr.M)==0,fn=Dn>=Qe.Va-1,Qe.Aa==2&&_o(Qe,Wr),Wr.uc)for(Ps=(Lr=Qe).D.M,t(Lr.D.uc),Wr=Lr.yb;Wr<Lr.Hb;++Wr){ca=Wr,Nr=Ps;var rs=(ns=(Ta=Lr).D).Nb;$n=Ta.R;var ns=ns.wa[ns.Y+ca],xs=Ta.sa,Dl=Ta.ta+16*rs*$n+16*ca,Gn=ns.dd,vs=ns.tc;if(vs!=0)if(t(3<=vs),Ta.L==1)0<ca&&Xu(xs,Dl,$n,vs+4),ns.La&&Ga(xs,Dl,$n,vs),0<Nr&&aA(xs,Dl,$n,vs+4),ns.La&&mf(xs,Dl,$n,vs);else{var Ac=Ta.B,dA=Ta.qa,wf=Ta.ra+8*rs*Ac+8*ca,AA=Ta.Ha,Ta=Ta.Ia+8*rs*Ac+8*ca;rs=ns.ld,0<ca&&(ru(xs,Dl,$n,vs+4,Gn,rs),tA(dA,wf,AA,Ta,Ac,vs+4,Gn,rs)),ns.La&&(nA(xs,Dl,$n,vs,Gn,rs),zh(dA,wf,AA,Ta,Ac,vs,Gn,rs)),0<Nr&&(ff(xs,Dl,$n,vs+4,Gn,rs),Vh(dA,wf,AA,Ta,Ac,vs+4,Gn,rs)),ns.La&&(rA(xs,Dl,$n,vs,Gn,rs),hf(dA,wf,AA,Ta,Ac,vs,Gn,rs))}}if(Qe.ia&&alert("todo:DitherRow"),Ve.put!=null){if(Wr=16*Dn,Dn=16*(Dn+1),ni?(Ve.y=Qe.sa,Ve.O=Qe.ta+ta,Ve.f=Qe.qa,Ve.N=Qe.ra+Fn,Ve.ea=Qe.Ha,Ve.W=Qe.Ia+Fn):(Wr-=ln,Ve.y=Xt,Ve.O=xr,Ve.f=Zt,Ve.N=Nt,Ve.ea=On,Ve.W=zn),fn||(Dn-=ln),Dn>Ve.o&&(Dn=Ve.o),Ve.F=null,Ve.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&Wr<Dn&&(Ve.J=Wd(Qe,Ve,Wr,Dn-Wr),Ve.F=Qe.mb,Ve.F==null&&Ve.F.length==0)){_t=xa(Qe,3,"Could not decode alpha data.");break e}Wr<Ve.j&&(ln=Ve.j-Wr,Wr=Ve.j,t(!(1&ln)),Ve.O+=Qe.R*ln,Ve.N+=Qe.B*(ln>>1),Ve.W+=Qe.B*(ln>>1),Ve.F!=null&&(Ve.J+=Ve.width*ln)),Wr<Dn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=Wr-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Dn-Wr,_t=Ve.put(Ve))}ht+1!=Qe.Ic||fn||(n(Qe.sa,Qe.ta-jt,Xt,xr+16*Qe.R,jt),n(Qe.qa,Qe.ra-tr,Zt,Nt+8*Qe.B,tr),n(Qe.Ha,Qe.Ia-tr,On,zn+8*Qe.B,tr))}if(!_t)return xa(Ke,6,"Output aborted.")}return 1}(T,Q)),Q.bc!=null&&Q.bc(Q),J&=1}return J?(T.cb=0,J):0}function gi(T,Q,J,se,de){de=T[Q+J+32*se]+(de>>3),T[Q+J+32*se]=-256&de?0>de?0:255:de}function zd(T,Q,J,se,de,me){gi(T,Q,0,J,se+de),gi(T,Q,1,J,se+me),gi(T,Q,2,J,se-me),gi(T,Q,3,J,se-de)}function In(T){return(20091*T>>16)+T}function xi(T,Q,J,se){var de,me=0,ge=s(16);for(de=0;4>de;++de){var xe=T[Q+0]+T[Q+8],Ee=T[Q+0]-T[Q+8],ke=(35468*T[Q+4]>>16)-In(T[Q+12]),Me=In(T[Q+4])+(35468*T[Q+12]>>16);ge[me+0]=xe+Me,ge[me+1]=Ee+ke,ge[me+2]=Ee-ke,ge[me+3]=xe-Me,me+=4,Q++}for(de=me=0;4>de;++de)xe=(T=ge[me+0]+4)+ge[me+8],Ee=T-ge[me+8],ke=(35468*ge[me+4]>>16)-In(ge[me+12]),gi(J,se,0,0,xe+(Me=In(ge[me+4])+(35468*ge[me+12]>>16))),gi(J,se,1,0,Ee+ke),gi(J,se,2,0,Ee-ke),gi(J,se,3,0,xe-Me),me++,se+=32}function zc(T,Q,J,se){var de=T[Q+0]+4,me=35468*T[Q+4]>>16,ge=In(T[Q+4]),xe=35468*T[Q+1]>>16;zd(J,se,0,de+ge,T=In(T[Q+1]),xe),zd(J,se,1,de+me,T,xe),zd(J,se,2,de-me,T,xe),zd(J,se,3,de-ge,T,xe)}function $c(T,Q,J,se,de){xi(T,Q,J,se),de&&xi(T,Q+16,J,se+4)}function El(T,Q,J,se){uc(T,Q+0,J,se,1),uc(T,Q+32,J,se+128,1)}function Hn(T,Q,J,se){var de;for(T=T[Q+0]+4,de=0;4>de;++de)for(Q=0;4>Q;++Q)gi(J,se,Q,de,T)}function Gc(T,Q,J,se){T[Q+0]&&gs(T,Q+0,J,se),T[Q+16]&&gs(T,Q+16,J,se+4),T[Q+32]&&gs(T,Q+32,J,se+128),T[Q+48]&&gs(T,Q+48,J,se+128+4)}function yo(T,Q,J,se){var de,me=s(16);for(de=0;4>de;++de){var ge=T[Q+0+de]+T[Q+12+de],xe=T[Q+4+de]+T[Q+8+de],Ee=T[Q+4+de]-T[Q+8+de],ke=T[Q+0+de]-T[Q+12+de];me[0+de]=ge+xe,me[8+de]=ge-xe,me[4+de]=ke+Ee,me[12+de]=ke-Ee}for(de=0;4>de;++de)ge=(T=me[0+4*de]+3)+me[3+4*de],xe=me[1+4*de]+me[2+4*de],Ee=me[1+4*de]-me[2+4*de],ke=T-me[3+4*de],J[se+0]=ge+xe>>3,J[se+16]=ke+Ee>>3,J[se+32]=ge-xe>>3,J[se+48]=ke-Ee>>3,se+=64}function rc(T,Q,J){var se,de=Q-32,me=ti,ge=255-T[de-1];for(se=0;se<J;++se){var xe,Ee=me,ke=ge+T[Q-1];for(xe=0;xe<J;++xe)T[Q+xe]=Ee[ke+T[de+xe]];Q+=32}}function Rh(T,Q){rc(T,Q,4)}function af(T,Q){rc(T,Q,8)}function sf(T,Q){rc(T,Q,16)}function nc(T,Q){var J;for(J=0;16>J;++J)n(T,Q+32*J,T,Q-32,16)}function $d(T,Q){var J;for(J=16;0<J;--J)a(T,Q,T[Q-1],16),Q+=32}function ac(T,Q,J){var se;for(se=0;16>se;++se)a(Q,J+32*se,T,16)}function Cl(T,Q){var J,se=16;for(J=0;16>J;++J)se+=T[Q-1+32*J]+T[Q+J-32];ac(se>>5,T,Q)}function la(T,Q){var J,se=8;for(J=0;16>J;++J)se+=T[Q-1+32*J];ac(se>>4,T,Q)}function sc(T,Q){var J,se=8;for(J=0;16>J;++J)se+=T[Q+J-32];ac(se>>4,T,Q)}function _l(T,Q){ac(128,T,Q)}function jr(T,Q,J){return T+2*Q+J+2>>2}function Sl(T,Q){var J,se=Q-32;for(se=new Uint8Array([jr(T[se-1],T[se+0],T[se+1]),jr(T[se+0],T[se+1],T[se+2]),jr(T[se+1],T[se+2],T[se+3]),jr(T[se+2],T[se+3],T[se+4])]),J=0;4>J;++J)n(T,Q+32*J,se,0,se.length)}function Lh(T,Q){var J=T[Q-1],se=T[Q-1+32],de=T[Q-1+64],me=T[Q-1+96];pe(T,Q+0,16843009*jr(T[Q-1-32],J,se)),pe(T,Q+32,16843009*jr(J,se,de)),pe(T,Q+64,16843009*jr(se,de,me)),pe(T,Q+96,16843009*jr(de,me,me))}function ji(T,Q){var J,se=4;for(J=0;4>J;++J)se+=T[Q+J-32]+T[Q-1+32*J];for(se>>=3,J=0;4>J;++J)a(T,Q+32*J,se,4)}function wo(T,Q){var J=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],me=T[Q-1-32],ge=T[Q+0-32],xe=T[Q+1-32],Ee=T[Q+2-32],ke=T[Q+3-32];T[Q+0+96]=jr(se,de,T[Q-1+96]),T[Q+1+96]=T[Q+0+64]=jr(J,se,de),T[Q+2+96]=T[Q+1+64]=T[Q+0+32]=jr(me,J,se),T[Q+3+96]=T[Q+2+64]=T[Q+1+32]=T[Q+0+0]=jr(ge,me,J),T[Q+3+64]=T[Q+2+32]=T[Q+1+0]=jr(xe,ge,me),T[Q+3+32]=T[Q+2+0]=jr(Ee,xe,ge),T[Q+3+0]=jr(ke,Ee,xe)}function to(T,Q){var J=T[Q+1-32],se=T[Q+2-32],de=T[Q+3-32],me=T[Q+4-32],ge=T[Q+5-32],xe=T[Q+6-32],Ee=T[Q+7-32];T[Q+0+0]=jr(T[Q+0-32],J,se),T[Q+1+0]=T[Q+0+32]=jr(J,se,de),T[Q+2+0]=T[Q+1+32]=T[Q+0+64]=jr(se,de,me),T[Q+3+0]=T[Q+2+32]=T[Q+1+64]=T[Q+0+96]=jr(de,me,ge),T[Q+3+32]=T[Q+2+64]=T[Q+1+96]=jr(me,ge,xe),T[Q+3+64]=T[Q+2+96]=jr(ge,xe,Ee),T[Q+3+96]=jr(xe,Ee,Ee)}function Nl(T,Q){var J=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],me=T[Q-1-32],ge=T[Q+0-32],xe=T[Q+1-32],Ee=T[Q+2-32],ke=T[Q+3-32];T[Q+0+0]=T[Q+1+64]=me+ge+1>>1,T[Q+1+0]=T[Q+2+64]=ge+xe+1>>1,T[Q+2+0]=T[Q+3+64]=xe+Ee+1>>1,T[Q+3+0]=Ee+ke+1>>1,T[Q+0+96]=jr(de,se,J),T[Q+0+64]=jr(se,J,me),T[Q+0+32]=T[Q+1+96]=jr(J,me,ge),T[Q+1+32]=T[Q+2+96]=jr(me,ge,xe),T[Q+2+32]=T[Q+3+96]=jr(ge,xe,Ee),T[Q+3+32]=jr(xe,Ee,ke)}function Eo(T,Q){var J=T[Q+0-32],se=T[Q+1-32],de=T[Q+2-32],me=T[Q+3-32],ge=T[Q+4-32],xe=T[Q+5-32],Ee=T[Q+6-32],ke=T[Q+7-32];T[Q+0+0]=J+se+1>>1,T[Q+1+0]=T[Q+0+64]=se+de+1>>1,T[Q+2+0]=T[Q+1+64]=de+me+1>>1,T[Q+3+0]=T[Q+2+64]=me+ge+1>>1,T[Q+0+32]=jr(J,se,de),T[Q+1+32]=T[Q+0+96]=jr(se,de,me),T[Q+2+32]=T[Q+1+96]=jr(de,me,ge),T[Q+3+32]=T[Q+2+96]=jr(me,ge,xe),T[Q+3+64]=jr(ge,xe,Ee),T[Q+3+96]=jr(xe,Ee,ke)}function Kc(T,Q){var J=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],me=T[Q-1+96];T[Q+0+0]=J+se+1>>1,T[Q+2+0]=T[Q+0+32]=se+de+1>>1,T[Q+2+32]=T[Q+0+64]=de+me+1>>1,T[Q+1+0]=jr(J,se,de),T[Q+3+0]=T[Q+1+32]=jr(se,de,me),T[Q+3+32]=T[Q+1+64]=jr(de,me,me),T[Q+3+64]=T[Q+2+64]=T[Q+0+96]=T[Q+1+96]=T[Q+2+96]=T[Q+3+96]=me}function ic(T,Q){var J=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],me=T[Q-1+96],ge=T[Q-1-32],xe=T[Q+0-32],Ee=T[Q+1-32],ke=T[Q+2-32];T[Q+0+0]=T[Q+2+32]=J+ge+1>>1,T[Q+0+32]=T[Q+2+64]=se+J+1>>1,T[Q+0+64]=T[Q+2+96]=de+se+1>>1,T[Q+0+96]=me+de+1>>1,T[Q+3+0]=jr(xe,Ee,ke),T[Q+2+0]=jr(ge,xe,Ee),T[Q+1+0]=T[Q+3+32]=jr(J,ge,xe),T[Q+1+32]=T[Q+3+64]=jr(se,J,ge),T[Q+1+64]=T[Q+3+96]=jr(de,se,J),T[Q+1+96]=jr(me,de,se)}function of(T,Q){var J;for(J=0;8>J;++J)n(T,Q+32*J,T,Q-32,8)}function Co(T,Q){var J;for(J=0;8>J;++J)a(T,Q,T[Q-1],8),Q+=32}function Ii(T,Q,J){var se;for(se=0;8>se;++se)a(Q,J+32*se,T,8)}function kl(T,Q){var J,se=8;for(J=0;8>J;++J)se+=T[Q+J-32]+T[Q-1+32*J];Ii(se>>4,T,Q)}function ms(T,Q){var J,se=4;for(J=0;8>J;++J)se+=T[Q+J-32];Ii(se>>3,T,Q)}function vn(T,Q){var J,se=4;for(J=0;8>J;++J)se+=T[Q-1+32*J];Ii(se>>3,T,Q)}function qc(T,Q){Ii(128,T,Q)}function Bl(T,Q,J){var se=T[Q-J],de=T[Q+0],me=3*(de-se)+Dg[1020+T[Q-2*J]-T[Q+J]],ge=pf[112+(me+4>>3)];T[Q-J]=ti[255+se+pf[112+(me+3>>3)]],T[Q+0]=ti[255+de-ge]}function lf(T,Q,J,se){var de=T[Q+0],me=T[Q+J];return Fl[255+T[Q-2*J]-T[Q-J]]>se||Fl[255+me-de]>se}function Hu(T,Q,J,se){return 4*Fl[255+T[Q-J]-T[Q+0]]+Fl[255+T[Q-2*J]-T[Q+J]]<=se}function Vu(T,Q,J,se,de){var me=T[Q-3*J],ge=T[Q-2*J],xe=T[Q-J],Ee=T[Q+0],ke=T[Q+J],Me=T[Q+2*J],at=T[Q+3*J];return 4*Fl[255+xe-Ee]+Fl[255+ge-ke]>se?0:Fl[255+T[Q-4*J]-me]<=de&&Fl[255+me-ge]<=de&&Fl[255+ge-xe]<=de&&Fl[255+at-Me]<=de&&Fl[255+Me-ke]<=de&&Fl[255+ke-Ee]<=de}function sl(T,Q,J,se){var de=2*se+1;for(se=0;16>se;++se)Hu(T,Q+se,J,de)&&Bl(T,Q+se,J)}function Fi(T,Q,J,se){var de=2*se+1;for(se=0;16>se;++se)Hu(T,Q+se*J,1,de)&&Bl(T,Q+se*J,1)}function ps(T,Q,J,se){var de;for(de=3;0<de;--de)sl(T,Q+=4*J,J,se)}function Mh(T,Q,J,se){var de;for(de=3;0<de;--de)Fi(T,Q+=4,J,se)}function Wc(T,Q,J,se,de,me,ge,xe){for(me=2*me+1;0<de--;){if(Vu(T,Q,J,me,ge))if(lf(T,Q,J,xe))Bl(T,Q,J);else{var Ee=T,ke=Q,Me=J,at=Ee[ke-2*Me],tt=Ee[ke-Me],Ke=Ee[ke+0],Bt=Ee[ke+Me],ht=Ee[ke+2*Me],Qe=27*(_t=Dg[1020+3*(Ke-tt)+Dg[1020+at-Bt]])+63>>7,Ve=18*_t+63>>7,_t=9*_t+63>>7;Ee[ke-3*Me]=ti[255+Ee[ke-3*Me]+_t],Ee[ke-2*Me]=ti[255+at+Ve],Ee[ke-Me]=ti[255+tt+Qe],Ee[ke+0]=ti[255+Ke-Qe],Ee[ke+Me]=ti[255+Bt-Ve],Ee[ke+2*Me]=ti[255+ht-_t]}Q+=se}}function vi(T,Q,J,se,de,me,ge,xe){for(me=2*me+1;0<de--;){if(Vu(T,Q,J,me,ge))if(lf(T,Q,J,xe))Bl(T,Q,J);else{var Ee=T,ke=Q,Me=J,at=Ee[ke-Me],tt=Ee[ke+0],Ke=Ee[ke+Me],Bt=pf[112+((ht=3*(tt-at))+4>>3)],ht=pf[112+(ht+3>>3)],Qe=Bt+1>>1;Ee[ke-2*Me]=ti[255+Ee[ke-2*Me]+Qe],Ee[ke-Me]=ti[255+at+ht],Ee[ke+0]=ti[255+tt-Bt],Ee[ke+Me]=ti[255+Ke-Qe]}Q+=se}}function Xc(T,Q,J,se,de,me){Wc(T,Q,J,1,16,se,de,me)}function oc(T,Q,J,se,de,me){Wc(T,Q,1,J,16,se,de,me)}function Gd(T,Q,J,se,de,me){var ge;for(ge=3;0<ge;--ge)vi(T,Q+=4*J,J,1,16,se,de,me)}function zu(T,Q,J,se,de,me){var ge;for(ge=3;0<ge;--ge)vi(T,Q+=4,1,J,16,se,de,me)}function Kd(T,Q,J,se,de,me,ge,xe){Wc(T,Q,de,1,8,me,ge,xe),Wc(J,se,de,1,8,me,ge,xe)}function cf(T,Q,J,se,de,me,ge,xe){Wc(T,Q,1,de,8,me,ge,xe),Wc(J,se,1,de,8,me,ge,xe)}function $u(T,Q,J,se,de,me,ge,xe){vi(T,Q+4*de,de,1,8,me,ge,xe),vi(J,se+4*de,de,1,8,me,ge,xe)}function Yc(T,Q,J,se,de,me,ge,xe){vi(T,Q+4,1,de,8,me,ge,xe),vi(J,se+4,1,de,8,me,ge,xe)}function Gu(){this.ba=new oa,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new en,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function qd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ku(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Jc(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new I}function Uh(){this.xb=this.a=0,this.l=new js,this.ca=new oa,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Jc,this.ab=0,this.gc=i(4,Ku),this.Oc=0}function lc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new js,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Zc(T,Q,J,se,de,me,ge){for(T=T==null?0:T[Q+0],Q=0;Q<ge;++Q)de[me+Q]=T+J[se+Q]&255,T=de[me+Q]}function qu(T,Q,J,se,de,me,ge){var xe;if(T==null)Zc(null,null,J,se,de,me,ge);else for(xe=0;xe<ge;++xe)de[me+xe]=T[Q+xe]+J[se+xe]&255}function Oi(T,Q,J,se,de,me,ge){if(T==null)Zc(null,null,J,se,de,me,ge);else{var xe,Ee=T[Q+0],ke=Ee,Me=Ee;for(xe=0;xe<ge;++xe)ke=Me+(Ee=T[Q+xe])-ke,Me=J[se+xe]+(-256&ke?0>ke?0:255:ke)&255,ke=Ee,de[me+xe]=Me}}function Wd(T,Q,J,se){var de=Q.width,me=Q.o;if(t(T!=null&&Q!=null),0>J||0>=se||J+se>me)return null;if(!T.Cc){if(T.ga==null){var ge;if(T.ga=new lc,(ge=T.ga==null)||(ge=Q.width*Q.o,t(T.Gb.length==0),T.Gb=s(ge),T.Uc=0,T.Gb==null?ge=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,ge=1),ge=!ge),!ge){ge=T.ga;var xe=T.Fa,Ee=T.P,ke=T.qc,Me=T.mb,at=T.nb,tt=Ee+1,Ke=ke-1,Bt=ge.l;if(t(xe!=null&&Me!=null&&Q!=null),su[0]=null,su[1]=Zc,su[2]=qu,su[3]=Oi,ge.ca=Me,ge.tb=at,ge.c=Q.width,ge.i=Q.height,t(0<ge.c&&0<ge.i),1>=ke)Q=0;else if(ge.$a=xe[Ee+0]>>0&3,ge.Z=xe[Ee+0]>>2&3,ge.Lc=xe[Ee+0]>>4&3,Ee=xe[Ee+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||Ee)Q=0;else if(Bt.put=xt,Bt.ac=Je,Bt.bc=wt,Bt.ma=ge,Bt.width=Q.width,Bt.height=Q.height,Bt.Da=Q.Da,Bt.v=Q.v,Bt.va=Q.va,Bt.j=Q.j,Bt.o=Q.o,ge.$a)e:{t(ge.$a==1),Q=dt();t:for(;;){if(Q==null){Q=0;break e}if(t(ge!=null),ge.mc=Q,Q.c=ge.c,Q.i=ge.i,Q.l=ge.l,Q.l.ma=ge,Q.l.width=ge.c,Q.l.height=ge.i,Q.a=0,V(Q.m,xe,tt,Ke),!$e(ge.c,ge.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Ce(Q.s)?(ge.ic=1,xe=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=s(xe),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(ge.ic=0,Q=rt(Q,ge.c)),!Q))break t;Q=1;break e}ge.mc=null,Q=0}else Q=Ke>=ge.c*ge.i;ge=!Q}if(ge)return null;T.ga.Lc!=1?T.Ga=0:se=me-J}t(T.ga!=null),t(J+se<=me);e:{if(Q=(xe=T.ga).c,me=xe.l.o,xe.$a==0){if(tt=T.rc,Ke=T.Vc,Bt=T.Fa,Ee=T.P+1+J*Q,ke=T.mb,Me=T.nb+J*Q,t(Ee<=T.P+T.qc),xe.Z!=0)for(t(su[xe.Z]!=null),ge=0;ge<se;++ge)su[xe.Z](tt,Ke,Bt,Ee,ke,Me,Q),tt=ke,Ke=Me,Me+=Q,Ee+=Q;else for(ge=0;ge<se;++ge)n(ke,Me,Bt,Ee,Q),tt=ke,Ke=Me,Me+=Q,Ee+=Q;T.rc=tt,T.Vc=Ke}else{if(t(xe.mc!=null),Q=J+se,t((ge=xe.mc)!=null),t(Q<=ge.i),ge.C>=Q)Q=1;else if(xe.ic||Ge(),xe.ic){xe=ge.V,tt=ge.Ba,Ke=ge.c;var ht=ge.i,Qe=(Bt=1,Ee=ge.$/Ke,ke=ge.$%Ke,Me=ge.m,at=ge.s,ge.$),Ve=Ke*ht,_t=Ke*Q,jt=at.wc,Nt=Qe<_t?Gr(at,ke,Ee):null;t(Qe<=Ve),t(Q<=ht),t(Ce(at));t:for(;;){for(;!Me.h&&Qe<_t;){if(ke&jt||(Nt=Gr(at,ke,Ee)),t(Nt!=null),ae(Me),256>(ht=Kr(Nt.G[0],Nt.H[0],Me)))xe[tt+Qe]=ht,++Qe,++ke>=Ke&&(ke=0,++Ee<=Q&&!(Ee%16)&&Se(ge,Ee));else{if(!(280>ht)){Bt=0;break t}ht=nr(ht-256,Me);var tr,Xt=Kr(Nt.G[4],Nt.H[4],Me);if(ae(Me),!(Qe>=(Xt=gr(Ke,Xt=nr(Xt,Me)))&&Ve-Qe>=ht)){Bt=0;break t}for(tr=0;tr<ht;++tr)xe[tt+Qe+tr]=xe[tt+Qe+tr-Xt];for(Qe+=ht,ke+=ht;ke>=Ke;)ke-=Ke,++Ee<=Q&&!(Ee%16)&&Se(ge,Ee);Qe<_t&&ke&jt&&(Nt=Gr(at,ke,Ee))}t(Me.h==Z(Me))}Se(ge,Ee>Q?Q:Ee);break t}!Bt||Me.h&&Qe<Ve?(Bt=0,ge.a=Me.h?5:3):ge.$=Qe,Q=Bt}else Q=je(ge,ge.V,ge.Ba,ge.c,ge.i,Q,st);if(!Q){se=0;break e}}J+se>=me&&(T.Cc=1),se=1}if(!se)return null;if(T.Cc&&((se=T.ga)!=null&&(se.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+J*de}function K(T,Q,J,se,de,me){for(;0<de--;){var ge,xe=T,Ee=Q+(J?1:0),ke=T,Me=Q+(J?0:3);for(ge=0;ge<se;++ge){var at=ke[Me+4*ge];at!=255&&(at*=32897,xe[Ee+4*ge+0]=xe[Ee+4*ge+0]*at>>23,xe[Ee+4*ge+1]=xe[Ee+4*ge+1]*at>>23,xe[Ee+4*ge+2]=xe[Ee+4*ge+2]*at>>23)}Q+=me}}function Ae(T,Q,J,se,de){for(;0<se--;){var me;for(me=0;me<J;++me){var ge=T[Q+2*me+0],xe=15&(ke=T[Q+2*me+1]),Ee=4369*xe,ke=(240&ke|ke>>4)*Ee>>16;T[Q+2*me+0]=(240&ge|ge>>4)*Ee>>16&240|(15&ge|ge<<4)*Ee>>16>>4&15,T[Q+2*me+1]=240&ke|xe}Q+=de}}function Fe(T,Q,J,se,de,me,ge,xe){var Ee,ke,Me=255;for(ke=0;ke<de;++ke){for(Ee=0;Ee<se;++Ee){var at=T[Q+Ee];me[ge+4*Ee]=at,Me&=at}Q+=J,ge+=xe}return Me!=255}function Le(T,Q,J,se,de){var me;for(me=0;me<de;++me)J[se+me]=T[Q+me]>>8}function Ge(){il=K,mn=Ae,pn=Fe,va=Le}function vt(T,Q,J){_[T]=function(se,de,me,ge,xe,Ee,ke,Me,at,tt,Ke,Bt,ht,Qe,Ve,_t,jt){var Nt,tr=jt-1>>1,Xt=xe[Ee+0]|ke[Me+0]<<16,xr=at[tt+0]|Ke[Bt+0]<<16;t(se!=null);var Zt=3*Xt+xr+131074>>2;for(Q(se[de+0],255&Zt,Zt>>16,ht,Qe),me!=null&&(Zt=3*xr+Xt+131074>>2,Q(me[ge+0],255&Zt,Zt>>16,Ve,_t)),Nt=1;Nt<=tr;++Nt){var On=xe[Ee+Nt]|ke[Me+Nt]<<16,zn=at[tt+Nt]|Ke[Bt+Nt]<<16,fn=Xt+On+xr+zn+524296,ln=fn+2*(On+xr)>>3;Zt=ln+Xt>>1,Xt=(fn=fn+2*(Xt+zn)>>3)+On>>1,Q(se[de+2*Nt-1],255&Zt,Zt>>16,ht,Qe+(2*Nt-1)*J),Q(se[de+2*Nt-0],255&Xt,Xt>>16,ht,Qe+(2*Nt-0)*J),me!=null&&(Zt=fn+xr>>1,Xt=ln+zn>>1,Q(me[ge+2*Nt-1],255&Zt,Zt>>16,Ve,_t+(2*Nt-1)*J),Q(me[ge+2*Nt+0],255&Xt,Xt>>16,Ve,_t+(2*Nt+0)*J)),Xt=On,xr=zn}1&jt||(Zt=3*Xt+xr+131074>>2,Q(se[de+jt-1],255&Zt,Zt>>16,ht,Qe+(jt-1)*J),me!=null&&(Zt=3*xr+Xt+131074>>2,Q(me[ge+jt-1],255&Zt,Zt>>16,Ve,_t+(jt-1)*J)))}}function Lt(){ri[Di]=nd,ri[$h]=iu,ri[nu]=cA,ri[Vm]=Lg,ri[gf]=Mg,ri[Ju]=qh,ri[Pg]=Ug,ri[zm]=iu,ri[oA]=Lg,ri[Zu]=Mg,ri[Gh]=qh}function Jt(T){return T&-16384?0>T?0:255:T>>Kk}function O(T,Q){return Jt((19077*T>>8)+(26149*Q>>8)-14234)}function ee(T,Q,J){return Jt((19077*T>>8)-(6419*Q>>8)-(13320*J>>8)+8708)}function ie(T,Q){return Jt((19077*T>>8)+(33050*Q>>8)-17685)}function ve(T,Q,J,se,de){se[de+0]=O(T,J),se[de+1]=ee(T,Q,J),se[de+2]=ie(T,Q)}function ze(T,Q,J,se,de){se[de+0]=ie(T,Q),se[de+1]=ee(T,Q,J),se[de+2]=O(T,J)}function it(T,Q,J,se,de){var me=ee(T,Q,J);Q=me<<3&224|ie(T,Q)>>3,se[de+0]=248&O(T,J)|me>>5,se[de+1]=Q}function Ut(T,Q,J,se,de){var me=240&ie(T,Q)|15;se[de+0]=240&O(T,J)|ee(T,Q,J)>>4,se[de+1]=me}function Ir(T,Q,J,se,de){se[de+0]=255,ve(T,Q,J,se,de+1)}function bn(T,Q,J,se,de){ze(T,Q,J,se,de),se[de+3]=255}function qr(T,Q,J,se,de){ve(T,Q,J,se,de),se[de+3]=255}function Vn(T,Q){return 0>T?0:T>Q?Q:T}function ea(T,Q,J){_[T]=function(se,de,me,ge,xe,Ee,ke,Me,at){for(var tt=Me+(-2&at)*J;Me!=tt;)Q(se[de+0],me[ge+0],xe[Ee+0],ke,Me),Q(se[de+1],me[ge+0],xe[Ee+0],ke,Me+J),de+=2,++ge,++Ee,Me+=2*J;1&at&&Q(se[de+0],me[ge+0],xe[Ee+0],ke,Me)}}function Tl(T,Q,J){return J==0?T==0?Q==0?6:5:Q==0?4:0:J}function es(T,Q,J,se,de){switch(T>>>30){case 3:uc(Q,J,se,de,0);break;case 2:$a(Q,J,se,de);break;case 1:gs(Q,J,se,de)}}function _o(T,Q){var J,se,de=Q.M,me=Q.Nb,ge=T.oc,xe=T.pc+40,Ee=T.oc,ke=T.pc+584,Me=T.oc,at=T.pc+600;for(J=0;16>J;++J)ge[xe+32*J-1]=129;for(J=0;8>J;++J)Ee[ke+32*J-1]=129,Me[at+32*J-1]=129;for(0<de?ge[xe-1-32]=Ee[ke-1-32]=Me[at-1-32]=129:(a(ge,xe-32-1,127,21),a(Ee,ke-32-1,127,9),a(Me,at-32-1,127,9)),se=0;se<T.za;++se){var tt=Q.ya[Q.aa+se];if(0<se){for(J=-1;16>J;++J)n(ge,xe+32*J-4,ge,xe+32*J+12,4);for(J=-1;8>J;++J)n(Ee,ke+32*J-4,Ee,ke+32*J+4,4),n(Me,at+32*J-4,Me,at+32*J+4,4)}var Ke=T.Gd,Bt=T.Hd+se,ht=tt.ad,Qe=tt.Hc;if(0<de&&(n(ge,xe-32,Ke[Bt].y,0,16),n(Ee,ke-32,Ke[Bt].f,0,8),n(Me,at-32,Ke[Bt].ea,0,8)),tt.Za){var Ve=ge,_t=xe-32+16;for(0<de&&(se>=T.za-1?a(Ve,_t,Ke[Bt].y[15],4):n(Ve,_t,Ke[Bt+1].y,0,4)),J=0;4>J;J++)Ve[_t+128+J]=Ve[_t+256+J]=Ve[_t+384+J]=Ve[_t+0+J];for(J=0;16>J;++J,Qe<<=2)Ve=ge,_t=xe+yf[J],no[tt.Ob[J]](Ve,_t),es(Qe,ht,16*+J,Ve,_t)}else if(Ve=Tl(se,de,tt.Ob[0]),rd[Ve](ge,xe),Qe!=0)for(J=0;16>J;++J,Qe<<=2)es(Qe,ht,16*+J,ge,xe+yf[J]);for(J=tt.Gc,Ve=Tl(se,de,tt.Dd),ll[Ve](Ee,ke),ll[Ve](Me,at),Qe=ht,Ve=Ee,_t=ke,255&(tt=J>>0)&&(170&tt?dc(Qe,256,Ve,_t):ko(Qe,256,Ve,_t)),tt=Me,Qe=at,255&(J>>=8)&&(170&J?dc(ht,320,tt,Qe):ko(ht,320,tt,Qe)),de<T.Ub-1&&(n(Ke[Bt].y,0,ge,xe+480,16),n(Ke[Bt].f,0,Ee,ke+224,8),n(Ke[Bt].ea,0,Me,at+224,8)),J=8*me*T.B,Ke=T.sa,Bt=T.ta+16*se+16*me*T.R,ht=T.qa,tt=T.ra+8*se+J,Qe=T.Ha,Ve=T.Ia+8*se+J,J=0;16>J;++J)n(Ke,Bt+J*T.R,ge,xe+32*J,16);for(J=0;8>J;++J)n(ht,tt+J*T.B,Ee,ke+32*J,8),n(Qe,Ve+J*T.B,Me,at+32*J,8)}}function eu(T,Q,J,se,de,me,ge,xe,Ee){var ke=[0],Me=[0],at=0,tt=Ee!=null?Ee.kd:0,Ke=Ee??new qd;if(T==null||12>J)return 7;Ke.data=T,Ke.w=Q,Ke.ha=J,Q=[Q],J=[J],Ke.gb=[Ke.gb];e:{var Bt=Q,ht=J,Qe=Ke.gb;if(t(T!=null),t(ht!=null),t(Qe!=null),Qe[0]=0,12<=ht[0]&&!r(T,Bt[0],"RIFF")){if(r(T,Bt[0]+8,"WEBP")){Qe=3;break e}var Ve=_e(T,Bt[0]+4);if(12>Ve||4294967286<Ve){Qe=3;break e}if(tt&&Ve>ht[0]-8){Qe=7;break e}Qe[0]=Ve,Bt[0]+=12,ht[0]-=12}Qe=0}if(Qe!=0)return Qe;for(Ve=0<Ke.gb[0],J=J[0];;){e:{var _t=T;ht=Q,Qe=J;var jt=ke,Nt=Me,tr=Bt=[0];if((Zt=at=[at])[0]=0,8>Qe[0])Qe=7;else{if(!r(_t,ht[0],"VP8X")){if(_e(_t,ht[0]+4)!=10){Qe=3;break e}if(18>Qe[0]){Qe=7;break e}var Xt=_e(_t,ht[0]+8),xr=1+te(_t,ht[0]+12);if(2147483648<=xr*(_t=1+te(_t,ht[0]+15))){Qe=3;break e}tr!=null&&(tr[0]=Xt),jt!=null&&(jt[0]=xr),Nt!=null&&(Nt[0]=_t),ht[0]+=18,Qe[0]-=18,Zt[0]=1}Qe=0}}if(at=at[0],Bt=Bt[0],Qe!=0)return Qe;if(ht=!!(2&Bt),!Ve&&at)return 3;if(me!=null&&(me[0]=!!(16&Bt)),ge!=null&&(ge[0]=ht),xe!=null&&(xe[0]=0),ge=ke[0],Bt=Me[0],at&&ht&&Ee==null){Qe=0;break}if(4>J){Qe=7;break}if(Ve&&at||!Ve&&!at&&!r(T,Q[0],"ALPH")){J=[J],Ke.na=[Ke.na],Ke.P=[Ke.P],Ke.Sa=[Ke.Sa];e:{Xt=T,Qe=Q,Ve=J;var Zt=Ke.gb;jt=Ke.na,Nt=Ke.P,tr=Ke.Sa,xr=22,t(Xt!=null),t(Ve!=null),_t=Qe[0];var On=Ve[0];for(t(jt!=null),t(tr!=null),jt[0]=null,Nt[0]=null,tr[0]=0;;){if(Qe[0]=_t,Ve[0]=On,8>On){Qe=7;break e}var zn=_e(Xt,_t+4);if(4294967286<zn){Qe=3;break e}var fn=8+zn+1&-2;if(xr+=fn,0<Zt&&xr>Zt){Qe=3;break e}if(!r(Xt,_t,"VP8 ")||!r(Xt,_t,"VP8L")){Qe=0;break e}if(On[0]<fn){Qe=7;break e}r(Xt,_t,"ALPH")||(jt[0]=Xt,Nt[0]=_t+8,tr[0]=zn),_t+=fn,On-=fn}}if(J=J[0],Ke.na=Ke.na[0],Ke.P=Ke.P[0],Ke.Sa=Ke.Sa[0],Qe!=0)break}J=[J],Ke.Ja=[Ke.Ja],Ke.xa=[Ke.xa];e:if(Zt=T,Qe=Q,Ve=J,jt=Ke.gb[0],Nt=Ke.Ja,tr=Ke.xa,Xt=Qe[0],_t=!r(Zt,Xt,"VP8 "),xr=!r(Zt,Xt,"VP8L"),t(Zt!=null),t(Ve!=null),t(Nt!=null),t(tr!=null),8>Ve[0])Qe=7;else{if(_t||xr){if(Zt=_e(Zt,Xt+4),12<=jt&&Zt>jt-12){Qe=3;break e}if(tt&&Zt>Ve[0]-8){Qe=7;break e}Nt[0]=Zt,Qe[0]+=8,Ve[0]-=8,tr[0]=xr}else tr[0]=5<=Ve[0]&&Zt[Xt+0]==47&&!(Zt[Xt+4]>>5),Nt[0]=Ve[0];Qe=0}if(J=J[0],Ke.Ja=Ke.Ja[0],Ke.xa=Ke.xa[0],Q=Q[0],Qe!=0)break;if(4294967286<Ke.Ja)return 3;if(xe==null||ht||(xe[0]=Ke.xa?2:1),ge=[ge],Bt=[Bt],Ke.xa){if(5>J){Qe=7;break}xe=ge,tt=Bt,ht=me,T==null||5>J?T=0:5<=J&&T[Q+0]==47&&!(T[Q+4]>>5)?(Ve=[0],Zt=[0],jt=[0],V(Nt=new M,T,Q,J),bt(Nt,Ve,Zt,jt)?(xe!=null&&(xe[0]=Ve[0]),tt!=null&&(tt[0]=Zt[0]),ht!=null&&(ht[0]=jt[0]),T=1):T=0):T=0}else{if(10>J){Qe=7;break}xe=Bt,T==null||10>J||!Zs(T,Q+3,J-3)?T=0:(tt=T[Q+0]|T[Q+1]<<8|T[Q+2]<<16,ht=16383&(T[Q+7]<<8|T[Q+6]),T=16383&(T[Q+9]<<8|T[Q+8]),1&tt||3<(tt>>1&7)||!(tt>>4&1)||tt>>5>=Ke.Ja||!ht||!T?T=0:(ge&&(ge[0]=ht),xe&&(xe[0]=T),T=1))}if(!T||(ge=ge[0],Bt=Bt[0],at&&(ke[0]!=ge||Me[0]!=Bt)))return 3;Ee!=null&&(Ee[0]=Ke,Ee.offset=Q-Ee.w,t(4294967286>Q-Ee.w),t(Ee.offset==Ee.ha-J));break}return Qe==0||Qe==7&&at&&Ee==null?(me!=null&&(me[0]|=Ke.na!=null&&0<Ke.na.length),se!=null&&(se[0]=ge),de!=null&&(de[0]=Bt),0):Qe}function Xd(T,Q,J){var se=Q.width,de=Q.height,me=0,ge=0,xe=se,Ee=de;if(Q.Da=T!=null&&0<T.Da,Q.Da&&(xe=T.cd,Ee=T.bd,me=T.v,ge=T.j,11>J||(me&=-2,ge&=-2),0>me||0>ge||0>=xe||0>=Ee||me+xe>se||ge+Ee>de))return 0;if(Q.v=me,Q.j=ge,Q.va=me+xe,Q.o=ge+Ee,Q.U=xe,Q.T=Ee,Q.da=T!=null&&0<T.da,Q.da){if(!Ie(xe,Ee,J=[T.ib],me=[T.hb]))return 0;Q.ib=J[0],Q.hb=me[0]}return Q.ob=T!=null&&T.ob,Q.Kb=T==null||!T.Sd,Q.da&&(Q.ob=Q.ib<3*se/4&&Q.hb<3*de/4,Q.Kb=0),1}function Qh(T){if(T==null)return 2;if(11>T.S){var Q=T.f.RGBA;Q.fb+=(T.height-1)*Q.A,Q.A=-Q.A}else Q=T.f.kb,T=T.height,Q.O+=(T-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(T-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(T-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(T-1)*Q.lb,Q.lb=-Q.lb);return 0}function uf(T,Q,J,se){if(se==null||0>=T||0>=Q)return 2;if(J!=null){if(J.Da){var de=J.cd,me=J.bd,ge=-2&J.v,xe=-2&J.j;if(0>ge||0>xe||0>=de||0>=me||ge+de>T||xe+me>Q)return 2;T=de,Q=me}if(J.da){if(!Ie(T,Q,de=[J.ib],me=[J.hb]))return 2;T=de[0],Q=me[0]}}se.width=T,se.height=Q;e:{var Ee=se.width,ke=se.height;if(T=se.S,0>=Ee||0>=ke||!(T>=Di&&13>T))T=2;else{if(0>=se.Rd&&se.sd==null){ge=me=de=Q=0;var Me=(xe=Ee*dE[T])*ke;if(11>T||(me=(ke+1)/2*(Q=(Ee+1)/2),T==12&&(ge=(de=Ee)*ke)),(ke=s(Me+2*me+ge))==null){T=1;break e}se.sd=ke,11>T?((Ee=se.f.RGBA).eb=ke,Ee.fb=0,Ee.A=xe,Ee.size=Me):((Ee=se.f.kb).y=ke,Ee.O=0,Ee.fa=xe,Ee.Fd=Me,Ee.f=ke,Ee.N=0+Me,Ee.Ab=Q,Ee.Cd=me,Ee.ea=ke,Ee.W=0+Me+me,Ee.Db=Q,Ee.Ed=me,T==12&&(Ee.F=ke,Ee.J=0+Me+2*me),Ee.Tc=ge,Ee.lb=de)}if(Q=1,de=se.S,me=se.width,ge=se.height,de>=Di&&13>de)if(11>de)T=se.f.RGBA,Q&=(xe=Math.abs(T.A))*(ge-1)+me<=T.size,Q&=xe>=me*dE[de],Q&=T.eb!=null;else{T=se.f.kb,xe=(me+1)/2,Me=(ge+1)/2,Ee=Math.abs(T.fa),ke=Math.abs(T.Ab);var at=Math.abs(T.Db),tt=Math.abs(T.lb),Ke=tt*(ge-1)+me;Q&=Ee*(ge-1)+me<=T.Fd,Q&=ke*(Me-1)+xe<=T.Cd,Q=(Q&=at*(Me-1)+xe<=T.Ed)&Ee>=me&ke>=xe&at>=xe,Q&=T.y!=null,Q&=T.f!=null,Q&=T.ea!=null,de==12&&(Q&=tt>=me,Q&=Ke<=T.Tc,Q&=T.F!=null)}else Q=0;T=Q?0:2}}return T!=0||J!=null&&J.fd&&(T=Qh(se)),T}var Is=64,Yd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],df=24,Af=32,Hh=8,So=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ye("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(T){return T},_.Predictor2=function(T,Q,J){return Q[J+0]},_.Predictor3=function(T,Q,J){return Q[J+1]},_.Predictor4=function(T,Q,J){return Q[J-1]},_.Predictor5=function(T,Q,J){return Re(Re(T,Q[J+1]),Q[J+0])},_.Predictor6=function(T,Q,J){return Re(T,Q[J-1])},_.Predictor7=function(T,Q,J){return Re(T,Q[J+0])},_.Predictor8=function(T,Q,J){return Re(Q[J-1],Q[J+0])},_.Predictor9=function(T,Q,J){return Re(Q[J+0],Q[J+1])},_.Predictor10=function(T,Q,J){return Re(Re(T,Q[J-1]),Re(Q[J+0],Q[J+1]))},_.Predictor11=function(T,Q,J){var se=Q[J+0];return 0>=lt(se>>24&255,T>>24&255,(Q=Q[J-1])>>24&255)+lt(se>>16&255,T>>16&255,Q>>16&255)+lt(se>>8&255,T>>8&255,Q>>8&255)+lt(255&se,255&T,255&Q)?se:T},_.Predictor12=function(T,Q,J){var se=Q[J+0];return(qe((T>>24&255)+(se>>24&255)-((Q=Q[J-1])>>24&255))<<24|qe((T>>16&255)+(se>>16&255)-(Q>>16&255))<<16|qe((T>>8&255)+(se>>8&255)-(Q>>8&255))<<8|qe((255&T)+(255&se)-(255&Q)))>>>0},_.Predictor13=function(T,Q,J){var se=Q[J-1];return(Ze((T=Re(T,Q[J+0]))>>24&255,se>>24&255)<<24|Ze(T>>16&255,se>>16&255)<<16|Ze(T>>8&255,se>>8&255)<<8|Ze(T>>0&255,se>>0&255))>>>0};var X1=_.PredictorAdd0;_.PredictorAdd1=mt,ye("Predictor2","PredictorAdd2"),ye("Predictor3","PredictorAdd3"),ye("Predictor4","PredictorAdd4"),ye("Predictor5","PredictorAdd5"),ye("Predictor6","PredictorAdd6"),ye("Predictor7","PredictorAdd7"),ye("Predictor8","PredictorAdd8"),ye("Predictor9","PredictorAdd9"),ye("Predictor10","PredictorAdd10"),ye("Predictor11","PredictorAdd11"),ye("Predictor12","PredictorAdd12"),ye("Predictor13","PredictorAdd13");var Qm=_.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var Og,jl=_.ColorIndexInverseTransform,ei=_.MapARGB,Jd=_.VP8LColorIndexInverseTransformAlpha,Hm=_.MapAlpha,Wu=_.VP8LPredictorsAdd=[];Wu.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var Zd,ro,bi,eA,No,cc,tu,uc,$a,dc,gs,ko,ff,ru,Vh,tA,rA,nA,hf,zh,aA,Xu,mf,Ga,il,mn,pn,va,ts=s(511),Il=s(2041),sA=s(225),iA=s(767),Yu=0,Dg=Il,pf=sA,ti=iA,Fl=ts,Di=0,$h=1,nu=2,Vm=3,gf=4,Ju=5,Pg=6,zm=7,oA=8,Zu=9,Gh=10,Rg=[2,3,7],Ol=[3,3,11],ol=[280,256,256,256,40],xf=[0,1,1,1,0],ed=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],td=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],vf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],iE=8,$m=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Gm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Fs=null,Ka=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],au=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Y1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],bf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],oE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],rd=[],no=[],ll=[],lE=1,Kh=2,su=[],ri=[];vt("UpsampleRgbLinePair",ve,3),vt("UpsampleBgrLinePair",ze,3),vt("UpsampleRgbaLinePair",qr,4),vt("UpsampleBgraLinePair",bn,4),vt("UpsampleArgbLinePair",Ir,4),vt("UpsampleRgba4444LinePair",Ut,2),vt("UpsampleRgb565LinePair",it,2);var nd=_.UpsampleRgbLinePair,cA=_.UpsampleBgrLinePair,iu=_.UpsampleRgbaLinePair,Lg=_.UpsampleBgraLinePair,Mg=_.UpsampleArgbLinePair,qh=_.UpsampleRgba4444LinePair,Ug=_.UpsampleRgb565LinePair,ou=16,Os=1<<ou-1,uA=-227,Qg=482,Kk=6,cE=0,qk=s(256),Ds=s(256),J1=s(256),Km=s(256),qm=s(Qg-uA),Z1=s(Qg-uA);ea("YuvToRgbRow",ve,3),ea("YuvToBgrRow",ze,3),ea("YuvToRgbaRow",qr,4),ea("YuvToBgraRow",bn,4),ea("YuvToArgbRow",Ir,4),ea("YuvToRgba4444Row",Ut,2),ea("YuvToRgb565Row",it,2);var yf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ad=[0,2,8],Wk=[8,7,6,4,4,2,2,2,1,1,1,1],uE=1;this.WebPDecodeRGBA=function(T,Q,J,se,de){var me=$h,ge=new Gu,xe=new oa;ge.ba=xe,xe.S=me,xe.width=[xe.width],xe.height=[xe.height];var Ee=xe.width,ke=xe.height,Me=new Ba;if(Me==null||T==null)var at=2;else t(Me!=null),at=eu(T,Q,J,Me.width,Me.height,Me.Pd,Me.Qd,Me.format,null);if(at!=0?Ee=0:(Ee!=null&&(Ee[0]=Me.width[0]),ke!=null&&(ke[0]=Me.height[0]),Ee=1),Ee){xe.width=xe.width[0],xe.height=xe.height[0],se!=null&&(se[0]=xe.width),de!=null&&(de[0]=xe.height);e:{if(se=new js,(de=new qd).data=T,de.w=Q,de.ha=J,de.kd=1,Q=[0],t(de!=null),((T=eu(de.data,de.w,de.ha,null,null,null,Q,null,de))==0||T==7)&&Q[0]&&(T=4),(Q=T)==0){if(t(ge!=null),se.data=de.data,se.w=de.w+de.offset,se.ha=de.ha-de.offset,se.put=xt,se.ac=Je,se.bc=wt,se.ma=ge,de.xa){if((T=dt())==null){ge=1;break e}if(function(tt,Ke){var Bt=[0],ht=[0],Qe=[0];t:for(;;){if(tt==null)return 0;if(Ke==null)return tt.a=2,0;if(tt.l=Ke,tt.a=0,V(tt.m,Ke.data,Ke.w,Ke.ha),!bt(tt.m,Bt,ht,Qe)){tt.a=3;break t}if(tt.xb=Kh,Ke.width=Bt[0],Ke.height=ht[0],!$e(Bt[0],ht[0],1,tt,null))break t;return 1}return t(tt.a!=0),0}(T,se)){if(se=(Q=uf(se.width,se.height,ge.Oa,ge.ba))==0){t:{se=T;r:for(;;){if(se==null){se=0;break t}if(t(se.s.yc!=null),t(se.s.Ya!=null),t(0<se.s.Wb),t((J=se.l)!=null),t((de=J.ma)!=null),se.xb!=0){if(se.ca=de.ba,se.tb=de.tb,t(se.ca!=null),!Xd(de.Oa,J,Vm)){se.a=2;break r}if(!rt(se,J.width)||J.da)break r;if((J.da||Or(se.ca.S))&&Ge(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&Ge()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!De(se.s.vb,se.s.Wa.Xa)){se.a=1;break r}se.xb=0}if(!je(se,se.V,se.Ba,se.c,se.i,J.o,Te))break r;de.Dc=se.Ma,se=1;break t}t(se.a!=0),se=0}se=!se}se&&(Q=T.a)}else Q=T.a}else{if((T=new pi)==null){ge=1;break e}if(T.Fa=de.na,T.P=de.P,T.qc=de.Sa,Vd(T,se)){if((Q=uf(se.width,se.height,ge.Oa,ge.ba))==0){if(T.Aa=0,J=ge.Oa,t((de=T)!=null),J!=null){if(0<(Ee=0>(Ee=J.Md)?0:100<Ee?255:255*Ee/100)){for(ke=Me=0;4>ke;++ke)12>(at=de.pb[ke]).lc&&(at.ia=Ee*Wk[0>at.lc?0:at.lc]>>3),Me|=at.ia;Me&&(alert("todo:VP8InitRandom"),de.ia=1)}de.Ga=J.Id,100<de.Ga?de.Ga=100:0>de.Ga&&(de.Ga=0)}nf(T,se)||(Q=T.a)}}else Q=T.a}Q==0&&ge.Oa!=null&&ge.Oa.fd&&(Q=Qh(ge.ba))}ge=Q}me=ge!=0?null:11>me?xe.f.RGBA.eb:xe.f.kb.y}else me=null;return me};var dE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(_,B){for(var P="",D=0;D<4;D++)P+=String.fromCharCode(_[B++]);return P}function d(_,B){return(_[B+0]<<0|_[B+1]<<8|_[B+2]<<16)>>>0}function f(_,B){return(_[B+0]<<0|_[B+1]<<8|_[B+2]<<16|_[B+3]<<24)>>>0}new c;var h=[0],p=[0],g=[],x=new c,b=e,y=function(_,B){var P={},D=0,I=!1,U=0,R=0;if(P.frames=[],!function(W,Z,re,ae){for(var ce=0;ce<ae;ce++)if(W[Z+ce]!=re.charCodeAt(ce))return!0;return!1}(_,B,"RIFF",4)){var Y,H;for(f(_,B+=4),B+=8;B<_.length;){var X=u(_,B),V=f(_,B+=4);B+=4;var z=V+(1&V);switch(X){case"VP8 ":case"VP8L":P.frames[D]===void 0&&(P.frames[D]={}),(M=P.frames[D]).src_off=I?R:B-8,M.src_size=U+V+8,D++,I&&(I=!1,U=0,R=0);break;case"VP8X":(M=P.header={}).feature_flags=_[B];var q=B+4;M.canvas_width=1+d(_,q),q+=3,M.canvas_height=1+d(_,q),q+=3;break;case"ALPH":I=!0,U=z+8,R=B-8;break;case"ANIM":(M=P.header).bgcolor=f(_,B),q=B+4,M.loop_count=(Y=_)[(H=q)+0]<<0|Y[H+1]<<8,q+=2;break;case"ANMF":var ne,M;(M=P.frames[D]={}).offset_x=2*d(_,B),B+=3,M.offset_y=2*d(_,B),B+=3,M.width=1+d(_,B),B+=3,M.height=1+d(_,B),B+=3,M.duration=d(_,B),B+=3,ne=_[B++],M.dispose=1&ne,M.blend=ne>>1&1}X!="ANMF"&&(B+=z)}return P}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,S=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],p=[w.canvas_width];for(var j=0;j<S.length&&S[j].blend!=0;j++);}var N=S[0],F=x.WebPDecodeRGBA(b,N.src_off,N.src_size,p,h);N.rgba=F,N.imgwidth=p[0],N.imgheight=h[0];for(var E=0;E<p[0]*h[0]*4;E++)g[E]=F[E];return this.width=p,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof F6=="function"},r=function(h,p,g,x){var b=4,y=i;switch(x){case e.image_compression.FAST:b=1,y=s;break;case e.image_compression.MEDIUM:b=6,y=o;break;case e.image_compression.SLOW:b=9,y=c}h=n(h,p,g,y);var w=F6(h,{level:b});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(h,p,g,x){for(var b,y,w,S=h.length/p,j=new Uint8Array(h.length+S),N=d(),F=0;F<S;F+=1){if(w=F*p,b=h.subarray(w,w+p),x)j.set(x(b,g,y),w+F);else{for(var E,_=N.length,B=[];E<_;E+=1)B[E]=N[E](b,g,y);var P=f(B.concat());j.set(B[P],w+F)}y=b}return j},a=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var g,x=[],b=h.length;x[0]=1;for(var y=0;y<b;y+=1)g=h[y-p]||0,x[y+1]=h[y]-g+256&255;return x},i=function(h,p,g){var x,b=[],y=h.length;b[0]=2;for(var w=0;w<y;w+=1)x=g&&g[w]||0,b[w+1]=h[w]-x+256&255;return b},o=function(h,p,g){var x,b,y=[],w=h.length;y[0]=3;for(var S=0;S<w;S+=1)x=h[S-p]||0,b=g&&g[S]||0,y[S+1]=h[S]+256-(x+b>>>1)&255;return y},c=function(h,p,g){var x,b,y,w,S=[],j=h.length;S[0]=4;for(var N=0;N<j;N+=1)x=h[N-p]||0,b=g&&g[N]||0,y=g&&g[N-p]||0,w=u(x,b,y),S[N+1]=h[N]-w+256&255;return S},u=function(h,p,g){if(h===p&&p===g)return h;var x=Math.abs(p-g),b=Math.abs(h-g),y=Math.abs(h+p-g-g);return x<=b&&x<=y?h:b<=y?p:g},d=function(){return[a,s,i,o,c]},f=function(h){var p=h.map(function(g){return g.reduce(function(x,b){return x+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(h,p,g,x){var b,y,w,S,j,N,F,E,_,B,P,D,I,U,R,Y=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new eCe(h)).imgData,y=w.bits,b=w.colorSpace,j=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){_=(E=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,P=new Uint8Array(_*w.colors),B=new Uint8Array(_);var X,V=w.pixelBitlength-w.bits;for(U=0,R=0;U<_;U++){for(I=E[U],X=0;X<V;)P[R++]=I>>>X&255,X+=w.bits;B[U]=I>>>X&255}}if(w.bits===16){_=(E=new Uint32Array(w.decodePixels().buffer)).length,P=new Uint8Array(_*(32/w.pixelBitlength)*w.colors),B=new Uint8Array(_*(32/w.pixelBitlength)),D=w.colors>1,U=0,R=0;for(var z=0;U<_;)I=E[U++],P[R++]=I>>>0&255,D&&(P[R++]=I>>>16&255,I=E[U++],P[R++]=I>>>0&255),B[z++]=I>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(P,w.width*w.colors,w.colors,x),F=r(B,w.width,1,x)):(h=P,F=B,Y=void 0)}if(w.colorType===3&&(b=this.color_spaces.INDEXED,N=w.palette,w.transparency.indexed)){var q=w.transparency.indexed,ne=0;for(U=0,_=q.length;U<_;++U)ne+=q[U];if((ne/=255)===_-1&&q.indexOf(0)!==-1)S=[q.indexOf(0)];else if(ne!==_){for(E=w.decodePixels(),B=new Uint8Array(E.length),U=0,_=E.length;U<_;U++)B[U]=q[E[U]];F=r(B,w.width,1)}}var M=function(W){var Z;switch(W){case e.image_compression.FAST:Z=11;break;case e.image_compression.MEDIUM:Z=13;break;case e.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(x);return Y===this.decode.FLATE_DECODE&&(H="/Predictor "+M+" "),H+="/Colors "+j+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(F&&this.__addimage__.isArrayBuffer(F)||this.__addimage__.isArrayBufferView(F))&&(F=this.__addimage__.arrayBufferToBinaryString(F)),{alias:g,data:h,index:p,filter:Y,decodeParameters:H,transparency:S,palette:N,sMask:F,predictor:M,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:b}}}})(vr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new tCe(t),i=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:o},d=new LT(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(vr.API),Ad.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ad.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){_a.log("bit decode error:"+r)}},Ad.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[i+4*o]=c.blue,this.data[i+4*o+1]=c.green,this.data[i+4*o+2]=c.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Ad.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},Ad.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Ad.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},Ad.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Ad.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Ad.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},Ad.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new Ad(t,!1),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new LT(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),cH.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new cH(t),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new LT(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),vr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],p=n[u+3];s[o++]=d,s[o++]=f,s[o++]=h,i[c++]=p}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},vr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},hx=vr.API,bC=hx.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,p=e.length,g=0,x=o[0]||c,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?b.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&ma(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,b.push((o[n]||x)/c+h)),g=n;return b},sH=hx.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return hx.processArabic&&(e=hx.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:bC.apply(this,arguments).reduce(function(s,i){return s+i},0)},iH=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var c=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(c,s)),o=0,c=s),o+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},oH=function(e,t,r){r||(r={});var n,a,s,i,o,c,u,d=[],f=[d],h=r.textIndent||0,p=0,g=0,x=e.split(" "),b=bC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(j){(j=j.split(/\s*\n/)).length>1?w=w.concat(j.map(function(N,F){return(F&&N.length?`
`:"")+N})):w.push(j[0])}),x=w,c=sH.apply(this,[y,r])}for(s=0,i=x.length;s<i;s++){var S=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),S=1),h+p+(g=(a=bC.apply(this,[n,r])).reduce(function(j,N){return j+N},0))>t||S){if(g>t){for(o=iH.apply(this,[n,a,t-(h+p),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(j,N){return j+N},0)}else d=[n];f.push(d),h=g+c,p=b}else d.push(n),h+=p+g,p=b}return u=c?function(j,N){return(N?y:"")+j.join(" ")}:function(j){return j.join(" ")},f.map(u)},hx.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(oH.apply(this,[n[o],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},i=e.__fontmetrics__.compress=function(f){var h,p,g,x,b=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=s(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(ma(h)!=="object")throw new Error("Don't know what to do with value type "+ma(h)+".");g=i(h)}b.push(p+g)}return b.push("}"),b.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,g,x,b={},y=1,w=b,S=[],j="",N="",F=f.length-1,E=1;E<F;E+=1)(x=f[E])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(S.push([w,g]),w={},g=void 0):x=="}"?((p=S.pop())[0][p[1]]=w,g=void 0,w=p[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(j+=r[x],g=parseInt(j,16)*y,y=1,j=""):j+=x:r.hasOwnProperty(x)?(N+=r[x],w[g]=parseInt(N,16)*y,y=1,g=void 0,N=""):N+=x;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(vr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(zy(o)),i.metadata=e.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(vr),function(e){function t(){return(Mr.canvg?Promise.resolve(Mr.canvg):Hv(()=>import("./index.es-BBt5zTZE.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}vr.API.addSvgAsImage=function(r,n,a,s,i,o,c,u){if(isNaN(n)||isNaN(a))throw _a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw _a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,c,u)})}}(),vr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},vr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),c=[],u=0,d=0,f=0;function h(g,x){var b,y=!1;for(b=0;b<g.length;b+=1)g[b]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=o.length;for(f=0;f<p;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(ma(e)==="object"){for(a in e)if(s=e[a],h(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(vr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var o,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(o=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(o=Object.keys(s).sort(function(p,g){return p-g})).length;f<h;f++)i=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var x=u();d({data:p,addLength1:!0,objectId:x}),c("endobj");var b=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+zx(o.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+zx(o.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+zx(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var b=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+zx(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+zx(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,p=f.activeFontKey,g=f.fonts,x=p,b="",y=0,w="",S=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(w=o,x=p,Array.isArray(o)&&(w=o[0]),y=0;y<w.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(i=g[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),i||w[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?b+=w[y]:b+="";var j="";return parseInt(x.slice(1))<14||S==="WinAnsiEncoding"?j=h(b,x).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(j=r(b,g[x])),f.isHex=!0,{text:j,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var i=s.text||"",o=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},c,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},c,{text:i})).text}])}(vr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(vr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,o,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,S=0;this.__bidiEngine__={};var j=function(D){var I=D.charCodeAt(),U=I>>8,R=x[U];return R!==void 0?f[256*R+(255&I)]:U===252||U===253?"AL":y.test(U)?"L":U===8?"R":"N"},N=function(D){for(var I,U=0;U<D.length;U++){if((I=j(D.charAt(U)))==="L")return!1;if(I==="R")return!0}return!1},F=function(D,I,U,R){var Y,H,X,V,z=I[R];switch(z){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(z="AN");break;case"AL":w=!0,z="R";break;case"WS":z="N";break;case"CS":R<1||R+1>=I.length||(Y=U[R-1])!=="EN"&&Y!=="AN"||(H=I[R+1])!=="EN"&&H!=="AN"?z="N":w&&(H="AN"),z=H===Y?H:"N";break;case"ES":z=(Y=R>0?U[R-1]:"B")==="EN"&&R+1<I.length&&I[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&U[R-1]==="EN"){z="EN";break}if(w){z="N";break}for(X=R+1,V=I.length;X<V&&I[X]==="ET";)X++;z=X<V&&I[X]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(V=I.length,X=R+1;X<V&&I[X]==="NSM";)X++;if(X<V){var q=D[R],ne=q>=1425&&q<=2303||q===64286;if(Y=I[X],ne&&(Y==="R"||Y==="AL")){z="R";break}}}z=R<1||(Y=I[R-1])==="B"?"N":U[R-1];break;case"B":w=!1,a=!0,z=S;break;case"S":s=!0,z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":z="N"}return z},E=function(D,I,U){var R=D.split("");return U&&_(R,U,{hiLevel:S}),R.reverse(),I&&I.reverse(),R.join("")},_=function(D,I,U){var R,Y,H,X,V,z=-1,q=D.length,ne=0,M=[],W=S?p:h,Z=[];for(w=!1,a=!1,s=!1,Y=0;Y<q;Y++)Z[Y]=j(D[Y]);for(H=0;H<q;H++){if(V=ne,M[H]=F(D,Z,M,H),R=240&(ne=W[V][g[M[H]]]),ne&=15,I[H]=X=W[ne][5],R>0)if(R===16){for(Y=z;Y<H;Y++)I[Y]=1;z=-1}else z=-1;if(W[ne][6])z===-1&&(z=H);else if(z>-1){for(Y=z;Y<H;Y++)I[Y]=X;z=-1}Z[H]==="B"&&(I[H]=0),U.hiLevel|=X}s&&function(re,ae,ce){for(var oe=0;oe<ce;oe++)if(re[oe]==="S"){ae[oe]=S;for(var le=oe-1;le>=0&&re[le]==="WS";le--)ae[le]=S}}(Z,I,q)},B=function(D,I,U,R,Y){if(!(Y.hiLevel<D)){if(D===1&&S===1&&!a)return I.reverse(),void(U&&U.reverse());for(var H,X,V,z,q=I.length,ne=0;ne<q;){if(R[ne]>=D){for(V=ne+1;V<q&&R[V]>=D;)V++;for(z=ne,X=V-1;z<X;z++,X--)H=I[z],I[z]=I[X],I[X]=H,U&&(H=U[z],U[z]=U[X],U[X]=H);ne=V}ne++}}},P=function(D,I,U){var R=D.split(""),Y={hiLevel:S};return U||(U=[]),_(R,U,Y),function(H,X,V){if(V.hiLevel!==0&&d)for(var z,q=0;q<H.length;q++)X[q]===1&&(z=b.indexOf(H[q]))>=0&&(H[q]=b[z+1])}(R,U,Y),B(2,R,I,U,Y),B(1,R,I,U,Y),R.join("")};return this.__bidiEngine__.doBidiReorder=function(D,I,U){if(function(Y,H){if(H)for(var X=0;X<Y.length;X++)H[X]=X;o===void 0&&(o=N(Y)),u===void 0&&(u=N(Y))}(D,I),i||!c||u)if(i&&c&&o^u)S=o?1:0,D=E(D,I,U);else if(!i&&c&&u)S=o?1:0,D=P(D,I,U),D=E(D,I);else if(!i||o||c||u){if(i&&!c&&o^u)D=E(D,I),o?(S=0,D=P(D,I,U)):(S=1,D=P(D,I,U),D=E(D,I));else if(i&&o&&!c&&u)S=1,D=P(D,I,U),D=E(D,I);else if(!i&&!c&&o^u){var R=d;o?(S=1,D=P(D,I,U),S=0,d=!1,D=P(D,I,U),d=R):(S=0,D=P(D,I,U),D=E(D,I),S=1,d=!1,D=P(D,I,U),d=R,D=E(D,I))}}else S=0,D=P(D,I,U);else S=o?1:0,D=P(D,I,U);return D},this.__bidiEngine__.setOptions=function(D){D&&(i=D.isInputVisual,c=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(vr),vr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new gm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new pCe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new rCe(this.contents),this.head=new aCe(this),this.name=new cCe(this),this.cmap=new Dee(this),this.toUnicode={},this.hhea=new sCe(this),this.maxp=new uCe(this),this.hmtx=new dCe(this),this.post=new oCe(this),this.os2=new iCe(this),this.loca=new mCe(this),this.glyf=new ACe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,c,u;for(u=[],i=0,o=(c=this.bbox).length;i<o;i++)t=c[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,o;for(i=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Md,gm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),rCe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,o,c,u,d,f,h,p,g,x;for(x in p=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(p)/c),i=Math.floor(f/c),d=16*p-f,(a=new gm).writeInt(this.scalarType),a.writeShort(p),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*p,u=a.pos+s,o=null,g=[],r)for(h=r[x],a.writeString(x),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),x==="head"&&(o=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=Pee.call(r);r.length%4;)r.push(0);for(s=new gm(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),nCe={}.hasOwnProperty,YA=function(e,t){for(var r in t)nCe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Md=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var aCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return YA(t,Md),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new gm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),uH=function(){function e(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,S;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,s=function(){var j,N;for(N=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)N.push(t.readUInt16());return N}(),t.pos+=2,x=function(){var j,N;for(N=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)N.push(t.readUInt16());return N}(),u=function(){var j,N;for(N=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)N.push(t.readUInt16());return N}(),d=function(){var j,N;for(N=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)N.push(t.readUInt16());return N}(),a=(this.length-t.pos+this.offset)/2,o=function(){var j,N;for(N=[],c=j=0;0<=a?j<a:j>a;c=0<=a?++j:--j)N.push(t.readUInt16());return N}(),c=y=0,S=s.length;y<S;c=++y)for(b=s[c],n=w=g=x[c];g<=b?w<=b:w>=b;n=g<=b?++w:--w)d[c]===0?i=n+u[c]:(i=o[d[c]/2+(n-g)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}t.pos=f}return e.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,S,j,N,F,E,_,B,P,D,I,U,R,Y,H,X,V,z,q,ne,M,W,Z,re,ae,ce,oe,le,pe,Be,te;switch(R=new gm,i=Object.keys(t).sort(function(_e,De){return _e-De}),r){case"macroman":for(x=0,b=function(){var _e=[];for(g=0;g<256;++g)_e.push(0);return _e}(),w={0:0},s={},Y=0,z=i.length;Y<z;Y++)w[le=t[a=i[Y]]]==null&&(w[le]=++x),s[a]={old:t[a],new:w[t[a]]},b[a]=w[t[a]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(b),{charMap:s,subtable:R.data,maxGlyphID:x+1};case"unicode":for(I=[],f=[],S=0,w={},n={},y=u=null,H=0,q=i.length;H<q;H++)w[N=t[a=i[H]]]==null&&(w[N]=++S),n[a]={old:N,new:w[N]},o=w[N]-a,y!=null&&o===u||(y&&f.push(y),I.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),I.push(65535),P=2*(B=I.length),_=2*Math.pow(Math.log(B)/Math.LN2,2),h=Math.log(_/2)/Math.LN2,E=2*B-_,c=[],F=[],p=[],g=X=0,ne=I.length;X<ne;g=++X){if(D=I[g],d=f[g],D===65535){c.push(0),F.push(0);break}if(D-(U=n[D].new)>=32768)for(c.push(0),F.push(2*(p.length+B-g)),a=V=D;D<=d?V<=d:V>=d;a=D<=d?++V:--V)p.push(n[a].new);else c.push(U-D),F.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*B+2*p.length),R.writeUInt16(0),R.writeUInt16(P),R.writeUInt16(_),R.writeUInt16(h),R.writeUInt16(E),ce=0,M=f.length;ce<M;ce++)a=f[ce],R.writeUInt16(a);for(R.writeUInt16(0),oe=0,W=I.length;oe<W;oe++)a=I[oe],R.writeUInt16(a);for(pe=0,Z=c.length;pe<Z;pe++)o=c[pe],R.writeUInt16(o);for(Be=0,re=F.length;Be<re;Be++)j=F[Be],R.writeUInt16(j);for(te=0,ae=p.length;te<ae;te++)x=p[te],R.writeUInt16(x);return{charMap:n,subtable:R.data,maxGlyphID:S+1}}},e}(),Dee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return YA(t,Md),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new uH(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=uH.encode(r,n),(s=new gm).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),sCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return YA(t,Md),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),iCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return YA(t,Md),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),oCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return YA(t,Md),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t}(),lCe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},cCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return YA(t,Md),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,o,c,u,d,f,h,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},i=f=0,h=a.length;f<h;i=++f)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new lCe(d,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),uCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return YA(t,Md),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),dCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return YA(t,Md),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,o,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,p;for(p=[],d=0,f=(h=this.metrics).length;d<f;d++)i=h[d],p.push(i.advance);return p}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),Pee=[].slice,ACe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return YA(t,Md),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,o,c,u,d,f,h;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(c=new gm(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=o===-1?new hCe(c,d,h,u,f):new fCe(c,o,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,o,c,u;for(o=[],i=[],c=0,u=n.length;c<u;c++)s=r[n[c]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},t}(),fCe=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),hCe=function(){function e(t,r,n,a,s){var i,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new gm(Pee.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),mCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return YA(t,Md),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),pCe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,o,c;for(a={},i=0,o=t.length;i<o;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y;for(a in n=Dee.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),p={0:0},y=n.charMap)p[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,i)g in p||(p[g]=h++);return d=function(w){var S,j;for(S in j={},w)j[w[S]]=S;return j}(p),f=Object.keys(d).sort(function(w,S){return w-S}),x=function(){var w,S,j;for(j=[],w=0,S=f.length;w<S;w++)o=f[w],j.push(d[o]);return j}(),s=this.font.glyf.encode(i,x,p),u=this.font.loca.encode(s.offsets,x),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();vr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function Ree(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=o*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*p,r),r+=u;return a}t-=a.getStringUnitWidth(e)*p}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var dH={},vv=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:dH=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,c=i.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return dH||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),U6=function(e,t){return U6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},U6(e,t)};function Lee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");U6(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Mee=function(e){Lee(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function gCe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function xCe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function WS(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function Uee(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=Qee(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function Qee(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function x4(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Hee(e,t){var r=x4(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function vCe(e,t,r,n,a){var s={},i=1.3333333333333333,o=MT(t,function(S){return a.getComputedStyle(S).backgroundColor});o!=null&&(s.fillColor=o);var c=MT(t,function(S){return a.getComputedStyle(S).color});c!=null&&(s.textColor=c);var u=yCe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=i*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var p=(parseFloat(h)||0)/f;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=MT(t,function(S){return a.getComputedStyle(S)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/i);var y=bCe(n);y&&(s.fontStyle=y);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(s.font=w),s}function bCe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function MT(e,t){var r=Vee(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Vee(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:Vee(e.parentElement,t):r}function yCe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=x4(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function zee(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var p=0;p<o.rows.length;p++){var g=o.rows[p],x=(i=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),b=wCe(c,u,r,g,n,a);b&&(x==="thead"?d.push(b):x==="tfoot"?h.push(b):f.push(b))}return{head:d,body:f,foot:h}}function wCe(e,t,r,n,a,s){for(var i=new Mee(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=vCe(e,c,t,u,r)),i.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:ECe(c)})}}var f=r.getComputedStyle(n);if(i.length>0&&(a||f.display!=="none"))return i}function ECe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function CCe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Gf(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s}function $ee(e,t){var r=new vv(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();CCe(a,n,t);var s=Gf({},a,n,t),i;typeof window<"u"&&(i=window);var o=_Ce(a,n,t),c=SCe(a,n,t),u=NCe(r,s),d=BCe(r,s,i);return{id:t.tableId,content:d,hooks:c,styles:o,settings:u}}function _Ce(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=Gf({},u,d,f)}else{var h=[e,t,r],p=h.map(function(g){return g[c]||{}});n[c]=Gf({},p[0],p[1],p[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function SCe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function NCe(e,t){var r,n,a,s,i,o,c,u,d,f,h,p,g=x4(t.margin,40/e.scaleFactor()),x=(r=kCe(e,t.startY))!==null&&r!==void 0?r:g.top,b;t.showFoot===!0?b="everyPage":t.showFoot===!1?b="never":b=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(s=t.useCss)!==null&&s!==void 0?s:!1,S=t.theme||(w?"plain":"striped"),j=!!t.horizontalPageBreak,N=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:w,theme:S,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:b,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:j,horizontalPageBreakRepeat:N,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function kCe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function BCe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var o=zee(e,t.html,r,i,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||TCe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function TCe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var c=0;c<i;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var Q6=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),jCe=function(e){Lee(t,e);function t(r,n,a,s,i,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=s,c.column=i,c.section=s.section,c}return t}(Q6),ICe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var o=0,c=r;o<c.length;o++){var u=c[o],d=new jCe(t,this,n,a,s,i),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new Q6(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new Q6(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),Gee=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof Mee&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),c=i.padding("vertical"),u=c+o;return u>a?u:a},0)},e}(),Kee=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=x4(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),FCe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function OCe(e,t){DCe(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=H6(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=H6(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),RCe(t),LCe(t,e),PCe(t)}function DCe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=Hee(e,t);t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=WS(u.text,u.styles,e)+f;var h=WS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/r;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function H6(e,t,r){for(var n=t,a=e.reduce(function(p,g){return p+g.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],o=i.wrappedWidth/a,c=n*o,u=i.width+c,d=r(i),f=u<d?d:u;t-=f-i.width,i.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(p){return t<0?p.width>r(p):!0});h.length&&(t=H6(h,t,r))}return t}function PCe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function RCe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(i-=1,i>1&&e.columns[o+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function LCe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=AH(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=AH(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function AH(e,t,r,n,a){return e.map(function(s){return MCe(s,t,r,n,a)})}function MCe(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=WS(e,r,n))return e;for(;t<WS(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function qee(e,t){var r=new vv(e),n=UCe(t,r.scaleFactor()),a=new ICe(t,n);return OCe(r,a),r.applyStyles(r.userStyles),a}function UCe(e,t){var r=e.content,n=HCe(r.columns);if(r.head.length===0){var a=fH(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=fH(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:UT("head",r.head,n,i,s,t),body:UT("body",r.body,n,i,s,t),foot:UT("foot",r.foot,n,i,s,t)}}function UT(e,t,r,n,a,s){var i={},o=t.map(function(c,u){for(var d=0,f={},h=0,p=0,g=0,x=r;g<x.length;g++){var b=x[g];if(i[b.index]==null||i[b.index].left===0)if(p===0){var y=void 0;Array.isArray(c)?y=c[b.index-h-d]:y=c[b.dataKey];var w={};typeof y=="object"&&!Array.isArray(y)&&(w=(y==null?void 0:y.styles)||{});var S=VCe(e,b,u,a,n,s,w),j=new Kee(y,S,e);f[b.dataKey]=j,f[b.index]=j,p=j.colSpan-1,i[b.index]={left:j.rowSpan-1,times:p}}else p--,h++;else i[b.index].left--,p=i[b.index].times,d++}return new Gee(c,u,e,f)});return o}function fH(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=QCe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function QCe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function HCe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new FCe(a,t,r)})}function VCe(e,t,r,n,a,s,i){var o=xCe(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=Gf({},o.table,o[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?Gf({},o.alternateRow,a.alternateRowStyles):{},p=gCe(s),g=Gf({},p,u,h,f);return Gf(g,i)}function zCe(e,t,r){var n;r===void 0&&(r={});var a=Hee(e,t),s=new Map,i=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var p=t.columns.find(function(g){return g.dataKey===h||g.index===h});p&&!s.has(p.index)&&(s.set(p.index,!0),i.push(p.index),o.push(t.columns[p.index]),a-=p.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,i.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function $Ce(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=zCe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function Wee(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,p){return h+p.height},0);o+=u}var d=new vv(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(Yee(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=Gf({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?GCe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return hh(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,p){var g=p===t.body.length-1;XS(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return hh(d,t,h,s,t.columns)})),Uee(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function GCe(e,t,r,n){var a=$Ce(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?$y(e,t,r,n,u.columns,!0):hH(e,t,n,u.columns),KCe(e,t,r,n,u.columns),QT(e,t,n,u.columns)});else for(var i=-1,o=a[0],c=function(){var u=i;if(o){e.applyStyles(e.userStyles);var d=o.columns;i>=0?$y(e,t,r,n,d,!0):hH(e,t,n,d),u=mH(e,t,i+1,n,d),QT(e,t,n,d)}var f=u-i;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),$y(e,t,r,n,h.columns,!0),mH(e,t,i+1,n,h.columns,f),QT(e,t,n,h.columns)}),i=u};i<t.body.length-1;)c()}function hH(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return hh(e,t,s,r,n)})}function KCe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;XS(e,t,s,o,r,n,a)})}function mH(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(c,u){var d=r+u===t.body.length-1,f=Xee(e,t,d,n);c.canEntireRowFit(f,a)&&(hh(e,t,c,n,a),o=r+u)}),o}function QT(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return hh(e,t,s,r,n)})}function qCe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function WCe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var c=o[i],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new Kee(u.raw,u.styles,u.section);d=Gf(d,u),d.text=[];var f=qCe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),p=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,p),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,p),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new Gee(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,b=r.columns;x<b.length;x++){var c=b[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function XCe(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function XS(e,t,r,n,a,s,i){var o=Xee(e,t,n,s);if(r.canEntireRowFit(o,i))hh(e,t,r,s,i);else if(XCe(e,r,o,t)){var c=WCe(r,o,t,e);hh(e,t,r,s,i),$y(e,t,a,s,i),XS(e,t,c,n,a,s,i)}else $y(e,t,a,s,i),XS(e,t,r,n,a,s,i)}function hh(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}YCe(e,c,n);var d=c.getTextPos();Ree(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function YCe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=Qee(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),JCe(e,t,r,n.lineWidth))}function JCe(e,t,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,s,i,o));function c(u,d,f,h,p){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,p,"S")}}function Xee(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function $y(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return hh(e,t,o,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;Uee(e,t,r,n),Yee(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return hh(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function Yee(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function ZCe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=$ee(this,n),s=qee(this,a);return Wee(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){Ree(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return vv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){vv.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new vv(this),s=zee(a,t,window,r,!1),i=s.head,o=s.body,c=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var HT;function go(e,t){var r=$ee(e,t),n=qee(e,r);Wee(e,n)}try{if(typeof window<"u"&&window){var pH=window,gH=pH.jsPDF||((HT=pH.jspdf)===null||HT===void 0?void 0:HT.jsPDF);gH&&ZCe(gH)}}catch(e){console.error("Could not apply autoTable plugin",e)}const gP="evaluaciones_pruebas",xP="evaluaciones_rubricas_estaticas",vP="evaluaciones_rubricas_interactivas",e_e="usuarios",v4=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},t_e=e=>{const t=Wt(Tt(pt,gP),Tr("fechaCreacion","desc"));return pr(t,n=>{e(n.docs.map(a=>v4(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},r_e=async e=>{try{const{id:t,...r}=e,n=dr(pt,gP,t);await Yi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},n_e=async e=>{try{await Za(dr(pt,gP,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},a_e=e=>{const t=Wt(Tt(pt,xP),Tr("fechaCreacion","desc"));return pr(t,n=>{e(n.docs.map(a=>v4(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},s_e=async e=>{try{const{id:t,...r}=e,n=dr(pt,xP,t);await Yi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},i_e=async e=>{try{await Za(dr(pt,xP,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},o_e=e=>{const t=Wt(Tt(pt,vP));return pr(t,n=>{e(n.docs.map(a=>v4(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},l_e=async e=>{try{const{id:t,...r}=e,n=dr(pt,vP,t);await Yi(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},c_e=async e=>{try{return(await Ln(Tt(pt,vP),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},u_e=e=>{const t=Wt(Tt(pt,e_e));return pr(t,n=>{e(n.docs.map(a=>v4(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},d_e=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],xH={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},W_=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},A_e=({open:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):l.jsxs(l.Fragment,{children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),f_e=({item:e,index:t,showAnswers:r})=>{const n=k.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&l.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[l.jsx("span",{children:"V ___ F ___"}),r&&l.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),l.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),l.jsx("div",{className:"space-y-2",children:n.map((a,s)=>l.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[l.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),l.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>l.jsxs("li",{children:[l.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),e.tipo==="Comprensión de lectura"&&l.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,c)=>{const u=r&&c===i.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+c),") ",o]})]},c)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},h_e=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(null),[a,s]=k.useState(!1),[i,o]=k.useState(!1),[c,u]=k.useState(null),[d,f]=k.useState(!1),h={nombre:"",asignatura:Ki[0],nivel:iQ[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[p,g]=k.useState(h);k.useEffect(()=>{const E=t_e(t);return()=>E()},[]);const x=E=>{const{name:_,value:B}=E.target;g(P=>({...P,[_]:B}))},b=E=>{g(_=>{const B={..._.tiposActividad};return B[E]?delete B[E]:B[E]=xH[E][0],{..._,tiposActividad:B}})},y=(E,_)=>{g(B=>({...B,tiposActividad:{...B.tiposActividad,[E]:_}}))},w=E=>{g(_=>{const B=_.selectedNee.includes(E)?_.selectedNee.filter(P=>P!==E):[..._.selectedNee,E];return{..._,selectedNee:B}})},S=async E=>{if(E.preventDefault(),!p.nombre.trim()||!p.contenido.trim()||Object.keys(p.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const _=Object.entries(p.tiposActividad).map(([D,I])=>`- ${I} ítem(s) de tipo '${D}'`).join(`
`),B=p.isNee&&p.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${p.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",P=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${p.nombre}
            - Asignatura: ${p.asignatura}
            - Nivel: ${p.nivel}
            - Contenido a evaluar: "${p.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${_}
            - Nivel de Dificultad General: ${p.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${B}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{mm("Evaluación - Pruebas");const D="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",X=(await(await new Bs(D).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(P)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(X);let z=0;V.actividades.forEach(ne=>{ne.items.forEach(M=>{z+=M.puntaje||0,M.tipo==="Comprensión de lectura"&&M.preguntas&&M.preguntas.forEach(W=>{z+=W.puntaje||0})})});const q={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:p.nombre,asignatura:p.asignatura,nivel:p.nivel,contenidoOriginal:p.contenido,tiposActividadOriginal:p.tiposActividad,objetivo:V.objetivo,instruccionesGenerales:V.instruccionesGenerales,puntajeIdeal:z,actividades:V.actividades,dificultad:p.dificultad,...p.isNee&&{adaptacionNEE:p.selectedNee}};n(q),f(!1)}catch(D){console.error(D),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},j=async()=>{if(r)try{await r_e(r),alert("Prueba guardada con éxito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},N=async E=>{if(window.confirm("¿Eliminar esta prueba?"))try{await n_e(E),(r==null?void 0:r.id)===E&&n(null)}catch(_){console.error(_),alert("No se pudo eliminar la prueba.")}},F=async E=>{o(!0);const _=new vr("p","mm","a4"),B=20,P=_.internal.pageSize.getHeight(),D=_.internal.pageSize.getWidth(),I=D-B*2;let U=B;const R=X=>{X.setFillColor(230,230,230),X.rect(0,0,D,25,"F"),X.setFontSize(9),X.setTextColor(0,0,0),X.text("LICEO INDUSTRIAL DE RECOLETA",B,15,{align:"left"}),X.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",D-B,15,{align:"right"})};R(_),U=30,_.setTextColor(0,0,0),_.setFont("helvetica","bold"),_.setFontSize(16),_.text(E.nombre,D/2,U,{align:"center"}),U+=10,go(_,{startY:U,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:X=>{R(_)}}),U=_.lastAutoTable.finalY+10;const Y=X=>{U+X>P-B&&(_.addPage(),R(_),U=B+15,_.setTextColor(0,0,0))},H=(X,V)=>{_.setFont("helvetica",V.isBold?"bold":"normal"),_.setFontSize(V.fontSize);const z=Array.isArray(X)?X.join(`
`):X;return _.getTextDimensions(z,{maxWidth:V.width}).h};for(const X of E.actividades){let V=H(X.titulo,{fontSize:12,width:I,isBold:!0})+H(X.instrucciones,{fontSize:10,width:I})+12;Y(V),_.setFont("helvetica","bold"),_.setFontSize(12),_.setTextColor(0,0,0),_.text(X.titulo,B,U),U+=8,_.setFont("helvetica","normal"),_.setFontSize(10);const z=_.splitTextToSize(X.instrucciones,I);_.text(z,B,U),U+=z.length*(10*.35*1.15)+4;for(const[q,ne]of X.items.entries()){let M=0;const W=`${q+1}. ${ne.pregunta} (${ne.puntaje} pts)`;switch(M+=H(W,{fontSize:10,width:I,isBold:!0}),ne.tipo){case"Selección múltiple":ne.opciones.forEach(ae=>{M+=H(ae,{fontSize:10,width:I-5})+3}),M+=7;break;case"Verdadero o Falso":M+=10;break;case"Desarrollo":M+=30;break;case"Términos pareados":M+=ne.pares.length*12+20;break;case"Comprensión de lectura":const re=ne;M+=H(re.texto,{fontSize:10,width:I-10})+10,re.preguntas.forEach(ae=>{const ce=`${ae.pregunta} (${ae.puntaje} pts)`;M+=H(ce,{fontSize:10,width:I-5,isBold:!0}),ae.tipo==="Selección múltiple"?(ae.opciones.forEach(oe=>{M+=H(oe,{fontSize:10,width:I-10})+3}),M+=7):ae.tipo==="Desarrollo"&&(M+=30),M+=5}),M+=15;break}Y(M),_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(0,0,0);const Z=_.splitTextToSize(W,I);if(_.text(Z,B,U),U+=Z.length*5+4,_.setFont("helvetica","normal"),ne.tipo==="Selección múltiple")ne.opciones.forEach((re,ae)=>{_.text(`${String.fromCharCode(65+ae)}) ${re}`,B+5,U),U+=7});else if(ne.tipo==="Verdadero o Falso")_.text("V ______    F ______",B+5,U),U+=10;else if(ne.tipo==="Desarrollo")_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(B,U,I,25,"FD"),U+=30;else if(ne.tipo==="Términos pareados"){const re=[...ne.pares.map(ce=>ce.definicion)].sort(()=>Math.random()-.5),ae=ne.pares.map((ce,oe)=>[`${oe+1}. ${ce.concepto}`,`(   ) ${re[oe]}`]);go(_,{startY:U,head:[["Columna A: Concepto","Columna B: Definición"]],body:ae,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:ce=>R(_)}),U=_.lastAutoTable.finalY+10}else if(ne.tipo==="Comprensión de lectura"){const re=ne;_.setFillColor(240,240,240),_.setDrawColor(200,200,200);const ae=_.splitTextToSize(re.texto,I-10),ce=ae.length*(10*.35*1.15)+8;_.rect(B,U,I,ce,"FD"),U+=4,_.setFont("helvetica","normal"),_.setFontSize(10),_.setTextColor(0,0,0),_.text(ae,B+5,U),U+=ce;for(const[oe,le]of re.preguntas.entries()){const pe=`${oe+1}. ${le.pregunta} (${le.puntaje} pts)`;_.setFont("helvetica","bold");const Be=_.splitTextToSize(pe,I-5);_.text(Be,B+5,U),U+=Be.length*5+4,_.setFont("helvetica","normal"),le.tipo==="Selección múltiple"?le.opciones.forEach((te,_e)=>{_.text(`${String.fromCharCode(65+_e)}) ${te}`,B+10,U),U+=7}):le.tipo==="Desarrollo"&&(_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(B+5,U,I-5,25,"FD"),U+=30)}}U+=5}}_.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[l.jsx(A_e,{open:!d})," ",l.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),l.jsx("button",{onClick:j,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),l.jsxs("button",{onClick:()=>F(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":l.jsx(WZ,{})," PDF"]})]})]}),l.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),l.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),l.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),l.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),l.jsxs("p",{className:"text-right",children:[l.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[l.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&l.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(E=>l.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),l.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),l.jsx("div",{className:"space-y-6",children:E.items.map((_,B)=>l.jsx(f_e,{item:_,index:B,showAnswers:d},_.id))})]},E.id))]})]}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),l.jsxs("form",{onSubmit:S,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombre",value:p.nombre,onChange:x,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),l.jsx("div",{}),l.jsx("select",{name:"asignatura",value:p.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Ki.map(E=>l.jsx("option",{children:E},E))}),l.jsx("select",{name:"nivel",value:p.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:iQ.map(E=>l.jsx("option",{children:E},E))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),l.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((E,_)=>l.jsx("button",{type:"button",onClick:()=>g(B=>({...B,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${_===0?"rounded-l-lg":""} ${_===2?"rounded-r-lg":""}
                                            ${p.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.isNee,onChange:E=>g(_=>({..._,isNee:E.target.checked,selectedNee:E.target.checked?_.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),p.isNee&&l.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:HS.map(E=>l.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.selectedNee.includes(E),onChange:()=>w(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),l.jsx("textarea",{name:"contenido",value:p.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"space-y-3",children:d_e.map(E=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:!!p.tiposActividad[E],onChange:()=>b(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),p.tiposActividad[E]&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),xH[E].map(_=>l.jsx("button",{type:"button",onClick:()=>y(E,_),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${p.tiposActividad[E]===_?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:_},_))]})]},E))}),c&&l.jsx("p",{className:"text-red-500 text-sm",children:c}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),l.jsx("div",{className:"space-y-2",children:e.length>0?e.map(E=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),l.jsx("button",{onClick:()=>N(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},m_e=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=k.useState(null),[i,o]=k.useState("list"),[c,u]=k.useState(!1),[d,f]=k.useState(""),h=async(N,F)=>{if(!N.trim()||!F.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const E=`Crea una rúbrica de evaluación detallada sobre "${N}" con el propósito de "${F}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{mm("Evaluación - Rúbricas");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",R=(await(await new Bs(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),Y=JSON.parse(R),H={id:crypto.randomUUID(),titulo:N,descripcion:F,fechaCreacion:new Date().toISOString(),dimensiones:Y.map(X=>({id:crypto.randomUUID(),nombre:X.dimension,niveles:{insuficiente:X.insuficiente,suficiente:X.suficiente,competente:X.competente,avanzado:X.avanzado}}))};s(H)}catch(B){console.error(B),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},p=async()=>{if(!d.trim()||!a)return;const N=crypto.randomUUID(),F={id:N,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(B=>B?{...B,dimensiones:[...B.dimensiones,F]}:null),f("");const E=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(B=>B.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{mm("Evaluación - Rúbricas (Añadir Dimensión)");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",R=(await(await new Bs(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),Y=JSON.parse(R);s(H=>H?{...H,dimensiones:H.dimensiones.map(X=>X.id===N?{...X,niveles:Y,isLoading:!1}:X)}:null)}catch(B){console.error("Error generating dimension descriptors:",B),alert("No se pudieron generar los descriptores."),s(P=>P?{...P,dimensiones:P.dimensiones.filter(D=>D.id!==N)}:null)}},g=()=>{if(!a)return;e.some(F=>F.id===a.id)?t(a):n(a),o("list"),s(null)},x=N=>{s(N),o("form")},b=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},y=(N,F,E)=>{a&&s(_=>_?{..._,dimensiones:_.dimensiones.map(B=>B.id!==N?B:F==="nombre"?{...B,nombre:E}:{...B,niveles:{...B.niveles,[F]:E}})}:null)},w=(N,F)=>{s(E=>E?{...E,[N]:F}:null)},S=N=>{a&&s(F=>F?{...F,dimensiones:F.dimensiones.filter(E=>E.id!==N)}:null)},j=()=>{if(!a)return null;const N="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",F=`${N} resize-none text-sm`;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),l.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),l.jsx("input",{value:a.titulo,onChange:E=>w("titulo",E.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${N} mt-1`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),l.jsx("textarea",{value:a.descripcion,onChange:E=>w("descripcion",E.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${N} mt-1`})]})]}),a.dimensiones.length===0&&l.jsx("div",{className:"text-center py-4",children:l.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:c||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:c?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>l.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(E=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 w-1/5",children:l.jsx("textarea",{value:E.nombre,onChange:_=>y(E.id,"nombre",_.target.value),rows:4,className:F})}),Object.keys(E.niveles).map(_=>l.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?l.jsx("div",{className:"flex justify-center items-center h-full",children:l.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):l.jsx("textarea",{value:E.niveles[_],onChange:B=>y(E.id,_,B.target.value),rows:4,className:F})},_)),l.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:l.jsx("button",{onClick:()=>S(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},E.id))})]})}),l.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),l.jsx("input",{value:d,onChange:E=>f(E.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${N} mt-1`})]}),l.jsx("button",{onClick:p,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),l.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:l.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),l.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(N=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:N.titulo}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:N.descripcion})]}),l.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>x(N),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>r(N.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},N.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):j()},p_e=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=k.useState([]),[a,s]=k.useState(null),[i,o]=k.useState(null),[c,u]=k.useState({rubricaEstaticaId:"",curso:""}),[d,f]=k.useState(null);k.useEffect(()=>{const w=o_e(n);return()=>w()},[]);const h=async w=>{w.preventDefault();const S=t.find(N=>N.id===c.rubricaEstaticaId);if(!S||!c.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const j={nombre:S.titulo,curso:c.curso,asignatura:"N/A",rubricaEstaticaId:S.id,resultados:{}};try{await c_e(j),u({rubricaEstaticaId:"",curso:""})}catch(N){console.error(N),alert("No se pudo crear la evaluación con rúbrica.")}},p=w=>{s(w),o(JSON.parse(JSON.stringify(w)))},g=(w,S,j)=>{i&&o(N=>{if(!N)return null;const F=JSON.parse(JSON.stringify(N));return F.resultados[w]||(F.resultados[w]={puntajes:{},feedback:""}),F.resultados[w].puntajes[S]=j,F})},x=async()=>{if(i)try{await l_e(i),s(i),alert("Cambios guardados.")}catch(w){console.error(w),alert("No se pudieron guardar los cambios.")}},b=k.useCallback(w=>{const S=i,j=t.find(P=>P.id===(S==null?void 0:S.rubricaEstaticaId));if(!S||!j)return{score:0,maxScore:0,grade:"N/A"};const N=j.dimensiones.length*4,F=S.resultados[w];if(!F)return{score:0,maxScore:N,grade:"1.0"};const E=Object.values(F.puntajes).reduce((P,D)=>P+D,0),_=1+6*(E/N),B=N>0?_.toFixed(1):"1.0";return{score:E,maxScore:N,grade:B}},[i,t]),y=async w=>{if(!i)return;const S=t.find(E=>E.id===i.rubricaEstaticaId),j=i.resultados[w];if(!S||!j||Object.keys(j.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(w);const F=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${S.dimensiones.map(E=>`${E.nombre}: ${j.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${S.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{mm("Evaluación - Rúbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",I=(await(await new Bs(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(F)).response).text();o(U=>{if(!U)return null;const R=JSON.parse(JSON.stringify(U));return R.resultados[w].feedback=I.replace(/(\*\*|\*)/g,""),R})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{f(null)}};if(a&&i){const w=t.find(j=>j.id===a.rubricaEstaticaId),S=e.filter(j=>j.profile===Kt.ESTUDIANTE&&W_(j.curso||"")===a.curso).map(j=>j.nombreCompleto).sort();return w?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),l.jsx("p",{className:"text-slate-500",children:a.curso})]}),l.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),w.dimensiones.map(j=>l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:j.nombre},j.id)),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),l.jsx("tbody",{children:S.map(j=>{var _;const{score:N,maxScore:F,grade:E}=b(j);return l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:j}),w.dimensiones.map(B=>l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:l.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(P=>{var D;return l.jsx("button",{onClick:()=>g(j,B.id,P),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((D=i.resultados[j])==null?void 0:D.puntajes[B.id])===P?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:P},P)})})},B.id)),l.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[N,"/",F]}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[l.jsx("p",{className:"text-xs w-full",children:((_=i.resultados[j])==null?void 0:_.feedback)||"Sin generar"}),l.jsx("button",{onClick:()=>y(j),disabled:d===j,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===j?"...":"Generar IA"})]})})]},j)})})]})}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):l.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",l.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),l.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("select",{value:c.rubricaEstaticaId,onChange:w=>u({...c,rubricaEstaticaId:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(w=>l.jsx("option",{value:w.id,children:w.titulo},w.id))]}),l.jsxs("select",{value:c.curso,onChange:w=>u({...c,curso:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un Curso"}),Ks.map(w=>l.jsx("option",{value:w,children:w},w))]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),l.jsx("div",{className:"space-y-2",children:r.map(w=>l.jsxs("button",{onClick:()=>p(w),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[l.jsx("p",{className:"font-semibold",children:w.nombre}),l.jsx("p",{className:"text-sm text-slate-500",children:w.curso})]},w.id))})]})]})},g_e=({allUsers:e})=>{const[t,r]=k.useState(""),n=k.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===Kt.ESTUDIANTE&&s.curso).map(s=>W_(s.curso)))).sort(),[e]),a=k.useMemo(()=>{const s=e.filter(i=>i.profile===Kt.ESTUDIANTE);return t?s.filter(i=>W_(i.curso||"")===t).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",l.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),l.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>l.jsx("option",{value:s,children:s},s))]})]}),l.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:W_(s.curso||"")}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},x_e=()=>{const[e,t]=k.useState("pruebas"),[r,n]=k.useState([]),[a,s]=k.useState([]),[i,o]=k.useState(!0);k.useEffect(()=>{o(!0);const f=u_e(n),h=a_e(p=>{s(p),o(!1)});return()=>{f(),h()}},[]);const c=async f=>{try{await s_e(f)}catch(h){console.error(h),alert("No se pudo guardar la rúbrica.")}},u=async f=>{try{await i_e(f)}catch(h){console.error(h),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:f,label:h})=>l.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return i?l.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),l.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),l.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),l.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),l.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&l.jsx(h_e,{}),e==="rubricas"&&l.jsx(m_e,{rubricas:a,onSave:c,onDelete:u,onCreate:c}),e==="rubricasInteractivas"&&l.jsx(p_e,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&l.jsx(g_e,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var YS={};YS.version="0.18.5";var Jee=1252,v_e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],bP={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},yP=function(e){v_e.indexOf(e)!=-1&&(Jee=bP[0]=e)};function b_e(){yP(1252)}var wd=function(e){yP(e)};function wP(){wd(1200),b_e()}function vH(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function y_e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function Zee(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var gy=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?y_e(e.slice(2)):t==254&&r==255?Zee(e.slice(2)):t==65279?e.slice(1):e},yC=function(t){return String.fromCharCode(t)},bH=function(t){return String.fromCharCode(t)},Nw,H0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function kw(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=H0.charAt(s)+H0.charAt(i)+H0.charAt(o)+H0.charAt(c);return t}function Pc(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=H0.indexOf(e.charAt(u++)),i=H0.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),o=H0.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=H0.indexOf(e.charAt(u++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var gn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),kh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function xm(e){return gn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function yH(e){return gn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var kc=function(t){return gn?kh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function b4(e){if(typeof ArrayBuffer>"u")return kc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function jm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function w_e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function EP(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return EP(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Gi=gn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:kh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function E_e(e){for(var t=[],r=0,n=e.length+250,a=xm(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=xm(65535),n=65530)}return t.push(a.slice(0,r)),Gi(t)}var vl=/\u0000/g,xy=/[\u0001-\u0006]/g;function bv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ed(e,t){var r=""+e;return r.length>=t?r:Cs("0",t-r.length)+r}function CP(e,t){var r=""+e;return r.length>=t?r:Cs(" ",t-r.length)+r}function JS(e,t){var r=""+e;return r.length>=t?r:r+Cs(" ",t-r.length)}function C_e(e,t){var r=""+Math.round(e);return r.length>=t?r:Cs("0",t-r.length)+r}function __e(e,t){var r=""+e;return r.length>=t?r:Cs("0",t-r.length)+r}var wH=Math.pow(2,32);function mx(e,t){if(e>wH||e<-wH)return C_e(e,t);var r=Math.round(e);return __e(r,t)}function ZS(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var EH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],VT=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function S_e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Rr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},CH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},N_e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function e5(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*i+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=i,i=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=s):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function Sp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=F_e(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var ete=new Date(1899,11,31,0,0,0),k_e=ete.getTime(),B_e=new Date(1900,2,1,0,0,0);function tte(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=B_e&&(r+=1440*60*1e3),(r-(k_e+(e.getTimezoneOffset()-ete.getTimezoneOffset())*6e4))/(1440*60*1e3)}function _P(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function T_e(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function j_e(e){var t=e<0?12:11,r=_P(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function I_e(e){var t=_P(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Bw(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=j_e(e):t===10?r=e.toFixed(10).substr(0,12):r=I_e(e),_P(T_e(r.toUpperCase()))}function ng(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Bw(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Du(14,tte(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function F_e(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function O_e(e,t,r,n){var a="",s=0,i=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return VT[r.m-1][1];case 5:return VT[r.m-1][0];default:return VT[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return EH[r.q][0];default:return EH[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ed(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=Ed(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?Ed(c,u):"";return d}function V0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var rte=/%/g;function D_e(e,t,r){var n=t.replace(rte,""),a=t.length-n.length;return th(e,n,r*Math.pow(10,2*a))+Cs("%",a)}function P_e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return th(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function nte(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+nte(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var ate=/# (\?+)( ?)\/( ?)(\d+)/;function R_e(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Cs(" ",e[1].length+1+e[4].length):CP(i,e[1].length)+e[2]+"/"+e[3]+Ed(o,e[4].length))}function L_e(e,t,r){return r+(t===0?"":""+t)+Cs(" ",e[1].length+2+e[4].length)}var ste=/^#*0*\.([0#]+)/,ite=/\).*[0#]/,ote=/\(###\) ###\\?-####/;function Al(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function _H(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function SH(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function M_e(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function U_e(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function gu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(ite)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?gu("n",n,r):"("+gu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return P_e(e,t,r);if(t.indexOf("%")!==-1)return D_e(e,t,r);if(t.indexOf("E")!==-1)return nte(t,r);if(t.charCodeAt(0)===36)return"$"+gu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+mx(c,t.length);if(t.match(/^[#?]+$/))return a=mx(r,0),a==="0"&&(a=""),a.length>t.length?a:Al(t.substr(0,t.length-a.length))+a;if(s=t.match(ate))return R_e(s,c,u);if(t.match(/^#+0+$/))return u+mx(c,t.length-t.indexOf("0"));if(s=t.match(ste))return a=_H(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Al(s[1])).replace(/\.$/,"."+Al(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+Cs("0",Al(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+_H(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+V0(mx(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+gu(e,t,-r):V0(""+(Math.floor(r)+M_e(r,s[1].length)))+"."+Ed(SH(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return gu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=bv(gu(e,t.replace(/[\\-]/g,""),r)),i=0,bv(bv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(ote))return a=gu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=e5(c,Math.pow(10,i)-1,!1),a=""+u,d=th("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=JS(o[2],i),d.length<s[4].length&&(d=Al(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=e5(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?CP(o[1],i)+s[2]+"/"+s[3]+JS(o[2],i):Cs(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=mx(r,0),t.length<=a.length?a:Al(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return Al(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=SH(r,s[1].length),r<0?"-"+gu(e,t,-r):V0(U_e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ed(0,3-g.length):"")+g})+"."+Ed(i,s[1].length);switch(t){case"###,##0.00":return gu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=V0(mx(c,0));return p!=="0"?u+p:"";case"###,###.00":return gu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return gu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Q_e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return th(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function H_e(e,t,r){var n=t.replace(rte,""),a=t.length-n.length;return th(e,n,r*Math.pow(10,2*a))+Cs("%",a)}function lte(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+lte(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function CA(e,t,r){if(e.charCodeAt(0)===40&&!t.match(ite)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?CA("n",n,r):"("+CA("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Q_e(e,t,r);if(t.indexOf("%")!==-1)return H_e(e,t,r);if(t.indexOf("E")!==-1)return lte(t,r);if(t.charCodeAt(0)===36)return"$"+CA(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Ed(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:Al(t.substr(0,t.length-a.length))+a;if(s=t.match(ate))return L_e(s,c,u);if(t.match(/^#+0+$/))return u+Ed(c,t.length-t.indexOf("0"));if(s=t.match(ste))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Al(s[1])).replace(/\.$/,"."+Al(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+Cs("0",Al(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+V0(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+CA(e,t,-r):V0(""+r)+"."+Cs("0",s[1].length);if(s=t.match(/^#,#*,#0/))return CA(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=bv(CA(e,t.replace(/[\\-]/g,""),r)),i=0,bv(bv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(ote))return a=CA(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=e5(c,Math.pow(10,i)-1,!1),a=""+u,d=th("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=JS(o[2],i),d.length<s[4].length&&(d=Al(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=e5(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?CP(o[1],i)+s[2]+"/"+s[3]+JS(o[2],i):Cs(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:Al(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return Al(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+CA(e,t,-r):V0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ed(0,3-g.length):"")+g})+"."+Ed(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=V0(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return CA(e,t.slice(0,t.lastIndexOf(".")),r)+Al(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function th(e,t,r){return(r|0)===r?CA(e,t,r):gu(e,t,r)}function V_e(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var cte=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function B1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":ZS(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(cte))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function z_e(e,t,r,n){for(var a=[],s="",i=0,o="",c="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!ZS(e,i))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var p=e.charAt(++i),g=p==="("||p===")"?p:"t";a[a.length]={t:g,v:p},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Sp(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Sp(t,r),u==null))return"";for(s=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:s},c=o;break;case"A":case"a":case"上":var x={t:o,v:o};if(u==null&&(u=Sp(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(x.v=u.H>=12?"下午":"上午"),x.t="T",i+=5,h="h"):(x.t="t",++i),u==null&&x.t==="T")return"";a[a.length]=x,c=o;break;case"[":for(s=o;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(cte)){if(u==null&&(u=Sp(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",B1(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<e.length&&(o=e.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},c=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++i;break}var b=0,y=0,w;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",b<1&&(b=1);break;case"s":(w=a[i].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[i].v.match(/[Hh]/)&&(b=1),b<2&&a[i].v.match(/[Mm]/)&&(b=2),b<3&&a[i].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var S="",j;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=O_e(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(j=i+1;a[j]!=null&&((o=a[j].t)==="?"||o==="D"||(o===" "||o==="t")&&a[j+1]!=null&&(a[j+1].t==="?"||a[j+1].t==="t"&&a[j+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[j].v==="/"||a[j].v===" "&&a[j+1]!=null&&a[j+1].t=="?"));)a[i].v+=a[j].v,a[j]={v:"",t:";"},++j;S+=a[i].v,i=j-1;break;case"G":a[i].t="t",a[i].v=ng(t,r);break}var N="",F,E;if(S.length>0){S.charCodeAt(0)==40?(F=t<0&&S.charCodeAt(0)===45?-t:t,E=th("n",S,F)):(F=t<0&&n>1?-t:t,E=th("n",S,F),F<0&&a[0]&&a[0].t=="t"&&(E=E.substr(1),a[0].v="-"+a[0].v)),j=E.length-1;var _=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){_=i;break}var B=a.length;if(_===a.length&&E.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(j>=a[i].v.length-1?(j-=a[i].v.length,a[i].v=E.substr(j+1,a[i].v.length)):j<0?a[i].v="":(a[i].v=E.substr(0,j+1),j=-1),a[i].t="t",B=i);j>=0&&B<a.length&&(a[B].v=E.substr(0,j+1)+a[B].v)}else if(_!==a.length&&E.indexOf("E")===-1){for(j=E.indexOf(".")-1,i=_;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===_?a[i].v.indexOf(".")-1:a[i].v.length-1,N=a[i].v.substr(d+1);d>=0;--d)j>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(N=E.charAt(j--)+N);a[i].v=N,a[i].t="t",B=i}for(j>=0&&B<a.length&&(a[B].v=E.substr(0,j+1)+a[B].v),j=E.indexOf(".")+1,i=_;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==_)){for(d=a[i].v.indexOf(".")>-1&&i===_?a[i].v.indexOf(".")+1:0,N=a[i].v.substr(0,d);d<a[i].v.length;++d)j<E.length&&(N+=E.charAt(j++));a[i].v=N,a[i].t="t",B=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(F=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=th(a[i].t,a[i].v,F),a[i].t="t");var P="";for(i=0;i!==a.length;++i)a[i]!=null&&(P+=a[i].v);return P}var NH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function kH(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function $_e(e,t){var r=V_e(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(NH),o=r[1].match(NH);return kH(t,i)?[n,r[0]]:kH(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function Du(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Rr)[e],n==null&&(n=r.table&&r.table[CH[e]]||Rr[CH[e]]),n==null&&(n=N_e[e]||"General");break}if(ZS(n,0))return ng(t,r);t instanceof Date&&(t=tte(t,r.date1904));var a=$_e(n,t);if(ZS(a[1]))return ng(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return z_e(a[1],t,r,a[0])}function rh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Rr[r]==null){t<0&&(t=r);continue}if(Rr[r]==e){t=r;break}}t<0&&(t=391)}return Rr[t]=e,t}function y4(e){for(var t=0;t!=392;++t)e[t]!==void 0&&rh(e[t],t)}function T1(){Rr=S_e()}var G_e={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},ute=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function K_e(e){var t=typeof e=="number"?Rr[e]:e;return t=t.replace(ute,"(\\d+)"),new RegExp("^"+t+"$")}function q_e(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,c=-1;(t.match(ute)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":i=p;break;case"s":c=p;break;case"m":i>=0?o=p:a=p;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var W_e=function(){var e={};e.version="1.2.0";function t(){for(var E=0,_=new Array(256),B=0;B!=256;++B)E=B,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,_[B]=E;return typeof Int32Array<"u"?new Int32Array(_):_}var r=t();function n(E){var _=0,B=0,P=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)D[P]=E[P];for(P=0;P!=256;++P)for(B=E[P],_=256+P;_<4096;_+=256)B=D[_]=B>>>8^E[B&255];var I=[];for(P=1;P!=16;++P)I[P-1]=typeof Int32Array<"u"?D.subarray(P*256,P*256+256):D.slice(P*256,P*256+256);return I}var a=n(r),s=a[0],i=a[1],o=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],g=a[9],x=a[10],b=a[11],y=a[12],w=a[13],S=a[14];function j(E,_){for(var B=_^-1,P=0,D=E.length;P<D;)B=B>>>8^r[(B^E.charCodeAt(P++))&255];return~B}function N(E,_){for(var B=_^-1,P=E.length-15,D=0;D<P;)B=S[E[D++]^B&255]^w[E[D++]^B>>8&255]^y[E[D++]^B>>16&255]^b[E[D++]^B>>>24]^x[E[D++]]^g[E[D++]]^p[E[D++]]^h[E[D++]]^f[E[D++]]^d[E[D++]]^u[E[D++]]^c[E[D++]]^o[E[D++]]^i[E[D++]]^s[E[D++]]^r[E[D++]];for(P+=15;D<P;)B=B>>>8^r[(B^E[D++])&255];return~B}function F(E,_){for(var B=_^-1,P=0,D=E.length,I=0,U=0;P<D;)I=E.charCodeAt(P++),I<128?B=B>>>8^r[(B^I)&255]:I<2048?(B=B>>>8^r[(B^(192|I>>6&31))&255],B=B>>>8^r[(B^(128|I&63))&255]):I>=55296&&I<57344?(I=(I&1023)+64,U=E.charCodeAt(P++)&1023,B=B>>>8^r[(B^(240|I>>8&7))&255],B=B>>>8^r[(B^(128|I>>2&63))&255],B=B>>>8^r[(B^(128|U>>6&15|(I&3)<<4))&255],B=B>>>8^r[(B^(128|U&63))&255]):(B=B>>>8^r[(B^(224|I>>12&15))&255],B=B>>>8^r[(B^(128|I>>6&63))&255],B=B>>>8^r[(B^(128|I&63))&255]);return~B}return e.table=r,e.bstr=j,e.buf=N,e.str=F,e}(),Cr=function(){var t={};t.version="1.2.1";function r(he,Te){for(var Ce=he.split("/"),we=Te.split("/"),Se=0,je=0,Xe=Math.min(Ce.length,we.length);Se<Xe;++Se){if(je=Ce[Se].length-we[Se].length)return je;if(Ce[Se]!=we[Se])return Ce[Se]<we[Se]?-1:1}return Ce.length-we.length}function n(he){if(he.charAt(he.length-1)=="/")return he.slice(0,-1).indexOf("/")===-1?he:n(he.slice(0,-1));var Te=he.lastIndexOf("/");return Te===-1?he:he.slice(0,Te+1)}function a(he){if(he.charAt(he.length-1)=="/")return a(he.slice(0,-1));var Te=he.lastIndexOf("/");return Te===-1?he:he.slice(Te+1)}function s(he,Te){typeof Te=="string"&&(Te=new Date(Te));var Ce=Te.getHours();Ce=Ce<<6|Te.getMinutes(),Ce=Ce<<5|Te.getSeconds()>>>1,he.write_shift(2,Ce);var we=Te.getFullYear()-1980;we=we<<4|Te.getMonth()+1,we=we<<5|Te.getDate(),he.write_shift(2,we)}function i(he){var Te=he.read_shift(2)&65535,Ce=he.read_shift(2)&65535,we=new Date,Se=Ce&31;Ce>>>=5;var je=Ce&15;Ce>>>=4,we.setMilliseconds(0),we.setFullYear(Ce+1980),we.setMonth(je-1),we.setDate(Se);var Xe=Te&31;Te>>>=5;var dt=Te&63;return Te>>>=6,we.setHours(Te),we.setMinutes(dt),we.setSeconds(Xe<<1),we}function o(he){mo(he,0);for(var Te={},Ce=0;he.l<=he.length-4;){var we=he.read_shift(2),Se=he.read_shift(2),je=he.l+Se,Xe={};switch(we){case 21589:Ce=he.read_shift(1),Ce&1&&(Xe.mtime=he.read_shift(4)),Se>5&&(Ce&2&&(Xe.atime=he.read_shift(4)),Ce&4&&(Xe.ctime=he.read_shift(4))),Xe.mtime&&(Xe.mt=new Date(Xe.mtime*1e3));break}he.l=je,Te[we]=Xe}return Te}var c;function u(){return c||(c={})}function d(he,Te){if(he[0]==80&&he[1]==75)return hn(he,Te);if((he[0]|32)==109&&(he[1]|32)==105)return wt(he,Te);if(he.length<512)throw new Error("CFB file size "+he.length+" < 512");var Ce=3,we=512,Se=0,je=0,Xe=0,dt=0,$e=0,rt=[],st=he.slice(0,512);mo(st,0);var Ft=f(st);switch(Ce=Ft[0],Ce){case 3:we=512;break;case 4:we=4096;break;case 0:if(Ft[1]==0)return hn(he,Te);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ce)}we!==512&&(st=he.slice(0,we),mo(st,28));var Vt=he.slice(0,we);h(st,Ce);var Yt=st.read_shift(4,"i");if(Ce===3&&Yt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Yt);st.l+=4,Xe=st.read_shift(4,"i"),st.l+=4,st.chk("00100000","Mini Stream Cutoff Size: "),dt=st.read_shift(4,"i"),Se=st.read_shift(4,"i"),$e=st.read_shift(4,"i"),je=st.read_shift(4,"i");for(var Ht=-1,zt=0;zt<109&&(Ht=st.read_shift(4,"i"),!(Ht<0));++zt)rt[zt]=Ht;var Sr=p(he,we);b($e,je,Sr,we,rt);var sn=w(Sr,Xe,rt,we);sn[Xe].name="!Directory",Se>0&&dt!==U&&(sn[dt].name="!MiniFAT"),sn[rt[0]].name="!FAT",sn.fat_addrs=rt,sn.ssz=we;var on={},An=[],fs=[],bo=[];S(Xe,sn,Sr,An,Se,on,fs,dt),g(fs,bo,An),An.shift();var hs={FileIndex:fs,FullPaths:bo};return Te&&Te.raw&&(hs.raw={header:Vt,sectors:Sr}),hs}function f(he){if(he[he.l]==80&&he[he.l+1]==75)return[0,0];he.chk(R,"Header Signature: "),he.l+=16;var Te=he.read_shift(2,"u");return[he.read_shift(2,"u"),Te]}function h(he,Te){var Ce=9;switch(he.l+=2,Ce=he.read_shift(2)){case 9:if(Te!=3)throw new Error("Sector Shift: Expected 9 saw "+Ce);break;case 12:if(Te!=4)throw new Error("Sector Shift: Expected 12 saw "+Ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ce)}he.chk("0600","Mini Sector Shift: "),he.chk("000000000000","Reserved: ")}function p(he,Te){for(var Ce=Math.ceil(he.length/Te)-1,we=[],Se=1;Se<Ce;++Se)we[Se-1]=he.slice(Se*Te,(Se+1)*Te);return we[Ce-1]=he.slice(Ce*Te),we}function g(he,Te,Ce){for(var we=0,Se=0,je=0,Xe=0,dt=0,$e=Ce.length,rt=[],st=[];we<$e;++we)rt[we]=st[we]=we,Te[we]=Ce[we];for(;dt<st.length;++dt)we=st[dt],Se=he[we].L,je=he[we].R,Xe=he[we].C,rt[we]===we&&(Se!==-1&&rt[Se]!==Se&&(rt[we]=rt[Se]),je!==-1&&rt[je]!==je&&(rt[we]=rt[je])),Xe!==-1&&(rt[Xe]=we),Se!==-1&&we!=rt[we]&&(rt[Se]=rt[we],st.lastIndexOf(Se)<dt&&st.push(Se)),je!==-1&&we!=rt[we]&&(rt[je]=rt[we],st.lastIndexOf(je)<dt&&st.push(je));for(we=1;we<$e;++we)rt[we]===we&&(je!==-1&&rt[je]!==je?rt[we]=rt[je]:Se!==-1&&rt[Se]!==Se&&(rt[we]=rt[Se]));for(we=1;we<$e;++we)if(he[we].type!==0){if(dt=we,dt!=rt[dt])do dt=rt[dt],Te[we]=Te[dt]+"/"+Te[we];while(dt!==0&&rt[dt]!==-1&&dt!=rt[dt]);rt[we]=-1}for(Te[0]+="/",we=1;we<$e;++we)he[we].type!==2&&(Te[we]+="/")}function x(he,Te,Ce){for(var we=he.start,Se=he.size,je=[],Xe=we;Ce&&Se>0&&Xe>=0;)je.push(Te.slice(Xe*I,Xe*I+I)),Se-=I,Xe=wp(Ce,Xe*4);return je.length===0?Et(0):Gi(je).slice(0,he.size)}function b(he,Te,Ce,we,Se){var je=U;if(he===U){if(Te!==0)throw new Error("DIFAT chain shorter than expected")}else if(he!==-1){var Xe=Ce[he],dt=(we>>>2)-1;if(!Xe)return;for(var $e=0;$e<dt&&(je=wp(Xe,$e*4))!==U;++$e)Se.push(je);b(wp(Xe,we-4),Te-1,Ce,we,Se)}}function y(he,Te,Ce,we,Se){var je=[],Xe=[];Se||(Se=[]);var dt=we-1,$e=0,rt=0;for($e=Te;$e>=0;){Se[$e]=!0,je[je.length]=$e,Xe.push(he[$e]);var st=Ce[Math.floor($e*4/we)];if(rt=$e*4&dt,we<4+rt)throw new Error("FAT boundary crossed: "+$e+" 4 "+we);if(!he[st])break;$e=wp(he[st],rt)}return{nodes:je,data:UH([Xe])}}function w(he,Te,Ce,we){var Se=he.length,je=[],Xe=[],dt=[],$e=[],rt=we-1,st=0,Ft=0,Vt=0,Yt=0;for(st=0;st<Se;++st)if(dt=[],Vt=st+Te,Vt>=Se&&(Vt-=Se),!Xe[Vt]){$e=[];var Ht=[];for(Ft=Vt;Ft>=0;){Ht[Ft]=!0,Xe[Ft]=!0,dt[dt.length]=Ft,$e.push(he[Ft]);var zt=Ce[Math.floor(Ft*4/we)];if(Yt=Ft*4&rt,we<4+Yt)throw new Error("FAT boundary crossed: "+Ft+" 4 "+we);if(!he[zt]||(Ft=wp(he[zt],Yt),Ht[Ft]))break}je[Vt]={nodes:dt,data:UH([$e])}}return je}function S(he,Te,Ce,we,Se,je,Xe,dt){for(var $e=0,rt=we.length?2:0,st=Te[he].data,Ft=0,Vt=0,Yt;Ft<st.length;Ft+=128){var Ht=st.slice(Ft,Ft+128);mo(Ht,64),Vt=Ht.read_shift(2),Yt=IP(Ht,0,Vt-rt),we.push(Yt);var zt={name:Yt,type:Ht.read_shift(1),color:Ht.read_shift(1),L:Ht.read_shift(4,"i"),R:Ht.read_shift(4,"i"),C:Ht.read_shift(4,"i"),clsid:Ht.read_shift(16),state:Ht.read_shift(4,"i"),start:0,size:0},Sr=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);Sr!==0&&(zt.ct=j(Ht,Ht.l-8));var sn=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);sn!==0&&(zt.mt=j(Ht,Ht.l-8)),zt.start=Ht.read_shift(4,"i"),zt.size=Ht.read_shift(4,"i"),zt.size<0&&zt.start<0&&(zt.size=zt.type=0,zt.start=U,zt.name=""),zt.type===5?($e=zt.start,Se>0&&$e!==U&&(Te[$e].name="!StreamData")):zt.size>=4096?(zt.storage="fat",Te[zt.start]===void 0&&(Te[zt.start]=y(Ce,zt.start,Te.fat_addrs,Te.ssz)),Te[zt.start].name=zt.name,zt.content=Te[zt.start].data.slice(0,zt.size)):(zt.storage="minifat",zt.size<0?zt.size=0:$e!==U&&zt.start!==U&&Te[$e]&&(zt.content=x(zt,Te[$e].data,(Te[dt]||{}).data))),zt.content&&mo(zt.content,0),je[Yt]=zt,Xe.push(zt)}}function j(he,Te){return new Date((_c(he,Te+4)/1e7*Math.pow(2,32)+_c(he,Te)/1e7-11644473600)*1e3)}function N(he,Te){return u(),d(c.readFileSync(he),Te)}function F(he,Te){var Ce=Te&&Te.type;switch(Ce||gn&&Buffer.isBuffer(he)&&(Ce="buffer"),Ce||"base64"){case"file":return N(he,Te);case"base64":return d(kc(Pc(he)),Te);case"binary":return d(kc(he),Te)}return d(he,Te)}function E(he,Te){var Ce=Te||{},we=Ce.root||"Root Entry";if(he.FullPaths||(he.FullPaths=[]),he.FileIndex||(he.FileIndex=[]),he.FullPaths.length!==he.FileIndex.length)throw new Error("inconsistent CFB structure");he.FullPaths.length===0&&(he.FullPaths[0]=we+"/",he.FileIndex[0]={name:we,type:5}),Ce.CLSID&&(he.FileIndex[0].clsid=Ce.CLSID),_(he)}function _(he){var Te="Sh33tJ5";if(!Cr.find(he,"/"+Te)){var Ce=Et(4);Ce[0]=55,Ce[1]=Ce[3]=50,Ce[2]=54,he.FileIndex.push({name:Te,type:2,content:Ce,size:4,L:69,R:69,C:69}),he.FullPaths.push(he.FullPaths[0]+Te),B(he)}}function B(he,Te){E(he);for(var Ce=!1,we=!1,Se=he.FullPaths.length-1;Se>=0;--Se){var je=he.FileIndex[Se];switch(je.type){case 0:we?Ce=!0:(he.FileIndex.pop(),he.FullPaths.pop());break;case 1:case 2:case 5:we=!0,isNaN(je.R*je.L*je.C)&&(Ce=!0),je.R>-1&&je.L>-1&&je.R==je.L&&(Ce=!0);break;default:Ce=!0;break}}if(!(!Ce&&!Te)){var Xe=new Date(1987,1,19),dt=0,$e=Object.create?Object.create(null):{},rt=[];for(Se=0;Se<he.FullPaths.length;++Se)$e[he.FullPaths[Se]]=!0,he.FileIndex[Se].type!==0&&rt.push([he.FullPaths[Se],he.FileIndex[Se]]);for(Se=0;Se<rt.length;++Se){var st=n(rt[Se][0]);we=$e[st],we||(rt.push([st,{name:a(st).replace("/",""),type:1,clsid:H,ct:Xe,mt:Xe,content:null}]),$e[st]=!0)}for(rt.sort(function(Yt,Ht){return r(Yt[0],Ht[0])}),he.FullPaths=[],he.FileIndex=[],Se=0;Se<rt.length;++Se)he.FullPaths[Se]=rt[Se][0],he.FileIndex[Se]=rt[Se][1];for(Se=0;Se<rt.length;++Se){var Ft=he.FileIndex[Se],Vt=he.FullPaths[Se];if(Ft.name=a(Vt).replace("/",""),Ft.L=Ft.R=Ft.C=-(Ft.color=1),Ft.size=Ft.content?Ft.content.length:0,Ft.start=0,Ft.clsid=Ft.clsid||H,Se===0)Ft.C=rt.length>1?1:-1,Ft.size=0,Ft.type=5;else if(Vt.slice(-1)=="/"){for(dt=Se+1;dt<rt.length&&n(he.FullPaths[dt])!=Vt;++dt);for(Ft.C=dt>=rt.length?-1:dt,dt=Se+1;dt<rt.length&&n(he.FullPaths[dt])!=n(Vt);++dt);Ft.R=dt>=rt.length?-1:dt,Ft.type=1}else n(he.FullPaths[Se+1]||"")==n(Vt)&&(Ft.R=Se+1),Ft.type=2}}}function P(he,Te){var Ce=Te||{};if(Ce.fileType=="mad")return bt(he,Ce);switch(B(he),Ce.fileType){case"zip":return Ba(he,Ce)}var we=function(Yt){for(var Ht=0,zt=0,Sr=0;Sr<Yt.FileIndex.length;++Sr){var sn=Yt.FileIndex[Sr];if(sn.content){var on=sn.content.length;on>0&&(on<4096?Ht+=on+63>>6:zt+=on+511>>9)}}for(var An=Yt.FullPaths.length+3>>2,fs=Ht+7>>3,bo=Ht+127>>7,hs=fs+zt+An+bo,Js=hs+127>>7,js=Js<=109?0:Math.ceil((Js-109)/127);hs+Js+js+127>>7>Js;)js=++Js<=109?0:Math.ceil((Js-109)/127);var pi=[1,js,Js,bo,An,zt,Ht,0];return Yt.FileIndex[0].size=Ht<<6,pi[7]=(Yt.FileIndex[0].start=pi[0]+pi[1]+pi[2]+pi[3]+pi[4]+pi[5])+(pi[6]+7>>3),pi}(he),Se=Et(we[7]<<9),je=0,Xe=0;{for(je=0;je<8;++je)Se.write_shift(1,Y[je]);for(je=0;je<8;++je)Se.write_shift(2,0);for(Se.write_shift(2,62),Se.write_shift(2,3),Se.write_shift(2,65534),Se.write_shift(2,9),Se.write_shift(2,6),je=0;je<3;++je)Se.write_shift(2,0);for(Se.write_shift(4,0),Se.write_shift(4,we[2]),Se.write_shift(4,we[0]+we[1]+we[2]+we[3]-1),Se.write_shift(4,0),Se.write_shift(4,4096),Se.write_shift(4,we[3]?we[0]+we[1]+we[2]-1:U),Se.write_shift(4,we[3]),Se.write_shift(-4,we[1]?we[0]-1:U),Se.write_shift(4,we[1]),je=0;je<109;++je)Se.write_shift(-4,je<we[2]?we[1]+je:-1)}if(we[1])for(Xe=0;Xe<we[1];++Xe){for(;je<236+Xe*127;++je)Se.write_shift(-4,je<we[2]?we[1]+je:-1);Se.write_shift(-4,Xe===we[1]-1?U:Xe+1)}var dt=function(Yt){for(Xe+=Yt;je<Xe-1;++je)Se.write_shift(-4,je+1);Yt&&(++je,Se.write_shift(-4,U))};for(Xe=je=0,Xe+=we[1];je<Xe;++je)Se.write_shift(-4,X.DIFSECT);for(Xe+=we[2];je<Xe;++je)Se.write_shift(-4,X.FATSECT);dt(we[3]),dt(we[4]);for(var $e=0,rt=0,st=he.FileIndex[0];$e<he.FileIndex.length;++$e)st=he.FileIndex[$e],st.content&&(rt=st.content.length,!(rt<4096)&&(st.start=Xe,dt(rt+511>>9)));for(dt(we[6]+7>>3);Se.l&511;)Se.write_shift(-4,X.ENDOFCHAIN);for(Xe=je=0,$e=0;$e<he.FileIndex.length;++$e)st=he.FileIndex[$e],st.content&&(rt=st.content.length,!(!rt||rt>=4096)&&(st.start=Xe,dt(rt+63>>6)));for(;Se.l&511;)Se.write_shift(-4,X.ENDOFCHAIN);for(je=0;je<we[4]<<2;++je){var Ft=he.FullPaths[je];if(!Ft||Ft.length===0){for($e=0;$e<17;++$e)Se.write_shift(4,0);for($e=0;$e<3;++$e)Se.write_shift(4,-1);for($e=0;$e<12;++$e)Se.write_shift(4,0);continue}st=he.FileIndex[je],je===0&&(st.start=st.size?st.start-1:U);var Vt=je===0&&Ce.root||st.name;if(rt=2*(Vt.length+1),Se.write_shift(64,Vt,"utf16le"),Se.write_shift(2,rt),Se.write_shift(1,st.type),Se.write_shift(1,st.color),Se.write_shift(-4,st.L),Se.write_shift(-4,st.R),Se.write_shift(-4,st.C),st.clsid)Se.write_shift(16,st.clsid,"hex");else for($e=0;$e<4;++$e)Se.write_shift(4,0);Se.write_shift(4,st.state||0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,st.start),Se.write_shift(4,st.size),Se.write_shift(4,0)}for(je=1;je<he.FileIndex.length;++je)if(st=he.FileIndex[je],st.size>=4096)if(Se.l=st.start+1<<9,gn&&Buffer.isBuffer(st.content))st.content.copy(Se,Se.l,0,st.size),Se.l+=st.size+511&-512;else{for($e=0;$e<st.size;++$e)Se.write_shift(1,st.content[$e]);for(;$e&511;++$e)Se.write_shift(1,0)}for(je=1;je<he.FileIndex.length;++je)if(st=he.FileIndex[je],st.size>0&&st.size<4096)if(gn&&Buffer.isBuffer(st.content))st.content.copy(Se,Se.l,0,st.size),Se.l+=st.size+63&-64;else{for($e=0;$e<st.size;++$e)Se.write_shift(1,st.content[$e]);for(;$e&63;++$e)Se.write_shift(1,0)}if(gn)Se.l=Se.length;else for(;Se.l<Se.length;)Se.write_shift(1,0);return Se}function D(he,Te){var Ce=he.FullPaths.map(function($e){return $e.toUpperCase()}),we=Ce.map(function($e){var rt=$e.split("/");return rt[rt.length-($e.slice(-1)=="/"?2:1)]}),Se=!1;Te.charCodeAt(0)===47?(Se=!0,Te=Ce[0].slice(0,-1)+Te):Se=Te.indexOf("/")!==-1;var je=Te.toUpperCase(),Xe=Se===!0?Ce.indexOf(je):we.indexOf(je);if(Xe!==-1)return he.FileIndex[Xe];var dt=!je.match(xy);for(je=je.replace(vl,""),dt&&(je=je.replace(xy,"!")),Xe=0;Xe<Ce.length;++Xe)if((dt?Ce[Xe].replace(xy,"!"):Ce[Xe]).replace(vl,"")==je||(dt?we[Xe].replace(xy,"!"):we[Xe]).replace(vl,"")==je)return he.FileIndex[Xe];return null}var I=64,U=-2,R="d0cf11e0a1b11ae1",Y=[208,207,17,224,161,177,26,225],H="00000000000000000000000000000000",X={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:R,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:H,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function V(he,Te,Ce){u();var we=P(he,Ce);c.writeFileSync(Te,we)}function z(he){for(var Te=new Array(he.length),Ce=0;Ce<he.length;++Ce)Te[Ce]=String.fromCharCode(he[Ce]);return Te.join("")}function q(he,Te){var Ce=P(he,Te);switch(Te&&Te.type||"buffer"){case"file":return u(),c.writeFileSync(Te.filename,Ce),Ce;case"binary":return typeof Ce=="string"?Ce:z(Ce);case"base64":return kw(typeof Ce=="string"?Ce:z(Ce));case"buffer":if(gn)return Buffer.isBuffer(Ce)?Ce:kh(Ce);case"array":return typeof Ce=="string"?kc(Ce):Ce}return Ce}var ne;function M(he){try{var Te=he.InflateRaw,Ce=new Te;if(Ce._processChunk(new Uint8Array([3,0]),Ce._finishFlushFlag),Ce.bytesRead)ne=he;else throw new Error("zlib does not expose bytesRead")}catch(we){console.error("cannot use native zlib: "+(we.message||we))}}function W(he,Te){if(!ne)return Or(he,Te);var Ce=ne.InflateRaw,we=new Ce,Se=we._processChunk(he.slice(he.l),we._finishFlushFlag);return he.l+=we.bytesRead,Se}function Z(he){return ne?ne.deflateRawSync(he):Qt(he)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function oe(he){var Te=(he<<1|he<<11)&139536|(he<<5|he<<15)&558144;return(Te>>16|Te>>8|Te)&255}for(var le=typeof Uint8Array<"u",pe=le?new Uint8Array(256):[],Be=0;Be<256;++Be)pe[Be]=oe(Be);function te(he,Te){var Ce=pe[he&255];return Te<=8?Ce>>>8-Te:(Ce=Ce<<8|pe[he>>8&255],Te<=16?Ce>>>16-Te:(Ce=Ce<<8|pe[he>>16&255],Ce>>>24-Te))}function _e(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=6?0:he[we+1]<<8))>>>Ce&3}function De(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=5?0:he[we+1]<<8))>>>Ce&7}function Ne(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=4?0:he[we+1]<<8))>>>Ce&15}function fe(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=3?0:he[we+1]<<8))>>>Ce&31}function Ie(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=1?0:he[we+1]<<8))>>>Ce&127}function Ue(he,Te,Ce){var we=Te&7,Se=Te>>>3,je=(1<<Ce)-1,Xe=he[Se]>>>we;return Ce<8-we||(Xe|=he[Se+1]<<8-we,Ce<16-we)||(Xe|=he[Se+2]<<16-we,Ce<24-we)||(Xe|=he[Se+3]<<24-we),Xe&je}function Ye(he,Te,Ce){var we=Te&7,Se=Te>>>3;return we<=5?he[Se]|=(Ce&7)<<we:(he[Se]|=Ce<<we&255,he[Se+1]=(Ce&7)>>8-we),Te+3}function ye(he,Te,Ce){var we=Te&7,Se=Te>>>3;return Ce=(Ce&1)<<we,he[Se]|=Ce,Te+1}function Oe(he,Te,Ce){var we=Te&7,Se=Te>>>3;return Ce<<=we,he[Se]|=Ce&255,Ce>>>=8,he[Se+1]=Ce,Te+8}function Re(he,Te,Ce){var we=Te&7,Se=Te>>>3;return Ce<<=we,he[Se]|=Ce&255,Ce>>>=8,he[Se+1]=Ce&255,he[Se+2]=Ce>>>8,Te+16}function qe(he,Te){var Ce=he.length,we=2*Ce>Te?2*Ce:Te+5,Se=0;if(Ce>=Te)return he;if(gn){var je=yH(we);if(he.copy)he.copy(je);else for(;Se<he.length;++Se)je[Se]=he[Se];return je}else if(le){var Xe=new Uint8Array(we);if(Xe.set)Xe.set(he);else for(;Se<Ce;++Se)Xe[Se]=he[Se];return Xe}return he.length=we,he}function Ze(he){for(var Te=new Array(he),Ce=0;Ce<he;++Ce)Te[Ce]=0;return Te}function lt(he,Te,Ce){var we=1,Se=0,je=0,Xe=0,dt=0,$e=he.length,rt=le?new Uint16Array(32):Ze(32);for(je=0;je<32;++je)rt[je]=0;for(je=$e;je<Ce;++je)he[je]=0;$e=he.length;var st=le?new Uint16Array($e):Ze($e);for(je=0;je<$e;++je)rt[Se=he[je]]++,we<Se&&(we=Se),st[je]=0;for(rt[0]=0,je=1;je<=we;++je)rt[je+16]=dt=dt+rt[je-1]<<1;for(je=0;je<$e;++je)dt=he[je],dt!=0&&(st[je]=rt[dt+16]++);var Ft=0;for(je=0;je<$e;++je)if(Ft=he[je],Ft!=0)for(dt=te(st[je],we)>>we-Ft,Xe=(1<<we+4-Ft)-1;Xe>=0;--Xe)Te[dt|Xe<<Ft]=Ft&15|je<<4;return we}var mt=le?new Uint16Array(512):Ze(512),It=le?new Uint16Array(32):Ze(32);if(!le){for(var Mt=0;Mt<512;++Mt)mt[Mt]=0;for(Mt=0;Mt<32;++Mt)It[Mt]=0}(function(){for(var he=[],Te=0;Te<32;Te++)he.push(5);lt(he,It,32);var Ce=[];for(Te=0;Te<=143;Te++)Ce.push(8);for(;Te<=255;Te++)Ce.push(9);for(;Te<=279;Te++)Ce.push(7);for(;Te<=287;Te++)Ce.push(8);lt(Ce,mt,288)})();var Pt=function(){for(var Te=le?new Uint8Array(32768):[],Ce=0,we=0;Ce<ce.length-1;++Ce)for(;we<ce[Ce+1];++we)Te[we]=Ce;for(;we<32768;++we)Te[we]=29;var Se=le?new Uint8Array(259):[];for(Ce=0,we=0;Ce<ae.length-1;++Ce)for(;we<ae[Ce+1];++we)Se[we]=Ce;function je(dt,$e){for(var rt=0;rt<dt.length;){var st=Math.min(65535,dt.length-rt),Ft=rt+st==dt.length;for($e.write_shift(1,+Ft),$e.write_shift(2,st),$e.write_shift(2,~st&65535);st-- >0;)$e[$e.l++]=dt[rt++]}return $e.l}function Xe(dt,$e){for(var rt=0,st=0,Ft=le?new Uint16Array(32768):[];st<dt.length;){var Vt=Math.min(65535,dt.length-st);if(Vt<10){for(rt=Ye($e,rt,+(st+Vt==dt.length)),rt&7&&(rt+=8-(rt&7)),$e.l=rt/8|0,$e.write_shift(2,Vt),$e.write_shift(2,~Vt&65535);Vt-- >0;)$e[$e.l++]=dt[st++];rt=$e.l*8;continue}rt=Ye($e,rt,+(st+Vt==dt.length)+2);for(var Yt=0;Vt-- >0;){var Ht=dt[st];Yt=(Yt<<5^Ht)&32767;var zt=-1,Sr=0;if((zt=Ft[Yt])&&(zt|=st&-32768,zt>st&&(zt-=32768),zt<st))for(;dt[zt+Sr]==dt[st+Sr]&&Sr<250;)++Sr;if(Sr>2){Ht=Se[Sr],Ht<=22?rt=Oe($e,rt,pe[Ht+1]>>1)-1:(Oe($e,rt,3),rt+=5,Oe($e,rt,pe[Ht-23]>>5),rt+=3);var sn=Ht<8?0:Ht-4>>2;sn>0&&(Re($e,rt,Sr-ae[Ht]),rt+=sn),Ht=Te[st-zt],rt=Oe($e,rt,pe[Ht]>>3),rt-=3;var on=Ht<4?0:Ht-2>>1;on>0&&(Re($e,rt,st-zt-ce[Ht]),rt+=on);for(var An=0;An<Sr;++An)Ft[Yt]=st&32767,Yt=(Yt<<5^dt[st])&32767,++st;Vt-=Sr-1}else Ht<=143?Ht=Ht+48:rt=ye($e,rt,1),rt=Oe($e,rt,pe[Ht]),Ft[Yt]=st&32767,++st}rt=Oe($e,rt,0)-1}return $e.l=(rt+7)/8|0,$e.l}return function($e,rt){return $e.length<8?je($e,rt):Xe($e,rt)}}();function Qt(he){var Te=Et(50+Math.floor(he.length*1.1)),Ce=Pt(he,Te);return Te.slice(0,Ce)}var yt=le?new Uint16Array(32768):Ze(32768),kr=le?new Uint16Array(32768):Ze(32768),er=le?new Uint16Array(128):Ze(128),an=1,_r=1;function Vr(he,Te){var Ce=fe(he,Te)+257;Te+=5;var we=fe(he,Te)+1;Te+=5;var Se=Ne(he,Te)+4;Te+=4;for(var je=0,Xe=le?new Uint8Array(19):Ze(19),dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$e=1,rt=le?new Uint8Array(8):Ze(8),st=le?new Uint8Array(8):Ze(8),Ft=Xe.length,Vt=0;Vt<Se;++Vt)Xe[re[Vt]]=je=De(he,Te),$e<je&&($e=je),rt[je]++,Te+=3;var Yt=0;for(rt[0]=0,Vt=1;Vt<=$e;++Vt)st[Vt]=Yt=Yt+rt[Vt-1]<<1;for(Vt=0;Vt<Ft;++Vt)(Yt=Xe[Vt])!=0&&(dt[Vt]=st[Yt]++);var Ht=0;for(Vt=0;Vt<Ft;++Vt)if(Ht=Xe[Vt],Ht!=0){Yt=pe[dt[Vt]]>>8-Ht;for(var zt=(1<<7-Ht)-1;zt>=0;--zt)er[Yt|zt<<Ht]=Ht&7|Vt<<3}var Sr=[];for($e=1;Sr.length<Ce+we;)switch(Yt=er[Ie(he,Te)],Te+=Yt&7,Yt>>>=3){case 16:for(je=3+_e(he,Te),Te+=2,Yt=Sr[Sr.length-1];je-- >0;)Sr.push(Yt);break;case 17:for(je=3+De(he,Te),Te+=3;je-- >0;)Sr.push(0);break;case 18:for(je=11+Ie(he,Te),Te+=7;je-- >0;)Sr.push(0);break;default:Sr.push(Yt),$e<Yt&&($e=Yt);break}var sn=Sr.slice(0,Ce),on=Sr.slice(Ce);for(Vt=Ce;Vt<286;++Vt)sn[Vt]=0;for(Vt=we;Vt<30;++Vt)on[Vt]=0;return an=lt(sn,yt,286),_r=lt(on,kr,30),Te}function jn(he,Te){if(he[0]==3&&!(he[1]&3))return[xm(Te),2];for(var Ce=0,we=0,Se=yH(Te||1<<18),je=0,Xe=Se.length>>>0,dt=0,$e=0;(we&1)==0;){if(we=De(he,Ce),Ce+=3,we>>>1)we>>1==1?(dt=9,$e=5):(Ce=Vr(he,Ce),dt=an,$e=_r);else{Ce&7&&(Ce+=8-(Ce&7));var rt=he[Ce>>>3]|he[(Ce>>>3)+1]<<8;if(Ce+=32,rt>0)for(!Te&&Xe<je+rt&&(Se=qe(Se,je+rt),Xe=Se.length);rt-- >0;)Se[je++]=he[Ce>>>3],Ce+=8;continue}for(;;){!Te&&Xe<je+32767&&(Se=qe(Se,je+32767),Xe=Se.length);var st=Ue(he,Ce,dt),Ft=we>>>1==1?mt[st]:yt[st];if(Ce+=Ft&15,Ft>>>=4,(Ft>>>8&255)===0)Se[je++]=Ft;else{if(Ft==256)break;Ft-=257;var Vt=Ft<8?0:Ft-4>>2;Vt>5&&(Vt=0);var Yt=je+ae[Ft];Vt>0&&(Yt+=Ue(he,Ce,Vt),Ce+=Vt),st=Ue(he,Ce,$e),Ft=we>>>1==1?It[st]:kr[st],Ce+=Ft&15,Ft>>>=4;var Ht=Ft<4?0:Ft-2>>1,zt=ce[Ft];for(Ht>0&&(zt+=Ue(he,Ce,Ht),Ce+=Ht),!Te&&Xe<Yt&&(Se=qe(Se,Yt+100),Xe=Se.length);je<Yt;)Se[je]=Se[je-zt],++je}}}return Te?[Se,Ce+7>>>3]:[Se.slice(0,je),Ce+7>>>3]}function Or(he,Te){var Ce=he.slice(he.l||0),we=jn(Ce,Te);return he.l+=we[1],we[0]}function As(he,Te){if(he)typeof console<"u"&&console.error(Te);else throw new Error(Te)}function hn(he,Te){var Ce=he;mo(Ce,0);var we=[],Se=[],je={FileIndex:we,FullPaths:Se};E(je,{root:Te.root});for(var Xe=Ce.length-4;(Ce[Xe]!=80||Ce[Xe+1]!=75||Ce[Xe+2]!=5||Ce[Xe+3]!=6)&&Xe>=0;)--Xe;Ce.l=Xe+4,Ce.l+=4;var dt=Ce.read_shift(2);Ce.l+=6;var $e=Ce.read_shift(4);for(Ce.l=$e,Xe=0;Xe<dt;++Xe){Ce.l+=20;var rt=Ce.read_shift(4),st=Ce.read_shift(4),Ft=Ce.read_shift(2),Vt=Ce.read_shift(2),Yt=Ce.read_shift(2);Ce.l+=8;var Ht=Ce.read_shift(4),zt=o(Ce.slice(Ce.l+Ft,Ce.l+Ft+Vt));Ce.l+=Ft+Vt+Yt;var Sr=Ce.l;Ce.l=Ht+4,oa(Ce,rt,st,je,zt),Ce.l=Sr}return je}function oa(he,Te,Ce,we,Se){he.l+=2;var je=he.read_shift(2),Xe=he.read_shift(2),dt=i(he);if(je&8257)throw new Error("Unsupported ZIP encryption");for(var $e=he.read_shift(4),rt=he.read_shift(4),st=he.read_shift(4),Ft=he.read_shift(2),Vt=he.read_shift(2),Yt="",Ht=0;Ht<Ft;++Ht)Yt+=String.fromCharCode(he[he.l++]);if(Vt){var zt=o(he.slice(he.l,he.l+Vt));(zt[21589]||{}).mt&&(dt=zt[21589].mt),((Se||{})[21589]||{}).mt&&(dt=Se[21589].mt)}he.l+=Vt;var Sr=he.slice(he.l,he.l+rt);switch(Xe){case 8:Sr=W(he,st);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Xe)}var sn=!1;je&8&&($e=he.read_shift(4),$e==134695760&&($e=he.read_shift(4),sn=!0),rt=he.read_shift(4),st=he.read_shift(4)),rt!=Te&&As(sn,"Bad compressed size: "+Te+" != "+rt),st!=Ce&&As(sn,"Bad uncompressed size: "+Ce+" != "+st),gr(we,Yt,Sr,{unsafe:!0,mt:dt})}function Ba(he,Te){var Ce=Te||{},we=[],Se=[],je=Et(1),Xe=Ce.compression?8:0,dt=0,$e=0,rt=0,st=0,Ft=0,Vt=he.FullPaths[0],Yt=Vt,Ht=he.FileIndex[0],zt=[],Sr=0;for($e=1;$e<he.FullPaths.length;++$e)if(Yt=he.FullPaths[$e].slice(Vt.length),Ht=he.FileIndex[$e],!(!Ht.size||!Ht.content||Yt=="Sh33tJ5")){var sn=st,on=Et(Yt.length);for(rt=0;rt<Yt.length;++rt)on.write_shift(1,Yt.charCodeAt(rt)&127);on=on.slice(0,on.l),zt[Ft]=W_e.buf(Ht.content,0);var An=Ht.content;Xe==8&&(An=Z(An)),je=Et(30),je.write_shift(4,67324752),je.write_shift(2,20),je.write_shift(2,dt),je.write_shift(2,Xe),Ht.mt?s(je,Ht.mt):je.write_shift(4,0),je.write_shift(-4,zt[Ft]),je.write_shift(4,An.length),je.write_shift(4,Ht.content.length),je.write_shift(2,on.length),je.write_shift(2,0),st+=je.length,we.push(je),st+=on.length,we.push(on),st+=An.length,we.push(An),je=Et(46),je.write_shift(4,33639248),je.write_shift(2,0),je.write_shift(2,20),je.write_shift(2,dt),je.write_shift(2,Xe),je.write_shift(4,0),je.write_shift(-4,zt[Ft]),je.write_shift(4,An.length),je.write_shift(4,Ht.content.length),je.write_shift(2,on.length),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(4,0),je.write_shift(4,sn),Sr+=je.l,Se.push(je),Sr+=on.length,Se.push(on),++Ft}return je=Et(22),je.write_shift(4,101010256),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,Ft),je.write_shift(2,Ft),je.write_shift(4,Sr),je.write_shift(4,st),je.write_shift(2,0),Gi([Gi(we),Gi(Se),je])}var en={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function mr(he,Te){if(he.ctype)return he.ctype;var Ce=he.name||"",we=Ce.match(/\.([^\.]+)$/);return we&&en[we[1]]||Te&&(we=(Ce=Te).match(/[\.\\]([^\.\\])+$/),we&&en[we[1]])?en[we[1]]:"application/octet-stream"}function et(he){for(var Te=kw(he),Ce=[],we=0;we<Te.length;we+=76)Ce.push(Te.slice(we,we+76));return Ce.join(`\r
`)+`\r
`}function gt(he){var Te=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(rt){var st=rt.charCodeAt(0).toString(16).toUpperCase();return"="+(st.length==1?"0"+st:st)});Te=Te.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Te.charAt(0)==`
`&&(Te="=0D"+Te.slice(1)),Te=Te.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ce=[],we=Te.split(`\r
`),Se=0;Se<we.length;++Se){var je=we[Se];if(je.length==0){Ce.push("");continue}for(var Xe=0;Xe<je.length;){var dt=76,$e=je.slice(Xe,Xe+dt);$e.charAt(dt-1)=="="?dt--:$e.charAt(dt-2)=="="?dt-=2:$e.charAt(dt-3)=="="&&(dt-=3),$e=je.slice(Xe,Xe+dt),Xe+=dt,Xe<je.length&&($e+="="),Ce.push($e)}}return Ce.join(`\r
`)}function Je(he){for(var Te=[],Ce=0;Ce<he.length;++Ce){for(var we=he[Ce];Ce<=he.length&&we.charAt(we.length-1)=="=";)we=we.slice(0,we.length-1)+he[++Ce];Te.push(we)}for(var Se=0;Se<Te.length;++Se)Te[Se]=Te[Se].replace(/[=][0-9A-Fa-f]{2}/g,function(je){return String.fromCharCode(parseInt(je.slice(1),16))});return kc(Te.join(`\r
`))}function xt(he,Te,Ce){for(var we="",Se="",je="",Xe,dt=0;dt<10;++dt){var $e=Te[dt];if(!$e||$e.match(/^\s*$/))break;var rt=$e.match(/^(.*?):\s*([^\s].*)$/);if(rt)switch(rt[1].toLowerCase()){case"content-location":we=rt[2].trim();break;case"content-type":je=rt[2].trim();break;case"content-transfer-encoding":Se=rt[2].trim();break}}switch(++dt,Se.toLowerCase()){case"base64":Xe=kc(Pc(Te.slice(dt).join("")));break;case"quoted-printable":Xe=Je(Te.slice(dt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Se)}var st=gr(he,we.slice(Ce.length),Xe,{unsafe:!0});je&&(st.ctype=je)}function wt(he,Te){if(z(he.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ce=Te&&Te.root||"",we=(gn&&Buffer.isBuffer(he)?he.toString("binary"):z(he)).split(`\r
`),Se=0,je="";for(Se=0;Se<we.length;++Se)if(je=we[Se],!!/^Content-Location:/i.test(je)&&(je=je.slice(je.indexOf("file")),Ce||(Ce=je.slice(0,je.lastIndexOf("/")+1)),je.slice(0,Ce.length)!=Ce))for(;Ce.length>0&&(Ce=Ce.slice(0,Ce.length-1),Ce=Ce.slice(0,Ce.lastIndexOf("/")+1),je.slice(0,Ce.length)!=Ce););var Xe=(we[1]||"").match(/boundary="(.*?)"/);if(!Xe)throw new Error("MAD cannot find boundary");var dt="--"+(Xe[1]||""),$e=[],rt=[],st={FileIndex:$e,FullPaths:rt};E(st);var Ft,Vt=0;for(Se=0;Se<we.length;++Se){var Yt=we[Se];Yt!==dt&&Yt!==dt+"--"||(Vt++&&xt(st,we.slice(Ft,Se),Ce),Ft=Se)}return st}function bt(he,Te){var Ce=Te||{},we=Ce.boundary||"SheetJS";we="------="+we;for(var Se=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+we.slice(2)+'"',"","",""],je=he.FullPaths[0],Xe=je,dt=he.FileIndex[0],$e=1;$e<he.FullPaths.length;++$e)if(Xe=he.FullPaths[$e].slice(je.length),dt=he.FileIndex[$e],!(!dt.size||!dt.content||Xe=="Sh33tJ5")){Xe=Xe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Sr){return"_x"+Sr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Sr){return"_u"+Sr.charCodeAt(0).toString(16)+"_"});for(var rt=dt.content,st=gn&&Buffer.isBuffer(rt)?rt.toString("binary"):z(rt),Ft=0,Vt=Math.min(1024,st.length),Yt=0,Ht=0;Ht<=Vt;++Ht)(Yt=st.charCodeAt(Ht))>=32&&Yt<128&&++Ft;var zt=Ft>=Vt*4/5;Se.push(we),Se.push("Content-Location: "+(Ce.root||"file:///C:/SheetJS/")+Xe),Se.push("Content-Transfer-Encoding: "+(zt?"quoted-printable":"base64")),Se.push("Content-Type: "+mr(dt,Xe)),Se.push(""),Se.push(zt?gt(st):et(st))}return Se.push(we+`--\r
`),Se.join(`\r
`)}function nr(he){var Te={};return E(Te,he),Te}function gr(he,Te,Ce,we){var Se=we&&we.unsafe;Se||E(he);var je=!Se&&Cr.find(he,Te);if(!je){var Xe=he.FullPaths[0];Te.slice(0,Xe.length)==Xe?Xe=Te:(Xe.slice(-1)!="/"&&(Xe+="/"),Xe=(Xe+Te).replace("//","/")),je={name:a(Te),type:2},he.FileIndex.push(je),he.FullPaths.push(Xe),Se||Cr.utils.cfb_gc(he)}return je.content=Ce,je.size=Ce?Ce.length:0,we&&(we.CLSID&&(je.clsid=we.CLSID),we.mt&&(je.mt=we.mt),we.ct&&(je.ct=we.ct)),je}function Kr(he,Te){E(he);var Ce=Cr.find(he,Te);if(Ce){for(var we=0;we<he.FileIndex.length;++we)if(he.FileIndex[we]==Ce)return he.FileIndex.splice(we,1),he.FullPaths.splice(we,1),!0}return!1}function Yr(he,Te,Ce){E(he);var we=Cr.find(he,Te);if(we){for(var Se=0;Se<he.FileIndex.length;++Se)if(he.FileIndex[Se]==we)return he.FileIndex[Se].name=a(Ce),he.FullPaths[Se]=Ce,!0}return!1}function Gr(he){B(he,!0)}return t.find=D,t.read=F,t.parse=d,t.write=q,t.writeFile=V,t.utils={cfb_new:nr,cfb_add:gr,cfb_del:Kr,cfb_mov:Yr,cfb_gc:Gr,ReadShift:Gy,CheckField:Ite,prep_blob:mo,bconcat:Gi,use_zlib:M,_deflateRaw:Qt,_inflateRaw:Or,consts:X},t}();function X_e(e){return typeof e=="string"?b4(e):Array.isArray(e)?w_e(e):e}function N2(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=b4(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?PA(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([X_e(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=jm(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Y_e(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ts(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function BH(e,t){for(var r=[],n=Ts(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function w4(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function E4(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function J_e(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var t5=new Date(1899,11,30,0,0,0);function Si(e,t){var r=e.getTime(),n=t5.getTime()+(e.getTimezoneOffset()-t5.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var dte=new Date,Z_e=t5.getTime()+(dte.getTimezoneOffset()-t5.getTimezoneOffset())*6e4,TH=dte.getTimezoneOffset();function C4(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Z_e),t.getTimezoneOffset()!==TH&&t.setTime(t.getTime()+(t.getTimezoneOffset()-TH)*6e4),t}function eSe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var jH=new Date("2017-02-19T19:06:09.000Z"),Ate=isNaN(jH.getFullYear())?new Date("2/19/17"):jH,tSe=Ate.getFullYear()==2017;function Qa(e,t){var r=new Date(e);if(tSe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Ate.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function ag(e,t){if(gn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return PA(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return PA(Zee(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return PA(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return PA(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Ha(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ha(e[r]));return t}function Cs(e,t){for(var r="";r.length<t;)r+=e;return r}function Td(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var rSe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Vv(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&rSe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var nSe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function fte(e){return e?e.content&&e.type?ag(e.content,!0):e.data?gy(e.data):e.asNodeBuffer&&gn?gy(e.asNodeBuffer().toString("binary")):e.asBinary?gy(e.asBinary()):e._data&&e._data.getContent?gy(ag(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function hte(e){if(!e)return null;if(e.data)return vH(e.data);if(e.asNodeBuffer&&gn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?vH(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function aSe(e){return e&&e.name.slice(-4)===".bin"?hte(e):fte(e)}function yu(e,t){for(var r=e.FullPaths||Ts(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function SP(e,t){var r=yu(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function oi(e,t,r){if(!r)return aSe(SP(e,t));if(!t)return null;try{return oi(e,t)}catch{return null}}function Bc(e,t,r){if(!r)return fte(SP(e,t));if(!t)return null;try{return Bc(e,t)}catch{return null}}function sSe(e,t,r){return hte(SP(e,t))}function IH(e){for(var t=e.FullPaths||Ts(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function un(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return gn?n=kh(r):n=E_e(r),Cr.utils.cfb_add(e,t,n)}Cr.utils.cfb_add(e,t,r)}else e.file(t,r)}function NP(){return Cr.utils.cfb_new()}function mte(e,t){switch(t.type){case"base64":return Cr.read(e,{type:"base64"});case"binary":return Cr.read(e,{type:"binary"});case"buffer":case"array":return Cr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function vy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Xs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,iSe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,FH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,oSe=/<[^>]*>/g,nl=Xs.match(FH)?FH:oSe,lSe=/<\w*:/,cSe=/<(\/?)\w+:/;function $r(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(iSe),o=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function JA(e){return e.replace(cSe,"<$1")}var pte={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},kP=w4(pte),Un=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,c){return pte[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),BP=/[&<>'"]/g,uSe=/[\u0000-\u0008\u000b-\u001f]/g;function pa(e){var t=e+"";return t.replace(BP,function(r){return kP[r]}).replace(uSe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function OH(e){return pa(e).replace(/ /g,"_x0020_")}var gte=/[\u0000-\u001f]/g;function TP(e){var t=e+"";return t.replace(BP,function(r){return kP[r]}).replace(/\n/g,"<br/>").replace(gte,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function dSe(e){var t=e+"";return t.replace(BP,function(r){return kP[r]}).replace(gte,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var DH=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function ASe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ma(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function zT(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function PH(e){var t=xm(2*e.length),r,n,a=1,s=0,i=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function RH(e){return kh(e,"binary").toString("utf8")}var wC="foo bar bazâð£",Ea=gn&&(RH(wC)==zT(wC)&&RH||PH(wC)==zT(wC)&&PH)||zT,PA=gn?function(e){return kh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Tw=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),xte=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),fSe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),hSe=/<\/?(?:vt:)?variant>/g,mSe=/<(?:vt:)([^>]*)>([\s\S]*)</;function LH(e,t){var r=$r(e),n=e.match(fSe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(hSe,"").match(mSe);i&&a.push({v:Ea(i[2]),t:i[1]})}),a}var vte=/(^\s|\s$|\n)/;function po(e,t){return"<"+e+(t.match(vte)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function jw(e){return Ts(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function $t(e,t,r){return"<"+e+(r!=null?jw(r):"")+(t!=null?(t.match(vte)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function V6(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function pSe(e,t){switch(typeof e){case"string":var r=$t("vt:lpwstr",pa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return $t((e|0)==e?"vt:i4":"vt:r8",pa(String(e)));case"boolean":return $t("vt:bool",e?"true":"false")}if(e instanceof Date)return $t("vt:filetime",V6(e));throw new Error("Unable to serialize "+e)}function jP(e){if(gn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ea(jm(EP(e)));throw new Error("Bad input format: expected Buffer or string")}var Iw=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ci={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Eg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Cc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function gSe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function xSe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var MH=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},UH=gn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:kh(t)})):MH(e)}:MH,QH=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Kf(e,a)));return n.join("").replace(vl,"")},IP=gn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(vl,""):QH(e,t,r)}:QH,HH=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},bte=gn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):HH(e,t,r)}:HH,VH=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode($x(e,a)));return n.join("")},k2=gn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):VH(t,r,n)}:VH,yte=function(e,t){var r=_c(e,t);return r>0?k2(e,t+4,t+4+r-1):""},wte=yte,Ete=function(e,t){var r=_c(e,t);return r>0?k2(e,t+4,t+4+r-1):""},Cte=Ete,_te=function(e,t){var r=2*_c(e,t);return r>0?k2(e,t+4,t+4+r-1):""},Ste=_te,Nte=function(t,r){var n=_c(t,r);return n>0?IP(t,r+4,r+4+n):""},kte=Nte,Bte=function(e,t){var r=_c(e,t);return r>0?k2(e,t+4,t+4+r):""},Tte=Bte,jte=function(e,t){return gSe(e,t)},r5=jte,FP=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};gn&&(wte=function(t,r){if(!Buffer.isBuffer(t))return yte(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Cte=function(t,r){if(!Buffer.isBuffer(t))return Ete(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Ste=function(t,r){if(!Buffer.isBuffer(t))return _te(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},kte=function(t,r){if(!Buffer.isBuffer(t))return Nte(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},Tte=function(t,r){if(!Buffer.isBuffer(t))return Bte(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},r5=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):jte(t,r)},FP=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var $x=function(e,t){return e[t]},Kf=function(e,t){return e[t+1]*256+e[t]},vSe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},_c=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},wp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},bSe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Gy(e,t){var r="",n,a,s=[],i,o,c,u;switch(t){case"dbcs":if(u=this.l,gn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Kf(this,u)),u+=2;e*=2;break;case"utf8":r=k2(this,this.l,this.l+e);break;case"utf16le":e*=2,r=IP(this,this.l,this.l+e);break;case"wstr":return Gy.call(this,e,"dbcs");case"lpstr-ansi":r=wte(this,this.l),e=4+_c(this,this.l);break;case"lpstr-cp":r=Cte(this,this.l),e=4+_c(this,this.l);break;case"lpwstr":r=Ste(this,this.l),e=4+2*_c(this,this.l);break;case"lpp4":e=4+_c(this,this.l),r=kte(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+_c(this,this.l),r=Tte(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=$x(this,this.l+e++))!==0;)s.push(yC(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=Kf(this,this.l+e))!==0;)s.push(yC(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=$x(this,u),this.l=u+1,o=Gy.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(yC(Kf(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=$x(this,u),this.l=u+1,o=Gy.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(yC($x(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=$x(this,this.l),this.l++,n;case 2:return n=(t==="i"?vSe:Kf)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?wp:bSe)(this,this.l),this.l+=4,n):(a=_c(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=r5(this,this.l):a=r5([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=bte(this,this.l,e);break}}return this.l+=e,r}var ySe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},wSe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},ESe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function CSe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)ESe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,ySe(this,t,this.l);break;case 8:if(n=8,r==="f"){xSe(this,t,this.l);break}case 16:break;case-4:n=4,wSe(this,t,this.l);break}return this.l+=n,this}function Ite(e,t){var r=bte(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function mo(e,t){e.l=t,e.read_shift=Gy,e.chk=Ite,e.write_shift=CSe}function tl(e,t){e.l+=t}function Et(e){var t=xm(e);return mo(t,0),t}function Bh(e,t,r){if(e){var n,a,s;mo(e,e.l||0);for(var i=e.length,o=0,c=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=Lw[o]||Lw[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,o))return}}}function Xl(){var e=[],t=gn?256:2048,r=function(u){var d=Et(u);return mo(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),Gi(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:i,_bufs:e}}function Rt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=Lw[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&FP(r)&&e.push(r)}}function Ky(e,t,r){var n=Ha(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function zH(e,t,r){var n=Ha(e);return n.s=Ky(n.s,t.s,r),n.e=Ky(n.e,t.s,r),n}function qy(e,t){if(e.cRel&&e.c<0)for(e=Ha(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ha(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Ur(e);return!e.cRel&&e.cRel!=null&&(r=NSe(r)),!e.rRel&&e.rRel!=null&&(r=_Se(r)),r}function $T(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+is(e.s.c)+":"+(e.e.cRel?"":"$")+is(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+qs(e.s.r)+":"+(e.e.rRel?"":"$")+qs(e.e.r):qy(e.s,t.biff)+":"+qy(e.e,t.biff)}function OP(e){return parseInt(SSe(e),10)-1}function qs(e){return""+(e+1)}function _Se(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function SSe(e){return e.replace(/\$(\d+)$/,"$1")}function DP(e){for(var t=kSe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function is(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function NSe(e){return e.replace(/^([A-Z])/,"$$$1")}function kSe(e){return e.replace(/^\$([A-Z])/,"$1")}function BSe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function os(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Ur(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Jl(e){var t=e.indexOf(":");return t==-1?{s:os(e),e:os(e)}:{s:os(e.slice(0,t)),e:os(e.slice(t+1))}}function rn(e,t){return typeof t>"u"||typeof t=="number"?rn(e.s,e.e):(typeof e!="string"&&(e=Ur(e)),typeof t!="string"&&(t=Ur(t)),e==t?e:e+":"+t)}function Qn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function $H(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Du(e.z,r?Si(t):t)}catch{}try{return e.w=Du((e.XF||{}).numFmtId||(r?14:0),r?Si(t):t)}catch{return""+t}}function mh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Th[e.v]||e.v:t==null?$H(e,e.v):$H(e,t))}function Im(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Fte(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?os(n.origin):n.origin;i=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Qn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},g=i+f,x=o+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Rr[14],n.cellDates?(p.t="d",p.w=Du(p.z,Si(p.v))):(p.t="n",p.v=Si(p.v),p.w=Du(p.z,p.v))):p.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(p.z=s[g][x].z),s[g][x]=p;else{var b=Ur({c:x,r:g});s[b]&&s[b].z&&(p.z=s[b].z),s[b]=p}}}return u.s.c<1e7&&(s["!ref"]=rn(u)),s}function j1(e,t){return Fte(null,e,t)}function TSe(e){return e.read_shift(4,"i")}function jd(e,t){return t||(t=Et(4)),t.write_shift(4,e),t}function Jo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function qi(e,t){var r=!1;return t==null&&(r=!0,t=Et(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function jSe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function ISe(e,t){return t||(t=Et(4)),t.write_shift(2,0),t.write_shift(2,0),t}function PP(e,t){var r=e.l,n=e.read_shift(1),a=Jo(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)s.push(jSe(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function FSe(e,t){var r=!1;return t==null&&(r=!0,t=Et(15+4*e.t.length)),t.write_shift(1,0),qi(e.t,t),r?t.slice(0,t.l):t}var OSe=PP;function DSe(e,t){var r=!1;return t==null&&(r=!0,t=Et(23+4*e.t.length)),t.write_shift(1,1),qi(e.t,t),t.write_shift(4,1),ISe({},t),r?t.slice(0,t.l):t}function Mu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Cg(e,t){return t==null&&(t=Et(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function _g(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Sg(e,t){return t==null&&(t=Et(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var PSe=Jo,Ote=qi;function RP(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function n5(e,t){var r=!1;return t==null&&(r=!0,t=Et(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var RSe=Jo,z6=RP,LP=n5;function MP(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?r5([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):wp(t,0)>>2;return r?a/100:a}function Dte(e,t){t==null&&(t=Et(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Pte(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function LSe(e,t){return t||(t=Et(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Ng=Pte,I1=LSe;function Xo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function sg(e,t){return(t||Et(8)).write_shift(8,e,"f")}function MSe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Lp[a];u&&(t.rgb=Ow(u));break;case 2:t.rgb=Ow([i,o,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function a5(e,t){if(t||(t=Et(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function USe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function QSe(e,t){t||(t=Et(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Rte(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function HSe(e){return Rte(e,1)}function VSe(e){return Rte(e,2)}var UP=2,Ml=3,EC=11,GH=12,s5=19,CC=64,zSe=65,$Se=71,GSe=4108,KSe=4126,Hi=80,Lte=81,qSe=[Hi,Lte],$6={1:{n:"CodePage",t:UP},2:{n:"Category",t:Hi},3:{n:"PresentationFormat",t:Hi},4:{n:"ByteCount",t:Ml},5:{n:"LineCount",t:Ml},6:{n:"ParagraphCount",t:Ml},7:{n:"SlideCount",t:Ml},8:{n:"NoteCount",t:Ml},9:{n:"HiddenCount",t:Ml},10:{n:"MultimediaClipCount",t:Ml},11:{n:"ScaleCrop",t:EC},12:{n:"HeadingPairs",t:GSe},13:{n:"TitlesOfParts",t:KSe},14:{n:"Manager",t:Hi},15:{n:"Company",t:Hi},16:{n:"LinksUpToDate",t:EC},17:{n:"CharacterCount",t:Ml},19:{n:"SharedDoc",t:EC},22:{n:"HyperlinksChanged",t:EC},23:{n:"AppVersion",t:Ml,p:"version"},24:{n:"DigSig",t:zSe},26:{n:"ContentType",t:Hi},27:{n:"ContentStatus",t:Hi},28:{n:"Language",t:Hi},29:{n:"Version",t:Hi},255:{},2147483648:{n:"Locale",t:s5},2147483651:{n:"Behavior",t:s5},1919054434:{}},G6={1:{n:"CodePage",t:UP},2:{n:"Title",t:Hi},3:{n:"Subject",t:Hi},4:{n:"Author",t:Hi},5:{n:"Keywords",t:Hi},6:{n:"Comments",t:Hi},7:{n:"Template",t:Hi},8:{n:"LastAuthor",t:Hi},9:{n:"RevNumber",t:Hi},10:{n:"EditTime",t:CC},11:{n:"LastPrinted",t:CC},12:{n:"CreatedDate",t:CC},13:{n:"ModifiedDate",t:CC},14:{n:"PageCount",t:Ml},15:{n:"WordCount",t:Ml},16:{n:"CharCount",t:Ml},17:{n:"Thumbnail",t:$Se},18:{n:"Application",t:Hi},19:{n:"DocSecurity",t:Ml},255:{},2147483648:{n:"Locale",t:s5},2147483651:{n:"Behavior",t:s5},1919054434:{}},KH={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},WSe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function XSe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var YSe=XSe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Lp=Ha(YSe),Th={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Mte={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},K6={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},_C={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function QP(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function JSe(e){var t=QP();if(!e||!e.match)return t;var r={};if((e.match(nl)||[]).forEach(function(n){var a=$r(n);switch(a[0].replace(lSe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[K6[a.ContentType]]!==void 0&&t[K6[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Ci.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Ute(e,t){var r=J_e(K6),n=[],a;n[n.length]=Xs,n[n.length]=$t("Types",null,{xmlns:Ci.CT,"xmlns:xsd":Ci.xsd,"xmlns:xsi":Ci.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return $t("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=$t("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:_C[c][t.bookType]||_C[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=$t("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:_C[c][t.bookType]||_C[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=$t("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var En={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Fw(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Wy(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(nl)||[]).forEach(function(a){var s=$r(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:vy(s.Target,t);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function yv(e){var t=[Xs,$t("Relationships",null,{xmlns:Ci.RELS})];return Ts(e["!id"]).forEach(function(r){t[t.length]=$t("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function fa(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[En.HLINK,En.XPATH,En.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var ZSe="application/vnd.oasis.opendocument.spreadsheet";function e5e(e,t){for(var r=jP(e),n,a;n=Iw.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=$r(n[0],!1),a.path=="/"&&a.type!==ZSe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function t5e(e){var t=[Xs];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function qH(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function r5e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function n5e(e){var t=[Xs];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(qH(e[r][0],e[r][1])),t.push(r5e("",e[r][0]));return t.push(qH("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Qte(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+YS.version+"</meta:generator></office:meta></office:document-meta>"}var Ou=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],a5e=function(){for(var e=new Array(Ou.length),t=0;t<Ou.length;++t){var r=Ou[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Hte(e){var t={};e=Ea(e);for(var r=0;r<Ou.length;++r){var n=Ou[r],a=e.match(a5e[r]);a!=null&&a.length>0&&(t[n[1]]=Un(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Qa(t[n[1]]))}return t}function GT(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=pa(t),n[n.length]=r?$t(e,t,r):po(e,t))}function Vte(e,t){var r=t||{},n=[Xs,$t("cp:coreProperties",null,{"xmlns:cp":Ci.CORE_PROPS,"xmlns:dc":Ci.dc,"xmlns:dcterms":Ci.dcterms,"xmlns:dcmitype":Ci.dcmitype,"xmlns:xsi":Ci.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&GT("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:V6(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&GT("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:V6(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Ou.length;++s){var i=Ou[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&GT(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Mp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],zte=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function $te(e,t,r,n){var a=[];if(typeof e=="string")a=LH(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?LH(t,n).map(function(d){return d.v}):t,o=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function s5e(e,t,r){var n={};return t||(t={}),e=Ea(e),Mp.forEach(function(a){var s=(e.match(Tw(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Un(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&$te(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Gte(e){var t=[],r=$t;return e||(e={}),e.Application="SheetJS",t[t.length]=Xs,t[t.length]=$t("Properties",null,{xmlns:Ci.EXT_PROPS,"xmlns:vt":Ci.vt}),Mp.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=pa(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+pa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var i5e=/<[^>]+>[^<]*/g;function o5e(e,t){var r={},n="",a=e.match(i5e);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=$r(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Un(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Un(d);break;case"bool":r[n]=Ma(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Qa(d);break;case"cy":case"error":r[n]=Un(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function Kte(e){var t=[Xs,$t("Properties",null,{xmlns:Ci.CUST_PROPS,"xmlns:vt":Ci.vt})];if(!e)return t.join("");var r=1;return Ts(e).forEach(function(a){++r,t[t.length]=$t("property",pSe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:pa(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var q6={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},KT;function l5e(e,t,r){KT||(KT=w4(q6)),t=KT[t]||t,e[t]=r}function c5e(e,t){var r=[];return Ts(q6).map(function(n){for(var a=0;a<Ou.length;++a)if(Ou[a][1]==n)return Ou[a];for(a=0;a<Mp.length;++a)if(Mp[a][1]==n)return Mp[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(po(q6[n[1]]||n[1],a))}}),$t("DocumentProperties",r.join(""),{xmlns:Cc.o})}function u5e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Ts(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<Ou.length;++i)if(s==Ou[i][1])return;for(i=0;i<Mp.length;++i)if(s==Mp[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=e[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push($t(OH(s),o,{"dt:dt":c}))}}),t&&Ts(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push($t(OH(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Cc.o+'">'+a.join("")+"</"+n+">"}function HP(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function d5e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=Et(8);return i.write_shift(4,n),i.write_shift(4,a),i}function qte(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function Wte(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Xte(e,t,r){return t===31?Wte(e):qte(e,t,r)}function W6(e,t,r){return Xte(e,t,r===!1?0:4)}function A5e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Xte(e,t,0)}function f5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(vl,""),e.l-a&2&&(e.l+=2)}return r}function h5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(vl,"");return r}function m5e(e){var t=e.l,r=i5(e,Lte);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=i5(e,Ml);return[r,n]}function p5e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(m5e(e));return r}function WH(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(vl,"").replace(xy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function Yte(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function g5e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function i5(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==GH&&n!==t&&qSe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===GH?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return qte(e,n,4).replace(vl,"");case 31:return Wte(e);case 64:return HP(e);case 65:return Yte(e);case 71:return g5e(e);case 80:return W6(e,n,!s.raw).replace(vl,"");case 81:return A5e(e,n).replace(vl,"");case 4108:return p5e(e);case 4126:case 4127:return n==4127?f5e(e):h5e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function XH(e,t){var r=Et(4),n=Et(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Et(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=d5e(t);break;case 31:case 80:for(n=Et(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Gi([r,n])}function YH(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,c=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),f=e.read_shift(4);s[i]=[d,f+r]}s.sort(function(w,S){return w[1]-S[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var p=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(p=!1,e.l=s[i][1]),p)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var g=t[s[i][0]];if(h[g.n]=i5(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:wd(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[i][0]===1){if(o=h.CodePage=i5(e,UP),wd(o),c!==-1){var x=e.l;e.l=s[c][1],u=WH(e,o),e.l=x}}else if(s[i][0]===0){if(o===0){c=i,e.l=s[i+1][1];continue}u=WH(e,o)}else{var b=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=Yte(e);break;case 30:e.l+=4,y=W6(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=W6(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Ms(e,4);break;case 64:e.l+=4,y=Qa(HP(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[b]=y}}return e.l=r+n,h}var Jte=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function x5e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function JH(e,t,r){var n=Et(8),a=[],s=[],i=8,o=0,c=Et(8),u=Et(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!t){u=Et(8),u.write_shift(4,0),a.unshift(u);var d=[Et(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=Et(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Gi(d),s.unshift(c),i+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(Jte.indexOf(e[o][0])>-1||zte.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],p=0;if(t){p=+t[e[o][0]];var g=r[p];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=XH(g.t,h)}else{var b=x5e(h);b==-1&&(b=31,h=String(h)),c=XH(b,h)}s.push(c),u=Et(8),u.write_shift(4,t?p:2+o),a.push(u),i+=8+c.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,y),y+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Gi([n].concat(a).concat(s))}function ZH(e,t,r){var n=e.content;if(!n)return{};mo(n,0);var a,s,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Cr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=YH(n,t),h={SystemIdentifier:u};for(var p in f)h[p]=f[p];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=YH(n,null)}catch{}for(p in g)h[p]=g[p];return h.FMTID=[s,i],h}function eV(e,t,r,n,a,s){var i=Et(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Cr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var c=JH(e,r,n);if(o.push(c),a){var u=JH(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),o.push(u)}return Gi(o)}function b0(e,t){return e.read_shift(t),null}function v5e(e,t){t||(t=Et(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function b5e(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Ms(e,t){return e.read_shift(t)===1}function fl(e,t){return t||(t=Et(2)),t.write_shift(2,+!!e),t}function li(e){return e.read_shift(2,"u")}function Eu(e,t){return t||(t=Et(2)),t.write_shift(2,e),t}function Zte(e,t){return b5e(e,t,li)}function y5e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function ere(e,t,r){return r||(r=Et(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function B2(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function w5e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,c={};a&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=o),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function E5e(e){var t=e.t||"",r=Et(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Et(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Gi(a)}function ig(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function T2(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):ig(e,n,r)}function kg(e,t,r){if(r.biff>5)return T2(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function tre(e,t,r){return r||(r=Et(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function C5e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function _5e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(vl,"");return n&&(e.l+=24),a}function S5e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(vl,"");return r+i}function N5e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return _5e(e);case"0303000000000000c000000000000046":return S5e(e);default:throw new Error("Unsupported Moniker "+r)}}function SC(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(vl,""):"";return r}function tV(e,t){t||(t=Et(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function k5e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,c,u="",d,f;a&16&&(s=SC(e,r-e.l)),a&128&&(i=SC(e,r-e.l)),(a&257)===257&&(o=SC(e,r-e.l)),(a&257)===1&&(c=N5e(e,r-e.l)),a&8&&(u=SC(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=HP(e)),e.l=r;var h=i||o||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return d&&(p.guid=d),f&&(p.time=f),s&&(p.Tooltip=s),p}function B5e(e){var t=Et(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),tV(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&tV(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function rre(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function nre(e,t){var r=rre(e);return r[3]=0,r}function ZA(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function og(e,t,r,n){return n||(n=Et(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function T5e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function j5e(e,t,r){return t===0?"":kg(e,t,r)}function I5e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function are(e){var t=e.read_shift(2),r=MP(e);return[t,r]}function F5e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=B2(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function _4(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function sre(e,t){return t||(t=Et(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function ire(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var O5e=ire;function ore(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function D5e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function P5e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Ro(e){e.l+=2,e.l+=e.read_shift(2)}var R5e={0:Ro,4:Ro,5:Ro,6:Ro,7:P5e,8:Ro,9:Ro,10:Ro,11:Ro,12:Ro,13:D5e,14:Ro,15:Ro,16:Ro,17:Ro,18:Ro,19:Ro,20:Ro,21:ore};function L5e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(R5e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function NC(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function VP(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Et(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function M5e(e,t){return t===0||e.read_shift(2),1200}function U5e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=kg(e,0,r);return e.read_shift(t+n-e.l),a}function Q5e(e,t){var r=!t||t.biff==8,n=Et(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function H5e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function V5e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=B2(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function z5e(e,t){var r=!t||t.biff>=8?2:1,n=Et(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function $5e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(w5e(e));return s.Count=n,s.Unique=a,s}function G5e(e,t){var r=Et(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=E5e(e[a]);var s=Gi([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function K5e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function q5e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function W5e(e){var t=T5e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function X5e(e){return e.read_shift(2),e.read_shift(4)}function rV(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function Y5e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function J5e(){var e=Et(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Z5e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function eNe(e){var t=Et(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function tNe(){}function rNe(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=B2(e,0,r),n}function nNe(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=Et(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function aNe(e){var t=ZA(e);return t.isst=e.read_shift(4),t}function sNe(e,t,r,n){var a=Et(10);return og(e,t,n,a),a.write_shift(4,r),a}function iNe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=ZA(e);r.biff==2&&e.l++;var s=T2(e,n-e.l,r);return a.val=s,a}function oNe(e,t,r,n,a){var s=!a||a.biff==8,i=Et(8+ +s+(1+s)*r.length);return og(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function lNe(e,t,r){var n=e.read_shift(2),a=kg(e,0,r);return[n,a]}function cNe(e,t,r,n){var a=r&&r.biff==5;n||(n=Et(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var uNe=kg;function nV(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c}}}function dNe(e,t){var r=t.biff==8||!t.biff?4:2,n=Et(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function ANe(e){var t=e.read_shift(2),r=e.read_shift(2),n=are(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function fNe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(are(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function hNe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function mNe(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=WSe[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function pNe(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=mNe(e,t,n.fStyle,r),n}function aV(e,t,r,n){var a=r&&r.biff==5;n||(n=Et(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function gNe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function xNe(e){var t=Et(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function sV(e,t,r){var n=ZA(e);(r.biff==2||t==9)&&++e.l;var a=y5e(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function vNe(e,t,r,n,a,s){var i=Et(8);return og(e,t,n,i),ere(r,s,i),i}function bNe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=ZA(e),a=Xo(e);return n.val=a,n}function yNe(e,t,r,n){var a=Et(14);return og(e,t,n,a),sg(r,a),a}var iV=j5e;function wNe(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=ig(e,s),o=[];n>e.l;)o.push(T2(e));return[s,a,i,o]}function oV(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=F5e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var ENe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function lV(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=ig(e,i,r);a&32&&(u=ENe[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:LTe(e,d,r,o);return{chKey:s,Name:u,itab:c,rgce:f}}function lre(e,t,r){if(r.biff<8)return CNe(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(I5e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function CNe(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=B2(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function _Ne(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=ig(e,n,r),i=ig(e,a,r);return[s,i]}function SNe(e,t,r){var n=ire(e);e.l++;var a=e.read_shift(1);return t-=8,[MTe(e,t,r),a,n]}function cV(e,t,r){var n=O5e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,PTe(e,t,r)]}function NNe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function kNe(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=kg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}function BNe(e,t,r){return kNe(e,t,r)}function TNe(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(_4(e));return r}function jNe(e){var t=Et(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)sre(e[r],t);return t}function INe(e,t,r){if(r&&r.biff<8)return ONe(e,t,r);var n=ore(e),a=L5e(e,t-22,n[1]);return{cmo:n,ft:a}}var FNe={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function ONe(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((FNe[n]||tl)(e,t,r)),{cmo:[a,n,s],ft:i}}function DNe(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=C5e(e,6,r);var o=e.read_shift(2);e.read_shift(2),li(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=ig(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function PNe(e,t){var r=_4(e);e.l+=16;var n=k5e(e,t-24);return[r,n]}function RNe(e){var t=Et(24),r=os(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Gi([t,B5e(e[1])])}function LNe(e,t){e.read_shift(2);var r=_4(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(vl,""),[r,n]}function MNe(e){var t=e[1].Tooltip,r=Et(10+2*(t.length+1));r.write_shift(2,2048);var n=os(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function UNe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=KH[r]||r,r=e.read_shift(2),t[1]=KH[r]||r,t}function QNe(e){return e||(e=Et(4)),e.write_shift(2,1),e.write_shift(2,1),e}function HNe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(nre(e));return r}function VNe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(nre(e));return r}function zNe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function cre(e,t,r){if(!r.cellStyles)return tl(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function $Ne(e,t){var r=Et(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function GNe(e,t){var r={};return t<32||(e.l+=16,r.header=Xo(e),r.footer=Xo(e),e.l+=2),r}function KNe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function qNe(e){for(var t=Et(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var WNe=ZA,XNe=Zte,YNe=T2;function JNe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function ZNe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=ZA(e);++e.l;var a=kg(e,t-7,r);return n.t="str",n.val=a,n}function e4e(e){var t=ZA(e);++e.l;var r=Xo(e);return t.t="n",t.val=r,t}function t4e(e,t,r){var n=Et(15);return O2(n,e,t),n.write_shift(8,r,"f"),n}function r4e(e){var t=ZA(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function n4e(e,t,r){var n=Et(9);return O2(n,e,t),n.write_shift(2,r),n}function a4e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function s4e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function i4e(e,t,r){var n=e.l+t,a=ZA(e),s=e.read_shift(2),i=ig(e,s,r);return e.l=n,a.t="str",a.val=i,a}var o4e=[2,3,48,49,131,139,140,245],X6=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=w4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=xm(1);switch(c.type){case"base64":d=kc(Pc(o));break;case"binary":d=kc(o);break;case"buffer":case"array":d=o;break}mo(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,b=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(b=d.read_shift(2));var y=d.read_shift(2),w=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var S=[],j={},N=Math.min(d.length,f==2?521:b-10-(p?264:0)),F=g?32:11;d.l<N&&d[d.l]!=13;)switch(j={},j.name=Nw.utils.decode(w,d.slice(d.l,d.l+F)).replace(/[\u0000\r\n].*$/g,""),d.l+=F,j.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(j.offset=d.read_shift(4)),j.len=d.read_shift(1),f==2&&(j.offset=d.read_shift(2)),j.dec=d.read_shift(1),j.name.length&&S.push(j),f!=2&&(d.l+=g?13:14),j.type){case"B":(!p||j.len!=8)&&c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var E=0,_=0;for(u[0]=[],_=0;_!=S.length;++_)u[0][_]=S[_].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++E]=[],_=0,_=0;_!=S.length;++_){var B=d.slice(d.l,d.l+S[_].len);d.l+=S[_].len,mo(B,0);var P=Nw.utils.decode(w,B);switch(S[_].type){case"C":P.trim().length&&(u[E][_]=P.replace(/\s+$/,""));break;case"D":P.length===8?u[E][_]=new Date(+P.slice(0,4),+P.slice(4,6)-1,+P.slice(6,8)):u[E][_]=P;break;case"F":u[E][_]=parseFloat(P.trim());break;case"+":case"I":u[E][_]=g?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(P.trim().toUpperCase()){case"Y":case"T":u[E][_]=!0;break;case"N":case"F":u[E][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+P+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[E][_]="##MEMO##"+(g?parseInt(P.trim(),10):B.read_shift(4));break;case"N":P=P.replace(/\u0000/g,"").trim(),P&&P!="."&&(u[E][_]=+P||0);break;case"@":u[E][_]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[E][_]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[E][_]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][_]=-B.read_shift(-8,"f");break;case"B":if(p&&S[_].len==8){u[E][_]=B.read_shift(8,"f");break}case"G":case"P":B.l+=S[_].len;break;case"0":if(S[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+S[_].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=S,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=j1(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,c){try{return Im(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&wd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Xl(),f=c5(o,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),g=o["!cols"]||[],x=0,b=0,y=0,w=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(b=0;b<1024;++b)if(h.indexOf(h[x]+"_"+b)==-1){h[x]+="_"+b;break}}}}var S=Qn(o["!ref"]),j=[],N=[],F=[];for(x=0;x<=S.e.c-S.s.c;++x){var E="",_="",B=0,P=[];for(b=0;b<p.length;++b)p[b][x]!=null&&P.push(p[b][x]);if(P.length==0||h[x]==null){j[x]="?";continue}for(b=0;b<P.length;++b){switch(typeof P[b]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=P[b]instanceof Date?"D":"C";break;default:_="C"}B=Math.max(B,String(P[b]).length),E=E&&E!=_?"C":_}B>250&&(B=250),_=((g[x]||{}).DBF||{}).type,_=="C"&&g[x].DBF.len>B&&(B=g[x].DBF.len),E=="B"&&_=="N"&&(E="N",F[x]=g[x].DBF.dec,B=g[x].DBF.len),N[x]=E=="C"||_=="N"?B:s[E]||0,w+=N[x],j[x]=E}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,p.length),D.write_shift(2,296+32*y),D.write_shift(2,w),x=0;x<4;++x)D.write_shift(4,0);for(D.write_shift(4,0|(+t[Jee]||3)<<8),x=0,b=0;x<h.length;++x)if(h[x]!=null){var I=d.next(32),U=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,U,"sbcs"),I.write_shift(1,j[x]=="?"?"C":j[x],"sbcs"),I.write_shift(4,b),I.write_shift(1,N[x]||s[j[x]]||0),I.write_shift(1,F[x]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),b+=N[x]||s[j[x]]||0}var R=d.next(264);for(R.write_shift(4,13),x=0;x<65;++x)R.write_shift(4,0);for(x=0;x<p.length;++x){var Y=d.next(w);for(Y.write_shift(1,0),b=0;b<h.length;++b)if(h[b]!=null)switch(j[b]){case"L":Y.write_shift(1,p[x][b]==null?63:p[x][b]?84:70);break;case"B":Y.write_shift(8,p[x][b]||0,"f");break;case"N":var H="0";for(typeof p[x][b]=="number"&&(H=p[x][b].toFixed(F[b]||0)),y=0;y<N[b]-H.length;++y)Y.write_shift(1,32);Y.write_shift(1,H,"sbcs");break;case"D":p[x][b]?(Y.write_shift(4,("0000"+p[x][b].getFullYear()).slice(-4),"sbcs"),Y.write_shift(2,("00"+(p[x][b].getMonth()+1)).slice(-2),"sbcs"),Y.write_shift(2,("00"+p[x][b].getDate()).slice(-2),"sbcs")):Y.write_shift(8,"00000000","sbcs");break;case"C":var X=String(p[x][b]!=null?p[x][b]:"").slice(0,N[b]);for(Y.write_shift(1,X,"sbcs"),y=0;y<N[b]-X.length;++y)Y.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),ure=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ts(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var g=e[p];return typeof g=="number"?bH(g):g},n=function(h,p,g){var x=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:bH(x)};e["|"]=254;function a(h,p){switch(p.type){case"base64":return s(Pc(h),p);case"binary":return s(h,p);case"buffer":return s(gn&&Buffer.isBuffer(h)?h.toString("binary"):jm(h),p);case"array":return s(ag(h),p)}throw new Error("Unrecognized type "+p.type)}function s(h,p){var g=h.split(/[\n\r]+/),x=-1,b=-1,y=0,w=0,S=[],j=[],N=null,F={},E=[],_=[],B=[],P=0,D;for(+p.codepage>=0&&wd(+p.codepage);y!==g.length;++y){P=0;var I=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),U=I.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),R=U[0],Y;if(I.length>0)switch(R){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&j.push(I.slice(3).replace(/;;/g,";"));break;case"C":var H=!1,X=!1,V=!1,z=!1,q=-1,ne=-1;for(w=1;w<U.length;++w)switch(U[w].charAt(0)){case"A":break;case"X":b=parseInt(U[w].slice(1))-1,X=!0;break;case"Y":for(x=parseInt(U[w].slice(1))-1,X||(b=0),D=S.length;D<=x;++D)S[D]=[];break;case"K":Y=U[w].slice(1),Y.charAt(0)==='"'?Y=Y.slice(1,Y.length-1):Y==="TRUE"?Y=!0:Y==="FALSE"?Y=!1:isNaN(Td(Y))?isNaN(Vv(Y).getDate())||(Y=Qa(Y)):(Y=Td(Y),N!==null&&B1(N)&&(Y=C4(Y))),H=!0;break;case"E":z=!0;var M=wv(U[w].slice(1),{r:x,c:b});S[x][b]=[S[x][b],M];break;case"S":V=!0,S[x][b]=[S[x][b],"S5S"];break;case"G":break;case"R":q=parseInt(U[w].slice(1))-1;break;case"C":ne=parseInt(U[w].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}if(H&&(S[x][b]&&S[x][b].length==2?S[x][b][0]=Y:S[x][b]=Y,N=null),V){if(z)throw new Error("SYLK shared formula cannot have own formula");var W=q>-1&&S[q][ne];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");S[x][b][1]=kre(W[1],{r:x-q,c:b-ne})}break;case"F":var Z=0;for(w=1;w<U.length;++w)switch(U[w].charAt(0)){case"X":b=parseInt(U[w].slice(1))-1,++Z;break;case"Y":for(x=parseInt(U[w].slice(1))-1,D=S.length;D<=x;++D)S[D]=[];break;case"M":P=parseInt(U[w].slice(1))/20;break;case"F":break;case"G":break;case"P":N=j[parseInt(U[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=U[w].slice(1).split(" "),D=parseInt(B[0],10);D<=parseInt(B[1],10);++D)P=parseInt(B[2],10),_[D-1]=P===0?{hidden:!0}:{wch:P},vm(_[D-1]);break;case"C":b=parseInt(U[w].slice(1))-1,_[b]||(_[b]={});break;case"R":x=parseInt(U[w].slice(1))-1,E[x]||(E[x]={}),P>0?(E[x].hpt=P,E[x].hpx=$v(P)):P===0&&(E[x].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}Z<1&&(N=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}}return E.length>0&&(F["!rows"]=E),_.length>0&&(F["!cols"]=_),p&&p.sheetRows&&(S=S.slice(0,p.sheetRows)),[S,F]}function i(h,p){var g=a(h,p),x=g[0],b=g[1],y=j1(x,p);return Ts(b).forEach(function(w){y[w]=b[w]}),y}function o(h,p){return Im(i(h,p),p)}function c(h,p,g,x){var b="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":b+=h.v||0,h.f&&!h.F&&(b+=";E"+WP(h.f,{r:g,c:x}));break;case"b":b+=h.v?"TRUE":"FALSE";break;case"e":b+=h.w||h.v;break;case"d":b+='"'+(h.w||h.v)+'"';break;case"s":b+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(h,p){p.forEach(function(g,x){var b="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?b+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Dw(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=Pw(g.wpx)),typeof g.wch=="number"&&(b+=Math.round(g.wch))),b.charAt(b.length-1)!=" "&&h.push(b)})}function d(h,p){p.forEach(function(g,x){var b="F;";g.hidden?b+="M0;":g.hpt?b+="M"+20*g.hpt+";":g.hpx&&(b+="M"+20*Rw(g.hpx)+";"),b.length>2&&h.push(b+"R"+(x+1))})}function f(h,p){var g=["ID;PWXL;N;E"],x=[],b=Qn(h["!ref"]),y,w=Array.isArray(h),S=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var j=b.s.r;j<=b.e.r;++j)for(var N=b.s.c;N<=b.e.c;++N){var F=Ur({r:j,c:N});y=w?(h[j]||[])[N]:h[F],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,j,N))}return g.join(S)+S+x.join(S)+S+"E"+S}return{to_workbook:o,to_sheet:i,from_sheet:f}}(),dre=function(){function e(s,i){switch(i.type){case"base64":return t(Pc(s),i);case"binary":return t(s,i);case"buffer":return t(gn&&Buffer.isBuffer(s)?s.toString("binary"):jm(s),i);case"array":return t(ag(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var o=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=o[d].trim().split(","),p=h[0],g=h[1];++d;for(var x=o[d]||"";(x.match(/["]/g)||[]).length&1&&d<o.length-1;)x+=`
`+o[++d];switch(x=x.trim(),+p){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(Td(g))?isNaN(Vv(g).getDate())?f[c][u]=g:f[c][u]=Qa(g):f[c][u]=Td(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return j1(e(s,i),i)}function n(s,i){return Im(r(s,i),i)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Qn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=Ur({r:p,c:g});if(f=h?(c[p]||[])[g]:c[x],!f){i(u,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,b,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Du(f.z||Rr[14],Si(Qa(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,w=u.join(y);return w}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Are=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),g=-1,x=-1,b=0,y=[];b!==p.length;++b){var w=p[b].trim().split(":");if(w[0]==="cell"){var S=os(w[1]);if(y.length<=S.r)for(g=y.length;g<=S.r;++g)y[g]||(y[g]=[]);switch(g=S.r,x=S.c,w[2]){case"t":y[g][x]=e(w[3]);break;case"v":y[g][x]=+w[3];break;case"vtf":var j=w[w.length-1];case"vtc":switch(w[3]){case"nl":y[g][x]=!!+w[4];break;default:y[g][x]=+w[4];break}w[2]=="vtf"&&(y[g][x]=[y[g][x],j])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return j1(r(f,h),h)}function a(f,h){return Im(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,x="",b=Jl(f["!ref"]),y=Array.isArray(f),w=b.s.r;w<=b.e.r;++w)for(var S=b.s.c;S<=b.e.c;++S)if(x=Ur({r:w,c:S}),g=y?(f[w]||[])[S]:f[x],!(!g||g.v==null||g.t==="z")){switch(p=["cell",x,"t"],g.t){case"s":case"str":p.push(t(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var j=Si(Qa(g.v));p[2]="vtc",p[3]="nd",p[4]=""+j,p[5]=g.w||Du(g.z||Rr[14],j);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,o,i,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),zv=function(){function e(d,f,h,p,g){g.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(Td(d))?isNaN(Vv(d).getDate())?f[h][p]=d:f[h][p]=Qa(d):f[h][p]=Td(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var b=10,y=0,w=0;w<=x;++w)y=g[w].indexOf(" "),y==-1?y=g[w].length:y++,b=Math.max(b,y);for(w=0;w<=x;++w){p[w]=[];var S=0;for(e(g[w].slice(0,b).trim(),p,w,S,h),S=1;S<=(g[w].length-b)/10+1;++S)e(g[w].slice(b+(S-1)*10,b+S*10).trim(),p,w,S,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,p=0,g=0;p<d.length;++p)(g=d.charCodeAt(p))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(x,b){return x[0]-b[0]||n[x[1]]-n[b[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},p="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):h&&h.FS?p=h.FS:p=a(d.slice(0,1024));var b=0,y=0,w=0,S=0,j=0,N=p.charCodeAt(0),F=!1,E=0,_=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=h.dateNF!=null?K_e(h.dateNF):null;function P(){var D=d.slice(S,j),I={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)I.t="z";else if(h.raw)I.t="s",I.v=D;else if(D.trim().length===0)I.t="s",I.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(I.t="s",I.v=D.slice(2,-1).replace(/""/g,'"')):wBe(D)?(I.t="n",I.f=D.slice(1)):(I.t="s",I.v=D);else if(D=="TRUE")I.t="b",I.v=!0;else if(D=="FALSE")I.t="b",I.v=!1;else if(!isNaN(w=Td(D)))I.t="n",h.cellText!==!1&&(I.w=D),I.v=w;else if(!isNaN(Vv(D).getDate())||B&&D.match(B)){I.z=h.dateNF||Rr[14];var U=0;B&&D.match(B)&&(D=q_e(D,h.dateNF,D.match(B)||[]),U=1),h.cellDates?(I.t="d",I.v=Qa(D,U)):(I.t="n",I.v=Si(Qa(D,U))),h.cellText!==!1&&(I.w=Du(I.z,I.v instanceof Date?Si(I.v):I.v)),h.cellNF||delete I.z}else I.t="s",I.v=D;if(I.t=="z"||(h.dense?(g[b]||(g[b]=[]),g[b][y]=I):g[Ur({c:y,r:b})]=I),S=j+1,_=d.charCodeAt(S),x.e.c<y&&(x.e.c=y),x.e.r<b&&(x.e.r=b),E==N)++y;else if(y=0,++b,h.sheetRows&&h.sheetRows<=b)return!0}e:for(;j<d.length;++j)switch(E=d.charCodeAt(j)){case 34:_===34&&(F=!F);break;case N:case 10:case 13:if(!F&&P())break e;break}return j-S>0&&P(),g["!ref"]=rn(x),g}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):j1(t(d,f),f)}function o(d,f){var h="",p=f.type=="string"?[0,0,0,0]:nR(d,f);switch(f.type){case"base64":h=Pc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Nw<"u"||(h=gn&&Buffer.isBuffer(d)?d.toString("binary"):jm(d));break;case"array":h=ag(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=Ea(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ea(h):f.type=="binary"&&typeof Nw<"u",h.slice(0,19)=="socialcalc:version:"?Are.to_sheet(f.type=="string"?h:Ea(h),f):i(h,f)}function c(d,f){return Im(o(d,f),f)}function u(d){for(var f=[],h=Qn(d["!ref"]),p,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var b=[],y=h.s.c;y<=h.e.c;++y){var w=Ur({r:x,c:y});if(p=g?(d[x]||[])[y]:d[w],!p||p.v==null){b.push("          ");continue}for(var S=(p.w||(mh(p),p.w)||"").slice(0,10);S.length<10;)S+=" ";b.push(S+(y===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function l4e(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=ure.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return zv.to_workbook(e,t)}}var Up=function(){function e(M,W,Z){if(M){mo(M,M.l||0);for(var re=Z.Enum||q;M.l<M.length;){var ae=M.read_shift(2),ce=re[ae]||re[65535],oe=M.read_shift(2),le=M.l+oe,pe=ce.f&&ce.f(M,oe,Z);if(M.l=le,W(pe,ce,ae))return}}}function t(M,W){switch(W.type){case"base64":return r(kc(Pc(M)),W);case"binary":return r(kc(M),W);case"buffer":case"array":return r(M,W)}throw"Unsupported type "+W.type}function r(M,W){if(!M)return M;var Z=W||{},re=Z.dense?[]:{},ae="Sheet1",ce="",oe=0,le={},pe=[],Be=[],te={s:{r:0,c:0},e:{r:0,c:0}},_e=Z.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)Z.Enum=q,e(M,function(Ie,Ue,Ye){switch(Ye){case 0:Z.vers=Ie,Ie>=4096&&(Z.qpro=!0);break;case 6:te=Ie;break;case 204:Ie&&(ce=Ie);break;case 222:ce=Ie;break;case 15:case 51:Z.qpro||(Ie[1].v=Ie[1].v.slice(1));case 13:case 14:case 16:Ye==14&&(Ie[2]&112)==112&&(Ie[2]&15)>1&&(Ie[2]&15)<15&&(Ie[1].z=Z.dateNF||Rr[14],Z.cellDates&&(Ie[1].t="d",Ie[1].v=C4(Ie[1].v))),Z.qpro&&Ie[3]>oe&&(re["!ref"]=rn(te),le[ae]=re,pe.push(ae),re=Z.dense?[]:{},te={s:{r:0,c:0},e:{r:0,c:0}},oe=Ie[3],ae=ce||"Sheet"+(oe+1),ce="");var ye=Z.dense?(re[Ie[0].r]||[])[Ie[0].c]:re[Ur(Ie[0])];if(ye){ye.t=Ie[1].t,ye.v=Ie[1].v,Ie[1].z!=null&&(ye.z=Ie[1].z),Ie[1].f!=null&&(ye.f=Ie[1].f);break}Z.dense?(re[Ie[0].r]||(re[Ie[0].r]=[]),re[Ie[0].r][Ie[0].c]=Ie[1]):re[Ur(Ie[0])]=Ie[1];break}},Z);else if(M[2]==26||M[2]==14)Z.Enum=ne,M[2]==14&&(Z.qpro=!0,M.l=0),e(M,function(Ie,Ue,Ye){switch(Ye){case 204:ae=Ie;break;case 22:Ie[1].v=Ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ie[3]>oe&&(re["!ref"]=rn(te),le[ae]=re,pe.push(ae),re=Z.dense?[]:{},te={s:{r:0,c:0},e:{r:0,c:0}},oe=Ie[3],ae="Sheet"+(oe+1)),_e>0&&Ie[0].r>=_e)break;Z.dense?(re[Ie[0].r]||(re[Ie[0].r]=[]),re[Ie[0].r][Ie[0].c]=Ie[1]):re[Ur(Ie[0])]=Ie[1],te.e.c<Ie[0].c&&(te.e.c=Ie[0].c),te.e.r<Ie[0].r&&(te.e.r=Ie[0].r);break;case 27:Ie[14e3]&&(Be[Ie[14e3][0]]=Ie[14e3][1]);break;case 1537:Be[Ie[0]]=Ie[1],Ie[0]==oe&&(ae=Ie[1]);break}},Z);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(re["!ref"]=rn(te),le[ce||ae]=re,pe.push(ce||ae),!Be.length)return{SheetNames:pe,Sheets:le};for(var De={},Ne=[],fe=0;fe<Be.length;++fe)le[pe[fe]]?(Ne.push(Be[fe]||pe[fe]),De[Be[fe]]=le[Be[fe]]||le[pe[fe]]):(Ne.push(Be[fe]),De[Be[fe]]={"!ref":"A1"});return{SheetNames:Ne,Sheets:De}}function n(M,W){var Z=W||{};if(+Z.codepage>=0&&wd(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK1 to JS string");var re=Xl(),ae=Qn(M["!ref"]),ce=Array.isArray(M),oe=[];Gt(re,0,s(1030)),Gt(re,6,c(ae));for(var le=Math.min(ae.e.r,8191),pe=ae.s.r;pe<=le;++pe)for(var Be=qs(pe),te=ae.s.c;te<=ae.e.c;++te){pe===ae.s.r&&(oe[te]=is(te));var _e=oe[te]+Be,De=ce?(M[pe]||[])[te]:M[_e];if(!(!De||De.t=="z"))if(De.t=="n")(De.v|0)==De.v&&De.v>=-32768&&De.v<=32767?Gt(re,13,p(pe,te,De.v)):Gt(re,14,x(pe,te,De.v));else{var Ne=mh(De);Gt(re,15,f(pe,te,Ne.slice(0,239)))}}return Gt(re,1),re.end()}function a(M,W){var Z=W||{};if(+Z.codepage>=0&&wd(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK3 to JS string");var re=Xl();Gt(re,0,i(M));for(var ae=0,ce=0;ae<M.SheetNames.length;++ae)(M.Sheets[M.SheetNames[ae]]||{})["!ref"]&&Gt(re,27,z(M.SheetNames[ae],ce++));var oe=0;for(ae=0;ae<M.SheetNames.length;++ae){var le=M.Sheets[M.SheetNames[ae]];if(!(!le||!le["!ref"])){for(var pe=Qn(le["!ref"]),Be=Array.isArray(le),te=[],_e=Math.min(pe.e.r,8191),De=pe.s.r;De<=_e;++De)for(var Ne=qs(De),fe=pe.s.c;fe<=pe.e.c;++fe){De===pe.s.r&&(te[fe]=is(fe));var Ie=te[fe]+Ne,Ue=Be?(le[De]||[])[fe]:le[Ie];if(!(!Ue||Ue.t=="z"))if(Ue.t=="n")Gt(re,23,P(De,fe,oe,Ue.v));else{var Ye=mh(Ue);Gt(re,22,E(De,fe,oe,Ye.slice(0,239)))}}++oe}}return Gt(re,1),re.end()}function s(M){var W=Et(2);return W.write_shift(2,M),W}function i(M){var W=Et(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var Z=0,re=0,ae=0,ce=0;ce<M.SheetNames.length;++ce){var oe=M.SheetNames[ce],le=M.Sheets[oe];if(!(!le||!le["!ref"])){++ae;var pe=Jl(le["!ref"]);Z<pe.e.r&&(Z=pe.e.r),re<pe.e.c&&(re=pe.e.c)}}return Z>8191&&(Z=8191),W.write_shift(2,Z),W.write_shift(1,ae),W.write_shift(1,re),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(M,W,Z){var re={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&Z.qpro?(re.s.c=M.read_shift(1),M.l++,re.s.r=M.read_shift(2),re.e.c=M.read_shift(1),M.l++,re.e.r=M.read_shift(2),re):(re.s.c=M.read_shift(2),re.s.r=M.read_shift(2),W==12&&Z.qpro&&(M.l+=2),re.e.c=M.read_shift(2),re.e.r=M.read_shift(2),W==12&&Z.qpro&&(M.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function c(M){var W=Et(8);return W.write_shift(2,M.s.c),W.write_shift(2,M.s.r),W.write_shift(2,M.e.c),W.write_shift(2,M.e.r),W}function u(M,W,Z){var re=[{c:0,r:0},{t:"n",v:0},0,0];return Z.qpro&&Z.vers!=20768?(re[0].c=M.read_shift(1),re[3]=M.read_shift(1),re[0].r=M.read_shift(2),M.l+=2):(re[2]=M.read_shift(1),re[0].c=M.read_shift(2),re[0].r=M.read_shift(2)),re}function d(M,W,Z){var re=M.l+W,ae=u(M,W,Z);if(ae[1].t="s",Z.vers==20768){M.l++;var ce=M.read_shift(1);return ae[1].v=M.read_shift(ce,"utf8"),ae}return Z.qpro&&M.l++,ae[1].v=M.read_shift(re-M.l,"cstr"),ae}function f(M,W,Z){var re=Et(7+Z.length);re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,M),re.write_shift(1,39);for(var ae=0;ae<re.length;++ae){var ce=Z.charCodeAt(ae);re.write_shift(1,ce>=128?95:ce)}return re.write_shift(1,0),re}function h(M,W,Z){var re=u(M,W,Z);return re[1].v=M.read_shift(2,"i"),re}function p(M,W,Z){var re=Et(7);return re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,M),re.write_shift(2,Z,"i"),re}function g(M,W,Z){var re=u(M,W,Z);return re[1].v=M.read_shift(8,"f"),re}function x(M,W,Z){var re=Et(13);return re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,M),re.write_shift(8,Z,"f"),re}function b(M,W,Z){var re=M.l+W,ae=u(M,W,Z);if(ae[1].v=M.read_shift(8,"f"),Z.qpro)M.l=re;else{var ce=M.read_shift(2);j(M.slice(M.l,M.l+ce),ae),M.l+=ce}return ae}function y(M,W,Z){var re=W&32768;return W&=-32769,W=(re?M:0)+(W>=8192?W-16384:W),(re?"":"$")+(Z?is(W):qs(W))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},S=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(M,W){mo(M,0);for(var Z=[],re=0,ae="",ce="",oe="",le="";M.l<M.length;){var pe=M[M.l++];switch(pe){case 0:Z.push(M.read_shift(8,"f"));break;case 1:ce=y(W[0].c,M.read_shift(2),!0),ae=y(W[0].r,M.read_shift(2),!1),Z.push(ce+ae);break;case 2:{var Be=y(W[0].c,M.read_shift(2),!0),te=y(W[0].r,M.read_shift(2),!1);ce=y(W[0].c,M.read_shift(2),!0),ae=y(W[0].r,M.read_shift(2),!1),Z.push(Be+te+":"+ce+ae)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:Z.push("("+Z.pop()+")");break;case 5:Z.push(M.read_shift(2));break;case 6:{for(var _e="";pe=M[M.l++];)_e+=String.fromCharCode(pe);Z.push('"'+_e.replace(/"/g,'""')+'"')}break;case 8:Z.push("-"+Z.pop());break;case 23:Z.push("+"+Z.pop());break;case 22:Z.push("NOT("+Z.pop()+")");break;case 20:case 21:le=Z.pop(),oe=Z.pop(),Z.push(["AND","OR"][pe-20]+"("+oe+","+le+")");break;default:if(pe<32&&S[pe])le=Z.pop(),oe=Z.pop(),Z.push(oe+S[pe]+le);else if(w[pe]){if(re=w[pe][1],re==69&&(re=M[M.l++]),re>Z.length){console.error("WK1 bad formula parse 0x"+pe.toString(16)+":|"+Z.join("|")+"|");return}var De=Z.slice(-re);Z.length-=re,Z.push(w[pe][0]+"("+De.join(",")+")")}else return pe<=7?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=24?console.error("WK1 unsupported op "+pe.toString(16)):pe<=30?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=115?console.error("WK1 unsupported function opcode "+pe.toString(16)):console.error("WK1 unrecognized opcode "+pe.toString(16))}}Z.length==1?W[1].f=""+Z[0]:console.error("WK1 bad formula parse |"+Z.join("|")+"|")}function N(M){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=M.read_shift(2),W[3]=M[M.l++],W[0].c=M[M.l++],W}function F(M,W){var Z=N(M);return Z[1].t="s",Z[1].v=M.read_shift(W-4,"cstr"),Z}function E(M,W,Z,re){var ae=Et(6+re.length);ae.write_shift(2,M),ae.write_shift(1,Z),ae.write_shift(1,W),ae.write_shift(1,39);for(var ce=0;ce<re.length;++ce){var oe=re.charCodeAt(ce);ae.write_shift(1,oe>=128?95:oe)}return ae.write_shift(1,0),ae}function _(M,W){var Z=N(M);Z[1].v=M.read_shift(2);var re=Z[1].v>>1;if(Z[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return Z[1].v=re,Z}function B(M,W){var Z=N(M),re=M.read_shift(4),ae=M.read_shift(4),ce=M.read_shift(2);if(ce==65535)return re===0&&ae===3221225472?(Z[1].t="e",Z[1].v=15):re===0&&ae===3489660928?(Z[1].t="e",Z[1].v=42):Z[1].v=0,Z;var oe=ce&32768;return ce=(ce&32767)-16446,Z[1].v=(1-oe*2)*(ae*Math.pow(2,ce+32)+re*Math.pow(2,ce)),Z}function P(M,W,Z,re){var ae=Et(14);if(ae.write_shift(2,M),ae.write_shift(1,Z),ae.write_shift(1,W),re==0)return ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(2,65535),ae;var ce=0,oe=0,le=0,pe=0;return re<0&&(ce=1,re=-re),oe=Math.log2(re)|0,re/=Math.pow(2,oe-31),pe=re>>>0,(pe&2147483648)==0&&(re/=2,++oe,pe=re>>>0),re-=pe,pe|=2147483648,pe>>>=0,re*=Math.pow(2,32),le=re>>>0,ae.write_shift(4,le),ae.write_shift(4,pe),oe+=16383+(ce?32768:0),ae.write_shift(2,oe),ae}function D(M,W){var Z=B(M);return M.l+=W-14,Z}function I(M,W){var Z=N(M),re=M.read_shift(4);return Z[1].v=re>>6,Z}function U(M,W){var Z=N(M),re=M.read_shift(8,"f");return Z[1].v=re,Z}function R(M,W){var Z=U(M);return M.l+=W-10,Z}function Y(M,W){return M[M.l+W-1]==0?M.read_shift(W,"cstr"):""}function H(M,W){var Z=M[M.l++];Z>W-1&&(Z=W-1);for(var re="";re.length<Z;)re+=String.fromCharCode(M[M.l++]);return re}function X(M,W,Z){if(!(!Z.qpro||W<21)){var re=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var ae=M.read_shift(W-21,"cstr");return[re,ae]}}function V(M,W){for(var Z={},re=M.l+W;M.l<re;){var ae=M.read_shift(2);if(ae==14e3){for(Z[ae]=[0,""],Z[ae][0]=M.read_shift(2);M[M.l];)Z[ae][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return Z}function z(M,W){var Z=Et(5+M.length);Z.write_shift(2,14e3),Z.write_shift(2,W);for(var re=0;re<M.length;++re){var ae=M.charCodeAt(re);Z[Z.l++]=ae>127?95:ae}return Z[Z.l++]=0,Z}var q={0:{n:"BOF",f:li},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Y},222:{n:"SHEETNAMELP",f:H},65535:{n:""}},ne={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:F},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:V},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:R},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Y},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:X},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function c4e(e){var t={},r=e.match(nl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=$r(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=bP[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var u4e=function(){var e=Tw("t"),t=Tw("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Un(i[1])},c=s.match(t);return c&&(o.s=c4e(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),d4e=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),A4e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,f4e=/<(?:\w+:)?r>/,h4e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function zP(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Un(Ea(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ea(e),r&&(n.h=TP(n.t))):e.match(f4e)&&(n.r=Ea(e),n.t=Un(Ea((e.replace(h4e,"").match(A4e)||[]).join("").replace(nl,""))),r&&(n.h=d4e(u4e(n.r)))),n):{t:""}}var m4e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,p4e=/<(?:\w+:)?(?:si|sstItem)>/g,g4e=/<\/(?:\w+:)?(?:si|sstItem)>/;function x4e(e,t){var r=[],n="";if(!e)return r;var a=e.match(m4e);if(a){n=a[2].replace(p4e,"").split(g4e);for(var s=0;s!=n.length;++s){var i=zP(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=$r(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var v4e=/^\s|\s$|[\t\n\r]/;function fre(e,t){if(!t.bookSST)return"";var r=[Xs];r[r.length]=$t("sst",null,{xmlns:Eg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(v4e)&&(s+=' xml:space="preserve"'),s+=">"+pa(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function b4e(e){return[e.read_shift(4),e.read_shift(4)]}function y4e(e,t){var r=[],n=!1;return Bh(e,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function w4e(e,t){return t||(t=Et(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var E4e=FSe;function C4e(e){var t=Xl();Rt(t,159,w4e(e));for(var r=0;r<e.length;++r)Rt(t,19,E4e(e[r]));return Rt(t,160),t.end()}function hre(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function nh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function _4e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=nh(e,4),t.U=nh(e,4),t.W=nh(e,4),t}function S4e(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function N4e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(S4e(e));return t}function k4e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function B4e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=nh(e,4),t.U=nh(e,4),t.W=nh(e,4),t}function T4e(e){var t=B4e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function mre(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function pre(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function j4e(e){var t=nh(e);switch(t.Minor){case 2:return[t.Minor,I4e(e)];case 3:return[t.Minor,F4e()];case 4:return[t.Minor,O4e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function I4e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=mre(e,r),a=pre(e,e.length-e.l);return{t:"Std",h:n,v:a}}function F4e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function O4e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(nl,function(s){var i=$r(s);switch(JA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function D4e(e,t){var r={},n=r.EncryptionVersionInfo=nh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=mre(e,a),t-=a,r.EncryptionVerifier=pre(e,t),r}function P4e(e){var t={},r=t.EncryptionVersionInfo=nh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function $P(e){var t=0,r,n=hre(e),a=n.length+1,s,i,o,c,u;for(r=xm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(t&16384)===0?0:1,c=t<<1&32767,u=o|c,t=u^i;return t^52811}var gre=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=hre(i),c=s(o),u=o.length,d=xm(16),f=0;f!=16;++f)d[f]=0;var h,p,g;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,p=o[o.length-1],d[u]=a(p,h));u>0;)--u,h=c>>8,d[u]=a(o[u],h),--u,h=c&255,d[u]=a(o[u],h);for(u=15,g=15-o.length;g>0;)h=c>>8,d[u]=a(e[g],h),--u,--g,h=c&255,d[u]=a(o[u],h),--u,--g;return d}}(),R4e=function(e,t,r,n,a){a||(a=t),n||(n=gre(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},L4e=function(e){var t=0,r=gre(e);return function(n){var a=R4e("",n,t,r);return t=a[1],a[0]}};function M4e(e,t,r,n){var a={key:li(e),verificationBytes:li(e)};return r.password&&(a.verifier=$P(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=L4e(r.password)),a}function U4e(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=P4e(e):n.Data=D4e(e,t),n}function Q4e(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?U4e(e,t-2,n):M4e(e,r.biff>=8?t:t-2,r,n),n}var xre=function(){function e(a,s){switch(s.type){case"base64":return t(Pc(a),s);case"binary":return t(a,s);case"buffer":return t(gn&&Buffer.isBuffer(a)?a.toString("binary"):jm(a),s);case"array":return t(ag(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},o=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,p=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var b=d.slice(p,h.lastIndex-g[0].length);if(b[0]==" "&&(b=b.slice(1)),++x,b.length){var y={v:b,t:"s"};Array.isArray(o)?o[f][x]=y:o[Ur({r:f,c:x})]=y}break}p=h.lastIndex}x>u.e.c&&(u.e.c=x)}),o["!ref"]=rn(u),o}function r(a,s){return Im(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Qn(a["!ref"]),o,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Ur({r:u,c:d});o=c?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(mh(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function H4e(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Ow(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function V4e(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var o=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,c,u/2]}function z4e(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-o),i[0]+=c,i[1]+=a;break;case 2:c=a*(o-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-o),i[1]+=c,i[2]+=a;break;case 4:c=a*(o-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-o),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function o5(e,t){if(t===0)return e;var r=V4e(H4e(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Ow(z4e(r))}var vre=6,$4e=15,G4e=1,$o=vre;function Dw(e){return Math.floor((e+Math.round(128/$o)/256)*$o)}function Pw(e){return Math.floor((e-5)/$o*100+.5)/100}function l5(e){return Math.round((e*$o+5)/$o*256)/256}function qT(e){return l5(Pw(Dw(e)))}function GP(e){var t=Math.abs(e-qT(e)),r=$o;if(t>.005)for($o=G4e;$o<$4e;++$o)Math.abs(e-qT(e))<=t&&(t=Math.abs(e-qT(e)),r=$o);$o=r}function vm(e){e.width?(e.wpx=Dw(e.width),e.wch=Pw(e.wpx),e.MDW=$o):e.wpx?(e.wch=Pw(e.wpx),e.width=l5(e.wch),e.MDW=$o):typeof e.wch=="number"&&(e.width=l5(e.wch),e.wpx=Dw(e.width),e.MDW=$o),e.customWidth&&delete e.customWidth}var K4e=96,bre=K4e;function Rw(e){return e*96/bre}function $v(e){return e*bre/96}var q4e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function W4e(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(nl)||[]).forEach(function(i){var o=$r(i);switch(JA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Ma(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Ma(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function X4e(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(nl)||[]).forEach(function(i){var o=$r(i);switch(JA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function Y4e(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(nl)||[]).forEach(function(i){var o=$r(i);switch(JA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Ea(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Ma(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Ma(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Ma(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Ma(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Ma(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Ma(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Ma(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=bP[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Ma(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=Lp[a.color.index];a.color.index==81&&(c=Lp[1]),c||(c=Lp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=o5(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function J4e(e,t,r){t.NumberFmt=[];for(var n=Ts(Rr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Rr[n[a]];var s=e[0].match(nl);if(s)for(a=0;a<s.length;++a){var i=$r(s[a]);switch(JA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Un(Ea(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}rh(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Z4e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=$t("numFmt",null,{numFmtId:n,formatCode:pa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=$t("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var kC=["numFmtId","fillId","fontId","borderId","xfId"],BC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function eke(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(nl)||[]).forEach(function(s){var i=$r(s),o=0;switch(JA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<kC.length;++o)n[kC[o]]&&(n[kC[o]]=parseInt(n[kC[o]],10));for(o=0;o<BC.length;++o)n[BC[o]]&&(n[BC[o]]=Ma(n[BC[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Ma(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function tke(e){var t=[];return t[t.length]=$t("cellXfs",null),e.forEach(function(r){t[t.length]=$t("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=$t("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var rke=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&J4e(f,d,u),(f=o.match(a))&&Y4e(f,d,c,u),(f=o.match(n))&&X4e(f,d,c,u),(f=o.match(s))&&W4e(f,d,c,u),(f=o.match(r))&&eke(f,d,u),d}}();function yre(e,t){var r=[Xs,$t("styleSheet",null,{xmlns:Eg[0],"xmlns:vt":Ci.vt})],n;return e.SSF&&(n=Z4e(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=tke(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function nke(e,t){var r=e.read_shift(2),n=Jo(e);return[r,n]}function ake(e,t,r){r||(r=Et(6+4*t.length)),r.write_shift(2,e),qi(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function ske(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=USe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=MSe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Jo(e),n}function ike(e,t){t||(t=Et(153)),t.write_shift(2,e.sz*20),QSe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),a5(e.color,t);var n=0;return n=2,t.write_shift(1,n),qi(e.name,t),t.length>t.l?t.slice(0,t.l):t}var oke=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],WT,lke=tl;function uV(e,t){t||(t=Et(84)),WT||(WT=w4(oke));var r=WT[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(a5({auto:1},t),a5({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function cke(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function wre(e,t,r){r||(r=Et(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Ub(e,t){return t||(t=Et(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var uke=tl;function dke(e,t){return t||(t=Et(51)),t.write_shift(1,0),Ub(null,t),Ub(null,t),Ub(null,t),Ub(null,t),Ub(null,t),t.length>t.l?t.slice(0,t.l):t}function Ake(e,t){return t||(t=Et(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),n5(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function fke(e,t,r){var n=Et(2052);return n.write_shift(4,e),n5(t,n),n5(r,n),n.length>n.l?n.slice(0,n.l):n}function hke(e,t,r){var n={};n.NumberFmt=[];for(var a in Rr)n.NumberFmt[a]=Rr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Bh(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],rh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=o5(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function mke(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Rt(e,615,jd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Rt(e,44,ake(a,t[a]))}),Rt(e,616))}}function pke(e){var t=1;Rt(e,611,jd(t)),Rt(e,43,ike({sz:12,color:{theme:1},name:"Calibri",family:2})),Rt(e,612)}function gke(e){var t=2;Rt(e,603,jd(t)),Rt(e,45,uV({patternType:"none"})),Rt(e,45,uV({patternType:"gray125"})),Rt(e,604)}function xke(e){var t=1;Rt(e,613,jd(t)),Rt(e,46,dke()),Rt(e,614)}function vke(e){var t=1;Rt(e,626,jd(t)),Rt(e,47,wre({numFmtId:0},65535)),Rt(e,627)}function bke(e,t){Rt(e,617,jd(t.length)),t.forEach(function(r){Rt(e,47,wre(r,0))}),Rt(e,618)}function yke(e){var t=1;Rt(e,619,jd(t)),Rt(e,48,Ake({xfId:0,name:"Normal"})),Rt(e,620)}function wke(e){var t=0;Rt(e,505,jd(t)),Rt(e,506)}function Eke(e){var t=0;Rt(e,508,fke(t,"TableStyleMedium9","PivotStyleMedium4")),Rt(e,509)}function Cke(e,t){var r=Xl();return Rt(r,278),mke(r,e.SSF),pke(r),gke(r),xke(r),vke(r),bke(r,t.cellXfs),yke(r),wke(r),Eke(r),Rt(r,279),r.end()}var _ke=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Ske(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(nl)||[]).forEach(function(a){var s=$r(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[_ke.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Nke(){}function kke(){}var Bke=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Tke=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,jke=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Ike(e,t,r){t.themeElements={};var n;[["clrScheme",Bke,Ske],["fontScheme",Tke,Nke],["fmtScheme",jke,kke]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var Fke=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Ere(e,t){(!e||e.length===0)&&(e=KP());var r,n={};if(!(r=e.match(Fke)))throw new Error("themeElements not found in theme");return Ike(r[0],n,t),n.raw=e,n}function KP(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Xs];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Oke(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=mte(s,{type:"array"})}catch{return}var o=Bc(i,"theme/theme/theme1.xml",!0);if(o)return Ere(o,r)}}function Dke(e){return e.read_shift(4)}function Pke(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Rke(e,4);break;case 2:t.xclrValue=rre(e);break;case 3:t.xclrValue=Dke(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Rke(e,t){return tl(e,t)}function Lke(e,t){return tl(e,t)}function Mke(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Pke(e);break;case 6:n[1]=Lke(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Uke(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(Mke(e,r-e.l));return{ixfe:n,ext:s}}function Qke(e,t){t.forEach(function(r){r[0]})}function Hke(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Jo(e)}}function Vke(e){var t=Et(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),qi(e.name,t),t.slice(0,t.l)}function zke(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function $ke(e){var t=Et(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Gke(e,t){var r=Et(8+2*t.length);return r.write_shift(4,e),qi(t,r),r.slice(0,r.l)}function Kke(e){return e.l+=4,e.read_shift(4)!=0}function qke(e,t){var r=Et(8);return r.write_shift(4,e),r.write_shift(4,1),r}function Wke(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return Bh(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function Xke(){var e=Xl();return Rt(e,332),Rt(e,334,jd(1)),Rt(e,335,Vke({name:"XLDAPR",version:12e4,flags:3496657072})),Rt(e,336),Rt(e,339,Gke(1,"XLDAPR")),Rt(e,52),Rt(e,35,jd(514)),Rt(e,4096,jd(0)),Rt(e,4097,Eu(1)),Rt(e,36),Rt(e,53),Rt(e,340),Rt(e,337,qke(1)),Rt(e,51,$ke([[1,0]])),Rt(e,338),Rt(e,333),e.end()}function Yke(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(nl,function(o){var c=$r(o);switch(JA(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function Cre(){var e=[Xs];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Jke(e){var t=[];if(!e)return t;var r=1;return(e.match(nl)||[]).forEach(function(n){var a=$r(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function Zke(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Ur(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function eBe(e,t,r){var n=[];return Bh(e,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function tBe(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Bh(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function rBe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Jx=1024;function _re(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[$t("xml",null,{"xmlns:v":Cc.v,"xmlns:o":Cc.o,"xmlns:x":Cc.x,"xmlns:mv":Cc.mv}).replace(/\/>/,">"),$t("o:shapelayout",$t("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),$t("v:shapetype",[$t("v:stroke",null,{joinstyle:"miter"}),$t("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Jx<e*1e3;)Jx+=1e3;return t.forEach(function(s){var i=os(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?$t("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=$t("v:fill",c,o),d={on:"t",obscured:"t"};++Jx,a=a.concat(["<v:shape"+jw({id:"_x0000_s"+Jx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,$t("v:shadow",null,d),$t("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",po("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),po("x:AutoFill","False"),po("x:Row",String(i.r)),po("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function dV(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var o=os(i.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[i.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[i.ref]=s;var c=Qn(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=rn(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function nBe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=$r(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=os(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&zP(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Sre(e){var t=[Xs,$t("comments",null,{xmlns:Eg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=pa(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(pa(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(po("t",pa(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;t.push(po("t",pa(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function aBe(e,t){var r=[],n=!1,a={},s=0;return e.replace(nl,function(o,c){var u=$r(o);switch(JA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function sBe(e,t,r){var n=[Xs,$t("ThreadedComments",null,{xmlns:Ci.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push($t("threadedComment",po("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function iBe(e,t){var r=[],n=!1;return e.replace(nl,function(s){var i=$r(s);switch(JA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function oBe(e){var t=[Xs,$t("personList",null,{xmlns:Ci.TCMNT,"xmlns:x":Eg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push($t("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function lBe(e){var t={};t.iauthor=e.read_shift(4);var r=Ng(e);return t.rfx=r.s,t.ref=Ur(r.s),e.l+=16,t}function cBe(e,t){return t==null&&(t=Et(36)),t.write_shift(4,e[1].iauthor),I1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var uBe=Jo;function dBe(e){return qi(e.slice(0,54))}function ABe(e,t){var r=[],n=[],a={},s=!1;return Bh(e,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function fBe(e){var t=Xl(),r=[];return Rt(t,628),Rt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Rt(t,632,dBe(a.a)))})}),Rt(t,631),Rt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:os(n[0]),e:os(n[0])};Rt(t,635,cBe([s,a])),a.t&&a.t.length>0&&Rt(t,637,DSe(a)),Rt(t,636),delete a.iauthor})}),Rt(t,634),Rt(t,629),t.end()}var hBe="application/vnd.ms-office.vbaProject";function mBe(e){var t=Cr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Cr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Cr.write(t)}function pBe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Cr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Nre=["xlsb","xlsm","xlam","biff8","xla"];function gBe(){return{"!type":"dialog"}}function xBe(){return{"!type":"dialog"}}function vBe(){return{"!type":"macro"}}function bBe(){return{"!type":"macro"}}var wv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,a+(o?"":"$")+is(d)+(c?"":"$")+qs(u)}return function(a,s){return t=s,a.replace(e,r)}}(),qP=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,WP=function(){return function(t,r){return t.replace(qP,function(n,a,s,i,o,c){var u=DP(i)-(s?0:r.c),d=OP(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function kre(e,t){return e.replace(qP,function(r,n,a,s,i,o){return n+(a=="$"?a+s:is(DP(s)+t.c))+(i=="$"?i+o:qs(OP(o)+t.r))})}function yBe(e,t,r){var n=Jl(t),a=n.s,s=os(r),i={r:s.r-a.r,c:s.c-a.c};return kre(e,i)}function wBe(e){return e.length!=1}function AV(e){return e.replace(/_xlfn\./g,"")}function ai(e){e.l+=1}function bm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Bre(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Tre(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=bm(e),o=bm(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function Tre(e){var t=bm(e),r=bm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function EBe(e,t,r){if(r.biff<8)return Tre(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=bm(e),i=bm(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function jre(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return CBe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=bm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function CBe(e){var t=bm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function _Be(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function SBe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return NBe(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function NBe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function kBe(e,t,r){var n=(e[e.l++]&96)>>5,a=Bre(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function BBe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=Bre(e,s,r);return[n,a,i]}function TBe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function jBe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function IBe(e,t,r){var n=(e[e.l++]&96)>>5,a=EBe(e,t-1,r);return[n,a]}function FBe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function fV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function OBe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function DBe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function PBe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function RBe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function LBe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Ire(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function MBe(e){return e.read_shift(2),Ire(e)}function UBe(e){return e.read_shift(2),Ire(e)}function QBe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=jre(e,0,r);return[n,a]}function HBe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=SBe(e,0,r);return[n,a]}function VBe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=jre(e,0,r);return[n,a,s]}function zBe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[KTe[a],Dre[a],n]}function $Be(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:GBe(e);return[a,(s[0]===0?Dre:GTe)[s[1]]]}function GBe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function KBe(e,t,r){e.l+=r&&r.biff==2?3:4}function qBe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function WBe(e){return e.l++,Th[e.read_shift(1)]}function XBe(e){return e.l++,e.read_shift(2)}function YBe(e){return e.l++,e.read_shift(1)!==0}function JBe(e){return e.l++,Xo(e)}function ZBe(e,t,r){return e.l++,B2(e,t-1,r)}function eTe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ms(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Th[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Xo(e);break;case 2:r[1]=kg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function tTe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Ng:_4)(e));return a}function rTe(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=eTe(e,r.biff);return i}function nTe(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function aTe(e,t,r){if(r.biff==5)return sTe(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function sTe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function iTe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function oTe(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function lTe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function cTe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var uTe=tl,dTe=tl,ATe=tl;function j2(e,t,r){return e.l+=2,[_Be(e)]}function XP(e){return e.l+=6,[]}var fTe=j2,hTe=XP,mTe=XP,pTe=j2;function Fre(e){return e.l+=2,[li(e),e.read_shift(2)&1]}var gTe=j2,xTe=Fre,vTe=XP,bTe=j2,yTe=j2,wTe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function ETe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=wTe[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function CTe(e){return e.l+=2,[e.read_shift(4)]}function _Te(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function STe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function NTe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function kTe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function BTe(e){return e.l+=4,[0,0]}var hV={1:{n:"PtgExp",f:qBe},2:{n:"PtgTbl",f:ATe},3:{n:"PtgAdd",f:ai},4:{n:"PtgSub",f:ai},5:{n:"PtgMul",f:ai},6:{n:"PtgDiv",f:ai},7:{n:"PtgPower",f:ai},8:{n:"PtgConcat",f:ai},9:{n:"PtgLt",f:ai},10:{n:"PtgLe",f:ai},11:{n:"PtgEq",f:ai},12:{n:"PtgGe",f:ai},13:{n:"PtgGt",f:ai},14:{n:"PtgNe",f:ai},15:{n:"PtgIsect",f:ai},16:{n:"PtgUnion",f:ai},17:{n:"PtgRange",f:ai},18:{n:"PtgUplus",f:ai},19:{n:"PtgUminus",f:ai},20:{n:"PtgPercent",f:ai},21:{n:"PtgParen",f:ai},22:{n:"PtgMissArg",f:ai},23:{n:"PtgStr",f:ZBe},26:{n:"PtgSheet",f:_Te},27:{n:"PtgEndSheet",f:STe},28:{n:"PtgErr",f:WBe},29:{n:"PtgBool",f:YBe},30:{n:"PtgInt",f:XBe},31:{n:"PtgNum",f:JBe},32:{n:"PtgArray",f:FBe},33:{n:"PtgFunc",f:zBe},34:{n:"PtgFuncVar",f:$Be},35:{n:"PtgName",f:nTe},36:{n:"PtgRef",f:QBe},37:{n:"PtgArea",f:kBe},38:{n:"PtgMemArea",f:iTe},39:{n:"PtgMemErr",f:uTe},40:{n:"PtgMemNoMem",f:dTe},41:{n:"PtgMemFunc",f:oTe},42:{n:"PtgRefErr",f:lTe},43:{n:"PtgAreaErr",f:TBe},44:{n:"PtgRefN",f:HBe},45:{n:"PtgAreaN",f:IBe},46:{n:"PtgMemAreaN",f:NTe},47:{n:"PtgMemNoMemN",f:kTe},57:{n:"PtgNameX",f:aTe},58:{n:"PtgRef3d",f:VBe},59:{n:"PtgArea3d",f:BBe},60:{n:"PtgRefErr3d",f:cTe},61:{n:"PtgAreaErr3d",f:jBe},255:{}},TTe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},jTe={1:{n:"PtgElfLel",f:Fre},2:{n:"PtgElfRw",f:bTe},3:{n:"PtgElfCol",f:fTe},6:{n:"PtgElfRwV",f:yTe},7:{n:"PtgElfColV",f:pTe},10:{n:"PtgElfRadical",f:gTe},11:{n:"PtgElfRadicalS",f:vTe},13:{n:"PtgElfColS",f:hTe},15:{n:"PtgElfColSV",f:mTe},16:{n:"PtgElfRadicalLel",f:xTe},25:{n:"PtgList",f:ETe},29:{n:"PtgSxName",f:CTe},255:{}},ITe={0:{n:"PtgAttrNoop",f:BTe},1:{n:"PtgAttrSemi",f:LBe},2:{n:"PtgAttrIf",f:PBe},4:{n:"PtgAttrChoose",f:OBe},8:{n:"PtgAttrGoto",f:DBe},16:{n:"PtgAttrSum",f:KBe},32:{n:"PtgAttrBaxcel",f:fV},33:{n:"PtgAttrBaxcel",f:fV},64:{n:"PtgAttrSpace",f:MBe},65:{n:"PtgAttrSpaceSemi",f:UBe},128:{n:"PtgAttrIfError",f:RBe},255:{}};function I2(e,t,r,n){if(n.biff<8)return tl(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=rTe(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=tTe(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(tl(e,t)),s}function F2(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=hV[s]||hV[TTe[s]],(s===24||s===25)&&(a=(s===24?jTe:ITe)[e[e.l+1]]),!a||!a.f?tl(e,t):i.push([a.n,a.f(e,t,r)]);return i}function FTe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var OTe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function DTe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Ore(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function mV(e,t,r){var n=Ore(e,t,r);return n=="#REF"?n:DTe(n,r)}function Ho(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],c,u,d,f=0,h=0,p,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,b="",y=0,w=e[0].length;y<w;++y){var S=e[0][y];switch(S[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),x>=0){switch(e[0][x][1][0]){case 0:b=Cs(" ",e[0][x][1][1]);break;case 1:b=Cs("\r",e[0][x][1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+b,x=-1}o.push(u+OTe[S[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Ky(S[1][1],i,a),o.push(qy(d,s));break;case"PtgRefN":d=r?Ky(S[1][1],r,a):S[1][1],o.push(qy(d,s));break;case"PtgRef3d":f=S[1][1],d=Ky(S[1][2],i,a),g=mV(n,f,a),o.push(g+"!"+qy(d,s));break;case"PtgFunc":case"PtgFuncVar":var j=S[1][0],N=S[1][1];j||(j=0),j&=127;var F=j==0?[]:o.slice(-j);o.length-=j,N==="User"&&(N=F.shift()),o.push(N+"("+F.join(",")+")");break;case"PtgBool":o.push(S[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(S[1]);break;case"PtgNum":o.push(String(S[1]));break;case"PtgStr":o.push('"'+S[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(S[1]);break;case"PtgAreaN":p=zH(S[1][1],r?{s:r}:i,a),o.push($T(p,a));break;case"PtgArea":p=zH(S[1][1],i,a),o.push($T(p,a));break;case"PtgArea3d":f=S[1][1],p=S[1][2],g=mV(n,f,a),o.push(g+"!"+$T(p,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=S[1][2];var E=(n.names||[])[h-1]||(n[0]||[])[h],_=E?E.Name:"SH33TJSNAME"+String(h);_&&_.slice(0,6)=="_xlfn."&&!a.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var B=S[1][1];h=S[1][2];var P;if(a.biff<=5)B<0&&(B=-B),n[B]&&(P=n[B][h]);else{var D="";if(((n[B]||[])[0]||[])[0]==14849||(((n[B]||[])[0]||[])[0]==1025?n[B][h]&&n[B][h].itab>0&&(D=n.SheetNames[n[B][h].itab-1]+"!"):D=n.SheetNames[h-1]+"!"),n[B]&&n[B][h])D+=n[B][h].Name;else if(n[0]&&n[0][h])D+=n[0][h].Name;else{var I=(Ore(n,B,a)||"").split(";;");I[h-1]?D=I[h-1]:D+="SH33TJSERRX"}o.push(D);break}P||(P={Name:"SH33TJSERRY"}),o.push(P.Name);break;case"PtgParen":var U="(",R=")";if(x>=0){switch(b="",e[0][x][1][0]){case 2:U=Cs(" ",e[0][x][1][1])+U;break;case 3:U=Cs("\r",e[0][x][1][1])+U;break;case 4:R=Cs(" ",e[0][x][1][1])+R;break;case 5:R=Cs("\r",e[0][x][1][1])+R;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}o.push(U+o.pop()+R);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:S[1][1],r:S[1][0]};var Y={c:r.c,r:r.r};if(n.sharedf[Ur(d)]){var H=n.sharedf[Ur(d)];o.push(Ho(H,i,Y,n,a))}else{var X=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Ho(u[1],i,Y,n,a)),X=!0;break}X||o.push(S[1])}break;case"PtgArray":o.push("{"+FTe(S[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+S[1].idx+"[#"+S[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(S));default:throw new Error("Unrecognized Formula Token: "+String(S))}var V=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&V.indexOf(e[0][y][0])==-1){S=e[0][x];var z=!0;switch(S[1][0]){case 4:z=!1;case 0:b=Cs(" ",S[1][1]);break;case 5:z=!1;case 1:b=Cs("\r",S[1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+S[1][0])}o.push((z?b:"")+o.pop()+(z?"":b)),x=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function PTe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],tl(e,t-2)];var o=F2(e,i,r);return t!==i+a&&(s=I2(e,t-i-a,o,r)),e.l=n,[o,s]}function RTe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],tl(e,t-2)];var o=F2(e,i,r);return t!==i+a&&(s=I2(e,t-i-a,o,r)),e.l=n,[o,s]}function LTe(e,t,r,n){var a=e.l+t,s=F2(e,n,r),i;return a!==e.l&&(i=I2(e,a-e.l,s,r)),[s,i]}function MTe(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=F2(e,s,r);return s==65535?[[],tl(e,t-2)]:(t!==s+2&&(a=I2(e,n-s-2,i,r)),[i,a])}function UTe(e){var t;if(Kf(e,e.l+6)!==65535)return[Xo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function QTe(e){if(e==null){var t=Et(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return sg(e);return sg(0)}function XT(e,t,r){var n=e.l+t,a=ZA(e);r.biff==2&&++e.l;var s=UTe(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=RTe(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function HTe(e,t,r,n,a){var s=og(t,r,a),i=QTe(e.v),o=Et(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Et(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Gi([s,i,o,u]);return f}function S4(e,t,r){var n=e.read_shift(4),a=F2(e,n,r),s=e.read_shift(4),i=s>0?I2(e,s,a,r):null;return[a,i]}var VTe=S4,N4=S4,zTe=S4,$Te=S4,GTe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Dre={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},KTe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function pV(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function qTe(e){var t="of:="+e.replace(qP,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function YT(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function WTe(e){return e.replace(/\./,"!")}var Xy={},Ev={},Yy=typeof Map<"u";function YP(e,t,r){var n=0,a=e.length;if(r){if(Yy?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=Yy?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(Yy?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function k4(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&($o=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Pw(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=l5(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Qp(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Fm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){rh(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Pre(e,t,r,n,a,s){try{n.cellNF&&(e.z=Rr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Qa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Rr[t]==null&&rh(G_e[t]||"General",t),e.t==="e")e.w=e.w||Th[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Bw(e.v);else if(e.t==="d"){var i=Si(e.v);(i|0)===i?e.w=i.toString(10):e.w=Bw(i)}else{if(e.v===void 0)return"";e.w=ng(e.v,Ev)}else e.t==="d"?e.w=Du(t,Si(e.v),Ev):e.w=Du(t,e.v,Ev)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=o5(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=o5(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function XTe(e,t,r){if(e&&e["!ref"]){var n=Qn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function YTe(e,t){var r=Qn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=rn(r))}var JTe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,ZTe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,e3e=/<(?:\w:)?hyperlink [^>]*>/mg,t3e=/"(\w*:\w*)"/,r3e=/<(?:\w:)?col\b[^>]*[\/]?>/g,n3e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,a3e=/<(?:\w:)?pageMargins[^>]*\/>/g,Rre=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,s3e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,i3e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function o3e(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(ZTe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(Rre);h?JP(h[0],o,a,r):(h=u.match(s3e))&&c3e(h[0],h[1]||"",o,a,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var g=u.slice(p,p+50).match(t3e);g&&YTe(o,g[1])}var x=u.match(i3e);x&&x[1]&&w3e(x[1],a);var b=[];if(t.cellStyles){var y=u.match(r3e);y&&g3e(b,y)}f&&_3e(f[1],o,t,c,s,i);var w=d.match(n3e);w&&(o["!autofilter"]=v3e(w[0]));var S=[],j=d.match(JTe);if(j)for(p=0;p!=j.length;++p)S[p]=Qn(j[p].slice(j[p].indexOf('"')+1));var N=d.match(e3e);N&&h3e(o,N,n);var F=d.match(a3e);if(F&&(o["!margins"]=m3e($r(F[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=rn(c)),t.sheetRows>0&&o["!ref"]){var E=Qn(o["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=rn(E))}return b.length>0&&(o["!cols"]=b),S.length>0&&(o["!merges"]=S),o}function l3e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+rn(e[r])+'"/>';return t+"</mergeCells>"}function JP(e,t,r,n){var a=$r(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Un(Ea(a.codeName)))}function c3e(e,t,r,n,a){JP(e.slice(0,e.indexOf(">")),r,n,a)}function u3e(e,t,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=PA(pa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+$t("outlinePr",null,u)}!s&&!o||(a[a.length]=$t("sheetPr",o,i))}var d3e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],A3e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function f3e(e){var t={sheet:1};return d3e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),A3e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=$P(e.password).toString(16).toUpperCase()),$t("sheetProtection",null,t)}function h3e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=$r(Ea(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Un(s.location))):(s.Target="#"+Un(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Qn(s.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=Ur({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function m3e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function p3e(e){return Qp(e),$t("pageMargins",null,e)}function g3e(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=$r(t[n],!0);a.hidden&&(a.hidden=Ma(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,GP(a.width)),vm(a);s<=i;)e[s++]=Ha(a)}}function x3e(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=$t("col",null,k4(a,n)));return r[r.length]="</cols>",r.join("")}function v3e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function b3e(e,t,r,n){var a=typeof e.ref=="string"?e.ref:rn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Jl(a);i.s.r==i.e.r&&(i.e.r=Jl(t["!ref"]).e.r,a=rn(i));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),$t("autoFilter",null,{ref:a})}var y3e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function w3e(e,t){t.Views||(t.Views=[{}]),(e.match(y3e)||[]).forEach(function(r,n){var a=$r(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ma(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function E3e(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),$t("sheetViews",$t("sheetView",null,a),{})}function C3e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Th[e.v];break;case"d":n&&n.cellDates?a=Qa(e.v,-1).toISOString():(e=Ha(e),e.t="n",a=""+(e.v=Si(Qa(e.v)))),typeof e.z>"u"&&(e.z=Rr[14]);break;default:a=e.v;break}var o=po("v",pa(a)),c={r:t},u=Fm(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=po("v",""+YP(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=$t("f",pa(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),$t("c",o,c)}var _3e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=Tw("v"),i=Tw("f");return function(c,u,d,f,h,p){for(var g=0,x="",b=[],y=[],w=0,S=0,j=0,N="",F,E,_=0,B=0,P,D,I=0,U=0,R=Array.isArray(p.CellXf),Y,H=[],X=[],V=Array.isArray(u),z=[],q={},ne=!1,M=!!d.sheetStubs,W=c.split(t),Z=0,re=W.length;Z!=re;++Z){x=W[Z].trim();var ae=x.length;if(ae!==0){var ce=0;e:for(g=0;g<ae;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(E=$r(x.slice(ce,g),!0),_=E.r!=null?parseInt(E.r,10):_+1,B=-1,d.sheetRows&&d.sheetRows<_)continue;q={},ne=!1,E.ht&&(ne=!0,q.hpt=parseFloat(E.ht),q.hpx=$v(q.hpt)),E.hidden=="1"&&(ne=!0,q.hidden=!0),E.outlineLevel!=null&&(ne=!0,q.level=+E.outlineLevel),ne&&(z[_-1]=q)}break;case"<":ce=g;break}if(ce>=g)break;if(E=$r(x.slice(ce,g),!0),_=E.r!=null?parseInt(E.r,10):_+1,B=-1,!(d.sheetRows&&d.sheetRows<_)){f.s.r>_-1&&(f.s.r=_-1),f.e.r<_-1&&(f.e.r=_-1),d&&d.cellStyles&&(q={},ne=!1,E.ht&&(ne=!0,q.hpt=parseFloat(E.ht),q.hpx=$v(q.hpt)),E.hidden=="1"&&(ne=!0,q.hidden=!0),E.outlineLevel!=null&&(ne=!0,q.level=+E.outlineLevel),ne&&(z[_-1]=q)),b=x.slice(g).split(e);for(var oe=0;oe!=b.length&&b[oe].trim().charAt(0)=="<";++oe);for(b=b.slice(oe),g=0;g!=b.length;++g)if(x=b[g].trim(),x.length!==0){if(y=x.match(r),w=g,S=0,j=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(w=0,N=y[1],S=0;S!=N.length&&!((j=N.charCodeAt(S)-64)<1||j>26);++S)w=26*w+j;--w,B=w}else++B;for(S=0;S!=x.length&&x.charCodeAt(S)!==62;++S);if(++S,E=$r(x.slice(0,S),!0),E.r||(E.r=Ur({r:_-1,c:B})),N=x.slice(S),F={t:""},(y=N.match(s))!=null&&y[1]!==""&&(F.v=Un(y[1])),d.cellFormula){if((y=N.match(i))!=null&&y[1]!==""){if(F.f=Un(Ea(y[1])).replace(/\r\n/g,`
`),d.xlfn||(F.f=AV(F.f)),y[0].indexOf('t="array"')>-1)F.F=(N.match(a)||[])[1],F.F.indexOf(":")>-1&&H.push([Qn(F.F),F.F]);else if(y[0].indexOf('t="shared"')>-1){D=$r(y[0]);var le=Un(Ea(y[1]));d.xlfn||(le=AV(le)),X[parseInt(D.si,10)]=[D,le,E.r]}}else(y=N.match(/<f[^>]*\/>/))&&(D=$r(y[0]),X[D.si]&&(F.f=yBe(X[D.si][1],X[D.si][2],E.r)));var pe=os(E.r);for(S=0;S<H.length;++S)pe.r>=H[S][0].s.r&&pe.r<=H[S][0].e.r&&pe.c>=H[S][0].s.c&&pe.c<=H[S][0].e.c&&(F.F=H[S][1])}if(E.t==null&&F.v===void 0)if(F.f||F.F)F.v=0,F.t="n";else if(M)F.t="z";else continue;else F.t=E.t||"n";switch(f.s.c>B&&(f.s.c=B),f.e.c<B&&(f.e.c=B),F.t){case"n":if(F.v==""||F.v==null){if(!M)continue;F.t="z"}else F.v=parseFloat(F.v);break;case"s":if(typeof F.v>"u"){if(!M)continue;F.t="z"}else P=Xy[parseInt(F.v,10)],F.v=P.t,F.r=P.r,d.cellHTML&&(F.h=P.h);break;case"str":F.t="s",F.v=F.v!=null?Ea(F.v):"",d.cellHTML&&(F.h=TP(F.v));break;case"inlineStr":y=N.match(n),F.t="s",y!=null&&(P=zP(y[1]))?(F.v=P.t,d.cellHTML&&(F.h=P.h)):F.v="";break;case"b":F.v=Ma(F.v);break;case"d":d.cellDates?F.v=Qa(F.v,1):(F.v=Si(Qa(F.v,1)),F.t="n");break;case"e":(!d||d.cellText!==!1)&&(F.w=F.v),F.v=Mte[F.v];break}if(I=U=0,Y=null,R&&E.s!==void 0&&(Y=p.CellXf[E.s],Y!=null&&(Y.numFmtId!=null&&(I=Y.numFmtId),d.cellStyles&&Y.fillId!=null&&(U=Y.fillId))),Pre(F,I,U,d,h,p),d.cellDates&&R&&F.t=="n"&&B1(Rr[I])&&(F.t="d",F.v=C4(F.v)),E.cm&&d.xlmeta){var Be=(d.xlmeta.Cell||[])[+E.cm-1];Be&&Be.type=="XLDAPR"&&(F.D=!0)}if(V){var te=os(E.r);u[te.r]||(u[te.r]=[]),u[te.r][te.c]=F}else u[E.r]=F}}}}z.length>0&&(u["!rows"]=z)}}();function S3e(e,t,r,n){var a=[],s=[],i=Qn(e["!ref"]),o="",c,u="",d=[],f=0,h=0,p=e["!rows"],g=Array.isArray(e),x={r:u},b,y=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=is(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=qs(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var w=g?(e[f]||[])[h]:e[c];w!==void 0&&(o=C3e(w,c,e,t))!=null&&s.push(o)}(s.length>0||p&&p[f])&&(x={r:u},p&&p[f]&&(b=p[f],b.hidden&&(x.hidden=1),y=-1,b.hpx?y=Rw(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(x.ht=y,x.customHeight=1),b.level&&(x.outlineLevel=b.level)),a[a.length]=$t("row",s.join(""),x))}if(p)for(;f<p.length;++f)p&&p[f]&&(x={r:f+1},b=p[f],b.hidden&&(x.hidden=1),y=-1,b.hpx?y=Rw(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(x.ht=y,x.customHeight=1),b.level&&(x.outlineLevel=b.level),a[a.length]=$t("row","",x));return a.join("")}function Lre(e,t,r,n){var a=[Xs,$t("worksheet",null,{xmlns:Eg[0],"xmlns:r":Ci.r})],s=r.SheetNames[e],i=0,o="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Qn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=rn(d)}n||(n={}),c["!comments"]=[];var f=[];u3e(c,r,e,t,a),a[a.length]=$t("dimension",null,{ref:u}),a[a.length]=E3e(c,t,e,r),t.sheetFormat&&(a[a.length]=$t("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=x3e(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=S3e(c,t),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=f3e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=b3e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=l3e(c["!merges"]));var h=-1,p,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(p={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=fa(n,-1,pa(x[1].Target).replace(/#.*$/,""),En.HLINK),p["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(p.location=pa(x[1].Target.slice(h+1))),x[1].Tooltip&&(p.tooltip=pa(x[1].Tooltip)),a[a.length]=$t("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=p3e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=po("ignoredErrors",$t("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=fa(n,-1,"../drawings/drawing"+(e+1)+".xml",En.DRAW),a[a.length]=$t("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=fa(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",En.VML),a[a.length]=$t("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function N3e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function k3e(e,t,r){var n=Et(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=Rw(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Ur(u)];g&&(f<0&&(f=p),h=p)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var x=n.l;return n.l=c,n.write_shift(4,o),n.l=x,n.length>n.l?n.slice(0,n.l):n}function B3e(e,t,r,n){var a=k3e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Rt(e,0,a)}var T3e=Ng,j3e=I1;function I3e(){}function F3e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=PSe(e),r}function O3e(e,t,r){r==null&&(r=Et(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return a5({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Ote(e,r),r.slice(0,r.l)}function D3e(e){var t=Mu(e);return[t]}function P3e(e,t,r){return r==null&&(r=Et(8)),Cg(t,r)}function R3e(e){var t=_g(e);return[t]}function L3e(e,t,r){return r==null&&(r=Et(4)),Sg(t,r)}function M3e(e){var t=Mu(e),r=e.read_shift(1);return[t,r,"b"]}function U3e(e,t,r){return r==null&&(r=Et(9)),Cg(t,r),r.write_shift(1,e.v?1:0),r}function Q3e(e){var t=_g(e),r=e.read_shift(1);return[t,r,"b"]}function H3e(e,t,r){return r==null&&(r=Et(5)),Sg(t,r),r.write_shift(1,e.v?1:0),r}function V3e(e){var t=Mu(e),r=e.read_shift(1);return[t,r,"e"]}function z3e(e,t,r){return r==null&&(r=Et(9)),Cg(t,r),r.write_shift(1,e.v),r}function $3e(e){var t=_g(e),r=e.read_shift(1);return[t,r,"e"]}function G3e(e,t,r){return r==null&&(r=Et(8)),Sg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function K3e(e){var t=Mu(e),r=e.read_shift(4);return[t,r,"s"]}function q3e(e,t,r){return r==null&&(r=Et(12)),Cg(t,r),r.write_shift(4,t.v),r}function W3e(e){var t=_g(e),r=e.read_shift(4);return[t,r,"s"]}function X3e(e,t,r){return r==null&&(r=Et(8)),Sg(t,r),r.write_shift(4,t.v),r}function Y3e(e){var t=Mu(e),r=Xo(e);return[t,r,"n"]}function J3e(e,t,r){return r==null&&(r=Et(16)),Cg(t,r),sg(e.v,r),r}function Mre(e){var t=_g(e),r=Xo(e);return[t,r,"n"]}function Z3e(e,t,r){return r==null&&(r=Et(12)),Sg(t,r),sg(e.v,r),r}function eje(e){var t=Mu(e),r=MP(e);return[t,r,"n"]}function tje(e,t,r){return r==null&&(r=Et(12)),Cg(t,r),Dte(e.v,r),r}function rje(e){var t=_g(e),r=MP(e);return[t,r,"n"]}function nje(e,t,r){return r==null&&(r=Et(8)),Sg(t,r),Dte(e.v,r),r}function aje(e){var t=Mu(e),r=PP(e);return[t,r,"is"]}function sje(e){var t=Mu(e),r=Jo(e);return[t,r,"str"]}function ije(e,t,r){return r==null&&(r=Et(12+4*e.v.length)),Cg(t,r),qi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function oje(e){var t=_g(e),r=Jo(e);return[t,r,"str"]}function lje(e,t,r){return r==null&&(r=Et(8+4*e.v.length)),Sg(t,r),qi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function cje(e,t,r){var n=e.l+t,a=Mu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=N4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function uje(e,t,r){var n=e.l+t,a=Mu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=N4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function dje(e,t,r){var n=e.l+t,a=Mu(e);a.r=r["!row"];var s=Xo(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=N4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function Aje(e,t,r){var n=e.l+t,a=Mu(e);a.r=r["!row"];var s=Jo(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=N4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}var fje=Ng,hje=I1;function mje(e,t){return t==null&&(t=Et(4)),t.write_shift(4,e),t}function pje(e,t){var r=e.l+t,n=Ng(e),a=RP(e),s=Jo(e),i=Jo(e),o=Jo(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:o};return i&&(c.Tooltip=i),c}function gje(e,t){var r=Et(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));I1({s:os(e[0]),e:os(e[0])},r),LP("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return qi(a||"",r),qi(e[1].Tooltip||"",r),qi("",r),r.slice(0,r.l)}function xje(){}function vje(e,t,r){var n=e.l+t,a=Pte(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=VTe(e,n-e.l,r);i[1]=o}else e.l=n;return i}function bje(e,t,r){var n=e.l+t,a=Ng(e),s=[a];if(r.cellFormula){var i=$Te(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function yje(e,t,r){r==null&&(r=Et(18));var n=k4(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var Ure=["left","right","top","bottom","header","footer"];function wje(e){var t={};return Ure.forEach(function(r){t[r]=Xo(e)}),t}function Eje(e,t){return t==null&&(t=Et(48)),Qp(e),Ure.forEach(function(r){sg(e[r],t)}),t}function Cje(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function _je(e,t,r){r==null&&(r=Et(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Sje(e){var t=Et(24);return t.write_shift(4,4),t.write_shift(4,1),I1(e,t),t}function Nje(e,t){return t==null&&(t=Et(66)),t.write_shift(2,e.password?$P(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function kje(){}function Bje(){}function Tje(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,g,x,b,y,w,S,j,N,F=[];o.biff=12,o["!row"]=0;var E=0,_=!1,B=[],P={},D=o.supbooks||a.supbooks||[[]];if(D.sharedf=P,D.arrayf=B,D.SheetNames=a.SheetNames||a.Sheets.map(function(V){return V.name}),!o.supbooks&&(o.supbooks=D,a.Names))for(var I=0;I<a.Names.length;++I)D[0][I+1]=a.Names[I];var U=[],R=[],Y=!1;Lw[16]={n:"BrtShortReal",f:Mre};var H;if(Bh(e,function(z,q,ne){if(!h)switch(ne){case 148:u=z;break;case 0:p=z,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),j=qs(b=p.r),o["!row"]=p.r,(z.hidden||z.hpt||z.level!=null)&&(z.hpt&&(z.hpx=$v(z.hpt)),R[z.r]=z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:z[2]},z[2]){case"n":g.v=z[1];break;case"s":S=Xy[z[1]],g.v=S.t,g.r=S.r;break;case"b":g.v=!!z[1];break;case"e":g.v=z[1],o.cellText!==!1&&(g.w=Th[g.v]);break;case"str":g.t="s",g.v=z[1];break;case"is":g.t="s",g.v=z[1].t;break}if((x=i.CellXf[z[0].iStyleRef])&&Pre(g,x.numFmtId,null,o,s,i),y=z[0].c==-1?y+1:z[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=g):c[is(y)+j]=g,o.cellFormula){for(_=!1,E=0;E<B.length;++E){var M=B[E];p.r>=M[0].s.r&&p.r<=M[0].e.r&&y>=M[0].s.c&&y<=M[0].e.c&&(g.F=rn(M[0]),_=!0)}!_&&z.length>3&&(g.f=z[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),o.cellDates&&x&&g.t=="n"&&B1(Rr[x.numFmtId])){var W=Sp(g.v);W&&(g.t="d",g.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}H&&(H.type=="XLDAPR"&&(g.D=!0),H=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},y=z[0].c==-1?y+1:z[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=g):c[is(y)+j]=g,d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),H&&(H.type=="XLDAPR"&&(g.D=!0),H=void 0);break;case 176:F.push(z);break;case 49:H=((o.xlmeta||{}).Cell||[])[z-1];break;case 494:var Z=n["!id"][z.relId];for(Z?(z.Target=Z.Target,z.loc&&(z.Target+="#"+z.loc),z.Rel=Z):z.relId==""&&(z.Target="#"+z.loc),b=z.rfx.s.r;b<=z.rfx.e.r;++b)for(y=z.rfx.s.c;y<=z.rfx.e.c;++y)o.dense?(c[b]||(c[b]=[]),c[b][y]||(c[b][y]={t:"z",v:void 0}),c[b][y].l=z):(w=Ur({c:y,r:b}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=z);break;case 426:if(!o.cellFormula)break;B.push(z),N=o.dense?c[b][y]:c[is(y)+j],N.f=Ho(z[1],d,{r:p.r,c:y},D,o),N.F=rn(z[0]);break;case 427:if(!o.cellFormula)break;P[Ur(z[0].s)]=z[1],N=o.dense?c[b][y]:c[is(y)+j],N.f=Ho(z[1],d,{r:p.r,c:y},D,o);break;case 60:if(!o.cellStyles)break;for(;z.e>=z.s;)U[z.e--]={width:z.w/256,hidden:!!(z.flags&1),level:z.level},Y||(Y=!0,GP(z.w/256)),vm(U[z.e+1]);break;case 161:c["!autofilter"]={ref:rn(z)};break;case 476:c["!margins"]=z;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),z.name&&(a.Sheets[r].CodeName=z.name),(z.above||z.left)&&(c["!outline"]={above:z.above,left:z.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),z.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!q.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+ne.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=rn(u||d)),o.sheetRows&&c["!ref"]){var X=Qn(c["!ref"]);o.sheetRows<=+X.e.r&&(X.e.r=o.sheetRows-1,X.e.r>d.e.r&&(X.e.r=d.e.r),X.e.r<X.s.r&&(X.s.r=X.e.r),X.e.c>d.e.c&&(X.e.c=d.e.c),X.e.c<X.s.c&&(X.s.c=X.e.c),c["!fullref"]=c["!ref"],c["!ref"]=rn(X))}return F.length>0&&(c["!merges"]=F),U.length>0&&(c["!cols"]=U),R.length>0&&(c["!rows"]=R),c}function jje(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Ha(t),t.z=t.z||Rr[14],t.v=Si(Qa(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=Fm(a.cellXfs,t,a),t.l&&s["!links"].push([Ur(c),t.l]),t.c&&s["!comments"].push([Ur(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=YP(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,i?Rt(e,18,X3e(t,c)):Rt(e,7,q3e(t,c))):(c.t="str",i?Rt(e,17,lje(t,c)):Rt(e,6,ije(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Rt(e,13,nje(t,c)):Rt(e,2,tje(t,c)):i?Rt(e,16,Z3e(t,c)):Rt(e,5,J3e(t,c)),!0;case"b":return c.t="b",i?Rt(e,15,H3e(t,c)):Rt(e,4,U3e(t,c)),!0;case"e":return c.t="e",i?Rt(e,14,G3e(t,c)):Rt(e,3,z3e(t,c)),!0}return i?Rt(e,12,L3e(t,c)):Rt(e,1,P3e(t,c)),!0}function Ije(e,t,r,n){var a=Qn(t["!ref"]||"A1"),s,i="",o=[];Rt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=qs(d),B3e(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=is(h)),s=o[h]+i;var p=c?(t[d]||[])[h]:t[s];if(!p){f=!1;continue}f=jje(e,p,d,h,n,t,f)}}Rt(e,146)}function Fje(e,t){!t||!t["!merges"]||(Rt(e,177,mje(t["!merges"].length)),t["!merges"].forEach(function(r){Rt(e,176,hje(r))}),Rt(e,178))}function Oje(e,t){!t||!t["!cols"]||(Rt(e,390),t["!cols"].forEach(function(r,n){r&&Rt(e,60,yje(n,r))}),Rt(e,391))}function Dje(e,t){!t||!t["!ref"]||(Rt(e,648),Rt(e,649,Sje(Qn(t["!ref"]))),Rt(e,650))}function Pje(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=fa(r,-1,n[1].Target.replace(/#.*$/,""),En.HLINK);Rt(e,494,gje(n,a))}}),delete t["!links"]}function Rje(e,t,r,n){if(t["!comments"].length>0){var a=fa(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",En.VML);Rt(e,551,LP("rId"+a)),t["!legacy"]=a}}function Lje(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:rn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Jl(s);o.s.r==o.e.r&&(o.e.r=Jl(t["!ref"]).e.r,s=rn(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Rt(e,161,I1(Qn(s))),Rt(e,162)}}function Mje(e,t,r){Rt(e,133),Rt(e,137,_je(t,r)),Rt(e,138),Rt(e,134)}function Uje(e,t){t["!protect"]&&Rt(e,535,Nje(t["!protect"]))}function Qje(e,t,r,n){var a=Xl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Qn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Rt(a,129),(r.vbaraw||i["!outline"])&&Rt(a,147,O3e(o,i["!outline"])),Rt(a,148,j3e(c)),Mje(a,i,r.Workbook),Oje(a,i),Ije(a,i,e,t),Uje(a,i),Lje(a,i,r,e),Fje(a,i),Pje(a,i,n),i["!margins"]&&Rt(a,476,Eje(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Dje(a,i),Rje(a,i,e,n),Rt(a,130),a.end()}function Hje(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=Un((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function Vje(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=Hje(f);d.s.r=d.s.c=0,d.e.c=o,u=is(o),h[0].forEach(function(p,g){i[u+qs(g)]={t:"n",v:p,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=rn(d)),i}function zje(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(Rre);return o&&JP(o[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function $je(e,t){e.l+=10;var r=Jo(e);return{name:r}}function Gje(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Bh(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var ZP=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Kje=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],qje=[],Wje=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function gV(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ma(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function xV(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ma(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function Qre(e){xV(e.WBProps,ZP),xV(e.CalcPr,Wje),gV(e.WBView,Kje),gV(e.Sheets,qje),Ev.date1904=Ma(e.WBProps.date1904)}function Xje(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ma(e.Workbook.WBProps.date1904)?"true":"false"}var Yje="][*?/\\".split("");function Hre(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Yje.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Jje(e,t,r){e.forEach(function(n,a){Hre(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function Zje(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Jje(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)XTe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var eIe=/<\w+:workbook/;function tIe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(nl,function(c,u){var d=$r(c);switch(JA(d[0])){case"<?xml":break;case"<workbook":c.match(eIe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":ZP.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ma(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ea(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Un(Ea(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ea(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ma(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=Un(Ea(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Eg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Qre(r),r}function Vre(e){var t=[Xs];t[t.length]=$t("workbook",null,{xmlns:Eg[0],"xmlns:r":Ci.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(ZP.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=$t("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:pa(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=$t("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=$t("definedName",pa(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function rIe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=z6(e),r.name=Jo(e),r}function nIe(e,t){return t||(t=Et(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),LP(e.strRelID,t),qi(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function aIe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Jo(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function sIe(e,t){t||(t=Et(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Ote(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function iIe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function oIe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=RSe(e),i=zTe(e,0,r),o=RP(e);e.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function lIe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],Lw[16]={n:"BrtFRTArchID$",f:iIe},Bh(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Ho(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),Qre(r),r.Names=s,r.supbooks=i,r}function cIe(e,t){Rt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Rt(e,156,nIe(a))}Rt(e,144)}function uIe(e,t){t||(t=Et(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return qi("SheetJS",t),qi(YS.version,t),qi(YS.version,t),qi("7262",t),t.length>t.l?t.slice(0,t.l):t}function dIe(e,t){t||(t=Et(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function AIe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Rt(e,135),Rt(e,158,dIe(a)),Rt(e,136))}}function fIe(e,t){var r=Xl();return Rt(r,131),Rt(r,128,uIe()),Rt(r,153,sIe(e.Workbook&&e.Workbook.WBProps||null)),AIe(r,e),cIe(r,e),Rt(r,132),r.end()}function hIe(e,t,r){return t.slice(-4)===".bin"?lIe(e,r):tIe(e,r)}function mIe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?Tje(e,n,r,a,s,i,o):o3e(e,n,r,a,s,i,o)}function pIe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?Gje(e,n,r,a,s):zje(e,n,r,a,s)}function gIe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?vBe():bBe()}function xIe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?gBe():xBe()}function vIe(e,t,r,n){return t.slice(-4)===".bin"?hke(e,r,n):rke(e,r,n)}function bIe(e,t,r){return Ere(e,r)}function yIe(e,t,r){return t.slice(-4)===".bin"?y4e(e,r):x4e(e,r)}function wIe(e,t,r){return t.slice(-4)===".bin"?ABe(e,r):nBe(e,r)}function EIe(e,t,r){return t.slice(-4)===".bin"?eBe(e):Jke(e)}function CIe(e,t,r,n){return r.slice(-4)===".bin"?tBe(e,t,r,n):void 0}function _Ie(e,t,r){return t.slice(-4)===".bin"?Wke(e,t,r):Yke(e,t,r)}function SIe(e,t,r){return(t.slice(-4)===".bin"?fIe:Vre)(e)}function NIe(e,t,r,n,a){return(t.slice(-4)===".bin"?Qje:Lre)(e,r,n,a)}function kIe(e,t,r){return(t.slice(-4)===".bin"?Cke:yre)(e,r)}function BIe(e,t,r){return(t.slice(-4)===".bin"?C4e:fre)(e,r)}function TIe(e,t,r){return(t.slice(-4)===".bin"?fBe:Sre)(e)}function jIe(e){return(e.slice(-4)===".bin"?Xke:Cre)()}var zre=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,$re=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function fd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(zre),s,i,o,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match($re),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function IIe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(zre),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match($re),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var Jy;function FIe(e,t){var r=Jy[e]||Un(e);return r==="General"?ng(t):Du(r,t)}function OIe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ma(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Qa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Un(t)]=a}function DIe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Th[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Bw(e.v):e.w=ng(e.v):e.w=FIe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=Jy[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&B1(n)){var a=Sp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function PIe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=q4e[n.Pattern]||n.Pattern)}e[t.ID]=t}function RIe(e,t,r,n,a,s,i,o,c,u){var d="General",f=n.StyleID,h={};u=u||{};var p=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&p.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ma(e);break;case"String":n.t="s",n.r=DH(Un(e)),n.v=e.indexOf("<")>-1?Un(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Qa(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Un(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Mte[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=DH(t||e));break}if(DIe(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Un(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=wv(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=wv("RC:RC",a):n.ArrayRange&&(n.F=wv(n.ArrayRange,a),c.push([Qn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(p.forEach(function(b){!h.patternType&&b.patternType&&(h.patternType=b.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function LIe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function JT(e,t){var r=t||{};T1();var n=gy(jP(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ea(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Ha(r);return i.type="string",zv.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ue){a.indexOf("<"+Ue)>=0&&(s=!0)}),s)return E6e(n,r);Jy={"General Number":"General","General Date":Rr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Rr[15],"Short Date":Rr[14],"Long Time":Rr[19],"Medium Time":Rr[18],"Short Time":Rr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Rr[2],Standard:Rr[4],Percent:Rr[10],Scientific:Rr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],h=r.dense?[]:{},p="",g={},x={},b=fd('<Data ss:Type="String">'),y=0,w=0,S=0,j={s:{r:2e6,c:2e6},e:{r:0,c:0}},N={},F={},E="",_=0,B=[],P={},D={},I=0,U=[],R=[],Y={},H=[],X,V=!1,z=[],q=[],ne={},M=0,W=0,Z={Sheets:[],WBProps:{date1904:!1}},re={};Iw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ae="";o=Iw.exec(n);)switch(o[3]=(ae=o[3]).toLowerCase()){case"data":if(ae=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?RIe(n.slice(y,o.index),E,b,c[c.length-1][0]=="comment"?Y:g,{c:w,r:S},N,H[w],x,z,r):(E="",b=fd(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(R.length>0&&(g.c=R),(!r.sheetRows||r.sheetRows>S)&&g.v!==void 0&&(r.dense?(h[S]||(h[S]=[]),h[S][w]=g):h[is(w)+qs(S)]=g),g.HRef&&(g.l={Target:Un(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(M=w+(parseInt(g.MergeAcross,10)|0),W=S+(parseInt(g.MergeDown,10)|0),B.push({s:{c:w,r:S},e:{c:M,r:W}})),!r.sheetStubs)g.MergeAcross?w=M+1:++w;else if(g.MergeAcross||g.MergeDown){for(var ce=w;ce<=M;++ce)for(var oe=S;oe<=W;++oe)(ce>w||oe>S)&&(r.dense?(h[oe]||(h[oe]=[]),h[oe][ce]={t:"z"}):h[is(ce)+qs(oe)]={t:"z"});w=M+1}else++w;else g=IIe(o[0]),g.Index&&(w=+g.Index-1),w<j.s.c&&(j.s.c=w),w>j.e.c&&(j.e.c=w),o[0].slice(-2)==="/>"&&++w,R=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(S<j.s.r&&(j.s.r=S),S>j.e.r&&(j.e.r=S),o[0].slice(-2)==="/>"&&(x=fd(o[0]),x.Index&&(S=+x.Index-1)),w=0,++S):(x=fd(o[0]),x.Index&&(S=+x.Index-1),ne={},(x.AutoFitHeight=="0"||x.Height)&&(ne.hpx=parseInt(x.Height,10),ne.hpt=Rw(ne.hpx),q[S]=ne),x.Hidden=="1"&&(ne.hidden=!0,q[S]=ne));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),j.s.r<=j.e.r&&j.s.c<=j.e.c&&(h["!ref"]=rn(j),r.sheetRows&&r.sheetRows<=j.e.r&&(h["!fullref"]=h["!ref"],j.e.r=r.sheetRows-1,h["!ref"]=rn(j))),B.length&&(h["!merges"]=B),H.length>0&&(h["!cols"]=H),q.length>0&&(h["!rows"]=q),d[p]=h}else j={s:{r:2e6,c:2e6},e:{r:0,c:0}},S=w=0,c.push([o[3],!1]),u=fd(o[0]),p=Un(u.Name),h=r.dense?[]:{},B=[],z=[],q=[],re={name:p,Hidden:0},Z.Sheets.push(re);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),H=[],V=!1}break;case"style":o[1]==="/"?PIe(N,F,r):F=fd(o[0]);break;case"numberformat":F.nf=Un(fd(o[0]).Format||"General"),Jy[F.nf]&&(F.nf=Jy[F.nf]);for(var le=0;le!=392&&Rr[le]!=F.nf;++le);if(le==392){for(le=57;le!=392;++le)if(Rr[le]==null){rh(F.nf,le);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(X=fd(o[0]),X.Hidden&&(X.hidden=!0,delete X.Hidden),X.Width&&(X.wpx=parseInt(X.Width,10)),!V&&X.wpx>10){V=!0,$o=vre;for(var pe=0;pe<H.length;++pe)H[pe]&&vm(H[pe])}V&&vm(X),H[X.Index-1||H.length]=X;for(var Be=0;Be<+X.Span;++Be)H[H.length]=Ha(X);break;case"namedrange":if(o[1]==="/")break;Z.Names||(Z.Names=[]);var te=$r(o[0]),_e={Name:te.Name,Ref:wv(te.RefersTo.slice(1),{r:0,c:0})};Z.Sheets.length>0&&(_e.Sheet=Z.Sheets.length-1),Z.Names.push(_e);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=n.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;F.Interior=fd(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?l5e(P,ae,n.slice(I,o.index)):I=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));LIe(Y),R.push(Y)}else c.push([o[3],!1]),u=fd(o[0]),Y={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var De=fd(o[0]);h["!autofilter"]={ref:wv(De.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return EV(n,r);var Ne=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ne=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ne=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ne=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Ne=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(I,o.index)){case"SheetHidden":re.Hidden=1;break;case"SheetVeryHidden":re.Hidden=2;break}else I=o.index+o[0].length;break;case"header":h["!margins"]||Qp(h["!margins"]={},"xlml"),isNaN(+$r(o[0]).Margin)||(h["!margins"].header=+$r(o[0]).Margin);break;case"footer":h["!margins"]||Qp(h["!margins"]={},"xlml"),isNaN(+$r(o[0]).Margin)||(h["!margins"].footer=+$r(o[0]).Margin);break;case"pagemargins":var fe=$r(o[0]);h["!margins"]||Qp(h["!margins"]={},"xlml"),isNaN(+fe.Top)||(h["!margins"].top=+fe.Top),isNaN(+fe.Left)||(h["!margins"].left=+fe.Left),isNaN(+fe.Right)||(h["!margins"].right=+fe.Right),isNaN(+fe.Bottom)||(h["!margins"].bottom=+fe.Bottom);break;case"displayrighttoleft":Z.Views||(Z.Views=[]),Z.Views[0]||(Z.Views[0]={}),Z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ne=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ne=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ne=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ne=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ne=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ne=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ne=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ne=!1}break;case"smarttags":break;default:Ne=!1;break}if(Ne||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?OIe(D,ae,U,n.slice(I,o.index)):(U=o,I=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Ie={};return!r.bookSheets&&!r.bookProps&&(Ie.Sheets=d),Ie.SheetNames=f,Ie.Workbook=Z,Ie.SSF=Ha(Rr),Ie.Props=P,Ie.Custprops=D,Ie}function Y6(e,t){switch(tR(t=t||{}),t.type||"base64"){case"base64":return JT(Pc(e),t);case"binary":case"buffer":case"file":return JT(e,t);case"array":return JT(jm(e),t)}}function MIe(e,t){var r=[];return e.Props&&r.push(c5e(e.Props,t)),e.Custprops&&r.push(u5e(e.Props,e.Custprops)),r.join("")}function UIe(){return""}function QIe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push($t("NumberFormat",null,{"ss:Format":pa(Rr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push($t("Style",s.join(""),i))}),$t("Styles",r.join(""))}function Gre(e){return $t("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+WP(e.Ref,{r:0,c:0})})}function HIe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Gre(a)))}return $t("Names",r.join(""))}function VIe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(Gre(o)))}return s.join("")}function zIe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push($t("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push($t("Footer",null,{"x:Margin":e["!margins"].footer})),a.push($t("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push($t("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(po("ProtectContents","True")),e["!protect"].objects&&a.push(po("ProtectObjects","True")),e["!protect"].scenarios&&a.push(po("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(po("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(po("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":$t("WorksheetOptions",a.join(""),{xmlns:Cc.x})}function $Ie(e){return e.map(function(t){var r=ASe(t.t||""),n=$t("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return $t("Comment",n,{"ss:Author":t.a})}).join("")}function GIe(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+pa(WP(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=os(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=pa(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=pa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=Th[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Rr[14]);break;case"s":f="String",h=dSe(e.v||"");break}var p=Fm(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=$Ie(e.c)),$t("Cell",x,o)}function KIe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=$v(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function qIe(e,t,r,n){if(!e["!ref"])return"";var a=Qn(e["!ref"]),s=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,y){vm(b);var w=!!b.width,S=k4(y,b),j={"ss:Index":y+1};w&&(j["ss:Width"]=Dw(S.width)),b.hidden&&(j["ss:Hidden"]="1"),o.push($t("Column",null,j))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[KIe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:f},g=Ur(p),x=c?(e[u]||[])[f]:e[g];d.push(GIe(x,g,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function WIe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?VIe(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?qIe(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(zIe(s,t,e,r)),n.join("")}function XIe(e,t){t||(t={}),e.SSF||(e.SSF=Ha(Rr)),e.SSF&&(T1(),y4(e.SSF),t.revssf=E4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Fm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(MIe(e,t)),r.push(UIe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push($t("Worksheet",WIe(n,t,e),{"ss:Name":pa(e.SheetNames[n])}));return r[2]=QIe(e,t),r[3]=HIe(e),Xs+$t("Workbook",r.join(""),{xmlns:Cc.ss,"xmlns:o":Cc.o,"xmlns:x":Cc.x,"xmlns:ss":Cc.ss,"xmlns:dt":Cc.dt,"xmlns:html":Cc.html})}function YIe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=HSe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=VSe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var JIe=[60,1084,2066,2165,2175];function ZIe(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var c=Kf(r,r.l),u=J6[c],d=0;u!=null&&JIe.indexOf(c)>-1;)s=Kf(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=J6[c=Kf(r,r.l)];var f=Gi(i);mo(f,0);var h=0;f.lens=[];for(var p=0;p<i.length;++p)f.lens.push(h),h+=i[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function bA(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Rr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Th[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Bw(e.v):e.w=ng(e.v):e.w=Du(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&B1(Rr[n]||String(n))){var a=Sp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function TC(e,t,r){return{v:e,ixfe:t,t:r}}function e6e(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},o=null,c=[],u="",d={},f,h="",p,g,x,b,y={},w=[],S,j,N=[],F=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},B=function(Qt){return Qt<8?Lp[Qt]:Qt<64&&F[Qt-8]||Lp[Qt]},P=function(Qt,yt,kr){var er=yt.XF.data;if(!(!er||!er.patternType||!kr||!kr.cellStyles)){yt.s={},yt.s.patternType=er.patternType;var an;(an=Ow(B(er.icvFore)))&&(yt.s.fgColor={rgb:an}),(an=Ow(B(er.icvBack)))&&(yt.s.bgColor={rgb:an})}},D=function(Qt,yt,kr){if(!(ne>1)&&!(kr.sheetRows&&Qt.r>=kr.sheetRows)){if(kr.cellStyles&&yt.XF&&yt.XF.data&&P(Qt,yt,kr),delete yt.ixfe,delete yt.XF,f=Qt,h=Ur(Qt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Qt.r<i.s.r&&(i.s.r=Qt.r),Qt.c<i.s.c&&(i.s.c=Qt.c),Qt.r+1>i.e.r&&(i.e.r=Qt.r+1),Qt.c+1>i.e.c&&(i.e.c=Qt.c+1),kr.cellFormula&&yt.f){for(var er=0;er<w.length;++er)if(!(w[er][0].s.c>Qt.c||w[er][0].s.r>Qt.r)&&!(w[er][0].e.c<Qt.c||w[er][0].e.r<Qt.r)){yt.F=rn(w[er][0]),(w[er][0].s.c!=Qt.c||w[er][0].s.r!=Qt.r)&&delete yt.f,yt.f&&(yt.f=""+Ho(w[er][1],i,Qt,z,I));break}}kr.dense?(a[Qt.r]||(a[Qt.r]=[]),a[Qt.r][Qt.c]=yt):a[h]=yt}},I={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(I.password=t.password);var U,R=[],Y=[],H=[],X=[],V=!1,z=[];z.SheetNames=I.snames,z.sharedf=I.sharedf,z.arrayf=I.arrayf,z.names=[],z.XTI=[];var q=0,ne=0,M=0,W=[],Z=[],re;I.codepage=1200,wd(1200);for(var ae=!1;e.l<e.length-1;){var ce=e.l,oe=e.read_shift(2);if(oe===0&&q===10)break;var le=e.l===e.length?0:e.read_shift(2),pe=J6[oe];if(pe&&pe.f){if(t.bookSheets&&q===133&&oe!==133)break;if(q=oe,pe.r===2||pe.r==12){var Be=e.read_shift(2);if(le-=2,!I.enc&&Be!==oe&&((Be&255)<<8|Be>>8)!==oe)throw new Error("rt mismatch: "+Be+"!="+oe);pe.r==12&&(e.l+=10,le-=10)}var te={};if(oe===10?te=pe.f(e,le,I):te=ZIe(oe,pe,e,le,I),ne==0&&[9,521,1033,2057].indexOf(q)===-1)continue;switch(oe){case 34:r.opts.Date1904=E.WBProps.date1904=te;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(I.enc||(e.l=0),I.enc=te,!t.password)throw new Error("File is password-protected");if(te.valid==null)throw new Error("Encryption scheme unsupported");if(!te.valid)throw new Error("Password is incorrect");break;case 92:I.lastuser=te;break;case 66:var _e=Number(te);switch(_e){case 21010:_e=1200;break;case 32768:_e=1e4;break;case 32769:_e=1252;break}wd(I.codepage=_e),ae=!0;break;case 317:I.rrtabid=te;break;case 25:I.winlocked=te;break;case 439:r.opts.RefreshAll=te;break;case 12:r.opts.CalcCount=te;break;case 16:r.opts.CalcDelta=te;break;case 17:r.opts.CalcIter=te;break;case 13:r.opts.CalcMode=te;break;case 14:r.opts.CalcPrecision=te;break;case 95:r.opts.CalcSaveRecalc=te;break;case 15:I.CalcRefMode=te;break;case 2211:r.opts.FullCalc=te;break;case 129:te.fDialog&&(a["!type"]="dialog"),te.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),te.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:N.push(te);break;case 430:z.push([te]),z[z.length-1].XTI=[];break;case 35:case 547:z[z.length-1].push(te);break;case 24:case 536:re={Name:te.Name,Ref:Ho(te.rgce,i,null,z,I)},te.itab>0&&(re.Sheet=te.itab-1),z.names.push(re),z[0]||(z[0]=[],z[0].XTI=[]),z[z.length-1].push(te),te.Name=="_xlnm._FilterDatabase"&&te.itab>0&&te.rgce&&te.rgce[0]&&te.rgce[0][0]&&te.rgce[0][0][0]=="PtgArea3d"&&(Z[te.itab-1]={ref:rn(te.rgce[0][0][1][2])});break;case 22:I.ExternCount=te;break;case 23:z.length==0&&(z[0]=[],z[0].XTI=[]),z[z.length-1].XTI=z[z.length-1].XTI.concat(te),z.XTI=z.XTI.concat(te);break;case 2196:if(I.biff<8)break;re!=null&&(re.Comment=te[1]);break;case 18:a["!protect"]=te;break;case 19:te!==0&&I.WTF&&console.error("Password verifier: "+te);break;case 133:s[te.pos]=te,I.snames.push(te.name);break;case 10:{if(--ne)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=rn(i),t.sheetRows&&t.sheetRows<=i.e.r){var De=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=rn(i),i.e.r=De}i.e.r++,i.e.c++}R.length>0&&(a["!merges"]=R),Y.length>0&&(a["!objects"]=Y),H.length>0&&(a["!cols"]=H),X.length>0&&(a["!rows"]=X),E.Sheets.push(_)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(I.biff===8&&(I.biff={9:2,521:3,1033:4}[oe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[te.BIFFVer]||8),I.biffguess=te.BIFFVer==0,te.BIFFVer==0&&te.dt==4096&&(I.biff=5,ae=!0,wd(I.codepage=28591)),I.biff==8&&te.BIFFVer==0&&te.dt==16&&(I.biff=2),ne++)break;if(a=t.dense?[]:{},I.biff<8&&!ae&&(ae=!0,wd(I.codepage=t.codepage||1252)),I.biff<5||te.BIFFVer==0&&te.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Ne={pos:e.l-le,name:u};s[Ne.pos]=Ne,I.snames.push(u)}else u=(s[ce]||{name:""}).name;te.dt==32&&(a["!type"]="chart"),te.dt==64&&(a["!type"]="macro"),R=[],Y=[],I.arrayf=w=[],H=[],X=[],V=!1,_={Hidden:(s[ce]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[te.r]||[])[te.c]:a[Ur({c:te.c,r:te.r})])&&++te.c,S={ixfe:te.ixfe,XF:N[te.ixfe]||{},v:te.val,t:"n"},M>0&&(S.z=W[S.ixfe>>8&63]),bA(S,t,r.opts.Date1904),D({c:te.c,r:te.r},S,t);break;case 5:case 517:S={ixfe:te.ixfe,XF:N[te.ixfe],v:te.val,t:te.t},M>0&&(S.z=W[S.ixfe>>8&63]),bA(S,t,r.opts.Date1904),D({c:te.c,r:te.r},S,t);break;case 638:S={ixfe:te.ixfe,XF:N[te.ixfe],v:te.rknum,t:"n"},M>0&&(S.z=W[S.ixfe>>8&63]),bA(S,t,r.opts.Date1904),D({c:te.c,r:te.r},S,t);break;case 189:for(var fe=te.c;fe<=te.C;++fe){var Ie=te.rkrec[fe-te.c][0];S={ixfe:Ie,XF:N[Ie],v:te.rkrec[fe-te.c][1],t:"n"},M>0&&(S.z=W[S.ixfe>>8&63]),bA(S,t,r.opts.Date1904),D({c:fe,r:te.r},S,t)}break;case 6:case 518:case 1030:{if(te.val=="String"){o=te;break}if(S=TC(te.val,te.cell.ixfe,te.tt),S.XF=N[S.ixfe],t.cellFormula){var Ue=te.formula;if(Ue&&Ue[0]&&Ue[0][0]&&Ue[0][0][0]=="PtgExp"){var Ye=Ue[0][0][1][0],ye=Ue[0][0][1][1],Oe=Ur({r:Ye,c:ye});y[Oe]?S.f=""+Ho(te.formula,i,te.cell,z,I):S.F=((t.dense?(a[Ye]||[])[ye]:a[Oe])||{}).F}else S.f=""+Ho(te.formula,i,te.cell,z,I)}M>0&&(S.z=W[S.ixfe>>8&63]),bA(S,t,r.opts.Date1904),D(te.cell,S,t),o=te}break;case 7:case 519:if(o)o.val=te,S=TC(te,o.cell.ixfe,"s"),S.XF=N[S.ixfe],t.cellFormula&&(S.f=""+Ho(o.formula,i,o.cell,z,I)),M>0&&(S.z=W[S.ixfe>>8&63]),bA(S,t,r.opts.Date1904),D(o.cell,S,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(te);var Re=Ur(te[0].s);if(p=t.dense?(a[te[0].s.r]||[])[te[0].s.c]:a[Re],t.cellFormula&&p){if(!o||!Re||!p)break;p.f=""+Ho(te[1],i,te[0],z,I),p.F=rn(te[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;y[Ur(o.cell)]=te[0],p=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Ur(o.cell)],(p||{}).f=""+Ho(te[0],i,f,z,I)}}break;case 253:S=TC(c[te.isst].t,te.ixfe,"s"),c[te.isst].h&&(S.h=c[te.isst].h),S.XF=N[S.ixfe],M>0&&(S.z=W[S.ixfe>>8&63]),bA(S,t,r.opts.Date1904),D({c:te.c,r:te.r},S,t);break;case 513:t.sheetStubs&&(S={ixfe:te.ixfe,XF:N[te.ixfe],t:"z"},M>0&&(S.z=W[S.ixfe>>8&63]),bA(S,t,r.opts.Date1904),D({c:te.c,r:te.r},S,t));break;case 190:if(t.sheetStubs)for(var qe=te.c;qe<=te.C;++qe){var Ze=te.ixfe[qe-te.c];S={ixfe:Ze,XF:N[Ze],t:"z"},M>0&&(S.z=W[S.ixfe>>8&63]),bA(S,t,r.opts.Date1904),D({c:qe,r:te.r},S,t)}break;case 214:case 516:case 4:S=TC(te.val,te.ixfe,"s"),S.XF=N[S.ixfe],M>0&&(S.z=W[S.ixfe>>8&63]),bA(S,t,r.opts.Date1904),D({c:te.c,r:te.r},S,t);break;case 0:case 512:ne===1&&(i=te);break;case 252:c=te;break;case 1054:if(I.biff==4){W[M++]=te[1];for(var lt=0;lt<M+163&&Rr[lt]!=te[1];++lt);lt>=163&&rh(te[1],M+163)}else rh(te[1],te[0]);break;case 30:{W[M++]=te;for(var mt=0;mt<M+163&&Rr[mt]!=te;++mt);mt>=163&&rh(te,M+163)}break;case 229:R=R.concat(te);break;case 93:Y[te.cmo[0]]=I.lastobj=te;break;case 438:I.lastobj.TxO=te;break;case 127:I.lastobj.ImData=te;break;case 440:for(b=te[0].s.r;b<=te[0].e.r;++b)for(x=te[0].s.c;x<=te[0].e.c;++x)p=t.dense?(a[b]||[])[x]:a[Ur({c:x,r:b})],p&&(p.l=te[1]);break;case 2048:for(b=te[0].s.r;b<=te[0].e.r;++b)for(x=te[0].s.c;x<=te[0].e.c;++x)p=t.dense?(a[b]||[])[x]:a[Ur({c:x,r:b})],p&&p.l&&(p.l.Tooltip=te[1]);break;case 28:{if(I.biff<=5&&I.biff>=2)break;p=t.dense?(a[te[0].r]||[])[te[0].c]:a[Ur(te[0])];var It=Y[te[2]];p||(t.dense?(a[te[0].r]||(a[te[0].r]=[]),p=a[te[0].r][te[0].c]={t:"z"}):p=a[Ur(te[0])]={t:"z"},i.e.r=Math.max(i.e.r,te[0].r),i.s.r=Math.min(i.s.r,te[0].r),i.e.c=Math.max(i.e.c,te[0].c),i.s.c=Math.min(i.s.c,te[0].c)),p.c||(p.c=[]),g={a:te[1],t:It.TxO.t},p.c.push(g)}break;case 2173:Qke(N[te.ixfe],te.ext);break;case 125:{if(!I.cellStyles)break;for(;te.e>=te.s;)H[te.e--]={width:te.w/256,level:te.level||0,hidden:!!(te.flags&1)},V||(V=!0,GP(te.w/256)),vm(H[te.e+1])}break;case 520:{var Mt={};te.level!=null&&(X[te.r]=Mt,Mt.level=te.level),te.hidden&&(X[te.r]=Mt,Mt.hidden=!0),te.hpt&&(X[te.r]=Mt,Mt.hpt=te.hpt,Mt.hpx=$v(te.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Qp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[oe]]=te;break;case 161:a["!margins"]||Qp(a["!margins"]={}),a["!margins"].header=te.header,a["!margins"].footer=te.footer;break;case 574:te.RTL&&(E.Views[0].RTL=!0);break;case 146:F=te;break;case 2198:U=te;break;case 140:j=te;break;case 442:u?_.CodeName=te||_.name:E.WBProps.CodeName=te||"ThisWorkbook";break}}else pe||console.error("Missing Info for XLS Record 0x"+oe.toString(16)),e.l+=le}return r.SheetNames=Ts(s).sort(function(Pt,Qt){return Number(Pt)-Number(Qt)}).map(function(Pt){return s[Pt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Z.forEach(function(Pt,Qt){r.Sheets[r.SheetNames[Qt]]["!autofilter"]=Pt}),r.Strings=c,r.SSF=Ha(Rr),I.enc&&(r.Encryption=I.enc),U&&(r.Themes=U),r.Metadata={},j!==void 0&&(r.Metadata.Country=j),z.names.length>0&&(E.Names=z.names),r.Workbook=E,r}var Zy={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function t6e(e,t,r){var n=Cr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=ZH(n,$6,Zy.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Cr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=ZH(i,G6,Zy.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&($te(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function r6e(e,t){var r=[],n=[],a=[],s=0,i,o=BH($6,"n"),c=BH(G6,"n");if(e.Props)for(i=Ts(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=Ts(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)Jte.indexOf(a[s][0])>-1||zte.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Cr.utils.cfb_add(t,"/SummaryInformation",eV(n,Zy.SI,c,G6)),(r.length||u.length)&&Cr.utils.cfb_add(t,"/DocumentSummaryInformation",eV(r,Zy.DSI,o,$6,u.length?u:null,Zy.UDI))}function Kre(e,t){t||(t={}),tR(t),wP(),t.codepage&&yP(t.codepage);var r,n;if(e.FullPaths){if(Cr.find(e,"/encryption"))throw new Error("File is password-protected");r=Cr.find(e,"!CompObj"),n=Cr.find(e,"/Workbook")||Cr.find(e,"/Book")}else{switch(t.type){case"base64":e=kc(Pc(e));break;case"binary":e=kc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}mo(e,0),n={content:e}}var a,s;if(r&&YIe(r),t.bookProps&&!t.bookSheets)a={};else{var i=gn?"buffer":"array";if(n&&n.content)a=e6e(n.content,t);else if((s=Cr.find(e,"PerfectOffice_MAIN"))&&s.content)a=Up.to_workbook(s.content,(t.type=i,t));else if((s=Cr.find(e,"NativeContent_MAIN"))&&s.content)a=Up.to_workbook(s.content,(t.type=i,t));else throw(s=Cr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Cr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=mBe(e))}var o={};return e.FullPaths&&t6e(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function n6e(e,t){var r=t||{},n=Cr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Cr.utils.cfb_add(n,a,qre(e,r)),r.biff==8&&(e.Props||e.Custprops)&&r6e(e,n),r.biff==8&&e.vbaraw&&pBe(n,Cr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Lw={0:{f:N3e},1:{f:D3e},2:{f:eje},3:{f:V3e},4:{f:M3e},5:{f:Y3e},6:{f:sje},7:{f:K3e},8:{f:Aje},9:{f:dje},10:{f:cje},11:{f:uje},12:{f:R3e},13:{f:rje},14:{f:$3e},15:{f:Q3e},16:{f:Mre},17:{f:oje},18:{f:W3e},19:{f:PP},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:oIe},40:{},42:{},43:{f:ske},44:{f:nke},45:{f:lke},46:{f:uke},47:{f:cke},48:{},49:{f:TSe},50:{},51:{f:zke},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:cre},62:{f:aje},63:{f:Zke},64:{f:kje},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:tl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Cje},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:F3e},148:{f:T3e,p:16},151:{f:xje},152:{},153:{f:aIe},154:{},155:{},156:{f:rIe},157:{},158:{},159:{T:1,f:b4e},160:{T:-1},161:{T:1,f:Ng},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:fje},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Hke},336:{T:-1},337:{f:Kke,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:z6},357:{},358:{},359:{},360:{T:1},361:{},362:{f:lre},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:vje},427:{f:bje},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:wje},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:I3e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:pje},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:z6},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:uBe},633:{T:1},634:{T:-1},635:{T:1,f:lBe},636:{T:-1},637:{f:OSe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:$je},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Bje},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},J6={6:{f:XT},10:{f:b0},12:{f:li},13:{f:li},14:{f:Ms},15:{f:Ms},16:{f:Xo},17:{f:Ms},18:{f:Ms},19:{f:li},20:{f:iV},21:{f:iV},23:{f:lre},24:{f:lV},25:{f:Ms},26:{},27:{},28:{f:BNe},29:{},34:{f:Ms},35:{f:oV},38:{f:Xo},39:{f:Xo},40:{f:Xo},41:{f:Xo},42:{f:Ms},43:{f:Ms},47:{f:Q4e},49:{f:rNe},51:{f:li},60:{},61:{f:Y5e},64:{f:Ms},65:{f:tNe},66:{f:li},77:{},80:{},81:{},82:{},85:{f:li},89:{},90:{},91:{},92:{f:U5e},93:{f:INe},94:{},95:{f:Ms},96:{},97:{},99:{f:Ms},125:{f:cre},128:{f:gNe},129:{f:H5e},130:{f:li},131:{f:Ms},132:{f:Ms},133:{f:V5e},134:{},140:{f:UNe},141:{f:li},144:{},146:{f:VNe},151:{},152:{},153:{},154:{},155:{},156:{f:li},157:{},158:{},160:{f:XNe},161:{f:GNe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:fNe},190:{f:hNe},193:{f:b0},197:{},198:{},199:{},200:{},201:{},202:{f:Ms},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:li},220:{},221:{f:Ms},222:{},224:{f:pNe},225:{f:M5e},226:{f:b0},227:{},229:{f:TNe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:$5e},253:{f:aNe},255:{f:K5e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Zte},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ms},353:{f:b0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:wNe},431:{f:Ms},432:{},433:{},434:{},437:{},438:{f:DNe},439:{f:Ms},440:{f:PNe},441:{},442:{f:T2},443:{},444:{f:li},445:{},446:{},448:{f:b0},449:{f:X5e,r:2},450:{f:b0},512:{f:nV},513:{f:WNe},515:{f:bNe},516:{f:iNe},517:{f:sV},519:{f:YNe},520:{f:q5e},523:{},545:{f:cV},549:{f:rV},566:{},574:{f:Z5e},638:{f:ANe},659:{},1048:{},1054:{f:lNe},1084:{},1212:{f:SNe},2048:{f:LNe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:NC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:b0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:zNe,r:12},2173:{f:Uke,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ms,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:_Ne,r:12},2197:{},2198:{f:Oke,r:12},2199:{},2200:{},2201:{},2202:{f:NNe,r:12},2203:{f:b0},2204:{},2205:{},2206:{},2207:{},2211:{f:W5e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:li},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:KNe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:HNe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:nV},1:{},2:{f:r4e},3:{f:e4e},4:{f:ZNe},5:{f:sV},7:{f:a4e},8:{},9:{f:NC},11:{},22:{f:li},30:{f:uNe},31:{},32:{},33:{f:cV},36:{},37:{f:rV},50:{f:s4e},62:{},52:{},67:{},68:{f:li},69:{},86:{},126:{},127:{f:JNe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:i4e},223:{},234:{},354:{},421:{},518:{f:XT},521:{f:NC},536:{f:lV},547:{f:oV},561:{},579:{},1030:{f:XT},1033:{f:NC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Gt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&FP(r)&&e.push(r)}}function a6e(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Gt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function O2(e,t,r){return e||(e=Et(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function s6e(e,t,r,n){var a=Et(9);return O2(a,e,t),ere(r,n||"b",a),a}function i6e(e,t,r){var n=Et(8+2*r.length);return O2(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function o6e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Si(Qa(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Gt(e,2,n4e(r,n,a)):Gt(e,3,t4e(r,n,a));return;case"b":case"e":Gt(e,5,s6e(r,n,t.v,t.t));return;case"s":case"str":Gt(e,4,i6e(r,n,(t.v||"").slice(0,255)));return}Gt(e,1,O2(null,r,n))}function l6e(e,t,r,n){var a=Array.isArray(t),s=Qn(t["!ref"]||"A1"),i,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=rn(s)}for(var u=s.s.r;u<=s.e.r;++u){o=qs(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=is(d)),i=c[d]+o;var f=a?(t[u]||[])[d]:t[i];f&&o6e(e,f,u,d)}}}function c6e(e,t){for(var r=t||{},n=Xl(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Gt(n,r.biff==4?1033:r.biff==3?521:9,VP(e,16,r)),l6e(n,e.Sheets[e.SheetNames[a]],a,r),Gt(n,10),n.end()}function u6e(e,t,r){Gt(e,49,nNe({sz:12,name:"Arial"},r))}function d6e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Gt(e,1054,cNe(a,t[a],r))})}function A6e(e,t){var r=Et(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Gt(e,2151,r),r=Et(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),sre(Qn(t["!ref"]||"A1"),r),r.write_shift(4,4),Gt(e,2152,r)}function f6e(e,t){for(var r=0;r<16;++r)Gt(e,224,aV({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Gt(e,224,aV(n,0,t))})}function h6e(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Gt(e,440,RNe(n)),n[1].Tooltip&&Gt(e,2048,MNe(n))}delete t["!links"]}function m6e(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Gt(e,125,$Ne(k4(a,n),a))})}}function p6e(e,t,r,n,a){var s=16+Fm(a.cellXfs,t,a);if(t.v==null&&!t.bf){Gt(e,513,og(r,n,s));return}if(t.bf)Gt(e,6,HTe(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?Si(Qa(t.v)):t.v;Gt(e,515,yNe(r,n,i,s));break;case"b":case"e":Gt(e,517,vNe(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=YP(a.Strings,t.v,a.revStrings);Gt(e,253,sNe(r,n,o,s))}else Gt(e,516,oNe(r,n,(t.v||"").slice(0,255),s,a));break;default:Gt(e,513,og(r,n,s))}}function g6e(e,t,r){var n=Xl(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",h=[],p=Qn(s["!ref"]||"A1"),g=u?65536:16384;if(p.e.c>255||p.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,g-1)}Gt(n,2057,VP(r,16,t)),Gt(n,13,Eu(1)),Gt(n,12,Eu(100)),Gt(n,15,fl(!0)),Gt(n,17,fl(!1)),Gt(n,16,sg(.001)),Gt(n,95,fl(!0)),Gt(n,42,fl(!1)),Gt(n,43,fl(!1)),Gt(n,130,Eu(1)),Gt(n,128,xNe()),Gt(n,131,fl(!1)),Gt(n,132,fl(!1)),u&&m6e(n,s["!cols"]),Gt(n,512,dNe(p,t)),u&&(s["!links"]=[]);for(var x=p.s.r;x<=p.e.r;++x){f=qs(x);for(var b=p.s.c;b<=p.e.c;++b){x===p.s.r&&(h[b]=is(b)),d=h[b]+f;var y=c?(s[x]||[])[b]:s[d];y&&(p6e(n,y,x,b,t),u&&y.l&&s["!links"].push([d,y.l]))}}var w=o.CodeName||o.name||a;return u&&Gt(n,574,eNe((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&Gt(n,229,jNe(s["!merges"])),u&&h6e(n,s),Gt(n,442,tre(w)),u&&A6e(n,s),Gt(n,10),n.end()}function x6e(e,t,r){var n=Xl(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(Gt(n,2057,VP(e,5,r)),r.bookType=="xla"&&Gt(n,135),Gt(n,225,o?Eu(1200):null),Gt(n,193,v5e(2)),c&&Gt(n,191),c&&Gt(n,192),Gt(n,226),Gt(n,92,Q5e("SheetJS",r)),Gt(n,66,Eu(o?1200:1252)),o&&Gt(n,353,Eu(0)),o&&Gt(n,448),Gt(n,317,qNe(e.SheetNames.length)),o&&e.vbaraw&&Gt(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";Gt(n,442,tre(u))}Gt(n,156,Eu(17)),Gt(n,25,fl(!1)),Gt(n,18,fl(!1)),Gt(n,19,Eu(0)),o&&Gt(n,431,fl(!1)),o&&Gt(n,444,Eu(0)),Gt(n,61,J5e()),Gt(n,64,fl(!1)),Gt(n,141,Eu(0)),Gt(n,34,fl(Xje(e)=="true")),Gt(n,14,fl(!0)),o&&Gt(n,439,fl(!1)),Gt(n,218,Eu(0)),u6e(n,e,r),d6e(n,e.SSF,r),f6e(n,r),o&&Gt(n,352,fl(!1));var d=n.end(),f=Xl();o&&Gt(f,140,QNe()),o&&r.Strings&&a6e(f,252,G5e(r.Strings)),Gt(f,10);var h=f.end(),p=Xl(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(o?12:11)+(o?2:1)*e.SheetNames[x].length;var b=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};Gt(p,133,z5e({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),b+=t[x].length}var w=p.end();if(g!=w.length)throw new Error("BS8 "+g+" != "+w.length);var S=[];return d.length&&S.push(d),w.length&&S.push(w),h.length&&S.push(h),Gi(S)}function v6e(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Ha(Rr)),e&&e.SSF&&(T1(),y4(e.SSF),r.revssf=E4(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,rR(r),r.cellXfs=[],Fm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=g6e(a,r,e);return n.unshift(x6e(e,n,r)),Gi(n)}function qre(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Jl(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return v6e(e,t);case 4:case 3:case 2:return c6e(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function vV(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,c=nSe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(i=0;i<c.length;++i){var x=c[i].trim(),b=x.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var y=x.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var w=y[o].trim();if(w.match(/<t[dh]/i)){for(var S=w,j=0;S.charAt(0)=="<"&&(j=S.indexOf(">"))>-1;)S=S.slice(j+1);for(var N=0;N<g.length;++N){var F=g[N];F.s.c==d&&F.s.r<u&&u<=F.e.r&&(d=F.e.c+1,N=-1)}var E=$r(w.slice(0,w.indexOf(">")));h=E.colspan?+E.colspan:1,((f=+E.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var _=E.t||E["data-t"]||"";if(!S.length){d+=h;continue}if(S=xte(S),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!S.length){d+=h;continue}var B={t:"s",v:S};r.raw||!S.trim().length||_=="s"||(S==="TRUE"?B={t:"b",v:!0}:S==="FALSE"?B={t:"b",v:!1}:isNaN(Td(S))?isNaN(Vv(S).getDate())||(B={t:"d",v:Qa(S)},r.cellDates||(B={t:"n",v:Si(B.v)}),B.z=r.dateNF||Rr[14]):B={t:"n",v:Td(S)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=B):n[Ur({r:u,c:d})]=B,d+=h}}}}return n["!ref"]=rn(p),g.length&&(n["!merges"]=g),n}function b6e(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Ur({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||TP(f.w||(mh(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,s.push($t("td",h,p))}}var g="<tr>";return g+s.join("")+"</tr>"}var y6e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',w6e="</body></html>";function E6e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Im(vV(r[0],t),t);var n=iR();return r.forEach(function(a,s){oR(n,vV(a,t),"Sheet"+(s+1))}),n}function C6e(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Wre(e,t){var r=t||{},n=r.header!=null?r.header:y6e,a=r.footer!=null?r.footer:w6e,s=[n],i=Jl(e["!ref"]);r.dense=Array.isArray(e),s.push(C6e(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(b6e(e,i,o,r));return s.push("</table>"+a),s.join("")}function Xre(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?os(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=Jl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),g=0,x=0,b=0,y=0,w=0,S=0;for(e["!cols"]||(e["!cols"]=[]);g<o.length&&x<c;++g){var j=o[g];if(bV(j)){if(n.display)continue;p[x]={hidden:!0}}var N=j.children;for(b=y=0;b<N.length;++b){var F=N[b];if(!(n.display&&bV(F))){var E=F.hasAttribute("data-v")?F.getAttribute("data-v"):F.hasAttribute("v")?F.getAttribute("v"):xte(F.innerHTML),_=F.getAttribute("data-z")||F.getAttribute("z");for(h=0;h<f.length;++h){var B=f[h];B.s.c==y+s&&B.s.r<x+a&&x+a<=B.e.r&&(y=B.e.c+1-s,h=-1)}S=+F.getAttribute("colspan")||1,((w=+F.getAttribute("rowspan")||1)>1||S>1)&&f.push({s:{r:x+a,c:y+s},e:{r:x+a+(w||1)-1,c:y+s+(S||1)-1}});var P={t:"s",v:E},D=F.getAttribute("data-t")||F.getAttribute("t")||"";E!=null&&(E.length==0?P.t=D||"z":n.raw||E.trim().length==0||D=="s"||(E==="TRUE"?P={t:"b",v:!0}:E==="FALSE"?P={t:"b",v:!1}:isNaN(Td(E))?isNaN(Vv(E).getDate())||(P={t:"d",v:Qa(E)},n.cellDates||(P={t:"n",v:Si(P.v)}),P.z=n.dateNF||Rr[14]):P={t:"n",v:Td(E)})),P.z===void 0&&_!=null&&(P.z=_);var I="",U=F.getElementsByTagName("A");if(U&&U.length)for(var R=0;R<U.length&&!(U[R].hasAttribute("href")&&(I=U[R].getAttribute("href"),I.charAt(0)!="#"));++R);I&&I.charAt(0)!="#"&&(P.l={Target:I}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=P):e[Ur({c:y+s,r:x+a})]=P,u.e.c<y+s&&(u.e.c=y+s),y+=S}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=rn(u),x>=c&&(e["!fullref"]=rn((u.e.r=o.length-g+x-1+a,u))),e}function Yre(e,t){var r=t||{},n=r.dense?[]:{};return Xre(n,e,t)}function _6e(e,t){return Im(Yre(e,t),t)}function bV(e){var t="",r=S6e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function S6e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function N6e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Un(t.replace(/<[^>]*>/g,""));return[r]}var yV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Jre(e,t){var r=t||{},n=jP(e),a=[],s,i,o={name:""},c="",u=0,d,f,h={},p=[],g=r.dense?[]:{},x,b,y={value:""},w="",S=0,j=[],N=-1,F=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,B={},P=[],D={},I=0,U=0,R=[],Y=1,H=1,X=[],V={Names:[]},z={},q=["",""],ne=[],M={},W="",Z=0,re=!1,ae=!1,ce=0;for(Iw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=Iw.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?g["!ref"]=rn(E):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(g["!fullref"]=g["!ref"],E.e.r=r.sheetRows-1,g["!ref"]=rn(E)),P.length&&(g["!merges"]=P),R.length&&(g["!rows"]=R),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),h[d.name]=g,ae=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=$r(x[0],!1),N=F=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,g=r.dense?[]:{},P=[],R=[],ae=!0);break;case"table-row-group":x[1]==="/"?--_:++_;break;case"table-row":case"行":if(x[1]==="/"){N+=Y,Y=1;break}if(f=$r(x[0],!1),f.行号?N=f.行号-1:N==-1&&(N=0),Y=+f["number-rows-repeated"]||1,Y<10)for(ce=0;ce<Y;++ce)_>0&&(R[N+ce]={level:_});F=-1;break;case"covered-table-cell":x[1]!=="/"&&++F,r.sheetStubs&&(r.dense?(g[N]||(g[N]=[]),g[N][F]={t:"z"}):g[Ur({r:N,c:F})]={t:"z"}),w="",j=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++F,y=$r(x[0],!1),H=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=pV(Un(y.formula))),(y.数据类型||y["value-type"])=="string"&&(b.t="s",b.v=Un(y["string-value"]||""),r.dense?(g[N]||(g[N]=[]),g[N][F]=b):g[Ur({r:N,c:F})]=b),F+=H-1;else if(x[1]!=="/"){++F,w="",S=0,j=[],H=1;var oe=Y?N+Y-1:N;if(F>E.e.c&&(E.e.c=F),F<E.s.c&&(E.s.c=F),N<E.s.r&&(E.s.r=N),oe>E.e.r&&(E.e.r=oe),y=$r(x[0],!1),ne=[],M={},b={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Un(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(I=parseInt(y["number-matrix-rows-spanned"],10)||0,U=parseInt(y["number-matrix-columns-spanned"],10)||0,D={s:{r:N,c:F},e:{r:N+I-1,c:F+U-1}},b.F=rn(D),X.push([D,b.F])),y.formula)b.f=pV(y.formula);else for(ce=0;ce<X.length;++ce)N>=X[ce][0].s.r&&N<=X[ce][0].e.r&&F>=X[ce][0].s.c&&F<=X[ce][0].e.c&&(b.F=X[ce][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(I=parseInt(y["number-rows-spanned"],10)||0,U=parseInt(y["number-columns-spanned"],10)||0,D={s:{r:N,c:F},e:{r:N+I-1,c:F+U-1}},P.push(D)),y["number-columns-repeated"]&&(H=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Ma(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Qa(y["date-value"]),r.cellDates||(b.t="n",b.v=Si(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=eSe(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=C4(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.数据数值);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(w=Un(y["string-value"]),j=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(re=!1,b.t==="s"&&(b.v=w||"",j.length&&(b.R=j),re=S==0),z.Target&&(b.l=z),ne.length>0&&(b.c=ne,ne=[]),w&&r.cellText!==!1&&(b.w=w),re&&(b.t="z",delete b.v),(!re||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=N))for(var le=0;le<Y;++le){if(H=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[N+le]||(g[N+le]=[]),g[N+le][F]=le==0?b:Ha(b);--H>0;)g[N+le][F+H]=Ha(b);else for(g[Ur({r:N+le,c:F})]=b;--H>0;)g[Ur({r:N+le,c:F+H})]=Ha(b);E.e.c<=F&&(E.e.c=F)}H=parseInt(y["number-columns-repeated"]||"1",10),F+=H-1,H=0,b={},w="",j=[]}z={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;M.t=w,j.length&&(M.R=j),M.a=W,ne.push(M)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);W="",Z=0,w="",S=0,j=[];break;case"creator":x[1]==="/"?W=n.slice(Z,x.index):Z=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);w="",S=0,j=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(B[o.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",o=$r(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=$r(x[0],!1),c+=yV[x[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=$r(x[0],!1),c+=yV[x[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":i=$r(x[0],!1),q=YT(i["cell-range-address"]);var pe={Name:i.name,Ref:q[0]+"!"+q[1]};ae&&(pe.Sheet=p.length),V.Names.push(pe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var Be=N6e(n.slice(S,x.index));w=(w.length>0?w+`
`:"")+Be[0]}else $r(x[0],!1),S=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{q=YT($r(x[0])["target-range-address"]),h[q[0]]["!autofilter"]={ref:q[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(z=$r(x[0],!1),!z.href)break;z.Target=Un(z.href),delete z.href,z.Target.charAt(0)=="#"&&z.Target.indexOf(".")>-1?(q=YT(z.Target.slice(1)),z.Target="#"+q[0]+"!"+q[1]):z.Target.match(/^\.\.[\\\/]/)&&(z.Target=z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var te={Sheets:h,SheetNames:p,Workbook:V};return r.bookSheets&&delete te.Sheets,te}function wV(e,t){t=t||{},yu(e,"META-INF/manifest.xml")&&e5e(oi(e,"META-INF/manifest.xml"),t);var r=Bc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Jre(Ea(r),t);return yu(e,"meta.xml")&&(n.Props=Hte(oi(e,"meta.xml"))),n}function EV(e,t){return Jre(e,t)}var k6e=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+jw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Xs+t}}(),CV=function(){var e=function(s){return pa(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var c=[];c.push('      <table:table table:name="'+pa(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=Jl(s["!ref"]||"A1"),h=s["!merges"]||[],p=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",b=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,w={},S="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>d)&&!(h[p].s.r>u)&&!(h[p].e.c<d)&&!(h[p].e.r<u)){(h[p].s.c!=d||h[p].s.r!=u)&&(y=!0),w["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,w["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(y){c.push(r);continue}var j=Ur({r:u,c:d}),N=g?(s[u]||[])[d]:s[j];if(N&&N.f&&(w["table:formula"]=pa(qTe(N.f)),N.F&&N.F.slice(0,j.length)==j)){var F=Jl(N.F);w["table:number-matrix-columns-spanned"]=F.e.c-F.s.c+1,w["table:number-matrix-rows-spanned"]=F.e.r-F.s.r+1}if(!N){c.push(t);continue}switch(N.t){case"b":S=N.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=N.v?"true":"false";break;case"n":S=N.w||String(N.v||0),w["office:value-type"]="float",w["office:value"]=N.v||0;break;case"s":case"str":S=N.v==null?"":N.v,w["office:value-type"]="string";break;case"d":S=N.w||Qa(N.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=Qa(N.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(S);if(N.l&&N.l.Target){var _=N.l.Target;_=_.charAt(0)=="#"?"#"+WTe(_.slice(1)):_,_.charAt(0)!="#"&&!_.match(/^\w+:/)&&(_="../"+_),E=$t("text:a",E,{"xlink:href":_.replace(/&/g,"&amp;")})}c.push("          "+$t("table:table-cell",$t("text:p",E,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;vm(f),f.ods=o;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var c=[Xs],u=jw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=jw({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Qte().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function Zre(e,t){if(t.bookType=="fods")return CV(e,t);var r=NP(),n="",a=[],s=[];return n="mimetype",un(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",un(r,n,CV(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",un(r,n,k6e(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",un(r,n,Xs+Qte()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",un(r,n,n5e(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",un(r,n,t5e(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function lg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Z6(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ea(jm(e))}function B6e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):kc(PA(e))}function T6e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function ym(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function _V(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function j6e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function I6e(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function Mw(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Aa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ns(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function qn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=Mw(e,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Mw(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function lo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Aa(n*8+a.type)),a.type==2&&t.push(Aa(a.data.length)),t.push(a.data))})}),ym(t)}function eR(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function xu(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Mw(e,n),s=qn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Ns(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=qn(o.data),u=Ns(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=Ns(s[3][0].data)>>>0>0),r.push(i)}return r}function px(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Aa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Aa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:Aa(i.data.length)}],n[2].push({data:lo(i.meta),type:2})});var s=lo(n);t.push(Aa(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),ym(t)}function F6e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Mw(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[ym(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=ym(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function vu(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(F6e(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return ym(t)}function gx(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=Aa(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return ym(t)}function O6e(e,t,r,n){var a=lg(e),s=a.getUint32(4,!0),i=(n>1?12:8)+_V(s&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=_V(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function D6e(e,t,r){var n=lg(e),a=n.getUint32(8,!0),s=12,i=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=j6e(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function ZT(e,t){var r=new Uint8Array(32),n=lg(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,I6e(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function e3(e,t){var r=new Uint8Array(32),n=lg(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function P6e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return O6e(e,t,r,e[0]);case 5:return D6e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Qo(e){var t=qn(e);return Mw(t[1][0].data)}function SV(e,t){var r=qn(t.data),n=Ns(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=qn(i.data),c=Ns(o[1][0].data)>>>0;switch(n){case 1:s[c]=Z6(o[3][0].data);break;case 8:{var u=e[Qo(o[9][0].data)][0],d=qn(u.data),f=e[Qo(d[1][0].data)][0],h=Ns(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=qn(f.data);s[c]=p[3].map(function(g){return Z6(g.data)}).join("")}break}}),s}function R6e(e,t){var r,n,a,s,i,o,c,u,d,f,h,p,g,x,b=qn(e),y=Ns(b[1][0].data)>>>0,w=Ns(b[2][0].data)>>>0,S=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Ns(b[8][0].data)>0||!1,j,N;if((s=(a=b[7])==null?void 0:a[0])!=null&&s.data&&t!=0)j=(o=(i=b[7])==null?void 0:i[0])==null?void 0:o.data,N=(u=(c=b[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)j=(p=(h=b[4])==null?void 0:h[0])==null?void 0:p.data,N=(x=(g=b[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var F=S?4:1,E=lg(j),_=[],B=0;B<j.length/2;++B){var P=E.getUint16(B*2,!0);P<65535&&_.push([B,P])}if(_.length!=w)throw"Expected ".concat(w," cells, found ").concat(_.length);var D=[];for(B=0;B<_.length-1;++B)D[_[B][0]]=N.subarray(_[B][1]*F,_[B+1][1]*F);return _.length>=1&&(D[_[_.length-1][0]]=N.subarray(_[_.length-1][1]*F)),{R:y,cells:D}}function L6e(e,t){var r,n=qn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ns(n[7][0].data)>>>0>0?1:0:-1,s=eR(n[5],function(i){return R6e(i,a)});return{nrows:Ns(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function M6e(e,t,r){var n,a=qn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ns(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Ns(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=rn(s);var i=qn(a[4][0].data),o=SV(e,e[Qo(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?SV(e,e[Qo(i[17][0].data)][0]):[],u=qn(i[3][0].data),d=0;u[1].forEach(function(f){var h=qn(f.data),p=e[Qo(h[2][0].data)][0],g=Ns(p.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=L6e(e,p);x.data.forEach(function(b,y){b.forEach(function(w,S){var j=Ur({r:d+y,c:S}),N=P6e(w,o,c);N&&(r[j]=N)})}),d+=x.nrows})}function U6e(e,t){var r=qn(t.data),n={"!ref":"A1"},a=e[Qo(r[2][0].data)],s=Ns(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return M6e(e,a[0],n),n}function Q6e(e,t){var r,n=qn(t.data),a={name:(r=n[1])!=null&&r[0]?Z6(n[1][0].data):"",sheets:[]},s=eR(n[2],Qo);return s.forEach(function(i){e[i].forEach(function(o){var c=Ns(o.meta[1][0].data);c==6e3&&a.sheets.push(U6e(e,o))})}),a}function H6e(e,t){var r=iR(),n=qn(t.data),a=eR(n[1],Qo);if(a.forEach(function(s){e[s].forEach(function(i){var o=Ns(i.meta[1][0].data);if(o==2){var c=Q6e(e,i);c.sheets.forEach(function(u,d){oR(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function t3(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=vu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=xu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ns(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(c){s[c].forEach(function(u){var d=Ns(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return H6e(s,o)}function V6e(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&Ns(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=lg(e[7][0].data),d=0,f=[],h=lg(e[4][0].data),p=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,p,!0);var b,y;switch(typeof t[x]){case"string":b=ZT({t:"s",v:t[x]},r),y=e3({t:"s",v:t[x]},r);break;case"number":b=ZT({t:"n",v:t[x]},r),y=e3({t:"n",v:t[x]},r);break;case"boolean":b=ZT({t:"b",v:t[x]},r),y=e3({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(b),d+=b.length,g.push(y),p+=y.length,++c}for(e[2][0].data=Aa(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=ym(f),e[3][0].data=ym(g),c}function z6e(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Jl(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(rn(n)));var s=c5(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(W){return W.forEach(function(Z){typeof Z=="string"&&i.push(Z)})});var o={},c=[],u=Cr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(W,Z){return[W,u.FullPaths[Z]]}).forEach(function(W){var Z=W[0],re=W[1];if(Z.type==2&&Z.name.match(/\.iwa/)){var ae=Z.content,ce=vu(ae),oe=xu(ce);oe.forEach(function(le){c.push(le.id),o[le.id]={deps:[],location:re,type:Ns(le.messages[0].meta[1][0].data)}})}}),c.sort(function(W,Z){return W-Z});var d=c.filter(function(W){return W>1}).map(function(W){return[W,Aa(W)]});u.FileIndex.map(function(W,Z){return[W,u.FullPaths[Z]]}).forEach(function(W){var Z=W[0];if(W[1],!!Z.name.match(/\.iwa/)){var re=xu(vu(Z.content));re.forEach(function(ae){ae.messages.forEach(function(ce){d.forEach(function(oe){ae.messages.some(function(le){return Ns(le.meta[1][0].data)!=11006&&T6e(le.data,oe[1])})&&o[oe[0]].deps.push(ae.id)})})})}});for(var f=Cr.find(u,o[1].location),h=xu(vu(f.content)),p,g=0;g<h.length;++g){var x=h[g];x.id==1&&(p=x)}var b=Qo(qn(p.messages[0].data)[1][0].data);for(f=Cr.find(u,o[b].location),h=xu(vu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);for(b=Qo(qn(p.messages[0].data)[2][0].data),f=Cr.find(u,o[b].location),h=xu(vu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);for(b=Qo(qn(p.messages[0].data)[2][0].data),f=Cr.find(u,o[b].location),h=xu(vu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);var y=qn(p.messages[0].data);{y[6][0].data=Aa(n.e.r+1),y[7][0].data=Aa(n.e.c+1);var w=Qo(y[46][0].data),S=Cr.find(u,o[w].location),j=xu(vu(S.content));{for(var N=0;N<j.length&&j[N].id!=w;++N);if(j[N].id!=w)throw"Bad ColumnRowUIDMapArchive";var F=qn(j[N].messages[0].data);F[1]=[],F[2]=[],F[3]=[];for(var E=0;E<=n.e.c;++E){var _=[];_[1]=_[2]=[{type:0,data:Aa(E+420690)}],F[1].push({type:2,data:lo(_)}),F[2].push({type:0,data:Aa(E)}),F[3].push({type:0,data:Aa(E)})}F[4]=[],F[5]=[],F[6]=[];for(var B=0;B<=n.e.r;++B)_=[],_[1]=_[2]=[{type:0,data:Aa(B+726270)}],F[4].push({type:2,data:lo(_)}),F[5].push({type:0,data:Aa(B)}),F[6].push({type:0,data:Aa(B)});j[N].messages[0].data=lo(F)}S.content=gx(px(j)),S.size=S.content.length,delete y[46];var P=qn(y[4][0].data);{P[7][0].data=Aa(n.e.r+1);var D=qn(P[1][0].data),I=Qo(D[2][0].data);S=Cr.find(u,o[I].location),j=xu(vu(S.content));{if(j[0].id!=I)throw"Bad HeaderStorageBucket";var U=qn(j[0].messages[0].data);for(B=0;B<s.length;++B){var R=qn(U[2][0].data);R[1][0].data=Aa(B),R[4][0].data=Aa(s[B].length),U[2][B]={type:U[2][0].type,data:lo(R)}}j[0].messages[0].data=lo(U)}S.content=gx(px(j)),S.size=S.content.length;var Y=Qo(P[2][0].data);S=Cr.find(u,o[Y].location),j=xu(vu(S.content));{if(j[0].id!=Y)throw"Bad HeaderStorageBucket";for(U=qn(j[0].messages[0].data),E=0;E<=n.e.c;++E)R=qn(U[2][0].data),R[1][0].data=Aa(E),R[4][0].data=Aa(n.e.r+1),U[2][E]={type:U[2][0].type,data:lo(R)};j[0].messages[0].data=lo(U)}S.content=gx(px(j)),S.size=S.content.length;var H=Qo(P[4][0].data);(function(){for(var W=Cr.find(u,o[H].location),Z=xu(vu(W.content)),re,ae=0;ae<Z.length;++ae){var ce=Z[ae];ce.id==H&&(re=ce)}var oe=qn(re.messages[0].data);{oe[3]=[];var le=[];i.forEach(function(te,_e){le[1]=[{type:0,data:Aa(_e)}],le[2]=[{type:0,data:Aa(1)}],le[3]=[{type:2,data:B6e(te)}],oe[3].push({type:2,data:lo(le)})})}re.messages[0].data=lo(oe);var pe=px(Z),Be=gx(pe);W.content=Be,W.size=W.content.length})();var X=qn(P[3][0].data);{var V=X[1][0];delete X[2];var z=qn(V.data);{var q=Qo(z[2][0].data);(function(){for(var W=Cr.find(u,o[q].location),Z=xu(vu(W.content)),re,ae=0;ae<Z.length;++ae){var ce=Z[ae];ce.id==q&&(re=ce)}var oe=qn(re.messages[0].data);{delete oe[6],delete X[7];var le=new Uint8Array(oe[5][0].data);oe[5]=[];for(var pe=0,Be=0;Be<=n.e.r;++Be){var te=qn(le);pe+=V6e(te,s[Be],i),te[1][0].data=Aa(Be),oe[5].push({data:lo(te),type:2})}oe[1]=[{type:0,data:Aa(n.e.c+1)}],oe[2]=[{type:0,data:Aa(n.e.r+1)}],oe[3]=[{type:0,data:Aa(pe)}],oe[4]=[{type:0,data:Aa(n.e.r+1)}]}re.messages[0].data=lo(oe);var _e=px(Z),De=gx(_e);W.content=De,W.size=W.content.length})()}V.data=lo(z)}P[3][0].data=lo(X)}y[4][0].data=lo(P)}p.messages[0].data=lo(y);var ne=px(h),M=gx(ne);return f.content=M,f.size=f.content.length,u}function ene(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function tR(e){ene([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function rR(e){ene([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function $6e(e){return En.WS.indexOf(e)>-1?"sheet":e==En.CS?"chart":e==En.DS?"dialog":e==En.MS?"macro":e&&e.length?e:"sheet"}function G6e(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,$6e(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function K6e(e,t,r,n,a,s,i,o,c,u,d,f){try{s[n]=Wy(Bc(e,r,!0),t);var h=oi(e,t),p;switch(o){case"sheet":p=mIe(h,t,a,c,s[n],u,d,f);break;case"chart":if(p=pIe(h,t,a,c,s[n],u,d,f),!p||!p["!drawel"])break;var g=vy(p["!drawel"].Target,t),x=Fw(g),b=rBe(Bc(e,g,!0),Wy(Bc(e,x,!0),g)),y=vy(b,g),w=Fw(y);p=Vje(Bc(e,y,!0),y,c,Wy(Bc(e,w,!0),y),u,p);break;case"macro":p=gIe(h,t,a,c,s[n],u,d,f);break;case"dialog":p=xIe(h,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var S=[];s&&s[n]&&Ts(s[n]).forEach(function(j){var N="";if(s[n][j].Type==En.CMNT){N=vy(s[n][j].Target,t);var F=wIe(oi(e,N,!0),N,c);if(!F||!F.length)return;dV(p,F,!1)}s[n][j].Type==En.TCMNT&&(N=vy(s[n][j].Target,t),S=S.concat(aBe(oi(e,N,!0),c)))}),S&&S.length&&dV(p,S,!0,c.people||[])}catch(j){if(c.WTF)throw j}}function Au(e){return e.charAt(0)=="/"?e.slice(1):e}function q6e(e,t){if(T1(),t=t||{},tR(t),yu(e,"META-INF/manifest.xml")||yu(e,"objectdata.xml"))return wV(e,t);if(yu(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof t3<"u"){if(e.FileIndex)return t3(e);var r=Cr.utils.cfb_new();return IH(e).forEach(function(R){un(r,R,sSe(e,R))}),t3(r)}throw new Error("Unsupported NUMBERS file")}if(!yu(e,"[Content_Types].xml"))throw yu(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):yu(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=IH(e),a=JSe(Bc(e,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",oi(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!oi(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(Xy=[],a.sst)try{Xy=yIe(oi(e,Au(a.sst)),a.sst,t)}catch(R){if(t.WTF)throw R}t.cellStyles&&a.themes.length&&(c=bIe(Bc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=vIe(oi(e,Au(a.style)),a.style,c,t))}a.links.map(function(R){try{var Y=Wy(Bc(e,Fw(Au(R))),R);return CIe(oi(e,Au(R)),Y,R,t)}catch{}});var d=hIe(oi(e,Au(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=oi(e,Au(a.coreprops[0]),!0),h&&(f=Hte(h)),a.extprops.length!==0&&(h=oi(e,Au(a.extprops[0]),!0),h&&s5e(h,f,t)));var p={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Bc(e,Au(a.custprops[0]),!0),h&&(p=o5e(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(Y){return Y.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=p),t.bookSheets&&typeof i<"u"&&(g.SheetNames=i),t.bookSheets?g.SheetNames:t.bookProps))return g;i={};var x={};t.bookDeps&&a.calcchain&&(x=EIe(oi(e,Au(a.calcchain)),a.calcchain));var b=0,y={},w,S;{var j=d.Sheets;f.Worksheets=j.length,f.SheetNames=[];for(var N=0;N!=j.length;++N)f.SheetNames[N]=j[N].name}var F=s?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),_=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");yu(e,_)||(_="xl/_rels/workbook."+F+".rels");var B=Wy(Bc(e,_,!0),_.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=_Ie(oi(e,Au(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=iBe(oi(e,Au(a.people[0])),t)),B&&(B=G6e(B,d.Sheets));var P=oi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var D="sheet";if(B&&B[b]?(w="xl/"+B[b][1].replace(/[\/]?xl\//,""),yu(e,w)||(w=B[b][1]),yu(e,w)||(w=_.replace(/_rels\/.*$/,"")+B[b][1]),D=B[b][2]):(w="xl/worksheets/sheet"+(b+1-P)+"."+F,w=w.replace(/sheet0\./,"sheet.")),S=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var I=!1,U=0;U!=t.sheets.length;++U)typeof t.sheets[U]=="number"&&t.sheets[U]==b&&(I=1),typeof t.sheets[U]=="string"&&t.sheets[U].toLowerCase()==f.SheetNames[b].toLowerCase()&&(I=1);if(!I)continue e}}K6e(e,w,S,f.SheetNames[b],b,y,i,D,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:p,Deps:x,Sheets:i,SheetNames:f.SheetNames,Strings:Xy,Styles:u,Themes:c,SSF:Ha(Rr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(R,Y){R=R.replace(/^Root Entry[\/]/,""),g.keys.push(R),g.files[R]=e.FileIndex[Y]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=oi(e,Au(a.vba[0]),!0):a.defaults&&a.defaults.bin===hBe&&(g.vbaraw=oi(e,"xl/vbaProject.bin",!0))),g}function W6e(e,t){var r=t||{},n="Workbook",a=Cr.find(e,n);try{if(n="/!DataSpaces/Version",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(_4e(a.content),n="/!DataSpaces/DataSpaceMap",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=N4e(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=k4e(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);T4e(a.content)}catch{}if(n="/EncryptionInfo",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=j4e(a.content);if(n="/EncryptedPackage",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function X6e(e,t){return t.bookType=="ods"?Zre(e,t):t.bookType=="numbers"?z6e(e,t):t.bookType=="xlsb"?Y6e(e,t):J6e(e,t)}function Y6e(e,t){Jx=1024,e&&!e.SSF&&(e.SSF=Ha(Rr)),e&&e.SSF&&(T1(),y4(e.SSF),t.revssf=E4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Yy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Nre.indexOf(t.bookType)>-1,a=QP();rR(t=t||{});var s=NP(),i="",o=0;if(t.cellXfs=[],Fm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,Vte(e.Props,t)),a.coreprops.push(i),fa(t.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Gte(e.Props)),a.extprops.push(i),fa(t.rels,3,i,En.EXT_PROPS),e.Custprops!==e.Props&&Ts(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,Kte(e.Custprops)),a.custprops.push(i),fa(t.rels,4,i,En.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,un(s,i,NIe(o-1,i,t,e,d)),a.sheets.push(i),fa(t.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(f){var p=f["!comments"],g=!1,x="";p&&p.length>0&&(x="xl/comments"+o+"."+r,un(s,x,TIe(p,x)),a.comments.push(x),fa(d,-1,"../comments"+o+"."+r,En.CMNT),g=!0),f["!legacy"]&&g&&un(s,"xl/drawings/vmlDrawing"+o+".vml",_re(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&un(s,Fw(i),yv(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,BIe(t.Strings,i,t)),a.strs.push(i),fa(t.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,un(s,i,SIe(e,i)),a.workbooks.push(i),fa(t.rels,1,i,En.WB),i="xl/theme/theme1.xml",un(s,i,KP(e.Themes,t)),a.themes.push(i),fa(t.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,un(s,i,kIe(e,i,t)),a.styles.push(i),fa(t.wbrels,-1,"styles."+r,En.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),fa(t.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,un(s,i,jIe(i)),a.metadata.push(i),fa(t.wbrels,-1,"metadata."+r,En.XLMETA),un(s,"[Content_Types].xml",Ute(a,t)),un(s,"_rels/.rels",yv(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",yv(t.wbrels)),delete t.revssf,delete t.ssf,s}function J6e(e,t){Jx=1024,e&&!e.SSF&&(e.SSF=Ha(Rr)),e&&e.SSF&&(T1(),y4(e.SSF),t.revssf=E4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Yy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Nre.indexOf(t.bookType)>-1,a=QP();rR(t=t||{});var s=NP(),i="",o=0;if(t.cellXfs=[],Fm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,Vte(e.Props,t)),a.coreprops.push(i),fa(t.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Gte(e.Props)),a.extprops.push(i),fa(t.rels,3,i,En.EXT_PROPS),e.Custprops!==e.Props&&Ts(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,Kte(e.Custprops)),a.custprops.push(i),fa(t.rels,4,i,En.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,un(s,i,Lre(o-1,t,e,f)),a.sheets.push(i),fa(t.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(h){var g=h["!comments"],x=!1,b="";if(g&&g.length>0){var y=!1;g.forEach(function(w){w[1].forEach(function(S){S.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+o+"."+r,un(s,b,sBe(g,d,t)),a.threadedcomments.push(b),fa(f,-1,"../threadedComments/threadedComment"+o+"."+r,En.TCMNT)),b="xl/comments"+o+"."+r,un(s,b,Sre(g)),a.comments.push(b),fa(f,-1,"../comments"+o+"."+r,En.CMNT),x=!0}h["!legacy"]&&x&&un(s,"xl/drawings/vmlDrawing"+o+".vml",_re(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&un(s,Fw(i),yv(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,fre(t.Strings,t)),a.strs.push(i),fa(t.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,un(s,i,Vre(e)),a.workbooks.push(i),fa(t.rels,1,i,En.WB),i="xl/theme/theme1.xml",un(s,i,KP(e.Themes,t)),a.themes.push(i),fa(t.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,un(s,i,yre(e,t)),a.styles.push(i),fa(t.wbrels,-1,"styles."+r,En.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),fa(t.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,un(s,i,Cre()),a.metadata.push(i),fa(t.wbrels,-1,"metadata."+r,En.XLMETA),d.length>1&&(i="xl/persons/person.xml",un(s,i,oBe(d)),a.people.push(i),fa(t.wbrels,-1,"persons/person.xml",En.PEOPLE)),un(s,"[Content_Types].xml",Ute(a,t)),un(s,"_rels/.rels",yv(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",yv(t.wbrels)),delete t.revssf,delete t.ssf,s}function nR(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Pc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Z6e(e,t){return Cr.find(e,"EncryptedPackage")?W6e(e,t):Kre(e,t)}function eFe(e,t){var r,n=e,a=t||{};return a.type||(a.type=gn&&Buffer.isBuffer(e)?"buffer":"base64"),r=mte(n,a),q6e(r,a)}function tne(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Y6(e.slice(r),t);default:break e}return zv.to_workbook(e,t)}function tFe(e,t){var r="",n=nR(e,t);switch(t.type){case"base64":r=Pc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=ag(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ea(r)),t.type="binary",tne(r,t)}function rFe(e,t){var r=e;return t.type=="base64"&&(r=Pc(r)),r=Nw.utils.decode(1200,r.slice(2),"str"),t.type="binary",tne(r,t)}function nFe(e){return e.match(/[^\x00-\x7F]/)?PA(e):e}function r3(e,t,r,n){return n?(r.type="string",zv.to_workbook(e,r)):zv.to_workbook(t,r)}function Uw(e,t){wP();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Uw(new Uint8Array(e),(r=Ha(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Ev={},r.dateNF&&(Ev.dateNF=r.dateNF),r.type||(r.type=gn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=gn?"buffer":"binary",n=Y_e(e),typeof Uint8Array<"u"&&!gn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=nFe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Ha(r),r.type="array",Uw(EP(n),r)}switch((a=nR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return Z6e(Cr.read(n,r),r);break;case 9:if(a[1]<=8)return Kre(n,r);break;case 60:return Y6(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return l4e(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return dre.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?eFe(n,r):r3(e,n,r,s);case 239:return a[3]===60?Y6(n,r):r3(e,n,r,s);case 255:if(a[1]===254)return rFe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Up.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Up.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return X6.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return xre.to_workbook(n,r);break;case 10:case 13:case 32:return tFe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return o4e.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?X6.to_workbook(n,r):r3(e,n,r,s)}function rne(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return N2(t.file,Cr.write(e,{type:gn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Cr.write(e,t)}function aFe(e,t){var r=Ha(t||{}),n=X6e(e,r);return sFe(n,r)}function sFe(e,t){var r={},n=gn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Cr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(b4(a))}return t.password&&typeof encrypt_agile<"u"?rne(encrypt_agile(a,t.password),t):t.type==="file"?N2(t.file,a):t.type=="string"?Ea(a):a}function iFe(e,t){var r=t||{},n=n6e(e,r);return rne(n,r)}function _A(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return kw(PA(n));case"binary":return PA(n);case"string":return e;case"file":return N2(t.file,n,"utf8");case"buffer":return gn?kh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):_A(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function oFe(e,t){switch(t.type){case"base64":return kw(e);case"binary":return e;case"string":return e;case"file":return N2(t.file,e,"binary");case"buffer":return gn?kh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function jC(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?kw(r):t.type=="string"?Ea(r):r;case"file":return N2(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function nne(e,t){wP(),Zje(e);var r=Ha(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=nne(e,r);return r.type="array",b4(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return _A(XIe(e,r),r);case"slk":case"sylk":return _A(ure.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return _A(Wre(e.Sheets[e.SheetNames[a]],r),r);case"txt":return oFe(ane(e.Sheets[e.SheetNames[a]],r),r);case"csv":return _A(sR(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return _A(dre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return jC(X6.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return _A(zv.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return _A(xre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return _A(Are.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return _A(Zre(e,r),r);case"wk1":return jC(Up.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return jC(Up.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),jC(qre(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),iFe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return aFe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function lFe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function aR(e,t,r){var n={};return n.type="file",n.file=t,lFe(n),nne(e,n)}function cFe(e,t,r,n,a,s,i,o){var c=qs(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var g=i?e[r][p]:e[n[p]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[p]!=null&&(h[s[p]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[p]!=null){if(x==null)if(g.t=="e"&&x===null)h[s[p]]=null;else if(u!==void 0)h[s[p]]=u;else if(d&&x===null)h[s[p]]=null;else continue;else h[s[p]]=d&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?x:mh(g,x,o);x!=null&&(f=!1)}}return{row:h,isempty:f}}function c5(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Qn(d);break;case"number":c=Qn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=qs(c.s.r),h=[],p=[],g=0,x=0,b=Array.isArray(e),y=c.s.r,w=0,S={};b&&!e[y]&&(e[y]=[]);var j=u.skipHidden&&e["!cols"]||[],N=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(j[w]||{}).hidden)switch(h[w]=is(w),r=b?e[y][w]:e[h[w]+f],n){case 1:s[w]=w-c.s.c;break;case 2:s[w]=h[w];break;case 3:s[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=mh(r,null,u),x=S[i]||0,!x)S[i]=1;else{do o=i+"_"+x++;while(S[o]);S[i]=x,S[o]=1}s[w]=o}for(y=c.s.r+a;y<=c.e.r;++y)if(!(N[y]||{}).hidden){var F=cFe(e,c,y,h,n,s,b,u);(F.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[g++]=F.row)}return p.length=g,p}var NV=/"/g;function uFe(e,t,r,n,a,s,i,o){for(var c=!0,u=[],d="",f=qs(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=o.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:mh(p,null,o));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||o.forceQuotes){d='"'+d.replace(NV,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(NV,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(i)}function sR(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Qn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=is(g));for(var x=0,b=a.s.r;b<=a.e.r;++b)(p[b]||{}).hidden||(d=uFe(e,a,b,f,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?o:"")+d)));return delete n.dense,r.join("")}function ane(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=sR(e,t);return r}function dFe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Qn(e["!ref"]),s="",i=[],o,c=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)i[o]=is(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=qs(d),o=a.s.c;o<=a.e.c;++o)if(t=i[o]+s,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function sne(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?os(n.origin):n.origin;i=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+a}};if(s["!ref"]){var f=Qn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var h=n.header||[],p=0;t.forEach(function(x,b){Ts(x).forEach(function(y){(p=h.indexOf(y))==-1&&(h[p=h.length]=y);var w=x[y],S="z",j="",N=Ur({c:o+p,r:i+b+a});u=Qw(s,N),w&&typeof w=="object"&&!(w instanceof Date)?s[N]=w:(typeof w=="number"?S="n":typeof w=="boolean"?S="b":typeof w=="string"?S="s":w instanceof Date?(S="d",n.cellDates||(S="n",w=Si(w)),j=n.dateNF||Rr[14]):w===null&&n.nullError&&(S="e",w=0),u?(u.t=S,u.v=w,delete u.w,delete u.R,j&&(u.z=j)):s[N]=u={t:S,v:w},j&&(u.z=j))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var g=qs(i);if(a)for(p=0;p<h.length;++p)s[is(p+o)+g]={t:"s",v:h[p]};return s["!ref"]=rn(d),s}function AFe(e,t){return sne(null,e,t)}function Qw(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=os(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Qw(e,Ur(t)):Qw(e,Ur({r:t,c:r||0}))}function fFe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function iR(){return{SheetNames:[],Sheets:{}}}function oR(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Hre(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function hFe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=fFe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function mFe(e,t){return e.z=t,e}function ine(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function pFe(e,t,r){return ine(e,"#"+t,r)}function gFe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function xFe(e,t,r,n){for(var a=typeof t!="string"?t:Qn(t),s=typeof t=="string"?t:rn(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var c=Qw(e,i,o);c.t="n",c.F=s,delete c.v,i==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var ku={encode_col:is,encode_row:qs,encode_cell:Ur,encode_range:rn,decode_col:DP,decode_row:OP,split_cell:BSe,decode_cell:os,decode_range:Jl,format_cell:mh,sheet_add_aoa:Fte,sheet_add_json:sne,sheet_add_dom:Xre,aoa_to_sheet:j1,json_to_sheet:AFe,table_to_sheet:Yre,table_to_book:_6e,sheet_to_csv:sR,sheet_to_txt:ane,sheet_to_json:c5,sheet_to_html:Wre,sheet_to_formulae:dFe,sheet_to_row_object_array:c5,sheet_get_cell:Qw,book_new:iR,book_append_sheet:oR,book_set_sheet_visibility:hFe,cell_set_number_format:mFe,cell_set_hyperlink:ine,cell_set_internal_link:pFe,cell_add_comment:gFe,sheet_set_array_formula:xFe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const vFe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=Tt(tn,c),d=await ga(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(p=>{const g=p.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const i=[];try{const c=Tt(tn,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=Wt(c,nn("timestamp",">=",u.toISOString()),Tr("timestamp","desc")),f=await ga(d),h={};f.docs.forEach(p=>{const g=p.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([p],[g])=>new Date(p).getTime()-new Date(g).getTime()).forEach(([p,g])=>{i.push({label:p,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},kV=500,xx=({title:e,value:t,description:r,alert:n})=>l.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),l.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),n3=({title:e,data:t,colorClass:r})=>{const n=k.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),l.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},bFe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0),[a,s]=k.useState(null),[i,o]=k.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});k.useEffect(()=>{n(!0);const f=dEe(g=>{t(g),n(!1)}),h=async()=>{try{const g=await vFe();o(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const p=setInterval(h,300*1e3);return()=>{f(),clearInterval(p)}},[]);const{stats:c,userStats:u,moduleStats:d}=k.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),p=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},b={},y={};e.forEach(j=>{const N=new Date(j.timestamp).getTime();N>=h&&x.today++,N>=p&&x.week++,N>=g&&x.month++;const F=j.userEmail||"Desconocido";b[F]||(b[F]={email:F,today:0,month:0,total:0}),b[F].total++,N>=h&&b[F].today++,N>=g&&b[F].month++,y[j.module]=(y[j.module]||0)+1});const w=Object.values(b).sort((j,N)=>N.total-j.total),S=Object.entries(y).map(([j,N])=>({label:j,value:N})).sort((j,N)=>N.value-j.value);return{stats:x,userStats:w,moduleStats:S}},[e]);return l.jsxs("div",{className:"space-y-8",children:[a&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsx(xx,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${kV}`,alert:c.today>kV}),l.jsx(xx,{title:"Llamadas esta Semana",value:r?"--":c.week}),l.jsx(xx,{title:"Llamadas este Mes",value:r?"--":c.month})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(n3,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),l.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(xx,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),l.jsx(xx,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),l.jsx(xx,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(n3,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),l.jsx(n3,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yFe="type.googleapis.com/google.protobuf.Int64Value",wFe="type.googleapis.com/google.protobuf.UInt64Value";function one(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function u5(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>u5(t));if(typeof e=="function"||typeof e=="object")return one(e,t=>u5(t));throw new Error("Data cannot be encoded in JSON: "+e)}function Gv(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case yFe:case wFe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>Gv(t)):typeof e=="function"||typeof e=="object"?one(e,t=>Gv(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kl extends Pd{constructor(t,r,n){super(`${lR}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,Kl.prototype)}}function EFe(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function d5(e,t){let r=EFe(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!BV[i])return new Kl("internal","internal");r=BV[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=Gv(a))}}catch{}return r==="ok"?null:new Kl(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CFe{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Sc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="us-central1",_Fe=/^data: (.*?)(?:\n|$)/;function SFe(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new Kl("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class NFe{constructor(t,r,n,a,s=eF,i=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new CFe(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=eF}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function kFe(e,t,r){const n=Sh(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(TN(e.emulatorOrigin),jN("Functions",!0))}function BFe(e,t,r){const n=a=>jFe(e,t,a,{});return n.stream=(a,s)=>FFe(e,t,a,s),n}async function TFe(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function lne(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function jFe(e,t,r,n){const a=e._url(t);return IFe(e,a,r,n)}async function IFe(e,t,r,n){r=u5(r);const a={data:r},s=await lne(e,n),i=n.timeout||7e4,o=SFe(i),c=await Promise.race([TFe(t,a,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!c)throw new Kl("cancelled","Firebase Functions instance was deleted.");const u=d5(c.status,c.json);if(u)throw u;if(!c.json)throw new Kl("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Kl("internal","Response is missing data field.");return{data:Gv(d)}}function FFe(e,t,r,n){const a=e._url(t);return OFe(e,a,r,n||{})}async function OFe(e,t,r,n){var h;r=u5(r);const a={data:r},s=await lne(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const x=new Kl("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=d5(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let o,c;const u=new Promise((p,g)=>{o=p,c=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const p=new Kl("cancelled","Request was cancelled.");c(p)});const d=i.body.getReader(),f=DFe(d,o,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const p=f.getReader();return{async next(){const{value:g,done:x}=await p.read();return{value:g,done:x}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:u}}function DFe(e,t,r,n){const a=(i,o)=>{const c=i.match(_Fe);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(Gv(d.result));return}if("message"in d){o.enqueue(Gv(d.message));return}if("error"in d){const f=d5(0,d);o.error(f),r(f);return}}catch(d){if(d instanceof Kl){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return c();async function c(){if(n!=null&&n.aborted){const u=new Kl("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const h=new Kl("cancelled","Request was cancelled");i.error(h),r(h),await e.cancel();return}o+=s.decode(u,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),i);return c()}catch(u){const d=u instanceof Kl?u:d5(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const TV="@firebase/functions",jV="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PFe="auth-internal",RFe="app-check-internal",LFe="messaging-internal";function MFe(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(PFe),i=r.getProvider(LFe),o=r.getProvider(RFe);return new NFe(a,s,i,o,n)};lm(new lh(lR,t,"PUBLIC").setMultipleInstances(!0)),Fu(TV,jV,e),Fu(TV,jV,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(e=IN(),t=eF){const n=f2(Xn(e),lR).getImmediate({identifier:t}),a=eD("functions");return a&&UFe(n,...a),n}function UFe(e,t,r){kFe(Xn(e),t,r)}function vx(e,t,r){return BFe(Xn(e),t)}MFe();const IV=Tt(tn,"usuarios");async function cne(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",IV);const e=await ga(IV);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const FV=Object.values(Kt),a3=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",QFe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!1),[a,s]=k.useState("Usuarios"),[i,o]=k.useState({nombreCompleto:"",email:"",rut:"",profile:Kt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=k.useState(null),[d,f]=k.useState(""),[h,p]=k.useState(""),[g,x]=k.useState(""),[b,y]=k.useState(null),[w,S]=k.useState(null),[j,N]=k.useState(null),F=k.useCallback(async()=>{n(!0);try{const V=await cne();t(V)}catch(V){console.error("Error al cargar usuarios",V),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);k.useEffect(()=>{F()},[F]);const E=k.useCallback(V=>{const{name:z,value:q}=V.target;o(ne=>({...ne,[z]:q,curso:z==="profile"&&q!==Kt.ESTUDIANTE?"":ne.curso,cursos:z==="profile"&&q!==Kt.PROFESORADO?[]:ne.cursos,asignaturas:z==="profile"&&q!==Kt.PROFESORADO?[]:ne.asignaturas}))},[]),_=k.useCallback((V,z)=>{o(q=>{const ne=q[V]||[],M=ne.includes(z)?ne.filter(W=>W!==z):[...ne,z];return{...q,[V]:M}})},[]),B=k.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Kt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),P=k.useCallback(async V=>{V.preventDefault(),y(null);const{nombreCompleto:z,email:q,profile:ne,curso:M,password:W}=i;if(!z.trim()||!q.trim()){y("Nombre Completo y Email son obligatorios.");return}if(ne===Kt.ESTUDIANTE&&!M){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(W!=null&&W.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const Z=Qb();try{if(c){const re=vx(Z,"updateUser"),ae={...i,password:(W==null?void 0:W.trim())||void 0,curso:ne===Kt.ESTUDIANTE?a3(M||""):void 0};await re(ae)}else{const re=vx(Z,"createUser"),ae={...i,curso:ne===Kt.ESTUDIANTE?a3(M||""):void 0};await re(ae)}await F(),B()}catch(re){console.error("Error al guardar usuario:",re),y(re.message||"Error al guardar el usuario.")}},[i,c,F,B]),D=k.useCallback(V=>{u(V.email),o({nombreCompleto:V.nombreCompleto,email:V.email,rut:V.rut||"",profile:V.profile,password:"",curso:V.curso||"",cursos:V.cursos||[],asignaturas:V.asignaturas||[]}),setTimeout(()=>{const z=document.querySelector("form");z&&z.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),I=k.useCallback(async V=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${V}? Esta acción es irreversible.`))try{const z=Qb();await vx(z,"deleteUser")({email:V}),await F()}catch(z){console.error("Error al eliminar usuario:",z),y(z.message||"No se pudo borrar el usuario.")}},[F]),U=async V=>{var W;const z=(W=V.target.files)==null?void 0:W[0];if(!z)return;S({message:"Procesando archivo...",isError:!1});const q=Qb(),ne=vx(q,"createUser"),M=new FileReader;M.onload=async Z=>{var re;try{const ae=new Uint8Array((re=Z.target)==null?void 0:re.result),ce=Uw(ae,{type:"array"}),oe=ce.Sheets[ce.SheetNames[0]],le=ku.sheet_to_json(oe);if(le.length===0){S({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const pe=le.map(Ne=>{const fe=Ne.Nombre||Ne.nombre,Ie=Ne.Correo||Ne.correo||Ne.Email||Ne.email,Ue=Ne.Curso||Ne.curso,Ye=Ne.RUT||Ne.rut;return!fe||!Ie||!Ue?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ne({nombreCompleto:String(fe).trim(),email:String(Ie).trim(),profile:Kt.ESTUDIANTE,curso:a3(String(Ue).trim()),rut:Ye?String(Ye).trim():"",password:"recoleta"}).catch(ye=>({email:Ie,error:ye.message}))}),Be=await Promise.all(pe),te=Be.filter(Ne=>!Ne.error).length,_e=Be.filter(Ne=>Ne.error);let De=`Carga completada. ${te} estudiantes agregados.`;_e.length>0&&(De+=` ${_e.length} fallaron.`,console.error("Errores en carga masiva:",_e)),S({message:De,isError:_e.length>0}),await F()}catch(ae){S({message:`Error: ${ae.message}`,isError:!0})}},M.readAsArrayBuffer(z),V.target.value=""},R=async V=>{var W;const z=(W=V.target.files)==null?void 0:W[0];if(!z)return;N({message:"Procesando archivo...",isError:!1});const q=Qb(),ne=vx(q,"createUser"),M=new FileReader;M.onload=async Z=>{var re;try{const ae=new Uint8Array((re=Z.target)==null?void 0:re.result),ce=Uw(ae,{type:"array"}),oe=ce.Sheets[ce.SheetNames[0]],le=ku.sheet_to_json(oe);if(le.length===0){N({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const pe=le.map(Ne=>{const fe=Ne.Nombre||Ne.nombre,Ie=Ne.Correo||Ne.correo||Ne.Email||Ne.email,Ue=Ne.Perfil||Ne.perfil||Ne.Profile||Ne.profile,Ye=Ne.RUT||Ne.rut;return!fe||!Ie||!Ue?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ne({nombreCompleto:String(fe).trim(),email:String(Ie).trim(),profile:Ue,rut:Ye?String(Ye).trim():"",password:"recoleta"}).catch(ye=>({email:Ie,error:ye.message}))}),Be=await Promise.all(pe),te=Be.filter(Ne=>!Ne.error).length,_e=Be.filter(Ne=>Ne.error);let De=`Carga completada. ${te} usuarios agregados.`;_e.length>0&&(De+=` ${_e.length} fallaron.`,console.error("Errores en carga masiva:",_e)),N({message:De,isError:_e.length>0}),await F()}catch(ae){N({message:`Error: ${ae.message}`,isError:!0})}},M.readAsArrayBuffer(z),V.target.value=""},Y="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",H=k.useMemo(()=>Array.from(new Set(e.filter(V=>V.profile===Kt.ESTUDIANTE&&V.curso).map(V=>V.curso))).sort(),[e]),X=k.useMemo(()=>e.filter(V=>(d===""||V.nombreCompleto.toLowerCase().includes(d.toLowerCase())||V.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||V.profile===h)&&(g===""||V.curso===g)),[e,d,h,g]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),l.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:U,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),w&&l.jsx("p",{className:`text-sm mt-2 ${w.isError?"text-red-600":"text-green-600"}`,children:w.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:R,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),j&&l.jsx("p",{className:`text-sm mt-2 ${j.isError?"text-red-600":"text-green-600"}`,children:j.message})]})]})]}),l.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),l.jsxs("form",{onSubmit:P,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:Y,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:Y,required:!0,readOnly:!!c})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),l.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:Y})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),l.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:Y})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),l.jsx("select",{name:"profile",value:i.profile,onChange:E,className:Y,required:!0,children:FV.map(V=>l.jsx("option",{value:V,children:V},V))})]}),i.profile===Kt.ESTUDIANTE&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:Y,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(V=>l.jsx("option",{value:V,children:V},V))]})]})]}),i.profile===Kt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ks.map(V=>{var z;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[l.jsx("input",{type:"checkbox",checked:((z=i.cursos)==null?void 0:z.includes(V))||!1,onChange:()=>_("cursos",V),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),i.profile===Kt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ki.map(V=>{var z;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[l.jsx("input",{type:"checkbox",checked:((z=i.asignaturas)==null?void 0:z.includes(V))||!1,onChange:()=>_("asignaturas",V),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),b&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),l.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&l.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const V=Qb(),q=await vx(V,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",q),y("✅ Custom claim agregado exitosamente")}catch(V){console.error("❌ Error al agregar custom claim:",V),y(`Error: ${V.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),l.jsx("button",{type:"button",onClick:async()=>{var V,z,q,ne,M;try{const{auth:W}=await Hv(async()=>{const{auth:ae}=await Promise.resolve().then(()=>KZ);return{auth:ae}},void 0);console.log("🔍 Usuario actual:",(V=W.currentUser)==null?void 0:V.email);const Z=await((z=W.currentUser)==null?void 0:z.getIdToken(!0));console.log("🔑 Token refreshed:",!!Z);const re=await((q=W.currentUser)==null?void 0:q.getIdTokenResult());console.log("📋 Claims completos:",re==null?void 0:re.claims),console.log("👤 Profile claim:",(ne=re==null?void 0:re.claims)==null?void 0:ne.profile),((M=re==null?void 0:re.claims)==null?void 0:M.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(re==null?void 0:re.claims)}`)}catch(W){console.error("❌ Error verificando token:",W),y(`Error verificando token: ${W.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsx("div",{children:l.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:V=>f(V.target.value),className:Y})}),l.jsx("div",{children:l.jsxs("select",{value:h,onChange:V=>p(V.target.value),className:Y,children:[l.jsx("option",{value:"",children:"Todos los perfiles"}),FV.map(V=>l.jsx("option",{value:V,children:V},V))]})}),l.jsx("div",{children:l.jsxs("select",{value:g,onChange:V=>x(V.target.value),className:Y,children:[l.jsx("option",{value:"",children:"Todos los cursos"}),H.map(V=>l.jsx("option",{value:V,children:V},V))]})})]}),r?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:X.map(V=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:V.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:V.email}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.profile===Kt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":V.profile===Kt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:V.profile})}),l.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[V.profile===Kt.ESTUDIANTE&&l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:V.curso||"Sin curso"}),V.profile===Kt.PROFESORADO&&l.jsxs("div",{className:"space-y-1",children:[V.cursos&&V.cursos.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.cursos.slice(0,3).map(z=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:z},z)),V.cursos.length>3&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.cursos.length-3]})]})]}),V.asignaturas&&V.asignaturas.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.asignaturas.slice(0,2).map(z=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:z},z)),V.asignaturas.length>2&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.asignaturas.length-2]})]})]}),(!V.cursos||V.cursos.length===0)&&(!V.asignaturas||V.asignaturas.length===0)&&l.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),V.profile!==Kt.ESTUDIANTE&&V.profile!==Kt.PROFESORADO&&l.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[l.jsx("button",{onClick:()=>D(V),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),l.jsx("button",{onClick:()=>I(V.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},V.email))})]}),X.length===0&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&l.jsx(bFe,{})]})},Kv="seguimiento_dual_records",HFe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},VFe=e=>{const t=Wt(Tt(pt,Kv),Tr("nombreEstudiante","asc"));return pr(t,n=>{const a=n.docs.map(s=>HFe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},A5=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=ir.fromDate(new Date(t[n]+"T00:00:00")))}),t},zFe=async e=>{try{const t=A5(e);return(await Ln(Tt(pt,Kv),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},OV=async(e,t)=>{try{const r=dr(pt,Kv,e),n=A5(t);await Yi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},$Fe=async e=>{try{const t=dr(pt,Kv,e);await Za(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},GFe=async e=>{const t=bg(pt),r=Tt(pt,Kv);let n=0,a=0;for(const s of e){const i=Wt(r,nn("rutEstudiante","==",s.rutEstudiante)),o=await ga(i);if(o.empty){const c=dr(r);t.set(c,A5(s)),a++}else{const c=o.docs[0].id,u=dr(pt,Kv,c);t.set(u,A5(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},KFe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},qFe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},WFe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},XFe=({record:e,onSave:t,onClose:r})=>{const[n,a]=k.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=c=>{const{name:u,value:d,type:f,checked:h}=c.target;a(p=>({...p,[u]:f==="checkbox"?h:d}))},o=()=>{t(n)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),l.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),l.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),l.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),l.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),l.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},YFe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0),a=k.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Pp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:ST[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=k.useState(a),[o,c]=k.useState(null),[u,d]=k.useState(""),[f,h]=k.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[p,g]=k.useState(null),[x,b]=k.useState(null),[y,w]=k.useState(!1),[S,j]=k.useState(null);k.useEffect(()=>{n(!0);const V=VFe(z=>{t(z),n(!1)});return()=>V()},[]);const N=k.useCallback(V=>{const{name:z,value:q}=V.target;i(ne=>({...ne,[z]:q}))},[]),F=k.useCallback(V=>{const{name:z,value:q}=V.target;h(ne=>({...ne,[z]:q}))},[]),E=k.useCallback(()=>{i(a),c(null),g(null)},[a]),_=async V=>{V.preventDefault(),g(null);const q=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ne=>{var M;return!((M=s[ne])!=null&&M.trim())});if(q){g(`El campo '${q}' es obligatorio.`);return}try{o?await OV(o,s):await zFe(s),E()}catch(ne){console.error(ne),g("No se pudo guardar el registro.")}},B=k.useCallback(V=>{window.scrollTo({top:0,behavior:"smooth"}),c(V.id),i(V)},[]),P=async V=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await $Fe(V)}catch(z){console.error(z),g("No se pudo eliminar el registro.")}},D=V=>{j(V),w(!0)},I=()=>{j(null),w(!1)},U=async V=>{try{await OV(V.id,V),I()}catch(z){console.error(z),alert("No se pudieron guardar los cambios de supervisión.")}},R=()=>{const V=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],z=ku.aoa_to_sheet([V]),q=ku.book_new();ku.book_append_sheet(q,z,"Plantilla"),aR(q,"Plantilla_Seguimiento_Dual.xlsx")},Y=V=>{var ne;const z=(ne=V.target.files)==null?void 0:ne[0];if(!z)return;b({message:"Procesando archivo...",isError:!1});const q=new FileReader;q.onload=async M=>{var W;try{const Z=new Uint8Array((W=M.target)==null?void 0:W.result),re=Uw(Z,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ae=re.SheetNames[0],ce=re.Sheets[ae],oe=ku.sheet_to_json(ce,{raw:!1,dateNF:"yyyy-mm-dd"});if(oe.length===0)throw new Error("El archivo está vacío.");const le={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},pe=Object.keys(oe[0]).map(De=>De.trim().toLowerCase()),te=["nombre","rut","curso 2025","empresa","estado"].find(De=>!pe.includes(De));if(te)throw new Error(`Falta la columna requerida: '${te}'`);const _e=oe.map((De,Ne)=>{try{const fe={};for(const Ie in De){const Ue=le[Ie.trim().toLowerCase()];if(Ue){let Ye=De[Ie];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Ue)?(Ye=qFe(Ye),Ye&&(fe[Ue]=Ye)):Ue.includes("realizada")?fe[Ue]=WFe(Ye):Ye!=null&&Ye!==""&&(fe[Ue]=String(Ye).trim())}}return!fe.nombreEstudiante||!fe.rutEstudiante?(console.warn(`Fila ${Ne+2}: Faltan campos requeridos`),null):fe}catch(fe){return console.error(`Error procesando fila ${Ne+2}:`,fe),null}}).filter(De=>De!==null);if(console.log("Registros procesados:",_e),_e.length>0){const{updated:De,created:Ne}=await GFe(_e);b({message:`Carga exitosa. ${Ne} registros creados, ${De} actualizados.`,isError:!1})}else b({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(Z){console.error("Error completo:",Z),b({message:`Error al procesar el archivo: ${Z.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},q.readAsArrayBuffer(z)},H="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",X=k.useMemo(()=>e.filter(V=>(u===""||V.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||V.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||V.rutEstudiante.includes(u))&&(f.curso===""||V.curso===f.curso)&&(f.empresa===""||V.nombreEmpresa===f.empresa)&&(f.estado===""||V.estado===f.estado)&&(f.comuna===""||V.comuna===f.comuna)&&(f.profesor===""||V.profesorTutorEmpresa===f.profesor)).sort((V,z)=>V.nombreEstudiante.localeCompare(z.nombreEstudiante)),[e,u,f]);return k.useMemo(()=>{const V=new Set,z=new Set;return e.forEach(q=>{q.nombreEmpresa&&V.add(q.nombreEmpresa),q.comuna&&z.add(q.comuna)}),{empresas:Array.from(V).sort(),comunas:Array.from(z).sort()}},[e]),r?l.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),l.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:N,className:H,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),l.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:N,className:H,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{name:"curso",value:s.curso,onChange:N,className:H,required:!0,children:Pp.map(V=>l.jsx("option",{value:V,children:V},V))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),l.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:N,className:H,children:[l.jsx("option",{value:"",children:"Seleccione un profesor"}),w6.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),l.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:N,className:H,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),l.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:N,className:H})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),l.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:N,className:H})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),l.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:N,className:H})]}),l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),l.jsx("select",{name:"estado",value:s.estado,onChange:N,className:H,children:ST.map(V=>l.jsx("option",{value:V,children:V},V))})]})]}),s.estado==="Desvinculado"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),l.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:N,className:`${H} border-red-300`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),l.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:N,className:`${H} border-red-300`})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:p}),l.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&l.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[l.jsx("button",{onClick:R,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),l.jsx("input",{type:"file",onChange:Y,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&l.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:V=>d(V.target.value),className:`${H} md:col-span-2 lg:col-span-1`}),l.jsxs("select",{name:"curso",value:f.curso,onChange:F,className:H,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Pp.map(V=>l.jsx("option",{children:V},V))]}),l.jsxs("select",{name:"estado",value:f.estado,onChange:F,className:H,children:[l.jsx("option",{value:"",children:"Todos los Estados"}),ST.map(V=>l.jsx("option",{children:V},V))]}),l.jsxs("select",{name:"profesor",value:f.profesor,onChange:F,className:H,children:[l.jsx("option",{value:"",children:"Todos los Profesores"}),w6.map(V=>l.jsx("option",{children:V},V))]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:X.map(V=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:V.nombreEstudiante}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:V.curso})]}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.nombreEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.profesorTutorEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${KFe[V.estado]}`,children:V.estado})}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[l.jsx("button",{onClick:()=>D(V),className:"text-blue-600 hover:underline",children:"Supervisión"}),l.jsx("button",{onClick:()=>B(V),className:"text-yellow-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>P(V.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},V.id))})]})})]}),y&&S&&l.jsx(XFe,{record:S,onClose:I,onSave:U})]})},une="actividades_remotas",dne="respuestas_actividades",Ane="pruebas_estandarizadas",JFe="usuarios",fne=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},cR=e=>{const t=fne(e);return t?t.toISOString():void 0},f5=e=>{const t=fne(e);return t?t.toISOString().split("T")[0]:void 0},hne=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:ir.fromDate(t)},mne=e=>ir.fromDate(new Date(e||new Date().toISOString())),ZFe=e=>!!e&&/^data:/.test(e),Hw=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(Hw);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=Hw(n))}),t},eOe=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const o=typeof Buffer<"u"?Buffer:null;if(o)a=o.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,i=new Uint8Array(s);for(let o=0;o<s;o++)i[o]=a.charCodeAt(o);return{bytes:i,contentType:r}},tOe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:cR(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:f5(t.plazoEntrega)||f5(new Date)}},rOe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:cR(t.fechaCompletado)||new Date().toISOString()}},nOe=e=>{const t=e.data()||{};return{id:e.id,...t}},aOe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:cR(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:f5(t.plazoEntrega)||f5(new Date)}},sOe=e=>{const t=Wt(Tt(pt,une),Tr("fechaCreacion","desc"));return pr(t,r=>e(r.docs.map(tOe)),r=>{console.error("subscribeToActividades error:",r),e([])})},iOe=(e,t)=>{const r=Tt(pt,dne),n=Wt(r,Tr("fechaCompletado","desc"));return pr(n,a=>e(a.docs.map(rOe)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},oOe=e=>{const t=Wt(Tt(pt,JFe),Tr("nombreCompleto","asc"));return pr(t,r=>e(r.docs.map(nOe)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},lOe=e=>{const t=Wt(Tt(pt,Ane),Tr("fechaCreacion","desc"));return pr(t,r=>e(r.docs.map(aOe)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},cOe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=Hw({...a,fechaCreacion:mne(r),plazoEntrega:hne(n)});return(await Ln(Tt(pt,une),s)).id},uOe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=Hw({...a,fechaCreacion:mne(r),plazoEntrega:hne(n)});return(await Ln(Tt(pt,Ane),s)).id},dOe=async(e,t)=>{const r=Hw(t);await Lu(dr(pt,dne,e),r)},AOe=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},fOe=async(e,t,r)=>{const{bytes:n,contentType:a}=eOe(e),s=Date.now(),i=t.replace(/\s+/g,"_"),c=`recursos/${r!=="—"?r:"general"}/${s}/${i}`,u=l4(_we,c);await $Z(u,n,{contentType:a});const d=await nP(u);return{nombre:t,url:d}},hOe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(i,o)=>{if(ZFe(i==null?void 0:i.url)){const c=(i==null?void 0:i.nombre)||`archivo_${o}.bin`;return fOe(i.url,c,t)}return{nombre:(i==null?void 0:i.nombre)||`archivo_${o}`,url:i==null?void 0:i.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return cOe(a)},Hb=e=>e?new Date(e).toLocaleDateString("es-CL"):"",mOe=e=>e?new Date(e).toLocaleString("es-CL"):"",pOe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),pne=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},ii=(e,t)=>{if(t&&pne(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>ii(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Ll=(e,t,...r)=>{if(pne(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=ii(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Ia=({content:e,context:t="unknown"})=>{try{const r=ii(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}},s3={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},i3=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],gOe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState([]),[i,o]=k.useState([]),[c,u]=k.useState(null),[d,f]=k.useState(null),[h,p]=k.useState(!1),[g,x]=k.useState(!1),[b,y]=k.useState(!1),[w,S]=k.useState(!1),[j,N]=k.useState(!1),[F,E]=k.useState(!0),[_,B]=k.useState(null),[P,D]=k.useState(""),[I,U]=k.useState(null),[R,Y]=k.useState(null),[H,X]=k.useState([]),[V,z]=k.useState("carpetas"),[q,ne]=k.useState(null),[M,W]=k.useState(null),[Z,re]=k.useState([]),[ae,ce]=k.useState(""),oe={asignatura:Ki[0],nivel:"—",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[le,pe]=k.useState(oe),Be={asignatura:Ki[0],nivel:"—",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[te,_e]=k.useState(Be);k.useEffect(()=>{E(!0);const et=sOe(t),gt=lOe(n),Je=iOe(s),xt=oOe(wt=>{o(wt),E(!1)});return()=>{et(),gt(),Je(),xt()}},[]);const De=et=>{pe(gt=>({...gt,[et.target.name]:et.target.value}))},Ne=et=>{_e(gt=>({...gt,[et.target.name]:et.target.value}))},fe=et=>{pe(gt=>({...gt,recursos:{...gt.recursos,[et.target.name]:et.target.value}}))},Ie=et=>{et.target.files&&X(Array.from(et.target.files))},Ue=et=>{pe(gt=>{const Je=gt.tipos.includes(et)?gt.tipos.filter(wt=>wt!==et):[...gt.tipos,et],xt={...gt.cantidadPreguntas};return Je.includes(et)?xt[et]||(xt[et]=s3[et][0]):delete xt[et],{...gt,tipos:Je,cantidadPreguntas:xt}})},Ye=(et,gt)=>{pe(Je=>({...Je,cantidadPreguntas:{...Je.cantidadPreguntas,[et]:gt}}))},ye=(et,gt=!1)=>{(gt?_e:pe)(xt=>{const wt=xt.estudiantesDestino||[],bt=wt.includes(et)?wt.filter(nr=>nr!==et):[...wt,et];return{...xt,estudiantesDestino:bt}})},Oe=()=>{const{tipos:et,contenido:gt,asignatura:Je,nivel:xt,cantidadPreguntas:wt}=le;let bt=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${gt}"
Asignatura: ${Je}
Nivel: ${xt}

Genera los siguientes elementos:
- introduccion: breve y motivadora
- actividades: objeto con propiedades por tipo:
`;return et.forEach(nr=>{const gr=wt[nr]||s3[nr][0];switch(nr){case"Quiz":bt+=`- "Quiz": Array de ${gr} objetos { pregunta, opciones[4], respuestaCorrecta, puntaje(1) }
`;break;case"Comprensión de Lectura":bt+=`- "Comprensión de Lectura": Objeto { texto(150-200 palabras), preguntas: Array de ${gr} { pregunta, opciones[4], respuestaCorrecta, puntaje } }
`;break;case"Términos Pareados":bt+=`- "Términos Pareados": Array de ${gr} { concepto, definicion }
`;break;case"Desarrollo":bt+=`- "Desarrollo": Array de ${gr} { pregunta, rubrica }
`;break}}),bt},Re=()=>{const{contenido:et,objetivosAprendizaje:gt,asignatura:Je,nivel:xt}=te;return`Eres experto en evaluación educativa y diseño de pruebas SIMCE.
Responde SOLO con JSON válido.

INFORMACIÓN:
- Asignatura: ${Je}
- Nivel: ${xt}
- Contenido: ${et}
- Objetivos: ${gt}

{
  "titulo": "Título",
  "instrucciones": "Instrucciones",
  "textos": [
    {
      "id": 1,
      "titulo": "Título del texto",
      "contenido": "200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado",
      "opciones": ["Opción A", "Opción B", "Opción C", "Opción D"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar información",
      "justificacion": "Breve explicación",
      "textoId": 1
    }
  ]
}

Reglas:
- ${Je==="Lenguaje y Comunicación"||Je==="Lengua y Literatura"?"3-4 textos de distintos tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas 1..30
- 4 opciones por pregunta (A-D)
- Habilidades válidas: ${i3.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios fuera del JSON`};function qe(et,gt){if(et==="Desarrollo"&&Array.isArray(gt))return gt.map((Je,xt)=>{if(typeof Je=="string"){const wt=Je.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return wt?{pregunta:Ll(wt[1],`desarrollo-pregunta-${xt}`),rubrica:Ll(wt[2],`desarrollo-rubrica-${xt}`)}:{pregunta:Ll(Je,`desarrollo-pregunta-simple-${xt}`),rubrica:""}}if(Je&&typeof Je=="object"){const wt=Ll(Je,`desarrollo-obj-pregunta-${xt}`,"pregunta","Pregunta","texto");let bt="";if(Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica){const nr=Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica;bt=ii(nr,`desarrollo-rubrica-${xt}`)}return{pregunta:wt,rubrica:bt}}return{pregunta:ii(Je,`desarrollo-fallback-${xt}`),rubrica:""}});if(et==="Términos Pareados"&&Array.isArray(gt))return gt.map((Je,xt)=>{if(typeof Je=="string"){const wt=Je.match(/^(.+?)[\s:-–]+(.+)$/);return wt?{id:xt,concepto:Ll(wt[1],`pareados-concepto-${xt}`),definicion:Ll(wt[2],`pareados-definicion-${xt}`)}:{id:xt,concepto:Ll(Je,`pareados-concepto-simple-${xt}`),definicion:""}}return Je&&typeof Je=="object"?{id:xt,concepto:Ll(Je,`pareados-obj-concepto-${xt}`,"concepto","termino"),definicion:Ll(Je,`pareados-obj-definicion-${xt}`,"definicion","significado")}:{id:xt,concepto:ii(Je,`pareados-fallback-${xt}`),definicion:""}});if(et==="Comprensión de Lectura"){if(gt&&typeof gt=="object"&&!Array.isArray(gt)&&Array.isArray(gt.preguntas))return{texto:Ll(gt,"comprension-texto","texto"),preguntas:gt.preguntas.map((Je,xt)=>({pregunta:Ll(Je,`comprension-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(wt=>ii(wt,`comprension-opcion-${xt}`)):[],respuestaCorrecta:ii(Je.respuestaCorrecta,`comprension-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1}))};if(Array.isArray(gt)){const Je=gt.map((wt,bt)=>Ll(wt,`comprension-bloque-${bt}`,"texto")).join(`

---

`),xt=gt.flatMap(wt=>Array.isArray(wt.preguntas)?wt.preguntas:[]);return{texto:Je,preguntas:xt.map((wt,bt)=>({pregunta:Ll(wt,`comprension-combined-pregunta-${bt}`,"pregunta"),opciones:Array.isArray(wt.opciones)?wt.opciones.map(nr=>ii(nr,`comprension-combined-opcion-${bt}`)):[],respuestaCorrecta:ii(wt.respuestaCorrecta,`comprension-combined-respuesta-${bt}`),puntaje:typeof wt.puntaje=="number"?wt.puntaje:1}))}}}return et==="Quiz"&&Array.isArray(gt)?gt.map((Je,xt)=>({pregunta:Ll(Je,`quiz-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(wt=>ii(wt,`quiz-opcion-${xt}`)):[],respuestaCorrecta:ii(Je.respuestaCorrecta,`quiz-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1})):gt}const Ze=async et=>{var gt;if(et.preventDefault(),!le.contenido.trim()||le.tipos.length===0){B("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),B(null);try{const Je=await Promise.all(H.map(async we=>({nombre:we.name,url:await pOe(we)}))),xt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",bt=new Bs(xt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),nr=Oe();let Yr=await(await(await bt.generateContent(nr)).response).text();Yr=Yr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const Gr=Yr.match(/\{[\s\S]*\}/);if(!Gr)throw new Error("La IA no devolvió JSON válido.");const he=JSON.parse(Gr[0]),Te={};for(const we of le.tipos){const Se=(gt=he.actividades)==null?void 0:gt[we];Te[we]=qe(we,Se)}const Ce={id:"",fechaCreacion:new Date().toISOString(),...le,recursos:{...le.recursos,archivos:Je},introduccion:ii(he.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",generatedContent:Te};U(Ce)}catch(Je){B(`Error al generar la actividad: ${(Je==null?void 0:Je.message)||Je}`)}finally{y(!1)}},lt=async et=>{if(et.preventDefault(),!te.contenido.trim()||!te.objetivosAprendizaje.trim()){B("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),B(null);try{const gt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",xt=new Bs(gt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),wt=Re();let gr=await(await(await xt.generateContent(wt)).response).text();gr=gr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const Kr=gr.match(/\{[\s\S]*\}/);if(!Kr)throw new Error("No se encontró JSON válido en la respuesta.");const Yr=Kr[0].replace(/,(\s*[}\]])/g,"$1"),Gr=JSON.parse(Yr);if(!Gr.preguntas||!Array.isArray(Gr.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const he=(Gr.textos||[]).map((we,Se)=>({id:we.id||Se+1,titulo:ii(we.titulo,`texto-titulo-${Se}`)||`Texto ${Se+1}`,contenido:ii(we.contenido,`texto-contenido-${Se}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(we.tipo)?we.tipo:"informativo",palabras:we.palabras||(we.contenido?String(we.contenido).split(" ").length:0)})),Te=Gr.preguntas.slice(0,30).map((we,Se)=>({numero:we.numero||Se+1,pregunta:ii(we.pregunta,`pregunta-${Se}`)||`Pregunta ${Se+1}`,opciones:Array.isArray(we.opciones)&&we.opciones.length>=4?we.opciones.slice(0,4).map((je,Xe)=>ii(je,`pregunta-opcion-${Se}-${Xe}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(we.respuestaCorrecta)?we.respuestaCorrecta:"A",habilidad:i3.includes(we.habilidad)?we.habilidad:i3[0],justificacion:ii(we.justificacion,`justificacion-${Se}`)||"Justificación no disponible",...we.textoId&&typeof we.textoId=="number"?{textoId:we.textoId}:{}})),Ce={id:"",fechaCreacion:new Date().toISOString(),...te,titulo:ii(Gr.titulo,"prueba-titulo")||`Prueba ${te.asignatura}`,instrucciones:ii(Gr.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:he,preguntas:Te};Y(Ce)}catch(gt){B(`Error al generar la prueba: ${(gt==null?void 0:gt.message)||gt}`)}finally{y(!1)}},mt=async()=>{if(I)try{S(!0),await hOe(I),pe(oe),X([]),p(!1),U(null)}catch(et){console.error("Error al guardar la actividad con archivos:",et),B("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{S(!1)}},It=async()=>{if(R)try{S(!0);const et={...R,cursosDestino:R.cursosDestino||[],estudiantesDestino:R.estudiantesDestino||[],textos:R.textos||[],preguntas:R.preguntas.map(gt=>({...gt,textoId:gt.textoId||null}))};await uOe(et),_e(Be),x(!1),Y(null)}catch(et){console.error("Error al guardar la prueba:",et),B("No se pudo guardar la prueba.")}finally{S(!1)}},Mt=k.useMemo(()=>{var Je,xt,wt;const et=c||d;if(!et||!i.length)return[];const gt=new Map;return!((Je=et.cursosDestino)!=null&&Je.length)&&!((xt=et.estudiantesDestino)!=null&&xt.length)?[]:((wt=et.estudiantesDestino)!=null&&wt.length&&i.filter(bt=>bt.profile===Kt.ESTUDIANTE&&et.estudiantesDestino.includes(bt.nombreCompleto)).forEach(bt=>gt.set(bt.id,bt)),Array.from(gt.values()).sort((bt,nr)=>bt.nombreCompleto.localeCompare(nr.nombreCompleto)))},[c,d,i]),Pt=k.useMemo(()=>{const et=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(gt=>gt.actividadId===et)},[a,c,d]),Qt=k.useMemo(()=>i.filter(et=>et.profile===Kt.ESTUDIANTE).sort((et,gt)=>et.nombreCompleto.localeCompare(gt.nombreCompleto)),[i]),yt=k.useMemo(()=>P.trim()?Qt.filter(et=>et.nombreCompleto.toLowerCase().includes(P.toLowerCase())):Qt,[Qt,P]),kr=k.useMemo(()=>{const et=new Set;return e.forEach(gt=>{(gt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(wt=>wt.profile===Kt.ESTUDIANTE&&wt.nombreCompleto===Je);xt&&et.add(xt.id)})}),r.forEach(gt=>{(gt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(wt=>wt.profile===Kt.ESTUDIANTE&&wt.nombreCompleto===Je);xt&&et.add(xt.id)})}),a.forEach(gt=>et.add(gt.estudianteId)),i.filter(gt=>gt.profile===Kt.ESTUDIANTE&&et.has(gt.id)).sort((gt,Je)=>gt.nombreCompleto.localeCompare(Je.nombreCompleto))},[e,r,a,i]),er=k.useMemo(()=>i.find(et=>et.id===q)||null,[i,q]),an=k.useMemo(()=>{if(!er)return{asignadas:[],respuestas:[]};const et=[...e.filter(Je=>(Je.estudiantesDestino||[]).includes(er.nombreCompleto)).map(Je=>({tipo:"Actividad",item:Je})),...r.filter(Je=>(Je.estudiantesDestino||[]).includes(er.nombreCompleto)).map(Je=>({tipo:"Prueba",item:Je}))],gt=a.filter(Je=>Je.estudianteId===er.id);return{asignadas:et,respuestas:gt}},[er,e,r,a]),_r=()=>l.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas"].map(et=>l.jsxs("button",{onClick:()=>{z(et),u(null),f(null),ne(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${V===et?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[et==="carpetas"&&l.jsx(uQ,{size:18}),et==="actividades"&&l.jsx(Zf,{size:18}),et==="pruebas"&&l.jsx(Ube,{size:18}),et==="carpetas"?"Carpetas de Estudiantes":et==="actividades"?"Actividades Remotas":"Pruebas Estandarizadas"]},et)),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(ww,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:P,onChange:et=>D(et.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),V==="actividades"&&!I&&!c&&l.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[l.jsx(Xx,{size:18})," Nueva"]}),V==="pruebas"&&!R&&!d&&l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[l.jsx(Xx,{size:18})," Nueva"]})]})]}),Vr=()=>{const et=P?yt:kr;return et.length?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:et.map(gt=>{const Je=a.filter(bt=>bt.estudianteId===gt.id),xt=Je.length,wt=e.filter(bt=>(bt.estudiantesDestino||[]).includes(gt.nombreCompleto)).length+r.filter(bt=>(bt.estudiantesDestino||[]).includes(gt.nombreCompleto)).length;return l.jsxs("button",{onClick:()=>ne(gt.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[l.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:l.jsx(uQ,{})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"font-semibold text-slate-800 truncate",children:gt.nombreCompleto}),l.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[l.jsx(Ew,{size:14})," ",gt.curso||"—"]})]})]}),l.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:wt}),l.jsx("p",{className:"text-xs",children:"Asignadas"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:xt}),l.jsx("p",{className:"text-xs",children:"Entregas"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(M0,{size:16,className:"opacity-70"}),l.jsx("span",{className:"text-xs mt-1",children:Je.length?Hb(Je.sort((bt,nr)=>(bt.fechaCompletado||"").localeCompare(nr.fechaCompletado||"")).slice(-1)[0].fechaCompletado):"—"})]})]})]},gt.id)})}):l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados aún."})},jn=()=>{if(!er)return null;const{asignadas:et,respuestas:gt}=an;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsxs("button",{onClick:()=>ne(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[l.jsx(pC,{size:18})," Volver"]}),l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial — ",er.nombreCompleto]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Título / Asignatura"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:et.map(({tipo:Je,item:xt})=>{var gr;const wt=gt.find(Kr=>Kr.actividadId===xt.id),bt=Je==="Actividad"?`${xt.asignatura} — ${(gr=xt.tipos)==null?void 0:gr.join(", ")}`:xt.titulo,nr=xt.plazoEntrega?Hb(xt.plazoEntrega):"—";return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm",children:Je}),l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:l.jsx(Ia,{content:bt,context:"hist-titulo"})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:nr}),l.jsx("td",{className:"px-4 py-3 text-sm",children:wt?l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[l.jsx(yd,{size:14})," Completado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[l.jsx(M0,{size:14})," Pendiente"]})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:wt?`${wt.puntaje}/${wt.puntajeMaximo}`:"—"}),l.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:wt?wt.nota:"—"})]},xt.id)})})]})})]})},Or=()=>{var et,gt,Je;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?l.jsxs(l.Fragment,{children:[l.jsx(Ia,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):l.jsx(Ia,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",Hb((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),l.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(pC,{size:18})," Volver al listado"]})]}),l.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((et=c==null?void 0:c.tipos)==null?void 0:et.includes("Desarrollo"))&&l.jsx("th",{className:"px-4 py-3"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Mt.map(xt=>{var bt;const wt=Pt.find(nr=>nr.estudianteId===xt.id);return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:xt.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:wt?l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:wt?`${wt.puntaje}/${wt.puntajeMaximo}`:"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:wt?l.jsx("span",{className:parseFloat(wt.nota)>=4?"text-green-600":"text-red-600",children:wt.nota}):"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:wt?mOe(wt.fechaCompletado):"-"}),((bt=c==null?void 0:c.tipos)==null?void 0:bt.includes("Desarrollo"))&&l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:wt?l.jsx("button",{onClick:()=>{var gr,Kr,Yr;W(wt);const nr=Array.from({length:((Kr=(gr=c.generatedContent)==null?void 0:gr.Desarrollo)==null?void 0:Kr.length)||0},(Gr,he)=>({index:he,puntaje:0,observacion:""}));re(nr),ce(((Yr=wt==null?void 0:wt.revisionDocente)==null?void 0:Yr.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):l.jsx("span",{className:"text-slate-400",children:"-"})})]},xt.id)})})]})})]}),M&&((gt=c==null?void 0:c.tipos)==null?void 0:gt.includes("Desarrollo"))&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(M==null?void 0:M.estudianteNombre)||""]}),l.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Je=c.generatedContent)==null?void 0:Je.Desarrollo)||[]).map((xt,wt)=>{var bt,nr;return l.jsxs("div",{className:"p-3 border rounded-lg",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`revision-pregunta-${wt}`})]}),xt.rubrica&&l.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[l.jsx("strong",{children:"Rúbrica:"})," ",l.jsx(Ia,{content:xt.rubrica,context:`revision-rubrica-${wt}`})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),l.jsx("input",{type:"number",min:0,step:.5,value:((bt=Z[wt])==null?void 0:bt.puntaje)??0,onChange:gr=>{const Kr=Number(gr.target.value)||0;re(Yr=>{const Gr=[...Yr];return Gr[wt]={...Gr[wt]||{index:wt,puntaje:0},puntaje:Kr},Gr})},className:"w-24 border-slate-300 rounded-md"}),l.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((nr=Z[wt])==null?void 0:nr.observacion)||"",onChange:gr=>{const Kr=gr.target.value;re(Yr=>{const Gr=[...Yr];return Gr[wt]={...Gr[wt]||{index:wt,puntaje:0},observacion:Kr},Gr})},className:"flex-1 border-slate-300 rounded-md"})]})]},wt)})}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),l.jsx("textarea",{rows:3,value:ae,onChange:xt=>ce(xt.target.value),className:"w-full border-slate-300 rounded-md"})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>{W(null),re([]),ce("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:async()=>{if(M)try{N(!0);const xt=Number(M.puntaje)||0,wt=Number(M.puntajeMaximo)||0,bt=(Z||[]).reduce((Kr,Yr)=>Kr+(Number(Yr.puntaje)||0),0),nr=xt+bt,gr=AOe(nr,wt);await dOe(M.id,{puntaje:nr,puntajeMaximo:wt,nota:gr,revisionDocente:{completada:!0,observacionesGenerales:ae||"",detalle:Z||[],puntajeDocente:bt}}),W(null),re([]),ce("")}catch(xt){console.error("Error guardando revisión:",xt),B("No se pudo guardar la revisión del docente.")}finally{N(!1)}},disabled:j,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:j?"Guardando...":"Guardar Revisión"})]})]})})]})},As=()=>{var et,gt;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),l.jsxs("button",{onClick:()=>p(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(pC,{size:18})," Volver"]})]}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),l.jsxs("form",{onSubmit:Ze,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:le.asignatura,onChange:De,className:"w-full border-slate-300 rounded-md shadow-sm",children:Ki.map(Je=>l.jsx("option",{value:Je,children:Je},Je))})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),l.jsx("textarea",{name:"instrucciones",value:(et=le.recursos)==null?void 0:et.instrucciones,onChange:fe,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),l.jsx("textarea",{name:"enlaces",value:(gt=le.recursos)==null?void 0:gt.enlaces,onChange:fe,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),l.jsx("input",{type:"file",multiple:!0,onChange:Ie,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),l.jsxs("div",{children:[l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:P,onChange:Je=>D(Je.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(P?yt:Qt).map(Je=>{var xt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(xt=le.estudiantesDestino)==null?void 0:xt.includes(Je.nombreCompleto),onChange:()=>ye(Je.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Je.nombreCompleto,children:Je.nombreCompleto})]},Je.id)})})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenido",value:le.contenido,onChange:De,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:le.plazoEntrega,onChange:De,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),l.jsx("div",{className:"space-y-3",children:obe.map(Je=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:le.tipos.includes(Je),onChange:()=>Ue(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Je})]}),le.tipos.includes(Je)&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),s3[Je].map(xt=>l.jsx("button",{type:"button",onClick:()=>Ye(Je,xt),className:`px-3 py-1 rounded-full font-semibold text-xs ${le.cantidadPreguntas[Je]===xt?"bg-amber-500 text-white":"bg-slate-200"}`,children:xt},xt))]})]},Je))})]})]}),_&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:_}),l.jsx("div",{className:"pt-2 text-right",children:l.jsxs("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[b?l.jsx(M0,{className:"animate-spin",size:18}):null,b?"Generando...":"Generar y Previsualizar"]})})]})]})},hn=()=>{var et;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),l.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:I==null?void 0:I.introduccion,context:"preview-introduccion"})})]}),(I==null?void 0:I.recursos)&&(I.recursos.instrucciones||I.recursos.enlaces||((et=I.recursos.archivos)==null?void 0:et.length))&&l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),l.jsxs("div",{className:"space-y-3",children:[I.recursos.instrucciones&&l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:I.recursos.instrucciones,context:"preview-instrucciones"})}),I.recursos.enlaces&&l.jsx("div",{children:I.recursos.enlaces.split(`
`).map((gt,Je)=>gt.trim()&&l.jsx("a",{href:gt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:gt},Je))}),I.recursos.archivos&&I.recursos.archivos.length>0&&l.jsx("ul",{className:"list-disc list-inside",children:I.recursos.archivos.map(gt=>l.jsx("li",{className:"text-slate-700",children:gt.nombre},gt.nombre))})]})]}),I==null?void 0:I.tipos.map(gt=>{const Je=I.generatedContent[gt];return Je?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:gt}),l.jsxs("div",{className:"space-y-4 text-sm",children:[gt==="Quiz"&&Array.isArray(Je)&&Je.map((xt,wt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`preview-quiz-pregunta-${wt}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,nr)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",l.jsx(Ia,{content:bt,context:`preview-quiz-opcion-${wt}-${nr}`})]},nr))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(Ia,{content:xt.respuestaCorrecta,context:`preview-quiz-respuesta-${wt}`})]})]},wt)),gt==="Comprensión de Lectura"&&Je&&typeof Je=="object"&&"preguntas"in Je&&Array.isArray(Je.preguntas)&&l.jsxs("div",{children:[l.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:l.jsx(Ia,{content:Je.texto,context:"preview-lectura-texto"})}),Je.preguntas.map((xt,wt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`preview-lectura-pregunta-${wt}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,nr)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",l.jsx(Ia,{content:bt,context:`preview-lectura-opcion-${wt}-${nr}`})]},nr))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(Ia,{content:xt.respuestaCorrecta,context:`preview-lectura-respuesta-${wt}`})]})]},wt))]}),gt==="Términos Pareados"&&Array.isArray(Je)&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border border-slate-200",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),l.jsx("tbody",{children:Je.map((xt,wt)=>l.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[l.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:l.jsx(Ia,{content:xt.concepto,context:`preview-pareado-concepto-${wt}`})}),l.jsx("td",{className:"p-2 align-top text-slate-700",children:l.jsx(Ia,{content:xt.definicion,context:`preview-pareado-definicion-${wt}`})})]},xt.id))})]})}),gt==="Desarrollo"&&Array.isArray(Je)&&Je.map((xt,wt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`preview-desarrollo-pregunta-${wt}`})]}),l.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[l.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",l.jsx(Ia,{content:xt.rubrica,context:`preview-desarrollo-rubrica-${wt}`})]})]},wt))]})]},gt):null})]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>U(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:mt,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},oa=()=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify_between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),l.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(pC,{size:18})," Volver"]})]}),l.jsxs("form",{onSubmit:lt,className:"space-y-6 mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:te.asignatura,onChange:Ne,className:"w-full border-slate-300 rounded-md shadow-sm",children:Ki.map(et=>l.jsx("option",{value:et,children:et},et))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),l.jsx("textarea",{name:"objetivosAprendizaje",value:te.objetivosAprendizaje,onChange:Ne,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),l.jsx("textarea",{name:"contenido",value:te.contenido,onChange:Ne,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:te.plazoEntrega,onChange:Ne,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),l.jsxs("div",{children:[l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:P,onChange:et=>D(et.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(P?yt:Qt).map(et=>{var gt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(gt=te.estudiantesDestino)==null?void 0:gt.includes(et.nombreCompleto),onChange:()=>ye(et.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:et.nombreCompleto,children:et.nombreCompleto})]},et.id)})})]})]})]}),_&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:_}),l.jsx("div",{className:"text-right",children:l.jsxs("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[b?l.jsx(M0,{className:"animate-spin",size:18}):null,b?"Generando...":"Generar y Previsualizar"]})})]})]}),Ba=()=>{var et,gt;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),l.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:l.jsx(Ia,{content:R==null?void 0:R.titulo,context:"preview-prueba-titulo"})}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:R==null?void 0:R.instrucciones,context:"preview-prueba-instrucciones"})})]}),(et=R==null?void 0:R.textos)!=null&&et.length?l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),l.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:R.textos.map((Je,xt)=>l.jsxs("li",{children:[l.jsxs("p",{className:"font-semibold",children:[l.jsx(Ia,{content:Je.titulo,context:`preview-texto-titulo-${xt}`}),l.jsxs("span",{className:"text-xs text-slate-500",children:["(",Je.tipo,")"]})]}),l.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:l.jsx(Ia,{content:Je.contenido,context:`preview-texto-contenido-${xt}`})})]},Je.id))})]}):null,(gt=R==null?void 0:R.preguntas)!=null&&gt.length?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),R.preguntas.slice(0,10).map((Je,xt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[Je.numero,". ",l.jsx(Ia,{content:Je.pregunta,context:`preview-pregunta-texto-${xt}`})]}),l.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Je.opciones.map((wt,bt)=>l.jsx("li",{children:l.jsx(Ia,{content:wt,context:`preview-pregunta-opcion-${xt}-${bt}`})},bt))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Je.respuestaCorrecta]})]},Je.numero))]}):null]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>Y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:It,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},en=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),l.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[l.jsx(Xx,{size:18})," Crear Nueva"]})]}),l.jsx("div",{className:"space-y-4",children:e.length>0?e.map(et=>{var xt;const gt=[];(xt=et.estudiantesDestino)!=null&&xt.length&&gt.push(`Estudiantes: ${et.estudiantesDestino.length}`);const Je=gt.length?gt.join(" | "):"Estudiantes seleccionados";return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(Ia,{content:et.asignatura,context:`lista-asignatura-${et.id}`})," — ",et.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Je," | Creado: ",Hb(et.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>u(et),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},et.id)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),mr=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[l.jsx(Xx,{size:18})," Crear Nueva"]})]}),l.jsx("div",{className:"space-y-4",children:r.length>0?r.map(et=>l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800",children:l.jsx(Ia,{content:et.titulo,context:`lista-prueba-titulo-${et.id}`})}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",Hb(et.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>f(et),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},et.id)):l.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return F?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"animate-fade-in",children:[_r(),q?jn():R?Ba():I?hn():c||d?Or():V==="pruebas"?g?oa():mr():V==="actividades"?h?As():en():Vr()]})},xOe="actividades_remotas",uR="respuestas_actividades",gne=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},DV=e=>{const t=gne(e);return t?t.toISOString():void 0},vOe=e=>{const t=gne(e);return t?t.toISOString().split("T")[0]:void 0},dR=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:DV(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:vOe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:DV(t.fechaCompletado)||t.fechaCompletado}},qv=(e,t)=>{var n,a;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},bOe=e=>new Promise(t=>setTimeout(t,e)),yOe=async(e,t=3,r="operación")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(`⚠️ Intento ${n} falló en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(`⏱️ Reintentando en ${s}ms...`),await bOe(s)}else throw a}throw new Error("Max retries exceeded")},wOe=(e,t,r)=>{console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const n=Wt(Tt(pt,xOe),Tr("fechaCreacion","desc"));return pr(n,{next:s=>{try{console.log("📋 Actividades recibidas desde Firestore:",s.docs.length);const o=s.docs.map(c=>dR(c)).filter(c=>{var u,d,f,h,p;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(p=c.estudiantesDestino)!=null&&p.includes(e.nombreCompleto))});console.log("✅ Actividades filtradas para el estudiante:",o.length),t(o)}catch(i){console.error("❌ Error procesando datos de actividades:",i);const o=qv(i,"procesamiento de actividades");r==null||r(o)}},error:s=>{const i=qv(s,"suscripción a actividades");r==null||r(i)}})},EOe=(e,t,r)=>{console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const n=Wt(Tt(pt,uR),nn("estudianteId","==",e),Tr("fechaCompletado","desc"));return pr(n,{next:s=>{try{console.log("📝 Respuestas recibidas desde Firestore:",s.docs.length);const i=s.docs.map(o=>{var u;const c=dR(o);return console.log(`📄 Respuesta ${o.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log("✅ Enviando respuestas procesadas al componente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas:",i);const o=qv(i,"procesamiento de respuestas");r==null||r(o)}},error:s=>{var o;const i=qv(s,"suscripción a respuestas");if(s.code==="failed-precondition"&&((o=s.message)!=null&&o.includes("requires an index")))return console.log("⚠️ Error de índice detectado, intentando consulta alternativa..."),COe(e,t,r);r==null||r(i)}})},COe=(e,t,r)=>{console.log("🔄 Usando consulta alternativa sin ordenamiento...");const n=Wt(Tt(pt,uR),nn("estudianteId","==",e));return pr(n,{next:s=>{try{console.log("📝 Respuestas recibidas (consulta alternativa):",s.docs.length);const i=s.docs.map(o=>dR(o)).sort((o,c)=>new Date(c.fechaCompletado).getTime()-new Date(o.fechaCompletado).getTime());console.log("✅ Respuestas ordenadas manualmente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas (alternativa):",i);const o=qv(i,"procesamiento de respuestas alternativo");r==null||r(o)}},error:s=>{const i=qv(s,"suscripción alternativa a respuestas");r==null||r(i)}})},_Oe=async e=>yOe(async()=>{console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:ir.fromDate(new Date(e.fechaCompletado))},r=await Ln(Tt(pt,uR),t);return console.log("✅ Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),SOe=.6,NOe=(e,t,r=SOe,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},tF=({className:e="w-5 h-5"})=>l.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),kOe=async(e,t,r=3)=>{var i;const n="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",s=new Bs(n).getGenerativeModel({model:"gemini-1.5-flash-latest"});for(let o=1;o<=r;o++)try{console.log(`🤖 Intento ${o} de generar feedback con IA`);const c=TOe(e,t);let f=(await(await s.generateContent(c)).response).text().trim();f=f.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const h=f.match(/\{[\s\S]*\}$/);try{const p=JSON.parse(h?h[0]:f);return console.log(`✅ Feedback generado exitosamente en intento ${o}`),p}catch(p){throw console.warn(`⚠️ Error al parsear JSON en intento ${o}:`,p),new Error("JSON parsing failed")}}catch(c){if(console.log(`❌ Error en intento ${o}:`,c.message),(i=c.message)!=null&&i.includes("503")&&o<r){const u=Math.pow(2,o)*1e3;console.log(`⏱️ Esperando ${u}ms antes del siguiente intento...`),await new Promise(d=>setTimeout(d,u));continue}if(o===r)return console.log("🚫 Todos los intentos fallaron. Procediendo sin IA."),null}return null},BOe=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const n=await _Oe(e);console.log("✅ Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await kOe(t,r);if(s){const{updateDoc:i,doc:o}=await Hv(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>mve);return{updateDoc:u,doc:d}},void 0),{db:c}=await Hv(async()=>{const{db:u}=await Promise.resolve().then(()=>KZ);return{db:u}},void 0);return await i(o(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log("🤖 Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error("❌ Error crítico al guardar respuesta:",n),n}},xo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},Vs=(e,t)=>{if(t&&xo(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>Vs(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Cd=(e,t,...r)=>{if(xo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=Vs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=Vs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},ci=({content:e,context:t="unknown"})=>{try{const r=Vs(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}};function PV(e){if(console.log("🔍 Normalizando lectura:",e),xo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{xo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,i)=>Vs(s,`opcion-${n}-${i}`)).filter(Boolean):[];return{pregunta:Cd(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:Vs(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Cd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>Cd(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(xo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function RV(e){return console.log("🔍 Normalizando pareados:",e),xo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(xo(t,`pareado-${r}`),{izquierda:Cd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Cd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(xo(t,`pareado-array-${r}`),{izquierda:Cd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Cd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function LV(e){return console.log("🔍 Normalizando desarrollo:",e),xo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(xo(t,`desarrollo-pregunta-${r}`),{enunciado:Cd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(xo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Cd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const TOe=(e,t)=>{const r=t.items.filter(i=>i.esCorrecta===!1),n=t.items.filter(i=>i.tipo==="Desarrollo"),a=r.map(i=>`- Pregunta: "${Vs(i.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${Vs(i.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${Vs(i.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),s=n.map(i=>`- Pregunta abierta: "${Vs(i.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${Vs(i.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedagógico. Actividad de "${Vs(e.asignatura,"feedback-prompt-asignatura")}" sobre "${Vs(e.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 párrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "≤50 palabras, por qué la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "≤60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${a||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${s||"- Sin preguntas de desarrollo."}
`.trim()},jOe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=k.useState({}),[s,i]=k.useState(!1),o=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{i(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(p=>{const g=e.generatedContent[p],x=n[p];if(console.log(`🔍 Procesando tipo: ${p}`,g),xo(g,`handleSubmit-${p}`),!!g){if((p==="Quiz"||p==="Comprensión de Lectura")&&(p==="Quiz"?Array.isArray(g)?g.map((y,w)=>(xo(y,`quiz-question-${w}`),{pregunta:Cd(y,`quiz-pregunta-${w}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((S,j)=>Vs(S,`quiz-opcion-${w}-${j}`)):[],respuestaCorrecta:Vs(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${w}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:PV(g).preguntas).forEach((y,w)=>{const S=x==null?void 0:x[w],j=S===y.respuestaCorrecta,N=y.puntaje??1;j&&(u+=N),d+=N,f.items.push({pregunta:y.pregunta,respuestaUsuario:Vs(S,`feedback-respuesta-${w}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:j,puntajeObtenido:j?N:0,tipo:p})}),p==="Términos Pareados"){const b=RV(g),y=x||{};b.forEach((w,S)=>{const j=y[S],N=j===w.derecha,F=w.puntaje??1;N&&(u+=F),d+=F,f.items.push({pregunta:`${w.izquierda} → ¿?`,respuestaUsuario:Vs(j,`pareado-feedback-${S}`)||"No respondida",respuestaCorrecta:w.derecha,esCorrecta:N,puntajeObtenido:N?F:0,tipo:p})})}if(p==="Desarrollo"){const b=LV(g),y=x||{};b.forEach((w,S)=>{const j=Vs(y[S],`desarrollo-feedback-${S}`).trim();f.items.push({pregunta:w.enunciado,respuestaUsuario:j||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:p})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:NOe(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:l.jsx(ci,{content:e.asignatura,context:"actividad-asignatura"})}),l.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(ci,{content:e.introduccion,context:"actividad-introduccion"})})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),xo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,p)=>(xo(h,`render-quiz-question-${p}`),{pregunta:Cd(h,`render-quiz-pregunta-${p}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>Vs(g,`render-quiz-opcion-${p}-${x}`)):[],respuestaCorrecta:Vs(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${p}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),l.jsx("div",{className:"space-y-6",children:f.map((h,p)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",l.jsx(ci,{content:h.pregunta,context:`quiz-pregunta-${p}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var b;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(ci,{content:g,context:`quiz-opcion-${p}-${x}`})})]},x)})})]},p))})]},u)}case"Comprensión de Lectura":{const f=PV(d);return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),l.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:l.jsx(ci,{content:f.texto,context:"lectura-texto"})}),l.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,p)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",l.jsx(ci,{content:h.pregunta,context:`lectura-pregunta-${p}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var b;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(ci,{content:g,context:`lectura-opcion-${p}-${x}`})})]},x)})})]},p))})]},u)}case"Términos Pareados":{const f=RV(d),h=n[u]||{},p=[...new Set(f.map(g=>g.derecha))];for(let g=p.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[p[g],p[x]]=[p[x],p[g]]}return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>l.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[l.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",l.jsx(ci,{content:g.izquierda,context:`pareado-izq-${x}`})]}),l.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:b=>o(u,{...h,[x]:b.target.value}),children:[l.jsx("option",{value:"",children:"— Selecciona la pareja —"}),p.map((b,y)=>l.jsx("option",{value:b,children:Vs(b,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=LV(d),h=n[u]||{};return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),l.jsx("div",{className:"space-y-6",children:f.map((p,g)=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",l.jsx(ci,{content:p.enunciado,context:`desarrollo-enunciado-${g}`})]}),l.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:x=>o(u,{...h,[g]:x.target.value})})]},g))}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),l.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:l.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?l.jsx(tF,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},IOe=({currentUser:e})=>{var B,P,D;const[t,r]=k.useState(!0),[n,a]=k.useState("list"),[s,i]=k.useState(!1),[o,c]=k.useState([]),[u,d]=k.useState([]),[f,h]=k.useState(null),[p,g]=k.useState(null),[x,b]=k.useState(null),[y,w]=k.useState("connecting");k.useEffect(()=>{console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let I=!1,U=!1,R=!1,Y=!1;const H=()=>{(I||R)&&(U||Y)&&(R&&Y?(w("error"),b("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):w("connected"),r(!1),console.log("✅ Carga completada - Actividades:",I,"Respuestas:",U))},X=wOe(e,z=>{console.log("📋 Actividades recibidas:",z.length),z.forEach((q,ne)=>{console.log(`  ${ne+1}. ${q.asignatura} (ID: ${q.id})`),xo(q,`actividad-${ne}`)}),c(z),I=!0,H()},z=>{console.error("❌ Error en suscripción de actividades:",z),R=!0,H()}),V=EOe(e.id,z=>{console.log("📝 Respuestas del estudiante recibidas:",z.length),z.forEach((q,ne)=>{var M;console.log(`  ${ne+1}. Actividad ${q.actividadId} - Nota: ${q.nota} - Fecha: ${q.fechaCompletado}`),(M=q.revisionDocente)!=null&&M.completada&&console.log("    ✅ Con revisión docente completada"),xo(q,`respuesta-${ne}`)}),d(z),U=!0,H()},z=>{var q;console.error("❌ Error en suscripción de respuestas:",z),(q=z.message)!=null&&q.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),b("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),Y=!0,H()});return()=>{console.log("🧹 Limpiando subscripciones"),X==null||X(),V==null||V()}},[e]),k.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:o.length,respuestas:u.length,vista:n,conexion:y})},[o.length,u.length,n,y,t]);const S=I=>{console.log("🔍 Iniciando actividad:",I.asignatura),h(I),a("activity"),b(null)},j=I=>{console.log("🔍 Viendo resultado:",I.actividadId);const U=o.find(R=>R.id===I.actividadId);U?(h(U),g(I),a("result"),b(null)):b("No se pudieron cargar los detalles de esta actividad completada.")},N=k.useCallback(async(I,U)=>{if(!f)return;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:f.id,estudianteId:e.id,puntaje:I.puntaje,nota:I.nota}),a("result"),i(!0),b(null);const R={actividadId:f.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...I,retroalimentacionDetallada:U};console.log("💾 Guardando respuesta...");try{const Y=await BOe(R,f,U);console.log("✅ Respuesta completada con ID:",Y.id),g(Y),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(Y){console.error("❌ Error crítico al completar actividad:",Y),b("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),g({id:"error-temp",...R,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{i(!1)}},[f,e.id]),F=k.useMemo(()=>{if(u.length===0)return new Set;const I=new Set(u.map(U=>U.actividadId));return console.log("🎯 IDs completados calculados:",I.size),I},[u]),E=k.useMemo(()=>{if(o.length===0)return[];const I=o.filter(U=>!F.has(U.id));return console.log("⏳ Actividades pendientes:",I.length),I},[o,F]),_=k.useMemo(()=>{if(u.length===0)return[];const I=u.map(U=>{const R=o.find(Y=>Y.id===U.actividadId);return{...U,asignatura:(R==null?void 0:R.asignatura)||"Actividad no disponible",tipos:(R==null?void 0:R.tipos)||[]}}).sort((U,R)=>new Date(R.fechaCompletado).getTime()-new Date(U.fechaCompletado).getTime());return console.log("📖 Historial preparado:",I.length),I},[u,o]);return t?l.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[l.jsx(tF,{className:"w-8 h-8 text-slate-500"}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),l.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",y==="connecting"?"Conectando...":y==="connected"?"Conectado":"Error de conexión"]})]})]}):y==="error"&&o.length===0&&u.length===0?l.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[l.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),l.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&f?l.jsx(jOe,{actividad:f,onComplete:N,currentUser:e}):n==="result"&&p?(console.log("🔍 Renderizando resultado:",p),l.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),l.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",l.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[p.puntaje," / ",p.puntajeMaximo]})]}),l.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",l.jsx("span",{className:`font-bold text-2xl ${parseFloat(p.nota)>=4?"text-green-600":"text-red-600"}`,children:p.nota})]})]}),x&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",x]})}),s&&l.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[l.jsx(tF,{className:"w-8 h-8 text-blue-500"}),l.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),l.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),p.retroalimentacionAI&&!s&&l.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),l.jsx("p",{className:"text-slate-700 mt-1",children:l.jsx(ci,{content:p.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((B=p.retroalimentacionAI.desafios)==null?void 0:B.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),l.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.desafios.map((I,U)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(ci,{content:I.pregunta,context:`feedback-desafio-pregunta-${U}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(ci,{content:I.explicacionDelError,context:`feedback-desafio-explicacion-${U}`})})]},U))})]}),((D=(P=p.retroalimentacionAI)==null?void 0:P.comentariosDesarrollo)==null?void 0:D.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),l.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.comentariosDesarrollo.map((I,U)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(ci,{content:I.pregunta,context:`feedback-desarrollo-pregunta-${U}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(ci,{content:I.retroalimentacionBreve,context:`feedback-desarrollo-retro-${U}`})})]},U))})]})]}),p.retroalimentacionDetallada&&l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),p.retroalimentacionDetallada.items.map((I,U)=>{const R=I.esCorrecta===null,Y=R?"border-slate-400 bg-slate-50":I.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",H=R?"🕓":I.esCorrecta?"✅":"❌";return l.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${Y}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[U+1,". ",l.jsx(ci,{content:I.pregunta,context:`feedback-item-pregunta-${U}`})]}),l.jsx("span",{className:"font-bold text-lg",children:H})]}),l.jsxs("div",{className:"mt-2 text-sm pl-4",children:[l.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",l.jsx("span",{className:"font-medium",children:l.jsx(ci,{content:I.respuestaUsuario,context:`feedback-item-respuesta-${U}`})})]}),!R&&!I.esCorrecta&&l.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",l.jsx("span",{className:"font-medium text-green-700",children:l.jsx(ci,{content:I.respuestaCorrecta,context:`feedback-item-correcta-${U}`})})]}),R&&l.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},U)})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>{a("list"),h(null),g(null),b(null)},className:"flex-1 bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"}),f&&l.jsx("button",{onClick:()=>{a("activity"),g(null),b(null)},className:"flex-1 bg-amber-600 text-white font-bold py-3 rounded-lg hover:bg-amber-700 transition-colors",children:"Repetir Actividad"})]})]})):l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[x&&l.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:l.jsxs("p",{className:"text-amber-800",children:["⚠️ ",x]})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),l.jsx("div",{className:"space-y-4",children:E.length>0?E.map(I=>l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(ci,{content:I.asignatura,context:`actividad-asignatura-${I.id}`})," - ",I.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",l.jsx(ci,{content:typeof I.plazoEntrega=="string"?I.plazoEntrega:"",context:`actividad-plazo-${I.id}`})]})]}),l.jsx("button",{onClick:()=>S(I),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},I.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),l.jsx("div",{className:"space-y-4",children:_.length>0?_.map(I=>l.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(ci,{content:I.asignatura,context:`completada-asignatura-${I.id}`})," - ",I.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(I.fechaCompletado).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",l.jsx("span",{className:`font-bold text-lg ${parseFloat(I.nota)>=4?"text-green-600":"text-red-600"}`,children:I.nota})]}),l.jsx("button",{onClick:()=>j(I),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},I.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]})]})},B4="estudiantes_inclusion",FOe="usuarios",xne=e=>{const t=e.data();return{id:e.id,...t}},OOe=e=>{const t=Wt(Tt(pt,B4));return pr(t,n=>{const a=n.docs.map(s=>xne(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},DOe=e=>{const t=Wt(Tt(pt,FOe));return pr(t,n=>{const a=n.docs.map(s=>xne(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},POe=async e=>{try{return(await Ln(Tt(pt,B4),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},ROe=async(e,t)=>{try{const{id:r,...n}=t,a=dr(pt,B4,e);await Yi(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},LOe=async e=>{try{const t=dr(pt,B4,e);await Za(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},MOe=({estudiantes:e})=>{const t=k.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=k.useMemo(()=>{const o=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(o).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=k.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=k.useMemo(()=>{const o=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(o/e.length).toFixed(1):"0";return{total:o,promedio:c}},[e]),s=k.useMemo(()=>e.reduce((o,c)=>o+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(o=>o.cantidad),...r.map(o=>o.cantidad),...n.map(o=>o.cantidad));return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),l.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),l.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),l.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),l.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),l.jsx("div",{className:"space-y-2",children:t.map(({curso:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),l.jsx("div",{className:"space-y-2",children:r.map(({nivel:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[o,"°"]}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),l.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:o,children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]})]})]})},MV=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=k.useState(""),[a,s]=k.useState(""),[i,o]=k.useState(!1),c=k.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),p=a===""||f.curso===a;return h&&p}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=k.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),o(!1)};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),l.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),o(f.target.value.length>0||a!=="")},onFocus:()=>o(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),l.jsxs("select",{value:a,onChange:f=>{s(f.target.value),o(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>l.jsx("option",{value:f,children:f},f))]})]})]}),l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),l.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),l.jsx("button",{onClick:()=>o(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),i&&l.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?l.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):l.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>l.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),l.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&c.length===1&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),l.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},UOe=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=k.useState(HS[0]),s=()=>r(e,n);return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),l.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:HS.map(i=>l.jsx("option",{value:i,children:i},i))})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},QOe=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=k.useState("intervenciones"),[o,c]=k.useState(e);k.useEffect(()=>c(e),[e]);const[u,d]=k.useState(null),f={responsable:"",accion:"",observaciones:""},[h,p]=k.useState(f),[g,x]=k.useState({trimestre:"T1",meta:""}),[b,y]=k.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,S]=k.useState(null),[j,N]=k.useState(!1),F={motivo:"",acuerdos:"",asistentes:""},[E,_]=k.useState(F),B=()=>{r(o),t()},P=async()=>{var Ne;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let te,_e=!1;u?te=(o.intervenciones||[]).map(fe=>fe.id===u.id?{...fe,...h}:fe):(_e=!0,te=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...o.intervenciones||[]]);const De=te.sort((fe,Ie)=>new Date(Ie.fecha).getTime()-new Date(fe.fecha).getTime());if(c(fe=>({...fe,intervenciones:De})),_e)try{await xwe({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(Ne=a?a(h.responsable):void 0)==null?void 0:Ne.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${o.nombre}. Acción: ${h.accion}`,estudianteNombre:o.nombre,estudianteId:o.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(fe){console.error("Error al crear notificación:",fe),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}p(f),d(null)},D=te=>{d(te),p({responsable:te.responsable,accion:te.accion,observaciones:te.observaciones})},I=te=>{window.confirm("¿Eliminar esta intervención?")&&c(_e=>({..._e,intervenciones:(_e.intervenciones||[]).filter(De=>De.id!==te)}))},U=te=>{const{name:_e,value:De}=te.target;c(Ne=>({...Ne,[_e]:De,fechaActualizacionApoyos:new Date().toISOString()}))},R=()=>{if(!g.meta.trim())return;const te={...g,id:crypto.randomUUID(),cumplida:!1};c(_e=>({..._e,metasProgreso:[..._e.metasProgreso||[],te]})),x({trimestre:"T1",meta:""})},Y=te=>{c(_e=>({..._e,metasProgreso:(_e.metasProgreso||[]).map(De=>De.id===te?{...De,cumplida:!De.cumplida}:De)}))},H=te=>{c(_e=>({..._e,metasProgreso:(_e.metasProgreso||[]).filter(De=>De.id!==te)}))},X=k.useMemo(()=>{const te=o.metasProgreso||[];if(te.length===0)return{percent:0,color:"bg-slate-300"};const _e=te.filter(fe=>fe.cumplida).length,De=Math.round(_e/te.length*100),Ne=De<40?"bg-red-500":De<75?"bg-yellow-500":"bg-green-500";return{percent:De,color:Ne}},[o.metasProgreso]),V=k.useMemo(()=>{if(!o.fechaActualizacionApoyos)return!0;const te=new Date(o.fechaActualizacionApoyos),_e=new Date;return _e.setMonth(_e.getMonth()-3),te<_e},[o.fechaActualizacionApoyos]),z=()=>{if(!b.titulo.trim()||!b.fecha)return;const te={...b,id:crypto.randomUUID(),resuelta:!1};c(_e=>({..._e,alertas:[..._e.alertas||[],te].sort((De,Ne)=>new Date(De.fecha).getTime()-new Date(Ne.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},q=te=>{c(_e=>({..._e,alertas:(_e.alertas||[]).map(De=>De.id===te?{...De,resuelta:!De.resuelta}:De)}))},ne=te=>{c(_e=>({..._e,alertas:(_e.alertas||[]).filter(De=>De.id!==te)}))},M=te=>{te.target.files&&te.target.files[0]&&S(te.target.files[0])},W=()=>{if(!w)return;N(!0);const te=new FileReader;te.readAsDataURL(w),te.onloadend=()=>{const _e={id:crypto.randomUUID(),nombre:w.name,url:te.result,fechaSubida:new Date().toISOString()};c(De=>({...De,archivos:[_e,...De.archivos||[]]})),S(null),N(!1)},te.onerror=()=>{alert("Error al leer el archivo."),N(!1)}},Z=te=>{window.confirm("¿Eliminar este archivo?")&&c(_e=>({..._e,archivos:(_e.archivos||[]).filter(De=>De.id!==te)}))},re=()=>{if(!E.motivo.trim()||!E.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const te={...E,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(_e=>({..._e,reuniones:[te,..._e.reuniones||[]].sort((De,Ne)=>new Date(Ne.fecha).getTime()-new Date(De.fecha).getTime())})),_(F)},ae=te=>{window.confirm("¿Eliminar este registro de reunión?")&&c(_e=>({..._e,reuniones:(_e.reuniones||[]).filter(De=>De.id!==te)}))},ce=()=>{var ye,Oe,Re;const te=new vr("p","mm","a4"),_e=20,De=te.internal.pageSize.getWidth(),Ne=te.internal.pageSize.getHeight();let fe=_e;const Ie=qe=>{qe.setFontSize(10),qe.setTextColor(100),qe.text("Ficha de Seguimiento - Módulo Inclusión",_e,15)};Ie(te),te.setFontSize(18),te.setFont("helvetica","bold"),te.setTextColor(40),te.text(o.nombre,_e,fe+10),fe+=15,te.setFontSize(11),te.setFont("helvetica","normal"),te.setTextColor(80),te.text(`Curso: ${o.curso}`,_e,fe),te.text(`Dificultad: ${o.dificultad}`,_e,fe+6),fe+=15;const Ue=qe=>{fe+qe>Ne-_e&&(te.addPage(),Ie(te),fe=_e)},Ye=qe=>{Ue(15),te.setFontSize(14),te.setFont("helvetica","bold"),te.text(qe,_e,fe),fe+=10};if((ye=o.intervenciones)!=null&&ye.length&&(Ye("Historial de Intervenciones"),go(te,{startY:fe,head:[["Fecha","Responsable","Acción","Observaciones"]],body:o.intervenciones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.responsable,qe.accion,qe.observaciones||""]),theme:"grid",didDrawPage:()=>Ie(te)}),fe=te.lastAutoTable.finalY+10),o.adaptacionesCurriculares||o.apoyosRecibidos){Ue(30),Ye("Seguimiento y Apoyos"),te.setFontSize(11),te.setFont("helvetica","normal");const qe=`Adaptaciones: ${o.adaptacionesCurriculares||"No registradas."}
Apoyos: ${o.apoyosRecibidos||"No registrados."}`,Ze=te.splitTextToSize(qe,De-_e*2);te.text(Ze,_e,fe),fe+=Ze.length*5+10}(Oe=o.metasProgreso)!=null&&Oe.length&&(Ue(30),Ye("Metas de Progreso"),go(te,{startY:fe,head:[["Trimestre","Meta","Estado"]],body:o.metasProgreso.map(qe=>[qe.trimestre,qe.meta,qe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>Ie(te)}),fe=te.lastAutoTable.finalY+10),(Re=o.reuniones)!=null&&Re.length&&(Ye("Reuniones con Apoderados"),go(te,{startY:fe,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:o.reuniones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.motivo,qe.acuerdos||"",qe.asistentes]),theme:"grid",didDrawPage:()=>Ie(te)})),te.save(`Ficha_Inclusion_${o.nombre.replace(/\s/g,"_")}.pdf`)},oe=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),l.jsxs("select",{value:h.responsable,onChange:te=>p(_e=>({..._e,responsable:te.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(te=>l.jsx("option",{value:te,children:te},te))]}),h.responsable&&!u&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),l.jsx("textarea",{value:h.accion,onChange:te=>p(_e=>({..._e,accion:te.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:h.observaciones,onChange:te=>p(_e=>({..._e,observaciones:te.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"flex justify-end gap-2",children:[u&&l.jsx("button",{onClick:()=>{d(null),p(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),l.jsx("button",{onClick:P,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.intervenciones||[]).map(te=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:te.accion}),te.observaciones&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:te.observaciones}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(te.fecha).toLocaleString("es-CL")," - ",te.responsable]}),l.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),l.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[l.jsx("button",{onClick:()=>D(te),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),l.jsx("button",{onClick:()=>I(te.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},te.id)),(!o.intervenciones||o.intervenciones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:"📋"}),l.jsx("p",{children:"No hay intervenciones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),le=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),V&&l.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),l.jsx("textarea",{name:"adaptacionesCurriculares",value:o.adaptacionesCurriculares||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),l.jsx("textarea",{name:"apoyosRecibidos",value:o.apoyosRecibidos||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",X.percent,"%"]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:l.jsx("div",{className:`${X.color} h-4 rounded-full transition-all duration-500`,style:{width:`${X.percent}%`}})})]}),l.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[l.jsxs("select",{value:g.trimestre,onChange:te=>x(_e=>({..._e,trimestre:te.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"T1",children:"T1"}),l.jsx("option",{value:"T2",children:"T2"}),l.jsx("option",{value:"T3",children:"T3"})]}),l.jsx("input",{value:g.meta,onChange:te=>x(_e=>({..._e,meta:te.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:R,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(o.metasProgreso||[]).map(te=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[l.jsx("input",{type:"checkbox",checked:te.cumplida,onChange:()=>Y(te.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${te.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[l.jsxs("strong",{children:[te.trimestre,":"]})," ",te.meta]}),l.jsx("button",{onClick:()=>H(te.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},te.id)),(!o.metasProgreso||o.metasProgreso.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),l.jsx("p",{children:"No hay metas definidas"}),l.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),pe=()=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),l.jsx("input",{type:"text",value:b.titulo,onChange:te=>y(_e=>({..._e,titulo:te.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("input",{type:"date",value:new Date(b.fecha).toISOString().slice(0,10),onChange:te=>y(_e=>({..._e,fecha:te.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("button",{onClick:z,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!b.titulo.trim()||!b.fecha,children:"Agendar"})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.alertas||[]).map(te=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:te.resuelta,onChange:()=>q(te.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${te.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[te.titulo," (",new Date(te.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),l.jsx("button",{onClick:()=>ne(te.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},te.id)),(!o.alertas||o.alertas.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),l.jsx("p",{children:"No hay alertas programadas"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),l.jsx("input",{type:"file",onChange:M,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),l.jsx("button",{onClick:W,disabled:!w||j,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:j?"Subiendo...":"Subir"}),w&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",w.name]})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.archivos||[]).map(te=>l.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsxs("a",{href:te.url,download:te.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:te.nombre,children:["📎 ",te.nombre]}),l.jsx("button",{onClick:()=>Z(te.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},te.id)),(!o.archivos||o.archivos.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"📁"}),l.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),Be=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),l.jsx("input",{value:E.motivo,onChange:te=>_(_e=>({..._e,motivo:te.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:E.acuerdos,onChange:te=>_(_e=>({..._e,acuerdos:te.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{value:E.asistentes,onChange:te=>_(_e=>({..._e,asistentes:te.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"text-right",children:l.jsx("button",{onClick:re,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!E.motivo.trim()||!E.asistentes.trim(),children:"Guardar Reunión"})})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.reuniones||[]).map(te=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:te.motivo}),te.acuerdos&&l.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[l.jsx("strong",{children:"Acuerdos:"})," ",te.acuerdos]}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(te.fecha).toLocaleString("es-CL")," - Asistentes: ",te.asistentes]})]}),l.jsx("button",{onClick:()=>ae(te.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},te.id)),(!o.reuniones||o.reuniones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:"👥"}),l.jsx("p",{children:"No hay reuniones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:te=>te.stopPropagation(),children:[l.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ce,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),l.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),l.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:l.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(te=>l.jsx("button",{onClick:()=>i(te),className:`${s===te?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:te==="alertas"?"Alertas y Archivos":te==="seguimiento"?"Seguimiento y Metas":te},te))})}),l.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&oe(),s==="seguimiento"&&le(),s==="reuniones"&&Be(),s==="alertas"&&pe()]}),l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),l.jsx("button",{onClick:B,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},UV=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState([]),[s,i]=k.useState(!0),[o,c]=k.useState(null),[u,d]=k.useState(null),[f,h]=k.useState(""),[p,g]=k.useState(""),[x,b]=k.useState(""),[y,w]=k.useState("dashboard");k.useEffect(()=>{i(!0);const P=OOe(I=>{r(I),i(!1)}),D=DOe(I=>a(I));return()=>{P(),D()}},[]);const S=async(P,D)=>{if(t.some(U=>U.nombre===P.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const I={nombre:P.nombreCompleto,curso:P.curso||"",dificultad:D,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await POe(I),alert(`✅ ${P.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(U){console.error("Error al agregar estudiante:",U),alert("Hubo un error al agregar al estudiante al programa.")}},j=async P=>{try{await ROe(P.id,P)}catch(D){console.error("Error al actualizar la ficha:",D),alert("Hubo un error al guardar los cambios en la ficha.")}},N=async P=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await LOe(P),(o==null?void 0:o.id)===P&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(D){console.error("Error al eliminar estudiante:",D),alert("Hubo un error al eliminar al estudiante.")}},F=P=>{const D=_;if(D.length===0){alert("No hay datos para exportar.");return}const I=D.map(U=>{var R;return{Nombre:U.nombre,Curso:U.curso,Dificultad:U.dificultad,"N° Intervenciones":((R=U.intervenciones)==null?void 0:R.length)||0,"Alertas Pendientes":(U.alertas||[]).filter(Y=>!Y.resuelta).length,"Metas Cumplidas":(U.metasProgreso||[]).filter(Y=>Y.cumplida).length,"Total Metas":(U.metasProgreso||[]).length,"Última Actualización":U.fechaActualizacionApoyos?new Date(U.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(P==="xlsx"){const U=ku.json_to_sheet(I),R=ku.book_new();ku.book_append_sheet(R,U,"Estudiantes_Inclusion"),aR(R,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const U=new vr;U.text("Listado de Estudiantes - Programa de Inclusión",14,15),go(U,{startY:20,head:[Object.keys(I[0])],body:I.map(Object.values)}),U.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},E=k.useMemo(()=>n.filter(P=>{var D;return P.profile===Kt.ESTUDIANTE&&(((D=e.cursos)==null?void 0:D.includes(P.curso||""))||e.profile===Kt.SUBDIRECCION)}).filter(P=>!t.some(D=>D.nombre===P.nombreCompleto)),[n,t,e]),_=k.useMemo(()=>t.filter(P=>P.nombre.toLowerCase().includes(f.toLowerCase())&&(p===""||P.curso===p)&&(x===""||P.dificultad===x)).sort((P,D)=>P.nombre.localeCompare(D.nombre)),[t,f,p,x]),B=k.useMemo(()=>n.filter(P=>P.profile===Kt.PROFESORADO).map(P=>P.nombreCompleto).sort(),[n]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>w("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),l.jsx("button",{onClick:()=>w("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?l.jsxs("div",{className:"text-center py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),l.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):l.jsxs(l.Fragment,{children:[y==="dashboard"&&l.jsxs("div",{className:"space-y-8",children:[l.jsx(MOe,{estudiantes:t}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),l.jsx("button",{onClick:()=>w("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),l.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(P=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:P.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[P.curso," - ",P.dificultad]})]}),l.jsx("button",{onClick:()=>c(P),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},P.id)),t.length===0&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),l.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),l.jsx(MV,{estudiantesDisponibles:E,onSelect:P=>d(P)})]})]}),y==="lista"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",_.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>F("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),l.jsx("button",{onClick:()=>F("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),l.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:P=>h(P.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),l.jsxs("select",{value:p,onChange:P=>g(P.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Ks.map(P=>l.jsx("option",{value:P,children:P},P))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),l.jsxs("select",{value:x,onChange:P=>b(P.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas las Dificultades"}),HS.map(P=>l.jsx("option",{value:P,children:P},P))]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-blue-600",children:_.length}),l.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-green-600",children:t.length}),l.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((P,D)=>P+(D.alertas||[]).filter(I=>!I.resuelta).length,0)}),l.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(P=>P.curso)).size}),l.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[_.map(P=>{var D;return l.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:P.nombre}),(P.alertas||[]).filter(I=>!I.resuelta).length>0&&l.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(P.alertas||[]).filter(I=>!I.resuelta).length," alertas"]})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[P.curso," - ",P.dificultad]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[((D=P.intervenciones)==null?void 0:D.length)||0," intervenciones"]}),l.jsxs("span",{children:[(P.metasProgreso||[]).filter(I=>I.cumplida).length," metas cumplidas"]}),P.fechaActualizacionApoyos&&l.jsxs("span",{children:["Últ. actualización: ",new Date(P.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>c(P),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),l.jsx("button",{onClick:()=>N(P.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},P.id)}),_.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),l.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||p||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||p||x)&&l.jsx("button",{onClick:()=>{h(""),g(""),b("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),l.jsx(MV,{estudiantesDisponibles:E,onSelect:P=>d(P)})]})]}),u&&l.jsx(UOe,{student:u,onClose:()=>d(null),onConfirm:(P,D)=>{S(P,D),d(null)}}),o&&l.jsx(QOe,{student:o,onClose:()=>c(null),onSave:j,profesores:B})]})},vne="asistencia_dual",HOe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},VOe=(e,t)=>{const r=Wt(Tt(pt,vne),nn("emailEstudiante","==",e),Tr("fechaHora","desc"));return pr(r,a=>{const s=a.docs.map(i=>HOe(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},zOe=async e=>{try{const t={...e,fechaHora:ir.fromDate(new Date(e.fechaHora))};await Ln(Tt(pt,vne),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},$Oe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),GOe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),KOe=({currentUser:e})=>{const[t,r]=k.useState(e.curso||""),[n,a]=k.useState([]),[s,i]=k.useState(!1),[o,c]=k.useState(!0),[u,d]=k.useState(null);k.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=VOe(e.email,p=>{a(p),c(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async p=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:p.coords.latitude,longitud:p.coords.longitude}};try{await zOe(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},p=>{console.error("Geolocation error:",p);let g="No se pudo obtener la ubicación.";switch(p.code){case p.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case p.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case p.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${p.code}).`;break}d({text:g,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),l.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),l.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"-- Mi curso --"}),Pp.map(h=>l.jsx("option",{value:h,children:h},h))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[l.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),l.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&l.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&l.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?l.jsx($Oe,{}):l.jsx(GOe,{}),h.tipo]})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},qOe=async()=>{try{console.log("🔍 Debugging users collection...");const e=Tt(tn,"users"),t=Wt(e,Nd(10)),r=await ga(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),c={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(c),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},WOe=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=ir.fromDate(r),s=ir.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const f of i)try{const h=Tt(tn,f);try{const p=Wt(h,nn("fechaHora",">=",a),nn("fechaHora","<=",s)),g=await ga(p);o[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const b of g)try{const y=Wt(h,nn(b,">=",a),nn(b,"<=",s)),w=await ga(y);o[f]={exists:!0,hasDateField:b,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const b=Wt(h,Tr("__name__"),Nd(5)),y=await ga(b);o[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){o[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},XOe=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=ir.fromDate(a),o=ir.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((p,g)=>{let x;g.fechaHora instanceof Date?x=g.fechaHora:typeof g.fechaHora=="string"?x=new Date(g.fechaHora):x=new Date;const b=x.getDate();return p[b]=(p[b]||0)+1,p},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const p=Tt(tn,h),g=Wt(p,nn("fechaHora",">=",i),nn("fechaHora","<=",o),Tr("fechaHora","desc")),x=pr(g,b=>{console.log(`📋 ${h}: ${b.size} documentos encontrados con filtro`),b.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),b.docs.forEach((w,S)=>{var j;if(S<5){const N=w.data();let F;(j=N.fechaHora)!=null&&j.toDate?F=N.fechaHora.toDate():typeof N.fechaHora=="string"?F=new Date(N.fechaHora):F=new Date,console.log(`   ${S+1}. ${N.emailEstudiante} - ${F.toLocaleString()} - ${N.tipo}`),console.log(`      📅 Fecha original: ${N.fechaHora} (tipo: ${typeof N.fechaHora})`)}}),b.forEach(w=>{var E;const S=w.data();let j;(E=S.fechaHora)!=null&&E.toDate?j=S.fechaHora.toDate():typeof S.fechaHora=="string"?j=new Date(S.fechaHora):S.fechaHora instanceof Date?j=S.fechaHora:S.fechaHora?j=new Date(S.fechaHora):j=new Date;const N={id:w.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:j,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},F=`${h}_${w.id}`;u.set(F,N)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},b=>{console.warn(`⚠️ Error con filtro en ${h}:`,b),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=Wt(p,Nd(200)),w=pr(y,j=>{if(console.log(`📋 ${h} (sin filtro): ${j.size} documentos`),j.size>0){const F=j.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(F)),console.log("📄 Primer documento:",F)}const N=j.docs.filter(F=>{var B;const E=F.data();if(!E.fechaHora)return!1;let _;return(B=E.fechaHora)!=null&&B.toDate?_=E.fechaHora.toDate():typeof E.fechaHora=="string"?_=new Date(E.fechaHora):E.fechaHora instanceof Date?_=E.fechaHora:_=new Date(E.fechaHora),_>=a&&_<=s});console.log(`📅 ${h}: ${N.length} registros después de filtro manual`),N.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${h}_`)).forEach(E=>u.delete(E)),N.forEach(E=>{var I;const _=E.data();let B;(I=_.fechaHora)!=null&&I.toDate?B=_.fechaHora.toDate():typeof _.fechaHora=="string"?B=new Date(_.fechaHora):_.fechaHora instanceof Date?B=_.fechaHora:B=new Date(_.fechaHora);const P={id:E.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:B,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},D=`${h}_${E.id}`;u.set(D,P)}),d())}),S=c.findIndex(j=>j===x);S>=0?c[S]=w:c.push(w)});c.push(x)}catch(p){console.warn(`❌ Error configurando ${h}:`,p)}}),()=>{c.forEach(h=>{try{h()}catch(p){console.warn("Error unsubscribing:",p)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},YOe=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const c=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const u=o.filter(d=>d.profile===Kt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(o)};let i=!1;return r.forEach(o=>{try{const c=Tt(tn,o),u=Wt(c),d=pr(u,f=>{f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${o}`),i=!0,Array.from(a.keys()).filter(p=>p.startsWith(`${o}_`)).forEach(p=>a.delete(p)),f.forEach(p=>{var g,x,b,y;try{const w=p.data(),S=w.email||w.userEmail||w.mail||w.correo||"",j=w.nombreCompleto||w.displayName||w.name||w.nombre||w.fullName||"",N=w.curso||w.course||w.class||w.grade||"";let F=w.profile||w.role||w.tipo||w.userType||Kt.ESTUDIANTE;if(typeof F=="string"){const B=F.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?F=Kt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?F=Kt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?F=Kt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(F=Kt.COORDINADOR_TP)}const E={id:p.id,email:S,nombreCompleto:j,curso:N,profile:F,activo:w.activo!==!1,fechaCreacion:((x=(g=w.fechaCreacion)==null?void 0:g.toDate)==null?void 0:x.call(g))||new Date(w.fechaCreacion)||new Date,ultimaActividad:((y=(b=w.ultimaActividad)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(w.ultimaActividad)||new Date,...w},_=`${o}_${p.id}`;a.set(_,E)}catch(w){console.warn(`Error procesando documento ${p.id} en ${o}:`,w)}}),s()):console.log(`⚪ Colección ${o}: vacía`)},f=>{console.warn(`⚠️ Error en colección ${o}:`,f)});n.push(d)}catch(c){console.warn(`❌ Error configurando ${o}:`,c)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},JOe=(e,t)=>{try{console.log("Setting up users subscription...");const r=Tt(tn,"users"),n=Wt(r);return pr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var f,h,p,g;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const b=x.email||x.userEmail||x.mail||"",y=x.nombreCompleto||x.displayName||x.name||x.nombre||"",w=x.curso||x.course||x.class||"";let S=x.profile||x.role||x.tipo||Kt.ESTUDIANTE;if(typeof S=="string"){const N=S.toLowerCase();N.includes("estudiante")||N.includes("student")||N.includes("alumno")?S=Kt.ESTUDIANTE:N.includes("coordinador")||N.includes("coordinator")?S=Kt.COORDINADOR_TP:N.includes("profesor")||N.includes("teacher")||N.includes("docente")?S=Kt.PROFESOR:(N.includes("subdireccion")||N.includes("subdir"))&&(S=Kt.COORDINADOR_TP)}const j={id:d.id,email:b,nombreCompleto:y,curso:w,profile:S,activo:x.activo!==!1,fechaCreacion:((h=(f=x.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((g=(p=x.ultimaActividad)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date(x.ultimaActividad)||new Date,...x};i.push(j)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),i.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",o);const c=i.filter(d=>d.profile===Kt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},IC=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},ZOe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),eDe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),tDe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState(!0),[i,o]=k.useState(null),[c,u]=k.useState(new Date),[d,f]=k.useState("todos"),[h,p]=k.useState("");k.useEffect(()=>{s(!0),o(null);const F=c.getFullYear(),E=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",F,"Mes:",E);let _=!1,B=!1;const P=()=>{_&&B&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const I=Tt(tn,"asistencia_dual"),U=Wt(I,Nd(5)),R=await ga(U);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${R.size}`),R.size>0)R.docs.forEach((Y,H)=>{const X=Y.data();console.log(`   ${H+1}. ${Y.id.slice(0,8)} - ${X.emailEstudiante} - ${X.tipo}`),console.log("      Fecha original:",X.fechaHora),console.log("      Todos los campos:",Object.keys(X))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const Y=["asistenciaEmpresa","asistencia_empresa"];for(const H of Y)try{const X=Tt(tn,H),V=Wt(X,Nd(3)),z=await ga(V);if(console.log(`📋 ${H}: ${z.size} documentos`),z.size>0){const q=z.docs[0].data();console.log("   Estructura:",Object.keys(q)),console.log("   Email:",q.emailEstudiante||q.email),console.log("   Fecha:",q.fechaHora||q.fecha)}}catch(X){console.log(`❌ ${H}: ${X instanceof Error?X.message:"Error"}`)}}}catch(I){console.error("❌ Error en prueba directa:",I),I.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):I.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),WOe(F,E).then(I=>{console.log("🔍 Debug info for collections:",I),Object.entries(I).forEach(([U,R])=>{if(R.exists&&R.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${U.toUpperCase()}:`),console.log(`   📊 Total documentos: ${R.totalDocs}`),console.log(`   📅 Documentos del período: ${R.count}`),console.log(`   🔑 Campo de fecha: ${R.hasDateField}`),R.sampleDoc){console.log("   📄 Documento ejemplo:",R.sampleDoc);const Y=R.sampleDoc,H=Y.emailEstudiante||Y.email||Y.userEmail||Y.correo||"NO ENCONTRADO",X=Y.tipo||Y.type||Y.action||Y.tipoRegistro||"NO ENCONTRADO",V=Y.fechaHora||Y.fecha||Y.timestamp||Y.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${H}`),console.log(`   📝 Tipo registro: ${X}`),console.log(`   📅 Fecha: ${V}`),console.log("   🗂️ Todos los campos:",Object.keys(Y))}R.filteredDocs&&R.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",R.filteredDocs.length),R.filteredDocs.forEach((Y,H)=>{H<3&&console.log(`      ${H+1}. ID: ${Y.id}`,Y.data)}))}else R.exists?console.log(`⚪ Colección ${U}: vacía`):console.log(`❌ Colección ${U}: no existe`)})}).catch(I=>{console.error("Debug error:",I)}),qOe().then(I=>{console.log("🔍 Debug info for users:",I),(!I.exists||I.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async R=>{var Y;try{const H=Tt(tn,R),X=Wt(H,Nd(5)),V=await ga(X);V.size>0?(console.log(`✅ Encontrada colección alternativa: ${R} con ${V.size} documentos`),console.log("Documento muestra:",(Y=V.docs[0])==null?void 0:Y.data())):console.log(`❌ Colección ${R}: vacía`)}catch{console.log(`❌ Colección ${R}: no existe`)}}))}).catch(I=>{console.error("Users debug error:",I)});try{console.log("Configurando suscripción a asistencia...");const I=XOe(F,E,R=>{if(console.log("✅ Received registros:",R.length),R.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",R[0]);const Y=[...new Set(R.map(ne=>ne.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",Y);const H=[...new Set(R.map(ne=>ne.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",H);const X=R.reduce((ne,M)=>{const W=new Date(M.fechaHora).getDate();return ne[W]||(ne[W]=[]),ne[W].push(M),ne},{});console.log("📅 Registros por día del mes:",Object.keys(X).map(ne=>({dia:parseInt(ne),cantidad:X[parseInt(ne)].length})));const V=r.map(ne=>ne.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",V);const z=Y.filter(ne=>V.includes(ne)),q=Y.filter(ne=>!V.includes(ne));console.log("✅ Emails que coinciden:",z),console.log("❌ Emails que NO coinciden:",q)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(R),_=!0,P()},R=>{console.error("❌ Error fetching asistencia:",R),o("Error al cargar datos de asistencia: "+R.message),_=!0,P()});console.log("Configurando suscripción a usuarios...");const U=YOe(R=>{if(console.log("✅ Received users (multi-collection):",R.length),R.length>0){console.log("Sample user:",R[0]);const Y=R.filter(H=>H.profile===Kt.ESTUDIANTE&&H.curso);console.log("Dual students found:",Y.length),Y.forEach(H=>{console.log(`- ${H.nombreCompleto} (${H.curso}) - ${H.email}`)})}n(R),B=!0,P()},R=>{console.error("❌ Error fetching users (multi-collection):",R),console.log("🔄 Intentando con función original de usuarios...");const Y=JOe(H=>{console.log("✅ Received users (fallback):",H.length),n(H),B=!0,P()},H=>{console.error("❌ Error en fallback también:",H),o("Error al cargar estudiantes: "+R.message),B=!0,P()})});return()=>{console.log("Limpiando suscripciones..."),I&&I(),U&&U()}}catch(I){console.error("❌ Error setting up subscriptions:",I),o("Error al inicializar conexiones: "+(I instanceof Error?I.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:x,year:b}=k.useMemo(()=>{const F=c.getFullYear(),E=c.getMonth();return{monthDays:new Date(F,E+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:F}},[c]),y=k.useMemo(()=>{let F=r.filter(E=>E.profile===Kt.ESTUDIANTE&&E.curso&&Pp.includes(IC(E.curso)));if(d!=="todos"&&(F=F.filter(E=>IC(E.curso||"")===d)),h&&(F=F.filter(E=>E.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const E=[...new Set(e.map(P=>P.emailEstudiante).filter(Boolean))],_=F.map(P=>P.email),B=E.filter(P=>!_.includes(P));if(B.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",B);const D=B.map(I=>{const U=e.find(R=>R.emailEstudiante===I);return{id:I,email:I,nombreCompleto:(U==null?void 0:U.nombreEstudiante)||I.split("@")[0],curso:(U==null?void 0:U.curso)||"3ºC",profile:Kt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(I=>{const U=d==="todos"||IC(I.curso)===d,R=!h||I.nombreCompleto.toLowerCase().includes(h.toLowerCase());return U&&R&&Pp.includes(IC(I.curso))});F=[...F,...D]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${F.length}`),F.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),F.sort((E,_)=>E.nombreCompleto.localeCompare(_.nombreCompleto))},[r,d,h,e]),w=k.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const F=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),F):(e.forEach((E,_)=>{const B=E.emailEstudiante;if(!B)return;let P;if(E.fechaHora instanceof Date)P=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)P=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")P=new Date(E.fechaHora);else{console.warn("Fecha no válida en registro:",E);return}const D=P.getDate(),I=P.getMonth(),U=P.getFullYear();_<3&&console.log(`📅 Registro ${_+1}:`,{email:B,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:P.toLocaleString(),año:U,mes:I,día:D}),F.has(B)||F.set(B,new Map);const R=F.get(B);R.has(D)||R.set(D,{});const Y=R.get(D);E.tipo==="Entrada"?(!Y.entrada||P<new Date(Y.entrada.fechaHora))&&(Y.entrada=E):E.tipo==="Salida"&&(!Y.salida||P>new Date(Y.salida.fechaHora))&&(Y.salida=E)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:F.size,estudiantes:Array.from(F.keys()),registrosPorEstudiante:Array.from(F.entries()).map(([E,_])=>({email:E,dias:Array.from(_.keys()),totalRegistros:Array.from(_.values()).reduce((B,P)=>B+(P.entrada?1:0)+(P.salida?1:0),0)}))}),F)},[e]),S=F=>{u(E=>{const _=new Date(E);return _.setMonth(_.getMonth()+F),_})},j=F=>{F!=null&&F.latitud&&(F!=null&&F.longitud)&&window.open(`https://www.google.com/maps?q=${F.latitud},${F.longitud}`,"_blank")},N=["D","L","M","M","J","V","S"];return i?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[l.jsx("button",{onClick:()=>S(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${b}`}),l.jsx("button",{onClick:()=>S(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),l.jsxs("select",{value:d,onChange:F=>f(F.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"todos",children:"Todos los Cursos"}),Pp.map(F=>l.jsx("option",{value:F,children:F},F))]}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:F=>p(F.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?l.jsxs("div",{className:"text-center text-amber-600 py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),l.jsx("div",{children:"Cargando datos de asistencia..."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(F,E)=>{const B=new Date(b,c.getMonth(),E+1).getDay(),P=B===0||B===6;return l.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${P?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[l.jsx("div",{className:"font-semibold",children:N[B]}),l.jsx("div",{children:E+1})]},E)})]})}),l.jsx("tbody",{children:y.length>0?y.map(F=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:F.nombreCompleto}),Array.from({length:g},(E,_)=>{var U;const B=_+1,P=(U=w.get(F.email))==null?void 0:U.get(B),D=new Date(b,c.getMonth(),_+1),I=D.getDay()===0||D.getDay()===6;return F.email==="alexis.robles@industrialderecoleta.cl"&&B===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:F.email,day:B,hasDataForStudent:w.has(F.email),studentDayRecords:P,allAttendanceKeys:Array.from(w.keys()),daysForStudent:w.get(F.email)?Array.from(w.get(F.email).keys()):[]}),l.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${I?"bg-slate-100 dark:bg-slate-700/50":""}`,children:l.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(P==null?void 0:P.entrada)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var R;return j((R=P.entrada)==null?void 0:R.ubicacion)},children:[l.jsx(ZOe,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(P.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(P==null?void 0:P.salida)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var R;return j((R=P.salida)==null?void 0:R.ubicacion)},children:[l.jsx(eDe,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(P.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},B)})]},F.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},T4="evaluaciones_formativas",j4="calificaciones_formativas",AR="trabajos_grupales_formativos",rDe="usuarios",fR=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},nDe=(e,t,r)=>{const n=Wt(Tt(pt,T4),nn("curso","==",e),nn("asignatura","==",t),Tr("fecha","asc"));return pr(n,a=>{r(a.docs.map(s=>fR(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},aDe=async(e,t)=>{const r=bg(pt),n=dr(Tt(pt,T4));r.set(n,{...e,fecha:ir.fromDate(new Date(e.fecha+"T00:00:00"))});const a=dr(pt,j4,n.id);return r.set(a,t),await r.commit(),n.id},sDe=async(e,t)=>{const r=dr(pt,T4,e);await Yi(r,t,{merge:!0})},iDe=async e=>{const t=bg(pt);t.delete(dr(pt,T4,e)),t.delete(dr(pt,j4,e)),await t.commit()},oDe=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=dr(pt,j4,n);return pr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},lDe=async(e,t)=>{const r=dr(pt,j4,e);await Yi(r,t,{merge:!0})},cDe=(e,t,r)=>{const n=Wt(Tt(pt,AR),nn("curso","==",e),nn("asignatura","==",t),Tr("fechaPresentacion","desc"));return pr(n,a=>{r(a.docs.map(s=>fR(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},uDe=async e=>{const t={...e,fechaPresentacion:ir.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await Ln(Tt(pt,AR),t)},dDe=async(e,t)=>{const r=dr(pt,AR,e);await Yi(r,t,{merge:!0})},ADe=e=>{const t=Wt(Tt(pt,rDe));return pr(t,r=>{e(r.docs.map(n=>fR(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},bne=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Zx={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},yne=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},fDe=({cursos:e,onSelect:t})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=yne(r);return l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[l.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),l.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[l.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),l.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),hDe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=yne(e);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),l.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>l.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[l.jsx("span",{className:"text-2xl",children:Zx[s]||Zx.Default}),l.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},mDe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=k.useState([]),[i,o]=k.useState({}),[c,u]=k.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=k.useState(null),[h,p]=k.useState(null),[g,x]=k.useState(!0),b=k.useMemo(()=>r.filter(_=>_.profile===Kt.ESTUDIANTE&&bne(_.curso||"")===e).map(_=>_.nombreCompleto).sort((_,B)=>_.localeCompare(B)),[r,e]);k.useEffect(()=>{x(!0);const _=nDe(e,t,B=>{s(B);const P=B.map(I=>I.id),D=oDe(P,I=>{o(U=>({...U,...I}))});return x(!1),()=>D()});return()=>_()},[e,t]);const y=_=>{const{name:B,value:P}=_.target;d?f(D=>D?{...D,[B]:P}:null):u(D=>({...D,[B]:P}))},w=async _=>{if(_.preventDefault(),p(null),!c.nombreActividad.trim()){p("El nombre de la actividad es obligatorio.");return}const B={asignatura:t,curso:e,...c},P=b.reduce((D,I)=>(D[I]="trabajado",D),{});try{await aDe(B,P),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(D){console.error(D),p("No se pudo crear la evaluación.")}},S=(_,B)=>{var U;const P=((U=i[_])==null?void 0:U[B])||"trabajado";let D;P==="trabajado"?D="no trabajado":P==="no trabajado"?D="ausente":D="trabajado";const I={...i,[_]:{...i[_]||{},[B]:D}};o(I),lDe(_,{[B]:D}).catch(R=>{console.error("Error updating grade:",R)})},j=_=>f(_),N=async()=>{if(d)try{await sDe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(_){console.error(_),p("No se pudo guardar la edición.")}},F=async _=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await iDe(_)}catch(B){console.error(B),p("No se pudo eliminar la evaluación.")}},E=k.useCallback(_=>{if(a.length===0)return"-";let B=0,P=0;return a.forEach(D=>{var U;const I=(U=i[D.id])==null?void 0:U[_];I==="trabajado"?(B+=7,P++):I==="no trabajado"&&(B+=2,P++)}),P===0?"-":(B/P).toFixed(1)},[i,a]);return g?l.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),l.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),l.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"w-full",children:l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&l.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(_=>l.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===_.id?l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("button",{onClick:N,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"font-semibold",children:_.nombreActividad}),l.jsx("span",{className:"font-normal text-slate-500",children:_.fecha}),l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("button",{onClick:()=>j(_),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),l.jsx("button",{onClick:()=>F(_.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},_.id)),l.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:b.map(_=>l.jsxs("tr",{children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:_}),a.map(B=>{var I;const P=(I=i[B.id])==null?void 0:I[_];let D;return P==="trabajado"?D=Zx[t]||Zx.Default:P==="no trabajado"?D="❌":P==="ausente"?D="A":D=Zx[t]||Zx.Default,l.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:l.jsx("button",{onClick:()=>S(B.id,_),className:`text-3xl transition-opacity duration-200 ${P==="trabajado"?"opacity-100":P==="no trabajado"?"opacity-40":P==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:D})},B.id)}),l.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(_)})]},_))})]})})]})},pDe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=k.useState([]),[i,o]=k.useState(null),[c,u]=k.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=k.useState({}),[h,p]=k.useState(2),g=k.useMemo(()=>r.filter(j=>j.profile===Kt.ESTUDIANTE&&bne(j.curso||"")===e).sort((j,N)=>j.nombreCompleto.localeCompare(N.nombreCompleto)),[r,e]);k.useEffect(()=>{const j=cDe(e,t,s);return()=>j()},[e,t]),k.useEffect(()=>{if(i){const j={};i.grupos.forEach(N=>{N.integrantes.forEach(F=>{j[F.nombre]={groupNumber:String(N.numero),role:F.rol||""}})}),f(j)}else f({})},[i]);const x=async j=>{if(j.preventDefault(),!c.nombre.trim())return;const N={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await uDe(N),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(F){console.error(F),alert("No se pudo crear la actividad grupal.")}},b=async()=>{if(!i)return;const j=new Map;for(const F of g){const E=d[F.nombreCompleto];if(E&&E.groupNumber){const _=parseInt(E.groupNumber,10);isNaN(_)||(j.has(_)||j.set(_,[]),j.get(_).push({nombre:F.nombreCompleto,rol:E.role||""}))}}const N=Array.from(j.entries()).map(([F,E])=>({numero:F,integrantes:E})).sort((F,E)=>F.numero-E.numero);try{await dDe(i.id,{grupos:N}),alert("Grupos guardados con éxito.")}catch(F){console.error(F),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const j=[...g].sort(()=>Math.random()-.5),N={};j.forEach((F,E)=>{var _;N[F.nombreCompleto]={groupNumber:String(E%h+1),role:((_=d[F.nombreCompleto])==null?void 0:_.role)||""}}),f(N)},w=(j,N,F)=>{f(E=>({...E,[j]:{...E[j]||{groupNumber:"",role:""},[N]:F}}))},S=k.useMemo(()=>{const j=new Map;return Object.entries(d).forEach(([N,F])=>{F.groupNumber&&(j.has(F.groupNumber)||j.set(F.groupNumber,[]),j.get(F.groupNumber).push({nombre:N,rol:F.role}))}),Array.from(j.entries()).sort((N,F)=>parseInt(N[0])-parseInt(F[0]))},[d]);return i?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),l.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),l.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"md:col-span-1 space-y-4",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:h,onChange:j=>p(parseInt(j.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),l.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),l.jsx("table",{className:"w-full text-sm",children:l.jsx("tbody",{children:g.map(j=>{var N;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-1 pr-2",children:j.nombreCompleto}),l.jsx("td",{className:"py-1",children:l.jsx("input",{type:"number",value:((N=d[j.nombreCompleto])==null?void 0:N.groupNumber)||"",onChange:F=>w(j.nombreCompleto,"groupNumber",F.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},j.id)})})})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:S.map(([j,N])=>l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[l.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",j]}),l.jsx("ul",{className:"space-y-2",children:N.map(F=>l.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"flex-1 truncate",children:F.nombre}),l.jsxs("select",{value:F.rol||"",onChange:E=>w(F.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[l.jsx("option",{value:"",children:"-- Asignar Rol --"}),XZ.map(E=>l.jsx("option",{value:E,children:E},E))]})]},F.nombre))})]},j))})]})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),l.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsx("input",{value:c.nombre,onChange:j=>u({...c,nombre:j.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("input",{type:"date",value:c.fecha,onChange:j=>u({...c,fecha:j.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(j=>l.jsxs("button",{onClick:()=>o(j),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[l.jsx("p",{className:"font-bold",children:j.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",j.fechaPresentacion]})]},j.id))]})]})},gDe=({currentUser:e})=>{const[t,r]=k.useState("calificaciones"),[n,a]=k.useState(null),[s,i]=k.useState(null),[o,c]=k.useState([]),[u,d]=k.useState(!0);k.useEffect(()=>{d(!0);const x=ADe(b=>{c(b),d(!1)});return()=>x()},[]);const f=k.useMemo(()=>e.cursos||[],[e.cursos]),h=k.useMemo(()=>e.asignaturas||[],[e.asignaturas]),p=({tab:x,label:b})=>l.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),g=()=>{if(u)return l.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return l.jsx(fDe,{cursos:f,onSelect:a});if(!s)return l.jsx(hDe,{curso:n,asignaturas:h,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return l.jsx(mDe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(t==="grupos")return l.jsx(pDe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(p,{tab:"calificaciones",label:"Calificaciones"}),l.jsx(p,{tab:"grupos",label:"Trabajos Grupales"})]})}),l.jsx("div",{className:"mt-6",children:g()})]})},wne=aP(),D2="acompanamientos",wm="ciclos_opr",Em=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},Ene=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},xDe=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=Ene(r);return`videos_opr/${n}/${a}/${s}`},vDe=async(e,t,r)=>{try{if(!N6.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const i=(t||"").split("/");if(i.length>=4&&i[0]==="videos_opr"){const d=i[1],f=i[2],h=i.slice(3).join("/");s=xDe(d,f,h)}else{const d=Date.now(),f=Ene(e.name);s=`videos_opr/general/${d}_${f}`}const o=l4(wne,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:N6.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=I1e(o,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",p=>{const g=p.bytesTransferred/p.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},p=>{let g="Error desconocido durante la subida.";switch(p==null?void 0:p.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;default:p!=null&&p.message&&(g=p.message);break}f(new Error(g))},async()=>{try{const p=await nP(u.snapshot.ref);d(p)}catch{f(new Error("El archivo se subió, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},hR=async e=>{try{const t=l4(wne,e),{items:r,prefixes:n}=await F1e(t);await Promise.all(r.map(a=>O1e(a))),await Promise.all(n.map(a=>hR(a.fullPath)))}catch{}},bDe=async()=>{try{const e=Wt(Tt(pt,D2),Tr("fecha","desc"));return(await ga(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Em(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompañamientos")}},yDe=async e=>{try{const t={...e,fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()},r=await Ln(Tt(pt,D2),t);return{...e,id:r.id,fecha:Em(e.fecha)}}catch{throw new Error("No se pudo crear el acompañamiento")}},wDe=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:ir.fromDate(new Date(t.fecha))}:{},fechaModificacion:ir.now()};await Lu(dr(pt,D2,e),r)}catch{throw new Error("No se pudo actualizar el acompañamiento")}},EDe=async e=>{try{const t=Wt(Tt(pt,wm),nn("acompanamientoId","==",e)),r=await ga(t),n=bg(pt);r.forEach(a=>n.delete(dr(pt,wm,a.id))),await n.commit(),await hR(`videos_opr/${e}`),await Za(dr(pt,D2,e))}catch{throw new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},QV=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:ir.fromDate(new Date(e.seguimiento.fecha))});const n=await Ln(Tt(pt,wm),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:Em(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},CDe=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=ir.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:ir.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=ir.now(),await Lu(dr(pt,wm,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},_De=async e=>{try{const t=Wt(Tt(pt,wm),nn("acompanamientoId","==",e),Tr("fecha","desc"));return(await ga(t)).docs.map(a=>{var o;const s=a.data(),i={id:a.id,...s,fecha:Em(s==null?void 0:s.fecha)};return(o=s==null?void 0:s.seguimiento)!=null&&o.fecha&&(i.seguimiento={...s.seguimiento,fecha:Em(s.seguimiento.fecha)}),i})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el índice compuesto (acompanamientoId + fecha).")}},SDe=async()=>{try{const e=Wt(Tt(pt,wm),nn("acompanamientoId","==",""),Tr("fecha","desc"));return(await ga(e)).docs.map(n=>{var i;const a=n.data(),s={id:n.id,...a,fecha:Em(a==null?void 0:a.fecha)};return(i=a==null?void 0:a.seguimiento)!=null&&i.fecha&&(s.seguimiento={...a.seguimiento,fecha:Em(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},HV=async e=>{try{const t=await S1(dr(pt,wm,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await hR(`videos_opr/${n}/${e}`),await Za(dr(pt,wm,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},NDe=async e=>{try{const t=Wt(Tt(pt,D2),nn("docente","==",e),Tr("fecha","desc"));return(await ga(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Em(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},kDe=async e=>{try{const t=Wt(Tt(pt,"rubricas_personalizadas"),nn("docente","==",e)),r=await ga(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},BDe=async()=>await cne(),o3=({label:e,onFileChange:t,uploadedUrl:r,onRemove:n,isUploading:a,accept:s="video/mp4,video/quicktime,video/avi,video/mov",error:i,progress:o=0})=>{const[c,u]=k.useState(!1),d=`file-upload-${e.replace(/\s+/g,"-")}`,f=b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?u(!0):b.type==="dragleave"&&u(!1)},h=b=>{if(b.preventDefault(),b.stopPropagation(),u(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&!a){const y=b.dataTransfer.files[0];g(y)}},p=b=>{if(b.target.files&&b.target.files[0]&&!a){const y=b.target.files[0];g(y)}},g=b=>{if(b.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(b.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(b)},x=()=>i?"bg-red-500":o===100?"bg-green-500":"bg-blue-500";return l.jsxs("div",{className:"w-full",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:e}),r?l.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[l.jsx(yd,{className:"w-5 h-5 text-green-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:"Ver video cargado"}),l.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Video subido exitosamente"})]}),l.jsx("button",{type:"button",onClick:n,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:l.jsx(Fc,{className:"w-4 h-4"})})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${c?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":a?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":i?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${a?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:h,onClick:()=>{var b;return!a&&((b=document.getElementById(d))==null?void 0:b.click())},children:[l.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:a?l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),l.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[o.toFixed(1),"% completado"]})]}):i?l.jsxs("div",{className:"text-center",children:[l.jsx(kd,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),l.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):l.jsxs("div",{className:"text-center",children:[l.jsx(aee,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),l.jsx("input",{id:d,type:"file",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:a,accept:s,style:{display:"none"}})]}),a&&l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:`${x()} h-2 rounded-full transition-all duration-300`,style:{width:`${o}%`}})}),i&&l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[l.jsx(kd,{className:"w-4 h-4 text-red-500"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:i})]})]})]})},TDe=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=k.useState(!1),[o,c]=k.useState({}),[u,d]=k.useState({}),[f,h]=k.useState({}),[p,g]=k.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=k.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",modelo:"",videoModeloUrl:"",foco:"",elementosIdentificar:"",brecha:{videoUrl:"",minutoInicial:"",minutoFinal:"",preguntas:"",indicadores:""}},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:p.curso||"",profesor:p.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,p]),[b,y]=k.useState(t||x);k.useEffect(()=>{t?(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""})):y(x)},[t,x]);const w=I=>{const{name:U,value:R}=I.target,Y=U.split(".");Y.length>1?y(H=>{const X=JSON.parse(JSON.stringify(H));let V=X;for(let z=0;z<Y.length-1;z++)V=V[Y[z]];return V[Y[Y.length-1]]=R,X}):y(H=>({...H,[U]:R}))},S=(I,U,R)=>{y(Y=>({...Y,detallesObservacion:Y.detallesObservacion.map(H=>H.id===I?{...H,[U]:R}:H)}))},j=()=>{const I=b.detallesObservacion[b.detallesObservacion.length-1],U=I&&parseInt(I.minuto.split("-")[1],10)||0,R=`${U+1}-${U+5}`;y(Y=>({...Y,detallesObservacion:[...Y.detallesObservacion,{id:`row_${Date.now()}`,minuto:R,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},N=I=>{y(U=>({...U,detallesObservacion:U.detallesObservacion.filter(R=>R.id!==I)}))},F=async(I,U)=>{h(R=>({...R,[I]:null})),c(R=>({...R,[I]:!0})),d(R=>({...R,[I]:0}));try{const R=Date.now(),Y=U.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),H=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",X=b.id?b.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",V=`videos_opr/${H}/${X}/${R}_${Y}`,z=await vDe(U,V,ne=>{d(M=>({...M,[I]:ne}))}),q=I.split(".");q.length>1?y(ne=>{const M=JSON.parse(JSON.stringify(ne));let W=M;for(let Z=0;Z<q.length-1;Z++)W=W[q[Z]];return W[q[q.length-1]]=z,M}):y(ne=>({...ne,[I]:z})),d(ne=>({...ne,[I]:100}))}catch(R){const Y=(R==null?void 0:R.message)||"Error desconocido al subir el archivo";h(H=>({...H,[I]:Y})),alert(`Error al subir el video: ${Y}`)}finally{c(R=>({...R,[I]:!1})),setTimeout(()=>{d(R=>({...R,[I]:0}))},2e3)}},E=I=>{const U=I.split(".");U.length>1?y(R=>{const Y=JSON.parse(JSON.stringify(R));let H=Y;for(let X=0;X<U.length-1;X++)H=H[U[X]];return H[U[U.length-1]]="",Y}):y(R=>({...R,[I]:""})),h(R=>({...R,[I]:null})),d(R=>({...R,[I]:0}))},_=async(I,U,R)=>{if(!R||!R.trim())return R;const Y=`Mejora la redacción del siguiente texto con un tono técnico-pedagógico propio de informes educativos. Mantén el sentido original y NO agregues información nueva ni ejemplos inventados. Devuélvelo como un texto breve, claro y directo. Texto (${U}):

"""${R}"""`;try{return(await I.generateContent(Y)).response.text()}catch(H){return console.error(`Error improving text for ${U}:`,H),R}},B=async()=>{var I,U;i(!0);try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await mm("Acompañamiento - Mejorar Ciclo OPR");const H=new Bs(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),X=b.retroalimentacion,V=b.planificacion,z=await Promise.all([_(H,"Éxito",X.exito),_(H,"Modelo",X.modelo),_(H,"Foco",X.foco),_(H,"Elementos a identificar",X.elementosIdentificar),_(H,"Brecha - Preguntas",((I=X.brecha)==null?void 0:I.preguntas)||""),_(H,"Brecha - Indicadores",((U=X.brecha)==null?void 0:U.indicadores)||""),_(H,"Planificación - Preparación",V.preparacion),_(H,"Planificación - Objetivo",V.objetivo),_(H,"Planificación - Actividad",V.actividad),_(H,"Planificación - Tiempo",V.tiempo)]);y(q=>({...q,retroalimentacion:{...q.retroalimentacion,exito:z[0],modelo:z[1],foco:z[2],elementosIdentificar:z[3],brecha:{...q.retroalimentacion.brecha,preguntas:z[4],indicadores:z[5]}},planificacion:{...q.planificacion,preparacion:z[6],objetivo:z[7],actividad:z[8],tiempo:z[9]}})),alert("Textos mejorados exitosamente con IA")}catch(R){console.error(R),alert("No se pudo mejorar la redacción. Intenta nuevamente.")}finally{i(!1)}},P=()=>{const I=new vr,U=I.internal.pageSize.getWidth(),R=15,Y=U-R*2;let H=20;const X=ne=>{H>260&&(I.addPage(),H=20),I.setFontSize(14),I.setFont("helvetica","bold"),I.text(ne,R,H),H+=10},V=(ne,M="")=>{if(!ne)return;H>270&&(I.addPage(),H=20),I.setFontSize(10),I.setFont("helvetica","bold"),I.text(M,R,H),I.setFont("helvetica","normal");const W=I.splitTextToSize(ne,Y-(M?15:0));I.text(W,R+(M?15:0),H),H+=W.length*5+4};I.setFontSize(18),I.setFont("helvetica","bold"),I.text("Informe de Ciclo OPR",U/2,H,{align:"center"}),H+=15,X("1. Datos Generales");const z=[["Docente:",p.docente],["Curso:",p.curso],["Asignatura:",p.asignatura],["Fecha:",new Date(b.fecha).toLocaleDateString("es-CL")],["Hora:",`${b.horaInicio} - ${b.horaTermino}`],["Ciclo:",b.nombreCiclo]];go(I,{body:z,startY:H,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),H=I.lastAutoTable.finalY+10,X("2. Registro Detallado de Observación");const q=b.detallesObservacion.map(ne=>[ne.minuto,ne.accionesDocente,ne.accionesEstudiantes,ne.actividades]);go(I,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:q,startY:H,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255},styles:{fontSize:9,cellPadding:2},didDrawPage:ne=>{var M;H=((M=ne.cursor)==null?void 0:M.y)||20}}),H=I.lastAutoTable.finalY+10,X("3. Retroalimentación Docente"),V(b.retroalimentacion.exito,"Éxito:"),V(b.retroalimentacion.modelo,"Modelo:"),V(b.retroalimentacion.foco,"Foco:"),V(b.retroalimentacion.elementosIdentificar,"Elementos a Identificar:"),H+=5,I.setFontSize(11),I.setFont("helvetica","bold"),I.text("Análisis de Brecha",R,H),H+=7,V(`${b.retroalimentacion.brecha.minutoInicial} a ${b.retroalimentacion.brecha.minutoFinal}`,"Minutos:"),V(b.retroalimentacion.brecha.preguntas,"Preguntas:"),V(b.retroalimentacion.brecha.indicadores,"Indicadores:"),X("4. Planificación de Práctica"),V(b.planificacion.preparacion,"Preparación:"),V(b.planificacion.objetivo,"Objetivo:"),V(b.planificacion.actividad,"Actividad:"),V(b.planificacion.tiempo,"Tiempo:"),X("5. Seguimiento"),V(new Date(b.seguimiento.fecha).toLocaleDateString("es-CL"),"Fecha:"),V(b.seguimiento.firma,"Firma (Registrado por):"),I.save(`Informe_OPR_${p.docente}_${b.fecha}.pdf`)},D=async I=>{if(I.preventDefault(),!p.docente||!p.curso||!p.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!b.nombreCiclo||!b.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const U={...b,docenteInfo:p.docente,cursoInfo:p.curso,asignaturaInfo:p.asignatura,seguimiento:{...b.seguimiento,profesor:p.docente,curso:p.curso}};try{await r(U)}catch(R){console.error("Error al guardar ciclo OPR:",R),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),l.jsxs("select",{value:p.docente,onChange:I=>g(U=>({...U,docente:I.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(I=>l.jsx("option",{value:I,children:I},I))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:p.asignatura,onChange:I=>g(U=>({...U,asignatura:I.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),Ki.map(I=>l.jsx("option",{value:I,children:I},I))]})]})]})]}),l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:B,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[l.jsx($S,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),l.jsxs("button",{type:"button",onClick:P,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(u4,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),l.jsxs("form",{onSubmit:D,className:"space-y-8",children:[l.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(Qx,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("input",{type:"text",name:"nombreCiclo",value:b.nombreCiclo,onChange:w,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"date",name:"fecha",value:b.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"number",name:"registroN",value:b.registroN,onChange:w,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),l.jsx("input",{type:"time",name:"horaInicio",value:b.horaInicio,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"time",name:"horaTermino",value:b.horaTermino,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx(o3,{label:"Subir video de observación de clase",onFileChange:I=>F("videoObservacionUrl",I),uploadedUrl:b.videoObservacionUrl,onRemove:()=>E("videoObservacionUrl"),isUploading:!!o.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(C6,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b dark:border-slate-600",children:[l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),l.jsx("th",{className:"p-2"})]})}),l.jsx("tbody",{children:b.detallesObservacion.map(I=>l.jsxs("tr",{className:"border-b dark:border-slate-700",children:[l.jsx("td",{className:"p-2",children:l.jsx("input",{type:"text",value:I.minuto,onChange:U=>S(I.id,"minuto",U.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:I.accionesDocente,onChange:U=>S(I.id,"accionesDocente",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:I.accionesEstudiantes,onChange:U=>S(I.id,"accionesEstudiantes",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:I.actividades,onChange:U=>S(I.id,"actividades",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),l.jsx("td",{className:"p-2",children:b.detallesObservacion.length>1&&l.jsx("button",{type:"button",onClick:()=>N(I.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:l.jsx(Fc,{className:"w-4 h-4"})})})]},I.id))})]})}),l.jsxs("button",{type:"button",onClick:j,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[l.jsx(S6,{className:"w-4 h-4"})," Agregar Fila"]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(Rye,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),l.jsx("textarea",{name:"retroalimentacion.exito",value:b.retroalimentacion.exito,onChange:w,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),l.jsx("textarea",{name:"retroalimentacion.modelo",value:b.retroalimentacion.modelo,onChange:w,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx(o3,{label:"Video modelo (opcional)",onFileChange:I=>F("retroalimentacion.videoModeloUrl",I),uploadedUrl:b.retroalimentacion.videoModeloUrl,onRemove:()=>E("retroalimentacion.videoModeloUrl"),isUploading:!!o["retroalimentacion.videoModeloUrl"],error:f["retroalimentacion.videoModeloUrl"],progress:u["retroalimentacion.videoModeloUrl"]||0}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),l.jsx("textarea",{name:"retroalimentacion.foco",value:b.retroalimentacion.foco,onChange:w,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),l.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:b.retroalimentacion.elementosIdentificar,onChange:w,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(kd,{className:"w-4 h-4 text-amber-500"}),"Análisis de Brecha"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Minuto inicial"}),l.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoInicial",value:b.retroalimentacion.brecha.minutoInicial,onChange:w,placeholder:"Ej: 15:30",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Minuto final"}),l.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoFinal",value:b.retroalimentacion.brecha.minutoFinal,onChange:w,placeholder:"Ej: 20:45",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsx(o3,{label:"Video de brecha (opcional)",onFileChange:I=>F("retroalimentacion.brecha.videoUrl",I),uploadedUrl:b.retroalimentacion.brecha.videoUrl,onRemove:()=>E("retroalimentacion.brecha.videoUrl"),isUploading:!!o["retroalimentacion.brecha.videoUrl"],error:f["retroalimentacion.brecha.videoUrl"],progress:u["retroalimentacion.brecha.videoUrl"]||0}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Preguntas"}),l.jsx("textarea",{name:"retroalimentacion.brecha.preguntas",value:b.retroalimentacion.brecha.preguntas,onChange:w,placeholder:"Preguntas específicas sobre la brecha identificada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Indicadores"}),l.jsx("textarea",{name:"retroalimentacion.brecha.indicadores",value:b.retroalimentacion.brecha.indicadores,onChange:w,placeholder:"Indicadores para evaluar el progreso...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(Pbe,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),l.jsx("textarea",{name:"planificacion.preparacion",value:b.planificacion.preparacion,onChange:w,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),l.jsx("textarea",{name:"planificacion.objetivo",value:b.planificacion.objetivo,onChange:w,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),l.jsx("textarea",{name:"planificacion.actividad",value:b.planificacion.actividad,onChange:w,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),l.jsx("input",{type:"text",name:"planificacion.tiempo",value:b.planificacion.tiempo,onChange:w,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(Bd,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),l.jsx("input",{type:"date",name:"seguimiento.fecha",value:b.seguimiento.fecha,onChange:w,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),l.jsx("input",{type:"text",name:"seguimiento.firma",value:b.seguimiento.firma,onChange:w,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(o).some(Boolean),children:[Object.values(o).some(Boolean)&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},jDe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState(!0),[i,o]=k.useState(!0),[c,u]=k.useState(null),[d,f]=k.useState("list"),[h,p]=k.useState(null),[g,x]=k.useState(null),[b,y]=k.useState("general"),[w,S]=k.useState(!1),[j,N]=k.useState({}),[F,E]=k.useState([]),_=Qy,B=k.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[P,D]=k.useState(B),I=k.useCallback(async()=>{s(!0),u(null);try{const ae=await bDe();t(ae)}catch(ae){u("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",ae)}finally{s(!1)}},[]),U=k.useCallback(async()=>{o(!0);try{const ce=(await BDe()).filter(oe=>oe.profile==="PROFESORADO").map(oe=>oe.nombreCompleto).sort();n(ce)}catch(ae){u("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",ae)}finally{o(!1)}},[]),R=k.useCallback(async()=>{try{const ae={};for(const ce of e)if(ce.id)try{const oe=await _De(ce.id);oe.length>0&&(ae[ce.id]=oe)}catch(oe){console.error(`Error loading OPR cycles for ${ce.id}:`,oe)}try{const ce=await SDe();E(ce)}catch(ce){console.error("Error loading standalone OPR cycles:",ce),E([])}N(ae)}catch(ae){console.error("Error fetching OPR cycles:",ae)}},[e]);k.useEffect(()=>{I(),U()},[I,U]),k.useEffect(()=>{e.length>0&&R()},[e,R]);const Y=(ae,ce)=>{if(x(ae),ce)D(ce),p(ce.id);else{const oe={id:"temp-"+Date.now(),fecha:ae.fecha,docente:ae.docenteInfo||"",curso:ae.cursoInfo||"",asignatura:ae.asignaturaInfo||"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};D(oe),p(null)}f("form"),y("opr"),u(null)},H=async()=>{if(!("docente"in P)||!P.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}S(!0),u(null);try{const ae="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await mm("Acompañamiento - Feedback General");const oe=new Bs(ae).getGenerativeModel({model:"gemini-1.5-flash-latest"}),le=Object.entries(P.rubricaResultados||{}).map(([_e,De])=>`- ${_e}: Nivel ${De}`).join(`
`),pe=`
Eres un asesor pedagógico experto. Redacta una retroalimentación consolidada y constructiva para un docente.
Contexto de la observación:
- Docente: ${P.docente}
- Asignatura: ${P.asignatura}
- Curso: ${P.curso}
- Resultados de la pauta de observación (rúbrica):
${le||"No se completó la pauta."}
- Observaciones adicionales del evaluador:
${P.observacionesGenerales||"Sin observaciones adicionales."}

Basado en esta información, tu texto debe:
1. Iniciar con un reconocimiento positivo.
2. Mencionar 1 o 2 fortalezas clave observadas.
3. Identificar 1 o 2 áreas de mejora concretas, con un tono de sugerencia.
4. Concluir con una frase motivadora.
La respuesta debe ser solo el texto de la retroalimentación.
      `,te=(await oe.generateContent(pe)).response.text();D(_e=>({..._e,retroalimentacionConsolidada:te})),alert("Retroalimentación generada exitosamente con IA.")}catch(ae){console.error("❌ Error al generar retroalimentación:",ae);const ce=ae.message||"No se pudo generar la retroalimentación automática.";u(ce),alert(`Error: ${ce}`)}finally{S(!1)}},X=async ae=>{if(ae.preventDefault(),!("docente"in P)||!P.docente||!P.curso||!P.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await wDe(h,P),alert("¡Acompañamiento actualizado correctamente!");else{const ce=await yDe(P);p(ce.id),D(ce),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await I()}catch(ce){const oe=(ce==null?void 0:ce.message)??"Error al guardar el registro de acompañamiento.";u(oe),console.error("❌ Error al guardar:",ce),alert(`Error: ${oe}`)}},V=()=>{D(B),p(null),x(null),f("form"),y("general"),u(null)},z=ae=>{D(ae),p(ae.id),x(null),f("form"),y("general"),u(null)},q=async ae=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await EDe(ae),await I(),alert("Registro eliminado exitosamente.")}catch(ce){const oe="No se pudo eliminar el registro.";u(oe),console.error("❌ Error al eliminar:",ce),alert(`Error: ${oe}`)}},ne=(ae,ce)=>{D(oe=>({...oe,rubricaResultados:{...oe.rubricaResultados||{},[ae]:ce}}))},M=()=>{var ae;if(!("docente"in P)||!P.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const ce=new vr,oe=ce.internal.pageSize.getWidth(),le=15,pe=oe-le*2;let Be=20;ce.setFontSize(18),ce.setFont("helvetica","bold"),ce.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",oe/2,Be,{align:"center"}),Be+=5,ce.setLineWidth(.5),ce.line(le,Be,oe-le,Be),Be+=10;const te=[["Docente:",P.docente],["Curso:",P.curso],["Asignatura:",P.asignatura],["Fecha:",new Date(P.fecha).toLocaleDateString("es-CL")],["Bloques horarios:",P.bloques||"No especificado"]];if(go(ce,{body:te,startY:Be,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),Be=ce.lastAutoTable.finalY+10,Object.keys(P.rubricaResultados||{}).length>0){ce.setFontSize(12),ce.setFont("helvetica","bold"),ce.text("RESULTADOS DE EVALUACIÓN",le,Be),Be+=8;const fe=Object.entries(P.rubricaResultados).map(([Ie,Ue])=>[Ie,`Nivel ${Ue}`,Ue===1?"Débil":Ue===2?"Incipiente":Ue===3?"Satisfactorio":"Avanzado"]);go(ce,{startY:Be,head:[["Criterio","Nivel","Descripción"]],body:fe,theme:"grid",headStyles:{fillColor:[245,158,11],textColor:255},margin:{left:le,right:le},styles:{fontSize:9}}),Be=ce.lastAutoTable.finalY+10}const _e=(fe,Ie)=>{if(!Ie||Ie.trim()==="")return;Be>250&&(ce.addPage(),Be=20),ce.setFontSize(12),ce.setFont("helvetica","bold"),ce.text(fe,le,Be),Be+=8,ce.setFontSize(10),ce.setFont("helvetica","normal");const Ue=ce.splitTextToSize(Ie,pe);ce.text(Ue,le,Be),Be+=Ue.length*5+10};_e("OBSERVACIONES GENERALES",P.observacionesGenerales),_e("RETROALIMENTACIÓN PEDAGÓGICA",P.retroalimentacionConsolidada);const De=ce.getNumberOfPages();for(let fe=1;fe<=De;fe++)ce.setPage(fe),ce.setFontSize(8),ce.setFont("helvetica","italic"),ce.text(`Generado el ${new Date().toLocaleDateString("es-CL")} - Página ${fe} de ${De}`,oe/2,ce.internal.pageSize.getHeight()-10,{align:"center"});const Ne=`Informe_Acompanamiento_${(ae=P.docente)==null?void 0:ae.replace(/\s+/g,"_")}_${P.curso}_${new Date().toISOString().split("T")[0]}.pdf`;ce.save(Ne)}catch(ce){console.error("❌ Error al generar PDF:",ce),alert("Error al generar el PDF. Intenta nuevamente.")}},W=ae=>{D(ce=>({...ce,[ae.target.name]:ae.target.value}))},Z=()=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>{V(),y("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[l.jsx(S6,{className:"w-5 h-5"})," Acompañamiento General"]}),l.jsxs("button",{onClick:()=>{D(B),p(null),x(null),f("form"),y("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[l.jsx(S6,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kd,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[l.jsx(Hy,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),l.jsxs("div",{className:"space-y-3",children:[a&&l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(ae=>ae.id).length>0?l.jsx("div",{className:"grid gap-3",children:e.filter(ae=>ae.id).map(ae=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Bd,{className:"w-4 h-4 text-amber-500"}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.docente})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Curso:"})," ",ae.curso," •"," ",l.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",ae.asignatura]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ae.fecha).toLocaleDateString("es-CL")]}),ae.bloques&&l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Bloques:"})," ",ae.bloques]}),ae.retroalimentacionConsolidada&&l.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(yd,{className:"w-3 h-3"}),"Con retroalimentación IA"]}),j[ae.id]&&j[ae.id].length>0&&l.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[l.jsx(Qx,{className:"w-3 h-3"}),j[ae.id].length," Ciclo",j[ae.id].length>1?"s":""," OPR"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>{z(ae),y("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),l.jsx("button",{onClick:()=>{z(ae),y("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),l.jsx("button",{onClick:()=>q(ae.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:l.jsx(Fc,{className:"w-4 h-4"})})]})]}),j[ae.id]&&j[ae.id].length>0&&l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[l.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[l.jsx(Qx,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),l.jsx("div",{className:"space-y-2",children:j[ae.id].map(ce=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:ce.nombreCiclo||`Registro N° ${ce.registroN}`}),l.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(ce.fecha).toLocaleDateString("es-CL"),ce.horaInicio&&ce.horaTermino&&l.jsxs("span",{children:[" • ",ce.horaInicio," - ",ce.horaTermino]})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>{const oe=e.find(le=>le.id===ae.id);Y(ce,oe)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),l.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await HV(ce.id),await R(),alert("Ciclo OPR eliminado exitosamente")}catch(oe){console.error("Error deleting OPR cycle:",oe),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:l.jsx(Fc,{className:"w-3 h-3"})})]})]},ce.id))})]})]},ae.id))}):!a&&l.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsx(Zf,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos generales registrados"}),l.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]}),F.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[l.jsx(Qx,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),l.jsx("div",{className:"space-y-3",children:F.map(ae=>l.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Qx,{className:"w-4 h-4 text-blue-500"}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.nombreCiclo||`Registro N° ${ae.registroN}`})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Docente:"})," ",ae.docenteInfo||"No especificado"," •"," ",l.jsx("span",{className:"font-medium",children:"Curso:"})," ",ae.cursoInfo||"No especificado"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ae.fecha).toLocaleDateString("es-CL"),ae.horaInicio&&ae.horaTermino&&l.jsxs("span",{children:[" • ",ae.horaInicio," - ",ae.horaTermino]})]}),ae.videoObservacionUrl&&l.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(yd,{className:"w-3 h-3"}),"Con video de observación"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>{Y(ae)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),l.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await HV(ae.id),await R(),alert("Ciclo OPR eliminado exitosamente")}catch(ce){console.error("Error deleting standalone OPR cycle:",ce),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:l.jsx(Fc,{className:"w-4 h-4"})})]})]})},ae.id))})]})]}),re=()=>{const ae=h?e.find(oe=>oe.id===h):null,ce={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in P&&P.docente||"",curso:"curso"in P&&P.curso||"",asignatura:"asignatura"in P&&P.asignatura||"",bloques:"bloques"in P&&P.bloques||"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:b==="general"?h?"Editando Acompañamiento General":"Nuevo Acompañamiento General":g?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),l.jsx("button",{type:"button",onClick:()=>{f("list"),x(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>y("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Zf,{className:"w-4 h-4"}),"Acompañamiento General"]})}),l.jsx("button",{onClick:()=>y("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Qx,{className:"w-4 h-4"}),"Ciclos OPR"]})})]})}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kd,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),b==="general"&&l.jsxs("form",{onSubmit:X,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[l.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(V_,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:H,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:w,children:[l.jsx($S,{className:"w-4 h-4"}),w?"Generando...":"Generar Retroalimentación con IA"]}),l.jsxs("button",{type:"button",onClick:M,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(u4,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in P&&P.retroalimentacionConsolidada&&l.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[l.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(yd,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:l.jsx("textarea",{readOnly:!0,rows:8,value:P.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),l.jsxs("select",{name:"docente",value:"docente"in P?P.docente:"",onChange:W,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[l.jsx("option",{value:"",children:i?"Cargando profesores...":"Seleccione un docente"}),r.map(oe=>l.jsx("option",{value:oe,children:oe},oe))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),l.jsxs("select",{name:"curso",value:"curso"in P?P.curso:"",onChange:W,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(oe=>l.jsx("option",{value:oe,children:oe},oe))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),l.jsxs("select",{name:"asignatura",value:"asignatura"in P?P.asignatura:"",onChange:W,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),Ki.map(oe=>l.jsx("option",{value:oe,children:oe},oe))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),l.jsx("input",{type:"text",name:"bloques",value:"bloques"in P?P.bloques:"",onChange:W,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),l.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in P?P.observacionesGenerales:"",onChange:W,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(Hy,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:_.map(oe=>l.jsx(ct.Fragment,{children:oe.criteria.map((le,pe)=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[pe===0&&l.jsx("td",{rowSpan:oe.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:oe.domain}),l.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:le.name}),le.levels.map((Be,te)=>{const _e=te+1,De="rubricaResultados"in P&&P.rubricaResultados[le.name]===_e,Ne=De?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return l.jsx("td",{onClick:()=>ne(le.name,_e),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Ne} ${De?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${_e} para ${le.name}`,children:l.jsxs("div",{className:"text-xs leading-relaxed",children:[De&&l.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[l.jsx(yd,{className:"w-3 h-3 text-amber-600"}),l.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),Be]})},_e)})]},le.name))},oe.domain))})]})}),Object.keys(P.rubricaResultados||{}).length>0&&l.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[l.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[l.jsx(Hy,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(P.rubricaResultados).length," criterios evaluados)"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(P.rubricaResultados).map(([oe,le])=>l.jsxs("div",{className:"flex justify-between items-center py-1",children:[l.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[oe,":"]}),l.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${le===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":le===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":le===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",le]})]},oe))})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:()=>f("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:w,children:[w&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),b==="opr"&&l.jsx(TDe,{acompanamiento:ae||ce,cicloToEdit:g,profesores:r,onSave:async oe=>{try{const le=(ae==null?void 0:ae.id)||typeof oe.acompanamientoId=="string"&&oe.acompanamientoId||void 0;if(g&&g.id)await CDe(g.id,oe),alert("Ciclo OPR actualizado exitosamente");else{if(!le||String(le).startsWith("temp-")){const pe={...oe,acompanamientoId:""};await QV(pe)}else{const pe={...oe,acompanamientoId:String(le)};await QV(pe)}alert("Ciclo OPR guardado exitosamente")}x(null),await I(),await R(),f("list")}catch(le){console.error("❌ Error al guardar ciclo OPR:",le);const pe=le.message||"Error desconocido al guardar el ciclo OPR";u(pe),alert(`Error al guardar el ciclo OPR: ${pe}`)}},onCancel:()=>{x(null),f("list")}})]})};return a||i?l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",i&&" Cargando profesores..."]})]})})}):l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?Z():re()})})},mR="mensajes_internos",IDe="usuarios",Cne="mensajes_read_status",_ne=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},FDe=(e,t)=>{const r=Wt(Tt(pt,mR),nn("participants","array-contains",e),Tr("fecha","desc"));return pr(r,a=>{const s=a.docs.map(i=>_ne(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},ODe=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:ir.fromDate(new Date)};await Ln(Tt(pt,mR),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},DDe=async e=>{try{const t=dr(pt,mR,e);await Za(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},PDe=(e,t)=>{const r=dr(pt,Cne,e);return pr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},RDe=async(e,t)=>{try{const r=dr(pt,Cne,e);await Yi(r,{messages:_Z(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},LDe=e=>{const t=Wt(Tt(pt,IDe),Tr("nombreCompleto","asc"));return pr(t,n=>{const a=n.docs.map(s=>_ne(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},MDe=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=k.useState("inbox"),[a,s]=k.useState([]),[i,o]=k.useState([]),[c,u]=k.useState(null),[d,f]=k.useState({announcements:[],messages:[]}),[h,p]=k.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,b]=k.useState(g);k.useEffect(()=>{if(!e.id||!e.email){p(!1);return}p(!0);const E=FDe(e.email,P=>{s(P),p(!1)}),_=LDe(o),B=PDe(e.id,P=>{f(P),t()});return()=>{E(),_(),B()}},[e.id,e.email,t]);const y=E=>{u(E),r==="inbox"&&!d.messages.includes(E.id)&&RDe(e.id,E.id).catch(_=>{console.error("Failed to mark message as read:",_)})},w=async E=>{if(E.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const _={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await ODe(_),b(g),n("sent")}catch(B){console.error("Error sending message:",B),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},S=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await DDe(E),u(null)}catch(_){console.error("Error deleting message:",_),alert("No se pudo eliminar el mensaje.")}},j=E=>{b({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),n("compose")},N=k.useMemo(()=>a.filter(E=>E.para===e.email),[a,e.email]),F=k.useMemo(()=>a.filter(E=>E.de===e.email),[a,e.email]);return h?l.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[l.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[l.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:l.jsx("button",{onClick:()=>{n("compose"),u(null),b(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),l.jsxs("nav",{className:"p-2 space-y-1",children:[l.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),l.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&l.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?N:F).map(E=>{const _=r==="inbox"&&!d.messages.includes(E.id);return l.jsxs("div",{onClick:()=>y(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("p",{className:`font-bold truncate ${_?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?E.de:`Para: ${E.para}`}),_&&l.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),l.jsx("p",{className:`truncate text-sm ${_?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),l.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),l.jsxs("select",{id:"para",value:x.para,onChange:E=>b({...x,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==e.email).map(E=>l.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),l.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:E=>b({...x,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),l.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:E=>b({...x,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?l.jsxs("div",{children:[l.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[l.jsx("strong",{children:"De:"})," ",c.de," ",l.jsx("br",{}),l.jsx("strong",{children:"Para:"})," ",c.para," ",l.jsx("br",{}),l.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),l.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),l.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&l.jsx("button",{onClick:()=>j(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),l.jsx("button",{onClick:()=>S(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):l.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:l.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},I4="proyectos_interdisciplinarios",pR="entregas_interdisciplinarias",UDe="usuarios",gR=e=>{const t=e.data();return{id:e.id,...t}},QDe=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),HDe=e=>{const t=Wt(Tt(pt,I4),Tr("nombreProyecto","asc"));return pr(t,n=>{try{const a=n.docs.map(s=>QDe(gR(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},VDe=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:ir.now(),updatedAt:ir.now()};return(await Ln(Tt(pt,I4),t)).id},VV=async(e,t)=>{const{id:r,...n}=t,a=dr(pt,I4,e);await Yi(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:ir.now()},{merge:!0})},zDe=async e=>{const t=dr(pt,I4,e),r=Wt(Tt(pt,pR),nn("planificacionId","==",e)),n=await ga(r),a=bg(pt);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},$De=(e,t)=>{const r=Wt(Tt(pt,pR),nn("planificacionId","==",e));return pr(r,a=>{const s=a.docs.map(i=>gR(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},zV=async(e,t)=>{const r=dr(pt,pR,e);await Yi(r,{feedbackProfesor:t,fechaFeedback:ir.fromDate(new Date)},{merge:!0})},Sne=e=>{const t=Wt(Tt(pt,UDe));return pr(t,n=>{const a=n.docs.map(s=>gR(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},rF={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},ew=({href:e})=>{if(!e)return l.jsx("span",{className:"text-slate-400",children:"—"});const t=e.startsWith("http")?e:`https://${e}`;return l.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx(_ye,{className:"w-4 h-4"}),l.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},up=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>l.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),GDe=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=k.useState(null),a=k.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=k.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),i=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},o=({data:c,onClose:u,onSave:d})=>{const[f,h]=k.useState(c.activity),p=x=>h({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(tee,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),l.jsx("input",{name:"nombre",value:f.nombre,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),l.jsx("input",{name:"responsables",value:f.responsables,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),l.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),l.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),l.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[l.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx(kd,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):l.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:l.jsx(M0,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),h=d.type==="activity";return l.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&n({planId:d.planId,activity:d}),children:[l.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),l.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),l.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(ew,{href:d.recursoUrl})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(i,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&l.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},KDe=({planificaciones:e,onBack:t})=>{const r=k.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var p;(p=h.habilidades)==null||p.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(rF).forEach(([x,b])=>{b.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=k.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=k.useMemo(()=>{const c=e.length,u=e.reduce((h,p)=>{var g;return h+(((g=p.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,p)=>{var g;return h+(((g=p.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((p,g)=>g[1]-p[1]).slice(0,20),h=Math.max(...f.map(([,p])=>p));return h?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),l.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([p,g])=>{const x=Math.max(.8,g/h*2),b=Math.max(.6,g/h);return l.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:b},title:`${p}: ${g} veces`,children:p},p)})})]}):null},i=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:l.jsx(JZ,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),l.jsx("div",{className:"space-y-4",children:Object.keys(rF).map(h=>{const p=c[h]||0,g=d>0?p/d*100:0,x=f[h]||"bg-slate-400";return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[p," habilidades"]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},o=({icon:c,title:u,value:d,description:f,color:h})=>l.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:d}),l.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),l.jsx("p",{className:"text-white/90 text-sm",children:f})]});return l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:l.jsx(nee,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(bw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(o,{icon:l.jsx(Qv,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),l.jsx(o,{icon:l.jsx(Ebe,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),l.jsx(o,{icon:l.jsx(Zf,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),l.jsx(o,{icon:l.jsx(fh,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(i,{data:r.categoriaCount}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(Hbe,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),l.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),l.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(s,{data:n.palabrasCount,title:"Contenidos Más Frecuentes"}),l.jsx(s,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},qDe=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=k.useState([]),[s,i]=k.useState([]),[o,c]=k.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=k.useState(null);k.useEffect(()=>{const b=Sne(a),y=$De(e.id,i);return()=>{b(),y()}},[e.id]);const f=k.useMemo(()=>n.filter(b=>b.profile===Kt.ESTUDIANTE&&e.cursos.includes(b.curso||"")).sort((b,y)=>(b.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),h=async b=>{d(b.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=`Eres un profesor asistente. Genera una retroalimentación breve (2-3 frases) para la entrega de un estudiante.
Instrucciones de la tarea: "${o==null?void 0:o.instrucciones}"
Comentario del estudiante: "${b.observacionesEstudiante||"Sin comentarios."}"`.trim();try{const E=(await(await new Bs(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text().replace(/(\*\*|\*)/g,"");await zV(b.id,E)}catch(S){console.error(S),alert("No se pudo generar la retroalimentación.")}finally{d(null)}},p=b=>b.map(y=>{var w;return((w=r.find(S=>S.id===y))==null?void 0:w.nombreCompleto)||y}).join(", ");return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",p(e.docentesResponsables)]})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(bw,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),l.jsx("select",{value:o.id,onChange:b=>{var y;return c(((y=e.tareas)==null?void 0:y.find(w=>w.id===b.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(b=>l.jsxs("option",{value:b.id,children:["Tarea ",b.numero,": ",b.instrucciones]},b.id))})]}),l.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(b=>{const y=s.find(w=>w.tareaId===o.id&&w.estudianteId===b.id);return l.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(b.nombreCompleto||"NA").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:b.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:b.curso})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[l.jsx(oP,{className:"w-4 h-4"})," Entregado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[l.jsx(kd,{className:"w-4 h-4"})," Pendiente"]})})]}),y?l.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),l.jsx(ew,{href:y.enlaceUrl})]}),y.archivoAdjunto&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),l.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[l.jsx(u4,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:w=>zV(y.id,w.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),l.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(H_,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):l.jsxs("div",{className:"text-center py-6",children:[l.jsx(kd,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},b.id)})})]}):l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"text-center",children:[l.jsx(kd,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),l.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[l.jsx(bw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},WDe=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:i})=>{const[o,c]=k.useState(null),u="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",d=h=>h.map(p=>{var g;return((g=i.find(x=>x.id===p))==null?void 0:g.nombreCompleto)||p}).join(", "),f=async h=>{var p,g,x;if(!e.trim()){alert("Ingrese una descripción del proyecto.");return}c(h);try{const y=new Bs(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const w=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,S=await y.generateContent(w);n(S.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const w=`Genera 5 a 7 indicadores de logro observables.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,S=await y.generateContent(w);a(S.response.text().replace(/(\*\*|\*)/g,""))}else{const w=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,j=(await y.generateContent(w)).response.text().replace(/^```json\s*|```\s*$/g,""),N=JSON.parse(j);s({actividades:(p=N.actividades)==null?void 0:p.map(F=>({...F,id:crypto.randomUUID()})),fechasClave:(g=N.fechasClave)==null?void 0:g.map(F=>({id:crypto.randomUUID(),nombre:F.nombre,fecha:F.fecha,recursoUrl:F.recursoUrl})),tareas:(x=N.tareas)==null?void 0:x.map((F,E)=>({...F,id:crypto.randomUUID(),numero:E+1}))})}}catch(b){console.error(b),alert("No se pudo completar la generación con IA.")}finally{c(null)}};return l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:o!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:o==="obj"?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(H_,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),l.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:o!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:o==="ind"?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(H_,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),l.jsx("button",{type:"button",onClick:()=>f("est"),disabled:o!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:o==="est"?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",l.jsx("span",{children:"Generando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(H_,{className:"w-4 h-4"})," ",l.jsx("span",{children:"Estructura IA"})]})})]})},XDe=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=k.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[i,o]=k.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=k.useState({nombre:"",fecha:"",recursoUrl:""}),[d,f]=k.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""});k.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const h=w=>s(S=>({...S,[w.target.name]:w.target.value})),p=(w,S,j)=>s(N=>({...N,contenidosPorAsignatura:N.contenidosPorAsignatura.map(F=>F.asignatura===w?{...F,[S]:j}:F)})),g=(w,S)=>s(j=>({...j,contenidosPorAsignatura:j.contenidosPorAsignatura.map(N=>N.asignatura===w?{...N,habilidades:N.habilidades.includes(S)?N.habilidades.filter(F=>F!==S):[...N.habilidades,S]}:N)})),x=()=>{if(!i.nombre||!i.fechaInicio||!i.fechaFin){alert("Nombre y fechas son obligatorios.");return}s(w=>({...w,actividades:[...w.actividades||[],{...i,id:crypto.randomUUID()}]})),o({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},b=()=>{!c.nombre||!c.fecha||(s(w=>({...w,fechasClave:[...w.fechasClave||[],{...c,id:crypto.randomUUID()}]})),u({nombre:"",fecha:"",recursoUrl:""}))},y=()=>{var S;if(!d.instrucciones||!d.fechaEntrega){alert("Instrucciones y fecha son obligatorios.");return}const w={id:crypto.randomUUID(),numero:(((S=a.tareas)==null?void 0:S.length)||0)+1,...d};s(j=>({...j,tareas:[...j.tareas||[],w]})),f({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return l.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:l.jsx(Qv,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx(up,{icon:l.jsx(Zf,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",aiButton:l.jsx(WDe,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:w=>s(S=>({...S,objetivos:w})),onIndicadores:w=>s(S=>({...S,indicadoresLogro:w})),onEstructura:w=>s(S=>{var j,N,F;return{...S,actividades:(j=w.actividades)!=null&&j.length?w.actividades:S.actividades,fechasClave:(N=w.fechasClave)!=null&&N.length?w.fechasClave:S.fechasClave,tareas:(F=w.tareas)!=null&&F.length?w.tareas:S.tareas}})}),children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),l.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:h,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),l.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:h,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),l.jsx(up,{icon:l.jsx(Bd,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:l.jsx("div",{className:"space-y-3",children:l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(S=>({...S,docentesResponsables:S.docentesResponsables.includes(w.id)?S.docentesResponsables.filter(j=>j!==w.id):[...S.docentesResponsables,w.id]}))},className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(w.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(w.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:l.jsx(Ew,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm",children:w.nombreCompleto}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:w.email})]})]})},w.id))})})}),l.jsx(up,{icon:l.jsx(VS,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:Ks.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(S=>({...S,cursos:S.cursos.includes(w)?S.cursos.filter(j=>j!==w):[...S.cursos,w]}))},className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(w)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(up,{icon:l.jsx(fh,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Ki.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(S=>{const j=S.asignaturas,N=j.includes(w)?j.filter(E=>E!==w):[...j,w];let F=S.contenidosPorAsignatura;return N.includes(w)&&!j.includes(w)&&(F=[...F,{asignatura:w,contenidos:"",habilidades:[]}]),!N.includes(w)&&j.includes(w)&&(F=F.filter(E=>E.asignatura!==w)),{...S,asignaturas:N,contenidosPorAsignatura:F}})},className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(w)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})]}),a.contenidosPorAsignatura.length>0&&l.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(w=>l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[l.jsx(fh,{className:"w-4 h-4"})," ",w.asignatura]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),l.jsx("textarea",{value:w.contenidos,onChange:S=>p(w.asignatura,"contenidos",S.target.value),placeholder:`Detalle los contenidos específicos de ${w.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),l.jsx("div",{className:"space-y-2",children:Object.entries(rF).map(([S,j])=>l.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[l.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[S,":"]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:j.map(N=>l.jsx("button",{type:"button",onClick:()=>g(w.asignatura,N),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${w.habilidades.includes(N)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:N},N))})]},S))}),w.habilidades.length>0&&l.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[l.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:w.habilidades.map(S=>l.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:S},S))})]})]})]})]},w.asignatura))]})]})}),l.jsx(up,{icon:l.jsx(ree,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:l.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:h,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsx(up,{icon:l.jsx(Hy,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",children:l.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:h,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsxs(up,{icon:l.jsx($f,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(M0,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),l.jsx("input",{value:i.nombre,onChange:w=>o({...i,nombre:w.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),l.jsx("input",{type:"date",value:i.fechaInicio,onChange:w=>o({...i,fechaInicio:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),l.jsx("input",{type:"date",value:i.fechaFin,onChange:w=>o({...i,fechaFin:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:i.recursoUrl||"",onChange:w=>o({...i,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("button",{type:"button",onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(eh,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.actividades.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Actividades Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.actividades.map(w=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[w.fechaInicio," - ",w.fechaFin]}),l.jsx(ew,{href:w.recursoUrl})]})},w.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(oP,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),l.jsx("input",{value:c.nombre,onChange:w=>u({...c,nombre:w.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",value:c.fecha,onChange:w=>u({...c,fecha:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"sm:col-span-1",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:c.recursoUrl||"",onChange:w=>u({...c,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("button",{type:"button",onClick:b,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(eh,{className:"w-4 h-4"})," Agregar"]})]}),!!a.fechasClave.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Fechas Clave Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.fechasClave.map(w=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:w.fecha}),l.jsx(ew,{href:w.recursoUrl})]})},w.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(JZ,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-5",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones de la Tarea"}),l.jsx("input",{value:d.instrucciones,onChange:w=>f({...d,instrucciones:w.target.value}),placeholder:"Descripción detallada de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),l.jsx("input",{type:"date",value:d.fechaEntrega,onChange:w=>f({...d,fechaEntrega:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:d.recursoUrl||"",onChange:w=>f({...d,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("button",{type:"button",onClick:y,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(eh,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.tareas.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Tareas Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.tareas.map(w=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",w.numero]}),l.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:w.instrucciones})]}),l.jsxs("div",{className:"text-right space-y-1",children:[l.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:w.fechaEntrega}),"recursoUrl"in w?l.jsx(ew,{href:w.recursoUrl}):l.jsx("span",{className:"text-slate-400 text-xs",children:"—"})]})]})},w.id))})]})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),l.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},$V=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState(!0),[i,o]=k.useState("list"),[c,u]=k.useState(null),[d,f]=k.useState(null),[h,p]=k.useState(null),[g,x]=k.useState("all"),b=k.useMemo(()=>g==="all"?e:e.filter(_=>_.id===g),[e,g]);k.useEffect(()=>{s(!0);const _=Sne(P=>{const D=P.filter(I=>I.profile===Kt.PROFESORADO);n(D)}),B=HDe(P=>{const D=P.map(I=>({...I,docentesResponsables:Array.isArray(I.docentesResponsables)?I.docentesResponsables:[I.docentesResponsables].filter(Boolean),contenidosPorAsignatura:I.contenidosPorAsignatura||[],actividades:I.actividades||[],fechasClave:I.fechasClave||[]}));t(D),s(!1)});return()=>{_(),B()}},[]);const y=k.useCallback(async(_,B)=>{const P=e.find(I=>I.id===_);if(!P)return;const D={...P,actividades:(P.actividades||[]).map(I=>I.id===B.id?B:I)};await VV(_,D)},[e]),w=async _=>{try{const B=_.id&&String(_.id).length>0,P={..._};if(B){const{id:D,...I}=P;await VV(_.id,I)}else delete P.id,await VDe(P);o("list"),u(null)}catch(B){console.error("Error al guardar la planificación:",B),alert("No se pudo guardar la planificación.")}},S=_=>{u(_),o("form")},j=async _=>{if(!_){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await zDe(_)}catch(B){console.error(B),alert("No se pudo eliminar la planificación.")}},N=()=>{u(null),o("form")},F=async _=>{f(_.id);const B=new vr("p","mm","a4"),P=15,I=B.internal.pageSize.getWidth()-P*2;let U=P+20;B.setFont("helvetica","bold"),B.setFontSize(22),B.setTextColor(0);const R=B.splitTextToSize(_.nombreProyecto,I);B.text(R,P,U),U+=R.length*8+10,go(B,{startY:U,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(X=>X.map(V=>{var z;return((z=r.find(q=>q.id===V))==null?void 0:z.nombreCompleto)||V}).join(", "))(_.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},_.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},_.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),U=B.lastAutoTable.finalY+15;const H=(X,V)=>{if(!V||Array.isArray(V)&&!V.length||typeof V=="string"&&!V.trim())return;const z=Array.isArray(V)?V.join(", "):String(V),q=B.splitTextToSize(z,I);B.setFont("helvetica","bold"),B.setFontSize(14),B.setTextColor(40),B.text(X,P,U),U+=8,B.setFont("helvetica","normal"),B.setFontSize(11),B.setTextColor(80),B.text(q,P,U),U+=q.length*5+10};if(H("Descripción del Proyecto",_.descripcionProyecto),H("Objetivos de Aprendizaje",_.objetivos),H("Indicadores de Logro",_.indicadoresLogro),_.contenidosPorAsignatura&&_.contenidosPorAsignatura.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Contenidos por Asignatura",P,U),U+=10,_.contenidosPorAsignatura.forEach(X=>{var V;if(B.setFont("helvetica","bold"),B.setFontSize(11),B.text(`${X.asignatura}:`,P,U),U+=6,B.setFont("helvetica","normal"),B.setFontSize(11),X.contenidos){const z=B.splitTextToSize(`Contenidos: ${X.contenidos}`,I-10);B.text(z,P+5,U),U+=z.length*5+3}if((V=X.habilidades)!=null&&V.length){const z=`Habilidades: ${X.habilidades.join(", ")}`,q=B.splitTextToSize(z,I-10);B.text(q,P+5,U),U+=q.length*5+8}}),U+=10),_.actividades&&_.actividades.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Actividades",P,U),U+=10,go(B,{startY:U,head:[["Actividad","Inicio","Fin","Recurso"]],body:_.actividades.map(X=>[X.nombre,X.fechaInicio,X.fechaFin,X.recursoUrl||"—"]),theme:"striped"}),U=B.lastAutoTable.finalY+10),_.fechasClave&&_.fechasClave.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Fechas Clave",P,U),U+=10,go(B,{startY:U,head:[["Hito","Fecha","Recurso"]],body:_.fechasClave.map(X=>[X.nombre,X.fecha,X.recursoUrl||"—"]),theme:"striped"}),U=B.lastAutoTable.finalY+10),_.tareas&&_.tareas.length>0){const X=_.tareas.map(V=>[String(V.numero||""),V.instrucciones,V.fechaEntrega,V.recursoUrl||"—"]);B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Tareas para Estudiantes",P,U),U+=10,go(B,{startY:U,head:[["#","Instrucciones","Entrega","Recurso"]],body:X,theme:"striped",headStyles:{fillColor:[52,73,94]}})}B.save(`Proyecto_${_.nombreProyecto.replace(/\s/g,"_")}.pdf`),f(null)},E=_=>_.map(B=>{var P;return((P=r.find(D=>D.id===B))==null?void 0:P.nombreCompleto)||B}).join(", ");return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?l.jsx(qDe,{plan:h,onBack:()=>p(null),availableTeachers:r}):i==="dashboard"?l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>o("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),l.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),l.jsx(KDe,{planificaciones:e,onBack:()=>o("list")})]}):i==="form"?l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{o("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),l.jsx("button",{type:"button",onClick:()=>o("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),l.jsx(XDe,{initialPlan:c,onSave:w,onCancel:()=>{o("list"),u(null)},availableTeachers:r})]}):l.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),l.jsx("button",{type:"button",onClick:()=>o("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:l.jsx(Qv,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>o("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[l.jsx(nee,{className:"w-5 h-5"})," Ver Dashboard"]}),l.jsxs("button",{type:"button",onClick:N,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[l.jsx(eh,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:l.jsx(Qv,{className:"w-12 h-12 text-slate-400"})}),l.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),l.jsxs("button",{type:"button",onClick:N,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(eh,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(_=>l.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[l.jsx("div",{className:"flex justify-between items-start mb-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:_.nombreProyecto}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(VS,{className:"w-4 h-4"}),l.jsxs("span",{children:["Cursos: ",_.cursos.join(", ")]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(Bd,{className:"w-4 h-4"}),l.jsxs("span",{children:["Profesores: ",E(_.docentesResponsables)]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(fh,{className:"w-4 h-4"}),l.jsxs("span",{children:["Asignaturas: ",_.asignaturas.length]})]})]})]})}),!!_.descripcionProyecto&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:_.descripcionProyecto}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>p(_),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[l.jsx(oP,{className:"w-4 h-4"})," Entregas"]}),l.jsxs("button",{type:"button",onClick:()=>F(_),disabled:d===_.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===_.id?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):l.jsx(u4,{className:"w-4 h-4"}),"PDF"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>S(_),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:l.jsx(tee,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>j(_.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:l.jsx(Fc,{className:"w-4 h-4"})})]})]})]},_.id))})]}),e.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(wye,{className:"w-5 h-5 text-slate-600"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),l.jsxs("select",{value:g,onChange:_=>x(_.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[l.jsx("option",{value:"all",children:"Todos"}),e.map(_=>l.jsx("option",{value:_.id,children:_.nombreProyecto},_.id))]})]})]}),l.jsx("div",{id:"gantt-container-vertical",children:l.jsx(GDe,{planificaciones:b,onActivityUpdate:y})})]})]})};function Nne(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Nne(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function xn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Nne(e))&&(n&&(n+=" "),n+=t);return n}var l3={},c3={},GV;function YDe(){return GV||(GV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(c3)),c3}var u3={},KV;function kne(){return KV||(KV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(u3)),u3}var d3={},qV;function Bne(){return qV||(qV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(d3)),d3}var A3={},WV;function xR(){return WV||(WV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",o="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];o?u==="\\"&&s+1<a?(s++,i+=r[s]):u===o?o="":i+=u:c?u==='"'||u==="'"?o=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(A3)),A3}var XV;function vR(){return XV||(XV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YDe(),r=kne(),n=Bne(),a=xR();function s(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?s(o,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function i(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(l3)),l3}var f3,YV;function JDe(){return YV||(YV=1,f3=vR().get),f3}var ZDe=JDe();const Cm=yl(ZDe);var h3={exports:{}},ra={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JV;function ePe(){if(JV)return ra;JV=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function S(N){if(typeof N=="object"&&N!==null){var F=N.$$typeof;switch(F){case t:switch(N=N.type,N){case c:case u:case n:case s:case a:case f:return N;default:switch(N=N&&N.$$typeof,N){case o:case d:case g:case p:case i:return N;default:return F}}case r:return F}}}function j(N){return S(N)===u}return ra.AsyncMode=c,ra.ConcurrentMode=u,ra.ContextConsumer=o,ra.ContextProvider=i,ra.Element=t,ra.ForwardRef=d,ra.Fragment=n,ra.Lazy=g,ra.Memo=p,ra.Portal=r,ra.Profiler=s,ra.StrictMode=a,ra.Suspense=f,ra.isAsyncMode=function(N){return j(N)||S(N)===c},ra.isConcurrentMode=j,ra.isContextConsumer=function(N){return S(N)===o},ra.isContextProvider=function(N){return S(N)===i},ra.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===t},ra.isForwardRef=function(N){return S(N)===d},ra.isFragment=function(N){return S(N)===n},ra.isLazy=function(N){return S(N)===g},ra.isMemo=function(N){return S(N)===p},ra.isPortal=function(N){return S(N)===r},ra.isProfiler=function(N){return S(N)===s},ra.isStrictMode=function(N){return S(N)===a},ra.isSuspense=function(N){return S(N)===f},ra.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===n||N===u||N===s||N===a||N===f||N===h||typeof N=="object"&&N!==null&&(N.$$typeof===g||N.$$typeof===p||N.$$typeof===i||N.$$typeof===o||N.$$typeof===d||N.$$typeof===b||N.$$typeof===y||N.$$typeof===w||N.$$typeof===x)},ra.typeOf=S,ra}var ZV;function tPe(){return ZV||(ZV=1,h3.exports=ePe()),h3.exports}var rPe=tPe(),Wi=e=>e===0?0:e>0?1:-1,Rc=e=>typeof e=="number"&&e!=+e,Np=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ur=e=>(typeof e=="number"||e instanceof Number)&&!Rc(e),WA=e=>ur(e)||typeof e=="string",nPe=0,Vw=e=>{var t=++nPe;return"".concat(e||"").concat(t)},bl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&typeof t!="string")return n;var s;if(Np(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return Rc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Tne=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},ev=(e,t)=>ur(e)&&ur(t)?r=>e+r*(t-e):()=>t;function bx(e,t,r){return ur(e)&&ur(t)?e+r*(t-e):t}function aPe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Cm(n,t))===r)}var ks=e=>e===null||typeof e>"u",P2=e=>ks(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),sPe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function bR(e){if(typeof e!="string")return!1;var t=sPe;return t.includes(e)}var iPe=["viewBox","children"],ez=["points","pathLength"],m3={svg:iPe,polygon:ez,polyline:ez},yR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(k.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{bR(a)&&(n[a]=s=>r[a](r,s))}),n},oPe=(e,t,r)=>n=>(e(t,r,n),null),Bg=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];bR(a)&&typeof s=="function"&&(n||(n={}),n[a]=oPe(s,t,r))}),n},lPe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function jne(e){if(typeof e!="string")return!1;var t=lPe;return t.includes(e)}function al(e){var t=Object.entries(e).filter(r=>{var[n]=r;return jne(n)});return Object.fromEntries(t)}var tz=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",rz=null,p3=null,Ine=e=>{if(e===rz&&Array.isArray(p3))return p3;var t=[];return k.Children.forEach(e,r=>{ks(r)||(rPe.isFragment(r)?t=t.concat(Ine(r.props.children)):t.push(r))}),p3=t,rz=e,t};function R2(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>tz(a)):n=[tz(t)],Ine(e).forEach(a=>{var s=Cm(a,"type.displayName")||Cm(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var cPe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(m3==null?void 0:m3[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&s.includes(t)||jne(t)),c=!!r&&bR(t);return i||o||c},Wn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(k.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;cPe((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},uPe=["children","width","height","viewBox","className","style","title","desc"];function nF(){return nF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nF.apply(null,arguments)}function dPe(e,t){if(e==null)return{};var r,n,a=APe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function APe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wR=k.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:c,desc:u}=e,d=dPe(e,uPe),f=s||{width:n,height:a,x:0,y:0},h=xn("recharts-surface",i);return k.createElement("svg",nF({},Wn(d,!0,"svg"),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),k.createElement("title",null,c),k.createElement("desc",null,u),r)}),fPe=["children","className"];function aF(){return aF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aF.apply(null,arguments)}function hPe(e,t){if(e==null)return{};var r,n,a=mPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cs=k.forwardRef((e,t)=>{var{children:r,className:n}=e,a=hPe(e,fPe),s=xn("recharts-layer",n);return k.createElement("g",aF({className:s},Wn(a,!0),{ref:t}),r)}),ER=YX(),Fne=k.createContext(null),pPe=()=>k.useContext(Fne);function Oa(e){return function(){return e}}const One=Math.cos,h5=Math.sin,Ud=Math.sqrt,m5=Math.PI,F4=2*m5,sF=Math.PI,iF=2*sF,pp=1e-6,gPe=iF-pp;function Dne(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function xPe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Dne;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class vPe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Dne:xPe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,c=n-t,u=a-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>pp)if(!(Math.abs(f*c-u*d)>pp)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,g=a-o,x=c*c+u*u,b=p*p+g*g,y=Math.sqrt(x),w=Math.sqrt(h),S=s*Math.tan((sF-Math.acos((x+h-b)/(2*y*w)))/2),j=S/w,N=S/y;Math.abs(j-1)>pp&&this._append`L${t+j*d},${r+j*f}`,this._append`A${s},${s},0,0,${+(f*p>d*g)},${this._x1=t+N*c},${this._y1=r+N*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>pp||Math.abs(this._y1-d)>pp)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%iF+iF),h>gPe?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>pp&&this._append`A${n},${n},0,${+(h>=sF)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function CR(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new vPe(t)}function _R(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pne(e){this._context=e}Pne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function O4(e){return new Pne(e)}function Rne(e){return e[0]}function Lne(e){return e[1]}function Mne(e,t){var r=Oa(!0),n=null,a=O4,s=null,i=CR(o);e=typeof e=="function"?e:e===void 0?Rne:Oa(e),t=typeof t=="function"?t:t===void 0?Lne:Oa(t);function o(c){var u,d=(c=_R(c)).length,f,h=!1,p;for(n==null&&(s=a(p=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(p)return s=null,p+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Oa(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Oa(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Oa(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),o):n},o}function FC(e,t,r){var n=null,a=Oa(!0),s=null,i=O4,o=null,c=CR(u);e=typeof e=="function"?e:e===void 0?Rne:Oa(+e),t=typeof t=="function"?t:Oa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Lne:Oa(+r);function u(f){var h,p,g,x=(f=_R(f)).length,b,y=!1,w,S=new Array(x),j=new Array(x);for(s==null&&(o=i(w=c())),h=0;h<=x;++h){if(!(h<x&&a(b=f[h],h,f))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(S[g],j[g]);o.lineEnd(),o.areaEnd()}y&&(S[h]=+e(b,h,f),j[h]=+t(b,h,f),o.point(n?+n(b,h,f):S[h],r?+r(b,h,f):j[h]))}if(w)return o=null,w+""||null}function d(){return Mne().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Oa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Oa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Oa(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(o=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=o=null:o=i(s=f),u):s},u}class Une{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function bPe(e){return new Une(e,!0)}function yPe(e){return new Une(e,!1)}const SR={draw(e,t){const r=Ud(t/m5);e.moveTo(r,0),e.arc(0,0,r,0,F4)}},wPe={draw(e,t){const r=Ud(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Qne=Ud(1/3),EPe=Qne*2,CPe={draw(e,t){const r=Ud(t/EPe),n=r*Qne;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},_Pe={draw(e,t){const r=Ud(t),n=-r/2;e.rect(n,n,r,r)}},SPe=.8908130915292852,Hne=h5(m5/10)/h5(7*m5/10),NPe=h5(F4/10)*Hne,kPe=-One(F4/10)*Hne,BPe={draw(e,t){const r=Ud(t*SPe),n=NPe*r,a=kPe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=F4*s/5,o=One(i),c=h5(i);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},g3=Ud(3),TPe={draw(e,t){const r=-Ud(t/(g3*3));e.moveTo(0,r*2),e.lineTo(-g3*r,-r),e.lineTo(g3*r,-r),e.closePath()}},fu=-.5,hu=Ud(3)/2,oF=1/Ud(12),jPe=(oF/2+1)*3,IPe={draw(e,t){const r=Ud(t/jPe),n=r/2,a=r*oF,s=n,i=r*oF+r,o=-s,c=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,c),e.lineTo(fu*n-hu*a,hu*n+fu*a),e.lineTo(fu*s-hu*i,hu*s+fu*i),e.lineTo(fu*o-hu*c,hu*o+fu*c),e.lineTo(fu*n+hu*a,fu*a-hu*n),e.lineTo(fu*s+hu*i,fu*i-hu*s),e.lineTo(fu*o+hu*c,fu*c-hu*o),e.closePath()}};function FPe(e,t){let r=null,n=CR(a);e=typeof e=="function"?e:Oa(e||SR),t=typeof t=="function"?t:Oa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Oa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function p5(){}function g5(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Vne(e){this._context=e}Vne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:g5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:g5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function OPe(e){return new Vne(e)}function zne(e){this._context=e}zne.prototype={areaStart:p5,areaEnd:p5,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:g5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DPe(e){return new zne(e)}function $ne(e){this._context=e}$ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:g5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function PPe(e){return new $ne(e)}function Gne(e){this._context=e}Gne.prototype={areaStart:p5,areaEnd:p5,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function RPe(e){return new Gne(e)}function nz(e){return e<0?-1:1}function az(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(nz(s)+nz(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function sz(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function x3(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function x5(e){this._context=e}x5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:x3(this,this._t0,sz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,x3(this,sz(this,r=az(this,e,t)),r);break;default:x3(this,this._t0,r=az(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Kne(e){this._context=new qne(e)}(Kne.prototype=Object.create(x5.prototype)).point=function(e,t){x5.prototype.point.call(this,t,e)};function qne(e){this._context=e}qne.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function LPe(e){return new x5(e)}function MPe(e){return new Kne(e)}function Wne(e){this._context=e}Wne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=iz(e),a=iz(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function iz(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function UPe(e){return new Wne(e)}function D4(e,t){this._context=e,this._t=t}D4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function QPe(e){return new D4(e,.5)}function HPe(e){return new D4(e,0)}function VPe(e){return new D4(e,1)}function Wv(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,o=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function lF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function zPe(e,t){return e[t]}function $Pe(e){const t=[];return t.key=e,t}function GPe(){var e=Oa([]),t=lF,r=Wv,n=zPe;function a(s){var i=Array.from(e.apply(this,arguments),$Pe),o,c=i.length,u=-1,d;for(const f of s)for(o=0,++u;o<c;++o)(i[o][u]=[0,+n(f,i[o].key,u,s)]).data=f;for(o=0,d=_R(t(i));o<c;++o)i[d[o]].index=o;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Oa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?lF:typeof s=="function"?s:Oa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??Wv,a):r},a}function KPe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}Wv(e,t)}}function qPe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,o=0;i<a;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}Wv(e,t)}}function WPe(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var o=0,c=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var x=e[t[g]],b=x[n][1]||0,y=x[n-1][1]||0;p+=b-y}c+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Wv(e,t)}}var XPe=["type","size","sizeType"];function cF(){return cF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cF.apply(null,arguments)}function oz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oz(Object(r),!0).forEach(function(n){YPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YPe(e,t,r){return(t=JPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JPe(e){var t=ZPe(e,"string");return typeof t=="symbol"?t:t+""}function ZPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eRe(e,t){if(e==null)return{};var r,n,a=tRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xne={symbolCircle:SR,symbolCross:wPe,symbolDiamond:CPe,symbolSquare:_Pe,symbolStar:BPe,symbolTriangle:TPe,symbolWye:IPe},rRe=Math.PI/180,nRe=e=>{var t="symbol".concat(P2(e));return Xne[t]||SR},aRe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*rRe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},sRe=(e,t)=>{Xne["symbol".concat(P2(e))]=t},NR=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=eRe(e,XPe),s=lz(lz({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var f=nRe(t),h=FPe().type(f).size(aRe(r,n,t));return h()},{className:o,cx:c,cy:u}=s,d=Wn(s,!0);return c===+c&&u===+u&&r===+r?k.createElement("path",cF({},d,{className:xn("recharts-symbols",o),transform:"translate(".concat(c,", ").concat(u,")"),d:i()})):null};NR.registerSymbol=sRe;function uF(){return uF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uF.apply(null,arguments)}function cz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cz(Object(r),!0).forEach(function(n){kR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kR(e,t,r){return(t=oRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oRe(e){var t=lRe(e,"string");return typeof t=="symbol"?t:t+""}function lRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mu=32;class BR extends k.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=mu/2,s=mu/6,i=mu/3,o=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return k.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:mu,y2:a,className:"recharts-legend-icon"});if(c==="line")return k.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(mu,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return k.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(mu/8,"h").concat(mu,"v").concat(mu*3/4,"h").concat(-mu,"z"),className:"recharts-legend-icon"});if(k.isValidElement(t.legendIcon)){var u=iRe({},t);return delete u.legendIcon,k.cloneElement(t.legendIcon,u)}return k.createElement(NR,{fill:o,cx:a,cy:a,size:mu,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=this.props,o={x:0,y:0,width:mu,height:mu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,p=xn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=h?h(d.value,d,f):d.value;return k.createElement("li",uF({className:p,style:c,key:"legend-item-".concat(f)},Bg(this.props,d,f)),k.createElement(wR,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,i)),k.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return k.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}kR(BR,"displayName","Legend");kR(BR,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var v3={},b3={},uz;function cRe(){return uz||(uz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],o=n(i);a.has(o)||a.set(o,i)}return Array.from(a.values())}e.uniqBy=t}(b3)),b3}var y3={},dz;function P4(){return dz||(dz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(y3)),y3}var w3={},E3={},C3={},Az;function uRe(){return Az||(Az=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(C3)),C3}var fz;function TR(){return fz||(fz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uRe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(E3)),E3}var _3={},hz;function dRe(){return hz||(hz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(_3)),_3}var mz;function ARe(){return mz||(mz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TR(),r=dRe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(w3)),w3}var S3={},N3={},pz;function fRe(){return pz||(pz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vR();function r(n){return function(a){return t.get(a,n)}}e.property=r}(N3)),N3}var k3={},B3={},T3={},j3={},gz;function Yne(){return gz||(gz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(j3)),j3}var I3={},xz;function Jne(){return xz||(xz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(I3)),I3}var F3={},vz;function jR(){return vz||(vz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(F3)),F3}var bz;function hRe(){return bz||(bz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IR(),r=Yne(),n=Jne(),a=jR();function s(f,h,p){return typeof p!="function"?t.isMatch(f,h):i(f,h,function g(x,b,y,w,S,j){const N=p(x,b,y,w,S,j);return N!==void 0?!!N:i(x,b,g,j)},new Map)}function i(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,p,g);case"function":return Object.keys(h).length>0?i(f,{...h},p,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function o(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,g);if(h instanceof Map)return c(f,h,p,g);if(h instanceof Set)return d(f,h,p,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let b=0;b<x.length;b++){const y=x[b];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!p(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,b]of h.entries()){const y=f.get(x);if(p(y,b,x,f,h,g)===!1)return!1}return!0}function u(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let b=0;b<h.length;b++){const y=h[b];let w=!1;for(let S=0;S<f.length;S++){if(x.has(S))continue;const j=f[S];let N=!1;if(p(j,y,b,f,h,g)&&(N=!0),N){x.add(S),w=!0;break}}if(!w)return!1}return!0}function d(f,h,p,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,g):!1}e.isMatchWith=s,e.isSetMatch=d}(T3)),T3}var yz;function IR(){return yz||(yz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hRe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(B3)),B3}var O3={},D3={},P3={},wz;function Zne(){return wz||(wz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(P3)),P3}var R3={},Ez;function FR(){return Ez||(Ez=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(R3)),R3}var L3={},Cz;function OR(){return Cz||(Cz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",g="[object Error]",x="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",S="[object Uint32Array]",j="[object BigUint64Array]",N="[object Int8Array]",F="[object Int16Array]",E="[object Int32Array]",_="[object BigInt64Array]",B="[object Float32Array]",P="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=_,e.bigUint64ArrayTag=j,e.booleanTag=a,e.dataViewTag=x,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=B,e.float64ArrayTag=P,e.functionTag=f,e.int16ArrayTag=F,e.int32ArrayTag=E,e.int8ArrayTag=N,e.mapTag=c,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=w,e.uint32ArrayTag=S,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(L3)),L3}var M3={},_z;function mRe(){return _z||(_z=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(M3)),M3}var Sz;function eae(){return Sz||(Sz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zne(),r=FR(),n=OR(),a=Jne(),s=mRe();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,p=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,p);if(x!=null)return x;if(a.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const b=new Array(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;p.set(d,b);for(const[y,w]of d)b.set(y,o(w,y,h,p,g));return b}if(d instanceof Set){const b=new Set;p.set(d,b);for(const y of d)b.add(o(y,void 0,h,p,g));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,b),c(b,d,h,p,g),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return p.set(d,b),c(b,d,h,p,g),b}if(d instanceof Blob){const b=new Blob([d],{type:d.type});return p.set(d,b),c(b,d,h,p,g),b}if(d instanceof Error){const b=new d.constructor;return p.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,c(b,d,h,p,g),b}if(typeof d=="object"&&u(d)){const b=Object.create(Object.getPrototypeOf(d));return p.set(d,b),c(b,d,h,p,g),b}return d}function c(d,f,h=d,p,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<x.length;b++){const y=x[b],w=Object.getOwnPropertyDescriptor(d,y);(w==null||w.writable)&&(d[y]=o(f[y],y,h,p,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=c}(D3)),D3}var Nz;function pRe(){return Nz||(Nz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eae();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(O3)),O3}var kz;function gRe(){return kz||(kz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IR(),r=pRe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(k3)),k3}var U3={},Q3={},H3={},Bz;function xRe(){return Bz||(Bz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eae(),r=OR();function n(a,s){return t.cloneDeepWith(a,(i,o,c,u)=>{const d=s==null?void 0:s(i,o,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(H3)),H3}var Tz;function vRe(){return Tz||(Tz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xRe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(Q3)),Q3}var V3={},z3={},jz;function tae(){return jz||(jz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(z3)),z3}var $3={},Iz;function bRe(){return Iz||(Iz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FR();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}($3)),$3}var Fz;function yRe(){return Fz||(Fz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kne(),r=tae(),n=bRe(),a=xR();function s(i,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(i==null?void 0:i[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(V3)),V3}var Oz;function wRe(){return Oz||(Oz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IR(),r=Bne(),n=vRe(),a=vR(),s=yRe();function i(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,o);return d===void 0?s.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i}(U3)),U3}var Dz;function DR(){return Dz||(Dz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P4(),r=fRe(),n=gRe(),a=wRe();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(S3)),S3}var Pz;function ERe(){return Pz||(Pz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cRe(),r=P4(),n=ARe(),a=DR();function s(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(o)):[]}e.uniqBy=s}(v3)),v3}var G3,Rz;function CRe(){return Rz||(Rz=1,G3=ERe().uniqBy),G3}var _Re=CRe();const Lz=yl(_Re);function rae(e,t,r){return t===!0?Lz(e,r):typeof t=="function"?Lz(e,t):e}var K3={exports:{}},q3={},W3={exports:{}},X3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mz;function SRe(){if(Mz)return X3;Mz=1;var e=m1();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var p=h(),g=n({inst:{value:p,getSnapshot:h}}),x=g[0].inst,b=g[1];return s(function(){x.value=p,x.getSnapshot=h,c(x)&&b({inst:x})},[f,p,h]),a(function(){return c(x)&&b({inst:x}),f(function(){c(x)&&b({inst:x})})},[f]),i(p),p}function c(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!r(f,p)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return X3.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,X3}var Uz;function NRe(){return Uz||(Uz=1,W3.exports=SRe()),W3.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qz;function kRe(){if(Qz)return q3;Qz=1;var e=m1(),t=NRe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return q3.useSyncExternalStoreWithSelector=function(u,d,f,h,p){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=o(function(){function y(F){if(!w){if(w=!0,S=F,F=h(F),p!==void 0&&x.hasValue){var E=x.value;if(p(E,F))return j=E}return j=F}if(E=j,n(S,F))return E;var _=h(F);return p!==void 0&&p(E,_)?(S=F,E):(S=F,j=_)}var w=!1,S,j,N=f===void 0?null:f;return[function(){return y(d())},N===null?void 0:function(){return y(N())}]},[d,f,h,p]);var b=a(u,g[0],g[1]);return i(function(){x.hasValue=!0,x.value=b},[b]),c(b),b},q3}var Hz;function BRe(){return Hz||(Hz=1,K3.exports=kRe()),K3.exports}var nae=BRe();const TRe=yl(nae);var PR=k.createContext(null),jRe=e=>e,za=()=>{var e=k.useContext(PR);return e?e.store.dispatch:jRe},X_=()=>{},IRe=()=>X_,FRe=(e,t)=>e===t;function sr(e){var t=k.useContext(PR);return nae.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:IRe,t?t.store.getState:X_,t?t.store.getState:X_,t?e:X_,FRe)}function ORe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function DRe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function PRe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Vz=e=>Array.isArray(e)?e:[e];function RRe(e){const t=Array.isArray(e[0])?e[0]:e;return PRe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function LRe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var MRe=class{constructor(e){this.value=e}deref(){return this.value}},URe=typeof WeakRef<"u"?WeakRef:MRe,QRe=0,zz=1;function OC(){return{s:QRe,v:void 0,o:null,p:null}}function aae(e,t={}){let r=OC();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var f;let o=r;const{length:c}=arguments;for(let h=0,p=c;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const b=x.get(g);b===void 0?(o=OC(),x.set(g,o)):o=b}else{let x=o.p;x===null&&(o.p=x=new Map);const b=x.get(g);b===void 0?(o=OC(),x.set(g,o)):o=b}}const u=o;let d;if(o.s===zz)d=o.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new URe(d):d}return u.s=zz,u.v=d,d}return i.clearCache=()=>{r=OC(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function HRe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,o,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),ORe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:p=aae,argsMemoizeOptions:g=[]}=d,x=Vz(h),b=Vz(g),y=RRe(a),w=f(function(){return s++,u.apply(null,arguments)},...x),S=p(function(){i++;const N=LRe(y,arguments);return o=w.apply(null,N),o},...b);return Object.assign(S,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var ut=HRe(aae),VRe=Object.assign((e,t=ut)=>{DRe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,c)=>(i[r[c]]=o,i),{}))},{withTypes:()=>VRe}),Y3={},J3={},Z3={},$z;function zRe(){return $z||($z=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),o=t(a);if(i===o&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-i:i-o}return 0};e.compareValues=r}(Z3)),Z3}var ej={},tj={},Gz;function sae(){return Gz||(Gz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(tj)),tj}var Kz;function $Re(){return Kz||(Kz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sae(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(ej)),ej}var qz;function GRe(){return qz||(qz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zRe(),r=$Re(),n=xR();function a(s,i,o,c){if(s==null)return[];o=c?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,g)=>{let x=p;for(let b=0;b<g.length&&x!=null;++b)x=x[g[b]];return x},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:u(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?u(g,p):typeof g=="object"?g[p]:g,f=i.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let x=0;x<f.length;x++){const b=t.compareValues(p.criteria[x],g.criteria[x],o[x]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=a}(J3)),J3}var rj={},Wz;function KRe(){return Wz||(Wz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}e.flatten=t}(rj)),rj}var nj={},Xz;function iae(){return Xz||(Xz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tae(),r=TR(),n=Yne(),a=jR();function s(i,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],i):!1}e.isIterateeCall=s}(nj)),nj}var Yz;function qRe(){return Yz||(Yz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GRe(),r=KRe(),n=iae();function a(s,...i){const o=i.length;return o>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(Y3)),Y3}var aj,Jz;function WRe(){return Jz||(Jz=1,aj=qRe().sortBy),aj}var XRe=WRe();const R4=yl(XRe);var oae=e=>e.legend.settings,YRe=e=>e.legend.size,JRe=e=>e.legend.payload,ZRe=ut([JRe,oae],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?R4(n,r):n});function eLe(){return sr(ZRe)}var DC=1;function lae(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=k.useState({height:0,left:0,top:0,width:0}),n=k.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>DC||Math.abs(i.left-t.left)>DC||Math.abs(i.top-t.top)>DC||Math.abs(i.width-t.width)>DC)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function co(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var tLe=typeof Symbol=="function"&&Symbol.observable||"@@observable",Zz=tLe,sj=()=>Math.random().toString(36).substring(7).split("").join("."),rLe={INIT:`@@redux/INIT${sj()}`,REPLACE:`@@redux/REPLACE${sj()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sj()}`},v5=rLe;function RR(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function cae(e,t,r){if(typeof e!="function")throw new Error(co(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(co(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(co(1));return r(cae)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((b,y)=>{i.set(y,b)}))}function d(){if(c)throw new Error(co(3));return a}function f(b){if(typeof b!="function")throw new Error(co(4));if(c)throw new Error(co(5));let y=!0;u();const w=o++;return i.set(w,b),function(){if(y){if(c)throw new Error(co(6));y=!1,u(),i.delete(w),s=null}}}function h(b){if(!RR(b))throw new Error(co(7));if(typeof b.type>"u")throw new Error(co(8));if(typeof b.type!="string")throw new Error(co(17));if(c)throw new Error(co(9));try{c=!0,a=n(a,b)}finally{c=!1}return(s=i).forEach(w=>{w()}),b}function p(b){if(typeof b!="function")throw new Error(co(10));n=b,h({type:v5.REPLACE})}function g(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(co(11));function w(){const j=y;j.next&&j.next(d())}return w(),{unsubscribe:b(w)}},[Zz](){return this}}}return h({type:v5.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[Zz]:g}}function nLe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:v5.INIT})>"u")throw new Error(co(12));if(typeof r(void 0,{type:v5.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(co(13))})}function uae(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{nLe(r)}catch(s){a=s}return function(i={},o){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],p=i[f],g=h(p,o);if(typeof g>"u")throw o&&o.type,new Error(co(14));u[f]=g,c=c||g!==p}return c=c||n.length!==Object.keys(i).length,c?u:i}}function b5(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function aLe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(co(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},o=e.map(c=>c(i));return s=b5(...o)(a.dispatch),{...a,dispatch:s}}}function dae(e){return RR(e)&&"type"in e&&typeof e.type=="string"}var Aae=Symbol.for("immer-nothing"),e$=Symbol.for("immer-draftable"),Lc=Symbol.for("immer-state");function gd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Xv=Object.getPrototypeOf;function cg(e){return!!e&&!!e[Lc]}function ph(e){var t;return e?fae(e)||Array.isArray(e)||!!e[e$]||!!((t=e.constructor)!=null&&t[e$])||M4(e)||U4(e):!1}var sLe=Object.prototype.constructor.toString();function fae(e){if(!e||typeof e!="object")return!1;const t=Xv(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===sLe}function y5(e,t){L4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function L4(e){const t=e[Lc];return t?t.type_:Array.isArray(e)?1:M4(e)?2:U4(e)?3:0}function dF(e,t){return L4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hae(e,t,r){const n=L4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function iLe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function M4(e){return e instanceof Map}function U4(e){return e instanceof Set}function gp(e){return e.copy_||e.base_}function AF(e,t){if(M4(e))return new Map(e);if(U4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=fae(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Lc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Xv(e),n)}else{const n=Xv(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function LR(e,t=!1){return Q4(e)||cg(e)||!ph(e)||(L4(e)>1&&(e.set=e.add=e.clear=e.delete=oLe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>LR(n,!0))),e}function oLe(){gd(2)}function Q4(e){return Object.isFrozen(e)}var lLe={};function ug(e){const t=lLe[e];return t||gd(0,e),t}var zw;function mae(){return zw}function cLe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function t$(e,t){t&&(ug("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function fF(e){hF(e),e.drafts_.forEach(uLe),e.drafts_=null}function hF(e){e===zw&&(zw=e.parent_)}function r$(e){return zw=cLe(zw,e)}function uLe(e){const t=e[Lc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function n$(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Lc].modified_&&(fF(t),gd(4)),ph(e)&&(e=w5(t,e),t.parent_||E5(t,e)),t.patches_&&ug("Patches").generateReplacementPatches_(r[Lc].base_,e,t.patches_,t.inversePatches_)):e=w5(t,r,[]),fF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Aae?e:void 0}function w5(e,t,r){if(Q4(t))return t;const n=t[Lc];if(!n)return y5(t,(a,s)=>a$(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return E5(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),y5(s,(o,c)=>a$(e,n,a,o,c,r,i)),E5(e,a,!1),r&&e.patches_&&ug("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function a$(e,t,r,n,a,s,i){if(cg(a)){const o=s&&t&&t.type_!==3&&!dF(t.assigned_,n)?s.concat(n):void 0,c=w5(e,a,o);if(hae(r,n,c),cg(c))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(ph(a)&&!Q4(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;w5(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&E5(e,a)}}function E5(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&LR(t,r)}function dLe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:mae(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=MR;r&&(a=[n],s=$w);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}var MR={get(e,t){if(t===Lc)return e;const r=gp(e);if(!dF(r,t))return ALe(e,r,t);const n=r[t];return e.finalized_||!ph(n)?n:n===ij(e.base_,t)?(oj(e),e.copy_[t]=pF(n,e)):n},has(e,t){return t in gp(e)},ownKeys(e){return Reflect.ownKeys(gp(e))},set(e,t,r){const n=pae(gp(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=ij(gp(e),t),s=a==null?void 0:a[Lc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(iLe(r,a)&&(r!==void 0||dF(e.base_,t)))return!0;oj(e),mF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ij(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,oj(e),mF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=gp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){gd(11)},getPrototypeOf(e){return Xv(e.base_)},setPrototypeOf(){gd(12)}},$w={};y5(MR,(e,t)=>{$w[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$w.deleteProperty=function(e,t){return $w.set.call(this,e,t,void 0)};$w.set=function(e,t,r){return MR.set.call(this,e[0],t,r,e[0])};function ij(e,t){const r=e[Lc];return(r?gp(r):e)[t]}function ALe(e,t,r){var a;const n=pae(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function pae(e,t){if(!(t in e))return;let r=Xv(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Xv(r)}}function mF(e){e.modified_||(e.modified_=!0,e.parent_&&mF(e.parent_))}function oj(e){e.copy_||(e.copy_=AF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var fLe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&gd(6),n!==void 0&&typeof n!="function"&&gd(7);let a;if(ph(t)){const s=r$(this),i=pF(t,void 0);let o=!0;try{a=r(i),o=!1}finally{o?fF(s):hF(s)}return t$(s,n),n$(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Aae&&(a=void 0),this.autoFreeze_&&LR(a,!0),n){const s=[],i=[];ug("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else gd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,c=>t(c,...o));let n,a;return[this.produce(t,r,(i,o)=>{n=i,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ph(e)||gd(8),cg(e)&&(e=ah(e));const t=r$(this),r=pF(e,void 0);return r[Lc].isManual_=!0,hF(t),r}finishDraft(e,t){const r=e&&e[Lc];(!r||!r.isManual_)&&gd(9);const{scope_:n}=r;return t$(n,t),n$(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=ug("Patches").applyPatches_;return cg(e)?n(e,t):this.produce(e,a=>n(a,t))}};function pF(e,t){const r=M4(e)?ug("MapSet").proxyMap_(e,t):U4(e)?ug("MapSet").proxySet_(e,t):dLe(e,t);return(t?t.scope_:mae()).drafts_.push(r),r}function ah(e){return cg(e)||gd(10,e),gae(e)}function gae(e){if(!ph(e)||Q4(e))return e;const t=e[Lc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=AF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=AF(e,!0);return y5(r,(n,a)=>{hae(r,n,gae(a))}),t&&(t.finalized_=!1),r}var Mc=new fLe,xae=Mc.produce;Mc.produceWithPatches.bind(Mc);Mc.setAutoFreeze.bind(Mc);Mc.setUseStrictShallowCopy.bind(Mc);Mc.applyPatches.bind(Mc);Mc.createDraft.bind(Mc);Mc.finishDraft.bind(Mc);function vae(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var hLe=vae(),mLe=vae,pLe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?b5:b5.apply(null,arguments)};function Pu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Oc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>dae(n)&&n.type===e,r}var bae=class by extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,by.prototype)}static get[Symbol.species](){return by}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new by(...t[0].concat(this)):new by(...t.concat(this))}};function s$(e){return ph(e)?xae(e,()=>{}):e}function PC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function gLe(e){return typeof e=="boolean"}var xLe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new bae;return r&&(gLe(r)?i.push(hLe):i.push(mLe(r.extraArgument))),i},vLe="RTK_autoBatch",i$=e=>t=>{setTimeout(t,e)},bLe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:i$(10):e.type==="callback"?e.queueNotification:i$(e.timeout),u=()=>{i=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[vLe]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},yLe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new bae(e);return n&&a.push(bLe(typeof n=="object"?n:void 0)),a};function wLe(e){const t=xLe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(RR(r))o=uae(r);else throw new Error(Oc(1));let c;typeof n=="function"?c=n(t):c=t();let u=b5;a&&(u=pLe({trace:!1,...typeof a=="object"&&a}));const d=aLe(...c),f=yLe(d);let h=typeof i=="function"?i(f):f();const p=u(...h);return cae(o,s,p)}function yae(e){const t={},r=[];let n;const a={addCase(s,i){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Oc(28));if(o in t)throw new Error(Oc(29));return t[o]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function ELe(e){return typeof e=="function"}function CLe(e,t){let[r,n,a]=yae(t),s;if(ELe(e))s=()=>s$(e());else{const o=s$(e);s=()=>o}function i(o=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(cg(d)){const p=f(d,c);return p===void 0?d:p}else{if(ph(d))return xae(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=s,i}var _Le="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",SLe=(e=21)=>{let t="",r=e;for(;r--;)t+=_Le[Math.random()*64|0];return t},NLe=Symbol.for("rtk-slice-createasyncthunk");function kLe(e,t){return`${e}/${t}`}function BLe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[NLe];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Oc(11));const o=(typeof a.reducers=="function"?a.reducers(jLe()):a.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,N){const F=typeof j=="string"?j:j.type;if(!F)throw new Error(Oc(12));if(F in u.sliceCaseReducersByType)throw new Error(Oc(13));return u.sliceCaseReducersByType[F]=N,d},addMatcher(j,N){return u.sliceMatchers.push({matcher:j,reducer:N}),d},exposeAction(j,N){return u.actionCreators[j]=N,d},exposeCaseReducer(j,N){return u.sliceCaseReducersByName[j]=N,d}};c.forEach(j=>{const N=o[j],F={reducerName:j,type:kLe(s,j),createNotation:typeof a.reducers=="function"};FLe(N)?DLe(F,N,d,t):ILe(F,N,d)});function f(){const[j={},N=[],F=void 0]=typeof a.extraReducers=="function"?yae(a.extraReducers):[a.extraReducers],E={...j,...u.sliceCaseReducersByType};return CLe(a.initialState,_=>{for(let B in E)_.addCase(B,E[B]);for(let B of u.sliceMatchers)_.addMatcher(B.matcher,B.reducer);for(let B of N)_.addMatcher(B.matcher,B.reducer);F&&_.addDefaultCase(F)})}const h=j=>j,p=new Map,g=new WeakMap;let x;function b(j,N){return x||(x=f()),x(j,N)}function y(){return x||(x=f()),x.getInitialState()}function w(j,N=!1){function F(_){let B=_[j];return typeof B>"u"&&N&&(B=PC(g,F,y)),B}function E(_=h){const B=PC(p,N,()=>new WeakMap);return PC(B,_,()=>{const P={};for(const[D,I]of Object.entries(a.selectors??{}))P[D]=TLe(I,_,()=>PC(g,_,y),N);return P})}return{reducerPath:j,getSelectors:E,get selectors(){return E(F)},selectSlice:F}}const S={name:s,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(i),injectInto(j,{reducerPath:N,...F}={}){const E=N??i;return j.inject({reducerPath:E,reducer:b},F),{...S,...w(E,!0)}}};return S}}function TLe(e,t,r,n){function a(s,...i){let o=t(s);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return a.unwrapped=e,a}var Hc=BLe();function jLe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function ILe({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!OLe(n))throw new Error(Oc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?Pu(e,i):Pu(e))}function FLe(e){return e._reducerDefinitionType==="asyncThunk"}function OLe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function DLe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Oc(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||RC,pending:o||RC,rejected:c||RC,settled:u||RC})}function RC(){}var PLe="task",wae="listener",Eae="completed",UR="cancelled",RLe=`task-${UR}`,LLe=`task-${Eae}`,gF=`${wae}-${UR}`,MLe=`${wae}-${Eae}`,H4=class{constructor(e){JB(this,"name","TaskAbortError");JB(this,"message");this.code=e,this.message=`${PLe} ${UR} (reason: ${e})`}},QR=(e,t)=>{if(typeof e!="function")throw new TypeError(Oc(32))},C5=()=>{},Cae=(e,t=C5)=>(e.catch(t),e),_ae=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Hp=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Vp=e=>{if(e.aborted){const{reason:t}=e;throw new H4(t)}};function Sae(e,t){let r=C5;return new Promise((n,a)=>{const s=()=>a(new H4(e.reason));if(e.aborted){s();return}r=_ae(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=C5})}var ULe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof H4?"cancelled":"rejected",error:r}}finally{t==null||t()}},_5=e=>t=>Cae(Sae(e,t).then(r=>(Vp(e),r))),Nae=e=>{const t=_5(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Cv}=Object,o$={},V4="listenerMiddleware",QLe=(e,t)=>{const r=n=>_ae(e,()=>Hp(n,e.reason));return(n,a)=>{QR(n);const s=new AbortController;r(s);const i=ULe(async()=>{Vp(e),Vp(s.signal);const o=await n({pause:_5(s.signal),delay:Nae(s.signal),signal:s.signal});return Vp(s.signal),o},()=>Hp(s,LLe));return a!=null&&a.autoJoin&&t.push(i.catch(C5)),{result:_5(e)(i),cancel(){Hp(s,RLe)}}}},HLe=(e,t)=>{const r=async(n,a)=>{Vp(t);let s=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Sae(t,Promise.race(o));return Vp(t),c}finally{s()}};return(n,a)=>Cae(r(n,a))},kae=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Pu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Oc(21));return QR(s),{predicate:a,type:t,effect:s}},Bae=Cv(e=>{const{type:t,predicate:r,effect:n}=kae(e);return{id:SLe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Oc(22))}}},{withTypes:()=>Bae}),l$=(e,t)=>{const{type:r,effect:n,predicate:a}=kae(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},xF=e=>{e.pending.forEach(t=>{Hp(t,gF)})},VLe=e=>()=>{e.forEach(xF),e.clear()},c$=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Tae=Cv(Pu(`${V4}/add`),{withTypes:()=>Tae}),zLe=Pu(`${V4}/removeAll`),jae=Cv(Pu(`${V4}/remove`),{withTypes:()=>jae}),$Le=(...e)=>{console.error(`${V4}/error`,...e)},L2=(e={})=>{const t=new Map,{extra:r,onError:n=$Le}=e;QR(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&xF(d)}),s=d=>{const f=l$(t,d)??Bae(d);return a(f)};Cv(s,{withTypes:()=>s});const i=d=>{const f=l$(t,d);return f&&(f.unsubscribe(),d.cancelActive&&xF(f)),!!f};Cv(i,{withTypes:()=>i});const o=async(d,f,h,p)=>{const g=new AbortController,x=HLe(s,g.signal),b=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,Cv({},h,{getOriginalState:p,condition:(y,w)=>x(y,w).then(Boolean),take:x,delay:Nae(g.signal),pause:_5(g.signal),extra:r,signal:g.signal,fork:QLe(g.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,w,S)=>{y!==g&&(Hp(y,gF),S.delete(y))})},cancel:()=>{Hp(g,gF),d.pending.delete(g)},throwIfCancelled:()=>{Vp(g.signal)}})))}catch(y){y instanceof H4||c$(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),Hp(g,MLe),d.pending.delete(g)}},c=VLe(t);return{middleware:d=>f=>h=>{if(!dae(h))return f(h);if(Tae.match(h))return s(h.payload);if(zLe.match(h)){c();return}if(jae.match(h))return i(h.payload);let p=d.getState();const g=()=>{if(p===o$)throw new Error(Oc(23));return p};let x;try{if(x=f(h),t.size>0){const b=d.getState(),y=Array.from(t.values());for(const w of y){let S=!1;try{S=w.predicate(h,b,p)}catch(j){S=!1,c$(n,j,{raisedBy:"predicate"})}S&&o(w,h,d,g)}}}finally{p=o$}return x},startListening:s,stopListening:i,clearListeners:c}};function Oc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var GLe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Iae=Hc({name:"chartLayout",initialState:GLe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:KLe,setLayout:qLe,setChartSize:WLe,setScale:XLe}=Iae.actions,YLe=Iae.reducer;function u$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function d$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u$(Object(r),!0).forEach(function(n){JLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JLe(e,t,r){return(t=ZLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZLe(e){var t=e8e(e,"string");return typeof t=="symbol"?t:t+""}function e8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S5=Math.PI/180,t8e=e=>e*180/Math.PI,Zn=(e,t,r,n)=>({x:e+Math.cos(-S5*n)*r,y:t+Math.sin(-S5*n)*r}),Fae=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},r8e=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},n8e=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=r8e({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,c=Math.acos(o);return n>s&&(c=2*Math.PI-c),{radius:i,angle:t8e(c),angleInRadian:c}},a8e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},s8e=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},i8e=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=n8e({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o||a===0)return null;var{startAngle:c,endAngle:u}=a8e(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?d$(d$({},t),{},{radius:a,angle:s8e(d,t)}):null},Oae=e=>!k.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Dae(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function A$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A$(Object(r),!0).forEach(function(n){o8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o8e(e,t,r){return(t=l8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l8e(e){var t=c8e(e,"string");return typeof t=="symbol"?t:t+""}function c8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pa(e,t,r){return ks(e)||ks(t)?r:WA(t)?Cm(e,t,r):typeof t=="function"?t(e):r}var u8e=(e,t,r,n,a)=>{var s,i=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(Wi(d-u)!==Wi(f-d)){var p=[];if(Wi(f-d)===Wi(a[1]-a[0])){h=f;var g=d+a[1]-a[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{h=u;var x=f+a[1]-a[0];p[0]=Math.min(d,(x+d)/2),p[1]=Math.max(d,(x+d)/2)}var b=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:i}=r[c]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(e>(y+d)/2&&e<=(w+d)/2){({index:i}=r[c]);break}}}else if(t){for(var S=0;S<o;S++)if(S===0&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S>0&&S<o-1&&e>(t[S].coordinate+t[S-1].coordinate)/2&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S===o-1&&e>(t[S].coordinate+t[S-1].coordinate)/2){({index:i}=t[S]);break}}return i},d8e=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&s!=="center"&&ur(e[s]))return Cu(Cu({},e),{},{[s]:e[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&i!=="middle"&&ur(e[i]))return Cu(Cu({},e),{},{[i]:e[i]+(a||0)})}return e},Om=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Pae=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,s,i=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(s=!0),o.coordinate));return a||i.push(t),s||i.push(r),i},Rae=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!i)return null;var g=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,x=a==="category"&&i.bandwidth?i.bandwidth()/g:0;if(x=p==="angleAxis"&&s&&s.length>=2?Wi(s[0]-s[1])*2*x:x,f||h){var b=(f||h||[]).map((y,w)=>{var S=n?n.indexOf(y):y;return{coordinate:i(S)+x,value:y,offset:x,index:w}});return b.filter(y=>!Rc(y.coordinate))}return c&&u?u.map((y,w)=>({coordinate:i(y)+x,value:y,index:w,offset:x})):i.ticks&&d!=null?i.ticks(d).map((y,w)=>({coordinate:i(y)+x,value:y,offset:x,index:w})):i.domain().map((y,w)=>({coordinate:i(y)+x,value:n?n[y]:y,index:w,offset:x}))},f$=1e-4,A8e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-f$,s=Math.max(n[0],n[1])+f$,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},f8e=(e,t)=>{if(!t||t.length!==2||!ur(t[0])||!ur(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ur(e[0])||e[0]<r)&&(a[0]=r),(!ur(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},h8e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=Rc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},m8e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=Rc(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},p8e={sign:h8e,expand:KPe,none:Wv,silhouette:qPe,wiggle:WPe,positive:m8e},g8e=(e,t,r)=>{var n=p8e[r],a=GPe().keys(t).value((s,i)=>+Pa(s,i,0)).order(lF).offset(n);return a(e)};function x8e(e){return e==null?void 0:String(e)}var h$=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var o=Pa(s,t.dataKey,t.scale.domain()[i]);return ks(o)?null:t.scale(o)-a/2+n},v8e=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},b8e=e=>{var t=e.flat(2).filter(ur);return[Math.min(...t),Math.max(...t)]},y8e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],w8e=(e,t,r)=>{if(e!=null)return y8e(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((c,u)=>{var d=Dae(u,t,r),f=b8e(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},m$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,p$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Gw=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=R4(t,d=>d.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var c=a[i],u=a[i-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function g$(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Cu(Cu({},t),{},{dataKey:r,payload:n,value:a,name:s})}function F1(e,t){if(e)return String(e);if(typeof t=="string")return t}function E8e(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?i8e({x:e,y:t},n):null}var C8e=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return Cu(Cu(Cu({},n),Zn(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:c}=n;return Cu(Cu(Cu({},n),Zn(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},_8e=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,jh=e=>e.layout.width,Ih=e=>e.layout.height,S8e=e=>e.layout.scale,Lae=e=>e.layout.margin,HR=ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),VR=ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Mae="data-recharts-item-index",Uae="data-recharts-item-data-key",z4=60;function x$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x$(Object(r),!0).forEach(function(n){N8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N8e(e,t,r){return(t=k8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k8e(e){var t=B8e(e,"string");return typeof t=="symbol"?t:t+""}function B8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T8e=e=>e.brush.height,Ni=ut([jh,Ih,Lae,T8e,HR,VR,oae,YRe],(e,t,r,n,a,s,i,o)=>{var c=s.reduce((g,x)=>{var{orientation:b}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:z4;return y0(y0({},g),{},{[b]:g[b]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:b}=x;return!x.mirror&&!x.hide?y0(y0({},g),{},{[b]:Cm(g,"".concat(b))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=y0(y0({},u),c),f=d.bottom;d.bottom+=n,d=d8e(d,i,o);var h=e-d.left-d.right,p=t-d.top-d.bottom;return y0(y0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(p,0)})}),j8e=ut(Ni,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Qae=ut(jh,Ih,(e,t)=>({x:0,y:0,width:e,height:t})),I8e=k.createContext(null),tc=()=>k.useContext(I8e)!=null,$4=e=>e.brush,G4=ut([$4,Ni,Lae],(e,t,r)=>({height:e.height,x:ur(e.x)?e.x:t.left,y:ur(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ur(e.width)?e.width:t.width})),zR=()=>{var e,t=tc(),r=sr(j8e),n=sr(G4),a=(e=sr($4))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},F8e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Hae=()=>{var e;return(e=sr(Ni))!==null&&e!==void 0?e:F8e},$R=()=>sr(jh),GR=()=>sr(Ih),O8e={top:0,right:0,bottom:0,left:0},D8e=()=>{var e;return(e=sr(t=>t.layout.margin))!==null&&e!==void 0?e:O8e},Tn=e=>e.layout.layoutType,KR=()=>sr(Tn),P8e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Vae=Hc({name:"legend",initialState:P8e,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=ah(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:v$,setLegendSettings:R8e,addLegendPayload:zae,removeLegendPayload:$ae}=Vae.actions,L8e=Vae.reducer,M8e=["contextPayload"];function vF(){return vF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vF.apply(null,arguments)}function b$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b$(Object(r),!0).forEach(function(n){qR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qR(e,t,r){return(t=U8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U8e(e){var t=Q8e(e,"string");return typeof t=="symbol"?t:t+""}function Q8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H8e(e,t){if(e==null)return{};var r,n,a=V8e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function V8e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function z8e(e){return e.value}function $8e(e){var{contextPayload:t}=e,r=H8e(e,M8e),n=rae(t,e.payloadUniqBy,z8e),a=Yv(Yv({},r),{},{payload:n});return k.isValidElement(e.content)?k.cloneElement(e.content,a):typeof e.content=="function"?k.createElement(e.content,a):k.createElement(BR,a)}function G8e(e,t,r,n,a,s){var{layout:i,align:o,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Yv(Yv({},u),d)}function K8e(e){var t=za();return k.useEffect(()=>{t(R8e(e))},[t,e]),null}function q8e(e){var t=za();return k.useEffect(()=>(t(v$(e)),()=>{t(v$({width:0,height:0}))}),[t,e]),null}function W8e(e){var t=eLe(),r=pPe(),n=D8e(),{width:a,height:s,wrapperStyle:i,portal:o}=e,[c,u]=lae([t]),d=$R(),f=GR(),h=d-(n.left||0)-(n.right||0),p=K4.getWidthOrHeight(e.layout,s,a,h),g=o?i:Yv(Yv({position:"absolute",width:(p==null?void 0:p.width)||a||"auto",height:(p==null?void 0:p.height)||s||"auto"},G8e(i,e,n,d,f,c)),i),x=o??r;if(x==null)return null;var b=k.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},k.createElement(K8e,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),k.createElement(q8e,{width:c.width,height:c.height}),k.createElement($8e,vF({},e,p,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return ER.createPortal(b,x)}class K4 extends k.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&ur(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return k.createElement(W8e,this.props)}}qR(K4,"displayName","Legend");qR(K4,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function bF(){return bF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bF.apply(null,arguments)}function y$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y$(Object(r),!0).forEach(function(n){X8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X8e(e,t,r){return(t=Y8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y8e(e){var t=J8e(e,"string");return typeof t=="symbol"?t:t+""}function J8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z8e(e){return Array.isArray(e)&&WA(e[0])&&WA(e[1])?e.join(" ~ "):e}var eMe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(s&&s.length){var N={padding:0,margin:0},F=(o?R4(s,o):s).map((E,_)=>{if(E.type==="none")return null;var B=E.formatter||i||Z8e,{value:P,name:D}=E,I=P,U=D;if(B){var R=B(P,D,E,_,s);if(Array.isArray(R))[I,U]=R;else if(R!=null)I=R;else return null}var Y=lj({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(_),style:Y},WA(U)?k.createElement("span",{className:"recharts-tooltip-item-name"},U):null,WA(U)?k.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,k.createElement("span",{className:"recharts-tooltip-item-value"},I),k.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return k.createElement("ul",{className:"recharts-tooltip-item-list",style:N},F)}return null},g=lj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=lj({margin:0},a),b=!ks(d),y=b?d:"",w=xn("recharts-default-tooltip",c),S=xn("recharts-tooltip-label",u);b&&f&&s!==void 0&&s!==null&&(y=f(d,s));var j=h?{role:"status","aria-live":"assertive"}:{};return k.createElement("div",bF({className:w,style:g},j),k.createElement("p",{className:S,style:x},k.isValidElement(y)?y:"".concat(y)),p())},Vb="recharts-tooltip-wrapper",tMe={visibility:"hidden"};function rMe(e){var{coordinate:t,translateX:r,translateY:n}=e;return xn(Vb,{["".concat(Vb,"-right")]:ur(r)&&t&&ur(t.x)&&r>=t.x,["".concat(Vb,"-left")]:ur(r)&&t&&ur(t.x)&&r<t.x,["".concat(Vb,"-bottom")]:ur(n)&&t&&ur(t.y)&&n>=t.y,["".concat(Vb,"-top")]:ur(n)&&t&&ur(t.y)&&n<t.y})}function w$(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(s&&ur(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var p=d,g=h;return p<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+o,b=h+u;return x>b?Math.max(d,h):Math.max(f,h)}function nMe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function aMe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:o,viewBox:c}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=w$({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=w$({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=nMe({translateX:d,translateY:f,useTranslate3d:o})):u=tMe,{cssProperties:u,cssClasses:rMe({translateX:d,translateY:f,coordinate:r})}}function E$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E$(Object(r),!0).forEach(function(n){yF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yF(e,t,r){return(t=sMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sMe(e){var t=iMe(e,"string");return typeof t=="symbol"?t:t+""}function iMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class oMe extends k.PureComponent{constructor(){super(...arguments),yF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),yF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:g,lastBoundingBox:x,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:S}=aMe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:p}),j=y?{}:LC(LC({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),N=LC(LC({},j),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:N,ref:b},s)}}var lMe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Tg={isSsr:lMe()},Gae=()=>sr(e=>e.rootProps.accessibilityLayer);function Uc(e){return Number.isFinite(e)}function Jv(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function wF(){return wF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wF.apply(null,arguments)}function C$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C$(Object(r),!0).forEach(function(n){cMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cMe(e,t,r){return(t=uMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uMe(e){var t=dMe(e,"string");return typeof t=="symbol"?t:t+""}function dMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S$={curveBasisClosed:DPe,curveBasisOpen:PPe,curveBasis:OPe,curveBumpX:bPe,curveBumpY:yPe,curveLinearClosed:RPe,curveLinear:O4,curveMonotoneX:LPe,curveMonotoneY:MPe,curveNatural:UPe,curveStep:QPe,curveStepAfter:VPe,curveStepBefore:HPe},MC=e=>Uc(e.x)&&Uc(e.y),zb=e=>e.x,$b=e=>e.y,AMe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(P2(e));return(r==="curveMonotone"||r==="curveBump")&&t?S$["".concat(r).concat(t==="vertical"?"Y":"X")]:S$[r]||O4},fMe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=AMe(t,a),o=s?r.filter(MC):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>MC(f)):n,d=o.map((f,h)=>_$(_$({},f),{},{base:u[h]}));return a==="vertical"?c=FC().y($b).x1(zb).x0(f=>f.base.x):c=FC().x(zb).y1($b).y0(f=>f.base.y),c.defined(MC).curve(i),c(d)}return a==="vertical"&&ur(n)?c=FC().y($b).x1(zb).x0(n):ur(n)?c=FC().x(zb).y1($b).y0(n):c=Mne().x(zb).y($b),c.defined(MC).curve(i),c(o)},Kae=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?fMe(e):n;return k.createElement("path",wF({},al(e),yR(e),{className:xn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},hMe=["x","y","top","left","width","height","className"];function EF(){return EF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EF.apply(null,arguments)}function N$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mMe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N$(Object(r),!0).forEach(function(n){pMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pMe(e,t,r){return(t=gMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gMe(e){var t=xMe(e,"string");return typeof t=="symbol"?t:t+""}function xMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vMe(e,t){if(e==null)return{};var r,n,a=bMe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bMe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yMe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),wMe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=e,c=vMe(e,hMe),u=mMe({x:t,y:r,top:n,left:a,width:s,height:i},c);return!ur(t)||!ur(r)||!ur(s)||!ur(i)||!ur(n)||!ur(a)?null:k.createElement("path",EF({},Wn(u,!0),{className:xn("recharts-cross",o),d:yMe(t,r,s,i,n,a)}))};function EMe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function k$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CMe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k$(Object(r),!0).forEach(function(n){_Me(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Me(e,t,r){return(t=SMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SMe(e){var t=NMe(e,"string");return typeof t=="symbol"?t:t+""}function NMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uu(e,t){var r=CMe({},e),n=t,a=Object.keys(t),s=a.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return s}var cj={},uj={},dj={},B$;function kMe(){return B$||(B$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(dj)),dj}var T$;function BMe(){return T$||(T$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kMe(),r=Zne(),n=FR(),a=OR(),s=jR();function i(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,h,p,g,x){const b=x(u,d,f,h,p,g);if(b!==void 0)return b;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let p=n.getTag(u),g=n.getTag(d);if(p===a.argumentsTag&&(p=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),p!==g)return!1;switch(p){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),w=d.valueOf();return s.eq(y,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),b=f.get(d);if(x!=null&&b!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(p){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,w]of u.entries())if(!d.has(y)||!o(w,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),w=Array.from(d.values());for(let S=0;S<y.length;S++){const j=y[S],N=w.findIndex(F=>o(j,F,void 0,u,d,f,h));if(N===-1)return!1;w.splice(N,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],S=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==S.length)return!1;for(let j=0;j<w.length;j++){const N=w[j],F=u[N];if(!Object.hasOwn(d,N))return!1;const E=d[N];if(!o(F,E,N,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=i}(uj)),uj}var Aj={},j$;function TMe(){return j$||(j$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(Aj)),Aj}var I$;function jMe(){return I$||(I$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BMe(),r=TMe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(cj)),cj}var fj,F$;function IMe(){return F$||(F$=1,fj=jMe().isEqual),fj}var FMe=IMe();const OMe=yl(FMe);var N5=1e-4,qae=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Wae=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),O$=(e,t)=>r=>{var n=qae(e,t);return Wae(n,r)},DMe=(e,t)=>r=>{var n=qae(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return Wae(a,r)},D$=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else i.length===4&&([t,n,r,a]=i);var u=O$(t,r),d=O$(n,a),f=DMe(t,r),h=g=>g>1?1:g<0?0:g,p=g=>{for(var x=g>1?1:g,b=x,y=0;y<8;++y){var w=u(b)-x,S=f(b);if(Math.abs(w-x)<N5||S<N5)return d(b);b=h(b-w/S)}return d(b)};return p.isStepper=!1,p},PMe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,o,c)=>{var u=-(i-o)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-o)<N5&&Math.abs(f)<N5?[o,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},Xae=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return D$(e);case"spring":return PMe();default:if(e.split("(")[0]==="cubic-bezier")return D$(e)}return typeof e=="function"?e:null};function P$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function R$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P$(Object(r),!0).forEach(function(n){RMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RMe(e,t,r){return(t=LMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LMe(e){var t=MMe(e,"string");return typeof t=="symbol"?t:t+""}function MMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UMe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),QMe=(e,t,r)=>e.map(n=>"".concat(UMe(n)," ").concat(t,"ms ").concat(r)).join(","),HMe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Kw=(e,t)=>Object.keys(t).reduce((r,n)=>R$(R$({},r),{},{[n]:e(n,t[n])}),{});function L$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ho(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L$(Object(r),!0).forEach(function(n){VMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VMe(e,t,r){return(t=zMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zMe(e){var t=$Me(e,"string");return typeof t=="symbol"?t:t+""}function $Me(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k5=(e,t,r)=>e+(t-e)*r,CF=e=>{var{from:t,to:r}=e;return t!==r},Yae=(e,t,r)=>{var n=Kw((a,s)=>{if(CF(s)){var[i,o]=e(s.from,s.to,s.velocity);return ho(ho({},s),{},{from:i,velocity:o})}return s},t);return r<1?Kw((a,s)=>CF(s)?ho(ho({},s),{},{velocity:k5(s.velocity,n[a].velocity,r),from:k5(s.from,n[a].from,r)}):s,t):Yae(e,n,r-1)};function GMe(e,t,r,n,a,s){var i,o=n.reduce((h,p)=>ho(ho({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>Kw((h,p)=>p.from,o),u=()=>!Object.values(o).filter(CF).length,d=null,f=h=>{i||(i=h);var p=h-i,g=p/r.dt;o=Yae(r,o,g),a(ho(ho(ho({},e),t),c())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function KMe(e,t,r,n,a,s,i){var o=null,c=a.reduce((f,h)=>ho(ho({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,p=Kw((x,b)=>k5(...b,r(h)),c);if(s(ho(ho(ho({},e),t),p)),h<1)o=i.setTimeout(d);else{var g=Kw((x,b)=>k5(...b,r(1)),c);s(ho(ho(ho({},e),t),g))}};return()=>(o=i.setTimeout(d),()=>{o()})}const Jae=(e,t,r,n,a,s)=>{var i=HMe(e,t);return r.isStepper===!0?GMe(e,t,r,i,a,s):KMe(e,t,r,n,i,a,s)};function qMe(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[c,...u]=o;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class WMe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function XMe(){return qMe(new WMe)}var YMe=k.createContext(XMe);function Zae(e,t){var r=k.useContext(YMe);return k.useMemo(()=>t??r(e),[e,t,r])}var JMe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function _F(){return _F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_F.apply(null,arguments)}function ZMe(e,t){if(e==null)return{};var r,n,a=eUe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eUe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function M$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M$(Object(r),!0).forEach(function(n){kp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kp(e,t,r){return(t=tUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tUe(e){var t=rUe(e,"string");return typeof t=="symbol"?t:t+""}function rUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class WR extends k.PureComponent{constructor(t,r){super(t,r),kp(this,"mounted",!1),kp(this,"manager",void 0),kp(this,"stopJSAnimation",null),kp(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:o,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:i});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:o}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&c&&(a&&c[a]!==i||!a&&c!==i)&&this.setState(u);return}if(!(OMe(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(w0(w0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c}=t,u=Jae(r,n,Xae(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,i,d,a,o])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:o,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=QMe(Object.keys(d),n,i);this.manager.start([o,r,w0(w0({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:o,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:p,animationManager:g}=t,x=ZMe(t,JMe),b=k.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!o||b===0||a<=0)return r;var w=S=>{var{style:j={},className:N}=S.props,F=k.cloneElement(S,w0(w0({},x),{},{style:w0(w0({},j),y),className:N}));return F};return b===1?w(k.Children.only(r)):k.createElement("div",null,k.Children.map(r,S=>w(S)))}}kp(WR,"displayName","Animate");kp(WR,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function B5(e){var t,r=Zae((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return k.createElement(WR,_F({},e,{animationManager:r}))}function T5(){return T5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T5.apply(null,arguments)}var U$=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var p=Math.min(s,a);u="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+r-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*p,`
            L `).concat(e+r,",").concat(t+n-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-o*p,",").concat(t+n,`
            L `).concat(e+o*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},nUe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ese=e=>{var t=Uu(e,nUe),r=k.useRef(null),[n,a]=k.useState(-1);k.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||o===0||c===0)return null;var b=xn("recharts-rectangle",d);return x?k.createElement(B5,{canBegin:n>0,from:{width:o,height:c,x:s,y:i},to:{width:o,height:c,x:s,y:i},duration:h,animationEasing:f,isActive:x},y=>{var{width:w,height:S,x:j,y:N}=y;return k.createElement(B5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:g,easing:f},k.createElement("path",T5({},Wn(t,!0),{className:b,d:U$(j,N,w,S,u),ref:r})))}):k.createElement("path",T5({},Wn(t,!0),{className:b,d:U$(s,i,o,c,u)}))};function tse(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=Zn(t,r,n,a),o=Zn(t,r,n,s);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function SF(){return SF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SF.apply(null,arguments)}var aUe=(e,t)=>{var r=Wi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},UC=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:c}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/S5,f=c?a:a+s*d,h=Zn(t,r,u,f),p=Zn(t,r,n,f),g=c?a-s*d:a,x=Zn(t,r,u*Math.cos(d*S5),g);return{center:h,circleTangency:p,lineTangency:x,theta:d}},rse=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=aUe(s,i),c=s+o,u=Zn(t,r,a,s),d=Zn(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=Zn(t,r,n,s),p=Zn(t,r,n,c);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},sUe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=Wi(u-c),{circleTangency:f,lineTangency:h,theta:p}=UC({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:g,lineTangency:x,theta:b}=UC({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(c-u):Math.abs(c-u)-p-b;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):rse({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:S,lineTangency:j,theta:N}=UC({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:F,lineTangency:E,theta:_}=UC({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),B=o?Math.abs(c-u):Math.abs(c-u)-N-_;if(B<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},iUe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nse=e=>{var t=Uu(e,iUe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=xn("recharts-sector",f),p=s-a,g=bl(i,p,0,!0),x;return g>0&&Math.abs(u-d)<360?x=sUe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):x=rse({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),k.createElement("path",SF({},Wn(t,!0),{className:h,d:x}))};function oUe(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=Zn(o,c,u,f),p=Zn(o,c,d,f);n=h.x,a=h.y,s=p.x,i=p.y}else return tse(t);return[{x:n,y:a},{x:s,y:i}]}var hj={},mj={},pj={},Q$;function lUe(){return Q$||(Q$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sae();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(pj)),pj}var H$;function cUe(){return H$||(H$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lUe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(mj)),mj}var V$;function uUe(){return V$||(V$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iae(),r=cUe();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=a,a+=i;return c}e.range=n}(hj)),hj}var gj,z$;function dUe(){return z$||(z$=1,gj=uUe().range),gj}var AUe=dUe();const ase=yl(AUe);function em(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fUe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function XR(e){let t,r,n;e.length!==2?(t=em,r=(o,c)=>em(e(o),c),n=(o,c)=>e(o)-c):(t=e===em||e===fUe?e:hUe,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:i,right:s}}function hUe(){return 0}function sse(e){return e===null?NaN:+e}function*mUe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const pUe=XR(em),M2=pUe.right;XR(sse).center;class $$ extends Map{constructor(t,r=vUe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(G$(this,t))}has(t){return super.has(G$(this,t))}set(t,r){return super.set(gUe(this,t),r)}delete(t){return super.delete(xUe(this,t))}}function G$({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function gUe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function xUe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function vUe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function bUe(e=em){if(e===em)return ise;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ise(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const yUe=Math.sqrt(50),wUe=Math.sqrt(10),EUe=Math.sqrt(2);function j5(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=yUe?10:s>=wUe?5:s>=EUe?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/i,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*i,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?j5(e,t,r*2):[o,c,u]}function NF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?j5(t,e,r):j5(e,t,r);if(!(s>=a))return[];const o=s-a+1,c=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)c[u]=(s-u)/-i;else for(let u=0;u<o;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<o;++u)c[u]=(a+u)/-i;else for(let u=0;u<o;++u)c[u]=(a+u)*i;return c}function kF(e,t,r){return t=+t,e=+e,r=+r,j5(e,t,r)[2]}function BF(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?kF(t,e,r):kF(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function K$(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function q$(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function ose(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?ise:bUe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));ose(e,t,p,g,a)}const s=e[t];let i=r,o=n;for(Gb(e,r,t),a(e[n],s)>0&&Gb(e,r,n);i<o;){for(Gb(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}a(e[r],s)===0?Gb(e,r,o):(++o,Gb(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Gb(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function CUe(e,t,r){if(e=Float64Array.from(mUe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return q$(e);if(t>=1)return K$(e);var n,a=(n-1)*t,s=Math.floor(a),i=K$(ose(e,s).subarray(0,s+1)),o=q$(e.subarray(s+1));return i+(o-i)*(a-s)}}function _Ue(e,t,r=sse){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return i+(o-i)*(a-s)}}function SUe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function Qu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Fh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const TF=Symbol("implicit");function q4(){var e=new $$,t=[],r=[],n=TF;function a(s){let i=e.get(s);if(i===void 0){if(n!==TF)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new $$;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return q4(t,r).unknown(n)},Qu.apply(a,arguments),a}function YR(){var e=q4().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,g=p?a:n,x=p?n:a;s=(x-g)/Math.max(1,h-c+u*2),o&&(s=Math.floor(s)),g+=(x-g-s*(h-c))*d,i=s*(1-c),o&&(g=Math.round(g),i=Math.round(i));var b=SUe(h).map(function(y){return g+s*y});return r(p?b.reverse():b)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return YR(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},Qu.apply(f(),arguments)}function lse(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lse(t())},e}function NUe(){return lse(YR.apply(null,arguments).paddingInner(1))}function JR(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function cse(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function U2(){}var qw=.7,I5=1/qw,_v="\\s*([+-]?\\d+)\\s*",Ww="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",GA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kUe=/^#([0-9a-f]{3,8})$/,BUe=new RegExp(`^rgb\\(${_v},${_v},${_v}\\)$`),TUe=new RegExp(`^rgb\\(${GA},${GA},${GA}\\)$`),jUe=new RegExp(`^rgba\\(${_v},${_v},${_v},${Ww}\\)$`),IUe=new RegExp(`^rgba\\(${GA},${GA},${GA},${Ww}\\)$`),FUe=new RegExp(`^hsl\\(${Ww},${GA},${GA}\\)$`),OUe=new RegExp(`^hsla\\(${Ww},${GA},${GA},${Ww}\\)$`),W$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};JR(U2,dg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:X$,formatHex:X$,formatHex8:DUe,formatHsl:PUe,formatRgb:Y$,toString:Y$});function X$(){return this.rgb().formatHex()}function DUe(){return this.rgb().formatHex8()}function PUe(){return use(this).formatHsl()}function Y$(){return this.rgb().formatRgb()}function dg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=kUe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?J$(t):r===3?new ql(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?QC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?QC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=BUe.exec(e))?new ql(t[1],t[2],t[3],1):(t=TUe.exec(e))?new ql(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jUe.exec(e))?QC(t[1],t[2],t[3],t[4]):(t=IUe.exec(e))?QC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=FUe.exec(e))?tG(t[1],t[2]/100,t[3]/100,1):(t=OUe.exec(e))?tG(t[1],t[2]/100,t[3]/100,t[4]):W$.hasOwnProperty(e)?J$(W$[e]):e==="transparent"?new ql(NaN,NaN,NaN,0):null}function J$(e){return new ql(e>>16&255,e>>8&255,e&255,1)}function QC(e,t,r,n){return n<=0&&(e=t=r=NaN),new ql(e,t,r,n)}function RUe(e){return e instanceof U2||(e=dg(e)),e?(e=e.rgb(),new ql(e.r,e.g,e.b,e.opacity)):new ql}function jF(e,t,r,n){return arguments.length===1?RUe(e):new ql(e,t,r,n??1)}function ql(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}JR(ql,jF,cse(U2,{brighter(e){return e=e==null?I5:Math.pow(I5,e),new ql(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qw:Math.pow(qw,e),new ql(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ql(zp(this.r),zp(this.g),zp(this.b),F5(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Z$,formatHex:Z$,formatHex8:LUe,formatRgb:eG,toString:eG}));function Z$(){return`#${Bp(this.r)}${Bp(this.g)}${Bp(this.b)}`}function LUe(){return`#${Bp(this.r)}${Bp(this.g)}${Bp(this.b)}${Bp((isNaN(this.opacity)?1:this.opacity)*255)}`}function eG(){const e=F5(this.opacity);return`${e===1?"rgb(":"rgba("}${zp(this.r)}, ${zp(this.g)}, ${zp(this.b)}${e===1?")":`, ${e})`}`}function F5(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bp(e){return e=zp(e),(e<16?"0":"")+e.toString(16)}function tG(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new xd(e,t,r,n)}function use(e){if(e instanceof xd)return new xd(e.h,e.s,e.l,e.opacity);if(e instanceof U2||(e=dg(e)),!e)return new xd;if(e instanceof xd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,c=(s+a)/2;return o?(t===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-t)/o+2:i=(t-r)/o+4,o/=c<.5?s+a:2-s-a,i*=60):o=c>0&&c<1?0:i,new xd(i,o,c,e.opacity)}function MUe(e,t,r,n){return arguments.length===1?use(e):new xd(e,t,r,n??1)}function xd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}JR(xd,MUe,cse(U2,{brighter(e){return e=e==null?I5:Math.pow(I5,e),new xd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qw:Math.pow(qw,e),new xd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new ql(xj(e>=240?e-240:e+120,a,n),xj(e,a,n),xj(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new xd(rG(this.h),HC(this.s),HC(this.l),F5(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=F5(this.opacity);return`${e===1?"hsl(":"hsla("}${rG(this.h)}, ${HC(this.s)*100}%, ${HC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rG(e){return e=(e||0)%360,e<0?e+360:e}function HC(e){return Math.max(0,Math.min(1,e||0))}function xj(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const ZR=e=>()=>e;function UUe(e,t){return function(r){return e+r*t}}function QUe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function HUe(e){return(e=+e)==1?dse:function(t,r){return r-t?QUe(t,r,e):ZR(isNaN(t)?r:t)}}function dse(e,t){var r=t-e;return r?UUe(e,r):ZR(isNaN(e)?t:e)}const O5=function e(t){var r=HUe(t);function n(a,s){var i=r((a=jF(a)).r,(s=jF(s)).r),o=r(a.g,s.g),c=r(a.b,s.b),u=dse(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function VUe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function zUe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $Ue(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=O1(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(o){for(i=0;i<n;++i)s[i]=a[i](o);return s}}function GUe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function pd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function KUe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=O1(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var IF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vj=new RegExp(IF.source,"g");function qUe(e){return function(){return e}}function WUe(e){return function(t){return e(t)+""}}function Ase(e,t){var r=IF.lastIndex=vj.lastIndex=0,n,a,s,i=-1,o=[],c=[];for(e=e+"",t=t+"";(n=IF.exec(e))&&(a=vj.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,c.push({i,x:pd(n,a)})),r=vj.lastIndex;return r<t.length&&(s=t.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?c[0]?WUe(c[0].x):qUe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function O1(e,t){var r=typeof t,n;return t==null||r==="boolean"?ZR(t):(r==="number"?pd:r==="string"?(n=dg(t))?(t=n,O5):Ase:t instanceof dg?O5:t instanceof Date?GUe:zUe(t)?VUe:Array.isArray(t)?$Ue:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?KUe:pd)(e,t)}function eL(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var nG=180/Math.PI,FF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fse(e,t,r,n,a,s){var i,o,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,c/=o),e*n<t*r&&(e=-e,t=-t,c=-c,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*nG,skewX:Math.atan(c)*nG,scaleX:i,scaleY:o}}var VC;function XUe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?FF:fse(t.a,t.b,t.c,t.d,t.e,t.f)}function YUe(e){return e==null||(VC||(VC=document.createElementNS("http://www.w3.org/2000/svg","g")),VC.setAttribute("transform",e),!(e=VC.transform.baseVal.consolidate()))?FF:(e=e.matrix,fse(e.a,e.b,e.c,e.d,e.e,e.f))}function hse(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,g){if(u!==f||d!==h){var x=p.push("translate(",null,t,null,r);g.push({i:x-4,x:pd(u,f)},{i:x-2,x:pd(d,h)})}else(f||h)&&p.push("translate("+f+t+h+r)}function i(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:pd(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function o(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:pd(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,h,p,g){if(u!==f||d!==h){var x=p.push(a(p)+"scale(",null,",",null,")");g.push({i:x-4,x:pd(u,f)},{i:x-2,x:pd(d,h)})}else(f!==1||h!==1)&&p.push(a(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),i(u.rotate,d.rotate,f,h),o(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var g=-1,x=h.length,b;++g<x;)f[(b=h[g]).i]=b.x(p);return f.join("")}}}var JUe=hse(XUe,"px, ","px)","deg)"),ZUe=hse(YUe,", ",")",")"),e7e=1e-12;function aG(e){return((e=Math.exp(e))+1/e)/2}function t7e(e){return((e=Math.exp(e))-1/e)/2}function r7e(e){return((e=Math.exp(2*e))-1)/(e+1)}const n7e=function e(t,r,n){function a(s,i){var o=s[0],c=s[1],u=s[2],d=i[0],f=i[1],h=i[2],p=d-o,g=f-c,x=p*p+g*g,b,y;if(x<e7e)y=Math.log(h/u)/t,b=function(E){return[o+E*p,c+E*g,u*Math.exp(t*E*y)]};else{var w=Math.sqrt(x),S=(h*h-u*u+n*x)/(2*u*r*w),j=(h*h-u*u-n*x)/(2*h*r*w),N=Math.log(Math.sqrt(S*S+1)-S),F=Math.log(Math.sqrt(j*j+1)-j);y=(F-N)/t,b=function(E){var _=E*y,B=aG(N),P=u/(r*w)*(B*r7e(t*_+N)-t7e(N));return[o+P*p,c+P*g,u*B/aG(t*_+N)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,c=o*o;return e(i,o,c)},a}(Math.SQRT2,2,4);function a7e(e,t){t===void 0&&(t=e,e=O1);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[o](i-o)}}function s7e(e){return function(){return e}}function D5(e){return+e}var sG=[0,1];function pl(e){return e}function OF(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:s7e(isNaN(t)?NaN:.5)}function i7e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function o7e(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=OF(a,n),s=r(i,s)):(n=OF(n,a),s=r(s,i)),function(o){return s(n(o))}}function l7e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=OF(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(o){var c=M2(e,o,1,n)-1;return s[c](a[c](o))}}function Q2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function W4(){var e=sG,t=sG,r=O1,n,a,s,i=pl,o,c,u;function d(){var h=Math.min(e.length,t.length);return i!==pl&&(i=i7e(e[0],e[h-1])),o=h>2?l7e:o7e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=o(t,e.map(n),pd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,D5),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=eL,d()},f.clamp=function(h){return arguments.length?(i=h?!0:pl,d()):i!==pl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return n=h,a=p,d()}}function tL(){return W4()(pl,pl)}function c7e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function P5(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Zv(e){return e=P5(Math.abs(e)),e?e[1]:NaN}function u7e(e,t){return function(r,n){for(var a=r.length,s=[],i=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),s.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[i=(i+1)%e.length];return s.reverse().join(t)}}function d7e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var A7e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xw(e){if(!(t=A7e.exec(e)))throw new Error("invalid format: "+e);var t;return new rL({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xw.prototype=rL.prototype;function rL(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}rL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f7e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var mse;function h7e(e,t){var r=P5(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(mse=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+P5(e,Math.max(0,t+s-1))[0]}function iG(e,t){var r=P5(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const oG={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:c7e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>iG(e*100,t),r:iG,s:h7e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function lG(e){return e}var cG=Array.prototype.map,uG=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function m7e(e){var t=e.grouping===void 0||e.thousands===void 0?lG:u7e(cG.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?lG:d7e(cG.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Xw(f);var h=f.fill,p=f.align,g=f.sign,x=f.symbol,b=f.zero,y=f.width,w=f.comma,S=f.precision,j=f.trim,N=f.type;N==="n"?(w=!0,N="g"):oG[N]||(S===void 0&&(S=12),j=!0,N="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var F=x==="$"?r:x==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",E=x==="$"?n:/[%p]/.test(N)?i:"",_=oG[N],B=/[defgprs%]/.test(N);S=S===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function P(D){var I=F,U=E,R,Y,H;if(N==="c")U=_(D)+U,D="";else{D=+D;var X=D<0||1/D<0;if(D=isNaN(D)?c:_(Math.abs(D),S),j&&(D=f7e(D)),X&&+D==0&&g!=="+"&&(X=!1),I=(X?g==="("?g:o:g==="-"||g==="("?"":g)+I,U=(N==="s"?uG[8+mse/3]:"")+U+(X&&g==="("?")":""),B){for(R=-1,Y=D.length;++R<Y;)if(H=D.charCodeAt(R),48>H||H>57){U=(H===46?a+D.slice(R+1):D.slice(R))+U,D=D.slice(0,R);break}}}w&&!b&&(D=t(D,1/0));var V=I.length+D.length+U.length,z=V<y?new Array(y-V+1).join(h):"";switch(w&&b&&(D=t(z+D,z.length?y-U.length:1/0),z=""),p){case"<":D=I+D+U+z;break;case"=":D=I+z+D+U;break;case"^":D=z.slice(0,V=z.length>>1)+I+D+U+z.slice(V);break;default:D=z+I+D+U;break}return s(D)}return P.toString=function(){return f+""},P}function d(f,h){var p=u((f=Xw(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Zv(h)/3)))*3,x=Math.pow(10,-g),b=uG[8+g/3];return function(y){return p(x*y)+b}}return{format:u,formatPrefix:d}}var zC,nL,pse;p7e({thousands:",",grouping:[3],currency:["$",""]});function p7e(e){return zC=m7e(e),nL=zC.format,pse=zC.formatPrefix,zC}function g7e(e){return Math.max(0,-Zv(Math.abs(e)))}function x7e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zv(t)/3)))*3-Zv(Math.abs(e)))}function v7e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zv(t)-Zv(e))+1}function gse(e,t,r,n){var a=BF(e,t,r),s;switch(n=Xw(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=x7e(a,i))&&(n.precision=s),pse(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=v7e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=g7e(a))&&(n.precision=s-(n.type==="%")*2);break}}return nL(n)}function Dm(e){var t=e.domain;return e.ticks=function(r){var n=t();return NF(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return gse(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],o=n[s],c,u,d=10;for(o<i&&(u=i,i=o,o=u,u=a,a=s,s=u);d-- >0;){if(u=kF(i,o,r),u===c)return n[a]=i,n[s]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function xse(){var e=tL();return e.copy=function(){return Q2(e,xse())},Qu.apply(e,arguments),Dm(e)}function vse(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,D5),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return vse(e).unknown(t)},e=arguments.length?Array.from(e,D5):[0,1],Dm(r)}function bse(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function dG(e){return Math.log(e)}function AG(e){return Math.exp(e)}function b7e(e){return-Math.log(-e)}function y7e(e){return-Math.exp(-e)}function w7e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function E7e(e){return e===10?w7e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function C7e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function fG(e){return(t,r)=>-e(-t,r)}function aL(e){const t=e(dG,AG),r=t.domain;let n=10,a,s;function i(){return a=C7e(n),s=E7e(n),r()[0]<0?(a=fG(a),s=fG(s),e(b7e,y7e)):e(dG,AG),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),g,x;const b=o==null?10:+o;let y=[];if(!(n%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<n;++g)if(x=h<0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<b&&(y=NF(u,d,b))}else y=NF(h,p,Math.min(p-h,b)).map(s);return f?y.reverse():y},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Xw(c)).precision==null&&(c.trim=!0),c=nL(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(bse(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),t}function yse(){const e=aL(W4()).domain([1,10]);return e.copy=()=>Q2(e,yse()).base(e.base()),Qu.apply(e,arguments),e}function hG(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function mG(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sL(e){var t=1,r=e(hG(t),mG(t));return r.constant=function(n){return arguments.length?e(hG(t=+n),mG(t)):t},Dm(r)}function wse(){var e=sL(W4());return e.copy=function(){return Q2(e,wse()).constant(e.constant())},Qu.apply(e,arguments)}function pG(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _7e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function S7e(e){return e<0?-e*e:e*e}function iL(e){var t=e(pl,pl),r=1;function n(){return r===1?e(pl,pl):r===.5?e(_7e,S7e):e(pG(r),pG(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Dm(t)}function oL(){var e=iL(W4());return e.copy=function(){return Q2(e,oL()).exponent(e.exponent())},Qu.apply(e,arguments),e}function N7e(){return oL.apply(null,arguments).exponent(.5)}function gG(e){return Math.sign(e)*e*e}function k7e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Ese(){var e=tL(),t=[0,1],r=!1,n;function a(s){var i=k7e(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(gG(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,D5)).map(gG)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Ese(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Qu.apply(a,arguments),Dm(a)}function Cse(){var e=[],t=[],r=[],n;function a(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=_Ue(e,i/o);return s}function s(i){return i==null||isNaN(i=+i)?n:t[M2(r,i)]}return s.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(em),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Cse().domain(e).range(t).unknown(n)},Qu.apply(s,arguments)}function _se(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[M2(n,c,0,r)]:s}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return _se().domain([e,t]).range(a).unknown(s)},Qu.apply(Dm(i),arguments)}function Sse(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[M2(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Sse().domain(e).range(t).unknown(r)},Qu.apply(a,arguments)}const bj=new Date,yj=new Date;function ki(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),o=a.ceil(s);return s-i<o-s?i:o},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,o)=>{const c=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<i)||!(o>0))return c;let u;do c.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<i);return c},a.filter=s=>ki(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!s(i););else for(;--o>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>(bj.setTime(+s),yj.setTime(+i),e(bj),e(yj),Math.floor(r(bj,yj))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const R5=ki(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);R5.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ki(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):R5);R5.range;const qf=1e3,Bu=qf*60,Wf=Bu*60,gh=Wf*24,lL=gh*7,xG=gh*30,wj=gh*365,Tp=ki(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*qf)},(e,t)=>(t-e)/qf,e=>e.getUTCSeconds());Tp.range;const cL=ki(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qf)},(e,t)=>{e.setTime(+e+t*Bu)},(e,t)=>(t-e)/Bu,e=>e.getMinutes());cL.range;const uL=ki(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bu)},(e,t)=>(t-e)/Bu,e=>e.getUTCMinutes());uL.range;const dL=ki(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qf-e.getMinutes()*Bu)},(e,t)=>{e.setTime(+e+t*Wf)},(e,t)=>(t-e)/Wf,e=>e.getHours());dL.range;const AL=ki(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Wf)},(e,t)=>(t-e)/Wf,e=>e.getUTCHours());AL.range;const H2=ki(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bu)/gh,e=>e.getDate()-1);H2.range;const X4=ki(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gh,e=>e.getUTCDate()-1);X4.range;const Nse=ki(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gh,e=>Math.floor(e/gh));Nse.range;function jg(e){return ki(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Bu)/lL)}const Y4=jg(0),L5=jg(1),B7e=jg(2),T7e=jg(3),e1=jg(4),j7e=jg(5),I7e=jg(6);Y4.range;L5.range;B7e.range;T7e.range;e1.range;j7e.range;I7e.range;function Ig(e){return ki(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/lL)}const J4=Ig(0),M5=Ig(1),F7e=Ig(2),O7e=Ig(3),t1=Ig(4),D7e=Ig(5),P7e=Ig(6);J4.range;M5.range;F7e.range;O7e.range;t1.range;D7e.range;P7e.range;const fL=ki(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());fL.range;const hL=ki(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());hL.range;const xh=ki(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());xh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ki(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});xh.range;const vh=ki(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());vh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ki(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});vh.range;function kse(e,t,r,n,a,s){const i=[[Tp,1,qf],[Tp,5,5*qf],[Tp,15,15*qf],[Tp,30,30*qf],[s,1,Bu],[s,5,5*Bu],[s,15,15*Bu],[s,30,30*Bu],[a,1,Wf],[a,3,3*Wf],[a,6,6*Wf],[a,12,12*Wf],[n,1,gh],[n,2,2*gh],[r,1,lL],[t,1,xG],[t,3,3*xG],[e,1,wj]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,p=XR(([,,b])=>b).right(i,h);if(p===i.length)return e.every(BF(u/wj,d/wj,f));if(p===0)return R5.every(Math.max(BF(u,d,f),1));const[g,x]=i[h/i[p-1][2]<i[p][2]/h?p-1:p];return g.every(x)}return[o,c]}const[R7e,L7e]=kse(vh,hL,J4,Nse,AL,uL),[M7e,U7e]=kse(xh,fL,Y4,H2,dL,cL);function Ej(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Cj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Kb(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Q7e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,c=e.shortMonths,u=qb(a),d=Wb(a),f=qb(s),h=Wb(s),p=qb(i),g=Wb(i),x=qb(o),b=Wb(o),y=qb(c),w=Wb(c),S={a:X,A:V,b:z,B:q,c:null,d:CG,e:CG,f:u9e,g:b9e,G:w9e,H:o9e,I:l9e,j:c9e,L:Bse,m:d9e,M:A9e,p:ne,q:M,Q:NG,s:kG,S:f9e,u:h9e,U:m9e,V:p9e,w:g9e,W:x9e,x:null,X:null,y:v9e,Y:y9e,Z:E9e,"%":SG},j={a:W,A:Z,b:re,B:ae,c:null,d:_G,e:_G,f:N9e,g:R9e,G:M9e,H:C9e,I:_9e,j:S9e,L:jse,m:k9e,M:B9e,p:ce,q:oe,Q:NG,s:kG,S:T9e,u:j9e,U:I9e,V:F9e,w:O9e,W:D9e,x:null,X:null,y:P9e,Y:L9e,Z:U9e,"%":SG},N={a:P,A:D,b:I,B:U,c:R,d:wG,e:wG,f:n9e,g:yG,G:bG,H:EG,I:EG,j:Z7e,L:r9e,m:J7e,M:e9e,p:B,q:Y7e,Q:s9e,s:i9e,S:t9e,u:G7e,U:K7e,V:q7e,w:$7e,W:W7e,x:Y,X:H,y:yG,Y:bG,Z:X7e,"%":a9e};S.x=F(r,S),S.X=F(n,S),S.c=F(t,S),j.x=F(r,j),j.X=F(n,j),j.c=F(t,j);function F(le,pe){return function(Be){var te=[],_e=-1,De=0,Ne=le.length,fe,Ie,Ue;for(Be instanceof Date||(Be=new Date(+Be));++_e<Ne;)le.charCodeAt(_e)===37&&(te.push(le.slice(De,_e)),(Ie=vG[fe=le.charAt(++_e)])!=null?fe=le.charAt(++_e):Ie=fe==="e"?" ":"0",(Ue=pe[fe])&&(fe=Ue(Be,Ie)),te.push(fe),De=_e+1);return te.push(le.slice(De,_e)),te.join("")}}function E(le,pe){return function(Be){var te=Kb(1900,void 0,1),_e=_(te,le,Be+="",0),De,Ne;if(_e!=Be.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(pe&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(De=Cj(Kb(te.y,0,1)),Ne=De.getUTCDay(),De=Ne>4||Ne===0?M5.ceil(De):M5(De),De=X4.offset(De,(te.V-1)*7),te.y=De.getUTCFullYear(),te.m=De.getUTCMonth(),te.d=De.getUTCDate()+(te.w+6)%7):(De=Ej(Kb(te.y,0,1)),Ne=De.getDay(),De=Ne>4||Ne===0?L5.ceil(De):L5(De),De=H2.offset(De,(te.V-1)*7),te.y=De.getFullYear(),te.m=De.getMonth(),te.d=De.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Ne="Z"in te?Cj(Kb(te.y,0,1)).getUTCDay():Ej(Kb(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Ne+5)%7:te.w+te.U*7-(Ne+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,Cj(te)):Ej(te)}}function _(le,pe,Be,te){for(var _e=0,De=pe.length,Ne=Be.length,fe,Ie;_e<De;){if(te>=Ne)return-1;if(fe=pe.charCodeAt(_e++),fe===37){if(fe=pe.charAt(_e++),Ie=N[fe in vG?pe.charAt(_e++):fe],!Ie||(te=Ie(le,Be,te))<0)return-1}else if(fe!=Be.charCodeAt(te++))return-1}return te}function B(le,pe,Be){var te=u.exec(pe.slice(Be));return te?(le.p=d.get(te[0].toLowerCase()),Be+te[0].length):-1}function P(le,pe,Be){var te=p.exec(pe.slice(Be));return te?(le.w=g.get(te[0].toLowerCase()),Be+te[0].length):-1}function D(le,pe,Be){var te=f.exec(pe.slice(Be));return te?(le.w=h.get(te[0].toLowerCase()),Be+te[0].length):-1}function I(le,pe,Be){var te=y.exec(pe.slice(Be));return te?(le.m=w.get(te[0].toLowerCase()),Be+te[0].length):-1}function U(le,pe,Be){var te=x.exec(pe.slice(Be));return te?(le.m=b.get(te[0].toLowerCase()),Be+te[0].length):-1}function R(le,pe,Be){return _(le,t,pe,Be)}function Y(le,pe,Be){return _(le,r,pe,Be)}function H(le,pe,Be){return _(le,n,pe,Be)}function X(le){return i[le.getDay()]}function V(le){return s[le.getDay()]}function z(le){return c[le.getMonth()]}function q(le){return o[le.getMonth()]}function ne(le){return a[+(le.getHours()>=12)]}function M(le){return 1+~~(le.getMonth()/3)}function W(le){return i[le.getUTCDay()]}function Z(le){return s[le.getUTCDay()]}function re(le){return c[le.getUTCMonth()]}function ae(le){return o[le.getUTCMonth()]}function ce(le){return a[+(le.getUTCHours()>=12)]}function oe(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var pe=F(le+="",S);return pe.toString=function(){return le},pe},parse:function(le){var pe=E(le+="",!1);return pe.toString=function(){return le},pe},utcFormat:function(le){var pe=F(le+="",j);return pe.toString=function(){return le},pe},utcParse:function(le){var pe=E(le+="",!0);return pe.toString=function(){return le},pe}}}var vG={"-":"",_:" ",0:"0"},Ji=/^\s*\d+/,H7e=/^%/,V7e=/[\\^$*+?|[\]().{}]/g;function Yn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function z7e(e){return e.replace(V7e,"\\$&")}function qb(e){return new RegExp("^(?:"+e.map(z7e).join("|")+")","i")}function Wb(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function $7e(e,t,r){var n=Ji.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function G7e(e,t,r){var n=Ji.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function K7e(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function q7e(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function W7e(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function bG(e,t,r){var n=Ji.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function yG(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function X7e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Y7e(e,t,r){var n=Ji.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function J7e(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function wG(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Z7e(e,t,r){var n=Ji.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function EG(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function e9e(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function t9e(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function r9e(e,t,r){var n=Ji.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function n9e(e,t,r){var n=Ji.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function a9e(e,t,r){var n=H7e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function s9e(e,t,r){var n=Ji.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function i9e(e,t,r){var n=Ji.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function CG(e,t){return Yn(e.getDate(),t,2)}function o9e(e,t){return Yn(e.getHours(),t,2)}function l9e(e,t){return Yn(e.getHours()%12||12,t,2)}function c9e(e,t){return Yn(1+H2.count(xh(e),e),t,3)}function Bse(e,t){return Yn(e.getMilliseconds(),t,3)}function u9e(e,t){return Bse(e,t)+"000"}function d9e(e,t){return Yn(e.getMonth()+1,t,2)}function A9e(e,t){return Yn(e.getMinutes(),t,2)}function f9e(e,t){return Yn(e.getSeconds(),t,2)}function h9e(e){var t=e.getDay();return t===0?7:t}function m9e(e,t){return Yn(Y4.count(xh(e)-1,e),t,2)}function Tse(e){var t=e.getDay();return t>=4||t===0?e1(e):e1.ceil(e)}function p9e(e,t){return e=Tse(e),Yn(e1.count(xh(e),e)+(xh(e).getDay()===4),t,2)}function g9e(e){return e.getDay()}function x9e(e,t){return Yn(L5.count(xh(e)-1,e),t,2)}function v9e(e,t){return Yn(e.getFullYear()%100,t,2)}function b9e(e,t){return e=Tse(e),Yn(e.getFullYear()%100,t,2)}function y9e(e,t){return Yn(e.getFullYear()%1e4,t,4)}function w9e(e,t){var r=e.getDay();return e=r>=4||r===0?e1(e):e1.ceil(e),Yn(e.getFullYear()%1e4,t,4)}function E9e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Yn(t/60|0,"0",2)+Yn(t%60,"0",2)}function _G(e,t){return Yn(e.getUTCDate(),t,2)}function C9e(e,t){return Yn(e.getUTCHours(),t,2)}function _9e(e,t){return Yn(e.getUTCHours()%12||12,t,2)}function S9e(e,t){return Yn(1+X4.count(vh(e),e),t,3)}function jse(e,t){return Yn(e.getUTCMilliseconds(),t,3)}function N9e(e,t){return jse(e,t)+"000"}function k9e(e,t){return Yn(e.getUTCMonth()+1,t,2)}function B9e(e,t){return Yn(e.getUTCMinutes(),t,2)}function T9e(e,t){return Yn(e.getUTCSeconds(),t,2)}function j9e(e){var t=e.getUTCDay();return t===0?7:t}function I9e(e,t){return Yn(J4.count(vh(e)-1,e),t,2)}function Ise(e){var t=e.getUTCDay();return t>=4||t===0?t1(e):t1.ceil(e)}function F9e(e,t){return e=Ise(e),Yn(t1.count(vh(e),e)+(vh(e).getUTCDay()===4),t,2)}function O9e(e){return e.getUTCDay()}function D9e(e,t){return Yn(M5.count(vh(e)-1,e),t,2)}function P9e(e,t){return Yn(e.getUTCFullYear()%100,t,2)}function R9e(e,t){return e=Ise(e),Yn(e.getUTCFullYear()%100,t,2)}function L9e(e,t){return Yn(e.getUTCFullYear()%1e4,t,4)}function M9e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?t1(e):t1.ceil(e),Yn(e.getUTCFullYear()%1e4,t,4)}function U9e(){return"+0000"}function SG(){return"%"}function NG(e){return+e}function kG(e){return Math.floor(+e/1e3)}var yx,Fse,Ose;Q9e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Q9e(e){return yx=Q7e(e),Fse=yx.format,yx.parse,Ose=yx.utcFormat,yx.utcParse,yx}function H9e(e){return new Date(e)}function V9e(e){return e instanceof Date?+e:+new Date(+e)}function mL(e,t,r,n,a,s,i,o,c,u){var d=tL(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),x=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),w=u("%b %d"),S=u("%B"),j=u("%Y");function N(F){return(c(F)<F?p:o(F)<F?g:i(F)<F?x:s(F)<F?b:n(F)<F?a(F)<F?y:w:r(F)<F?S:j)(F)}return d.invert=function(F){return new Date(f(F))},d.domain=function(F){return arguments.length?h(Array.from(F,V9e)):h().map(H9e)},d.ticks=function(F){var E=h();return e(E[0],E[E.length-1],F??10)},d.tickFormat=function(F,E){return E==null?N:u(E)},d.nice=function(F){var E=h();return(!F||typeof F.range!="function")&&(F=t(E[0],E[E.length-1],F??10)),F?h(bse(E,F)):d},d.copy=function(){return Q2(d,mL(e,t,r,n,a,s,i,o,c,u))},d}function z9e(){return Qu.apply(mL(M7e,U7e,xh,fL,Y4,H2,dL,cL,Tp,Fse).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $9e(){return Qu.apply(mL(R7e,L7e,vh,hL,J4,X4,AL,uL,Tp,Ose).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Z4(){var e=0,t=1,r,n,a,s,i=pl,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(s(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,i=f(p,g),u):[i(0),i(1)]}}return u.range=d(O1),u.rangeRound=d(eL),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Pm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Dse(){var e=Dm(Z4()(pl));return e.copy=function(){return Pm(e,Dse())},Fh.apply(e,arguments)}function Pse(){var e=aL(Z4()).domain([1,10]);return e.copy=function(){return Pm(e,Pse()).base(e.base())},Fh.apply(e,arguments)}function Rse(){var e=sL(Z4());return e.copy=function(){return Pm(e,Rse()).constant(e.constant())},Fh.apply(e,arguments)}function pL(){var e=iL(Z4());return e.copy=function(){return Pm(e,pL()).exponent(e.exponent())},Fh.apply(e,arguments)}function G9e(){return pL.apply(null,arguments).exponent(.5)}function Lse(){var e=[],t=pl;function r(n){if(n!=null&&!isNaN(n=+n))return t((M2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(em),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>CUe(e,s/n))},r.copy=function(){return Lse(t).domain(e)},Fh.apply(r,arguments)}function ek(){var e=0,t=.5,r=1,n=1,a,s,i,o,c,u=pl,d,f=!1,h;function p(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-s)*(n*x<n*s?o:c),u(f?Math.max(0,Math.min(1,x)):x))}p.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),i=d(r=+r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,p):[e,t,r]},p.clamp=function(x){return arguments.length?(f=!!x,p):f},p.interpolator=function(x){return arguments.length?(u=x,p):u};function g(x){return function(b){var y,w,S;return arguments.length?([y,w,S]=b,u=a7e(x,[y,w,S]),p):[u(0),u(.5),u(1)]}}return p.range=g(O1),p.rangeRound=g(eL),p.unknown=function(x){return arguments.length?(h=x,p):h},function(x){return d=x,a=x(e),s=x(t),i=x(r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,p}}function Mse(){var e=Dm(ek()(pl));return e.copy=function(){return Pm(e,Mse())},Fh.apply(e,arguments)}function Use(){var e=aL(ek()).domain([.1,1,10]);return e.copy=function(){return Pm(e,Use()).base(e.base())},Fh.apply(e,arguments)}function Qse(){var e=sL(ek());return e.copy=function(){return Pm(e,Qse()).constant(e.constant())},Fh.apply(e,arguments)}function gL(){var e=iL(ek());return e.copy=function(){return Pm(e,gL()).exponent(e.exponent())},Fh.apply(e,arguments)}function K9e(){return gL.apply(null,arguments).exponent(.5)}const yy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:YR,scaleDiverging:Mse,scaleDivergingLog:Use,scaleDivergingPow:gL,scaleDivergingSqrt:K9e,scaleDivergingSymlog:Qse,scaleIdentity:vse,scaleImplicit:TF,scaleLinear:xse,scaleLog:yse,scaleOrdinal:q4,scalePoint:NUe,scalePow:oL,scaleQuantile:Cse,scaleQuantize:_se,scaleRadial:Ese,scaleSequential:Dse,scaleSequentialLog:Pse,scaleSequentialPow:pL,scaleSequentialQuantile:Lse,scaleSequentialSqrt:G9e,scaleSequentialSymlog:Rse,scaleSqrt:N7e,scaleSymlog:wse,scaleThreshold:Sse,scaleTime:z9e,scaleUtc:$9e,tickFormat:gse},Symbol.toStringTag,{value:"Module"}));var Rm=e=>e.chartData,tk=ut([Rm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),xL=(e,t,r,n)=>n?tk(e):Rm(e);function r1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Uc(t)&&Uc(r))return!0}return!1}function BG(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function q9e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Uc(r))a=r;else if(typeof r=="function")return;if(Uc(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(r1(i))return i}}function W9e(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(r1(n))return BG(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,o;if(a==="auto")t!=null&&(i=Math.min(...t));else if(ur(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&m$.test(a)){var c=m$.exec(a);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(ur(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&p$.test(s)){var d=p$.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[i,o];if(r1(h))return t==null?h:BG(h,t,r)}}}var D1=1e9,X9e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},bL,Ja=!0,Ru="[DecimalError] ",$p=Ru+"Invalid argument: ",vL=Ru+"Exponent out of range: ",P1=Math.floor,xp=Math.pow,Y9e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Tc,Vi=1e7,La=7,Hse=9007199254740991,U5=P1(Hse/La),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*La;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return sh(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return Na(sh(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return hi(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Tc))throw Error(Ru+"NaN");if(r.s<1)throw Error(Ru+(r.s?"NaN":"-Infinity"));return r.eq(Tc)?new n(0):(Ja=!1,t=sh(Yw(r,s),Yw(e,s),s),Ja=!0,Na(t,a))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$se(t,e):Vse(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Ru+"NaN");return r.s?(Ja=!1,t=sh(r,e,0,1).times(e),Ja=!0,r.minus(t)):Na(new n(r),a)};Ar.naturalExponential=Ar.exp=function(){return zse(this)};Ar.naturalLogarithm=Ar.ln=function(){return Yw(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Vse(t,e):$se(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error($p+e);if(t=hi(a)+1,n=a.d.length-1,r=n*La+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,n,a,s,i,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Ru+"NaN")}for(e=hi(o),Ja=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=RA(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=P1((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(sh(o,s,i+2)).times(.5),RA(s.d).slice(0,i)===(t=RA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(Na(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;i+=4}return Ja=!0,Na(n,r)};Ar.times=Ar.mul=function(e){var t,r,n,a,s,i,o,c,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=p.length,c<u&&(s=h,h=p,p=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=s[a]+p[n]*h[a-n-1]+t,s[a--]=o%Vi|0,t=o/Vi|0;s[a]=(s[a]+t)%Vi|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Ja?Na(e,f.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(XA(e,0,D1),t===void 0?t=n.rounding:XA(t,0,8),Na(r,e+hi(r)+1,t))};Ar.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Ag(n,!0):(XA(e,0,D1),t===void 0?t=a.rounding:XA(t,0,8),n=Na(new a(n),e+1,t),r=Ag(n,!0,e+1)),r};Ar.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?Ag(a):(XA(e,0,D1),t===void 0?t=s.rounding:XA(t,0,8),n=Na(new s(a),e+hi(a)+1,t),r=Ag(n.abs(),!1,e+hi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return Na(new t(e),hi(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,n,a,s,i,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Tc);if(o=new c(o),!o.s){if(e.s<1)throw Error(Ru+"Infinity");return o}if(o.eq(Tc))return o;if(n=c.precision,e.eq(Tc))return Na(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=o.s,i){if((r=d<0?-d:d)<=Hse){for(a=new c(Tc),t=Math.ceil(n/La+4),Ja=!1;r%2&&(a=a.times(o),jG(a.d,t)),r=P1(r/2),r!==0;)o=o.times(o),jG(o.d,t);return Ja=!0,e.s<0?new c(Tc).div(a):Na(a,n)}}else if(s<0)throw Error(Ru+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Ja=!1,a=e.times(Yw(o,n+u)),Ja=!0,a=zse(a),a.s=s,a};Ar.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=hi(a),n=Ag(a,r<=s.toExpNeg||r>=s.toExpPos)):(XA(e,1,D1),t===void 0?t=s.rounding:XA(t,0,8),a=Na(new s(a),e,t),r=hi(a),n=Ag(a,e<=r||r<=s.toExpNeg,e)),n};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(XA(e,1,D1),t===void 0?t=n.rounding:XA(t,0,8)),Na(new n(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=hi(e),r=e.constructor;return Ag(e,t<=r.toExpNeg||t>=r.toExpPos)};function Vse(e,t){var r,n,a,s,i,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ja?Na(t,f):t;if(c=e.d,u=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,o=u.length):(n=u,a=i,o=c.length),i=Math.ceil(f/La),o=i>o?i+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=c.length,s=u.length,o-s<0&&(s=o,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Vi|0,c[s]%=Vi;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,Ja?Na(t,f):t}function XA(e,t,r){if(e!==~~e||e<t||e>r)throw Error($p+e)}function RA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=La-n.length,r&&(s+=k0(r)),s+=n;i=e[t],n=i+"",r=La-n.length,r&&(s+=k0(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var sh=function(){function e(n,a){var s,i=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+i,n[o]=s%Vi|0,i=s/Vi|0;return i&&n.unshift(i),n}function t(n,a,s,i){var o,c;if(s!=i)c=s>i?1:-1;else for(o=c=0;o<s;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*Vi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var o,c,u,d,f,h,p,g,x,b,y,w,S,j,N,F,E,_,B=n.constructor,P=n.s==a.s?1:-1,D=n.d,I=a.d;if(!n.s)return new B(n);if(!a.s)throw Error(Ru+"Division by zero");for(c=n.e-a.e,E=I.length,N=D.length,p=new B(P),g=p.d=[],u=0;I[u]==(D[u]||0);)++u;if(I[u]>(D[u]||0)&&--c,s==null?w=s=B.precision:i?w=s+(hi(n)-hi(a))+1:w=s,w<0)return new B(0);if(w=w/La+2|0,u=0,E==1)for(d=0,I=I[0],w++;(u<N||d)&&w--;u++)S=d*Vi+(D[u]||0),g[u]=S/I|0,d=S%I|0;else{for(d=Vi/(I[0]+1)|0,d>1&&(I=e(I,d),D=e(D,d),E=I.length,N=D.length),j=E,x=D.slice(0,E),b=x.length;b<E;)x[b++]=0;_=I.slice(),_.unshift(0),F=I[0],I[1]>=Vi/2&&++F;do d=0,o=t(I,x,E,b),o<0?(y=x[0],E!=b&&(y=y*Vi+(x[1]||0)),d=y/F|0,d>1?(d>=Vi&&(d=Vi-1),f=e(I,d),h=f.length,b=x.length,o=t(f,x,h,b),o==1&&(d--,r(f,E<h?_:I,h))):(d==0&&(o=d=1),f=I.slice()),h=f.length,h<b&&f.unshift(0),r(x,f,b),o==-1&&(b=x.length,o=t(I,x,E,b),o<1&&(d++,r(x,E<b?_:I,b))),b=x.length):o===0&&(d++,x=[0]),g[u++]=d,o&&x[0]?x[b++]=D[j]||0:(x=[D[j]],b=1);while((j++<N||x[0]!==void 0)&&w--)}return g[0]||g.shift(),p.e=c,Na(p,i?s+hi(p)+1:s)}}();function zse(e,t){var r,n,a,s,i,o,c=0,u=0,d=e.constructor,f=d.precision;if(hi(e)>16)throw Error(vL+hi(e));if(!e.s)return new d(Tc);for(Ja=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(xp(2,u))/Math.LN10*2+5|0,o+=n,r=a=s=new d(Tc),d.precision=o;;){if(a=Na(a.times(e),o),r=r.times(++c),i=s.plus(sh(a,r,o)),RA(i.d).slice(0,o)===RA(s.d).slice(0,o)){for(;u--;)s=Na(s.times(s),o);return d.precision=f,t==null?(Ja=!0,Na(s,f)):s}s=i}}function hi(e){for(var t=e.e*La,r=e.d[0];r>=10;r/=10)t++;return t}function _j(e,t,r){if(t>e.LN10.sd())throw Ja=!0,r&&(e.precision=r),Error(Ru+"LN10 precision limit exceeded");return Na(new e(e.LN10),t)}function k0(e){for(var t="";e--;)t+="0";return t}function Yw(e,t){var r,n,a,s,i,o,c,u,d,f=1,h=10,p=e,g=p.d,x=p.constructor,b=x.precision;if(p.s<1)throw Error(Ru+(p.s?"NaN":"-Infinity"));if(p.eq(Tc))return new x(0);if(t==null?(Ja=!1,u=b):u=t,p.eq(10))return t==null&&(Ja=!0),_j(x,u);if(u+=h,x.precision=u,r=RA(g),n=r.charAt(0),s=hi(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=RA(p.d),n=r.charAt(0),f++;s=hi(p),n>1?(p=new x("0."+r),s++):p=new x(n+"."+r.slice(1))}else return c=_j(x,u+2,b).times(s+""),p=Yw(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=b,t==null?(Ja=!0,Na(p,b)):p;for(o=i=p=sh(p.minus(Tc),p.plus(Tc),u),d=Na(p.times(p),u),a=3;;){if(i=Na(i.times(d),u),c=o.plus(sh(i,new x(a),u)),RA(c.d).slice(0,u)===RA(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(_j(x,u+2,b).times(s+""))),o=sh(o,new x(f),u),x.precision=b,t==null?(Ja=!0,Na(o,b)):o;o=c,a+=2}}function TG(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=P1(r/La),e.d=[],n=(r+1)%La,r<0&&(n+=La),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=La;n<a;)e.d.push(+t.slice(n,n+=La));t=t.slice(n),n=La-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Ja&&(e.e>U5||e.e<-U5))throw Error(vL+r)}else e.s=0,e.e=0,e.d=[0];return e}function Na(e,t,r){var n,a,s,i,o,c,u,d,f=e.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=La,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/La),s=f.length,d>=s)return e;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=La,a=n-La+i}if(r!==void 0&&(s=xp(10,i-a-1),o=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/xp(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=hi(e),f.length=1,t=t-s-1,f[0]=xp(10,(La-t%La)%La),e.e=P1(-t/La)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=xp(10,La-n),f[d]=a>0?(u/xp(10,i-a)%xp(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Vi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=Vi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Ja&&(e.e>U5||e.e<-U5))throw Error(vL+hi(e));return e}function $se(e,t){var r,n,a,s,i,o,c,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ja?Na(t,p):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(p/La),o)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Vi-1;--c[s],c[a]+=Vi}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Ja?Na(t,p):t):new h(0)}function Ag(e,t,r){var n,a=hi(e),s=RA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+k0(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+k0(-a-1)+s,r&&(n=r-i)>0&&(s+=k0(n))):a>=i?(s+=k0(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+k0(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=k0(n))),e.s<0?"-"+s:s}function jG(e,t){if(e.length>t)return e.length=t,!0}function Gse(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error($p+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return TG(i,s.toString())}else if(typeof s!="string")throw Error($p+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,Y9e.test(s))TG(i,s);else throw Error($p+s)}if(a.prototype=Ar,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Gse,a.config=a.set=J9e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function J9e(e){if(!e||typeof e!="object")throw Error(Ru+"Object expected");var t,r,n,a=["precision",1,D1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(P1(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error($p+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error($p+r+": "+n);return this}var bL=Gse(X9e);Tc=new bL(1);const ha=bL;var Z9e=e=>e,Kse={},qse=e=>e===Kse,IG=e=>function t(){return arguments.length===0||arguments.length===1&&qse(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Wse=(e,t)=>e===1?t:IG(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==Kse).length;return s>=e?t(...n):Wse(e-s,IG(function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=n.map(d=>qse(d)?o.shift():d);return t(...u,...o)}))}),rk=e=>Wse(e.length,e),DF=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},eQe=rk((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),tQe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Z9e;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((o,c)=>c(o),s(...arguments))}},PF=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Xse=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,o)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[o])})||(t=a,r=e(...a)),r}};function Yse(e){var t;return e===0?t=1:t=Math.floor(new ha(e).abs().log(10).toNumber())+1,t}function Jse(e,t,r){for(var n=new ha(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}rk((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});rk((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});rk((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Zse=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},eie=(e,t,r)=>{if(e.lte(0))return new ha(0);var n=Yse(e.toNumber()),a=new ha(10).pow(n),s=e.div(a),i=n!==1?.05:.1,o=new ha(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=o.mul(a);return t?new ha(c.toNumber()):new ha(Math.ceil(c.toNumber()))},rQe=(e,t,r)=>{var n=new ha(1),a=new ha(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ha(10).pow(Yse(e)-1),a=new ha(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ha(Math.floor(e)))}else e===0?a=new ha(Math.floor((t-1)/2)):r||(a=new ha(Math.floor(e)));var i=Math.floor((t-1)/2),o=tQe(eQe(c=>a.add(new ha(c-i).mul(n)).toNumber()),DF);return o(0,t)},tie=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ha(0),tickMin:new ha(0),tickMax:new ha(0)};var i=eie(new ha(r).sub(t).div(n-1),a,s),o;t<=0&&r>=0?o=new ha(0):(o=new ha(t).add(r).div(2),o=o.sub(new ha(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ha(r).sub(o).div(i).toNumber()),d=c+u+1;return d>n?tie(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:o.sub(new ha(c).mul(i)),tickMax:o.add(new ha(u).mul(i))})};function nQe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,o]=Zse([t,r]);if(i===-1/0||o===1/0){var c=o===1/0?[i,...DF(0,n-1).map(()=>1/0)]:[...DF(0,n-1).map(()=>-1/0),o];return t>r?PF(c):c}if(i===o)return rQe(i,n,a);var{step:u,tickMin:d,tickMax:f}=tie(i,o,s,a,0),h=Jse(d,f.add(new ha(.1).mul(u)),u);return t>r?PF(h):h}function aQe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=Zse([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),c=eie(new ha(i).sub(s).div(o-1),a,0),u=[...Jse(new ha(s),new ha(i),c),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?PF(u):u}var sQe=Xse(nQe),iQe=Xse(aQe),rie=e=>e.rootProps.maxBarSize,oQe=e=>e.rootProps.barGap,nie=e=>e.rootProps.barCategoryGap,lQe=e=>e.rootProps.barSize,V2=e=>e.rootProps.stackOffset,yL=e=>e.options.chartName,wL=e=>e.rootProps.syncId,aie=e=>e.rootProps.syncMethod,EL=e=>e.options.eventEmitter,jA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Vl={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},nk=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},cQe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:jA.angleAxisId,includeHidden:!1,name:void 0,reversed:jA.reversed,scale:jA.scale,tick:jA.tick,tickCount:void 0,ticks:void 0,type:jA.type,unit:void 0},uQe={allowDataOverflow:Vl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Vl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Vl.scale,tick:Vl.tick,tickCount:Vl.tickCount,ticks:void 0,type:Vl.type,unit:void 0},dQe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:jA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:jA.scale,tick:jA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},AQe={allowDataOverflow:Vl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Vl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Vl.scale,tick:Vl.tick,tickCount:Vl.tickCount,ticks:void 0,type:"category",unit:void 0},R1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?dQe:cQe,z2=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?AQe:uQe,ak=e=>e.polarOptions,CL=ut([jh,Ih,Ni],Fae),sie=ut([ak,CL],(e,t)=>{if(e!=null)return bl(e.innerRadius,t,0)}),iie=ut([ak,CL],(e,t)=>{if(e!=null)return bl(e.outerRadius,t,t*.8)}),fQe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},oie=ut([ak],fQe),hQe=ut([R1,oie],nk),lie=ut([CL,sie,iie],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),mQe=ut([z2,lie],nk),L1=ut([Tn,ak,sie,iie,jh,Ih],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:c,endAngle:u}=t;return{cx:bl(i,a,a/2),cy:bl(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ka=(e,t)=>t,$2=(e,t,r)=>r;function _L(e){return e==null?void 0:e.id}var Bi=e=>{var t=Tn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},M1=e=>e.tooltip.settings.axisId,Ti=e=>{var t=Bi(e),r=M1(e);return U1(e,t,r)};function cie(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var o,c=(o=i.data)!==null&&o!==void 0?o:n;if(!(c==null||c.length===0)){var u=_L(i);c.forEach((d,f)=>{var h=a==null?f:String(Pa(d,a,null)),p=Pa(d,i.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:p}),s.set(h,g)})}}),Array.from(s.values())}function sk(e){return e.stackId!=null&&e.dataKey!=null}function FG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Q5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FG(Object(r),!0).forEach(function(n){pQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pQe(e,t,r){return(t=gQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gQe(e){var t=xQe(e,"string");return typeof t=="symbol"?t:t+""}function xQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RF=[0,"auto"],wc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Oh=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??wc},Ec={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:RF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:z4},Lm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Ec},vQe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},SL=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??vQe},Ys=(e,t,r)=>{switch(t){case"xAxis":return Oh(e,r);case"yAxis":return Lm(e,r);case"zAxis":return SL(e,r);case"angleAxis":return R1(e,r);case"radiusAxis":return z2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},bQe=(e,t,r)=>{switch(t){case"xAxis":return Oh(e,r);case"yAxis":return Lm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},U1=(e,t,r)=>{switch(t){case"xAxis":return Oh(e,r);case"yAxis":return Lm(e,r);case"angleAxis":return R1(e,r);case"radiusAxis":return z2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},uie=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function NL(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var kL=e=>e.graphicalItems.cartesianItems,yQe=ut([ka,$2],NL),BL=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),G2=ut([kL,Ys,yQe],BL),die=ut([G2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(sk)),Aie=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),fie=ut([G2],Aie),TL=e=>e.map(t=>t.data).filter(Boolean).flat(1),wQe=ut([G2],TL),jL=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},IL=ut([wQe,xL],jL),FL=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Pa(a,n)}))):e.map(n=>({value:n})),ik=ut([IL,Ys,G2],FL);function hie(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Fg(e){return e.filter(t=>WA(t)||t instanceof Date).map(Number).filter(t=>Rc(t)===!1)}function EQe(e,t,r){return!r||typeof t!="number"||Rc(t)?[]:r.length?Fg(r.flatMap(n=>{var a=Pa(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Uc(s)||!Uc(i)))return[t-s,t+i]})):[]}var CQe=ut([die,xL,Ti],cie),mie=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,o]=s,c=o.map(_L);return[i,{stackedData:g8e(e,c,r),graphicalItems:o}]}))},LF=ut([CQe,die,V2],mie),pie=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=w8e(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},_Qe=ut([LF,Rm,ka],pie),gie=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,c,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>hie(a,f)),d=Pa(s,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:EQe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Pa(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),ok=e=>e.errorBars,xie=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>hie(r,n));ut([fie,ok,ka],xie);var SQe=ut([IL,Ys,fie,ok,ka],gie);function NQe(e){var{value:t}=e;if(WA(t)||t instanceof Date)return t}var OG=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Fg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},kQe=(e,t,r)=>{var n=e.map(NQe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Tne(n))?ase(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},OL=e=>{var t;if(e==null||!("domain"in e))return RF;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Fg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:RF},H5=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},vie=e=>e.referenceElements.dots,Q1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),BQe=ut([vie,ka,$2],Q1),bie=e=>e.referenceElements.areas,TQe=ut([bie,ka,$2],Q1),yie=e=>e.referenceElements.lines,jQe=ut([yie,ka,$2],Q1),wie=(e,t)=>{var r=Fg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},IQe=ut(BQe,ka,wie),Eie=(e,t)=>{var r=Fg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},FQe=ut([TQe,ka],Eie),Cie=(e,t)=>{var r=Fg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},OQe=ut(jQe,ka,Cie),DQe=ut(IQe,OQe,FQe,(e,t,r)=>H5(e,r,t)),_ie=ut([Ys],OL),DL=(e,t,r,n,a,s,i)=>{var o=q9e(t,e.allowDataOverflow);if(o!=null)return o;var c=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=c?H5(r,a,OG(n)):H5(a,OG(n));return W9e(t,u,e.allowDataOverflow)},PQe=ut([Ys,_ie,_Qe,SQe,DQe,Tn,ka],DL),RQe=[0,1],PL=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:c}=e,u=Om(t,s);return u&&o==null?ase(0,r.length):c==="category"?kQe(n,e,u):a==="expand"?RQe:i}},RL=ut([Ys,Tn,IL,ik,V2,ka,PQe],PL),Sie=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(P2(s));return o in yy?o:"point"}}},Mm=ut([Ys,Tn,uie,yL,ka],Sie);function LQe(e){if(e!=null){if(e in yy)return yy[e]();var t="scale".concat(P2(e));if(t in yy)return yy[t]()}}function lk(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=LQe(t);if(a!=null){var s=a.domain(r).range(n);return A8e(s),s}}}var LL=(e,t,r)=>{var n=OL(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&r1(e))return sQe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&r1(e))return iQe(e,t.tickCount,t.allowDecimals)}},ML=ut([RL,U1,Mm],LL),UL=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&r1(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},MQe=ut([Ys,RL,ML,ka],UL),UQe=ut(ik,Ys,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Fg(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),Nie=ut(UQe,Tn,nie,Ni,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Uc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=bl(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),QQe=(e,t)=>{var r=Oh(e,t);return r==null||typeof r.padding!="string"?0:Nie(e,"xAxis",t,r.padding)},HQe=(e,t)=>{var r=Lm(e,t);return r==null||typeof r.padding!="string"?0:Nie(e,"yAxis",t,r.padding)},VQe=ut(Oh,QQe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),zQe=ut(Lm,HQe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),$Qe=ut([Ni,VQe,G4,$4,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),GQe=ut([Ni,Tn,zQe,G4,$4,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),K2=(e,t,r,n)=>{var a;switch(t){case"xAxis":return $Qe(e,r,n);case"yAxis":return GQe(e,r,n);case"zAxis":return(a=SL(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return oie(e);case"radiusAxis":return lie(e,r);default:return}},kie=ut([Ys,K2],nk),H1=ut([Ys,Mm,MQe,kie],lk);ut([G2,ok,ka],xie);function Bie(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ck=(e,t)=>t,uk=(e,t,r)=>r,KQe=ut(HR,ck,uk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Bie)),qQe=ut(VR,ck,uk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Bie)),Tie=(e,t)=>({width:e.width,height:t.height}),WQe=(e,t)=>{var r=typeof t.width=="number"?t.width:z4;return{width:r,height:e.height}},jie=ut(Ni,Oh,Tie),XQe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},YQe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},JQe=ut(Ih,Ni,KQe,ck,uk,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=Tie(t,o);i==null&&(i=XQe(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[o.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),ZQe=ut(jh,Ni,qQe,ck,uk,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=WQe(t,o);i==null&&(i=YQe(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[o.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),eHe=(e,t)=>{var r=Ni(e),n=Oh(e,t);if(n!=null){var a=JQe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},tHe=(e,t)=>{var r=Ni(e),n=Lm(e,t);if(n!=null){var a=ZQe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Iie=ut(Ni,Lm,(e,t)=>{var r=typeof t.width=="number"?t.width:z4;return{width:r,height:e.height}}),DG=(e,t,r)=>{switch(t){case"xAxis":return jie(e,r).width;case"yAxis":return Iie(e,r).height;default:return}},Fie=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=Om(e,n),c=t.map(u=>u.value);if(i&&o&&s==="category"&&a&&Tne(c))return c}},q2=ut([Tn,ik,Ys,ka],Fie),QL=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=Om(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(o=>o.value)}},HL=ut([Tn,ik,U1,ka],QL),PG=ut([Tn,bQe,Mm,H1,q2,HL,K2,ML,ka],(e,t,r,n,a,s,i,o,c)=>{if(t==null)return null;var u=Om(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),Oie=(e,t,r,n,a,s,i,o,c)=>{if(!(t==null||n==null)){var u=Om(e,c),{type:d,ticks:f,tickCount:h}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=c==="angleAxis"&&s!=null&&s.length>=2?Wi(s[0]-s[1])*2*g:g;var x=f||a;if(x){var b=x.map((y,w)=>{var S=i?i.indexOf(y):y;return{index:w,coordinate:n(S)+g,value:y,offset:g}});return b.filter(y=>!Rc(y.coordinate))}return u&&o?o.map((y,w)=>({coordinate:n(y)+g,value:y,index:w,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,w)=>({coordinate:n(y)+g,value:i?i[y]:y,index:w,offset:g}))}},Die=ut([Tn,U1,Mm,H1,ML,K2,q2,HL,ka],Oie),Pie=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Om(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Wi(n[0]-n[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},n1=ut([Tn,U1,H1,K2,q2,HL,ka],Pie),a1=ut(Ys,H1,(e,t)=>{if(!(e==null||t==null))return Q5(Q5({},e),{},{scale:t})}),rHe=ut([Ys,Mm,RL,kie],lk);ut((e,t,r)=>SL(e,r),rHe,(e,t)=>{if(!(e==null||t==null))return Q5(Q5({},e),{},{scale:t})});var nHe=ut([Tn,HR,VR],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Rie=e=>e.options.defaultTooltipEventType,Lie=e=>e.options.validateTooltipEventTypes;function Mie(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function VL(e,t){var r=Rie(e),n=Lie(e);return Mie(t,r,n)}function aHe(e){return sr(t=>VL(t,e))}var Uie=(e,t)=>{var r,n=Number(t);if(!(Rc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},sHe=e=>e.tooltip.settings,D0={active:!1,index:null,dataKey:void 0,coordinate:void 0},iHe={itemInteraction:{click:D0,hover:D0},axisInteraction:{click:D0,hover:D0},keyboardInteraction:D0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Qie=Hc({name:"tooltip",initialState:iHe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=ah(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:oHe,removeTooltipEntrySettings:lHe,setTooltipSettingsState:cHe,setActiveMouseOverItemIndex:Hie,mouseLeaveItem:uHe,mouseLeaveChart:Vie,setActiveClickItemIndex:dHe,setMouseOverAxisIndex:zie,setMouseClickAxisIndex:AHe,setSyncInteraction:MF,setKeyboardInteraction:UF}=Qie.actions,fHe=Qie.reducer;function RG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RG(Object(r),!0).forEach(function(n){hHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hHe(e,t,r){return(t=mHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mHe(e){var t=pHe(e,"string");return typeof t=="symbol"?t:t+""}function pHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gHe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function xHe(e){return e.index!=null}var $ie=(e,t,r,n)=>{if(t==null)return D0;var a=gHe(e,t,r);if(a==null)return D0;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(xHe(a)){if(s)return $C($C({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return $C($C({},D0),{},{coordinate:a.coordinate})},zL=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Uc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},Gie=(e,t,r,n,a,s,i,o)=>{if(!(s==null||o==null)){var c=i[0],u=c==null?void 0:o(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},Kie=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},W2=e=>e.options.tooltipPayloadSearcher,V1=e=>e.tooltip;function LG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LG(Object(r),!0).forEach(function(n){vHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vHe(e,t,r){return(t=bHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bHe(e){var t=yHe(e,"string");return typeof t=="symbol"?t:t+""}function yHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wHe(e,t){return e??t}var qie=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,p)=>{var g,{dataDefinedOnItem:x,settings:b}=p,y=wHe(x,o),w=Array.isArray(y)?Dae(y,u,d):y,S=(g=b==null?void 0:b.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,j=b==null?void 0:b.nameKey,N;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&i==="axis"?N=aPe(w,n.dataKey,a):N=s(w,t,c,j),Array.isArray(N))N.forEach(E=>{var _=MG(MG({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(g$({tooltipEntrySettings:_,dataKey:E.dataKey,payload:E.payload,value:Pa(E.payload,E.dataKey),name:E.name}))});else{var F;h.push(g$({tooltipEntrySettings:b,dataKey:S,payload:N,value:Pa(N,S),name:(F=Pa(N,j))!==null&&F!==void 0?F:b==null?void 0:b.name}))}return h},f)}},$L=ut([Ti,Tn,uie,yL,Bi],Sie),EHe=ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),CHe=ut([Bi,M1],NL),X2=ut([EHe,Ti,CHe],BL),_He=ut([X2],e=>e.filter(sk)),SHe=ut([X2],TL),z1=ut([SHe,Rm],jL),NHe=ut([_He,Rm,Ti],cie),GL=ut([z1,Ti,X2],FL),kHe=ut([Ti],OL),BHe=ut([X2],e=>e.filter(sk)),THe=ut([NHe,BHe,V2],mie),jHe=ut([THe,Rm,Bi],pie),IHe=ut([X2],Aie),FHe=ut([z1,Ti,IHe,ok,Bi],gie),OHe=ut([vie,Bi,M1],Q1),DHe=ut([OHe,Bi],wie),PHe=ut([bie,Bi,M1],Q1),RHe=ut([PHe,Bi],Eie),LHe=ut([yie,Bi,M1],Q1),MHe=ut([LHe,Bi],Cie),UHe=ut([DHe,MHe,RHe],H5),QHe=ut([Ti,kHe,jHe,FHe,UHe,Tn,Bi],DL),Wie=ut([Ti,Tn,z1,GL,V2,Bi,QHe],PL),HHe=ut([Wie,Ti,$L],LL),VHe=ut([Ti,Wie,HHe,Bi],UL),Xie=e=>{var t=Bi(e),r=M1(e),n=!1;return K2(e,t,r,n)},Yie=ut([Ti,Xie],nk),Jie=ut([Ti,$L,VHe,Yie],lk),zHe=ut([Tn,GL,Ti,Bi],Fie),$He=ut([Tn,GL,Ti,Bi],QL),GHe=(e,t,r,n,a,s,i,o)=>{if(t){var{type:c}=t,u=Om(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Wi(a[0]-a[1])*2*f:f,u&&i?i.map((h,p)=>({coordinate:n(h)+f,value:h,index:p,offset:f})):n.domain().map((h,p)=>({coordinate:n(h)+f,value:s?s[h]:h,index:p,offset:f}))}}},Dh=ut([Tn,Ti,$L,Jie,Xie,zHe,$He,Bi],GHe),KL=ut([Rie,Lie,sHe],(e,t,r)=>Mie(r.shared,e,t)),Zie=e=>e.tooltip.settings.trigger,qL=e=>e.tooltip.settings.defaultIndex,dk=ut([V1,KL,Zie,qL],$ie),_m=ut([dk,z1],zL),eoe=ut([Dh,_m],Uie),toe=ut([dk],e=>{if(e)return e.dataKey}),roe=ut([V1,KL,Zie,qL],Kie),KHe=ut([jh,Ih,Tn,Ni,Dh,qL,roe,W2],Gie),qHe=ut([dk,KHe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),WHe=ut([dk],e=>e.active),XHe=ut([roe,_m,Rm,Ti,eoe,W2,KL],qie),YHe=ut([XHe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function UG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UG(Object(r),!0).forEach(function(n){JHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JHe(e,t,r){return(t=ZHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZHe(e){var t=eVe(e,"string");return typeof t=="symbol"?t:t+""}function eVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tVe=()=>sr(Ti),rVe=()=>{var e=tVe(),t=sr(Dh),r=sr(Jie);return Gw(QG(QG({},e),{},{scale:r}),t)},nVe=()=>sr(yL),WL=(e,t)=>t,noe=(e,t,r)=>r,XL=(e,t,r,n)=>n,aVe=ut(Dh,e=>R4(e,t=>t.coordinate)),YL=ut([V1,WL,noe,XL],$ie),aoe=ut([YL,z1],zL),sVe=(e,t,r)=>{if(t!=null){var n=V1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},soe=ut([V1,WL,noe,XL],Kie),V5=ut([jh,Ih,Tn,Ni,Dh,XL,soe,W2],Gie),iVe=ut([YL,V5],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),ioe=ut(Dh,aoe,Uie),oVe=ut([soe,aoe,Rm,Ti,ioe,W2,WL],qie),lVe=ut([YL],e=>({isActive:e.active,activeIndex:e.index})),cVe=(e,t,r,n,a,s,i,o)=>{if(!(!e||!t||!n||!a||!s)){var c=E8e(e.chartX,e.chartY,t,r,o);if(c){var u=_8e(c,t),d=u8e(u,i,s,n,a),f=C8e(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function QF(){return QF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QF.apply(null,arguments)}function HG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function GC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HG(Object(r),!0).forEach(function(n){uVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uVe(e,t,r){return(t=dVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dVe(e){var t=AVe(e,"string");return typeof t=="symbol"?t:t+""}function AVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fVe(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:o,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&c!=="axis")return null;var p,g;if(u==="ScatterChart")p=d,g=wMe;else if(u==="BarChart")p=EMe(i,d,a,s),g=ese;else if(i==="radial"){var{cx:x,cy:b,radius:y,startAngle:w,endAngle:S}=tse(d);p={cx:x,cy:b,startAngle:w,endAngle:S,innerRadius:y,outerRadius:y},g=nse}else p={points:oUe(i,d,a)},g=Kae;var j=typeof o=="object"&&"className"in o?o.className:void 0,N=GC(GC(GC(GC({stroke:"#ccc",pointerEvents:"none"},a),p),Wn(o,!1)),{},{payload:f,payloadIndex:h,className:xn("recharts-tooltip-cursor",j)});return k.isValidElement(o)?k.cloneElement(o,N):k.createElement(g,N)}function hVe(e){var t=rVe(),r=Hae(),n=KR(),a=nVe();return k.createElement(fVe,QF({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var ooe=k.createContext(null),mVe=()=>k.useContext(ooe),Sj={exports:{}},VG;function pVe(){return VG||(VG=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,g){var x=r?r+u:u;if(!this._events[x])return!1;var b=this._events[x],y=arguments.length,w,S;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,h),!0;case 5:return b.fn.call(b.context,d,f,h,p),!0;case 6:return b.fn.call(b.context,d,f,h,p,g),!0}for(S=1,w=new Array(y-1);S<y;S++)w[S-1]=arguments[S];b.fn.apply(b.context,w)}else{var j=b.length,N;for(S=0;S<j;S++)switch(b[S].once&&this.removeListener(u,b[S].fn,void 0,!0),y){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,d);break;case 3:b[S].fn.call(b[S].context,d,f);break;case 4:b[S].fn.call(b[S].context,d,f,h);break;default:if(!w)for(N=1,w=new Array(y-1);N<y;N++)w[N-1]=arguments[N];b[S].fn.apply(b[S].context,w)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&i(this,p);else{for(var x=0,b=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&b.push(g[x]);b.length?this._events[p]=b.length===1?b[0]:b:i(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(Sj)),Sj.exports}var gVe=pVe();const xVe=yl(gVe);var Jw=new xVe,HF="recharts.syncEvent.tooltip",zG="recharts.syncEvent.brush";function JL(e,t){if(t){var r=Number.parseInt(t,10);if(!Rc(r))return e==null?void 0:e[r]}}var vVe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},loe=Hc({name:"options",initialState:vVe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),bVe=loe.reducer,{createEventEmitter:yVe}=loe.actions;function wVe(e){return e.tooltip.syncInteraction}var EVe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},coe=Hc({name:"chartData",initialState:EVe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:$G,setDataStartEndIndexes:CVe,setComputedData:Cft}=coe.actions,_Ve=coe.reducer,uoe=()=>{};function SVe(){var e=sr(wL),t=sr(EL),r=za(),n=sr(aie),a=sr(Dh),s=KR(),i=zR(),o=sr(c=>c.rootProps.className);k.useEffect(()=>{if(e==null)return uoe;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var p={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,p);h=a[g]}else n==="value"&&(h=a.find(F=>String(F.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||i==null){r(MF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=x,w=Math.min(b,i.x+i.width),S=Math.min(y,i.y+i.height),j={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?S:h.coordinate},N=MF({active:d.payload.active,coordinate:j,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(N)}}};return Jw.on(HF,c),()=>{Jw.off(HF,c)}},[o,r,t,e,n,a,s,i])}function NVe(){var e=sr(wL),t=sr(EL),r=za();k.useEffect(()=>{if(e==null)return uoe;var n=(a,s,i)=>{t!==i&&e===a&&r(CVe(s))};return Jw.on(zG,n),()=>{Jw.off(zG,n)}},[r,t,e])}function kVe(){var e=za();k.useEffect(()=>{e(yVe())},[e]),SVe(),NVe()}function BVe(e,t,r,n,a,s){var i=sr(h=>sVe(h,e,t)),o=sr(EL),c=sr(wL),u=sr(aie),d=sr(wVe),f=d==null?void 0:d.active;k.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=MF({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});Jw.emit(HF,c,h,o)}},[f,r,i,a,n,o,c,u,s])}function GG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GG(Object(r),!0).forEach(function(n){TVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TVe(e,t,r){return(t=jVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jVe(e){var t=IVe(e,"string");return typeof t=="symbol"?t:t+""}function IVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FVe(e){return e.dataKey}function OVe(e,t){return k.isValidElement(e)?k.cloneElement(e,t):typeof e=="function"?k.createElement(e,t):k.createElement(eMe,t)}var qG=[],DVe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Tg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function wy(e){var t=Uu(e,DVe),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:o,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:b,trigger:y,defaultIndex:w,portal:S,axisId:j}=t,N=za(),F=typeof w=="number"?String(w):w;k.useEffect(()=>{N(cHe({shared:b,trigger:y,axisId:j,active:r,defaultIndex:F}))},[N,b,y,j,r,F]);var E=zR(),_=Gae(),B=aHe(b),{activeIndex:P,isActive:D}=sr(re=>lVe(re,B,y,F)),I=sr(re=>oVe(re,B,y,F)),U=sr(re=>ioe(re,B,y,F)),R=sr(re=>iVe(re,B,y,F)),Y=I,H=mVe(),X=r??D,[V,z]=lae([Y,X]),q=B==="axis"?U:void 0;BVe(B,y,R,q,P,X);var ne=S??H;if(ne==null)return null;var M=Y??qG;X||(M=qG),o&&M.length&&(M=rae(Y.filter(re=>re.value!=null&&(re.hide!==!0||t.includeHidden)),d,FVe));var W=M.length>0,Z=k.createElement(oMe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:X,coordinate:R,hasPayload:W,offset:u,position:f,reverseDirection:h,useTranslate3d:p,viewBox:E,wrapperStyle:g,lastBoundingBox:V,innerRef:z,hasPortalFromProps:!!S},OVe(i,KG(KG({},t),{},{payload:M,label:q,active:X,coordinate:R,accessibilityLayer:_})));return k.createElement(k.Fragment,null,ER.createPortal(Z,ne),X&&k.createElement(hVe,{cursor:x,tooltipEventType:B,coordinate:R,payload:Y,index:P}))}var Nj={},kj={},Bj={},WG;function PVe(){return WG||(WG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,o=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),x()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),i=void 0,o=null},b=()=>{d()},y=function(...w){if(a!=null&&a.aborted)return;i=this,o=w;const S=h==null;p(),c&&S&&d()};return y.schedule=p,y.cancel=x,y.flush=b,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(Bj)),Bj}var XG;function RVe(){return XG||(XG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PVe();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:o=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),p=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=g,p}e.debounce=r}(kj)),kj}var YG;function LVe(){return YG||(YG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RVe();function r(n,a=0,s={}){const{leading:i=!0,trailing:o=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:o})}e.throttle=r}(Nj)),Nj}var Tj,JG;function MVe(){return JG||(JG=1,Tj=LVe().throttle),Tj}var UVe=MVe();const QVe=yl(UVe);var tw=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function ZG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZG(Object(r),!0).forEach(function(n){HVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HVe(e,t,r){return(t=VVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VVe(e){var t=zVe(e,"string");return typeof t=="symbol"?t:t+""}function zVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ey=k.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:p,style:g={}}=e,x=k.useRef(null),b=k.useRef();b.current=p,k.useImperativeHandle(t,()=>x.current);var[y,w]=k.useState({containerWidth:n.width,containerHeight:n.height}),S=k.useCallback((N,F)=>{w(E=>{var _=Math.round(N),B=Math.round(F);return E.containerWidth===_&&E.containerHeight===B?E:{containerWidth:_,containerHeight:B}})},[]);k.useEffect(()=>{var N=B=>{var P,{width:D,height:I}=B[0].contentRect;S(D,I),(P=b.current)===null||P===void 0||P.call(b,D,I)};d>0&&(N=QVe(N,d,{trailing:!0,leading:!1}));var F=new ResizeObserver(N),{width:E,height:_}=x.current.getBoundingClientRect();return S(E,_),F.observe(x.current),()=>{F.disconnect()}},[S,d]);var j=k.useMemo(()=>{var{containerWidth:N,containerHeight:F}=y;if(N<0||F<0)return null;tw(Np(a)||Np(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),tw(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=Np(a)?N:a,_=Np(s)?F:s;return r&&r>0&&(E?_=E/r:_&&(E=_*r),c&&_>c&&(_=c)),tw(E>0||_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,_,a,s,i,o,r),k.Children.map(u,B=>k.cloneElement(B,{width:E,height:_,style:jj({width:E,height:_},B.props.style)}))},[r,u,s,c,o,i,y,a]);return k.createElement("div",{id:f?"".concat(f):void 0,className:xn("recharts-responsive-container",h),style:jj(jj({},g),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:c}),ref:x},k.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),Y2=e=>null;Y2.displayName="Cell";function $Ve(e,t,r){return(t=GVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GVe(e){var t=KVe(e,"string");return typeof t=="symbol"?t:t+""}function KVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class qVe{constructor(t){$Ve(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function eK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WVe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eK(Object(r),!0).forEach(function(n){XVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XVe(e,t,r){return(t=YVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YVe(e){var t=JVe(e,"string");return typeof t=="symbol"?t:t+""}function JVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZVe={cacheSize:2e3,enableCache:!0},doe=WVe({},ZVe),tK=new qVe(doe.cacheSize),eze={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},rK="recharts_measurement_span";function tze(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}var nK=(e,t)=>{try{var r=document.getElementById(rK);r||(r=document.createElement("span"),r.setAttribute("id",rK),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,eze,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},rw=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Tg.isSsr)return{width:0,height:0};if(!doe.enableCache)return nK(t,r);var n=tze(t,r),a=tK.get(n);if(a)return a;var s=nK(t,r);return tK.set(n,s),s},aK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rze=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,nze=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Aoe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},aze=Object.keys(Aoe),tv="NaN";function sze(e,t){return e*Aoe[t]}class Ul{static parse(t){var r,[,n,a]=(r=nze.exec(t))!==null&&r!==void 0?r:[];return new Ul(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Rc(t)&&(this.unit=""),r!==""&&!rze.test(r)&&(this.num=NaN,this.unit=""),aze.includes(r)&&(this.num=sze(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ul(NaN,""):new Ul(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ul(NaN,""):new Ul(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ul(NaN,""):new Ul(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ul(NaN,""):new Ul(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Rc(this.num)}}function foe(e){if(e.includes(tv))return tv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=aK.exec(t))!==null&&r!==void 0?r:[],i=Ul.parse(n??""),o=Ul.parse(s??""),c=a==="*"?i.multiply(o):i.divide(o);if(c.isNaN())return tv;t=t.replace(aK,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=sK.exec(t))!==null&&u!==void 0?u:[],p=Ul.parse(d??""),g=Ul.parse(h??""),x=f==="+"?p.add(g):p.subtract(g);if(x.isNaN())return tv;t=t.replace(sK,x.toString())}return t}var iK=/\(([^()]*)\)/;function ize(e){for(var t=e,r;(r=iK.exec(t))!=null;){var[,n]=r;t=t.replace(iK,foe(n))}return t}function oze(e){var t=e.replace(/\s+/g,"");return t=ize(t),t=foe(t),t}function lze(e){try{return oze(e)}catch{return tv}}function Ij(e){var t=lze(e.slice(5,-1));return t===tv?"":t}var cze=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],uze=["dx","dy","angle","className","breakAll"];function VF(){return VF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VF.apply(null,arguments)}function oK(e,t){if(e==null)return{};var r,n,a=dze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hoe=/[ \f\n\r\t\v\u2028\u2029]+/,moe=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];ks(t)||(r?a=t.toString().split(""):a=t.toString().split(hoe));var s=a.map(o=>({word:o,width:rw(o,n).width})),i=r?0:rw(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},Aze=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:c}=e,u=ur(s),d=i,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce((I,U)=>{var{word:R,width:Y}=U,H=I[I.length-1];if(H&&(n==null||a||H.width+Y+r<Number(n)))H.words.push(R),H.width+=Y+r;else{var X={words:[R],width:Y};I.push(X)}return I},[])},h=f(t),p=P=>P.reduce((D,I)=>D.width>I.width?D:I);if(!u||a)return h;var g=h.length>s||p(h).width>Number(n);if(!g)return h;for(var x="…",b=P=>{var D=d.slice(0,P),I=moe({breakAll:c,style:o,children:D+x}).wordsWithComputedWidth,U=f(I),R=U.length>s||p(U).width>Number(n);return[R,U]},y=0,w=d.length-1,S=0,j;y<=w&&S<=d.length-1;){var N=Math.floor((y+w)/2),F=N-1,[E,_]=b(F),[B]=b(N);if(!E&&!B&&(y=N+1),E&&B&&(w=N-1),!E&&B){j=_;break}S++}return j||h},lK=e=>{var t=ks(e)?[]:e.toString().split(hoe);return[{words:t}]},fze=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!Tg.isSsr){var o,c,u=moe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return lK(n);return Aze({breakAll:s,children:n,maxLines:i,style:a},o,c,t,r)}return lK(n)},cK="#808080",$1=k.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:c="end",fill:u=cK}=e,d=oK(e,cze),f=k.useMemo(()=>fze({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:p,angle:g,className:x,breakAll:b}=d,y=oK(d,uze);if(!WA(r)||!WA(n))return null;var w=r+(ur(h)?h:0),S=n+(ur(p)?p:0),j;switch(c){case"start":j=Ij("calc(".concat(s,")"));break;case"middle":j=Ij("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:j=Ij("calc(".concat(f.length-1," * -").concat(a,")"));break}var N=[];if(i){var F=f[0].width,{width:E}=d;N.push("scale(".concat(ur(E)?E/F:1,")"))}return g&&N.push("rotate(".concat(g,", ").concat(w,", ").concat(S,")")),N.length&&(y.transform=N.join(" ")),k.createElement("text",VF({},Wn(y,!0),{ref:t,x:w,y:S,className:xn("recharts-text",x),textAnchor:o,fill:u.includes("url")?cK:u}),f.map((_,B)=>{var P=_.words.join(b?"":" ");return k.createElement("tspan",{x:w,dy:B===0?j:a,key:"".concat(P,"-").concat(B)},P)}))});$1.displayName="Text";var hze=["offset"],mze=["labelRef"];function uK(e,t){if(e==null)return{};var r,n,a=pze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ys(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dK(Object(r),!0).forEach(function(n){gze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gze(e,t,r){return(t=xze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xze(e){var t=vze(e,"string");return typeof t=="symbol"?t:t+""}function vze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hf(){return Hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hf.apply(null,arguments)}var bze=e=>{var{value:t,formatter:r}=e,n=ks(e.children)?t:e.children;return typeof r=="function"?r(n):n},ZL=e=>e!=null&&typeof e=="function",yze=(e,t)=>{var r=Wi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},wze=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=n,g=(u+d)/2,x=yze(f,h),b=x>=0?1:-1,y,w;a==="insideStart"?(y=f+b*s,w=p):a==="insideEnd"?(y=h-b*s,w=!p):a==="end"&&(y=h+b*s,w=p),w=x<=0?w:!w;var S=Zn(o,c,g,y),j=Zn(o,c,g,y+(w?1:-1)*359),N="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(j.x,",").concat(j.y),F=ks(e.id)?Vw("recharts-radial-line-"):e.id;return k.createElement("text",Hf({},r,{dominantBaseline:"central",className:xn("recharts-radial-bar-label",i)}),k.createElement("defs",null,k.createElement("path",{id:F,d:N})),k.createElement("textPath",{xlinkHref:"#".concat(F)},t))},Eze=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=Zn(n,a,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:p,y:g}=Zn(n,a,h,u);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},Cze=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:o,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",p=o>=0?1:-1,g=p*n,x=p>0?"end":"start",b=p>0?"start":"end";if(a==="top"){var y={x:s+o/2,y:i-u*n,textAnchor:"middle",verticalAnchor:f};return ys(ys({},y),r?{height:Math.max(i-r.y,0),width:o}:{})}if(a==="bottom"){var w={x:s+o/2,y:i+c+d,textAnchor:"middle",verticalAnchor:h};return ys(ys({},w),r?{height:Math.max(r.y+r.height-(i+c),0),width:o}:{})}if(a==="left"){var S={x:s-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"};return ys(ys({},S),r?{width:Math.max(S.x-r.x,0),height:c}:{})}if(a==="right"){var j={x:s+o+g,y:i+c/2,textAnchor:b,verticalAnchor:"middle"};return ys(ys({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:c}:{})}var N=r?{width:o,height:c}:{};return a==="insideLeft"?ys({x:s+g,y:i+c/2,textAnchor:b,verticalAnchor:"middle"},N):a==="insideRight"?ys({x:s+o-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"},N):a==="insideTop"?ys({x:s+o/2,y:i+d,textAnchor:"middle",verticalAnchor:h},N):a==="insideBottom"?ys({x:s+o/2,y:i+c-d,textAnchor:"middle",verticalAnchor:f},N):a==="insideTopLeft"?ys({x:s+g,y:i+d,textAnchor:b,verticalAnchor:h},N):a==="insideTopRight"?ys({x:s+o-g,y:i+d,textAnchor:x,verticalAnchor:h},N):a==="insideBottomLeft"?ys({x:s+g,y:i+c-d,textAnchor:b,verticalAnchor:f},N):a==="insideBottomRight"?ys({x:s+o-g,y:i+c-d,textAnchor:x,verticalAnchor:f},N):a&&typeof a=="object"&&(ur(a.x)||Np(a.x))&&(ur(a.y)||Np(a.y))?ys({x:s+bl(a.x,o),y:i+bl(a.y,c),textAnchor:"end",verticalAnchor:"end"},N):ys({x:s+o/2,y:i+c/2,textAnchor:"middle",verticalAnchor:"middle"},N)},_ze=e=>"cx"in e&&ur(e.cx);function $l(e){var{offset:t=5}=e,r=uK(e,hze),n=ys({offset:t},r),{viewBox:a,position:s,value:i,children:o,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=sr(L1),p=zR(),g=s==="center"?p:h??p,x=a||g;if(!x||ks(i)&&ks(o)&&!k.isValidElement(c)&&typeof c!="function")return null;var b=ys(ys({},n),{},{viewBox:x});if(k.isValidElement(c)){var{labelRef:y}=b,w=uK(b,mze);return k.cloneElement(c,w)}var S;if(typeof c=="function"){if(S=k.createElement(c,b),k.isValidElement(S))return S}else S=bze(n);var j=_ze(x),N=Wn(n,!0);if(j&&(s==="insideStart"||s==="insideEnd"||s==="end"))return wze(n,S,N,x);var F=j?Eze(x,n.offset,n.position):Cze(n,x);return k.createElement($1,Hf({ref:f,className:xn("recharts-label",u)},N,F,{breakAll:d}),S)}$l.displayName="Label";var poe=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:o,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:p,width:g,height:x,clockWise:b,labelViewBox:y}=e;if(y)return y;if(ur(g)&&ur(x)){if(ur(d)&&ur(f))return{x:d,y:f,width:g,height:x};if(ur(h)&&ur(p))return{x:h,y:p,width:g,height:x}}if(ur(d)&&ur(f))return{x:d,y:f,width:0,height:0};if(ur(t)&&ur(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||o||i||0,clockWise:b};if(e.viewBox)return e.viewBox},Sze=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?k.createElement($l,Hf({key:"label-implicit"},n)):WA(e)?k.createElement($l,Hf({key:"label-implicit",value:e},n)):k.isValidElement(e)?e.type===$l?k.cloneElement(e,ys({key:"label-implicit"},n)):k.createElement($l,Hf({key:"label-implicit",content:e},n)):ZL(e)?k.createElement($l,Hf({key:"label-implicit",content:e},n)):e&&typeof e=="object"?k.createElement($l,Hf({},e,{key:"label-implicit"},n)):null},Nze=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=poe(t),o=R2(a,$l).map((u,d)=>k.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return o;var c=Sze(t.label,r||i,s);return[c,...o]};$l.parseViewBox=poe;$l.renderCallByParent=Nze;var Fj={},Oj={},AK;function kze(){return AK||(AK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(Oj)),Oj}var Dj={},fK;function Bze(){return fK||(fK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(Dj)),Dj}var hK;function Tze(){return hK||(hK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kze(),r=Bze(),n=TR();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(Fj)),Fj}var Pj,mK;function jze(){return mK||(mK=1,Pj=Tze().last),Pj}var Ize=jze();const goe=yl(Ize);var Fze=["valueAccessor"],Oze=["data","dataKey","clockWise","id","textBreakAll"];function z5(){return z5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z5.apply(null,arguments)}function pK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pK(Object(r),!0).forEach(function(n){Dze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dze(e,t,r){return(t=Pze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pze(e){var t=Rze(e,"string");return typeof t=="symbol"?t:t+""}function Rze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xK(e,t){if(e==null)return{};var r,n,a=Lze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mze=e=>Array.isArray(e.value)?goe(e.value):e.value;function tm(e){var{valueAccessor:t=Mze}=e,r=xK(e,Fze),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:o}=r,c=xK(r,Oze);return!n||!n.length?null:k.createElement(cs,{className:"recharts-label-list"},n.map((u,d)=>{var f=ks(a)?t(u,d):Pa(u&&u.payload,a),h=ks(i)?{}:{id:"".concat(i,"-").concat(d)};return k.createElement($l,z5({},Wn(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:$l.parseViewBox(ks(s)?u:gK(gK({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}tm.displayName="LabelList";function Uze(e,t){return e?e===!0?k.createElement(tm,{key:"labelList-implicit",data:t}):k.isValidElement(e)||ZL(e)?k.createElement(tm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?k.createElement(tm,z5({data:t},e,{key:"labelList-implicit"})):null:null}function Qze(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=R2(n,tm).map((i,o)=>k.cloneElement(i,{data:t,key:"labelList-".concat(o)}));if(!r)return a;var s=Uze(e.label,t);return[s,...a]}tm.renderCallByParent=Qze;var Hze=["points","className","baseLinePoints","connectNulls"];function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rv.apply(null,arguments)}function Vze(e,t){if(e==null)return{};var r,n,a=zze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vK=e=>e&&e.x===+e.x&&e.y===+e.y,$ze=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{vK(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),vK(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},nw=(e,t)=>{var r=$ze(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,o)=>"".concat(s).concat(o===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},Gze=(e,t,r)=>{var n=nw(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(nw(t.reverse(),r).slice(1))},xoe=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=Vze(e,Hze);if(!t||!t.length)return null;var i=xn("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&s.stroke!=="none",c=Gze(t,n,a);return k.createElement("g",{className:i},k.createElement("path",rv({},Wn(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),o?k.createElement("path",rv({},Wn(s,!0),{fill:"none",d:nw(t,a)})):null,o?k.createElement("path",rv({},Wn(s,!0),{fill:"none",d:nw(n,a)})):null)}var u=nw(t,a);return k.createElement("path",rv({},Wn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function zF(){return zF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zF.apply(null,arguments)}var e8=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=xn("recharts-dot",a);return t===+t&&r===+r&&n===+n?k.createElement("circle",zF({},al(e),yR(e),{className:s,cx:t,cy:r,r:n})):null},t8=e=>e.graphicalItems.polarItems,Kze=ut([ka,$2],NL),r8=ut([t8,Ys,Kze],BL),qze=ut([r8],TL),n8=ut([qze,tk],jL),voe=ut([n8,Ys,r8],FL),Wze=ut([n8,Ys,r8],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Pa(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),bK=()=>{},Xze=ut([Ys,_ie,bK,Wze,bK,Tn,ka],DL),boe=ut([Ys,Tn,n8,voe,V2,ka,Xze],PL),yoe=ut([boe,Ys,Mm],LL),Yze=ut([Ys,boe,yoe,ka],UL),a8=(e,t,r)=>{switch(t){case"angleAxis":return R1(e,r);case"radiusAxis":return z2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},s8=(e,t,r)=>{switch(t){case"angleAxis":return hQe(e,r);case"radiusAxis":return mQe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},G1=ut([a8,Mm,Yze,s8],lk),woe=ut([Tn,voe,U1,ka],QL),K1=ut([Tn,a8,Mm,G1,yoe,s8,q2,woe,ka],Oie);ut([Tn,a8,G1,s8,q2,woe,ka],Pie);var Jze=(e,t)=>K1(e,"angleAxis",t,!1),Zze=ut([Jze],e=>{if(e)return e.map(t=>t.coordinate)}),e$e=(e,t)=>K1(e,"radiusAxis",t,!1),t$e=ut([e$e],e=>{if(e)return e.map(t=>t.coordinate)}),r$e=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function n$e(e,t){if(e==null)return{};var r,n,a=a$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function a$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function bh(){return bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bh.apply(null,arguments)}function yK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function s1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yK(Object(r),!0).forEach(function(n){s$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s$e(e,t,r){return(t=i$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i$e(e){var t=o$e(e,"string");return typeof t=="symbol"?t:t+""}function o$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l$e=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var o=Zn(t,r,e,s);i?a+="L ".concat(o.x,",").concat(o.y):a+="M ".concat(o.x,",").concat(o.y)}),a+="Z",a},c$e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var o=s1({stroke:"#ccc"},al(e));return k.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=Zn(t,r,n,c),d=Zn(t,r,a,c);return k.createElement("line",bh({},o,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},u$e=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=s1(s1({stroke:"#ccc"},al(e)),{},{fill:"none"});return k.createElement("circle",bh({},s,{className:xn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},d$e=e=>{var{radius:t,index:r}=e,n=s1(s1({stroke:"#ccc"},al(e)),{},{fill:"none"});return k.createElement("path",bh({},n,{className:xn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:l$e(t,e.cx,e.cy,e.polarAngles)}))},A$e=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:k.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?k.createElement(u$e,bh({key:s},e,{radius:n,index:a})):k.createElement(d$e,bh({key:s},e,{radius:n,index:a}))}))},Eoe=e=>{var t,r,n,a,s,i,o,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:p,cy:g,innerRadius:x,outerRadius:b}=e,y=n$e(e,r$e),w=sr(L1),S=s1({cx:(t=(r=w==null?void 0:w.cx)!==null&&r!==void 0?r:p)!==null&&t!==void 0?t:0,cy:(n=(a=w==null?void 0:w.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(i=w==null?void 0:w.innerRadius)!==null&&i!==void 0?i:x)!==null&&s!==void 0?s:0,outerRadius:(o=(c=w==null?void 0:w.outerRadius)!==null&&c!==void 0?c:b)!==null&&o!==void 0?o:0},y),{polarAngles:j,polarRadius:N,cx:F,cy:E,innerRadius:_,outerRadius:B}=S,P=sr(R=>Zze(R,f)),D=sr(R=>t$e(R,h)),I=Array.isArray(j)?j:P,U=Array.isArray(N)?N:D;return B<=0||I==null||U==null?null:k.createElement("g",{className:"recharts-polar-grid"},k.createElement(c$e,bh({cx:F,cy:E,innerRadius:_,outerRadius:B,gridType:u,radialLines:d},S,{polarAngles:I,polarRadius:U})),k.createElement(A$e,bh({cx:F,cy:E,innerRadius:_,outerRadius:B,gridType:u,radialLines:d},S,{polarAngles:I,polarRadius:U})))};Eoe.displayName="PolarGrid";var Rj={},Lj={},wK;function f$e(){return wK||(wK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c>s&&(s=c,a=o)}return a}e.maxBy=t}(Lj)),Lj}var EK;function h$e(){return EK||(EK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=f$e(),r=P4(),n=DR();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(Rj)),Rj}var Mj,CK;function m$e(){return CK||(CK=1,Mj=h$e().maxBy),Mj}var p$e=m$e();const g$e=yl(p$e);var Uj={},Qj={},_K;function x$e(){return _K||(_K=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c<s&&(s=c,a=o)}return a}e.minBy=t}(Qj)),Qj}var SK;function v$e(){return SK||(SK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x$e(),r=P4(),n=DR();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(Uj)),Uj}var Hj,NK;function b$e(){return NK||(NK=1,Hj=v$e().minBy),Hj}var y$e=b$e();const w$e=yl(y$e);var E$e={radiusAxis:{},angleAxis:{}},Coe=Hc({name:"polarAxis",initialState:E$e,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:C$e,removeRadiusAxis:_$e,addAngleAxis:S$e,removeAngleAxis:N$e}=Coe.actions,k$e=Coe.reducer,B$e=["cx","cy","angle","axisLine"],T$e=["angle","tickFormatter","stroke","tick"];function Zw(){return Zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zw.apply(null,arguments)}function kK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kK(Object(r),!0).forEach(function(n){Ak(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ak(e,t,r){return(t=j$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j$e(e){var t=I$e(e,"string");return typeof t=="symbol"?t:t+""}function I$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _oe(e,t){if(e==null)return{};var r,n,a=F$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function F$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Soe="radiusAxis";function O$e(e){var t=za();return k.useEffect(()=>(t(C$e(e)),()=>{t(_$e(e))})),null}var D$e=(e,t,r,n)=>{var{coordinate:a}=e;return Zn(r,n,a,t)},P$e=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},R$e=(e,t,r,n)=>{var a=g$e(n,i=>i.coordinate||0),s=w$e(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},L$e=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=_oe(e,B$e),o=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=Zn(r,n,o[0],a),u=Zn(r,n,o[1],a),d=LA(LA(LA({},al(i)),{},{fill:"none"},Wn(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return k.createElement("line",Zw({className:"recharts-polar-radius-axis-line"},d))},M$e=(e,t,r)=>{var n;return k.isValidElement(e)?n=k.cloneElement(e,t):typeof e=="function"?n=e(t):n=k.createElement($1,Zw({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},U$e=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=_oe(e,T$e),o=P$e(e.orientation),c=al(i),u=Wn(s,!1),d=t.map((f,h)=>{var p=D$e(f,e.angle,e.cx,e.cy),g=LA(LA(LA(LA({textAnchor:o,transform:"rotate(".concat(90-r,", ").concat(p.x,", ").concat(p.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:h},p),{},{payload:f});return k.createElement(cs,Zw({className:xn("recharts-polar-radius-axis-tick",Oae(s)),key:"tick-".concat(f.coordinate)},Bg(e,f,h)),M$e(s,g,n?n(f.value,h):f.value))});return k.createElement(cs,{className:"recharts-polar-radius-axis-ticks"},d)},Q$e=e=>{var{radiusAxisId:t}=e,r=sr(L1),n=sr(c=>G1(c,"radiusAxis",t)),a=sr(c=>K1(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=LA(LA(LA({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:o}=s;return k.createElement(cs,{className:xn("recharts-polar-radius-axis",Soe,s.className)},o&&L$e(s,a),i&&U$e(s,a),$l.renderCallByParent(s,R$e(s.angle,s.cx,s.cy,a)))};class fk extends k.PureComponent{render(){return k.createElement(k.Fragment,null,k.createElement(O$e,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),k.createElement(Q$e,this.props))}}Ak(fk,"displayName","PolarRadiusAxis");Ak(fk,"axisType",Soe);Ak(fk,"defaultProps",Vl);var H$e=["children"];function yh(){return yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yh.apply(null,arguments)}function BK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BK(Object(r),!0).forEach(function(n){hk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hk(e,t,r){return(t=V$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V$e(e){var t=z$e(e,"string");return typeof t=="symbol"?t:t+""}function z$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $$e(e,t){if(e==null)return{};var r,n,a=G$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function G$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var K$e=Math.PI/180,TK=1e-5,Noe="angleAxis";function q$e(e){var t=za(),r=k.useMemo(()=>{var{children:s}=e,i=$$e(e,H$e);return i},[e]),n=sr(s=>R1(s,r.id)),a=r===n;return k.useEffect(()=>(t(S$e(r)),()=>{t(N$e(r))}),[t,r]),a?e.children:null}var W$e=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,o=i||8,c=Zn(r,n,a,e.coordinate),u=Zn(r,n,a+(s==="inner"?-1:1)*o,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},X$e=(e,t)=>{var r=Math.cos(-e.coordinate*K$e);return r>TK?t==="outer"?"start":"end":r<-TK?t==="outer"?"end":"start":"middle"},Y$e=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var o=IA(IA({},al(e)),{},{fill:"none"},Wn(s,!1));if(a==="circle")return k.createElement(e8,yh({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:n}));var c=i.map(u=>Zn(t,r,n,u.coordinate));return k.createElement(xoe,yh({className:"recharts-polar-angle-axis-line"},o,{points:c}))},J$e=e=>{var{tick:t,tickProps:r,value:n}=e;return t?k.isValidElement(t)?k.cloneElement(t,r):typeof t=="function"?t(r):k.createElement($1,yh({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},Z$e=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=al(e),o=Wn(t,!1),c=IA(IA({},i),{},{fill:"none"},Wn(r,!1)),u=s.map((d,f)=>{var h=W$e(d,e),p=X$e(d,e.orientation),g=IA(IA(IA({},i),{},{textAnchor:p,stroke:"none",fill:a},o),{},{index:f,payload:d,x:h.x2,y:h.y2});return k.createElement(cs,yh({className:xn("recharts-polar-angle-axis-tick",Oae(t)),key:"tick-".concat(d.coordinate)},Bg(e,d,f)),r&&k.createElement("line",yh({className:"recharts-polar-angle-axis-tick-line"},c,h)),k.createElement(J$e,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return k.createElement(cs,{className:"recharts-polar-angle-axis-ticks"},u)},eGe=e=>{var{angleAxisId:t}=e,r=sr(L1),n=sr(o=>G1(o,"angleAxis",t)),a=tc(),s=sr(o=>K1(o,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=IA(IA(IA({},e),{},{scale:n},r),{},{radius:r.outerRadius});return k.createElement(cs,{className:xn("recharts-polar-angle-axis",Noe,i.className)},k.createElement(Y$e,yh({},i,{ticks:s})),k.createElement(Z$e,yh({},i,{ticks:s})))};class mk extends k.PureComponent{render(){return this.props.radius<=0?null:k.createElement(q$e,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},k.createElement(eGe,this.props))}}hk(mk,"displayName","PolarAngleAxis");hk(mk,"axisType",Noe);hk(mk,"defaultProps",jA);function jK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jK(Object(r),!0).forEach(function(n){tGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tGe(e,t,r){return(t=rGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rGe(e){var t=nGe(e,"string");return typeof t=="symbol"?t:t+""}function nGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aGe=(e,t)=>t,i8=ut([t8,aGe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),sGe=[],o8=(e,t,r)=>(r==null?void 0:r.length)===0?sGe:r,koe=ut([tk,i8,o8],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>IK(IK({},t.presentationProps),s.props))),a!=null)return a}}),iGe=ut([koe,i8,o8],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Pa(n,t.nameKey,t.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:F1(i,t.dataKey),color:o,payload:n,type:t.legendType}})}),oGe=ut([koe,i8,o8,Ni],(e,t,r,n)=>{if(!(t==null||e==null))return eKe({offset:n,pieSettings:t,displayedData:e,cells:r})}),Vj={},FK;function lGe(){return FK||(FK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(Vj)),Vj}var zj,OK;function cGe(){return OK||(OK=1,zj=lGe().isPlainObject),zj}var uGe=cGe();const dGe=yl(uGe);function $5(){return $5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$5.apply(null,arguments)}var DK=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},AGe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fGe=e=>{var t=Uu(e,AGe),r=k.useRef(),[n,a]=k.useState(-1);k.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var{x:s,y:i,upperWidth:o,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||u!==+u||o===0&&c===0||u===0)return null;var x=xn("recharts-trapezoid",d);return g?k.createElement(B5,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:o,lowerWidth:c,height:u,x:s,y:i},duration:h,animationEasing:f,isActive:g},b=>{var{upperWidth:y,lowerWidth:w,height:S,x:j,y:N}=b;return k.createElement(B5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:f},k.createElement("path",$5({},Wn(t,!0),{className:x,d:DK(j,N,y,w,S),ref:r})))}):k.createElement("g",null,k.createElement("path",$5({},Wn(t,!0),{className:x,d:DK(s,i,o,c,u)})))},hGe=["option","shapeType","propTransformer","activeClassName","isActive"];function mGe(e,t){if(e==null)return{};var r,n,a=pGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function PK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function G5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PK(Object(r),!0).forEach(function(n){gGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gGe(e,t,r){return(t=xGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xGe(e){var t=vGe(e,"string");return typeof t=="symbol"?t:t+""}function vGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bGe(e,t){return G5(G5({},t),e)}function yGe(e,t){return e==="symbols"}function RK(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return k.createElement(ese,r);case"trapezoid":return k.createElement(fGe,r);case"sector":return k.createElement(nse,r);case"symbols":if(yGe(t))return k.createElement(NR,r);break;default:return null}}function wGe(e){return k.isValidElement(e)?e.props:e}function Boe(e){var{option:t,shapeType:r,propTransformer:n=bGe,activeClassName:a="recharts-active-shape",isActive:s}=e,i=mGe(e,hGe),o;if(k.isValidElement(t))o=k.cloneElement(t,G5(G5({},i),wGe(t)));else if(typeof t=="function")o=t(i);else if(dGe(t)&&typeof t!="boolean"){var c=n(t,i);o=k.createElement(RK,{shapeType:r,elementProps:c})}else{var u=i;o=k.createElement(RK,{shapeType:r,elementProps:u})}return s?k.createElement(cs,{className:a},o):o}var l8=(e,t)=>{var r=za();return(n,a)=>s=>{e==null||e(n,a,s),r(Hie({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},c8=e=>{var t=za();return(r,n)=>a=>{e==null||e(r,n,a),t(uHe())}},u8=(e,t)=>{var r=za();return(n,a)=>s=>{e==null||e(n,a,s),r(dHe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function d8(e){var{fn:t,args:r}=e,n=za(),a=tc();return k.useEffect(()=>{if(!a){var s=t(r);return n(oHe(s)),()=>{n(lHe(s))}}},[t,r,n,a]),null}var Toe=()=>{};function EGe(e){var{legendPayload:t}=e,r=za(),n=tc();return k.useEffect(()=>n?Toe:(r(zae(t)),()=>{r($ae(t))}),[r,n,t]),null}function joe(e){var{legendPayload:t}=e,r=za(),n=sr(Tn);return k.useEffect(()=>n!=="centric"&&n!=="radial"?Toe:(r(zae(t)),()=>{r($ae(t))}),[r,n,t]),null}function A8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=k.useRef(Vw(t)),n=k.useRef(e);return n.current!==e&&(r.current=Vw(t),n.current=e),r.current}var $j,CGe=()=>{var[e]=k.useState(()=>Vw("uid-"));return e},_Ge=($j=ife.useId)!==null&&$j!==void 0?$j:CGe;function SGe(e,t){var r=_Ge();return t||(e?"".concat(e,"-").concat(r):r)}var NGe=k.createContext(void 0),f8=e=>{var{id:t,type:r,children:n}=e,a=SGe("recharts-".concat(r),t);return k.createElement(NGe.Provider,{value:a},n(a))},kGe={cartesianItems:[],polarItems:[]},Ioe=Hc({name:"graphicalItems",initialState:kGe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=ah(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=ah(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=ah(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:BGe,replaceCartesianGraphicalItem:TGe,removeCartesianGraphicalItem:jGe,addPolarGraphicalItem:IGe,removePolarGraphicalItem:FGe}=Ioe.actions,OGe=Ioe.reducer;function DGe(e){var t=za(),r=k.useRef(null);return k.useEffect(()=>{r.current===null?t(BGe(e)):r.current!==e&&t(TGe({prev:r.current,next:e})),r.current=e},[t,e]),k.useEffect(()=>()=>{r.current&&(t(jGe(r.current)),r.current=null)},[t]),null}function Foe(e){var t=za();return k.useEffect(()=>(t(IGe(e)),()=>{t(FGe(e))}),[t,e]),null}function PGe(){}var RGe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},LK={t:0},Gj={t:1};function h8(e){var t=Uu(e,RGe),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=Zae("JavascriptAnimate",t.animationManager),[f,h]=k.useState(r?LK:Gj),p=k.useRef(null);return k.useEffect(()=>{r||h(Gj)},[r]),k.useEffect(()=>{if(!r||!n)return PGe;var g=Jae(LK,Gj,Xae(s),a,h,d.getTimeoutController()),x=()=>{p.current=g()};return d.start([c,i,x,a,o]),()=>{d.stop(),p.current&&p.current(),o()}},[r,n,a,s,i,c,o,d]),u(f.t)}var LGe=["onMouseEnter","onClick","onMouseLeave"],MGe=["id"],UGe=["id"];function m8(e,t){if(e==null)return{};var r,n,a=QGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function QGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function MK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MK(Object(r),!0).forEach(function(n){HGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HGe(e,t,r){return(t=VGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VGe(e){var t=zGe(e,"string");return typeof t=="symbol"?t:t+""}function zGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wh(){return wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wh.apply(null,arguments)}function $Ge(e){var t=k.useMemo(()=>R2(e.children,Y2),[e.children]),r=sr(n=>iGe(n,e.id,t));return r==null?null:k.createElement(joe,{legendPayload:r})}function GGe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:F1(o,t),hide:c,type:u,color:i,unit:""}}}var KGe=(e,t)=>e>t?"start":e<t?"end":"middle",qGe=(e,t,r)=>typeof t=="function"?t(e):bl(t,r,r*.8),WGe=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=Fae(s,i),c=a+bl(e.cx,s,s/2),u=n+bl(e.cy,i,i/2),d=bl(e.innerRadius,o,0),f=qGe(r,e.outerRadius,o),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},XGe=(e,t)=>{var r=Wi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},YGe=(e,t)=>{if(k.isValidElement(e))return k.cloneElement(e,t);if(typeof e=="function")return e(t);var r=xn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return k.createElement(Kae,wh({},t,{type:"linear",className:r}))},JGe=(e,t,r)=>{if(k.isValidElement(e))return k.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),k.isValidElement(n)))return n;var a=xn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return k.createElement($1,wh({},t,{alignmentBaseline:"middle",className:a}),n)};function ZGe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var o=al(r),c=Wn(a,!1),u=Wn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,p)=>{var g=(h.startAngle+h.endAngle)/2,x=Zn(h.cx,h.cy,h.outerRadius+d,g),b=_s(_s(_s(_s({},o),h),{},{stroke:"none"},c),{},{index:p,textAnchor:KGe(x.x,h.cx)},x),y=_s(_s(_s(_s({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:p,points:[Zn(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return k.createElement(cs,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},s&&YGe(s,y),JGe(a,b,Pa(h,i)))});return k.createElement(cs,{className:"recharts-pie-labels"},f)}function Ooe(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=sr(_m),{onMouseEnter:o,onClick:c,onMouseLeave:u}=a,d=m8(a,LGe),f=l8(o,a.dataKey),h=c8(u),p=u8(c,a.dataKey);return t==null?null:k.createElement(k.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var b=r&&String(x)===i,y=i?n:null,w=b?r:y,S=_s(_s({},g),{},{stroke:g.stroke,tabIndex:-1,[Mae]:x,[Uae]:a.dataKey});return k.createElement(cs,wh({tabIndex:-1,className:"recharts-pie-sector"},Bg(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:h(g,x),onClick:p(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),k.createElement(Boe,wh({option:w,isActive:b,shapeType:"sector"},S)))}),k.createElement(ZGe,{sectors:t,props:a,showLabels:s}))}function eKe(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:o,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),p=XGe(o,c),g=Math.abs(p),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(F=>Pa(F,u,0)!==0).length,y=(g>=360?b:b-1)*x,w=g-b*h-y,S=n.reduce((F,E)=>{var _=Pa(E,u,0);return F+(ur(_)?_:0)},0),j;if(S>0){var N;j=n.map((F,E)=>{var _=Pa(F,u,0),B=Pa(F,d,E),P=WGe(r,s,F),D=(ur(_)?_:0)/S,I,U=_s(_s({},F),a&&a[E]&&a[E].props);E?I=N.endAngle+Wi(p)*x*(_!==0?1:0):I=o;var R=I+Wi(p)*((_!==0?h:0)+D*w),Y=(I+R)/2,H=(P.innerRadius+P.outerRadius)/2,X=[{name:B,value:_,payload:U,dataKey:u,type:f}],V=Zn(P.cx,P.cy,H,Y);return N=_s(_s(_s(_s({},r.presentationProps),{},{percent:D,cornerRadius:i,name:B,tooltipPayload:X,midAngle:Y,middleRadius:H,tooltipPosition:V},U),P),{},{value:Pa(F,u),startAngle:I,endAngle:R,payload:U,paddingAngle:Wi(p)*x}),N})}return j}function tKe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=A8(t,"recharts-pie-"),p=r.current,[g,x]=k.useState(!0),b=k.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=k.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return k.createElement(h8,{begin:s,duration:i,isActive:a,easing:o,onAnimationStart:y,onAnimationEnd:b,key:h},w=>{var S=[],j=n&&n[0],N=j.startAngle;return n.forEach((F,E)=>{var _=p&&p[E],B=E>0?Cm(F,"paddingAngle",0):0;if(_){var P=ev(_.endAngle-_.startAngle,F.endAngle-F.startAngle),D=_s(_s({},F),{},{startAngle:N+B,endAngle:N+P(w)+B});S.push(D),N=D.endAngle}else{var{endAngle:I,startAngle:U}=F,R=ev(0,I-U),Y=R(w),H=_s(_s({},F),{},{startAngle:N+B,endAngle:N+Y+B});S.push(H),N=H.endAngle}}),r.current=S,k.createElement(cs,null,k.createElement(Ooe,{sectors:S,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function rKe(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=k.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?k.createElement(tKe,{props:e,previousSectorsRef:s}):k.createElement(Ooe,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function nKe(e){var{hide:t,className:r,rootTabIndex:n}=e,a=xn("recharts-pie",r);return t?null:k.createElement(cs,{tabIndex:n,className:a},k.createElement(rKe,e))}var aKe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Tg.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function sKe(e){var{id:t}=e,r=m8(e,MGe),n=k.useMemo(()=>R2(e.children,Y2),[e.children]),a=sr(s=>oGe(s,t,n));return k.createElement(k.Fragment,null,k.createElement(d8,{fn:GGe,args:_s(_s({},e),{},{sectors:a})}),k.createElement(nKe,wh({},r,{sectors:a})))}function Doe(e){var t=Uu(e,aKe),{id:r}=t,n=m8(t,UGe),a=al(n);return k.createElement(f8,{id:r,type:"pie"},s=>k.createElement(k.Fragment,null,k.createElement(Foe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),k.createElement($Ge,wh({},n,{id:s})),k.createElement(sKe,wh({},n,{id:s})),n.children))}Doe.displayName="Pie";var iKe=ut([Ni],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),oKe=ut([iKe,jh,Ih],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Poe=()=>sr(oKe),lKe=()=>sr(YHe);function UK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UK(Object(r),!0).forEach(function(n){cKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cKe(e,t,r){return(t=uKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uKe(e){var t=dKe(e,"string");return typeof t=="symbol"?t:t+""}function dKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AKe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=QK(QK({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Wn(a,!1)),yR(a)),o;return k.isValidElement(a)?o=k.cloneElement(a,i):typeof a=="function"?o=a(i):o=k.createElement(e8,i),k.createElement(cs,{className:"recharts-active-dot"},o)};function fKe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=sr(_m),i=lKe();if(t==null||i==null)return null;var o=t.find(c=>i.includes(c.payload));return ks(o)?null:AKe({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function HK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function K5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HK(Object(r),!0).forEach(function(n){hKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hKe(e,t,r){return(t=mKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mKe(e){var t=pKe(e,"string");return typeof t=="symbol"?t:t+""}function pKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Roe=(e,t)=>G1(e,"radiusAxis",t),gKe=ut([Roe],e=>{if(e!=null)return{scale:e}}),xKe=ut([z2,Roe],(e,t)=>{if(!(e==null||t==null))return K5(K5({},e),{},{scale:t})}),vKe=(e,t,r,n)=>K1(e,"radiusAxis",t,n),Loe=(e,t,r)=>R1(e,r),Moe=(e,t,r)=>G1(e,"angleAxis",r),bKe=ut([Loe,Moe],(e,t)=>{if(!(e==null||t==null))return K5(K5({},e),{},{scale:t})}),yKe=(e,t,r,n)=>K1(e,"angleAxis",r,n),wKe=ut([Loe,Moe,L1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),EKe=(e,t,r,n,a)=>a,CKe=ut([Tn,xKe,vKe,bKe,yKe],(e,t,r,n,a)=>Om(e,"radiusAxis")?Gw(t,r,!1):Gw(n,a,!1)),_Ke=ut([t8,EKe],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),SKe=ut([gKe,wKe,tk,_Ke,CKe],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:o}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(i,o+1);return DKe({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),NKe=["id"];function kKe(e,t){if(e==null)return{};var r,n,a=BKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function BKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VK(Object(r),!0).forEach(function(n){p8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p8(e,t,r){return(t=TKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TKe(e){var t=jKe(e,"string");return typeof t=="symbol"?t:t+""}function jKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i1(){return i1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i1.apply(null,arguments)}function g8(e,t){return e&&e!=="none"?e:t}var IKe=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:g8(n,a),value:F1(r,t),payload:e}]};function FKe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:F1(s,t),hide:i,type:o,color:g8(r,a),unit:""}}}function OKe(e,t){var r;return k.isValidElement(e)?r=k.cloneElement(e,t):typeof e=="function"?r=e(t):r=k.createElement(e8,i1({},t,{className:xn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function DKe(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:o}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,p)=>{var g=Pa(h,r.dataKey,p),x=Pa(h,a),b=r.scale(g)+d,y=Array.isArray(x)?goe(x):x,w=ks(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(gl(gl({},Zn(i,o,w,b)),{},{name:g,value:x,cx:i,cy:o,radius:w,angle:b,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var p=h.value[0],g=ks(p)?void 0:t.scale(p);f.push(gl(gl({},h),{},{radius:g},Zn(i,o,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function PKe(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=kKe(r,NKe),o=al(i),c=Wn(n,!0),u=t.map((d,f)=>{var h=gl(gl(gl({key:"dot-".concat(f),r:3},o),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return OKe(n,h)});return k.createElement(cs,{className:"recharts-radar-dots"},u)}function Uoe(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:o}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return k.isValidElement(a)?d=k.cloneElement(a,gl(gl({},r),{},{points:t})):typeof a=="function"?d=a(gl(gl({},r),{},{points:t})):d=k.createElement(xoe,i1({},Wn(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:o})),k.createElement(cs,{className:"recharts-radar-polygon"},d,k.createElement(PKe,{props:r,points:t}),n&&tm.renderCallByParent(r,t))}function RKe(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=A8(t,"recharts-radar-"),[h,p]=k.useState(!0),g=k.useCallback(()=>{typeof c=="function"&&c(),p(!1)},[c]),x=k.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return k.createElement(h8,{begin:s,duration:i,isActive:a,easing:o,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},b=>{var y=d&&d.length/n.length,w=b===1?n:n.map((S,j)=>{var N=d&&d[Math.floor(j*y)];if(N){var F=ev(N.x,S.x),E=ev(N.y,S.y);return gl(gl({},S),{},{x:F(b),y:E(b)})}var _=ev(S.cx,S.x),B=ev(S.cy,S.y);return gl(gl({},S),{},{x:_(b),y:B(b)})});return b>0&&(r.current=w),k.createElement(Uoe,{points:w,props:t,showLabels:!h})})}function LKe(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=k.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?k.createElement(RKe,{props:e,previousPointsRef:a}):k.createElement(Uoe,{points:t,props:e,showLabels:!0})}var MKe={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Tg.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class UKe extends k.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=xn("recharts-radar",r);return k.createElement(k.Fragment,null,k.createElement(cs,{className:a},k.createElement(LKe,this.props)),k.createElement(fKe,{points:n,mainColor:g8(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function QKe(e){var t=tc(),r=sr(n=>SKe(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return k.createElement(UKe,i1({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class x8 extends k.PureComponent{render(){return k.createElement(f8,{id:this.props.id,type:"radar"},t=>k.createElement(k.Fragment,null,k.createElement(Foe,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),k.createElement(joe,{legendPayload:IKe(this.props)}),k.createElement(d8,{fn:FKe,args:this.props}),k.createElement(QKe,i1({},this.props,{id:t}))))}}p8(x8,"displayName","Radar");p8(x8,"defaultProps",MKe);var HKe="Invariant failed";function VKe(e,t){throw new Error(HKe)}var zKe=["x","y"];function $F(){return $F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$F.apply(null,arguments)}function zK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zK(Object(r),!0).forEach(function(n){$Ke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Ke(e,t,r){return(t=GKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GKe(e){var t=KKe(e,"string");return typeof t=="symbol"?t:t+""}function KKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qKe(e,t){if(e==null)return{};var r,n,a=WKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function XKe(e,t){var{x:r,y:n}=e,a=qKe(e,zKe),s="".concat(r),i=parseInt(s,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return Xb(Xb(Xb(Xb(Xb({},t),a),i?{x:i}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Qoe(e){return k.createElement(Boe,$F({shapeType:"rectangle",propTransformer:XKe,activeClassName:"recharts-active-bar"},e))}var YKe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(ur(t))return t;var s=ur(n)||ks(n);return s?t(n,a):(s||VKe(),r)}},JKe={},Hoe=Hc({name:"errorBars",initialState:JKe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:_ft,removeErrorBar:Sft}=Hoe.actions,ZKe=Hoe.reducer,eqe=["children"];function tqe(e,t){if(e==null)return{};var r,n,a=rqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nqe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},aqe=k.createContext(nqe);function sqe(e){var{children:t}=e,r=tqe(e,eqe);return k.createElement(aqe.Provider,{value:r},t)}function Voe(e,t){var r,n,a=sr(u=>Oh(u,e)),s=sr(u=>Lm(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:wc.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Ec.allowDataOverflow,c=i||o;return{needClip:c,needClipX:i,needClipY:o}}function iqe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Poe(),{needClipX:s,needClipY:i,needClip:o}=Voe(t,r);if(!o)return null;var{x:c,y:u,width:d,height:f}=a;return k.createElement("clipPath",{id:"clipPath-".concat(n)},k.createElement("rect",{x:s?c:c-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var oqe=["onMouseEnter","onMouseLeave","onClick"],lqe=["value","background","tooltipPosition"],cqe=["id"],uqe=["onMouseEnter","onClick","onMouseLeave"];function o1(){return o1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o1.apply(null,arguments)}function $K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$K(Object(r),!0).forEach(function(n){dqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$K(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dqe(e,t,r){return(t=Aqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aqe(e){var t=fqe(e,"string");return typeof t=="symbol"?t:t+""}function fqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q5(e,t){if(e==null)return{};var r,n,a=hqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mqe=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:F1(r,t),payload:e}]};function pqe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:F1(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:o}}}function gqe(e){var t=sr(_m),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:o,onClick:c}=s,u=q5(s,oqe),d=l8(i,n),f=c8(o),h=u8(c,n);if(!a||r==null)return null;var p=Wn(a,!1);return k.createElement(k.Fragment,null,r.map((g,x)=>{var{value:b,background:y,tooltipPosition:w}=g,S=q5(g,lqe);if(!y)return null;var j=d(g,x),N=f(g,x),F=h(g,x),E=Go(Go(Go(Go(Go({option:a,isActive:String(x)===t},S),{},{fill:"#eee"},y),p),Bg(u,g,x)),{},{onMouseEnter:j,onMouseLeave:N,onClick:F,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return k.createElement(Qoe,o1({key:"background-bar-".concat(x)},E))}))}function zoe(e){var{data:t,props:r,showLabels:n}=e,a=al(r),{id:s}=a,i=q5(a,cqe),{shape:o,dataKey:c,activeBar:u}=r,d=sr(_m),f=sr(toe),{onMouseEnter:h,onClick:p,onMouseLeave:g}=r,x=q5(r,uqe),b=l8(h,c),y=c8(g),w=u8(p,c);return t?k.createElement(k.Fragment,null,t.map((S,j)=>{var N=u&&String(j)===d&&(f==null||c===f),F=N?u:o,E=Go(Go(Go({},i),S),{},{isActive:N,option:F,index:j,dataKey:c});return k.createElement(cs,o1({className:"recharts-bar-rectangle"},Bg(x,S,j),{onMouseEnter:b(S,j),onMouseLeave:y(S,j),onClick:w(S,j),key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value,"-").concat(j)}),k.createElement(Qoe,E))}),n&&tm.renderCallByParent(r,t)):null}function xqe(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=A8(t,"recharts-bar-"),[p,g]=k.useState(!1),x=k.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),b=k.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return k.createElement(h8,{begin:i,duration:o,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:b,key:h},y=>{var w=y===1?n:n==null?void 0:n.map((S,j)=>{var N=f&&f[j];if(N)return Go(Go({},S),{},{x:bx(N.x,S.x,y),y:bx(N.y,S.y,y),width:bx(N.width,S.width,y),height:bx(N.height,S.height,y)});if(a==="horizontal"){var F=bx(0,S.height,y);return Go(Go({},S),{},{y:S.y+S.height-F,height:F})}var E=bx(0,S.width,y);return Go(Go({},S),{},{width:E})});return y>0&&(r.current=w??null),w==null?null:k.createElement(cs,null,k.createElement(zoe,{props:t,data:w,showLabels:!p}))})}function vqe(e){var{data:t,isAnimationActive:r}=e,n=k.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?k.createElement(xqe,{previousRectanglesRef:n,props:e}):k.createElement(zoe,{props:e,data:t,showLabels:!0})}var $oe=0,bqe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Pa(e,t)}};class yqe extends k.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:o,background:c,id:u}=this.props;if(t)return null;var d=xn("recharts-bar",a),f=u;return k.createElement(cs,{className:d,id:u},o&&k.createElement("defs",null,k.createElement(iqe,{clipPathId:f,xAxisId:s,yAxisId:i})),k.createElement(cs,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},k.createElement(gqe,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),k.createElement(vqe,this.props)),this.props.children)}}var wqe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Tg.isSsr,legendType:"rect",minPointSize:$oe,xAxisId:0,yAxisId:0};function Eqe(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Voe(t,r),h=KR(),p=tc(),g=R2(e.children,Y2),x=sr(w=>Xqe(w,t,r,p,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var b,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?b=0:b=h==="vertical"?y.height/2:y.width/2,k.createElement(sqe,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:bqe,errorBarOffset:b},k.createElement(yqe,o1({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function Cqe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p}=e,g=t==="horizontal"?o:i,x=d?g.scale.domain():null,b=v8e({numericAxis:g});return f.map((y,w)=>{var S,j,N,F,E,_;d?S=f8e(d[w],x):(S=Pa(y,r),Array.isArray(S)||(S=[b,S]));var B=YKe(n,$oe)(S[1],w);if(t==="horizontal"){var P,[D,I]=[o.scale(S[0]),o.scale(S[1])];j=h$({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:y,index:w}),N=(P=I??D)!==null&&P!==void 0?P:void 0,F=a.size;var U=D-I;if(E=Rc(U)?0:U,_={x:j,y:h.top,width:F,height:h.height},Math.abs(B)>0&&Math.abs(E)<Math.abs(B)){var R=Wi(E||B)*(Math.abs(B)-Math.abs(E));N-=R,E+=R}}else{var[Y,H]=[i.scale(S[0]),i.scale(S[1])];if(j=Y,N=h$({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:y,index:w}),F=H-Y,E=a.size,_={x:h.left,y:N,width:h.width,height:E},Math.abs(B)>0&&Math.abs(F)<Math.abs(B)){var X=Wi(F||B)*(Math.abs(B)-Math.abs(F));F+=X}}if(j==null||N==null||F==null||E==null)return null;var V=Go(Go({},y),{},{x:j,y:N,width:F,height:E,value:d?S:S[1],payload:y,background:_,tooltipPosition:{x:j+F/2,y:N+E/2}},p&&p[w]&&p[w].props);return V}).filter(Boolean)}function W5(e){var t=Uu(e,wqe),r=tc();return k.createElement(f8,{id:t.id,type:"bar"},n=>k.createElement(k.Fragment,null,k.createElement(EGe,{legendPayload:mqe(t)}),k.createElement(d8,{fn:pqe,args:t}),k.createElement(DGe,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:x8e(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),k.createElement(Eqe,o1({},t,{id:n}))))}W5.displayName="Bar";function GK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GK(Object(r),!0).forEach(function(n){_qe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _qe(e,t,r){return(t=Sqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sqe(e){var t=Nqe(e,"string");return typeof t=="symbol"?t:t+""}function Nqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kqe=(e,t)=>t,Bqe=(e,t,r)=>r,Tqe=(e,t,r,n)=>n,jqe=(e,t,r,n,a)=>a,J2=ut([kL,jqe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Iqe=ut([J2],e=>e==null?void 0:e.maxBarSize),Fqe=(e,t,r,n,a,s)=>s,KK=(e,t,r)=>{var n=r??e;if(!ks(n))return bl(n,t,0)},Oqe=ut([Tn,kL,kqe,Bqe,Tqe],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Dqe=(e,t,r,n)=>{var a=Tn(e);return a==="horizontal"?LF(e,"yAxis",r,n):LF(e,"xAxis",t,n)},Pqe=(e,t,r)=>{var n=Tn(e);return n==="horizontal"?DG(e,"xAxis",t):DG(e,"yAxis",r)},Rqe=(e,t,r)=>{var n={},a=e.filter(sk),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),p=KK(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=KK(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]},Lqe=ut([Oqe,lQe,Pqe],Rqe),Mqe=(e,t,r,n,a)=>{var s,i,o=J2(e,t,r,n,a);if(o!=null){var c=Tn(e),u=rie(e),{maxBarSize:d}=o,f=ks(d)?u:d,h,p;return c==="horizontal"?(h=a1(e,"xAxis",t,n),p=n1(e,"xAxis",t,n)):(h=a1(e,"yAxis",r,n),p=n1(e,"yAxis",r,n)),(s=(i=Gw(h,p,!0))!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:0}},Goe=(e,t,r,n)=>{var a=Tn(e),s,i;return a==="horizontal"?(s=a1(e,"xAxis",t,n),i=n1(e,"xAxis",t,n)):(s=a1(e,"yAxis",r,n),i=n1(e,"yAxis",r,n)),Gw(s,i)};function Uqe(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=bl(e,r,0,!0),o,c=[];if(Uc(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,w)=>y+(w.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,p={offset:h-i,size:0};o=n.reduce((y,w)=>{var S,j={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:p.offset+p.size+i,size:u?d:(S=w.barSize)!==null&&S!==void 0?S:0}},N=[...y,j];return p=N[N.length-1].position,N},c)}else{var g=bl(t,r,0,!0);r-2*g-(s-1)*i<=0&&(i=0);var x=(r-2*g-(s-1)*i)/s;x>1&&(x>>=0);var b=Uc(a)?Math.min(x,a):x;o=n.reduce((y,w,S)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(x+i)*S+(x-b)/2,size:b}}],c)}return o}}var Qqe=(e,t,r,n,a,s,i)=>{var o=ks(i)?t:i,c=Uqe(r,n,a!==s?a:s,e,o);return a!==s&&c!=null&&(c=c.map(u=>KC(KC({},u),{},{position:KC(KC({},u.position),{},{offset:u.position.offset-a/2})}))),c},Hqe=ut([Lqe,rie,oQe,nie,Mqe,Goe,Iqe],Qqe),Vqe=(e,t,r,n)=>a1(e,"xAxis",t,n),zqe=(e,t,r,n)=>a1(e,"yAxis",r,n),$qe=(e,t,r,n)=>n1(e,"xAxis",t,n),Gqe=(e,t,r,n)=>n1(e,"yAxis",r,n),Kqe=ut([Hqe,J2],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),qqe=(e,t)=>{var r=_L(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},Wqe=ut([Dqe,J2],qqe),Xqe=ut([Ni,Vqe,zqe,$qe,Gqe,Kqe,Tn,xL,Goe,Wqe,J2,Fqe],(e,t,r,n,a,s,i,o,c,u,d,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:g}=o;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,b;if(x!=null&&x.length>0?b=x:b=h==null?void 0:h.slice(p,g+1),b!=null)return Cqe({layout:i,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:b,offset:e,cells:f})}}),Koe=e=>{var{chartData:t}=e,r=za(),n=tc();return k.useEffect(()=>n?()=>{}:(r($G(t)),()=>{r($G(void 0))}),[t,r,n]),null},qK={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},qoe=Hc({name:"brush",initialState:qK,reducers:{setBrushSettings(e,t){return t.payload==null?qK:t.payload}}}),{setBrushSettings:Nft}=qoe.actions,Yqe=qoe.reducer;function Jqe(e,t,r){return(t=Zqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zqe(e){var t=eWe(e,"string");return typeof t=="symbol"?t:t+""}function eWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class v8{static create(t){return new v8(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}Jqe(v8,"EPS",1e-4);function tWe(e){return(e%180+180)%180}var rWe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=tWe(a),i=s*Math.PI/180,o=Math.atan(n/r),c=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},nWe={dots:[],areas:[],lines:[]},Woe=Hc({name:"referenceElements",initialState:nWe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ah(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ah(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ah(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:kft,removeDot:Bft,addArea:Tft,removeArea:jft,addLine:Ift,removeLine:Fft}=Woe.actions,aWe=Woe.reducer,sWe=k.createContext(void 0),iWe=e=>{var{children:t}=e,[r]=k.useState("".concat(Vw("recharts"),"-clip")),n=Poe();if(n==null)return null;var{x:a,y:s,width:i,height:o}=n;return k.createElement(sWe.Provider,{value:r},k.createElement("defs",null,k.createElement("clipPath",{id:r},k.createElement("rect",{x:a,y:s,height:o,width:i}))),t)};function Kj(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Xoe(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function oWe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return rWe(n,r)}function lWe(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:o}=e;return t===1?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}function X5(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function cWe(e,t){return Xoe(e,t+1)}function uWe(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:o}=t,c=0,u=1,d=i,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:Xoe(n,u)};var x=c,b,y=()=>(b===void 0&&(b=r(g,x)),b),w=g.coordinate,S=c===0||X5(e,w,y,d,o);S||(c=0,d=i,u+=1),S&&(d=w+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function WK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WK(Object(r),!0).forEach(function(n){dWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dWe(e,t,r){return(t=AWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AWe(e){var t=fWe(e,"string");return typeof t=="symbol"?t:t+""}function fWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hWe(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:c}=t,u=function(h){var p=s[h],g,x=()=>(g===void 0&&(g=r(p,h)),g);if(h===i-1){var b=e*(p.coordinate+e*x()/2-c);s[h]=p=Mo(Mo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else s[h]=p=Mo(Mo({},p),{},{tickCoord:p.coordinate});var y=X5(e,p.tickCoord,x,o,c);y&&(c=p.tickCoord-e*(x()/2+a),s[h]=Mo(Mo({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function mWe(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:c,end:u}=t;if(s){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=Mo(Mo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=X5(e,d.tickCoord,()=>f,c,u);p&&(u=d.tickCoord-e*(f/2+a),i[o-1]=Mo(Mo({},d),{},{isShow:!0}))}for(var g=s?o-1:o,x=function(w){var S=i[w],j,N=()=>(j===void 0&&(j=r(S,w)),j);if(w===0){var F=e*(S.coordinate-e*N()/2-c);i[w]=S=Mo(Mo({},S),{},{tickCoord:F<0?S.coordinate-F*e:S.coordinate})}else i[w]=S=Mo(Mo({},S),{},{tickCoord:S.coordinate});var E=X5(e,S.tickCoord,N,c,u);E&&(c=S.tickCoord+e*(N()/2+a),i[w]=Mo(Mo({},S),{},{isShow:!0}))},b=0;b<g;b++)x(b);return i}function b8(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(ur(c)||Tg.isSsr){var h;return(h=cWe(a,ur(c)?c:0))!==null&&h!==void 0?h:[]}var p=[],g=o==="top"||o==="bottom"?"width":"height",x=d&&g==="width"?rw(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(S,j)=>{var N=typeof u=="function"?u(S.value,j):S.value;return g==="width"?oWe(rw(N,{fontSize:t,letterSpacing:r}),x,f):rw(N,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?Wi(a[1].coordinate-a[0].coordinate):1,w=lWe(s,y,g);return c==="equidistantPreserveStart"?uWe(y,w,b,a,i):(c==="preserveStart"||c==="preserveStartEnd"?p=mWe(y,w,b,a,i,c==="preserveStartEnd"):p=hWe(y,w,b,a,i),p.filter(S=>S.isShow))}var pWe=["viewBox"],gWe=["viewBox"];function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nv.apply(null,arguments)}function XK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XK(Object(r),!0).forEach(function(n){y8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YK(e,t){if(e==null)return{};var r,n,a=xWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function y8(e,t,r){return(t=vWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vWe(e){var t=bWe(e,"string");return typeof t=="symbol"?t:t+""}function bWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Um extends k.Component{constructor(t){super(t),this.tickRefs=k.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=YK(t,pWe),s=this.props,{viewBox:i}=s,o=YK(s,gWe);return!Kj(n,i)||!Kj(a,o)||!Kj(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:o,mirror:c,tickMargin:u}=this.props,d,f,h,p,g,x,b=c?-1:1,y=t.tickSize||o,w=ur(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=f=t.coordinate,p=n+ +!c*s,h=p-b*y,x=h-b*u,g=w;break;case"left":h=p=t.coordinate,f=r+ +!c*a,d=f-b*y,g=d-b*u,x=w;break;case"right":h=p=t.coordinate,f=r+ +c*a,d=f+b*y,g=d+b*u,x=w;break;default:d=f=t.coordinate,p=n+ +c*s,h=p+b*y,x=h+b*u,g=w;break}return{line:{x1:d,y1:h,x2:f,y2:p},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o}=this.props,c=wi(wi(wi({},Wn(this.props,!1)),Wn(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);c=wi(wi({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);c=wi(wi({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return k.createElement("line",nv({},c,{className:xn("recharts-cartesian-axis-line",Cm(o,"className"))}))}static renderTickItem(t,r,n){var a,s=xn(r.className,"recharts-cartesian-axis-tick-value");if(k.isValidElement(t))a=k.cloneElement(t,wi(wi({},r),{},{className:s}));else if(typeof t=="function")a=t(wi(wi({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=xn(i,t.className)),a=k.createElement($1,nv({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:o,unit:c,padding:u}=this.props,d=b8(wi(wi({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=al(this.props),g=Wn(i,!1),x=wi(wi({},p),{},{fill:"none"},Wn(a,!1)),b=d.map((y,w)=>{var{line:S,tick:j}=this.getTickLineCoord(y),N=wi(wi(wi(wi({textAnchor:f,verticalAnchor:h},p),{},{stroke:"none",fill:s},g),j),{},{index:w,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return k.createElement(cs,nv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Bg(this.props,y,w)),a&&k.createElement("line",nv({},x,S,{className:xn("recharts-cartesian-axis-tick-line",Cm(a,"className"))})),i&&Um.renderTickItem(i,N,"".concat(typeof o=="function"?o(y.value,w):y.value).concat(c||"")))});return b.length>0?k.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:k.createElement(cs,{className:xn("recharts-cartesian-axis",a),ref:o=>{if(o){var c=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),$l.renderCallByParent(this.props))}}y8(Um,"displayName","CartesianAxis");y8(Um,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var yWe=["x1","y1","x2","y2","key"],wWe=["offset"],EWe=["xAxisId","yAxisId"],CWe=["xAxisId","yAxisId"];function JK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JK(Object(r),!0).forEach(function(n){_We(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _We(e,t,r){return(t=SWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SWe(e){var t=NWe(e,"string");return typeof t=="symbol"?t:t+""}function NWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jp(){return jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jp.apply(null,arguments)}function Y5(e,t){if(e==null)return{};var r,n,a=kWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var BWe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:o}=e;return k.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Yoe(e,t){var r;if(k.isValidElement(e))r=k.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:o}=t,c=Y5(t,yWe),u=al(c),{offset:d}=u,f=Y5(u,wWe);r=k.createElement("line",jp({},f,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function TWe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=Y5(e,EWe),c=a.map((u,d)=>{var f=Ko(Ko({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Yoe(n,f)});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function jWe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=Y5(e,CWe),c=a.map((u,d)=>{var f=Ko(Ko({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Yoe(n,f)});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function IWe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return k.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function FWe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return k.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:o,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var OWe=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return Pae(b8(Ko(Ko(Ko({},Um.defaultProps),r),{},{ticks:Rae(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},DWe=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return Pae(b8(Ko(Ko(Ko({},Um.defaultProps),r),{},{ticks:Rae(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},PWe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function J5(e){var t=$R(),r=GR(),n=Hae(),a=Ko(Ko({},Uu(e,PWe)),{},{x:ur(e.x)?e.x:n.left,y:ur(e.y)?e.y:n.top,width:ur(e.width)?e.width:n.width,height:ur(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=a,g=tc(),x=sr(B=>PG(B,"xAxis",s,g)),b=sr(B=>PG(B,"yAxis",i,g));if(!ur(u)||u<=0||!ur(d)||d<=0||!ur(o)||o!==+o||!ur(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||OWe,w=a.horizontalCoordinatesGenerator||DWe,{horizontalPoints:S,verticalPoints:j}=a;if((!S||!S.length)&&typeof w=="function"){var N=h&&h.length,F=w({yAxis:b?Ko(Ko({},b),{},{ticks:N?h:b.ticks}):void 0,width:t,height:r,offset:n},N?!0:f);tw(Array.isArray(F),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof F,"]")),Array.isArray(F)&&(S=F)}if((!j||!j.length)&&typeof y=="function"){var E=p&&p.length,_=y({xAxis:x?Ko(Ko({},x),{},{ticks:E?p:x.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);tw(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(j=_)}return k.createElement("g",{className:"recharts-cartesian-grid"},k.createElement(BWe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),k.createElement(IWe,jp({},a,{horizontalPoints:S})),k.createElement(FWe,jp({},a,{verticalPoints:j})),k.createElement(TWe,jp({},a,{offset:n,horizontalPoints:S,xAxis:x,yAxis:b})),k.createElement(jWe,jp({},a,{offset:n,verticalPoints:j,xAxis:x,yAxis:b})))}J5.displayName="CartesianGrid";function ZK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZK(Object(r),!0).forEach(function(n){RWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RWe(e,t,r){return(t=LWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LWe(e){var t=MWe(e,"string");return typeof t=="symbol"?t:t+""}function MWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UWe={xAxis:{},yAxis:{},zAxis:{}},Joe=Hc({name:"cartesianAxis",initialState:UWe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=eq(eq({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:QWe,removeXAxis:HWe,addYAxis:VWe,removeYAxis:zWe,addZAxis:Oft,removeZAxis:Dft,updateYAxisWidth:$We}=Joe.actions,GWe=Joe.reducer,KWe=["children"],qWe=["dangerouslySetInnerHTML","ticks"];function Zoe(e,t,r){return(t=WWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WWe(e){var t=XWe(e,"string");return typeof t=="symbol"?t:t+""}function XWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GF(){return GF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GF.apply(null,arguments)}function ele(e,t){if(e==null)return{};var r,n,a=YWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function YWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function JWe(e){var t=za(),r=k.useMemo(()=>{var{children:s}=e,i=ele(e,KWe);return i},[e]),n=sr(s=>Oh(s,r.id)),a=r===n;return k.useEffect(()=>(t(QWe(r)),()=>{t(HWe(r))}),[r,t]),a?e.children:null}var ZWe=e=>{var{xAxisId:t,className:r}=e,n=sr(Qae),a=tc(),s="xAxis",i=sr(p=>H1(p,s,t,a)),o=sr(p=>Die(p,s,t,a)),c=sr(p=>jie(p,t)),u=sr(p=>eHe(p,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=ele(e,qWe);return k.createElement(Um,GF({},h,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:xn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},eXe=e=>{var t,r,n,a,s;return k.createElement(JWe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},k.createElement(ZWe,e))};class e2 extends k.Component{render(){return k.createElement(eXe,this.props)}}Zoe(e2,"displayName","XAxis");Zoe(e2,"defaultProps",{allowDataOverflow:wc.allowDataOverflow,allowDecimals:wc.allowDecimals,allowDuplicatedCategory:wc.allowDuplicatedCategory,height:wc.height,hide:!1,mirror:wc.mirror,orientation:wc.orientation,padding:wc.padding,reversed:wc.reversed,scale:wc.scale,tickCount:wc.tickCount,type:wc.type,xAxisId:0});var tXe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+o+(r?n:0);return Math.round(u)}return 0},rXe=["dangerouslySetInnerHTML","ticks"];function tle(e,t,r){return(t=nXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nXe(e){var t=aXe(e,"string");return typeof t=="symbol"?t:t+""}function aXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KF(){return KF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KF.apply(null,arguments)}function sXe(e,t){if(e==null)return{};var r,n,a=iXe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iXe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oXe(e){var t=za();return k.useEffect(()=>(t(VWe(e)),()=>{t(zWe(e))}),[e,t]),null}var lXe=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=k.useRef(null),o=k.useRef(null),c=sr(Qae),u=tc(),d=za(),f="yAxis",h=sr(S=>H1(S,f,r,u)),p=sr(S=>Iie(S,r)),g=sr(S=>tHe(S,r)),x=sr(S=>Die(S,f,r,u));if(k.useLayoutEffect(()=>{var S;if(!(a!=="auto"||!p||ZL(s)||k.isValidElement(s))){var j=i.current,N=j==null||(S=j.tickRefs)===null||S===void 0?void 0:S.current,{tickSize:F,tickMargin:E}=j.props,_=tXe({ticks:N,label:o.current,labelGapWithTick:5,tickSize:F,tickMargin:E});Math.round(p.width)!==Math.round(_)&&d($We({id:r,width:_}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,d,s,r,a]),p==null||g==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,w=sXe(e,rXe);return k.createElement(Um,KF({},w,{ref:i,labelRef:o,scale:h,x:g.x,y:g.y,width:p.width,height:p.height,className:xn("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},cXe=e=>{var t,r,n,a,s;return k.createElement(k.Fragment,null,k.createElement(oXe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),k.createElement(lXe,e))},uXe={allowDataOverflow:Ec.allowDataOverflow,allowDecimals:Ec.allowDecimals,allowDuplicatedCategory:Ec.allowDuplicatedCategory,hide:!1,mirror:Ec.mirror,orientation:Ec.orientation,padding:Ec.padding,reversed:Ec.reversed,scale:Ec.scale,tickCount:Ec.tickCount,type:Ec.type,width:Ec.width,yAxisId:0};class t2 extends k.Component{render(){return k.createElement(cXe,this.props)}}tle(t2,"displayName","YAxis");tle(t2,"defaultProps",uXe);var qj={exports:{}},Wj={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tq;function dXe(){if(tq)return Wj;tq=1;var e=m1();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,o=e.useDebugValue;return Wj.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var p=a(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=i(function(){function b(N){if(!y){if(y=!0,w=N,N=f(N),h!==void 0&&g.hasValue){var F=g.value;if(h(F,N))return S=F}return S=N}if(F=S,r(w,N))return F;var E=f(N);return h!==void 0&&h(F,E)?(w=N,F):(w=N,S=E)}var y=!1,w,S,j=d===void 0?null:d;return[function(){return b(u())},j===null?void 0:function(){return b(j())}]},[u,d,f,h]);var x=n(c,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),o(x),x},Wj}var rq;function AXe(){return rq||(rq=1,qj.exports=dXe()),qj.exports}AXe();function fXe(e){e()}function hXe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){fXe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var nq={notify(){},get:()=>[]};function mXe(e,t){let r,n=nq,a=0,s=!1;function i(x){d();const b=n.subscribe(x);let y=!1;return()=>{y||(y=!0,b(),f())}}function o(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=hXe())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=nq)}function h(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const g={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var pXe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gXe=pXe(),xXe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",vXe=xXe(),bXe=()=>gXe||vXe?k.useLayoutEffect:k.useEffect,yXe=bXe(),Xj=Symbol.for("react-redux-context"),Yj=typeof globalThis<"u"?globalThis:{};function wXe(){if(!k.createContext)return{};const e=Yj[Xj]??(Yj[Xj]=new Map);let t=e.get(k.createContext);return t||(t=k.createContext(null),e.set(k.createContext,t)),t}var EXe=wXe();function CXe(e){const{children:t,context:r,serverState:n,store:a}=e,s=k.useMemo(()=>{const c=mXe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=k.useMemo(()=>a.getState(),[a]);yXe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const o=r||EXe;return k.createElement(o.Provider,{value:s},t)}var _Xe=CXe,SXe=(e,t)=>t,w8=ut([SXe,Tn,L1,Bi,Yie,Dh,aVe,Ni],cVe),E8=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},rle=Pu("mouseClick"),nle=L2();nle.startListening({actionCreator:rle,effect:(e,t)=>{var r=e.payload,n=w8(t.getState(),E8(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(AHe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var qF=Pu("mouseMove"),ale=L2();ale.startListening({actionCreator:qF,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=VL(n,n.tooltip.settings.shared),s=w8(n,E8(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(zie({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Vie()))}});function NXe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var aq={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},sle=Hc({name:"rootProps",initialState:aq,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:aq.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),kXe=sle.reducer,{updateOptions:BXe}=sle.actions,ile=Hc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:TXe}=ile.actions,jXe=ile.reducer,ole=Pu("keyDown"),lle=Pu("focus"),C8=L2();C8.startListening({actionCreator:ole,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(zL(a,z1(r))),o=Dh(r);if(s==="Enter"){var c=V5(r,"axis","hover",String(a.index));t.dispatch(UF({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=nHe(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var p=V5(r,"axis","hover",String(h));t.dispatch(UF({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});C8.startListening({actionCreator:lle,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=V5(r,"axis","hover",String(s));t.dispatch(UF({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var bu=Pu("externalEvent"),cle=L2();cle.startListening({actionCreator:bu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:qHe(r),activeDataKey:toe(r),activeIndex:_m(r),activeLabel:eoe(r),activeTooltipIndex:_m(r),isTooltipActive:WHe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var IXe=ut([V1],e=>e.tooltipItemPayloads),FXe=ut([IXe,W2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),ule=Pu("touchMove"),dle=L2();dle.startListening({actionCreator:ule,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=VL(n,n.tooltip.settings.shared);if(a==="axis"){var s=w8(n,E8({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(zie({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Mae),d=(i=c.getAttribute(Uae))!==null&&i!==void 0?i:void 0,f=FXe(t.getState(),u,d);t.dispatch(Hie({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var OXe=uae({brush:Yqe,cartesianAxis:GWe,chartData:_Ve,errorBars:ZKe,graphicalItems:OGe,layout:YLe,legend:L8e,options:bVe,polarAxis:k$e,polarOptions:jXe,referenceElements:aWe,rootProps:kXe,tooltip:fHe}),DXe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return wLe({reducer:OXe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([nle.middleware,ale.middleware,C8.middleware,cle.middleware,dle.middleware]),devTools:{serialize:{replacer:NXe},name:"recharts-".concat(r)}})};function Ale(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=tc(),s=k.useRef(null);if(a)return r;s.current==null&&(s.current=DXe(t,n));var i=PR;return k.createElement(_Xe,{context:i,store:s.current},r)}function fle(e){var{layout:t,width:r,height:n,margin:a}=e,s=za(),i=tc();return k.useEffect(()=>{i||(s(qLe(t)),s(WLe({width:r,height:n})),s(KLe(a)))},[s,i,t,r,n,a]),null}function hle(e){var t=za();return k.useEffect(()=>{t(BXe(e))},[t,e]),null}var PXe=["children"];function RXe(e,t){if(e==null)return{};var r,n,a=LXe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function LXe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Z5(){return Z5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z5.apply(null,arguments)}var MXe={width:"100%",height:"100%"},UXe=k.forwardRef((e,t)=>{var r=$R(),n=GR(),a=Gae();if(!Jv(r)||!Jv(n))return null;var{children:s,otherAttributes:i,title:o,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,k.createElement(wR,Z5({},i,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:MXe,ref:t}),s)}),QXe=e=>{var{children:t}=e,r=sr(G4);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return k.createElement(wR,{width:n,height:a,x:i,y:s},t)},sq=k.forwardRef((e,t)=>{var{children:r}=e,n=RXe(e,PXe),a=tc();return a?k.createElement(QXe,null,r):k.createElement(UXe,Z5({ref:t},n),r)});function HXe(){var e=za(),[t,r]=k.useState(null),n=sr(S8e);return k.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Uc(s)&&s!==n&&e(XLe(s))}},[t,e,n]),r}function iq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VXe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iq(Object(r),!0).forEach(function(n){zXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zXe(e,t,r){return(t=$Xe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Xe(e){var t=GXe(e,"string");return typeof t=="symbol"?t:t+""}function GXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KXe=k.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:g,onTouchStart:x,style:b,width:y}=e,w=za(),[S,j]=k.useState(null),[N,F]=k.useState(null);kVe();var E=HXe(),_=k.useCallback(M=>{E(M),typeof t=="function"&&t(M),j(M),F(M)},[E,t,j,F]),B=k.useCallback(M=>{w(rle(M)),w(bu({handler:s,reactEvent:M}))},[w,s]),P=k.useCallback(M=>{w(qF(M)),w(bu({handler:u,reactEvent:M}))},[w,u]),D=k.useCallback(M=>{w(Vie()),w(bu({handler:d,reactEvent:M}))},[w,d]),I=k.useCallback(M=>{w(qF(M)),w(bu({handler:f,reactEvent:M}))},[w,f]),U=k.useCallback(()=>{w(lle())},[w]),R=k.useCallback(M=>{w(ole(M.key))},[w]),Y=k.useCallback(M=>{w(bu({handler:i,reactEvent:M}))},[w,i]),H=k.useCallback(M=>{w(bu({handler:o,reactEvent:M}))},[w,o]),X=k.useCallback(M=>{w(bu({handler:c,reactEvent:M}))},[w,c]),V=k.useCallback(M=>{w(bu({handler:h,reactEvent:M}))},[w,h]),z=k.useCallback(M=>{w(bu({handler:x,reactEvent:M}))},[w,x]),q=k.useCallback(M=>{w(ule(M)),w(bu({handler:g,reactEvent:M}))},[w,g]),ne=k.useCallback(M=>{w(bu({handler:p,reactEvent:M}))},[w,p]);return k.createElement(ooe.Provider,{value:S},k.createElement(Fne.Provider,{value:N},k.createElement("div",{className:xn("recharts-wrapper",n),style:VXe({position:"relative",cursor:"default",width:y,height:a},b),onClick:B,onContextMenu:Y,onDoubleClick:H,onFocus:U,onKeyDown:R,onMouseDown:X,onMouseEnter:P,onMouseLeave:D,onMouseMove:I,onMouseUp:V,onTouchEnd:ne,onTouchMove:q,onTouchStart:z,ref:_},r)))}),qXe=["children","className","width","height","style","compact","title","desc"];function WXe(e,t){if(e==null)return{};var r,n,a=XXe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function XXe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mle=k.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:o,title:c,desc:u}=e,d=WXe(e,qXe),f=al(d);return o?k.createElement(sq,{otherAttributes:f,title:c,desc:u},r):k.createElement(KXe,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},k.createElement(sq,{otherAttributes:f,title:c,desc:u,ref:t},k.createElement(iWe,null,r)))}),YXe=["width","height"];function WF(){return WF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WF.apply(null,arguments)}function JXe(e,t){if(e==null)return{};var r,n,a=ZXe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZXe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eYe={top:5,right:5,bottom:5,left:5},tYe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:eYe,reverseStackOrder:!1,syncMethod:"index"},rYe=k.forwardRef(function(t,r){var n,a=Uu(t.categoricalChartProps,tYe),{width:s,height:i}=a,o=JXe(a,YXe);if(!Jv(s)||!Jv(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return k.createElement(Ale,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},k.createElement(Koe,{chartData:h.data}),k.createElement(fle,{width:s,height:i,layout:a.layout,margin:a.margin}),k.createElement(hle,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),k.createElement(mle,WF({},o,{width:s,height:i,ref:r})))}),nYe=["axis","item"],XF=k.forwardRef((e,t)=>k.createElement(rYe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:nYe,tooltipPayloadSearcher:JL,categoricalChartProps:e,ref:t}));function aYe(e){var t=za();return k.useEffect(()=>{t(TXe(e))},[t,e]),null}var sYe=["width","height","layout"];function YF(){return YF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YF.apply(null,arguments)}function iYe(e,t){if(e==null)return{};var r,n,a=oYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lYe={top:5,right:5,bottom:5,left:5},cYe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:lYe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},ple=k.forwardRef(function(t,r){var n,a=Uu(t.categoricalChartProps,cYe),{width:s,height:i,layout:o}=a,c=iYe(a,sYe);if(!Jv(s)||!Jv(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,p={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return k.createElement(Ale,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},k.createElement(Koe,{chartData:a.data}),k.createElement(fle,{width:s,height:i,layout:o,margin:a.margin}),k.createElement(hle,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),k.createElement(aYe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),k.createElement(mle,YF({width:s,height:i},c,{ref:r})))}),uYe=["item"],dYe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},AYe=k.forwardRef((e,t)=>{var r=Uu(e,dYe);return k.createElement(ple,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:uYe,tooltipPayloadSearcher:JL,categoricalChartProps:r,ref:t})}),fYe=["axis"],hYe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},mYe=k.forwardRef((e,t)=>{var r=Uu(e,hYe);return k.createElement(ple,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:fYe,tooltipPayloadSearcher:JL,categoricalChartProps:r,ref:t})});const l1="panol_maquinas",Z2="panol_registros",pYe=e=>{const t=Wt(Tt(pt,l1),Tr("nombre","asc"));return pr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},gYe=e=>{const t=Wt(Tt(pt,Z2),Tr("fecha","desc"));return pr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},xYe=async e=>(await Ln(Tt(pt,l1),{...e,createdAt:el(),updatedAt:el()})).id,vYe=async(e,t)=>{await Lu(dr(pt,l1,e),{...t,updatedAt:el()})},bYe=async e=>{const t=Wt(Tt(pt,Z2),nn("maquinaId","==",e));if(!(await ga(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await Za(dr(pt,l1,e))},yYe=async e=>(await Ln(Tt(pt,Z2),{...e,createdAt:el(),updatedAt:el()})).id,wYe=async(e,t)=>{await Lu(dr(pt,Z2,e),{...t,updatedAt:el()})},EYe=async e=>{await Za(dr(pt,Z2,e))},CYe=async()=>{if(!(await ga(Tt(pt,l1))).empty)return;const t=bg(pt);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(n=>{const a=dr(Tt(pt,l1));t.set(a,{...n,createdAt:el(),updatedAt:el()})}),await t.commit()},_Ye=()=>{var Y;const[e,t]=k.useState([]),[r,n]=k.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=k.useState(a),[o,c]=k.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=k.useState(u),[h,p]=k.useState(null),[g,x]=k.useState({maquinaId:"",curso:"",profesor:"",fecha:""});k.useEffect(()=>{CYe().catch(console.error);const H=pYe(t),X=gYe(n);return()=>{H&&H(),X&&X()}},[]);const b=async H=>{if(H.preventDefault(),!!d.nombre.trim())try{h?await vYe(h.id,{...d}):await xYe({...d}),f(u),p(null)}catch(X){alert(X.message||"Error al guardar máquina")}},y=k.useCallback(async H=>{try{await bYe(H)}catch(X){alert(X.message||"Error al eliminar máquina")}},[]),w=async H=>{H.preventDefault();const X=o||s;if(!X.curso||!X.profesorResponsable.trim()||!X.maquinaId||Number(X.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(o){const{id:V,...z}=o;await wYe(V,z)}else await yYe({...s});i(a),c(null)}catch(V){alert(V.message||"Error al guardar registro")}},S=k.useCallback(async H=>{try{await EYe(H)}catch(X){alert(X.message||"Error al eliminar registro")}},[]),j=k.useMemo(()=>r.filter(H=>(g.maquinaId===""||H.maquinaId===g.maquinaId)&&(g.curso===""||H.curso===g.curso)&&(g.profesor===""||H.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||H.fecha===g.fecha)).sort((H,X)=>new Date(X.fecha).getTime()-new Date(H.fecha).getTime()),[r,g]),N=k.useMemo(()=>new Map(e.map(H=>[H.id,H])),[e]),F=k.useMemo(()=>j.reduce((H,X)=>H+(Number(X.totalHoras)||0),0),[j]),E=k.useMemo(()=>{const H=new Map;j.forEach(V=>{var q;const z=((q=N.get(V.maquinaId))==null?void 0:q.nombre)||"N/A";H.set(z,(H.get(z)||0)+(Number(V.totalHoras)||0))});const X=Array.from(H.entries()).map(([V,z])=>({maquina:V,horas:Number(z.toFixed(2))}));return X.sort((V,z)=>z.horas-V.horas),X},[j,N]),_=()=>{const H=j.map(z=>{var q,ne;return{Fecha:z.fecha,Curso:z.curso,Profesor:z.profesorResponsable,Máquina:((q=N.get(z.maquinaId))==null?void 0:q.nombre)||"N/A",Especialidad:((ne=N.get(z.maquinaId))==null?void 0:ne.especialidad)||"N/A","Total Horas":z.totalHoras,Observaciones:z.observaciones}}),X=ku.json_to_sheet(H),V=ku.book_new();ku.book_append_sheet(V,X,"RegistrosPañol"),aR(V,"Registros_Pañol.xlsx")},B=()=>{const H=new vr;go(H,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:j.map(X=>{var V,z;return[X.fecha,X.curso,X.profesorResponsable,((V=N.get(X.maquinaId))==null?void 0:V.nombre)||"N/A",((z=N.get(X.maquinaId))==null?void 0:z.especialidad)||"N/A",X.totalHoras,X.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:X=>{H.setFontSize(12),H.setFont("helvetica","bold"),H.text("LICEO INDUSTRIAL DE RECOLETA",X.settings.margin.left,14),H.setFontSize(10),H.setFont("helvetica","normal"),H.text("Informe de Registros de Pañol",X.settings.margin.left,20)}}),H.save("Registros_Pañol.pdf")},P="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",D=(H,X)=>l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${X}`,children:H}),I=({icon:H,label:X,value:V,accent:z="from-indigo-500 to-sky-500"})=>l.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${z} opacity-10`}),l.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:H}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:X}),l.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:V})]})]})]}),U=({title:H,icon:X,children:V,right:z,accent:q="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>l.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${q}`}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[X," ",l.jsx("span",{children:H})]}),z]}),V]})]}),R=()=>{const H=o||s,X=o?c:i;return l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx($f,{size:16})," Fecha"]}),l.jsx("input",{name:"fecha",type:"date",value:H.fecha,onChange:V=>X({...H,fecha:V.target.value}),className:P,required:!0})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(Bd,{size:16})," Curso"]}),l.jsxs("select",{name:"curso",value:H.curso,onChange:V=>X({...H,curso:V.target.value}),className:P,required:!0,children:[l.jsx("option",{value:"",children:"Curso"}),Ks.map(V=>l.jsx("option",{children:V},V))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(fh,{size:16})," Profesor"]}),l.jsxs("select",{name:"profesorResponsable",value:H.profesorResponsable,onChange:V=>X({...H,profesorResponsable:V.target.value}),className:P,required:!0,children:[l.jsx("option",{value:"",children:"Profesor Responsable"}),w6.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(V_,{size:16})," Máquina"]}),l.jsxs("select",{name:"maquinaId",value:H.maquinaId,onChange:V=>X({...H,maquinaId:V.target.value}),className:P,required:!0,children:[l.jsx("option",{value:"",children:"Máquina"}),e.map(V=>l.jsx("option",{value:V.id,children:V.nombre},V.id))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(dQ,{size:16})," Total de Horas"]}),l.jsx("input",{name:"totalHoras",type:"number",value:H.totalHoras,onChange:V=>X({...H,totalHoras:Number(V.target.value)}),className:P,required:!0,min:.5,step:.5})]}),l.jsxs("div",{className:"lg:col-span-6",children:[l.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),l.jsx("textarea",{name:"observaciones",value:H.observaciones,onChange:V=>X({...H,observaciones:V.target.value}),placeholder:"Observaciones...",className:P+" min-h-[40px]",rows:2})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&l.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[l.jsx(GS,{size:16})," Cancelar"]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[o?l.jsx(yw,{size:16}):l.jsx(eh,{size:16}),o?"Actualizar":"Registrar"]})]})]})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[l.jsx(sye,{size:18})," Excel"]}),l.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[l.jsx(Zf,{size:18})," PDF"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(I,{icon:l.jsx(V_,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),l.jsx(I,{icon:l.jsx(Zf,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:j.length,accent:"from-sky-500 to-cyan-500"}),l.jsx(I,{icon:l.jsx(dQ,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:F.toFixed(1),accent:"from-emerald-500 to-lime-500"}),l.jsx(I,{icon:l.jsx($f,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(Y=r[0])!=null&&Y.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[l.jsx("div",{className:"xl:col-span-3",children:l.jsx(U,{title:o?`Editando registro #${o.id.slice(0,4)}`:"Nuevo registro de uso",icon:l.jsx(tye,{size:18}),children:l.jsx(R,{})})}),l.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:l.jsx(U,{title:"Uso por máquina (horas)",icon:l.jsx(Hy,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:l.jsx("div",{className:"flex gap-2 items-center",children:D(`${E.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:l.jsx("div",{className:"h-[320px] w-full",children:l.jsx(Ey,{width:"100%",height:"100%",children:l.jsxs(XF,{data:E,margin:{top:8,right:16,bottom:8,left:0},children:[l.jsx(J5,{strokeDasharray:"3 3"}),l.jsx(e2,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),l.jsx(t2,{}),l.jsx(wy,{}),l.jsx(K4,{}),l.jsx(W5,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),l.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:l.jsxs(U,{title:"Administrar máquinas",icon:l.jsx(V_,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[l.jsxs("form",{onSubmit:b,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[l.jsx("input",{value:d.nombre,onChange:H=>f({...d,nombre:H.target.value}),placeholder:"Nombre máquina",className:P+" md:col-span-2"}),l.jsxs("select",{value:d.especialidad,onChange:H=>f({...d,especialidad:H.target.value}),className:P+" md:col-span-2",children:[l.jsx("option",{value:"Industrial",children:"Industrial"}),l.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?l.jsx(yw,{size:16}):l.jsx(eh,{size:16}),h?"Guardar":"Agregar"]})]}),l.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(H=>l.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:H.nombre}),l.jsx("div",{className:"text-xs",children:H.especialidad==="Industrial"?D("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):D("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{p(H),f(H)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:l.jsx(_6,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>y(H.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:l.jsx(Fc,{size:16,className:"text-red-600"})})]})]},H.id))})]})}),l.jsx("div",{className:"xl:col-span-2 order-3",children:l.jsxs(U,{title:"Historial de uso",icon:l.jsx(Zf,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(lP,{size:16,className:"text-slate-600"})}),children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[l.jsx("input",{type:"date",value:g.fecha,onChange:H=>x({...g,fecha:H.target.value}),className:P,placeholder:"Fecha"}),l.jsxs("select",{value:g.curso,onChange:H=>x({...g,curso:H.target.value}),className:P,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Ks.map(H=>l.jsx("option",{children:H},H))]}),l.jsxs("select",{value:g.maquinaId,onChange:H=>x({...g,maquinaId:H.target.value}),className:P,children:[l.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(H=>l.jsx("option",{value:H.id,children:H.nombre},H.id))]}),l.jsxs("div",{className:"relative",children:[l.jsx(ww,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),l.jsx("input",{value:g.profesor,onChange:H=>x({...g,profesor:H.target.value}),placeholder:"Buscar profesor...",className:P+" pl-9"})]})]}),l.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),l.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[j.map(H=>{var X;return l.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:H.fecha}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((X=N.get(H.maquinaId))==null?void 0:X.nombre)||"N/A"}),l.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[H.profesorResponsable," ",l.jsxs("span",{className:"text-slate-400",children:["(",H.curso,")"]})]}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:H.totalHoras}),l.jsxs("td",{className:"px-3 py-2 text-center",children:[l.jsx("button",{onClick:()=>c(H),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:l.jsx(_6,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>S(H.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:l.jsx(Fc,{size:16,className:"text-red-600"})})]})]},H.id)}),j.length===0&&l.jsx("tr",{children:l.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function wl(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=wl(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const SYe={},oq=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,p))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(SYe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},NYe=e=>e?oq(e):oq,{useDebugValue:kYe}=ct,{useSyncExternalStoreWithSelector:BYe}=TRe,TYe=e=>e;function gle(e,t=TYe,r){const n=BYe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return kYe(n),n}const lq=(e,t)=>{const r=NYe(e),n=(a,s=t)=>gle(r,a,s);return Object.assign(n,r),n},jYe=(e,t)=>e?lq(e,t):lq;function rl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var IYe={value:()=>{}};function pk(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Y_(r)}function Y_(e){this._=e}function FYe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Y_.prototype=pk.prototype={constructor:Y_,on:function(e,t){var r=this._,n=FYe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=OYe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=cq(r[a],e.name,t);else if(t==null)for(a in r)r[a]=cq(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Y_(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function OYe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function cq(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=IYe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var JF="http://www.w3.org/1999/xhtml";const uq={svg:"http://www.w3.org/2000/svg",xhtml:JF,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gk(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),uq.hasOwnProperty(t)?{space:uq[t],local:e}:e}function DYe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===JF&&t.documentElement.namespaceURI===JF?t.createElement(e):t.createElementNS(r,e)}}function PYe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xle(e){var t=gk(e);return(t.local?PYe:DYe)(t)}function RYe(){}function _8(e){return e==null?RYe:function(){return this.querySelector(e)}}function LYe(e){typeof e!="function"&&(e=_8(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),o[d]=u);return new Qc(n,this._parents)}function MYe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function UYe(){return[]}function vle(e){return e==null?UYe:function(){return this.querySelectorAll(e)}}function QYe(e){return function(){return MYe(e.apply(this,arguments))}}function HYe(e){typeof e=="function"?e=QYe(e):e=vle(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&(n.push(e.call(c,c.__data__,u,i)),a.push(c));return new Qc(n,a)}function ble(e){return function(){return this.matches(e)}}function yle(e){return function(t){return t.matches(e)}}var VYe=Array.prototype.find;function zYe(e){return function(){return VYe.call(this.children,e)}}function $Ye(){return this.firstElementChild}function GYe(e){return this.select(e==null?$Ye:zYe(typeof e=="function"?e:yle(e)))}var KYe=Array.prototype.filter;function qYe(){return Array.from(this.children)}function WYe(e){return function(){return KYe.call(this.children,e)}}function XYe(e){return this.selectAll(e==null?qYe:WYe(typeof e=="function"?e:yle(e)))}function YYe(e){typeof e!="function"&&(e=ble(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new Qc(n,this._parents)}function wle(e){return new Array(e.length)}function JYe(){return new Qc(this._enter||this._groups.map(wle),this._parents)}function eN(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}eN.prototype={constructor:eN,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ZYe(e){return function(){return e}}function eJe(e,t,r,n,a,s){for(var i=0,o,c=t.length,u=s.length;i<u;++i)(o=t[i])?(o.__data__=s[i],n[i]=o):r[i]=new eN(e,s[i]);for(;i<c;++i)(o=t[i])&&(a[i]=o)}function tJe(e,t,r,n,a,s,i){var o,c,u=new Map,d=t.length,f=s.length,h=new Array(d),p;for(o=0;o<d;++o)(c=t[o])&&(h[o]=p=i.call(c,c.__data__,o,t)+"",u.has(p)?a[o]=c:u.set(p,c));for(o=0;o<f;++o)p=i.call(e,s[o],o,s)+"",(c=u.get(p))?(n[o]=c,c.__data__=s[o],u.delete(p)):r[o]=new eN(e,s[o]);for(o=0;o<d;++o)(c=t[o])&&u.get(h[o])===c&&(a[o]=c)}function rJe(e){return e.__data__}function nJe(e,t){if(!arguments.length)return Array.from(this,rJe);var r=t?tJe:eJe,n=this._parents,a=this._groups;typeof e!="function"&&(e=ZYe(e));for(var s=a.length,i=new Array(s),o=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,p=aJe(e.call(d,d&&d.__data__,u,n)),g=p.length,x=o[u]=new Array(g),b=i[u]=new Array(g),y=c[u]=new Array(h);r(d,f,x,b,y,p,t);for(var w=0,S=0,j,N;w<g;++w)if(j=x[w]){for(w>=S&&(S=w+1);!(N=b[S])&&++S<g;);j._next=N||null}}return i=new Qc(i,n),i._enter=o,i._exit=c,i}function aJe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sJe(){return new Qc(this._exit||this._groups.map(wle),this._parents)}function iJe(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function oJe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),c=0;c<i;++c)for(var u=r[c],d=n[c],f=u.length,h=o[c]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;c<a;++c)o[c]=r[c];return new Qc(o,this._parents)}function lJe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function cJe(e){e||(e=uJe);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,c=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new Qc(a,this._parents).order()}function uJe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function dJe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function AJe(){return Array.from(this)}function fJe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function hJe(){let e=0;for(const t of this)++e;return e}function mJe(){return!this.node()}function pJe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this}function gJe(e){return function(){this.removeAttribute(e)}}function xJe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vJe(e,t){return function(){this.setAttribute(e,t)}}function bJe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function yJe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function wJe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function EJe(e,t){var r=gk(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?xJe:gJe:typeof t=="function"?r.local?wJe:yJe:r.local?bJe:vJe)(r,t))}function Ele(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function CJe(e){return function(){this.style.removeProperty(e)}}function _Je(e,t,r){return function(){this.style.setProperty(e,t,r)}}function SJe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function NJe(e,t,r){return arguments.length>1?this.each((t==null?CJe:typeof t=="function"?SJe:_Je)(e,t,r??"")):c1(this.node(),e)}function c1(e,t){return e.style.getPropertyValue(t)||Ele(e).getComputedStyle(e,null).getPropertyValue(t)}function kJe(e){return function(){delete this[e]}}function BJe(e,t){return function(){this[e]=t}}function TJe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function jJe(e,t){return arguments.length>1?this.each((t==null?kJe:typeof t=="function"?TJe:BJe)(e,t)):this.node()[e]}function Cle(e){return e.trim().split(/^|\s+/)}function S8(e){return e.classList||new _le(e)}function _le(e){this._node=e,this._names=Cle(e.getAttribute("class")||"")}_le.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Sle(e,t){for(var r=S8(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function Nle(e,t){for(var r=S8(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function IJe(e){return function(){Sle(this,e)}}function FJe(e){return function(){Nle(this,e)}}function OJe(e,t){return function(){(t.apply(this,arguments)?Sle:Nle)(this,e)}}function DJe(e,t){var r=Cle(e+"");if(arguments.length<2){for(var n=S8(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?OJe:t?IJe:FJe)(r,t))}function PJe(){this.textContent=""}function RJe(e){return function(){this.textContent=e}}function LJe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function MJe(e){return arguments.length?this.each(e==null?PJe:(typeof e=="function"?LJe:RJe)(e)):this.node().textContent}function UJe(){this.innerHTML=""}function QJe(e){return function(){this.innerHTML=e}}function HJe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function VJe(e){return arguments.length?this.each(e==null?UJe:(typeof e=="function"?HJe:QJe)(e)):this.node().innerHTML}function zJe(){this.nextSibling&&this.parentNode.appendChild(this)}function $Je(){return this.each(zJe)}function GJe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function KJe(){return this.each(GJe)}function qJe(e){var t=typeof e=="function"?e:xle(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function WJe(){return null}function XJe(e,t){var r=typeof e=="function"?e:xle(e),n=t==null?WJe:typeof t=="function"?t:_8(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function YJe(){var e=this.parentNode;e&&e.removeChild(this)}function JJe(){return this.each(YJe)}function ZJe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eZe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tZe(e){return this.select(e?eZe:ZJe)}function rZe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function nZe(e){return function(t){e.call(this,t,this.__data__)}}function aZe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function sZe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function iZe(e,t,r){return function(){var n=this.__on,a,s=nZe(t);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function oZe(e,t,r){var n=aZe(e+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,d;c<u;++c)for(a=0,d=o[c];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=t?iZe:sZe,a=0;a<s;++a)this.each(o(n[a],t,r));return this}function kle(e,t,r){var n=Ele(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function lZe(e,t){return function(){return kle(this,e,t)}}function cZe(e,t){return function(){return kle(this,e,t.apply(this,arguments))}}function uZe(e,t){return this.each((typeof t=="function"?cZe:lZe)(e,t))}function*dZe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var Ble=[null];function Qc(e,t){this._groups=e,this._parents=t}function eE(){return new Qc([[document.documentElement]],Ble)}function AZe(){return this}Qc.prototype=eE.prototype={constructor:Qc,select:LYe,selectAll:HYe,selectChild:GYe,selectChildren:XYe,filter:YYe,data:nJe,enter:JYe,exit:sJe,join:iJe,merge:oJe,selection:AZe,order:lJe,sort:cJe,call:dJe,nodes:AJe,node:fJe,size:hJe,empty:mJe,each:pJe,attr:EJe,style:NJe,property:jJe,classed:DJe,text:MJe,html:VJe,raise:$Je,lower:KJe,append:qJe,insert:XJe,remove:JJe,clone:tZe,datum:rZe,on:oZe,dispatch:uZe,[Symbol.iterator]:dZe};function Su(e){return typeof e=="string"?new Qc([[document.querySelector(e)]],[document.documentElement]):new Qc([[e]],Ble)}function fZe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function NA(e,t){if(e=fZe(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const hZe={passive:!1},r2={capture:!0,passive:!1};function Jj(e){e.stopImmediatePropagation()}function Sv(e){e.preventDefault(),e.stopImmediatePropagation()}function Tle(e){var t=e.document.documentElement,r=Su(e).on("dragstart.drag",Sv,r2);"onselectstart"in t?r.on("selectstart.drag",Sv,r2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function jle(e,t){var r=e.document.documentElement,n=Su(e).on("dragstart.drag",null);t&&(n.on("click.drag",Sv,r2),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const qC=e=>()=>e;function ZF(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}ZF.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function mZe(e){return!e.ctrlKey&&!e.button}function pZe(){return this.parentNode}function gZe(e,t){return t??{x:e.x,y:e.y}}function xZe(){return navigator.maxTouchPoints||"ontouchstart"in this}function vZe(){var e=mZe,t=pZe,r=gZe,n=xZe,a={},s=pk("start","drag","end"),i=0,o,c,u,d,f=0;function h(j){j.on("mousedown.drag",p).filter(n).on("touchstart.drag",b).on("touchmove.drag",y,hZe).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(j,N){if(!(d||!e.call(this,j,N))){var F=S(this,t.call(this,j,N),j,N,"mouse");F&&(Su(j.view).on("mousemove.drag",g,r2).on("mouseup.drag",x,r2),Tle(j.view),Jj(j),u=!1,o=j.clientX,c=j.clientY,F("start",j))}}function g(j){if(Sv(j),!u){var N=j.clientX-o,F=j.clientY-c;u=N*N+F*F>f}a.mouse("drag",j)}function x(j){Su(j.view).on("mousemove.drag mouseup.drag",null),jle(j.view,u),Sv(j),a.mouse("end",j)}function b(j,N){if(e.call(this,j,N)){var F=j.changedTouches,E=t.call(this,j,N),_=F.length,B,P;for(B=0;B<_;++B)(P=S(this,E,j,N,F[B].identifier,F[B]))&&(Jj(j),P("start",j,F[B]))}}function y(j){var N=j.changedTouches,F=N.length,E,_;for(E=0;E<F;++E)(_=a[N[E].identifier])&&(Sv(j),_("drag",j,N[E]))}function w(j){var N=j.changedTouches,F=N.length,E,_;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<F;++E)(_=a[N[E].identifier])&&(Jj(j),_("end",j,N[E]))}function S(j,N,F,E,_,B){var P=s.copy(),D=NA(B||F,N),I,U,R;if((R=r.call(j,new ZF("beforestart",{sourceEvent:F,target:h,identifier:_,active:i,x:D[0],y:D[1],dx:0,dy:0,dispatch:P}),E))!=null)return I=R.x-D[0]||0,U=R.y-D[1]||0,function Y(H,X,V){var z=D,q;switch(H){case"start":a[_]=Y,q=i++;break;case"end":delete a[_],--i;case"drag":D=NA(V||X,N),q=i;break}P.call(H,j,new ZF(H,{sourceEvent:X,subject:R,target:h,identifier:_,active:q,x:D[0]+I,y:D[1]+U,dx:D[0]-z[0],dy:D[1]-z[1],dispatch:P}),E)}}return h.filter=function(j){return arguments.length?(e=typeof j=="function"?j:qC(!!j),h):e},h.container=function(j){return arguments.length?(t=typeof j=="function"?j:qC(j),h):t},h.subject=function(j){return arguments.length?(r=typeof j=="function"?j:qC(j),h):r},h.touchable=function(j){return arguments.length?(n=typeof j=="function"?j:qC(!!j),h):n},h.on=function(){var j=s.on.apply(s,arguments);return j===s?h:j},h.clickDistance=function(j){return arguments.length?(f=(j=+j)*j,h):Math.sqrt(f)},h}var u1=0,Cy=0,Yb=0,Ile=1e3,tN,_y,rN=0,fg=0,xk=0,n2=typeof performance=="object"&&performance.now?performance:Date,Fle=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function N8(){return fg||(Fle(bZe),fg=n2.now()+xk)}function bZe(){fg=0}function nN(){this._call=this._time=this._next=null}nN.prototype=Ole.prototype={constructor:nN,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?N8():+r)+(t==null?0:+t),!this._next&&_y!==this&&(_y?_y._next=this:tN=this,_y=this),this._call=e,this._time=r,eO()},stop:function(){this._call&&(this._call=null,this._time=1/0,eO())}};function Ole(e,t,r){var n=new nN;return n.restart(e,t,r),n}function yZe(){N8(),++u1;for(var e=tN,t;e;)(t=fg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--u1}function dq(){fg=(rN=n2.now())+xk,u1=Cy=0;try{yZe()}finally{u1=0,EZe(),fg=0}}function wZe(){var e=n2.now(),t=e-rN;t>Ile&&(xk-=t,rN=e)}function EZe(){for(var e,t=tN,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:tN=r);_y=e,eO(n)}function eO(e){if(!u1){Cy&&(Cy=clearTimeout(Cy));var t=e-fg;t>24?(e<1/0&&(Cy=setTimeout(dq,e-n2.now()-xk)),Yb&&(Yb=clearInterval(Yb))):(Yb||(rN=n2.now(),Yb=setInterval(wZe,Ile)),u1=1,Fle(dq))}}function Aq(e,t,r){var n=new nN;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var CZe=pk("start","end","cancel","interrupt"),_Ze=[],Dle=0,fq=1,tO=2,J_=3,hq=4,rO=5,Z_=6;function vk(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;SZe(e,r,{name:t,index:n,group:a,on:CZe,tween:_Ze,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Dle})}function k8(e,t){var r=Qd(e,t);if(r.state>Dle)throw new Error("too late; already scheduled");return r}function ef(e,t){var r=Qd(e,t);if(r.state>J_)throw new Error("too late; already running");return r}function Qd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function SZe(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=Ole(s,0,r.time);function s(u){r.state=fq,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,f,h,p;if(r.state!==fq)return c();for(d in n)if(p=n[d],p.name===r.name){if(p.state===J_)return Aq(i);p.state===hq?(p.state=Z_,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete n[d]):+d<t&&(p.state=Z_,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete n[d])}if(Aq(function(){r.state===J_&&(r.state=hq,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=tO,r.on.call("start",e,e.__data__,r.index,r.group),r.state===tO){for(r.state=J_,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=p);a.length=f+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=rO,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===rO&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=Z_,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function eS(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>tO&&n.state<rO,n.state=Z_,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function NZe(e){return this.each(function(){eS(this,e)})}function kZe(e,t){var r,n;return function(){var a=ef(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function BZe(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=ef(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=o;break}c===u&&a.push(o)}s.tween=a}}function TZe(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Qd(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?kZe:BZe)(r,e,t))}function B8(e,t,r){var n=e._id;return e.each(function(){var a=ef(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Qd(a,n).value[t]}}function Ple(e,t){var r;return(typeof t=="number"?pd:t instanceof dg?O5:(r=dg(t))?(t=r,O5):Ase)(e,t)}function jZe(e){return function(){this.removeAttribute(e)}}function IZe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function FZe(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function OZe(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function DZe(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function PZe(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function RZe(e,t){var r=gk(e),n=r==="transform"?ZUe:Ple;return this.attrTween(e,typeof t=="function"?(r.local?PZe:DZe)(r,n,B8(this,"attr."+e,t)):t==null?(r.local?IZe:jZe)(r):(r.local?OZe:FZe)(r,n,t))}function LZe(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function MZe(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function UZe(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&MZe(e,s)),r}return a._value=t,a}function QZe(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&LZe(e,s)),r}return a._value=t,a}function HZe(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=gk(e);return this.tween(r,(n.local?UZe:QZe)(n,t))}function VZe(e,t){return function(){k8(this,e).delay=+t.apply(this,arguments)}}function zZe(e,t){return t=+t,function(){k8(this,e).delay=t}}function $Ze(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?VZe:zZe)(t,e)):Qd(this.node(),t).delay}function GZe(e,t){return function(){ef(this,e).duration=+t.apply(this,arguments)}}function KZe(e,t){return t=+t,function(){ef(this,e).duration=t}}function qZe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?GZe:KZe)(t,e)):Qd(this.node(),t).duration}function WZe(e,t){if(typeof t!="function")throw new Error;return function(){ef(this,e).ease=t}}function XZe(e){var t=this._id;return arguments.length?this.each(WZe(t,e)):Qd(this.node(),t).ease}function YZe(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;ef(this,e).ease=r}}function JZe(e){if(typeof e!="function")throw new Error;return this.each(YZe(this._id,e))}function ZZe(e){typeof e!="function"&&(e=ble(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new Eh(n,this._parents,this._name,this._id)}function eet(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var c=t[o],u=r[o],d=c.length,f=i[o]=new Array(d),h,p=0;p<d;++p)(h=c[p]||u[p])&&(f[p]=h);for(;o<n;++o)i[o]=t[o];return new Eh(i,this._parents,this._name,this._id)}function tet(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function ret(e,t,r){var n,a,s=tet(t)?k8:ef;return function(){var i=s(this,e),o=i.on;o!==n&&(a=(n=o).copy()).on(t,r),i.on=a}}function net(e,t){var r=this._id;return arguments.length<2?Qd(this.node(),r).on.on(e):this.each(ret(r,e,t))}function aet(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function set(){return this.on("end.remove",aet(this._id))}function iet(e){var t=this._name,r=this._id;typeof e!="function"&&(e=_8(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],c=o.length,u=s[i]=new Array(c),d,f,h=0;h<c;++h)(d=o[h])&&(f=e.call(d,d.__data__,h,o))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,vk(u[h],t,r,h,u,Qd(d,r)));return new Eh(s,this._parents,t,r)}function oet(e){var t=this._name,r=this._id;typeof e!="function"&&(e=vle(e));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var c=n[o],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),p,g=Qd(d,r),x=0,b=h.length;x<b;++x)(p=h[x])&&vk(p,t,r,x,h,g);s.push(h),i.push(d)}return new Eh(s,i,t,r)}var cet=eE.prototype.constructor;function uet(){return new cet(this._groups,this._parents)}function det(e,t){var r,n,a;return function(){var s=c1(this,e),i=(this.style.removeProperty(e),c1(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function Rle(e){return function(){this.style.removeProperty(e)}}function Aet(e,t,r){var n,a=r+"",s;return function(){var i=c1(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function fet(e,t,r){var n,a,s;return function(){var i=c1(this,e),o=r(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),c1(this,e))),i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o))}}function het(e,t){var r,n,a,s="style."+t,i="end."+s,o;return function(){var c=ef(this,e),u=c.on,d=c.value[s]==null?o||(o=Rle(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),c.on=n}}function met(e,t,r){var n=(e+="")=="transform"?JUe:Ple;return t==null?this.styleTween(e,det(e,n)).on("end.style."+e,Rle(e)):typeof t=="function"?this.styleTween(e,fet(e,n,B8(this,"style."+e,t))).each(het(this._id,e)):this.styleTween(e,Aet(e,n,t),r).on("end.style."+e,null)}function pet(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function get(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&pet(e,i,r)),n}return s._value=t,s}function xet(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,get(e,t,r??""))}function vet(e){return function(){this.textContent=e}}function bet(e){return function(){var t=e(this);this.textContent=t??""}}function yet(e){return this.tween("text",typeof e=="function"?bet(B8(this,"text",e)):vet(e==null?"":e+""))}function wet(e){return function(t){this.textContent=e.call(this,t)}}function Eet(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&wet(a)),t}return n._value=e,n}function Cet(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Eet(e))}function _et(){for(var e=this._name,t=this._id,r=Lle(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)if(c=i[u]){var d=Qd(c,t);vk(c,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Eh(n,this._parents,e,r)}function Net(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},c={value:function(){--a===0&&s()}};r.each(function(){var u=ef(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),u.on=t}),a===0&&s()})}var ket=0;function Eh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Lle(){return++ket}var Df=eE.prototype;Eh.prototype={constructor:Eh,select:iet,selectAll:oet,selectChild:Df.selectChild,selectChildren:Df.selectChildren,filter:ZZe,merge:eet,selection:uet,transition:_et,call:Df.call,nodes:Df.nodes,node:Df.node,size:Df.size,empty:Df.empty,each:Df.each,on:net,attr:RZe,attrTween:HZe,style:met,styleTween:xet,text:yet,textTween:Cet,remove:set,tween:TZe,delay:$Ze,duration:qZe,ease:XZe,easeVarying:JZe,end:Net,[Symbol.iterator]:Df[Symbol.iterator]};function Bet(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Tet={time:null,delay:0,duration:250,ease:Bet};function jet(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Iet(e){var t,r;e instanceof Eh?(t=e._id,e=e._name):(t=Lle(),(r=Tet).time=N8(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&vk(c,e,t,u,i,r||jet(c,t));return new Eh(n,this._parents,e,t)}eE.prototype.interrupt=NZe;eE.prototype.transition=Iet;const WC=e=>()=>e;function Fet(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Xf(e,t,r){this.k=e,this.x=t,this.y=r}Xf.prototype={constructor:Xf,scale:function(e){return e===1?this:new Xf(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Xf(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rm=new Xf(1,0,0);Xf.prototype;function Zj(e){e.stopImmediatePropagation()}function Jb(e){e.preventDefault(),e.stopImmediatePropagation()}function Oet(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Det(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function mq(){return this.__zoom||rm}function Pet(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ret(){return navigator.maxTouchPoints||"ontouchstart"in this}function Let(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Met(){var e=Oet,t=Det,r=Let,n=Pet,a=Ret,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,c=n7e,u=pk("start","zoom","end"),d,f,h,p=500,g=150,x=0,b=10;function y(R){R.property("__zoom",mq).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",P).filter(a).on("touchstart.zoom",D).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(R,Y,H,X){var V=R.selection?R.selection():R;V.property("__zoom",mq),R!==V?N(R,Y,H,X):V.interrupt().each(function(){F(this,arguments).event(X).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},y.scaleBy=function(R,Y,H,X){y.scaleTo(R,function(){var V=this.__zoom.k,z=typeof Y=="function"?Y.apply(this,arguments):Y;return V*z},H,X)},y.scaleTo=function(R,Y,H,X){y.transform(R,function(){var V=t.apply(this,arguments),z=this.__zoom,q=H==null?j(V):typeof H=="function"?H.apply(this,arguments):H,ne=z.invert(q),M=typeof Y=="function"?Y.apply(this,arguments):Y;return r(S(w(z,M),q,ne),V,i)},H,X)},y.translateBy=function(R,Y,H,X){y.transform(R,function(){return r(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof H=="function"?H.apply(this,arguments):H),t.apply(this,arguments),i)},null,X)},y.translateTo=function(R,Y,H,X,V){y.transform(R,function(){var z=t.apply(this,arguments),q=this.__zoom,ne=X==null?j(z):typeof X=="function"?X.apply(this,arguments):X;return r(rm.translate(ne[0],ne[1]).scale(q.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof H=="function"?-H.apply(this,arguments):-H),z,i)},X,V)};function w(R,Y){return Y=Math.max(s[0],Math.min(s[1],Y)),Y===R.k?R:new Xf(Y,R.x,R.y)}function S(R,Y,H){var X=Y[0]-H[0]*R.k,V=Y[1]-H[1]*R.k;return X===R.x&&V===R.y?R:new Xf(R.k,X,V)}function j(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function N(R,Y,H,X){R.on("start.zoom",function(){F(this,arguments).event(X).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(X).end()}).tween("zoom",function(){var V=this,z=arguments,q=F(V,z).event(X),ne=t.apply(V,z),M=H==null?j(ne):typeof H=="function"?H.apply(V,z):H,W=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),Z=V.__zoom,re=typeof Y=="function"?Y.apply(V,z):Y,ae=c(Z.invert(M).concat(W/Z.k),re.invert(M).concat(W/re.k));return function(ce){if(ce===1)ce=re;else{var oe=ae(ce),le=W/oe[2];ce=new Xf(le,M[0]-oe[0]*le,M[1]-oe[1]*le)}q.zoom(null,ce)}})}function F(R,Y,H){return!H&&R.__zooming||new E(R,Y)}function E(R,Y){this.that=R,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,Y),this.taps=0}E.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,Y){return this.mouse&&R!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var Y=Su(this.that).datum();u.call(R,this.that,new Fet(R,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),Y)}};function _(R,...Y){if(!e.apply(this,arguments))return;var H=F(this,Y).event(R),X=this.__zoom,V=Math.max(s[0],Math.min(s[1],X.k*Math.pow(2,n.apply(this,arguments)))),z=NA(R);if(H.wheel)(H.mouse[0][0]!==z[0]||H.mouse[0][1]!==z[1])&&(H.mouse[1]=X.invert(H.mouse[0]=z)),clearTimeout(H.wheel);else{if(X.k===V)return;H.mouse=[z,X.invert(z)],eS(this),H.start()}Jb(R),H.wheel=setTimeout(q,g),H.zoom("mouse",r(S(w(X,V),H.mouse[0],H.mouse[1]),H.extent,i));function q(){H.wheel=null,H.end()}}function B(R,...Y){if(h||!e.apply(this,arguments))return;var H=R.currentTarget,X=F(this,Y,!0).event(R),V=Su(R.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",W,!0),z=NA(R,H),q=R.clientX,ne=R.clientY;Tle(R.view),Zj(R),X.mouse=[z,this.__zoom.invert(z)],eS(this),X.start();function M(Z){if(Jb(Z),!X.moved){var re=Z.clientX-q,ae=Z.clientY-ne;X.moved=re*re+ae*ae>x}X.event(Z).zoom("mouse",r(S(X.that.__zoom,X.mouse[0]=NA(Z,H),X.mouse[1]),X.extent,i))}function W(Z){V.on("mousemove.zoom mouseup.zoom",null),jle(Z.view,X.moved),Jb(Z),X.event(Z).end()}}function P(R,...Y){if(e.apply(this,arguments)){var H=this.__zoom,X=NA(R.changedTouches?R.changedTouches[0]:R,this),V=H.invert(X),z=H.k*(R.shiftKey?.5:2),q=r(S(w(H,z),X,V),t.apply(this,Y),i);Jb(R),o>0?Su(this).transition().duration(o).call(N,q,X,R):Su(this).call(y.transform,q,X,R)}}function D(R,...Y){if(e.apply(this,arguments)){var H=R.touches,X=H.length,V=F(this,Y,R.changedTouches.length===X).event(R),z,q,ne,M;for(Zj(R),q=0;q<X;++q)ne=H[q],M=NA(ne,this),M=[M,this.__zoom.invert(M),ne.identifier],V.touch0?!V.touch1&&V.touch0[2]!==M[2]&&(V.touch1=M,V.taps=0):(V.touch0=M,z=!0,V.taps=1+!!d);d&&(d=clearTimeout(d)),z&&(V.taps<2&&(f=M[0],d=setTimeout(function(){d=null},p)),eS(this),V.start())}}function I(R,...Y){if(this.__zooming){var H=F(this,Y).event(R),X=R.changedTouches,V=X.length,z,q,ne,M;for(Jb(R),z=0;z<V;++z)q=X[z],ne=NA(q,this),H.touch0&&H.touch0[2]===q.identifier?H.touch0[0]=ne:H.touch1&&H.touch1[2]===q.identifier&&(H.touch1[0]=ne);if(q=H.that.__zoom,H.touch1){var W=H.touch0[0],Z=H.touch0[1],re=H.touch1[0],ae=H.touch1[1],ce=(ce=re[0]-W[0])*ce+(ce=re[1]-W[1])*ce,oe=(oe=ae[0]-Z[0])*oe+(oe=ae[1]-Z[1])*oe;q=w(q,Math.sqrt(ce/oe)),ne=[(W[0]+re[0])/2,(W[1]+re[1])/2],M=[(Z[0]+ae[0])/2,(Z[1]+ae[1])/2]}else if(H.touch0)ne=H.touch0[0],M=H.touch0[1];else return;H.zoom("touch",r(S(q,ne,M),H.extent,i))}}function U(R,...Y){if(this.__zooming){var H=F(this,Y).event(R),X=R.changedTouches,V=X.length,z,q;for(Zj(R),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),z=0;z<V;++z)q=X[z],H.touch0&&H.touch0[2]===q.identifier?delete H.touch0:H.touch1&&H.touch1[2]===q.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(q=NA(q,this),Math.hypot(f[0]-q[0],f[1]-q[1])<b)){var ne=Su(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return y.wheelDelta=function(R){return arguments.length?(n=typeof R=="function"?R:WC(+R),y):n},y.filter=function(R){return arguments.length?(e=typeof R=="function"?R:WC(!!R),y):e},y.touchable=function(R){return arguments.length?(a=typeof R=="function"?R:WC(!!R),y):a},y.extent=function(R){return arguments.length?(t=typeof R=="function"?R:WC([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),y):t},y.scaleExtent=function(R){return arguments.length?(s[0]=+R[0],s[1]=+R[1],y):[s[0],s[1]]},y.translateExtent=function(R){return arguments.length?(i[0][0]=+R[0][0],i[1][0]=+R[1][0],i[0][1]=+R[0][1],i[1][1]=+R[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(R){return arguments.length?(r=R,y):r},y.duration=function(R){return arguments.length?(o=+R,y):o},y.interpolate=function(R){return arguments.length?(c=R,y):c},y.on=function(){var R=u.on.apply(u,arguments);return R===u?y:R},y.clickDistance=function(R){return arguments.length?(x=(R=+R)*R,y):Math.sqrt(x)},y.tapDistance=function(R){return arguments.length?(b=+R,y):b},y}const bk=k.createContext(null),Uet=bk.Provider,Ch={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Mle=Ch.error001();function us(e,t){const r=k.useContext(bk);if(r===null)throw new Error(Mle);return gle(r,e,t)}const Zi=()=>{const e=k.useContext(bk);if(e===null)throw new Error(Mle);return k.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Qet=e=>e.userSelectionActive?"none":"all";function Ule({position:e,children:t,className:r,style:n,...a}){const s=us(Qet),i=`${e}`.split("-");return ct.createElement("div",{className:wl(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function Het({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:ct.createElement(Ule,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ct.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Vet=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:c,className:u,...d})=>{const f=k.useRef(null),[h,p]=k.useState({x:0,y:0,width:0,height:0}),g=wl(["react-flow__edge-textwrapper",u]);return k.useEffect(()=>{if(f.current){const x=f.current.getBBox();p({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:ct.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&ct.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),ct.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),c)};var zet=k.memo(Vet);const T8=e=>({width:e.offsetWidth,height:e.offsetHeight}),d1=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),j8=(e={x:0,y:0},t)=>({x:d1(e.x,t[0][0],t[1][0]),y:d1(e.y,t[0][1],t[1][1])}),pq=(e,t,r)=>e<t?d1(Math.abs(e-t),1,50)/50:e>r?-d1(Math.abs(e-r),1,50)/50:0,Qle=(e,t)=>{const r=pq(e.x,35,t.width-35)*20,n=pq(e.y,35,t.height-35)*20;return[r,n]},Hle=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},$et=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),I8=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),Get=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),gq=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),nO=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},Ket=e=>Tu(e.width)&&Tu(e.height)&&Tu(e.x)&&Tu(e.y),Tu=e=>!isNaN(e)&&isFinite(e),Ss=Symbol.for("internals"),Vle=["Enter"," ","Escape"],qet=(e,t)=>{},Wet=e=>"nativeEvent"in e;function aO(e){var a,s;const t=Wet(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const zle=e=>"clientX"in e,nm=(e,t)=>{var s,i;const r=zle(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},aN=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},tE=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p=20})=>ct.createElement(ct.Fragment,null,ct.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&ct.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&Tu(r)&&Tu(n)?ct.createElement(zet,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u}):null);tE.displayName="BaseEdge";function Zb(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function $le({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,o=n<t?n+i:n-i;return[s,o,a,i]}function Gle({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const c=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+o*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var hg;(function(e){e.Strict="strict",e.Loose="loose"})(hg||(hg={}));var Ip;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ip||(Ip={}));var a2;(function(e){e.Partial="partial",e.Full="full"})(a2||(a2={}));var P0;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(P0||(P0={}));var sN;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(sN||(sN={}));var Er;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Er||(Er={}));function xq({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===Er.Left||e===Er.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function Kle({sourceX:e,sourceY:t,sourcePosition:r=Er.Bottom,targetX:n,targetY:a,targetPosition:s=Er.Top}){const[i,o]=xq({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=xq({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,p]=Gle({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${o} ${c},${u} ${n},${a}`,d,f,h,p]}const F8=k.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Er.Bottom,targetPosition:s=Er.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:x})=>{const[b,y,w]=Kle({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return ct.createElement(tE,{path:b,labelX:y,labelY:w,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:x})});F8.displayName="SimpleBezierEdge";const vq={[Er.Left]:{x:-1,y:0},[Er.Right]:{x:1,y:0},[Er.Top]:{x:0,y:-1},[Er.Bottom]:{x:0,y:1}},Xet=({source:e,sourcePosition:t=Er.Bottom,target:r})=>t===Er.Left||t===Er.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},bq=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Yet({source:e,sourcePosition:t=Er.Bottom,target:r,targetPosition:n=Er.Top,center:a,offset:s}){const i=vq[t],o=vq[n],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=Xet({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let p=[],g,x;const b={x:0,y:0},y={x:0,y:0},[w,S,j,N]=$le({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[f]*o[f]===-1){g=a.x??w,x=a.y??S;const E=[{x:g,y:c.y},{x:g,y:u.y}],_=[{x:c.x,y:x},{x:u.x,y:x}];i[f]===h?p=f==="x"?E:_:p=f==="x"?_:E}else{const E=[{x:c.x,y:u.y}],_=[{x:u.x,y:c.y}];if(f==="x"?p=i.x===h?_:E:p=i.y===h?E:_,t===n){const U=Math.abs(e[f]-r[f]);if(U<=s){const R=Math.min(s-1,s-U);i[f]===h?b[f]=(c[f]>e[f]?-1:1)*R:y[f]=(u[f]>r[f]?-1:1)*R}}if(t!==n){const U=f==="x"?"y":"x",R=i[f]===o[U],Y=c[U]>u[U],H=c[U]<u[U];(i[f]===1&&(!R&&Y||R&&H)||i[f]!==1&&(!R&&H||R&&Y))&&(p=f==="x"?E:_)}const B={x:c.x+b.x,y:c.y+b.y},P={x:u.x+y.x,y:u.y+y.y},D=Math.max(Math.abs(B.x-p[0].x),Math.abs(P.x-p[0].x)),I=Math.max(Math.abs(B.y-p[0].y),Math.abs(P.y-p[0].y));D>=I?(g=(B.x+P.x)/2,x=p[0].y):(g=p[0].x,x=(B.y+P.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...p,{x:u.x+y.x,y:u.y+y.y},r],g,x,j,N]}function Jet(e,t,r,n){const a=Math.min(bq(e,t)/2,bq(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${i+a*c}Q ${s},${i} ${s+a*o},${i}`}function sO({sourceX:e,sourceY:t,sourcePosition:r=Er.Bottom,targetX:n,targetY:a,targetPosition:s=Er.Top,borderRadius:i=5,centerX:o,centerY:c,offset:u=20}){const[d,f,h,p,g]=Yet({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:c},offset:u});return[d.reduce((b,y,w)=>{let S="";return w>0&&w<d.length-1?S=Jet(d[w-1],y,d[w+1],i):S=`${w===0?"M":"L"}${y.x} ${y.y}`,b+=S,b},""),f,h,p,g]}const yk=k.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=Er.Bottom,targetPosition:h=Er.Top,markerEnd:p,markerStart:g,pathOptions:x,interactionWidth:b})=>{const[y,w,S]=sO({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return ct.createElement(tE,{path:y,labelX:w,labelY:S,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:g,interactionWidth:b})});yk.displayName="SmoothStepEdge";const O8=k.memo(e=>{var t;return ct.createElement(yk,{...e,pathOptions:k.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});O8.displayName="StepEdge";function Zet({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,o]=$le({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,o]}const D8=k.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[g,x,b]=Zet({sourceX:e,sourceY:t,targetX:r,targetY:n});return ct.createElement(tE,{path:g,labelX:x,labelY:b,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})});D8.displayName="StraightEdge";function XC(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function yq({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case Er.Left:return[t-XC(t-n,s),r];case Er.Right:return[t+XC(n-t,s),r];case Er.Top:return[t,r-XC(r-a,s)];case Er.Bottom:return[t,r+XC(a-r,s)]}}function qle({sourceX:e,sourceY:t,sourcePosition:r=Er.Bottom,targetX:n,targetY:a,targetPosition:s=Er.Top,curvature:i=.25}){const[o,c]=yq({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=yq({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[f,h,p,g]=Gle({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${c} ${u},${d} ${n},${a}`,f,h,p,g]}const iN=k.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Er.Bottom,targetPosition:s=Er.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,pathOptions:x,interactionWidth:b})=>{const[y,w,S]=qle({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return ct.createElement(tE,{path:y,labelX:w,labelY:S,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:b})});iN.displayName="BezierEdge";const P8=k.createContext(null),ett=P8.Provider;P8.Consumer;const ttt=()=>k.useContext(P8),rtt=e=>"id"in e&&"source"in e&&"target"in e,ntt=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,iO=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,att=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),stt=(e,t)=>{if(!e.source||!e.target)return t;let r;return rtt(e)?r={...e}:r={...e,id:ntt(e)},att(r,t)?t:t.concat(r)},oO=({x:e,y:t},[r,n,a],s,[i,o])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(c.x/i),y:o*Math.round(c.y/o)}:c},Wle=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Nv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},R8=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=Nv(a,t).positionAbsolute;return $et(n,I8({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Get(r)},Xle=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:p=!0,hidden:g=!1}=d;if(i&&!p||g)return!1;const{positionAbsolute:x}=Nv(d,o),b={x:x.x,y:x.y,width:f||0,height:h||0},y=nO(c,b),w=typeof f>"u"||typeof h>"u"||f===null||h===null,S=s&&y>0,j=(f||0)*(h||0);(w||S||y>=j||d.dragging)&&u.push(d)}),u},Yle=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},Jle=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),o=r/(e.height*(1+s)),c=Math.min(i,o),u=d1(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,p=r/2-f*u;return{x:h,y:p,zoom:u}},vp=(e,t=0)=>e.transition().duration(t);function wq(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,o;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function itt(e,t,r,n,a,s){const{x:i,y:o}=nm(e),u=t.elementsFromPoint(i,o).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=L8(void 0,u),b=u.getAttribute("data-handleid"),y=s({nodeId:g,id:b,type:x});if(y){const w=a.find(S=>S.nodeId===g&&S.type===x&&S.id===b);return{handle:{id:b,type:x,nodeId:g,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const b=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:b}]:x===f&&d.push({handle:g,validHandleResult:b}),f=x)}}),!d.length)return{handle:null,validHandleResult:Zle()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),p=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>p?g.type==="target":h?x.isValid:!0)||d[0]}const ott={source:null,target:null,sourceHandle:null,targetHandle:null},Zle=()=>({handleDomNode:null,isValid:!1,connection:ott,endHandle:null});function ece(e,t,r,n,a,s,i){const o=a==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Zle(),handleDomNode:c};if(c){const d=L8(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:o?f:r,sourceHandle:o?h:n,target:o?r:f,targetHandle:o?n:h};u.connection=x,p&&g&&(t===hg.Strict?o&&d==="source"||!o&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(x))}return u}function ltt({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Ss]){const{handleBounds:i}=s[Ss];let o=[],c=[];i&&(o=wq(s,i,"source",`${t}-${r}-${n}`),c=wq(s,i,"target",`${t}-${r}-${n}`)),a.push(...o,...c)}return a},[])}function L8(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function eI(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function ctt(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function tce({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:c,onReconnectEnd:u}){const d=Hle(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:p,connectionRadius:g,onConnectStart:x,panBy:b,getNodes:y,cancelConnection:w}=s();let S=0,j;const{x:N,y:F}=nm(e),E=d==null?void 0:d.elementFromPoint(N,F),_=L8(c,E),B=h==null?void 0:h.getBoundingClientRect();if(!B||!_)return;let P,D=nm(e,B),I=!1,U=null,R=!1,Y=null;const H=ltt({nodes:y(),nodeId:r,handleId:t,handleType:_}),X=()=>{if(!p)return;const[q,ne]=Qle(D,B);b({x:q,y:ne}),S=requestAnimationFrame(X)};i({connectionPosition:D,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:_,connectionStartHandle:{nodeId:r,handleId:t,type:_},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:_});function V(q){const{transform:ne}=s();D=nm(q,B);const{handle:M,validHandleResult:W}=itt(q,d,oO(D,ne,!1,[1,1]),g,H,Z=>ece(Z,f,r,t,a?"target":"source",o,d));if(j=M,I||(X(),I=!0),Y=W.handleDomNode,U=W.connection,R=W.isValid,i({connectionPosition:j&&R?Wle({x:j.x,y:j.y},ne):D,connectionStatus:ctt(!!j,R),connectionEndHandle:W.endHandle}),!j&&!R&&!Y)return eI(P);U.source!==U.target&&Y&&(eI(P),P=Y,Y.classList.add("connecting","react-flow__handle-connecting"),Y.classList.toggle("valid",R),Y.classList.toggle("react-flow__handle-valid",R))}function z(q){var ne,M;(j||Y)&&U&&R&&(n==null||n(U)),(M=(ne=s()).onConnectEnd)==null||M.call(ne,q),c&&(u==null||u(q)),eI(P),w(),cancelAnimationFrame(S),I=!1,R=!1,U=null,Y=null,d.removeEventListener("mousemove",V),d.removeEventListener("mouseup",z),d.removeEventListener("touchmove",V),d.removeEventListener("touchend",z)}d.addEventListener("mousemove",V),d.addEventListener("mouseup",z),d.addEventListener("touchmove",V),d.addEventListener("touchend",z)}const Eq=()=>!0,utt=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),dtt=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},rce=k.forwardRef(({type:e="source",position:t=Er.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},p)=>{var B,P;const g=i||null,x=e==="target",b=Zi(),y=ttt(),{connectOnClick:w,noPanClassName:S}=us(utt,rl),{connecting:j,clickConnecting:N}=us(dtt(y,g,e),rl);y||(P=(B=b.getState()).onError)==null||P.call(B,"010",Ch.error010());const F=D=>{const{defaultEdgeOptions:I,onConnect:U,hasDefaultEdges:R}=b.getState(),Y={...I,...D};if(R){const{edges:H,setEdges:X}=b.getState();X(stt(Y,H))}U==null||U(Y),o==null||o(Y)},E=D=>{if(!y)return;const I=zle(D);a&&(I&&D.button===0||!I)&&tce({event:D,handleId:g,nodeId:y,onConnect:F,isTarget:x,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||Eq}),I?d==null||d(D):f==null||f(D)},_=D=>{const{onClickConnectStart:I,onClickConnectEnd:U,connectionClickStartHandle:R,connectionMode:Y,isValidConnection:H}=b.getState();if(!y||!R&&!a)return;if(!R){I==null||I(D,{nodeId:y,handleId:g,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const X=Hle(D.target),V=r||H||Eq,{connection:z,isValid:q}=ece({nodeId:y,id:g,type:e},Y,R.nodeId,R.handleId||null,R.type,V,X);q&&F(z),U==null||U(D),b.setState({connectionClickStartHandle:null})};return ct.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:wl(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:N,connectionindicator:n&&(a&&!j||s&&j)}]),onMouseDown:E,onTouchStart:E,onClick:w?_:void 0,ref:p,...h},c)});rce.displayName="Handle";var A1=k.memo(rce);const nce=({data:e,isConnectable:t,targetPosition:r=Er.Top,sourcePosition:n=Er.Bottom})=>ct.createElement(ct.Fragment,null,ct.createElement(A1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,ct.createElement(A1,{type:"source",position:n,isConnectable:t}));nce.displayName="DefaultNode";var lO=k.memo(nce);const ace=({data:e,isConnectable:t,sourcePosition:r=Er.Bottom})=>ct.createElement(ct.Fragment,null,e==null?void 0:e.label,ct.createElement(A1,{type:"source",position:r,isConnectable:t}));ace.displayName="InputNode";var sce=k.memo(ace);const ice=({data:e,isConnectable:t,targetPosition:r=Er.Top})=>ct.createElement(ct.Fragment,null,ct.createElement(A1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);ice.displayName="OutputNode";var oce=k.memo(ice);const M8=()=>null;M8.displayName="GroupNode";const Att=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),YC=e=>e.id;function ftt(e,t){return rl(e.selectedNodes.map(YC),t.selectedNodes.map(YC))&&rl(e.selectedEdges.map(YC),t.selectedEdges.map(YC))}const lce=k.memo(({onSelectionChange:e})=>{const t=Zi(),{selectedNodes:r,selectedEdges:n}=us(Att,ftt);return k.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});lce.displayName="SelectionListener";const htt=e=>!!e.onSelectionChange;function mtt({onSelectionChange:e}){const t=us(htt);return e||t?ct.createElement(lce,{onSelectionChange:e}):null}const ptt=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function wx(e,t){k.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function wn(e,t,r){k.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const gtt=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:g,minZoom:x,maxZoom:b,nodeExtent:y,onNodesChange:w,onEdgesChange:S,elementsSelectable:j,connectionMode:N,snapGrid:F,snapToGrid:E,translateExtent:_,connectOnClick:B,defaultEdgeOptions:P,fitView:D,fitViewOptions:I,onNodesDelete:U,onEdgesDelete:R,onNodeDrag:Y,onNodeDragStart:H,onNodeDragStop:X,onSelectionDrag:V,onSelectionDragStart:z,onSelectionDragStop:q,noPanClassName:ne,nodeOrigin:M,rfId:W,autoPanOnConnect:Z,autoPanOnNodeDrag:re,onError:ae,connectionRadius:ce,isValidConnection:oe,nodeDragThreshold:le})=>{const{setNodes:pe,setEdges:Be,setDefaultNodesAndEdges:te,setMinZoom:_e,setMaxZoom:De,setTranslateExtent:Ne,setNodeExtent:fe,reset:Ie}=us(ptt,rl),Ue=Zi();return k.useEffect(()=>{const Ye=n==null?void 0:n.map(ye=>({...ye,...P}));return te(r,Ye),()=>{Ie()}},[]),wn("defaultEdgeOptions",P,Ue.setState),wn("connectionMode",N,Ue.setState),wn("onConnect",a,Ue.setState),wn("onConnectStart",s,Ue.setState),wn("onConnectEnd",i,Ue.setState),wn("onClickConnectStart",o,Ue.setState),wn("onClickConnectEnd",c,Ue.setState),wn("nodesDraggable",u,Ue.setState),wn("nodesConnectable",d,Ue.setState),wn("nodesFocusable",f,Ue.setState),wn("edgesFocusable",h,Ue.setState),wn("edgesUpdatable",p,Ue.setState),wn("elementsSelectable",j,Ue.setState),wn("elevateNodesOnSelect",g,Ue.setState),wn("snapToGrid",E,Ue.setState),wn("snapGrid",F,Ue.setState),wn("onNodesChange",w,Ue.setState),wn("onEdgesChange",S,Ue.setState),wn("connectOnClick",B,Ue.setState),wn("fitViewOnInit",D,Ue.setState),wn("fitViewOnInitOptions",I,Ue.setState),wn("onNodesDelete",U,Ue.setState),wn("onEdgesDelete",R,Ue.setState),wn("onNodeDrag",Y,Ue.setState),wn("onNodeDragStart",H,Ue.setState),wn("onNodeDragStop",X,Ue.setState),wn("onSelectionDrag",V,Ue.setState),wn("onSelectionDragStart",z,Ue.setState),wn("onSelectionDragStop",q,Ue.setState),wn("noPanClassName",ne,Ue.setState),wn("nodeOrigin",M,Ue.setState),wn("rfId",W,Ue.setState),wn("autoPanOnConnect",Z,Ue.setState),wn("autoPanOnNodeDrag",re,Ue.setState),wn("onError",ae,Ue.setState),wn("connectionRadius",ce,Ue.setState),wn("isValidConnection",oe,Ue.setState),wn("nodeDragThreshold",le,Ue.setState),wx(e,pe),wx(t,Be),wx(x,_e),wx(b,De),wx(_,Ne),wx(y,fe),null},Cq={display:"none"},xtt={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},cce="react-flow__node-desc",uce="react-flow__edge-desc",vtt="react-flow__aria-live",btt=e=>e.ariaLiveMessage;function ytt({rfId:e}){const t=us(btt);return ct.createElement("div",{id:`${vtt}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:xtt},t)}function wtt({rfId:e,disableKeyboardA11y:t}){return ct.createElement(ct.Fragment,null,ct.createElement("div",{id:`${cce}-${e}`,style:Cq},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ct.createElement("div",{id:`${uce}-${e}`,style:Cq},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ct.createElement(ytt,{rfId:e}))}var s2=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=k.useState(!1),a=k.useRef(!1),s=k.useRef(new Set([])),[i,o]=k.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return k.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=p=>{if(a.current=p.ctrlKey||p.metaKey||p.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&aO(p))return!1;const x=Sq(p.code,o);s.current.add(p[x]),_q(i,s.current,!1)&&(p.preventDefault(),n(!0))},f=p=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&aO(p))return!1;const x=Sq(p.code,o);_q(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(p[x]),p.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function _q(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function Sq(e,t){return t.includes(e)?"code":"key"}function dce(e,t,r,n){var o,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=Nv(s,n);return dce(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[Ss])==null?void 0:o.z)??0)>(r.z??0)?((c=s[Ss])==null?void 0:c.z)??0:r.z??0},n)}function Ace(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:c}=dce(n,e,{...n.position,z:((s=n[Ss])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:o},n[Ss].z=c,r!=null&&r[n.id]&&(n[Ss].isParent=!0)}})}function tI(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(o=>{var p;const c=(Tu(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=t.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},f=o.parentNode||o.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Ss,{enumerable:!1,value:{handleBounds:h||(p=u==null?void 0:u[Ss])==null?void 0:p.handleBounds,z:c}}),a.set(o.id,d)}),Ace(a,r,s),a}function fce(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(o&&c&&(h||!t.initial)){const g=r().filter(b=>{var w;const y=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(w=t.nodes)!=null&&w.length?y&&t.nodes.some(S=>S.id===b.id):y}),x=g.every(b=>b.width&&b.height);if(g.length>0&&x){const b=R8(g,f),{x:y,y:w,zoom:S}=Jle(b,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),j=rm.translate(y,w).scale(S);return typeof t.duration=="number"&&t.duration>0?o.transform(vp(c,t.duration),j):o.transform(c,j),!0}}return!1}function Ett(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Ss]:n[Ss],selected:r.selected})}),new Map(t)}function Ctt(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function JC({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:Ett(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:Ctt(t,s)}),o==null||o(t))}const Ex=()=>{},_tt={zoomIn:Ex,zoomOut:Ex,zoomTo:Ex,getZoom:()=>1,setViewport:Ex,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ex,fitBounds:Ex,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Stt=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Ntt=()=>{const e=Zi(),{d3Zoom:t,d3Selection:r}=us(Stt,rl);return k.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(vp(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(vp(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(vp(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,o,c]=e.getState().transform,u=rm.translate(a.x??i,a.y??o).scale(a.zoom??c);t.transform(vp(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>fce(e.getState,a),setCenter:(a,s,i)=>{const{width:o,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=o/2-a*d,h=c/2-s*d,p=rm.translate(f,h).scale(d);t.transform(vp(r,i==null?void 0:i.duration),p)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=Jle(a,i,o,c,u,(s==null?void 0:s.padding)??.1),p=rm.translate(d,f).scale(h);t.transform(vp(r,s==null?void 0:s.duration),p)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),oO(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return oO(f,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:o,y:c}=i.getBoundingClientRect(),u=Wle(a,s);return{x:u.x+o,y:u.y+c}},viewportInitialized:!0}:_tt,[t,r])};function wk(){const e=Ntt(),t=Zi(),r=k.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=k.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=k.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(b=>({...b}))},[]),s=k.useCallback(x=>{const{edges:b=[]}=t.getState();return b.find(y=>y.id===x)},[]),i=k.useCallback(x=>{const{getNodes:b,setNodes:y,hasDefaultNodes:w,onNodesChange:S}=t.getState(),j=b(),N=typeof x=="function"?x(j):x;if(w)y(N);else if(S){const F=N.length===0?j.map(E=>({type:"remove",id:E.id})):N.map(E=>({item:E,type:"reset"}));S(F)}},[]),o=k.useCallback(x=>{const{edges:b=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:S}=t.getState(),j=typeof x=="function"?x(b):x;if(w)y(j);else if(S){const N=j.length===0?b.map(F=>({type:"remove",id:F.id})):j.map(F=>({item:F,type:"reset"}));S(N)}},[]),c=k.useCallback(x=>{const b=Array.isArray(x)?x:[x],{getNodes:y,setNodes:w,hasDefaultNodes:S,onNodesChange:j}=t.getState();if(S){const F=[...y(),...b];w(F)}else if(j){const N=b.map(F=>({item:F,type:"add"}));j(N)}},[]),u=k.useCallback(x=>{const b=Array.isArray(x)?x:[x],{edges:y=[],setEdges:w,hasDefaultEdges:S,onEdgesChange:j}=t.getState();if(S)w([...y,...b]);else if(j){const N=b.map(F=>({item:F,type:"add"}));j(N)}},[]),d=k.useCallback(()=>{const{getNodes:x,edges:b=[],transform:y}=t.getState(),[w,S,j]=y;return{nodes:x().map(N=>({...N})),edges:b.map(N=>({...N})),viewport:{x:w,y:S,zoom:j}}},[]),f=k.useCallback(({nodes:x,edges:b})=>{const{nodeInternals:y,getNodes:w,edges:S,hasDefaultNodes:j,hasDefaultEdges:N,onNodesDelete:F,onEdgesDelete:E,onNodesChange:_,onEdgesChange:B}=t.getState(),P=(x||[]).map(Y=>Y.id),D=(b||[]).map(Y=>Y.id),I=w().reduce((Y,H)=>{const X=H.parentNode||H.parentId,V=!P.includes(H.id)&&X&&Y.find(q=>q.id===X);return(typeof H.deletable=="boolean"?H.deletable:!0)&&(P.includes(H.id)||V)&&Y.push(H),Y},[]),U=S.filter(Y=>typeof Y.deletable=="boolean"?Y.deletable:!0),R=U.filter(Y=>D.includes(Y.id));if(I||R){const Y=Yle(I,U),H=[...R,...Y],X=H.reduce((V,z)=>(V.includes(z.id)||V.push(z.id),V),[]);if((N||j)&&(N&&t.setState({edges:S.filter(V=>!X.includes(V.id))}),j&&(I.forEach(V=>{y.delete(V.id)}),t.setState({nodeInternals:new Map(y)}))),X.length>0&&(E==null||E(H),B&&B(X.map(V=>({id:V,type:"remove"})))),I.length>0&&(F==null||F(I),_)){const V=I.map(z=>({id:z.id,type:"remove"}));_(V)}}},[]),h=k.useCallback(x=>{const b=Ket(x),y=b?null:t.getState().nodeInternals.get(x.id);return!b&&!y?[null,null,b]:[b?x:gq(y),y,b]},[]),p=k.useCallback((x,b=!0,y)=>{const[w,S,j]=h(x);return w?(y||t.getState().getNodes()).filter(N=>{if(!j&&(N.id===S.id||!N.positionAbsolute))return!1;const F=gq(N),E=nO(F,w);return b&&E>0||E>=w.width*w.height}):[]},[]),g=k.useCallback((x,b,y=!0)=>{const[w]=h(x);if(!w)return!1;const S=nO(w,b);return y&&S>0||S>=w.width*w.height},[]);return k.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:g}),[e,r,n,a,s,i,o,c,u,d,f,p,g])}const ktt={actInsideInputWithModifier:!1};var Btt=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=Zi(),{deleteElements:n}=wk(),a=s2(e,ktt),s=s2(t);k.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),c=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),k.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function Ttt(e){const t=Zi();k.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=T8(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Ch.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const U8={position:"absolute",width:"100%",height:"100%",top:0,left:0},jtt=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,ZC=e=>({x:e.x,y:e.y,zoom:e.k}),Cx=(e,t)=>e.target.closest(`.${t}`),Nq=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),kq=e=>{const t=e.ctrlKey&&aN()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Itt=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Ftt=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=Ip.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:g,maxZoom:x,zoomActivationKeyCode:b,preventScrolling:y=!0,children:w,noWheelClassName:S,noPanClassName:j})=>{const N=k.useRef(),F=Zi(),E=k.useRef(!1),_=k.useRef(!1),B=k.useRef(null),P=k.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:I,d3ZoomHandler:U,userSelectionActive:R}=us(Itt,rl),Y=s2(b),H=k.useRef(0),X=k.useRef(!1),V=k.useRef();return Ttt(B),k.useEffect(()=>{if(B.current){const z=B.current.getBoundingClientRect(),q=Met().scaleExtent([g,x]).translateExtent(p),ne=Su(B.current).call(q),M=rm.translate(h.x,h.y).scale(d1(h.zoom,g,x)),W=[[0,0],[z.width,z.height]],Z=q.constrain()(M,W,p);q.transform(ne,Z),q.wheelDelta(kq),F.setState({d3Zoom:q,d3Selection:ne,d3ZoomHandler:ne.on("wheel.zoom"),transform:[Z.x,Z.y,Z.k],domNode:B.current.closest(".react-flow")})}},[]),k.useEffect(()=>{I&&D&&(i&&!Y&&!R?I.on("wheel.zoom",z=>{if(Cx(z,S))return!1;z.preventDefault(),z.stopImmediatePropagation();const q=I.property("__zoom").k||1;if(z.ctrlKey&&s){const oe=NA(z),le=kq(z),pe=q*Math.pow(2,le);D.scaleTo(I,pe,oe,z);return}const ne=z.deltaMode===1?20:1;let M=c===Ip.Vertical?0:z.deltaX*ne,W=c===Ip.Horizontal?0:z.deltaY*ne;!aN()&&z.shiftKey&&c!==Ip.Vertical&&(M=z.deltaY*ne,W=0),D.translateBy(I,-(M/q)*o,-(W/q)*o,{internal:!0});const Z=ZC(I.property("__zoom")),{onViewportChangeStart:re,onViewportChange:ae,onViewportChangeEnd:ce}=F.getState();clearTimeout(V.current),X.current||(X.current=!0,t==null||t(z,Z),re==null||re(Z)),X.current&&(e==null||e(z,Z),ae==null||ae(Z),V.current=setTimeout(()=>{r==null||r(z,Z),ce==null||ce(Z),X.current=!1},150))},{passive:!1}):typeof U<"u"&&I.on("wheel.zoom",function(z,q){if(!y&&z.type==="wheel"&&!z.ctrlKey||Cx(z,S))return null;z.preventDefault(),U.call(this,z,q)},{passive:!1}))},[R,i,c,I,D,U,Y,s,y,S,t,e,r]),k.useEffect(()=>{D&&D.on("start",z=>{var M,W;if(!z.sourceEvent||z.sourceEvent.internal)return null;H.current=(M=z.sourceEvent)==null?void 0:M.button;const{onViewportChangeStart:q}=F.getState(),ne=ZC(z.transform);E.current=!0,P.current=ne,((W=z.sourceEvent)==null?void 0:W.type)==="mousedown"&&F.setState({paneDragging:!0}),q==null||q(ne),t==null||t(z.sourceEvent,ne)})},[D,t]),k.useEffect(()=>{D&&(R&&!E.current?D.on("zoom",null):R||D.on("zoom",z=>{var ne;const{onViewportChange:q}=F.getState();if(F.setState({transform:[z.transform.x,z.transform.y,z.transform.k]}),_.current=!!(n&&Nq(f,H.current??0)),(e||q)&&!((ne=z.sourceEvent)!=null&&ne.internal)){const M=ZC(z.transform);q==null||q(M),e==null||e(z.sourceEvent,M)}}))},[R,D,e,f,n]),k.useEffect(()=>{D&&D.on("end",z=>{if(!z.sourceEvent||z.sourceEvent.internal)return null;const{onViewportChangeEnd:q}=F.getState();if(E.current=!1,F.setState({paneDragging:!1}),n&&Nq(f,H.current??0)&&!_.current&&n(z.sourceEvent),_.current=!1,(r||q)&&jtt(P.current,z.transform)){const ne=ZC(z.transform);P.current=ne,clearTimeout(N.current),N.current=setTimeout(()=>{q==null||q(ne),r==null||r(z.sourceEvent,ne)},i?150:0)}})},[D,i,f,r,n]),k.useEffect(()=>{D&&D.filter(z=>{const q=Y||a,ne=s&&z.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&z.button===1&&z.type==="mousedown"&&(Cx(z,"react-flow__node")||Cx(z,"react-flow__edge")))return!0;if(!f&&!q&&!i&&!u&&!s||R||!u&&z.type==="dblclick"||Cx(z,S)&&z.type==="wheel"||Cx(z,j)&&(z.type!=="wheel"||i&&z.type==="wheel"&&!Y)||!s&&z.ctrlKey&&z.type==="wheel"||!q&&!i&&!ne&&z.type==="wheel"||!f&&(z.type==="mousedown"||z.type==="touchstart")||Array.isArray(f)&&!f.includes(z.button)&&z.type==="mousedown")return!1;const M=Array.isArray(f)&&f.includes(z.button)||!z.button||z.button<=1;return(!z.ctrlKey||z.type==="wheel")&&M})},[R,D,a,s,i,u,f,d,Y]),ct.createElement("div",{className:"react-flow__renderer",ref:B,style:U8},w)},Ott=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Dtt(){const{userSelectionActive:e,userSelectionRect:t}=us(Ott,rl);return e&&t?ct.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Bq(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function hce(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&Bq(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&Bq(n,i);break}case"remove":return n}return n.push(i),n},r)}function mce(e,t){return hce(e,t)}function Ptt(e,t){return hce(e,t)}const B0=(e,t)=>({id:e,type:"select",selected:t});function av(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(B0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(B0(n.id,!1))),r},[])}const rI=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},Rtt=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),pce=k.memo(({isSelecting:e,selectionMode:t=a2.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=k.useRef(null),p=Zi(),g=k.useRef(0),x=k.useRef(0),b=k.useRef(),{userSelectionActive:y,elementsSelectable:w,dragging:S}=us(Rtt,rl),j=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},N=U=>{s==null||s(U),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},F=U=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){U.preventDefault();return}i==null||i(U)},E=o?U=>o(U):void 0,_=U=>{const{resetSelectedElements:R,domNode:Y}=p.getState();if(b.current=Y==null?void 0:Y.getBoundingClientRect(),!w||!e||U.button!==0||U.target!==h.current||!b.current)return;const{x:H,y:X}=nm(U,b.current);R(),p.setState({userSelectionRect:{width:0,height:0,startX:H,startY:X,x:H,y:X}}),n==null||n(U)},B=U=>{const{userSelectionRect:R,nodeInternals:Y,edges:H,transform:X,onNodesChange:V,onEdgesChange:z,nodeOrigin:q,getNodes:ne}=p.getState();if(!e||!b.current||!R)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const M=nm(U,b.current),W=R.startX??0,Z=R.startY??0,re={...R,x:M.x<W?M.x:W,y:M.y<Z?M.y:Z,width:Math.abs(M.x-W),height:Math.abs(M.y-Z)},ae=ne(),ce=Xle(Y,re,X,t===a2.Partial,!0,q),oe=Yle(ce,H).map(pe=>pe.id),le=ce.map(pe=>pe.id);if(g.current!==le.length){g.current=le.length;const pe=av(ae,le);pe.length&&(V==null||V(pe))}if(x.current!==oe.length){x.current=oe.length;const pe=av(H,oe);pe.length&&(z==null||z(pe))}p.setState({userSelectionRect:re})},P=U=>{if(U.button!==0)return;const{userSelectionRect:R}=p.getState();!y&&R&&U.target===h.current&&(N==null||N(U)),p.setState({nodesSelectionActive:g.current>0}),j(),a==null||a(U)},D=U=>{y&&(p.setState({nodesSelectionActive:g.current>0}),a==null||a(U)),j()},I=w&&(e||y);return ct.createElement("div",{className:wl(["react-flow__pane",{dragging:S,selection:e}]),onClick:I?void 0:rI(N,h),onContextMenu:rI(F,h),onWheel:rI(E,h),onMouseEnter:I?void 0:c,onMouseDown:I?_:void 0,onMouseMove:I?B:u,onMouseUp:I?P:void 0,onMouseLeave:I?D:d,ref:h,style:U8},f,ct.createElement(Dtt,null))});pce.displayName="Pane";function gce(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:gce(n,t):!1}function Tq(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function Ltt(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!gce(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function Mtt(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function xce(e,t,r,n,a=[0,0],s){const i=Mtt(e,e.extent||n);let o=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:p}=Nv(f,a).positionAbsolute;o=f&&Tu(h)&&Tu(p)&&Tu(f.width)&&Tu(f.height)?[[h+e.width*a[0],p+e.height*a[1]],[h+f.width-e.width+e.width*a[0],p+f.height-e.height+e.height*a[1]]]:o}else s==null||s("005",Ch.error005()),o=i;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:p}=Nv(f,a).positionAbsolute;o=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(c){const f=r.get(c);u=Nv(f,a).positionAbsolute}const d=o&&o!=="parent"?j8(t,o):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function nI({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const jq=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...T8(c)}})};function ey(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function cO({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:c}=t.getState(),u=o.get(e);if(!u){c==null||c("012",Ch.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function Utt(){const e=Zi();return k.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,c={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function aI(e){return(t,r,n)=>e==null?void 0:e(t,n)}function vce({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=Zi(),[c,u]=k.useState(!1),d=k.useRef([]),f=k.useRef({x:null,y:null}),h=k.useRef(0),p=k.useRef(null),g=k.useRef({x:0,y:0}),x=k.useRef(null),b=k.useRef(!1),y=k.useRef(!1),w=k.useRef(!1),S=Utt();return k.useEffect(()=>{if(e!=null&&e.current){const j=Su(e.current),N=({x:_,y:B})=>{const{nodeInternals:P,onNodeDrag:D,onSelectionDrag:I,updateNodePositions:U,nodeExtent:R,snapGrid:Y,snapToGrid:H,nodeOrigin:X,onError:V}=o.getState();f.current={x:_,y:B};let z=!1,q={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&R){const M=R8(d.current,X);q=I8(M)}if(d.current=d.current.map(M=>{const W={x:_-M.distance.x,y:B-M.distance.y};H&&(W.x=Y[0]*Math.round(W.x/Y[0]),W.y=Y[1]*Math.round(W.y/Y[1]));const Z=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];d.current.length>1&&R&&!M.extent&&(Z[0][0]=M.positionAbsolute.x-q.x+R[0][0],Z[1][0]=M.positionAbsolute.x+(M.width??0)-q.x2+R[1][0],Z[0][1]=M.positionAbsolute.y-q.y+R[0][1],Z[1][1]=M.positionAbsolute.y+(M.height??0)-q.y2+R[1][1]);const re=xce(M,W,P,Z,X,V);return z=z||M.position.x!==re.position.x||M.position.y!==re.position.y,M.position=re.position,M.positionAbsolute=re.positionAbsolute,M}),!z)return;U(d.current,!0,!0),u(!0);const ne=a?D:aI(I);if(ne&&x.current){const[M,W]=nI({nodeId:a,dragItems:d.current,nodeInternals:P});ne(x.current,M,W)}},F=()=>{if(!p.current)return;const[_,B]=Qle(g.current,p.current);if(_!==0||B!==0){const{transform:P,panBy:D}=o.getState();f.current.x=(f.current.x??0)-_/P[2],f.current.y=(f.current.y??0)-B/P[2],D({x:_,y:B})&&N(f.current)}h.current=requestAnimationFrame(F)},E=_=>{var X;const{nodeInternals:B,multiSelectionActive:P,nodesDraggable:D,unselectNodesAndEdges:I,onNodeDragStart:U,onSelectionDragStart:R}=o.getState();y.current=!0;const Y=a?U:aI(R);(!i||!s)&&!P&&a&&((X=B.get(a))!=null&&X.selected||I()),a&&s&&i&&cO({id:a,store:o,nodeRef:e});const H=S(_);if(f.current=H,d.current=Ltt(B,D,H,a),Y&&d.current){const[V,z]=nI({nodeId:a,dragItems:d.current,nodeInternals:B});Y(_.sourceEvent,V,z)}};if(t)j.on(".drag",null);else{const _=vZe().on("start",B=>{const{domNode:P,nodeDragThreshold:D}=o.getState();D===0&&E(B),w.current=!1;const I=S(B);f.current=I,p.current=(P==null?void 0:P.getBoundingClientRect())||null,g.current=nm(B.sourceEvent,p.current)}).on("drag",B=>{var U,R;const P=S(B),{autoPanOnNodeDrag:D,nodeDragThreshold:I}=o.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!b.current&&y.current&&D&&(b.current=!0,F()),!y.current){const Y=P.xSnapped-(((U=f==null?void 0:f.current)==null?void 0:U.x)??0),H=P.ySnapped-(((R=f==null?void 0:f.current)==null?void 0:R.y)??0);Math.sqrt(Y*Y+H*H)>I&&E(B)}(f.current.x!==P.xSnapped||f.current.y!==P.ySnapped)&&d.current&&y.current&&(x.current=B.sourceEvent,g.current=nm(B.sourceEvent,p.current),N(P))}}).on("end",B=>{if(!(!y.current||w.current)&&(u(!1),b.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:P,nodeInternals:D,onNodeDragStop:I,onSelectionDragStop:U}=o.getState(),R=a?I:aI(U);if(P(d.current,!1,!1),R){const[Y,H]=nI({nodeId:a,dragItems:d.current,nodeInternals:D});R(B.sourceEvent,Y,H)}}}).filter(B=>{const P=B.target;return!B.button&&(!r||!Tq(P,`.${r}`,e))&&(!n||Tq(P,n,e))});return j.call(_),()=>{j.on(".drag",null)}}}},[e,t,r,n,s,o,a,i,S]),c}function bce(){const e=Zi();return k.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=o?c[0]:5,p=o?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,b=r.y*p*g,y=f.map(w=>{if(w.positionAbsolute){const S={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+b};o&&(S.x=c[0]*Math.round(S.x/c[0]),S.y=c[1]*Math.round(S.y/c[1]));const{positionAbsolute:j,position:N}=xce(w,S,n,a,void 0,u);w.position=N,w.positionAbsolute=j}return w});s(y,!0,!1)},[])}const kv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ty=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:g,onDoubleClick:x,style:b,className:y,isDraggable:w,isSelectable:S,isConnectable:j,isFocusable:N,selectNodesOnDrag:F,sourcePosition:E,targetPosition:_,hidden:B,resizeObserver:P,dragHandle:D,zIndex:I,isParent:U,noDragClassName:R,noPanClassName:Y,initialized:H,disableKeyboardA11y:X,ariaLabel:V,rfId:z,hasHandleBounds:q})=>{const ne=Zi(),M=k.useRef(null),W=k.useRef(null),Z=k.useRef(E),re=k.useRef(_),ae=k.useRef(n),ce=S||w||d||f||h||p,oe=bce(),le=ey(r,ne.getState,f),pe=ey(r,ne.getState,h),Be=ey(r,ne.getState,p),te=ey(r,ne.getState,g),_e=ey(r,ne.getState,x),De=Ie=>{const{nodeDragThreshold:Ue}=ne.getState();if(S&&(!F||!w||Ue>0)&&cO({id:r,store:ne,nodeRef:M}),d){const Ye=ne.getState().nodeInternals.get(r);Ye&&d(Ie,{...Ye})}},Ne=Ie=>{if(!aO(Ie)&&!X)if(Vle.includes(Ie.key)&&S){const Ue=Ie.key==="Escape";cO({id:r,store:ne,unselect:Ue,nodeRef:M})}else w&&u&&Object.prototype.hasOwnProperty.call(kv,Ie.key)&&(ne.setState({ariaLiveMessage:`Moved selected node ${Ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),oe({x:kv[Ie.key].x,y:kv[Ie.key].y,isShiftPressed:Ie.shiftKey}))};k.useEffect(()=>()=>{W.current&&(P==null||P.unobserve(W.current),W.current=null)},[]),k.useEffect(()=>{if(M.current&&!B){const Ie=M.current;(!H||!q||W.current!==Ie)&&(W.current&&(P==null||P.unobserve(W.current)),P==null||P.observe(Ie),W.current=Ie)}},[B,H,q]),k.useEffect(()=>{const Ie=ae.current!==n,Ue=Z.current!==E,Ye=re.current!==_;M.current&&(Ie||Ue||Ye)&&(Ie&&(ae.current=n),Ue&&(Z.current=E),Ye&&(re.current=_),ne.getState().updateNodeDimensions([{id:r,nodeElement:M.current,forceUpdate:!0}]))},[r,n,E,_]);const fe=vce({nodeRef:M,disabled:B||!w,noDragClassName:R,handleSelector:D,nodeId:r,isSelectable:S,selectNodesOnDrag:F});return B?null:ct.createElement("div",{className:wl(["react-flow__node",`react-flow__node-${n}`,{[Y]:w},y,{selected:u,selectable:S,parent:U,dragging:fe}]),ref:M,style:{zIndex:I,transform:`translate(${o}px,${c}px)`,pointerEvents:ce?"all":"none",visibility:H?"visible":"hidden",...b},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:le,onMouseMove:pe,onMouseLeave:Be,onContextMenu:te,onClick:De,onDoubleClick:_e,onKeyDown:N?Ne:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":X?void 0:`${cce}-${z}`,"aria-label":V},ct.createElement(ett,{value:r},ct.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:j,sourcePosition:E,targetPosition:_,dragging:fe,dragHandle:D,zIndex:I})))};return t.displayName="NodeWrapper",k.memo(t)};const Qtt=e=>{const t=e.getNodes().filter(r=>r.selected);return{...R8(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Htt({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=Zi(),{width:a,height:s,x:i,y:o,transformString:c,userSelectionActive:u}=us(Qtt,rl),d=bce(),f=k.useRef(null);if(k.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),vce({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const x=n.getState().getNodes().filter(b=>b.selected);e(g,x)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(kv,g.key)&&d({x:kv[g.key].x,y:kv[g.key].y,isShiftPressed:g.shiftKey})};return ct.createElement("div",{className:wl(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},ct.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:p,style:{width:a,height:s,top:o,left:i}}))}var Vtt=k.memo(Htt);const ztt=e=>e.nodesSelectionActive,yce=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:b,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:S,zoomOnScroll:j,zoomOnPinch:N,panOnScroll:F,panOnScrollSpeed:E,panOnScrollMode:_,zoomOnDoubleClick:B,panOnDrag:P,defaultViewport:D,translateExtent:I,minZoom:U,maxZoom:R,preventScrolling:Y,onSelectionContextMenu:H,noWheelClassName:X,noPanClassName:V,disableKeyboardA11y:z})=>{const q=us(ztt),ne=s2(f),M=s2(y),W=M||P,Z=M||F,re=ne||h&&W!==!0;return Btt({deleteKeyCode:o,multiSelectionKeyCode:b}),ct.createElement(Ftt,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:S,zoomOnScroll:j,zoomOnPinch:N,panOnScroll:Z,panOnScrollSpeed:E,panOnScrollMode:_,zoomOnDoubleClick:B,panOnDrag:!ne&&W,defaultViewport:D,translateExtent:I,minZoom:U,maxZoom:R,zoomActivationKeyCode:w,preventScrolling:Y,noWheelClassName:X,noPanClassName:V},ct.createElement(pce,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:W,isSelecting:!!re,selectionMode:p},e,q&&ct.createElement(Vtt,{onSelectionContextMenu:H,noPanClassName:V,disableKeyboardA11y:z})))};yce.displayName="FlowRenderer";var $tt=k.memo(yce);function Gtt(e){return us(k.useCallback(r=>e?Xle(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function Ktt(e){const t={input:ty(e.input||sce),default:ty(e.default||lO),output:ty(e.output||oce),group:ty(e.group||M8)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=ty(e[s]||lO),a),r);return{...t,...n}}const qtt=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},Wtt=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),wce=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=us(Wtt,rl),o=Gtt(e.onlyRenderVisibleElements),c=k.useRef(),u=k.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return k.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),ct.createElement("div",{className:"react-flow__nodes",style:U8},o.map(d=>{var N,F,E;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",Ch.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),b=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?j8(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(y==null?void 0:y.x)??0,S=(y==null?void 0:y.y)??0,j=qtt({x:w,y:S,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return ct.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||Er.Bottom,targetPosition:d.targetPosition||Er.Top,hidden:d.hidden,xPos:w,yPos:S,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:g,isConnectable:x,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((N=d[Ss])==null?void 0:N.z)??0,isParent:!!((F=d[Ss])!=null&&F.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((E=d[Ss])!=null&&E.handleBounds)})}))};wce.displayName="NodeRenderer";var Xtt=k.memo(wce);const Ytt=(e,t,r)=>r===Er.Left?e-t:r===Er.Right?e+t:e,Jtt=(e,t,r)=>r===Er.Top?e-t:r===Er.Bottom?e+t:e,Iq="react-flow__edgeupdater",Fq=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>ct.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:wl([Iq,`${Iq}-${o}`]),cx:Ytt(t,n,e),cy:Jtt(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),Ztt=()=>!0;var _x=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:x,style:b,source:y,target:w,sourceX:S,sourceY:j,targetX:N,targetY:F,sourcePosition:E,targetPosition:_,elementsSelectable:B,hidden:P,sourceHandleId:D,targetHandleId:I,onContextMenu:U,onMouseEnter:R,onMouseMove:Y,onMouseLeave:H,reconnectRadius:X,onReconnect:V,onReconnectStart:z,onReconnectEnd:q,markerEnd:ne,markerStart:M,rfId:W,ariaLabel:Z,isFocusable:re,isReconnectable:ae,pathOptions:ce,interactionWidth:oe,disableKeyboardA11y:le})=>{const pe=k.useRef(null),[Be,te]=k.useState(!1),[_e,De]=k.useState(!1),Ne=Zi(),fe=k.useMemo(()=>`url('#${iO(M,W)}')`,[M,W]),Ie=k.useMemo(()=>`url('#${iO(ne,W)}')`,[ne,W]);if(P)return null;const Ue=yt=>{var jn;const{edges:kr,addSelectedEdges:er,unselectNodesAndEdges:an,multiSelectionActive:_r}=Ne.getState(),Vr=kr.find(Or=>Or.id===r);Vr&&(B&&(Ne.setState({nodesSelectionActive:!1}),Vr.selected&&_r?(an({nodes:[],edges:[Vr]}),(jn=pe.current)==null||jn.blur()):er([r])),i&&i(yt,Vr))},Ye=Zb(r,Ne.getState,o),ye=Zb(r,Ne.getState,U),Oe=Zb(r,Ne.getState,R),Re=Zb(r,Ne.getState,Y),qe=Zb(r,Ne.getState,H),Ze=(yt,kr)=>{if(yt.button!==0)return;const{edges:er,isValidConnection:an}=Ne.getState(),_r=kr?w:y,Vr=(kr?I:D)||null,jn=kr?"target":"source",Or=an||Ztt,As=kr,hn=er.find(en=>en.id===r);De(!0),z==null||z(yt,hn,jn);const oa=en=>{De(!1),q==null||q(en,hn,jn)};tce({event:yt,handleId:Vr,nodeId:_r,onConnect:en=>V==null?void 0:V(hn,en),isTarget:As,getState:Ne.getState,setState:Ne.setState,isValidConnection:Or,edgeUpdaterType:jn,onReconnectEnd:oa})},lt=yt=>Ze(yt,!0),mt=yt=>Ze(yt,!1),It=()=>te(!0),Mt=()=>te(!1),Pt=!B&&!i,Qt=yt=>{var kr;if(!le&&Vle.includes(yt.key)&&B){const{unselectNodesAndEdges:er,addSelectedEdges:an,edges:_r}=Ne.getState();yt.key==="Escape"?((kr=pe.current)==null||kr.blur(),er({edges:[_r.find(jn=>jn.id===r)]})):an([r])}};return ct.createElement("g",{className:wl(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Pt,updating:Be}]),onClick:Ue,onDoubleClick:Ye,onContextMenu:ye,onMouseEnter:Oe,onMouseMove:Re,onMouseLeave:qe,onKeyDown:re?Qt:void 0,tabIndex:re?0:void 0,role:re?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Z===null?void 0:Z||`Edge from ${y} to ${w}`,"aria-describedby":re?`${uce}-${W}`:void 0,ref:pe},!_e&&ct.createElement(e,{id:r,source:y,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:b,sourceX:S,sourceY:j,targetX:N,targetY:F,sourcePosition:E,targetPosition:_,sourceHandleId:D,targetHandleId:I,markerStart:fe,markerEnd:Ie,pathOptions:ce,interactionWidth:oe}),ae&&ct.createElement(ct.Fragment,null,(ae==="source"||ae===!0)&&ct.createElement(Fq,{position:E,centerX:S,centerY:j,radius:X,onMouseDown:lt,onMouseEnter:It,onMouseOut:Mt,type:"source"}),(ae==="target"||ae===!0)&&ct.createElement(Fq,{position:_,centerX:N,centerY:F,radius:X,onMouseDown:mt,onMouseEnter:It,onMouseOut:Mt,type:"target"})))};return t.displayName="EdgeWrapper",k.memo(t)};function ert(e){const t={default:_x(e.default||iN),straight:_x(e.bezier||D8),step:_x(e.step||O8),smoothstep:_x(e.step||yk),simplebezier:_x(e.simplebezier||F8)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=_x(e[s]||iN),a),r);return{...t,...n}}function Oq(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case Er.Top:return{x:n+s/2,y:a};case Er.Right:return{x:n+s,y:a+i/2};case Er.Bottom:return{x:n+s/2,y:a+i};case Er.Left:return{x:n,y:a+i/2}}}function Dq(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const trt=(e,t,r,n,a,s)=>{const i=Oq(r,e,t),o=Oq(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function rrt({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=I8({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:o/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function Pq(e){var n,a,s,i,o;const t=((n=e==null?void 0:e[Ss])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const nrt=[{level:0,isMaxLevel:!0,edges:[]}];function art(e,t,r=!1){let n=-1;const a=e.reduce((i,o)=>{var d,f;const c=Tu(o.zIndex);let u=c?o.zIndex:0;if(r){const h=t.get(o.target),p=t.get(o.source),g=o.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),x=Math.max(((d=p==null?void 0:p[Ss])==null?void 0:d.z)||0,((f=h==null?void 0:h[Ss])==null?void 0:f.z)||0,1e3);u=(c?o.zIndex:0)+(g?x:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const c=+i;return{edges:o,level:c,isMaxLevel:c===n}});return s.length===0?nrt:s}function srt(e,t,r){const n=us(k.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),o=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&rrt({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return art(n,t,r)}const irt=({color:e="none",strokeWidth:t=1})=>ct.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ort=({color:e="none",strokeWidth:t=1})=>ct.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Rq={[sN.Arrow]:irt,[sN.ArrowClosed]:ort};function lrt(e){const t=Zi();return k.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(Rq,e)?Rq[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Ch.error009(e)),null)},[e])}const crt=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const c=lrt(t);return c?ct.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},ct.createElement(c,{color:r,strokeWidth:i})):null},urt=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=iO(i,t);n.includes(o)||(a.push({id:o,color:i.color||e,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},Ece=({defaultColor:e,rfId:t})=>{const r=us(k.useCallback(urt({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return ct.createElement("defs",null,r.map(n=>ct.createElement(crt,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};Ece.displayName="MarkerDefinitions";var drt=k.memo(Ece);const Art=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Cce=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:x,children:b,disableKeyboardA11y:y})=>{const{edgesFocusable:w,edgesUpdatable:S,elementsSelectable:j,width:N,height:F,connectionMode:E,nodeInternals:_,onError:B}=us(Art,rl),P=srt(t,_,r);return N?ct.createElement(ct.Fragment,null,P.map(({level:D,edges:I,isMaxLevel:U})=>ct.createElement("svg",{key:D,style:{zIndex:D},width:N,height:F,className:"react-flow__edges react-flow__container"},U&&ct.createElement(drt,{defaultColor:e,rfId:n}),ct.createElement("g",null,I.map(R=>{const[Y,H,X]=Pq(_.get(R.source)),[V,z,q]=Pq(_.get(R.target));if(!X||!q)return null;let ne=R.type||"default";a[ne]||(B==null||B("011",Ch.error011(ne)),ne="default");const M=a[ne]||a.default,W=E===hg.Strict?z.target:(z.target??[]).concat(z.source??[]),Z=Dq(H.source,R.sourceHandle),re=Dq(W,R.targetHandle),ae=(Z==null?void 0:Z.position)||Er.Bottom,ce=(re==null?void 0:re.position)||Er.Top,oe=!!(R.focusable||w&&typeof R.focusable>"u"),le=R.reconnectable||R.updatable,pe=typeof h<"u"&&(le||S&&typeof le>"u");if(!Z||!re)return B==null||B("008",Ch.error008(Z,R)),null;const{sourceX:Be,sourceY:te,targetX:_e,targetY:De}=trt(Y,Z,ae,V,re,ce);return ct.createElement(M,{key:R.id,id:R.id,className:wl([R.className,s]),type:ne,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:Be,sourceY:te,targetX:_e,targetY:De,sourcePosition:ae,targetPosition:ce,elementsSelectable:j,onContextMenu:i,onMouseEnter:o,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:R.ariaLabel,isFocusable:oe,isReconnectable:pe,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:y})})))),b):null};Cce.displayName="EdgeRenderer";var frt=k.memo(Cce);const hrt=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function mrt({children:e}){const t=us(hrt);return ct.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function prt(e){const t=wk(),r=k.useRef(!1);k.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const grt={[Er.Left]:Er.Right,[Er.Right]:Er.Left,[Er.Top]:Er.Bottom,[Er.Bottom]:Er.Top},_ce=({nodeId:e,handleType:t,style:r,type:n=P0.Bezier,CustomComponent:a,connectionStatus:s})=>{var F,E,_;const{fromNode:i,handleId:o,toX:c,toY:u,connectionMode:d}=us(k.useCallback(B=>({fromNode:B.nodeInternals.get(e),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[e]),rl),f=(F=i==null?void 0:i[Ss])==null?void 0:F.handleBounds;let h=f==null?void 0:f[t];if(d===hg.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const p=o?h.find(B=>B.id===o):h[0],g=p?p.x+p.width/2:(i.width??0)/2,x=p?p.y+p.height/2:i.height??0,b=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+g,y=(((_=i.positionAbsolute)==null?void 0:_.y)??0)+x,w=p==null?void 0:p.position,S=w?grt[w]:null;if(!w||!S)return null;if(a)return ct.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:p,fromX:b,fromY:y,toX:c,toY:u,fromPosition:w,toPosition:S,connectionStatus:s});let j="";const N={sourceX:b,sourceY:y,sourcePosition:w,targetX:c,targetY:u,targetPosition:S};return n===P0.Bezier?[j]=qle(N):n===P0.Step?[j]=sO({...N,borderRadius:0}):n===P0.SmoothStep?[j]=sO(N):n===P0.SimpleBezier?[j]=Kle(N):j=`M${b},${y} ${c},${u}`,ct.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:r})};_ce.displayName="ConnectionLine";const xrt=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function vrt({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:c,connectionStatus:u}=us(xrt,rl);return!(a&&s&&o&&i)?null:ct.createElement("svg",{style:e,width:o,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},ct.createElement("g",{className:wl(["react-flow__connection",u])},ct.createElement(_ce,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function Lq(e,t){return k.useRef(null),Zi(),k.useMemo(()=>t(e),[e])}const Sce=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:b,connectionLineType:y,connectionLineStyle:w,connectionLineComponent:S,connectionLineContainerStyle:j,selectionKeyCode:N,selectionOnDrag:F,selectionMode:E,multiSelectionKeyCode:_,panActivationKeyCode:B,zoomActivationKeyCode:P,deleteKeyCode:D,onlyRenderVisibleElements:I,elementsSelectable:U,selectNodesOnDrag:R,defaultViewport:Y,translateExtent:H,minZoom:X,maxZoom:V,preventScrolling:z,defaultMarkerColor:q,zoomOnScroll:ne,zoomOnPinch:M,panOnScroll:W,panOnScrollSpeed:Z,panOnScrollMode:re,zoomOnDoubleClick:ae,panOnDrag:ce,onPaneClick:oe,onPaneMouseEnter:le,onPaneMouseMove:pe,onPaneMouseLeave:Be,onPaneScroll:te,onPaneContextMenu:_e,onEdgeContextMenu:De,onEdgeMouseEnter:Ne,onEdgeMouseMove:fe,onEdgeMouseLeave:Ie,onReconnect:Ue,onReconnectStart:Ye,onReconnectEnd:ye,reconnectRadius:Oe,noDragClassName:Re,noWheelClassName:qe,noPanClassName:Ze,elevateEdgesOnSelect:lt,disableKeyboardA11y:mt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})=>{const Qt=Lq(e,Ktt),yt=Lq(t,ert);return prt(s),ct.createElement($tt,{onPaneClick:oe,onPaneMouseEnter:le,onPaneMouseMove:pe,onPaneMouseLeave:Be,onPaneContextMenu:_e,onPaneScroll:te,deleteKeyCode:D,selectionKeyCode:N,selectionOnDrag:F,selectionMode:E,onSelectionStart:x,onSelectionEnd:b,multiSelectionKeyCode:_,panActivationKeyCode:B,zoomActivationKeyCode:P,elementsSelectable:U,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:ne,zoomOnPinch:M,zoomOnDoubleClick:ae,panOnScroll:W,panOnScrollSpeed:Z,panOnScrollMode:re,panOnDrag:ce,defaultViewport:Y,translateExtent:H,minZoom:X,maxZoom:V,onSelectionContextMenu:g,preventScrolling:z,noDragClassName:Re,noWheelClassName:qe,noPanClassName:Ze,disableKeyboardA11y:mt},ct.createElement(mrt,null,ct.createElement(frt,{edgeTypes:yt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:I,onEdgeContextMenu:De,onEdgeMouseEnter:Ne,onEdgeMouseMove:fe,onEdgeMouseLeave:Ie,onReconnect:Ue,onReconnectStart:Ye,onReconnectEnd:ye,reconnectRadius:Oe,defaultMarkerColor:q,noPanClassName:Ze,elevateEdgesOnSelect:!!lt,disableKeyboardA11y:mt,rfId:Pt},ct.createElement(vrt,{style:w,type:y,component:S,containerStyle:j})),ct.createElement("div",{className:"react-flow__edgelabel-renderer"}),ct.createElement(Xtt,{nodeTypes:Qt,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:R,onlyRenderVisibleElements:I,noPanClassName:Ze,noDragClassName:Re,disableKeyboardA11y:mt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})))};Sce.displayName="GraphView";var brt=k.memo(Sce);const uO=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],E0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:uO,nodeExtent:uO,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:hg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:qet,isValidConnection:void 0},yrt=()=>jYe((e,t)=>({...E0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:tI(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?tI(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=r.reduce((x,b)=>{const y=a.get(b.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Ss]:{...y[Ss],handleBounds:void 0}});else if(y){const w=T8(b.nodeElement);!!(w.width&&w.height&&(y.width!==w.width||y.height!==w.height||b.forceUpdate))&&(a.set(y.id,{...y,[Ss]:{...y[Ss],handleBounds:{source:jq(".source",b.nodeElement,h,u),target:jq(".target",b.nodeElement,h,u)}},...w}),x.push({id:y.id,type:"dimensions",dimensions:w}))}return x},[]);Ace(a,u);const g=i||s&&!i&&fce(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(p==null?void 0:p.length)>0&&(n==null||n(p))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(o=>{const c={id:o.id,type:"position",dragging:a};return n&&(c.positionAbsolute=o.positionAbsolute,c.position=o.position),c});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=mce(r,o()),d=tI(u,a,i,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>B0(c,!0)):(i=av(s(),r),o=av(a,[])),JC({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>B0(c,!0)):(i=av(a,r),o=av(s(),[])),JC({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),o=n||a,c=i.map(d=>(d.selected=!1,B0(d.id,!1))),u=o.map(d=>B0(d.id,!1));JC({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(o=>o.selected).map(o=>B0(o.id,!1)),i=r.filter(o=>o.selected).map(o=>B0(o.id,!1));JC({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=j8(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:c}=t();if(!i||!o||!r.x&&!r.y)return!1;const u=rm.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(o,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:E0.connectionNodeId,connectionHandleId:E0.connectionHandleId,connectionHandleType:E0.connectionHandleType,connectionStatus:E0.connectionStatus,connectionStartHandle:E0.connectionStartHandle,connectionEndHandle:E0.connectionEndHandle}),reset:()=>e({...E0})}),Object.is),Q8=({children:e})=>{const t=k.useRef(null);return t.current||(t.current=yrt()),ct.createElement(Uet,{value:t.current},e)};Q8.displayName="ReactFlowProvider";const Nce=({children:e})=>k.useContext(bk)?ct.createElement(ct.Fragment,null,e):ct.createElement(Q8,null,e);Nce.displayName="ReactFlowWrapper";const wrt={input:sce,default:lO,output:oce,group:M8},Ert={default:iN,straight:D8,step:O8,smoothstep:yk,simplebezier:F8},Crt=[0,0],_rt=[15,15],Srt={x:0,y:0,zoom:1},Nrt={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},kce=k.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=wrt,edgeTypes:i=Ert,onNodeClick:o,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:y,onNodeMouseEnter:w,onNodeMouseMove:S,onNodeMouseLeave:j,onNodeContextMenu:N,onNodeDoubleClick:F,onNodeDragStart:E,onNodeDrag:_,onNodeDragStop:B,onNodesDelete:P,onEdgesDelete:D,onSelectionChange:I,onSelectionDragStart:U,onSelectionDrag:R,onSelectionDragStop:Y,onSelectionContextMenu:H,onSelectionStart:X,onSelectionEnd:V,connectionMode:z=hg.Strict,connectionLineType:q=P0.Bezier,connectionLineStyle:ne,connectionLineComponent:M,connectionLineContainerStyle:W,deleteKeyCode:Z="Backspace",selectionKeyCode:re="Shift",selectionOnDrag:ae=!1,selectionMode:ce=a2.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:le=aN()?"Meta":"Control",zoomActivationKeyCode:pe=aN()?"Meta":"Control",snapToGrid:Be=!1,snapGrid:te=_rt,onlyRenderVisibleElements:_e=!1,selectNodesOnDrag:De=!0,nodesDraggable:Ne,nodesConnectable:fe,nodesFocusable:Ie,nodeOrigin:Ue=Crt,edgesFocusable:Ye,edgesUpdatable:ye,elementsSelectable:Oe,defaultViewport:Re=Srt,minZoom:qe=.5,maxZoom:Ze=2,translateExtent:lt=uO,preventScrolling:mt=!0,nodeExtent:It,defaultMarkerColor:Mt="#b1b1b7",zoomOnScroll:Pt=!0,zoomOnPinch:Qt=!0,panOnScroll:yt=!1,panOnScrollSpeed:kr=.5,panOnScrollMode:er=Ip.Free,zoomOnDoubleClick:an=!0,panOnDrag:_r=!0,onPaneClick:Vr,onPaneMouseEnter:jn,onPaneMouseMove:Or,onPaneMouseLeave:As,onPaneScroll:hn,onPaneContextMenu:oa,children:Ba,onEdgeContextMenu:en,onEdgeDoubleClick:mr,onEdgeMouseEnter:et,onEdgeMouseMove:gt,onEdgeMouseLeave:Je,onEdgeUpdate:xt,onEdgeUpdateStart:wt,onEdgeUpdateEnd:bt,onReconnect:nr,onReconnectStart:gr,onReconnectEnd:Kr,reconnectRadius:Yr=10,edgeUpdaterRadius:Gr=10,onNodesChange:he,onEdgesChange:Te,noDragClassName:Ce="nodrag",noWheelClassName:we="nowheel",noPanClassName:Se="nopan",fitView:je=!1,fitViewOptions:Xe,connectOnClick:dt=!0,attributionPosition:$e,proOptions:rt,defaultEdgeOptions:st,elevateNodesOnSelect:Ft=!0,elevateEdgesOnSelect:Vt=!1,disableKeyboardA11y:Yt=!1,autoPanOnConnect:Ht=!0,autoPanOnNodeDrag:zt=!0,connectionRadius:Sr=20,isValidConnection:sn,onError:on,style:An,id:fs,nodeDragThreshold:bo,...hs},Js)=>{const js=fs||"1";return ct.createElement("div",{...hs,style:{...An,...Nrt},ref:Js,className:wl(["react-flow",a]),"data-testid":"rf__wrapper",id:fs},ct.createElement(Nce,null,ct.createElement(brt,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:S,onNodeMouseLeave:j,onNodeContextMenu:N,onNodeDoubleClick:F,nodeTypes:s,edgeTypes:i,connectionLineType:q,connectionLineStyle:ne,connectionLineComponent:M,connectionLineContainerStyle:W,selectionKeyCode:re,selectionOnDrag:ae,selectionMode:ce,deleteKeyCode:Z,multiSelectionKeyCode:le,panActivationKeyCode:oe,zoomActivationKeyCode:pe,onlyRenderVisibleElements:_e,selectNodesOnDrag:De,defaultViewport:Re,translateExtent:lt,minZoom:qe,maxZoom:Ze,preventScrolling:mt,zoomOnScroll:Pt,zoomOnPinch:Qt,zoomOnDoubleClick:an,panOnScroll:yt,panOnScrollSpeed:kr,panOnScrollMode:er,panOnDrag:_r,onPaneClick:Vr,onPaneMouseEnter:jn,onPaneMouseMove:Or,onPaneMouseLeave:As,onPaneScroll:hn,onPaneContextMenu:oa,onSelectionContextMenu:H,onSelectionStart:X,onSelectionEnd:V,onEdgeContextMenu:en,onEdgeDoubleClick:mr,onEdgeMouseEnter:et,onEdgeMouseMove:gt,onEdgeMouseLeave:Je,onReconnect:nr??xt,onReconnectStart:gr??wt,onReconnectEnd:Kr??bt,reconnectRadius:Yr??Gr,defaultMarkerColor:Mt,noDragClassName:Ce,noWheelClassName:we,noPanClassName:Se,elevateEdgesOnSelect:Vt,rfId:js,disableKeyboardA11y:Yt,nodeOrigin:Ue,nodeExtent:It}),ct.createElement(gtt,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:y,nodesDraggable:Ne,nodesConnectable:fe,nodesFocusable:Ie,edgesFocusable:Ye,edgesUpdatable:ye,elementsSelectable:Oe,elevateNodesOnSelect:Ft,minZoom:qe,maxZoom:Ze,nodeExtent:It,onNodesChange:he,onEdgesChange:Te,snapToGrid:Be,snapGrid:te,connectionMode:z,translateExtent:lt,connectOnClick:dt,defaultEdgeOptions:st,fitView:je,fitViewOptions:Xe,onNodesDelete:P,onEdgesDelete:D,onNodeDragStart:E,onNodeDrag:_,onNodeDragStop:B,onSelectionDrag:R,onSelectionDragStart:U,onSelectionDragStop:Y,noPanClassName:Se,nodeOrigin:Ue,rfId:js,autoPanOnConnect:Ht,autoPanOnNodeDrag:zt,onError:on,connectionRadius:Sr,isValidConnection:sn,nodeDragThreshold:bo}),ct.createElement(mtt,{onSelectionChange:I}),Ba,ct.createElement(Het,{proOptions:rt,position:$e}),ct.createElement(wtt,{rfId:js,disableKeyboardA11y:Yt})))});kce.displayName="ReactFlow";function Bce(e){return t=>{const[r,n]=k.useState(t),a=k.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const krt=Bce(mce),Brt=Bce(Ptt);function Trt(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ct.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function jrt(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ct.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Irt(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ct.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Frt(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ct.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Ort(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ct.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Sy=({children:e,className:t,...r})=>ct.createElement("button",{type:"button",className:wl(["react-flow__controls-button",t]),...r},e);Sy.displayName="ControlButton";const Drt=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Tce=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=Zi(),[p,g]=k.useState(!1),{isInteractive:x,minZoomReached:b,maxZoomReached:y}=us(Drt,rl),{zoomIn:w,zoomOut:S,fitView:j}=wk();if(k.useEffect(()=>{g(!0)},[]),!p)return null;const N=()=>{w(),s==null||s()},F=()=>{S(),i==null||i()},E=()=>{j(a),o==null||o()},_=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return ct.createElement(Ule,{className:wl(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&ct.createElement(ct.Fragment,null,ct.createElement(Sy,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},ct.createElement(Trt,null)),ct.createElement(Sy,{onClick:F,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},ct.createElement(jrt,null))),r&&ct.createElement(Sy,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},ct.createElement(Irt,null)),n&&ct.createElement(Sy,{className:"react-flow__controls-interactive",onClick:_,title:"toggle interactivity","aria-label":"toggle interactivity"},x?ct.createElement(Ort,null):ct.createElement(Frt,null)),d)};Tce.displayName="Controls";var Prt=k.memo(Tce),Id;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Id||(Id={}));function Rrt({color:e,dimensions:t,lineWidth:r}){return ct.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Lrt({color:e,radius:t}){return ct.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Mrt={[Id.Dots]:"#91919a",[Id.Lines]:"#eee",[Id.Cross]:"#e2e2e2"},Urt={[Id.Dots]:1,[Id.Lines]:1,[Id.Cross]:6},Qrt=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function jce({id:e,variant:t=Id.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:c}){const u=k.useRef(null),{transform:d,patternId:f}=us(Qrt,rl),h=i||Mrt[t],p=n||Urt[t],g=t===Id.Dots,x=t===Id.Cross,b=Array.isArray(r)?r:[r,r],y=[b[0]*d[2]||1,b[1]*d[2]||1],w=p*d[2],S=x?[w,w]:y,j=g?[w/s,w/s]:[S[0]/s,S[1]/s];return ct.createElement("svg",{className:wl(["react-flow__background",c]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},ct.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},g?ct.createElement(Lrt,{color:h,radius:w/s}):ct.createElement(Rrt,{dimensions:S,color:h,lineWidth:a})),ct.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}jce.displayName="Background";var Hrt=k.memo(jce);function Vrt(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const zrt=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function am(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let Sx=null;function Ice(e={}){return Sx||(e.includeStyleProperties?(Sx=e.includeStyleProperties,Sx):(Sx=am(window.getComputedStyle(document.documentElement)),Sx))}function oN(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function $rt(e){const t=oN(e,"border-left-width"),r=oN(e,"border-right-width");return e.clientWidth+t+r}function Grt(e){const t=oN(e,"border-top-width"),r=oN(e,"border-bottom-width");return e.clientHeight+t+r}function Fce(e,t={}){const r=t.width||$rt(e),n=t.height||Grt(e);return{width:r,height:n}}function Krt(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const vc=16384;function qrt(e){(e.width>vc||e.height>vc)&&(e.width>vc&&e.height>vc?e.width>e.height?(e.height*=vc/e.width,e.width=vc):(e.width*=vc/e.height,e.height=vc):e.width>vc?(e.height*=vc/e.width,e.width=vc):(e.width*=vc/e.height,e.height=vc))}function lN(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function Wrt(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Xrt(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),Wrt(a)}const Yl=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||Yl(r,t)};function Yrt(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function Jrt(e,t){return Ice(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function Zrt(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?Yrt(r):Jrt(r,n);return document.createTextNode(`${a}{${s}}`)}function Mq(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=zrt();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(Zrt(i,r,a,n)),t.appendChild(o)}function ent(e,t,r){Mq(e,t,":before",r),Mq(e,t,":after",r)}const Uq="application/font-woff",Qq="image/jpeg",tnt={woff:Uq,woff2:Uq,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Qq,jpeg:Qq,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function rnt(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function H8(e){const t=rnt(e).toLowerCase();return tnt[t]||""}function nnt(e){return e.split(/,/)[1]}function dO(e){return e.search(/^(data:)/)!==-1}function ant(e,t){return`data:${t};base64,${e}`}async function Oce(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(c){i(c)}},o.readAsDataURL(a)})}const sI={};function snt(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function V8(e,t,r){const n=snt(e,t,r.includeQueryParams);if(sI[n]!=null)return sI[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await Oce(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),nnt(o)));a=ant(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return sI[n]=a,a}async function int(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):lN(t)}async function ont(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return lN(o)}const r=e.poster,n=H8(r),a=await V8(r,n,t);return lN(a)}async function lnt(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await Ek(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function cnt(e,t){return Yl(e,HTMLCanvasElement)?int(e):Yl(e,HTMLVideoElement)?ont(e,t):Yl(e,HTMLIFrameElement)?lnt(e,t):e.cloneNode(Dce(e))}const unt=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Dce=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function dnt(e,t,r){var n,a;if(Dce(t))return t;let s=[];return unt(e)&&e.assignedNodes?s=am(e.assignedNodes()):Yl(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=am(e.contentDocument.body.childNodes):s=am(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||Yl(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>Ek(o,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function Ant(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):Ice(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Yl(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function fnt(e,t){Yl(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Yl(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function hnt(e,t){if(Yl(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function mnt(e,t,r){return Yl(t,Element)&&(Ant(e,t,r),ent(e,t,r),fnt(e,t),hnt(e,t)),t}async function pnt(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const c=e.querySelector(o),u=document.querySelector(o);!c&&u&&!n[o]&&(n[o]=await Ek(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let c=0;c<a.length;c++)o.appendChild(a[c]);e.appendChild(i)}return e}async function Ek(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>cnt(n,t)).then(n=>dnt(e,n,t)).then(n=>mnt(e,n,t)).then(n=>pnt(n,t))}const Pce=/url\((['"]?)([^'"]+?)\1\)/g,gnt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,xnt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function vnt(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function bnt(e){const t=[];return e.replace(Pce,(r,n,a)=>(t.push(a),r)),t.filter(r=>!dO(r))}async function ynt(e,t,r,n,a){try{const s=r?Vrt(t,r):t,i=H8(t);let o;return a||(o=await V8(s,i,n)),e.replace(vnt(t),`$1${o}$3`)}catch{}return e}function wnt(e,{preferredFontFormat:t}){return t?e.replace(xnt,r=>{for(;;){const[n,,a]=gnt.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Rce(e){return e.search(Pce)!==-1}async function Lce(e,t,r){if(!Rce(e))return e;const n=wnt(e,r);return bnt(n).reduce((s,i)=>s.then(o=>ynt(o,i,t,r)),Promise.resolve(n))}async function Nx(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Lce(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function Ent(e,t){await Nx("background",e,t)||await Nx("background-image",e,t),await Nx("mask",e,t)||await Nx("-webkit-mask",e,t)||await Nx("mask-image",e,t)||await Nx("-webkit-mask-image",e,t)}async function Cnt(e,t){const r=Yl(e,HTMLImageElement);if(!(r&&!dO(e.src))&&!(Yl(e,SVGImageElement)&&!dO(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await V8(n,H8(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){i(u)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function _nt(e,t){const n=am(e.childNodes).map(a=>Mce(a,t));await Promise.all(n).then(()=>e)}async function Mce(e,t){Yl(e,Element)&&(await Ent(e,t),await Cnt(e,t),await _nt(e,t))}function Snt(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const Hq={};async function Vq(e){let t=Hq[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},Hq[e]=t,t}async function zq(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),Oce(o,t.fetchRequestInit,({result:c})=>(r=r.replace(i,`url(${c})`),[i,c]))});return Promise.all(s).then(()=>r)}function $q(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=o.exec(n),c===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(c[0])}return t}async function Nnt(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{am(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const c=s.href,u=Vq(c).then(d=>zq(d,t)).then(d=>$q(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?o+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(Vq(a.href).then(o=>zq(o,t)).then(o=>$q(o).forEach(c=>{i.insertRule(c,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{am(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function knt(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Rce(t.style.getPropertyValue("src")))}async function Bnt(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=am(e.ownerDocument.styleSheets),n=await Nnt(r,t);return knt(n)}function Uce(e){return e.trim().replace(/["']/g,"")}function Tnt(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(Uce(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function jnt(e,t){const r=await Bnt(e,t),n=Tnt(e);return(await Promise.all(r.filter(s=>n.has(Uce(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return Lce(s.cssText,i,t)}))).join(`
`)}async function Int(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await jnt(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function Fnt(e,t={}){const{width:r,height:n}=Fce(e,t),a=await Ek(e,t,!0);return await Int(a,t),await Mce(a,t),Snt(a,t),await Xrt(a,r,n)}async function Ont(e,t={}){const{width:r,height:n}=Fce(e,t),a=await Fnt(e,t),s=await lN(a),i=document.createElement("canvas"),o=i.getContext("2d"),c=t.pixelRatio||Krt(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*c,i.height=d*c,t.skipAutoScale||qrt(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function Ck(e,t={}){return(await Ont(e,t)).toDataURL()}const Qce="recursos_crucigramas",_k="recursos_lineas_de_tiempo",Sk="recursos_mapas_mentales",Hce="recursos_sopas_de_letras",Nk=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},Dnt=e=>{const t=Wt(Tt(pt,Qce),Tr("fechaCreacion","desc"));return pr(t,r=>{const n=r.docs.map(a=>Nk(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},Pnt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date)};return(await Ln(Tt(pt,Qce),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},Rnt=e=>{const t=Wt(Tt(pt,_k),Tr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>Nk(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},Lnt=async(e,t)=>{try{const{id:r,...n}=e,a=dr(pt,_k,r);await Yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},Mnt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await Ln(Tt(pt,_k),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},Unt=async e=>{try{const t=dr(pt,_k,e);await Za(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},Qnt=e=>{const t=Wt(Tt(pt,Sk),Tr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>Nk(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},Hnt=async(e,t)=>{try{const{id:r,...n}=e,a=dr(pt,Sk,r);await Yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Vnt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await Ln(Tt(pt,Sk),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},znt=async e=>{try{const t=dr(pt,Sk,e);await Za(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},$nt=e=>{const t=Wt(Tt(pt,Hce),Tr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>Nk(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},Gnt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await Ln(Tt(pt,Hce),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Knt=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),qnt=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),Wnt=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),Xnt=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return l.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[l.jsx(A1,{type:"target",position:Er.Left,className:"w-2 h-2 !bg-slate-400"}),l.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&l.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),l.jsx(A1,{type:"source",position:Er.Right,className:"w-2 h-2 !bg-slate-400"})]})},AO=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+AO(n,t),0),fO=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(o,c,u)=>{r.push({id:o.id,position:{x:c*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=AO(o,100);let f=u-d/2+100/2;(o.children||[]).forEach(h=>{const p=AO(h,100),g=f+p/2-100/2;n.push({id:`e-${o.id}-${h.id}`,source:o.id,target:h.id,type:"smoothstep",animated:!0}),i(h,c+1,g),f+=p})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,o=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const p=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:o*Math.cos(p),y:o*Math.sin(p)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},Vce=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return l.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[l.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),l.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&l.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(o=>l.jsx(Vce,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},Ynt={custom:Xnt},Jnt=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=k.useState(e.treeData),[s,i]=k.useState("tree"),[o,c]=k.useState(!1),[u,d,f]=krt([]),[h,p,g]=Brt([]),{fitView:x}=wk();k.useEffect(()=>{const{nodes:N,edges:F}=fO(n,s);d(N),p(F),setTimeout(()=>x({duration:300}),50)},[n,s,d,p,x]);const b=(N,F)=>{const E=JSON.parse(JSON.stringify(n)),_=B=>B.id===N?(B.label=F,!0):(B.children||[]).some(_);_(E),a(E)},y=N=>{const F=JSON.parse(JSON.stringify(n)),E=_=>_.id===N?(_.children||(_.children=[]),_.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(_.children||[]).some(E);E(F),a(F)},w=N=>{const F=JSON.parse(JSON.stringify(n)),E=_=>{const B=(_.children||[]).findIndex(P=>P.id===N);return B!==-1?(_.children.splice(B,1),!0):(_.children||[]).some(E)};E(F),a(F)},S=()=>{c(!0);const{nodes:N,edges:F}=fO(n,s);r({...e,treeData:n,nodes:N,edges:F}),setTimeout(()=>c(!1),1e3)},j=async N=>{const F=document.querySelector(".react-flow");F&&Ck(F,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const _=document.createElement("a");_.download=`${e.tema}.png`,_.href=E,_.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),l.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:l.jsxs(kce,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:Ynt,children:[l.jsx(Prt,{}),l.jsx(Hrt,{})]})}),l.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),l.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[l.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(qnt,{})," Vista en árbol"]}),l.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(Wnt,{})," Vista central"]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:l.jsx(Vce,{node:n,onUpdate:b,onAddChild:y,onDelete:w})}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>j(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),l.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},Znt=({onBack:e,currentUser:t})=>{const[r,n]=k.useState("list"),[a,s]=k.useState([]),[i,o]=k.useState(null),[c,u]=k.useState(!1),[d,f]=k.useState(!0),[h,p]=k.useState(""),[g,x]=k.useState(""),[b,y]=k.useState("");k.useEffect(()=>{f(!0);const E=Qnt(_=>{s(_),f(!1)});return()=>E()},[]);const w=async E=>{if(E.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",B=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${b}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const Y=(await(await new Bs(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text().replace(/^```json\s*|```\s*$/g,""),H=JSON.parse(Y),X=W=>({id:crypto.randomUUID(),label:W.label||"Sin etiqueta",icon:W.icon||"🧠",type:W.type||"default",children:(W.children||[]).map(X)}),V=X(H),{nodes:z,edges:q}=fO(V),ne={tema:h,nivel:g,treeData:V,nodes:z,edges:q},M=await Vnt(ne,t);o({...ne,id:M,createdAt:new Date().toISOString()}),n("editor")}catch(P){console.error("AI Generation Error:",P),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},S=async E=>{try{await Hnt(E,t)}catch(_){console.error("Error saving mind map:",_),alert("No se pudo guardar el mapa mental.")}},j=E=>{o(E),n("editor")},N=async E=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await znt(E)}catch(_){console.error("Error deleting mind map:",_),alert("No se pudo eliminar el mapa mental.")}},F=()=>{switch(r){case"editor":return i?l.jsx(Q8,{children:l.jsx(Jnt,{mapData:i,onBack:()=>n("list"),onSave:S})}):null;case"config":return l.jsxs("div",{className:"max-w-2xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),l.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:E=>p(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),l.jsx("textarea",{id:"contenido",value:b,onChange:E=>y(E.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?l.jsx(Knt,{}):"Generar Mapa con IA"})})]})]});case"list":default:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),l.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(E=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx("button",{onClick:()=>j(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),l.jsx("button",{onClick:()=>N(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):l.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?l.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("span",{className:"text-4xl",children:"🧠"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),F()]})},eat=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),tat=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),rat=({onBack:e,currentUser:t})=>{const[r,n]=k.useState([]),[a,s]=k.useState("Media"),[i,o]=k.useState(10),[c,u]=k.useState(!1),[d,f]=k.useState(Array(10).fill("")),[h,p]=k.useState(""),[g,x]=k.useState(null),[b,y]=k.useState({ai:!1,puzzle:!1,data:!0}),w=k.useRef(null);k.useEffect(()=>{y(D=>({...D,data:!0}));const P=$nt(D=>{n(D),y(I=>({...I,data:!1}))});return()=>P()},[]),k.useEffect(()=>{f(P=>{const D=Array(i).fill("");for(let I=0;I<Math.min(P.length,i);I++)D[I]=P[I];return D})},[i]);const S=(P,D)=>{const I=[...d];I[P]=D,f(I)},j=async()=>{if(h.trim()){y(P=>({...P,ai:!0}));try{const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",I=new Bs(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}),U=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,X=(await(await I.generateContent(U)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(X);if(!V.palabras||!Array.isArray(V.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const q=[...V.palabras.map(ne=>ne.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;q.length<i;)q.push("");f(q)}catch(P){console.error("Error generating words with AI:",P),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(P=>({...P,ai:!1}))}}},N=(P,D,I,U,R,Y)=>{for(let H=0;H<P.length;H++){const X=I+H*R.y,V=U+H*R.x;if(X<0||X>=Y||V<0||V>=Y||D[X][V]&&D[X][V]!==P[H])return!1}return!0},F=(P,D,I,U,R)=>{for(let Y=0;Y<P.length;Y++)D[I+Y*R.y][U+Y*R.x]=P[Y]},E=async()=>{y(X=>({...X,puzzle:!0})),x(null),await new Promise(X=>setTimeout(X,100));const P=d.map(X=>X.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(P.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(X=>({...X,puzzle:!1}));return}const D=Math.max(...P.map(X=>X.length));let I=Math.max(D,P.length)+2;a==="Media"&&(I+=3),a==="Difícil"&&(I+=5),I=Math.min(Math.max(I,10),25);const U=Array(I).fill(null).map(()=>Array(I).fill(null)),R=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&R.push({x:1,y:-1}),a==="Difícil"&&R.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const X of P.sort((V,z)=>z.length-V.length)){let V=!1;for(let z=0;z<100;z++){const q=R[Math.floor(Math.random()*R.length)],ne=Math.floor(Math.random()*I),M=Math.floor(Math.random()*I);if(N(X,U,ne,M,q,I)){F(X,U,ne,M,q),V=!0;break}}V||console.warn(`No se pudo colocar la palabra: ${X}`)}const Y=U.map(X=>X.map(V=>V||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),H={tema:h||"Personalizado",grid:Y.map(X=>X.join("")),words:P.sort()};try{const X=await Gnt(H,t);x({...H,id:X,createdAt:new Date().toISOString()})}catch(X){console.error("Error saving puzzle:",X),alert("No se pudo guardar la sopa de letras.")}finally{y(X=>({...X,puzzle:!1}))}},_=()=>{w.current&&Ck(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(P=>{const D=document.createElement("a");D.download="sopa-de-letras.png",D.href=P,D.click()}).catch(P=>{console.error("oops, something went wrong!",P),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},B=()=>{var I;if(!g)return null;const P=((I=g.grid[0])==null?void 0:I.length)||1,D=g.grid.join("").split("");return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:w,className:"p-6 bg-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsx("div",{className:"md:col-span-2",children:l.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${P}, minmax(0, 1fr))`},children:D.map((U,R)=>l.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:U},R))})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),l.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(U=>l.jsx("li",{children:U},U))})]})]})}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),l.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return b.data?l.jsx("div",{className:"text-center py-10",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🅰️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),l.jsxs("select",{value:a,onChange:P=>s(P.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:"Fácil"}),l.jsx("option",{children:"Media"}),l.jsx("option",{children:"Difícil"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(P=>l.jsx("button",{onClick:()=>{o(P),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&i===P?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:P},P)),l.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&l.jsx("input",{type:"number",value:i,onChange:P=>o(parseInt(P.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:P=>p(P.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:j,disabled:b.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:b.ai?l.jsx(eat,{}):l.jsxs(l.Fragment,{children:[l.jsx(tat,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((P,D)=>l.jsx("input",{type:"text",value:P,onChange:I=>S(D,I.target.value),placeholder:`Palabra ${D+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},D))})]}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:E,disabled:b.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:b.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&B()]})},nat=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),aat=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),sat=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=k.useState(e),[s,i]=k.useState(null),o=k.useRef(null),c=(p,g,x)=>{a(b=>({...b,events:b.events.map(y=>y.id===p?{...y,[g]:x}:y)}))},u=()=>{const p={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,p].sort((x,b)=>parseInt(x.date)-parseInt(b.date));a(x=>({...x,events:g}))},d=p=>{a(g=>({...g,events:g.events.filter(x=>x.id!==p)}))},f=async p=>{if(!p.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(p.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${p.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const N=(await(await new Bs(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),F=JSON.parse(N);a(E=>({...E,events:E.events.map(_=>_.id===p.id?{..._,date:F.date,description:F.description,icon:F.icon}:_).sort((_,B)=>parseInt(_.date)-parseInt(B.date))}))}catch(b){console.error("Error al generar descripción del hito:",b),alert("No se pudo autocompletar el hito.")}finally{i(null)}},h=()=>{o.current&&Ck(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(p=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=p,g.click()}).catch(p=>{console.error("Error al generar la imagen:",p),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),l.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:l.jsxs("div",{ref:o,className:"relative p-10",children:[l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),l.jsx("div",{className:"relative",children:n.events.sort((p,g)=>parseInt(p.date)-parseInt(g.date)).map((p,g)=>{const x=g%2===0;return l.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[l.jsx("div",{className:"w-1/2",children:x&&l.jsx("div",{className:"text-right pr-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})}),l.jsx("div",{className:"z-10 flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),l.jsx("div",{className:"w-1/2",children:!x&&l.jsx("div",{className:"text-left pl-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})})]},p.id)})})]})}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(p=>l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[l.jsx("input",{type:"text",value:p.date,onChange:g=>c(p.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("textarea",{value:p.description,onChange:g=>c(p.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),l.jsx("button",{onClick:()=>f(p),disabled:s===p.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===p.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):l.jsx(aat,{})})]}),l.jsx("button",{onClick:()=>d(p.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},p.id))}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[l.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),l.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},iat=({onBack:e,currentUser:t})=>{const[r,n]=k.useState("list"),[a,s]=k.useState([]),[i,o]=k.useState(null),[c,u]=k.useState(!1),[d,f]=k.useState(!0),[h,p]=k.useState(""),[g,x]=k.useState(""),[b,y]=k.useState("");k.useEffect(()=>{f(!0);const N=Rnt(F=>{s(F),f(!1)});return()=>N()},[]);const w=async N=>{if(N.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const F="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=g&&b?`entre ${g} y ${b}`:g?`a partir de ${g}`:b?`hasta ${b}`:"",_=`
            Genera una línea de tiempo sobre el tema "${h}" ${E}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const R=(await(await new Bs(F).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(_)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(R);if(!Y.events||!Array.isArray(Y.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const H={tema:h,fechaInicio:g,fechaFin:b,events:Y.events.map(V=>({id:crypto.randomUUID(),date:V.date||"Sin fecha",description:V.description||"Sin descripción",icon:V.icon||"🗓️"}))},X=await Mnt(H,t);o({...H,id:X,createdAt:new Date().toISOString()}),n("editor")}catch(B){console.error("AI Generation Error:",B),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},S=async N=>{try{await Lnt(N,t),n("list"),o(null)}catch(F){console.error("Error saving timeline:",F),alert("No se pudo guardar la línea de tiempo.")}},j=async N=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await Unt(N)}catch(F){console.error("Error deleting timeline:",F),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?l.jsx(sat,{timeline:i,onSave:S,onBack:()=>n("list")}):d?l.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🕒"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:N=>p(N.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),l.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:N=>x(N.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),l.jsx("input",{type:"text",id:"fechaFin",value:b,onChange:N=>y(N.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?l.jsx(nat,{}):"Generar con IA"})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(N=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:N.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(N.createdAt).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{o(N),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),l.jsx("button",{onClick:()=>j(N.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},N.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},oat=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Gq=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),lat=({onBack:e,currentUser:t})=>{const[r,n]=k.useState([]),[a,s]=k.useState(10),[i,o]=k.useState(!1),[c,u]=k.useState(Array(10).fill("")),[d,f]=k.useState(Array(10).fill("")),[h,p]=k.useState(""),[g,x]=k.useState(null),[b,y]=k.useState(!1),[w,S]=k.useState({ai:!1,puzzle:!1,data:!0}),[j,N]=k.useState(null),F=k.useRef(null);k.useEffect(()=>{S(Y=>({...Y,data:!0}));const R=Dnt(Y=>{const H=Y.map(X=>{const{grid_flat:V,grid_width:z,...q}=X,ne=[];if(V&&z>0)for(let M=0;M<V.length;M+=z)ne.push(V.slice(M,M+z));return{...q,grid:ne}});n(H),S(X=>({...X,data:!1}))});return()=>R()},[]),k.useEffect(()=>{const R=a;u(Y=>Array.from({length:R},(H,X)=>Y[X]||"")),f(Y=>Array.from({length:R},(H,X)=>Y[X]||""))},[a]);const E=(R,Y)=>{const H=[...c];H[R]=Y,u(H)},_=(R,Y)=>{const H=[...d];H[R]=Y,f(H)},B=async()=>{if(h.trim()){S(R=>({...R,ai:!0}));try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new Bs(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),X=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let ne=(await(await H.generateContent(X)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const M=ne.indexOf("{"),W=ne.lastIndexOf("}");M!==-1&&W!==-1&&(ne=ne.substring(M,W+1)),ne=ne.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),ne.includes("__SPLIT__")&&(ne=ne.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(ce,oe,le,pe)=>{const Be=le.split("__SPLIT__").map(te=>te.trim().replace(/,$/,""));return oe+Be.join(",")+pe})),ne=ne.replace(/,\s*]/g,"]");let Z;try{Z=JSON.parse(ne)}catch{console.error("Respuesta IA no es JSON válido:",ne),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),S(oe=>({...oe,ai:!1}));return}if(!Z.items||!Array.isArray(Z.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const re=Z.items.map(ce=>(ce.word||"").toUpperCase().replace(/\s/g,"")),ae=Z.items.map(ce=>ce.clue||"");u(Array.from({length:a},(ce,oe)=>re[oe]||"")),f(Array.from({length:a},(ce,oe)=>ae[oe]||""))}catch(R){console.error("Error generating words/clues with AI:",R),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{S(R=>({...R,ai:!1}))}}},P=async R=>{const Y=c[R];if(!Y||!Y.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}N(R);try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new Bs(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}),z=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${Y}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,W=(await(await V.generateContent(z)).response).text().replace(/^```json\s*|```\s*$/g,""),Z=JSON.parse(W);Z.clue&&_(R,Z.clue)}catch(H){console.error("Error generating clue with AI:",H),alert("No se pudo generar la pista.")}finally{N(null)}},D=k.useCallback(()=>{try{const R=c.map((Ie,Ue)=>({word:Ie.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[Ue]})).filter(Ie=>Ie.word.length>0);if(R.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;R.sort((Ie,Ue)=>Ue.word.length-Ie.word.length);const Y=R[0].word.length,H=Math.max(Y,R.length)*2;let X=Array.from({length:H},()=>Array(H).fill(null));const V=[],z=R.shift(),q=Math.floor(H/2),ne=Math.floor((H-z.word.length)/2);for(let Ie=0;Ie<z.word.length;Ie++)X[q][ne+Ie]=z.word[Ie];V.push({word:z.word,clue:z.clue,direction:"across",row:q,col:ne});for(const Ie of R){let Ue={score:-1,row:-1,col:-1,direction:"across"};for(const Ye of V)for(let ye=0;ye<Ye.word.length;ye++)for(let Oe=0;Oe<Ie.word.length;Oe++)if(Ye.word[ye]===Ie.word[Oe]){let Re=0,qe,Ze,lt;Ye.direction==="across"?(lt="down",qe=Ye.row-Oe,Ze=Ye.col+ye):(lt="across",qe=Ye.row+ye,Ze=Ye.col-Oe);let mt=!0;for(let It=0;It<Ie.word.length;It++){const Mt=qe+(lt==="down"?It:0),Pt=Ze+(lt==="across"?It:0);if(Mt<0||Mt>=H||Pt<0||Pt>=H){mt=!1;break}const Qt=X[Mt][Pt],yt=Mt===Ye.row+(Ye.direction==="down"?ye:0)&&Pt===Ye.col+(Ye.direction==="across"?ye:0);if(Qt&&!yt){mt=!1;break}if(Qt&&yt&&Qt!==Ie.word[Oe]){mt=!1;break}if(!yt){if(lt==="across"&&(Mt>0&&X[Mt-1][Pt]||Mt<H-1&&X[Mt+1][Pt])){mt=!1;break}if(lt==="down"&&(Pt>0&&X[Mt][Pt-1]||Pt<H-1&&X[Mt][Pt+1])){mt=!1;break}}Qt&&Re++}mt&&Re>Ue.score&&(Ue={score:Re,row:qe,col:Ze,direction:lt})}if(Ue.score>-1){for(let Ye=0;Ye<Ie.word.length;Ye++){const ye=Ue.row+(Ue.direction==="down"?Ye:0),Oe=Ue.col+(Ue.direction==="across"?Ye:0);X[ye][Oe]=Ie.word[Ye]}V.push({word:Ie.word,clue:Ie.clue,direction:Ue.direction,row:Ue.row,col:Ue.col})}}let M=H,W=-1,Z=H,re=-1;V.forEach(Ie=>{M=Math.min(M,Ie.row),W=Math.max(W,Ie.row+(Ie.direction==="down"?Ie.word.length-1:0)),Z=Math.min(Z,Ie.col),re=Math.max(re,Ie.col+(Ie.direction==="across"?Ie.word.length-1:0))}),W===-1&&(M=V[0].row,W=V[0].row,Z=V[0].col,re=V[0].col+V[0].word.length-1);const ae=1,ce=Math.max(0,M-ae),oe=Math.min(H,W+1+ae),le=Math.max(0,Z-ae),pe=Math.min(H,re+1+ae),Be=X.slice(ce,oe).map(Ie=>Ie.slice(le,pe)),te=V.map(Ie=>({...Ie,row:Ie.row-ce,col:Ie.col-le})).sort((Ie,Ue)=>Ie.row-Ue.row||Ie.col-Ue.col);let _e=1;const De=[],Ne=new Map;te.forEach(Ie=>{const Ue=`${Ie.row},${Ie.col}`;Ne.has(Ue)||Ne.set(Ue,_e++),De.push({...Ie,number:Ne.get(Ue)})});const fe=Be.map(Ie=>Ie.map(Ue=>({char:Ue,number:null})));return De.forEach(Ie=>{const Ue=`${Ie.row},${Ie.col}`;fe[Ie.row]&&fe[Ie.row][Ie.col]!==void 0&&(fe[Ie.row][Ie.col].number=Ne.get(Ue))}),{grid:fe,clues:{across:De.filter(Ie=>Ie.direction==="across").sort((Ie,Ue)=>Ie.number-Ue.number),down:De.filter(Ie=>Ie.direction==="down").sort((Ie,Ue)=>Ie.number-Ue.number)}}}catch(R){return console.error("Error generating crossword grid:",R),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),I=async()=>{var Y;S(H=>({...H,puzzle:!0})),x(null),await new Promise(H=>setTimeout(H,100));const R=D();if(R){const H={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:R.grid,clues:R.clues},{grid:X,...V}=H,z={...V,grid_flat:X.flat().map(q=>q.char||""),grid_width:((Y=X[0])==null?void 0:Y.length)||0};try{const q=await Pnt(z,t);x({...H,id:q,fechaCreacion:new Date().toISOString()})}catch(q){console.error("Error saving puzzle:",q),alert("No se pudo guardar el crucigrama en la base de datos.")}}S(H=>({...H,puzzle:!1}))},U=()=>{F.current&&(y(!1),setTimeout(()=>{Ck(F.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(R=>{const Y=document.createElement("a");Y.download="crucigrama.png",Y.href=R,Y.click()}).catch(R=>console.error("Error generating image",R))},100))};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"✏️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:F,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsx("div",{children:l.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((R,Y)=>l.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:R.char?"white":"black"},children:[R.number&&l.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:R.number}),b&&R.char&&l.jsx("span",{children:R.char})]},Y))})}),l.jsxs("div",{className:"text-sm",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.across.map(R=>l.jsxs("li",{children:[l.jsxs("strong",{children:[R.number,"."]})," ",R.clue]},`${R.word}-${R.clue}`))}),l.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.down.map(R=>l.jsxs("li",{children:[l.jsxs("strong",{children:[R.number,"."]})," ",R.clue]},`${R.word}-${R.clue}`))})]})]})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:b,onChange:()=>y(!b),className:"h-5 w-5 rounded"}),l.jsx("span",{children:"Mostrar Solución"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),l.jsx("button",{onClick:U,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(R=>l.jsx("button",{onClick:()=>{s(R),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===R?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:R},R)),l.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&l.jsx("input",{type:"number",value:a,onChange:R=>s(parseInt(R.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:R=>p(R.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:B,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?l.jsx(oat,{}):l.jsxs(l.Fragment,{children:[l.jsx(Gq,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((R,Y)=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsx("input",{type:"text",value:c[Y],onChange:H=>E(Y,H.target.value),placeholder:`Palabra ${Y+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[l.jsx("textarea",{value:d[Y],onChange:H=>_(Y,H.target.value),placeholder:`Pista ${Y+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:()=>P(Y),disabled:j===Y,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:j===Y?l.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):l.jsx(Gq,{})})]})]},Y))}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:I,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},cat=()=>{const[e,t]=k.useState(null),[r,n]=k.useState(!0);return k.useEffect(()=>{const a=IY(N6,async s=>{if(s&&s.email)try{const i=await qZ(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},uat=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],dat=({recurso:e,onClick:t})=>l.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[l.jsx("div",{className:"text-6xl mb-4",children:e.icon}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),Aat=()=>{const[e,t]=k.useState("menu"),{currentUser:r}=cat(),n=()=>e!=="menu"&&!r?l.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?l.jsx(Znt,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?l.jsx(rat,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?l.jsx(iat,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?l.jsx(lat,{onBack:()=>t("menu"),currentUser:r}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:uat.map(a=>l.jsx(dat,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return l.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},fat="evaluaciones_formativas",hat="calificaciones_formativas",zce="trabajos_grupales_formativos",$ce=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},mat=(e,t)=>{const r=Wt(Tt(pt,fat),nn("curso","==",e));return pr(r,n=>{t(n.docs.map(a=>$ce(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},pat=e=>{const t=Wt(Tt(pt,hat));return pr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},gat=(e,t)=>{const r=Wt(Tt(pt,zce),nn("curso","==",e));return pr(r,n=>{t(n.docs.map(a=>$ce(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},xat=async e=>{try{const{id:t,...r}=e,n=dr(pt,zce,t);await Yi(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},vat=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState({}),[s,i]=k.useState([]),[o,c]=k.useState(!0),[u,d]=k.useState(null),[f,h]=k.useState(!1),[p,g]=k.useState(null),x=k.useRef(null);k.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const j=mat(e.curso,r),N=pat(a),F=gat(e.curso,E=>{i(E),c(!1)});return()=>{j(),N(),F()}},[e.curso]);const b=k.useMemo(()=>{if(!e.curso)return[];const N=t.filter(F=>F.curso===e.curso).reduce((F,E)=>((F[E.asignatura]=F[E.asignatura]||[]).push(E),F),{});return Object.entries(N).map(([F,E])=>{let _=0,B=0;const P=E.map(I=>{var Y;const U=(Y=n[I.id])==null?void 0:Y[e.nombreCompleto];let R="No Trabajado";return U==="trabajado"?(_+=7,B++,R="Trabajado"):U==="no trabajado"&&(_+=2,B++,R="No Trabajado"),{id:I.id,nombreActividad:I.nombreActividad,fecha:I.fecha,estado:R}}).filter(I=>{var U;return(U=n[I.id])==null?void 0:U[e.nombreCompleto]}),D=B>0?(_/B).toFixed(1):"N/A";return{asignatura:F,promedio:D,actividades:P.sort((I,U)=>new Date(U.fecha).getTime()-new Date(I.fecha).getTime())}}).filter(F=>F.actividades.length>0).sort((F,E)=>F.asignatura.localeCompare(E.asignatura))},[t,n,e]);k.useEffect(()=>{if(b.reduce((B,P)=>B+P.actividades.length,0)===0){d(null);return}const N=b.reduce((B,P)=>{const D=parseFloat(P.promedio);return isNaN(D)?B:B+D},0),F=b.length>0?N/b.length:0,E=hC.find(B=>F>=B.promedioMin&&F<=B.promedioMax)||null,_=hC.filter(B=>F>=B.promedioMin);if(d({puntajeTotal:0,promedio:F,rangoActual:E,insigniasGanadas:_}),x.current!==null){const B=hC.find(P=>x.current>=P.promedioMin&&x.current<=P.promedioMax)||null;E&&(!B||E.nombre!==B.nombre)&&g(E)}x.current=F},[b]);const y=k.useMemo(()=>e.curso?s.filter(j=>j.curso===e.curso).map(j=>{const N=j.grupos.find(F=>F.integrantes.some(E=>E.nombre===e.nombreCompleto));return N?{...j,miGrupo:N}:null}).filter(j=>j!==null).sort((j,N)=>new Date(N.fechaPresentacion).getTime()-new Date(j.fechaPresentacion).getTime()):[],[s,e]),w=async(j,N)=>{const F=s.find(_=>_.id===j);if(!F)return;const E={...F,grupos:F.grupos.map(_=>_.integrantes.some(P=>P.nombre===e.nombreCompleto)?{..._,integrantes:_.integrantes.map(P=>P.nombre===e.nombreCompleto?{...P,rol:N||void 0}:P)}:_)};try{await xat(E)}catch(_){console.error("Error updating role:",_),alert("No se pudo actualizar el rol.")}},S=j=>{const N=parseFloat(j);return isNaN(N)?"bg-slate-400":N<4?"bg-red-500":N<5.5?"bg-yellow-500":"bg-green-500"};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:j=>j.stopPropagation(),children:[l.jsx("div",{className:"text-8xl animate-bounce",children:p.emoji}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),l.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:p.nombre}),l.jsx("p",{className:"text-slate-600 mt-4",children:p.mensaje}),l.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:j=>j.stopPropagation(),children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),l.jsx("div",{className:"overflow-y-auto space-y-3",children:hC.map(j=>{const N=u==null?void 0:u.insigniasGanadas.some(F=>F.nombre===j.nombre);return l.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${N?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[l.jsx("div",{className:"text-5xl",children:j.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold ${N?"text-amber-700":"text-slate-600"}`,children:j.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",j.promedioMin," y ",j.promedioMax]})]})]},j.nombre)})})]})}),l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),l.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),l.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),l.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),l.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(j=>l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:j.asignatura}),l.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),l.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${S(j.promedio)}`,children:j.promedio})]}),l.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),j.actividades.map(N=>l.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-700",children:N.nombreActividad}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(N.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),l.jsx("span",{className:`font-semibold ${N.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:N.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},N.id))]})]},j.asignatura))}):l.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"📊"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),l.jsx("div",{className:"space-y-4",children:y.map(j=>{const N=j.miGrupo.integrantes.filter(E=>E.nombre!==e.nombreCompleto&&E.rol).map(E=>E.rol),F=XZ.filter(E=>!N.includes(E));return l.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-bold text-slate-800",children:j.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:[j.asignatura," - Presentación: ",new Date(j.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-3 pt-3 border-t",children:[l.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",j.miGrupo.numero]}),l.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:j.miGrupo.integrantes.map(E=>l.jsxs("li",{className:"grid grid-cols-2 items-center",children:[l.jsx("span",{className:E.nombre===e.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===e.nombreCompleto?l.jsxs("select",{value:E.rol||"",onChange:_=>w(j.id,_.target.value),className:"text-sm p-1 border rounded w-full",children:[l.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!F.includes(E.rol)&&l.jsx("option",{value:E.rol,children:E.rol}),F.map(_=>l.jsx("option",{value:_,children:_},_))]}):l.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},j.id)})})]})]})},bat="proyectos_interdisciplinarios",Gce="entregas_interdisciplinarias",Kce=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},yat=(e,t)=>{const r=Wt(Tt(pt,bat),nn("cursos","array-contains",e));return pr(r,n=>{const a=n.docs.map(s=>Kce(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},wat=(e,t)=>{const r=Wt(Tt(pt,Gce),nn("estudianteId","==",e));return pr(r,n=>{const a=n.docs.map(s=>Kce(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},Eat=async e=>{try{const{id:t,...r}=e,n=dr(pt,Gce,t),a={...r,fechaCompletado:ir.fromDate(new Date(r.fechaCompletado||Date.now()))};await Yi(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},Cat=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState([]),[s,i]=k.useState(null),[o,c]=k.useState(!0);k.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=yat(e.curso,r),h=wat(e.id,p=>{a(p),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await Eat(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const p=k.useMemo(()=>{const N=n.find(F=>F.planificacionId===f.id&&F.tareaId===h.id);return N||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,x]=k.useState(!1),[b,y]=k.useState({observaciones:p.observacionesEstudiante||"",enlace:p.enlaceUrl||""}),w=N=>{var E;const F=(E=N.target.files)==null?void 0:E[0];F&&(alert(`Simulación: Archivo "${F.name}" listo para subir.`),u({...p,archivoAdjunto:{nombre:F.name,url:`simulated/path/${F.name}`},fechaCompletado:new Date().toISOString()}))},S=()=>{u({...p,observacionesEstudiante:b.observaciones,enlaceUrl:b.enlace,fechaCompletado:new Date().toISOString()})},j=()=>{u({...p,completada:!p.completada,fechaCompletado:new Date().toISOString()})};return l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("input",{type:"checkbox",checked:p.completada,onChange:j,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:`font-semibold ${p.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&l.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),l.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[l.jsx("textarea",{value:b.observaciones,onChange:N=>y({...b,observaciones:N.target.value}),onBlur:S,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"url",value:b.enlace,onChange:N=>y({...b,enlace:N.target.value}),onBlur:S,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"file",onChange:w,className:"text-sm"}),p.archivoAdjunto&&l.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",p.archivoAdjunto.nombre]})]}),p.feedbackProfesor&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[l.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p.feedbackProfesor})]})]})};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(b=>b.planificacionId===f.id).filter(b=>b.completada).length,x=h.length>0?g/h.length*100:0;return l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[l.jsxs("button",{onClick:()=>i(s===f.id?null:f.id),className:"w-full text-left",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[l.jsx("span",{children:"Progreso"}),l.jsxs("span",{children:[Math.round(x),"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&l.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(b=>l.jsx(d,{plan:f,tarea:b},b.id)):l.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):l.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[l.jsx("span",{className:"text-5xl",children:"🎉"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},_at=({data:e})=>l.jsx("div",{className:"space-y-4",children:e.map((r,n)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),l.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),Sat=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState(!1),[s,i]=k.useState(null),[o,c]=k.useState(null),[u,d]=k.useState(Qy),f=k.useCallback(async()=>{a(!0);try{const b=(await NDe(e.nombreCompleto)).sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime());r(b),i(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=k.useCallback(async()=>{try{const x=await kDe();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);k.useEffect(()=>{f(),h()},[f,h]);const p=k.useMemo(()=>{if(!o)return[];const x={};return u.forEach(b=>{x[b.domain]={total:0,count:0},b.criteria.forEach(y=>{const w=o.rubricaResultados[y.name];w&&(x[b.domain].total+=w,x[b.domain].count++)})}),Object.entries(x).map(([b,y])=>({label:b,value:y.count>0?y.total/y.count:0}))},[o,u]),g=x=>{const b=new vr;b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),b.setFont("helvetica","bold"),b.setFontSize(16),b.setTextColor(40),b.text("Informe de Acompañamiento Docente",b.internal.pageSize.getWidth()/2,25,{align:"center"}),b.setFontSize(12),b.setFont("helvetica","normal"),go(b,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=b.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const j=[],N=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(F=>{j.push([{content:F.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),F.criteria.forEach(E=>{const _=x.rubricaResultados[E.name],B=_?N[_-1]:"No evaluado";j.push([E.name,B])})}),go(b,{startY:y,head:[["Indicador","Nivel de Logro"]],body:j,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=b.lastAutoTable.finalY+15}const w=(j,N)=>{if(!N)return;y>250&&(b.addPage(),y=20,b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(40),b.text(j,14,y),y+=8,b.setFont("helvetica","normal"),b.setFontSize(11),b.setTextColor(60);const F=b.splitTextToSize(N.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);b.text(F,14,y),y+=F.length*5+10};w("Observaciones Generales",x.observacionesGenerales),w("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const S=b.getNumberOfPages();for(let j=1;j<=S;j++)b.setPage(j),b.setFontSize(8),b.setTextColor(128),b.text(`Página ${j} de ${S}`,b.internal.pageSize.getWidth()/2,b.internal.pageSize.getHeight()-10,{align:"center"});b.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),l.jsxs("button",{onClick:()=>g(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[l.jsx(WZ,{})," Exportar PDF"]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),l.jsx("h3",{children:"Observaciones Generales"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx(_at,{data:p})})]})]})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),l.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(x=>l.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),l.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&l.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"👍"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},Nat=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=Tt(tn,"planificaciones"),r=Wt(t,Tr("fechaCreacion","desc"));return pr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},kat=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=Tt(tn,"planificaciones"),n=Wt(r,nn("userId","==",e),Tr("fechaCreacion","desc"));return pr(n,s=>{const i=[];s.forEach(o=>{const c=o.data();i.push({id:o.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function Bat(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const Tat=Bat("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var jat={value:function(){}};function qce(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new tS(r)}function tS(e){this._=e}function Iat(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}tS.prototype=qce.prototype={constructor:tS,on:function(e,t){var r=this._,n=Iat(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=Fat(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=Kq(r[a],e.name,t);else if(t==null)for(a in r)r[a]=Kq(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new tS(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function Fat(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function Kq(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=jat,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const Oat=Object.freeze(Object.defineProperty({__proto__:null,dispatch:qce},Symbol.toStringTag,{value:"Module"})),Dat=rfe(Oat);var iI,qq;function Pat(){if(qq)return iI;qq=1;const e=Dat.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:b},n=64,a=2048;iI=function(){var j=[256,256],N=s,F=i,E=c,_=o,B=o,P=u,D=d,I=x,U=[],R=1/0,Y=e("word","end"),H=null,X=Math.random,V={},z=w;V.canvas=function(M){return arguments.length?(z=S(M),V):z},V.start=function(){var M=q(z()),W=y((j[0]>>5)*j[1]),Z=null,re=U.length,ae=-1,ce=[],oe=U.map(function(pe,Be){return pe.text=N.call(this,pe,Be),pe.font=F.call(this,pe,Be),pe.style=_.call(this,pe,Be),pe.weight=B.call(this,pe,Be),pe.rotate=P.call(this,pe,Be),pe.size=~~E.call(this,pe,Be),pe.padding=D.call(this,pe,Be),pe}).sort(function(pe,Be){return Be.size-pe.size});return H&&clearInterval(H),H=setInterval(le,0),le(),V;function le(){for(var pe=Date.now();Date.now()-pe<R&&++ae<re&&H;){var Be=oe[ae];Be.x=j[0]*(X()+.5)>>1,Be.y=j[1]*(X()+.5)>>1,f(M,Be,oe,ae),Be.hasText&&ne(W,Be,Z)&&(ce.push(Be),Y.call("word",V,Be),Z?p(Z,Be):Z=[{x:Be.x+Be.x0,y:Be.y+Be.y0},{x:Be.x+Be.x1,y:Be.y+Be.y1}],Be.x-=j[0]>>1,Be.y-=j[1]>>1)}ae>=re&&(V.stop(),Y.call("end",V,ce,Z))}},V.stop=function(){H&&(clearInterval(H),H=null);for(const M of U)delete M.sprite;return V};function q(M){const W=M.getContext("2d",{willReadFrequently:!0});M.width=M.height=1;const Z=Math.sqrt(W.getImageData(0,0,1,1).data.length>>2);return M.width=(n<<5)/Z,M.height=a/Z,W.fillStyle=W.strokeStyle="red",{context:W,ratio:Z}}function ne(M,W,Z){j[0],j[1];for(var re=W.x,ae=W.y,ce=Math.sqrt(j[0]*j[0]+j[1]*j[1]),oe=I(j),le=X()<.5?1:-1,pe=-le,Be,te,_e;(Be=oe(pe+=le))&&(te=~~Be[0],_e=~~Be[1],!(Math.min(Math.abs(te),Math.abs(_e))>=ce));)if(W.x=re+te,W.y=ae+_e,!(W.x+W.x0<0||W.y+W.y0<0||W.x+W.x1>j[0]||W.y+W.y1>j[1])&&(!Z||g(W,Z))&&!h(W,M,j[0])){for(var De=W.sprite,Ne=W.width>>5,fe=j[0]>>5,Ie=W.x-(Ne<<4),Ue=Ie&127,Ye=32-Ue,ye=W.y1-W.y0,Oe=(W.y+W.y0)*fe+(Ie>>5),Re,qe=0;qe<ye;qe++){Re=0;for(var Ze=0;Ze<=Ne;Ze++)M[Oe+Ze]|=Re<<Ye|(Ze<Ne?(Re=De[qe*Ne+Ze])>>>Ue:0);Oe+=fe}return!0}return!1}return V.timeInterval=function(M){return arguments.length?(R=M??1/0,V):R},V.words=function(M){return arguments.length?(U=M,V):U},V.size=function(M){return arguments.length?(j=[+M[0],+M[1]],V):j},V.font=function(M){return arguments.length?(F=S(M),V):F},V.fontStyle=function(M){return arguments.length?(_=S(M),V):_},V.fontWeight=function(M){return arguments.length?(B=S(M),V):B},V.rotate=function(M){return arguments.length?(P=S(M),V):P},V.text=function(M){return arguments.length?(N=S(M),V):N},V.spiral=function(M){return arguments.length?(I=r[M]||M,V):I},V.fontSize=function(M){return arguments.length?(E=S(M),V):E},V.padding=function(M){return arguments.length?(D=S(M),V):D},V.random=function(M){return arguments.length?(X=M,V):X},V.on=function(){var M=Y.on.apply(Y,arguments);return M===Y?V:M},V};function s(j){return j.text}function i(){return"serif"}function o(){return"normal"}function c(j){return Math.sqrt(j.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(j,N,F,E){if(!N.sprite){var _=j.context,B=j.ratio;_.clearRect(0,0,(n<<5)/B,a/B);var P=0,D=0,I=0,U=F.length;for(--E;++E<U;){N=F[E],_.save(),_.font=N.style+" "+N.weight+" "+~~((N.size+1)/B)+"px "+N.font;const Be=_.measureText(N.text),te=-Math.floor(Be.width/2);let _e=(Be.width+1)*B,De=N.size<<1;if(N.rotate){var R=Math.sin(N.rotate*t),Y=Math.cos(N.rotate*t),H=_e*Y,X=_e*R,V=De*Y,z=De*R;_e=Math.max(Math.abs(H+z),Math.abs(H-z))+31>>5<<5,De=~~Math.max(Math.abs(X+V),Math.abs(X-V))}else _e=_e+31>>5<<5;if(De>I&&(I=De),P+_e>=n<<5&&(P=0,D+=I,I=0),D+De>=a)break;_.translate((P+(_e>>1))/B,(D+(De>>1))/B),N.rotate&&_.rotate(N.rotate*t),_.fillText(N.text,te,0),N.padding&&(_.lineWidth=2*N.padding,_.strokeText(N.text,te,0)),_.restore(),N.width=_e,N.height=De,N.xoff=P,N.yoff=D,N.x1=_e>>1,N.y1=De>>1,N.x0=-N.x1,N.y0=-N.y1,N.hasText=!0,P+=_e}for(var q=_.getImageData(0,0,(n<<5)/B,a/B).data,ne=[];--E>=0;)if(N=F[E],!!N.hasText){for(var M=N.width,W=M>>5,Z=N.y1-N.y0,re=0;re<Z*W;re++)ne[re]=0;if(P=N.xoff,P==null)return;D=N.yoff;for(var ae=0,ce=-1,oe=0;oe<Z;oe++){for(var re=0;re<M;re++){var le=W*oe+(re>>5),pe=q[(D+oe)*(n<<5)+(P+re)<<2]?1<<31-re%32:0;ne[le]|=pe,ae|=pe}ae?ce=oe:(N.y0++,Z--,oe--,D++)}N.y1=N.y0+ce,N.sprite=ne.slice(0,(N.y1-N.y0)*W)}}}function h(j,N,F){F>>=5;for(var E=j.sprite,_=j.width>>5,B=j.x-(_<<4),P=B&127,D=32-P,I=j.y1-j.y0,U=(j.y+j.y0)*F+(B>>5),R,Y=0;Y<I;Y++){R=0;for(var H=0;H<=_;H++)if((R<<D|(H<_?(R=E[Y*_+H])>>>P:0))&N[U+H])return!0;U+=F}return!1}function p(j,N){var F=j[0],E=j[1];N.x+N.x0<F.x&&(F.x=N.x+N.x0),N.y+N.y0<F.y&&(F.y=N.y+N.y0),N.x+N.x1>E.x&&(E.x=N.x+N.x1),N.y+N.y1>E.y&&(E.y=N.y+N.y1)}function g(j,N){return j.x+j.x1>N[0].x&&j.x+j.x0<N[1].x&&j.y+j.y1>N[0].y&&j.y+j.y0<N[1].y}function x(j){var N=j[0]/j[1];return function(F){return[N*(F*=.1)*Math.cos(F),F*Math.sin(F)]}}function b(j){var N=4,F=N*j[0]/j[1],E=0,_=0;return function(B){var P=B<0?-1:1;switch(Math.sqrt(1+4*P*B)-P&3){case 0:E+=F;break;case 1:_+=N;break;case 2:E-=F;break;default:_-=N;break}return[E,_]}}function y(j){for(var N=[],F=-1;++F<j;)N[F]=0;return N}function w(){return document.createElement("canvas")}function S(j){return typeof j=="function"?j:function(){return j}}return iI}var Rat=Pat();const Lat=yl(Rat),Mat=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),Uat=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Qat=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Hat=e=>{const[t,r]=k.useState([]),[n,a]=k.useState(!0),[s,i]=k.useState(null),o=k.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return k.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),i(null)};if(o)c=Nat(u);else{const d=e.email||e.id||"";c=kat(u,d)}return c}catch(c){i(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:s,canViewAllPlans:o}},Vat=({plan:e,onClose:t})=>l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[l.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),l.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:l.jsx(Uat,{})})]}),l.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{className:"mt-2",children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsx("div",{className:"mt-3",children:l.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),l.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>l.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?l.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>l.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[l.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),Wq=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],zat=["1º Medio","2º Medio","3º Medio","4º Medio"],$at=({words:e})=>{const t=k.useRef(null);return k.useEffect(()=>{if(!e.length||!t.current)return;const r=Su(t.current);r.selectAll("*").remove();const n=Lat().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>q4(Tat)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),l.jsx("svg",{ref:t})},Gat=({planificaciones:e})=>{const[t,r]=k.useState("todos"),[n,a]=k.useState("todos"),s=k.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=k.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),o=k.useMemo(()=>{const d=Wq.reduce((f,h)=>({...f,[h]:0}),{});return i.forEach(f=>{var h,p;return(p=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:p.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=Wq.length-x)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[i]),c=k.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(i.map(p=>{var g,x;return`${((g=p.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=p.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((p,g)=>(d.has(g)||(p[g]=(p[g]||0)+1),p),{});return Object.entries(h).map(([p,g])=>({text:p,value:g})).sort((p,g)=>g.value-p.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[l.jsx("option",{value:"todos",children:"Todos los Niveles"}),zat.map(d=>l.jsx("option",{value:d,children:d},d))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>l.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):l.jsx("ul",{className:"space-y-3",children:o.map((d,f)=>l.jsxs("li",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:l.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?l.jsx($at,{words:c}):l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},Kat=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=Hat(e),[s,i]=k.useState("seguimiento"),[o,c]=k.useState("1º"),[u,d]=k.useState(null),[f,h]=k.useState(null),p=k.useMemo(()=>{const b={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===b[o]&&y.tipo==="Unidad")},[t,o]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{children:"Usuario no autenticado."})});if(r)return l.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[l.jsx(Qat,{}),l.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return l.jsx("div",{className:"text-center py-8",children:l.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>l.jsx("button",{onClick:()=>c(b.key),className:`${o===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:b.label},b.key))})}),p.length===0?l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):l.jsx("div",{className:"space-y-4",children:Ki.map(b=>{const y=p.filter(S=>S.asignatura===b);if(y.length===0)return null;const w=u===b;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[l.jsxs("button",{onClick:()=>d(w?null:b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),l.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),l.jsx("span",{className:`transform transition-transform ${w?"rotate-180":""}`,children:l.jsx(Mat,{})})]}),w&&l.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:l.jsx("ul",{className:"space-y-3",children:y.map(S=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>h(S),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:S.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",S.autor||"N/A"]})]})},S.id))})})]},b)})})]});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&l.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),l.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&l.jsx(Gat,{planificaciones:t.filter(b=>b.tipo==="Unidad")})]}),f&&l.jsx(Vat,{plan:f,onClose:()=>h(null)})]})},kk="analisisTaxonomicos",qat=async()=>{try{const e=Wt(Tt(tn,kk),Tr("uploadDate","desc"));return(await ga(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},Wat=async e=>{if(!e)return[];try{const t=Wt(Tt(tn,kk),nn("userId","==",e),Tr("uploadDate","desc"));return(await ga(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},Xat=async e=>{try{return{id:(await Ln(Tt(tn,kk),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},Yat=async e=>{try{const t=dr(tn,kk,e);await Za(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},Xq=["1º Medio","2º Medio","3º Medio","4º Medio"],Pf=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],kx={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},Jat=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Zat=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState(!1),[s,i]=k.useState(null),[o,c]=k.useState(null),[u,d]=k.useState(""),[f,h]=k.useState(!1),[p,g]=k.useState(null),[x,b]=k.useState(null),[y,w]=k.useState(""),[S,j]=k.useState(""),[N,F]=k.useState(""),[E,_]=k.useState(""),[B,P]=k.useState("resumen"),D=k.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const z=e.profile==="SUBDIRECCION"?await qat():await Wat(e.id);r(z),i(null)}catch(z){console.error("Error al cargar análisis:",z),i("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);k.useEffect(()=>{D()},[D]);const I=async z=>{var ne;const q=(ne=z.target.files)==null?void 0:ne[0];if(q){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(q.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}g(q),d(q.name),i(null);const W=new FileReader;W.onloadend=()=>{var re;const Z=(re=W.result)==null?void 0:re.split(",")[1];if(!Z){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),b(null);return}b({mimeType:q.type,data:Z})},W.onerror=()=>i("Error al leer el archivo."),W.readAsDataURL(q)}},U=async()=>{if(!u.trim()||!x){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!S){i("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),i(null);const z=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,q={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:Pf}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:Pf.reduce((ne,M)=>({...ne,[M]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{mm("Análisis Taxonómico",e);const ne="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new Bs(ne).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{responseMimeType:"application/json",responseSchema:q}}),Z={inlineData:{mimeType:x.mimeType,data:x.data}},ae=(await W.generateContent([z,Z])).response.text();let ce;try{ce=JSON.parse(ae)}catch(pe){throw console.error("Error al parsear JSON:",pe),console.error("Respuesta recibida (no es JSON válido):",ae),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const oe={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:ce.analysisResults,summary:ce.summary,nivel:y,asignatura:S},le=await Xat(oe);await D(),c(le),d(""),g(null),b(null),w(""),j("")}catch(ne){console.error(ne);const M=ne instanceof Error?ne.message:"Hubo un error al analizar el documento.";i(M)}finally{h(!1)}},R=async z=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await Yat(z),await D(),(o==null?void 0:o.id)===z&&c(null)}catch{i("No se pudo eliminar el análisis.")}},Y=k.useMemo(()=>t.filter(z=>{const q=N?z.nivel===N:!0,ne=E?z.asignatura===E:!0;return q&&ne}),[t,N,E]),H=k.useMemo(()=>{const z={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};Y.forEach(ne=>{Pf.forEach(M=>{var Z;const W=((Z=ne.summary)==null?void 0:Z[M])||0;z[M]+=W})});const q=Object.values(z).reduce((ne,M)=>ne+M,0);return{acc:z,total:q}},[Y]),X=k.useMemo(()=>{const z=new Map;Y.forEach(ne=>{const M=ne.asignatura||"Sin asignatura";z.has(M)||z.set(M,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const W=z.get(M);Pf.forEach(Z=>{var re;W[Z]+=((re=ne.summary)==null?void 0:re[Z])||0})});const q=Array.from(z.entries()).map(([ne,M])=>({asignatura:ne,counts:M,total:Object.values(M).reduce((W,Z)=>W+Z,0)}));return q.sort((ne,M)=>M.total-ne.total),q},[Y]),V=k.useMemo(()=>o?Object.values(o.summary).reduce((z,q)=>z+(q||0),0):0,[o]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),l.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:l.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:I,accept:".pdf,.doc,.docx"}),l.jsx("span",{children:"Cargue un archivo"})]}),l.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),l.jsx("p",{className:"text-xs text-slate-500",children:p?p.name:"PDF, DOCX hasta 10MB"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:y,onChange:z=>w(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),Xq.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:S,onChange:z=>j(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),Ki.map(z=>l.jsx("option",{value:z,children:z},z))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),l.jsx("input",{type:"text",id:"documentName",value:u,onChange:z=>d(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("button",{onClick:U,disabled:f||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?l.jsx(Jat,{}):"Analizar con IA"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?l.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(z=>l.jsxs("button",{onClick:()=>c(z),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===z.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[l.jsx("p",{className:"font-semibold truncate",children:z.documentName}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(z.uploadDate).toLocaleString("es-CL")}),(z.nivel||z.asignatura)&&l.jsxs("p",{className:"text-xs text-slate-500",children:[z.nivel||"Nivel s/i"," • ",z.asignatura||"Asignatura s/i"]})]},z.id))})]})]}),l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),l.jsxs("select",{value:N,onChange:z=>F(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos"}),Xq.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),l.jsxs("select",{value:E,onChange:z=>_(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas"}),Ki.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsx("button",{type:"button",onClick:()=>{F(""),_("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>P("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${B==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),l.jsx("button",{onClick:()=>P("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${B==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),B==="resumen"?l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Y.length," análisis considerados"]})]}),l.jsx("div",{className:"space-y-3",children:Pf.map(z=>{const q=H.acc[z],ne=H.total>0?q/H.total*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:z}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[q," (",ne.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${kx[z]} h-4 rounded-full`,style:{width:`${ne}%`}})})]},z)})}),l.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:Pf.map(z=>l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[l.jsx("span",{className:"text-sm",children:z}),l.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${kx[z]}`,children:H.acc[z]})]},z))})]}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[X.length," asignaturas comparadas"]})]}),X.length===0?l.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):l.jsx("div",{className:"space-y-5",children:X.map(z=>{const q=z.total||1;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:z.asignatura}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[z.total," ítems"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:Pf.map(ne=>{const M=z.counts[ne]||0,W=M/q*100;return l.jsx("div",{className:`${kx[ne]} h-5`,style:{width:`${W}%`},title:`${ne}: ${M} (${W.toFixed(0)}%)`},ne)})}),l.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Pf.map(ne=>l.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[l.jsx("span",{className:`inline-block w-3 h-3 rounded ${kx[ne]}`}),l.jsx("span",{children:ne})]},ne))})]},z.asignatura)})})]})]}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL"),(o.nivel||o.asignatura)&&l.jsxs(l.Fragment,{children:[" ","• ",o.nivel||"Nivel s/i"," • ",o.asignatura||"Asignatura s/i"]})]})]}),l.jsx("button",{onClick:()=>R(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",V," preguntas)"]}),l.jsx("div",{className:"space-y-3",children:Pf.map(z=>{const q=o.summary[z]||0,ne=V>0?q/V*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:z}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[q," (",ne.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${kx[z]} h-4 rounded-full`,style:{width:`${ne}%`}})})]},z)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),l.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((z,q)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:z.question}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${kx[z.habilidadBloom]}`,children:z.habilidadBloom})})]},q))})]})})]})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},cN="empresas_practicas",est="usuarios",z8="rutas_supervision",$8=e=>{const t=e.data();return{id:e.id,...t}};async function tst(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const rst=e=>{const t=Wt(Tt(pt,cN),Tr("nombre","asc"));return pr(t,r=>{const n=r.docs.map(a=>$8(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},nst=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await tst(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=dr(pt,cN,n);return await Yi(s,a,{merge:!0}),n}else return(await Ln(Tt(pt,cN),{...r,createdAt:el()})).id},ast=async e=>{const t=dr(pt,cN,e);await Za(t)},sst=e=>{const t=Wt(Tt(pt,est),nn("profile","==","PROFESORADO"),Tr("nombreCompleto","asc"));return pr(t,r=>{const n=r.docs.map(a=>$8(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},ist=async e=>(await Ln(Tt(pt,z8),{...e,createdAt:el()})).id,ost=e=>{const t=Wt(Tt(pt,z8),Tr("createdAt","desc"));return pr(t,r=>{const n=r.docs.map(a=>$8(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},lst=async e=>{const t=dr(pt,z8,e);await Za(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gp=function(){return Gp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Gp.apply(this,arguments)};function cst(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{c(n.next(u))}catch(d){s(d)}}function o(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(i,o)}c((n=n.apply(e,[])).next())})}function ust(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Pr(){return Pr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pr.apply(this,arguments)}function Kp(e){return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function Wce(e){var t=function(r,n){if(Kp(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(Kp(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Kp(t)==="symbol"?t:String(t)}function sv(e,t,r){return(t=Wce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yq(Object(r),!0).forEach(function(n){sv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wce(n.key),n)}}function hO(e,t){return hO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},hO(e,t)}function uN(e){return uN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uN(e)}function dst(e,t){if(t&&(Kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function Ast(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=uN(e);if(t){var a=uN(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return dst(this,r)}}function mO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xce(e,t){if(e){if(typeof e=="string")return mO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mO(e,t):void 0}}function G8(e){return function(t){if(Array.isArray(t))return mO(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Xce(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var fst=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),pu="-ms-",Zq="-moz-",Jn="-webkit-",K8="decl",Yce="@keyframes",hst=Math.abs,Bk=String.fromCharCode,mst=Object.assign;function Jce(e){return e.trim()}function aa(e,t,r){return e.replace(t,r)}function pO(e,t){return e.indexOf(t)}function uo(e,t){return 0|e.charCodeAt(t)}function i2(e,t,r){return e.slice(t,r)}function BA(e){return e.length}function q8(e){return e.length}function e_(e,t){return t.push(e),e}var Tk=1,f1=1,Zce=0,Zl=0,ui=0,q1="";function jk(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:Tk,column:f1,length:i,return:""}}function ry(e,t){return mst(jk("",null,null,"",null,null,0),e,{length:-e.length},t)}function Dc(){return ui=Zl<Zce?uo(q1,Zl++):0,f1++,ui===10&&(f1=1,Tk++),ui}function KA(){return uo(q1,Zl)}function rS(){return Zl}function rE(e,t){return i2(q1,e,t)}function o2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eue(e){return Tk=f1=1,Zce=BA(q1=e),Zl=0,[]}function tue(e){return q1="",e}function nS(e){return Jce(rE(Zl-1,gO(e===91?e+2:e===40?e+1:e)))}function pst(e){for(;(ui=KA())&&ui<33;)Dc();return o2(e)>2||o2(ui)>3?"":" "}function gst(e,t){for(;--t&&Dc()&&!(ui<48||ui>102||ui>57&&ui<65||ui>70&&ui<97););return rE(e,rS()+(t<6&&KA()==32&&Dc()==32))}function gO(e){for(;Dc();)switch(ui){case e:return Zl;case 34:case 39:e!==34&&e!==39&&gO(ui);break;case 40:e===41&&gO(e);break;case 92:Dc()}return Zl}function xst(e,t){for(;Dc()&&e+ui!==57&&(e+ui!==84||KA()!==47););return"/*"+rE(t,Zl-1)+"*"+Bk(e===47?e:Dc())}function vst(e){for(;!o2(KA());)Dc();return rE(e,Zl)}function eW(e){return tue(aS("",null,null,null,[""],e=eue(e),0,[0],e))}function aS(e,t,r,n,a,s,i,o,c){for(var u=0,d=0,f=i,h=0,p=0,g=0,x=1,b=1,y=1,w=0,S="",j=a,N=s,F=n,E=S;b;)switch(g=w,w=Dc()){case 40:if(g!=108&&uo(E,f-1)==58){pO(E+=aa(nS(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=nS(w);break;case 9:case 10:case 13:case 32:E+=pst(g);break;case 92:E+=gst(rS()-1,7);continue;case 47:switch(KA()){case 42:case 47:e_(bst(xst(Dc(),rS()),t,r),c);break;default:E+="/"}break;case 123*x:o[u++]=BA(E)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+d:p>0&&BA(E)-f&&e_(p>32?rW(E+";",n,r,f-1):rW(aa(E," ","")+";",n,r,f-2),c);break;case 59:E+=";";default:if(e_(F=tW(E,t,r,u,d,a,o,S,j=[],N=[],f),s),w===123)if(d===0)aS(E,t,F,F,j,s,f,o,N);else switch(h===99&&uo(E,3)===110?100:h){case 100:case 109:case 115:aS(e,F,F,n&&e_(tW(e,F,F,0,0,a,o,S,a,j=[],f),N),a,N,f,o,n?j:N);break;default:aS(E,F,F,F,[""],N,0,o,N)}}u=d=p=0,x=y=1,S=E="",f=i;break;case 58:f=1+BA(E),p=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&(ui=Zl>0?uo(q1,--Zl):0,f1--,ui===10&&(f1=1,Tk--),ui==125))continue}switch(E+=Bk(w),w*x){case 38:y=d>0?1:(E+="\f",-1);break;case 44:o[u++]=(BA(E)-1)*y,y=1;break;case 64:KA()===45&&(E+=nS(Dc())),h=KA(),d=f=BA(S=E+=vst(rS())),w++;break;case 45:g===45&&BA(E)==2&&(x=0)}}return s}function tW(e,t,r,n,a,s,i,o,c,u,d){for(var f=a-1,h=a===0?s:[""],p=q8(h),g=0,x=0,b=0;g<n;++g)for(var y=0,w=i2(e,f+1,f=hst(x=i[g])),S=e;y<p;++y)(S=Jce(x>0?h[y]+" "+w:aa(w,/&\f/g,h[y])))&&(c[b++]=S);return jk(e,t,r,a===0?"rule":o,c,u,d)}function bst(e,t,r){return jk(e,t,r,"comm",Bk(ui),i2(e,2,-2),0)}function rW(e,t,r,n){return jk(e,t,r,K8,i2(e,0,n),i2(e,n+1,-1),n)}function qp(e,t){for(var r="",n=q8(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function nW(e,t,r,n){switch(e.type){case"@import":case K8:return e.return=e.return||e.value;case"comm":return"";case Yce:return e.return=e.value+"{"+qp(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return BA(r=qp(e.children,n))?e.return=e.value+"{"+r+"}":""}function aW(e){var t=q8(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function yst(e){return function(t){t.root||(t=t.return)&&e(t)}}function rue(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var wst=function(e,t,r){for(var n=0,a=0;n=a,a=KA(),n===38&&a===12&&(t[r]=1),!o2(a);)Dc();return rE(e,Zl)},Est=function(e,t){return tue(function(r,n){var a=-1,s=44;do switch(o2(s)){case 0:s===38&&KA()===12&&(n[a]=1),r[a]+=wst(Zl-1,n,a);break;case 2:r[a]+=nS(s);break;case 4:if(s===44){r[++a]=KA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=Bk(s)}while(s=Dc());return r}(eue(e),t))},sW=new WeakMap,Cst=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||sW.get(r))&&!n){sW.set(e,!0);for(var a=[],s=Est(t,a),i=r.props,o=0,c=0;o<s.length;o++)for(var u=0;u<i.length;u++,c++)e.props[c]=a[o]?s[o].replace(/&\f/g,i[u]):i[u]+" "+s[o]}}},_st=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function nue(e,t){switch(function(r,n){return 45^uo(r,0)?(((n<<2^uo(r,0))<<2^uo(r,1))<<2^uo(r,2))<<2^uo(r,3):0}(e,t)){case 5103:return Jn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Jn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Jn+e+Zq+e+pu+e+e;case 6828:case 4268:return Jn+e+pu+e+e;case 6165:return Jn+e+pu+"flex-"+e+e;case 5187:return Jn+e+aa(e,/(\w+).+(:[^]+)/,Jn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Jn+e+pu+"flex-item-"+aa(e,/flex-|-self/,"")+e;case 4675:return Jn+e+pu+"flex-line-pack"+aa(e,/align-content|flex-|-self/,"")+e;case 5548:return Jn+e+pu+aa(e,"shrink","negative")+e;case 5292:return Jn+e+pu+aa(e,"basis","preferred-size")+e;case 6060:return Jn+"box-"+aa(e,"-grow","")+Jn+e+pu+aa(e,"grow","positive")+e;case 4554:return Jn+aa(e,/([^-])(transform)/g,"$1"+Jn+"$2")+e;case 6187:return aa(aa(aa(e,/(zoom-|grab)/,Jn+"$1"),/(image-set)/,Jn+"$1"),e,"")+e;case 5495:case 3959:return aa(e,/(image-set\([^]*)/,Jn+"$1$`$1");case 4968:return aa(aa(e,/(.+:)(flex-)?(.*)/,Jn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Jn+e+e;case 4095:case 3583:case 4068:case 2532:return aa(e,/(.+)-inline(.+)/,Jn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(BA(e)-1-t>6)switch(uo(e,t+1)){case 109:if(uo(e,t+4)!==45)break;case 102:return aa(e,/(.+:)(.+)-([^]+)/,"$1"+Jn+"$2-$3$1"+Zq+(uo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~pO(e,"stretch")?nue(aa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(uo(e,t+1)!==115)break;case 6444:switch(uo(e,BA(e)-3-(~pO(e,"!important")&&10))){case 107:return aa(e,":",":"+Jn)+e;case 101:return aa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Jn+(uo(e,14)===45?"inline-":"")+"box$3$1"+Jn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(uo(e,t+11)){case 114:return Jn+e+pu+aa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Jn+e+pu+aa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Jn+e+pu+aa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Jn+e+pu+e+e}return e}var iW,t_,sS=typeof document<"u",Sst=sS?void 0:(iW=function(){return rue(function(){var e={};return function(t){return e[t]}})},t_=new WeakMap,function(e){if(t_.has(e))return t_.get(e);var t=iW(e);return t_.set(e,t),t}),Nst=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case K8:e.return=nue(e.value,e.length);break;case Yce:return qp([ry(e,{value:aa(e.value,"@","@"+Jn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return qp([ry(e,{props:[aa(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return qp([ry(e,{props:[aa(a,/:(plac\w+)/,":"+Jn+"input-$1")]}),ry(e,{props:[aa(a,/:(plac\w+)/,":-moz-$1")]}),ry(e,{props:[aa(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],aue=function(e){var t=e.key;if(sS&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||Nst,a,s,i={},o=[];sS&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),S=1;S<w.length;S++)i[w[S]]=!0;o.push(y)}));var c=[Cst,_st];if(sS){var u,d=[nW,yst(function(y){u.insert(y)})],f=aW(c.concat(n,d));s=function(y,w,S,j){u=S,qp(eW(y?y+"{"+w.styles+"}":w.styles),f),j&&(b.inserted[w.name]=!0)}}else{var h=[nW],p=aW(c.concat(n,h)),g=Sst(n)(t),x=function(y,w){var S=w.name;return g[S]===void 0&&(g[S]=qp(eW(y?y+"{"+w.styles+"}":w.styles),p)),g[S]};s=function(y,w,S,j){var N=w.name,F=x(y,w);return b.compat===void 0?(j&&(b.inserted[N]=!0),F):j?void(b.inserted[N]=F):F}}var b={key:t,sheet:new fst({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return b.sheet.hydrate(o),b};function ia(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var eo=typeof Symbol=="function"&&Symbol.for,xO=eo?Symbol.for("react.element"):60103,vO=eo?Symbol.for("react.portal"):60106,iS=eo?Symbol.for("react.fragment"):60107,oS=eo?Symbol.for("react.strict_mode"):60108,lS=eo?Symbol.for("react.profiler"):60114,cS=eo?Symbol.for("react.provider"):60109,uS=eo?Symbol.for("react.context"):60110,bO=eo?Symbol.for("react.async_mode"):60111,dN=eo?Symbol.for("react.concurrent_mode"):60111,dS=eo?Symbol.for("react.forward_ref"):60112,AS=eo?Symbol.for("react.suspense"):60113,kst=eo?Symbol.for("react.suspense_list"):60120,fS=eo?Symbol.for("react.memo"):60115,hS=eo?Symbol.for("react.lazy"):60116,Bst=eo?Symbol.for("react.block"):60121,Tst=eo?Symbol.for("react.fundamental"):60117,jst=eo?Symbol.for("react.responder"):60118,Ist=eo?Symbol.for("react.scope"):60119;function bc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case xO:switch(e=e.type){case bO:case dN:case iS:case lS:case oS:case AS:return e;default:switch(e=e&&e.$$typeof){case uS:case dS:case hS:case fS:case cS:return e;default:return t}}case vO:return t}}}function oW(e){return bc(e)===dN}var Fst={AsyncMode:bO,ConcurrentMode:dN,ContextConsumer:uS,ContextProvider:cS,Element:xO,ForwardRef:dS,Fragment:iS,Lazy:hS,Memo:fS,Portal:vO,Profiler:lS,StrictMode:oS,Suspense:AS,isAsyncMode:function(e){return oW(e)||bc(e)===bO},isConcurrentMode:oW,isContextConsumer:function(e){return bc(e)===uS},isContextProvider:function(e){return bc(e)===cS},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===xO},isForwardRef:function(e){return bc(e)===dS},isFragment:function(e){return bc(e)===iS},isLazy:function(e){return bc(e)===hS},isMemo:function(e){return bc(e)===fS},isPortal:function(e){return bc(e)===vO},isProfiler:function(e){return bc(e)===lS},isStrictMode:function(e){return bc(e)===oS},isSuspense:function(e){return bc(e)===AS},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===iS||e===dN||e===lS||e===oS||e===AS||e===kst||typeof e=="object"&&e!==null&&(e.$$typeof===hS||e.$$typeof===fS||e.$$typeof===cS||e.$$typeof===uS||e.$$typeof===dS||e.$$typeof===Tst||e.$$typeof===jst||e.$$typeof===Ist||e.$$typeof===Bst)},typeOf:bc};ia(function(e,t){});var lW=ia(function(e){e.exports=Fst}),cW={};cW[lW.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},cW[lW.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var yO=typeof document<"u";function sue(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var W8=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||yO===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},X8=function(e,t,r){W8(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);yO||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!yO&&a.length!==0)return a}},Ost={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Dst=/[A-Z]|^ms/g,Pst=/_EMO_([^_]+?)_([^]*?)_EMO_/g,iue=function(e){return e.charCodeAt(1)===45},uW=function(e){return e!=null&&typeof e!="boolean"},oI=rue(function(e){return iue(e)?e:e.replace(Dst,"-$&").toLowerCase()}),dW=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Pst,function(r,n,a){return TA={name:n,styles:a,next:TA},n})}return Ost[e]===1||iue(e)||typeof t!="number"||t===0?t:t+"px"};function aw(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return TA={name:r.name,styles:r.styles,next:TA},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)TA={name:n.name,styles:n.styles,next:TA},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=aw(c,u,d[h])+";";else for(var p in d){var g=d[p];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=p+"{"+u[g]+"}":uW(g)&&(f+=oI(p)+":"+dW(p,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=aw(c,u,g);switch(p){case"animation":case"animationName":f+=oI(p)+":"+x+";";break;default:f+=p+"{"+x+"}"}}else for(var b=0;b<g.length;b++)uW(g[b])&&(f+=oI(p)+":"+dW(p,g[b])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=TA,i=r(e);return TA=s,aw(e,t,i)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var TA,AW=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ik=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";TA=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=aw(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=aw(r,t,e[i]),n&&(a+=s[i]);AW.lastIndex=0;for(var o,c="";(o=AW.exec(a))!==null;)c+="-"+o[1];var u=function(d){for(var f,h=0,p=0,g=d.length;g>=4;++p,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(p+2))<<16;case 2:h^=(255&d.charCodeAt(p+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(p)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:TA}},Rst=typeof document<"u",Lst=function(e){return e()},oue=!!k.useInsertionEffect&&k.useInsertionEffect,lue=Rst&&oue||Lst,fW=oue||k.useLayoutEffect,Bv=typeof document<"u",Y8={}.hasOwnProperty,AN=k.createContext(typeof HTMLElement<"u"?aue({key:"css"}):null);AN.Provider;var Fk=function(e){return k.forwardRef(function(t,r){var n=k.useContext(AN);return e(t,n,r)})};Bv||(Fk=function(e){return function(t){var r=k.useContext(AN);return r===null?(r=aue({key:"css"}),k.createElement(AN.Provider,{value:r},e(t,r))):e(t,r)}});var J8=k.createContext({}),wO="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Mst=function(e,t){var r={};for(var n in t)Y8.call(t,n)&&(r[n]=t[n]);return r[wO]=e,r},Ust=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;W8(t,r,n);var a=lue(function(){return X8(t,r,n)});if(!Bv&&a!==void 0){for(var s,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return k.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},Qst=Fk(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[wO],s=[n],i="";typeof e.className=="string"?i=sue(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=Ik(s,void 0,k.useContext(J8));i+=t.key+"-"+o.name;var c={};for(var u in e)!Y8.call(e,u)||u==="css"||u===wO||(c[u]=e[u]);return c.ref=r,c.className=i,k.createElement(k.Fragment,null,k.createElement(Ust,{cache:t,serialized:o,isStringTag:typeof a=="string"}),k.createElement(a,c))});ia(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Br=function(e,t){var r=arguments;if(t==null||!Y8.call(t,"css"))return k.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=Qst,a[1]=Mst(e,t);for(var s=2;s<n;s++)a[s]=r[s];return k.createElement.apply(null,a)};Fk(function(e,t){var r=e.styles,n=Ik([r],void 0,k.useContext(J8));if(!Bv){for(var a,s=n.name,i=n.styles,o=n.next;o!==void 0;)s+=" "+o.name,i+=o.styles,o=o.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,c);return c?null:k.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=k.useRef();return fW(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(p=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,p],function(){h.flush()}},[t]),fW(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&X8(t,n.next,!0),h.tags.length){var p=h.tags[h.tags.length-1].nextElementSibling;h.before=p,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function Z8(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ik(t)}var Hst=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function Vst(e,t,r){var n=[],a=sue(e,n,r);return n.length<2?r:a+t(n)}var zst=function(e){var t,r=e.cache,n=e.serializedArr,a=lue(function(){for(var s="",i=0;i<n.length;i++){var o=X8(r,n[i],!1);Bv||o===void 0||(s+=o)}if(!Bv)return s});return Bv||a.length===0?null:k.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};Fk(function(e,t){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=Ik(o,t.registered);return r.push(u),W8(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return Vst(t.registered,n,Hst(o))},theme:k.useContext(J8)},s=e.children(a);return k.createElement(k.Fragment,null,k.createElement(zst,{cache:t,serializedArr:r}),s)});function Ui(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,o,c,u=[],d=!0,f=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=o.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,i=h}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw i}}return u}}(e,t)||Xce(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function FA(e,t){if(e==null)return{};var r,n,a=function(i,o){if(i==null)return{};var c,u,d={},f=Object.keys(i);for(u=0;u<f.length;u++)c=f[u],o.indexOf(c)>=0||(d[c]=i[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ih(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function cue(e){return ih(e).getComputedStyle(e)}const r_=Math.round;function uue(e){return Aue(e)?(e.nodeName||"").toLowerCase():""}let n_;function due(e){return e instanceof ih(e).HTMLElement}function mS(e){return e instanceof ih(e).Element}function Aue(e){return e instanceof ih(e).Node}function hW(e){return typeof ShadowRoot>"u"?!1:e instanceof ih(e).ShadowRoot||e instanceof ShadowRoot}function fue(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=cue(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function $st(){return/^((?!chrome|android).)*safari/i.test(function(){if(n_)return n_;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(n_=e.brands.map(t=>t.brand+"/"+t.version).join(" "),n_):navigator.userAgent}())}function hue(e){return mS(e)?e:e.contextElement}const mue={x:1,y:1};function mW(e){const t=hue(e);if(!due(t))return mue;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=cue(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,p=c.offsetHeight,g=r_(d)!==h||r_(f)!==p;return g&&(d=h,f=p),{width:d,height:f,fallback:g}}(t);let i=(s?r_(r.width):r.width)/n,o=(s?r_(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function pW(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=hue(e);let c=mue;t&&(c=mW(e));const u=o?ih(o):window,d=$st()&&r;let f=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,h=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,p=i.width/c.x,g=i.height/c.y;if(o){const x=ih(o),b=n;let y=x.frameElement;for(;y&&n&&b!==x;){const w=mW(y),S=y.getBoundingClientRect(),j=getComputedStyle(y);S.x+=(y.clientLeft+parseFloat(j.paddingLeft))*w.x,S.y+=(y.clientTop+parseFloat(j.paddingTop))*w.y,f*=w.x,h*=w.y,p*=w.x,g*=w.y,f+=S.x,h+=S.y,y=ih(y).frameElement}}return{width:p,height:g,top:h,right:f+p,bottom:h+g,left:f,x:f,y:h}}function Gst(e){if(uue(e)==="html")return e;const t=e.assignedSlot||e.parentNode||hW(e)&&e.host||function(r){return((Aue(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return hW(t)?t.host:t}function pue(e){const t=Gst(e);return function(r){return["html","body","#document"].includes(uue(r))}(t)?t.ownerDocument.body:due(t)&&fue(t)?t:pue(t)}function pS(e,t){var r;t===void 0&&(t=[]);const n=pue(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=ih(n);return a?t.concat(s,s.visualViewport||[],fue(n)?n:[]):t.concat(n,pS(n))}var EO=typeof document<"u"?k.useLayoutEffect:k.useEffect,Kst=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],fN=function(){};function qst(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Wst(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(qst(e,i)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var gW=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):Kp(e)==="object"&&e!==null?[e]:[];var t},xW=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,wr({},FA(e,Kst))},ws=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function Ok(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function gue(e){return Ok(e)?window.pageYOffset:e.scrollTop}function hN(e,t){Ok(e)?window.scrollTo(0,t):e.scrollTop=t}function Xst(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function a_(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:fN,a=gue(e),s=t-a,i=10,o=0;function c(){var u=Xst(o+=i,a,s,r);hN(e,u),o<r?window.requestAnimationFrame(c):n(e)}c()}function vW(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?hN(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&hN(e,Math.max(t.offsetTop-a,0))}function bW(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var xue=!1,Yst={get passive(){return xue=!0}},s_=typeof window<"u"?window:{};s_.addEventListener&&s_.removeEventListener&&(s_.addEventListener("p",fN,Yst),s_.removeEventListener("p",fN,!1));var Jst=xue;function Zst(e){return e!=null}function i_(e,t,r){return e?t:r}var eit=["children","innerProps"],tit=["children","innerProps"];function rit(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,c=function(Y){var H=getComputedStyle(Y),X=H.position==="absolute",V=/(auto|scroll)/;if(H.position==="fixed")return document.documentElement;for(var z=Y;z=z.parentElement;)if(H=getComputedStyle(z),(!X||H.position!=="static")&&V.test(H.overflow+H.overflowY+H.overflowX))return z;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),p=h.bottom,g=h.height,x=h.top,b=r.offsetParent.getBoundingClientRect().top,y=i||Ok(d=c)?window.innerHeight:d.clientHeight,w=gue(c),S=parseInt(getComputedStyle(r).marginBottom,10),j=parseInt(getComputedStyle(r).marginTop,10),N=b-j,F=y-x,E=N+w,_=f-w-x,B=p-y+w+S,P=w+x-j,D=160;switch(a){case"auto":case"bottom":if(F>=g)return{placement:"bottom",maxHeight:t};if(_>=g&&!i)return s&&a_(c,B,D),{placement:"bottom",maxHeight:t};if(!i&&_>=n||i&&F>=n)return s&&a_(c,B,D),{placement:"bottom",maxHeight:i?F-S:_-S};if(a==="auto"||i){var I=t,U=i?N:E;return U>=n&&(I=Math.min(U-S-o,t)),{placement:"top",maxHeight:I}}if(a==="bottom")return s&&hN(c,B),{placement:"bottom",maxHeight:t};break;case"top":if(N>=g)return{placement:"top",maxHeight:t};if(E>=g&&!i)return s&&a_(c,P,D),{placement:"top",maxHeight:t};if(!i&&E>=n||i&&N>=n){var R=t;return(!i&&E>=n||i&&N>=n)&&(R=i?N-j:E-j),s&&a_(c,P,D),{placement:"top",maxHeight:R}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var yW,vue=function(e){return e==="auto"?"bottom":e},bue=k.createContext(null),nit=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,o=e.theme,c=(k.useContext(bue)||{}).setPortalPlacement,u=k.useRef(null),d=Ui(k.useState(n),2),f=d[0],h=d[1],p=Ui(k.useState(null),2),g=p[0],x=p[1],b=o.spacing.controlHeight;return EO(function(){var y=u.current;if(y){var w=s==="fixed",S=rit({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!w,isFixedPosition:w,controlHeight:b});h(S.maxHeight),x(S.placement),c==null||c(S.placement)}},[n,a,s,i,r,c,b]),t({ref:u,placerProps:wr(wr({},e),{},{placement:g||vue(a),maxHeight:f})})},ait=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Br("div",Pr({},ws(e,"menu",{menu:!0}),{ref:r},n),t)},yue=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return wr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},sit=yue,iit=yue,oit=["size"],lit=["innerProps","isRtl","size"],lI,cI,cit={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},wue=function(e){var t=e.size,r=FA(e,oit);return Br("svg",Pr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:cit},r))},uI=function(e){return Br(wue,Pr({size:20},e),Br("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},wW=function(e){return Br(wue,Pr({size:20},e),Br("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Eue=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return wr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},uit=Eue,dit=Eue,Ait=function(){var e=Z8.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(yW||(lI=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],cI||(cI=lI.slice(0)),yW=Object.freeze(Object.defineProperties(lI,{raw:{value:Object.freeze(cI)}})))),dI=function(e){var t=e.delay,r=e.offset;return Br("span",{css:Z8({animation:"".concat(Ait," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},fit=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return Br("div",Pr({ref:a},ws(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},hit=["data"],mit=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,o=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Br("div",Pr({},ws(e,"group",{group:!0}),o),Br(s,Pr({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Br("div",null,t))},pit=["innerRef","isDisabled","isHidden","inputClassName"],Cue={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},git={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":wr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Cue)},xit=function(e){return wr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Cue)},EW=function(e){var t=e.children,r=e.innerProps;return Br("div",r,t)},vit=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,o=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Br(c,{data:n,innerProps:wr(wr({},ws(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:o},Br(u,{data:n,innerProps:wr({},ws(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),Br(d,{data:n,innerProps:wr(wr({},ws(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},bit={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Br("div",Pr({},ws(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Br(uI,null))},Control:fit,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Br("div",Pr({},ws(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Br(wW,null))},DownChevron:wW,CrossIcon:uI,Group:mit,GroupHeading:function(e){var t=xW(e);t.data;var r=FA(t,hit);return Br("div",Pr({},ws(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Br("div",Pr({},ws(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Br("span",Pr({},t,ws(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=xW(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,o=n.inputClassName,c=FA(n,pit);return Br("div",Pr({},ws(e,"input",{"input-container":!0}),{"data-value":r||""}),Br("input",Pr({className:t({input:!0},o),ref:a,style:xit(i),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=FA(e,lit);return Br("div",Pr({},ws(wr(wr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Br(dI,{delay:0,offset:r}),Br(dI,{delay:160,offset:!0}),Br(dI,{delay:320,offset:!r}))},Menu:ait,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Br("div",Pr({},ws(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,o=k.useRef(null),c=k.useRef(null),u=Ui(k.useState(vue(s)),2),d=u[0],f=u[1],h=k.useMemo(function(){return{setPortalPlacement:f}},[]),p=Ui(k.useState(null),2),g=p[0],x=p[1],b=k.useCallback(function(){if(n){var j=function(E){var _=E.getBoundingClientRect();return{bottom:_.bottom,height:_.height,left:_.left,right:_.right,top:_.top,width:_.width}}(n),N=i==="fixed"?0:window.pageYOffset,F=j[d]+N;F===(g==null?void 0:g.offset)&&j.left===(g==null?void 0:g.rect.left)&&j.width===(g==null?void 0:g.rect.width)||x({offset:F,rect:j})}},[n,i,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);EO(function(){b()},[b]);var y=k.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&o.current&&(c.current=function(j,N,F,E){E===void 0&&(E={});const{ancestorScroll:_=!0,ancestorResize:B=!0,elementResize:P=!0,animationFrame:D=!1}=E,I=_&&!D,U=I||B?[...mS(j)?pS(j):j.contextElement?pS(j.contextElement):[],...pS(N)]:[];U.forEach(X=>{I&&X.addEventListener("scroll",F,{passive:!0}),B&&X.addEventListener("resize",F)});let R,Y=null;if(P){let X=!0;Y=new ResizeObserver(()=>{X||F(),X=!1}),mS(j)&&!D&&Y.observe(j),mS(j)||!j.contextElement||D||Y.observe(j.contextElement),Y.observe(N)}let H=D?pW(j):null;return D&&function X(){const V=pW(j);!H||V.x===H.x&&V.y===H.y&&V.width===H.width&&V.height===H.height||F(),H=V,R=requestAnimationFrame(X)}(),F(),()=>{var X;U.forEach(V=>{I&&V.removeEventListener("scroll",F),B&&V.removeEventListener("resize",F)}),(X=Y)==null||X.disconnect(),Y=null,D&&cancelAnimationFrame(R)}}(n,o.current,b,{elementResize:"ResizeObserver"in window}))},[n,b]);EO(function(){y()},[y]);var w=k.useCallback(function(j){o.current=j,y()},[y]);if(!t&&i!=="fixed"||!g)return null;var S=Br("div",Pr({ref:w},ws(wr(wr({},e),{},{offset:g.offset,position:i,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Br(bue.Provider,{value:h},t?ER.createPortal(S,t):S)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=FA(e,tit);return Br("div",Pr({},ws(wr(wr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=FA(e,eit);return Br("div",Pr({},ws(wr(wr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:vit,MultiValueContainer:EW,MultiValueLabel:EW,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Br("div",Pr({role:"button"},r),t||Br(uI,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return Br("div",Pr({},ws(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Br("div",Pr({},ws(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Br("div",Pr({},ws(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Br("div",Pr({},ws(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Br("div",Pr({},ws(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},CW=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function yit(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||CW(n)&&CW(a)))return!1;var n,a;return!0}for(var wit={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},_W=function(e){return Br("span",Pr({css:wit},e))},Eit={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,o=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(p,g){return p&&p.length?"".concat(p.indexOf(g)+1," of ").concat(p.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var f=o?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},Cit=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,o=e.selectProps,c=e.id,u=e.isAppleDevice,d=o.ariaLiveMessages,f=o.getOptionLabel,h=o.inputValue,p=o.isMulti,g=o.isOptionDisabled,x=o.isSearchable,b=o.menuIsOpen,y=o.options,w=o.screenReaderStatus,S=o.tabSelectsValue,j=o.isLoading,N=o["aria-label"],F=o["aria-live"],E=k.useMemo(function(){return wr(wr({},Eit),d||{})},[d]),_=k.useMemo(function(){var R,Y="";if(t&&E.onChange){var H=t.option,X=t.options,V=t.removedValue,z=t.removedValues,q=t.value,ne=V||H||(R=q,Array.isArray(R)?null:R),M=ne?f(ne):"",W=X||z||void 0,Z=W?W.map(f):[],re=wr({isDisabled:ne&&g(ne,i),label:M,labels:Z},t);Y=E.onChange(re)}return Y},[t,E,g,i,f]),B=k.useMemo(function(){var R="",Y=r||n,H=!!(r&&i&&i.includes(r));if(Y&&E.onFocus){var X={focused:Y,label:f(Y),isDisabled:g(Y,i),isSelected:H,options:a,context:Y===r?"menu":"value",selectValue:i,isAppleDevice:u};R=E.onFocus(X)}return R},[r,n,f,g,E,a,i,u]),P=k.useMemo(function(){var R="";if(b&&y.length&&!j&&E.onFilter){var Y=w({count:a.length});R=E.onFilter({inputValue:h,resultsMessage:Y})}return R},[a,h,b,E,y,w,j]),D=(t==null?void 0:t.action)==="initial-input-focus",I=k.useMemo(function(){var R="";if(E.guidance){var Y=n?"value":b?"menu":"input";R=E.guidance({"aria-label":N,context:Y,isDisabled:r&&g(r,i),isMulti:p,isSearchable:x,tabSelectsValue:S,isInitialFocus:D})}return R},[N,r,n,p,g,x,b,E,i,S,D]),U=Br(k.Fragment,null,Br("span",{id:"aria-selection"},_),Br("span",{id:"aria-focused"},B),Br("span",{id:"aria-results"},P),Br("span",{id:"aria-guidance"},I));return Br(k.Fragment,null,Br(_W,{id:c},D&&U),Br(_W,{"aria-live":F,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!D&&U))},AI=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],_it=new RegExp("["+AI.map(function(e){return e.letters}).join("")+"]","g"),_ue={},fI=0;fI<AI.length;fI++)for(var hI=AI[fI],mI=0;mI<hI.letters.length;mI++)_ue[hI.letters[mI]]=hI.base;var Sue=function(e){return e.replace(_it,function(t){return _ue[t]})},Sit=function(e,t){t===void 0&&(t=yit);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(Sue),SW=function(e){return e.replace(/^\s+|\s+$/g,"")},Nit=function(e){return"".concat(e.label," ").concat(e.value)},kit=["innerRef"];function Bit(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=Object.entries(n).filter(function(c){var u=Ui(c,1)[0];return!s.includes(u)});return o.reduce(function(c,u){var d=Ui(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(FA(e,kit),"onExited","in","enter","exit","appear");return Br("input",Pr({ref:t},r,{css:Z8({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var NW=["boxSizing","height","overflow","paddingRight","position"],kW={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function BW(e){e.preventDefault()}function TW(e){e.stopPropagation()}function jW(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function IW(){return"ontouchstart"in window||navigator.maxTouchPoints}var FW=!(typeof window>"u"||!window.document||!window.document.createElement),ny=0,Bx={capture:!1,passive:!1},Tit=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},jit={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Iit(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var o=i.isEnabled,c=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,f=i.onTopLeave,h=k.useRef(!1),p=k.useRef(!1),g=k.useRef(0),x=k.useRef(null),b=k.useCallback(function(F,E){if(x.current!==null){var _=x.current,B=_.scrollTop,P=_.scrollHeight,D=_.clientHeight,I=x.current,U=E>0,R=P-D-B,Y=!1;R>E&&h.current&&(u&&u(F),h.current=!1),U&&p.current&&(f&&f(F),p.current=!1),U&&E>R?(c&&!h.current&&c(F),I.scrollTop=P,Y=!0,h.current=!0):!U&&-E>B&&(d&&!p.current&&d(F),I.scrollTop=0,Y=!0,p.current=!0),Y&&function(H){H.cancelable&&H.preventDefault(),H.stopPropagation()}(F)}},[c,u,d,f]),y=k.useCallback(function(F){b(F,F.deltaY)},[b]),w=k.useCallback(function(F){g.current=F.changedTouches[0].clientY},[]),S=k.useCallback(function(F){var E=g.current-F.changedTouches[0].clientY;b(F,E)},[b]),j=k.useCallback(function(F){if(F){var E=!!Jst&&{passive:!1};F.addEventListener("wheel",y,E),F.addEventListener("touchstart",w,E),F.addEventListener("touchmove",S,E)}},[S,w,y]),N=k.useCallback(function(F){F&&(F.removeEventListener("wheel",y,!1),F.removeEventListener("touchstart",w,!1),F.removeEventListener("touchmove",S,!1))},[S,w,y]);return k.useEffect(function(){if(o){var F=x.current;return j(F),function(){N(F)}}},[o,j,N]),function(F){x.current=F}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var o=i.isEnabled,c=i.accountForScrollbars,u=c===void 0||c,d=k.useRef({}),f=k.useRef(null),h=k.useCallback(function(g){if(FW){var x=document.body,b=x&&x.style;if(u&&NW.forEach(function(j){var N=b&&b[j];d.current[j]=N}),u&&ny<1){var y=parseInt(d.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,S=window.innerWidth-w+y||0;Object.keys(kW).forEach(function(j){var N=kW[j];b&&(b[j]=N)}),b&&(b.paddingRight="".concat(S,"px"))}x&&IW()&&(x.addEventListener("touchmove",BW,Bx),g&&(g.addEventListener("touchstart",jW,Bx),g.addEventListener("touchmove",TW,Bx))),ny+=1}},[u]),p=k.useCallback(function(g){if(FW){var x=document.body,b=x&&x.style;ny=Math.max(ny-1,0),u&&ny<1&&NW.forEach(function(y){var w=d.current[y];b&&(b[y]=w)}),x&&IW()&&(x.removeEventListener("touchmove",BW,Bx),g&&(g.removeEventListener("touchstart",jW,Bx),g.removeEventListener("touchmove",TW,Bx)))}},[u]);return k.useEffect(function(){if(o){var g=f.current;return h(g),function(){p(g)}}},[o,h,p]),function(g){f.current=g}}({isEnabled:r});return Br(k.Fragment,null,r&&Br("div",{onClick:Tit,css:jit}),t(function(i){a(i),s(i)}))}var Fit={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Oit=function(e){var t=e.name,r=e.onFocus;return Br("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Fit,value:"",onChange:function(){}})};function CO(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function Nue(){return CO(/^Mac/i)}function Dit(){return CO(/^iPhone/i)||CO(/^iPad/i)||Nue()&&navigator.maxTouchPoints>1}var Pit,Rit={clearIndicator:dit,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return wr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:uit,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return wr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return wr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return wr(wr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},git),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return wr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:iit,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,o=a.colors;return wr((sv(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),sv(r,"position","absolute"),sv(r,"width","100%"),sv(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return wr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return wr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return wr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return wr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:sit,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,o=s.colors;return wr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return wr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return wr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return wr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},pI={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Lit={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:bW(),captureMenuScroll:!bW(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=wr({ignoreCase:!0,ignoreAccents:!0,stringify:Nit,trim:!0,matchFrom:"any"},Pit),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,o=r.matchFrom,c=i?SW(t):t,u=i?SW(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=Sit(c),u=Sue(u)),o==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function OW(e,t,r,n){return{type:"option",data:t,isDisabled:Bue(e,t,r),isSelected:Tue(e,t,r),label:kue(e,t),value:mN(e,t),index:n}}function o_(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,o){return OW(e,i,t,o)}).filter(function(i){return RW(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=OW(e,r,t,n);return RW(e,s)?s:void 0}).filter(Zst)}function DW(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,G8(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function PW(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,G8(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function RW(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,o=t.value;return(!Iue(e)||!s)&&jue(e,{label:i,value:o,data:a},n)}var gI=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},kue=function(e,t){return e.getOptionLabel(t)},mN=function(e,t){return e.getOptionValue(t)};function Bue(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function Tue(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=mN(e,t);return r.some(function(a){return mN(e,a)===n})}function jue(e,t,r){return!e.filterOption||e.filterOption(t,r)}var Iue=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Mit=1,Fue=function(e){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&hO(i,o)})(s,k.Component);var t,r,n,a=Ast(s);function s(i){var o;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(o=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=Nue()||Dit(),o.controlRef=null,o.getControlRef=function(f){o.controlRef=f},o.focusedOptionRef=null,o.getFocusedOptionRef=function(f){o.focusedOptionRef=f},o.menuListRef=null,o.getMenuListRef=function(f){o.menuListRef=f},o.inputRef=null,o.getInputRef=function(f){o.inputRef=f},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(f,h){var p=o.props,g=p.onChange,x=p.name;h.name=x,o.ariaOnChange(f,h),g(f,h)},o.setValue=function(f,h,p){var g=o.props,x=g.closeMenuOnSelect,b=g.isMulti,y=g.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(o.setState({inputIsHiddenAfterUpdate:!b}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(f,{action:h,option:p})},o.selectOption=function(f){var h=o.props,p=h.blurInputOnSelect,g=h.isMulti,x=h.name,b=o.state.selectValue,y=g&&o.isOptionSelected(f,b),w=o.isOptionDisabled(f,b);if(y){var S=o.getOptionValue(f);o.setValue(b.filter(function(j){return o.getOptionValue(j)!==S}),"deselect-option",f)}else{if(w)return void o.ariaOnChange(f,{action:"select-option",option:f,name:x});g?o.setValue([].concat(G8(b),[f]),"select-option",f):o.setValue(f,"select-option")}p&&o.blurInput()},o.removeValue=function(f){var h=o.props.isMulti,p=o.state.selectValue,g=o.getOptionValue(f),x=p.filter(function(y){return o.getOptionValue(y)!==g}),b=i_(h,x,x[0]||null);o.onChange(b,{action:"remove-value",removedValue:f}),o.focusInput()},o.clearValue=function(){var f=o.state.selectValue;o.onChange(i_(o.props.isMulti,[],null),{action:"clear",removedValues:f})},o.popValue=function(){var f=o.props.isMulti,h=o.state.selectValue,p=h[h.length-1],g=h.slice(0,h.length-1),x=i_(f,g,g[0]||null);o.onChange(x,{action:"pop-value",removedValue:p})},o.getFocusedOptionId=function(f){return gI(o.state.focusableOptionsWithIds,f)},o.getFocusableOptionsWithIds=function(){return PW(o_(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return Wst.apply(void 0,[o.props.classNamePrefix].concat(h))},o.getOptionLabel=function(f){return kue(o.props,f)},o.getOptionValue=function(f){return mN(o.props,f)},o.getStyles=function(f,h){var p=o.props.unstyled,g=Rit[f](h,p);g.boxSizing="border-box";var x=o.props.styles[f];return x?x(g,h):g},o.getClassNames=function(f,h){var p,g;return(p=(g=o.props.classNames)[f])===null||p===void 0?void 0:p.call(g,h)},o.getElementId=function(f){return"".concat(o.state.instancePrefix,"-").concat(f)},o.getComponents=function(){return f=o.props,wr(wr({},bit),f.components);var f},o.buildCategorizedOptions=function(){return o_(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return DW(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(f,h){o.setState({ariaSelection:wr({value:f},h)})},o.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(f){o.blockOptionHover=!1},o.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&o.onMenuClose():h&&o.openMenu("first"):(h&&(o.openAfterFocus=!0),o.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},o.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||o.props.isDisabled)){var h=o.props,p=h.isMulti,g=h.menuIsOpen;o.focusInput(),g?(o.setState({inputIsHiddenAfterUpdate:!p}),o.onMenuClose()):o.openMenu("first"),f.preventDefault()}},o.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(o.clearValue(),f.preventDefault(),o.openAfterFocus=!1,f.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(f){typeof o.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&Ok(f.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(f)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(f){var h=f.touches,p=h&&h.item(0);p&&(o.initialTouchX=p.clientX,o.initialTouchY=p.clientY,o.userIsDragging=!1)},o.onTouchMove=function(f){var h=f.touches,p=h&&h.item(0);if(p){var g=Math.abs(p.clientX-o.initialTouchX),x=Math.abs(p.clientY-o.initialTouchY);o.userIsDragging=g>5||x>5}},o.onTouchEnd=function(f){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(f.target)&&o.menuListRef&&!o.menuListRef.contains(f.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(f){o.userIsDragging||o.onControlMouseDown(f)},o.onClearIndicatorTouchEnd=function(f){o.userIsDragging||o.onClearIndicatorMouseDown(f)},o.onDropdownIndicatorTouchEnd=function(f){o.userIsDragging||o.onDropdownIndicatorMouseDown(f)},o.handleInputChange=function(f){var h=o.props.inputValue,p=f.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(p,{action:"input-change",prevInputValue:h}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(f){o.props.onFocus&&o.props.onFocus(f),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(f){var h=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(f),o.onInputChange("",{action:"input-blur",prevInputValue:h}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(f){if(!o.blockOptionHover&&o.state.focusedOption!==f){var h=o.getFocusableOptions().indexOf(f);o.setState({focusedOption:f,focusedOptionId:h>-1?o.getFocusedOptionId(f):null})}},o.shouldHideSelectedOptions=function(){return Iue(o.props)},o.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),o.focus()},o.onKeyDown=function(f){var h=o.props,p=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,b=h.inputValue,y=h.isClearable,w=h.isDisabled,S=h.menuIsOpen,j=h.onKeyDown,N=h.tabSelectsValue,F=h.openMenuOnFocus,E=o.state,_=E.focusedOption,B=E.focusedValue,P=E.selectValue;if(!(w||typeof j=="function"&&(j(f),f.defaultPrevented))){switch(o.blockOptionHover=!0,f.key){case"ArrowLeft":if(!p||b)return;o.focusValue("previous");break;case"ArrowRight":if(!p||b)return;o.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(B)o.removeValue(B);else{if(!g)return;p?o.popValue():y&&o.clearValue()}break;case"Tab":if(o.isComposing||f.shiftKey||!S||!N||!_||F&&o.isOptionSelected(_,P))return;o.selectOption(_);break;case"Enter":if(f.keyCode===229)break;if(S){if(!_||o.isComposing)return;o.selectOption(_);break}return;case"Escape":S?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:b}),o.onMenuClose()):y&&x&&o.clearValue();break;case" ":if(b)return;if(!S){o.openMenu("first");break}if(!_)return;o.selectOption(_);break;case"ArrowUp":S?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":S?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!S)return;o.focusOption("pageup");break;case"PageDown":if(!S)return;o.focusOption("pagedown");break;case"Home":if(!S)return;o.focusOption("first");break;case"End":if(!S)return;o.focusOption("last");break;default:return}f.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++Mit),o.state.selectValue=gW(i.value),i.menuIsOpen&&o.state.selectValue.length){var c=o.getFocusableOptionsWithIds(),u=o.buildFocusableOptions(),d=u.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=c,o.state.focusedOption=u[d],o.state.focusedOptionId=gI(c,u[d])}return o}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&vW(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,c=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused;(d&&!c&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(vW(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=i==="first"?0:f.length-1;if(!this.props.isMulti){var p=f.indexOf(u[0]);p>-1&&(h=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,c=o.selectValue,u=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(i){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),i==="up"?d=f>0?f-1:u.length-1:i==="down"?d=(f+1)%u.length:i==="pageup"?(d=f-o)<0&&(d=0):i==="pagedown"?(d=f+o)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(pI):wr(wr({},pI),this.props.theme):pI}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,p=this.props,g=p.isMulti,x=p.isRtl,b=p.options;return{clearValue:i,cx:o,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:b,selectOption:f,selectProps:p,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,c=i.isMulti;return o===void 0?c:o}},{key:"isOptionDisabled",value:function(i,o){return Bue(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return Tue(this.props,i,o)}},{key:"filterOption",value:function(i,o){return jue(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:c,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,c=i.isSearchable,u=i.inputId,d=i.inputValue,f=i.tabIndex,h=i.form,p=i.menuIsOpen,g=i.required,x=this.getComponents().Input,b=this.state,y=b.inputIsHidden,w=b.ariaSelection,S=this.commonProps,j=u||this.getElementId("input"),N=wr(wr(wr({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?k.createElement(x,Pr({},S,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:j,innerRef:this.getInputRef,isDisabled:o,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},N)):k.createElement(Bit,Pr({id:j,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:fN,onFocus:this.onInputFocus,disabled:o,tabIndex:f,inputMode:"none",form:h,value:""},N))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),c=o.MultiValue,u=o.MultiValueContainer,d=o.MultiValueLabel,f=o.MultiValueRemove,h=o.SingleValue,p=o.Placeholder,g=this.commonProps,x=this.props,b=x.controlShouldRenderValue,y=x.isDisabled,w=x.isMulti,S=x.inputValue,j=x.placeholder,N=this.state,F=N.selectValue,E=N.focusedValue,_=N.isFocused;if(!this.hasValue()||!b)return S?null:k.createElement(p,Pr({},g,{key:"placeholder",isDisabled:y,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),j);if(w)return F.map(function(P,D){var I=P===E,U="".concat(i.getOptionLabel(P),"-").concat(i.getOptionValue(P));return k.createElement(c,Pr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:I,isDisabled:y,key:U,index:D,removeProps:{onClick:function(){return i.removeValue(P)},onTouchEnd:function(){return i.removeValue(P)},onMouseDown:function(R){R.preventDefault()}},data:P}),i.formatOptionLabel(P,"value"))});if(S)return null;var B=F[0];return k.createElement(h,Pr({},g,{data:B,isDisabled:y}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return k.createElement(i,Pr({},o,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return i&&d?k.createElement(i,Pr({},o,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,c=i.IndicatorSeparator;if(!o||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return k.createElement(c,Pr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return k.createElement(i,Pr({},o,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),c=o.Group,u=o.GroupHeading,d=o.Menu,f=o.MenuList,h=o.MenuPortal,p=o.LoadingMessage,g=o.NoOptionsMessage,x=o.Option,b=this.commonProps,y=this.state.focusedOption,w=this.props,S=w.captureMenuScroll,j=w.inputValue,N=w.isLoading,F=w.loadingMessage,E=w.minMenuHeight,_=w.maxMenuHeight,B=w.menuIsOpen,P=w.menuPlacement,D=w.menuPosition,I=w.menuPortalTarget,U=w.menuShouldBlockScroll,R=w.menuShouldScrollIntoView,Y=w.noOptionsMessage,H=w.onMenuScrollToTop,X=w.onMenuScrollToBottom;if(!B)return null;var V,z=function(Z,re){var ae=Z.type,ce=Z.data,oe=Z.isDisabled,le=Z.isSelected,pe=Z.label,Be=Z.value,te=y===ce,_e=oe?void 0:function(){return i.onOptionHover(ce)},De=oe?void 0:function(){return i.selectOption(ce)},Ne="".concat(i.getElementId("option"),"-").concat(re),fe={id:Ne,onClick:De,onMouseMove:_e,onMouseOver:_e,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:le};return k.createElement(x,Pr({},b,{innerProps:fe,data:ce,isDisabled:oe,isSelected:le,key:Ne,label:pe,type:ae,value:Be,isFocused:te,innerRef:te?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Z.data,"menu"))};if(this.hasOptions())V=this.getCategorizedOptions().map(function(Z){if(Z.type==="group"){var re=Z.data,ae=Z.options,ce=Z.index,oe="".concat(i.getElementId("group"),"-").concat(ce),le="".concat(oe,"-heading");return k.createElement(c,Pr({},b,{key:oe,data:re,options:ae,Heading:u,headingProps:{id:le,data:Z.data},label:i.formatGroupLabel(Z.data)}),Z.options.map(function(pe){return z(pe,"".concat(ce,"-").concat(pe.index))}))}if(Z.type==="option")return z(Z,"".concat(Z.index))});else if(N){var q=F({inputValue:j});if(q===null)return null;V=k.createElement(p,b,q)}else{var ne=Y({inputValue:j});if(ne===null)return null;V=k.createElement(g,b,ne)}var M={minMenuHeight:E,maxMenuHeight:_,menuPlacement:P,menuPosition:D,menuShouldScrollIntoView:R},W=k.createElement(nit,Pr({},b,M),function(Z){var re=Z.ref,ae=Z.placerProps,ce=ae.placement,oe=ae.maxHeight;return k.createElement(d,Pr({},b,M,{innerRef:re,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:N,placement:ce}),k.createElement(Iit,{captureEnabled:S,onTopArrive:H,onBottomArrive:X,lockEnabled:U},function(le){return k.createElement(f,Pr({},b,{innerRef:function(pe){i.getMenuListRef(pe),le(pe)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:N,maxHeight:oe,focusedOption:y}),V)}))});return I||D==="fixed"?k.createElement(h,Pr({},b,{appendTo:I,controlElement:this.controlRef,menuPlacement:P,menuPosition:D}),W):W}},{key:"renderFormField",value:function(){var i=this,o=this.props,c=o.delimiter,u=o.isDisabled,d=o.isMulti,f=o.name,h=o.required,p=this.state.selectValue;if(h&&!this.hasValue()&&!u)return k.createElement(Oit,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=p.map(function(y){return i.getOptionValue(y)}).join(c);return k.createElement("input",{name:f,type:"hidden",value:g})}var x=p.length>0?p.map(function(y,w){return k.createElement("input",{key:"i-".concat(w),name:f,type:"hidden",value:i.getOptionValue(y)})}):k.createElement("input",{name:f,type:"hidden",value:""});return k.createElement("div",null,x)}var b=p[0]?this.getOptionValue(p[0]):"";return k.createElement("input",{name:f,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,c=o.ariaSelection,u=o.focusedOption,d=o.focusedValue,f=o.isFocused,h=o.selectValue,p=this.getFocusableOptions();return k.createElement(Cit,Pr({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,c=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,f=this.props,h=f.className,p=f.id,g=f.isDisabled,x=f.menuIsOpen,b=this.state.isFocused,y=this.commonProps=this.getCommonProps();return k.createElement(u,Pr({},y,{className:h,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),k.createElement(o,Pr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:x}),k.createElement(d,Pr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),k.createElement(c,Pr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var c=o.prevProps,u=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,f=o.ariaSelection,h=o.isFocused,p=o.prevWasFocused,g=o.instancePrefix,x=i.options,b=i.value,y=i.menuIsOpen,w=i.inputValue,S=i.isMulti,j=gW(b),N={};if(c&&(b!==c.value||x!==c.options||y!==c.menuIsOpen||w!==c.inputValue)){var F=y?function(U,R){return DW(o_(U,R))}(i,j):[],E=y?PW(o_(i,j),"".concat(g,"-option")):[],_=u?function(U,R){var Y=U.focusedValue,H=U.selectValue.indexOf(Y);if(H>-1){if(R.indexOf(Y)>-1)return Y;if(H<R.length)return R[H]}return null}(o,j):null,B=function(U,R){var Y=U.focusedOption;return Y&&R.indexOf(Y)>-1?Y:R[0]}(o,F);N={selectValue:j,focusedOption:B,focusedOptionId:gI(E,B),focusableOptionsWithIds:E,focusedValue:_,clearFocusValueOnUpdate:!1}}var P=d!=null&&i!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},D=f,I=h&&p;return h&&!I&&(D={value:i_(S,j,j[0]||null),options:j,action:"initial-input-focus"},I=!p),(f==null?void 0:f.action)==="initial-input-focus"&&(D=null),wr(wr(wr({},N),P),{},{prevProps:i,ariaSelection:D,prevWasFocused:I})}}],r&&Jq(t.prototype,r),n&&Jq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();Fue.defaultProps=Lit;var Uit=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],Qit=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],eM=ia(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Hit=ia(function(e){var t=eM.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),Oue=ia(function(e){var t=eM.default;e.exports=function(r){var n=Hit(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),Vit=ia(function(e){e.exports=function(t,r,n){return(r=Oue(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){Vit(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),ia(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),ia(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,Oue(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var zit=ia(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&zit(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var LW=ia(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),$it=ia(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),Git=ia(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Kit=ia(function(e){var t=eM.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Git(r)},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t){var r=$it();return function(){var n,a=LW(t);if(r){var s=LW(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Kit(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var _O=ia(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),qit=ia(function(e){e.exports=function(t){if(Array.isArray(t))return _O(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Wit=ia(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Due=ia(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return _O(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_O(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),Xit=ia(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t){return qit(t)||Wit(t)||Due(t)||Xit()},e.exports.__esModule=!0,e.exports.default=e.exports});var Yit=ia(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Jit=ia(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,o,c=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),Zit=ia(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t,r){return Yit(t)||Jit(t,r)||Due(t,r)||Zit()},e.exports.__esModule=!0,e.exports.default=e.exports});var eot=ia(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=eot(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),ia(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var tot=k.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,o=a.cacheOptions,c=o!==void 0&&o,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,p=a.filterOption,g=p===void 0?null:p,x=FA(a,Qit),b=x.inputValue,y=k.useRef(void 0),w=k.useRef(!1),S=Ui(k.useState(Array.isArray(i)?i:void 0),2),j=S[0],N=S[1],F=Ui(k.useState(b!==void 0?b:""),2),E=F[0],_=F[1],B=Ui(k.useState(i===!0),2),P=B[0],D=B[1],I=Ui(k.useState(void 0),2),U=I[0],R=I[1],Y=Ui(k.useState([]),2),H=Y[0],X=Y[1],V=Ui(k.useState(!1),2),z=V[0],q=V[1],ne=Ui(k.useState({}),2),M=ne[0],W=ne[1],Z=Ui(k.useState(void 0),2),re=Z[0],ae=Z[1],ce=Ui(k.useState(void 0),2),oe=ce[0],le=ce[1];c!==oe&&(W({}),le(c)),i!==re&&(N(Array.isArray(i)?i:void 0),ae(i)),k.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]);var pe=k.useCallback(function(_e,De){if(!u)return De();var Ne=u(_e,De);Ne&&typeof Ne.then=="function"&&Ne.then(De,function(){return De()})},[u]);k.useEffect(function(){i===!0&&pe(E,function(_e){w.current&&(N(_e||[]),D(!!y.current))})},[]);var Be=k.useCallback(function(_e,De){var Ne=function(Ie,Ue,Ye){if(Ye){var ye=Ye(Ie,Ue);if(typeof ye=="string")return ye}return Ie}(_e,De,h);if(!Ne)return y.current=void 0,_(""),R(""),X([]),D(!1),void q(!1);if(c&&M[Ne])_(Ne),R(Ne),X(M[Ne]),D(!1),q(!1);else{var fe=y.current={};_(Ne),D(!0),q(!U),pe(Ne,function(Ie){w&&fe===y.current&&(y.current=void 0,D(!1),R(Ne),X(Ie||[]),q(!1),W(Ie?wr(wr({},M),{},sv({},Ne,Ie)):M))})}},[c,pe,U,M,h]),te=z?[]:E&&U?H:j||[];return wr(wr({},x),{},{options:te,isLoading:P||f,onInputChange:Be,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,o=a.defaultMenuIsOpen,c=o!==void 0&&o,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,p=a.onChange,g=a.onInputChange,x=a.onMenuClose,b=a.onMenuOpen,y=a.value,w=FA(a,Uit),S=Ui(k.useState(f!==void 0?f:i),2),j=S[0],N=S[1],F=Ui(k.useState(h!==void 0?h:c),2),E=F[0],_=F[1],B=Ui(k.useState(y!==void 0?y:d),2),P=B[0],D=B[1],I=k.useCallback(function(z,q){typeof p=="function"&&p(z,q),D(z)},[p]),U=k.useCallback(function(z,q){var ne;typeof g=="function"&&(ne=g(z,q)),N(ne!==void 0?ne:z)},[g]),R=k.useCallback(function(){typeof b=="function"&&b(),_(!0)},[b]),Y=k.useCallback(function(){typeof x=="function"&&x(),_(!1)},[x]),H=f!==void 0?f:j,X=h!==void 0?h:E,V=y!==void 0?y:P;return wr(wr({},w),{},{inputValue:H,menuIsOpen:X,onChange:I,onInputChange:U,onMenuClose:Y,onMenuOpen:R,value:V})}(r);return k.createElement(Fue,Pr({ref:t},n))}),rot=tot,not=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},iv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(iv||(iv={}));class Ep{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:o=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:p}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=p,Ep.instance){if(!not(this.options,Ep.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Ep.instance.options)}`);return Ep.instance}Ep.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?iv.FAILURE:this.done?iv.SUCCESS:this.loading?iv.LOADING:iv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var aot=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),o=Gp({input:t},i);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var p=arguments[u],g=0,x=p.length;g<x;g++,h++)f[h]=p[g];return f}([void 0],a)))),s&&(o.location=new google.maps.LatLng(s)),o},sot=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,o=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=k.useRef(null),p=k.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,b=k.useRef(!1),y=k.useRef(null),w=k.useRef(!1),S=k.useRef(c);S.current=c;var j=k.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,p.current=[],y.current=null,b.current=!1},[]);k.useEffect(function(){return w.current=!1,function(){w.current=!0}},[]);var N=k.useCallback(function(){for(var E=[],_=0;_<arguments.length;_++)E[_]=arguments[_];p.current=E,clearTimeout(y.current),b.current&&(b.current=!1),y.current||!g||b.current||(S.current.apply(S,E),b.current=!0),y.current=setTimeout(function(){var B=!0;g&&b.current&&(B=!1),j(),!w.current&&x&&B&&S.current.apply(S,E)},u),f&&!h.current&&x&&(h.current=setTimeout(function(){var B=p.current;j(),w.current||S.current.apply(null,B)},f))},[f,u,j,g,x]),F=k.useCallback(function(){y.current&&(S.current.apply(null,p.current),j())},[j]);return[N,j,F]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=Gp({},t);a.getPlacePredictions(aot(d,c,i&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return o},MW=k.forwardRef(function(e,t){var r,n,a,s,i,o,c,u,d=function(x){var b=x.apiKey,y=x.apiOptions,w=x.onLoadFailed,S=k.useState(void 0),j=S[0],N=S[1],F=k.useState(void 0),E=F[0],_=F[1],B=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");N(new window.google.maps.places.AutocompleteService),_(new google.maps.places.AutocompleteSessionToken)};return k.useEffect(function(){b?cst(void 0,void 0,void 0,function(){var P;return ust(this,function(D){switch(D.label){case 0:if(!b)return[2];D.label=1;case 1:return D.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Ep(Gp({apiKey:b},Gp({libraries:["places"]},y))).load()];case 2:D.sent(),D.label=3;case 3:return B(),[3,5];case 4:return P=D.sent(),typeof w=="function"&&w(P),[3,5];case 5:return[2]}})}):B()},[]),{placesService:j,sessionToken:E,setSessionToken:_}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,p=d.setSessionToken,g=sot({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return k.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){p(new google.maps.places.AutocompleteSessionToken)}}},[h]),ct.createElement(rot,Gp({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var SO=function(e,t){return SO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},SO(e,t)};function Hd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");SO(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var NO=function(){return NO=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},NO.apply(this,arguments)};function ul(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(o,c)}u((n=n.apply(e,[])).next())})}function Lo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function l_(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var _h=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),Dk=function(e,t){return _h.fromClientRect(e,t.getBoundingClientRect())},iot=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new _h(0,0,n,a)},Pk=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Qs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},UW="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oot=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var c_=0;c_<UW.length;c_++)oot[UW.charCodeAt(c_)]=c_;var QW="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ny=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var u_=0;u_<QW.length;u_++)Ny[QW.charCodeAt(u_)]=u_;var lot=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Ny[e.charCodeAt(n)],i=Ny[e.charCodeAt(n+1)],o=Ny[e.charCodeAt(n+2)],c=Ny[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},cot=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},uot=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Wp=5,tM=11,xI=2,dot=tM-Wp,Pue=65536>>Wp,Aot=1<<Wp,vI=Aot-1,fot=1024>>Wp,hot=Pue+fot,mot=hot,pot=32,got=mot+pot,xot=65536>>tM,vot=1<<dot,bot=vot-1,HW=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},yot=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},wot=function(e,t){var r=lot(e),n=Array.isArray(r)?uot(r):new Uint32Array(r),a=Array.isArray(r)?cot(r):new Uint16Array(r),s=24,i=HW(a,s/2,n[4]/2),o=n[5]===2?HW(a,(s+n[4])/2):yot(n,Math.ceil((s+n[4])/4));return new Eot(n[0],n[1],n[2],n[3],i,o)},Eot=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Wp],r=(r<<xI)+(t&vI),this.data[r];if(t<=65535)return r=this.index[Pue+(t-55296>>Wp)],r=(r<<xI)+(t&vI),this.data[r];if(t<this.highStart)return r=got-xot+(t>>tM),r=this.index[r],r+=t>>Wp&bot,r=this.index[r],r=(r<<xI)+(t&vI),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),VW="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cot=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var d_=0;d_<VW.length;d_++)Cot[VW.charCodeAt(d_)]=d_;var _ot="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",zW=50,Sot=1,Rue=2,Lue=3,Not=4,kot=5,$W=7,Mue=8,GW=9,z0=10,kO=11,KW=12,BO=13,Bot=14,ky=15,TO=16,A_=17,ay=18,Tot=19,qW=20,jO=21,sy=22,bI=23,Tx=24,yc=25,By=26,Ty=27,jx=28,jot=29,Cp=30,Iot=31,f_=32,h_=33,IO=34,FO=35,OO=36,l2=37,DO=38,gS=39,xS=40,yI=41,Uue=42,Fot=43,Oot=[9001,65288],Que="!",Sn="×",m_="÷",PO=wot(_ot),Rf=[Cp,OO],RO=[Sot,Rue,Lue,kot],Hue=[z0,Mue],WW=[Ty,By],Dot=RO.concat(Hue),XW=[DO,gS,xS,IO,FO],Pot=[ky,BO],Rot=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var o=PO.get(s);if(o>zW?(a.push(!0),o-=zW):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(TO);if(o===Not||o===kO){if(i===0)return n.push(i),r.push(Cp);var c=r[i-1];return Dot.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Cp))}if(n.push(i),o===Iot)return r.push(t==="strict"?jO:l2);if(o===Uue||o===jot)return r.push(Cp);if(o===Fot)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(l2):r.push(Cp);r.push(o)}),[n,r,a]},wI=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==z0)break}if(a===z0)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===t)return!0;if(i!==z0)break}if(o!==z0)break}return!1},YW=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===z0)r--;else return n}return 0},Lot=function(e,t,r,n,a){if(r[n]===0)return Sn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Sn;var i=s-1,o=s+1,c=t[s],u=i>=0?t[i]:0,d=t[o];if(c===Rue&&d===Lue)return Sn;if(RO.indexOf(c)!==-1)return Que;if(RO.indexOf(d)!==-1||Hue.indexOf(d)!==-1)return Sn;if(YW(s,t)===Mue)return m_;if(PO.get(e[s])===kO||(c===f_||c===h_)&&PO.get(e[o])===kO||c===$W||d===$W||c===GW||[z0,BO,ky].indexOf(c)===-1&&d===GW||[A_,ay,Tot,Tx,jx].indexOf(d)!==-1||YW(s,t)===sy||wI(bI,sy,s,t)||wI([A_,ay],jO,s,t)||wI(KW,KW,s,t))return Sn;if(c===z0)return m_;if(c===bI||d===bI)return Sn;if(d===TO||c===TO)return m_;if([BO,ky,jO].indexOf(d)!==-1||c===Bot||u===OO&&Pot.indexOf(c)!==-1||c===jx&&d===OO||d===qW||Rf.indexOf(d)!==-1&&c===yc||Rf.indexOf(c)!==-1&&d===yc||c===Ty&&[l2,f_,h_].indexOf(d)!==-1||[l2,f_,h_].indexOf(c)!==-1&&d===By||Rf.indexOf(c)!==-1&&WW.indexOf(d)!==-1||WW.indexOf(c)!==-1&&Rf.indexOf(d)!==-1||[Ty,By].indexOf(c)!==-1&&(d===yc||[sy,ky].indexOf(d)!==-1&&t[o+1]===yc)||[sy,ky].indexOf(c)!==-1&&d===yc||c===yc&&[yc,jx,Tx].indexOf(d)!==-1)return Sn;if([yc,jx,Tx,A_,ay].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===yc)return Sn;if([jx,Tx].indexOf(h)!==-1)f--;else break}if([Ty,By].indexOf(d)!==-1)for(var f=[A_,ay].indexOf(c)!==-1?i:s;f>=0;){var h=t[f];if(h===yc)return Sn;if([jx,Tx].indexOf(h)!==-1)f--;else break}if(DO===c&&[DO,gS,IO,FO].indexOf(d)!==-1||[gS,IO].indexOf(c)!==-1&&[gS,xS].indexOf(d)!==-1||[xS,FO].indexOf(c)!==-1&&d===xS||XW.indexOf(c)!==-1&&[qW,By].indexOf(d)!==-1||XW.indexOf(d)!==-1&&c===Ty||Rf.indexOf(c)!==-1&&Rf.indexOf(d)!==-1||c===Tx&&Rf.indexOf(d)!==-1||Rf.concat(yc).indexOf(c)!==-1&&d===sy&&Oot.indexOf(e[o])===-1||Rf.concat(yc).indexOf(d)!==-1&&c===ay)return Sn;if(c===yI&&d===yI){for(var p=r[s],g=1;p>0&&(p--,t[p]===yI);)g++;if(g%2!==0)return Sn}return c===f_&&d===h_?Sn:m_},Mot=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Rot(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[yc,Cp,Uue].indexOf(o)!==-1?l2:o}));var i=t.wordBreak==="keep-all"?s.map(function(o,c){return o&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,i]},Uot=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===Que,this.start=n,this.end=a}return e.prototype.slice=function(){return Qs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Qot=function(e,t){var r=Pk(e),n=Mot(r,t),a=n[0],s=n[1],i=n[2],o=r.length,c=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=Sn;u<o&&(d=Lot(r,s,a,++u,i))===Sn;);if(d!==Sn||u===o){var f=new Uot(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Hot=1,Vot=2,nE=4,JW=8,pN=10,ZW=47,sw=92,zot=9,$ot=32,p_=34,iy=61,Got=35,Kot=36,qot=37,g_=39,x_=40,oy=41,Wot=95,zl=45,Xot=33,Yot=60,Jot=62,Zot=64,elt=91,tlt=93,rlt=61,nlt=123,v_=63,alt=125,eX=124,slt=126,ilt=128,tX=65533,EI=42,Fp=43,olt=44,llt=58,clt=59,c2=46,ult=0,dlt=8,Alt=11,flt=14,hlt=31,mlt=127,yA=-1,Vue=48,zue=97,$ue=101,plt=102,glt=117,xlt=122,Gue=65,Kue=69,que=70,vlt=85,blt=90,Vo=function(e){return e>=Vue&&e<=57},ylt=function(e){return e>=55296&&e<=57343},Ix=function(e){return Vo(e)||e>=Gue&&e<=que||e>=zue&&e<=plt},wlt=function(e){return e>=zue&&e<=xlt},Elt=function(e){return e>=Gue&&e<=blt},Clt=function(e){return wlt(e)||Elt(e)},_lt=function(e){return e>=ilt},b_=function(e){return e===pN||e===zot||e===$ot},gN=function(e){return Clt(e)||_lt(e)||e===Wot},rX=function(e){return gN(e)||Vo(e)||e===zl},Slt=function(e){return e>=ult&&e<=dlt||e===Alt||e>=flt&&e<=hlt||e===mlt},T0=function(e,t){return e!==sw?!1:t!==pN},y_=function(e,t,r){return e===zl?gN(t)||T0(t,r):gN(e)?!0:!!(e===sw&&T0(e,t))},CI=function(e,t,r){return e===Fp||e===zl?Vo(t)?!0:t===c2&&Vo(r):Vo(e===c2?t:e)},Nlt=function(e){var t=0,r=1;(e[t]===Fp||e[t]===zl)&&(e[t]===zl&&(r=-1),t++);for(var n=[];Vo(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Qs.apply(void 0,n),10):0;e[t]===c2&&t++;for(var s=[];Vo(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(Qs.apply(void 0,s),10):0;(e[t]===Kue||e[t]===$ue)&&t++;var c=1;(e[t]===Fp||e[t]===zl)&&(e[t]===zl&&(c=-1),t++);for(var u=[];Vo(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Qs.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,c*d)},klt={type:2},Blt={type:3},Tlt={type:4},jlt={type:13},Ilt={type:8},Flt={type:21},Olt={type:9},Dlt={type:10},Plt={type:11},Rlt={type:12},Llt={type:14},w_={type:23},Mlt={type:1},Ult={type:25},Qlt={type:24},Hlt={type:26},Vlt={type:27},zlt={type:28},$lt={type:29},Glt={type:31},LO={type:32},Wue=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(Pk(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==LO;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case p_:return this.consumeStringToken(p_);case Got:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(rX(r)||T0(n,a)){var s=y_(r,n,a)?Vot:Hot,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Kot:if(this.peekCodePoint(0)===iy)return this.consumeCodePoint(),jlt;break;case g_:return this.consumeStringToken(g_);case x_:return klt;case oy:return Blt;case EI:if(this.peekCodePoint(0)===iy)return this.consumeCodePoint(),Llt;break;case Fp:if(CI(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case olt:return Tlt;case zl:var o=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(CI(o,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(y_(o,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===zl&&u===Jot)return this.consumeCodePoint(),this.consumeCodePoint(),Qlt;break;case c2:if(CI(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case ZW:if(this.peekCodePoint(0)===EI)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===EI&&(d=this.consumeCodePoint(),d===ZW))return this.consumeToken();if(d===yA)return this.consumeToken()}break;case llt:return Hlt;case clt:return Vlt;case Yot:if(this.peekCodePoint(0)===Xot&&this.peekCodePoint(1)===zl&&this.peekCodePoint(2)===zl)return this.consumeCodePoint(),this.consumeCodePoint(),Ult;break;case Zot:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),p=this.peekCodePoint(2);if(y_(f,h,p)){var i=this.consumeName();return{type:7,value:i}}break;case elt:return zlt;case sw:if(T0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case tlt:return $lt;case rlt:if(this.peekCodePoint(0)===iy)return this.consumeCodePoint(),Ilt;break;case nlt:return Plt;case alt:return Rlt;case glt:case vlt:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===Fp&&(Ix(x)||x===v_)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case eX:if(this.peekCodePoint(0)===iy)return this.consumeCodePoint(),Olt;if(this.peekCodePoint(0)===eX)return this.consumeCodePoint(),Flt;break;case slt:if(this.peekCodePoint(0)===iy)return this.consumeCodePoint(),Dlt;break;case yA:return LO}return b_(t)?(this.consumeWhiteSpace(),Glt):Vo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):gN(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Qs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Ix(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===v_&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Qs.apply(void 0,t.map(function(c){return c===v_?Vue:c})),16),s=parseInt(Qs.apply(void 0,t.map(function(c){return c===v_?que:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Qs.apply(void 0,t),16);if(this.peekCodePoint(0)===zl&&Ix(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Ix(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(Qs.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===x_?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===x_?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===yA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===g_||r===p_){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===yA||this.peekCodePoint(0)===oy)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),w_)}for(;;){var a=this.consumeCodePoint();if(a===yA||a===oy)return{type:22,value:Qs.apply(void 0,t)};if(b_(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===yA||this.peekCodePoint(0)===oy?(this.consumeCodePoint(),{type:22,value:Qs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),w_);if(a===p_||a===g_||a===x_||Slt(a))return this.consumeBadUrlRemnants(),w_;if(a===sw)if(T0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),w_;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;b_(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===oy||t===yA)return;T0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Qs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===yA||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===pN)return this._value.splice(0,n),Mlt;if(a===sw){var s=this._value[n+1];s!==yA&&s!==void 0&&(s===pN?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):T0(a,s)&&(r+=this.consumeStringSlice(n),r+=Qs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=nE,n=this.peekCodePoint(0);for((n===Fp||n===zl)&&t.push(this.consumeCodePoint());Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===c2&&Vo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=JW;Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Kue||n===$ue)&&((a===Fp||a===zl)&&Vo(s)||Vo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=JW;Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Nlt(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(y_(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===qot?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Ix(t)){for(var r=Qs(t);Ix(this.peekCodePoint(0))&&r.length<6;)r+=Qs(this.consumeCodePoint());b_(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||ylt(n)||n>1114111?tX:n}return t===yA?tX:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(rX(r))t+=Qs(r);else if(T0(r,this.peekCodePoint(0)))t+=Qs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),Xue=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new Wue;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||qlt(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?LO:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),aE=function(e){return e.type===15},W1=function(e){return e.type===17},wa=function(e){return e.type===20},Klt=function(e){return e.type===0},MO=function(e,t){return wa(e)&&e.value===t},Yue=function(e){return e.type!==31},h1=function(e){return e.type!==31&&e.type!==4},tf=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},qlt=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Sm=function(e){return e.type===17||e.type===15},di=function(e){return e.type===16||Sm(e)},Jue=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},vo={type:17,number:0,flags:nE},rM={type:16,number:50,flags:nE},$0={type:16,number:100,flags:nE},jy=function(e,t,r){var n=e[0],a=e[1];return[Da(n,t),Da(typeof a<"u"?a:n,r)]},Da=function(e,t){if(e.type===16)return e.number/100*t;if(aE(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},Zue="deg",ede="grad",tde="rad",rde="turn",Rk={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case Zue:return Math.PI*t.number/180;case ede:return Math.PI/200*t.number;case tde:return t.number;case rde:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},nde=function(e){return e.type===15&&(e.unit===Zue||e.unit===ede||e.unit===tde||e.unit===rde)},ade=function(e){var t=e.filter(wa).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[vo,vo];case"to top":case"bottom":return ju(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[vo,$0];case"to right":case"left":return ju(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[$0,$0];case"to bottom":case"top":return ju(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[$0,vo];case"to left":case"right":return ju(270)}return 0},ju=function(e){return Math.PI*e/180},sm={name:"color",parse:function(e,t){if(t.type===18){var r=Wlt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return G0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return G0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return G0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return G0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var o=oh[t.value.toUpperCase()];if(typeof o<"u")return o}return oh.TRANSPARENT}},im=function(e){return(255&e)===0},Mi=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},G0=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},nX=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},aX=function(e,t){var r=t.filter(h1);if(r.length===3){var n=r.map(nX),a=n[0],s=n[1],i=n[2];return G0(a,s,i,1)}if(r.length===4){var o=r.map(nX),a=o[0],s=o[1],i=o[2],c=o[3];return G0(a,s,i,c)}return 0};function _I(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var sX=function(e,t){var r=t.filter(h1),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?ju(n.number):Rk.parse(e,n))/(Math.PI*2),c=di(a)?a.number/100:0,u=di(s)?s.number/100:0,d=typeof i<"u"&&di(i)?Da(i,1):1;if(c===0)return G0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,p=_I(h,f,o+1/3),g=_I(h,f,o),x=_I(h,f,o-1/3);return G0(p*255,g*255,x*255,d)},Wlt={hsl:sX,hsla:sX,rgb:aX,rgba:aX},iw=function(e,t){return sm.parse(e,Xue.create(t).parseComponentValue())},oh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Xlt={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ylt={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Lk=function(e,t){var r=sm.parse(e,t[0]),n=t[1];return n&&di(n)?{color:r,stop:n}:{color:r,stop:null}},iX=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=vo),n.stop===null&&(n.stop=$0);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(o!==null){var c=Da(o,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],p=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=p*g;u=null}}return e.map(function(x,b){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[b]/t),0)}})},Jlt=function(e,t,r){var n=t/2,a=r/2,s=Da(e[0],t)-n,i=a-Da(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},Zlt=function(e,t,r){var n=typeof e=="number"?e:Jlt(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,o=a/2,c=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-c,i+c]},hd=function(e,t){return Math.sqrt(e*e+t*t)},oX=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,o){var c=o[0],u=o[1],d=hd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},ect=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(hd(t,r),hd(t,r-a),hd(t-n,r),hd(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=oX(n,a,t,r,!0),u=c[0],d=c[1];s=hd(u-t,(d-r)/o),i=o*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(hd(t,r),hd(t,r-a),hd(t-n,r),hd(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=oX(n,a,t,r,!1),u=f[0],d=f[1];s=hd(u-t,(d-r)/o),i=o*s}break}return Array.isArray(e.size)&&(s=Da(e.size[0],n),i=e.size.length===2?Da(e.size[1],a):s),[s,i]},tct=function(e,t){var r=ju(180),n=[];return tf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=ade(a);return}else if(nde(i)){r=Rk.parse(e,i);return}}var o=Lk(e,a);n.push(o)}),{angle:r,stops:n,type:1}},E_=function(e,t){var r=ju(180),n=[];return tf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=ade(a);return}else if(nde(i)){r=(Rk.parse(e,i)+ju(270))%ju(360);return}}var o=Lk(e,a);n.push(o)}),{angle:r,stops:n,type:1}},rct=function(e,t){var r=ju(180),n=[],a=1,s=0,i=3,o=[];return tf(t).forEach(function(c,u){var d=c[0];if(u===0){if(wa(d)&&d.value==="linear"){a=1;return}else if(wa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=sm.parse(e,d.values[0]);n.push({stop:vo,color:f})}else if(d.name==="to"){var f=sm.parse(e,d.values[0]);n.push({stop:$0,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(h1);if(h.length===2){var f=sm.parse(e,h[1]),p=h[0];W1(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:f})}}}}),a===1?{angle:(r+ju(180))%ju(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},sde="closest-side",ide="farthest-side",ode="closest-corner",lde="farthest-corner",cde="circle",ude="ellipse",dde="cover",Ade="contain",nct=function(e,t){var r=0,n=3,a=[],s=[];return tf(t).forEach(function(i,o){var c=!0;if(o===0){var u=!1;c=i.reduce(function(f,h){if(u)if(wa(h))switch(h.value){case"center":return s.push(rM),f;case"top":case"left":return s.push(vo),f;case"right":case"bottom":return s.push($0),f}else(di(h)||Sm(h))&&s.push(h);else if(wa(h))switch(h.value){case cde:return r=0,!1;case ude:return r=1,!1;case"at":return u=!0,!1;case sde:return n=0,!1;case dde:case ide:return n=1,!1;case Ade:case ode:return n=2,!1;case lde:return n=3,!1}else if(Sm(h)||di(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=Lk(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},C_=function(e,t){var r=0,n=3,a=[],s=[];return tf(t).forEach(function(i,o){var c=!0;if(o===0?c=i.reduce(function(d,f){if(wa(f))switch(f.value){case"center":return s.push(rM),!1;case"top":case"left":return s.push(vo),!1;case"right":case"bottom":return s.push($0),!1}else if(di(f)||Sm(f))return s.push(f),!1;return d},c):o===1&&(c=i.reduce(function(d,f){if(wa(f))switch(f.value){case cde:return r=0,!1;case ude:return r=1,!1;case Ade:case sde:return n=0,!1;case ide:return n=1,!1;case ode:return n=2,!1;case dde:case lde:return n=3,!1}else if(Sm(f)||di(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=Lk(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},act=function(e){return e.type===1},sct=function(e){return e.type===2},nM={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=fde[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function ict(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!fde[e.name])}var fde={"linear-gradient":tct,"-moz-linear-gradient":E_,"-ms-linear-gradient":E_,"-o-linear-gradient":E_,"-webkit-linear-gradient":E_,"radial-gradient":nct,"-moz-radial-gradient":C_,"-ms-radial-gradient":C_,"-o-radial-gradient":C_,"-webkit-radial-gradient":C_,"-webkit-gradient":rct},oct={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return h1(n)&&ict(n)}).map(function(n){return nM.parse(e,n)})}},lct={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},cct={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return tf(t).map(function(r){return r.filter(di)}).map(Jue)}},uct={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return tf(t).map(function(r){return r.filter(wa).map(function(n){return n.value}).join(" ")}).map(dct)}},dct=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Tv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Tv||(Tv={}));var Act={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return tf(t).map(function(r){return r.filter(fct)})}},fct=function(e){return wa(e)||di(e)},Mk=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},hct=Mk("top"),mct=Mk("right"),pct=Mk("bottom"),gct=Mk("left"),Uk=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return Jue(r.filter(di))}}},xct=Uk("top-left"),vct=Uk("top-right"),bct=Uk("bottom-right"),yct=Uk("bottom-left"),Qk=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},wct=Qk("top"),Ect=Qk("right"),Cct=Qk("bottom"),_ct=Qk("left"),Hk=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return aE(r)?r.number:0}}},Sct=Hk("top"),Nct=Hk("right"),kct=Hk("bottom"),Bct=Hk("left"),Tct={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},jct={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Ict={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).reduce(function(r,n){return r|Fct(n.value)},0)}},Fct=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Oct={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Dct={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},xN;(function(e){e.NORMAL="normal",e.STRICT="strict"})(xN||(xN={}));var Pct={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return xN.STRICT;case"normal":default:return xN.NORMAL}}},Rct={name:"line-height",initialValue:"normal",prefix:!1,type:4},lX=function(e,t){return wa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:di(e)?Da(e,t):t},Lct={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:nM.parse(e,t)}},Mct={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},UO={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Vk=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Uct=Vk("top"),Qct=Vk("right"),Hct=Vk("bottom"),Vct=Vk("left"),zct={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},$ct={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},zk=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Gct=zk("top"),Kct=zk("right"),qct=zk("bottom"),Wct=zk("left"),Xct={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Yct={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Jct={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&MO(t[0],"none")?[]:tf(t).map(function(r){for(var n={color:oh.TRANSPARENT,offsetX:vo,offsetY:vo,blur:vo},a=0,s=0;s<r.length;s++){var i=r[s];Sm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=sm.parse(e,i)}return n})}},Zct={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},eut={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=nut[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},tut=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},rut=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,o]:null},nut={matrix:tut,matrix3d:rut},cX={type:16,number:50,flags:nE},aut=[cX,cX],sut={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(di);return r.length!==2?aut:[r[0],r[1]]}},iut={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ow;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(ow||(ow={}));var out={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return ow.BREAK_ALL;case"keep-all":return ow.KEEP_ALL;case"normal":default:return ow.NORMAL}}},lut={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(W1(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},hde={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},cut={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return W1(t)?t.number:1}},uut={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dut={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Aut={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},fut={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},hut={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(W1(t))return t.number;if(wa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},mut={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(wa).map(function(r){return r.value})}},put={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ei=function(e,t){return(e&t)!==0},gut={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},xut={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(Yue),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var c=o&&W1(o)?o.number:1;n.push({counter:i.value,increment:c})}}return n}},vut={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(Yue),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(wa(s)&&s.value!=="none"){var o=i&&W1(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},but={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(aE).map(function(r){return hde.parse(e,r)})}},yut={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(Klt);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},uX=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},wut={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&MO(t[0],"none")?[]:tf(t).map(function(r){for(var n={color:255,offsetX:vo,offsetY:vo,blur:vo,spread:vo,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];MO(i,"inset")?n.inset=!0:Sm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=sm.parse(e,i)}return n})}},Eut={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(wa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},Cut={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},_ut={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return aE(t)?t.number:0}},Sut=function(){function e(t,r){var n,a;this.animationDuration=or(t,but,r.animationDuration),this.backgroundClip=or(t,Xlt,r.backgroundClip),this.backgroundColor=or(t,Ylt,r.backgroundColor),this.backgroundImage=or(t,oct,r.backgroundImage),this.backgroundOrigin=or(t,lct,r.backgroundOrigin),this.backgroundPosition=or(t,cct,r.backgroundPosition),this.backgroundRepeat=or(t,uct,r.backgroundRepeat),this.backgroundSize=or(t,Act,r.backgroundSize),this.borderTopColor=or(t,hct,r.borderTopColor),this.borderRightColor=or(t,mct,r.borderRightColor),this.borderBottomColor=or(t,pct,r.borderBottomColor),this.borderLeftColor=or(t,gct,r.borderLeftColor),this.borderTopLeftRadius=or(t,xct,r.borderTopLeftRadius),this.borderTopRightRadius=or(t,vct,r.borderTopRightRadius),this.borderBottomRightRadius=or(t,bct,r.borderBottomRightRadius),this.borderBottomLeftRadius=or(t,yct,r.borderBottomLeftRadius),this.borderTopStyle=or(t,wct,r.borderTopStyle),this.borderRightStyle=or(t,Ect,r.borderRightStyle),this.borderBottomStyle=or(t,Cct,r.borderBottomStyle),this.borderLeftStyle=or(t,_ct,r.borderLeftStyle),this.borderTopWidth=or(t,Sct,r.borderTopWidth),this.borderRightWidth=or(t,Nct,r.borderRightWidth),this.borderBottomWidth=or(t,kct,r.borderBottomWidth),this.borderLeftWidth=or(t,Bct,r.borderLeftWidth),this.boxShadow=or(t,wut,r.boxShadow),this.color=or(t,Tct,r.color),this.direction=or(t,jct,r.direction),this.display=or(t,Ict,r.display),this.float=or(t,Oct,r.cssFloat),this.fontFamily=or(t,Aut,r.fontFamily),this.fontSize=or(t,fut,r.fontSize),this.fontStyle=or(t,put,r.fontStyle),this.fontVariant=or(t,mut,r.fontVariant),this.fontWeight=or(t,hut,r.fontWeight),this.letterSpacing=or(t,Dct,r.letterSpacing),this.lineBreak=or(t,Pct,r.lineBreak),this.lineHeight=or(t,Rct,r.lineHeight),this.listStyleImage=or(t,Lct,r.listStyleImage),this.listStylePosition=or(t,Mct,r.listStylePosition),this.listStyleType=or(t,UO,r.listStyleType),this.marginTop=or(t,Uct,r.marginTop),this.marginRight=or(t,Qct,r.marginRight),this.marginBottom=or(t,Hct,r.marginBottom),this.marginLeft=or(t,Vct,r.marginLeft),this.opacity=or(t,cut,r.opacity);var s=or(t,zct,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=or(t,$ct,r.overflowWrap),this.paddingTop=or(t,Gct,r.paddingTop),this.paddingRight=or(t,Kct,r.paddingRight),this.paddingBottom=or(t,qct,r.paddingBottom),this.paddingLeft=or(t,Wct,r.paddingLeft),this.paintOrder=or(t,Eut,r.paintOrder),this.position=or(t,Yct,r.position),this.textAlign=or(t,Xct,r.textAlign),this.textDecorationColor=or(t,uut,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=or(t,dut,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=or(t,Jct,r.textShadow),this.textTransform=or(t,Zct,r.textTransform),this.transform=or(t,eut,r.transform),this.transformOrigin=or(t,sut,r.transformOrigin),this.visibility=or(t,iut,r.visibility),this.webkitTextStrokeColor=or(t,Cut,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=or(t,_ut,r.webkitTextStrokeWidth),this.wordBreak=or(t,out,r.wordBreak),this.zIndex=or(t,lut,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return im(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Ei(this.display,4)||Ei(this.display,33554432)||Ei(this.display,268435456)||Ei(this.display,536870912)||Ei(this.display,67108864)||Ei(this.display,134217728)},e}(),Nut=function(){function e(t,r){this.content=or(t,gut,r.content),this.quotes=or(t,yut,r.quotes)}return e}(),dX=function(){function e(t,r){this.counterIncrement=or(t,xut,r.counterIncrement),this.counterReset=or(t,vut,r.counterReset)}return e}(),or=function(e,t,r){var n=new Wue,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new Xue(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,wa(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return Rk.parse(e,s.parseComponentValue());case"color":return sm.parse(e,s.parseComponentValue());case"image":return nM.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Sm(o)?o:vo;case"length-percentage":var c=s.parseComponentValue();return di(c)?c:vo;case"time":return hde.parse(e,s.parseComponentValue())}break}},kut="data-html2canvas-debug",But=function(e){var t=e.getAttribute(kut);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},QO=function(e,t){var r=But(e);return r===1||t===r},rf=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,QO(r,3))debugger;this.styles=new Sut(t,window.getComputedStyle(r,null)),zO(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Dk(this.context,r),QO(r,4)&&(this.flags|=16)}return e}(),Tut="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",AX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Iy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var __=0;__<AX.length;__++)Iy[AX.charCodeAt(__)]=__;var jut=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Iy[e.charCodeAt(n)],i=Iy[e.charCodeAt(n+1)],o=Iy[e.charCodeAt(n+2)],c=Iy[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},Iut=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},Fut=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Xp=5,aM=11,SI=2,Out=aM-Xp,mde=65536>>Xp,Dut=1<<Xp,NI=Dut-1,Put=1024>>Xp,Rut=mde+Put,Lut=Rut,Mut=32,Uut=Lut+Mut,Qut=65536>>aM,Hut=1<<Out,Vut=Hut-1,fX=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},zut=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},$ut=function(e,t){var r=jut(e),n=Array.isArray(r)?Fut(r):new Uint32Array(r),a=Array.isArray(r)?Iut(r):new Uint16Array(r),s=24,i=fX(a,s/2,n[4]/2),o=n[5]===2?fX(a,(s+n[4])/2):zut(n,Math.ceil((s+n[4])/4));return new Gut(n[0],n[1],n[2],n[3],i,o)},Gut=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Xp],r=(r<<SI)+(t&NI),this.data[r];if(t<=65535)return r=this.index[mde+(t-55296>>Xp)],r=(r<<SI)+(t&NI),this.data[r];if(t<this.highStart)return r=Uut-Qut+(t>>aM),r=this.index[r],r+=t>>Xp&Vut,r=this.index[r],r=(r<<SI)+(t&NI),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),hX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Kut=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var S_=0;S_<hX.length;S_++)Kut[hX.charCodeAt(S_)]=S_;var qut=1,kI=2,BI=3,mX=4,pX=5,Wut=7,gX=8,TI=9,jI=10,xX=11,vX=12,bX=13,yX=14,II=15,Xut=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Yut=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Jut=$ut(Tut),wu="×",FI="÷",Zut=function(e){return Jut.get(e)},edt=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===kI&&i===BI)return wu;if(s===kI||s===BI||s===mX||i===kI||i===BI||i===mX)return FI;if(s===gX&&[gX,TI,xX,vX].indexOf(i)!==-1||(s===xX||s===TI)&&(i===TI||i===jI)||(s===vX||s===jI)&&i===jI||i===bX||i===pX||i===Wut||s===qut)return wu;if(s===bX&&i===yX){for(;a===pX;)a=t[--n];if(a===yX)return wu}if(s===II&&i===II){for(var o=0;a===II;)o++,a=t[--n];if(o%2===0)return wu}return FI},tdt=function(e){var t=Xut(e),r=t.length,n=0,a=0,s=t.map(Zut);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=wu;n<r&&(i=edt(t,s,++n))===wu;);if(i!==wu||n===r){var o=Yut.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},rdt=function(e){for(var t=tdt(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},ndt=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},adt=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=Pk(n.data).map(function(c){return Qs(c)}),s=0,i={},o=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return e.body.removeChild(t),o},sdt=function(){return typeof new Image().crossOrigin<"u"},idt=function(){return typeof new XMLHttpRequest().responseType=="string"},odt=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},wX=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},ldt=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=HO(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),EX(i).then(function(o){n.drawImage(o,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",wX(c)?EX(HO(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),wX(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},HO=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},EX=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Ao={get SUPPORT_RANGE_BOUNDS(){var e=ndt(document);return Object.defineProperty(Ao,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Ao.SUPPORT_RANGE_BOUNDS&&adt(document);return Object.defineProperty(Ao,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=odt(document);return Object.defineProperty(Ao,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?ldt(document):Promise.resolve(!1);return Object.defineProperty(Ao,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=sdt();return Object.defineProperty(Ao,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=idt();return Object.defineProperty(Ao,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ao,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ao,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},lw=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),cdt=function(e,t,r,n){var a=Adt(t,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(Ao.SUPPORT_RANGE_BOUNDS){var c=CX(n,i,o.length).getClientRects();if(c.length>1){var u=sM(o),d=0;u.forEach(function(h){s.push(new lw(h,_h.fromDOMRectList(e,CX(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new lw(o,_h.fromDOMRectList(e,c)))}else{var f=n.splitText(o.length);s.push(new lw(o,udt(e,n))),n=f}else Ao.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},udt=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=Dk(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return _h.EMPTY},CX=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},sM=function(e){if(Ao.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return rdt(e)},ddt=function(e,t){if(Ao.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return hdt(e,t)},Adt=function(e,t){return t.letterSpacing!==0?sM(e):ddt(e,t)},fdt=[32,160,4961,65792,65793,4153,4241],hdt=function(e,t){for(var r=Qot(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=Pk(i),c="";o.forEach(function(u){fdt.indexOf(u)===-1?c+=Qs(u):(c.length&&n.push(c),n.push(Qs(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},mdt=function(){function e(t,r,n){this.text=pdt(r.data,n.textTransform),this.textBounds=cdt(t,this.text,n,r)}return e}(),pdt=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(gdt,xdt);case 2:return e.toUpperCase();default:return e}},gdt=/(^|\s|:|-|\(|\))([a-z])/g,xdt=function(e,t,r){return e.length>0?t+r.toUpperCase():e},pde=function(e){Hd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(rf),gde=function(e){Hd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(rf),xde=function(e){Hd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=Dk(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(rf),vde=function(e){Hd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(rf),VO=function(e){Hd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(rf),vdt=[{type:15,flags:0,unit:"px",number:3}],bdt=[{type:16,flags:0,number:50}],ydt=function(e){return e.width>e.height?new _h(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new _h(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},wdt=function(e){var t=e.type===Edt?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},vN="checkbox",bN="radio",Edt="password",_X=707406591,iM=function(e){Hd(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=wdt(n),(a.type===vN||a.type===bN)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=ydt(a.bounds)),a.type){case vN:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=vdt;break;case bN:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=bdt;break}return a}return t}(rf),bde=function(e){Hd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(rf),yde=function(e){Hd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(rf),wde=function(e){Hd(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=Cde(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?iw(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):oh.TRANSPARENT,i=n.contentWindow.document.body?iw(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):oh.TRANSPARENT;a.backgroundColor=im(s)?im(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(rf),Cdt=["OL","UL","MENU"],vS=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,_de(a)&&a.data.trim().length>0)r.textNodes.push(new mdt(e,a,r.styles));else if(ov(a))if(Bde(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return vS(e,o,r,n)});else{var i=Ede(e,a);i.styles.isVisible()&&(_dt(a,i,n)?i.flags|=4:Sdt(i.styles)&&(i.flags|=2),Cdt.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?vS(e,a.shadowRoot,i,n):!yN(a)&&!Sde(a)&&!wN(a)&&vS(e,a,i,n))}},Ede=function(e,t){return $O(t)?new pde(e,t):Nde(t)?new gde(e,t):Sde(t)?new xde(e,t):Ndt(t)?new vde(e,t):kdt(t)?new VO(e,t):Bdt(t)?new iM(e,t):wN(t)?new bde(e,t):yN(t)?new yde(e,t):kde(t)?new wde(e,t):new rf(e,t)},Cde=function(e,t){var r=Ede(e,t);return r.flags|=4,vS(e,t,r,r),r},_dt=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||oM(e)&&r.styles.isTransparent()},Sdt=function(e){return e.isPositioned()||e.isFloating()},_de=function(e){return e.nodeType===Node.TEXT_NODE},ov=function(e){return e.nodeType===Node.ELEMENT_NODE},zO=function(e){return ov(e)&&typeof e.style<"u"&&!bS(e)},bS=function(e){return typeof e.className=="object"},Ndt=function(e){return e.tagName==="LI"},kdt=function(e){return e.tagName==="OL"},Bdt=function(e){return e.tagName==="INPUT"},Tdt=function(e){return e.tagName==="HTML"},Sde=function(e){return e.tagName==="svg"},oM=function(e){return e.tagName==="BODY"},Nde=function(e){return e.tagName==="CANVAS"},SX=function(e){return e.tagName==="VIDEO"},$O=function(e){return e.tagName==="IMG"},kde=function(e){return e.tagName==="IFRAME"},NX=function(e){return e.tagName==="STYLE"},jdt=function(e){return e.tagName==="SCRIPT"},yN=function(e){return e.tagName==="TEXTAREA"},wN=function(e){return e.tagName==="SELECT"},Bde=function(e){return e.tagName==="SLOT"},kX=function(e){return e.tagName.indexOf("-")>0},Idt=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var c=r.counters[o.counter];c&&o.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var c=r.counters[o.counter];i.push(o.counter),c||(c=r.counters[o.counter]=[]),c.push(o.reset)}),i},e}(),BX={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},TX={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Fdt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Odt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Fx=function(e,t,r,n,a,s){return e<t||e>r?u2(e,a,s.length>0):n.integers.reduce(function(i,o,c){for(;e>=o;)e-=o,i+=n.values[c];return i},"")+s},Tde=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Ls=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(Tde(Math.abs(e),s,n,function(i){return Qs(Math.floor(i%s)+t)})+a)},dp=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return Tde(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},Gx=1,_0=2,S0=4,Fy=8,Lf=function(e,t,r,n,a,s){if(e<-9999||e>9999)return u2(e,4,a.length>0);var i=Math.abs(e),o=a;if(i===0)return t[0]+o;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&Ei(s,Gx)&&o!==""?o=t[u]+o:u>1||u===1&&c===0||u===1&&c===1&&Ei(s,_0)||u===1&&c===1&&Ei(s,S0)&&e>100||u===1&&c>1&&Ei(s,Fy)?o=t[u]+(c>0?r[c-1]:"")+o:u===1&&c>0&&(o=r[c-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},jX="十百千萬",IX="拾佰仟萬",FX="マイナス",OI="마이너스",u2=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Ls(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return dp(e,"〇一二三四五六七八九",a);case 6:return Fx(e,1,3999,BX,3,n).toLowerCase();case 7:return Fx(e,1,3999,BX,3,n);case 8:return Ls(e,945,969,!1,n);case 9:return Ls(e,97,122,!1,n);case 10:return Ls(e,65,90,!1,n);case 11:return Ls(e,1632,1641,!0,n);case 12:case 49:return Fx(e,1,9999,TX,3,n);case 35:return Fx(e,1,9999,TX,3,n).toLowerCase();case 13:return Ls(e,2534,2543,!0,n);case 14:case 30:return Ls(e,6112,6121,!0,n);case 15:return dp(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return dp(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return Lf(e,"零一二三四五六七八九",jX,"負",a,_0|S0|Fy);case 47:return Lf(e,"零壹貳參肆伍陸柒捌玖",IX,"負",a,Gx|_0|S0|Fy);case 42:return Lf(e,"零一二三四五六七八九",jX,"负",a,_0|S0|Fy);case 41:return Lf(e,"零壹贰叁肆伍陆柒捌玖",IX,"负",a,Gx|_0|S0|Fy);case 26:return Lf(e,"〇一二三四五六七八九","十百千万",FX,a,0);case 25:return Lf(e,"零壱弐参四伍六七八九","拾百千万",FX,a,Gx|_0|S0);case 31:return Lf(e,"영일이삼사오육칠팔구","십백천만",OI,s,Gx|_0|S0);case 33:return Lf(e,"零一二三四五六七八九","十百千萬",OI,s,0);case 32:return Lf(e,"零壹貳參四五六七八九","拾百千",OI,s,Gx|_0|S0);case 18:return Ls(e,2406,2415,!0,n);case 20:return Fx(e,1,19999,Odt,3,n);case 21:return Ls(e,2790,2799,!0,n);case 22:return Ls(e,2662,2671,!0,n);case 22:return Fx(e,1,10999,Fdt,3,n);case 23:return dp(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return dp(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ls(e,3302,3311,!0,n);case 28:return dp(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return dp(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Ls(e,3792,3801,!0,n);case 37:return Ls(e,6160,6169,!0,n);case 38:return Ls(e,4160,4169,!0,n);case 39:return Ls(e,2918,2927,!0,n);case 40:return Ls(e,1776,1785,!0,n);case 43:return Ls(e,3046,3055,!0,n);case 44:return Ls(e,3174,3183,!0,n);case 45:return Ls(e,3664,3673,!0,n);case 46:return Ls(e,3872,3881,!0,n);case 3:default:return Ls(e,48,57,!0,n)}},jde="data-html2canvas-ignore",OX=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Idt,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=Ddt(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,o=a.contentWindow,c=o.document,u=Ldt(a).then(function(){return ul(n,void 0,void 0,function(){var d,f;return Lo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(Hdt),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Rdt(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(Udt(document.doctype)+"<html></html>"),Qdt(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(QO(t,2))debugger;if(Nde(t))return this.createCanvasClone(t);if(SX(t))return this.createVideoClone(t);if(NX(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return $O(r)&&($O(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),kX(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return DI(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var c=o.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!ov(r)||!jdt(r)&&!r.hasAttribute(jde)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!ov(r)||!NX(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(ov(s)&&Bde(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(_de(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&ov(t)&&(zO(t)||bS(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&zO(a)&&(this.clonedReferenceElement=a),oM(a)&&$dt(a);var c=this.counters.parse(new dX(this.context,s)),u=this.resolvePseudoContent(t,a,i,cw.BEFORE);kX(t)&&(r=!0),SX(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,o,cw.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||bS(t))&&!kde(t)||r)&&DI(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(yN(t)||wN(t))&&(yN(a)||wN(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new dX(this.context,n));var c=new Nut(this.context,n),u=o.createElement("html2canvaspseudoelement");DI(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(o.createTextNode(f.value));else if(f.type===22){var h=o.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var p=f.values.filter(wa);p.length&&u.appendChild(o.createTextNode(t.getAttribute(p[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(h1),x=g[0],b=g[1];if(x&&wa(x)){var y=s.counters.getCounterValue(x.value),w=b&&wa(b)?UO.parse(s.context,b.value):3;u.appendChild(o.createTextNode(u2(y,w,!1)))}}else if(f.name==="counters"){var S=f.values.filter(h1),x=S[0],j=S[1],b=S[2];if(x&&wa(x)){var N=s.counters.getCounterValues(x.value),F=b&&wa(b)?UO.parse(s.context,b.value):3,E=j&&j.type===0?j.value:"",_=N.map(function(D){return u2(D,F,!1)}).join(E);u.appendChild(o.createTextNode(_))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(o.createTextNode(uX(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(uX(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(f.value))}}),u.className=GO+" "+KO;var d=a===cw.BEFORE?" "+GO:" "+KO;return bS(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),cw;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(cw||(cw={}));var Ddt=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(jde,"true"),e.body.appendChild(r),r},Pdt=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},Rdt=function(e){return Promise.all([].slice.call(e.images,0).map(Pdt))},Ldt=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},Mdt=["all","d","content"],DI=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);Mdt.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},Udt=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},Qdt=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},Hdt=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},Vdt=":before",zdt=":after",GO="___html2canvas___pseudoelement_before",KO="___html2canvas___pseudoelement_after",DX=`{
    content: "" !important;
    display: none !important;
}`,$dt=function(e){Gdt(e,"."+GO+Vdt+DX+`
         .`+KO+zdt+DX)},Gdt=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},Ide=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Kdt=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(RI(t)||Ydt(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return ul(this,void 0,void 0,function(){var r,n,a,s,i=this;return Lo(this,function(o){switch(o.label){case 0:return r=Ide.isSameOrigin(t),n=!PI(t)&&this._options.useCORS===!0&&Ao.SUPPORT_CORS_IMAGES&&!r,a=!PI(t)&&!r&&!RI(t)&&typeof this._options.proxy=="string"&&Ao.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!PI(t)&&!RI(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(Jdt(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var o=Ao.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(o==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),qdt=/^data:image\/svg\+xml/i,Wdt=/^data:image\/.*;base64,/i,Xdt=/^data:image\/.*/i,Ydt=function(e){return Ao.SUPPORT_SVG_DRAWING||!Zdt(e)},PI=function(e){return Xdt.test(e)},Jdt=function(e){return Wdt.test(e)},RI=function(e){return e.substr(0,4)==="blob"},Zdt=function(e){return e.substr(-3).toLowerCase()==="svg"||qdt.test(e)},ar=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Ox=function(e,t,r){return new ar(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},N_=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=Ox(this.start,this.startControl,t),a=Ox(this.startControl,this.endControl,t),s=Ox(this.endControl,this.end,t),i=Ox(n,a,t),o=Ox(a,s,t),c=Ox(i,o,t);return r?new e(this.start,n,i,c):new e(c,o,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),_u=function(e){return e.type===1},eAt=function(){function e(t){var r=t.styles,n=t.bounds,a=jy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=jy(r.borderTopRightRadius,n.width,n.height),c=o[0],u=o[1],d=jy(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],p=jy(r.borderBottomLeftRadius,n.width,n.height),g=p[0],x=p[1],b=[];b.push((s+c)/n.width),b.push((g+f)/n.width),b.push((i+x)/n.height),b.push((u+h)/n.height);var y=Math.max.apply(Math,b);y>1&&(s/=y,i/=y,c/=y,u/=y,f/=y,h/=y,g/=y,x/=y);var w=n.width-c,S=n.height-h,j=n.width-f,N=n.height-x,F=r.borderTopWidth,E=r.borderRightWidth,_=r.borderBottomWidth,B=r.borderLeftWidth,P=Da(r.paddingTop,t.bounds.width),D=Da(r.paddingRight,t.bounds.width),I=Da(r.paddingBottom,t.bounds.width),U=Da(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Wa(n.left+B/3,n.top+F/3,s-B/3,i-F/3,na.TOP_LEFT):new ar(n.left+B/3,n.top+F/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Wa(n.left+w,n.top+F/3,c-E/3,u-F/3,na.TOP_RIGHT):new ar(n.left+n.width-E/3,n.top+F/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?Wa(n.left+j,n.top+S,f-E/3,h-_/3,na.BOTTOM_RIGHT):new ar(n.left+n.width-E/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?Wa(n.left+B/3,n.top+N,g-B/3,x-_/3,na.BOTTOM_LEFT):new ar(n.left+B/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Wa(n.left+B*2/3,n.top+F*2/3,s-B*2/3,i-F*2/3,na.TOP_LEFT):new ar(n.left+B*2/3,n.top+F*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Wa(n.left+w,n.top+F*2/3,c-E*2/3,u-F*2/3,na.TOP_RIGHT):new ar(n.left+n.width-E*2/3,n.top+F*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?Wa(n.left+j,n.top+S,f-E*2/3,h-_*2/3,na.BOTTOM_RIGHT):new ar(n.left+n.width-E*2/3,n.top+n.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?Wa(n.left+B*2/3,n.top+N,g-B*2/3,x-_*2/3,na.BOTTOM_LEFT):new ar(n.left+B*2/3,n.top+n.height-_*2/3),this.topLeftBorderStroke=s>0||i>0?Wa(n.left+B/2,n.top+F/2,s-B/2,i-F/2,na.TOP_LEFT):new ar(n.left+B/2,n.top+F/2),this.topRightBorderStroke=s>0||i>0?Wa(n.left+w,n.top+F/2,c-E/2,u-F/2,na.TOP_RIGHT):new ar(n.left+n.width-E/2,n.top+F/2),this.bottomRightBorderStroke=f>0||h>0?Wa(n.left+j,n.top+S,f-E/2,h-_/2,na.BOTTOM_RIGHT):new ar(n.left+n.width-E/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=g>0||x>0?Wa(n.left+B/2,n.top+N,g-B/2,x-_/2,na.BOTTOM_LEFT):new ar(n.left+B/2,n.top+n.height-_/2),this.topLeftBorderBox=s>0||i>0?Wa(n.left,n.top,s,i,na.TOP_LEFT):new ar(n.left,n.top),this.topRightBorderBox=c>0||u>0?Wa(n.left+w,n.top,c,u,na.TOP_RIGHT):new ar(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?Wa(n.left+j,n.top+S,f,h,na.BOTTOM_RIGHT):new ar(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?Wa(n.left,n.top+N,g,x,na.BOTTOM_LEFT):new ar(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Wa(n.left+B,n.top+F,Math.max(0,s-B),Math.max(0,i-F),na.TOP_LEFT):new ar(n.left+B,n.top+F),this.topRightPaddingBox=c>0||u>0?Wa(n.left+Math.min(w,n.width-E),n.top+F,w>n.width+E?0:Math.max(0,c-E),Math.max(0,u-F),na.TOP_RIGHT):new ar(n.left+n.width-E,n.top+F),this.bottomRightPaddingBox=f>0||h>0?Wa(n.left+Math.min(j,n.width-B),n.top+Math.min(S,n.height-_),Math.max(0,f-E),Math.max(0,h-_),na.BOTTOM_RIGHT):new ar(n.left+n.width-E,n.top+n.height-_),this.bottomLeftPaddingBox=g>0||x>0?Wa(n.left+B,n.top+Math.min(N,n.height-_),Math.max(0,g-B),Math.max(0,x-_),na.BOTTOM_LEFT):new ar(n.left+B,n.top+n.height-_),this.topLeftContentBox=s>0||i>0?Wa(n.left+B+U,n.top+F+P,Math.max(0,s-(B+U)),Math.max(0,i-(F+P)),na.TOP_LEFT):new ar(n.left+B+U,n.top+F+P),this.topRightContentBox=c>0||u>0?Wa(n.left+Math.min(w,n.width+B+U),n.top+F+P,w>n.width+B+U?0:c-B+U,u-(F+P),na.TOP_RIGHT):new ar(n.left+n.width-(E+D),n.top+F+P),this.bottomRightContentBox=f>0||h>0?Wa(n.left+Math.min(j,n.width-(B+U)),n.top+Math.min(S,n.height+F+P),Math.max(0,f-(E+D)),h-(_+I),na.BOTTOM_RIGHT):new ar(n.left+n.width-(E+D),n.top+n.height-(_+I)),this.bottomLeftContentBox=g>0||x>0?Wa(n.left+B+U,n.top+N,Math.max(0,g-(B+U)),x-(_+I),na.BOTTOM_LEFT):new ar(n.left+B+U,n.top+n.height-(_+I))}return e}(),na;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(na||(na={}));var Wa=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,c=e+r,u=t+n;switch(a){case na.TOP_LEFT:return new N_(new ar(e,u),new ar(e,u-o),new ar(c-i,t),new ar(c,t));case na.TOP_RIGHT:return new N_(new ar(e,t),new ar(e+i,t),new ar(c,u-o),new ar(c,u));case na.BOTTOM_RIGHT:return new N_(new ar(c,t),new ar(c,t+o),new ar(e+i,u),new ar(e,u));case na.BOTTOM_LEFT:default:return new N_(new ar(c,u),new ar(c-i,u),new ar(e,t+o),new ar(e,t))}},EN=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},tAt=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},CN=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},rAt=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),k_=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),nAt=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),aAt=function(e){return e.type===0},Fde=function(e){return e.type===1},sAt=function(e){return e.type===2},PX=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},iAt=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},Ode=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Dde=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new eAt(this.container),this.container.styles.opacity<1&&this.effects.push(new nAt(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new rAt(n,a,s))}if(this.container.styles.overflowX!==0){var i=EN(this.curves),o=CN(this.curves);PX(i,o)?this.effects.push(new k_(i,6)):(this.effects.push(new k_(i,2)),this.effects.push(new k_(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!Fde(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=EN(n.curves),o=CN(n.curves);PX(i,o)||a.unshift(new k_(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Ei(c.target,t)})},e}(),qO=function(e,t,r,n){e.container.elements.forEach(function(a){var s=Ei(a.flags,4),i=Ei(a.flags,2),o=new Dde(a,e);Ei(a.styles.display,2048)&&n.push(o);var c=Ei(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new Ode(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var p=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(p=x+1,!1):p>0}),u.positiveZIndex.splice(p,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);qO(o,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),qO(o,t,r,c);Ei(a.flags,8)&&Pde(a,c)})},Pde=function(e,t){for(var r=e instanceof VO?e.start:1,n=e instanceof VO?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof vde&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=u2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},oAt=function(e){var t=new Dde(e,null),r=new Ode(t),n=[];return qO(t,r,r,n),Pde(t.container,n),r},RX=function(e,t){switch(t){case 0:return Iu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Iu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Iu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Iu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},lAt=function(e,t){switch(t){case 0:return Iu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Iu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Iu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Iu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},cAt=function(e,t){switch(t){case 0:return Iu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Iu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Iu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Iu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},uAt=function(e,t){switch(t){case 0:return B_(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return B_(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return B_(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return B_(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},B_=function(e,t){var r=[];return _u(e)?r.push(e.subdivide(.5,!1)):r.push(e),_u(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Iu=function(e,t,r,n){var a=[];return _u(e)?a.push(e.subdivide(.5,!1)):a.push(e),_u(r)?a.push(r.subdivide(.5,!0)):a.push(r),_u(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),_u(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},Rde=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},_N=function(e){var t=e.styles,r=e.bounds,n=Da(t.paddingLeft,r.width),a=Da(t.paddingRight,r.width),s=Da(t.paddingTop,r.width),i=Da(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},dAt=function(e,t){return e===0?t.bounds:e===2?_N(t):Rde(t)},AAt=function(e,t){return e===0?t.bounds:e===2?_N(t):Rde(t)},LI=function(e,t,r){var n=dAt(Kx(e.styles.backgroundOrigin,t),e),a=AAt(Kx(e.styles.backgroundClip,t),e),s=fAt(Kx(e.styles.backgroundSize,t),r,n),i=s[0],o=s[1],c=jy(Kx(e.styles.backgroundPosition,t),n.width-i,n.height-o),u=hAt(Kx(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,i,o]},Dx=function(e){return wa(e)&&e.value===Tv.AUTO},T_=function(e){return typeof e=="number"},fAt=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(di(i)&&o&&di(o))return[Da(i,r.width),Da(o,r.height)];var c=T_(s);if(wa(i)&&(i.value===Tv.CONTAIN||i.value===Tv.COVER)){if(T_(s)){var u=r.width/r.height;return u<s!=(i.value===Tv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=T_(n),f=T_(a),h=d||f;if(Dx(i)&&(!o||Dx(o))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var p=d?n:a*s,g=f?a:n/s;return[p,g]}var x=d?n:r.width,b=f?a:r.height;return[x,b]}if(c){var y=0,w=0;return di(i)?y=Da(i,r.width):di(o)&&(w=Da(o,r.height)),Dx(i)?y=w*s:(!o||Dx(o))&&(w=y/s),[y,w]}var S=null,j=null;if(di(i)?S=Da(i,r.width):o&&di(o)&&(j=Da(o,r.height)),S!==null&&(!o||Dx(o))&&(j=d&&f?S/n*a:r.height),j!==null&&Dx(i)&&(S=d&&f?j/a*n:r.width),S!==null&&j!==null)return[S,j];throw new Error("Unable to calculate background-size for element")},Kx=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},hAt=function(e,t,r,n,a){var s=t[0],i=t[1],o=r[0],c=r[1];switch(e){case 2:return[new ar(Math.round(n.left),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(c+n.top+i)),new ar(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new ar(Math.round(n.left+s),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.height+n.top)),new ar(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ar(Math.round(n.left+s),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i+c)),new ar(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new ar(Math.round(a.left),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ar(Math.round(a.left),Math.round(a.height+a.top))]}},mAt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",LX="Hidden Text",pAt=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=mAt,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(LX)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(LX)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),Lde=function(){function e(t,r){this.context=t,this.options=r}return e}(),gAt=1e4,xAt=function(e){Hd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new pAt(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),sAt(r)&&(this.ctx.globalAlpha=r.opacity),aAt(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Fde(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return ul(this,void 0,void 0,function(){var n;return Lo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return ul(this,void 0,void 0,function(){return Lo(this,function(n){switch(n.label){case 0:if(Ei(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=sM(r.text);i.reduce(function(o,c){return s.ctx.fillText(c,o,r.bounds.top+a),o+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=EAt(r.fontFamily).join(", "),s=aE(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return ul(this,void 0,void 0,function(){var a,s,i,o,c,u,d,f,h=this;return Lo(this,function(p){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,o),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Mi(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var b=n.textShadow;b.length&&g.text.trim().length&&(b.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Mi(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Mi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Mi(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=_N(r),i=CN(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return ul(this,void 0,void 0,function(){var n,a,s,i,o,c,w,w,u,d,f,h,j,p,g,N,x,b,y,w,S,j,N;return Lo(this,function(F){switch(F.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,F.label=1;case 1:return i<o.length?(c=o[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:F.sent(),F.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof pde))return[3,8];F.label=5;case 5:return F.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=F.sent(),this.renderReplacedElement(n,a,w),[3,8];case 7:return F.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof gde&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof xde))return[3,12];F.label=9;case 9:return F.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=F.sent(),this.renderReplacedElement(n,a,w),[3,12];case 11:return F.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof wde&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=F.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),F.label=14;case 14:if(n instanceof iM&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===vN?n.checked&&(this.ctx.save(),this.path([new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79),new ar(n.bounds.left+f*.16,n.bounds.top+f*.5549),new ar(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new ar(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new ar(n.bounds.left+f*.72983,n.bounds.top+f*.23),new ar(n.bounds.left+f*.84,n.bounds.top+f*.34085),new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Mi(_X),this.ctx.fill(),this.ctx.restore()):n.type===bN&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Mi(_X),this.ctx.fill(),this.ctx.restore())),vAt(n)&&n.value.length){switch(h=this.createFontStyle(s),j=h[0],p=h[1],g=this.fontMetrics.getMetrics(j,p).baseline,this.ctx.font=j,this.ctx.fillStyle=Mi(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=yAt(n.styles.textAlign),N=_N(n),x=0,n.styles.textAlign){case 1:x+=N.width/2;break;case 2:x+=N.width;break}b=N.add(x,0,0,-N.height/2+1),this.ctx.save(),this.path([new ar(N.left,N.top),new ar(N.left+N.width,N.top),new ar(N.left+N.width,N.top+N.height),new ar(N.left,N.top+N.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new lw(n.value,b),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ei(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,S=y.url,F.label=15;case 15:return F.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return w=F.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return F.sent(),this.context.logger.error("Error loading list-style-image "+S),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(j=this.createFontStyle(s)[0],this.ctx.font=j,this.ctx.fillStyle=Mi(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",N=new _h(n.bounds.left,n.bounds.top+Da(n.styles.paddingTop,n.bounds.width),n.bounds.width,lX(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new lw(r.listValue,N),s.letterSpacing,lX(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),F.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return ul(this,void 0,void 0,function(){var n,a,y,s,i,y,o,c,y,u,d,y,f,h,y,p,g,y,x,b,y;return Lo(this,function(w){switch(w.label){case 0:if(Ei(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,a=r.negativeZIndex,w.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,i=r.nonInlineLevel,w.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:o=0,c=r.nonPositionedFloats,w.label=11;case 11:return o<c.length?(y=c[o],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,w.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:p=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return p<g.length?(y=g[p],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return p++,[3,23];case 26:x=0,b=r.positiveZIndex,w.label=27;case 27:return x<b.length?(y=b[x],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=_u(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),_u(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var c=o.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return ul(this,void 0,void 0,function(){var n,a,s,i,o,c;return Lo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,p,P,H,X,U,R,_,g,P,H,X,U,R,x,b,y,w,S,j,N,F,E,_,B,P,D,I,U,R,Y,H,X,V,z,q,ne,M,W,Z,re;return Lo(this,function(ae){switch(ae.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=ae.sent(),[3,4];case 3:return ae.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(p=LI(r,n,[f.width,f.height,f.width/f.height]),P=p[0],H=p[1],X=p[2],U=p[3],R=p[4],_=s.ctx.createPattern(s.resizeImage(f,U,R),"repeat"),s.renderRepeat(P,_,H,X)),[3,6];case 5:act(d)?(g=LI(r,n,[null,null,null]),P=g[0],H=g[1],X=g[2],U=g[3],R=g[4],x=Zlt(d.angle,U,R),b=x[0],y=x[1],w=x[2],S=x[3],j=x[4],N=document.createElement("canvas"),N.width=U,N.height=R,F=N.getContext("2d"),E=F.createLinearGradient(y,S,w,j),iX(d.stops,b).forEach(function(ce){return E.addColorStop(ce.stop,Mi(ce.color))}),F.fillStyle=E,F.fillRect(0,0,U,R),U>0&&R>0&&(_=s.ctx.createPattern(N,"repeat"),s.renderRepeat(P,_,H,X))):sct(d)&&(B=LI(r,n,[null,null,null]),P=B[0],D=B[1],I=B[2],U=B[3],R=B[4],Y=d.position.length===0?[rM]:d.position,H=Da(Y[0],U),X=Da(Y[Y.length-1],R),V=ect(d,H,X,U,R),z=V[0],q=V[1],z>0&&q>0&&(ne=s.ctx.createRadialGradient(D+H,I+X,0,D+H,I+X,z),iX(d.stops,z*2).forEach(function(ce){return ne.addColorStop(ce.stop,Mi(ce.color))}),s.path(P),s.ctx.fillStyle=ne,z!==q?(M=r.bounds.left+.5*r.bounds.width,W=r.bounds.top+.5*r.bounds.height,Z=q/z,re=1/Z,s.ctx.save(),s.ctx.translate(M,W),s.ctx.transform(1,0,0,Z,0,0),s.ctx.translate(-M,-W),s.ctx.fillRect(D,re*(I-W)+W,U,R*re),s.ctx.restore()):s.ctx.fill())),ae.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(c=o[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return ul(this,void 0,void 0,function(){return Lo(this,function(s){return this.path(RX(a,n)),this.ctx.fillStyle=Mi(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return ul(this,void 0,void 0,function(){var i,o;return Lo(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=lAt(s,a),this.path(i),this.ctx.fillStyle=Mi(r),this.ctx.fill(),o=cAt(s,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return ul(this,void 0,void 0,function(){var n,a,s,i,o,c,u,d,f=this;return Lo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!im(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=bAt(Kx(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),im(n.backgroundColor)||(this.ctx.fillStyle=Mi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){f.ctx.save();var g=EN(r.curves),x=p.inset?0:gAt,b=iAt(g,-x+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(f.path(g),f.ctx.clip(),f.mask(b)):(f.mask(g),f.ctx.clip(),f.path(b)),f.ctx.shadowOffsetX=p.offsetX.number+x,f.ctx.shadowOffsetY=p.offsetY.number,f.ctx.shadowColor=Mi(p.color),f.ctx.shadowBlur=p.blur.number,f.ctx.fillStyle=p.inset?Mi(p.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:o=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!im(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return ul(this,void 0,void 0,function(){var o,c,u,d,f,h,p,g,x,b,y,w,S,j,N,F,N,F;return Lo(this,function(E){return this.ctx.save(),o=uAt(s,a),c=RX(s,a),i===2&&(this.path(c),this.ctx.clip()),_u(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),_u(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?p=Math.abs(u-f):p=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,i===3&&(g=n,x=n),b=!0,p<=g*2?b=!1:p<=g*2+x?(y=p/(2*g+x),g*=y,x*=y):(w=Math.floor((p+x)/(g+x)),S=(p-w*g)/(w-1),j=(p-(w+1)*g)/w,x=j<=0||Math.abs(x-S)<Math.abs(x-j)?S:j),b&&(i===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Mi(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(_u(c[0])&&(N=c[3],F=c[0],this.ctx.beginPath(),this.formatPath([new ar(N.end.x,N.end.y),new ar(F.start.x,F.start.y)]),this.ctx.stroke()),_u(c[1])&&(N=c[1],F=c[2],this.ctx.beginPath(),this.formatPath([new ar(N.end.x,N.end.y),new ar(F.start.x,F.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return ul(this,void 0,void 0,function(){var n;return Lo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Mi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=oAt(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Lde),vAt=function(e){return e instanceof yde||e instanceof bde?!0:e instanceof iM&&e.type!==bN&&e.type!==vN},bAt=function(e,t){switch(e){case 0:return EN(t);case 2:return tAt(t);case 1:default:return CN(t)}},yAt=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},wAt=["-apple-system","system-ui"],EAt=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return wAt.indexOf(t)===-1}):e},CAt=function(e){Hd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return ul(this,void 0,void 0,function(){var n,a;return Lo(this,function(s){switch(s.label){case 0:return n=HO(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,_At(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Mi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Lde),_At=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},SAt=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,l_([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,l_([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,l_([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,l_([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),NAt=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new SAt({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new Kdt(this,t)}return e.instanceCount=1,e}(),WO=function(e,t){return t===void 0&&(t={}),kAt(e,t)};typeof window<"u"&&Ide.setContext(window);var kAt=function(e,t){return ul(void 0,void 0,void 0,function(){var r,n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,S,j,N,E,F,E,_,B,P,D,I,U,R,Y,H,X,V,z,q,ne,M,W,Z;return Lo(this,function(re){switch(re.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(_=t.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(B=t.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:t.proxy,useCORS:(P=t.useCORS)!==null&&P!==void 0?P:!1},s=NO({logging:(D=t.logging)!==null&&D!==void 0?D:!0,cache:t.cache},a),i={windowWidth:(I=t.windowWidth)!==null&&I!==void 0?I:n.innerWidth,windowHeight:(U=t.windowHeight)!==null&&U!==void 0?U:n.innerHeight,scrollX:(R=t.scrollX)!==null&&R!==void 0?R:n.pageXOffset,scrollY:(Y=t.scrollY)!==null&&Y!==void 0?Y:n.pageYOffset},o=new _h(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new NAt(s,o),u=(H=t.foreignObjectRendering)!==null&&H!==void 0?H:!1,d={allowTaint:(X=t.allowTaint)!==null&&X!==void 0?X:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new OX(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=re.sent(),g=oM(h)||Tdt(h)?iot(h.ownerDocument):Dk(c,h),x=g.width,b=g.height,y=g.left,w=g.top,S=BAt(c,h,t.backgroundColor),j={canvas:t.canvas,backgroundColor:S,scale:(z=(V=t.scale)!==null&&V!==void 0?V:n.devicePixelRatio)!==null&&z!==void 0?z:1,x:((q=t.x)!==null&&q!==void 0?q:0)+y,y:((ne=t.y)!==null&&ne!==void 0?ne:0)+w,width:(M=t.width)!==null&&M!==void 0?M:Math.ceil(x),height:(W=t.height)!==null&&W!==void 0?W:Math.ceil(b)},u?(c.logger.debug("Document cloned, using foreign object rendering"),E=new CAt(c,j),[4,E.render(h)]):[3,3];case 2:return N=re.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+w+" with size "+x+"x"+b+" using computed rendering"),c.logger.debug("Starting DOM parsing"),F=Cde(c,h),S===F.styles.backgroundColor&&(F.styles.backgroundColor=oh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+j.x+","+j.y+" with size "+j.width+"x"+j.height),E=new xAt(c,j),[4,E.render(F)];case 4:N=re.sent(),re.label=5;case 5:return(!((Z=t.removeContainer)!==null&&Z!==void 0)||Z)&&(OX.destroy(p)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,N]}})})},BAt=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?iw(e,getComputedStyle(n.documentElement).backgroundColor):oh.TRANSPARENT,s=n.body?iw(e,getComputedStyle(n.body).backgroundColor):oh.TRANSPARENT,i=typeof r=="string"?iw(e,r):r===null?oh.TRANSPARENT:4294967295;return t===n.documentElement?im(a)?im(s)?i:s:a:i};const TAt=Object.freeze(Object.defineProperty({__proto__:null,default:WO},Symbol.toStringTag,{value:"Module"})),jAt=e=>{const[t,r]=k.useState(!1),[n,a]=k.useState(null);return k.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},Mde=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],IAt=["Mecánica Industrial","Mecánica Automotriz"],FAt=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:Mde.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),MX=({empresas:e,isLoaded:t,route:r})=>{const n=k.useRef(null),a=k.useRef(null),s=k.useRef([]),i=k.useRef(null),o=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return k.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):o.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[o,t,r]),l.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[l.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&o.length===0&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:l.jsx("div",{className:"text-center p-6",children:l.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},OAt=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.duration)==null?void 0:p.value)||0)},0),o=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+o,u=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.distance)==null?void 0:p.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return l.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[l.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),l.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var p,g,x;return l.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[(p=f.duration)==null?void 0:p.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&l.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((b,y)=>b.transit&&l.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[l.jsx("span",{className:"text-lg",children:"🚌"}),l.jsx("span",{dangerouslySetInnerHTML:{__html:b.instructions}})]},y))})]},h)})}),l.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[l.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),l.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),l.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),l.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&l.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},UX=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,DAt=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),l.jsx(Ey,{width:"100%",height:300,children:l.jsxs(AYe,{children:[l.jsx(Doe,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>l.jsx(Y2,{fill:t[n%t.length]},`cell-${n}`))}),l.jsx(wy,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),l.jsx(Ey,{width:"100%",height:300,children:l.jsxs(XF,{data:e.porSupervisor,layout:"vertical",children:[l.jsx(J5,{strokeDasharray:"3 3"}),l.jsx(e2,{type:"number"}),l.jsx(t2,{type:"category",dataKey:"name",width:150}),l.jsx(wy,{}),l.jsx(W5,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),l.jsx(Ey,{width:"100%",height:300,children:l.jsxs(XF,{data:e.porComuna,children:[l.jsx(J5,{strokeDasharray:"3 3"}),l.jsx(e2,{dataKey:"name"}),l.jsx(t2,{}),l.jsx(wy,{}),l.jsx(W5,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),l.jsx(Ey,{width:"100%",height:300,children:l.jsxs(mYe,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[l.jsx(Eoe,{}),l.jsx(mk,{dataKey:"subject"}),l.jsx(fk,{angle:30,domain:[0,5]}),l.jsx(x8,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),l.jsx(wy,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),l.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:l.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>l.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[l.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),l.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},PAt=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState("list"),[i,o]=k.useState(null),[c,u]=k.useState(!0),[d,f]=k.useState(null),[h,p]=k.useState(null),[g,x]=k.useState(null),[b,y]=k.useState([]),[w,S]=k.useState(null),[j,N]=k.useState(!1),[F,E]=k.useState("DRIVING"),[_,B]=k.useState(""),[P,D]=k.useState([]),I="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:U}=jAt(I);k.useEffect(()=>{u(!0);const oe=rst(t),le=sst(n),pe=ost(D);return u(!1),()=>{oe(),le(),pe()}},[]);const R=k.useMemo(()=>{const oe=e.reduce((_e,De)=>{const Ne=De.area||"Sin especificar";return _e[Ne]=(_e[Ne]||0)+1,_e},{}),le=e.reduce((_e,De)=>{var fe;const Ne=((fe=De.docenteSupervisor)==null?void 0:fe.nombreCompleto)||"Sin asignar";return _e[Ne]=(_e[Ne]||0)+1,_e},{}),pe=e.reduce((_e,De)=>{const Ne=De.direccion.split(",").map(Ie=>Ie.trim()),fe=Ne.length>1?Ne[1]:"Desconocida";return _e[fe]=(_e[fe]||0)+1,_e},{}),Be=Mde.map(_e=>{const De=e.flatMap(fe=>{var Ie;return(Ie=fe.calificaciones.find(Ue=>Ue.elemento===_e.elemento))==null?void 0:Ie.score}).filter(fe=>fe!=null),Ne=De.length>0?De.reduce((fe,Ie)=>fe+Ie,0)/De.length:0;return{subject:_e.elemento.split(" ")[0],A:Ne,fullMark:5}}),te=e.map(_e=>{const De=_e.calificaciones.map(fe=>fe.score).filter(fe=>fe!=null),Ne=De.length>0?De.reduce((fe,Ie)=>fe+Ie,0)/De.length:0;return{..._e,promedio:Ne}}).filter(_e=>_e.promedio>0).sort((_e,De)=>De.promedio-_e.promedio);return{porEspecialidad:Object.entries(oe).map(([_e,De])=>({name:_e,value:De})),porSupervisor:Object.entries(le).map(([_e,De])=>({name:_e,value:De})),porComuna:Object.entries(pe).map(([_e,De])=>({name:_e,value:De})),calificacionPorAmbito:Be,ranking:te}},[e]),Y=async()=>{if(i)try{await nst(i),s("list"),o(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},H=async oe=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await ast(oe)},X=(oe,le)=>{o(pe=>pe?{...pe,[oe]:le}:null)},V=async oe=>{var le;if(f(oe),(le=oe==null?void 0:oe.value)!=null&&le.place_id&&U){const pe=await UX(oe.value.place_id);X("direccion",oe.label||""),X("coordenadas",pe)}else X("direccion",(oe==null?void 0:oe.label)||"")},z=oe=>{o(JSON.parse(JSON.stringify(oe))),oe.direccion&&f({label:oe.direccion,value:{description:oe.direccion}}),s("form")},q=async oe=>{var le;if(p(oe),(le=oe==null?void 0:oe.value)!=null&&le.place_id&&U){const pe=await UX(oe.value.place_id);x(pe)}},ne=oe=>{y(le=>le.some(pe=>pe.id===oe.id)?le.filter(pe=>pe.id!==oe.id):[...le,oe])},M=()=>{if(!g||b.length===0||!U)return;N(!0);const oe=new window.google.maps.DirectionsService,le=b.filter(pe=>pe.coordenadas).map(pe=>({location:pe.coordenadas,stopover:!0}));oe.route({origin:g,destination:g,waypoints:le,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[F]},(pe,Be)=>{N(!1),Be===window.google.maps.DirectionsStatus.OK&&pe?S(pe):alert("No se pudo calcular la ruta: "+Be)})},W=()=>{S(null),p(null),x(null),y([]),B("")},Z=async()=>{if(!_||!h||!g||b.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const oe={nombre:_,startPoint:{label:h.label,coords:g},empresas:b.map(le=>({id:le.id,nombre:le.nombre,coordenadas:le.coordenadas})),travelMode:F};try{await ist(oe),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},re=async()=>{const oe=document.getElementById("map-container-for-pdf"),le=document.getElementById("route-details-for-pdf");if(!oe||!le)return;const pe=new vr("p","mm","a4"),Be=pe.internal.pageSize.getWidth();pe.text(`Ruta de Supervisión: ${_||"Sin nombre"}`,10,15),pe.setFontSize(10),pe.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const _e=(await WO(oe,{useCORS:!0})).toDataURL("image/png");pe.addImage(_e,"PNG",10,30,Be-20,100);const Ne=(await WO(le)).toDataURL("image/png"),fe=pe.getImageProperties(Ne),Ie=fe.height*(Be-20)/fe.width;pe.addImage(Ne,"PNG",10,135,Be-20,Ie),pe.save(`ruta-${_||"supervision"}.pdf`)},ae=oe=>{p({label:oe.startPoint.label,value:null}),x(oe.startPoint.coords),y(oe.empresas),E(oe.travelMode),B(oe.nombre),s("route")},ce=async oe=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await lst(oe),alert("Ruta eliminada."))};return c?l.jsx("div",{className:"text-center p-8",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),l.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&l.jsx("button",{onClick:()=>{s("list"),f(null),o(null),W()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[l.jsx(xye,{size:18})," Dashboard"]}),l.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),l.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),l.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),l.jsx("button",{onClick:()=>{o(FAt()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&l.jsx(DAt,{data:R}),a==="saved-routes"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),l.jsx("div",{className:"space-y-3",children:P.length===0?l.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):P.map(oe=>l.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:oe.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[oe.empresas.length," paradas"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>ae(oe),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),l.jsx("button",{onClick:()=>ce(oe.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},oe.id))})]}),a==="route"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),l.jsx("input",{type:"text",value:_,onChange:oe=>B(oe.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),l.jsx(MW,{apiKey:I,selectProps:{value:h,onChange:q,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),l.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[l.jsx("button",{onClick:()=>E("DRIVING"),className:`w-full py-2 rounded-md transition ${F==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),l.jsx("button",{onClick:()=>E("TRANSIT"),className:`w-full py-2 rounded-md transition ${F==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),l.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(oe=>oe.coordenadas).map(oe=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:`route-${oe.id}`,checked:b.some(le=>le.id===oe.id),onChange:()=>ne(oe),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("label",{htmlFor:`route-${oe.id}`,className:"ml-3 text-sm text-gray-700",children:oe.nombre})]},oe.id))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("button",{onClick:M,disabled:!g||b.length===0||j,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:j?"Calculando...":"Visualizar Ruta"}),l.jsx("button",{onClick:Z,disabled:!_||!g||b.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),l.jsx("button",{onClick:re,disabled:!w,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),l.jsx("button",{onClick:W,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),l.jsx("div",{children:l.jsx(MX,{empresas:b,isLoaded:U,route:w})})]}),w&&l.jsx(OAt,{route:w,travelMode:F})]}),a==="map"&&l.jsx(MX,{empresas:e,isLoaded:U}),a==="list"&&l.jsx("div",{className:"space-y-3",children:e.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(oe=>{var le;return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:oe.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[oe.rut," | ",oe.direccion]}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",oe.area||"No especificada"," | Cupos: ",oe.cupos," | Supervisor: ",((le=oe.docenteSupervisor)==null?void 0:le.nombreCompleto)||"Ninguno"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>z(oe),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),l.jsx("button",{onClick:()=>H(oe.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},oe.id)})}),a==="form"&&i&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Obe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.nombre,onChange:oe=>X("nombre",oe.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Aye,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.rut,onChange:oe=>X("rut",oe.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(zS,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),l.jsx("div",{className:"w-full pl-10",children:l.jsx(MW,{apiKey:I,selectProps:{value:d,onChange:V,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Ew,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.contacto,onChange:oe=>X("contacto",oe.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Tye,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"email",value:i.email||"",onChange:oe=>X("email",oe.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Bd,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"number",value:i.cupos,onChange:oe=>X("cupos",parseInt(oe.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(ZZ,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.area||"",onChange:oe=>X("area",oe.target.value),className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),IAt.map(oe=>l.jsx("option",{value:oe,children:oe},oe))]})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(Ew,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:oe=>{const le=oe.target.value;X("docenteSupervisor",le?JSON.parse(le):void 0)},className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(oe=>l.jsx("option",{value:JSON.stringify({id:oe.id,nombre:oe.nombreCompleto}),children:oe.nombreCompleto},oe.id))]})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),i.calificaciones.map((oe,le)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[l.jsx(awe,{className:"w-5 h-5 text-slate-400"}),l.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:oe.elemento}),l.jsxs("select",{value:oe.score||"",onChange:pe=>{const Be=[...i.calificaciones];Be[le].score=pe.target.value?parseInt(pe.target.value):null,X("calificaciones",Be)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(pe=>l.jsx("option",{value:pe,children:pe},pe))]})]},le))]}),l.jsx("div",{className:"pt-6",children:l.jsx("button",{onClick:Y,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})};var sE=e=>e.type==="checkbox",Op=e=>e instanceof Date,hl=e=>e==null;const Ude=e=>typeof e=="object";var Ws=e=>!hl(e)&&!Array.isArray(e)&&Ude(e)&&!Op(e),RAt=e=>Ws(e)&&e.target?sE(e.target)?e.target.checked:e.target.value:e,LAt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,MAt=(e,t)=>e.has(LAt(t)),UAt=e=>{const t=e.constructor&&e.constructor.prototype;return Ws(t)&&t.hasOwnProperty("isPrototypeOf")},lM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Xa(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(lM&&(e instanceof Blob||n))&&(r||Ws(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!UAt(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Xa(e[a]));else return e;return t}var $k=e=>/^\w*$/.test(e),Ya=e=>e===void 0,Gk=e=>Array.isArray(e)?e.filter(Boolean):[],cM=e=>Gk(e.replace(/["|']|\]/g,"").split(/\.|\[/)),lr=(e,t,r)=>{if(!t||!Ws(e))return r;const n=($k(t)?[t]:cM(t)).reduce((a,s)=>hl(a)?a:a[s],e);return Ya(n)||n===e?Ya(e[t])?r:e[t]:n},kA=e=>typeof e=="boolean",Fa=(e,t,r)=>{let n=-1;const a=$k(t)?[t]:cM(t),s=a.length,i=s-1;for(;++n<s;){const o=a[n];let c=r;if(n!==i){const u=e[o];c=Ws(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const QX={BLUR:"blur",FOCUS_OUT:"focusout"},Nu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Mf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Qde=ct.createContext(null);Qde.displayName="HookFormContext";const QAt=()=>ct.useContext(Qde);var HAt=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const i=s;return t._proxyFormState[i]!==Nu.all&&(t._proxyFormState[i]=!n||Nu.all),e[i]}});return a};const Hde=typeof window<"u"?ct.useLayoutEffect:ct.useEffect;var MA=e=>typeof e=="string",VAt=(e,t,r,n,a)=>MA(e)?(n&&t.watch.add(e),lr(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),lr(r,s))):(n&&(t.watchAll=!0),r),XO=e=>hl(e)||!Ude(e);function R0(e,t,r=new WeakSet){if(XO(e)||XO(t))return e===t;if(Op(e)&&Op(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const i=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Op(i)&&Op(o)||Ws(i)&&Ws(o)||Array.isArray(i)&&Array.isArray(o)?!R0(i,o,r):i!==o)return!1}}return!0}var zAt=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Wl=e=>Array.isArray(e)?e:[e],HX=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},dl=e=>Ws(e)&&!Object.keys(e).length,uM=e=>e.type==="file",vd=e=>typeof e=="function",SN=e=>{if(!lM)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Vde=e=>e.type==="select-multiple",dM=e=>e.type==="radio",$At=e=>dM(e)||sE(e),MI=e=>SN(e)&&e.isConnected;function GAt(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ya(e)?n++:e[t[n++]];return e}function KAt(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ya(e[t]))return!1;return!0}function Us(e,t){const r=Array.isArray(t)?t:$k(t)?[t]:cM(t),n=r.length===1?e:GAt(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Ws(n)&&dl(n)||Array.isArray(n)&&KAt(n))&&Us(e,r.slice(0,-1)),e}var zde=e=>{for(const t in e)if(vd(e[t]))return!0;return!1};function NN(e,t={}){const r=Array.isArray(e);if(Ws(e)||r)for(const n in e)Array.isArray(e[n])||Ws(e[n])&&!zde(e[n])?(t[n]=Array.isArray(e[n])?[]:{},NN(e[n],t[n])):hl(e[n])||(t[n]=!0);return t}function $de(e,t,r){const n=Array.isArray(e);if(Ws(e)||n)for(const a in e)Array.isArray(e[a])||Ws(e[a])&&!zde(e[a])?Ya(t)||XO(r[a])?r[a]=Array.isArray(e[a])?NN(e[a],[]):{...NN(e[a])}:$de(e[a],hl(t)?{}:t[a],r[a]):r[a]=!R0(e[a],t[a]);return r}var ly=(e,t)=>$de(e,t,NN(t));const VX={value:!1,isValid:!1},zX={value:!0,isValid:!0};var Gde=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ya(e[0].attributes.value)?Ya(e[0].value)||e[0].value===""?zX:{value:e[0].value,isValid:!0}:zX:VX}return VX},Kde=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ya(e)?e:t?e===""?NaN:e&&+e:r&&MA(e)?new Date(e):n?n(e):e;const $X={isValid:!1,value:null};var qde=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,$X):$X;function GX(e){const t=e.ref;return uM(t)?t.files:dM(t)?qde(e.refs).value:Vde(t)?[...t.selectedOptions].map(({value:r})=>r):sE(t)?Gde(e.refs).value:Kde(Ya(t.value)?e.ref.value:t.value,e)}var qAt=(e,t,r,n)=>{const a={};for(const s of e){const i=lr(t,s);i&&Fa(a,s,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},kN=e=>e instanceof RegExp,cy=e=>Ya(e)?e:kN(e)?e.source:Ws(e)?kN(e.value)?e.value.source:e.value:e,lv=e=>({isOnSubmit:!e||e===Nu.onSubmit,isOnBlur:e===Nu.onBlur,isOnChange:e===Nu.onChange,isOnAll:e===Nu.all,isOnTouch:e===Nu.onTouched});const KX="AsyncFunction";var WAt=e=>!!e&&!!e.validate&&!!(vd(e.validate)&&e.validate.constructor.name===KX||Ws(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===KX)),XAt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),YO=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const jv=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=lr(e,a);if(s){const{_f:i,...o}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if(jv(o,t))break}else if(Ws(o)&&jv(o,t))break}}};function qX(e,t,r){const n=lr(e,r);if(n||$k(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=lr(t,s),o=lr(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};a.pop()}return{name:r}}var YAt=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return dl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!n||Nu.all))},JAt=(e,t,r)=>!e||!t||e===t||Wl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),ZAt=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,eft=(e,t)=>!Gk(lr(e,t)).length&&Us(e,t),Wde=(e,t,r)=>{const n=Wl(lr(e,r));return Fa(n,"root",t[r]),Fa(e,r,n),e},yS=e=>MA(e);function WX(e,t,r="validate"){if(yS(e)||Array.isArray(e)&&e.every(yS)||kA(e)&&!e)return{type:r,message:yS(e)?e:"",ref:t}}var Px=e=>Ws(e)&&!kN(e)?e:{value:e,message:""},JO=async(e,t,r,n,a,s)=>{const{ref:i,refs:o,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:p,validate:g,name:x,valueAsNumber:b,mount:y}=e._f,w=lr(r,x);if(!y||t.has(x))return{};const S=o?o[0]:i,j=I=>{a&&S.reportValidity&&(S.setCustomValidity(kA(I)?"":I||""),S.reportValidity())},N={},F=dM(i),E=sE(i),_=F||E,B=(b||uM(i))&&Ya(i.value)&&Ya(w)||SN(i)&&i.value===""||w===""||Array.isArray(w)&&!w.length,P=zAt.bind(null,x,n,N),D=(I,U,R,Y=Mf.maxLength,H=Mf.minLength)=>{const X=I?U:R;N[x]={type:I?Y:H,message:X,ref:i,...P(I?Y:H,X)}};if(s?!Array.isArray(w)||!w.length:c&&(!_&&(B||hl(w))||kA(w)&&!w||E&&!Gde(o).isValid||F&&!qde(o).isValid)){const{value:I,message:U}=yS(c)?{value:!!c,message:c}:Px(c);if(I&&(N[x]={type:Mf.required,message:U,ref:S,...P(Mf.required,U)},!n))return j(U),N}if(!B&&(!hl(f)||!hl(h))){let I,U;const R=Px(h),Y=Px(f);if(!hl(w)&&!isNaN(w)){const H=i.valueAsNumber||w&&+w;hl(R.value)||(I=H>R.value),hl(Y.value)||(U=H<Y.value)}else{const H=i.valueAsDate||new Date(w),X=q=>new Date(new Date().toDateString()+" "+q),V=i.type=="time",z=i.type=="week";MA(R.value)&&w&&(I=V?X(w)>X(R.value):z?w>R.value:H>new Date(R.value)),MA(Y.value)&&w&&(U=V?X(w)<X(Y.value):z?w<Y.value:H<new Date(Y.value))}if((I||U)&&(D(!!I,R.message,Y.message,Mf.max,Mf.min),!n))return j(N[x].message),N}if((u||d)&&!B&&(MA(w)||s&&Array.isArray(w))){const I=Px(u),U=Px(d),R=!hl(I.value)&&w.length>+I.value,Y=!hl(U.value)&&w.length<+U.value;if((R||Y)&&(D(R,I.message,U.message),!n))return j(N[x].message),N}if(p&&!B&&MA(w)){const{value:I,message:U}=Px(p);if(kN(I)&&!w.match(I)&&(N[x]={type:Mf.pattern,message:U,ref:i,...P(Mf.pattern,U)},!n))return j(U),N}if(g){if(vd(g)){const I=await g(w,r),U=WX(I,S);if(U&&(N[x]={...U,...P(Mf.validate,U.message)},!n))return j(U.message),N}else if(Ws(g)){let I={};for(const U in g){if(!dl(I)&&!n)break;const R=WX(await g[U](w,r),S,U);R&&(I={...R,...P(U,R.message)},j(R.message),n&&(N[x]=I))}if(!dl(I)&&(N[x]={ref:S,...I},!n))return N}}return j(!0),N};const tft={mode:Nu.onSubmit,reValidateMode:Nu.onChange,shouldFocusError:!0};function rft(e={}){let t={...tft,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:vd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Ws(t.defaultValues)||Ws(t.values)?Xa(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Xa(a),i={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:HX(),state:HX()},p=t.criteriaMode===Nu.all,g=ye=>Oe=>{clearTimeout(u),u=setTimeout(ye,Oe)},x=async ye=>{if(!t.disabled&&(d.isValid||f.isValid||ye)){const Oe=t.resolver?dl((await E()).errors):await B(n,!0);Oe!==r.isValid&&h.state.next({isValid:Oe})}},b=(ye,Oe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ye||Array.from(o.mount)).forEach(Re=>{Re&&(Oe?Fa(r.validatingFields,Re,Oe):Us(r.validatingFields,Re))}),h.state.next({validatingFields:r.validatingFields,isValidating:!dl(r.validatingFields)}))},y=(ye,Oe=[],Re,qe,Ze=!0,lt=!0)=>{if(qe&&Re&&!t.disabled){if(i.action=!0,lt&&Array.isArray(lr(n,ye))){const mt=Re(lr(n,ye),qe.argA,qe.argB);Ze&&Fa(n,ye,mt)}if(lt&&Array.isArray(lr(r.errors,ye))){const mt=Re(lr(r.errors,ye),qe.argA,qe.argB);Ze&&Fa(r.errors,ye,mt),eft(r.errors,ye)}if((d.touchedFields||f.touchedFields)&&lt&&Array.isArray(lr(r.touchedFields,ye))){const mt=Re(lr(r.touchedFields,ye),qe.argA,qe.argB);Ze&&Fa(r.touchedFields,ye,mt)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=ly(a,s)),h.state.next({name:ye,isDirty:D(ye,Oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Fa(s,ye,Oe)},w=(ye,Oe)=>{Fa(r.errors,ye,Oe),h.state.next({errors:r.errors})},S=ye=>{r.errors=ye,h.state.next({errors:r.errors,isValid:!1})},j=(ye,Oe,Re,qe)=>{const Ze=lr(n,ye);if(Ze){const lt=lr(s,ye,Ya(Re)?lr(a,ye):Re);Ya(lt)||qe&&qe.defaultChecked||Oe?Fa(s,ye,Oe?lt:GX(Ze._f)):R(ye,lt),i.mount&&x()}},N=(ye,Oe,Re,qe,Ze)=>{let lt=!1,mt=!1;const It={name:ye};if(!t.disabled){if(!Re||qe){(d.isDirty||f.isDirty)&&(mt=r.isDirty,r.isDirty=It.isDirty=D(),lt=mt!==It.isDirty);const Mt=R0(lr(a,ye),Oe);mt=!!lr(r.dirtyFields,ye),Mt?Us(r.dirtyFields,ye):Fa(r.dirtyFields,ye,!0),It.dirtyFields=r.dirtyFields,lt=lt||(d.dirtyFields||f.dirtyFields)&&mt!==!Mt}if(Re){const Mt=lr(r.touchedFields,ye);Mt||(Fa(r.touchedFields,ye,Re),It.touchedFields=r.touchedFields,lt=lt||(d.touchedFields||f.touchedFields)&&Mt!==Re)}lt&&Ze&&h.state.next(It)}return lt?It:{}},F=(ye,Oe,Re,qe)=>{const Ze=lr(r.errors,ye),lt=(d.isValid||f.isValid)&&kA(Oe)&&r.isValid!==Oe;if(t.delayError&&Re?(c=g(()=>w(ye,Re)),c(t.delayError)):(clearTimeout(u),c=null,Re?Fa(r.errors,ye,Re):Us(r.errors,ye)),(Re?!R0(Ze,Re):Ze)||!dl(qe)||lt){const mt={...qe,...lt&&kA(Oe)?{isValid:Oe}:{},errors:r.errors,name:ye};r={...r,...mt},h.state.next(mt)}},E=async ye=>{b(ye,!0);const Oe=await t.resolver(s,t.context,qAt(ye||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(ye),Oe},_=async ye=>{const{errors:Oe}=await E(ye);if(ye)for(const Re of ye){const qe=lr(Oe,Re);qe?Fa(r.errors,Re,qe):Us(r.errors,Re)}else r.errors=Oe;return Oe},B=async(ye,Oe,Re={valid:!0})=>{for(const qe in ye){const Ze=ye[qe];if(Ze){const{_f:lt,...mt}=Ze;if(lt){const It=o.array.has(lt.name),Mt=Ze._f&&WAt(Ze._f);Mt&&d.validatingFields&&b([qe],!0);const Pt=await JO(Ze,o.disabled,s,p,t.shouldUseNativeValidation&&!Oe,It);if(Mt&&d.validatingFields&&b([qe]),Pt[lt.name]&&(Re.valid=!1,Oe))break;!Oe&&(lr(Pt,lt.name)?It?Wde(r.errors,Pt,lt.name):Fa(r.errors,lt.name,Pt[lt.name]):Us(r.errors,lt.name))}!dl(mt)&&await B(mt,Oe,Re)}}return Re.valid},P=()=>{for(const ye of o.unMount){const Oe=lr(n,ye);Oe&&(Oe._f.refs?Oe._f.refs.every(Re=>!MI(Re)):!MI(Oe._f.ref))&&ce(ye)}o.unMount=new Set},D=(ye,Oe)=>!t.disabled&&(ye&&Oe&&Fa(s,ye,Oe),!R0(q(),a)),I=(ye,Oe,Re)=>VAt(ye,o,{...i.mount?s:Ya(Oe)?a:MA(ye)?{[ye]:Oe}:Oe},Re,Oe),U=ye=>Gk(lr(i.mount?s:a,ye,t.shouldUnregister?lr(a,ye,[]):[])),R=(ye,Oe,Re={})=>{const qe=lr(n,ye);let Ze=Oe;if(qe){const lt=qe._f;lt&&(!lt.disabled&&Fa(s,ye,Kde(Oe,lt)),Ze=SN(lt.ref)&&hl(Oe)?"":Oe,Vde(lt.ref)?[...lt.ref.options].forEach(mt=>mt.selected=Ze.includes(mt.value)):lt.refs?sE(lt.ref)?lt.refs.forEach(mt=>{(!mt.defaultChecked||!mt.disabled)&&(Array.isArray(Ze)?mt.checked=!!Ze.find(It=>It===mt.value):mt.checked=Ze===mt.value||!!Ze)}):lt.refs.forEach(mt=>mt.checked=mt.value===Ze):uM(lt.ref)?lt.ref.value="":(lt.ref.value=Ze,lt.ref.type||h.state.next({name:ye,values:Xa(s)})))}(Re.shouldDirty||Re.shouldTouch)&&N(ye,Ze,Re.shouldTouch,Re.shouldDirty,!0),Re.shouldValidate&&z(ye)},Y=(ye,Oe,Re)=>{for(const qe in Oe){if(!Oe.hasOwnProperty(qe))return;const Ze=Oe[qe],lt=ye+"."+qe,mt=lr(n,lt);(o.array.has(ye)||Ws(Ze)||mt&&!mt._f)&&!Op(Ze)?Y(lt,Ze,Re):R(lt,Ze,Re)}},H=(ye,Oe,Re={})=>{const qe=lr(n,ye),Ze=o.array.has(ye),lt=Xa(Oe);Fa(s,ye,lt),Ze?(h.array.next({name:ye,values:Xa(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Re.shouldDirty&&h.state.next({name:ye,dirtyFields:ly(a,s),isDirty:D(ye,lt)})):qe&&!qe._f&&!hl(lt)?Y(ye,lt,Re):R(ye,lt,Re),YO(ye,o)&&h.state.next({...r,name:ye}),h.state.next({name:i.mount?ye:void 0,values:Xa(s)})},X=async ye=>{i.mount=!0;const Oe=ye.target;let Re=Oe.name,qe=!0;const Ze=lr(n,Re),lt=Mt=>{qe=Number.isNaN(Mt)||Op(Mt)&&isNaN(Mt.getTime())||R0(Mt,lr(s,Re,Mt))},mt=lv(t.mode),It=lv(t.reValidateMode);if(Ze){let Mt,Pt;const Qt=Oe.type?GX(Ze._f):RAt(ye),yt=ye.type===QX.BLUR||ye.type===QX.FOCUS_OUT,kr=!XAt(Ze._f)&&!t.resolver&&!lr(r.errors,Re)&&!Ze._f.deps||ZAt(yt,lr(r.touchedFields,Re),r.isSubmitted,It,mt),er=YO(Re,o,yt);Fa(s,Re,Qt),yt?(!Oe||!Oe.readOnly)&&(Ze._f.onBlur&&Ze._f.onBlur(ye),c&&c(0)):Ze._f.onChange&&Ze._f.onChange(ye);const an=N(Re,Qt,yt),_r=!dl(an)||er;if(!yt&&h.state.next({name:Re,type:ye.type,values:Xa(s)}),kr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?yt&&x():yt||x()),_r&&h.state.next({name:Re,...er?{}:an});if(!yt&&er&&h.state.next({...r}),t.resolver){const{errors:Vr}=await E([Re]);if(lt(Qt),qe){const jn=qX(r.errors,n,Re),Or=qX(Vr,n,jn.name||Re);Mt=Or.error,Re=Or.name,Pt=dl(Vr)}}else b([Re],!0),Mt=(await JO(Ze,o.disabled,s,p,t.shouldUseNativeValidation))[Re],b([Re]),lt(Qt),qe&&(Mt?Pt=!1:(d.isValid||f.isValid)&&(Pt=await B(n,!0)));qe&&(Ze._f.deps&&z(Ze._f.deps),F(Re,Pt,Mt,an))}},V=(ye,Oe)=>{if(lr(r.errors,Oe)&&ye.focus)return ye.focus(),1},z=async(ye,Oe={})=>{let Re,qe;const Ze=Wl(ye);if(t.resolver){const lt=await _(Ya(ye)?ye:Ze);Re=dl(lt),qe=ye?!Ze.some(mt=>lr(lt,mt)):Re}else ye?(qe=(await Promise.all(Ze.map(async lt=>{const mt=lr(n,lt);return await B(mt&&mt._f?{[lt]:mt}:mt)}))).every(Boolean),!(!qe&&!r.isValid)&&x()):qe=Re=await B(n);return h.state.next({...!MA(ye)||(d.isValid||f.isValid)&&Re!==r.isValid?{}:{name:ye},...t.resolver||!ye?{isValid:Re}:{},errors:r.errors}),Oe.shouldFocus&&!qe&&jv(n,V,ye?Ze:o.mount),qe},q=ye=>{const Oe={...i.mount?s:a};return Ya(ye)?Oe:MA(ye)?lr(Oe,ye):ye.map(Re=>lr(Oe,Re))},ne=(ye,Oe)=>({invalid:!!lr((Oe||r).errors,ye),isDirty:!!lr((Oe||r).dirtyFields,ye),error:lr((Oe||r).errors,ye),isValidating:!!lr(r.validatingFields,ye),isTouched:!!lr((Oe||r).touchedFields,ye)}),M=ye=>{ye&&Wl(ye).forEach(Oe=>Us(r.errors,Oe)),h.state.next({errors:ye?r.errors:{}})},W=(ye,Oe,Re)=>{const qe=(lr(n,ye,{_f:{}})._f||{}).ref,Ze=lr(r.errors,ye)||{},{ref:lt,message:mt,type:It,...Mt}=Ze;Fa(r.errors,ye,{...Mt,...Oe,ref:qe}),h.state.next({name:ye,errors:r.errors,isValid:!1}),Re&&Re.shouldFocus&&qe&&qe.focus&&qe.focus()},Z=(ye,Oe)=>vd(ye)?h.state.subscribe({next:Re=>"values"in Re&&ye(I(void 0,Oe),Re)}):I(ye,Oe,!0),re=ye=>h.state.subscribe({next:Oe=>{JAt(ye.name,Oe.name,ye.exact)&&YAt(Oe,ye.formState||d,Ie,ye.reRenderRoot)&&ye.callback({values:{...s},...r,...Oe,defaultValues:a})}}).unsubscribe,ae=ye=>(i.mount=!0,f={...f,...ye.formState},re({...ye,formState:f})),ce=(ye,Oe={})=>{for(const Re of ye?Wl(ye):o.mount)o.mount.delete(Re),o.array.delete(Re),Oe.keepValue||(Us(n,Re),Us(s,Re)),!Oe.keepError&&Us(r.errors,Re),!Oe.keepDirty&&Us(r.dirtyFields,Re),!Oe.keepTouched&&Us(r.touchedFields,Re),!Oe.keepIsValidating&&Us(r.validatingFields,Re),!t.shouldUnregister&&!Oe.keepDefaultValue&&Us(a,Re);h.state.next({values:Xa(s)}),h.state.next({...r,...Oe.keepDirty?{isDirty:D()}:{}}),!Oe.keepIsValid&&x()},oe=({disabled:ye,name:Oe})=>{(kA(ye)&&i.mount||ye||o.disabled.has(Oe))&&(ye?o.disabled.add(Oe):o.disabled.delete(Oe))},le=(ye,Oe={})=>{let Re=lr(n,ye);const qe=kA(Oe.disabled)||kA(t.disabled);return Fa(n,ye,{...Re||{},_f:{...Re&&Re._f?Re._f:{ref:{name:ye}},name:ye,mount:!0,...Oe}}),o.mount.add(ye),Re?oe({disabled:kA(Oe.disabled)?Oe.disabled:t.disabled,name:ye}):j(ye,!0,Oe.value),{...qe?{disabled:Oe.disabled||t.disabled}:{},...t.progressive?{required:!!Oe.required,min:cy(Oe.min),max:cy(Oe.max),minLength:cy(Oe.minLength),maxLength:cy(Oe.maxLength),pattern:cy(Oe.pattern)}:{},name:ye,onChange:X,onBlur:X,ref:Ze=>{if(Ze){le(ye,Oe),Re=lr(n,ye);const lt=Ya(Ze.value)&&Ze.querySelectorAll&&Ze.querySelectorAll("input,select,textarea")[0]||Ze,mt=$At(lt),It=Re._f.refs||[];if(mt?It.find(Mt=>Mt===lt):lt===Re._f.ref)return;Fa(n,ye,{_f:{...Re._f,...mt?{refs:[...It.filter(MI),lt,...Array.isArray(lr(a,ye))?[{}]:[]],ref:{type:lt.type,name:ye}}:{ref:lt}}}),j(ye,!1,void 0,lt)}else Re=lr(n,ye,{}),Re._f&&(Re._f.mount=!1),(t.shouldUnregister||Oe.shouldUnregister)&&!(MAt(o.array,ye)&&i.action)&&o.unMount.add(ye)}}},pe=()=>t.shouldFocusError&&jv(n,V,o.mount),Be=ye=>{kA(ye)&&(h.state.next({disabled:ye}),jv(n,(Oe,Re)=>{const qe=lr(n,Re);qe&&(Oe.disabled=qe._f.disabled||ye,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ze=>{Ze.disabled=qe._f.disabled||ye}))},0,!1))},te=(ye,Oe)=>async Re=>{let qe;Re&&(Re.preventDefault&&Re.preventDefault(),Re.persist&&Re.persist());let Ze=Xa(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:lt,values:mt}=await E();r.errors=lt,Ze=Xa(mt)}else await B(n);if(o.disabled.size)for(const lt of o.disabled)Us(Ze,lt);if(Us(r.errors,"root"),dl(r.errors)){h.state.next({errors:{}});try{await ye(Ze,Re)}catch(lt){qe=lt}}else Oe&&await Oe({...r.errors},Re),pe(),setTimeout(pe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:dl(r.errors)&&!qe,submitCount:r.submitCount+1,errors:r.errors}),qe)throw qe},_e=(ye,Oe={})=>{lr(n,ye)&&(Ya(Oe.defaultValue)?H(ye,Xa(lr(a,ye))):(H(ye,Oe.defaultValue),Fa(a,ye,Xa(Oe.defaultValue))),Oe.keepTouched||Us(r.touchedFields,ye),Oe.keepDirty||(Us(r.dirtyFields,ye),r.isDirty=Oe.defaultValue?D(ye,Xa(lr(a,ye))):D()),Oe.keepError||(Us(r.errors,ye),d.isValid&&x()),h.state.next({...r}))},De=(ye,Oe={})=>{const Re=ye?Xa(ye):a,qe=Xa(Re),Ze=dl(ye),lt=Ze?a:qe;if(Oe.keepDefaultValues||(a=Re),!Oe.keepValues){if(Oe.keepDirtyValues){const mt=new Set([...o.mount,...Object.keys(ly(a,s))]);for(const It of Array.from(mt))lr(r.dirtyFields,It)?Fa(lt,It,lr(s,It)):H(It,lr(lt,It))}else{if(lM&&Ya(ye))for(const mt of o.mount){const It=lr(n,mt);if(It&&It._f){const Mt=Array.isArray(It._f.refs)?It._f.refs[0]:It._f.ref;if(SN(Mt)){const Pt=Mt.closest("form");if(Pt){Pt.reset();break}}}}if(Oe.keepFieldsRef)for(const mt of o.mount)H(mt,lr(lt,mt));else n={}}s=t.shouldUnregister?Oe.keepDefaultValues?Xa(a):{}:Xa(lt),h.array.next({values:{...lt}}),h.state.next({values:{...lt}})}o={mount:Oe.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!Oe.keepIsValid||!!Oe.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:Oe.keepSubmitCount?r.submitCount:0,isDirty:Ze?!1:Oe.keepDirty?r.isDirty:!!(Oe.keepDefaultValues&&!R0(ye,a)),isSubmitted:Oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ze?{}:Oe.keepDirtyValues?Oe.keepDefaultValues&&s?ly(a,s):r.dirtyFields:Oe.keepDefaultValues&&ye?ly(a,ye):Oe.keepDirty?r.dirtyFields:{},touchedFields:Oe.keepTouched?r.touchedFields:{},errors:Oe.keepErrors?r.errors:{},isSubmitSuccessful:Oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Ne=(ye,Oe)=>De(vd(ye)?ye(s):ye,Oe),fe=(ye,Oe={})=>{const Re=lr(n,ye),qe=Re&&Re._f;if(qe){const Ze=qe.refs?qe.refs[0]:qe.ref;Ze.focus&&(Ze.focus(),Oe.shouldSelect&&vd(Ze.select)&&Ze.select())}},Ie=ye=>{r={...r,...ye}},Ye={control:{register:le,unregister:ce,getFieldState:ne,handleSubmit:te,setError:W,_subscribe:re,_runSchema:E,_focusError:pe,_getWatch:I,_getDirty:D,_setValid:x,_setFieldArray:y,_setDisabledField:oe,_setErrors:S,_getFieldArray:U,_reset:De,_resetDefaultValues:()=>vd(t.defaultValues)&&t.defaultValues().then(ye=>{Ne(ye,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:Be,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return i},set _state(ye){i=ye},get _defaultValues(){return a},get _names(){return o},set _names(ye){o=ye},get _formState(){return r},get _options(){return t},set _options(ye){t={...t,...ye}}},subscribe:ae,trigger:z,register:le,handleSubmit:te,watch:Z,setValue:H,getValues:q,reset:Ne,resetField:_e,clearErrors:M,unregister:ce,setError:W,setFocus:fe,getFieldState:ne};return{...Ye,formControl:Ye}}var C0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},UI=(e,t,r={})=>r.shouldFocus||Ya(r.shouldFocus)?r.focusName||`${e}.${Ya(r.focusIndex)?t:r.focusIndex}.`:"",QI=(e,t)=>[...e,...Wl(t)],HI=e=>Array.isArray(e)?e.map(()=>{}):void 0;function VI(e,t,r){return[...e.slice(0,t),...Wl(r),...e.slice(t)]}var zI=(e,t,r)=>Array.isArray(e)?(Ya(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],$I=(e,t)=>[...Wl(t),...Wl(e)];function nft(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return Gk(n).length?n:[]}var GI=(e,t)=>Ya(t)?[]:nft(e,Wl(t).sort((r,n)=>r-n)),KI=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},XX=(e,t,r)=>(e[t]=r,e);function aft(e){const t=QAt(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:i}=e,[o,c]=ct.useState(r._getFieldArray(n)),u=ct.useRef(r._getFieldArray(n).map(C0)),d=ct.useRef(o),f=ct.useRef(!1);d.current=o,r._names.array.add(n),ct.useMemo(()=>i&&r.register(n,i),[r,i,n]),Hde(()=>r._subjects.array.subscribe({next:({values:N,name:F})=>{if(F===n||!F){const E=lr(N,n);Array.isArray(E)&&(c(E),u.current=E.map(C0))}}}).unsubscribe,[r,n]);const h=ct.useCallback(N=>{f.current=!0,r._setFieldArray(n,N)},[r,n]),p=(N,F)=>{const E=Wl(Xa(N)),_=QI(r._getFieldArray(n),E);r._names.focus=UI(n,_.length-1,F),u.current=QI(u.current,E.map(C0)),h(_),c(_),r._setFieldArray(n,_,QI,{argA:HI(N)})},g=(N,F)=>{const E=Wl(Xa(N)),_=$I(r._getFieldArray(n),E);r._names.focus=UI(n,0,F),u.current=$I(u.current,E.map(C0)),h(_),c(_),r._setFieldArray(n,_,$I,{argA:HI(N)})},x=N=>{const F=GI(r._getFieldArray(n),N);u.current=GI(u.current,N),h(F),c(F),!Array.isArray(lr(r._fields,n))&&Fa(r._fields,n,void 0),r._setFieldArray(n,F,GI,{argA:N})},b=(N,F,E)=>{const _=Wl(Xa(F)),B=VI(r._getFieldArray(n),N,_);r._names.focus=UI(n,N,E),u.current=VI(u.current,N,_.map(C0)),h(B),c(B),r._setFieldArray(n,B,VI,{argA:N,argB:HI(F)})},y=(N,F)=>{const E=r._getFieldArray(n);KI(E,N,F),KI(u.current,N,F),h(E),c(E),r._setFieldArray(n,E,KI,{argA:N,argB:F},!1)},w=(N,F)=>{const E=r._getFieldArray(n);zI(E,N,F),zI(u.current,N,F),h(E),c(E),r._setFieldArray(n,E,zI,{argA:N,argB:F},!1)},S=(N,F)=>{const E=Xa(F),_=XX(r._getFieldArray(n),N,E);u.current=[..._].map((B,P)=>!B||P===N?C0():u.current[P]),h(_),c([..._]),r._setFieldArray(n,_,XX,{argA:N,argB:E},!0,!1)},j=N=>{const F=Wl(Xa(N));u.current=F.map(C0),h([...F]),c([...F]),r._setFieldArray(n,[...F],E=>E,{},!0,!1)};return ct.useEffect(()=>{if(r._state.action=!1,YO(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!lv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!lv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(N=>{const F=lr(N.errors,n),E=lr(r._formState.errors,n);(E?!F&&E.type||F&&(E.type!==F.type||E.message!==F.message):F&&F.type)&&(F?Fa(r._formState.errors,n,F):Us(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const N=lr(r._fields,n);N&&N._f&&!(lv(r._options.reValidateMode).isOnSubmit&&lv(r._options.mode).isOnSubmit)&&JO(N,r._names.disabled,r._formValues,r._options.criteriaMode===Nu.all,r._options.shouldUseNativeValidation,!0).then(F=>!dl(F)&&r._subjects.state.next({errors:Wde(r._formState.errors,F,n)}))}r._subjects.state.next({name:n,values:Xa(r._formValues)}),r._names.focus&&jv(r._fields,(N,F)=>{if(r._names.focus&&F.startsWith(r._names.focus)&&N.focus)return N.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[o,n,r]),ct.useEffect(()=>(!lr(r._formValues,n)&&r._setFieldArray(n),()=>{const N=(F,E)=>{const _=lr(r._fields,F);_&&_._f&&(_._f.mount=E)};r._options.shouldUnregister||s?r.unregister(n):N(n,!1)}),[n,r,a,s]),{swap:ct.useCallback(y,[h,n,r]),move:ct.useCallback(w,[h,n,r]),prepend:ct.useCallback(g,[h,n,r]),append:ct.useCallback(p,[h,n,r]),remove:ct.useCallback(x,[h,n,r]),insert:ct.useCallback(b,[h,n,r]),update:ct.useCallback(S,[h,n,r]),replace:ct.useCallback(j,[h,n,r]),fields:ct.useMemo(()=>o.map((N,F)=>({...N,[a]:u.current[F]||C0()})),[o,a])}}function sft(e={}){const t=ct.useRef(void 0),r=ct.useRef(void 0),[n,a]=ct.useState({isDirty:!1,isValidating:!1,isLoading:vd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:vd(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!vd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...o}=rft(e);t.current={...o,formState:n}}const s=t.current.control;return s._options=e,Hde(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),s._formState.isReady=!0,i},[s]),ct.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),ct.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),ct.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),ct.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),ct.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==n.isDirty&&s._subjects.state.next({isDirty:i})}},[s,n.isDirty]),ct.useEffect(()=>{e.values&&!R0(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(i=>({...i}))):s._resetDefaultValues()},[s,e.values]),ct.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=HAt(n,s),t.current}const ZO=Tt(tn,"alternancias");async function ift(e){return(await Ln(ZO,{...e,createdAt:el(),updatedAt:el()})).id}async function oft({especialidad:e,pageSize:t=10,lastDoc:r}){let n=Wt(ZO,Tr("createdAt","desc"),Nd(t));e&&(n=Wt(ZO,nn("especialidad","==",e),Tr("createdAt","desc"),Nd(t))),r&&(n=Wt(n,bZ(r)));const a=await ga(n);return{items:a.docs.map(i=>({id:i.id,...i.data()})),lastDoc:a.docs[a.docs.length-1]}}async function lft(e,t){const r=dr(tn,"alternancias",e);await Lu(r,{...t,updatedAt:el()})}async function cft(e){const t=dr(tn,"alternancias",e);await Za(t)}async function uft(e,t,r){const n=Tt(tn,"alternancias",e,t);await Ln(n,{...r,createdAt:el()})}async function dft(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=l4(GZ,r);await $Z(n,t);const a=await nP(n);return await uft(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const Ap=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return l.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),l.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},wA=({children:e,hint:t})=>l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&l.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),j_=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return l.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},fp=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const i={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return l.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${i[r]} disabled:opacity-60`,children:n})},Aft=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState(null),[s,i]=k.useState(!1),{register:o,control:c,handleSubmit:u,reset:d,watch:f,setValue:h,formState:{isSubmitting:p}}=sft({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=aft({control:c,name:"actividades"}),x=["COORDINACION_TP","SUBDIRECCION"],b=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!b||x.some(R=>b.includes(R))))return l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[l.jsx(Zye,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const w=R=>(R||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),S=(R,Y)=>{var H;return!R||!Y?[]:((H=fbe[R])==null?void 0:H[Y])??[]},j=f("especialidad"),N=f("modulos")||[],F=k.useMemo(()=>j?ube[j]??[]:[],[j]),E=k.useMemo(()=>j?Abe[j]??[]:[],[j]);k.useEffect(()=>{h("curso",[]),h("modulos",[]);const R=[...f("actividades")||[]].map(Y=>({...Y,modulo:"",oa:""}));h("actividades",R)},[j]),k.useEffect(()=>{const R=[...f("actividades")||[]].map(Y=>Y.modulo&&!N.includes(Y.modulo)?{...Y,modulo:"",oa:""}:Y);h("actividades",R)},[N]);const _=async()=>{i(!0);const{items:R}=await oft({});r(R),i(!1)};k.useEffect(()=>{_()},[]);const B=async R=>{n?await lft(n,{...R}):await ift({...R,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await _()},P=R=>{const Y=Array.isArray(R.curso)?R.curso:R.curso?[R.curso]:[],H=Array.isArray(R.modulos)?R.modulos.map(V=>w(V)):[],X=Array.isArray(R.actividades)?R.actividades.map(V=>({...V,modulo:V!=null&&V.modulo?w(V.modulo):"",oa:(V==null?void 0:V.oa)||""})):[];d({...R,curso:Y,modulos:H,actividades:X}),a(R.id),window.scrollTo({top:0,behavior:"smooth"})},D=async R=>{confirm("¿Eliminar esta alternancia?")&&(await cft(R),await _())},I=async(R,Y)=>{await dft(R,Y),alert("Evidencia subida correctamente")},U=R=>{const Y=Array.from(R.currentTarget.selectedOptions).map(H=>H.value);h("curso",Y,{shouldDirty:!0})};return l.jsxs("div",{className:"p-4 md:p-6",children:[l.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:l.jsx(ZZ,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),l.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(fp,{title:"Nuevo plan",onClick:()=>{d(),a(null)},tone:"neutral",children:[l.jsx(GS,{className:"w-4 h-4"}),"Limpiar"]}),l.jsxs(fp,{title:"Guardar",type:"submit",tone:"success",disabled:p,children:[p?l.jsx(U0,{className:"w-4 h-4 animate-spin"}):l.jsx(yw,{className:"w-4 h-4"}),"Guardar"]})]})]})}),l.jsx(Ap,{title:"Planes guardados",icon:l.jsx(C6,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?l.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[l.jsx(U0,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?l.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(R=>l.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[l.jsx(NT,{className:"w-4 h-4 text-indigo-600"}),R.especialidad]}),l.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[l.jsx(j_,{tone:"indigo",children:Array.isArray(R.curso)?R.curso.join(", "):R.curso}),l.jsx(j_,{tone:"sky",children:R.institucion}),(Array.isArray(R.tipoAlternancia)?R.tipoAlternancia:[]).slice(0,2).map(Y=>l.jsx(j_,{tone:"emerald",children:Y},Y))]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[l.jsx(aee,{className:"w-4 h-4"}),l.jsx("input",{type:"file",className:"hidden",onChange:Y=>Y.target.files&&I(R.id,Y.target.files[0])}),"Evidencia"]}),l.jsxs(fp,{title:"Editar",onClick:()=>P(R),children:[l.jsx(_6,{className:"w-4 h-4"})," Editar"]}),l.jsxs(fp,{title:"Eliminar",onClick:()=>D(R.id),tone:"danger",children:[l.jsx(Fc,{className:"w-4 h-4"})," Eliminar"]})]})]})},R.id))})}),l.jsxs("form",{onSubmit:u(B),className:"mt-6 space-y-5",children:[l.jsx(Ap,{title:"Contexto de la Alternancia",icon:l.jsx(VS,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(wA,{children:"Especialidad"}),l.jsxs("div",{className:"relative",children:[l.jsx(NT,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[l.jsx("option",{value:"",children:"Selecciona…"}),lbe.map(R=>l.jsx("option",{value:R,children:R},R))]})]})]}),l.jsxs("div",{children:[l.jsx(wA,{children:"Institución"}),l.jsxs("div",{className:"relative",children:[l.jsx(VS,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[l.jsx("option",{value:"",children:"Selecciona…"}),cbe.map(R=>l.jsx("option",{value:R,children:R},R))]})]})]}),l.jsxs("div",{children:[l.jsx(wA,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),l.jsxs("div",{className:"relative",children:[l.jsx(Bd,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsx("select",{multiple:!0,size:4,...o("curso"),onChange:U,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!j,children:j?F.map(R=>l.jsx("option",{value:R,children:R},R)):l.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(f("curso")||[]).map(R=>l.jsx(j_,{tone:"sky",children:R},R))})]})]})}),l.jsx(Ap,{title:"Módulos implicados",icon:l.jsx(bye,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:j?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:E.map(R=>l.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:R,className:"mt-1 accent-emerald-600",...o("modulos")}),l.jsx("span",{className:"text-sm text-slate-700",children:R})]},R))}):l.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),l.jsx(Ap,{title:"Tipo de Alternancia",icon:l.jsx(Nye,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:l.jsx("div",{className:"flex gap-3 flex-wrap",children:dbe.map(R=>l.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:R,className:"accent-amber-600",...o("tipoAlternancia")}),l.jsx("span",{className:"text-slate-700",children:R})]},R))})}),l.jsx(Ap,{title:"Fundamentación técnico‑pedagógica",icon:l.jsx(kbe,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),l.jsx(Ap,{title:"Plan de actividades",icon:l.jsx(C6,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"space-y-3",children:[g.fields.map((R,Y)=>{const H=f(`actividades.${Y}.modulo`)||"",X=S(j,H);return l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(wA,{children:"Fecha"}),l.jsx($f,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{type:"date",placeholder:"Fecha",...o(`actividades.${Y}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(wA,{children:"Tipo"}),l.jsx("input",{placeholder:"Pasantía, visita, taller...",...o(`actividades.${Y}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(wA,{children:"Actividad"}),l.jsx("input",{placeholder:"Descripción breve",...o(`actividades.${Y}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(wA,{children:"Lugar"}),l.jsx(zS,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...o(`actividades.${Y}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(wA,{children:"Evidencias"}),l.jsx(nye,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...o(`actividades.${Y}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx(wA,{children:"Módulo"}),l.jsxs("select",{...o(`actividades.${Y}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!j||N.length===0,children:[l.jsx("option",{value:"",children:!j&&"Elige especialidad arriba"||N.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),N.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx(wA,{children:"Objetivo de Aprendizaje (OA)"}),l.jsxs("select",{...o(`actividades.${Y}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!H||X.length===0,children:[l.jsx("option",{value:"",children:H?X.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),X.map(V=>l.jsx("option",{value:V,children:V},V))]})]})]}),l.jsx("div",{className:"mt-3 flex justify-end",children:l.jsxs(fp,{title:"Eliminar fila",onClick:()=>g.remove(Y),tone:"danger",children:[l.jsx(Fc,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},R.id)}),l.jsxs(fp,{title:"Agregar actividad",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[l.jsx(eh,{className:"w-4 h-4"})," Agregar actividad"]})]})}),l.jsx(Ap,{title:"Análisis Curricular",icon:l.jsx(NT,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),l.jsx("div",{className:"flex items-center justify-end gap-2",children:l.jsxs(fp,{title:"Guardar",type:"submit",tone:"success",disabled:p,children:[p?l.jsx(U0,{className:"w-4 h-4 animate-spin"}):l.jsx(yd,{className:"w-4 h-4"}),"Guardar"]})})]})]})},fft=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},hft=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=e.profile,c=k.useMemo(()=>{const j=abe[o]||[];return o!==Kt.ESTUDIANTE?j:j.filter(N=>{if(N.name==="Asistencia a Empresa"){const F=fft(e.curso||"");return F.startsWith("3º")||F.startsWith("4º")}return!0})},[o,e.curso]),[u,d]=k.useState(null),[f,h]=k.useState(!1),[p,g]=k.useState(!1),x=k.useRef([]);k.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[o,c]);const b=k.useCallback(j=>{d(j),window.innerWidth<768&&h(!1)},[]),y=k.useCallback(j=>{const N=c.find(F=>F.name===j);N&&b(N)},[c,b]),w=()=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:l.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:l.jsx(H1e,{className:"w-5 h-5"})})}),!p&&l.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),l.jsx("button",{type:"button",onClick:()=>g(j=>!j),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:p?"Expandir":"Colapsar",children:p?l.jsx(eee,{className:"w-5 h-5 text-slate-200"}):l.jsx(bw,{className:"w-5 h-5 text-slate-200"})})]}),l.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",onKeyDown:j=>{var F,E,_;const N=x.current.findIndex(B=>B===document.activeElement);if(j.key==="ArrowDown"){j.preventDefault();const B=Math.min(N===-1?0:N+1,x.current.length-1);(F=x.current[B])==null||F.focus()}else if(j.key==="ArrowUp"){j.preventDefault();const B=Math.max(N===-1?0:N-1,0);(E=x.current[B])==null||E.focus()}else j.key==="Enter"&&N>=0&&((_=x.current[N])==null||_.click())},children:l.jsx("div",{className:"space-y-1",children:c.map((j,N)=>{const F=(u==null?void 0:u.name)===j.name;return l.jsxs("button",{ref:E=>x.current[N]=E,onClick:()=>b(j),className:`w-full group flex items-center ${p?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                  ${F?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:p?j.name:void 0,children:[l.jsx("span",{className:`shrink-0 ${F?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:j.icon}),!p&&l.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:j.name})]},j.name)})})})]}),S=()=>{if(!u)return l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return l.jsx(aEe,{profile:o});if(u.name==="Muro de Anuncios")return l.jsx(cEe,{currentUser:e});if(u.name==="Mensajería Interna")return l.jsx(MDe,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return l.jsx(gEe,{});if(o===Kt.SUBDIRECCION){if(u.name==="Dashboard")return l.jsx(Kwe,{currentUser:e});if(u.name==="Administración")return l.jsx(QFe,{});if(u.name==="Seguimiento Curricular")return l.jsx(Kat,{currentUser:e});if(u.name==="Acompañamiento docente")return l.jsx(jDe,{currentUser:e});if(u.name==="Análisis Taxonómico")return l.jsx(Zat,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx($V,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return l.jsx(Hwe,{currentUser:e});if(u.name==="Crear horarios")return l.jsx(T2e,{});if(u.name==="Seguimiento de acciones pedagógicas")return l.jsx(R2e,{});if(u.name==="Inclusión")return l.jsx(UV,{currentUser:e})}if(o===Kt.PROFESORADO){if(u.name==="Planificación")return l.jsx(X2e,{currentUser:e});if(u.name==="Mis Acompañamientos")return l.jsx(Sat,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return l.jsx(Aat,{});if(u.name==="Análisis Taxonómico")return l.jsx(AnalisisTaxonómico,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx($V,{});if(u.name==="Inclusión")return l.jsx(UV,{currentUser:e});if(u.name==="Actividades Remotas")return l.jsx(gOe,{});if(u.name==="Evaluación de Aprendizajes")return l.jsx(x_e,{});if(u.name==="Evaluaciones Formativas")return l.jsx(gDe,{currentUser:e})}if(o===Kt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return l.jsx(YFe,{});if(u.name==="Asistencia Dual")return l.jsx(tDe,{});if(u.name==="Pañol")return l.jsx(_Ye,{});if(u.name==="Gestión de Empresas")return l.jsx(PAt,{});if(u.name==="Alternancia TP")return l.jsx(Aft,{})}if(o===Kt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return l.jsx(IOe,{currentUser:e});if(u.name==="Evaluación Formativa")return l.jsx(vat,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return l.jsx(Cat,{currentUser:e});if(u.name==="Asistencia a Empresa")return l.jsx(KOe,{currentUser:e})}return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),l.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:l.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",l.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return l.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[l.jsx(Ewe,{currentUser:e,onLogout:t,onNavigate:y,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(j=>!j),unreadMessagesCount:s,refreshUnreadCount:i}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&l.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),l.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${p?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:l.jsx(w,{})}),l.jsx("main",{className:"flex-1 overflow-y-auto",children:l.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir menú",children:l.jsx(Dye,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&l.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),l.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),l.jsx("div",{className:"min-h-[60vh]",children:S()})]})})]})]})},mft=({onSelectProfile:e,isAdminView:t=!1})=>l.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),l.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),l.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(iP,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:nbe.map(r=>l.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[l.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),l.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),l.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),pft=()=>{const[e,t]=k.useState(null),[r,n]=k.useState(null),[a,s]=k.useState(!0),[i,o]=k.useState(null),[c,u]=k.useState(!1),[d,f]=k.useState(null);k.useEffect(()=>{const w=IY(C2,async S=>{if(t(S),S)try{const j=await qZ(S.email);j?(n(j),j.profile===Kt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await yT())}catch{o("Error al conectar con la base de datos."),await yT()}else n(null),f(null),u(!1),o(null);s(!1)});return()=>w()},[]);const h=async(w,S)=>{if(o(null),!w.trim()||!S.trim()){o("Por favor ingrese email y contraseña");return}try{await M1e(w.trim(),S)}catch(j){switch(j.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},p=async w=>{try{await U1e(w)}catch(S){console.error("Error al enviar email de recuperación:",S)}},g=w=>{f(w),u(!1)},x=()=>{u(!0),f(null)},b=async()=>{try{await yT()}catch(w){console.error("Error al cerrar sesión:",w)}};if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(iP,{})}),l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return l.jsx(hbe,{onLoginAttempt:h,onForgotPasswordRequest:p,error:i});if(c&&r.profile===Kt.SUBDIRECCION)return l.jsx(mft,{onSelectProfile:g,isAdminView:!0});const y=d||r.profile;return l.jsx(hft,{currentUser:{...r,profile:y},onLogout:b,onChangeProfile:r.profile===Kt.SUBDIRECCION?x:void 0,canChangeProfile:r.profile===Kt.SUBDIRECCION})},Xde=document.getElementById("root");if(!Xde)throw new Error("Could not find root element to mount to");const gft=ffe.createRoot(Xde);gft.render(l.jsx(ct.StrictMode,{children:l.jsx(pft,{})}));export{ma as _,vft as c,yl as g};
