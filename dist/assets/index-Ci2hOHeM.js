(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var NUe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Lq(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var s_={exports:{}},Sg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a3;function Uq(){if(a3)return Sg;a3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:t,type:n,key:i,ref:s!==void 0?s:null,props:a}}return Sg.Fragment=e,Sg.jsx=r,Sg.jsxs=r,Sg}var i3;function Mq(){return i3||(i3=1,s_.exports=Uq()),s_.exports}var u=Mq(),a_={exports:{}},Gr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o3;function Pq(){if(o3)return Gr;o3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(K){return K===null||typeof K!="object"?null:(K=h&&K[h]||K["@@iterator"],typeof K=="function"?K:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function E(K,ae,O){this.props=K,this.context=ae,this.refs=x,this.updater=O||m}E.prototype.isReactComponent={},E.prototype.setState=function(K,ae){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ae,"setState")},E.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function S(){}S.prototype=E.prototype;function B(K,ae,O){this.props=K,this.context=ae,this.refs=x,this.updater=O||m}var D=B.prototype=new S;D.constructor=B,y(D,E.prototype),D.isPureReactComponent=!0;var I=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function C(K,ae,O,W,Z,ne){return O=ne.ref,{$$typeof:t,type:K,key:ae,ref:O!==void 0?O:null,props:ne}}function _(K,ae){return C(K.type,ae,void 0,void 0,void 0,K.props)}function N(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function j(K){var ae={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(O){return ae[O]})}var R=/\/+/g;function L(K,ae){return typeof K=="object"&&K!==null&&K.key!=null?j(""+K.key):ae.toString(36)}function Q(){}function H(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(Q,Q):(K.status="pending",K.then(function(ae){K.status==="pending"&&(K.status="fulfilled",K.value=ae)},function(ae){K.status==="pending"&&(K.status="rejected",K.reason=ae)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function te(K,ae,O,W,Z){var ne=typeof K;(ne==="undefined"||ne==="boolean")&&(K=null);var le=!1;if(K===null)le=!0;else switch(ne){case"bigint":case"string":case"number":le=!0;break;case"object":switch(K.$$typeof){case t:case e:le=!0;break;case d:return le=K._init,te(le(K._payload),ae,O,W,Z)}}if(le)return Z=Z(K),le=W===""?"."+L(K,0):W,I(Z)?(O="",le!=null&&(O=le.replace(R,"$&/")+"/"),te(Z,ae,O,"",function(he){return he})):Z!=null&&(N(Z)&&(Z=_(Z,O+(Z.key==null||K&&K.key===Z.key?"":(""+Z.key).replace(R,"$&/")+"/")+le)),ae.push(Z)),1;le=0;var ve=W===""?".":W+":";if(I(K))for(var pe=0;pe<K.length;pe++)W=K[pe],ne=ve+L(W,pe),le+=te(W,ae,O,ne,Z);else if(pe=p(K),typeof pe=="function")for(K=pe.call(K),pe=0;!(W=K.next()).done;)W=W.value,ne=ve+L(W,pe++),le+=te(W,ae,O,ne,Z);else if(ne==="object"){if(typeof K.then=="function")return te(H(K),ae,O,W,Z);throw ae=String(K),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return le}function Y(K,ae,O){if(K==null)return K;var W=[],Z=0;return te(K,W,"","",function(ne){return ae.call(O,ne,Z++)}),W}function re(K){if(K._status===-1){var ae=K._result;ae=ae(),ae.then(function(O){(K._status===0||K._status===-1)&&(K._status=1,K._result=O)},function(O){(K._status===0||K._status===-1)&&(K._status=2,K._result=O)}),K._status===-1&&(K._status=0,K._result=ae)}if(K._status===1)return K._result.default;throw K._result}var V=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function J(){}return Gr.Children={map:Y,forEach:function(K,ae,O){Y(K,function(){ae.apply(this,arguments)},O)},count:function(K){var ae=0;return Y(K,function(){ae++}),ae},toArray:function(K){return Y(K,function(ae){return ae})||[]},only:function(K){if(!N(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Gr.Component=E,Gr.Fragment=r,Gr.Profiler=s,Gr.PureComponent=B,Gr.StrictMode=n,Gr.Suspense=l,Gr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Gr.__COMPILER_RUNTIME={__proto__:null,c:function(K){return U.H.useMemoCache(K)}},Gr.cache=function(K){return function(){return K.apply(null,arguments)}},Gr.cloneElement=function(K,ae,O){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var W=y({},K.props),Z=K.key,ne=void 0;if(ae!=null)for(le in ae.ref!==void 0&&(ne=void 0),ae.key!==void 0&&(Z=""+ae.key),ae)!F.call(ae,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&ae.ref===void 0||(W[le]=ae[le]);var le=arguments.length-2;if(le===1)W.children=O;else if(1<le){for(var ve=Array(le),pe=0;pe<le;pe++)ve[pe]=arguments[pe+2];W.children=ve}return C(K.type,Z,void 0,void 0,ne,W)},Gr.createContext=function(K){return K={$$typeof:i,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:a,_context:K},K},Gr.createElement=function(K,ae,O){var W,Z={},ne=null;if(ae!=null)for(W in ae.key!==void 0&&(ne=""+ae.key),ae)F.call(ae,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(Z[W]=ae[W]);var le=arguments.length-2;if(le===1)Z.children=O;else if(1<le){for(var ve=Array(le),pe=0;pe<le;pe++)ve[pe]=arguments[pe+2];Z.children=ve}if(K&&K.defaultProps)for(W in le=K.defaultProps,le)Z[W]===void 0&&(Z[W]=le[W]);return C(K,ne,void 0,void 0,null,Z)},Gr.createRef=function(){return{current:null}},Gr.forwardRef=function(K){return{$$typeof:o,render:K}},Gr.isValidElement=N,Gr.lazy=function(K){return{$$typeof:d,_payload:{_status:-1,_result:K},_init:re}},Gr.memo=function(K,ae){return{$$typeof:c,type:K,compare:ae===void 0?null:ae}},Gr.startTransition=function(K){var ae=U.T,O={};U.T=O;try{var W=K(),Z=U.S;Z!==null&&Z(O,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(J,V)}catch(ne){V(ne)}finally{U.T=ae}},Gr.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Gr.use=function(K){return U.H.use(K)},Gr.useActionState=function(K,ae,O){return U.H.useActionState(K,ae,O)},Gr.useCallback=function(K,ae){return U.H.useCallback(K,ae)},Gr.useContext=function(K){return U.H.useContext(K)},Gr.useDebugValue=function(){},Gr.useDeferredValue=function(K,ae){return U.H.useDeferredValue(K,ae)},Gr.useEffect=function(K,ae,O){var W=U.H;if(typeof O=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(K,ae)},Gr.useId=function(){return U.H.useId()},Gr.useImperativeHandle=function(K,ae,O){return U.H.useImperativeHandle(K,ae,O)},Gr.useInsertionEffect=function(K,ae){return U.H.useInsertionEffect(K,ae)},Gr.useLayoutEffect=function(K,ae){return U.H.useLayoutEffect(K,ae)},Gr.useMemo=function(K,ae){return U.H.useMemo(K,ae)},Gr.useOptimistic=function(K,ae){return U.H.useOptimistic(K,ae)},Gr.useReducer=function(K,ae,O){return U.H.useReducer(K,ae,O)},Gr.useRef=function(K){return U.H.useRef(K)},Gr.useState=function(K){return U.H.useState(K)},Gr.useSyncExternalStore=function(K,ae,O){return U.H.useSyncExternalStore(K,ae,O)},Gr.useTransition=function(){return U.H.useTransition()},Gr.version="19.1.1",Gr}var l3;function C1(){return l3||(l3=1,a_.exports=Pq()),a_.exports}var q=C1();const dt=Sb(q);var i_={exports:{}},Tg={},o_={exports:{}},l_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c3;function Oq(){return c3||(c3=1,function(t){function e(Y,re){var V=Y.length;Y.push(re);e:for(;0<V;){var J=V-1>>>1,K=Y[J];if(0<s(K,re))Y[J]=re,Y[V]=K,V=J;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var re=Y[0],V=Y.pop();if(V!==re){Y[0]=V;e:for(var J=0,K=Y.length,ae=K>>>1;J<ae;){var O=2*(J+1)-1,W=Y[O],Z=O+1,ne=Y[Z];if(0>s(W,V))Z<K&&0>s(ne,W)?(Y[J]=ne,Y[Z]=V,J=Z):(Y[J]=W,Y[O]=V,J=O);else if(Z<K&&0>s(ne,V))Y[J]=ne,Y[Z]=V,J=Z;else break e}}return re}function s(Y,re){var V=Y.sortIndex-re.sortIndex;return V!==0?V:Y.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,h=null,p=3,m=!1,y=!1,x=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function I(Y){for(var re=r(c);re!==null;){if(re.callback===null)n(c);else if(re.startTime<=Y)n(c),re.sortIndex=re.expirationTime,e(l,re);else break;re=r(c)}}function U(Y){if(x=!1,I(Y),!y)if(r(l)!==null)y=!0,F||(F=!0,L());else{var re=r(c);re!==null&&te(U,re.startTime-Y)}}var F=!1,C=-1,_=5,N=-1;function j(){return E?!0:!(t.unstable_now()-N<_)}function R(){if(E=!1,F){var Y=t.unstable_now();N=Y;var re=!0;try{e:{y=!1,x&&(x=!1,B(C),C=-1),m=!0;var V=p;try{t:{for(I(Y),h=r(l);h!==null&&!(h.expirationTime>Y&&j());){var J=h.callback;if(typeof J=="function"){h.callback=null,p=h.priorityLevel;var K=J(h.expirationTime<=Y);if(Y=t.unstable_now(),typeof K=="function"){h.callback=K,I(Y),re=!0;break t}h===r(l)&&n(l),I(Y)}else n(l);h=r(l)}if(h!==null)re=!0;else{var ae=r(c);ae!==null&&te(U,ae.startTime-Y),re=!1}}break e}finally{h=null,p=V,m=!1}re=void 0}}finally{re?L():F=!1}}}var L;if(typeof D=="function")L=function(){D(R)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,H=Q.port2;Q.port1.onmessage=R,L=function(){H.postMessage(null)}}else L=function(){S(R,0)};function te(Y,re){C=S(function(){Y(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(Y){switch(p){case 1:case 2:case 3:var re=3;break;default:re=p}var V=p;p=re;try{return Y()}finally{p=V}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var V=p;p=Y;try{return re()}finally{p=V}},t.unstable_scheduleCallback=function(Y,re,V){var J=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?J+V:J):V=J,Y){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=V+K,Y={id:d++,callback:re,priorityLevel:Y,startTime:V,expirationTime:K,sortIndex:-1},V>J?(Y.sortIndex=V,e(c,Y),r(l)===null&&Y===r(c)&&(x?(B(C),C=-1):x=!0,te(U,V-J))):(Y.sortIndex=K,e(l,Y),y||m||(y=!0,F||(F=!0,L()))),Y},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(Y){var re=p;return function(){var V=p;p=re;try{return Y.apply(this,arguments)}finally{p=V}}}}(l_)),l_}var u3;function jq(){return u3||(u3=1,o_.exports=Oq()),o_.exports}var c_={exports:{}},Oi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A3;function Qq(){if(A3)return Oi;A3=1;var t=C1();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,c,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:l,containerInfo:c,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Oi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Oi.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,d)},Oi.flushSync=function(l){var c=i.T,d=n.p;try{if(i.T=null,n.p=2,l)return l()}finally{i.T=c,n.p=d,n.d.f()}},Oi.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},Oi.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Oi.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:m}):d==="script"&&n.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Oi.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=o(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},Oi.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin);n.d.L(l,d,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Oi.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=o(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},Oi.requestFormReset=function(l){n.d.r(l)},Oi.unstable_batchedUpdates=function(l,c){return l(c)},Oi.useFormState=function(l,c,d){return i.H.useFormState(l,c,d)},Oi.useFormStatus=function(){return i.H.useHostTransitionStatus()},Oi.version="19.1.1",Oi}var d3;function L8(){if(d3)return c_.exports;d3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),c_.exports=Qq(),c_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f3;function Hq(){if(f3)return Tg;f3=1;var t=jq(),e=C1(),r=L8();function n(A){var f="https://react.dev/errors/"+A;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+A+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function a(A){var f=A,g=A;if(A.alternate)for(;f.return;)f=f.return;else{A=f;do f=A,(f.flags&4098)!==0&&(g=f.return),A=f.return;while(A)}return f.tag===3?g:null}function i(A){if(A.tag===13){var f=A.memoizedState;if(f===null&&(A=A.alternate,A!==null&&(f=A.memoizedState)),f!==null)return f.dehydrated}return null}function o(A){if(a(A)!==A)throw Error(n(188))}function l(A){var f=A.alternate;if(!f){if(f=a(A),f===null)throw Error(n(188));return f!==A?null:A}for(var g=A,b=f;;){var M=g.return;if(M===null)break;var z=M.alternate;if(z===null){if(b=M.return,b!==null){g=b;continue}break}if(M.child===z.child){for(z=M.child;z;){if(z===g)return o(M),A;if(z===b)return o(M),f;z=z.sibling}throw Error(n(188))}if(g.return!==b.return)g=M,b=z;else{for(var ue=!1,be=M.child;be;){if(be===g){ue=!0,g=M,b=z;break}if(be===b){ue=!0,b=M,g=z;break}be=be.sibling}if(!ue){for(be=z.child;be;){if(be===g){ue=!0,g=z,b=M;break}if(be===b){ue=!0,b=z,g=M;break}be=be.sibling}if(!ue)throw Error(n(189))}}if(g.alternate!==b)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?A:f}function c(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A;for(A=A.child;A!==null;){if(f=c(A),f!==null)return f;A=A.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),D=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function L(A){return A===null||typeof A!="object"?null:(A=R&&A[R]||A["@@iterator"],typeof A=="function"?A:null)}var Q=Symbol.for("react.client.reference");function H(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===Q?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case y:return"Fragment";case E:return"Profiler";case x:return"StrictMode";case U:return"Suspense";case F:return"SuspenseList";case N:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case m:return"Portal";case D:return(A.displayName||"Context")+".Provider";case B:return(A._context.displayName||"Context")+".Consumer";case I:var f=A.render;return A=A.displayName,A||(A=f.displayName||f.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case C:return f=A.displayName||null,f!==null?f:H(A.type)||"Memo";case _:f=A._payload,A=A._init;try{return H(A(f))}catch{}}return null}var te=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},J=[],K=-1;function ae(A){return{current:A}}function O(A){0>K||(A.current=J[K],J[K]=null,K--)}function W(A,f){K++,J[K]=A.current,A.current=f}var Z=ae(null),ne=ae(null),le=ae(null),ve=ae(null);function pe(A,f){switch(W(le,f),W(ne,A),W(Z,null),f.nodeType){case 9:case 11:A=(A=f.documentElement)&&(A=A.namespaceURI)?DI(A):0;break;default:if(A=f.tagName,f=f.namespaceURI)f=DI(f),A=RI(f,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}O(Z),W(Z,A)}function he(){O(Z),O(ne),O(le)}function de(A){A.memoizedState!==null&&W(ve,A);var f=Z.current,g=RI(f,A.type);f!==g&&(W(ne,A),W(Z,g))}function ce(A){ne.current===A&&(O(Z),O(ne)),ve.current===A&&(O(ve),wg._currentValue=V)}var oe=Object.prototype.hasOwnProperty,Re=t.unstable_scheduleCallback,qe=t.unstable_cancelCallback,Ie=t.unstable_shouldYield,Ee=t.unstable_requestPaint,De=t.unstable_now,je=t.unstable_getCurrentPriorityLevel,We=t.unstable_ImmediatePriority,ct=t.unstable_UserBlockingPriority,wt=t.unstable_NormalPriority,ot=t.unstable_LowPriority,Dt=t.unstable_IdlePriority,Rt=t.log,Yt=t.unstable_setDisableYieldValue,Lt=null,Qt=null;function qt(A){if(typeof Rt=="function"&&Yt(A),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(Lt,A)}catch{}}var kt=Math.clz32?Math.clz32:_r,It=Math.log,mt=Math.LN2;function _r(A){return A>>>=0,A===0?32:31-(It(A)/mt|0)|0}var Jt=256,mn=4194304;function wr(A){var f=A&42;if(f!==0)return f;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Or(A,f,g){var b=A.pendingLanes;if(b===0)return 0;var M=0,z=A.suspendedLanes,ue=A.pingedLanes;A=A.warmLanes;var be=b&134217727;return be!==0?(b=be&~z,b!==0?M=wr(b):(ue&=be,ue!==0?M=wr(ue):g||(g=be&~A,g!==0&&(M=wr(g))))):(be=b&~z,be!==0?M=wr(be):ue!==0?M=wr(ue):g||(g=b&~A,g!==0&&(M=wr(g)))),M===0?0:f!==0&&f!==M&&(f&z)===0&&(z=M&-M,g=f&-f,z>=g||z===32&&(g&4194048)!==0)?f:M}function Rn(A,f){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&f)===0}function Lr(A,f){switch(A){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ga(){var A=Jt;return Jt<<=1,(Jt&4194048)===0&&(Jt=256),A}function on(){var A=mn;return mn<<=1,(mn&62914560)===0&&(mn=4194304),A}function ls(A){for(var f=[],g=0;31>g;g++)f.push(A);return f}function bs(A,f){A.pendingLanes|=f,f!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Qr(A,f,g,b,M,z){var ue=A.pendingLanes;A.pendingLanes=g,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=g,A.entangledLanes&=g,A.errorRecoveryDisabledLanes&=g,A.shellSuspendCounter=0;var be=A.entanglements,Le=A.expirationTimes,rt=A.hiddenUpdates;for(g=ue&~g;0<g;){var ft=31-kt(g),bt=1<<ft;be[ft]=0,Le[ft]=-1;var st=rt[ft];if(st!==null)for(rt[ft]=null,ft=0;ft<st.length;ft++){var at=st[ft];at!==null&&(at.lane&=-536870913)}g&=~bt}b!==0&&nr(A,b,0),z!==0&&M===0&&A.tag!==0&&(A.suspendedLanes|=z&~(ue&~f))}function nr(A,f,g){A.pendingLanes|=f,A.suspendedLanes&=~f;var b=31-kt(f);A.entangledLanes|=f,A.entanglements[b]=A.entanglements[b]|1073741824|g&4194090}function Kr(A,f){var g=A.entangledLanes|=f;for(A=A.entanglements;g;){var b=31-kt(g),M=1<<b;M&f|A[b]&f&&(A[b]|=f),g&=~M}}function xa(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function es(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Bs(){var A=re.p;return A!==0?A:(A=window.event,A===void 0?32:ZI(A.type))}function Ua(A,f){var g=re.p;try{return re.p=A,f()}finally{re.p=g}}var Gt=Math.random().toString(36).slice(2),gn="__reactFiber$"+Gt,ln="__reactProps$"+Gt,Ln="__reactContainer$"+Gt,zn="__reactEvents$"+Gt,ts="__reactListeners$"+Gt,me="__reactHandles$"+Gt,Be="__reactResources$"+Gt,_e="__reactMarker$"+Gt;function Se(A){delete A[gn],delete A[ln],delete A[zn],delete A[ts],delete A[me]}function Te(A){var f=A[gn];if(f)return f;for(var g=A.parentNode;g;){if(f=g[Ln]||g[gn]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(A=PI(A);A!==null;){if(g=A[gn])return g;A=PI(A)}return f}A=g,g=A.parentNode}return null}function ke(A){if(A=A[gn]||A[Ln]){var f=A.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return A}return null}function $e(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A.stateNode;throw Error(n(33))}function nt(A){var f=A[Be];return f||(f=A[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Ve(A){A[_e]=!0}var Xe=new Set,et={};function yt(A,f){Bt(A,f),Bt(A+"Capture",f)}function Bt(A,f){for(et[A]=f,A=0;A<f.length;A++)Xe.add(f[A])}var Ht=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nt={},Ut={};function fr(A){return oe.call(Ut,A)?!0:oe.call(Nt,A)?!1:Ht.test(A)?Ut[A]=!0:(Nt[A]=!0,!1)}function Hr(A,f,g){if(fr(f))if(g===null)A.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":A.removeAttribute(f);return;case"boolean":var b=f.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){A.removeAttribute(f);return}}A.setAttribute(f,""+g)}}function Vr(A,f,g){if(g===null)A.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(f);return}A.setAttribute(f,""+g)}}function $r(A,f,g,b){if(b===null)A.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(g);return}A.setAttributeNS(f,g,""+b)}}var Os,Ni;function js(A){if(Os===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);Os=f&&f[1]||"",Ni=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Os+A+Ni}var va=!1;function ea(A,f){if(!A||va)return"";va=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(f){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(at){var st=at}Reflect.construct(A,[],bt)}else{try{bt.call()}catch(at){st=at}A.call(bt.prototype)}}else{try{throw Error()}catch(at){st=at}(bt=A())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(at){if(at&&st&&typeof at.stack=="string")return[at.stack,st.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=b.DetermineComponentFrameRoot(),ue=z[0],be=z[1];if(ue&&be){var Le=ue.split(`
`),rt=be.split(`
`);for(M=b=0;b<Le.length&&!Le[b].includes("DetermineComponentFrameRoot");)b++;for(;M<rt.length&&!rt[M].includes("DetermineComponentFrameRoot");)M++;if(b===Le.length||M===rt.length)for(b=Le.length-1,M=rt.length-1;1<=b&&0<=M&&Le[b]!==rt[M];)M--;for(;1<=b&&0<=M;b--,M--)if(Le[b]!==rt[M]){if(b!==1||M!==1)do if(b--,M--,0>M||Le[b]!==rt[M]){var ft=`
`+Le[b].replace(" at new "," at ");return A.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",A.displayName)),ft}while(1<=b&&0<=M);break}}}finally{va=!1,Error.prepareStackTrace=g}return(g=A?A.displayName||A.name:"")?js(g):""}function Ma(A){switch(A.tag){case 26:case 27:case 5:return js(A.type);case 16:return js("Lazy");case 13:return js("Suspense");case 19:return js("SuspenseList");case 0:case 15:return ea(A.type,!1);case 11:return ea(A.type.render,!1);case 1:return ea(A.type,!0);case 31:return js("Activity");default:return""}}function rs(A){try{var f="";do f+=Ma(A),A=A.return;while(A);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function ya(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Zc(A){var f=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function fd(A){var f=Zc(A)?"checked":"value",g=Object.getOwnPropertyDescriptor(A.constructor.prototype,f),b=""+A[f];if(!A.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var M=g.get,z=g.set;return Object.defineProperty(A,f,{configurable:!0,get:function(){return M.call(this)},set:function(ue){b=""+ue,z.call(this,ue)}}),Object.defineProperty(A,f,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(ue){b=""+ue},stopTracking:function(){A._valueTracker=null,delete A[f]}}}}function Cl(A){A._valueTracker||(A._valueTracker=fd(A))}function oA(A){if(!A)return!1;var f=A._valueTracker;if(!f)return!0;var g=f.getValue(),b="";return A&&(b=Zc(A)?A.checked?"true":"false":A.value),A=b,A!==g?(f.setValue(A),!0):!1}function Pa(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var eu=/[\n"\\]/g;function xn(A){return A.replace(eu,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Oa(A,f,g,b,M,z,ue,be){A.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?A.type=ue:A.removeAttribute("type"),f!=null?ue==="number"?(f===0&&A.value===""||A.value!=f)&&(A.value=""+ya(f)):A.value!==""+ya(f)&&(A.value=""+ya(f)):ue!=="submit"&&ue!=="reset"||A.removeAttribute("value"),f!=null?_l(A,ue,ya(f)):g!=null?_l(A,ue,ya(g)):b!=null&&A.removeAttribute("value"),M==null&&z!=null&&(A.defaultChecked=!!z),M!=null&&(A.checked=M&&typeof M!="function"&&typeof M!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?A.name=""+ya(be):A.removeAttribute("name")}function El(A,f,g,b,M,z,ue,be){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(A.type=z),f!=null||g!=null){if(!(z!=="submit"&&z!=="reset"||f!=null))return;g=g!=null?""+ya(g):"",f=f!=null?""+ya(f):g,be||f===A.value||(A.value=f),A.defaultValue=f}b=b??M,b=typeof b!="function"&&typeof b!="symbol"&&!!b,A.checked=be?A.checked:!!b,A.defaultChecked=!!b,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(A.name=ue)}function _l(A,f,g){f==="number"&&Pa(A.ownerDocument)===A||A.defaultValue===""+g||(A.defaultValue=""+g)}function yo(A,f,g,b){if(A=A.options,f){f={};for(var M=0;M<g.length;M++)f["$"+g[M]]=!0;for(g=0;g<A.length;g++)M=f.hasOwnProperty("$"+A[g].value),A[g].selected!==M&&(A[g].selected=M),M&&b&&(A[g].defaultSelected=!0)}else{for(g=""+ya(g),f=null,M=0;M<A.length;M++){if(A[M].value===g){A[M].selected=!0,b&&(A[M].defaultSelected=!0);return}f!==null||A[M].disabled||(f=A[M])}f!==null&&(f.selected=!0)}}function Tn(A,f,g){if(f!=null&&(f=""+ya(f),f!==A.value&&(A.value=f),g==null)){A.defaultValue!==f&&(A.defaultValue=f);return}A.defaultValue=g!=null?""+ya(g):""}function Sl(A,f,g,b){if(f==null){if(b!=null){if(g!=null)throw Error(n(92));if(te(b)){if(1<b.length)throw Error(n(93));b=b[0]}g=b}g==null&&(g=""),f=g}g=ya(f),A.defaultValue=g,b=A.textContent,b===g&&b!==""&&b!==null&&(A.value=b)}function Bi(A,f){if(f){var g=A.firstChild;if(g&&g===A.lastChild&&g.nodeType===3){g.nodeValue=f;return}}A.textContent=f}var qo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hd(A,f,g){var b=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?b?A.setProperty(f,""):f==="float"?A.cssFloat="":A[f]="":b?A.setProperty(f,g):typeof g!="number"||g===0||qo.has(f)?f==="float"?A.cssFloat=g:A[f]=(""+g).trim():A[f]=g+"px"}function lA(A,f,g){if(f!=null&&typeof f!="object")throw Error(n(62));if(A=A.style,g!=null){for(var b in g)!g.hasOwnProperty(b)||f!=null&&f.hasOwnProperty(b)||(b.indexOf("--")===0?A.setProperty(b,""):b==="float"?A.cssFloat="":A[b]="");for(var M in f)b=f[M],f.hasOwnProperty(M)&&g[M]!==b&&hd(A,M,b)}else for(var z in f)f.hasOwnProperty(z)&&hd(A,z,f[z])}function cA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ko=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $o(A){return tu.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var wo=null;function Gn(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Wo=null,bo=null;function xr(A){var f=ke(A);if(f&&(A=f.stateNode)){var g=A[ln]||null;e:switch(A=f.stateNode,f.type){case"input":if(Oa(A,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=A;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+xn(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var b=g[f];if(b!==A&&b.form===A.form){var M=b[ln]||null;if(!M)throw Error(n(90));Oa(b,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(f=0;f<g.length;f++)b=g[f],b.form===A.form&&oA(b)}break e;case"textarea":Tn(A,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&yo(A,!!g.multiple,f,!1)}}}var Co=!1;function pd(A,f,g){if(Co)return A(f,g);Co=!0;try{var b=A(f);return b}finally{if(Co=!1,(Wo!==null||bo!==null)&&(Uv(),Wo&&(f=Wo,A=bo,bo=Wo=null,xr(f),A)))for(f=0;f<A.length;f++)xr(A[f])}}function Ka(A,f){var g=A.stateNode;if(g===null)return null;var b=g[ln]||null;if(b===null)return null;g=b[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(A=A.type,b=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!b;break e;default:A=!1}if(A)return null;if(g&&typeof g!="function")throw Error(n(231,f,typeof g));return g}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ai=!1;if(ki)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){Ai=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{Ai=!1}var Ii=null,Tl=null,Yo=null;function uA(){if(Yo)return Yo;var A,f=Tl,g=f.length,b,M="value"in Ii?Ii.value:Ii.textContent,z=M.length;for(A=0;A<g&&f[A]===M[A];A++);var ue=g-A;for(b=1;b<=ue&&f[g-b]===M[z-b];b++);return Yo=M.slice(A,1<b?1-b:void 0)}function Fi(A){var f=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&f===13&&(A=13)):A=f,A===10&&(A=13),32<=A||A===13?A:0}function $a(){return!0}function _o(){return!1}function Qs(A){function f(g,b,M,z,ue){this._reactName=g,this._targetInst=M,this.type=b,this.nativeEvent=z,this.target=ue,this.currentTarget=null;for(var be in A)A.hasOwnProperty(be)&&(g=A[be],this[be]=g?g(z):z[be]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?$a:_o,this.isPropagationStopped=_o,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),f}var en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nl=Qs(en),So=d({},en,{view:0,detail:0}),AA=Qs(So),dc,fc,lo,Wa=d({},So,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fl,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==lo&&(lo&&A.type==="mousemove"?(dc=A.screenX-lo.screenX,fc=A.screenY-lo.screenY):fc=dc=0,lo=A),dc)},movementY:function(A){return"movementY"in A?A.movementY:fc}}),Hs=Qs(Wa),md=d({},Wa,{dataTransfer:0}),Bl=Qs(md),ja=d({},So,{relatedTarget:0}),kl=Qs(ja),Xo=d({},en,{animationName:0,elapsedTime:0,pseudoElement:0}),ru=Qs(Xo),hc=d({},en,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),nu=Qs(hc),dA=d({},en,{data:0}),pc=Qs(dA),Il={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gc(A){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(A):(A=su[A])?!!f[A]:!1}function Fl(){return gc}var gd=d({},So,{key:function(A){if(A.key){var f=Il[A.key]||A.key;if(f!=="Unidentified")return f}return A.type==="keypress"?(A=Fi(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?mc[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fl,charCode:function(A){return A.type==="keypress"?Fi(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Fi(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Jo=Qs(gd),Dl=d({},Wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xc=Qs(Dl),Ya=d({},So,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fl}),au=Qs(Ya),G=d({},en,{propertyName:0,elapsedTime:0,pseudoElement:0}),fe=Qs(G),Fe=d({},Wa,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Qs(Fe),ze=d({},en,{newState:0,oldState:0}),lt=Qs(ze),_t=[9,13,27,32],Vt=ki&&"CompositionEvent"in window,k=null;ki&&"documentMode"in document&&(k=document.documentMode);var ee=ki&&"TextEvent"in window&&!k,ie=ki&&(!Vt||k&&8<k&&11>=k),we=" ",He=!1;function tt(A,f){switch(A){case"keyup":return _t.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function St(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var vr=!1;function tn(A,f){switch(A){case"compositionend":return St(f);case"keypress":return f.which!==32?null:(He=!0,we);case"textInput":return A=f.data,A===we&&He?null:A;default:return null}}function Dr(A,f){if(vr)return A==="compositionend"||!Vt&&tt(A,f)?(A=uA(),Yo=Tl=Ii=null,vr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return ie&&f.locale!=="ko"?null:f.data;default:return null}}var Nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f==="input"?!!Nn[A.type]:f==="textarea"}function To(A,f,g,b){Wo?bo?bo.push(b):bo=[b]:Wo=b,f=Hv(f,"onChange"),0<f.length&&(g=new Nl("onChange","change",null,g,b),A.push({event:g,listeners:f}))}var ks=null,Di=null;function Rl(A){NI(A,0)}function iu(A){var f=$e(A);if(oA(f))return A}function xd(A,f){if(A==="change")return f}var fA=!1;if(ki){var ta;if(ki){var ou="oninput"in document;if(!ou){var hA=document.createElement("div");hA.setAttribute("oninput","return;"),ou=typeof hA.oninput=="function"}ta=ou}else ta=!1;fA=ta&&(!document.documentMode||9<document.documentMode)}function pA(){ks&&(ks.detachEvent("onpropertychange",vd),Di=ks=null)}function vd(A){if(A.propertyName==="value"&&iu(Di)){var f=[];To(f,Di,A,Gn(A)),pd(Rl,f)}}function Ri(A,f,g){A==="focusin"?(pA(),ks=f,Di=g,ks.attachEvent("onpropertychange",vd)):A==="focusout"&&pA()}function Hm(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return iu(Di)}function Zf(A,f){if(A==="click")return iu(f)}function E0(A,f){if(A==="input"||A==="change")return iu(f)}function No(A,f){return A===f&&(A!==0||1/A===1/f)||A!==A&&f!==f}var wa=typeof Object.is=="function"?Object.is:No;function lu(A,f){if(wa(A,f))return!0;if(typeof A!="object"||A===null||typeof f!="object"||f===null)return!1;var g=Object.keys(A),b=Object.keys(f);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var M=g[b];if(!oe.call(f,M)||!wa(A[M],f[M]))return!1}return!0}function eh(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function vc(A,f){var g=eh(A);A=0;for(var b;g;){if(g.nodeType===3){if(b=A+g.textContent.length,A<=f&&b>=f)return{node:g,offset:f-A};A=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=eh(g)}}function cu(A,f){return A&&f?A===f?!0:A&&A.nodeType===3?!1:f&&f.nodeType===3?cu(A,f.parentNode):"contains"in A?A.contains(f):A.compareDocumentPosition?!!(A.compareDocumentPosition(f)&16):!1:!1}function di(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var f=Pa(A.document);f instanceof A.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)A=f.contentWindow;else break;f=Pa(A.document)}return f}function Qa(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f&&(f==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||f==="textarea"||A.contentEditable==="true")}var uu=ki&&"documentMode"in document&&11>=document.documentMode,Li=null,Zo=null,Ll=null,el=!1;function Cs(A,f,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;el||Li==null||Li!==Pa(b)||(b=Li,"selectionStart"in b&&Qa(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Ll&&lu(Ll,b)||(Ll=b,b=Hv(Zo,"onSelect"),0<b.length&&(f=new Nl("onSelect","select",null,f,g),A.push({event:f,listeners:b}),f.target=Li)))}function tl(A,f){var g={};return g[A.toLowerCase()]=f.toLowerCase(),g["Webkit"+A]="webkit"+f,g["Moz"+A]="moz"+f,g}var Vs={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionrun:tl("Transition","TransitionRun"),transitionstart:tl("Transition","TransitionStart"),transitioncancel:tl("Transition","TransitionCancel"),transitionend:tl("Transition","TransitionEnd")},Ui={},mA={};ki&&(mA=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function Ul(A){if(Ui[A])return Ui[A];if(!Vs[A])return A;var f=Vs[A],g;for(g in f)if(f.hasOwnProperty(g)&&g in mA)return Ui[A]=f[g];return A}var yd=Ul("animationend"),Au=Ul("animationiteration"),du=Ul("animationstart"),fu=Ul("transitionrun"),gA=Ul("transitionstart"),wd=Ul("transitioncancel"),hu=Ul("transitionend"),yc=new Map,xA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xA.push("scrollEnd");function Es(A,f){yc.set(A,f),yt(f,[A])}var co=new WeakMap;function Xr(A,f){if(typeof A=="object"&&A!==null){var g=co.get(A);return g!==void 0?g:(f={value:A,source:f,stack:rs(f)},co.set(A,f),f)}return{value:A,source:f,stack:rs(f)}}var Jr=[],ns=0,Is=0;function Bo(){for(var A=ns,f=Is=ns=0;f<A;){var g=Jr[f];Jr[f++]=null;var b=Jr[f];Jr[f++]=null;var M=Jr[f];Jr[f++]=null;var z=Jr[f];if(Jr[f++]=null,b!==null&&M!==null){var ue=b.pending;ue===null?M.next=M:(M.next=ue.next,ue.next=M),b.pending=M}z!==0&&_0(g,M,z)}}function pu(A,f,g,b){Jr[ns++]=A,Jr[ns++]=f,Jr[ns++]=g,Jr[ns++]=b,Is|=b,A.lanes|=b,A=A.alternate,A!==null&&(A.lanes|=b)}function mu(A,f,g,b){return pu(A,f,g,b),vA(A)}function wc(A,f){return pu(A,null,null,f),vA(A)}function _0(A,f,g){A.lanes|=g;var b=A.alternate;b!==null&&(b.lanes|=g);for(var M=!1,z=A.return;z!==null;)z.childLanes|=g,b=z.alternate,b!==null&&(b.childLanes|=g),z.tag===22&&(A=z.stateNode,A===null||A._visibility&1||(M=!0)),A=z,z=z.return;return A.tag===3?(z=A.stateNode,M&&f!==null&&(M=31-kt(g),A=z.hiddenUpdates,b=A[M],b===null?A[M]=[f]:b.push(f),f.lane=g|536870912),z):null}function vA(A){if(50<fg)throw fg=0,NE=null,Error(n(185));for(var f=A.return;f!==null;)A=f,f=A.return;return A.tag===3?A.stateNode:null}var ba={};function ko(A,f,g,b){this.tag=A,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xa(A,f,g,b){return new ko(A,f,g,b)}function bd(A){return A=A.prototype,!(!A||!A.isReactComponent)}function Ml(A,f){var g=A.alternate;return g===null?(g=Xa(A.tag,f,A.key,A.mode),g.elementType=A.elementType,g.type=A.type,g.stateNode=A.stateNode,g.alternate=A,A.alternate=g):(g.pendingProps=f,g.type=A.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=A.flags&65011712,g.childLanes=A.childLanes,g.lanes=A.lanes,g.child=A.child,g.memoizedProps=A.memoizedProps,g.memoizedState=A.memoizedState,g.updateQueue=A.updateQueue,f=A.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=A.sibling,g.index=A.index,g.ref=A.ref,g.refCleanup=A.refCleanup,g}function th(A,f){A.flags&=65011714;var g=A.alternate;return g===null?(A.childLanes=0,A.lanes=f,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=g.childLanes,A.lanes=g.lanes,A.child=g.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=g.memoizedProps,A.memoizedState=g.memoizedState,A.updateQueue=g.updateQueue,A.type=g.type,f=g.dependencies,A.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),A}function yA(A,f,g,b,M,z){var ue=0;if(b=A,typeof A=="function")bd(A)&&(ue=1);else if(typeof A=="string")ue=bq(A,g,Z.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case N:return A=Xa(31,g,f,M),A.elementType=N,A.lanes=z,A;case y:return bc(g.children,M,z,f);case x:ue=8,M|=24;break;case E:return A=Xa(12,g,f,M|2),A.elementType=E,A.lanes=z,A;case U:return A=Xa(13,g,f,M),A.elementType=U,A.lanes=z,A;case F:return A=Xa(19,g,f,M),A.elementType=F,A.lanes=z,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case S:case D:ue=10;break e;case B:ue=9;break e;case I:ue=11;break e;case C:ue=14;break e;case _:ue=16,b=null;break e}ue=29,g=Error(n(130,A===null?"null":typeof A,"")),b=null}return f=Xa(ue,g,f,M),f.elementType=A,f.type=b,f.lanes=z,f}function bc(A,f,g,b){return A=Xa(7,A,b,f),A.lanes=g,A}function S0(A,f,g){return A=Xa(6,A,null,f),A.lanes=g,A}function rh(A,f,g){return f=Xa(4,A.children!==null?A.children:[],A.key,f),f.lanes=g,f.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},f}var gu=[],Cc=0,Cd=null,T0=0,Io=[],uo=0,wA=null,Ec=1,_c="";function bA(A,f){gu[Cc++]=T0,gu[Cc++]=Cd,Cd=A,T0=f}function iv(A,f,g){Io[uo++]=Ec,Io[uo++]=_c,Io[uo++]=wA,wA=A;var b=Ec;A=_c;var M=32-kt(b)-1;b&=~(1<<M),g+=1;var z=32-kt(f)+M;if(30<z){var ue=M-M%5;z=(b&(1<<ue)-1).toString(32),b>>=ue,M-=ue,Ec=1<<32-kt(f)+M|g<<M|b,_c=z+A}else Ec=1<<z|g<<M|b,_c=A}function nh(A){A.return!==null&&(bA(A,1),iv(A,1,0))}function sh(A){for(;A===Cd;)Cd=gu[--Cc],gu[Cc]=null,T0=gu[--Cc],gu[Cc]=null;for(;A===wA;)wA=Io[--uo],Io[uo]=null,_c=Io[--uo],Io[uo]=null,Ec=Io[--uo],Io[uo]=null}var ra=null,_s=null,En=!1,xu=null,Pl=!1,Vm=Error(n(519));function CA(A){var f=Error(n(418,""));throw Ed(Xr(f,A)),Vm}function ov(A){var f=A.stateNode,g=A.type,b=A.memoizedProps;switch(f[gn]=A,f[ln]=b,g){case"dialog":un("cancel",f),un("close",f);break;case"iframe":case"object":case"embed":un("load",f);break;case"video":case"audio":for(g=0;g<pg.length;g++)un(pg[g],f);break;case"source":un("error",f);break;case"img":case"image":case"link":un("error",f),un("load",f);break;case"details":un("toggle",f);break;case"input":un("invalid",f),El(f,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),Cl(f);break;case"select":un("invalid",f);break;case"textarea":un("invalid",f),Sl(f,b.value,b.defaultValue,b.children),Cl(f)}g=b.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||b.suppressHydrationWarning===!0||FI(f.textContent,g)?(b.popover!=null&&(un("beforetoggle",f),un("toggle",f)),b.onScroll!=null&&un("scroll",f),b.onScrollEnd!=null&&un("scrollend",f),b.onClick!=null&&(f.onclick=Vv),f=!0):f=!1,f||CA(A)}function Sc(A){for(ra=A.return;ra;)switch(ra.tag){case 5:case 13:Pl=!1;return;case 27:case 3:Pl=!0;return;default:ra=ra.return}}function fi(A){if(A!==ra)return!1;if(!En)return Sc(A),En=!0,!1;var f=A.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=A.type,g=!(g!=="form"&&g!=="button")||zE(A.type,A.memoizedProps)),g=!g),g&&_s&&CA(A),Sc(A),f===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,f=0;A;){if(A.nodeType===8)if(g=A.data,g==="/$"){if(f===0){_s=Rc(A.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;A=A.nextSibling}_s=null}}else f===27?(f=_s,Qd(A.type)?(A=$E,$E=null,_s=A):_s=f):_s=ra?Rc(A.stateNode.nextSibling):null;return!0}function Ao(){_s=ra=null,En=!1}function lv(){var A=xu;return A!==null&&(Ro===null?Ro=A:Ro.push.apply(Ro,A),xu=null),A}function Ed(A){xu===null?xu=[A]:xu.push(A)}var Ol=ae(null),Ca=null,Tc=null;function vu(A,f,g){W(Ol,f._currentValue),f._currentValue=g}function jl(A){A._currentValue=Ol.current,O(Ol)}function N0(A,f,g){for(;A!==null;){var b=A.alternate;if((A.childLanes&f)!==f?(A.childLanes|=f,b!==null&&(b.childLanes|=f)):b!==null&&(b.childLanes&f)!==f&&(b.childLanes|=f),A===g)break;A=A.return}}function B0(A,f,g,b){var M=A.child;for(M!==null&&(M.return=A);M!==null;){var z=M.dependencies;if(z!==null){var ue=M.child;z=z.firstContext;e:for(;z!==null;){var be=z;z=M;for(var Le=0;Le<f.length;Le++)if(be.context===f[Le]){z.lanes|=g,be=z.alternate,be!==null&&(be.lanes|=g),N0(z.return,g,A),b||(ue=null);break e}z=be.next}}else if(M.tag===18){if(ue=M.return,ue===null)throw Error(n(341));ue.lanes|=g,z=ue.alternate,z!==null&&(z.lanes|=g),N0(ue,g,A),ue=null}else ue=M.child;if(ue!==null)ue.return=M;else for(ue=M;ue!==null;){if(ue===A){ue=null;break}if(M=ue.sibling,M!==null){M.return=ue.return,ue=M;break}ue=ue.return}M=ue}}function _d(A,f,g,b){A=null;for(var M=f,z=!1;M!==null;){if(!z){if((M.flags&524288)!==0)z=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var ue=M.alternate;if(ue===null)throw Error(n(387));if(ue=ue.memoizedProps,ue!==null){var be=M.type;wa(M.pendingProps.value,ue.value)||(A!==null?A.push(be):A=[be])}}else if(M===ve.current){if(ue=M.alternate,ue===null)throw Error(n(387));ue.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(A!==null?A.push(wg):A=[wg])}M=M.return}A!==null&&B0(f,A,g,b),f.flags|=262144}function k0(A){for(A=A.firstContext;A!==null;){if(!wa(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Ql(A){Ca=A,Tc=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function na(A){return I0(Ca,A)}function yu(A,f){return Ca===null&&Ql(A),I0(A,f)}function I0(A,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},Tc===null){if(A===null)throw Error(n(308));Tc=f,A.dependencies={lanes:0,firstContext:f},A.flags|=524288}else Tc=Tc.next=f;return g}var ZC=typeof AbortController<"u"?AbortController:function(){var A=[],f=this.signal={aborted:!1,addEventListener:function(g,b){A.push(b)}};this.abort=function(){f.aborted=!0,A.forEach(function(g){return g()})}},cv=t.unstable_scheduleCallback,eE=t.unstable_NormalPriority,sa={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zm(){return{controller:new ZC,data:new Map,refCount:0}}function ah(A){A.refCount--,A.refCount===0&&cv(eE,function(){A.controller.abort()})}var ih=null,Gm=0,EA=0,Nc=null;function tE(A,f){if(ih===null){var g=ih=[];Gm=0,EA=LE(),Nc={status:"pending",value:void 0,then:function(b){g.push(b)}}}return Gm++,f.then(uv,uv),f}function uv(){if(--Gm===0&&ih!==null){Nc!==null&&(Nc.status="fulfilled");var A=ih;ih=null,EA=0,Nc=null;for(var f=0;f<A.length;f++)(0,A[f])()}}function Av(A,f){var g=[],b={status:"pending",value:null,reason:null,then:function(M){g.push(M)}};return A.then(function(){b.status="fulfilled",b.value=f;for(var M=0;M<g.length;M++)(0,g[M])(f)},function(M){for(b.status="rejected",b.reason=M,M=0;M<g.length;M++)(0,g[M])(void 0)}),b}var T=Y.S;Y.S=function(A,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&tE(A,f),T!==null&&T(A,f)};var P=ae(null);function X(){var A=P.current;return A!==null?A:ds.pooledCache}function se(A,f){f===null?W(P,P.current):W(P,f.pool)}function Ae(){var A=X();return A===null?null:{parent:sa._currentValue,pool:A}}var ge=Error(n(460)),xe=Error(n(474)),ye=Error(n(542)),Ce={then:function(){}};function Ne(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Me(){}function Ze(A,f,g){switch(g=A[g],g===void 0?A.push(f):g!==f&&(f.then(Me,Me),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,xt(A),A;default:if(typeof f.status=="string")f.then(Me,Me);else{if(A=ds,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=f,A.status="pending",A.then(function(b){if(f.status==="pending"){var M=f;M.status="fulfilled",M.value=b}},function(b){if(f.status==="pending"){var M=f;M.status="rejected",M.reason=b}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,xt(A),A}throw Ye=f,ge}}var Ye=null;function Ge(){if(Ye===null)throw Error(n(459));var A=Ye;return Ye=null,A}function xt(A){if(A===ge||A===ye)throw Error(n(483))}var it=!1;function Pe(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qe(A,f){A=A.updateQueue,f.updateQueue===A&&(f.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function At(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function vt(A,f,g){var b=A.updateQueue;if(b===null)return null;if(b=b.shared,(Kn&2)!==0){var M=b.pending;return M===null?f.next=f:(f.next=M.next,M.next=f),b.pending=f,f=vA(A),_0(A,null,g),f}return pu(A,b,f,g),vA(A)}function ht(A,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var b=f.lanes;b&=A.pendingLanes,g|=b,f.lanes=g,Kr(A,g)}}function $t(A,f){var g=A.updateQueue,b=A.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var M=null,z=null;if(g=g.firstBaseUpdate,g!==null){do{var ue={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};z===null?M=z=ue:z=z.next=ue,g=g.next}while(g!==null);z===null?M=z=f:z=z.next=f}else M=z=f;g={baseState:b.baseState,firstBaseUpdate:M,lastBaseUpdate:z,shared:b.shared,callbacks:b.callbacks},A.updateQueue=g;return}A=g.lastBaseUpdate,A===null?g.firstBaseUpdate=f:A.next=f,g.lastBaseUpdate=f}var Ot=!1;function sr(){if(Ot){var A=Nc;if(A!==null)throw A}}function zt(A,f,g,b){Ot=!1;var M=A.updateQueue;it=!1;var z=M.firstBaseUpdate,ue=M.lastBaseUpdate,be=M.shared.pending;if(be!==null){M.shared.pending=null;var Le=be,rt=Le.next;Le.next=null,ue===null?z=rt:ue.next=rt,ue=Le;var ft=A.alternate;ft!==null&&(ft=ft.updateQueue,be=ft.lastBaseUpdate,be!==ue&&(be===null?ft.firstBaseUpdate=rt:be.next=rt,ft.lastBaseUpdate=Le))}if(z!==null){var bt=M.baseState;ue=0,ft=rt=Le=null,be=z;do{var st=be.lane&-536870913,at=st!==be.lane;if(at?(bn&st)===st:(b&st)===st){st!==0&&st===EA&&(Ot=!0),ft!==null&&(ft=ft.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var Ir=A,yr=be;st=f;var as=g;switch(yr.tag){case 1:if(Ir=yr.payload,typeof Ir=="function"){bt=Ir.call(as,bt,st);break e}bt=Ir;break e;case 3:Ir.flags=Ir.flags&-65537|128;case 0:if(Ir=yr.payload,st=typeof Ir=="function"?Ir.call(as,bt,st):Ir,st==null)break e;bt=d({},bt,st);break e;case 2:it=!0}}st=be.callback,st!==null&&(A.flags|=64,at&&(A.flags|=8192),at=M.callbacks,at===null?M.callbacks=[st]:at.push(st))}else at={lane:st,tag:be.tag,payload:be.payload,callback:be.callback,next:null},ft===null?(rt=ft=at,Le=bt):ft=ft.next=at,ue|=st;if(be=be.next,be===null){if(be=M.shared.pending,be===null)break;at=be,be=at.next,at.next=null,M.lastBaseUpdate=at,M.shared.pending=null}}while(!0);ft===null&&(Le=bt),M.baseState=Le,M.firstBaseUpdate=rt,M.lastBaseUpdate=ft,z===null&&(M.shared.lanes=0),Md|=ue,A.lanes=ue,A.memoizedState=bt}}function yn(A,f){if(typeof A!="function")throw Error(n(191,A));A.call(f)}function Bn(A,f){var g=A.callbacks;if(g!==null)for(A.callbacks=null,A=0;A<g.length;A++)yn(g[A],f)}var Wr=ae(null),zr=ae(0);function On(A,f){A=RA,W(zr,A),W(Wr,f),RA=A|f.baseLanes}function kn(){W(zr,RA),W(Wr,Wr.current)}function Rr(){RA=zr.current,O(Wr),O(zr)}var qn=0,hr=null,Sr=null,vn=null,wn=!1,Ea=!1,aa=!1,Fs=0,Ds=0,zs=null,Fo=0;function In(){throw Error(n(321))}function Gs(A,f){if(f===null)return!1;for(var g=0;g<f.length&&g<A.length;g++)if(!wa(A[g],f[g]))return!1;return!0}function rl(A,f,g,b,M,z){return qn=z,hr=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Y.H=A===null||A.memoizedState===null?dk:fk,aa=!1,z=g(b,M),aa=!1,Ea&&(z=_A(f,g,b,M)),wu(A),z}function wu(A){Y.H=Cv;var f=Sr!==null&&Sr.next!==null;if(qn=0,vn=Sr=hr=null,wn=!1,Ds=0,zs=null,f)throw Error(n(300));A===null||Ja||(A=A.dependencies,A!==null&&k0(A)&&(Ja=!0))}function _A(A,f,g,b){hr=A;var M=0;do{if(Ea&&(zs=null),Ds=0,Ea=!1,25<=M)throw Error(n(301));if(M+=1,vn=Sr=null,A.updateQueue!=null){var z=A.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}Y.H=DG,z=f(g,b)}while(Ea);return z}function bu(){var A=Y.H,f=A.useState()[0];return f=typeof f.then=="function"?Cu(f):f,A=A.useState()[0],(Sr!==null?Sr.memoizedState:null)!==A&&(hr.flags|=1024),f}function As(){var A=Fs!==0;return Fs=0,A}function oh(A,f,g){f.updateQueue=A.updateQueue,f.flags&=-2053,A.lanes&=~g}function F0(A){if(wn){for(A=A.memoizedState;A!==null;){var f=A.queue;f!==null&&(f.pending=null),A=A.next}wn=!1}qn=0,vn=Sr=hr=null,Ea=!1,Ds=Fs=0,zs=null}function hi(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?hr.memoizedState=vn=A:vn=vn.next=A,vn}function ps(){if(Sr===null){var A=hr.alternate;A=A!==null?A.memoizedState:null}else A=Sr.next;var f=vn===null?hr.memoizedState:vn.next;if(f!==null)vn=f,Sr=A;else{if(A===null)throw hr.alternate===null?Error(n(467)):Error(n(310));Sr=A,A={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},vn===null?hr.memoizedState=vn=A:vn=vn.next=A}return vn}function SA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cu(A){var f=Ds;return Ds+=1,zs===null&&(zs=[]),A=Ze(zs,A,f),f=hr,(vn===null?f.memoizedState:vn.next)===null&&(f=f.alternate,Y.H=f===null||f.memoizedState===null?dk:fk),A}function Mi(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Cu(A);if(A.$$typeof===D)return na(A)}throw Error(n(438,String(A)))}function Eu(A){var f=null,g=hr.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var b=hr.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(f={data:b.data.map(function(M){return M.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=SA(),hr.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(A),b=0;b<A;b++)g[b]=j;return f.index++,g}function Pi(A,f){return typeof f=="function"?f(A):f}function lh(A){var f=ps();return Sd(f,Sr,A)}function Sd(A,f,g){var b=A.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=g;var M=A.baseQueue,z=b.pending;if(z!==null){if(M!==null){var ue=M.next;M.next=z.next,z.next=ue}f.baseQueue=M=z,b.pending=null}if(z=A.baseState,M===null)A.memoizedState=z;else{f=M.next;var be=ue=null,Le=null,rt=f,ft=!1;do{var bt=rt.lane&-536870913;if(bt!==rt.lane?(bn&bt)===bt:(qn&bt)===bt){var st=rt.revertLane;if(st===0)Le!==null&&(Le=Le.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),bt===EA&&(ft=!0);else if((qn&st)===st){rt=rt.next,st===EA&&(ft=!0);continue}else bt={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Le===null?(be=Le=bt,ue=z):Le=Le.next=bt,hr.lanes|=st,Md|=st;bt=rt.action,aa&&g(z,bt),z=rt.hasEagerState?rt.eagerState:g(z,bt)}else st={lane:bt,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Le===null?(be=Le=st,ue=z):Le=Le.next=st,hr.lanes|=bt,Md|=bt;rt=rt.next}while(rt!==null&&rt!==f);if(Le===null?ue=z:Le.next=be,!wa(z,A.memoizedState)&&(Ja=!0,ft&&(g=Nc,g!==null)))throw g;A.memoizedState=z,A.baseState=ue,A.baseQueue=Le,b.lastRenderedState=z}return M===null&&(b.lanes=0),[A.memoizedState,b.dispatch]}function D0(A){var f=ps(),g=f.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=A;var b=g.dispatch,M=g.pending,z=f.memoizedState;if(M!==null){g.pending=null;var ue=M=M.next;do z=A(z,ue.action),ue=ue.next;while(ue!==M);wa(z,f.memoizedState)||(Ja=!0),f.memoizedState=z,f.baseQueue===null&&(f.baseState=z),g.lastRenderedState=z}return[z,b]}function ch(A,f,g){var b=hr,M=ps(),z=En;if(z){if(g===void 0)throw Error(n(407));g=g()}else g=f();var ue=!wa((Sr||M).memoizedState,g);ue&&(M.memoizedState=g,Ja=!0),M=M.queue;var be=Td.bind(null,b,M,A);if(kd(2048,8,be,[A]),M.getSnapshot!==f||ue||vn!==null&&vn.memoizedState.tag&1){if(b.flags|=2048,kc(9,fh(),uh.bind(null,b,M,g,f),null),ds===null)throw Error(n(349));z||(qn&124)!==0||R0(b,f,g)}return g}function R0(A,f,g){A.flags|=16384,A={getSnapshot:f,value:g},f=hr.updateQueue,f===null?(f=SA(),hr.updateQueue=f,f.stores=[A]):(g=f.stores,g===null?f.stores=[A]:g.push(A))}function uh(A,f,g,b){f.value=g,f.getSnapshot=b,dv(f)&&fv(A)}function Td(A,f,g){return g(function(){dv(f)&&fv(A)})}function dv(A){var f=A.getSnapshot;A=A.value;try{var g=f();return!wa(A,g)}catch{return!0}}function fv(A){var f=wc(A,2);f!==null&&ll(f,A,2)}function Ah(A){var f=hi();if(typeof A=="function"){var g=A;if(A=g(),aa){qt(!0);try{g()}finally{qt(!1)}}}return f.memoizedState=f.baseState=A,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:A},f}function Bc(A,f,g,b){return A.baseState=g,Sd(A,Sr,typeof b=="function"?b:Pi)}function rE(A,f,g,b,M){if(bv(A))throw Error(n(485));if(A=f.action,A!==null){var z={payload:M,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){z.listeners.push(ue)}};Y.T!==null?g(!0):z.isTransition=!1,b(z),g=f.pending,g===null?(z.next=f.pending=z,hv(f,z)):(z.next=g.next,f.pending=g.next=z)}}function hv(A,f){var g=f.action,b=f.payload,M=A.state;if(f.isTransition){var z=Y.T,ue={};Y.T=ue;try{var be=g(M,b),Le=Y.S;Le!==null&&Le(ue,be),pv(A,f,be)}catch(rt){Nd(A,f,rt)}finally{Y.T=z}}else try{z=g(M,b),pv(A,f,z)}catch(rt){Nd(A,f,rt)}}function pv(A,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(b){qm(A,f,b)},function(b){return Nd(A,f,b)}):qm(A,f,g)}function qm(A,f,g){f.status="fulfilled",f.value=g,Km(f),A.state=g,f=A.pending,f!==null&&(g=f.next,g===f?A.pending=null:(g=g.next,f.next=g,hv(A,g)))}function Nd(A,f,g){var b=A.pending;if(A.pending=null,b!==null){b=b.next;do f.status="rejected",f.reason=g,Km(f),f=f.next;while(f!==b)}A.action=null}function Km(A){A=A.listeners;for(var f=0;f<A.length;f++)(0,A[f])()}function $m(A,f){return f}function dh(A,f){if(En){var g=ds.formState;if(g!==null){e:{var b=hr;if(En){if(_s){t:{for(var M=_s,z=Pl;M.nodeType!==8;){if(!z){M=null;break t}if(M=Rc(M.nextSibling),M===null){M=null;break t}}z=M.data,M=z==="F!"||z==="F"?M:null}if(M){_s=Rc(M.nextSibling),b=M.data==="F!";break e}}CA(b)}b=!1}b&&(f=g[0])}}return g=hi(),g.memoizedState=g.baseState=f,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$m,lastRenderedState:f},g.queue=b,g=ck.bind(null,hr,b),b.dispatch=g,b=Ah(!1),z=nE.bind(null,hr,!1,b.queue),b=hi(),M={state:f,dispatch:null,action:A,pending:null},b.queue=M,g=rE.bind(null,hr,M,z,g),M.dispatch=g,b.memoizedState=A,[f,g,!1]}function L0(A){var f=ps();return Bd(f,Sr,A)}function Bd(A,f,g){if(f=Sd(A,f,$m)[0],A=lh(Pi)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var b=Cu(f)}catch(ue){throw ue===ge?ye:ue}else b=f;f=ps();var M=f.queue,z=M.dispatch;return g!==f.memoizedState&&(hr.flags|=2048,kc(9,fh(),mv.bind(null,M,g),null)),[b,z,A]}function mv(A,f){A.action=f}function gv(A){var f=ps(),g=Sr;if(g!==null)return Bd(f,g,A);ps(),f=f.memoizedState,g=ps();var b=g.queue.dispatch;return g.memoizedState=A,[f,b,!1]}function kc(A,f,g,b){return A={tag:A,create:g,deps:b,inst:f,next:null},f=hr.updateQueue,f===null&&(f=SA(),hr.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=A.next=A:(b=g.next,g.next=A,A.next=b,f.lastEffect=A),A}function fh(){return{destroy:void 0,resource:void 0}}function U0(){return ps().memoizedState}function nl(A,f,g,b){var M=hi();b=b===void 0?null:b,hr.flags|=A,M.memoizedState=kc(1|f,fh(),g,b)}function kd(A,f,g,b){var M=ps();b=b===void 0?null:b;var z=M.memoizedState.inst;Sr!==null&&b!==null&&Gs(b,Sr.memoizedState.deps)?M.memoizedState=kc(f,z,g,b):(hr.flags|=A,M.memoizedState=kc(1|f,z,g,b))}function Wm(A,f){nl(8390656,8,A,f)}function xv(A,f){kd(2048,8,A,f)}function Ym(A,f){return kd(4,2,A,f)}function TA(A,f){return kd(4,4,A,f)}function vv(A,f){if(typeof f=="function"){A=A();var g=f(A);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return A=A(),f.current=A,function(){f.current=null}}function Xm(A,f,g){g=g!=null?g.concat([A]):null,kd(4,4,vv.bind(null,f,A),g)}function Jm(){}function Zm(A,f){var g=ps();f=f===void 0?null:f;var b=g.memoizedState;return f!==null&&Gs(f,b[1])?b[0]:(g.memoizedState=[A,f],A)}function yv(A,f){var g=ps();f=f===void 0?null:f;var b=g.memoizedState;if(f!==null&&Gs(f,b[1]))return b[0];if(b=A(),aa){qt(!0);try{A()}finally{qt(!1)}}return g.memoizedState=[b,f],b}function NA(A,f,g){return g===void 0||(qn&1073741824)!==0?A.memoizedState=f:(A.memoizedState=g,A=aI(),hr.lanes|=A,Md|=A,g)}function M0(A,f,g,b){return wa(g,f)?g:Wr.current!==null?(A=NA(A,g,b),wa(A,f)||(Ja=!0),A):(qn&42)===0?(Ja=!0,A.memoizedState=g):(A=aI(),hr.lanes|=A,Md|=A,f)}function hh(A,f,g,b,M){var z=re.p;re.p=z!==0&&8>z?z:8;var ue=Y.T,be={};Y.T=be,nE(A,!1,f,g);try{var Le=M(),rt=Y.S;if(rt!==null&&rt(be,Le),Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var ft=Av(Le,b);ng(A,f,ft,ol(A))}else ng(A,f,b,ol(A))}catch(bt){ng(A,f,{then:function(){},status:"rejected",reason:bt},ol())}finally{re.p=z,Y.T=ue}}function Ic(){}function Hl(A,f,g,b){if(A.tag!==5)throw Error(n(476));var M=Fc(A).queue;hh(A,M,f,V,g===null?Ic:function(){return ph(A),g(b)})}function Fc(A){var f=A.memoizedState;if(f!==null)return f;f={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:V},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:g},next:null},A.memoizedState=f,A=A.alternate,A!==null&&(A.memoizedState=f),f}function ph(A){var f=Fc(A).next.queue;ng(A,f,{},ol())}function mh(){return na(wg)}function eg(){return ps().memoizedState}function wv(){return ps().memoizedState}function tg(A){for(var f=A.return;f!==null;){switch(f.tag){case 24:case 3:var g=ol();A=At(g);var b=vt(f,A,g);b!==null&&(ll(b,f,g),ht(b,f,g)),f={cache:zm()},A.payload=f;return}f=f.return}}function rg(A,f,g){var b=ol();g={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},bv(A)?uk(f,g):(g=mu(A,f,g,b),g!==null&&(ll(g,A,b),Ak(g,f,b)))}function ck(A,f,g){var b=ol();ng(A,f,g,b)}function ng(A,f,g,b){var M={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(bv(A))uk(f,M);else{var z=A.alternate;if(A.lanes===0&&(z===null||z.lanes===0)&&(z=f.lastRenderedReducer,z!==null))try{var ue=f.lastRenderedState,be=z(ue,g);if(M.hasEagerState=!0,M.eagerState=be,wa(be,ue))return pu(A,f,M,0),ds===null&&Bo(),!1}catch{}finally{}if(g=mu(A,f,M,b),g!==null)return ll(g,A,b),Ak(g,f,b),!0}return!1}function nE(A,f,g,b){if(b={lane:2,revertLane:LE(),action:b,hasEagerState:!1,eagerState:null,next:null},bv(A)){if(f)throw Error(n(479))}else f=mu(A,g,b,2),f!==null&&ll(f,A,2)}function bv(A){var f=A.alternate;return A===hr||f!==null&&f===hr}function uk(A,f){Ea=wn=!0;var g=A.pending;g===null?f.next=f:(f.next=g.next,g.next=f),A.pending=f}function Ak(A,f,g){if((g&4194048)!==0){var b=f.lanes;b&=A.pendingLanes,g|=b,f.lanes=g,Kr(A,g)}}var Cv={readContext:na,use:Mi,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useLayoutEffect:In,useInsertionEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useSyncExternalStore:In,useId:In,useHostTransitionStatus:In,useFormState:In,useActionState:In,useOptimistic:In,useMemoCache:In,useCacheRefresh:In},dk={readContext:na,use:Mi,useCallback:function(A,f){return hi().memoizedState=[A,f===void 0?null:f],A},useContext:na,useEffect:Wm,useImperativeHandle:function(A,f,g){g=g!=null?g.concat([A]):null,nl(4194308,4,vv.bind(null,f,A),g)},useLayoutEffect:function(A,f){return nl(4194308,4,A,f)},useInsertionEffect:function(A,f){nl(4,2,A,f)},useMemo:function(A,f){var g=hi();f=f===void 0?null:f;var b=A();if(aa){qt(!0);try{A()}finally{qt(!1)}}return g.memoizedState=[b,f],b},useReducer:function(A,f,g){var b=hi();if(g!==void 0){var M=g(f);if(aa){qt(!0);try{g(f)}finally{qt(!1)}}}else M=f;return b.memoizedState=b.baseState=M,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:M},b.queue=A,A=A.dispatch=rg.bind(null,hr,A),[b.memoizedState,A]},useRef:function(A){var f=hi();return A={current:A},f.memoizedState=A},useState:function(A){A=Ah(A);var f=A.queue,g=ck.bind(null,hr,f);return f.dispatch=g,[A.memoizedState,g]},useDebugValue:Jm,useDeferredValue:function(A,f){var g=hi();return NA(g,A,f)},useTransition:function(){var A=Ah(!1);return A=hh.bind(null,hr,A.queue,!0,!1),hi().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,f,g){var b=hr,M=hi();if(En){if(g===void 0)throw Error(n(407));g=g()}else{if(g=f(),ds===null)throw Error(n(349));(bn&124)!==0||R0(b,f,g)}M.memoizedState=g;var z={value:g,getSnapshot:f};return M.queue=z,Wm(Td.bind(null,b,z,A),[A]),b.flags|=2048,kc(9,fh(),uh.bind(null,b,z,g,f),null),g},useId:function(){var A=hi(),f=ds.identifierPrefix;if(En){var g=_c,b=Ec;g=(b&~(1<<32-kt(b)-1)).toString(32)+g,f="«"+f+"R"+g,g=Fs++,0<g&&(f+="H"+g.toString(32)),f+="»"}else g=Fo++,f="«"+f+"r"+g.toString(32)+"»";return A.memoizedState=f},useHostTransitionStatus:mh,useFormState:dh,useActionState:dh,useOptimistic:function(A){var f=hi();f.memoizedState=f.baseState=A;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=nE.bind(null,hr,!0,g),g.dispatch=f,[A,f]},useMemoCache:Eu,useCacheRefresh:function(){return hi().memoizedState=tg.bind(null,hr)}},fk={readContext:na,use:Mi,useCallback:Zm,useContext:na,useEffect:xv,useImperativeHandle:Xm,useInsertionEffect:Ym,useLayoutEffect:TA,useMemo:yv,useReducer:lh,useRef:U0,useState:function(){return lh(Pi)},useDebugValue:Jm,useDeferredValue:function(A,f){var g=ps();return M0(g,Sr.memoizedState,A,f)},useTransition:function(){var A=lh(Pi)[0],f=ps().memoizedState;return[typeof A=="boolean"?A:Cu(A),f]},useSyncExternalStore:ch,useId:eg,useHostTransitionStatus:mh,useFormState:L0,useActionState:L0,useOptimistic:function(A,f){var g=ps();return Bc(g,Sr,A,f)},useMemoCache:Eu,useCacheRefresh:wv},DG={readContext:na,use:Mi,useCallback:Zm,useContext:na,useEffect:xv,useImperativeHandle:Xm,useInsertionEffect:Ym,useLayoutEffect:TA,useMemo:yv,useReducer:D0,useRef:U0,useState:function(){return D0(Pi)},useDebugValue:Jm,useDeferredValue:function(A,f){var g=ps();return Sr===null?NA(g,A,f):M0(g,Sr.memoizedState,A,f)},useTransition:function(){var A=D0(Pi)[0],f=ps().memoizedState;return[typeof A=="boolean"?A:Cu(A),f]},useSyncExternalStore:ch,useId:eg,useHostTransitionStatus:mh,useFormState:gv,useActionState:gv,useOptimistic:function(A,f){var g=ps();return Sr!==null?Bc(g,Sr,A,f):(g.baseState=A,[A,g.queue.dispatch])},useMemoCache:Eu,useCacheRefresh:wv},P0=null,sg=0;function Ev(A){var f=sg;return sg+=1,P0===null&&(P0=[]),Ze(P0,A,f)}function ag(A,f){f=f.props.ref,A.ref=f!==void 0?f:null}function _v(A,f){throw f.$$typeof===h?Error(n(525)):(A=Object.prototype.toString.call(f),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":A)))}function hk(A){var f=A._init;return f(A._payload)}function pk(A){function f(Ke,Oe){if(A){var Je=Ke.deletions;Je===null?(Ke.deletions=[Oe],Ke.flags|=16):Je.push(Oe)}}function g(Ke,Oe){if(!A)return null;for(;Oe!==null;)f(Ke,Oe),Oe=Oe.sibling;return null}function b(Ke){for(var Oe=new Map;Ke!==null;)Ke.key!==null?Oe.set(Ke.key,Ke):Oe.set(Ke.index,Ke),Ke=Ke.sibling;return Oe}function M(Ke,Oe){return Ke=Ml(Ke,Oe),Ke.index=0,Ke.sibling=null,Ke}function z(Ke,Oe,Je){return Ke.index=Je,A?(Je=Ke.alternate,Je!==null?(Je=Je.index,Je<Oe?(Ke.flags|=67108866,Oe):Je):(Ke.flags|=67108866,Oe)):(Ke.flags|=1048576,Oe)}function ue(Ke){return A&&Ke.alternate===null&&(Ke.flags|=67108866),Ke}function be(Ke,Oe,Je,gt){return Oe===null||Oe.tag!==6?(Oe=S0(Je,Ke.mode,gt),Oe.return=Ke,Oe):(Oe=M(Oe,Je),Oe.return=Ke,Oe)}function Le(Ke,Oe,Je,gt){var tr=Je.type;return tr===y?ft(Ke,Oe,Je.props.children,gt,Je.key):Oe!==null&&(Oe.elementType===tr||typeof tr=="object"&&tr!==null&&tr.$$typeof===_&&hk(tr)===Oe.type)?(Oe=M(Oe,Je.props),ag(Oe,Je),Oe.return=Ke,Oe):(Oe=yA(Je.type,Je.key,Je.props,null,Ke.mode,gt),ag(Oe,Je),Oe.return=Ke,Oe)}function rt(Ke,Oe,Je,gt){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Je.containerInfo||Oe.stateNode.implementation!==Je.implementation?(Oe=rh(Je,Ke.mode,gt),Oe.return=Ke,Oe):(Oe=M(Oe,Je.children||[]),Oe.return=Ke,Oe)}function ft(Ke,Oe,Je,gt,tr){return Oe===null||Oe.tag!==7?(Oe=bc(Je,Ke.mode,gt,tr),Oe.return=Ke,Oe):(Oe=M(Oe,Je),Oe.return=Ke,Oe)}function bt(Ke,Oe,Je){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=S0(""+Oe,Ke.mode,Je),Oe.return=Ke,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case p:return Je=yA(Oe.type,Oe.key,Oe.props,null,Ke.mode,Je),ag(Je,Oe),Je.return=Ke,Je;case m:return Oe=rh(Oe,Ke.mode,Je),Oe.return=Ke,Oe;case _:var gt=Oe._init;return Oe=gt(Oe._payload),bt(Ke,Oe,Je)}if(te(Oe)||L(Oe))return Oe=bc(Oe,Ke.mode,Je,null),Oe.return=Ke,Oe;if(typeof Oe.then=="function")return bt(Ke,Ev(Oe),Je);if(Oe.$$typeof===D)return bt(Ke,yu(Ke,Oe),Je);_v(Ke,Oe)}return null}function st(Ke,Oe,Je,gt){var tr=Oe!==null?Oe.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return tr!==null?null:be(Ke,Oe,""+Je,gt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case p:return Je.key===tr?Le(Ke,Oe,Je,gt):null;case m:return Je.key===tr?rt(Ke,Oe,Je,gt):null;case _:return tr=Je._init,Je=tr(Je._payload),st(Ke,Oe,Je,gt)}if(te(Je)||L(Je))return tr!==null?null:ft(Ke,Oe,Je,gt,null);if(typeof Je.then=="function")return st(Ke,Oe,Ev(Je),gt);if(Je.$$typeof===D)return st(Ke,Oe,yu(Ke,Je),gt);_v(Ke,Je)}return null}function at(Ke,Oe,Je,gt,tr){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return Ke=Ke.get(Je)||null,be(Oe,Ke,""+gt,tr);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case p:return Ke=Ke.get(gt.key===null?Je:gt.key)||null,Le(Oe,Ke,gt,tr);case m:return Ke=Ke.get(gt.key===null?Je:gt.key)||null,rt(Oe,Ke,gt,tr);case _:var rn=gt._init;return gt=rn(gt._payload),at(Ke,Oe,Je,gt,tr)}if(te(gt)||L(gt))return Ke=Ke.get(Je)||null,ft(Oe,Ke,gt,tr,null);if(typeof gt.then=="function")return at(Ke,Oe,Je,Ev(gt),tr);if(gt.$$typeof===D)return at(Ke,Oe,Je,yu(Oe,gt),tr);_v(Oe,gt)}return null}function Ir(Ke,Oe,Je,gt){for(var tr=null,rn=null,ir=Oe,br=Oe=0,ei=null;ir!==null&&br<Je.length;br++){ir.index>br?(ei=ir,ir=null):ei=ir.sibling;var Fn=st(Ke,ir,Je[br],gt);if(Fn===null){ir===null&&(ir=ei);break}A&&ir&&Fn.alternate===null&&f(Ke,ir),Oe=z(Fn,Oe,br),rn===null?tr=Fn:rn.sibling=Fn,rn=Fn,ir=ei}if(br===Je.length)return g(Ke,ir),En&&bA(Ke,br),tr;if(ir===null){for(;br<Je.length;br++)ir=bt(Ke,Je[br],gt),ir!==null&&(Oe=z(ir,Oe,br),rn===null?tr=ir:rn.sibling=ir,rn=ir);return En&&bA(Ke,br),tr}for(ir=b(ir);br<Je.length;br++)ei=at(ir,Ke,br,Je[br],gt),ei!==null&&(A&&ei.alternate!==null&&ir.delete(ei.key===null?br:ei.key),Oe=z(ei,Oe,br),rn===null?tr=ei:rn.sibling=ei,rn=ei);return A&&ir.forEach(function(qd){return f(Ke,qd)}),En&&bA(Ke,br),tr}function yr(Ke,Oe,Je,gt){if(Je==null)throw Error(n(151));for(var tr=null,rn=null,ir=Oe,br=Oe=0,ei=null,Fn=Je.next();ir!==null&&!Fn.done;br++,Fn=Je.next()){ir.index>br?(ei=ir,ir=null):ei=ir.sibling;var qd=st(Ke,ir,Fn.value,gt);if(qd===null){ir===null&&(ir=ei);break}A&&ir&&qd.alternate===null&&f(Ke,ir),Oe=z(qd,Oe,br),rn===null?tr=qd:rn.sibling=qd,rn=qd,ir=ei}if(Fn.done)return g(Ke,ir),En&&bA(Ke,br),tr;if(ir===null){for(;!Fn.done;br++,Fn=Je.next())Fn=bt(Ke,Fn.value,gt),Fn!==null&&(Oe=z(Fn,Oe,br),rn===null?tr=Fn:rn.sibling=Fn,rn=Fn);return En&&bA(Ke,br),tr}for(ir=b(ir);!Fn.done;br++,Fn=Je.next())Fn=at(ir,Ke,br,Fn.value,gt),Fn!==null&&(A&&Fn.alternate!==null&&ir.delete(Fn.key===null?br:Fn.key),Oe=z(Fn,Oe,br),rn===null?tr=Fn:rn.sibling=Fn,rn=Fn);return A&&ir.forEach(function(Rq){return f(Ke,Rq)}),En&&bA(Ke,br),tr}function as(Ke,Oe,Je,gt){if(typeof Je=="object"&&Je!==null&&Je.type===y&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case p:e:{for(var tr=Je.key;Oe!==null;){if(Oe.key===tr){if(tr=Je.type,tr===y){if(Oe.tag===7){g(Ke,Oe.sibling),gt=M(Oe,Je.props.children),gt.return=Ke,Ke=gt;break e}}else if(Oe.elementType===tr||typeof tr=="object"&&tr!==null&&tr.$$typeof===_&&hk(tr)===Oe.type){g(Ke,Oe.sibling),gt=M(Oe,Je.props),ag(gt,Je),gt.return=Ke,Ke=gt;break e}g(Ke,Oe);break}else f(Ke,Oe);Oe=Oe.sibling}Je.type===y?(gt=bc(Je.props.children,Ke.mode,gt,Je.key),gt.return=Ke,Ke=gt):(gt=yA(Je.type,Je.key,Je.props,null,Ke.mode,gt),ag(gt,Je),gt.return=Ke,Ke=gt)}return ue(Ke);case m:e:{for(tr=Je.key;Oe!==null;){if(Oe.key===tr)if(Oe.tag===4&&Oe.stateNode.containerInfo===Je.containerInfo&&Oe.stateNode.implementation===Je.implementation){g(Ke,Oe.sibling),gt=M(Oe,Je.children||[]),gt.return=Ke,Ke=gt;break e}else{g(Ke,Oe);break}else f(Ke,Oe);Oe=Oe.sibling}gt=rh(Je,Ke.mode,gt),gt.return=Ke,Ke=gt}return ue(Ke);case _:return tr=Je._init,Je=tr(Je._payload),as(Ke,Oe,Je,gt)}if(te(Je))return Ir(Ke,Oe,Je,gt);if(L(Je)){if(tr=L(Je),typeof tr!="function")throw Error(n(150));return Je=tr.call(Je),yr(Ke,Oe,Je,gt)}if(typeof Je.then=="function")return as(Ke,Oe,Ev(Je),gt);if(Je.$$typeof===D)return as(Ke,Oe,yu(Ke,Je),gt);_v(Ke,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint"?(Je=""+Je,Oe!==null&&Oe.tag===6?(g(Ke,Oe.sibling),gt=M(Oe,Je),gt.return=Ke,Ke=gt):(g(Ke,Oe),gt=S0(Je,Ke.mode,gt),gt.return=Ke,Ke=gt),ue(Ke)):g(Ke,Oe)}return function(Ke,Oe,Je,gt){try{sg=0;var tr=as(Ke,Oe,Je,gt);return P0=null,tr}catch(ir){if(ir===ge||ir===ye)throw ir;var rn=Xa(29,ir,null,Ke.mode);return rn.lanes=gt,rn.return=Ke,rn}finally{}}}var O0=pk(!0),mk=pk(!1),Vl=ae(null),_u=null;function Id(A){var f=A.alternate;W(Ha,Ha.current&1),W(Vl,A),_u===null&&(f===null||Wr.current!==null||f.memoizedState!==null)&&(_u=A)}function gk(A){if(A.tag===22){if(W(Ha,Ha.current),W(Vl,A),_u===null){var f=A.alternate;f!==null&&f.memoizedState!==null&&(_u=A)}}else Fd()}function Fd(){W(Ha,Ha.current),W(Vl,Vl.current)}function BA(A){O(Vl),_u===A&&(_u=null),O(Ha)}var Ha=ae(0);function Sv(A){for(var f=A;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||KE(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function sE(A,f,g,b){f=A.memoizedState,g=g(b,f),g=g==null?f:d({},f,g),A.memoizedState=g,A.lanes===0&&(A.updateQueue.baseState=g)}var aE={enqueueSetState:function(A,f,g){A=A._reactInternals;var b=ol(),M=At(b);M.payload=f,g!=null&&(M.callback=g),f=vt(A,M,b),f!==null&&(ll(f,A,b),ht(f,A,b))},enqueueReplaceState:function(A,f,g){A=A._reactInternals;var b=ol(),M=At(b);M.tag=1,M.payload=f,g!=null&&(M.callback=g),f=vt(A,M,b),f!==null&&(ll(f,A,b),ht(f,A,b))},enqueueForceUpdate:function(A,f){A=A._reactInternals;var g=ol(),b=At(g);b.tag=2,f!=null&&(b.callback=f),f=vt(A,b,g),f!==null&&(ll(f,A,g),ht(f,A,g))}};function xk(A,f,g,b,M,z,ue){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(b,z,ue):f.prototype&&f.prototype.isPureReactComponent?!lu(g,b)||!lu(M,z):!0}function vk(A,f,g,b){A=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,b),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,b),f.state!==A&&aE.enqueueReplaceState(f,f.state,null)}function gh(A,f){var g=f;if("ref"in f){g={};for(var b in f)b!=="ref"&&(g[b]=f[b])}if(A=A.defaultProps){g===f&&(g=d({},g));for(var M in A)g[M]===void 0&&(g[M]=A[M])}return g}var Tv=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function yk(A){Tv(A)}function wk(A){console.error(A)}function bk(A){Tv(A)}function Nv(A,f){try{var g=A.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(b){setTimeout(function(){throw b})}}function Ck(A,f,g){try{var b=A.onCaughtError;b(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function iE(A,f,g){return g=At(g),g.tag=3,g.payload={element:null},g.callback=function(){Nv(A,f)},g}function Ek(A){return A=At(A),A.tag=3,A}function _k(A,f,g,b){var M=g.type.getDerivedStateFromError;if(typeof M=="function"){var z=b.value;A.payload=function(){return M(z)},A.callback=function(){Ck(f,g,b)}}var ue=g.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(A.callback=function(){Ck(f,g,b),typeof M!="function"&&(Pd===null?Pd=new Set([this]):Pd.add(this));var be=b.stack;this.componentDidCatch(b.value,{componentStack:be!==null?be:""})})}function RG(A,f,g,b,M){if(g.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(f=g.alternate,f!==null&&_d(f,g,M,!0),g=Vl.current,g!==null){switch(g.tag){case 13:return _u===null?kE():g.alternate===null&&qs===0&&(qs=3),g.flags&=-257,g.flags|=65536,g.lanes=M,b===Ce?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([b]):f.add(b),FE(A,b,M)),!1;case 22:return g.flags|=65536,b===Ce?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([b])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([b]):g.add(b)),FE(A,b,M)),!1}throw Error(n(435,g.tag))}return FE(A,b,M),kE(),!1}if(En)return f=Vl.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=M,b!==Vm&&(A=Error(n(422),{cause:b}),Ed(Xr(A,g)))):(b!==Vm&&(f=Error(n(423),{cause:b}),Ed(Xr(f,g))),A=A.current.alternate,A.flags|=65536,M&=-M,A.lanes|=M,b=Xr(b,g),M=iE(A.stateNode,b,M),$t(A,M),qs!==4&&(qs=2)),!1;var z=Error(n(520),{cause:b});if(z=Xr(z,g),dg===null?dg=[z]:dg.push(z),qs!==4&&(qs=2),f===null)return!0;b=Xr(b,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,A=M&-M,g.lanes|=A,A=iE(g.stateNode,b,A),$t(g,A),!1;case 1:if(f=g.type,z=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Pd===null||!Pd.has(z))))return g.flags|=65536,M&=-M,g.lanes|=M,M=Ek(M),_k(M,A,g,b),$t(g,M),!1}g=g.return}while(g!==null);return!1}var Sk=Error(n(461)),Ja=!1;function pi(A,f,g,b){f.child=A===null?mk(f,null,g,b):O0(f,A.child,g,b)}function Tk(A,f,g,b,M){g=g.render;var z=f.ref;if("ref"in b){var ue={};for(var be in b)be!=="ref"&&(ue[be]=b[be])}else ue=b;return Ql(f),b=rl(A,f,g,ue,z,M),be=As(),A!==null&&!Ja?(oh(A,f,M),kA(A,f,M)):(En&&be&&nh(f),f.flags|=1,pi(A,f,b,M),f.child)}function Nk(A,f,g,b,M){if(A===null){var z=g.type;return typeof z=="function"&&!bd(z)&&z.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=z,Bk(A,f,z,b,M)):(A=yA(g.type,null,b,f,f.mode,M),A.ref=f.ref,A.return=f,f.child=A)}if(z=A.child,!hE(A,M)){var ue=z.memoizedProps;if(g=g.compare,g=g!==null?g:lu,g(ue,b)&&A.ref===f.ref)return kA(A,f,M)}return f.flags|=1,A=Ml(z,b),A.ref=f.ref,A.return=f,f.child=A}function Bk(A,f,g,b,M){if(A!==null){var z=A.memoizedProps;if(lu(z,b)&&A.ref===f.ref)if(Ja=!1,f.pendingProps=b=z,hE(A,M))(A.flags&131072)!==0&&(Ja=!0);else return f.lanes=A.lanes,kA(A,f,M)}return oE(A,f,g,b,M)}function kk(A,f,g){var b=f.pendingProps,M=b.children,z=A!==null?A.memoizedState:null;if(b.mode==="hidden"){if((f.flags&128)!==0){if(b=z!==null?z.baseLanes|g:g,A!==null){for(M=f.child=A.child,z=0;M!==null;)z=z|M.lanes|M.childLanes,M=M.sibling;f.childLanes=z&~b}else f.childLanes=0,f.child=null;return Ik(A,f,b,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},A!==null&&se(f,z!==null?z.cachePool:null),z!==null?On(f,z):kn(),gk(f);else return f.lanes=f.childLanes=536870912,Ik(A,f,z!==null?z.baseLanes|g:g,g)}else z!==null?(se(f,z.cachePool),On(f,z),Fd(),f.memoizedState=null):(A!==null&&se(f,null),kn(),Fd());return pi(A,f,M,g),f.child}function Ik(A,f,g,b){var M=X();return M=M===null?null:{parent:sa._currentValue,pool:M},f.memoizedState={baseLanes:g,cachePool:M},A!==null&&se(f,null),kn(),gk(f),A!==null&&_d(A,f,b,!0),null}function Bv(A,f){var g=f.ref;if(g===null)A!==null&&A.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(n(284));(A===null||A.ref!==g)&&(f.flags|=4194816)}}function oE(A,f,g,b,M){return Ql(f),g=rl(A,f,g,b,void 0,M),b=As(),A!==null&&!Ja?(oh(A,f,M),kA(A,f,M)):(En&&b&&nh(f),f.flags|=1,pi(A,f,g,M),f.child)}function Fk(A,f,g,b,M,z){return Ql(f),f.updateQueue=null,g=_A(f,b,g,M),wu(A),b=As(),A!==null&&!Ja?(oh(A,f,z),kA(A,f,z)):(En&&b&&nh(f),f.flags|=1,pi(A,f,g,z),f.child)}function Dk(A,f,g,b,M){if(Ql(f),f.stateNode===null){var z=ba,ue=g.contextType;typeof ue=="object"&&ue!==null&&(z=na(ue)),z=new g(b,z),f.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=aE,f.stateNode=z,z._reactInternals=f,z=f.stateNode,z.props=b,z.state=f.memoizedState,z.refs={},Pe(f),ue=g.contextType,z.context=typeof ue=="object"&&ue!==null?na(ue):ba,z.state=f.memoizedState,ue=g.getDerivedStateFromProps,typeof ue=="function"&&(sE(f,g,ue,b),z.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(ue=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),ue!==z.state&&aE.enqueueReplaceState(z,z.state,null),zt(f,b,z,M),sr(),z.state=f.memoizedState),typeof z.componentDidMount=="function"&&(f.flags|=4194308),b=!0}else if(A===null){z=f.stateNode;var be=f.memoizedProps,Le=gh(g,be);z.props=Le;var rt=z.context,ft=g.contextType;ue=ba,typeof ft=="object"&&ft!==null&&(ue=na(ft));var bt=g.getDerivedStateFromProps;ft=typeof bt=="function"||typeof z.getSnapshotBeforeUpdate=="function",be=f.pendingProps!==be,ft||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(be||rt!==ue)&&vk(f,z,b,ue),it=!1;var st=f.memoizedState;z.state=st,zt(f,b,z,M),sr(),rt=f.memoizedState,be||st!==rt||it?(typeof bt=="function"&&(sE(f,g,bt,b),rt=f.memoizedState),(Le=it||xk(f,g,Le,b,st,rt,ue))?(ft||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(f.flags|=4194308)):(typeof z.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=b,f.memoizedState=rt),z.props=b,z.state=rt,z.context=ue,b=Le):(typeof z.componentDidMount=="function"&&(f.flags|=4194308),b=!1)}else{z=f.stateNode,Qe(A,f),ue=f.memoizedProps,ft=gh(g,ue),z.props=ft,bt=f.pendingProps,st=z.context,rt=g.contextType,Le=ba,typeof rt=="object"&&rt!==null&&(Le=na(rt)),be=g.getDerivedStateFromProps,(rt=typeof be=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ue!==bt||st!==Le)&&vk(f,z,b,Le),it=!1,st=f.memoizedState,z.state=st,zt(f,b,z,M),sr();var at=f.memoizedState;ue!==bt||st!==at||it||A!==null&&A.dependencies!==null&&k0(A.dependencies)?(typeof be=="function"&&(sE(f,g,be,b),at=f.memoizedState),(ft=it||xk(f,g,ft,b,st,at,Le)||A!==null&&A.dependencies!==null&&k0(A.dependencies))?(rt||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(b,at,Le),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(b,at,Le)),typeof z.componentDidUpdate=="function"&&(f.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof z.componentDidUpdate!="function"||ue===A.memoizedProps&&st===A.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&st===A.memoizedState||(f.flags|=1024),f.memoizedProps=b,f.memoizedState=at),z.props=b,z.state=at,z.context=Le,b=ft):(typeof z.componentDidUpdate!="function"||ue===A.memoizedProps&&st===A.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&st===A.memoizedState||(f.flags|=1024),b=!1)}return z=b,Bv(A,f),b=(f.flags&128)!==0,z||b?(z=f.stateNode,g=b&&typeof g.getDerivedStateFromError!="function"?null:z.render(),f.flags|=1,A!==null&&b?(f.child=O0(f,A.child,null,M),f.child=O0(f,null,g,M)):pi(A,f,g,M),f.memoizedState=z.state,A=f.child):A=kA(A,f,M),A}function Rk(A,f,g,b){return Ao(),f.flags|=256,pi(A,f,g,b),f.child}var lE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cE(A){return{baseLanes:A,cachePool:Ae()}}function uE(A,f,g){return A=A!==null?A.childLanes&~g:0,f&&(A|=zl),A}function Lk(A,f,g){var b=f.pendingProps,M=!1,z=(f.flags&128)!==0,ue;if((ue=z)||(ue=A!==null&&A.memoizedState===null?!1:(Ha.current&2)!==0),ue&&(M=!0,f.flags&=-129),ue=(f.flags&32)!==0,f.flags&=-33,A===null){if(En){if(M?Id(f):Fd(),En){var be=_s,Le;if(Le=be){e:{for(Le=be,be=Pl;Le.nodeType!==8;){if(!be){be=null;break e}if(Le=Rc(Le.nextSibling),Le===null){be=null;break e}}be=Le}be!==null?(f.memoizedState={dehydrated:be,treeContext:wA!==null?{id:Ec,overflow:_c}:null,retryLane:536870912,hydrationErrors:null},Le=Xa(18,null,null,0),Le.stateNode=be,Le.return=f,f.child=Le,ra=f,_s=null,Le=!0):Le=!1}Le||CA(f)}if(be=f.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return KE(be)?f.lanes=32:f.lanes=536870912,null;BA(f)}return be=b.children,b=b.fallback,M?(Fd(),M=f.mode,be=kv({mode:"hidden",children:be},M),b=bc(b,M,g,null),be.return=f,b.return=f,be.sibling=b,f.child=be,M=f.child,M.memoizedState=cE(g),M.childLanes=uE(A,ue,g),f.memoizedState=lE,b):(Id(f),AE(f,be))}if(Le=A.memoizedState,Le!==null&&(be=Le.dehydrated,be!==null)){if(z)f.flags&256?(Id(f),f.flags&=-257,f=dE(A,f,g)):f.memoizedState!==null?(Fd(),f.child=A.child,f.flags|=128,f=null):(Fd(),M=b.fallback,be=f.mode,b=kv({mode:"visible",children:b.children},be),M=bc(M,be,g,null),M.flags|=2,b.return=f,M.return=f,b.sibling=M,f.child=b,O0(f,A.child,null,g),b=f.child,b.memoizedState=cE(g),b.childLanes=uE(A,ue,g),f.memoizedState=lE,f=M);else if(Id(f),KE(be)){if(ue=be.nextSibling&&be.nextSibling.dataset,ue)var rt=ue.dgst;ue=rt,b=Error(n(419)),b.stack="",b.digest=ue,Ed({value:b,source:null,stack:null}),f=dE(A,f,g)}else if(Ja||_d(A,f,g,!1),ue=(g&A.childLanes)!==0,Ja||ue){if(ue=ds,ue!==null&&(b=g&-g,b=(b&42)!==0?1:xa(b),b=(b&(ue.suspendedLanes|g))!==0?0:b,b!==0&&b!==Le.retryLane))throw Le.retryLane=b,wc(A,b),ll(ue,A,b),Sk;be.data==="$?"||kE(),f=dE(A,f,g)}else be.data==="$?"?(f.flags|=192,f.child=A.child,f=null):(A=Le.treeContext,_s=Rc(be.nextSibling),ra=f,En=!0,xu=null,Pl=!1,A!==null&&(Io[uo++]=Ec,Io[uo++]=_c,Io[uo++]=wA,Ec=A.id,_c=A.overflow,wA=f),f=AE(f,b.children),f.flags|=4096);return f}return M?(Fd(),M=b.fallback,be=f.mode,Le=A.child,rt=Le.sibling,b=Ml(Le,{mode:"hidden",children:b.children}),b.subtreeFlags=Le.subtreeFlags&65011712,rt!==null?M=Ml(rt,M):(M=bc(M,be,g,null),M.flags|=2),M.return=f,b.return=f,b.sibling=M,f.child=b,b=M,M=f.child,be=A.child.memoizedState,be===null?be=cE(g):(Le=be.cachePool,Le!==null?(rt=sa._currentValue,Le=Le.parent!==rt?{parent:rt,pool:rt}:Le):Le=Ae(),be={baseLanes:be.baseLanes|g,cachePool:Le}),M.memoizedState=be,M.childLanes=uE(A,ue,g),f.memoizedState=lE,b):(Id(f),g=A.child,A=g.sibling,g=Ml(g,{mode:"visible",children:b.children}),g.return=f,g.sibling=null,A!==null&&(ue=f.deletions,ue===null?(f.deletions=[A],f.flags|=16):ue.push(A)),f.child=g,f.memoizedState=null,g)}function AE(A,f){return f=kv({mode:"visible",children:f},A.mode),f.return=A,A.child=f}function kv(A,f){return A=Xa(22,A,null,f),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function dE(A,f,g){return O0(f,A.child,null,g),A=AE(f,f.pendingProps.children),A.flags|=2,f.memoizedState=null,A}function Uk(A,f,g){A.lanes|=f;var b=A.alternate;b!==null&&(b.lanes|=f),N0(A.return,f,g)}function fE(A,f,g,b,M){var z=A.memoizedState;z===null?A.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:M}:(z.isBackwards=f,z.rendering=null,z.renderingStartTime=0,z.last=b,z.tail=g,z.tailMode=M)}function Mk(A,f,g){var b=f.pendingProps,M=b.revealOrder,z=b.tail;if(pi(A,f,b.children,g),b=Ha.current,(b&2)!==0)b=b&1|2,f.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=f.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&Uk(A,g,f);else if(A.tag===19)Uk(A,g,f);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break e;for(;A.sibling===null;){if(A.return===null||A.return===f)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}b&=1}switch(W(Ha,b),M){case"forwards":for(g=f.child,M=null;g!==null;)A=g.alternate,A!==null&&Sv(A)===null&&(M=g),g=g.sibling;g=M,g===null?(M=f.child,f.child=null):(M=g.sibling,g.sibling=null),fE(f,!1,M,g,z);break;case"backwards":for(g=null,M=f.child,f.child=null;M!==null;){if(A=M.alternate,A!==null&&Sv(A)===null){f.child=M;break}A=M.sibling,M.sibling=g,g=M,M=A}fE(f,!0,g,null,z);break;case"together":fE(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function kA(A,f,g){if(A!==null&&(f.dependencies=A.dependencies),Md|=f.lanes,(g&f.childLanes)===0)if(A!==null){if(_d(A,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(A!==null&&f.child!==A.child)throw Error(n(153));if(f.child!==null){for(A=f.child,g=Ml(A,A.pendingProps),f.child=g,g.return=f;A.sibling!==null;)A=A.sibling,g=g.sibling=Ml(A,A.pendingProps),g.return=f;g.sibling=null}return f.child}function hE(A,f){return(A.lanes&f)!==0?!0:(A=A.dependencies,!!(A!==null&&k0(A)))}function LG(A,f,g){switch(f.tag){case 3:pe(f,f.stateNode.containerInfo),vu(f,sa,A.memoizedState.cache),Ao();break;case 27:case 5:de(f);break;case 4:pe(f,f.stateNode.containerInfo);break;case 10:vu(f,f.type,f.memoizedProps.value);break;case 13:var b=f.memoizedState;if(b!==null)return b.dehydrated!==null?(Id(f),f.flags|=128,null):(g&f.child.childLanes)!==0?Lk(A,f,g):(Id(f),A=kA(A,f,g),A!==null?A.sibling:null);Id(f);break;case 19:var M=(A.flags&128)!==0;if(b=(g&f.childLanes)!==0,b||(_d(A,f,g,!1),b=(g&f.childLanes)!==0),M){if(b)return Mk(A,f,g);f.flags|=128}if(M=f.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),W(Ha,Ha.current),b)break;return null;case 22:case 23:return f.lanes=0,kk(A,f,g);case 24:vu(f,sa,A.memoizedState.cache)}return kA(A,f,g)}function Pk(A,f,g){if(A!==null)if(A.memoizedProps!==f.pendingProps)Ja=!0;else{if(!hE(A,g)&&(f.flags&128)===0)return Ja=!1,LG(A,f,g);Ja=(A.flags&131072)!==0}else Ja=!1,En&&(f.flags&1048576)!==0&&iv(f,T0,f.index);switch(f.lanes=0,f.tag){case 16:e:{A=f.pendingProps;var b=f.elementType,M=b._init;if(b=M(b._payload),f.type=b,typeof b=="function")bd(b)?(A=gh(b,A),f.tag=1,f=Dk(null,f,b,A,g)):(f.tag=0,f=oE(null,f,b,A,g));else{if(b!=null){if(M=b.$$typeof,M===I){f.tag=11,f=Tk(null,f,b,A,g);break e}else if(M===C){f.tag=14,f=Nk(null,f,b,A,g);break e}}throw f=H(b)||b,Error(n(306,f,""))}}return f;case 0:return oE(A,f,f.type,f.pendingProps,g);case 1:return b=f.type,M=gh(b,f.pendingProps),Dk(A,f,b,M,g);case 3:e:{if(pe(f,f.stateNode.containerInfo),A===null)throw Error(n(387));b=f.pendingProps;var z=f.memoizedState;M=z.element,Qe(A,f),zt(f,b,null,g);var ue=f.memoizedState;if(b=ue.cache,vu(f,sa,b),b!==z.cache&&B0(f,[sa],g,!0),sr(),b=ue.element,z.isDehydrated)if(z={element:b,isDehydrated:!1,cache:ue.cache},f.updateQueue.baseState=z,f.memoizedState=z,f.flags&256){f=Rk(A,f,b,g);break e}else if(b!==M){M=Xr(Error(n(424)),f),Ed(M),f=Rk(A,f,b,g);break e}else{switch(A=f.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(_s=Rc(A.firstChild),ra=f,En=!0,xu=null,Pl=!0,g=mk(f,null,b,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(Ao(),b===M){f=kA(A,f,g);break e}pi(A,f,b,g)}f=f.child}return f;case 26:return Bv(A,f),A===null?(g=HI(f.type,null,f.pendingProps,null))?f.memoizedState=g:En||(g=f.type,A=f.pendingProps,b=zv(le.current).createElement(g),b[gn]=f,b[ln]=A,gi(b,g,A),Ve(b),f.stateNode=b):f.memoizedState=HI(f.type,A.memoizedProps,f.pendingProps,A.memoizedState),null;case 27:return de(f),A===null&&En&&(b=f.stateNode=OI(f.type,f.pendingProps,le.current),ra=f,Pl=!0,M=_s,Qd(f.type)?($E=M,_s=Rc(b.firstChild)):_s=M),pi(A,f,f.pendingProps.children,g),Bv(A,f),A===null&&(f.flags|=4194304),f.child;case 5:return A===null&&En&&((M=b=_s)&&(b=cq(b,f.type,f.pendingProps,Pl),b!==null?(f.stateNode=b,ra=f,_s=Rc(b.firstChild),Pl=!1,M=!0):M=!1),M||CA(f)),de(f),M=f.type,z=f.pendingProps,ue=A!==null?A.memoizedProps:null,b=z.children,zE(M,z)?b=null:ue!==null&&zE(M,ue)&&(f.flags|=32),f.memoizedState!==null&&(M=rl(A,f,bu,null,null,g),wg._currentValue=M),Bv(A,f),pi(A,f,b,g),f.child;case 6:return A===null&&En&&((A=g=_s)&&(g=uq(g,f.pendingProps,Pl),g!==null?(f.stateNode=g,ra=f,_s=null,A=!0):A=!1),A||CA(f)),null;case 13:return Lk(A,f,g);case 4:return pe(f,f.stateNode.containerInfo),b=f.pendingProps,A===null?f.child=O0(f,null,b,g):pi(A,f,b,g),f.child;case 11:return Tk(A,f,f.type,f.pendingProps,g);case 7:return pi(A,f,f.pendingProps,g),f.child;case 8:return pi(A,f,f.pendingProps.children,g),f.child;case 12:return pi(A,f,f.pendingProps.children,g),f.child;case 10:return b=f.pendingProps,vu(f,f.type,b.value),pi(A,f,b.children,g),f.child;case 9:return M=f.type._context,b=f.pendingProps.children,Ql(f),M=na(M),b=b(M),f.flags|=1,pi(A,f,b,g),f.child;case 14:return Nk(A,f,f.type,f.pendingProps,g);case 15:return Bk(A,f,f.type,f.pendingProps,g);case 19:return Mk(A,f,g);case 31:return b=f.pendingProps,g=f.mode,b={mode:b.mode,children:b.children},A===null?(g=kv(b,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=Ml(A.child,b),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return kk(A,f,g);case 24:return Ql(f),b=na(sa),A===null?(M=X(),M===null&&(M=ds,z=zm(),M.pooledCache=z,z.refCount++,z!==null&&(M.pooledCacheLanes|=g),M=z),f.memoizedState={parent:b,cache:M},Pe(f),vu(f,sa,M)):((A.lanes&g)!==0&&(Qe(A,f),zt(f,null,null,g),sr()),M=A.memoizedState,z=f.memoizedState,M.parent!==b?(M={parent:b,cache:b},f.memoizedState=M,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=M),vu(f,sa,b)):(b=z.cache,vu(f,sa,b),b!==M.cache&&B0(f,[sa],g,!0))),pi(A,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function IA(A){A.flags|=4}function Ok(A,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!KI(f)){if(f=Vl.current,f!==null&&((bn&4194048)===bn?_u!==null:(bn&62914560)!==bn&&(bn&536870912)===0||f!==_u))throw Ye=Ce,xe;A.flags|=8192}}function Iv(A,f){f!==null&&(A.flags|=4),A.flags&16384&&(f=A.tag!==22?on():536870912,A.lanes|=f,V0|=f)}function ig(A,f){if(!En)switch(A.tailMode){case"hidden":f=A.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?A.tail=null:g.sibling=null;break;case"collapsed":g=A.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?f||A.tail===null?A.tail=null:A.tail.sibling=null:b.sibling=null}}function Rs(A){var f=A.alternate!==null&&A.alternate.child===A.child,g=0,b=0;if(f)for(var M=A.child;M!==null;)g|=M.lanes|M.childLanes,b|=M.subtreeFlags&65011712,b|=M.flags&65011712,M.return=A,M=M.sibling;else for(M=A.child;M!==null;)g|=M.lanes|M.childLanes,b|=M.subtreeFlags,b|=M.flags,M.return=A,M=M.sibling;return A.subtreeFlags|=b,A.childLanes=g,f}function UG(A,f,g){var b=f.pendingProps;switch(sh(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rs(f),null;case 1:return Rs(f),null;case 3:return g=f.stateNode,b=null,A!==null&&(b=A.memoizedState.cache),f.memoizedState.cache!==b&&(f.flags|=2048),jl(sa),he(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(A===null||A.child===null)&&(fi(f)?IA(f):A===null||A.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,lv())),Rs(f),null;case 26:return g=f.memoizedState,A===null?(IA(f),g!==null?(Rs(f),Ok(f,g)):(Rs(f),f.flags&=-16777217)):g?g!==A.memoizedState?(IA(f),Rs(f),Ok(f,g)):(Rs(f),f.flags&=-16777217):(A.memoizedProps!==b&&IA(f),Rs(f),f.flags&=-16777217),null;case 27:ce(f),g=le.current;var M=f.type;if(A!==null&&f.stateNode!=null)A.memoizedProps!==b&&IA(f);else{if(!b){if(f.stateNode===null)throw Error(n(166));return Rs(f),null}A=Z.current,fi(f)?ov(f):(A=OI(M,b,g),f.stateNode=A,IA(f))}return Rs(f),null;case 5:if(ce(f),g=f.type,A!==null&&f.stateNode!=null)A.memoizedProps!==b&&IA(f);else{if(!b){if(f.stateNode===null)throw Error(n(166));return Rs(f),null}if(A=Z.current,fi(f))ov(f);else{switch(M=zv(le.current),A){case 1:A=M.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:A=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":A=M.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":A=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":A=M.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof b.is=="string"?M.createElement("select",{is:b.is}):M.createElement("select"),b.multiple?A.multiple=!0:b.size&&(A.size=b.size);break;default:A=typeof b.is=="string"?M.createElement(g,{is:b.is}):M.createElement(g)}}A[gn]=f,A[ln]=b;e:for(M=f.child;M!==null;){if(M.tag===5||M.tag===6)A.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===f)break e;for(;M.sibling===null;){if(M.return===null||M.return===f)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}f.stateNode=A;e:switch(gi(A,g,b),g){case"button":case"input":case"select":case"textarea":A=!!b.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&IA(f)}}return Rs(f),f.flags&=-16777217,null;case 6:if(A&&f.stateNode!=null)A.memoizedProps!==b&&IA(f);else{if(typeof b!="string"&&f.stateNode===null)throw Error(n(166));if(A=le.current,fi(f)){if(A=f.stateNode,g=f.memoizedProps,b=null,M=ra,M!==null)switch(M.tag){case 27:case 5:b=M.memoizedProps}A[gn]=f,A=!!(A.nodeValue===g||b!==null&&b.suppressHydrationWarning===!0||FI(A.nodeValue,g)),A||CA(f)}else A=zv(A).createTextNode(b),A[gn]=f,f.stateNode=A}return Rs(f),null;case 13:if(b=f.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(M=fi(f),b!==null&&b.dehydrated!==null){if(A===null){if(!M)throw Error(n(318));if(M=f.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[gn]=f}else Ao(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Rs(f),M=!1}else M=lv(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=M),M=!0;if(!M)return f.flags&256?(BA(f),f):(BA(f),null)}if(BA(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=b!==null,A=A!==null&&A.memoizedState!==null,g){b=f.child,M=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(M=b.alternate.memoizedState.cachePool.pool);var z=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(z=b.memoizedState.cachePool.pool),z!==M&&(b.flags|=2048)}return g!==A&&g&&(f.child.flags|=8192),Iv(f,f.updateQueue),Rs(f),null;case 4:return he(),A===null&&OE(f.stateNode.containerInfo),Rs(f),null;case 10:return jl(f.type),Rs(f),null;case 19:if(O(Ha),M=f.memoizedState,M===null)return Rs(f),null;if(b=(f.flags&128)!==0,z=M.rendering,z===null)if(b)ig(M,!1);else{if(qs!==0||A!==null&&(A.flags&128)!==0)for(A=f.child;A!==null;){if(z=Sv(A),z!==null){for(f.flags|=128,ig(M,!1),A=z.updateQueue,f.updateQueue=A,Iv(f,A),f.subtreeFlags=0,A=g,g=f.child;g!==null;)th(g,A),g=g.sibling;return W(Ha,Ha.current&1|2),f.child}A=A.sibling}M.tail!==null&&De()>Rv&&(f.flags|=128,b=!0,ig(M,!1),f.lanes=4194304)}else{if(!b)if(A=Sv(z),A!==null){if(f.flags|=128,b=!0,A=A.updateQueue,f.updateQueue=A,Iv(f,A),ig(M,!0),M.tail===null&&M.tailMode==="hidden"&&!z.alternate&&!En)return Rs(f),null}else 2*De()-M.renderingStartTime>Rv&&g!==536870912&&(f.flags|=128,b=!0,ig(M,!1),f.lanes=4194304);M.isBackwards?(z.sibling=f.child,f.child=z):(A=M.last,A!==null?A.sibling=z:f.child=z,M.last=z)}return M.tail!==null?(f=M.tail,M.rendering=f,M.tail=f.sibling,M.renderingStartTime=De(),f.sibling=null,A=Ha.current,W(Ha,b?A&1|2:A&1),f):(Rs(f),null);case 22:case 23:return BA(f),Rr(),b=f.memoizedState!==null,A!==null?A.memoizedState!==null!==b&&(f.flags|=8192):b&&(f.flags|=8192),b?(g&536870912)!==0&&(f.flags&128)===0&&(Rs(f),f.subtreeFlags&6&&(f.flags|=8192)):Rs(f),g=f.updateQueue,g!==null&&Iv(f,g.retryQueue),g=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(g=A.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048),A!==null&&O(P),null;case 24:return g=null,A!==null&&(g=A.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),jl(sa),Rs(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function MG(A,f){switch(sh(f),f.tag){case 1:return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 3:return jl(sa),he(),A=f.flags,(A&65536)!==0&&(A&128)===0?(f.flags=A&-65537|128,f):null;case 26:case 27:case 5:return ce(f),null;case 13:if(BA(f),A=f.memoizedState,A!==null&&A.dehydrated!==null){if(f.alternate===null)throw Error(n(340));Ao()}return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 19:return O(Ha),null;case 4:return he(),null;case 10:return jl(f.type),null;case 22:case 23:return BA(f),Rr(),A!==null&&O(P),A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 24:return jl(sa),null;case 25:return null;default:return null}}function jk(A,f){switch(sh(f),f.tag){case 3:jl(sa),he();break;case 26:case 27:case 5:ce(f);break;case 4:he();break;case 13:BA(f);break;case 19:O(Ha);break;case 10:jl(f.type);break;case 22:case 23:BA(f),Rr(),A!==null&&O(P);break;case 24:jl(sa)}}function og(A,f){try{var g=f.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var M=b.next;g=M;do{if((g.tag&A)===A){b=void 0;var z=g.create,ue=g.inst;b=z(),ue.destroy=b}g=g.next}while(g!==M)}}catch(be){cs(f,f.return,be)}}function Dd(A,f,g){try{var b=f.updateQueue,M=b!==null?b.lastEffect:null;if(M!==null){var z=M.next;b=z;do{if((b.tag&A)===A){var ue=b.inst,be=ue.destroy;if(be!==void 0){ue.destroy=void 0,M=f;var Le=g,rt=be;try{rt()}catch(ft){cs(M,Le,ft)}}}b=b.next}while(b!==z)}}catch(ft){cs(f,f.return,ft)}}function Qk(A){var f=A.updateQueue;if(f!==null){var g=A.stateNode;try{Bn(f,g)}catch(b){cs(A,A.return,b)}}}function Hk(A,f,g){g.props=gh(A.type,A.memoizedProps),g.state=A.memoizedState;try{g.componentWillUnmount()}catch(b){cs(A,f,b)}}function lg(A,f){try{var g=A.ref;if(g!==null){switch(A.tag){case 26:case 27:case 5:var b=A.stateNode;break;case 30:b=A.stateNode;break;default:b=A.stateNode}typeof g=="function"?A.refCleanup=g(b):g.current=b}}catch(M){cs(A,f,M)}}function Su(A,f){var g=A.ref,b=A.refCleanup;if(g!==null)if(typeof b=="function")try{b()}catch(M){cs(A,f,M)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(M){cs(A,f,M)}else g.current=null}function Vk(A){var f=A.type,g=A.memoizedProps,b=A.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&b.focus();break e;case"img":g.src?b.src=g.src:g.srcSet&&(b.srcset=g.srcSet)}}catch(M){cs(A,A.return,M)}}function pE(A,f,g){try{var b=A.stateNode;sq(b,A.type,g,f),b[ln]=f}catch(M){cs(A,A.return,M)}}function zk(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&Qd(A.type)||A.tag===4}function mE(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||zk(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&Qd(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function gE(A,f,g){var b=A.tag;if(b===5||b===6)A=A.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(A,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(A),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=Vv));else if(b!==4&&(b===27&&Qd(A.type)&&(g=A.stateNode,f=null),A=A.child,A!==null))for(gE(A,f,g),A=A.sibling;A!==null;)gE(A,f,g),A=A.sibling}function Fv(A,f,g){var b=A.tag;if(b===5||b===6)A=A.stateNode,f?g.insertBefore(A,f):g.appendChild(A);else if(b!==4&&(b===27&&Qd(A.type)&&(g=A.stateNode),A=A.child,A!==null))for(Fv(A,f,g),A=A.sibling;A!==null;)Fv(A,f,g),A=A.sibling}function Gk(A){var f=A.stateNode,g=A.memoizedProps;try{for(var b=A.type,M=f.attributes;M.length;)f.removeAttributeNode(M[0]);gi(f,b,g),f[gn]=A,f[ln]=g}catch(z){cs(A,A.return,z)}}var FA=!1,ia=!1,xE=!1,qk=typeof WeakSet=="function"?WeakSet:Set,Za=null;function PG(A,f){if(A=A.containerInfo,HE=Yv,A=di(A),Qa(A)){if("selectionStart"in A)var g={start:A.selectionStart,end:A.selectionEnd};else e:{g=(g=A.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var M=b.anchorOffset,z=b.focusNode;b=b.focusOffset;try{g.nodeType,z.nodeType}catch{g=null;break e}var ue=0,be=-1,Le=-1,rt=0,ft=0,bt=A,st=null;t:for(;;){for(var at;bt!==g||M!==0&&bt.nodeType!==3||(be=ue+M),bt!==z||b!==0&&bt.nodeType!==3||(Le=ue+b),bt.nodeType===3&&(ue+=bt.nodeValue.length),(at=bt.firstChild)!==null;)st=bt,bt=at;for(;;){if(bt===A)break t;if(st===g&&++rt===M&&(be=ue),st===z&&++ft===b&&(Le=ue),(at=bt.nextSibling)!==null)break;bt=st,st=bt.parentNode}bt=at}g=be===-1||Le===-1?null:{start:be,end:Le}}else g=null}g=g||{start:0,end:0}}else g=null;for(VE={focusedElem:A,selectionRange:g},Yv=!1,Za=f;Za!==null;)if(f=Za,A=f.child,(f.subtreeFlags&1024)!==0&&A!==null)A.return=f,Za=A;else for(;Za!==null;){switch(f=Za,z=f.alternate,A=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&z!==null){A=void 0,g=f,M=z.memoizedProps,z=z.memoizedState,b=g.stateNode;try{var Ir=gh(g.type,M,g.elementType===g.type);A=b.getSnapshotBeforeUpdate(Ir,z),b.__reactInternalSnapshotBeforeUpdate=A}catch(yr){cs(g,g.return,yr)}}break;case 3:if((A&1024)!==0){if(A=f.stateNode.containerInfo,g=A.nodeType,g===9)qE(A);else if(g===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":qE(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=f.sibling,A!==null){A.return=f.return,Za=A;break}Za=f.return}}function Kk(A,f,g){var b=g.flags;switch(g.tag){case 0:case 11:case 15:Rd(A,g),b&4&&og(5,g);break;case 1:if(Rd(A,g),b&4)if(A=g.stateNode,f===null)try{A.componentDidMount()}catch(ue){cs(g,g.return,ue)}else{var M=gh(g.type,f.memoizedProps);f=f.memoizedState;try{A.componentDidUpdate(M,f,A.__reactInternalSnapshotBeforeUpdate)}catch(ue){cs(g,g.return,ue)}}b&64&&Qk(g),b&512&&lg(g,g.return);break;case 3:if(Rd(A,g),b&64&&(A=g.updateQueue,A!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{Bn(A,f)}catch(ue){cs(g,g.return,ue)}}break;case 27:f===null&&b&4&&Gk(g);case 26:case 5:Rd(A,g),f===null&&b&4&&Vk(g),b&512&&lg(g,g.return);break;case 12:Rd(A,g);break;case 13:Rd(A,g),b&4&&Yk(A,g),b&64&&(A=g.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(g=KG.bind(null,g),Aq(A,g))));break;case 22:if(b=g.memoizedState!==null||FA,!b){f=f!==null&&f.memoizedState!==null||ia,M=FA;var z=ia;FA=b,(ia=f)&&!z?Ld(A,g,(g.subtreeFlags&8772)!==0):Rd(A,g),FA=M,ia=z}break;case 30:break;default:Rd(A,g)}}function $k(A){var f=A.alternate;f!==null&&(A.alternate=null,$k(f)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(f=A.stateNode,f!==null&&Se(f)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Ss=null,Do=!1;function DA(A,f,g){for(g=g.child;g!==null;)Wk(A,f,g),g=g.sibling}function Wk(A,f,g){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Lt,g)}catch{}switch(g.tag){case 26:ia||Su(g,f),DA(A,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:ia||Su(g,f);var b=Ss,M=Do;Qd(g.type)&&(Ss=g.stateNode,Do=!1),DA(A,f,g),gg(g.stateNode),Ss=b,Do=M;break;case 5:ia||Su(g,f);case 6:if(b=Ss,M=Do,Ss=null,DA(A,f,g),Ss=b,Do=M,Ss!==null)if(Do)try{(Ss.nodeType===9?Ss.body:Ss.nodeName==="HTML"?Ss.ownerDocument.body:Ss).removeChild(g.stateNode)}catch(z){cs(g,f,z)}else try{Ss.removeChild(g.stateNode)}catch(z){cs(g,f,z)}break;case 18:Ss!==null&&(Do?(A=Ss,MI(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,g.stateNode),_g(A)):MI(Ss,g.stateNode));break;case 4:b=Ss,M=Do,Ss=g.stateNode.containerInfo,Do=!0,DA(A,f,g),Ss=b,Do=M;break;case 0:case 11:case 14:case 15:ia||Dd(2,g,f),ia||Dd(4,g,f),DA(A,f,g);break;case 1:ia||(Su(g,f),b=g.stateNode,typeof b.componentWillUnmount=="function"&&Hk(g,f,b)),DA(A,f,g);break;case 21:DA(A,f,g);break;case 22:ia=(b=ia)||g.memoizedState!==null,DA(A,f,g),ia=b;break;default:DA(A,f,g)}}function Yk(A,f){if(f.memoizedState===null&&(A=f.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{_g(A)}catch(g){cs(f,f.return,g)}}function OG(A){switch(A.tag){case 13:case 19:var f=A.stateNode;return f===null&&(f=A.stateNode=new qk),f;case 22:return A=A.stateNode,f=A._retryCache,f===null&&(f=A._retryCache=new qk),f;default:throw Error(n(435,A.tag))}}function vE(A,f){var g=OG(A);f.forEach(function(b){var M=$G.bind(null,A,b);g.has(b)||(g.add(b),b.then(M,M))})}function sl(A,f){var g=f.deletions;if(g!==null)for(var b=0;b<g.length;b++){var M=g[b],z=A,ue=f,be=ue;e:for(;be!==null;){switch(be.tag){case 27:if(Qd(be.type)){Ss=be.stateNode,Do=!1;break e}break;case 5:Ss=be.stateNode,Do=!1;break e;case 3:case 4:Ss=be.stateNode.containerInfo,Do=!0;break e}be=be.return}if(Ss===null)throw Error(n(160));Wk(z,ue,M),Ss=null,Do=!1,z=M.alternate,z!==null&&(z.return=null),M.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)Xk(f,A),f=f.sibling}var Dc=null;function Xk(A,f){var g=A.alternate,b=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:sl(f,A),al(A),b&4&&(Dd(3,A,A.return),og(3,A),Dd(5,A,A.return));break;case 1:sl(f,A),al(A),b&512&&(ia||g===null||Su(g,g.return)),b&64&&FA&&(A=A.updateQueue,A!==null&&(b=A.callbacks,b!==null&&(g=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=g===null?b:g.concat(b))));break;case 26:var M=Dc;if(sl(f,A),al(A),b&512&&(ia||g===null||Su(g,g.return)),b&4){var z=g!==null?g.memoizedState:null;if(b=A.memoizedState,g===null)if(b===null)if(A.stateNode===null){e:{b=A.type,g=A.memoizedProps,M=M.ownerDocument||M;t:switch(b){case"title":z=M.getElementsByTagName("title")[0],(!z||z[_e]||z[gn]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=M.createElement(b),M.head.insertBefore(z,M.querySelector("head > title"))),gi(z,b,g),z[gn]=A,Ve(z),b=z;break e;case"link":var ue=GI("link","href",M).get(b+(g.href||""));if(ue){for(var be=0;be<ue.length;be++)if(z=ue[be],z.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&z.getAttribute("rel")===(g.rel==null?null:g.rel)&&z.getAttribute("title")===(g.title==null?null:g.title)&&z.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){ue.splice(be,1);break t}}z=M.createElement(b),gi(z,b,g),M.head.appendChild(z);break;case"meta":if(ue=GI("meta","content",M).get(b+(g.content||""))){for(be=0;be<ue.length;be++)if(z=ue[be],z.getAttribute("content")===(g.content==null?null:""+g.content)&&z.getAttribute("name")===(g.name==null?null:g.name)&&z.getAttribute("property")===(g.property==null?null:g.property)&&z.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&z.getAttribute("charset")===(g.charSet==null?null:g.charSet)){ue.splice(be,1);break t}}z=M.createElement(b),gi(z,b,g),M.head.appendChild(z);break;default:throw Error(n(468,b))}z[gn]=A,Ve(z),b=z}A.stateNode=b}else qI(M,A.type,A.stateNode);else A.stateNode=zI(M,b,A.memoizedProps);else z!==b?(z===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):z.count--,b===null?qI(M,A.type,A.stateNode):zI(M,b,A.memoizedProps)):b===null&&A.stateNode!==null&&pE(A,A.memoizedProps,g.memoizedProps)}break;case 27:sl(f,A),al(A),b&512&&(ia||g===null||Su(g,g.return)),g!==null&&b&4&&pE(A,A.memoizedProps,g.memoizedProps);break;case 5:if(sl(f,A),al(A),b&512&&(ia||g===null||Su(g,g.return)),A.flags&32){M=A.stateNode;try{Bi(M,"")}catch(at){cs(A,A.return,at)}}b&4&&A.stateNode!=null&&(M=A.memoizedProps,pE(A,M,g!==null?g.memoizedProps:M)),b&1024&&(xE=!0);break;case 6:if(sl(f,A),al(A),b&4){if(A.stateNode===null)throw Error(n(162));b=A.memoizedProps,g=A.stateNode;try{g.nodeValue=b}catch(at){cs(A,A.return,at)}}break;case 3:if(Kv=null,M=Dc,Dc=Gv(f.containerInfo),sl(f,A),Dc=M,al(A),b&4&&g!==null&&g.memoizedState.isDehydrated)try{_g(f.containerInfo)}catch(at){cs(A,A.return,at)}xE&&(xE=!1,Jk(A));break;case 4:b=Dc,Dc=Gv(A.stateNode.containerInfo),sl(f,A),al(A),Dc=b;break;case 12:sl(f,A),al(A);break;case 13:sl(f,A),al(A),A.child.flags&8192&&A.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(_E=De()),b&4&&(b=A.updateQueue,b!==null&&(A.updateQueue=null,vE(A,b)));break;case 22:M=A.memoizedState!==null;var Le=g!==null&&g.memoizedState!==null,rt=FA,ft=ia;if(FA=rt||M,ia=ft||Le,sl(f,A),ia=ft,FA=rt,al(A),b&8192)e:for(f=A.stateNode,f._visibility=M?f._visibility&-2:f._visibility|1,M&&(g===null||Le||FA||ia||xh(A)),g=null,f=A;;){if(f.tag===5||f.tag===26){if(g===null){Le=g=f;try{if(z=Le.stateNode,M)ue=z.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{be=Le.stateNode;var bt=Le.memoizedProps.style,st=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;be.style.display=st==null||typeof st=="boolean"?"":(""+st).trim()}}catch(at){cs(Le,Le.return,at)}}}else if(f.tag===6){if(g===null){Le=f;try{Le.stateNode.nodeValue=M?"":Le.memoizedProps}catch(at){cs(Le,Le.return,at)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===A)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break e;for(;f.sibling===null;){if(f.return===null||f.return===A)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}b&4&&(b=A.updateQueue,b!==null&&(g=b.retryQueue,g!==null&&(b.retryQueue=null,vE(A,g))));break;case 19:sl(f,A),al(A),b&4&&(b=A.updateQueue,b!==null&&(A.updateQueue=null,vE(A,b)));break;case 30:break;case 21:break;default:sl(f,A),al(A)}}function al(A){var f=A.flags;if(f&2){try{for(var g,b=A.return;b!==null;){if(zk(b)){g=b;break}b=b.return}if(g==null)throw Error(n(160));switch(g.tag){case 27:var M=g.stateNode,z=mE(A);Fv(A,z,M);break;case 5:var ue=g.stateNode;g.flags&32&&(Bi(ue,""),g.flags&=-33);var be=mE(A);Fv(A,be,ue);break;case 3:case 4:var Le=g.stateNode.containerInfo,rt=mE(A);gE(A,rt,Le);break;default:throw Error(n(161))}}catch(ft){cs(A,A.return,ft)}A.flags&=-3}f&4096&&(A.flags&=-4097)}function Jk(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var f=A;Jk(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),A=A.sibling}}function Rd(A,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)Kk(A,f.alternate,f),f=f.sibling}function xh(A){for(A=A.child;A!==null;){var f=A;switch(f.tag){case 0:case 11:case 14:case 15:Dd(4,f,f.return),xh(f);break;case 1:Su(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&Hk(f,f.return,g),xh(f);break;case 27:gg(f.stateNode);case 26:case 5:Su(f,f.return),xh(f);break;case 22:f.memoizedState===null&&xh(f);break;case 30:xh(f);break;default:xh(f)}A=A.sibling}}function Ld(A,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var b=f.alternate,M=A,z=f,ue=z.flags;switch(z.tag){case 0:case 11:case 15:Ld(M,z,g),og(4,z);break;case 1:if(Ld(M,z,g),b=z,M=b.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(rt){cs(b,b.return,rt)}if(b=z,M=b.updateQueue,M!==null){var be=b.stateNode;try{var Le=M.shared.hiddenCallbacks;if(Le!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Le.length;M++)yn(Le[M],be)}catch(rt){cs(b,b.return,rt)}}g&&ue&64&&Qk(z),lg(z,z.return);break;case 27:Gk(z);case 26:case 5:Ld(M,z,g),g&&b===null&&ue&4&&Vk(z),lg(z,z.return);break;case 12:Ld(M,z,g);break;case 13:Ld(M,z,g),g&&ue&4&&Yk(M,z);break;case 22:z.memoizedState===null&&Ld(M,z,g),lg(z,z.return);break;case 30:break;default:Ld(M,z,g)}f=f.sibling}}function yE(A,f){var g=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(g=A.memoizedState.cachePool.pool),A=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(A=f.memoizedState.cachePool.pool),A!==g&&(A!=null&&A.refCount++,g!=null&&ah(g))}function wE(A,f){A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&ah(A))}function Tu(A,f,g,b){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Zk(A,f,g,b),f=f.sibling}function Zk(A,f,g,b){var M=f.flags;switch(f.tag){case 0:case 11:case 15:Tu(A,f,g,b),M&2048&&og(9,f);break;case 1:Tu(A,f,g,b);break;case 3:Tu(A,f,g,b),M&2048&&(A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&ah(A)));break;case 12:if(M&2048){Tu(A,f,g,b),A=f.stateNode;try{var z=f.memoizedProps,ue=z.id,be=z.onPostCommit;typeof be=="function"&&be(ue,f.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Le){cs(f,f.return,Le)}}else Tu(A,f,g,b);break;case 13:Tu(A,f,g,b);break;case 23:break;case 22:z=f.stateNode,ue=f.alternate,f.memoizedState!==null?z._visibility&2?Tu(A,f,g,b):cg(A,f):z._visibility&2?Tu(A,f,g,b):(z._visibility|=2,j0(A,f,g,b,(f.subtreeFlags&10256)!==0)),M&2048&&yE(ue,f);break;case 24:Tu(A,f,g,b),M&2048&&wE(f.alternate,f);break;default:Tu(A,f,g,b)}}function j0(A,f,g,b,M){for(M=M&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var z=A,ue=f,be=g,Le=b,rt=ue.flags;switch(ue.tag){case 0:case 11:case 15:j0(z,ue,be,Le,M),og(8,ue);break;case 23:break;case 22:var ft=ue.stateNode;ue.memoizedState!==null?ft._visibility&2?j0(z,ue,be,Le,M):cg(z,ue):(ft._visibility|=2,j0(z,ue,be,Le,M)),M&&rt&2048&&yE(ue.alternate,ue);break;case 24:j0(z,ue,be,Le,M),M&&rt&2048&&wE(ue.alternate,ue);break;default:j0(z,ue,be,Le,M)}f=f.sibling}}function cg(A,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=A,b=f,M=b.flags;switch(b.tag){case 22:cg(g,b),M&2048&&yE(b.alternate,b);break;case 24:cg(g,b),M&2048&&wE(b.alternate,b);break;default:cg(g,b)}f=f.sibling}}var ug=8192;function Q0(A){if(A.subtreeFlags&ug)for(A=A.child;A!==null;)eI(A),A=A.sibling}function eI(A){switch(A.tag){case 26:Q0(A),A.flags&ug&&A.memoizedState!==null&&Eq(Dc,A.memoizedState,A.memoizedProps);break;case 5:Q0(A);break;case 3:case 4:var f=Dc;Dc=Gv(A.stateNode.containerInfo),Q0(A),Dc=f;break;case 22:A.memoizedState===null&&(f=A.alternate,f!==null&&f.memoizedState!==null?(f=ug,ug=16777216,Q0(A),ug=f):Q0(A));break;default:Q0(A)}}function tI(A){var f=A.alternate;if(f!==null&&(A=f.child,A!==null)){f.child=null;do f=A.sibling,A.sibling=null,A=f;while(A!==null)}}function Ag(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var b=f[g];Za=b,nI(b,A)}tI(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)rI(A),A=A.sibling}function rI(A){switch(A.tag){case 0:case 11:case 15:Ag(A),A.flags&2048&&Dd(9,A,A.return);break;case 3:Ag(A);break;case 12:Ag(A);break;case 22:var f=A.stateNode;A.memoizedState!==null&&f._visibility&2&&(A.return===null||A.return.tag!==13)?(f._visibility&=-3,Dv(A)):Ag(A);break;default:Ag(A)}}function Dv(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var b=f[g];Za=b,nI(b,A)}tI(A)}for(A=A.child;A!==null;){switch(f=A,f.tag){case 0:case 11:case 15:Dd(8,f,f.return),Dv(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,Dv(f));break;default:Dv(f)}A=A.sibling}}function nI(A,f){for(;Za!==null;){var g=Za;switch(g.tag){case 0:case 11:case 15:Dd(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var b=g.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:ah(g.memoizedState.cache)}if(b=g.child,b!==null)b.return=g,Za=b;else e:for(g=A;Za!==null;){b=Za;var M=b.sibling,z=b.return;if($k(b),b===g){Za=null;break e}if(M!==null){M.return=z,Za=M;break e}Za=z}}}var jG={getCacheForType:function(A){var f=na(sa),g=f.data.get(A);return g===void 0&&(g=A(),f.data.set(A,g)),g}},QG=typeof WeakMap=="function"?WeakMap:Map,Kn=0,ds=null,cn=null,bn=0,$n=0,il=null,Ud=!1,H0=!1,bE=!1,RA=0,qs=0,Md=0,vh=0,CE=0,zl=0,V0=0,dg=null,Ro=null,EE=!1,_E=0,Rv=1/0,Lv=null,Pd=null,mi=0,Od=null,z0=null,G0=0,SE=0,TE=null,sI=null,fg=0,NE=null;function ol(){if((Kn&2)!==0&&bn!==0)return bn&-bn;if(Y.T!==null){var A=EA;return A!==0?A:LE()}return Bs()}function aI(){zl===0&&(zl=(bn&536870912)===0||En?ga():536870912);var A=Vl.current;return A!==null&&(A.flags|=32),zl}function ll(A,f,g){(A===ds&&($n===2||$n===9)||A.cancelPendingCommit!==null)&&(q0(A,0),jd(A,bn,zl,!1)),bs(A,g),((Kn&2)===0||A!==ds)&&(A===ds&&((Kn&2)===0&&(vh|=g),qs===4&&jd(A,bn,zl,!1)),Nu(A))}function iI(A,f,g){if((Kn&6)!==0)throw Error(n(327));var b=!g&&(f&124)===0&&(f&A.expiredLanes)===0||Rn(A,f),M=b?zG(A,f):IE(A,f,!0),z=b;do{if(M===0){H0&&!b&&jd(A,f,0,!1);break}else{if(g=A.current.alternate,z&&!HG(g)){M=IE(A,f,!1),z=!1;continue}if(M===2){if(z=f,A.errorRecoveryDisabledLanes&z)var ue=0;else ue=A.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){f=ue;e:{var be=A;M=dg;var Le=be.current.memoizedState.isDehydrated;if(Le&&(q0(be,ue).flags|=256),ue=IE(be,ue,!1),ue!==2){if(bE&&!Le){be.errorRecoveryDisabledLanes|=z,vh|=z,M=4;break e}z=Ro,Ro=M,z!==null&&(Ro===null?Ro=z:Ro.push.apply(Ro,z))}M=ue}if(z=!1,M!==2)continue}}if(M===1){q0(A,0),jd(A,f,0,!0);break}e:{switch(b=A,z=M,z){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:jd(b,f,zl,!Ud);break e;case 2:Ro=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(M=_E+300-De(),10<M)){if(jd(b,f,zl,!Ud),Or(b,0,!0)!==0)break e;b.timeoutHandle=LI(oI.bind(null,b,g,Ro,Lv,EE,f,zl,vh,V0,Ud,z,2,-0,0),M);break e}oI(b,g,Ro,Lv,EE,f,zl,vh,V0,Ud,z,0,-0,0)}}break}while(!0);Nu(A)}function oI(A,f,g,b,M,z,ue,be,Le,rt,ft,bt,st,at){if(A.timeoutHandle=-1,bt=f.subtreeFlags,(bt&8192||(bt&16785408)===16785408)&&(yg={stylesheets:null,count:0,unsuspend:Cq},eI(f),bt=_q(),bt!==null)){A.cancelPendingCommit=bt(hI.bind(null,A,f,z,g,b,M,ue,be,Le,ft,1,st,at)),jd(A,z,ue,!rt);return}hI(A,f,z,g,b,M,ue,be,Le)}function HG(A){for(var f=A;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var b=0;b<g.length;b++){var M=g[b],z=M.getSnapshot;M=M.value;try{if(!wa(z(),M))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function jd(A,f,g,b){f&=~CE,f&=~vh,A.suspendedLanes|=f,A.pingedLanes&=~f,b&&(A.warmLanes|=f),b=A.expirationTimes;for(var M=f;0<M;){var z=31-kt(M),ue=1<<z;b[z]=-1,M&=~ue}g!==0&&nr(A,g,f)}function Uv(){return(Kn&6)===0?(hg(0),!1):!0}function BE(){if(cn!==null){if($n===0)var A=cn.return;else A=cn,Tc=Ca=null,F0(A),P0=null,sg=0,A=cn;for(;A!==null;)jk(A.alternate,A),A=A.return;cn=null}}function q0(A,f){var g=A.timeoutHandle;g!==-1&&(A.timeoutHandle=-1,iq(g)),g=A.cancelPendingCommit,g!==null&&(A.cancelPendingCommit=null,g()),BE(),ds=A,cn=g=Ml(A.current,null),bn=f,$n=0,il=null,Ud=!1,H0=Rn(A,f),bE=!1,V0=zl=CE=vh=Md=qs=0,Ro=dg=null,EE=!1,(f&8)!==0&&(f|=f&32);var b=A.entangledLanes;if(b!==0)for(A=A.entanglements,b&=f;0<b;){var M=31-kt(b),z=1<<M;f|=A[M],b&=~z}return RA=f,Bo(),g}function lI(A,f){hr=null,Y.H=Cv,f===ge||f===ye?(f=Ge(),$n=3):f===xe?(f=Ge(),$n=4):$n=f===Sk?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,il=f,cn===null&&(qs=1,Nv(A,Xr(f,A.current)))}function cI(){var A=Y.H;return Y.H=Cv,A===null?Cv:A}function uI(){var A=Y.A;return Y.A=jG,A}function kE(){qs=4,Ud||(bn&4194048)!==bn&&Vl.current!==null||(H0=!0),(Md&134217727)===0&&(vh&134217727)===0||ds===null||jd(ds,bn,zl,!1)}function IE(A,f,g){var b=Kn;Kn|=2;var M=cI(),z=uI();(ds!==A||bn!==f)&&(Lv=null,q0(A,f)),f=!1;var ue=qs;e:do try{if($n!==0&&cn!==null){var be=cn,Le=il;switch($n){case 8:BE(),ue=6;break e;case 3:case 2:case 9:case 6:Vl.current===null&&(f=!0);var rt=$n;if($n=0,il=null,K0(A,be,Le,rt),g&&H0){ue=0;break e}break;default:rt=$n,$n=0,il=null,K0(A,be,Le,rt)}}VG(),ue=qs;break}catch(ft){lI(A,ft)}while(!0);return f&&A.shellSuspendCounter++,Tc=Ca=null,Kn=b,Y.H=M,Y.A=z,cn===null&&(ds=null,bn=0,Bo()),ue}function VG(){for(;cn!==null;)AI(cn)}function zG(A,f){var g=Kn;Kn|=2;var b=cI(),M=uI();ds!==A||bn!==f?(Lv=null,Rv=De()+500,q0(A,f)):H0=Rn(A,f);e:do try{if($n!==0&&cn!==null){f=cn;var z=il;t:switch($n){case 1:$n=0,il=null,K0(A,f,z,1);break;case 2:case 9:if(Ne(z)){$n=0,il=null,dI(f);break}f=function(){$n!==2&&$n!==9||ds!==A||($n=7),Nu(A)},z.then(f,f);break e;case 3:$n=7;break e;case 4:$n=5;break e;case 7:Ne(z)?($n=0,il=null,dI(f)):($n=0,il=null,K0(A,f,z,7));break;case 5:var ue=null;switch(cn.tag){case 26:ue=cn.memoizedState;case 5:case 27:var be=cn;if(!ue||KI(ue)){$n=0,il=null;var Le=be.sibling;if(Le!==null)cn=Le;else{var rt=be.return;rt!==null?(cn=rt,Mv(rt)):cn=null}break t}}$n=0,il=null,K0(A,f,z,5);break;case 6:$n=0,il=null,K0(A,f,z,6);break;case 8:BE(),qs=6;break e;default:throw Error(n(462))}}GG();break}catch(ft){lI(A,ft)}while(!0);return Tc=Ca=null,Y.H=b,Y.A=M,Kn=g,cn!==null?0:(ds=null,bn=0,Bo(),qs)}function GG(){for(;cn!==null&&!Ie();)AI(cn)}function AI(A){var f=Pk(A.alternate,A,RA);A.memoizedProps=A.pendingProps,f===null?Mv(A):cn=f}function dI(A){var f=A,g=f.alternate;switch(f.tag){case 15:case 0:f=Fk(g,f,f.pendingProps,f.type,void 0,bn);break;case 11:f=Fk(g,f,f.pendingProps,f.type.render,f.ref,bn);break;case 5:F0(f);default:jk(g,f),f=cn=th(f,RA),f=Pk(g,f,RA)}A.memoizedProps=A.pendingProps,f===null?Mv(A):cn=f}function K0(A,f,g,b){Tc=Ca=null,F0(f),P0=null,sg=0;var M=f.return;try{if(RG(A,M,f,g,bn)){qs=1,Nv(A,Xr(g,A.current)),cn=null;return}}catch(z){if(M!==null)throw cn=M,z;qs=1,Nv(A,Xr(g,A.current)),cn=null;return}f.flags&32768?(En||b===1?A=!0:H0||(bn&536870912)!==0?A=!1:(Ud=A=!0,(b===2||b===9||b===3||b===6)&&(b=Vl.current,b!==null&&b.tag===13&&(b.flags|=16384))),fI(f,A)):Mv(f)}function Mv(A){var f=A;do{if((f.flags&32768)!==0){fI(f,Ud);return}A=f.return;var g=UG(f.alternate,f,RA);if(g!==null){cn=g;return}if(f=f.sibling,f!==null){cn=f;return}cn=f=A}while(f!==null);qs===0&&(qs=5)}function fI(A,f){do{var g=MG(A.alternate,A);if(g!==null){g.flags&=32767,cn=g;return}if(g=A.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(A=A.sibling,A!==null)){cn=A;return}cn=A=g}while(A!==null);qs=6,cn=null}function hI(A,f,g,b,M,z,ue,be,Le){A.cancelPendingCommit=null;do Pv();while(mi!==0);if((Kn&6)!==0)throw Error(n(327));if(f!==null){if(f===A.current)throw Error(n(177));if(z=f.lanes|f.childLanes,z|=Is,Qr(A,g,z,ue,be,Le),A===ds&&(cn=ds=null,bn=0),z0=f,Od=A,G0=g,SE=z,TE=M,sI=b,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,WG(wt,function(){return vI(),null})):(A.callbackNode=null,A.callbackPriority=0),b=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||b){b=Y.T,Y.T=null,M=re.p,re.p=2,ue=Kn,Kn|=4;try{PG(A,f,g)}finally{Kn=ue,re.p=M,Y.T=b}}mi=1,pI(),mI(),gI()}}function pI(){if(mi===1){mi=0;var A=Od,f=z0,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=Y.T,Y.T=null;var b=re.p;re.p=2;var M=Kn;Kn|=4;try{Xk(f,A);var z=VE,ue=di(A.containerInfo),be=z.focusedElem,Le=z.selectionRange;if(ue!==be&&be&&be.ownerDocument&&cu(be.ownerDocument.documentElement,be)){if(Le!==null&&Qa(be)){var rt=Le.start,ft=Le.end;if(ft===void 0&&(ft=rt),"selectionStart"in be)be.selectionStart=rt,be.selectionEnd=Math.min(ft,be.value.length);else{var bt=be.ownerDocument||document,st=bt&&bt.defaultView||window;if(st.getSelection){var at=st.getSelection(),Ir=be.textContent.length,yr=Math.min(Le.start,Ir),as=Le.end===void 0?yr:Math.min(Le.end,Ir);!at.extend&&yr>as&&(ue=as,as=yr,yr=ue);var Ke=vc(be,yr),Oe=vc(be,as);if(Ke&&Oe&&(at.rangeCount!==1||at.anchorNode!==Ke.node||at.anchorOffset!==Ke.offset||at.focusNode!==Oe.node||at.focusOffset!==Oe.offset)){var Je=bt.createRange();Je.setStart(Ke.node,Ke.offset),at.removeAllRanges(),yr>as?(at.addRange(Je),at.extend(Oe.node,Oe.offset)):(Je.setEnd(Oe.node,Oe.offset),at.addRange(Je))}}}}for(bt=[],at=be;at=at.parentNode;)at.nodeType===1&&bt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<bt.length;be++){var gt=bt[be];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}Yv=!!HE,VE=HE=null}finally{Kn=M,re.p=b,Y.T=g}}A.current=f,mi=2}}function mI(){if(mi===2){mi=0;var A=Od,f=z0,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=Y.T,Y.T=null;var b=re.p;re.p=2;var M=Kn;Kn|=4;try{Kk(A,f.alternate,f)}finally{Kn=M,re.p=b,Y.T=g}}mi=3}}function gI(){if(mi===4||mi===3){mi=0,Ee();var A=Od,f=z0,g=G0,b=sI;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?mi=5:(mi=0,z0=Od=null,xI(A,A.pendingLanes));var M=A.pendingLanes;if(M===0&&(Pd=null),es(g),f=f.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Lt,f,void 0,(f.current.flags&128)===128)}catch{}if(b!==null){f=Y.T,M=re.p,re.p=2,Y.T=null;try{for(var z=A.onRecoverableError,ue=0;ue<b.length;ue++){var be=b[ue];z(be.value,{componentStack:be.stack})}}finally{Y.T=f,re.p=M}}(G0&3)!==0&&Pv(),Nu(A),M=A.pendingLanes,(g&4194090)!==0&&(M&42)!==0?A===NE?fg++:(fg=0,NE=A):fg=0,hg(0)}}function xI(A,f){(A.pooledCacheLanes&=f)===0&&(f=A.pooledCache,f!=null&&(A.pooledCache=null,ah(f)))}function Pv(A){return pI(),mI(),gI(),vI()}function vI(){if(mi!==5)return!1;var A=Od,f=SE;SE=0;var g=es(G0),b=Y.T,M=re.p;try{re.p=32>g?32:g,Y.T=null,g=TE,TE=null;var z=Od,ue=G0;if(mi=0,z0=Od=null,G0=0,(Kn&6)!==0)throw Error(n(331));var be=Kn;if(Kn|=4,rI(z.current),Zk(z,z.current,ue,g),Kn=be,hg(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Lt,z)}catch{}return!0}finally{re.p=M,Y.T=b,xI(A,f)}}function yI(A,f,g){f=Xr(g,f),f=iE(A.stateNode,f,2),A=vt(A,f,2),A!==null&&(bs(A,2),Nu(A))}function cs(A,f,g){if(A.tag===3)yI(A,A,g);else for(;f!==null;){if(f.tag===3){yI(f,A,g);break}else if(f.tag===1){var b=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Pd===null||!Pd.has(b))){A=Xr(g,A),g=Ek(2),b=vt(f,g,2),b!==null&&(_k(g,b,f,A),bs(b,2),Nu(b));break}}f=f.return}}function FE(A,f,g){var b=A.pingCache;if(b===null){b=A.pingCache=new QG;var M=new Set;b.set(f,M)}else M=b.get(f),M===void 0&&(M=new Set,b.set(f,M));M.has(g)||(bE=!0,M.add(g),A=qG.bind(null,A,f,g),f.then(A,A))}function qG(A,f,g){var b=A.pingCache;b!==null&&b.delete(f),A.pingedLanes|=A.suspendedLanes&g,A.warmLanes&=~g,ds===A&&(bn&g)===g&&(qs===4||qs===3&&(bn&62914560)===bn&&300>De()-_E?(Kn&2)===0&&q0(A,0):CE|=g,V0===bn&&(V0=0)),Nu(A)}function wI(A,f){f===0&&(f=on()),A=wc(A,f),A!==null&&(bs(A,f),Nu(A))}function KG(A){var f=A.memoizedState,g=0;f!==null&&(g=f.retryLane),wI(A,g)}function $G(A,f){var g=0;switch(A.tag){case 13:var b=A.stateNode,M=A.memoizedState;M!==null&&(g=M.retryLane);break;case 19:b=A.stateNode;break;case 22:b=A.stateNode._retryCache;break;default:throw Error(n(314))}b!==null&&b.delete(f),wI(A,g)}function WG(A,f){return Re(A,f)}var Ov=null,$0=null,DE=!1,jv=!1,RE=!1,yh=0;function Nu(A){A!==$0&&A.next===null&&($0===null?Ov=$0=A:$0=$0.next=A),jv=!0,DE||(DE=!0,XG())}function hg(A,f){if(!RE&&jv){RE=!0;do for(var g=!1,b=Ov;b!==null;){if(A!==0){var M=b.pendingLanes;if(M===0)var z=0;else{var ue=b.suspendedLanes,be=b.pingedLanes;z=(1<<31-kt(42|A)+1)-1,z&=M&~(ue&~be),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(g=!0,_I(b,z))}else z=bn,z=Or(b,b===ds?z:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(z&3)===0||Rn(b,z)||(g=!0,_I(b,z));b=b.next}while(g);RE=!1}}function YG(){bI()}function bI(){jv=DE=!1;var A=0;yh!==0&&(aq()&&(A=yh),yh=0);for(var f=De(),g=null,b=Ov;b!==null;){var M=b.next,z=CI(b,f);z===0?(b.next=null,g===null?Ov=M:g.next=M,M===null&&($0=g)):(g=b,(A!==0||(z&3)!==0)&&(jv=!0)),b=M}hg(A)}function CI(A,f){for(var g=A.suspendedLanes,b=A.pingedLanes,M=A.expirationTimes,z=A.pendingLanes&-62914561;0<z;){var ue=31-kt(z),be=1<<ue,Le=M[ue];Le===-1?((be&g)===0||(be&b)!==0)&&(M[ue]=Lr(be,f)):Le<=f&&(A.expiredLanes|=be),z&=~be}if(f=ds,g=bn,g=Or(A,A===f?g:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),b=A.callbackNode,g===0||A===f&&($n===2||$n===9)||A.cancelPendingCommit!==null)return b!==null&&b!==null&&qe(b),A.callbackNode=null,A.callbackPriority=0;if((g&3)===0||Rn(A,g)){if(f=g&-g,f===A.callbackPriority)return f;switch(b!==null&&qe(b),es(g)){case 2:case 8:g=ct;break;case 32:g=wt;break;case 268435456:g=Dt;break;default:g=wt}return b=EI.bind(null,A),g=Re(g,b),A.callbackPriority=f,A.callbackNode=g,f}return b!==null&&b!==null&&qe(b),A.callbackPriority=2,A.callbackNode=null,2}function EI(A,f){if(mi!==0&&mi!==5)return A.callbackNode=null,A.callbackPriority=0,null;var g=A.callbackNode;if(Pv()&&A.callbackNode!==g)return null;var b=bn;return b=Or(A,A===ds?b:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),b===0?null:(iI(A,b,f),CI(A,De()),A.callbackNode!=null&&A.callbackNode===g?EI.bind(null,A):null)}function _I(A,f){if(Pv())return null;iI(A,f,!0)}function XG(){oq(function(){(Kn&6)!==0?Re(We,YG):bI()})}function LE(){return yh===0&&(yh=ga()),yh}function SI(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:$o(""+A)}function TI(A,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,A.id&&g.setAttribute("form",A.id),f.parentNode.insertBefore(g,f),A=new FormData(A),g.parentNode.removeChild(g),A}function JG(A,f,g,b,M){if(f==="submit"&&g&&g.stateNode===M){var z=SI((M[ln]||null).action),ue=b.submitter;ue&&(f=(f=ue[ln]||null)?SI(f.formAction):ue.getAttribute("formAction"),f!==null&&(z=f,ue=null));var be=new Nl("action","action",null,b,M);A.push({event:be,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(yh!==0){var Le=ue?TI(M,ue):new FormData(M);Hl(g,{pending:!0,data:Le,method:M.method,action:z},null,Le)}}else typeof z=="function"&&(be.preventDefault(),Le=ue?TI(M,ue):new FormData(M),Hl(g,{pending:!0,data:Le,method:M.method,action:z},z,Le))},currentTarget:M}]})}}for(var UE=0;UE<xA.length;UE++){var ME=xA[UE],ZG=ME.toLowerCase(),eq=ME[0].toUpperCase()+ME.slice(1);Es(ZG,"on"+eq)}Es(yd,"onAnimationEnd"),Es(Au,"onAnimationIteration"),Es(du,"onAnimationStart"),Es("dblclick","onDoubleClick"),Es("focusin","onFocus"),Es("focusout","onBlur"),Es(fu,"onTransitionRun"),Es(gA,"onTransitionStart"),Es(wd,"onTransitionCancel"),Es(hu,"onTransitionEnd"),Bt("onMouseEnter",["mouseout","mouseover"]),Bt("onMouseLeave",["mouseout","mouseover"]),Bt("onPointerEnter",["pointerout","pointerover"]),Bt("onPointerLeave",["pointerout","pointerover"]),yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pg));function NI(A,f){f=(f&4)!==0;for(var g=0;g<A.length;g++){var b=A[g],M=b.event;b=b.listeners;e:{var z=void 0;if(f)for(var ue=b.length-1;0<=ue;ue--){var be=b[ue],Le=be.instance,rt=be.currentTarget;if(be=be.listener,Le!==z&&M.isPropagationStopped())break e;z=be,M.currentTarget=rt;try{z(M)}catch(ft){Tv(ft)}M.currentTarget=null,z=Le}else for(ue=0;ue<b.length;ue++){if(be=b[ue],Le=be.instance,rt=be.currentTarget,be=be.listener,Le!==z&&M.isPropagationStopped())break e;z=be,M.currentTarget=rt;try{z(M)}catch(ft){Tv(ft)}M.currentTarget=null,z=Le}}}}function un(A,f){var g=f[zn];g===void 0&&(g=f[zn]=new Set);var b=A+"__bubble";g.has(b)||(BI(f,A,2,!1),g.add(b))}function PE(A,f,g){var b=0;f&&(b|=4),BI(g,A,b,f)}var Qv="_reactListening"+Math.random().toString(36).slice(2);function OE(A){if(!A[Qv]){A[Qv]=!0,Xe.forEach(function(g){g!=="selectionchange"&&(tq.has(g)||PE(g,!1,A),PE(g,!0,A))});var f=A.nodeType===9?A:A.ownerDocument;f===null||f[Qv]||(f[Qv]=!0,PE("selectionchange",!1,f))}}function BI(A,f,g,b){switch(ZI(f)){case 2:var M=Nq;break;case 8:M=Bq;break;default:M=ZE}g=M.bind(null,f,g,A),M=void 0,!Ai||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(M=!0),b?M!==void 0?A.addEventListener(f,g,{capture:!0,passive:M}):A.addEventListener(f,g,!0):M!==void 0?A.addEventListener(f,g,{passive:M}):A.addEventListener(f,g,!1)}function jE(A,f,g,b,M){var z=b;if((f&1)===0&&(f&2)===0&&b!==null)e:for(;;){if(b===null)return;var ue=b.tag;if(ue===3||ue===4){var be=b.stateNode.containerInfo;if(be===M)break;if(ue===4)for(ue=b.return;ue!==null;){var Le=ue.tag;if((Le===3||Le===4)&&ue.stateNode.containerInfo===M)return;ue=ue.return}for(;be!==null;){if(ue=Te(be),ue===null)return;if(Le=ue.tag,Le===5||Le===6||Le===26||Le===27){b=z=ue;continue e}be=be.parentNode}}b=b.return}pd(function(){var rt=z,ft=Gn(g),bt=[];e:{var st=yc.get(A);if(st!==void 0){var at=Nl,Ir=A;switch(A){case"keypress":if(Fi(g)===0)break e;case"keydown":case"keyup":at=Jo;break;case"focusin":Ir="focus",at=kl;break;case"focusout":Ir="blur",at=kl;break;case"beforeblur":case"afterblur":at=kl;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=Bl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=au;break;case yd:case Au:case du:at=ru;break;case hu:at=fe;break;case"scroll":case"scrollend":at=AA;break;case"wheel":at=Ue;break;case"copy":case"cut":case"paste":at=nu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=xc;break;case"toggle":case"beforetoggle":at=lt}var yr=(f&4)!==0,as=!yr&&(A==="scroll"||A==="scrollend"),Ke=yr?st!==null?st+"Capture":null:st;yr=[];for(var Oe=rt,Je;Oe!==null;){var gt=Oe;if(Je=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||Je===null||Ke===null||(gt=Ka(Oe,Ke),gt!=null&&yr.push(mg(Oe,gt,Je))),as)break;Oe=Oe.return}0<yr.length&&(st=new at(st,Ir,null,g,ft),bt.push({event:st,listeners:yr}))}}if((f&7)===0){e:{if(st=A==="mouseover"||A==="pointerover",at=A==="mouseout"||A==="pointerout",st&&g!==wo&&(Ir=g.relatedTarget||g.fromElement)&&(Te(Ir)||Ir[Ln]))break e;if((at||st)&&(st=ft.window===ft?ft:(st=ft.ownerDocument)?st.defaultView||st.parentWindow:window,at?(Ir=g.relatedTarget||g.toElement,at=rt,Ir=Ir?Te(Ir):null,Ir!==null&&(as=a(Ir),yr=Ir.tag,Ir!==as||yr!==5&&yr!==27&&yr!==6)&&(Ir=null)):(at=null,Ir=rt),at!==Ir)){if(yr=Hs,gt="onMouseLeave",Ke="onMouseEnter",Oe="mouse",(A==="pointerout"||A==="pointerover")&&(yr=xc,gt="onPointerLeave",Ke="onPointerEnter",Oe="pointer"),as=at==null?st:$e(at),Je=Ir==null?st:$e(Ir),st=new yr(gt,Oe+"leave",at,g,ft),st.target=as,st.relatedTarget=Je,gt=null,Te(ft)===rt&&(yr=new yr(Ke,Oe+"enter",Ir,g,ft),yr.target=Je,yr.relatedTarget=as,gt=yr),as=gt,at&&Ir)t:{for(yr=at,Ke=Ir,Oe=0,Je=yr;Je;Je=W0(Je))Oe++;for(Je=0,gt=Ke;gt;gt=W0(gt))Je++;for(;0<Oe-Je;)yr=W0(yr),Oe--;for(;0<Je-Oe;)Ke=W0(Ke),Je--;for(;Oe--;){if(yr===Ke||Ke!==null&&yr===Ke.alternate)break t;yr=W0(yr),Ke=W0(Ke)}yr=null}else yr=null;at!==null&&kI(bt,st,at,yr,!1),Ir!==null&&as!==null&&kI(bt,as,Ir,yr,!0)}}e:{if(st=rt?$e(rt):window,at=st.nodeName&&st.nodeName.toLowerCase(),at==="select"||at==="input"&&st.type==="file")var tr=xd;else if(Pn(st))if(fA)tr=E0;else{tr=Hm;var rn=Ri}else at=st.nodeName,!at||at.toLowerCase()!=="input"||st.type!=="checkbox"&&st.type!=="radio"?rt&&cA(rt.elementType)&&(tr=xd):tr=Zf;if(tr&&(tr=tr(A,rt))){To(bt,tr,g,ft);break e}rn&&rn(A,st,rt),A==="focusout"&&rt&&st.type==="number"&&rt.memoizedProps.value!=null&&_l(st,"number",st.value)}switch(rn=rt?$e(rt):window,A){case"focusin":(Pn(rn)||rn.contentEditable==="true")&&(Li=rn,Zo=rt,Ll=null);break;case"focusout":Ll=Zo=Li=null;break;case"mousedown":el=!0;break;case"contextmenu":case"mouseup":case"dragend":el=!1,Cs(bt,g,ft);break;case"selectionchange":if(uu)break;case"keydown":case"keyup":Cs(bt,g,ft)}var ir;if(Vt)e:{switch(A){case"compositionstart":var br="onCompositionStart";break e;case"compositionend":br="onCompositionEnd";break e;case"compositionupdate":br="onCompositionUpdate";break e}br=void 0}else vr?tt(A,g)&&(br="onCompositionEnd"):A==="keydown"&&g.keyCode===229&&(br="onCompositionStart");br&&(ie&&g.locale!=="ko"&&(vr||br!=="onCompositionStart"?br==="onCompositionEnd"&&vr&&(ir=uA()):(Ii=ft,Tl="value"in Ii?Ii.value:Ii.textContent,vr=!0)),rn=Hv(rt,br),0<rn.length&&(br=new pc(br,A,null,g,ft),bt.push({event:br,listeners:rn}),ir?br.data=ir:(ir=St(g),ir!==null&&(br.data=ir)))),(ir=ee?tn(A,g):Dr(A,g))&&(br=Hv(rt,"onBeforeInput"),0<br.length&&(rn=new pc("onBeforeInput","beforeinput",null,g,ft),bt.push({event:rn,listeners:br}),rn.data=ir)),JG(bt,A,rt,g,ft)}NI(bt,f)})}function mg(A,f,g){return{instance:A,listener:f,currentTarget:g}}function Hv(A,f){for(var g=f+"Capture",b=[];A!==null;){var M=A,z=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||z===null||(M=Ka(A,g),M!=null&&b.unshift(mg(A,M,z)),M=Ka(A,f),M!=null&&b.push(mg(A,M,z))),A.tag===3)return b;A=A.return}return[]}function W0(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function kI(A,f,g,b,M){for(var z=f._reactName,ue=[];g!==null&&g!==b;){var be=g,Le=be.alternate,rt=be.stateNode;if(be=be.tag,Le!==null&&Le===b)break;be!==5&&be!==26&&be!==27||rt===null||(Le=rt,M?(rt=Ka(g,z),rt!=null&&ue.unshift(mg(g,rt,Le))):M||(rt=Ka(g,z),rt!=null&&ue.push(mg(g,rt,Le)))),g=g.return}ue.length!==0&&A.push({event:f,listeners:ue})}var rq=/\r\n?/g,nq=/\u0000|\uFFFD/g;function II(A){return(typeof A=="string"?A:""+A).replace(rq,`
`).replace(nq,"")}function FI(A,f){return f=II(f),II(A)===f}function Vv(){}function ss(A,f,g,b,M,z){switch(g){case"children":typeof b=="string"?f==="body"||f==="textarea"&&b===""||Bi(A,b):(typeof b=="number"||typeof b=="bigint")&&f!=="body"&&Bi(A,""+b);break;case"className":Vr(A,"class",b);break;case"tabIndex":Vr(A,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Vr(A,g,b);break;case"style":lA(A,b,z);break;case"data":if(f!=="object"){Vr(A,"data",b);break}case"src":case"href":if(b===""&&(f!=="a"||g!=="href")){A.removeAttribute(g);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){A.removeAttribute(g);break}b=$o(""+b),A.setAttribute(g,b);break;case"action":case"formAction":if(typeof b=="function"){A.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(g==="formAction"?(f!=="input"&&ss(A,f,"name",M.name,M,null),ss(A,f,"formEncType",M.formEncType,M,null),ss(A,f,"formMethod",M.formMethod,M,null),ss(A,f,"formTarget",M.formTarget,M,null)):(ss(A,f,"encType",M.encType,M,null),ss(A,f,"method",M.method,M,null),ss(A,f,"target",M.target,M,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){A.removeAttribute(g);break}b=$o(""+b),A.setAttribute(g,b);break;case"onClick":b!=null&&(A.onclick=Vv);break;case"onScroll":b!=null&&un("scroll",A);break;case"onScrollEnd":b!=null&&un("scrollend",A);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(g=b.__html,g!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=g}}break;case"multiple":A.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":A.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){A.removeAttribute("xlink:href");break}g=$o(""+b),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?A.setAttribute(g,""+b):A.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?A.setAttribute(g,""):A.removeAttribute(g);break;case"capture":case"download":b===!0?A.setAttribute(g,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?A.setAttribute(g,b):A.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?A.setAttribute(g,b):A.removeAttribute(g);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?A.removeAttribute(g):A.setAttribute(g,b);break;case"popover":un("beforetoggle",A),un("toggle",A),Hr(A,"popover",b);break;case"xlinkActuate":$r(A,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":$r(A,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":$r(A,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":$r(A,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":$r(A,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":$r(A,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":$r(A,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":$r(A,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":$r(A,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Hr(A,"is",b);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=Ko.get(g)||g,Hr(A,g,b))}}function QE(A,f,g,b,M,z){switch(g){case"style":lA(A,b,z);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(g=b.__html,g!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=g}}break;case"children":typeof b=="string"?Bi(A,b):(typeof b=="number"||typeof b=="bigint")&&Bi(A,""+b);break;case"onScroll":b!=null&&un("scroll",A);break;case"onScrollEnd":b!=null&&un("scrollend",A);break;case"onClick":b!=null&&(A.onclick=Vv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!et.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(M=g.endsWith("Capture"),f=g.slice(2,M?g.length-7:void 0),z=A[ln]||null,z=z!=null?z[g]:null,typeof z=="function"&&A.removeEventListener(f,z,M),typeof b=="function")){typeof z!="function"&&z!==null&&(g in A?A[g]=null:A.hasAttribute(g)&&A.removeAttribute(g)),A.addEventListener(f,b,M);break e}g in A?A[g]=b:b===!0?A.setAttribute(g,""):Hr(A,g,b)}}}function gi(A,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":un("error",A),un("load",A);var b=!1,M=!1,z;for(z in g)if(g.hasOwnProperty(z)){var ue=g[z];if(ue!=null)switch(z){case"src":b=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:ss(A,f,z,ue,g,null)}}M&&ss(A,f,"srcSet",g.srcSet,g,null),b&&ss(A,f,"src",g.src,g,null);return;case"input":un("invalid",A);var be=z=ue=M=null,Le=null,rt=null;for(b in g)if(g.hasOwnProperty(b)){var ft=g[b];if(ft!=null)switch(b){case"name":M=ft;break;case"type":ue=ft;break;case"checked":Le=ft;break;case"defaultChecked":rt=ft;break;case"value":z=ft;break;case"defaultValue":be=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,f));break;default:ss(A,f,b,ft,g,null)}}El(A,z,be,Le,rt,ue,M,!1),Cl(A);return;case"select":un("invalid",A),b=ue=z=null;for(M in g)if(g.hasOwnProperty(M)&&(be=g[M],be!=null))switch(M){case"value":z=be;break;case"defaultValue":ue=be;break;case"multiple":b=be;default:ss(A,f,M,be,g,null)}f=z,g=ue,A.multiple=!!b,f!=null?yo(A,!!b,f,!1):g!=null&&yo(A,!!b,g,!0);return;case"textarea":un("invalid",A),z=M=b=null;for(ue in g)if(g.hasOwnProperty(ue)&&(be=g[ue],be!=null))switch(ue){case"value":b=be;break;case"defaultValue":M=be;break;case"children":z=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(91));break;default:ss(A,f,ue,be,g,null)}Sl(A,b,M,z),Cl(A);return;case"option":for(Le in g)if(g.hasOwnProperty(Le)&&(b=g[Le],b!=null))switch(Le){case"selected":A.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:ss(A,f,Le,b,g,null)}return;case"dialog":un("beforetoggle",A),un("toggle",A),un("cancel",A),un("close",A);break;case"iframe":case"object":un("load",A);break;case"video":case"audio":for(b=0;b<pg.length;b++)un(pg[b],A);break;case"image":un("error",A),un("load",A);break;case"details":un("toggle",A);break;case"embed":case"source":case"link":un("error",A),un("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in g)if(g.hasOwnProperty(rt)&&(b=g[rt],b!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:ss(A,f,rt,b,g,null)}return;default:if(cA(f)){for(ft in g)g.hasOwnProperty(ft)&&(b=g[ft],b!==void 0&&QE(A,f,ft,b,g,void 0));return}}for(be in g)g.hasOwnProperty(be)&&(b=g[be],b!=null&&ss(A,f,be,b,g,null))}function sq(A,f,g,b){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,z=null,ue=null,be=null,Le=null,rt=null,ft=null;for(at in g){var bt=g[at];if(g.hasOwnProperty(at)&&bt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":Le=bt;default:b.hasOwnProperty(at)||ss(A,f,at,null,b,bt)}}for(var st in b){var at=b[st];if(bt=g[st],b.hasOwnProperty(st)&&(at!=null||bt!=null))switch(st){case"type":z=at;break;case"name":M=at;break;case"checked":rt=at;break;case"defaultChecked":ft=at;break;case"value":ue=at;break;case"defaultValue":be=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,f));break;default:at!==bt&&ss(A,f,st,at,b,bt)}}Oa(A,ue,be,Le,rt,ft,z,M);return;case"select":at=ue=be=st=null;for(z in g)if(Le=g[z],g.hasOwnProperty(z)&&Le!=null)switch(z){case"value":break;case"multiple":at=Le;default:b.hasOwnProperty(z)||ss(A,f,z,null,b,Le)}for(M in b)if(z=b[M],Le=g[M],b.hasOwnProperty(M)&&(z!=null||Le!=null))switch(M){case"value":st=z;break;case"defaultValue":be=z;break;case"multiple":ue=z;default:z!==Le&&ss(A,f,M,z,b,Le)}f=be,g=ue,b=at,st!=null?yo(A,!!g,st,!1):!!b!=!!g&&(f!=null?yo(A,!!g,f,!0):yo(A,!!g,g?[]:"",!1));return;case"textarea":at=st=null;for(be in g)if(M=g[be],g.hasOwnProperty(be)&&M!=null&&!b.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:ss(A,f,be,null,b,M)}for(ue in b)if(M=b[ue],z=g[ue],b.hasOwnProperty(ue)&&(M!=null||z!=null))switch(ue){case"value":st=M;break;case"defaultValue":at=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==z&&ss(A,f,ue,M,b,z)}Tn(A,st,at);return;case"option":for(var Ir in g)if(st=g[Ir],g.hasOwnProperty(Ir)&&st!=null&&!b.hasOwnProperty(Ir))switch(Ir){case"selected":A.selected=!1;break;default:ss(A,f,Ir,null,b,st)}for(Le in b)if(st=b[Le],at=g[Le],b.hasOwnProperty(Le)&&st!==at&&(st!=null||at!=null))switch(Le){case"selected":A.selected=st&&typeof st!="function"&&typeof st!="symbol";break;default:ss(A,f,Le,st,b,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yr in g)st=g[yr],g.hasOwnProperty(yr)&&st!=null&&!b.hasOwnProperty(yr)&&ss(A,f,yr,null,b,st);for(rt in b)if(st=b[rt],at=g[rt],b.hasOwnProperty(rt)&&st!==at&&(st!=null||at!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(n(137,f));break;default:ss(A,f,rt,st,b,at)}return;default:if(cA(f)){for(var as in g)st=g[as],g.hasOwnProperty(as)&&st!==void 0&&!b.hasOwnProperty(as)&&QE(A,f,as,void 0,b,st);for(ft in b)st=b[ft],at=g[ft],!b.hasOwnProperty(ft)||st===at||st===void 0&&at===void 0||QE(A,f,ft,st,b,at);return}}for(var Ke in g)st=g[Ke],g.hasOwnProperty(Ke)&&st!=null&&!b.hasOwnProperty(Ke)&&ss(A,f,Ke,null,b,st);for(bt in b)st=b[bt],at=g[bt],!b.hasOwnProperty(bt)||st===at||st==null&&at==null||ss(A,f,bt,st,b,at)}var HE=null,VE=null;function zv(A){return A.nodeType===9?A:A.ownerDocument}function DI(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function RI(A,f){if(A===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&f==="foreignObject"?0:A}function zE(A,f){return A==="textarea"||A==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var GE=null;function aq(){var A=window.event;return A&&A.type==="popstate"?A===GE?!1:(GE=A,!0):(GE=null,!1)}var LI=typeof setTimeout=="function"?setTimeout:void 0,iq=typeof clearTimeout=="function"?clearTimeout:void 0,UI=typeof Promise=="function"?Promise:void 0,oq=typeof queueMicrotask=="function"?queueMicrotask:typeof UI<"u"?function(A){return UI.resolve(null).then(A).catch(lq)}:LI;function lq(A){setTimeout(function(){throw A})}function Qd(A){return A==="head"}function MI(A,f){var g=f,b=0,M=0;do{var z=g.nextSibling;if(A.removeChild(g),z&&z.nodeType===8)if(g=z.data,g==="/$"){if(0<b&&8>b){g=b;var ue=A.ownerDocument;if(g&1&&gg(ue.documentElement),g&2&&gg(ue.body),g&4)for(g=ue.head,gg(g),ue=g.firstChild;ue;){var be=ue.nextSibling,Le=ue.nodeName;ue[_e]||Le==="SCRIPT"||Le==="STYLE"||Le==="LINK"&&ue.rel.toLowerCase()==="stylesheet"||g.removeChild(ue),ue=be}}if(M===0){A.removeChild(z),_g(f);return}M--}else g==="$"||g==="$?"||g==="$!"?M++:b=g.charCodeAt(0)-48;else b=0;g=z}while(g);_g(f)}function qE(A){var f=A.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":qE(g),Se(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}A.removeChild(g)}}function cq(A,f,g,b){for(;A.nodeType===1;){var M=g;if(A.nodeName.toLowerCase()!==f.toLowerCase()){if(!b&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(b){if(!A[_e])switch(f){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(z=A.getAttribute("rel"),z==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(z!==M.rel||A.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||A.getAttribute("title")!==(M.title==null?null:M.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(z=A.getAttribute("src"),(z!==(M.src==null?null:M.src)||A.getAttribute("type")!==(M.type==null?null:M.type)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&z&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(f==="input"&&A.type==="hidden"){var z=M.name==null?null:""+M.name;if(M.type==="hidden"&&A.getAttribute("name")===z)return A}else return A;if(A=Rc(A.nextSibling),A===null)break}return null}function uq(A,f,g){if(f==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!g||(A=Rc(A.nextSibling),A===null))return null;return A}function KE(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function Aq(A,f){var g=A.ownerDocument;if(A.data!=="$?"||g.readyState==="complete")f();else{var b=function(){f(),g.removeEventListener("DOMContentLoaded",b)};g.addEventListener("DOMContentLoaded",b),A._reactRetry=b}}function Rc(A){for(;A!=null;A=A.nextSibling){var f=A.nodeType;if(f===1||f===3)break;if(f===8){if(f=A.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return A}var $E=null;function PI(A){A=A.previousSibling;for(var f=0;A;){if(A.nodeType===8){var g=A.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return A;f--}else g==="/$"&&f++}A=A.previousSibling}return null}function OI(A,f,g){switch(f=zv(g),A){case"html":if(A=f.documentElement,!A)throw Error(n(452));return A;case"head":if(A=f.head,!A)throw Error(n(453));return A;case"body":if(A=f.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function gg(A){for(var f=A.attributes;f.length;)A.removeAttributeNode(f[0]);Se(A)}var Gl=new Map,jI=new Set;function Gv(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var LA=re.d;re.d={f:dq,r:fq,D:hq,C:pq,L:mq,m:gq,X:vq,S:xq,M:yq};function dq(){var A=LA.f(),f=Uv();return A||f}function fq(A){var f=ke(A);f!==null&&f.tag===5&&f.type==="form"?ph(f):LA.r(A)}var Y0=typeof document>"u"?null:document;function QI(A,f,g){var b=Y0;if(b&&typeof f=="string"&&f){var M=xn(f);M='link[rel="'+A+'"][href="'+M+'"]',typeof g=="string"&&(M+='[crossorigin="'+g+'"]'),jI.has(M)||(jI.add(M),A={rel:A,crossOrigin:g,href:f},b.querySelector(M)===null&&(f=b.createElement("link"),gi(f,"link",A),Ve(f),b.head.appendChild(f)))}}function hq(A){LA.D(A),QI("dns-prefetch",A,null)}function pq(A,f){LA.C(A,f),QI("preconnect",A,f)}function mq(A,f,g){LA.L(A,f,g);var b=Y0;if(b&&A&&f){var M='link[rel="preload"][as="'+xn(f)+'"]';f==="image"&&g&&g.imageSrcSet?(M+='[imagesrcset="'+xn(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(M+='[imagesizes="'+xn(g.imageSizes)+'"]')):M+='[href="'+xn(A)+'"]';var z=M;switch(f){case"style":z=X0(A);break;case"script":z=J0(A)}Gl.has(z)||(A=d({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:A,as:f},g),Gl.set(z,A),b.querySelector(M)!==null||f==="style"&&b.querySelector(xg(z))||f==="script"&&b.querySelector(vg(z))||(f=b.createElement("link"),gi(f,"link",A),Ve(f),b.head.appendChild(f)))}}function gq(A,f){LA.m(A,f);var g=Y0;if(g&&A){var b=f&&typeof f.as=="string"?f.as:"script",M='link[rel="modulepreload"][as="'+xn(b)+'"][href="'+xn(A)+'"]',z=M;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=J0(A)}if(!Gl.has(z)&&(A=d({rel:"modulepreload",href:A},f),Gl.set(z,A),g.querySelector(M)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(vg(z)))return}b=g.createElement("link"),gi(b,"link",A),Ve(b),g.head.appendChild(b)}}}function xq(A,f,g){LA.S(A,f,g);var b=Y0;if(b&&A){var M=nt(b).hoistableStyles,z=X0(A);f=f||"default";var ue=M.get(z);if(!ue){var be={loading:0,preload:null};if(ue=b.querySelector(xg(z)))be.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":f},g),(g=Gl.get(z))&&WE(A,g);var Le=ue=b.createElement("link");Ve(Le),gi(Le,"link",A),Le._p=new Promise(function(rt,ft){Le.onload=rt,Le.onerror=ft}),Le.addEventListener("load",function(){be.loading|=1}),Le.addEventListener("error",function(){be.loading|=2}),be.loading|=4,qv(ue,f,b)}ue={type:"stylesheet",instance:ue,count:1,state:be},M.set(z,ue)}}}function vq(A,f){LA.X(A,f);var g=Y0;if(g&&A){var b=nt(g).hoistableScripts,M=J0(A),z=b.get(M);z||(z=g.querySelector(vg(M)),z||(A=d({src:A,async:!0},f),(f=Gl.get(M))&&YE(A,f),z=g.createElement("script"),Ve(z),gi(z,"link",A),g.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},b.set(M,z))}}function yq(A,f){LA.M(A,f);var g=Y0;if(g&&A){var b=nt(g).hoistableScripts,M=J0(A),z=b.get(M);z||(z=g.querySelector(vg(M)),z||(A=d({src:A,async:!0,type:"module"},f),(f=Gl.get(M))&&YE(A,f),z=g.createElement("script"),Ve(z),gi(z,"link",A),g.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},b.set(M,z))}}function HI(A,f,g,b){var M=(M=le.current)?Gv(M):null;if(!M)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=X0(g.href),g=nt(M).hoistableStyles,b=g.get(f),b||(b={type:"style",instance:null,count:0,state:null},g.set(f,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){A=X0(g.href);var z=nt(M).hoistableStyles,ue=z.get(A);if(ue||(M=M.ownerDocument||M,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(A,ue),(z=M.querySelector(xg(A)))&&!z._p&&(ue.instance=z,ue.state.loading=5),Gl.has(A)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Gl.set(A,g),z||wq(M,A,g,ue.state))),f&&b===null)throw Error(n(528,""));return ue}if(f&&b!==null)throw Error(n(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=J0(g),g=nt(M).hoistableScripts,b=g.get(f),b||(b={type:"script",instance:null,count:0,state:null},g.set(f,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function X0(A){return'href="'+xn(A)+'"'}function xg(A){return'link[rel="stylesheet"]['+A+"]"}function VI(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function wq(A,f,g,b){A.querySelector('link[rel="preload"][as="style"]['+f+"]")?b.loading=1:(f=A.createElement("link"),b.preload=f,f.addEventListener("load",function(){return b.loading|=1}),f.addEventListener("error",function(){return b.loading|=2}),gi(f,"link",g),Ve(f),A.head.appendChild(f))}function J0(A){return'[src="'+xn(A)+'"]'}function vg(A){return"script[async]"+A}function zI(A,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var b=A.querySelector('style[data-href~="'+xn(g.href)+'"]');if(b)return f.instance=b,Ve(b),b;var M=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return b=(A.ownerDocument||A).createElement("style"),Ve(b),gi(b,"style",M),qv(b,g.precedence,A),f.instance=b;case"stylesheet":M=X0(g.href);var z=A.querySelector(xg(M));if(z)return f.state.loading|=4,f.instance=z,Ve(z),z;b=VI(g),(M=Gl.get(M))&&WE(b,M),z=(A.ownerDocument||A).createElement("link"),Ve(z);var ue=z;return ue._p=new Promise(function(be,Le){ue.onload=be,ue.onerror=Le}),gi(z,"link",b),f.state.loading|=4,qv(z,g.precedence,A),f.instance=z;case"script":return z=J0(g.src),(M=A.querySelector(vg(z)))?(f.instance=M,Ve(M),M):(b=g,(M=Gl.get(z))&&(b=d({},g),YE(b,M)),A=A.ownerDocument||A,M=A.createElement("script"),Ve(M),gi(M,"link",b),A.head.appendChild(M),f.instance=M);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(b=f.instance,f.state.loading|=4,qv(b,g.precedence,A));return f.instance}function qv(A,f,g){for(var b=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=b.length?b[b.length-1]:null,z=M,ue=0;ue<b.length;ue++){var be=b[ue];if(be.dataset.precedence===f)z=be;else if(z!==M)break}z?z.parentNode.insertBefore(A,z.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(A,f.firstChild))}function WE(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.title==null&&(A.title=f.title)}function YE(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.integrity==null&&(A.integrity=f.integrity)}var Kv=null;function GI(A,f,g){if(Kv===null){var b=new Map,M=Kv=new Map;M.set(g,b)}else M=Kv,b=M.get(g),b||(b=new Map,M.set(g,b));if(b.has(A))return b;for(b.set(A,null),g=g.getElementsByTagName(A),M=0;M<g.length;M++){var z=g[M];if(!(z[_e]||z[gn]||A==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=z.getAttribute(f)||"";ue=A+ue;var be=b.get(ue);be?be.push(z):b.set(ue,[z])}}return b}function qI(A,f,g){A=A.ownerDocument||A,A.head.insertBefore(g,f==="title"?A.querySelector("head > title"):null)}function bq(A,f,g){if(g===1||f.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return A=f.disabled,typeof f.precedence=="string"&&A==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function KI(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var yg=null;function Cq(){}function Eq(A,f,g){if(yg===null)throw Error(n(475));var b=yg;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var M=X0(g.href),z=A.querySelector(xg(M));if(z){A=z._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(b.count++,b=$v.bind(b),A.then(b,b)),f.state.loading|=4,f.instance=z,Ve(z);return}z=A.ownerDocument||A,g=VI(g),(M=Gl.get(M))&&WE(g,M),z=z.createElement("link"),Ve(z);var ue=z;ue._p=new Promise(function(be,Le){ue.onload=be,ue.onerror=Le}),gi(z,"link",g),f.instance=z}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(f,A),(A=f.state.preload)&&(f.state.loading&3)===0&&(b.count++,f=$v.bind(b),A.addEventListener("load",f),A.addEventListener("error",f))}}function _q(){if(yg===null)throw Error(n(475));var A=yg;return A.stylesheets&&A.count===0&&XE(A,A.stylesheets),0<A.count?function(f){var g=setTimeout(function(){if(A.stylesheets&&XE(A,A.stylesheets),A.unsuspend){var b=A.unsuspend;A.unsuspend=null,b()}},6e4);return A.unsuspend=f,function(){A.unsuspend=null,clearTimeout(g)}}:null}function $v(){if(this.count--,this.count===0){if(this.stylesheets)XE(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var Wv=null;function XE(A,f){A.stylesheets=null,A.unsuspend!==null&&(A.count++,Wv=new Map,f.forEach(Sq,A),Wv=null,$v.call(A))}function Sq(A,f){if(!(f.state.loading&4)){var g=Wv.get(A);if(g)var b=g.get(null);else{g=new Map,Wv.set(A,g);for(var M=A.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<M.length;z++){var ue=M[z];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(g.set(ue.dataset.precedence,ue),b=ue)}b&&g.set(null,b)}M=f.instance,ue=M.getAttribute("data-precedence"),z=g.get(ue)||b,z===b&&g.set(null,M),g.set(ue,M),this.count++,b=$v.bind(this),M.addEventListener("load",b),M.addEventListener("error",b),z?z.parentNode.insertBefore(M,z.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(M,A.firstChild)),f.state.loading|=4}}var wg={$$typeof:D,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function Tq(A,f,g,b,M,z,ue,be){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ls(0),this.hiddenUpdates=ls(null),this.identifierPrefix=b,this.onUncaughtError=M,this.onCaughtError=z,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function $I(A,f,g,b,M,z,ue,be,Le,rt,ft,bt){return A=new Tq(A,f,g,ue,be,Le,rt,bt),f=1,z===!0&&(f|=24),z=Xa(3,null,null,f),A.current=z,z.stateNode=A,f=zm(),f.refCount++,A.pooledCache=f,f.refCount++,z.memoizedState={element:b,isDehydrated:g,cache:f},Pe(z),A}function WI(A){return A?(A=ba,A):ba}function YI(A,f,g,b,M,z){M=WI(M),b.context===null?b.context=M:b.pendingContext=M,b=At(f),b.payload={element:g},z=z===void 0?null:z,z!==null&&(b.callback=z),g=vt(A,b,f),g!==null&&(ll(g,A,f),ht(g,A,f))}function XI(A,f){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var g=A.retryLane;A.retryLane=g!==0&&g<f?g:f}}function JE(A,f){XI(A,f),(A=A.alternate)&&XI(A,f)}function JI(A){if(A.tag===13){var f=wc(A,67108864);f!==null&&ll(f,A,67108864),JE(A,67108864)}}var Yv=!0;function Nq(A,f,g,b){var M=Y.T;Y.T=null;var z=re.p;try{re.p=2,ZE(A,f,g,b)}finally{re.p=z,Y.T=M}}function Bq(A,f,g,b){var M=Y.T;Y.T=null;var z=re.p;try{re.p=8,ZE(A,f,g,b)}finally{re.p=z,Y.T=M}}function ZE(A,f,g,b){if(Yv){var M=e_(b);if(M===null)jE(A,f,b,Xv,g),e3(A,b);else if(Iq(M,A,f,g,b))b.stopPropagation();else if(e3(A,b),f&4&&-1<kq.indexOf(A)){for(;M!==null;){var z=ke(M);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var ue=wr(z.pendingLanes);if(ue!==0){var be=z;for(be.pendingLanes|=2,be.entangledLanes|=2;ue;){var Le=1<<31-kt(ue);be.entanglements[1]|=Le,ue&=~Le}Nu(z),(Kn&6)===0&&(Rv=De()+500,hg(0))}}break;case 13:be=wc(z,2),be!==null&&ll(be,z,2),Uv(),JE(z,2)}if(z=e_(b),z===null&&jE(A,f,b,Xv,g),z===M)break;M=z}M!==null&&b.stopPropagation()}else jE(A,f,b,null,g)}}function e_(A){return A=Gn(A),t_(A)}var Xv=null;function t_(A){if(Xv=null,A=Te(A),A!==null){var f=a(A);if(f===null)A=null;else{var g=f.tag;if(g===13){if(A=i(f),A!==null)return A;A=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;A=null}else f!==A&&(A=null)}}return Xv=A,null}function ZI(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(je()){case We:return 2;case ct:return 8;case wt:case ot:return 32;case Dt:return 268435456;default:return 32}default:return 32}}var r_=!1,Hd=null,Vd=null,zd=null,bg=new Map,Cg=new Map,Gd=[],kq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function e3(A,f){switch(A){case"focusin":case"focusout":Hd=null;break;case"dragenter":case"dragleave":Vd=null;break;case"mouseover":case"mouseout":zd=null;break;case"pointerover":case"pointerout":bg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cg.delete(f.pointerId)}}function Eg(A,f,g,b,M,z){return A===null||A.nativeEvent!==z?(A={blockedOn:f,domEventName:g,eventSystemFlags:b,nativeEvent:z,targetContainers:[M]},f!==null&&(f=ke(f),f!==null&&JI(f)),A):(A.eventSystemFlags|=b,f=A.targetContainers,M!==null&&f.indexOf(M)===-1&&f.push(M),A)}function Iq(A,f,g,b,M){switch(f){case"focusin":return Hd=Eg(Hd,A,f,g,b,M),!0;case"dragenter":return Vd=Eg(Vd,A,f,g,b,M),!0;case"mouseover":return zd=Eg(zd,A,f,g,b,M),!0;case"pointerover":var z=M.pointerId;return bg.set(z,Eg(bg.get(z)||null,A,f,g,b,M)),!0;case"gotpointercapture":return z=M.pointerId,Cg.set(z,Eg(Cg.get(z)||null,A,f,g,b,M)),!0}return!1}function t3(A){var f=Te(A.target);if(f!==null){var g=a(f);if(g!==null){if(f=g.tag,f===13){if(f=i(g),f!==null){A.blockedOn=f,Ua(A.priority,function(){if(g.tag===13){var b=ol();b=xa(b);var M=wc(g,b);M!==null&&ll(M,g,b),JE(g,b)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){A.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}A.blockedOn=null}function Jv(A){if(A.blockedOn!==null)return!1;for(var f=A.targetContainers;0<f.length;){var g=e_(A.nativeEvent);if(g===null){g=A.nativeEvent;var b=new g.constructor(g.type,g);wo=b,g.target.dispatchEvent(b),wo=null}else return f=ke(g),f!==null&&JI(f),A.blockedOn=g,!1;f.shift()}return!0}function r3(A,f,g){Jv(A)&&g.delete(f)}function Fq(){r_=!1,Hd!==null&&Jv(Hd)&&(Hd=null),Vd!==null&&Jv(Vd)&&(Vd=null),zd!==null&&Jv(zd)&&(zd=null),bg.forEach(r3),Cg.forEach(r3)}function Zv(A,f){A.blockedOn===f&&(A.blockedOn=null,r_||(r_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Fq)))}var ey=null;function n3(A){ey!==A&&(ey=A,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ey===A&&(ey=null);for(var f=0;f<A.length;f+=3){var g=A[f],b=A[f+1],M=A[f+2];if(typeof b!="function"){if(t_(b||g)===null)continue;break}var z=ke(g);z!==null&&(A.splice(f,3),f-=3,Hl(z,{pending:!0,data:M,method:g.method,action:b},b,M))}}))}function _g(A){function f(Le){return Zv(Le,A)}Hd!==null&&Zv(Hd,A),Vd!==null&&Zv(Vd,A),zd!==null&&Zv(zd,A),bg.forEach(f),Cg.forEach(f);for(var g=0;g<Gd.length;g++){var b=Gd[g];b.blockedOn===A&&(b.blockedOn=null)}for(;0<Gd.length&&(g=Gd[0],g.blockedOn===null);)t3(g),g.blockedOn===null&&Gd.shift();if(g=(A.ownerDocument||A).$$reactFormReplay,g!=null)for(b=0;b<g.length;b+=3){var M=g[b],z=g[b+1],ue=M[ln]||null;if(typeof z=="function")ue||n3(g);else if(ue){var be=null;if(z&&z.hasAttribute("formAction")){if(M=z,ue=z[ln]||null)be=ue.formAction;else if(t_(M)!==null)continue}else be=ue.action;typeof be=="function"?g[b+1]=be:(g.splice(b,3),b-=3),n3(g)}}}function n_(A){this._internalRoot=A}ty.prototype.render=n_.prototype.render=function(A){var f=this._internalRoot;if(f===null)throw Error(n(409));var g=f.current,b=ol();YI(g,b,A,f,null,null)},ty.prototype.unmount=n_.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var f=A.containerInfo;YI(A.current,2,null,A,null,null),Uv(),f[Ln]=null}};function ty(A){this._internalRoot=A}ty.prototype.unstable_scheduleHydration=function(A){if(A){var f=Bs();A={blockedOn:null,target:A,priority:f};for(var g=0;g<Gd.length&&f!==0&&f<Gd[g].priority;g++);Gd.splice(g,0,A),g===0&&t3(A)}};var s3=e.version;if(s3!=="19.1.1")throw Error(n(527,s3,"19.1.1"));re.findDOMNode=function(A){var f=A._reactInternals;if(f===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=l(f),A=A!==null?c(A):null,A=A===null?null:A.stateNode,A};var Dq={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ry=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ry.isDisabled&&ry.supportsFiber)try{Lt=ry.inject(Dq),Qt=ry}catch{}}return Tg.createRoot=function(A,f){if(!s(A))throw Error(n(299));var g=!1,b="",M=yk,z=wk,ue=bk,be=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(M=f.onUncaughtError),f.onCaughtError!==void 0&&(z=f.onCaughtError),f.onRecoverableError!==void 0&&(ue=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(be=f.unstable_transitionCallbacks)),f=$I(A,1,!1,null,null,g,b,M,z,ue,be,null),A[Ln]=f.current,OE(A),new n_(f)},Tg.hydrateRoot=function(A,f,g){if(!s(A))throw Error(n(299));var b=!1,M="",z=yk,ue=wk,be=bk,Le=null,rt=null;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(M=g.identifierPrefix),g.onUncaughtError!==void 0&&(z=g.onUncaughtError),g.onCaughtError!==void 0&&(ue=g.onCaughtError),g.onRecoverableError!==void 0&&(be=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Le=g.unstable_transitionCallbacks),g.formState!==void 0&&(rt=g.formState)),f=$I(A,1,!0,f,g??null,b,M,z,ue,be,Le,rt),f.context=WI(null),g=f.current,b=ol(),b=xa(b),M=At(b),M.callback=null,vt(g,M,b),g=b,f.current.lanes=g,bs(f,g),Nu(f),A[Ln]=f.current,OE(A),new ty(f)},Tg.version="19.1.1",Tg}var h3;function Vq(){if(h3)return i_.exports;h3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),i_.exports=Hq(),i_.exports}var zq=Vq();const Gq=Sb(zq),qq=()=>{};var p3={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},Kq=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],i=t[r++],o=t[r++],l=((s&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const a=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63)}}return e.join("")},M8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const a=t[s],i=s+1<t.length,o=i?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=a>>2,h=(a&3)<<4|o>>4;let p=(o&15)<<2|c>>6,m=c&63;l||(m=64,i||(p=64)),n.push(r[d],r[h],r[p],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(U8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Kq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||o==null||c==null||h==null)throw new $q;const p=a<<2|o>>4;if(n.push(p),c!==64){const m=o<<4&240|c>>2;if(n.push(m),h!==64){const y=c<<6&192|h;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $q extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wq=function(t){const e=U8(t);return M8.encodeByteArray(e,!0)},iw=function(t){return Wq(t).replace(/\./g,"")},P8=function(t){try{return M8.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xq=()=>Yq().__FIREBASE_DEFAULTS__,Jq=()=>{if(typeof process>"u"||typeof p3>"u")return;const t=p3.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Zq=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&P8(t[1]);return e&&JSON.parse(e)},Tb=()=>{try{return qq()||Xq()||Jq()||Zq()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},O8=t=>{var e,r;return(r=(e=Tb())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},j8=t=>{const e=O8(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Q8=()=>{var t;return(t=Tb())==null?void 0:t.config},H8=t=>{var e;return(e=Tb())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mN(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[iw(JSON.stringify(r)),iw(JSON.stringify(i)),""].join(".")}const Ax={};function rK(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ax))Ax[e]?t.emulator.push(e):t.prod.push(e);return t}function nK(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let m3=!1;function gN(t,e){if(typeof window>"u"||typeof document>"u"||!A0(window.location.host)||Ax[t]===e||Ax[t]||m3)return;Ax[t]=e;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",a=rK().prod.length>0;function i(){const p=document.getElementById(n);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{m3=!0,i()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=nK(n),m=r("text"),y=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),E=document.getElementById(x)||document.createElement("a"),S=r("preprendIcon"),B=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const D=p.element;o(D),d(E,x);const I=c();l(B,S),D.append(B,y,E,I),document.body.appendChild(D)}a?(y.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(so())}function aK(){var e;const t=(e=Tb())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cK(){const t=so();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uK(){return!aK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AK(){try{return typeof indexedDB=="object"}catch{return!1}}function dK(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fK="FirebaseError";class eA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=fK,Object.setPrototypeOf(this,eA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E1.prototype.create)}}class E1{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],i=a?hK(a,n):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new eA(s,o,n)}}function hK(t,e){return t.replace(pK,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const pK=/\{\$([^}]+)}/g;function mK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ff(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const a=t[s],i=e[s];if(g3(a)&&g3(i)){if(!Ff(a,i))return!1}else if(a!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function g3(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function zg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,a]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Gg(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function gK(t,e){const r=new xK(t,e);return r.subscribe.bind(r)}class xK{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");vK(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=u_),s.error===void 0&&(s.error=u_),s.complete===void 0&&(s.complete=u_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vK(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function u_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t){return t&&t._delegate?t._delegate:t}class Df{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yK=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new eK;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bK(e))try{this.getOrInitializeService({instanceIdentifier:Eh})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=Eh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eh){return this.instances.has(e)}getOptions(e=Eh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);n===o&&i.resolve(s)}return s}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const a=this.instances.get(n);return a&&e(a,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:wK(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Eh){return this.component?this.component.multipleInstances?e:Eh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wK(t){return t===Eh?void 0:t}function bK(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new yK(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fn||(fn={}));const EK={debug:fn.DEBUG,verbose:fn.VERBOSE,info:fn.INFO,warn:fn.WARN,error:fn.ERROR,silent:fn.SILENT},_K=fn.INFO,SK={[fn.DEBUG]:"log",[fn.VERBOSE]:"log",[fn.INFO]:"info",[fn.WARN]:"warn",[fn.ERROR]:"error"},TK=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=SK[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let xN=class{constructor(e){this.name=e,this._logLevel=_K,this._logHandler=TK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fn.DEBUG,...e),this._logHandler(this,fn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fn.VERBOSE,...e),this._logHandler(this,fn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fn.INFO,...e),this._logHandler(this,fn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fn.WARN,...e),this._logHandler(this,fn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fn.ERROR,...e),this._logHandler(this,fn.ERROR,...e)}};const NK=(t,e)=>e.some(r=>t instanceof r);let x3,v3;function BK(){return x3||(x3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kK(){return v3||(v3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V8=new WeakMap,r5=new WeakMap,z8=new WeakMap,A_=new WeakMap,vN=new WeakMap;function IK(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{r(yf(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&V8.set(r,t)}).catch(()=>{}),vN.set(e,t),e}function FK(t){if(r5.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});r5.set(t,e)}let n5={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return r5.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z8.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return yf(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DK(t){n5=t(n5)}function RK(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(d_(this),e,...r);return z8.set(n,e.sort?e.sort():[e]),yf(n)}:kK().includes(t)?function(...e){return t.apply(d_(this),e),yf(V8.get(this))}:function(...e){return yf(t.apply(d_(this),e))}}function LK(t){return typeof t=="function"?RK(t):(t instanceof IDBTransaction&&FK(t),NK(t,BK())?new Proxy(t,n5):t)}function yf(t){if(t instanceof IDBRequest)return IK(t);if(A_.has(t))return A_.get(t);const e=LK(t);return e!==t&&(A_.set(t,e),vN.set(e,t)),e}const d_=t=>vN.get(t);function UK(t,e,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const i=indexedDB.open(t,e),o=yf(i);return n&&i.addEventListener("upgradeneeded",l=>{n(yf(i.result),l.oldVersion,l.newVersion,yf(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const MK=["get","getKey","getAll","getAllKeys","count"],PK=["put","add","delete","clear"],f_=new Map;function y3(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(f_.get(e))return f_.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=PK.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||MK.includes(r)))return;const a=async function(i,...o){const l=this.transaction(i,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return f_.set(e,a),a}DK(t=>({...t,get:(e,r,n)=>y3(e,r)||t.get(e,r,n),has:(e,r)=>!!y3(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(jK(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function jK(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const s5="@firebase/app",w3="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new xN("@firebase/app"),QK="@firebase/app-compat",HK="@firebase/analytics-compat",VK="@firebase/analytics",zK="@firebase/app-check-compat",GK="@firebase/app-check",qK="@firebase/auth",KK="@firebase/auth-compat",$K="@firebase/database",WK="@firebase/data-connect",YK="@firebase/database-compat",XK="@firebase/functions",JK="@firebase/functions-compat",ZK="@firebase/installations",e$="@firebase/installations-compat",t$="@firebase/messaging",r$="@firebase/messaging-compat",n$="@firebase/performance",s$="@firebase/performance-compat",a$="@firebase/remote-config",i$="@firebase/remote-config-compat",o$="@firebase/storage",l$="@firebase/storage-compat",c$="@firebase/firestore",u$="@firebase/ai",A$="@firebase/firestore-compat",d$="firebase",f$="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="[DEFAULT]",h$={[s5]:"fire-core",[QK]:"fire-core-compat",[VK]:"fire-analytics",[HK]:"fire-analytics-compat",[GK]:"fire-app-check",[zK]:"fire-app-check-compat",[qK]:"fire-auth",[KK]:"fire-auth-compat",[$K]:"fire-rtdb",[WK]:"fire-data-connect",[YK]:"fire-rtdb-compat",[XK]:"fire-fn",[JK]:"fire-fn-compat",[ZK]:"fire-iid",[e$]:"fire-iid-compat",[t$]:"fire-fcm",[r$]:"fire-fcm-compat",[n$]:"fire-perf",[s$]:"fire-perf-compat",[a$]:"fire-rc",[i$]:"fire-rc-compat",[o$]:"fire-gcs",[l$]:"fire-gcs-compat",[c$]:"fire-fst",[A$]:"fire-fst-compat",[u$]:"fire-vertex","fire-js":"fire-js",[d$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new Map,p$=new Map,i5=new Map;function b3(t,e){try{t.container.addComponent(e)}catch(r){XA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Xh(t){const e=t.name;if(i5.has(e))return XA.debug(`There were multiple attempts to register component ${e}.`),!1;i5.set(e,t);for(const r of Ux.values())b3(r,t);for(const r of p$.values())b3(r,t);return!0}function Nb(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function tc(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wf=new E1("app","Firebase",m$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Df("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=f$;function yN(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:a5,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw wf.create("bad-app-name",{appName:String(s)});if(r||(r=Q8()),!r)throw wf.create("no-options");const a=Ux.get(s);if(a){if(Ff(r,a.options)&&Ff(n,a.config))return a;throw wf.create("duplicate-app",{appName:s})}const i=new CK(s);for(const l of i5.values())i.addComponent(l);const o=new g$(r,n,i);return Ux.set(s,o),o}function wN(t=a5){const e=Ux.get(t);if(!e&&t===a5&&Q8())return yN();if(!e)throw wf.create("no-app",{appName:t});return e}function C3(){return Array.from(Ux.values())}function Hu(t,e,r){let n=h$[t]??t;r&&(n+=`-${r}`);const s=n.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const i=[`Unable to register library "${n}" with version "${e}":`];s&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&a&&i.push("and"),a&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),XA.warn(i.join(" "));return}Xh(new Df(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$="firebase-heartbeat-database",v$=1,Mx="firebase-heartbeat-store";let h_=null;function G8(){return h_||(h_=UK(x$,v$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mx)}catch(r){console.warn(r)}}}}).catch(t=>{throw wf.create("idb-open",{originalErrorMessage:t.message})})),h_}async function y$(t){try{const r=(await G8()).transaction(Mx),n=await r.objectStore(Mx).get(q8(t));return await r.done,n}catch(e){if(e instanceof eA)XA.warn(e.message);else{const r=wf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});XA.warn(r.message)}}}async function E3(t,e){try{const n=(await G8()).transaction(Mx,"readwrite");await n.objectStore(Mx).put(e,q8(t)),await n.done}catch(r){if(r instanceof eA)XA.warn(r.message);else{const n=wf.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});XA.warn(n.message)}}}function q8(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$=1024,b$=30;class C${constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new _$(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=_3();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>b$){const i=S$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){XA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=_3(),{heartbeatsToSend:n,unsentEntries:s}=E$(this._heartbeatsCache.heartbeats),a=iw(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return XA.warn(r),""}}}function _3(){return new Date().toISOString().substring(0,10)}function E$(t,e=w$){const r=[];let n=t.slice();for(const s of t){const a=r.find(i=>i.agent===s.agent);if(a){if(a.dates.push(s.date),S3(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),S3(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class _${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AK()?dK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await y$(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return E3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return E3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function S3(t){return iw(JSON.stringify({version:2,heartbeats:t})).length}function S$(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t){Xh(new Df("platform-logger",e=>new OK(e),"PRIVATE")),Xh(new Df("heartbeat",e=>new C$(e),"PRIVATE")),Hu(s5,w3,t),Hu(s5,w3,"esm2020"),Hu("fire-js","")}T$("");function K8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const N$=K8,$8=new E1("auth","Firebase",K8());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=new xN("@firebase/auth");function B$(t,...e){ow.logLevel<=fn.WARN&&ow.warn(`Auth (${Em}): ${t}`,...e)}function g2(t,...e){ow.logLevel<=fn.ERROR&&ow.error(`Auth (${Em}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t,...e){throw bN(t,...e)}function Vu(t,...e){return bN(t,...e)}function W8(t,e,r){const n={...N$(),[e]:r};return new E1("auth","Firebase",n).create(e,{appName:t.name})}function bf(t){return W8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bN(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return $8.create(t,...e)}function Br(t,e,...r){if(!t)throw bN(e,...r)}function jA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw g2(e),new Error(e)}function JA(t,e){t||jA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function k$(){return T3()==="http:"||T3()==="https:"}function T3(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(k$()||oK()||"connection"in navigator)?navigator.onLine:!0}function F$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,r){this.shortDelay=e,this.longDelay=r,JA(r>e,"Short delay should be less than long delay!"),this.isMobile=sK()||lK()}get(){return I$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t,e){JA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],L$=new S1(3e4,6e4);function Kf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function od(t,e,r,n,s={}){return X8(t,s,async()=>{let a={},i={};n&&(e==="GET"?i=n:a={body:JSON.stringify(n)});const o=_1({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...a};return iK()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&A0(t.emulatorConfig.host)&&(c.credentials="include"),Y8.fetch()(await J8(t,t.config.apiHost,r,o),c)})}async function X8(t,e,r){t._canInitEmulator=!1;const n={...D$,...e};try{const s=new M$(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw ny(t,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const o=a.ok?i.errorMessage:i.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ny(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw ny(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw ny(t,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw W8(t,d,c);Kc(t,d)}}catch(s){if(s instanceof eA)throw s;Kc(t,"network-request-failed",{message:String(s)})}}async function Bb(t,e,r,n,s={}){const a=await od(t,e,r,n,s);return"mfaPendingCredential"in a&&Kc(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function J8(t,e,r,n){const s=`${e}${r}?${n}`,a=t,i=a.config.emulator?CN(t.config,s):`${t.config.apiScheme}://${s}`;return R$.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(i).toString():i}function U$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class M${clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Vu(this.auth,"network-request-failed")),L$.get())})}}function ny(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Vu(t,e,n);return s.customData._tokenResponse=r,s}function N3(t){return t!==void 0&&t.enterprise!==void 0}class P${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return U$(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function O$(t,e){return od(t,"GET","/v2/recaptchaConfig",Kf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j$(t,e){return od(t,"POST","/v1/accounts:delete",e)}async function lw(t,e){return od(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q$(t,e=!1){const r=Ns(t),n=await r.getIdToken(e),s=EN(n);Br(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,i=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:dx(p_(s.auth_time)),issuedAtTime:dx(p_(s.iat)),expirationTime:dx(p_(s.exp)),signInProvider:i||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function p_(t){return Number(t)*1e3}function EN(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return g2("JWT malformed, contained fewer than 3 sections"),null;try{const s=P8(r);return s?JSON.parse(s):(g2("Failed to decode base64 JWT payload"),null)}catch(s){return g2("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function B3(t){const e=EN(t);return Br(e,"internal-error"),Br(typeof e.exp<"u","internal-error"),Br(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Px(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof eA&&H$(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function H$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=dx(this.lastLoginAt),this.creationTime=dx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cw(t){var h;const e=t.auth,r=await t.getIdToken(),n=await Px(t,lw(e,{idToken:r}));Br(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const a=(h=s.providerUserInfo)!=null&&h.length?Z8(s.providerUserInfo):[],i=G$(t.providerData,a),o=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(i!=null&&i.length),c=o?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new l5(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function z$(t){const e=Ns(t);await cw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function G$(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Z8(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q$(t,e){const r=await X8(t,{},async()=>{const n=_1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,i=await J8(t,s,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return t.emulatorConfig&&A0(t.emulatorConfig.host)&&(l.credentials="include"),Y8.fetch()(i,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function K$(t,e){return od(t,"POST","/v2/accounts:revokeToken",Kf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Br(e.idToken,"internal-error"),Br(typeof e.idToken<"u","internal-error"),Br(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Br(e.length!==0,"internal-error");const r=B3(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Br(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:a}=await q$(e,r);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:a}=r,i=new Mp;return n&&(Br(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(Br(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),a&&(Br(typeof a=="number","internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mp,this.toJSON())}_performRefresh(){return jA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t,e){Br(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qc{constructor({uid:e,auth:r,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new V$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new l5(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Px(this,this.stsTokenManager.getToken(this.auth,e));return Br(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Q$(this,e)}reload(){return z$(this)}_assign(e){this!==e&&(Br(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Qc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Br(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await cw(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tc(this.auth.app))return Promise.reject(bf(this.auth));const e=await this.getIdToken();return await Px(this,j$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,s=r.email??void 0,a=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,c=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:m,providerData:y,stsTokenManager:x}=r;Br(h&&x,e,"internal-error");const E=Mp.fromJSON(this.name,x);Br(typeof h=="string",e,"internal-error"),Kd(n,e.name),Kd(s,e.name),Br(typeof p=="boolean",e,"internal-error"),Br(typeof m=="boolean",e,"internal-error"),Kd(a,e.name),Kd(i,e.name),Kd(o,e.name),Kd(l,e.name),Kd(c,e.name),Kd(d,e.name);const S=new Qc({uid:h,auth:e,email:s,emailVerified:p,displayName:n,isAnonymous:m,photoURL:i,phoneNumber:a,tenantId:o,stsTokenManager:E,createdAt:c,lastLoginAt:d});return y&&Array.isArray(y)&&(S.providerData=y.map(B=>({...B}))),l&&(S._redirectEventId=l),S}static async _fromIdTokenResponse(e,r,n=!1){const s=new Mp;s.updateFromServerResponse(r);const a=new Qc({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await cw(a),a}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Br(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Z8(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),o=new Mp;o.updateFromIdToken(n);const l=new Qc({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new l5(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=new Map;function QA(t){JA(t instanceof Function,"Expected a class definition");let e=k3.get(t);return e?(JA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,k3.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}eP.type="NONE";const I3=eP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t,e,r){return`firebase:${t}:${e}:${r}`}class Pp{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=x2(this.userKey,s.apiKey,a),this.fullPersistenceKey=x2("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await lw(this.auth,{idToken:e}).catch(()=>{});return r?Qc._fromGetAccountInfoResponse(this.auth,r,e):null}return Qc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Pp(QA(I3),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=s[0]||QA(I3);const i=x2(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const d=await c._get(i);if(d){let h;if(typeof d=="string"){const p=await lw(e,{idToken:d}).catch(()=>{});if(!p)break;h=await Qc._fromGetAccountInfoResponse(e,p,d)}else h=Qc._fromJSON(e,d);c!==a&&(o=h),a=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new Pp(a,e,n):(a=l[0],o&&await a._set(i,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==a)try{await c._remove(i)}catch{}})),new Pp(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iP(e))return"Blackberry";if(oP(e))return"Webos";if(rP(e))return"Safari";if((e.includes("chrome/")||nP(e))&&!e.includes("edge/"))return"Chrome";if(aP(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function tP(t=so()){return/firefox\//i.test(t)}function rP(t=so()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nP(t=so()){return/crios\//i.test(t)}function sP(t=so()){return/iemobile/i.test(t)}function aP(t=so()){return/android/i.test(t)}function iP(t=so()){return/blackberry/i.test(t)}function oP(t=so()){return/webos/i.test(t)}function _N(t=so()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $$(t=so()){var e;return _N(t)&&!!((e=window.navigator)!=null&&e.standalone)}function W$(){return cK()&&document.documentMode===10}function lP(t=so()){return _N(t)||aP(t)||oP(t)||iP(t)||/windows phone/i.test(t)||sP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t,e=[]){let r;switch(t){case"Browser":r=F3(so());break;case"Worker":r=`${F3(so())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Em}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((i,o)=>{try{const l=e(a);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X$(t,e={}){return od(t,"GET","/v2/passwordPolicy",Kf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J$=6;class Z${constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??J$,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D3(this),this.idTokenSubscription=new D3(this),this.beforeStateQueue=new Y$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=QA(r)),this._initializationPromise=this.queue(async()=>{var n,s,a;if(!this._deleted&&(this.persistenceManager=await Pp.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await lw(this,{idToken:e}),n=await Qc._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(tc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(n=l.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Br(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await cw(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tc(this.app))return Promise.reject(bf(this));const r=e?Ns(e):null;return r&&Br(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Br(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tc(this.app)?Promise.reject(bf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tc(this.app)?Promise.reject(bf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(QA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await X$(this),r=new Z$(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new E1("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await K$(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&QA(e)||this._popupRedirectResolver;Br(r,this,"argument-error"),this.redirectPersistenceManager=await Pp.create(this,[QA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Br(o,this,"internal-error"),o.then(()=>{i||a(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{i=!0,l()}}else{const l=e.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Br(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(tc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&B$(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function d0(t){return Ns(t)}class D3{constructor(e){this.auth=e,this.observer=null,this.addObserver=gK(r=>this.observer=r)}get next(){return Br(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tW(t){kb=t}function uP(t){return kb.loadJS(t)}function rW(){return kb.recaptchaEnterpriseScript}function nW(){return kb.gapiScript}function sW(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class aW{constructor(){this.enterprise=new iW}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class iW{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const oW="recaptcha-enterprise",AP="NO_RECAPTCHA";class lW{constructor(e){this.type=oW,this.auth=d0(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(i,o)=>{O$(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new P$(l);return a.tenantId==null?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,i(c.siteKey)}}).catch(l=>{o(l)})})}function s(a,i,o){const l=window.grecaptcha;N3(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(c=>{i(c)}).catch(()=>{i(AP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aW().execute("siteKey",{action:"verify"}):new Promise((a,i)=>{n(this.auth).then(o=>{if(!r&&N3(window.grecaptcha))s(o,a,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=rW();l.length!==0&&(l+=o),uP(l).then(()=>{s(o,a,i)}).catch(c=>{i(c)})}}).catch(o=>{i(o)})})}}async function R3(t,e,r,n=!1,s=!1){const a=new lW(t);let i;if(s)i=AP;else try{i=await a.verify(r)}catch{i=await a.verify(r,!0)}const o={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function c5(t,e,r,n,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await R3(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await R3(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(t,e){const r=Nb(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(Ff(a,e??{}))return s;Kc(s,"already-initialized")}return r.initialize({options:e})}function uW(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(QA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function AW(t,e,r){const n=d0(t);Br(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=dP(e),{host:i,port:o}=dW(e),l=o===null?"":`:${o}`,c={url:`${a}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Br(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Br(Ff(c,n.config.emulator)&&Ff(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=c,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,A0(i)?(mN(`${a}//${i}${l}`),gN("Auth",!0)):fW()}function dP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dW(t){const e=dP(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:L3(n.substr(a.length+1))}}else{const[a,i]=n.split(":");return{host:a,port:L3(i)}}}function L3(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fW(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return jA("not implemented")}_getIdTokenResponse(e){return jA("not implemented")}_linkToIdToken(e,r){return jA("not implemented")}_getReauthenticationResolver(e){return jA("not implemented")}}async function hW(t,e){return od(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pW(t,e){return Bb(t,"POST","/v1/accounts:signInWithPassword",Kf(t,e))}async function mW(t,e){return od(t,"POST","/v1/accounts:sendOobCode",Kf(t,e))}async function gW(t,e){return mW(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xW(t,e){return Bb(t,"POST","/v1/accounts:signInWithEmailLink",Kf(t,e))}async function vW(t,e){return Bb(t,"POST","/v1/accounts:signInWithEmailLink",Kf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox extends SN{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Ox(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Ox(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c5(e,r,"signInWithPassword",pW);case"emailLink":return xW(e,{email:this._email,oobCode:this._password});default:Kc(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c5(e,n,"signUpPassword",hW);case"emailLink":return vW(e,{idToken:r,email:this._email,oobCode:this._password});default:Kc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Op(t,e){return Bb(t,"POST","/v1/accounts:signInWithIdp",Kf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW="http://localhost";class Jh extends SN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Jh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Kc("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...a}=r;if(!n||!s)return null;const i=new Jh(n,s);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return Op(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Op(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Op(e,r)}buildRequest(){const e={requestUri:yW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=_1(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bW(t){const e=zg(Gg(t)).link,r=e?zg(Gg(e)).deep_link_id:null,n=zg(Gg(t)).deep_link_id;return(n?zg(Gg(n)).link:null)||n||r||e||t}class TN{constructor(e){const r=zg(Gg(e)),n=r.apiKey??null,s=r.oobCode??null,a=wW(r.mode??null);Br(n&&s&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=s,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=bW(e);try{return new TN(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this.providerId=_m.PROVIDER_ID}static credential(e,r){return Ox._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=TN.parseLink(r);return Br(n,"argument-error"),Ox._fromEmailAndCode(e,n.code,n.tenantId)}}_m.PROVIDER_ID="password";_m.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_m.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1 extends fP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends T1{constructor(){super("facebook.com")}static credential(e){return Jh._fromParams({providerId:af.PROVIDER_ID,signInMethod:af.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return af.credentialFromTaggedObject(e)}static credentialFromError(e){return af.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return af.credential(e.oauthAccessToken)}catch{return null}}}af.FACEBOOK_SIGN_IN_METHOD="facebook.com";af.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of extends T1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Jh._fromParams({providerId:of.PROVIDER_ID,signInMethod:of.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return of.credentialFromTaggedObject(e)}static credentialFromError(e){return of.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return of.credential(r,n)}catch{return null}}}of.GOOGLE_SIGN_IN_METHOD="google.com";of.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends T1{constructor(){super("github.com")}static credential(e){return Jh._fromParams({providerId:lf.PROVIDER_ID,signInMethod:lf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lf.credentialFromTaggedObject(e)}static credentialFromError(e){return lf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lf.credential(e.oauthAccessToken)}catch{return null}}}lf.GITHUB_SIGN_IN_METHOD="github.com";lf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends T1{constructor(){super("twitter.com")}static credential(e,r){return Jh._fromParams({providerId:cf.PROVIDER_ID,signInMethod:cf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return cf.credentialFromTaggedObject(e)}static credentialFromError(e){return cf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return cf.credential(r,n)}catch{return null}}}cf.TWITTER_SIGN_IN_METHOD="twitter.com";cf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const a=await Qc._fromIdTokenResponse(e,n,s),i=U3(n);return new am({user:a,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=U3(n);return new am({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function U3(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw extends eA{constructor(e,r,n,s){super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,uw.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new uw(e,r,n,s)}}function hP(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?uw._fromErrorAndOperation(t,a,e,n):a})}async function CW(t,e,r=!1){const n=await Px(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return am._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EW(t,e,r=!1){const{auth:n}=t;if(tc(n.app))return Promise.reject(bf(n));const s="reauthenticate";try{const a=await Px(t,hP(n,s,e,t),r);Br(a.idToken,n,"internal-error");const i=EN(a.idToken);Br(i,n,"internal-error");const{sub:o}=i;return Br(t.uid===o,n,"user-mismatch"),am._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Kc(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(t,e,r=!1){if(tc(t.app))return Promise.reject(bf(t));const n="signIn",s=await hP(t,n,e),a=await am._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(a.user),a}async function _W(t,e){return pP(d0(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SW(t){const e=d0(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TW(t,e,r){const n=d0(t);await c5(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",gW)}function NW(t,e,r){return tc(t.app)?Promise.reject(bf(t)):_W(Ns(t),_m.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&SW(t),n})}function BW(t,e,r,n){return Ns(t).onIdTokenChanged(e,r,n)}function kW(t,e,r){return Ns(t).beforeAuthStateChanged(e,r)}function mP(t,e,r,n){return Ns(t).onAuthStateChanged(e,r,n)}function IW(t){return Ns(t).signOut()}const Aw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Aw,"1"),this.storage.removeItem(Aw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW=1e3,DW=10;class xP extends gP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},a=this.storage.getItem(n);W$()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,DW):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},FW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}xP.type="LOCAL";const RW=xP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP extends gP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}vP.type="SESSION";const yP=vP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Ib(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:a}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(i).map(async c=>c(r.origin,a)),l=await LW(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ib.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,i;return new Promise((o,l)=>{const c=NN("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(p.data.response);break;default:clearTimeout(d),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(){return window}function MW(t){zu().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(){return typeof zu().WorkerGlobalScope<"u"&&typeof zu().importScripts=="function"}async function PW(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OW(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function jW(){return wP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="firebaseLocalStorageDb",QW=1,dw="firebaseLocalStorage",CP="fbase_key";class N1{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Fb(t,e){return t.transaction([dw],e?"readwrite":"readonly").objectStore(dw)}function HW(){const t=indexedDB.deleteDatabase(bP);return new N1(t).toPromise()}function u5(){const t=indexedDB.open(bP,QW);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(dw,{keyPath:CP})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(dw)?e(n):(n.close(),await HW(),e(await u5()))})})}async function M3(t,e,r){const n=Fb(t,!0).put({[CP]:e,value:r});return new N1(n).toPromise()}async function VW(t,e){const r=Fb(t,!1).get(e),n=await new N1(r).toPromise();return n===void 0?null:n.value}function P3(t,e){const r=Fb(t,!0).delete(e);return new N1(r).toPromise()}const zW=800,GW=3;class EP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await u5(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>GW)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ib._getInstance(jW()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await PW(),!this.activeServiceWorker)return;this.sender=new UW(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await u5();return await M3(e,Aw,"1"),await P3(e,Aw),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>M3(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>VW(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>P3(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Fb(s,!1).getAll();return new N1(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EP.type="LOCAL";const qW=EP;new S1(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KW(t,e){return e?QA(e):(Br(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN extends SN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Op(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Op(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Op(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function $W(t){return pP(t.auth,new BN(t),t.bypassAuthState)}function WW(t){const{auth:e,user:r}=t;return Br(r,e,"internal-error"),EW(r,new BN(t),t.bypassAuthState)}async function YW(t){const{auth:e,user:r}=t;return Br(r,e,"internal-error"),CW(r,new BN(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,r,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:a,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $W;case"linkViaPopup":case"linkViaRedirect":return YW;case"reauthViaPopup":case"reauthViaRedirect":return WW;default:Kc(this.auth,"internal-error")}}resolve(e){JA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){JA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XW=new S1(2e3,1e4);class Bp extends _P{constructor(e,r,n,s,a){super(e,r,s,a),this.provider=n,this.authWindow=null,this.pollId=null,Bp.currentPopupAction&&Bp.currentPopupAction.cancel(),Bp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Br(e,this.auth,"internal-error"),e}async onExecution(){JA(this.filter.length===1,"Popup operations only handle one event");const e=NN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Vu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bp.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XW.get())};e()}}Bp.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JW="pendingRedirect",v2=new Map;class ZW extends _P{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=v2.get(this.auth._key());if(!e){try{const n=await eY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}v2.set(this.auth._key(),e)}return this.bypassAuthState||v2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eY(t,e){const r=nY(e),n=rY(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function tY(t,e){v2.set(t._key(),e)}function rY(t){return QA(t._redirectPersistence)}function nY(t){return x2(JW,t.config.apiKey,t.name)}async function sY(t,e,r=!1){if(tc(t.app))return Promise.reject(bf(t));const n=d0(t),s=KW(n,e),i=await new ZW(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aY=600*1e3;class iY{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oY(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!SP(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Vu(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aY&&this.cachedEventUids.clear(),this.cachedEventUids.has(O3(e))}saveEventToCache(e){this.cachedEventUids.add(O3(e)),this.lastProcessedEventTime=Date.now()}}function O3(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lY(t,e={}){return od(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uY=/^https?/;async function AY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lY(t);for(const r of e)try{if(dY(r))return}catch{}Kc(t,"unauthorized-domain")}function dY(t){const e=o5(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!uY.test(r))return!1;if(cY.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY=new S1(3e4,6e4);function j3(){const t=zu().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function hY(t){return new Promise((e,r)=>{var s,a,i;function n(){j3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j3(),r(Vu(t,"network-request-failed"))},timeout:fY.get()})}if((a=(s=zu().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((i=zu().gapi)!=null&&i.load)n();else{const o=sW("iframefcb");return zu()[o]=()=>{gapi.load?n():r(Vu(t,"network-request-failed"))},uP(`${nW()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw y2=null,e})}let y2=null;function pY(t){return y2=y2||hY(t),y2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mY=new S1(5e3,15e3),gY="__/auth/iframe",xY="emulator/auth/iframe",vY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wY(t){const e=t.config;Br(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?CN(e,xY):`https://${t.config.authDomain}/${gY}`,n={apiKey:e.apiKey,appName:t.name,v:Em},s=yY.get(t.config.apiHost);s&&(n.eid=s);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${_1(n).slice(1)}`}async function bY(t){const e=await pY(t),r=zu().gapi;return Br(r,t,"internal-error"),e.open({where:document.body,url:wY(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vY,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const i=Vu(t,"network-request-failed"),o=zu().setTimeout(()=>{a(i)},mY.get());function l(){zu().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{a(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EY=500,_Y=600,SY="_blank",TY="http://localhost";class Q3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NY(t,e,r,n=EY,s=_Y){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...CY,width:n.toString(),height:s.toString(),top:a,left:i},c=so().toLowerCase();r&&(o=nP(c)?SY:r),tP(c)&&(e=e||TY,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if($$(c)&&o!=="_self")return BY(e||"",o),new Q3(null);const h=window.open(e||"",o,d);Br(h,t,"popup-blocked");try{h.focus()}catch{}return new Q3(h)}function BY(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY="__/auth/handler",IY="emulator/auth/handler",FY=encodeURIComponent("fac");async function H3(t,e,r,n,s,a){Br(t.config.authDomain,t,"auth-domain-config-required"),Br(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Em,eventId:s};if(e instanceof fP){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",mK(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof T1){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),c=l?`#${FY}=${encodeURIComponent(l)}`:"";return`${DY(t)}?${_1(o).slice(1)}${c}`}function DY({config:t}){return t.emulator?CN(t,IY):`https://${t.authDomain}/${kY}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="webStorageSupport";class RY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yP,this._completeRedirectFn=sY,this._overrideRedirectResult=tY}async _openPopup(e,r,n,s){var i;JA((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await H3(e,r,n,o5(),s);return NY(e,a,NN())}async _openRedirect(e,r,n,s){await this._originValidation(e);const a=await H3(e,r,n,o5(),s);return MW(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(JA(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await bY(e),n=new iY(e);return r.register("authEvent",s=>(Br(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(m_,{type:m_},s=>{var i;const a=(i=s==null?void 0:s[0])==null?void 0:i[m_];a!==void 0&&r(!!a),Kc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=AY(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return lP()||rP()||_N()}}const LY=RY;var V3="@firebase/auth",z3="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Br(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PY(t){Xh(new Df("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Br(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cP(t)},c=new eW(n,s,a,l);return uW(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Xh(new Df("auth-internal",e=>{const r=d0(e.getProvider("auth").getImmediate());return(n=>new UY(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hu(V3,z3,MY(t)),Hu(V3,z3,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OY=300,jY=H8("authIdTokenMaxAge")||OY;let G3=null;const QY=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>jY)return;const s=r==null?void 0:r.token;G3!==s&&(G3=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function TP(t=wN()){const e=Nb(t,"auth");if(e.isInitialized())return e.getImmediate();const r=cW(t,{popupRedirectResolver:LY,persistence:[qW,RW,yP]}),n=H8("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const i=QY(a.toString());kW(r,i,()=>i(r.currentUser)),BW(r,o=>i(o))}}const s=O8("auth");return s&&AW(r,`http://${s}`),r}function HY(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}tW({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const a=Vu("internal-error");a.customData=s,r(a)},n.type="text/javascript",n.charset="UTF-8",HY().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PY("Browser");var VY="firebase",zY="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hu(VY,zY,"app");var q3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cf,NP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,_){function N(){}N.prototype=_.prototype,C.D=_.prototype,C.prototype=new N,C.prototype.constructor=C,C.C=function(j,R,L){for(var Q=Array(arguments.length-2),H=2;H<arguments.length;H++)Q[H-2]=arguments[H];return _.prototype[R].apply(j,Q)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,_,N){N||(N=0);var j=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)j[R]=_.charCodeAt(N++)|_.charCodeAt(N++)<<8|_.charCodeAt(N++)<<16|_.charCodeAt(N++)<<24;else for(R=0;16>R;++R)j[R]=_[N++]|_[N++]<<8|_[N++]<<16|_[N++]<<24;_=C.g[0],N=C.g[1],R=C.g[2];var L=C.g[3],Q=_+(L^N&(R^L))+j[0]+3614090360&4294967295;_=N+(Q<<7&4294967295|Q>>>25),Q=L+(R^_&(N^R))+j[1]+3905402710&4294967295,L=_+(Q<<12&4294967295|Q>>>20),Q=R+(N^L&(_^N))+j[2]+606105819&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=N+(_^R&(L^_))+j[3]+3250441966&4294967295,N=R+(Q<<22&4294967295|Q>>>10),Q=_+(L^N&(R^L))+j[4]+4118548399&4294967295,_=N+(Q<<7&4294967295|Q>>>25),Q=L+(R^_&(N^R))+j[5]+1200080426&4294967295,L=_+(Q<<12&4294967295|Q>>>20),Q=R+(N^L&(_^N))+j[6]+2821735955&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=N+(_^R&(L^_))+j[7]+4249261313&4294967295,N=R+(Q<<22&4294967295|Q>>>10),Q=_+(L^N&(R^L))+j[8]+1770035416&4294967295,_=N+(Q<<7&4294967295|Q>>>25),Q=L+(R^_&(N^R))+j[9]+2336552879&4294967295,L=_+(Q<<12&4294967295|Q>>>20),Q=R+(N^L&(_^N))+j[10]+4294925233&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=N+(_^R&(L^_))+j[11]+2304563134&4294967295,N=R+(Q<<22&4294967295|Q>>>10),Q=_+(L^N&(R^L))+j[12]+1804603682&4294967295,_=N+(Q<<7&4294967295|Q>>>25),Q=L+(R^_&(N^R))+j[13]+4254626195&4294967295,L=_+(Q<<12&4294967295|Q>>>20),Q=R+(N^L&(_^N))+j[14]+2792965006&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=N+(_^R&(L^_))+j[15]+1236535329&4294967295,N=R+(Q<<22&4294967295|Q>>>10),Q=_+(R^L&(N^R))+j[1]+4129170786&4294967295,_=N+(Q<<5&4294967295|Q>>>27),Q=L+(N^R&(_^N))+j[6]+3225465664&4294967295,L=_+(Q<<9&4294967295|Q>>>23),Q=R+(_^N&(L^_))+j[11]+643717713&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=N+(L^_&(R^L))+j[0]+3921069994&4294967295,N=R+(Q<<20&4294967295|Q>>>12),Q=_+(R^L&(N^R))+j[5]+3593408605&4294967295,_=N+(Q<<5&4294967295|Q>>>27),Q=L+(N^R&(_^N))+j[10]+38016083&4294967295,L=_+(Q<<9&4294967295|Q>>>23),Q=R+(_^N&(L^_))+j[15]+3634488961&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=N+(L^_&(R^L))+j[4]+3889429448&4294967295,N=R+(Q<<20&4294967295|Q>>>12),Q=_+(R^L&(N^R))+j[9]+568446438&4294967295,_=N+(Q<<5&4294967295|Q>>>27),Q=L+(N^R&(_^N))+j[14]+3275163606&4294967295,L=_+(Q<<9&4294967295|Q>>>23),Q=R+(_^N&(L^_))+j[3]+4107603335&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=N+(L^_&(R^L))+j[8]+1163531501&4294967295,N=R+(Q<<20&4294967295|Q>>>12),Q=_+(R^L&(N^R))+j[13]+2850285829&4294967295,_=N+(Q<<5&4294967295|Q>>>27),Q=L+(N^R&(_^N))+j[2]+4243563512&4294967295,L=_+(Q<<9&4294967295|Q>>>23),Q=R+(_^N&(L^_))+j[7]+1735328473&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=N+(L^_&(R^L))+j[12]+2368359562&4294967295,N=R+(Q<<20&4294967295|Q>>>12),Q=_+(N^R^L)+j[5]+4294588738&4294967295,_=N+(Q<<4&4294967295|Q>>>28),Q=L+(_^N^R)+j[8]+2272392833&4294967295,L=_+(Q<<11&4294967295|Q>>>21),Q=R+(L^_^N)+j[11]+1839030562&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=N+(R^L^_)+j[14]+4259657740&4294967295,N=R+(Q<<23&4294967295|Q>>>9),Q=_+(N^R^L)+j[1]+2763975236&4294967295,_=N+(Q<<4&4294967295|Q>>>28),Q=L+(_^N^R)+j[4]+1272893353&4294967295,L=_+(Q<<11&4294967295|Q>>>21),Q=R+(L^_^N)+j[7]+4139469664&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=N+(R^L^_)+j[10]+3200236656&4294967295,N=R+(Q<<23&4294967295|Q>>>9),Q=_+(N^R^L)+j[13]+681279174&4294967295,_=N+(Q<<4&4294967295|Q>>>28),Q=L+(_^N^R)+j[0]+3936430074&4294967295,L=_+(Q<<11&4294967295|Q>>>21),Q=R+(L^_^N)+j[3]+3572445317&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=N+(R^L^_)+j[6]+76029189&4294967295,N=R+(Q<<23&4294967295|Q>>>9),Q=_+(N^R^L)+j[9]+3654602809&4294967295,_=N+(Q<<4&4294967295|Q>>>28),Q=L+(_^N^R)+j[12]+3873151461&4294967295,L=_+(Q<<11&4294967295|Q>>>21),Q=R+(L^_^N)+j[15]+530742520&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=N+(R^L^_)+j[2]+3299628645&4294967295,N=R+(Q<<23&4294967295|Q>>>9),Q=_+(R^(N|~L))+j[0]+4096336452&4294967295,_=N+(Q<<6&4294967295|Q>>>26),Q=L+(N^(_|~R))+j[7]+1126891415&4294967295,L=_+(Q<<10&4294967295|Q>>>22),Q=R+(_^(L|~N))+j[14]+2878612391&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=N+(L^(R|~_))+j[5]+4237533241&4294967295,N=R+(Q<<21&4294967295|Q>>>11),Q=_+(R^(N|~L))+j[12]+1700485571&4294967295,_=N+(Q<<6&4294967295|Q>>>26),Q=L+(N^(_|~R))+j[3]+2399980690&4294967295,L=_+(Q<<10&4294967295|Q>>>22),Q=R+(_^(L|~N))+j[10]+4293915773&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=N+(L^(R|~_))+j[1]+2240044497&4294967295,N=R+(Q<<21&4294967295|Q>>>11),Q=_+(R^(N|~L))+j[8]+1873313359&4294967295,_=N+(Q<<6&4294967295|Q>>>26),Q=L+(N^(_|~R))+j[15]+4264355552&4294967295,L=_+(Q<<10&4294967295|Q>>>22),Q=R+(_^(L|~N))+j[6]+2734768916&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=N+(L^(R|~_))+j[13]+1309151649&4294967295,N=R+(Q<<21&4294967295|Q>>>11),Q=_+(R^(N|~L))+j[4]+4149444226&4294967295,_=N+(Q<<6&4294967295|Q>>>26),Q=L+(N^(_|~R))+j[11]+3174756917&4294967295,L=_+(Q<<10&4294967295|Q>>>22),Q=R+(_^(L|~N))+j[2]+718787259&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=N+(L^(R|~_))+j[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(R+(Q<<21&4294967295|Q>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+L&4294967295}n.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var N=_-this.blockSize,j=this.B,R=this.h,L=0;L<_;){if(R==0)for(;L<=N;)s(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<_;)if(j[R++]=C.charCodeAt(L++),R==this.blockSize){s(this,j),R=0;break}}else for(;L<_;)if(j[R++]=C[L++],R==this.blockSize){s(this,j),R=0;break}}this.h=R,this.o+=_},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var N=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=N&255,N/=256;for(this.u(C),C=Array(16),_=N=0;4>_;++_)for(var j=0;32>j;j+=8)C[N++]=this.g[_]>>>j&255;return C};function a(C,_){var N=o;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=_(C)}function i(C,_){this.h=_;for(var N=[],j=!0,R=C.length-1;0<=R;R--){var L=C[R]|0;j&&L==_||(N[R]=L,j=!1)}this.g=N}var o={};function l(C){return-128<=C&&128>C?a(C,function(_){return new i([_|0],0>_?-1:0)}):new i([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return E(c(-C));for(var _=[],N=1,j=0;C>=N;j++)_[j]=C/N|0,N*=4294967296;return new i(_,0)}function d(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return E(d(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=c(Math.pow(_,8)),j=h,R=0;R<C.length;R+=8){var L=Math.min(8,C.length-R),Q=parseInt(C.substring(R,R+L),_);8>L?(L=c(Math.pow(_,L)),j=j.j(L).add(c(Q))):(j=j.j(N),j=j.add(c(Q)))}return j}var h=l(0),p=l(1),m=l(16777216);t=i.prototype,t.m=function(){if(x(this))return-E(this).m();for(var C=0,_=1,N=0;N<this.g.length;N++){var j=this.i(N);C+=(0<=j?j:4294967296+j)*_,_*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(y(this))return"0";if(x(this))return"-"+E(this).toString(C);for(var _=c(Math.pow(C,6)),N=this,j="";;){var R=I(N,_).g;N=S(N,R.j(_));var L=((0<N.g.length?N.g[0]:N.h)>>>0).toString(C);if(N=R,y(N))return L+j;for(;6>L.length;)L="0"+L;j=L+j}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function y(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function x(C){return C.h==-1}t.l=function(C){return C=S(this,C),x(C)?-1:y(C)?0:1};function E(C){for(var _=C.g.length,N=[],j=0;j<_;j++)N[j]=~C.g[j];return new i(N,~C.h).add(p)}t.abs=function(){return x(this)?E(this):this},t.add=function(C){for(var _=Math.max(this.g.length,C.g.length),N=[],j=0,R=0;R<=_;R++){var L=j+(this.i(R)&65535)+(C.i(R)&65535),Q=(L>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);j=Q>>>16,L&=65535,Q&=65535,N[R]=Q<<16|L}return new i(N,N[N.length-1]&-2147483648?-1:0)};function S(C,_){return C.add(E(_))}t.j=function(C){if(y(this)||y(C))return h;if(x(this))return x(C)?E(this).j(E(C)):E(E(this).j(C));if(x(C))return E(this.j(E(C)));if(0>this.l(m)&&0>C.l(m))return c(this.m()*C.m());for(var _=this.g.length+C.g.length,N=[],j=0;j<2*_;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(var R=0;R<C.g.length;R++){var L=this.i(j)>>>16,Q=this.i(j)&65535,H=C.i(R)>>>16,te=C.i(R)&65535;N[2*j+2*R]+=Q*te,B(N,2*j+2*R),N[2*j+2*R+1]+=L*te,B(N,2*j+2*R+1),N[2*j+2*R+1]+=Q*H,B(N,2*j+2*R+1),N[2*j+2*R+2]+=L*H,B(N,2*j+2*R+2)}for(j=0;j<_;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=_;j<2*_;j++)N[j]=0;return new i(N,0)};function B(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function D(C,_){this.g=C,this.h=_}function I(C,_){if(y(_))throw Error("division by zero");if(y(C))return new D(h,h);if(x(C))return _=I(E(C),_),new D(E(_.g),E(_.h));if(x(_))return _=I(C,E(_)),new D(E(_.g),_.h);if(30<C.g.length){if(x(C)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var N=p,j=_;0>=j.l(C);)N=U(N),j=U(j);var R=F(N,1),L=F(j,1);for(j=F(j,2),N=F(N,2);!y(j);){var Q=L.add(j);0>=Q.l(C)&&(R=R.add(N),L=Q),j=F(j,1),N=F(N,1)}return _=S(C,R.j(_)),new D(R,_)}for(R=h;0<=C.l(_);){for(N=Math.max(1,Math.floor(C.m()/_.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),L=c(N),Q=L.j(_);x(Q)||0<Q.l(C);)N-=j,L=c(N),Q=L.j(_);y(L)&&(L=p),R=R.add(L),C=S(C,Q)}return new D(R,C)}t.A=function(C){return I(this,C).h},t.and=function(C){for(var _=Math.max(this.g.length,C.g.length),N=[],j=0;j<_;j++)N[j]=this.i(j)&C.i(j);return new i(N,this.h&C.h)},t.or=function(C){for(var _=Math.max(this.g.length,C.g.length),N=[],j=0;j<_;j++)N[j]=this.i(j)|C.i(j);return new i(N,this.h|C.h)},t.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),N=[],j=0;j<_;j++)N[j]=this.i(j)^C.i(j);return new i(N,this.h^C.h)};function U(C){for(var _=C.g.length+1,N=[],j=0;j<_;j++)N[j]=C.i(j)<<1|C.i(j-1)>>>31;return new i(N,C.h)}function F(C,_){var N=_>>5;_%=32;for(var j=C.g.length-N,R=[],L=0;L<j;L++)R[L]=0<_?C.i(L+N)>>>_|C.i(L+N+1)<<32-_:C.i(L+N);return new i(R,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,NP=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Cf=i}).apply(typeof q3<"u"?q3:typeof self<"u"?self:typeof window<"u"?window:{});var sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BP,qg,kP,w2,A5,IP,FP,DP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(k,ee,ie){return k==Array.prototype||k==Object.prototype||(k[ee]=ie.value),k};function r(k){k=[typeof globalThis=="object"&&globalThis,k,typeof window=="object"&&window,typeof self=="object"&&self,typeof sy=="object"&&sy];for(var ee=0;ee<k.length;++ee){var ie=k[ee];if(ie&&ie.Math==Math)return ie}throw Error("Cannot find global object")}var n=r(this);function s(k,ee){if(ee)e:{var ie=n;k=k.split(".");for(var we=0;we<k.length-1;we++){var He=k[we];if(!(He in ie))break e;ie=ie[He]}k=k[k.length-1],we=ie[k],ee=ee(we),ee!=we&&ee!=null&&e(ie,k,{configurable:!0,writable:!0,value:ee})}}function a(k,ee){k instanceof String&&(k+="");var ie=0,we=!1,He={next:function(){if(!we&&ie<k.length){var tt=ie++;return{value:ee(tt,k[tt]),done:!1}}return we=!0,{done:!0,value:void 0}}};return He[Symbol.iterator]=function(){return He},He}s("Array.prototype.values",function(k){return k||function(){return a(this,function(ee,ie){return ie})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(k){var ee=typeof k;return ee=ee!="object"?ee:k?Array.isArray(k)?"array":ee:"null",ee=="array"||ee=="object"&&typeof k.length=="number"}function c(k){var ee=typeof k;return ee=="object"&&k!=null||ee=="function"}function d(k,ee,ie){return k.call.apply(k.bind,arguments)}function h(k,ee,ie){if(!k)throw Error();if(2<arguments.length){var we=Array.prototype.slice.call(arguments,2);return function(){var He=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(He,we),k.apply(ee,He)}}return function(){return k.apply(ee,arguments)}}function p(k,ee,ie){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(k,ee){var ie=Array.prototype.slice.call(arguments,1);return function(){var we=ie.slice();return we.push.apply(we,arguments),k.apply(this,we)}}function y(k,ee){function ie(){}ie.prototype=ee.prototype,k.aa=ee.prototype,k.prototype=new ie,k.prototype.constructor=k,k.Qb=function(we,He,tt){for(var St=Array(arguments.length-2),vr=2;vr<arguments.length;vr++)St[vr-2]=arguments[vr];return ee.prototype[He].apply(we,St)}}function x(k){const ee=k.length;if(0<ee){const ie=Array(ee);for(let we=0;we<ee;we++)ie[we]=k[we];return ie}return[]}function E(k,ee){for(let ie=1;ie<arguments.length;ie++){const we=arguments[ie];if(l(we)){const He=k.length||0,tt=we.length||0;k.length=He+tt;for(let St=0;St<tt;St++)k[He+St]=we[St]}else k.push(we)}}class S{constructor(ee,ie){this.i=ee,this.j=ie,this.h=0,this.g=null}get(){let ee;return 0<this.h?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function B(k){return/^[\s\xa0]*$/.test(k)}function D(){var k=o.navigator;return k&&(k=k.userAgent)?k:""}function I(k){return I[" "](k),k}I[" "]=function(){};var U=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function F(k,ee,ie){for(const we in k)ee.call(ie,k[we],we,k)}function C(k,ee){for(const ie in k)ee.call(void 0,k[ie],ie,k)}function _(k){const ee={};for(const ie in k)ee[ie]=k[ie];return ee}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(k,ee){let ie,we;for(let He=1;He<arguments.length;He++){we=arguments[He];for(ie in we)k[ie]=we[ie];for(let tt=0;tt<N.length;tt++)ie=N[tt],Object.prototype.hasOwnProperty.call(we,ie)&&(k[ie]=we[ie])}}function R(k){var ee=1;k=k.split(":");const ie=[];for(;0<ee&&k.length;)ie.push(k.shift()),ee--;return k.length&&ie.push(k.join(":")),ie}function L(k){o.setTimeout(()=>{throw k},0)}function Q(){var k=J;let ee=null;return k.g&&(ee=k.g,k.g=k.g.next,k.g||(k.h=null),ee.next=null),ee}class H{constructor(){this.h=this.g=null}add(ee,ie){const we=te.get();we.set(ee,ie),this.h?this.h.next=we:this.g=we,this.h=we}}var te=new S(()=>new Y,k=>k.reset());class Y{constructor(){this.next=this.g=this.h=null}set(ee,ie){this.h=ee,this.g=ie,this.next=null}reset(){this.next=this.g=this.h=null}}let re,V=!1,J=new H,K=()=>{const k=o.Promise.resolve(void 0);re=()=>{k.then(ae)}};var ae=()=>{for(var k;k=Q();){try{k.h.call(k.g)}catch(ie){L(ie)}var ee=te;ee.j(k),100>ee.h&&(ee.h++,k.next=ee.g,ee.g=k)}V=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(k,ee){this.type=k,this.g=this.target=ee,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var k=!1,ee=Object.defineProperty({},"passive",{get:function(){k=!0}});try{const ie=()=>{};o.addEventListener("test",ie,ee),o.removeEventListener("test",ie,ee)}catch{}return k}();function ne(k,ee){if(W.call(this,k?k.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,k){var ie=this.type=k.type,we=k.changedTouches&&k.changedTouches.length?k.changedTouches[0]:null;if(this.target=k.target||k.srcElement,this.g=ee,ee=k.relatedTarget){if(U){e:{try{I(ee.nodeName);var He=!0;break e}catch{}He=!1}He||(ee=null)}}else ie=="mouseover"?ee=k.fromElement:ie=="mouseout"&&(ee=k.toElement);this.relatedTarget=ee,we?(this.clientX=we.clientX!==void 0?we.clientX:we.pageX,this.clientY=we.clientY!==void 0?we.clientY:we.pageY,this.screenX=we.screenX||0,this.screenY=we.screenY||0):(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0),this.button=k.button,this.key=k.key||"",this.ctrlKey=k.ctrlKey,this.altKey=k.altKey,this.shiftKey=k.shiftKey,this.metaKey=k.metaKey,this.pointerId=k.pointerId||0,this.pointerType=typeof k.pointerType=="string"?k.pointerType:le[k.pointerType]||"",this.state=k.state,this.i=k,k.defaultPrevented&&ne.aa.h.call(this)}}y(ne,W);var le={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var k=this.i;k.preventDefault?k.preventDefault():k.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),pe=0;function he(k,ee,ie,we,He){this.listener=k,this.proxy=null,this.src=ee,this.type=ie,this.capture=!!we,this.ha=He,this.key=++pe,this.da=this.fa=!1}function de(k){k.da=!0,k.listener=null,k.proxy=null,k.src=null,k.ha=null}function ce(k){this.src=k,this.g={},this.h=0}ce.prototype.add=function(k,ee,ie,we,He){var tt=k.toString();k=this.g[tt],k||(k=this.g[tt]=[],this.h++);var St=Re(k,ee,we,He);return-1<St?(ee=k[St],ie||(ee.fa=!1)):(ee=new he(ee,this.src,tt,!!we,He),ee.fa=ie,k.push(ee)),ee};function oe(k,ee){var ie=ee.type;if(ie in k.g){var we=k.g[ie],He=Array.prototype.indexOf.call(we,ee,void 0),tt;(tt=0<=He)&&Array.prototype.splice.call(we,He,1),tt&&(de(ee),k.g[ie].length==0&&(delete k.g[ie],k.h--))}}function Re(k,ee,ie,we){for(var He=0;He<k.length;++He){var tt=k[He];if(!tt.da&&tt.listener==ee&&tt.capture==!!ie&&tt.ha==we)return He}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),Ie={};function Ee(k,ee,ie,we,He){if(Array.isArray(ee)){for(var tt=0;tt<ee.length;tt++)Ee(k,ee[tt],ie,we,He);return null}return ie=Yt(ie),k&&k[ve]?k.K(ee,ie,c(we)?!!we.capture:!1,He):De(k,ee,ie,!1,we,He)}function De(k,ee,ie,we,He,tt){if(!ee)throw Error("Invalid event type");var St=c(He)?!!He.capture:!!He,vr=Dt(k);if(vr||(k[qe]=vr=new ce(k)),ie=vr.add(ee,ie,we,St,tt),ie.proxy)return ie;if(we=je(),ie.proxy=we,we.src=k,we.listener=ie,k.addEventListener)Z||(He=St),He===void 0&&(He=!1),k.addEventListener(ee.toString(),we,He);else if(k.attachEvent)k.attachEvent(wt(ee.toString()),we);else if(k.addListener&&k.removeListener)k.addListener(we);else throw Error("addEventListener and attachEvent are unavailable.");return ie}function je(){function k(ie){return ee.call(k.src,k.listener,ie)}const ee=ot;return k}function We(k,ee,ie,we,He){if(Array.isArray(ee))for(var tt=0;tt<ee.length;tt++)We(k,ee[tt],ie,we,He);else we=c(we)?!!we.capture:!!we,ie=Yt(ie),k&&k[ve]?(k=k.i,ee=String(ee).toString(),ee in k.g&&(tt=k.g[ee],ie=Re(tt,ie,we,He),-1<ie&&(de(tt[ie]),Array.prototype.splice.call(tt,ie,1),tt.length==0&&(delete k.g[ee],k.h--)))):k&&(k=Dt(k))&&(ee=k.g[ee.toString()],k=-1,ee&&(k=Re(ee,ie,we,He)),(ie=-1<k?ee[k]:null)&&ct(ie))}function ct(k){if(typeof k!="number"&&k&&!k.da){var ee=k.src;if(ee&&ee[ve])oe(ee.i,k);else{var ie=k.type,we=k.proxy;ee.removeEventListener?ee.removeEventListener(ie,we,k.capture):ee.detachEvent?ee.detachEvent(wt(ie),we):ee.addListener&&ee.removeListener&&ee.removeListener(we),(ie=Dt(ee))?(oe(ie,k),ie.h==0&&(ie.src=null,ee[qe]=null)):de(k)}}}function wt(k){return k in Ie?Ie[k]:Ie[k]="on"+k}function ot(k,ee){if(k.da)k=!0;else{ee=new ne(ee,this);var ie=k.listener,we=k.ha||k.src;k.fa&&ct(k),k=ie.call(we,ee)}return k}function Dt(k){return k=k[qe],k instanceof ce?k:null}var Rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yt(k){return typeof k=="function"?k:(k[Rt]||(k[Rt]=function(ee){return k.handleEvent(ee)}),k[Rt])}function Lt(){O.call(this),this.i=new ce(this),this.M=this,this.F=null}y(Lt,O),Lt.prototype[ve]=!0,Lt.prototype.removeEventListener=function(k,ee,ie,we){We(this,k,ee,ie,we)};function Qt(k,ee){var ie,we=k.F;if(we)for(ie=[];we;we=we.F)ie.push(we);if(k=k.M,we=ee.type||ee,typeof ee=="string")ee=new W(ee,k);else if(ee instanceof W)ee.target=ee.target||k;else{var He=ee;ee=new W(we,k),j(ee,He)}if(He=!0,ie)for(var tt=ie.length-1;0<=tt;tt--){var St=ee.g=ie[tt];He=qt(St,we,!0,ee)&&He}if(St=ee.g=k,He=qt(St,we,!0,ee)&&He,He=qt(St,we,!1,ee)&&He,ie)for(tt=0;tt<ie.length;tt++)St=ee.g=ie[tt],He=qt(St,we,!1,ee)&&He}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var k=this.i,ee;for(ee in k.g){for(var ie=k.g[ee],we=0;we<ie.length;we++)de(ie[we]);delete k.g[ee],k.h--}}this.F=null},Lt.prototype.K=function(k,ee,ie,we){return this.i.add(String(k),ee,!1,ie,we)},Lt.prototype.L=function(k,ee,ie,we){return this.i.add(String(k),ee,!0,ie,we)};function qt(k,ee,ie,we){if(ee=k.i.g[String(ee)],!ee)return!0;ee=ee.concat();for(var He=!0,tt=0;tt<ee.length;++tt){var St=ee[tt];if(St&&!St.da&&St.capture==ie){var vr=St.listener,tn=St.ha||St.src;St.fa&&oe(k.i,St),He=vr.call(tn,we)!==!1&&He}}return He&&!we.defaultPrevented}function kt(k,ee,ie){if(typeof k=="function")ie&&(k=p(k,ie));else if(k&&typeof k.handleEvent=="function")k=p(k.handleEvent,k);else throw Error("Invalid listener argument");return 2147483647<Number(ee)?-1:o.setTimeout(k,ee||0)}function It(k){k.g=kt(()=>{k.g=null,k.i&&(k.i=!1,It(k))},k.l);const ee=k.h;k.h=null,k.m.apply(null,ee)}class mt extends O{constructor(ee,ie){super(),this.m=ee,this.l=ie,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _r(k){O.call(this),this.h=k,this.g={}}y(_r,O);var Jt=[];function mn(k){F(k.g,function(ee,ie){this.g.hasOwnProperty(ie)&&ct(ee)},k),k.g={}}_r.prototype.N=function(){_r.aa.N.call(this),mn(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=o.JSON.stringify,Or=o.JSON.parse,Rn=class{stringify(k){return o.JSON.stringify(k,void 0)}parse(k){return o.JSON.parse(k,void 0)}};function Lr(){}Lr.prototype.h=null;function ga(k){return k.h||(k.h=k.i())}function on(){}var ls={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bs(){W.call(this,"d")}y(bs,W);function Qr(){W.call(this,"c")}y(Qr,W);var nr={},Kr=null;function xa(){return Kr=Kr||new Lt}nr.La="serverreachability";function es(k){W.call(this,nr.La,k)}y(es,W);function Bs(k){const ee=xa();Qt(ee,new es(ee))}nr.STAT_EVENT="statevent";function Ua(k,ee){W.call(this,nr.STAT_EVENT,k),this.stat=ee}y(Ua,W);function Gt(k){const ee=xa();Qt(ee,new Ua(ee,k))}nr.Ma="timingevent";function gn(k,ee){W.call(this,nr.Ma,k),this.size=ee}y(gn,W);function ln(k,ee){if(typeof k!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){k()},ee)}function Ln(){this.g=!0}Ln.prototype.xa=function(){this.g=!1};function zn(k,ee,ie,we,He,tt){k.info(function(){if(k.g)if(tt)for(var St="",vr=tt.split("&"),tn=0;tn<vr.length;tn++){var Dr=vr[tn].split("=");if(1<Dr.length){var Nn=Dr[0];Dr=Dr[1];var Pn=Nn.split("_");St=2<=Pn.length&&Pn[1]=="type"?St+(Nn+"="+Dr+"&"):St+(Nn+"=redacted&")}}else St=null;else St=tt;return"XMLHTTP REQ ("+we+") [attempt "+He+"]: "+ee+`
`+ie+`
`+St})}function ts(k,ee,ie,we,He,tt,St){k.info(function(){return"XMLHTTP RESP ("+we+") [ attempt "+He+"]: "+ee+`
`+ie+`
`+tt+" "+St})}function me(k,ee,ie,we){k.info(function(){return"XMLHTTP TEXT ("+ee+"): "+_e(k,ie)+(we?" "+we:"")})}function Be(k,ee){k.info(function(){return"TIMEOUT: "+ee})}Ln.prototype.info=function(){};function _e(k,ee){if(!k.g)return ee;if(!ee)return null;try{var ie=JSON.parse(ee);if(ie){for(k=0;k<ie.length;k++)if(Array.isArray(ie[k])){var we=ie[k];if(!(2>we.length)){var He=we[1];if(Array.isArray(He)&&!(1>He.length)){var tt=He[0];if(tt!="noop"&&tt!="stop"&&tt!="close")for(var St=1;St<He.length;St++)He[St]=""}}}}return wr(ie)}catch{return ee}}var Se={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ke;function $e(){}y($e,Lr),$e.prototype.g=function(){return new XMLHttpRequest},$e.prototype.i=function(){return{}},ke=new $e;function nt(k,ee,ie,we){this.j=k,this.i=ee,this.l=ie,this.R=we||1,this.U=new _r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ve}function Ve(){this.i=null,this.g="",this.h=!1}var Xe={},et={};function yt(k,ee,ie){k.L=1,k.v=Sl(Oa(ee)),k.m=ie,k.P=!0,Bt(k,null)}function Bt(k,ee){k.F=Date.now(),Ut(k),k.A=Oa(k.v);var ie=k.A,we=k.R;Array.isArray(we)||(we=[String(we)]),xr(ie.i,"t",we),k.C=0,ie=k.j.J,k.h=new Ve,k.g=fe(k.j,ie?ee:null,!k.m),0<k.O&&(k.M=new mt(p(k.Y,k,k.g),k.O)),ee=k.U,ie=k.g,we=k.ca;var He="readystatechange";Array.isArray(He)||(He&&(Jt[0]=He.toString()),He=Jt);for(var tt=0;tt<He.length;tt++){var St=Ee(ie,He[tt],we||ee.handleEvent,!1,ee.h||ee);if(!St)break;ee.g[St.key]=St}ee=k.H?_(k.H):{},k.m?(k.u||(k.u="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",k.g.ea(k.A,k.u,k.m,ee)):(k.u="GET",k.g.ea(k.A,k.u,null,ee)),Bs(),zn(k.i,k.u,k.A,k.l,k.R,k.m)}nt.prototype.ca=function(k){k=k.target;const ee=this.M;ee&&Hs(k)==3?ee.j():this.Y(k)},nt.prototype.Y=function(k){try{if(k==this.g)e:{const Pn=Hs(this.g);var ee=this.g.Ba();const To=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||md(this.g)))){this.J||Pn!=4||ee==7||(ee==8||0>=To?Bs(3):Bs(2)),Hr(this);var ie=this.g.Z();this.X=ie;t:if(Ht(this)){var we=md(this.g);k="";var He=we.length,tt=Hs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Vr(this);var St="";break t}this.h.i=new o.TextDecoder}for(ee=0;ee<He;ee++)this.h.h=!0,k+=this.h.i.decode(we[ee],{stream:!(tt&&ee==He-1)});we.length=0,this.h.g+=k,this.C=0,St=this.h.g}else St=this.g.oa();if(this.o=ie==200,ts(this.i,this.u,this.A,this.l,this.R,Pn,ie),this.o){if(this.T&&!this.K){t:{if(this.g){var vr,tn=this.g;if((vr=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(vr)){var Dr=vr;break t}}Dr=null}if(ie=Dr)me(this.i,this.l,ie,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Os(this,ie);else{this.o=!1,this.s=3,Gt(12),$r(this),Vr(this);break e}}if(this.P){ie=!0;let ks;for(;!this.J&&this.C<St.length;)if(ks=Nt(this,St),ks==et){Pn==4&&(this.s=4,Gt(14),ie=!1),me(this.i,this.l,null,"[Incomplete Response]");break}else if(ks==Xe){this.s=4,Gt(15),me(this.i,this.l,St,"[Invalid Chunk]"),ie=!1;break}else me(this.i,this.l,ks,null),Os(this,ks);if(Ht(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||St.length!=0||this.h.h||(this.s=1,Gt(16),ie=!1),this.o=this.o&&ie,!ie)me(this.i,this.l,St,"[Invalid Chunked Response]"),$r(this),Vr(this);else if(0<St.length&&!this.W){this.W=!0;var Nn=this.j;Nn.g==this&&Nn.ba&&!Nn.M&&(Nn.j.info("Great, no buffering proxy detected. Bytes received: "+St.length),Fl(Nn),Nn.M=!0,Gt(11))}}else me(this.i,this.l,St,null),Os(this,St);Pn==4&&$r(this),this.o&&!this.J&&(Pn==4?Dl(this.j,this):(this.o=!1,Ut(this)))}else Bl(this.g),ie==400&&0<St.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),$r(this),Vr(this)}}}catch{}finally{}};function Ht(k){return k.g?k.u=="GET"&&k.L!=2&&k.j.Ca:!1}function Nt(k,ee){var ie=k.C,we=ee.indexOf(`
`,ie);return we==-1?et:(ie=Number(ee.substring(ie,we)),isNaN(ie)?Xe:(we+=1,we+ie>ee.length?et:(ee=ee.slice(we,we+ie),k.C=we+ie,ee)))}nt.prototype.cancel=function(){this.J=!0,$r(this)};function Ut(k){k.S=Date.now()+k.I,fr(k,k.I)}function fr(k,ee){if(k.B!=null)throw Error("WatchDog timer not null");k.B=ln(p(k.ba,k),ee)}function Hr(k){k.B&&(o.clearTimeout(k.B),k.B=null)}nt.prototype.ba=function(){this.B=null;const k=Date.now();0<=k-this.S?(Be(this.i,this.A),this.L!=2&&(Bs(),Gt(17)),$r(this),this.s=2,Vr(this)):fr(this,this.S-k)};function Vr(k){k.j.G==0||k.J||Dl(k.j,k)}function $r(k){Hr(k);var ee=k.M;ee&&typeof ee.ma=="function"&&ee.ma(),k.M=null,mn(k.U),k.g&&(ee=k.g,k.g=null,ee.abort(),ee.ma())}function Os(k,ee){try{var ie=k.j;if(ie.G!=0&&(ie.g==k||Ma(ie.h,k))){if(!k.K&&Ma(ie.h,k)&&ie.G==3){try{var we=ie.Da.g.parse(ee)}catch{we=null}if(Array.isArray(we)&&we.length==3){var He=we;if(He[0]==0){e:if(!ie.u){if(ie.g)if(ie.g.F+3e3<k.F)Jo(ie),ru(ie);else break e;gc(ie),Gt(18)}}else ie.za=He[1],0<ie.za-ie.T&&37500>He[2]&&ie.F&&ie.v==0&&!ie.C&&(ie.C=ln(p(ie.Za,ie),6e3));if(1>=ea(ie.h)&&ie.ca){try{ie.ca()}catch{}ie.ca=void 0}}else Ya(ie,11)}else if((k.K||ie.g==k)&&Jo(ie),!B(ee))for(He=ie.Da.g.parse(ee),ee=0;ee<He.length;ee++){let Dr=He[ee];if(ie.T=Dr[0],Dr=Dr[1],ie.G==2)if(Dr[0]=="c"){ie.K=Dr[1],ie.ia=Dr[2];const Nn=Dr[3];Nn!=null&&(ie.la=Nn,ie.j.info("VER="+ie.la));const Pn=Dr[4];Pn!=null&&(ie.Aa=Pn,ie.j.info("SVER="+ie.Aa));const To=Dr[5];To!=null&&typeof To=="number"&&0<To&&(we=1.5*To,ie.L=we,ie.j.info("backChannelRequestTimeoutMs_="+we)),we=ie;const ks=k.g;if(ks){const Di=ks.g?ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Di){var tt=we.h;tt.g||Di.indexOf("spdy")==-1&&Di.indexOf("quic")==-1&&Di.indexOf("h2")==-1||(tt.j=tt.l,tt.g=new Set,tt.h&&(rs(tt,tt.h),tt.h=null))}if(we.D){const Rl=ks.g?ks.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(we.ya=Rl,Tn(we.I,we.D,Rl))}}ie.G=3,ie.l&&ie.l.ua(),ie.ba&&(ie.R=Date.now()-k.F,ie.j.info("Handshake RTT: "+ie.R+"ms")),we=ie;var St=k;if(we.qa=G(we,we.J?we.ia:null,we.W),St.K){ya(we.h,St);var vr=St,tn=we.L;tn&&(vr.I=tn),vr.B&&(Hr(vr),Ut(vr)),we.g=St}else su(we);0<ie.i.length&&nu(ie)}else Dr[0]!="stop"&&Dr[0]!="close"||Ya(ie,7);else ie.G==3&&(Dr[0]=="stop"||Dr[0]=="close"?Dr[0]=="stop"?Ya(ie,7):Xo(ie):Dr[0]!="noop"&&ie.l&&ie.l.ta(Dr),ie.v=0)}}Bs(4)}catch{}}var Ni=class{constructor(k,ee){this.g=k,this.map=ee}};function js(k){this.l=k||10,o.PerformanceNavigationTiming?(k=o.performance.getEntriesByType("navigation"),k=0<k.length&&(k[0].nextHopProtocol=="hq"||k[0].nextHopProtocol=="h2")):k=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=k?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function va(k){return k.h?!0:k.g?k.g.size>=k.j:!1}function ea(k){return k.h?1:k.g?k.g.size:0}function Ma(k,ee){return k.h?k.h==ee:k.g?k.g.has(ee):!1}function rs(k,ee){k.g?k.g.add(ee):k.h=ee}function ya(k,ee){k.h&&k.h==ee?k.h=null:k.g&&k.g.has(ee)&&k.g.delete(ee)}js.prototype.cancel=function(){if(this.i=Zc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const k of this.g.values())k.cancel();this.g.clear()}};function Zc(k){if(k.h!=null)return k.i.concat(k.h.D);if(k.g!=null&&k.g.size!==0){let ee=k.i;for(const ie of k.g.values())ee=ee.concat(ie.D);return ee}return x(k.i)}function fd(k){if(k.V&&typeof k.V=="function")return k.V();if(typeof Map<"u"&&k instanceof Map||typeof Set<"u"&&k instanceof Set)return Array.from(k.values());if(typeof k=="string")return k.split("");if(l(k)){for(var ee=[],ie=k.length,we=0;we<ie;we++)ee.push(k[we]);return ee}ee=[],ie=0;for(we in k)ee[ie++]=k[we];return ee}function Cl(k){if(k.na&&typeof k.na=="function")return k.na();if(!k.V||typeof k.V!="function"){if(typeof Map<"u"&&k instanceof Map)return Array.from(k.keys());if(!(typeof Set<"u"&&k instanceof Set)){if(l(k)||typeof k=="string"){var ee=[];k=k.length;for(var ie=0;ie<k;ie++)ee.push(ie);return ee}ee=[],ie=0;for(const we in k)ee[ie++]=we;return ee}}}function oA(k,ee){if(k.forEach&&typeof k.forEach=="function")k.forEach(ee,void 0);else if(l(k)||typeof k=="string")Array.prototype.forEach.call(k,ee,void 0);else for(var ie=Cl(k),we=fd(k),He=we.length,tt=0;tt<He;tt++)ee.call(void 0,we[tt],ie&&ie[tt],k)}var Pa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eu(k,ee){if(k){k=k.split("&");for(var ie=0;ie<k.length;ie++){var we=k[ie].indexOf("="),He=null;if(0<=we){var tt=k[ie].substring(0,we);He=k[ie].substring(we+1)}else tt=k[ie];ee(tt,He?decodeURIComponent(He.replace(/\+/g," ")):"")}}}function xn(k){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,k instanceof xn){this.h=k.h,El(this,k.j),this.o=k.o,this.g=k.g,_l(this,k.s),this.l=k.l;var ee=k.i,ie=new wo;ie.i=ee.i,ee.g&&(ie.g=new Map(ee.g),ie.h=ee.h),yo(this,ie),this.m=k.m}else k&&(ee=String(k).match(Pa))?(this.h=!1,El(this,ee[1]||"",!0),this.o=Bi(ee[2]||""),this.g=Bi(ee[3]||"",!0),_l(this,ee[4]),this.l=Bi(ee[5]||"",!0),yo(this,ee[6]||"",!0),this.m=Bi(ee[7]||"")):(this.h=!1,this.i=new wo(null,this.h))}xn.prototype.toString=function(){var k=[],ee=this.j;ee&&k.push(qo(ee,lA,!0),":");var ie=this.g;return(ie||ee=="file")&&(k.push("//"),(ee=this.o)&&k.push(qo(ee,lA,!0),"@"),k.push(encodeURIComponent(String(ie)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ie=this.s,ie!=null&&k.push(":",String(ie))),(ie=this.l)&&(this.g&&ie.charAt(0)!="/"&&k.push("/"),k.push(qo(ie,ie.charAt(0)=="/"?Ko:cA,!0))),(ie=this.i.toString())&&k.push("?",ie),(ie=this.m)&&k.push("#",qo(ie,$o)),k.join("")};function Oa(k){return new xn(k)}function El(k,ee,ie){k.j=ie?Bi(ee,!0):ee,k.j&&(k.j=k.j.replace(/:$/,""))}function _l(k,ee){if(ee){if(ee=Number(ee),isNaN(ee)||0>ee)throw Error("Bad port number "+ee);k.s=ee}else k.s=null}function yo(k,ee,ie){ee instanceof wo?(k.i=ee,pd(k.i,k.h)):(ie||(ee=qo(ee,tu)),k.i=new wo(ee,k.h))}function Tn(k,ee,ie){k.i.set(ee,ie)}function Sl(k){return Tn(k,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),k}function Bi(k,ee){return k?ee?decodeURI(k.replace(/%25/g,"%2525")):decodeURIComponent(k):""}function qo(k,ee,ie){return typeof k=="string"?(k=encodeURI(k).replace(ee,hd),ie&&(k=k.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k):null}function hd(k){return k=k.charCodeAt(0),"%"+(k>>4&15).toString(16)+(k&15).toString(16)}var lA=/[#\/\?@]/g,cA=/[#\?:]/g,Ko=/[#\?]/g,tu=/[#\?@]/g,$o=/#/g;function wo(k,ee){this.h=this.g=null,this.i=k||null,this.j=!!ee}function Gn(k){k.g||(k.g=new Map,k.h=0,k.i&&eu(k.i,function(ee,ie){k.add(decodeURIComponent(ee.replace(/\+/g," ")),ie)}))}t=wo.prototype,t.add=function(k,ee){Gn(this),this.i=null,k=Co(this,k);var ie=this.g.get(k);return ie||this.g.set(k,ie=[]),ie.push(ee),this.h+=1,this};function Wo(k,ee){Gn(k),ee=Co(k,ee),k.g.has(ee)&&(k.i=null,k.h-=k.g.get(ee).length,k.g.delete(ee))}function bo(k,ee){return Gn(k),ee=Co(k,ee),k.g.has(ee)}t.forEach=function(k,ee){Gn(this),this.g.forEach(function(ie,we){ie.forEach(function(He){k.call(ee,He,we,this)},this)},this)},t.na=function(){Gn(this);const k=Array.from(this.g.values()),ee=Array.from(this.g.keys()),ie=[];for(let we=0;we<ee.length;we++){const He=k[we];for(let tt=0;tt<He.length;tt++)ie.push(ee[we])}return ie},t.V=function(k){Gn(this);let ee=[];if(typeof k=="string")bo(this,k)&&(ee=ee.concat(this.g.get(Co(this,k))));else{k=Array.from(this.g.values());for(let ie=0;ie<k.length;ie++)ee=ee.concat(k[ie])}return ee},t.set=function(k,ee){return Gn(this),this.i=null,k=Co(this,k),bo(this,k)&&(this.h-=this.g.get(k).length),this.g.set(k,[ee]),this.h+=1,this},t.get=function(k,ee){return k?(k=this.V(k),0<k.length?String(k[0]):ee):ee};function xr(k,ee,ie){Wo(k,ee),0<ie.length&&(k.i=null,k.g.set(Co(k,ee),x(ie)),k.h+=ie.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const k=[],ee=Array.from(this.g.keys());for(var ie=0;ie<ee.length;ie++){var we=ee[ie];const tt=encodeURIComponent(String(we)),St=this.V(we);for(we=0;we<St.length;we++){var He=tt;St[we]!==""&&(He+="="+encodeURIComponent(String(St[we]))),k.push(He)}}return this.i=k.join("&")};function Co(k,ee){return ee=String(ee),k.j&&(ee=ee.toLowerCase()),ee}function pd(k,ee){ee&&!k.j&&(Gn(k),k.i=null,k.g.forEach(function(ie,we){var He=we.toLowerCase();we!=He&&(Wo(this,we),xr(this,He,ie))},k)),k.j=ee}function Ka(k,ee){const ie=new Ln;if(o.Image){const we=new Image;we.onload=m(Ai,ie,"TestLoadImage: loaded",!0,ee,we),we.onerror=m(Ai,ie,"TestLoadImage: error",!1,ee,we),we.onabort=m(Ai,ie,"TestLoadImage: abort",!1,ee,we),we.ontimeout=m(Ai,ie,"TestLoadImage: timeout",!1,ee,we),o.setTimeout(function(){we.ontimeout&&we.ontimeout()},1e4),we.src=k}else ee(!1)}function ki(k,ee){const ie=new Ln,we=new AbortController,He=setTimeout(()=>{we.abort(),Ai(ie,"TestPingServer: timeout",!1,ee)},1e4);fetch(k,{signal:we.signal}).then(tt=>{clearTimeout(He),tt.ok?Ai(ie,"TestPingServer: ok",!0,ee):Ai(ie,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(He),Ai(ie,"TestPingServer: error",!1,ee)})}function Ai(k,ee,ie,we,He){try{He&&(He.onload=null,He.onerror=null,He.onabort=null,He.ontimeout=null),we(ie)}catch{}}function Eo(){this.g=new Rn}function Ii(k,ee,ie){const we=ie||"";try{oA(k,function(He,tt){let St=He;c(He)&&(St=wr(He)),ee.push(we+tt+"="+encodeURIComponent(St))})}catch(He){throw ee.push(we+"type="+encodeURIComponent("_badmap")),He}}function Tl(k){this.l=k.Ub||null,this.j=k.eb||!1}y(Tl,Lr),Tl.prototype.g=function(){return new Yo(this.l,this.j)},Tl.prototype.i=function(k){return function(){return k}}({});function Yo(k,ee){Lt.call(this),this.D=k,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Yo,Lt),t=Yo.prototype,t.open=function(k,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=k,this.A=ee,this.readyState=1,$a(this)},t.send=function(k){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ee={headers:this.u,method:this.B,credentials:this.m,cache:void 0};k&&(ee.body=k),(this.D||o).fetch(new Request(this.A,ee)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fi(this)),this.readyState=0},t.Sa=function(k){if(this.g&&(this.l=k,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=k.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if(this.responseType==="arraybuffer")k.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in k){if(this.j=k.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uA(this)}else k.text().then(this.Ra.bind(this),this.ga.bind(this))};function uA(k){k.j.read().then(k.Pa.bind(k)).catch(k.ga.bind(k))}t.Pa=function(k){if(this.g){if(this.o&&k.value)this.response.push(k.value);else if(!this.o){var ee=k.value?k.value:new Uint8Array(0);(ee=this.v.decode(ee,{stream:!k.done}))&&(this.response=this.responseText+=ee)}k.done?Fi(this):$a(this),this.readyState==3&&uA(this)}},t.Ra=function(k){this.g&&(this.response=this.responseText=k,Fi(this))},t.Qa=function(k){this.g&&(this.response=k,Fi(this))},t.ga=function(){this.g&&Fi(this)};function Fi(k){k.readyState=4,k.l=null,k.j=null,k.v=null,$a(k)}t.setRequestHeader=function(k,ee){this.u.append(k,ee)},t.getResponseHeader=function(k){return this.h&&this.h.get(k.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const k=[],ee=this.h.entries();for(var ie=ee.next();!ie.done;)ie=ie.value,k.push(ie[0]+": "+ie[1]),ie=ee.next();return k.join(`\r
`)};function $a(k){k.onreadystatechange&&k.onreadystatechange.call(k)}Object.defineProperty(Yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(k){this.m=k?"include":"same-origin"}});function _o(k){let ee="";return F(k,function(ie,we){ee+=we,ee+=":",ee+=ie,ee+=`\r
`}),ee}function Qs(k,ee,ie){e:{for(we in ie){var we=!1;break e}we=!0}we||(ie=_o(ie),typeof k=="string"?ie!=null&&encodeURIComponent(String(ie)):Tn(k,ee,ie))}function en(k){Lt.call(this),this.headers=new Map,this.o=k||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(en,Lt);var Nl=/^https?$/i,So=["POST","PUT"];t=en.prototype,t.Ha=function(k){this.J=k},t.ea=function(k,ee,ie,we){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+k);ee=ee?ee.toUpperCase():"GET",this.D=k,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?ga(this.o):ga(ke),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(ee,String(k),!0),this.B=!1}catch(tt){AA(this,tt);return}if(k=ie||"",ie=new Map(this.headers),we)if(Object.getPrototypeOf(we)===Object.prototype)for(var He in we)ie.set(He,we[He]);else if(typeof we.keys=="function"&&typeof we.get=="function")for(const tt of we.keys())ie.set(tt,we.get(tt));else throw Error("Unknown input type for opt_headers: "+String(we));we=Array.from(ie.keys()).find(tt=>tt.toLowerCase()=="content-type"),He=o.FormData&&k instanceof o.FormData,!(0<=Array.prototype.indexOf.call(So,ee,void 0))||we||He||ie.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[tt,St]of ie)this.g.setRequestHeader(tt,St);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wa(this),this.u=!0,this.g.send(k),this.u=!1}catch(tt){AA(this,tt)}};function AA(k,ee){k.h=!1,k.g&&(k.j=!0,k.g.abort(),k.j=!1),k.l=ee,k.m=5,dc(k),lo(k)}function dc(k){k.A||(k.A=!0,Qt(k,"complete"),Qt(k,"error"))}t.abort=function(k){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=k||7,Qt(this,"complete"),Qt(this,"abort"),lo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lo(this,!0)),en.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fc(this):this.bb())},t.bb=function(){fc(this)};function fc(k){if(k.h&&typeof i<"u"&&(!k.v[1]||Hs(k)!=4||k.Z()!=2)){if(k.u&&Hs(k)==4)kt(k.Ea,0,k);else if(Qt(k,"readystatechange"),Hs(k)==4){k.h=!1;try{const St=k.Z();e:switch(St){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var ie;if(!(ie=ee)){var we;if(we=St===0){var He=String(k.D).match(Pa)[1]||null;!He&&o.self&&o.self.location&&(He=o.self.location.protocol.slice(0,-1)),we=!Nl.test(He?He.toLowerCase():"")}ie=we}if(ie)Qt(k,"complete"),Qt(k,"success");else{k.m=6;try{var tt=2<Hs(k)?k.g.statusText:""}catch{tt=""}k.l=tt+" ["+k.Z()+"]",dc(k)}}finally{lo(k)}}}}function lo(k,ee){if(k.g){Wa(k);const ie=k.g,we=k.v[0]?()=>{}:null;k.g=null,k.v=null,ee||Qt(k,"ready");try{ie.onreadystatechange=we}catch{}}}function Wa(k){k.I&&(o.clearTimeout(k.I),k.I=null)}t.isActive=function(){return!!this.g};function Hs(k){return k.g?k.g.readyState:0}t.Z=function(){try{return 2<Hs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(k){if(this.g){var ee=this.g.responseText;return k&&ee.indexOf(k)==0&&(ee=ee.substring(k.length)),Or(ee)}};function md(k){try{if(!k.g)return null;if("response"in k.g)return k.g.response;switch(k.H){case"":case"text":return k.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in k.g)return k.g.mozResponseArrayBuffer}return null}catch{return null}}function Bl(k){const ee={};k=(k.g&&2<=Hs(k)&&k.g.getAllResponseHeaders()||"").split(`\r
`);for(let we=0;we<k.length;we++){if(B(k[we]))continue;var ie=R(k[we]);const He=ie[0];if(ie=ie[1],typeof ie!="string")continue;ie=ie.trim();const tt=ee[He]||[];ee[He]=tt,tt.push(ie)}C(ee,function(we){return we.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(k,ee,ie){return ie&&ie.internalChannelParams&&ie.internalChannelParams[k]||ee}function kl(k){this.Aa=0,this.i=[],this.j=new Ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ja("failFast",!1,k),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ja("baseRetryDelayMs",5e3,k),this.cb=ja("retryDelaySeedMs",1e4,k),this.Wa=ja("forwardChannelMaxRetries",2,k),this.wa=ja("forwardChannelRequestTimeoutMs",2e4,k),this.pa=k&&k.xmlHttpFactory||void 0,this.Xa=k&&k.Tb||void 0,this.Ca=k&&k.useFetchStreams||!1,this.L=void 0,this.J=k&&k.supportsCrossDomainXhr||!1,this.K="",this.h=new js(k&&k.concurrentRequestLimit),this.Da=new Eo,this.P=k&&k.fastHandshake||!1,this.O=k&&k.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=k&&k.Rb||!1,k&&k.xa&&this.j.xa(),k&&k.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&k&&k.detectBufferingProxy||!1,this.ja=void 0,k&&k.longPollingTimeout&&0<k.longPollingTimeout&&(this.ja=k.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=kl.prototype,t.la=8,t.G=1,t.connect=function(k,ee,ie,we){Gt(0),this.W=k,this.H=ee||{},ie&&we!==void 0&&(this.H.OSID=ie,this.H.OAID=we),this.F=this.X,this.I=G(this,null,this.W),nu(this)};function Xo(k){if(hc(k),k.G==3){var ee=k.U++,ie=Oa(k.I);if(Tn(ie,"SID",k.K),Tn(ie,"RID",ee),Tn(ie,"TYPE","terminate"),Il(k,ie),ee=new nt(k,k.j,ee),ee.L=2,ee.v=Sl(Oa(ie)),ie=!1,o.navigator&&o.navigator.sendBeacon)try{ie=o.navigator.sendBeacon(ee.v.toString(),"")}catch{}!ie&&o.Image&&(new Image().src=ee.v,ie=!0),ie||(ee.g=fe(ee.j,null),ee.g.ea(ee.v)),ee.F=Date.now(),Ut(ee)}au(k)}function ru(k){k.g&&(Fl(k),k.g.cancel(),k.g=null)}function hc(k){ru(k),k.u&&(o.clearTimeout(k.u),k.u=null),Jo(k),k.h.cancel(),k.s&&(typeof k.s=="number"&&o.clearTimeout(k.s),k.s=null)}function nu(k){if(!va(k.h)&&!k.s){k.s=!0;var ee=k.Ga;re||K(),V||(re(),V=!0),J.add(ee,k),k.B=0}}function dA(k,ee){return ea(k.h)>=k.h.j-(k.s?1:0)?!1:k.s?(k.i=ee.D.concat(k.i),!0):k.G==1||k.G==2||k.B>=(k.Va?0:k.Wa)?!1:(k.s=ln(p(k.Ga,k,ee),xc(k,k.B)),k.B++,!0)}t.Ga=function(k){if(this.s)if(this.s=null,this.G==1){if(!k){this.U=Math.floor(1e5*Math.random()),k=this.U++;const He=new nt(this,this.j,k);let tt=this.o;if(this.S&&(tt?(tt=_(tt),j(tt,this.S)):tt=this.S),this.m!==null||this.O||(He.H=tt,tt=null),this.P)e:{for(var ee=0,ie=0;ie<this.i.length;ie++){t:{var we=this.i[ie];if("__data__"in we.map&&(we=we.map.__data__,typeof we=="string")){we=we.length;break t}we=void 0}if(we===void 0)break;if(ee+=we,4096<ee){ee=ie;break e}if(ee===4096||ie===this.i.length-1){ee=ie+1;break e}}ee=1e3}else ee=1e3;ee=mc(this,He,ee),ie=Oa(this.I),Tn(ie,"RID",k),Tn(ie,"CVER",22),this.D&&Tn(ie,"X-HTTP-Session-Id",this.D),Il(this,ie),tt&&(this.O?ee="headers="+encodeURIComponent(String(_o(tt)))+"&"+ee:this.m&&Qs(ie,this.m,tt)),rs(this.h,He),this.Ua&&Tn(ie,"TYPE","init"),this.P?(Tn(ie,"$req",ee),Tn(ie,"SID","null"),He.T=!0,yt(He,ie,null)):yt(He,ie,ee),this.G=2}}else this.G==3&&(k?pc(this,k):this.i.length==0||va(this.h)||pc(this))};function pc(k,ee){var ie;ee?ie=ee.l:ie=k.U++;const we=Oa(k.I);Tn(we,"SID",k.K),Tn(we,"RID",ie),Tn(we,"AID",k.T),Il(k,we),k.m&&k.o&&Qs(we,k.m,k.o),ie=new nt(k,k.j,ie,k.B+1),k.m===null&&(ie.H=k.o),ee&&(k.i=ee.D.concat(k.i)),ee=mc(k,ie,1e3),ie.I=Math.round(.5*k.wa)+Math.round(.5*k.wa*Math.random()),rs(k.h,ie),yt(ie,we,ee)}function Il(k,ee){k.H&&F(k.H,function(ie,we){Tn(ee,we,ie)}),k.l&&oA({},function(ie,we){Tn(ee,we,ie)})}function mc(k,ee,ie){ie=Math.min(k.i.length,ie);var we=k.l?p(k.l.Na,k.l,k):null;e:{var He=k.i;let tt=-1;for(;;){const St=["count="+ie];tt==-1?0<ie?(tt=He[0].g,St.push("ofs="+tt)):tt=0:St.push("ofs="+tt);let vr=!0;for(let tn=0;tn<ie;tn++){let Dr=He[tn].g;const Nn=He[tn].map;if(Dr-=tt,0>Dr)tt=Math.max(0,He[tn].g-100),vr=!1;else try{Ii(Nn,St,"req"+Dr+"_")}catch{we&&we(Nn)}}if(vr){we=St.join("&");break e}}}return k=k.i.splice(0,ie),ee.D=k,we}function su(k){if(!k.g&&!k.u){k.Y=1;var ee=k.Fa;re||K(),V||(re(),V=!0),J.add(ee,k),k.v=0}}function gc(k){return k.g||k.u||3<=k.v?!1:(k.Y++,k.u=ln(p(k.Fa,k),xc(k,k.v)),k.v++,!0)}t.Fa=function(){if(this.u=null,gd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var k=2*this.R;this.j.info("BP detection timer enabled: "+k),this.A=ln(p(this.ab,this),k)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),ru(this),gd(this))};function Fl(k){k.A!=null&&(o.clearTimeout(k.A),k.A=null)}function gd(k){k.g=new nt(k,k.j,"rpc",k.Y),k.m===null&&(k.g.H=k.o),k.g.O=0;var ee=Oa(k.qa);Tn(ee,"RID","rpc"),Tn(ee,"SID",k.K),Tn(ee,"AID",k.T),Tn(ee,"CI",k.F?"0":"1"),!k.F&&k.ja&&Tn(ee,"TO",k.ja),Tn(ee,"TYPE","xmlhttp"),Il(k,ee),k.m&&k.o&&Qs(ee,k.m,k.o),k.L&&(k.g.I=k.L);var ie=k.g;k=k.ia,ie.L=1,ie.v=Sl(Oa(ee)),ie.m=null,ie.P=!0,Bt(ie,k)}t.Za=function(){this.C!=null&&(this.C=null,ru(this),gc(this),Gt(19))};function Jo(k){k.C!=null&&(o.clearTimeout(k.C),k.C=null)}function Dl(k,ee){var ie=null;if(k.g==ee){Jo(k),Fl(k),k.g=null;var we=2}else if(Ma(k.h,ee))ie=ee.D,ya(k.h,ee),we=1;else return;if(k.G!=0){if(ee.o)if(we==1){ie=ee.m?ee.m.length:0,ee=Date.now()-ee.F;var He=k.B;we=xa(),Qt(we,new gn(we,ie)),nu(k)}else su(k);else if(He=ee.s,He==3||He==0&&0<ee.X||!(we==1&&dA(k,ee)||we==2&&gc(k)))switch(ie&&0<ie.length&&(ee=k.h,ee.i=ee.i.concat(ie)),He){case 1:Ya(k,5);break;case 4:Ya(k,10);break;case 3:Ya(k,6);break;default:Ya(k,2)}}}function xc(k,ee){let ie=k.Ta+Math.floor(Math.random()*k.cb);return k.isActive()||(ie*=2),ie*ee}function Ya(k,ee){if(k.j.info("Error code "+ee),ee==2){var ie=p(k.fb,k),we=k.Xa;const He=!we;we=new xn(we||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||El(we,"https"),Sl(we),He?Ka(we.toString(),ie):ki(we.toString(),ie)}else Gt(2);k.G=0,k.l&&k.l.sa(ee),au(k),hc(k)}t.fb=function(k){k?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function au(k){if(k.G=0,k.ka=[],k.l){const ee=Zc(k.h);(ee.length!=0||k.i.length!=0)&&(E(k.ka,ee),E(k.ka,k.i),k.h.i.length=0,x(k.i),k.i.length=0),k.l.ra()}}function G(k,ee,ie){var we=ie instanceof xn?Oa(ie):new xn(ie);if(we.g!="")ee&&(we.g=ee+"."+we.g),_l(we,we.s);else{var He=o.location;we=He.protocol,ee=ee?ee+"."+He.hostname:He.hostname,He=+He.port;var tt=new xn(null);we&&El(tt,we),ee&&(tt.g=ee),He&&_l(tt,He),ie&&(tt.l=ie),we=tt}return ie=k.D,ee=k.ya,ie&&ee&&Tn(we,ie,ee),Tn(we,"VER",k.la),Il(k,we),we}function fe(k,ee,ie){if(ee&&!k.J)throw Error("Can't create secondary domain capable XhrIo object.");return ee=k.Ca&&!k.pa?new en(new Tl({eb:ie})):new en(k.pa),ee.Ha(k.J),ee}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fe(){}t=Fe.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ue(){}Ue.prototype.g=function(k,ee){return new ze(k,ee)};function ze(k,ee){Lt.call(this),this.g=new kl(ee),this.l=k,this.h=ee&&ee.messageUrlParams||null,k=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(k?k["X-Client-Protocol"]="webchannel":k={"X-Client-Protocol":"webchannel"}),this.g.o=k,k=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(k?k["X-WebChannel-Content-Type"]=ee.messageContentType:k={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.va&&(k?k["X-WebChannel-Client-Profile"]=ee.va:k={"X-WebChannel-Client-Profile":ee.va}),this.g.S=k,(k=ee&&ee.Sb)&&!B(k)&&(this.g.m=k),this.v=ee&&ee.supportsCrossDomainXhr||!1,this.u=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!B(ee)&&(this.g.D=ee,k=this.h,k!==null&&ee in k&&(k=this.h,ee in k&&delete k[ee])),this.j=new Vt(this)}y(ze,Lt),ze.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ze.prototype.close=function(){Xo(this.g)},ze.prototype.o=function(k){var ee=this.g;if(typeof k=="string"){var ie={};ie.__data__=k,k=ie}else this.u&&(ie={},ie.__data__=wr(k),k=ie);ee.i.push(new Ni(ee.Ya++,k)),ee.G==3&&nu(ee)},ze.prototype.N=function(){this.g.l=null,delete this.j,Xo(this.g),delete this.g,ze.aa.N.call(this)};function lt(k){bs.call(this),k.__headers__&&(this.headers=k.__headers__,this.statusCode=k.__status__,delete k.__headers__,delete k.__status__);var ee=k.__sm__;if(ee){e:{for(const ie in ee){k=ie;break e}k=void 0}(this.i=k)&&(k=this.i,ee=ee!==null&&k in ee?ee[k]:void 0),this.data=ee}else this.data=k}y(lt,bs);function _t(){Qr.call(this),this.status=1}y(_t,Qr);function Vt(k){this.g=k}y(Vt,Fe),Vt.prototype.ua=function(){Qt(this.g,"a")},Vt.prototype.ta=function(k){Qt(this.g,new lt(k))},Vt.prototype.sa=function(k){Qt(this.g,new _t)},Vt.prototype.ra=function(){Qt(this.g,"b")},Ue.prototype.createWebChannel=Ue.prototype.g,ze.prototype.send=ze.prototype.o,ze.prototype.open=ze.prototype.m,ze.prototype.close=ze.prototype.close,DP=function(){return new Ue},FP=function(){return xa()},IP=nr,A5={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,w2=Se,Te.COMPLETE="complete",kP=Te,on.EventType=ls,ls.OPEN="a",ls.CLOSE="b",ls.ERROR="c",ls.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,qg=on,en.prototype.listenOnce=en.prototype.L,en.prototype.getLastError=en.prototype.Ka,en.prototype.getLastErrorCode=en.prototype.Ba,en.prototype.getStatus=en.prototype.Z,en.prototype.getResponseJson=en.prototype.Oa,en.prototype.getResponseText=en.prototype.oa,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Ha,BP=en}).apply(typeof sy<"u"?sy:typeof self<"u"?self:typeof window<"u"?window:{});const K3="@firebase/firestore",$3="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid"),Ki.MOCK_USER=new Ki("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sm="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new xN("@firebase/firestore");function yp(){return Zh.logLevel}function Zt(t,...e){if(Zh.logLevel<=fn.DEBUG){const r=e.map(kN);Zh.debug(`Firestore (${Sm}): ${t}`,...r)}}function ZA(t,...e){if(Zh.logLevel<=fn.ERROR){const r=e.map(kN);Zh.error(`Firestore (${Sm}): ${t}`,...r)}}function im(t,...e){if(Zh.logLevel<=fn.WARN){const r=e.map(kN);Zh.warn(`Firestore (${Sm}): ${t}`,...r)}}function kN(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,RP(t,n,r)}function RP(t,e,r){let n=`FIRESTORE (${Sm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw ZA(n),new Error(n)}function Hn(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||RP(e,s,n)}function Pr(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kt extends eA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ki.UNAUTHENTICATED))}shutdown(){}}class qY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class KY{constructor(e){this.t=e,this.currentUser=Ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Hn(this.o===void 0,42304);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let a=new GA;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new GA,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{Zt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Zt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new GA)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Zt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Hn(typeof n.accessToken=="string",31837,{l:n}),new LP(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Hn(e===null||typeof e=="string",2055,{h:e}),new Ki(e)}}class $Y{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Ki.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WY{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new $Y(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YY{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Hn(this.o===void 0,3512);const n=a=>{a.error!=null&&Zt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const i=a.token!==this.m;return this.m=a.token,Zt("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{Zt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Zt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new W3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Hn(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new W3(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XY(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=XY(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<r&&(n+=e.charAt(s[a]%62))}return n}}function hn(t,e){return t<e?-1:t>e?1:0}function d5(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const s=t.charAt(n),a=e.charAt(n);if(s!==a)return g_(s)===g_(a)?hn(s,a):g_(s)?1:-1}return hn(t.length,e.length)}const JY=55296,ZY=57343;function g_(t){const e=t.charCodeAt(0);return e>=JY&&e<=ZY}function om(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="__name__";class Lu{constructor(e,r,n){r===void 0?r=0:r>e.length&&kr(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&kr(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Lu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Lu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const a=Lu.compareSegments(e.get(s),r.get(s));if(a!==0)return a}return hn(e.length,r.length)}static compareSegments(e,r){const n=Lu.isNumericId(e),s=Lu.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?Lu.extractNumericId(e).compare(Lu.extractNumericId(r)):d5(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cf.fromString(e.substring(4,e.length-2))}}class fs extends Lu{construct(e,r,n){return new fs(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Kt(pt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new fs(r)}static emptyPath(){return new fs([])}}const eX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ci extends Lu{construct(e,r,n){return new Ci(e,r,n)}static isValidIdentifier(e){return eX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ci.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Y3}static keyField(){return new Ci([Y3])}static fromServerFormat(e){const r=[];let n="",s=0;const a=()=>{if(n.length===0)throw new Kt(pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Kt(pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Kt(pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(n+=o,s++):(a(),s++)}if(a(),i)throw new Kt(pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ci(r)}static emptyPath(){return new Ci([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.path=e}static fromPath(e){return new dr(fs.fromString(e))}static fromName(e){return new dr(fs.fromString(e).popFirst(5))}static empty(){return new dr(fs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return fs.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dr(new fs(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t,e,r){if(!r)throw new Kt(pt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tX(t,e,r,n){if(e===!0&&n===!0)throw new Kt(pt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function X3(t){if(!dr.isDocumentKey(t))throw new Kt(pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function J3(t){if(dr.isDocumentKey(t))throw new Kt(pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function MP(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Db(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":kr(12329,{type:typeof t})}function mo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Kt(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Db(t);throw new Kt(pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function rX(t,e){if(e<=0)throw new Kt(pt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t,e){const r={typeString:t};return e&&(r.value=e),r}function B1(t,e){if(!MP(t))throw new Kt(pt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const i=t[n];if(s&&typeof i!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(a!==void 0&&i!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new Kt(pt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=-62135596800,eF=1e6;class ur{static now(){return ur.fromMillis(Date.now())}static fromDate(e){return ur.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*eF);return new ur(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Kt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Kt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Z3)throw new Kt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Kt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eF}_compareTo(e){return this.seconds===e.seconds?hn(this.nanoseconds,e.nanoseconds):hn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ur._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(B1(e,ur._jsonSchema))return new ur(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Z3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ur._jsonSchemaVersion="firestore/timestamp/1.0",ur._jsonSchema={type:Fa("string",ur._jsonSchemaVersion),seconds:Fa("number"),nanoseconds:Fa("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{static fromTimestamp(e){return new Ur(e)}static min(){return new Ur(new ur(0,0))}static max(){return new Ur(new ur(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=-1;function nX(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ur.fromTimestamp(n===1e9?new ur(r+1,0):new ur(r,n));return new Rf(s,dr.empty(),e)}function sX(t){return new Rf(t.readTime,t.key,jx)}class Rf{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Rf(Ur.min(),dr.empty(),jx)}static max(){return new Rf(Ur.max(),dr.empty(),jx)}}function aX(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=dr.comparator(t.documentKey,e.documentKey),r!==0?r:hn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tm(t){if(t.code!==pt.FAILED_PRECONDITION||t.message!==iX)throw t;Zt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&kr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ct((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ct?r:Ct.resolve(r)}catch(r){return Ct.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ct.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ct.reject(r)}static resolve(e){return new Ct((r,n)=>{r(e)})}static reject(e){return new Ct((r,n)=>{n(e)})}static waitFor(e){return new Ct((r,n)=>{let s=0,a=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++a,i&&a===s&&r()},l=>n(l))}),i=!0,a===s&&r()})}static or(e){let r=Ct.resolve(!1);for(const n of e)r=r.next(s=>s?Ct.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,a)=>{n.push(r.call(this,s,a))}),this.waitFor(n)}static mapArray(e,r){return new Ct((n,s)=>{const a=e.length,i=new Array(a);let o=0;for(let l=0;l<a;l++){const c=l;r(e[c]).next(d=>{i[c]=d,++o,o===a&&n(i)},d=>s(d))}})}static doWhile(e,r){return new Ct((n,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):n()};a()})}}function lX(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Nm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rb.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=-1;function Lb(t){return t==null}function fw(t){return t===0&&1/t==-1/0}function cX(t){return typeof t=="number"&&Number.isInteger(t)&&!fw(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="";function uX(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=tF(e)),e=AX(t.get(r),e);return tF(e)}function AX(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case PP:r+="";break;default:r+=a}}return r}function tF(t){return t+PP+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function $f(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function OP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,r){this.comparator=e,this.root=r||wi.EMPTY}insert(e,r){return new Ms(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,wi.BLACK,null,null))}remove(e){return new Ms(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ay(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ay(this.root,e,this.comparator,!1)}getReverseIterator(){return new ay(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ay(this.root,e,this.comparator,!0)}}class ay{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wi{constructor(e,r,n,s,a){this.key=e,this.value=r,this.color=n??wi.RED,this.left=s??wi.EMPTY,this.right=a??wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,a){return new wi(e??this.key,r??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,n),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return wi.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw kr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw kr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw kr(27949);return e+(this.isRed()?0:1)}}wi.EMPTY=null,wi.RED=!0,wi.BLACK=!1;wi.EMPTY=new class{constructor(){this.size=0}get key(){throw kr(57766)}get value(){throw kr(16141)}get color(){throw kr(16727)}get left(){throw kr(29726)}get right(){throw kr(36894)}copy(e,r,n,s,a){return this}insert(e,r,n){return new wi(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.comparator=e,this.data=new Ms(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new nF(this.data.getIterator())}getIteratorFrom(e){return new nF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ga)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ga(this.comparator);return r.data=e,r}}class nF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.fields=e,e.sort(Ci.comparator)}static empty(){return new ml([])}unionWith(e){let r=new Ga(Ci.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ml(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return om(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new jP("Invalid base64 string: "+a):a}}(e);return new Si(r)}static fromUint8Array(e){const r=function(s){let a="";for(let i=0;i<s.length;++i)a+=String.fromCharCode(s[i]);return a}(e);return new Si(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Si.EMPTY_BYTE_STRING=new Si("");const dX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lf(t){if(Hn(!!t,39018),typeof t=="string"){let e=0;const r=dX.exec(t);if(Hn(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ua(t.seconds),nanos:ua(t.nanos)}}function ua(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Uf(t){return typeof t=="string"?Si.fromBase64String(t):Si.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="server_timestamp",HP="__type__",VP="__previous_value__",zP="__local_write_time__";function DN(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[HP])==null?void 0:n.stringValue)===QP}function Ub(t){const e=t.mapValue.fields[VP];return DN(e)?Ub(e):e}function Qx(t){const e=Lf(t.mapValue.fields[zP].timestampValue);return new ur(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fX{constructor(e,r,n,s,a,i,o,l,c,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const hw="(default)";class Hx{constructor(e,r){this.projectId=e,this.database=r||hw}static empty(){return new Hx("","")}get isDefaultDatabase(){return this.database===hw}isEqual(e){return e instanceof Hx&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="__type__",hX="__max__",iy={mapValue:{}},qP="__vector__",pw="value";function Mf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?DN(t)?4:mX(t)?9007199254740991:pX(t)?10:11:kr(28295,{value:t})}function Ju(t,e){if(t===e)return!0;const r=Mf(t);if(r!==Mf(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qx(t).isEqual(Qx(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const i=Lf(s.timestampValue),o=Lf(a.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Uf(s.bytesValue).isEqual(Uf(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return ua(s.geoPointValue.latitude)===ua(a.geoPointValue.latitude)&&ua(s.geoPointValue.longitude)===ua(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return ua(s.integerValue)===ua(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const i=ua(s.doubleValue),o=ua(a.doubleValue);return i===o?fw(i)===fw(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return om(t.arrayValue.values||[],e.arrayValue.values||[],Ju);case 10:case 11:return function(s,a){const i=s.mapValue.fields||{},o=a.mapValue.fields||{};if(rF(i)!==rF(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Ju(i[l],o[l])))return!1;return!0}(t,e);default:return kr(52216,{left:t})}}function Vx(t,e){return(t.values||[]).find(r=>Ju(r,e))!==void 0}function lm(t,e){if(t===e)return 0;const r=Mf(t),n=Mf(e);if(r!==n)return hn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return hn(t.booleanValue,e.booleanValue);case 2:return function(a,i){const o=ua(a.integerValue||a.doubleValue),l=ua(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return sF(t.timestampValue,e.timestampValue);case 4:return sF(Qx(t),Qx(e));case 5:return d5(t.stringValue,e.stringValue);case 6:return function(a,i){const o=Uf(a),l=Uf(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,i){const o=a.split("/"),l=i.split("/");for(let c=0;c<o.length&&c<l.length;c++){const d=hn(o[c],l[c]);if(d!==0)return d}return hn(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,i){const o=hn(ua(a.latitude),ua(i.latitude));return o!==0?o:hn(ua(a.longitude),ua(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return aF(t.arrayValue,e.arrayValue);case 10:return function(a,i){var p,m,y,x;const o=a.fields||{},l=i.fields||{},c=(p=o[pw])==null?void 0:p.arrayValue,d=(m=l[pw])==null?void 0:m.arrayValue,h=hn(((y=c==null?void 0:c.values)==null?void 0:y.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return h!==0?h:aF(c,d)}(t.mapValue,e.mapValue);case 11:return function(a,i){if(a===iy.mapValue&&i===iy.mapValue)return 0;if(a===iy.mapValue)return 1;if(i===iy.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),c=i.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=d5(l[h],d[h]);if(p!==0)return p;const m=lm(o[l[h]],c[d[h]]);if(m!==0)return m}return hn(l.length,d.length)}(t.mapValue,e.mapValue);default:throw kr(23264,{he:r})}}function sF(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return hn(t,e);const r=Lf(t),n=Lf(e),s=hn(r.seconds,n.seconds);return s!==0?s:hn(r.nanos,n.nanos)}function aF(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const a=lm(r[s],n[s]);if(a)return a}return hn(r.length,n.length)}function cm(t){return f5(t)}function f5(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Lf(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Uf(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return dr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const a of r.values||[])s?s=!1:n+=",",n+=f5(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const i of n)a?a=!1:s+=",",s+=`${i}:${f5(r.fields[i])}`;return s+"}"}(t.mapValue):kr(61005,{value:t})}function b2(t){switch(Mf(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ub(t);return e?16+b2(e):16;case 5:return 2*t.stringValue.length;case 6:return Uf(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,a)=>s+b2(a),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return $f(n.fields,(a,i)=>{s+=a.length+b2(i)}),s}(t.mapValue);default:throw kr(13486,{value:t})}}function iF(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function h5(t){return!!t&&"integerValue"in t}function RN(t){return!!t&&"arrayValue"in t}function oF(t){return!!t&&"nullValue"in t}function lF(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function C2(t){return!!t&&"mapValue"in t}function pX(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[GP])==null?void 0:n.stringValue)===qP}function fx(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $f(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=fx(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=fx(t.arrayValue.values[r]);return e}return{...t}}function mX(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hX}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.value=e}static empty(){return new Po({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!C2(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=fx(r)}setAll(e){let r=Ci.emptyPath(),n={},s=[];e.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}i?n[o.lastSegment()]=fx(i):s.push(o.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,s)}delete(e){const r=this.field(e.popLast());C2(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ju(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];C2(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){$f(r,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new Po(fx(this.value))}}function KP(t){const e=[];return $f(t.fields,(r,n)=>{const s=new Ci([r]);if(C2(n)){const a=KP(n.mapValue).fields;if(a.length===0)e.push(s);else for(const i of a)e.push(s.child(i))}else e.push(s)}),new ml(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,r,n,s,a,i,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=a,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Xi(e,0,Ur.min(),Ur.min(),Ur.min(),Po.empty(),0)}static newFoundDocument(e,r,n,s){return new Xi(e,1,r,Ur.min(),n,s,0)}static newNoDocument(e,r){return new Xi(e,2,r,Ur.min(),Ur.min(),Po.empty(),0)}static newUnknownDocument(e,r){return new Xi(e,3,r,Ur.min(),Ur.min(),Po.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ur.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Po.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Po.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ur.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,r){this.position=e,this.inclusive=r}}function cF(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const a=e[s],i=t.position[s];if(a.field.isKeyField()?n=dr.comparator(dr.fromName(i.referenceValue),r.key):n=lm(i,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function uF(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ju(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,r="asc"){this.field=e,this.dir=r}}function gX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{}class Ia extends $P{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new vX(e,r,n):r==="array-contains"?new bX(e,n):r==="in"?new CX(e,n):r==="not-in"?new EX(e,n):r==="array-contains-any"?new _X(e,n):new Ia(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new yX(e,n):new wX(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(lm(r,this.value)):r!==null&&Mf(this.value)===Mf(r)&&this.matchesComparison(lm(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $c extends $P{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new $c(e,r)}matches(e){return WP(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function WP(t){return t.op==="and"}function YP(t){return xX(t)&&WP(t)}function xX(t){for(const e of t.filters)if(e instanceof $c)return!1;return!0}function p5(t){if(t instanceof Ia)return t.field.canonicalString()+t.op.toString()+cm(t.value);if(YP(t))return t.filters.map(e=>p5(e)).join(",");{const e=t.filters.map(r=>p5(r)).join(",");return`${t.op}(${e})`}}function XP(t,e){return t instanceof Ia?function(n,s){return s instanceof Ia&&n.op===s.op&&n.field.isEqual(s.field)&&Ju(n.value,s.value)}(t,e):t instanceof $c?function(n,s){return s instanceof $c&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,i,o)=>a&&XP(i,s.filters[o]),!0):!1}(t,e):void kr(19439)}function JP(t){return t instanceof Ia?function(r){return`${r.field.canonicalString()} ${r.op} ${cm(r.value)}`}(t):t instanceof $c?function(r){return r.op.toString()+" {"+r.getFilters().map(JP).join(" ,")+"}"}(t):"Filter"}class vX extends Ia{constructor(e,r,n){super(e,r,n),this.key=dr.fromName(n.referenceValue)}matches(e){const r=dr.comparator(e.key,this.key);return this.matchesComparison(r)}}class yX extends Ia{constructor(e,r){super(e,"in",r),this.keys=ZP("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class wX extends Ia{constructor(e,r){super(e,"not-in",r),this.keys=ZP("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function ZP(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>dr.fromName(n.referenceValue))}class bX extends Ia{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return RN(r)&&Vx(r.arrayValue,this.value)}}class CX extends Ia{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Vx(this.value.arrayValue,r)}}class EX extends Ia{constructor(e,r){super(e,"not-in",r)}matches(e){if(Vx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Vx(this.value.arrayValue,r)}}class _X extends Ia{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!RN(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Vx(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SX{constructor(e,r=null,n=[],s=[],a=null,i=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=i,this.endAt=o,this.Te=null}}function AF(t,e=null,r=[],n=[],s=null,a=null,i=null){return new SX(t,e,r,n,s,a,i)}function LN(t){const e=Pr(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>p5(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Lb(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>cm(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>cm(n)).join(",")),e.Te=r}return e.Te}function UN(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!gX(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!XP(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uF(t.startAt,e.startAt)&&uF(t.endAt,e.endAt)}function m5(t){return dr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,r=null,n=[],s=[],a=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TX(t,e,r,n,s,a,i,o){return new Bm(t,e,r,n,s,a,i,o)}function Mb(t){return new Bm(t)}function dF(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eO(t){return t.collectionGroup!==null}function hx(t){const e=Pr(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Ga(Ci.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new zx(a,n))}),r.has(Ci.keyField().canonicalString())||e.Ie.push(new zx(Ci.keyField(),n))}return e.Ie}function Gu(t){const e=Pr(t);return e.Ee||(e.Ee=NX(e,hx(t))),e.Ee}function NX(t,e){if(t.limitType==="F")return AF(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new zx(s.field,a)});const r=t.endAt?new mw(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new mw(t.startAt.position,t.startAt.inclusive):null;return AF(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function g5(t,e){const r=t.filters.concat([e]);return new Bm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function gw(t,e,r){return new Bm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Pb(t,e){return UN(Gu(t),Gu(e))&&t.limitType===e.limitType}function tO(t){return`${LN(Gu(t))}|lt:${t.limitType}`}function wp(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>JP(s)).join(", ")}]`),Lb(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>cm(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>cm(s)).join(",")),`Target(${n})`}(Gu(t))}; limitType=${t.limitType})`}function Ob(t,e){return e.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):dr.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,s){for(const a of hx(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(i,o,l){const c=cF(i,o,l);return i.inclusive?c<=0:c<0}(n.startAt,hx(n),s)||n.endAt&&!function(i,o,l){const c=cF(i,o,l);return i.inclusive?c>=0:c>0}(n.endAt,hx(n),s))}(t,e)}function BX(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rO(t){return(e,r)=>{let n=!1;for(const s of hx(t)){const a=kX(s,e,r);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function kX(t,e,r){const n=t.field.isKeyField()?dr.comparator(e.key,r.key):function(a,i,o){const l=i.data.field(a),c=o.data.field(a);return l!==null&&c!==null?lm(l,c):kr(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return kr(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$f(this.inner,(r,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return OP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IX=new Ms(dr.comparator);function ed(){return IX}const nO=new Ms(dr.comparator);function Kg(...t){let e=nO;for(const r of t)e=e.insert(r.key,r);return e}function sO(t){let e=nO;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Fh(){return px()}function aO(){return px()}function px(){return new f0(t=>t.toString(),(t,e)=>t.isEqual(e))}const FX=new Ms(dr.comparator),DX=new Ga(dr.comparator);function pn(...t){let e=DX;for(const r of t)e=e.add(r);return e}const RX=new Ga(hn);function LX(){return RX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fw(e)?"-0":e}}function iO(t){return{integerValue:""+t}}function UX(t,e){return cX(e)?iO(e):MN(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this._=void 0}}function MX(t,e,r){return t instanceof Gx?function(s,a){const i={fields:{[HP]:{stringValue:QP},[zP]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&DN(a)&&(a=Ub(a)),a&&(i.fields[VP]=a),{mapValue:i}}(r,e):t instanceof um?lO(t,e):t instanceof qx?cO(t,e):function(s,a){const i=oO(s,a),o=fF(i)+fF(s.Ae);return h5(i)&&h5(s.Ae)?iO(o):MN(s.serializer,o)}(t,e)}function PX(t,e,r){return t instanceof um?lO(t,e):t instanceof qx?cO(t,e):r}function oO(t,e){return t instanceof xw?function(n){return h5(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Gx extends jb{}class um extends jb{constructor(e){super(),this.elements=e}}function lO(t,e){const r=uO(e);for(const n of t.elements)r.some(s=>Ju(s,n))||r.push(n);return{arrayValue:{values:r}}}class qx extends jb{constructor(e){super(),this.elements=e}}function cO(t,e){let r=uO(e);for(const n of t.elements)r=r.filter(s=>!Ju(s,n));return{arrayValue:{values:r}}}class xw extends jb{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function fF(t){return ua(t.integerValue||t.doubleValue)}function uO(t){return RN(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,r){this.field=e,this.transform=r}}function OX(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof um&&s instanceof um||n instanceof qx&&s instanceof qx?om(n.elements,s.elements,Ju):n instanceof xw&&s instanceof xw?Ju(n.Ae,s.Ae):n instanceof Gx&&s instanceof Gx}(t.transform,e.transform)}class jX{constructor(e,r){this.version=e,this.transformResults=r}}class go{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new go}static exists(e){return new go(void 0,e)}static updateTime(e){return new go(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function E2(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qb{}function dO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hb(t.key,go.none()):new k1(t.key,t.data,go.none());{const r=t.data,n=Po.empty();let s=new Ga(Ci.comparator);for(let a of e.fields)if(!s.has(a)){let i=r.field(a);i===null&&a.length>1&&(a=a.popLast(),i=r.field(a)),i===null?n.delete(a):n.set(a,i),s=s.add(a)}return new Wf(t.key,n,new ml(s.toArray()),go.none())}}function QX(t,e,r){t instanceof k1?function(s,a,i){const o=s.value.clone(),l=pF(s.fieldTransforms,a,i.transformResults);o.setAll(l),a.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Wf?function(s,a,i){if(!E2(s.precondition,a))return void a.convertToUnknownDocument(i.version);const o=pF(s.fieldTransforms,a,i.transformResults),l=a.data;l.setAll(fO(s)),l.setAll(o),a.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):function(s,a,i){a.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function mx(t,e,r,n){return t instanceof k1?function(a,i,o,l){if(!E2(a.precondition,i))return o;const c=a.value.clone(),d=mF(a.fieldTransforms,l,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Wf?function(a,i,o,l){if(!E2(a.precondition,i))return o;const c=mF(a.fieldTransforms,l,i),d=i.data;return d.setAll(fO(a)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(a,i,o){return E2(a.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,r)}function HX(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),a=oO(n.transform,s||null);a!=null&&(r===null&&(r=Po.empty()),r.set(n.field,a))}return r||null}function hF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&om(n,s,(a,i)=>OX(a,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class k1 extends Qb{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wf extends Qb{constructor(e,r,n,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function fO(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function pF(t,e,r){const n=new Map;Hn(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let s=0;s<r.length;s++){const a=t[s],i=a.transform,o=e.data.field(a.field);n.set(a.field,PX(i,o,r[s]))}return n}function mF(t,e,r){const n=new Map;for(const s of t){const a=s.transform,i=r.data.field(s.field);n.set(s.field,MX(a,i,e))}return n}class Hb extends Qb{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VX extends Qb{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zX{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&QX(a,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=mx(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=mx(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=aO();return this.mutations.forEach(s=>{const a=e.get(s.key),i=a.overlayedDocument;let o=this.applyToLocalView(i,a.mutatedFields);o=r.has(s.key)?null:o;const l=dO(i,o);l!==null&&n.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(Ur.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),pn())}isEqual(e){return this.batchId===e.batchId&&om(this.mutations,e.mutations,(r,n)=>hF(r,n))&&om(this.baseMutations,e.baseMutations,(r,n)=>hF(r,n))}}class PN{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Hn(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return FX}();const a=e.mutations;for(let i=0;i<a.length;i++)s=s.insert(a[i].key,n[i].version);return new PN(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GX{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qX{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sa,Cn;function KX(t){switch(t){case pt.OK:return kr(64938);case pt.CANCELLED:case pt.UNKNOWN:case pt.DEADLINE_EXCEEDED:case pt.RESOURCE_EXHAUSTED:case pt.INTERNAL:case pt.UNAVAILABLE:case pt.UNAUTHENTICATED:return!1;case pt.INVALID_ARGUMENT:case pt.NOT_FOUND:case pt.ALREADY_EXISTS:case pt.PERMISSION_DENIED:case pt.FAILED_PRECONDITION:case pt.ABORTED:case pt.OUT_OF_RANGE:case pt.UNIMPLEMENTED:case pt.DATA_LOSS:return!0;default:return kr(15467,{code:t})}}function hO(t){if(t===void 0)return ZA("GRPC error has no .code"),pt.UNKNOWN;switch(t){case Sa.OK:return pt.OK;case Sa.CANCELLED:return pt.CANCELLED;case Sa.UNKNOWN:return pt.UNKNOWN;case Sa.DEADLINE_EXCEEDED:return pt.DEADLINE_EXCEEDED;case Sa.RESOURCE_EXHAUSTED:return pt.RESOURCE_EXHAUSTED;case Sa.INTERNAL:return pt.INTERNAL;case Sa.UNAVAILABLE:return pt.UNAVAILABLE;case Sa.UNAUTHENTICATED:return pt.UNAUTHENTICATED;case Sa.INVALID_ARGUMENT:return pt.INVALID_ARGUMENT;case Sa.NOT_FOUND:return pt.NOT_FOUND;case Sa.ALREADY_EXISTS:return pt.ALREADY_EXISTS;case Sa.PERMISSION_DENIED:return pt.PERMISSION_DENIED;case Sa.FAILED_PRECONDITION:return pt.FAILED_PRECONDITION;case Sa.ABORTED:return pt.ABORTED;case Sa.OUT_OF_RANGE:return pt.OUT_OF_RANGE;case Sa.UNIMPLEMENTED:return pt.UNIMPLEMENTED;case Sa.DATA_LOSS:return pt.DATA_LOSS;default:return kr(39323,{code:t})}}(Cn=Sa||(Sa={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $X(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WX=new Cf([4294967295,4294967295],0);function gF(t){const e=$X().encode(t),r=new NP;return r.update(e),new Uint8Array(r.digest())}function xF(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Cf([r,n],0),new Cf([s,a],0)]}class ON{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new $g(`Invalid padding: ${r}`);if(n<0)throw new $g(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new $g(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new $g(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Cf.fromNumber(this.ge)}ye(e,r,n){let s=e.add(r.multiply(Cf.fromNumber(n)));return s.compare(WX)===1&&(s=new Cf([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=gF(e),[n,s]=xF(r);for(let a=0;a<this.hashCount;a++){const i=this.ye(n,s,a);if(!this.we(i))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),i=new ON(a,s,r);return n.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const r=gF(e),[n,s]=xF(r);for(let a=0;a<this.hashCount;a++){const i=this.ye(n,s,a);this.Se(i)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class $g extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,r,n,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,I1.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Vb(Ur.min(),s,new Ms(hn),ed(),pn())}}class I1{constructor(e,r,n,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new I1(n,r,pn(),pn(),pn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,r,n,s){this.be=e,this.removedTargetIds=r,this.key=n,this.De=s}}class pO{constructor(e,r){this.targetId=e,this.Ce=r}}class mO{constructor(e,r,n=Si.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class vF{constructor(){this.ve=0,this.Fe=yF(),this.Me=Si.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pn(),r=pn(),n=pn();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:kr(38017,{changeType:a})}}),new I1(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=yF()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Hn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YX{constructor(e){this.Ge=e,this.ze=new Map,this.je=ed(),this.Je=oy(),this.He=oy(),this.Ye=new Ms(hn)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:kr(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,n=e.Ce.count,s=this.ot(r);if(s){const a=s.target;if(m5(a))if(n===0){const i=new dr(a.path);this.et(r,i,Xi.newNoDocument(i,Ur.min()))}else Hn(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,c)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=r;let i,o;try{i=Uf(n).toUint8Array()}catch(l){if(l instanceof jP)return im("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new ON(i,s,a)}catch(l){return im(l instanceof $g?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let s=0;return n.forEach(a=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(r,a,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((a,i)=>{const o=this.ot(i);if(o){if(a.current&&m5(o.target)){const l=new dr(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,Xi.newNoDocument(l,e))}a.Be&&(r.set(i,a.ke()),a.qe())}});let n=pn();this.He.forEach((a,i)=>{let o=!0;i.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(a))}),this.je.forEach((a,i)=>i.setReadTime(e));const s=new Vb(e,r,this.Ye,this.je,n);return this.je=ed(),this.Je=oy(),this.He=oy(),this.Ye=new Ms(hn),s}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.Qe(r,1):s.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new vF,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Ga(hn),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Ga(hn),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Zt("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vF),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function oy(){return new Ms(dr.comparator)}function yF(){return new Ms(dr.comparator)}const XX={asc:"ASCENDING",desc:"DESCENDING"},JX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZX={and:"AND",or:"OR"};class eJ{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function x5(t,e){return t.useProto3Json||Lb(e)?e:{value:e}}function vw(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tJ(t,e){return vw(t,e.toTimestamp())}function qu(t){return Hn(!!t,49232),Ur.fromTimestamp(function(r){const n=Lf(r);return new ur(n.seconds,n.nanos)}(t))}function jN(t,e){return v5(t,e).canonicalString()}function v5(t,e){const r=function(s){return new fs(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function xO(t){const e=fs.fromString(t);return Hn(CO(e),10190,{key:e.toString()}),e}function y5(t,e){return jN(t.databaseId,e.path)}function x_(t,e){const r=xO(e);if(r.get(1)!==t.databaseId.projectId)throw new Kt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Kt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new dr(yO(r))}function vO(t,e){return jN(t.databaseId,e)}function rJ(t){const e=xO(t);return e.length===4?fs.emptyPath():yO(e)}function w5(t){return new fs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yO(t){return Hn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function wF(t,e,r){return{name:y5(t,e),fields:r.value.mapValue.fields}}function nJ(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:kr(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(c,d){return c.useProto3Json?(Hn(d===void 0||typeof d=="string",58123),Si.fromBase64String(d||"")):(Hn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Si.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const d=c.code===void 0?pt.UNKNOWN:hO(c.code);return new Kt(d,c.message||"")}(i);r=new mO(n,s,a,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=x_(t,n.document.name),a=qu(n.document.updateTime),i=n.document.createTime?qu(n.document.createTime):Ur.min(),o=new Po({mapValue:{fields:n.document.fields}}),l=Xi.newFoundDocument(s,a,i,o),c=n.targetIds||[],d=n.removedTargetIds||[];r=new _2(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=x_(t,n.document),a=n.readTime?qu(n.readTime):Ur.min(),i=Xi.newNoDocument(s,a),o=n.removedTargetIds||[];r=new _2([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=x_(t,n.document),a=n.removedTargetIds||[];r=new _2([],a,s,null)}else{if(!("filter"in e))return kr(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,i=new qX(s,a),o=n.targetId;r=new pO(o,i)}}return r}function sJ(t,e){let r;if(e instanceof k1)r={update:wF(t,e.key,e.value)};else if(e instanceof Hb)r={delete:y5(t,e.key)};else if(e instanceof Wf)r={update:wF(t,e.key,e.data),updateMask:fJ(e.fieldMask)};else{if(!(e instanceof VX))return kr(16599,{Vt:e.type});r={verify:y5(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,i){const o=i.transform;if(o instanceof Gx)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof um)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof qx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof xw)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw kr(20930,{transform:i.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:tJ(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:kr(27497)}(t,e.precondition)),r}function aJ(t,e){return t&&t.length>0?(Hn(e!==void 0,14353),t.map(r=>function(s,a){let i=s.updateTime?qu(s.updateTime):qu(a);return i.isEqual(Ur.min())&&(i=qu(a)),new jX(i,s.transformResults||[])}(r,e))):[]}function iJ(t,e){return{documents:[vO(t,e.path)]}}function oJ(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=vO(t,s);const a=function(c){if(c.length!==0)return bO($c.create(c,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const i=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:bp(p.field),direction:uJ(p.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const o=x5(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:r,parent:s}}function lJ(t){let e=rJ(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Hn(n===1,65062);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=function(h){const p=wO(h);return p instanceof $c&&YP(p)?p.getFilters():[p]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(p=>function(y){return new zx(Cp(y.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(r.orderBy));let o=null;r.limit&&(o=function(h){let p;return p=typeof h=="object"?h.value:h,Lb(p)?null:p}(r.limit));let l=null;r.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new mw(m,p)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new mw(m,p)}(r.endAt)),TX(e,s,i,a,o,"F",l,c)}function cJ(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kr(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function wO(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Cp(r.unaryFilter.field);return Ia.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Cp(r.unaryFilter.field);return Ia.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Cp(r.unaryFilter.field);return Ia.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Cp(r.unaryFilter.field);return Ia.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return kr(61313);default:return kr(60726)}}(t):t.fieldFilter!==void 0?function(r){return Ia.create(Cp(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return kr(58110);default:return kr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return $c.create(r.compositeFilter.filters.map(n=>wO(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return kr(1026)}}(r.compositeFilter.op))}(t):kr(30097,{filter:t})}function uJ(t){return XX[t]}function AJ(t){return JX[t]}function dJ(t){return ZX[t]}function bp(t){return{fieldPath:t.canonicalString()}}function Cp(t){return Ci.fromServerFormat(t.fieldPath)}function bO(t){return t instanceof Ia?function(r){if(r.op==="=="){if(lF(r.value))return{unaryFilter:{field:bp(r.field),op:"IS_NAN"}};if(oF(r.value))return{unaryFilter:{field:bp(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(lF(r.value))return{unaryFilter:{field:bp(r.field),op:"IS_NOT_NAN"}};if(oF(r.value))return{unaryFilter:{field:bp(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bp(r.field),op:AJ(r.op),value:r.value}}}(t):t instanceof $c?function(r){const n=r.getFilters().map(s=>bO(s));return n.length===1?n[0]:{compositeFilter:{op:dJ(r.op),filters:n}}}(t):kr(54877,{filter:t})}function fJ(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function CO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,r,n,s,a=Ur.min(),i=Ur.min(),o=Si.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new df(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new df(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new df(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new df(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hJ{constructor(e){this.yt=e}}function pJ(t){const e=lJ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mJ{constructor(){this.Cn=new gJ}addToCollectionParentIndex(e,r){return this.Cn.add(r),Ct.resolve()}getCollectionParents(e,r){return Ct.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return Ct.resolve()}deleteFieldIndex(e,r){return Ct.resolve()}deleteAllFieldIndexes(e){return Ct.resolve()}createTargetIndexes(e,r){return Ct.resolve()}getDocumentsMatchingTarget(e,r){return Ct.resolve(null)}getIndexType(e,r){return Ct.resolve(0)}getFieldIndexes(e,r){return Ct.resolve([])}getNextCollectionGroupToUpdate(e){return Ct.resolve(null)}getMinOffset(e,r){return Ct.resolve(Rf.min())}getMinOffsetFromCollectionGroup(e,r){return Ct.resolve(Rf.min())}updateCollectionGroup(e,r,n){return Ct.resolve()}updateIndexEntries(e,r){return Ct.resolve()}}class gJ{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Ga(fs.comparator),a=!s.has(n);return this.index[r]=s.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Ga(fs.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EO=41943040;class Uo{static withCacheSize(e){return new Uo(e,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uo.DEFAULT_COLLECTION_PERCENTILE=10,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uo.DEFAULT=new Uo(EO,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uo.DISABLED=new Uo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Am(0)}static cr(){return new Am(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF="LruGarbageCollector",xJ=1048576;function EF([t,e],[r,n]){const s=hn(t,r);return s===0?hn(e,n):s}class vJ{constructor(e){this.Ir=e,this.buffer=new Ga(EF),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();EF(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class yJ{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Zt(CF,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Nm(r)?Zt(CF,"Ignoring IndexedDB error during garbage collection: ",r):await Tm(r)}await this.Vr(3e5)})}}class wJ{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ct.resolve(Rb.ce);const n=new vJ(r);return this.mr.forEachTarget(e,s=>n.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>n.Ar(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Zt("LruGarbageCollector","Garbage collection skipped; disabled"),Ct.resolve(bF)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Zt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bF):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,s,a,i,o,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Zt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,r))).next(h=>(a=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),yp()<=fn.DEBUG&&Zt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),Ct.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function bJ(t,e){return new wJ(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CJ{constructor(){this.changes=new f0(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Xi.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ct.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EJ{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&mx(n.mutation,s,ml.empty(),ur.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,pn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=pn()){const s=Fh();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(a=>{let i=Kg();return a.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=Fh();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,pn()))}populateOverlays(e,r,n){const s=[];return n.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((i,o)=>{r.set(i,o)})})}computeViews(e,r,n,s){let a=ed();const i=px(),o=function(){return px()}();return r.forEach((l,c)=>{const d=n.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Wf)?a=a.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),mx(d.mutation,c,d.mutation.getFieldMask(),ur.now())):i.set(c.key,ml.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((c,d)=>i.set(c,d)),r.forEach((c,d)=>o.set(c,new EJ(d,i.get(c)??null))),o))}recalculateAndSaveOverlays(e,r){const n=px();let s=new Ms((i,o)=>i-o),a=pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let d=n.get(l)||ml.empty();d=o.applyToLocalView(c,d),n.set(l,d);const h=(s.get(o.batchId)||pn()).add(l);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,d=l.value,h=aO();d.forEach(p=>{if(!a.has(p)){const m=dO(r.get(p),n.get(p));m!==null&&h.set(p,m),a=a.add(p)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return Ct.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(i){return dr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):eO(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(a=>{const i=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-a.size):Ct.resolve(Fh());let o=jx,l=a;return i.next(c=>Ct.forEach(c,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(d)?Ct.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,l,c,pn())).next(d=>({batchId:o,changes:sO(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new dr(r)).next(n=>{let s=Kg();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const a=r.collectionGroup;let i=Kg();return this.indexManager.getCollectionParents(e,a).next(o=>Ct.forEach(o,l=>{const c=function(h,p){return new Bm(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(d=>{d.forEach((h,p)=>{i=i.insert(h,p)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,s))).next(i=>{a.forEach((l,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Xi.newInvalidDocument(d)))});let o=Kg();return i.forEach((l,c)=>{const d=a.get(l);d!==void 0&&mx(d.mutation,c,ml.empty(),ur.now()),Ob(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SJ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return Ct.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:qu(s.createTime)}}(r)),Ct.resolve()}getNamedQuery(e,r){return Ct.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(s){return{name:s.name,query:pJ(s.bundledQuery),readTime:qu(s.readTime)}}(r)),Ct.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TJ{constructor(){this.overlays=new Ms(dr.comparator),this.qr=new Map}getOverlay(e,r){return Ct.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Fh();return Ct.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,a)=>{this.St(e,r,a)}),Ct.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(n)),Ct.resolve()}getOverlaysForCollection(e,r,n){const s=Fh(),a=r.length+1,i=new dr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===a&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Ct.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let a=new Ms((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=a.get(c.largestBatchId);d===null&&(d=Fh(),a=a.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=Fh(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return Ct.resolve(o)}St(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new GX(r,n));let a=this.qr.get(r);a===void 0&&(a=pn(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NJ{constructor(){this.sessionToken=Si.EMPTY_BYTE_STRING}getSessionToken(e){return Ct.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ct.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.Qr=new Ga(ni.$r),this.Ur=new Ga(ni.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new ni(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new ni(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new dr(new fs([])),n=new ni(r,e),s=new ni(r,e+1),a=[];return this.Ur.forEachInRange([n,s],i=>{this.Gr(i),a.push(i.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new dr(new fs([])),n=new ni(r,e),s=new ni(r,e+1);let a=pn();return this.Ur.forEachInRange([n,s],i=>{a=a.add(i.key)}),a}containsKey(e){const r=new ni(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ni{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return dr.comparator(e.key,r.key)||hn(e.Yr,r.Yr)}static Kr(e,r){return hn(e.Yr,r.Yr)||dr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BJ{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ga(ni.$r)}checkEmpty(e){return Ct.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new zX(a,r,n,s);this.mutationQueue.push(i);for(const o of s)this.Zr=this.Zr.add(new ni(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ct.resolve(i)}lookupMutationBatch(e,r){return Ct.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.ei(n),a=s<0?0:s;return Ct.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ct.resolve(this.mutationQueue.length===0?FN:this.tr-1)}getAllMutationBatches(e){return Ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ni(r,0),s=new ni(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,s],i=>{const o=this.Xr(i.Yr);a.push(o)}),Ct.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ga(hn);return r.forEach(s=>{const a=new ni(s,0),i=new ni(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,i],o=>{n=n.add(o.Yr)})}),Ct.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let a=n;dr.isDocumentKey(a)||(a=a.child(""));const i=new ni(new dr(a),0);let o=new Ga(hn);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.Yr)),!0)},i),Ct.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const s=this.Xr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Hn(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ct.forEach(r.mutations,s=>{const a=new ni(s.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new ni(r,0),s=this.Zr.firstAfterOrEqual(n);return Ct.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ct.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{constructor(e){this.ri=e,this.docs=function(){return new Ms(dr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),a=s?s.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ct.resolve(n?n.document.mutableCopy():Xi.newInvalidDocument(r))}getEntries(e,r){let n=ed();return r.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():Xi.newInvalidDocument(s))}),Ct.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let a=ed();const i=r.path,o=new dr(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||aX(sX(d),n)<=0||(s.has(d.key)||Ob(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return Ct.resolve(a)}getAllFromCollectionGroup(e,r,n,s){kr(9500)}ii(e,r){return Ct.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new IJ(this)}getSize(e){return Ct.resolve(this.size)}}class IJ extends CJ{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),Ct.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FJ{constructor(e){this.persistence=e,this.si=new f0(r=>LN(r),UN),this.lastRemoteSnapshotVersion=Ur.min(),this.highestTargetId=0,this.oi=0,this._i=new QN,this.targetCount=0,this.ai=Am.ur()}forEachTarget(e,r){return this.si.forEach((n,s)=>r(s)),Ct.resolve()}getLastRemoteSnapshotVersion(e){return Ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ct.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ct.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Ct.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Am(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,Ct.resolve()}updateTargetData(e,r){return this.Pr(r),Ct.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ct.resolve()}removeTargets(e,r,n){let s=0;const a=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Ct.waitFor(a).next(()=>s)}getTargetCount(e){return Ct.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return Ct.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),Ct.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(i=>{a.push(s.markPotentiallyOrphaned(e,i))}),Ct.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),Ct.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return Ct.resolve(n)}containsKey(e,r){return Ct.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,r){this.ui={},this.overlays={},this.ci=new Rb(0),this.li=!1,this.li=!0,this.hi=new NJ,this.referenceDelegate=e(this),this.Pi=new FJ(this),this.indexManager=new mJ,this.remoteDocumentCache=function(s){return new kJ(s)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new hJ(r),this.Ii=new SJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new TJ,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new BJ(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Zt("MemoryPersistence","Starting transaction:",e);const s=new DJ(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,r){return Ct.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class DJ extends oX{constructor(e){super(),this.currentSequenceNumber=e}}class HN{constructor(e){this.persistence=e,this.Ri=new QN,this.Vi=null}static mi(e){return new HN(e)}get fi(){if(this.Vi)return this.Vi;throw kr(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Ct.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Ct.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),Ct.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(s=>this.fi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ct.forEach(this.fi,n=>{const s=dr.fromPath(n);return this.gi(e,s).next(a=>{a||r.removeEntry(s,Ur.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return Ct.or([()=>Ct.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class yw{constructor(e,r){this.persistence=e,this.pi=new f0(n=>uX(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=bJ(this,r)}static mi(e,r){return new yw(e,r)}Ei(){}di(e){return Ct.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return Ct.forEach(this.pi,(n,s)=>this.br(e,n,s).next(a=>a?Ct.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,i=>this.br(e,i,r).next(o=>{o||(n++,a.removeEntry(i,Ur.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),Ct.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ct.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ct.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),Ct.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=b2(e.data.value)),r}br(e,r,n){return Ct.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.pi.get(r);return Ct.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=s}static As(e,r){let n=pn(),s=pn();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new VN(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LJ{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return uK()?8:lX(so())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,s){const a={result:null};return this.ys(e,r).next(i=>{a.result=i}).next(()=>{if(!a.result)return this.ws(e,r,s,n).next(i=>{a.result=i})}).next(()=>{if(a.result)return;const i=new RJ;return this.Ss(e,r,i).next(o=>{if(a.result=o,this.Vs)return this.bs(e,r,i,o.size)})}).next(()=>a.result)}bs(e,r,n,s){return n.documentReadCount<this.fs?(yp()<=fn.DEBUG&&Zt("QueryEngine","SDK will not create cache indexes for query:",wp(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ct.resolve()):(yp()<=fn.DEBUG&&Zt("QueryEngine","Query:",wp(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(yp()<=fn.DEBUG&&Zt("QueryEngine","The SDK decides to create cache indexes for query:",wp(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gu(r))):Ct.resolve())}ys(e,r){if(dF(r))return Ct.resolve(null);let n=Gu(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=gw(r,null,"F"),n=Gu(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const i=pn(...a);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.Ds(r,o);return this.Cs(r,c,i,l.readTime)?this.ys(e,gw(r,null,"F")):this.vs(e,c,r,l)}))})))}ws(e,r,n,s){return dF(r)||s.isEqual(Ur.min())?Ct.resolve(null):this.ps.getDocuments(e,n).next(a=>{const i=this.Ds(r,a);return this.Cs(r,i,n,s)?Ct.resolve(null):(yp()<=fn.DEBUG&&Zt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),wp(r)),this.vs(e,i,r,nX(s,jx)).next(o=>o))})}Ds(e,r){let n=new Ga(rO(e));return r.forEach((s,a)=>{Ob(e,a)&&(n=n.add(a))}),n}Cs(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,r,n){return yp()<=fn.DEBUG&&Zt("QueryEngine","Using full collection scan to execute query:",wp(r)),this.ps.getDocumentsMatchingQuery(e,r,Rf.min(),n)}vs(e,r,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(a=>(r.forEach(i=>{a=a.insert(i.key,i)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="LocalStore",UJ=3e8;class MJ{constructor(e,r,n,s){this.persistence=e,this.Fs=r,this.serializer=s,this.Ms=new Ms(hn),this.xs=new f0(a=>LN(a),UN),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _J(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function PJ(t,e,r,n){return new MJ(t,e,r,n)}async function SO(t,e){const r=Pr(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const i=[],o=[];let l=pn();for(const c of s){i.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of a){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(c=>({Ls:c,removedBatchIds:i,addedBatchIds:o}))})})}function OJ(t,e){const r=Pr(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,d){const h=c.batch,p=h.keys();let m=Ct.resolve();return p.forEach(y=>{m=m.next(()=>d.getEntry(l,y)).next(x=>{const E=c.docVersions.get(y);Hn(E!==null,48541),x.version.compareTo(E)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=pn();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function TO(t){const e=Pr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function jJ(t,e){const r=Pr(t),n=e.snapshotVersion;let s=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});s=r.Ms;const o=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;o.push(r.Pi.removeMatchingKeys(a,d.removedDocuments,h).next(()=>r.Pi.addMatchingKeys(a,d.addedDocuments,h)));let m=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Si.EMPTY_BYTE_STRING,Ur.min()).withLastLimboFreeSnapshotVersion(Ur.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),s=s.insert(h,m),function(x,E,S){return x.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=UJ?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,m,d)&&o.push(r.Pi.updateTargetData(a,m))});let l=ed(),c=pn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))}),o.push(QJ(a,i,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!n.isEqual(Ur.min())){const d=r.Pi.getLastRemoteSnapshotVersion(a).next(h=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n));o.push(d)}return Ct.waitFor(o).next(()=>i.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,l,c)).next(()=>l)}).then(a=>(r.Ms=s,a))}function QJ(t,e,r){let n=pn(),s=pn();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let i=ed();return r.forEach((o,l)=>{const c=a.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Ur.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):Zt(zN,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:i,qs:s}})}function HJ(t,e){const r=Pr(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=FN),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function VJ(t,e){const r=Pr(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Pi.getTargetData(n,e).next(a=>a?(s=a,Ct.resolve(s)):r.Pi.allocateTargetId(n).next(i=>(s=new df(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function b5(t,e,r){const n=Pr(t),s=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,i=>n.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!Nm(i))throw i;Zt(zN,`Failed to update sequence numbers for target ${e}: ${i}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function _F(t,e,r){const n=Pr(t);let s=Ur.min(),a=pn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,c,d){const h=Pr(l),p=h.xs.get(d);return p!==void 0?Ct.resolve(h.Ms.get(p)):h.Pi.getTargetData(c,d)}(n,i,Gu(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{a=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,e,r?s:Ur.min(),r?a:pn())).next(o=>(zJ(n,BX(e),o),{documents:o,Qs:a})))}function zJ(t,e,r){let n=t.Os.get(e)||Ur.min();r.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Os.set(e,n)}class SF{constructor(){this.activeTargetIds=LX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GJ{constructor(){this.Mo=new SF,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new SF,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qJ{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF="ConnectivityMonitor";class NF{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Zt(TF,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Zt(TF,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ly=null;function C5(){return ly===null?ly=function(){return 268435456+Math.round(2147483648*Math.random())}():ly++,"0x"+ly.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="RestConnection",KJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $J{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===hw?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,r,n,s,a){const i=C5(),o=this.zo(e,r.toUriEncodedString());Zt(v_,`Sending RPC '${e}' ${i}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,a);const{host:c}=new URL(o),d=A0(c);return this.Jo(e,o,l,n,d).then(h=>(Zt(v_,`Received RPC '${e}' ${i}: `,h),h),h=>{throw im(v_,`RPC '${e}' ${i} failed with error: `,h,"url: ",o,"request:",n),h})}Ho(e,r,n,s,a,i){return this.Go(e,r,n,s,a)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sm}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>e[a]=s),n&&n.headers.forEach((s,a)=>e[a]=s)}zo(e,r){const n=KJ[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WJ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="WebChannelConnection";class YJ extends $J{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,s,a){const i=C5();return new Promise((o,l)=>{const c=new BP;c.setWithCredentials(!0),c.listenOnce(kP.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case w2.NO_ERROR:const h=c.getResponseJson();Zt(ji,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case w2.TIMEOUT:Zt(ji,`RPC '${e}' ${i} timed out`),l(new Kt(pt.DEADLINE_EXCEEDED,"Request time out"));break;case w2.HTTP_ERROR:const p=c.getStatus();if(Zt(ji,`RPC '${e}' ${i} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const x=function(S){const B=S.toLowerCase().replace(/_/g,"-");return Object.values(pt).indexOf(B)>=0?B:pt.UNKNOWN}(y.status);l(new Kt(x,y.message))}else l(new Kt(pt.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Kt(pt.UNAVAILABLE,"Connection failed."));break;default:kr(9055,{l_:e,streamId:i,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Zt(ji,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);Zt(ji,`RPC '${e}' ${i} sending request:`,s),c.send(r,"POST",d,n,15)})}T_(e,r,n){const s=C5(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=DP(),o=FP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=a.join("");Zt(ji,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=i.createWebChannel(d,l);this.I_(h);let p=!1,m=!1;const y=new WJ({Yo:E=>{m?Zt(ji,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(p||(Zt(ji,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),Zt(ji,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},Zo:()=>h.close()}),x=(E,S,B)=>{E.listen(S,D=>{try{B(D)}catch(I){setTimeout(()=>{throw I},0)}})};return x(h,qg.EventType.OPEN,()=>{m||(Zt(ji,`RPC '${e}' stream ${s} transport opened.`),y.o_())}),x(h,qg.EventType.CLOSE,()=>{m||(m=!0,Zt(ji,`RPC '${e}' stream ${s} transport closed`),y.a_(),this.E_(h))}),x(h,qg.EventType.ERROR,E=>{m||(m=!0,im(ji,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),y.a_(new Kt(pt.UNAVAILABLE,"The operation could not be completed")))}),x(h,qg.EventType.MESSAGE,E=>{var S;if(!m){const B=E.data[0];Hn(!!B,16349);const D=B,I=(D==null?void 0:D.error)||((S=D[0])==null?void 0:S.error);if(I){Zt(ji,`RPC '${e}' stream ${s} received error:`,I);const U=I.status;let F=function(N){const j=Sa[N];if(j!==void 0)return hO(j)}(U),C=I.message;F===void 0&&(F=pt.INTERNAL,C="Unknown error status: "+U+" with message "+I.message),m=!0,y.a_(new Kt(F,C)),h.close()}else Zt(ji,`RPC '${e}' stream ${s} received:`,B),y.u_(B)}}),x(o,IP.STAT_EVENT,E=>{E.stat===A5.PROXY?Zt(ji,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===A5.NOPROXY&&Zt(ji,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function y_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t){return new eJ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,r,n=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-n);s>0&&Zt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="PersistentStream";class BO{constructor(e,r,n,s,a,i,o,l){this.Mi=e,this.S_=n,this.b_=s,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new NO(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===pt.RESOURCE_EXHAUSTED?(ZA(r.toString()),ZA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===pt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.D_===r&&this.G_(n,s)},n=>{e(()=>{const s=new Kt(pt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{n(()=>this.z_(s))}),this.stream.onMessage(s=>{n(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Zt(BF,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Zt(BF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XJ extends BO{constructor(e,r,n,s,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=nJ(this.serializer,e),n=function(a){if(!("targetChange"in a))return Ur.min();const i=a.targetChange;return i.targetIds&&i.targetIds.length?Ur.min():i.readTime?qu(i.readTime):Ur.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=w5(this.serializer),r.addTarget=function(a,i){let o;const l=i.target;if(o=m5(l)?{documents:iJ(a,l)}:{query:oJ(a,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=gO(a,i.resumeToken);const c=x5(a,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(Ur.min())>0){o.readTime=vw(a,i.snapshotVersion.toTimestamp());const c=x5(a,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=cJ(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=w5(this.serializer),r.removeTarget=e,this.q_(r)}}class JJ extends BO{constructor(e,r,n,s,a,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Hn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Hn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Hn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=aJ(e.writeResults,e.commitTime),n=qu(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=w5(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>sJ(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZJ{}class eZ extends ZJ{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Kt(pt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,i])=>this.connection.Go(e,v5(r,n),s,a,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Kt(pt.UNKNOWN,a.toString())})}Ho(e,r,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,v5(r,n),s,i,o,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Kt(pt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class tZ{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ZA(r),this.aa=!1):Zt("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="RemoteStore";class rZ{constructor(e,r,n,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{h0(this)&&(Zt(e0,"Restarting streams for network reachability change."),await async function(l){const c=Pr(l);c.Ea.add(4),await F1(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Gb(c)}(this))})}),this.Ra=new tZ(n,s)}}async function Gb(t){if(h0(t))for(const e of t.da)await e(!0)}async function F1(t){for(const e of t.da)await e(!1)}function kO(t,e){const r=Pr(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),$N(r)?KN(r):km(r).O_()&&qN(r,e))}function GN(t,e){const r=Pr(t),n=km(r);r.Ia.delete(e),n.O_()&&IO(r,e),r.Ia.size===0&&(n.O_()?n.L_():h0(r)&&r.Ra.set("Unknown"))}function qN(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ur.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}km(t).Y_(e)}function IO(t,e){t.Va.Ue(e),km(t).Z_(e)}function KN(t){t.Va=new YX({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),km(t).start(),t.Ra.ua()}function $N(t){return h0(t)&&!km(t).x_()&&t.Ia.size>0}function h0(t){return Pr(t).Ea.size===0}function FO(t){t.Va=void 0}async function nZ(t){t.Ra.set("Online")}async function sZ(t){t.Ia.forEach((e,r)=>{qN(t,e)})}async function aZ(t,e){FO(t),$N(t)?(t.Ra.ha(e),KN(t)):t.Ra.set("Unknown")}async function iZ(t,e,r){if(t.Ra.set("Online"),e instanceof mO&&e.state===2&&e.cause)try{await async function(s,a){const i=a.cause;for(const o of a.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(n){Zt(e0,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ww(t,n)}else if(e instanceof _2?t.Va.Ze(e):e instanceof pO?t.Va.st(e):t.Va.tt(e),!r.isEqual(Ur.min()))try{const n=await TO(t.localStore);r.compareTo(n)>=0&&await function(a,i){const o=a.Va.Tt(i);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=a.Ia.get(c);d&&a.Ia.set(c,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,c)=>{const d=a.Ia.get(l);if(!d)return;a.Ia.set(l,d.withResumeToken(Si.EMPTY_BYTE_STRING,d.snapshotVersion)),IO(a,l);const h=new df(d.target,l,c,d.sequenceNumber);qN(a,h)}),a.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Zt(e0,"Failed to raise snapshot:",n),await ww(t,n)}}async function ww(t,e,r){if(!Nm(e))throw e;t.Ea.add(1),await F1(t),t.Ra.set("Offline"),r||(r=()=>TO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Zt(e0,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Gb(t)})}function DO(t,e){return e().catch(r=>ww(t,r,e))}async function qb(t){const e=Pr(t),r=Pf(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:FN;for(;oZ(e);)try{const s=await HJ(e.localStore,n);if(s===null){e.Ta.length===0&&r.L_();break}n=s.batchId,lZ(e,s)}catch(s){await ww(e,s)}RO(e)&&LO(e)}function oZ(t){return h0(t)&&t.Ta.length<10}function lZ(t,e){t.Ta.push(e);const r=Pf(t);r.O_()&&r.X_&&r.ea(e.mutations)}function RO(t){return h0(t)&&!Pf(t).x_()&&t.Ta.length>0}function LO(t){Pf(t).start()}async function cZ(t){Pf(t).ra()}async function uZ(t){const e=Pf(t);for(const r of t.Ta)e.ea(r.mutations)}async function AZ(t,e,r){const n=t.Ta.shift(),s=PN.from(n,e,r);await DO(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await qb(t)}async function dZ(t,e){e&&Pf(t).X_&&await async function(n,s){if(function(i){return KX(i)&&i!==pt.ABORTED}(s.code)){const a=n.Ta.shift();Pf(n).B_(),await DO(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await qb(n)}}(t,e),RO(t)&&LO(t)}async function kF(t,e){const r=Pr(t);r.asyncQueue.verifyOperationInProgress(),Zt(e0,"RemoteStore received new credentials");const n=h0(r);r.Ea.add(3),await F1(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Gb(r)}async function fZ(t,e){const r=Pr(t);e?(r.Ea.delete(2),await Gb(r)):e||(r.Ea.add(2),await F1(r),r.Ra.set("Unknown"))}function km(t){return t.ma||(t.ma=function(r,n,s){const a=Pr(r);return a.sa(),new XJ(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:nZ.bind(null,t),t_:sZ.bind(null,t),r_:aZ.bind(null,t),H_:iZ.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),$N(t)?KN(t):t.Ra.set("Unknown")):(await t.ma.stop(),FO(t))})),t.ma}function Pf(t){return t.fa||(t.fa=function(r,n,s){const a=Pr(r);return a.sa(),new JJ(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:cZ.bind(null,t),r_:dZ.bind(null,t),ta:uZ.bind(null,t),na:AZ.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await qb(t)):(await t.fa.stop(),t.Ta.length>0&&(Zt(e0,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,r,n,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new GA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,a){const i=Date.now()+n,o=new WN(e,r,i,s,a);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Kt(pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function YN(t,e){if(ZA("AsyncQueue",`${e}: ${t}`),Nm(t))return new Kt(pt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{static emptySet(e){return new jp(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||dr.comparator(r.key,n.key):(r,n)=>dr.comparator(r.key,n.key),this.keyedMap=Kg(),this.sortedSet=new Ms(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof jp)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new jp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(){this.ga=new Ms(dr.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):kr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class dm{constructor(e,r,n,s,a,i,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,a){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new dm(e,r,jp.emptySet(r),i,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class pZ{constructor(){this.queries=FF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=Pr(r),a=s.queries;s.queries=FF(),a.forEach((i,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new Kt(pt.ABORTED,"Firestore shutting down"))}}function FF(){return new f0(t=>tO(t),Pb)}async function XN(t,e){const r=Pr(t);let n=3;const s=e.query;let a=r.queries.get(s);a?!a.ba()&&e.Da()&&(n=2):(a=new hZ,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(s,!0);break;case 1:a.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const o=YN(i,`Initialization of query '${wp(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&ZN(r)}async function JN(t,e){const r=Pr(t),n=e.query;let s=3;const a=r.queries.get(n);if(a){const i=a.Sa.indexOf(e);i>=0&&(a.Sa.splice(i,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function mZ(t,e){const r=Pr(t);let n=!1;for(const s of e){const a=s.query,i=r.queries.get(a);if(i){for(const o of i.Sa)o.Fa(s)&&(n=!0);i.wa=s}}n&&ZN(r)}function gZ(t,e,r){const n=Pr(t),s=n.queries.get(e);if(s)for(const a of s.Sa)a.onError(r);n.queries.delete(e)}function ZN(t){t.Ca.forEach(e=>{e.next()})}var E5,DF;(DF=E5||(E5={})).Ma="default",DF.Cache="cache";class e4{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new dm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=dm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==E5.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.key=e}}class MO{constructor(e){this.key=e}}class xZ{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pn(),this.mutatedKeys=pn(),this.eu=rO(e),this.tu=new jp(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new IF,s=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,i=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),m=Ob(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;p&&m?p.data.isEqual(m.data)?y!==x&&(n.track({type:3,doc:m}),E=!0):this.su(p,m)||(n.track({type:2,doc:m}),E=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(o=!0)):!p&&m?(n.track({type:0,doc:m}),E=!0):p&&!m&&(n.track({type:1,doc:p}),E=!0,(l||c)&&(o=!0)),E&&(m?(i=i.add(m),a=x?a.add(d):a.delete(d)):(i=i.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((d,h)=>function(m,y){const x=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kr(20277,{Rt:E})}};return x(m)-x(y)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(n),s=s??!1;const o=r&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,i.length!==0||c?{snapshot:new dm(this.query,e.tu,a,i,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new IF,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new MO(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new UO(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=pn();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return dm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const t4="SyncEngine";class vZ{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class yZ{constructor(e){this.key=e,this.hu=!1}}class wZ{constructor(e,r,n,s,a,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new f0(o=>tO(o),Pb),this.Iu=new Map,this.Eu=new Set,this.du=new Ms(dr.comparator),this.Au=new Map,this.Ru=new QN,this.Vu={},this.mu=new Map,this.fu=Am.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bZ(t,e,r=!0){const n=VO(t);let s;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await PO(n,e,r,!0),s}async function CZ(t,e){const r=VO(t);await PO(r,e,!0,!1)}async function PO(t,e,r,n){const s=await VJ(t.localStore,Gu(e)),a=s.targetId,i=t.sharedClientState.addLocalQueryTarget(a,r);let o;return n&&(o=await EZ(t,e,a,i==="current",s.resumeToken)),t.isPrimaryClient&&r&&kO(t.remoteStore,s),o}async function EZ(t,e,r,n,s){t.pu=(h,p,m)=>async function(x,E,S,B){let D=E.view.ru(S);D.Cs&&(D=await _F(x.localStore,E.query,!1).then(({documents:C})=>E.view.ru(C,D)));const I=B&&B.targetChanges.get(E.targetId),U=B&&B.targetMismatches.get(E.targetId)!=null,F=E.view.applyChanges(D,x.isPrimaryClient,I,U);return LF(x,E.targetId,F.au),F.snapshot}(t,h,p,m);const a=await _F(t.localStore,e,!0),i=new xZ(e,a.Qs),o=i.ru(a.documents),l=I1.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=i.applyChanges(o,t.isPrimaryClient,l);LF(t,r,c.au);const d=new vZ(e,r,i);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),c.snapshot}async function _Z(t,e,r){const n=Pr(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);if(a.length>1)return n.Iu.set(s.targetId,a.filter(i=>!Pb(i,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await b5(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&GN(n.remoteStore,s.targetId),_5(n,s.targetId)}).catch(Tm)):(_5(n,s.targetId),await b5(n.localStore,s.targetId,!0))}async function SZ(t,e){const r=Pr(t),n=r.Tu.get(e),s=r.Iu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),GN(r.remoteStore,n.targetId))}async function TZ(t,e,r){const n=RZ(t);try{const s=await function(i,o){const l=Pr(i),c=ur.now(),d=o.reduce((m,y)=>m.add(y.key),pn());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=ed(),x=pn();return l.Ns.getEntries(m,d).next(E=>{y=E,y.forEach((S,B)=>{B.isValidDocument()||(x=x.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(E=>{h=E;const S=[];for(const B of o){const D=HX(B,h.get(B.key).overlayedDocument);D!=null&&S.push(new Wf(B.key,D,KP(D.value.mapValue),go.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,S,o)}).next(E=>{p=E;const S=E.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(m,E.batchId,S)})}).then(()=>({batchId:p.batchId,changes:sO(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(i,o,l){let c=i.Vu[i.currentUser.toKey()];c||(c=new Ms(hn)),c=c.insert(o,l),i.Vu[i.currentUser.toKey()]=c}(n,s.batchId,r),await D1(n,s.changes),await qb(n.remoteStore)}catch(s){const a=YN(s,"Failed to persist write");r.reject(a)}}async function OO(t,e){const r=Pr(t);try{const n=await jJ(r.localStore,e);e.targetChanges.forEach((s,a)=>{const i=r.Au.get(a);i&&(Hn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?i.hu=!0:s.modifiedDocuments.size>0?Hn(i.hu,14607):s.removedDocuments.size>0&&(Hn(i.hu,42227),i.hu=!1))}),await D1(r,n,e)}catch(n){await Tm(n)}}function RF(t,e,r){const n=Pr(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Tu.forEach((a,i)=>{const o=i.view.va(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const l=Pr(i);l.onlineState=o;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(o)&&(c=!0)}),c&&ZN(l)}(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function NZ(t,e,r){const n=Pr(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Au.get(e),a=s&&s.key;if(a){let i=new Ms(dr.comparator);i=i.insert(a,Xi.newNoDocument(a,Ur.min()));const o=pn().add(a),l=new Vb(Ur.min(),new Map,new Ms(hn),i,o);await OO(n,l),n.du=n.du.remove(a),n.Au.delete(e),r4(n)}else await b5(n.localStore,e,!1).then(()=>_5(n,e,r)).catch(Tm)}async function BZ(t,e){const r=Pr(t),n=e.batch.batchId;try{const s=await OJ(r.localStore,e);QO(r,n,null),jO(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await D1(r,s)}catch(s){await Tm(s)}}async function kZ(t,e,r){const n=Pr(t);try{const s=await function(i,o){const l=Pr(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,o).next(h=>(Hn(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(n.localStore,e);QO(n,e,r),jO(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await D1(n,s)}catch(s){await Tm(s)}}function jO(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function QO(t,e,r){const n=Pr(t);let s=n.Vu[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function _5(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||HO(t,n)})}function HO(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(GN(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),r4(t))}function LF(t,e,r){for(const n of r)n instanceof UO?(t.Ru.addReference(n.key,e),IZ(t,n)):n instanceof MO?(Zt(t4,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||HO(t,n.key)):kr(19791,{wu:n})}function IZ(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Zt(t4,"New document in limbo: "+r),t.Eu.add(n),r4(t))}function r4(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new dr(fs.fromString(e)),n=t.fu.next();t.Au.set(n,new yZ(r)),t.du=t.du.insert(r,n),kO(t.remoteStore,new df(Gu(Mb(r.path)),n,"TargetPurposeLimboResolution",Rb.ce))}}async function D1(t,e,r){const n=Pr(t),s=[],a=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{i.push(n.pu(l,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=VN.As(l.targetId,c);a.push(h)}}))}),await Promise.all(i),n.Pu.H_(s),await async function(l,c){const d=Pr(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Ct.forEach(c,p=>Ct.forEach(p.Es,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>Ct.forEach(p.ds,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!Nm(h))throw h;Zt(zN,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=d.Ms.get(p),y=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(y);d.Ms=d.Ms.insert(p,x)}}}(n.localStore,a))}async function FZ(t,e){const r=Pr(t);if(!r.currentUser.isEqual(e)){Zt(t4,"User change. New user:",e.toKey());const n=await SO(r.localStore,e);r.currentUser=e,function(a,i){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new Kt(pt.CANCELLED,i))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await D1(r,n.Ls)}}function DZ(t,e){const r=Pr(t),n=r.Au.get(e);if(n&&n.hu)return pn().add(n.key);{let s=pn();const a=r.Iu.get(e);if(!a)return s;for(const i of a){const o=r.Tu.get(i);s=s.unionWith(o.view.nu)}return s}}function VO(t){const e=Pr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NZ.bind(null,e),e.Pu.H_=mZ.bind(null,e.eventManager),e.Pu.yu=gZ.bind(null,e.eventManager),e}function RZ(t){const e=Pr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kZ.bind(null,e),e}class bw{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zb(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return PJ(this.persistence,new LJ,e.initialUser,this.serializer)}Cu(e){return new _O(HN.mi,this.serializer)}Du(e){return new GJ}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bw.provider={build:()=>new bw};class LZ extends bw{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Hn(this.persistence.referenceDelegate instanceof yw,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new yJ(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Uo.withCacheSize(this.cacheSizeBytes):Uo.DEFAULT;return new _O(n=>yw.mi(n,r),this.serializer)}}class S5{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>RF(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=FZ.bind(null,this.syncEngine),await fZ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pZ}()}createDatastore(e){const r=zb(e.databaseInfo.databaseId),n=function(a){return new YJ(a)}(e.databaseInfo);return function(a,i,o,l){return new eZ(a,i,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,a,i,o){return new rZ(n,s,a,i,o)}(this.localStore,this.datastore,e.asyncQueue,r=>RF(this.syncEngine,r,0),function(){return NF.v()?new NF:new qJ}())}createSyncEngine(e,r){return function(s,a,i,o,l,c,d){const h=new wZ(s,a,i,o,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=Pr(s);Zt(e0,"RemoteStore shutting down."),a.Ea.add(5),await F1(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}S5.provider={build:()=>new S5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ZA("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="FirestoreClient";class UZ{constructor(e,r,n,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Ki.UNAUTHENTICATED,this.clientId=IN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async i=>{Zt(Of,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(Zt(Of,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new GA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=YN(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function w_(t,e){t.asyncQueue.verifyOperationInProgress(),Zt(Of,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await SO(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function UF(t,e){t.asyncQueue.verifyOperationInProgress();const r=await MZ(t);Zt(Of,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>kF(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>kF(e.remoteStore,s)),t._onlineComponents=e}async function MZ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Zt(Of,"Using user provided OfflineComponentProvider");try{await w_(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===pt.FAILED_PRECONDITION||s.code===pt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;im("Error using user provided cache. Falling back to memory cache: "+r),await w_(t,new bw)}}else Zt(Of,"Using default OfflineComponentProvider"),await w_(t,new LZ(void 0));return t._offlineComponents}async function zO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Zt(Of,"Using user provided OnlineComponentProvider"),await UF(t,t._uninitializedComponentsProvider._online)):(Zt(Of,"Using default OnlineComponentProvider"),await UF(t,new S5))),t._onlineComponents}function PZ(t){return zO(t).then(e=>e.syncEngine)}async function Cw(t){const e=await zO(t),r=e.eventManager;return r.onListen=bZ.bind(null,e.syncEngine),r.onUnlisten=_Z.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=CZ.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=SZ.bind(null,e.syncEngine),r}function OZ(t,e,r={}){const n=new GA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,c){const d=new n4({next:p=>{d.Nu(),i.enqueueAndForget(()=>JN(a,h));const m=p.docs.has(o);!m&&p.fromCache?c.reject(new Kt(pt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Kt(pt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new e4(Mb(o.path),d,{includeMetadataChanges:!0,qa:!0});return XN(a,h)}(await Cw(t),t.asyncQueue,e,r,n)),n.promise}function jZ(t,e,r={}){const n=new GA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,c){const d=new n4({next:p=>{d.Nu(),i.enqueueAndForget(()=>JN(a,h)),p.fromCache&&l.source==="server"?c.reject(new Kt(pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new e4(o,d,{includeMetadataChanges:!0,qa:!0});return XN(a,h)}(await Cw(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="firestore.googleapis.com",PF=!0;class OF{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Kt(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qO,this.ssl=PF}else this.host=e.host,this.ssl=e.ssl??PF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xJ)throw new Kt(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GO(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Kt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Kt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Kt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kb{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Kt(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Kt(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OF(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new GY;switch(n.type){case"firstParty":return new WY(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Kt(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=MF.get(r);n&&(Zt("ComponentProvider","Removing Datastore"),MF.delete(r),n.terminate())}(this),Promise.resolve()}}function QZ(t,e,r,n={}){var c;t=mo(t,Kb);const s=A0(e),a=t._getSettings(),i={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;s&&(mN(`https://${o}`),gN("Firestore",!0)),a.host!==qO&&a.host!==o&&im("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:o,ssl:s,emulatorOptions:n};if(!Ff(l,i)&&(t._setSettings(l),n.mockUserToken)){let d,h;if(typeof n.mockUserToken=="string")d=n.mockUserToken,h=Ki.MOCK_USER;else{d=tK(n.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new Kt(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ki(p)}t._authCredentials=new qY(new LP(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ld(this.firestore,e,this._query)}}class Ys{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ef(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ys(this.firestore,e,this._key)}toJSON(){return{type:Ys._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(B1(r,Ys._jsonSchema))return new Ys(e,n||null,new dr(fs.fromString(r.referencePath)))}}Ys._jsonSchemaVersion="firestore/documentReference/1.0",Ys._jsonSchema={type:Fa("string",Ys._jsonSchemaVersion),referencePath:Fa("string")};class Ef extends ld{constructor(e,r,n){super(e,r,Mb(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ys(this.firestore,null,new dr(e))}withConverter(e){return new Ef(this.firestore,e,this._path)}}function Ft(t,e,...r){if(t=Ns(t),UP("collection","path",e),t instanceof Kb){const n=fs.fromString(e,...r);return J3(n),new Ef(t,null,n)}{if(!(t instanceof Ys||t instanceof Ef))throw new Kt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(fs.fromString(e,...r));return J3(n),new Ef(t.firestore,null,n)}}function mr(t,e,...r){if(t=Ns(t),arguments.length===1&&(e=IN.newId()),UP("doc","path",e),t instanceof Kb){const n=fs.fromString(e,...r);return X3(n),new Ys(t,null,new dr(n))}{if(!(t instanceof Ys||t instanceof Ef))throw new Kt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(fs.fromString(e,...r));return X3(n),new Ys(t.firestore,t instanceof Ef?t.converter:null,new dr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF="AsyncQueue";class QF{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new NO(this,"async_queue_retry"),this._c=()=>{const n=y_();n&&Zt(jF,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=y_();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=y_();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new GA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Nm(e))throw e;Zt(jF,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,ZA("INTERNAL UNHANDLED ERROR: ",HF(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=WN.createAndSchedule(this,e,r,n,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&kr(47125,{Pc:HF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function HF(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Zu extends Kb{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new QF,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new QF(e),this._firestoreClient=void 0,await e}}}function KO(t,e){const r=typeof t=="object"?t:wN(),n=typeof t=="string"?t:hw,s=Nb(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=j8("firestore");a&&QZ(s,...a)}return s}function R1(t){if(t._terminated)throw new Kt(pt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HZ(t),t._firestoreClient}function HZ(t){var n,s,a;const e=t._freezeSettings(),r=function(o,l,c,d){return new fX(o,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,GO(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new UZ(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rc(Si.fromBase64String(e))}catch(r){throw new Kt(pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new rc(Si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(B1(e,rc._jsonSchema))return rc.fromBase64String(e.bytes)}}rc._jsonSchemaVersion="firestore/bytes/1.0",rc._jsonSchema={type:Fa("string",rc._jsonSchemaVersion),bytes:Fa("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Kt(pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Kt(pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Kt(pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return hn(this._lat,e._lat)||hn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ku._jsonSchemaVersion}}static fromJSON(e){if(B1(e,Ku._jsonSchema))return new Ku(e.latitude,e.longitude)}}Ku._jsonSchemaVersion="firestore/geoPoint/1.0",Ku._jsonSchema={type:Fa("string",Ku._jsonSchemaVersion),latitude:Fa("number"),longitude:Fa("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$u._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(B1(e,$u._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new $u(e.vectorValues);throw new Kt(pt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$u._jsonSchemaVersion="firestore/vectorValue/1.0",$u._jsonSchema={type:Fa("string",$u._jsonSchemaVersion),vectorValues:Fa("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VZ=/^__.*__$/;class zZ{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Wf(e,this.data,this.fieldMask,r,this.fieldTransforms):new k1(e,this.data,r,this.fieldTransforms)}}class $O{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Wf(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function WO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kr(40011,{Ac:t})}}class $b{constructor(e,r,n,s,a,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $b({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ew(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(WO(this.Ac)&&VZ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class GZ{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||zb(e)}Cc(e,r,n,s=!1){return new $b({Ac:e,methodName:r,Dc:n,path:Ci.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function M1(t){const e=t._freezeSettings(),r=zb(t._databaseId);return new GZ(t._databaseId,!!e.ignoreUndefinedProperties,r)}function s4(t,e,r,n,s,a={}){const i=t.Cc(a.merge||a.mergeFields?2:0,e,r,s);o4("Data must be an object, but it was:",i,n);const o=JO(n,i);let l,c;if(a.merge)l=new ml(i.fieldMask),c=i.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const p=T5(e,h,r);if(!i.contains(p))throw new Kt(pt.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);ej(d,p)||d.push(p)}l=new ml(d),c=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=i.fieldTransforms;return new zZ(new Po(o),l,c)}class Wb extends U1{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wb}}function qZ(t,e,r){return new $b({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class a4 extends U1{_toFieldTransform(e){return new AO(e.path,new Gx)}isEqual(e){return e instanceof a4}}class i4 extends U1{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=qZ(this,e,!0),n=this.vc.map(a=>Im(a,r)),s=new um(n);return new AO(e.path,s)}isEqual(e){return e instanceof i4&&Ff(this.vc,e.vc)}}function YO(t,e,r,n){const s=t.Cc(1,e,r);o4("Data must be an object, but it was:",s,n);const a=[],i=Po.empty();$f(n,(l,c)=>{const d=l4(e,l,r);c=Ns(c);const h=s.yc(d);if(c instanceof Wb)a.push(d);else{const p=Im(c,h);p!=null&&(a.push(d),i.set(d,p))}});const o=new ml(a);return new $O(i,o,s.fieldTransforms)}function XO(t,e,r,n,s,a){const i=t.Cc(1,e,r),o=[T5(e,n,r)],l=[s];if(a.length%2!=0)throw new Kt(pt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)o.push(T5(e,a[p])),l.push(a[p+1]);const c=[],d=Po.empty();for(let p=o.length-1;p>=0;--p)if(!ej(c,o[p])){const m=o[p];let y=l[p];y=Ns(y);const x=i.yc(m);if(y instanceof Wb)c.push(m);else{const E=Im(y,x);E!=null&&(c.push(m),d.set(m,E))}}const h=new ml(c);return new $O(d,h,i.fieldTransforms)}function KZ(t,e,r,n=!1){return Im(r,t.Cc(n?4:3,e))}function Im(t,e){if(ZO(t=Ns(t)))return o4("Unsupported field value:",e,t),JO(t,e);if(t instanceof U1)return function(n,s){if(!WO(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const a=[];let i=0;for(const o of n){let l=Im(o,s.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),i++}return{arrayValue:{values:a}}}(t,e)}return function(n,s){if((n=Ns(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return UX(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=ur.fromDate(n);return{timestampValue:vw(s.serializer,a)}}if(n instanceof ur){const a=new ur(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:vw(s.serializer,a)}}if(n instanceof Ku)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof rc)return{bytesValue:gO(s.serializer,n._byteString)};if(n instanceof Ys){const a=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(a))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:jN(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof $u)return function(i,o){return{mapValue:{fields:{[GP]:{stringValue:qP},[pw]:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return MN(o.serializer,c)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Db(n)}`)}(t,e)}function JO(t,e){const r={};return OP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$f(t,(n,s)=>{const a=Im(s,e.mc(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function ZO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ur||t instanceof Ku||t instanceof rc||t instanceof Ys||t instanceof U1||t instanceof $u)}function o4(t,e,r){if(!ZO(r)||!MP(r)){const n=Db(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function T5(t,e,r){if((e=Ns(e))instanceof L1)return e._internalPath;if(typeof e=="string")return l4(t,e);throw Ew("Field path arguments must be of type string or ",t,!1,void 0,r)}const $Z=new RegExp("[~\\*/\\[\\]]");function l4(t,e,r){if(e.search($Z)>=0)throw Ew(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new L1(...e.split("."))._internalPath}catch{throw Ew(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Ew(t,e,r,n,s){const a=n&&!n.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${n}`),i&&(l+=` in document ${s}`),l+=")"),new Kt(pt.INVALID_ARGUMENT,o+t+l)}function ej(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,r,n,s,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ys(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Yb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class WZ extends tj{data(){return super.data()}}function Yb(t,e){return typeof e=="string"?l4(t,e):e instanceof L1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Kt(pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c4{}class u4 extends c4{}function er(t,e,...r){let n=[];e instanceof c4&&n.push(e),n=n.concat(r),function(a){const i=a.filter(l=>l instanceof A4).length,o=a.filter(l=>l instanceof Xb).length;if(i>1||i>0&&o>0)throw new Kt(pt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Xb extends u4{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Xb(e,r,n)}_apply(e){const r=this._parse(e);return nj(e._query,r),new ld(e.firestore,e.converter,g5(e._query,r))}_parse(e){const r=M1(e.firestore);return function(a,i,o,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Kt(pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){GF(h,d);const y=[];for(const x of h)y.push(zF(l,a,x));p={arrayValue:{values:y}}}else p=zF(l,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||GF(h,d),p=KZ(o,i,h,d==="in"||d==="not-in");return Ia.create(c,d,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Mn(t,e,r){const n=e,s=Yb("where",t);return Xb._create(s,n,r)}class A4 extends c4{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new A4(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:$c.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,a){let i=s;const o=a.getFlattenedFilters();for(const l of o)nj(i,l),i=g5(i,l)}(e._query,r),new ld(e.firestore,e.converter,g5(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class d4 extends u4{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new d4(e,r)}_apply(e){const r=function(s,a,i){if(s.startAt!==null)throw new Kt(pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Kt(pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zx(a,i)}(e._query,this._field,this._direction);return new ld(e.firestore,e.converter,function(s,a){const i=s.explicitOrderBy.concat([a]);return new Bm(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function an(t,e="asc"){const r=e,n=Yb("orderBy",t);return d4._create(n,r)}class f4 extends u4{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new f4(e,r,n)}_apply(e){return new ld(e.firestore,e.converter,gw(e._query,this._limit,this._limitType))}}function _f(t){return rX("limit",t),f4._create("limit",t,"F")}function zF(t,e,r){if(typeof(r=Ns(r))=="string"){if(r==="")throw new Kt(pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eO(e)&&r.indexOf("/")!==-1)throw new Kt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(fs.fromString(r));if(!dr.isDocumentKey(n))throw new Kt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return iF(t,new dr(n))}if(r instanceof Ys)return iF(t,r._key);throw new Kt(pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Db(r)}.`)}function GF(t,e){if(!Array.isArray(t)||t.length===0)throw new Kt(pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nj(t,e){const r=function(s,a){for(const i of s)for(const o of i.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Kt(pt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Kt(pt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class YZ{convertValue(e,r="none"){switch(Mf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ua(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Uf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw kr(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return $f(e,(s,a)=>{n[s]=this.convertValue(a,r)}),n}convertVectorValue(e){var n,s,a;const r=(a=(s=(n=e.fields)==null?void 0:n[pw].arrayValue)==null?void 0:s.values)==null?void 0:a.map(i=>ua(i.doubleValue));return new $u(r)}convertGeoPoint(e){return new Ku(ua(e.latitude),ua(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ub(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Qx(e));default:return null}}convertTimestamp(e){const r=Lf(e);return new ur(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=fs.fromString(e);Hn(CO(n),9688,{name:e});const s=new Hx(n.get(1),n.get(3)),a=new dr(n.popFirst(5));return s.isEqual(r)||ZA(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Wg{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mh extends tj{constructor(e,r,n,s,a,i){super(e,r,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new S2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Yb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(pt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Mh._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Mh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mh._jsonSchema={type:Fa("string",Mh._jsonSchemaVersion),bundleSource:Fa("string","DocumentSnapshot"),bundleName:Fa("string"),bundle:Fa("string")};class S2 extends Mh{data(e={}){return super.data(e)}}class Ph{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Wg(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new S2(this._firestore,this._userDataWriter,n.key,n,new Wg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Kt(pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const l=new S2(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Wg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new S2(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Wg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:XZ(o.type),doc:l,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(pt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ph._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=IN.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kr(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t){t=mo(t,Ys);const e=mo(t.firestore,Zu);return OZ(R1(e),t._key).then(r=>sj(e,t,r))}Ph._jsonSchemaVersion="firestore/querySnapshot/1.0",Ph._jsonSchema={type:Fa("string",Ph._jsonSchemaVersion),bundleSource:Fa("string","QuerySnapshot"),bundleName:Fa("string"),bundle:Fa("string")};class p4 extends YZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new rc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ys(this.firestore,null,r)}}function Da(t){t=mo(t,ld);const e=mo(t.firestore,Zu),r=R1(e),n=new p4(e);return rj(t._query),jZ(r,t._query).then(s=>new Ph(e,n,t,s))}function Ti(t,e,r){t=mo(t,Ys);const n=mo(t.firestore,Zu),s=h4(t.converter,e,r);return j1(n,[s4(M1(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,go.none())])}function O1(t,e,r,...n){t=mo(t,Ys);const s=mo(t.firestore,Zu),a=M1(s);let i;return i=typeof(e=Ns(e))=="string"||e instanceof L1?XO(a,"updateDoc",t._key,e,r,n):YO(a,"updateDoc",t._key,e),j1(s,[i.toMutation(t._key,go.exists(!0))])}function li(t){return j1(mo(t.firestore,Zu),[new Hb(t._key,go.none())])}function ws(t,e){const r=mo(t.firestore,Zu),n=mr(t),s=h4(t.converter,e);return j1(r,[s4(M1(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,go.exists(!1))]).then(()=>n)}function gr(t,...e){var l,c,d;t=Ns(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||VF(e[n])||(r=e[n++]);const s={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(VF(e[n])){const h=e[n];e[n]=(l=h.next)==null?void 0:l.bind(h),e[n+1]=(c=h.error)==null?void 0:c.bind(h),e[n+2]=(d=h.complete)==null?void 0:d.bind(h)}let a,i,o;if(t instanceof Ys)i=mo(t.firestore,Zu),o=Mb(t._key.path),a={next:h=>{e[n]&&e[n](sj(i,t,h))},error:e[n+1],complete:e[n+2]};else{const h=mo(t,ld);i=mo(h.firestore,Zu),o=h._query;const p=new p4(i);a={next:m=>{e[n]&&e[n](new Ph(i,p,h,m))},error:e[n+1],complete:e[n+2]},rj(t._query)}return function(p,m,y,x){const E=new n4(x),S=new e4(m,E,y);return p.asyncQueue.enqueueAndForget(async()=>XN(await Cw(p),S)),()=>{E.Nu(),p.asyncQueue.enqueueAndForget(async()=>JN(await Cw(p),S))}}(R1(i),o,s,a)}function j1(t,e){return function(n,s){const a=new GA;return n.asyncQueue.enqueueAndForget(async()=>TZ(await PZ(n),s,a)),a.promise}(R1(t),e)}function sj(t,e,r){const n=r.docs.get(e._key),s=new p4(t);return new Mh(t,s,e._key,n,new Wg(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZ{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=M1(e)}set(e,r,n){this._verifyNotCommitted();const s=b_(e,this._firestore),a=h4(s.converter,r,n),i=s4(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,n);return this._mutations.push(i.toMutation(s._key,go.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const a=b_(e,this._firestore);let i;return i=typeof(r=Ns(r))=="string"||r instanceof L1?XO(this._dataReader,"WriteBatch.update",a._key,r,n,s):YO(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(i.toMutation(a._key,go.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=b_(e,this._firestore);return this._mutations=this._mutations.concat(new Hb(r._key,go.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Kt(pt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function b_(t,e){if((t=Ns(t)).firestore!==e)throw new Kt(pt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ZZ(){return new a4("serverTimestamp")}function eee(...t){return new i4("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t){return R1(t=mo(t,Zu)),new JZ(t,e=>j1(t,e))}(function(e,r=!0){(function(s){Sm=s})(Em),Xh(new Df("firestore",(n,{instanceIdentifier:s,options:a})=>{const i=n.getProvider("app").getImmediate(),o=new Zu(new KY(n.getProvider("auth-internal")),new YY(i,n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Kt(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hx(c.options.projectId,d)}(i,s),i);return a={useFetchStreams:r,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Hu(K3,$3,e),Hu(K3,$3,"esm2020")})();const tee={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},aj=yN(tee),Q1=TP(aj),Yr=KO(aj),ree=Object.freeze(Object.defineProperty({__proto__:null,auth:Q1,db:Yr},Symbol.toStringTag,{value:"Module"})),nee=async(t,e)=>{try{return(await NW(Q1,t,e)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},C_=async()=>{try{await IW(Q1)}catch(t){throw console.error("Error en logoutUser helper:",t),t}},see=async t=>{try{await TW(Q1,t)}catch(e){throw console.error("Error en resetPassword helper:",e),e}},ij=async t=>{try{const e=mr(Yr,"usuarios",t),r=await P1(e);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${t}`),null)}catch(e){throw console.error("Error en getUserProfile helper:",e),e}};var jt=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(jt||{}),An=(t=>(t.EVALUACION="Evaluación",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedagógica",t))(An||{}),Th=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Guía de Aprendizaje",t.RUBRICA="Rúbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(Th||{});const aee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),La="w-6 h-6",Jb="w-24 h-24",g4=()=>u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),iee=()=>u.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M9 18h6"}),u.jsx("path",{d:"M10 22h4"}),u.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),oee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),lee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Yg=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Xg=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),oj=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),cee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Jb,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),uee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Jb,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Aee=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Jb,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),dee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Jb,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),fee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),qF=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),cy=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),E_=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),uy=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),__=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),KF=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),hee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),pee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),mee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),gee=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),$F=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),xee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),S_=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),vee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:La,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),yee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),WF=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:La,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),wee=[{id:jt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:u.jsx(cee,{})},{id:jt.PROFESORADO,label:"Profesorado",icon:u.jsx(uee,{})},{id:jt.COORDINACION_TP,label:"Coordinación TP",icon:u.jsx(Aee,{})},{id:jt.ESTUDIANTE,label:"Estudiantes",icon:u.jsx(dee,{})}],bee={[jt.SUBDIRECCION]:[{name:"Dashboard",icon:u.jsx(fee,{})},{name:"Administración",icon:u.jsx(gee,{})},{name:"Seguimiento Curricular",icon:u.jsx(yee,{})},{name:"Acompañamiento docente",icon:u.jsx(mee,{})},{name:"Análisis Taxonómico",icon:u.jsx(WF,{})},{name:"Interdisciplinario",icon:u.jsx(S_,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:u.jsx(qF,{})},{name:"Crear horarios",icon:u.jsx(E_,{})},{name:"Seguimiento de acciones pedagógicas",icon:u.jsx(uy,{})},{name:"Inclusión",icon:u.jsx($F,{})},{name:"Calendario Académico",icon:u.jsx(cy,{})},{name:"Muro de Anuncios",icon:u.jsx(Yg,{})},{name:"Mensajería Interna",icon:u.jsx(Xg,{})},{name:"Generador de Actas",icon:u.jsx(__,{})}],[jt.PROFESORADO]:[{name:"Planificación",icon:u.jsx(KF,{})},{name:"Mis Acompañamientos",icon:u.jsx(xee,{})},{name:"Recursos de Aprendizaje",icon:u.jsx(hee,{})},{name:"Análisis Taxonómico",icon:u.jsx(WF,{})},{name:"Interdisciplinario",icon:u.jsx(S_,{})},{name:"Inclusión",icon:u.jsx($F,{})},{name:"Actividades Remotas",icon:u.jsx(pee,{})},{name:"Evaluación de Aprendizajes",icon:u.jsx(__,{})},{name:"Evaluaciones Formativas",icon:u.jsx(uy,{})},{name:"Calendario Académico",icon:u.jsx(cy,{})},{name:"Muro de Anuncios",icon:u.jsx(Yg,{})},{name:"Mensajería Interna",icon:u.jsx(Xg,{})},{name:"Generador de Actas",icon:u.jsx(qF,{})}],[jt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:u.jsx(uy,{})},{name:"Asistencia Dual",icon:u.jsx(E_,{})},{name:"Pañol",icon:u.jsx(vee,{})},{name:"Gestión de Empresas",icon:u.jsx(aee,{})},{name:"Calendario Académico",icon:u.jsx(cy,{})},{name:"Muro de Anuncios",icon:u.jsx(Yg,{})},{name:"Mensajería Interna",icon:u.jsx(Xg,{})},{name:"Generador de Actas",icon:u.jsx(__,{})}],[jt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:u.jsx(KF,{})},{name:"Evaluación Formativa",icon:u.jsx(uy,{})},{name:"Tareas Interdisciplinarias",icon:u.jsx(S_,{})},{name:"Asistencia a Empresa",icon:u.jsx(E_,{})},{name:"Calendario Académico",icon:u.jsx(cy,{})},{name:"Muro de Anuncios",icon:u.jsx(Yg,{})},{name:"Mensajería Interna",icon:u.jsx(Xg,{})}]},YF=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],Ay=["Pendiente","En Proceso","Cumplida"],_w=["1º Medio","2º Medio","3º Medio","4º Medio"],yl=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],ha=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],N5=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],T2=["Lunes","Martes","Miércoles","Jueves","Viernes"],B5=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],Cee={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},uf={[An.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[An.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[An.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[An.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},Eee=Object.values(Th),T_=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],N_=["Vinculado","Desvinculado","En proceso","Empresa"],Oh=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],_ee=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],Sw=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],gx=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],lj=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],dy=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],See=({onLoginAttempt:t,onForgotPasswordRequest:e,error:r})=>{const[n,s]=q.useState(""),[a,i]=q.useState(""),[o,l]=q.useState("login"),c=p=>{p.preventDefault(),t(n,a)},d=p=>{p.preventDefault(),e(n),l("forgot_sent")},h=()=>o==="forgot"?u.jsxs("form",{onSubmit:d,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:p=>s(p.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),u.jsx("div",{children:u.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),u.jsx("div",{className:"text-sm text-center",children:u.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),u.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",u.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),u.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),u.jsx("button",{type:"button",onClick:()=>{l("login"),s("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):u.jsxs("form",{onSubmit:c,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:p=>s(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:p=>i(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&u.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:u.jsx("p",{children:r})}),u.jsx("div",{className:"text-sm text-center",children:u.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),u.jsx("div",{children:u.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsx("div",{className:"mb-4 flex justify-center items-center",children:u.jsx(g4,{})}),u.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),u.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),u.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},B_=({trigger:t,children:e,onOpen:r})=>{const[n,s]=q.useState(!1),a=q.useRef(null),i=()=>{const l=!n;s(l),l&&r&&r()},o=l=>{a.current&&!a.current.contains(l.target)&&s(!1)};return q.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),u.jsxs("div",{className:"relative",ref:a,children:[u.jsx("div",{onClick:i,children:t}),n&&u.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>s(!1),children:e})]})},XF="usuariosLiceo",Tee=({user:t,onClose:e,onSave:r})=>{const[n,s]=q.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),a=o=>{s({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...n};try{const c=localStorage.getItem(XF);let d=c?JSON.parse(c):[];const h=d.findIndex(p=>p.id===t.id);h>-1?d[h]=l:d.push(l),localStorage.setItem(XF,JSON.stringify(d)),r(l),e()}catch(c){console.error("Failed to save user profile:",c),alert("No se pudo guardar el perfil.")}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:u.jsxs("form",{onSubmit:i,children:[u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),u.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),u.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),u.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),u.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[u.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},JF="usuariosLiceo",Nee=({user:t,onClose:e,onSave:r})=>{const[n,s]=q.useState(""),[a,i]=q.useState(""),[o,l]=q.useState(null),c=d=>{if(d.preventDefault(),l(null),!n){l("La contraseña no puede estar en blanco.");return}if(n!==a){l("Las contraseñas no coinciden.");return}const h={...t,password:n};try{const p=localStorage.getItem(JF);let m=p?JSON.parse(p):[];const y=m.findIndex(x=>x.id===t.id);y>-1?m[y]=h:m.push(h),localStorage.setItem(JF,JSON.stringify(m)),r(h),e()}catch(p){console.error("Failed to save new password:",p),l("No se pudo guardar la nueva contraseña.")}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:u.jsxs("form",{onSubmit:c,children:[u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),u.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>s(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&u.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:u.jsx("p",{children:o})})]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[u.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},ZF="anunciosMuro",e6="mensajesInternos",t6="lir-read-status",Bee=({user:t})=>{if(t.fotoUrl)return u.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",r=String(e).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return u.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},kee=({currentUser:t,onLogout:e,onNavigate:r,onUserUpdate:n,onChangeProfile:s,canChangeProfile:a,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[c,d]=q.useState([]),[h,p]=q.useState([]),[m,y]=q.useState(!1),[x,E]=q.useState(!1),S=q.useCallback(()=>{try{const U=localStorage.getItem(`${t6}-${t.id}`);return U?JSON.parse(U):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),B=q.useCallback(U=>{try{localStorage.setItem(`${t6}-${t.id}`,JSON.stringify(U))}catch(F){console.error("Failed to set read status:",F)}},[t.id]);q.useEffect(()=>{const U=JSON.parse(localStorage.getItem(ZF)||"[]"),F=S();d(U.filter(_=>!F.announcements.includes(_.id)));const C=JSON.parse(localStorage.getItem(e6)||"[]");p(C.filter(_=>_.para===t.email).sort((_,N)=>new Date(N.fecha).getTime()-new Date(_.fecha).getTime()).slice(0,5))},[t.id,S,o]);const D=()=>{const U=S(),F=JSON.parse(localStorage.getItem(ZF)||"[]").map(C=>C.id);U.announcements=F,B(U),d([])},I=()=>{const U=S(),C=JSON.parse(localStorage.getItem(e6)||"[]").filter(_=>_.para===t.email).map(_=>_.id);U.messages=[...new Set([...U.messages,...C])],B(U),l()};return u.jsxs(u.Fragment,{children:[u.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:u.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:u.jsx(oee,{})}),u.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[u.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),u.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),u.jsx("div",{className:"flex-1 flex justify-center",children:u.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:u.jsx(lee,{})})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"flex items-center gap-3",children:u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),u.jsx(B_,{onOpen:D,trigger:u.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[u.jsx(Yg,{}),c.length>0&&u.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:c.length})]}),children:u.jsxs("div",{className:"p-2",children:[u.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),u.jsxs("ul",{className:"mt-1",children:[c.slice(0,3).map(U=>u.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[u.jsx("p",{className:"font-bold dark:text-slate-200",children:U.titulo}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:U.mensaje})]},U.id)),c.length===0&&u.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),u.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),u.jsx(B_,{onOpen:I,trigger:u.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[u.jsx(Xg,{}),o>0&&u.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:u.jsxs("div",{className:"p-2",children:[u.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),u.jsxs("ul",{className:"mt-1",children:[h.slice(0,3).map(U=>u.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[u.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",U.de]}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:U.asunto})]},U.id)),h.length===0&&u.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),u.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),u.jsx(B_,{trigger:u.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:u.jsx(Bee,{user:t})}),children:u.jsxs("div",{className:"p-2",children:[u.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),u.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[u.jsx("li",{children:u.jsx("button",{onClick:()=>y(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>E(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),a&&u.jsx("li",{children:u.jsx("button",{onClick:s,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),u.jsx("li",{children:u.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&u.jsx(Tee,{user:t,onClose:()=>y(!1),onSave:n}),x&&u.jsx(Nee,{user:t,onClose:()=>E(!1),onSave:n})]})};var wh={};const Iee={apiKey:wh.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:wh.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:wh.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:wh.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:wh.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:wh.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:wh.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},cj=C3().length===0?yN(Iee):C3()[0],Tt=KO(cj),Fee=TP(cj),H1="reemplazos_docentes",Dee="usuarios",x4=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaActualizacion:((a=(s=e.fechaActualizacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaActualizacion}},Ree=t=>{const e=t.data();return{id:t.id,...e}},Lee=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:ur.fromDate(new Date),fechaActualizacion:ur.fromDate(new Date)};return(await ws(Ft(Tt,H1),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},Uee=async(t,e)=>{try{const r=mr(Tt,H1,t),n=await P1(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar este reemplazo");await li(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},Mee=(t,e,r=50)=>{try{const n=er(Ft(Tt,H1),Mn("userId","==",t),an("diaAusencia","desc"),_f(r));return gr(n,s=>{const a=s.docs.map(x4);e(a)},s=>{console.error("Error en suscripción a reemplazos:",s),e([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},Pee=t=>{try{const e=er(Ft(Tt,Dee),Mn("profile","==",jt.PROFESORADO));return gr(e,n=>{const s=n.docs.map(Ree);t(s)},n=>{console.error("Error al obtener la lista de profesores:",n),t([])})}catch(e){return console.error("Error al crear la suscripción de profesores:",e),()=>{}}},Oee=async t=>{try{const e=er(Ft(Tt,H1),Mn("userId","==",t)),n=(await Da(e)).docs.map(x4),s=n.length,a=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:s,horasRealizadas:a,horasCubiertas:i,porcentajeRealizadas:s>0?a/s*100:0}}catch(e){throw console.error("Error al obtener estadísticas:",e),new Error("No se pudieron obtener las estadísticas")}},jee=async(t,e)=>{try{if(!e.trim())return[];const r=er(Ft(Tt,H1),Mn("userId","==",t),an("diaAusencia","desc"),_f(100)),s=(await Da(r)).docs.map(x4),a=e.toLowerCase();return s.filter(i=>i.docenteAusente.toLowerCase().includes(a)||i.docenteReemplazante.toLowerCase().includes(a)||i.curso.toLowerCase().includes(a)||i.diaAusencia.includes(a)||i.asignaturaAusente.toLowerCase().includes(a)||i.asignaturaReemplazante.toLowerCase().includes(a))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},Qee=Array.from({length:12},(t,e)=>e+1),r6={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},Hee=t=>{const[e,r]=q.useState([]),[n,s]=q.useState(!0),[a,i]=q.useState(null);q.useEffect(()=>t?Mee(t,h=>{r(h),s(!1)}):void 0,[t]);const o=q.useCallback(async d=>{try{return i(null),await Lee(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=q.useCallback(async d=>{try{i(null),await Uee(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]),c=q.useCallback(async d=>{try{return i(null),d.trim()?await jee(t,d):e}catch(h){return i(h instanceof Error?h.message:"Error en la búsqueda"),[]}},[t,e]);return{reemplazos:e,loading:n,error:a,save:o,remove:l,search:c}},Vee=()=>{const[t,e]=q.useState([]),[r,n]=q.useState(!0);q.useEffect(()=>Pee(i=>{e(i),n(!1)}),[]);const s=q.useMemo(()=>t.map(a=>a.nombreCompleto).sort(),[t]);return{profesores:t,profesorNames:s,loading:r}},zee=({selectedBlocks:t,onChange:e,legend:r,disabled:n=!1})=>u.jsxs("fieldset",{children:[u.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:Qee.map(s=>u.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${n?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[u.jsx("input",{type:"checkbox",value:s,checked:t.includes(s),onChange:e,disabled:n,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),u.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:s})]},s))})]}),Gee=({userId:t})=>{const[e,r]=q.useState(null),[n,s]=q.useState(!1),a=q.useCallback(async()=>{try{s(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),c=await Oee(t);r(c)}catch(i){console.error("Error al cargar estadísticas:",i)}finally{s(!1)}},[t]);return q.useEffect(()=>{t&&a()},[t,a]),n?u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:u.jsx("div",{className:"animate-pulse flex justify-center",children:u.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):e?u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadísticas del Mes"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.totalReemplazos}),u.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.horasRealizadas}),u.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.horasCubiertas}),u.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.porcentajeRealizadas.toFixed(1),"%"]}),u.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},qee=({currentUser:t})=>{const e=t.email||t.id||"",{reemplazos:r,save:n,remove:s,search:a,loading:i,error:o}=Hee(e),{profesorNames:l,loading:c}=Vee(),[d,h]=q.useState(r6),[p,m]=q.useState(""),[y,x]=q.useState([]),[E,S]=q.useState(null),[B,D]=q.useState(!1),[I,U]=q.useState(!1);q.useEffect(()=>{(async()=>{if(!p.trim()){x(r);return}U(!0);try{const L=await a(p);x(L)}catch(L){console.error("Error en búsqueda:",L),x(r)}finally{U(!1)}})()},[r,p,a]);const F=q.useCallback(R=>{const{name:L,value:Q}=R.target;h(H=>({...H,[L]:Q}))},[]),C=q.useCallback(R=>{const L=parseInt(R.target.value,10);h(Q=>{const H=Q.bloquesAfectados,te=H.includes(L)?H.filter(Y=>Y!==L):[...H,L].sort((Y,re)=>Y-re);return{...Q,bloquesAfectados:te}})},[]),_=q.useCallback(async R=>{R.preventDefault(),S(null),D(!0);const{docenteAusente:L,asignaturaAusente:Q,curso:H,diaAusencia:te,bloquesAfectados:Y,docenteReemplazante:re,asignaturaReemplazante:V}=d;if(!L||!Q||!H||!te||!re||!V||Y.length===0){S("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),D(!1);return}if(L===re){S("El docente ausente y el reemplazante no pueden ser la misma persona."),D(!1);return}const J=new Date(te),K=new Date;if(K.setHours(0,0,0,0),J<K&&!window.confirm("La fecha seleccionada es anterior a hoy. ¿Desea continuar?")){D(!1);return}try{const ae=Q.trim().toLowerCase()===V.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",O={...d,resultado:ae};await n(O),h(r6);const W=ae==="Hora realizada"?"✅ Reemplazo registrado - Hora realizada":"⚠️ Reemplazo registrado - Hora cubierta, no realizada",Z=document.createElement("div");Z.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",Z.textContent=W,document.body.appendChild(Z),setTimeout(()=>{document.body.contains(Z)&&document.body.removeChild(Z)},3e3)}catch(ae){console.error("Error al guardar reemplazo:",ae),S("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{D(!1)}},[d,n]),N=q.useCallback(async R=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await s(R)}catch(L){console.error("Error al eliminar reemplazo:",L),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[s]),j="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!t||!t.email&&!t.id?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),u.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx(Gee,{userId:e}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),c?u.jsxs("div",{className:"flex justify-center items-center py-8",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):u.jsxs("form",{onSubmit:_,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),u.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:F,className:j,disabled:B,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(R=>u.jsx("option",{value:R,children:R},R))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:F,className:j,disabled:B,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione una asignatura"}),yl.map(R=>u.jsx("option",{value:R,children:R},R))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:d.curso,onChange:F,className:j,disabled:B,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un curso"}),ha.map(R=>u.jsx("option",{value:R,children:R},R))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),u.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:F,className:j,disabled:B,required:!0})]}),u.jsx(zee,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:C,disabled:B})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),u.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:F,className:j,disabled:B,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(R=>u.jsx("option",{value:R,children:R},R))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:F,className:j,disabled:B,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione una asignatura"}),yl.map(R=>u.jsx("option",{value:R,children:R},R))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&u.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[u.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),u.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"✅ Hora realizada":"⚠️ Hora cubierta, no realizada"}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(E||o)&&u.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:u.jsx("p",{className:"text-red-600 dark:text-red-400",children:E||o})}),u.jsx("div",{className:"pt-4 text-right",children:u.jsxs("button",{type:"submit",disabled:B||c,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[B&&u.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),B?"Registrando...":"Registrar Reemplazo"]})})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:p,onChange:R=>m(R.target.value),className:`${j} md:w-1/2 pl-10`,disabled:I}),u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:I?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):u.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),p&&u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:I?"Buscando...":`${y.length} resultado(s) encontrado(s)`})]}),i?u.jsxs("div",{className:"flex justify-center items-center py-8",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),u.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:y.length>0?y.map(R=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(R.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:R.curso}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[R.docenteAusente,u.jsx("br",{}),u.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.asignaturaAusente})]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[R.docenteReemplazante,u.jsx("br",{}),u.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.asignaturaReemplazante})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:R.bloquesAfectados.join(", ")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:u.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${R.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:R.resultado})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:u.jsx("button",{onClick:()=>N(R.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:B,children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},R.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:p?"No se encontraron registros que coincidan con la búsqueda.":"No hay registros de reemplazos."})})})]})}),y.length>0&&!p&&u.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los últimos ",y.length," registros"]})]})]})},Kee=t=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const e=Ft(Yr,"reemplazos"),r=er(e,an("fecha","desc"));return gr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar reemplazos:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a reemplazos:",e),e}},$ee=t=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const e=Ft(Yr,"acompanamientos"),r=er(e,an("fecha","desc"));return gr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar acompañamientos:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a acompañamientos:",e),e}},Wee=t=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const e=Ft(Yr,"calendar_events"),r=er(e,an("date","asc"));return gr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar eventos del calendario:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",e),e}},Bu=({title:t,value:e,description:r,isLoading:n=!1})=>u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),n?u.jsxs("div",{className:"flex items-center mt-2",children:[u.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),bh=({title:t,data:e,colorClass:r,valueFormatter:n=a=>String(a),isLoading:s=!1})=>{const a=q.useMemo(()=>e.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[e]),i=q.useMemo(()=>Math.max(...a,1),[a]);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),s?u.jsxs("div",{className:"flex justify-center items-center py-8",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):u.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const c=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),u.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:u.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${c/i*100}%`}})})]},o.label+l)}):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},Yee=()=>{const[t,e]=q.useState([]),[r,n]=q.useState([]),[s,a]=q.useState([]),[i,o]=q.useState(!0),[l,c]=q.useState(null);return q.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const h=3,p=()=>{d++,d>=h&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const m=Kee(E=>{e(E),p()}),y=$ee(E=>{n(E),p()}),x=Wee(E=>{a(E),p()});return()=>{m(),y(),x()}}catch(m){console.error("❌ Error al configurar suscripciones del dashboard:",m),c(m instanceof Error?m.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:t,acompanamientos:r,calendarEvents:s,loading:i,error:l}},Xee=({currentUser:t})=>{var h,p;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",t),console.log("🔍 Dashboard - currentUser.profile:",t==null?void 0:t.profile),console.log("🔍 Dashboard - Verificación de perfil:",(t==null?void 0:t.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(t==null?void 0:t.profile)),console.log("🔍 Dashboard - Profile length:",(h=t==null?void 0:t.profile)==null?void 0:h.length),console.log("🔍 Dashboard - Profile con comillas:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((p=t==null?void 0:t.profile)==null?void 0:p.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:e,acompanamientos:r,calendarEvents:n,loading:s,error:a}=Yee(),[i,o]=q.useState(gx);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:e.length,acompanamientos:r.length,calendarEvents:n.length,loading:s,error:a,currentUser:t==null?void 0:t.profile}),q.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(m?JSON.parse(m):gx)}catch(m){console.error("Error al leer rúbrica personalizada",m),o(gx)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!t),console.log("🔍 Dashboard - profile value:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(t==null?void 0:t.profile)==="SUBDIRECCION"),!t)return console.log("❌ Dashboard - currentUser es null/undefined"),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(t.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",t.profile),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[u.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),u.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[u.jsx("p",{children:u.jsx("strong",{children:"Debug Info:"})}),u.jsxs("p",{children:['Su perfil actual: "',t.profile,'"']}),u.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),u.jsxs("p",{children:["Usuario: ",t.email||t.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),a)return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[u.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),u.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:a}),u.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const l=q.useMemo(()=>{const m=e.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const y=e.filter(U=>U.resultado==="Hora realizada").length,x=m-y,E=`${(y/m*100).toFixed(1)}%`,S=(U,F)=>U.reduce((C,_)=>{const N=_[F];return typeof N=="string"&&(C[N]=(C[N]||0)+1),C},{}),B=S(e,"docenteAusente"),D=S(e,"docenteReemplazante"),I=S(e,"curso");return{totalInasistencias:m,horasRealizadas:y,horasCubiertas:x,tasaCobertura:E,inasistenciasPorDocente:Object.entries(B).map(([U,F])=>({label:U,value:F})),reemplazosPorDocente:Object.entries(D).map(([U,F])=>({label:U,value:F})),inasistenciasPorCurso:Object.entries(I).map(([U,F])=>({label:U,value:F})),distribucionResultados:[{label:"Hora Realizada",value:y},{label:"Hora Cubierta",value:x}]}},[e]),c=q.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const y=new Map;i.forEach(F=>{F.criteria.forEach(C=>{y.set(C.name,F.domain)})});let x=0,E=0;const S={},B={};r.forEach(F=>{S[F.docente]||(S[F.docente]={total:0,count:0}),Object.entries(F.rubricaResultados).forEach(([C,_])=>{x+=_,E++,S[F.docente].total+=_,S[F.docente].count++;const N=y.get(C);N&&(B[N]||(B[N]={total:0,count:0}),B[N].total+=_,B[N].count++)})});const D=E>0?(x/E).toFixed(2):"N/A",I=Object.entries(S).map(([F,C])=>({label:F,value:C.count>0?(C.total/C.count).toFixed(2):0})),U=Object.entries(B).map(([F,C])=>({label:F,value:C.count>0?(C.total/C.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:D,desempenoPorDocente:I,desempenoPorDominio:U}},[r,i]),d=q.useMemo(()=>{const m={[An.EVALUACION]:0,[An.ACTO]:0,[An.ACTIVIDAD_FOCALIZADA]:0,[An.SALIDA_PEDAGOGICA]:0};for(const x of n)m.hasOwnProperty(x.type)&&m[x.type]++;const y=Object.entries(m).map(([x,E])=>({label:uf[x].label,value:E}));return{totalEvaluaciones:m[An.EVALUACION],totalActos:m[An.ACTO],totalActividadesFocalizadas:m[An.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[An.SALIDA_PEDAGOGICA],distribucionEventos:y}},[n]);return s?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&c.totalAcompanamientos===0&&n.length===0?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[u.jsx("span",{className:"text-6xl mb-4",children:"📊"}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),u.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[u.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),u.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),u.jsx("p",{children:"• Calendario Académico"})]})]}):u.jsxs("div",{className:"space-y-12 animate-fade-in",children:[u.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),u.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),u.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),e.length>0&&u.jsxs("div",{className:"space-y-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(Bu,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:s}),u.jsx(Bu,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:s}),u.jsx(Bu,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:s}),u.jsx(Bu,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:s})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx(bh,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:s}),u.jsx(bh,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:s}),u.jsx(bh,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:s}),u.jsx(bh,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:s})]})]}),r.length>0&&u.jsxs("div",{className:"space-y-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(Bu,{title:"Total Acompañamientos",value:c.totalAcompanamientos,description:"Registros realizados",isLoading:s}),u.jsx(Bu,{title:"Promedio General",value:c.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:s})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx(bh,{title:"Desempeño Promedio por Docente",data:c.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:s}),u.jsx(bh,{title:"Desempeño Promedio por Dominio",data:c.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:s})]})]}),n.length>0&&u.jsxs("div",{className:"space-y-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(Bu,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:s}),u.jsx(Bu,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:s}),u.jsx(Bu,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:s}),u.jsx(Bu,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:s})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx(bh,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:s}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),s?u.jsxs("div",{className:"flex justify-center items-center py-8",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):u.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,y)=>{var x,E;return u.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin título"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&u.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",m.ubicacion]})]}),u.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=uf[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((E=uf[m.type])==null?void 0:E.label)||m.type})]})},m.id||y)}),n.filter(m=>new Date(m.date)>=new Date).length===0&&u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),u.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:e.length+r.length+n.length}),u.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...e.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),u.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(e.filter(m=>m.resultado==="Hora realizada").length/Math.max(e.length,1)*100),"%"]}),u.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),u.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[u.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),u.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var n6;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(n6||(n6={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s6;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(s6||(s6={}));var a6;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(a6||(a6={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=["user","model","function","system"];var o6;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(o6||(o6={}));var l6;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(l6||(l6={}));var c6;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(c6||(c6={}));var u6;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(u6||(u6={}));var xx;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(xx||(xx={}));var A6;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(A6||(A6={}));var d6;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(d6||(d6={}));var f6;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(f6||(f6={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Z0 extends Zi{constructor(e,r){super(e),this.response=r}}class uj extends Zi{constructor(e,r,n,s){super(e),this.status=r,this.statusText=n,this.errorDetails=s}}class Sf extends Zi{}class Aj extends Zi{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jee="https://generativelanguage.googleapis.com",Zee="v1beta",ete="0.24.1",tte="genai-js";var t0;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(t0||(t0={}));class rte{constructor(e,r,n,s,a){this.model=e,this.task=r,this.apiKey=n,this.stream=s,this.requestOptions=a}toString(){var e,r;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||Zee;let a=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||Jee}/${n}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function nte(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${tte}/${ete}`),e.join(" ")}async function ste(t){var e;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",nte(t.requestOptions)),r.append("x-goog-api-key",t.apiKey);let n=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(s){throw new Sf(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${s.message}`)}for(const[s,a]of n.entries()){if(s==="x-goog-api-key")throw new Sf(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new Sf(`Header name ${s} can only be set using the apiClient field`);r.append(s,a)}}return r}async function ate(t,e,r,n,s,a){const i=new rte(t,e,r,n,a);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},cte(a)),{method:"POST",headers:await ste(i),body:s})}}async function V1(t,e,r,n,s,a={},i=fetch){const{url:o,fetchOptions:l}=await ate(t,e,r,n,s,a);return ite(o,l,i)}async function ite(t,e,r=fetch){let n;try{n=await r(t,e)}catch(s){ote(s,t)}return n.ok||await lte(n,t),n}function ote(t,e){let r=t;throw r.name==="AbortError"?(r=new Aj(`Request aborted when fetching ${e.toString()}: ${t.message}`),r.stack=t.stack):t instanceof uj||t instanceof Sf||(r=new Zi(`Error fetching from ${e.toString()}: ${t.message}`),r.stack=t.stack),r}async function lte(t,e){let r="",n;try{const s=await t.json();r=s.error.message,s.error.details&&(r+=` ${JSON.stringify(s.error.details)}`,n=s.error.details)}catch{}throw new uj(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${r}`,t.status,t.statusText,n)}function cte(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const r=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>r.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{r.abort()}),e.signal=r.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),N2(t.candidates[0]))throw new Z0(`${tf(t)}`,t);return ute(t)}else if(t.promptFeedback)throw new Z0(`Text not available. ${tf(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),N2(t.candidates[0]))throw new Z0(`${tf(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),h6(t)[0]}else if(t.promptFeedback)throw new Z0(`Function call not available. ${tf(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),N2(t.candidates[0]))throw new Z0(`${tf(t)}`,t);return h6(t)}else if(t.promptFeedback)throw new Z0(`Function call not available. ${tf(t)}`,t)},t}function ute(t){var e,r,n,s;const a=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const i of(s=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)i.text&&a.push(i.text),i.executableCode&&a.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&a.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function h6(t){var e,r,n,s;const a=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const i of(s=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)i.functionCall&&a.push(i.functionCall);if(a.length>0)return a}const Ate=[xx.RECITATION,xx.SAFETY,xx.LANGUAGE];function N2(t){return!!t.finishReason&&Ate.includes(t.finishReason)}function tf(t){var e,r,n;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((r=t.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((n=t.candidates)===null||n===void 0)&&n[0]){const a=t.candidates[0];N2(a)&&(s+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(s+=`: ${a.finishMessage}`))}return s}function Kx(t){return this instanceof Kx?(this.v=t,this):new Kx(t)}function dte(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,a=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(p){n[p]&&(s[p]=function(m){return new Promise(function(y,x){a.push([p,m,y,x])>1||o(p,m)})})}function o(p,m){try{l(n[p](m))}catch(y){h(a[0][3],y)}}function l(p){p.value instanceof Kx?Promise.resolve(p.value.v).then(c,d):h(a[0][2],p)}function c(p){o("next",p)}function d(p){o("throw",p)}function h(p,m){p(m),a.shift(),a.length&&o(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function fte(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=mte(e),[n,s]=r.tee();return{stream:pte(n),response:hte(s)}}async function hte(t){const e=[],r=t.getReader();for(;;){const{done:n,value:s}=await r.read();if(n)return v4(gte(e));e.push(s)}}function pte(t){return dte(this,arguments,function*(){const r=t.getReader();for(;;){const{value:n,done:s}=yield Kx(r.read());if(s)break;yield yield Kx(v4(n))}})}function mte(t){const e=t.getReader();return new ReadableStream({start(n){let s="";return a();function a(){return e.read().then(({value:i,done:o})=>{if(o){if(s.trim()){n.error(new Zi("Failed to parse stream"));return}n.close();return}s+=i;let l=s.match(p6),c;for(;l;){try{c=JSON.parse(l[1])}catch{n.error(new Zi(`Error parsing JSON response: "${l[1]}"`));return}n.enqueue(c),s=s.substring(l[0].length),l=s.match(p6)}return a()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new Aj("Request aborted when reading from the stream"):o=new Zi("Error reading from the stream"),o})}}})}function gte(t){const e=t[t.length-1],r={promptFeedback:e==null?void 0:e.promptFeedback};for(const n of t){if(n.candidates){let s=0;for(const a of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[s]||(r.candidates[s]={index:s}),r.candidates[s].citationMetadata=a.citationMetadata,r.candidates[s].groundingMetadata=a.groundingMetadata,r.candidates[s].finishReason=a.finishReason,r.candidates[s].finishMessage=a.finishMessage,r.candidates[s].safetyRatings=a.safetyRatings,a.content&&a.content.parts){r.candidates[s].content||(r.candidates[s].content={role:a.content.role||"user",parts:[]});const i={};for(const o of a.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[s].content.parts.push(i)}s++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e,r,n){const s=await V1(e,t0.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(r),n);return fte(s)}async function fj(t,e,r,n){const a=await(await V1(e,t0.GENERATE_CONTENT,t,!1,JSON.stringify(r),n)).json();return{response:v4(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function $x(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const r of t)typeof r=="string"?e.push({text:r}):e.push(r);return xte(e)}function xte(t){const e={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,s=!1;for(const a of t)"functionResponse"in a?(r.parts.push(a),s=!0):(e.parts.push(a),n=!0);if(n&&s)throw new Zi("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new Zi("No content is provided for sending chat message.");return n?e:r}function vte(t,e){var r;let n={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(r=e==null?void 0:e.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new Sf("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=t.contents}else if(s)n=Object.assign(Object.assign({},n),t.generateContentRequest);else{const a=$x(t);n.contents=[a]}return{generateContentRequest:n}}function m6(t){let e;return t.contents?e=t:e={contents:[$x(t)]},t.systemInstruction&&(e.systemInstruction=hj(t.systemInstruction)),e}function yte(t){return typeof t=="string"||Array.isArray(t)?{content:$x(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],wte={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function bte(t){let e=!1;for(const r of t){const{role:n,parts:s}=r;if(!e&&n!=="user")throw new Zi(`First content should be with role 'user', got ${n}`);if(!i6.includes(n))throw new Zi(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(i6)}`);if(!Array.isArray(s))throw new Zi("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Zi("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of s)for(const l of g6)l in o&&(a[l]+=1);const i=wte[n];for(const o of g6)if(!i.includes(o)&&a[o]>0)throw new Zi(`Content with role '${n}' can't contain '${o}' part`);e=!0}}function x6(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6="SILENT_ERROR";class Cte{constructor(e,r,n,s={}){this.model=r,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n!=null&&n.history&&(bte(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,r={}){var n,s,a,i,o,l;await this._sendPromise;const c=$x(e),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r);let p;return this._sendPromise=this._sendPromise.then(()=>fj(this._apiKey,this.model,d,h)).then(m=>{var y;if(x6(m.response)){this._history.push(c);const x=Object.assign({parts:[],role:"model"},(y=m.response.candidates)===null||y===void 0?void 0:y[0].content);this._history.push(x)}else{const x=tf(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}p=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,p}async sendMessageStream(e,r={}){var n,s,a,i,o,l;await this._sendPromise;const c=$x(e),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r),p=dj(this._apiKey,this.model,d,h);return this._sendPromise=this._sendPromise.then(()=>p).catch(m=>{throw new Error(v6)}).then(m=>m.response).then(m=>{if(x6(m)){this._history.push(c);const y=Object.assign({},m.candidates[0].content);y.role||(y.role="model"),this._history.push(y)}else{const y=tf(m);y&&console.warn(`sendMessageStream() was unsuccessful. ${y}. Inspect response object for details.`)}}).catch(m=>{m.message!==v6&&console.error(m)}),p}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ete(t,e,r,n){return(await V1(e,t0.COUNT_TOKENS,t,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _te(t,e,r,n){return(await V1(e,t0.EMBED_CONTENT,t,!1,JSON.stringify(r),n)).json()}async function Ste(t,e,r,n){const s=r.requests.map(i=>Object.assign(Object.assign({},i),{model:e}));return(await V1(e,t0.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,r,n={}){this.apiKey=e,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=hj(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(e,r={}){var n;const s=m6(e),a=Object.assign(Object.assign({},this._requestOptions),r);return fj(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),a)}async generateContentStream(e,r={}){var n;const s=m6(e),a=Object.assign(Object.assign({},this._requestOptions),r);return dj(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),a)}startChat(e){var r;return new Cte(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},e),this._requestOptions)}async countTokens(e,r={}){const n=vte(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),r);return Ete(this.apiKey,this.model,n,s)}async embedContent(e,r={}){const n=yte(e),s=Object.assign(Object.assign({},this._requestOptions),r);return _te(this.apiKey,this.model,n,s)}async batchEmbedContents(e,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return Ste(this.apiKey,this.model,e,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.apiKey=e}getGenerativeModel(e,r){if(!e.model)throw new Zi("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new y6(this.apiKey,e,r)}getGenerativeModelFromCachedContent(e,r,n){if(!e.name)throw new Sf("Cached content must contain a `name` field.");if(!e.model)throw new Sf("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const i of s)if(r!=null&&r[i]&&e[i]&&(r==null?void 0:r[i])!==e[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===l)continue}throw new Sf(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${e[i]})`)}const a=Object.assign(Object.assign({},r),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new y6(this.apiKey,a,n)}}const y4="horario_asignaciones",pj="horarios_generados",Tte="usuarios",mj=t=>{const e=t.data();return{id:t.id,...e}},Nte=t=>{const e=er(Ft(Tt,y4));return gr(e,n=>{const s=n.docs.map(a=>mj(a));t(s)},n=>{console.error("Error al suscribirse a las asignaciones:",n),t([])})},Bte=async t=>{try{return(await ws(Ft(Tt,y4),t)).id}catch(e){throw console.error("Error al agregar asignación:",e),new Error("No se pudo agregar la asignación.")}},kte=async t=>{try{const e=mr(Tt,y4,t);await li(e)}catch(e){throw console.error("Error al eliminar asignación:",e),new Error("No se pudo eliminar la asignación.")}},w6=async t=>{try{const e=mr(Tt,pj,"global");await Ti(e,{data:t})}catch(e){throw console.error("Error al guardar los horarios:",e),new Error("No se pudieron guardar los horarios generados.")}},Ite=t=>{const e=mr(Tt,pj,"global");return gr(e,n=>{n.exists()?t(n.data().data||{}):t({})},n=>{console.error("Error al suscribirse a los horarios:",n),t({})})},Fte=t=>{const e=er(Ft(Tt,Tte),Mn("profile","==",jt.PROFESORADO));return gr(e,n=>{const s=n.docs.map(a=>mj(a));t(s)},n=>{console.error("Error al suscribirse a los profesores:",n),t([])})},Dte=({horarios:t})=>Object.keys(t).length===0?u.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):u.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full border-collapse",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),u.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),ha.map(e=>u.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),u.jsx("tbody",{children:T2.map(e=>u.jsxs(dt.Fragment,{children:[u.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:u.jsx("th",{colSpan:2+ha.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),B5.map(({bloque:r,inicio:n,fin:s})=>u.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[u.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),u.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${s}`}),ha.map(a=>{var o,l;const i=(l=(o=t[a])==null?void 0:o[e])==null?void 0:l[r];return u.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?u.jsxs("div",{className:"flex flex-col justify-center h-full",children:[u.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),u.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):u.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${a}-${e}-${r}`)})]},`${e}-${r}`))]},e))})]})}),Rte=()=>{const[t,e]=q.useState([]),[r,n]=q.useState({curso:"",asignatura:"",profesor:""}),[s,a]=q.useState([]),[i,o]=q.useState({}),[l,c]=q.useState(ha[0]),[d,h]=q.useState(!1),[p,m]=q.useState(!0),[y,x]=q.useState(null),[E,S]=q.useState(null),[B,D]=q.useState(null),[I,U]=q.useState({asignatura:"",profesor:""}),[F,C]=q.useState("edicion"),[_,N]=q.useState("");q.useEffect(()=>{m(!0);const V=Nte(e),J=Ite(o),K=Fte(ae=>{const O=ae.map(W=>W.nombreCompleto).sort();a(O),m(!1)});return()=>{V(),J(),K()}},[]);const j=async V=>{if(V.preventDefault(),x(null),!r.curso||!r.asignatura||!r.profesor){x("Todos los campos de la asignación son obligatorios.");return}try{await Bte({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(J){x(J instanceof Error?J.message:"Error al guardar la asignación.")}},R=async V=>{try{await kte(V)}catch(J){x(J instanceof Error?J.message:"Error al eliminar la asignación.")}},L=async()=>{if(t.length===0){x("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}h(!0),x(null),S(null);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",J=new Ra(V),K=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${T2.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(B5,null,2)}
                - Cursos del liceo: ${ha.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(Cee,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${_||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,ne=(await(await J.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(K)).response).text().replace(/^```json\s*|```\s*$/g,""),le=JSON.parse(ne);await w6(le),S("¡Horario generado y guardado con éxito!")}catch(V){console.error("Error al generar horario con IA:",V),x("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{h(!1)}},Q=(V,J,K)=>{D({dia:V,bloque:J}),U({asignatura:(K==null?void 0:K.asignatura)||"",profesor:(K==null?void 0:K.profesor)||""})},H=async()=>{if(!B)return;const{dia:V,bloque:J}=B,K=JSON.parse(JSON.stringify(i));K[l]||(K[l]={}),K[l][V]||(K[l][V]={}),K[l][V][J]={asignatura:I.asignatura||null,profesor:I.profesor||null};try{await w6(K),D(null)}catch(ae){x(ae instanceof Error?ae.message:"Error al guardar la edición.")}},te="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Y=()=>{const V=i[l]||{};return u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[u.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),T2.map(J=>u.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:J},J))]})}),u.jsx("tbody",{children:B5.map(({bloque:J,inicio:K,fin:ae})=>u.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[u.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:J}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${K} - ${ae}`})]}),T2.map(O=>{var ne;const W=(B==null?void 0:B.dia)===O&&(B==null?void 0:B.bloque)===J,Z=(ne=V[O])==null?void 0:ne[J];return u.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!W&&Q(O,J,Z),children:W?u.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[u.jsx("input",{type:"text",placeholder:"Asignatura",value:I.asignatura,onChange:le=>U(ve=>({...ve,asignatura:le.target.value})),className:te+" text-xs mb-1"}),u.jsx("input",{type:"text",placeholder:"Profesor",value:I.profesor,onChange:le=>U(ve=>({...ve,profesor:le.target.value})),className:te+" text-xs"}),u.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[u.jsx("button",{onClick:()=>D(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),u.jsx("button",{onClick:H,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):Z!=null&&Z.asignatura?u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:Z.asignatura}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",Z.profesor,")"]})]}):u.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${O}-${J}`)})]},J))})]})})},re=()=>u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),u.jsxs("form",{onSubmit:j,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:r.curso,onChange:V=>n(J=>({...J,curso:V.target.value})),className:te,children:[u.jsx("option",{value:"",children:"Seleccione"}),ha.map(V=>u.jsx("option",{value:V,children:V},V))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:V=>n(J=>({...J,asignatura:V.target.value})),className:te,children:[u.jsx("option",{value:"",children:"Seleccione"}),yl.map(V=>u.jsx("option",{value:V,children:V},V))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),u.jsxs("select",{name:"profesor",value:r.profesor,onChange:V=>n(J=>({...J,profesor:V.target.value})),className:te,children:[u.jsx("option",{value:"",children:"Seleccione"}),s.map(V=>u.jsx("option",{value:V,children:V},V))]})]}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),u.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:u.jsx("ul",{className:"space-y-2",children:t.map(V=>u.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[u.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[V.curso," - ",V.asignatura," - ",u.jsx("strong",{children:V.profesor})]}),u.jsx("button",{onClick:()=>R(V.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},V.id))})})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),u.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:_,onChange:V=>N(V.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:te})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{onClick:L,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),y&&u.jsx("p",{className:"text-red-600",children:y}),E&&u.jsx("p",{className:"text-green-600",children:E})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),u.jsx("select",{id:"selectCurso",value:l,onChange:V=>c(V.target.value),className:te+" md:w-1/3",children:ha.map(V=>u.jsx("option",{value:V,children:V},V))})]}),Object.keys(i).length>0?Y():u.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return p?u.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx("button",{onClick:()=>C("edicion"),className:`${F==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),u.jsx("button",{onClick:()=>C("global"),className:`${F==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),F==="edicion"?re():u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),u.jsx(Dte,{horarios:i})]})]})},Zb="acciones",Lte=async()=>{try{const t=er(Ft(Yr,Zb),an("fechaRegistro","desc"));return(await Da(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedagógicas")}},Ute=async t=>{try{return{id:(await ws(Ft(Yr,Zb),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acción:",e),new Error("No se pudo crear la acción pedagógica")}},b6=async(t,e)=>{try{const r=mr(Yr,Zb,t);await O1(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",t),new Error("No se pudo actualizar la acción pedagógica")}},Mte=async t=>{try{const e=mr(Yr,Zb,t);await li(e)}catch(e){throw console.error("Error al eliminar acción:",e,"ID:",t),new Error("No se pudo eliminar la acción pedagógica")}},C6={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},Pte={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},Ote=()=>{const[t,e]=q.useState([]),[r,n]=q.useState(!1),[s,a]=q.useState(null),[i,o]=q.useState(C6),[l,c]=q.useState(null),[d,h]=q.useState(""),[p,m]=q.useState(""),[y,x]=q.useState(""),E=q.useCallback(async()=>{n(!0);try{const N=await Lte();e(N),a(null)}catch(N){console.error("Error al cargar acciones:",N),a("No se pudieron cargar las acciones pedagógicas.")}finally{n(!1)}},[]);q.useEffect(()=>{E()},[E]);const S=q.useCallback(N=>{const{name:j,value:R}=N.target;o(L=>({...L,[j]:R}))},[]),B=q.useCallback(()=>{o(C6),c(null),a(null)},[]),D=q.useCallback(async N=>{if(N.preventDefault(),!i.responsable||!i.area||!i.descripcion||!i.fechaCumplimiento){a("Los campos responsables, área, descripción y fecha de cumplimiento son obligatorios.");return}try{l?await b6(l,i):await Ute(i),await E(),B()}catch(j){console.error("Error al guardar acción:",j),a("Error al guardar la acción.")}},[i,l,E,B]),I=q.useCallback(N=>{window.scrollTo({top:0,behavior:"smooth"}),c(N.id),o({...N,enlaceDocumento:N.enlaceDocumento||""})},[]),U=q.useCallback(async N=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await Mte(N),await E()}catch(j){console.error("Error al eliminar acción:",j),a("No se pudo eliminar la acción.")}},[E]),F=q.useCallback(async N=>{try{const j=t.find(R=>R.id===N);if(j){const L=(Ay.indexOf(j.estado)+1)%Ay.length,Q=Ay[L];await b6(N,{estado:Q}),await E()}}catch(j){console.error("Error al cambiar estado:",j),a("No se pudo cambiar el estado de la acción.")}},[t,E]),C=q.useMemo(()=>t.filter(N=>{const j=d===""||N.responsable.toLowerCase().includes(d.toLowerCase())||N.descripcion.toLowerCase().includes(d.toLowerCase()),R=p===""||N.area===p,L=y===""||N.estado===y;return j&&R&&L}),[t,d,p,y]),_="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),s&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),u.jsxs("form",{onSubmit:D,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),u.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:S,className:_})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),u.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:S,placeholder:"Nombre del responsable",className:_})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),u.jsxs("select",{name:"area",value:i.area,onChange:S,className:_,children:[u.jsx("option",{value:"",children:"Seleccione un área"}),YF.map(N=>u.jsx("option",{value:N,children:N},N))]})]}),u.jsxs("div",{className:"lg:col-span-3",children:[u.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),u.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:S,rows:3,placeholder:"Detalle de la acción a realizar...",className:_})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),u.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:S,className:_})]}),u.jsxs("div",{className:"lg:col-span-2",children:[u.jsx("label",{htmlFor:"enlaceDocumento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace a Documento (Opcional)"}),u.jsx("input",{type:"url",name:"enlaceDocumento",value:i.enlaceDocumento||"",onChange:S,placeholder:"https://ejemplo.com/documento",className:_})]})]}),u.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&u.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Acción":"Registrar Acción"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[u.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:N=>h(N.target.value),className:_+" md:col-span-1"}),u.jsxs("select",{value:p,onChange:N=>m(N.target.value),className:_,children:[u.jsx("option",{value:"",children:"Filtrar por Área"}),YF.map(N=>u.jsx("option",{value:N,children:N},N))]}),u.jsxs("select",{value:y,onChange:N=>x(N.target.value),className:_,children:[u.jsx("option",{value:"",children:"Filtrar por Estado"}),Ay.map(N=>u.jsx("option",{value:N,children:N},N))]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r?u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):C.length>0?C.map(N=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:N.responsable}),u.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:N.area})]}),u.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:N.descripcion}),u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[u.jsxs("div",{children:["Reg: ",N.fechaRegistro]}),u.jsxs("div",{className:"font-semibold",children:["Comp: ",N.fechaCumplimiento]})]}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:u.jsx("button",{onClick:()=>F(N.id),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Pte[N.estado]}`,children:N.estado})}),u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[N.enlaceDocumento&&u.jsx("a",{href:N.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"text-indigo-600 hover:text-indigo-800 p-1 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 inline-block align-middle",children:"🔗"}),u.jsx("button",{onClick:()=>I(N),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),u.jsx("button",{onClick:()=>U(N.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},N.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"text-center py-10 text-slate-500",children:"No se encontraron acciones."})})})]})})]})]})},eC="planificaciones",gj="actividades_calendario",xj=t=>{var r,n,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((s=(n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:s.toISOString())||e.fechaCreacion}},jte=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:ur.fromDate(new Date),fechaActualizacion:ur.fromDate(new Date)};return(await ws(Ft(Tt,eC),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},Qte=async(t,e,r)=>{try{const n=mr(Tt,eC,t),s=await P1(n);if(!s.exists()||s.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await O1(n,{...e,fechaActualizacion:ur.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},Hte=async(t,e)=>{try{const r=mr(Tt,eC,t),n=await P1(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar esta planificación");await li(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},Vte=(t,e)=>{const r=er(Ft(Tt,eC),Mn("userId","==",t),an("fechaCreacion","desc"));return gr(r,n=>{const s=n.docs.map(xj);e(s)},n=>{console.error("Error en suscripción a planificaciones:",n)})},zte=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:ur.fromDate(new Date),fechaActualizacion:ur.fromDate(new Date)};return(await ws(Ft(Tt,gj),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},Gte=(t,e)=>{const r=er(Ft(Tt,gj),Mn("userId","==",t),an("fecha","desc"));return gr(r,n=>{const s=n.docs.map(xj);e(s)},n=>{console.error("Error en suscripción a actividades:",n)})},qte=t=>{const[e,r]=q.useState([]),[n,s]=q.useState(!0),[a,i]=q.useState(null);return q.useEffect(()=>t?(s(!0),Vte(t,h=>{r(h),s(!1)})):void 0,[t]),{planificaciones:e,loading:n,error:a,save:async d=>{try{return i(null),await jte(d,t)}catch(h){throw i(h.message||"Error al guardar planificación"),h}},update:async(d,h)=>{try{i(null),await Qte(d,h,t)}catch(p){throw i(p.message||"Error al actualizar planificación"),p}},remove:async d=>{try{i(null),await Hte(d,t)}catch(h){throw i(h.message||"Error al eliminar planificación"),h}}}},k5=t=>{const e=new Date().toISOString();console.log(`[${e}] API Call: ${t}`)},Kte=t=>{const[e,r]=q.useState([]),[n,s]=q.useState(!0),[a,i]=q.useState(null);q.useEffect(()=>t?Gte(t,c=>{r(c),s(!1)}):void 0,[t]);const o=q.useCallback(async l=>{try{return i(null),await zte(l,t)}catch(c){throw i(c instanceof Error?c.message:"Error al guardar actividad"),c}},[t]);return{actividades:e,loading:n,error:a,save:o}},$te=({lesson:t,onClose:e,onSave:r,isLoading:n=!1})=>{const[s,a]=q.useState(t),i=l=>{a({...s,[l.target.name]:l.target.value})},o=async()=>{try{await r(s),e()}catch(l){console.error("Error al guardar lección:",l)}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),u.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(s).map(([l,c])=>u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),u.jsx("textarea",{name:l,value:c,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},l))}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[u.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),u.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},Wte=({plan:t,onEditLesson:e,onUseLesson:r,isLoading:n=!1,onUpdatePlan:s})=>{const[a,i]=q.useState(t.progreso??0),[o,l]=q.useState(!1),c=async d=>{const h=parseInt(d.target.value,10);i(h),l(!0);try{t.id&&s&&(await s(t.id,{progreso:h}),console.log("✅ Progreso actualizado exitosamente"))}catch(p){console.error("❌ Error completo:",p),alert(`Error al guardar el avance: ${p.message}`),i(t.progreso??0)}finally{l(!1)}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]}),u.jsxs("div",{className:"mt-4",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"range",min:0,max:100,value:a,onChange:c,disabled:o||n}),u.jsxs("span",{className:"font-bold w-12",children:[a,"%"]}),o&&u.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),u.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((d,h)=>u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[u.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",h+1,": ",d.actividades]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx("button",{onClick:()=>e(h,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),u.jsx("button",{onClick:()=>r(d,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},h))})]})},Yte=({plan:t,onBack:e,onSave:r,onDelete:n,isLoading:s=!1})=>{const[a,i]=q.useState(t),[o,l]=q.useState(!1),c=h=>{const{name:p,value:m}=h.target,[y,x]=p.split(".");i(y==="momentosClase"?E=>({...E,momentosClase:{...E.momentosClase,[x]:m}}):E=>({...E,[p]:m}))},d=async()=>{l(!0);try{await r(a)}catch(h){console.error("Error al guardar plan de clase:",h)}finally{l(!1)}};return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),u.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:s||o,children:"← Volver"})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),u.jsx("textarea",{name:"momentosClase.inicio",value:a.momentosClase.inicio,onChange:c,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),u.jsx("textarea",{name:"momentosClase.desarrollo",value:a.momentosClase.desarrollo,onChange:c,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),u.jsx("textarea",{name:"momentosClase.cierre",value:a.momentosClase.cierre,onChange:c,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]})]}),u.jsx("div",{className:"text-right mt-6",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("button",{onClick:()=>n(t.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:s||o,children:"🗑️ Eliminar Plan"}),u.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:s||o,children:[o&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},Xte=({userId:t})=>{const{actividades:e,save:r}=Kte(t),[n,s]=q.useState("list"),[a,i]=q.useState(null),[o,l]=q.useState(!1),[c,d]=q.useState(!1),h={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[p,m]=q.useState(h);q.useEffect(()=>{n==="summary"&&a&&y()},[n,a,t]);const y=async()=>{if(a)try{d(!1)}catch(F){console.error("Error al verificar evento en calendario:",F)}},x=F=>{const{name:C,value:_}=F.target;m(N=>({...N,[C]:_}))},E=(F,C,_)=>{m(N=>({...N,tareas:N.tareas.map(j=>j.id===F?{...j,[C]:_}:j)}))},S=()=>{m(F=>({...F,tareas:[...F.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},B=F=>{m(C=>({...C,tareas:C.tareas.filter(_=>_.id!==F)}))},D=async F=>{F.preventDefault(),l(!0);const C=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${p.nombre}
    - Descripción: ${p.descripcion}
    - Tareas: ${p.tareas.map(_=>_.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{k5("Planificación - Actividad Calendario");const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Q=(await(await new Ra(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(C)).response).text(),H={...p,objetivo:Q.replace(/(\*\*|\*)/g,"")},te=await r(H),Y={...H,id:te};i(Y),s("summary")}catch(_){console.error("Error al generar objetivo con IA:",_),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const N={...p,objetivo:"No generado"},j=await r(N),R={...N,id:j};i(R),s("summary")}catch(N){console.error("Error al guardar actividad:",N),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},I=async F=>{if(F)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(C){console.error("Error adding to calendar:",C),alert("Hubo un error al agregar la actividad al calendario.")}},U="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:u.jsxs("form",{onSubmit:D,className:"space-y-8",children:[u.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{name:"nombre",value:p.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:U,required:!0,disabled:o}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx("input",{name:"fecha",type:"date",value:p.fecha,onChange:x,className:U,required:!0,disabled:o}),u.jsx("input",{name:"hora",type:"time",value:p.hora,onChange:x,className:U,required:!0,disabled:o})]}),u.jsx("textarea",{name:"descripcion",value:p.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:U,required:!0,disabled:o}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx("input",{name:"ubicacion",value:p.ubicacion,onChange:x,placeholder:"Ubicación",className:U,required:!0,disabled:o}),u.jsx("input",{name:"participantes",value:p.participantes,onChange:x,placeholder:"Participantes",className:U,required:!0,disabled:o})]}),u.jsx("textarea",{name:"recursosGenerales",value:p.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:U,disabled:o})]})]}),u.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),u.jsx("button",{type:"button",onClick:S,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),u.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:p.tareas.map((F,C)=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[u.jsx("button",{type:"button",onClick:()=>B(F.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),u.jsx("textarea",{value:F.descripcion,onChange:_=>E(F.id,"descripcion",_.target.value),placeholder:`Descripción de la Tarea ${C+1}`,rows:2,className:U,required:!0,disabled:o}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[u.jsx("input",{value:F.responsable,onChange:_=>E(F.id,"responsable",_.target.value),placeholder:"Responsable",className:U,required:!0,disabled:o}),u.jsx("input",{value:F.recursos,onChange:_=>E(F.id,"recursos",_.target.value),placeholder:"Recursos Necesarios",className:U,disabled:o})]})]},F.id))})]}),u.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[u.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),u.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),u.jsxs("div",{className:"flex justify-end gap-4",children:[u.jsx("button",{type:"button",onClick:()=>s("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),u.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?u.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&a?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[u.jsx("span",{className:"text-2xl",children:"✓"}),u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),u.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),u.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),u.jsxs("div",{className:"space-y-4 text-sm",children:[u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),u.jsx("span",{children:a.nombre})]}),u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),u.jsx("span",{children:new Date(`${a.fecha}T${a.hora}`).toLocaleString("es-CL")})]}),u.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),u.jsx("p",{children:a.descripcion})]}),u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),u.jsx("span",{children:a.ubicacion})]}),u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),u.jsx("span",{children:a.participantes})]}),u.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),u.jsx("p",{children:a.recursosGenerales})]}),u.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),u.jsx("p",{children:a.objetivo})]})]}),u.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[u.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),u.jsx("button",{onClick:()=>I(a),disabled:c,className:`font-bold px-4 py-2 rounded-lg transition-colors ${c?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:c?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),u.jsx("button",{onClick:()=>{s("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),u.jsx("button",{onClick:()=>{s("form"),m(h)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),u.jsx("div",{className:"space-y-3",children:e.length>0?e.map(F=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:F.nombre}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(F.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",F.ubicacion]})]},F.id)):u.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Jte=({currentUser:t})=>{const e=t.uid||t.email||t.id||"",{planificaciones:r,save:n,update:s,remove:a,loading:i}=qte(e),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,c]=q.useState(o),[d,h]=q.useState(null),[p,m]=q.useState(!1),[y,x]=q.useState(null),[E,S]=q.useState("unidad"),[B,D]=q.useState(null),[I,U]=q.useState(null),F=q.useMemo(()=>t.asignaturas||[],[t.asignaturas]),C=q.useMemo(()=>{const K=t.cursos||[],ae=new Set;return K.forEach(O=>{O.startsWith("1º")?ae.add("1º Medio"):O.startsWith("2º")?ae.add("2º Medio"):O.startsWith("3º")?ae.add("3º Medio"):O.startsWith("4º")&&ae.add("4º Medio")}),Array.from(ae)},[t.cursos]);q.useEffect(()=>{c(K=>({...K,asignatura:F[0]||"",nivel:C[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:t.uid,email:t.email,id:t.id,nombreCompleto:t.nombreCompleto},userId:e,planificacionesCount:r.length,planificacionesAutores:r.map(K=>({id:K.id,autor:K.autor,tipo:K.tipo,coincideConUserId:K.autor===e}))})},[F,C,t,e,r]);const _=K=>{const{name:ae,value:O}=K.target;c(W=>({...W,[ae]:ae==="cantidadClases"?parseInt(O,10):O}))},N=()=>{const{asignatura:K,nivel:ae,nombreUnidad:O,contenidos:W,cantidadClases:Z,observaciones:ne,ideasParaUnidad:le}=l;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${K}
    - Nivel: ${ae}
    - Nombre de la Unidad: "${O}"
    - Contenidos clave a trabajar (insumo principal): "${W}"
    - Cantidad de clases para la unidad: ${Z}
    - Ideas y perspectiva del docente para la unidad: "${le||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${ne||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Z} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},j=async K=>{if(K.preventDefault(),m(!0),x(null),!l.contenidos||!l.nombreUnidad){x("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),m(!1);return}try{k5("Planificación - Unidad");const ae="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new Ra(ae).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Z=N(),ne={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},pe=(await(await W.generateContent({contents:[{parts:[{text:Z}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ne}})).response).text(),he=JSON.parse(pe),de={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:he.objetivosAprendizaje,indicadoresEvaluacion:he.indicadoresEvaluacion,detallesLeccion:he.detallesLeccion};if(d)await s(d.id,de),h({...de,id:d.id});else{const ce=await n(de);h({...de,id:ce})}}catch(ae){console.error("Error al generar planificación con IA",ae),x("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{m(!1)}},R=async(K,ae)=>{m(!0),x(null);const O=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ae.asignatura}
    - Nivel: ${ae.nivel}
    - Objetivo de la clase: ${K.objetivosAprendizaje}
    - Contenidos: ${K.contenidosConceptuales}
    - Actividades sugeridas: ${K.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{k5("Planificación - Utilizar Clase");const W="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ne=new Ra(W).getGenerativeModel({model:"gemini-1.5-flash-latest"}),le={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},he=(await(await ne.generateContent({contents:[{parts:[{text:O}]}],generationConfig:{responseMimeType:"application/json",responseSchema:le}})).response).text(),de=JSON.parse(he),ce={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:ae.asignatura,nivel:ae.nivel,contenidos:K.contenidosConceptuales,observaciones:"",nombreClase:K.actividades,duracionClase:80,momentosClase:de,detalleLeccionOrigen:K};await n(ce),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),S("clase")}catch(W){console.error("Error al generar plan de clase con IA",W),x("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{m(!1)}},L=K=>{K.tipo==="Unidad"&&(c({asignatura:K.asignatura,nivel:K.nivel,nombreUnidad:K.nombreUnidad,contenidos:K.contenidos,cantidadClases:K.cantidadClases,observaciones:K.observaciones,ideasParaUnidad:K.ideasParaUnidad||""}),h(K),window.scrollTo({top:0,behavior:"smooth"}))},Q=async K=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await a(K),(d==null?void 0:d.id)===K&&(h(null),c(o))}catch(ae){console.error("Error al eliminar planificación:",ae),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},H=async K=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await a(K),(B==null?void 0:B.id)===K&&D(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(ae){console.error("Error al eliminar plan de clase:",ae),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},te=(K,ae)=>{d&&U({planId:d.id,lessonIndex:K,lessonData:ae})},Y=async K=>{if(I)try{const{planId:ae,lessonIndex:O}=I,W=r.find(le=>le.id===ae&&le.tipo==="Unidad");if(!W)return;const Z=[...W.detallesLeccion];Z[O]=K;const ne={...W,detallesLeccion:Z};await s(ae,ne),h(ne),U(null)}catch(ae){console.error("Error al actualizar lección:",ae),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},re="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=()=>u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):u.jsxs("form",{onSubmit:j,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsx("select",{name:"asignatura",value:l.asignatura,onChange:_,className:re,disabled:p,children:F.length>0?F.map(K=>u.jsx("option",{value:K,children:K},K)):u.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),u.jsx("select",{name:"nivel",value:l.nivel,onChange:_,className:re,disabled:p,children:C.length>0?C.map(K=>u.jsx("option",{value:K,children:K},K)):u.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:_,className:re,placeholder:"Ej: La Célula y sus procesos",disabled:p})]}),u.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[u.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:_,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:re,disabled:p})]}),u.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[u.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),u.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:_,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:re,disabled:p})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),u.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:_,className:re,min:"1",max:"20",disabled:p})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),u.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:_,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:re,disabled:p})]})]}),u.jsx("div",{className:"pt-4 text-right",children:u.jsx("button",{type:"submit",disabled:p||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:p?u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),y&&u.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:y})]})]}),d&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),u.jsx(Wte,{plan:d,onEditLesson:te,onUseLesson:R,onUpdatePlan:s,isLoading:p})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):u.jsx("div",{className:"space-y-4",children:r.filter(K=>K.tipo==="Unidad").length>0?r.filter(K=>K.tipo==="Unidad").map(K=>u.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===K.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:K.nombreUnidad}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(K.fechaCreacion).toLocaleString("es-CL")]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",K.contenidos]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>L(K),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:p,children:"Ver y Editar"}),u.jsx("button",{onClick:()=>Q(K.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:p,children:"🗑️"})]})]})},K.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),J=()=>{const K=r.filter(ae=>ae.tipo==="Clase").sort((ae,O)=>new Date(O.fechaCreacion).getTime()-new Date(ae.fechaCreacion).getTime());return B?u.jsx(Yte,{plan:B,onBack:()=>D(null),onDelete:H,onSave:async ae=>{try{await s(ae.id,ae),D(ae)}catch(O){console.error("Error al actualizar plan de clase:",O),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:p}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):u.jsx("div",{className:"space-y-4",children:K.length>0?K.map(ae=>u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.nombreClase}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ae.fechaCreacion).toLocaleString("es-CL")]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ae.contenidos]})]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("button",{onClick:()=>D(ae),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ae.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!t||!t.email&&!t.id?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),u.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx("button",{onClick:()=>S("unidad"),className:`${E==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),u.jsx("button",{onClick:()=>S("clase"),className:`${E==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),u.jsx("button",{onClick:()=>S("calendario"),className:`${E==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),E==="unidad"&&V(),E==="clase"&&J(),E==="calendario"&&u.jsx(Xte,{userId:e}),I&&u.jsx($te,{lesson:I.lessonData,onClose:()=>U(null),onSave:Y,isLoading:p})]})},tC="events",Zte=async()=>{try{const t=er(Ft(Yr,tC),an("date","asc"));return(await Da(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},ere=async t=>{try{return{id:(await ws(Ft(Yr,tC),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},tre=async(t,e)=>{try{const r=mr(Yr,tC,t);await O1(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},rre=async t=>{try{const e=mr(Yr,tC,t);await li(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},nre=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],sre=t=>{switch(t.type){case An.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case An.ACTO:return`Acto: ${t.ubicacion}`;case An.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case An.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},are=({isOpen:t,onClose:e,onSave:r,onDelete:n,event:s,date:a,isLoading:i})=>{const[o,l]=q.useState({});q.useEffect(()=>{l(s||{type:An.EVALUACION,subtype:Th.PRUEBA_PARCIAL,asignatura:yl[0],curso:ha[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[s,t]);const c="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",d=x=>{const{name:E,value:S}=x.target;l(B=>({...B,[E]:S}))},h=x=>{l(E=>{if(E.type===An.SALIDA_PEDAGOGICA){const S=E.cursos||[],B=S.includes(x)?S.filter(D=>D!==x):[...S,x];return{...E,cursos:B.sort()}}return E})},p=x=>{var S;x.preventDefault();let E;switch(o.type){case An.EVALUACION:const B={date:a,type:An.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===Th.RUBRICA||o.subtype===Th.PAUTA_COTEJO)&&((S=o.enlace)!=null&&S.trim())&&(B.enlace=o.enlace.trim()),E=B;break;case An.ACTO:E={date:a,type:An.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case An.ACTIVIDAD_FOCALIZADA:E={date:a,type:An.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case An.SALIDA_PEDAGOGICA:E={date:a,type:An.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(E)};if(!t)return null;const m=new Date(`${a}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),y=()=>{switch(o.type){case An.EVALUACION:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),u.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:c,children:Eee.map(x=>u.jsx("option",{value:x,children:x},x))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:c,children:yl.map(x=>u.jsx("option",{value:x,children:x},x))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:c,children:ha.map(x=>u.jsx("option",{value:x,children:x},x))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),u.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:c})]}),(o.subtype===Th.RUBRICA||o.subtype===Th.PAUTA_COTEJO)&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),u.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:c})]})]});case An.ACTO:case An.ACTIVIDAD_FOCALIZADA:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),u.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:c})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),u.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:c})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),u.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:c})]})]});case An.SALIDA_PEDAGOGICA:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),u.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:c})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),u.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:c})]}),u.jsxs("fieldset",{children:[u.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),u.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:ha.map(x=>u.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[u.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(x),onChange:()=>h(x),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{children:x})]},x))})]})]});default:return null}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:x=>x.stopPropagation(),children:u.jsxs("form",{onSubmit:p,children:[u.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:s?"Editar Evento":"Agregar Evento"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:m}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),u.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:c,children:Object.values(An).map(x=>u.jsx("option",{value:x,children:x},x))})]}),y()]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[u.jsx("div",{children:s&&n&&u.jsx("button",{type:"button",onClick:n,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),u.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},ire=({profile:t})=>{const[e,r]=q.useState(new Date),[n,s]=q.useState([]),[a,i]=q.useState(!1),[o,l]=q.useState(null),[c,d]=q.useState(!1),[h,p]=q.useState(Object.values(An)),[m,y]=q.useState(!1),[x,E]=q.useState(null),[S,B]=q.useState(null),D=q.useCallback(async()=>{i(!0);try{const R=await Zte();s(R),l(null)}catch(R){console.error("Error al cargar eventos desde Firestore",R),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);q.useEffect(()=>{D()},[D]);const I=q.useMemo(()=>{const R=e.getFullYear(),L=e.getMonth(),Q=new Date(R,L,1).getDay(),H=new Date(R,L+1,0).getDate(),te=[];let Y=1;for(let re=0;re<6;re++){const V=[];for(let J=0;J<7;J++)re===0&&J<Q||Y>H?V.push(null):(V.push(new Date(R,L,Y)),Y++);if(te.push(V),Y>H)break}return te},[e]),U=R=>{p(L=>L.includes(R)?L.filter(Q=>Q!==R):[...L,R])},F=()=>{h.length===Object.values(An).length?p([]):p(Object.values(An))},C=R=>{t!==jt.ESTUDIANTE&&(E(R.toISOString().split("T")[0]),B(null),y(!0))},_=(R,L)=>{L.stopPropagation(),t!==jt.ESTUDIANTE&&(E(R.date),B(R),y(!0))},N=async R=>{d(!0);try{S?await tre(S.id,R):await ere(R),await D(),y(!1)}catch(L){console.error("Error al guardar evento:",L);const Q=L instanceof Error?L.message:"Error desconocido";l(`Error al guardar el evento: ${Q}`)}finally{d(!1)}},j=async()=>{if(S){d(!0);try{await rre(S.id),await D(),y(!1)}catch(R){console.error("Error al eliminar evento:",R);const L=R instanceof Error?R.message:"Error desconocido";l(`No se pudo eliminar el evento: ${L}`)}finally{d(!1)}}};return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),a&&u.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!a&&n.length===0&&u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),u.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),u.jsx("div",{className:"ml-3",children:u.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),u.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[u.jsx("button",{onClick:F,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:h.length===Object.values(An).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(An).map(R=>u.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${h.includes(R)?`shadow-sm ${uf[R].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[u.jsx("input",{type:"checkbox",checked:h.includes(R),onChange:()=>U(R),className:"hidden"}),u.jsx("span",{children:uf[R].icon}),u.jsx("span",{children:uf[R].label})]},R))]})]}),u.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[u.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[u.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),u.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),u.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),u.jsx("div",{className:"grid grid-cols-7",children:nre.map(R=>u.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:R},R))}),u.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:I.flat().map((R,L)=>{const Q=R&&R.toDateString()===new Date().toDateString(),H=R==null?void 0:R.toISOString().split("T")[0],te=H?n.filter(Y=>Y.date===H&&h.includes(Y.type)):[];return u.jsx("div",{onClick:()=>R&&C(R),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${R?t!==jt.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:R&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:`self-end text-sm font-semibold ${Q?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:R.getDate()}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:te.map(Y=>u.jsxs("div",{onClick:re=>_(Y,re),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${uf[Y.type].color}`,children:[u.jsx("span",{children:uf[Y.type].icon}),u.jsx("span",{className:"truncate",children:sre(Y)})]},Y.id))}),t!==jt.ESTUDIANTE&&u.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},L)})})]}),m&&u.jsx(are,{isOpen:m,onClose:()=>y(!1),onSave:N,onDelete:j,event:S,date:x,isLoading:c})]})},rC="anuncios",ore=async()=>{try{const t=er(Ft(Yr,rC),an("fechaPublicacion","desc"));return(await Da(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},lre=async t=>{try{return{id:(await ws(Ft(Yr,rC),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},cre=async(t,e)=>{try{const r=mr(Yr,rC,t);await O1(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",t),new Error("No se pudo actualizar el anuncio")}},ure=async t=>{try{const e=mr(Yr,rC,t);await li(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},E6=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],Are=({currentUser:t})=>{const[e,r]=q.useState([]),[n,s]=q.useState(!1),[a,i]=q.useState(null),[o,l]=q.useState({titulo:"",mensaje:"",adjunto:""}),[c,d]=q.useState({tipo:"Todos",cursos:[]}),h=q.useCallback(async()=>{s(!0);try{const C=await ore();r(C),i(null)}catch(C){console.error("Error al cargar anuncios desde Firestore",C),i("No se pudieron cargar los anuncios desde la nube.")}finally{s(!1)}},[]);q.useEffect(()=>{h()},[h]);const p=C=>{const{name:_,value:N}=C.target;l(j=>({...j,[_]:N}))},m=C=>{d({tipo:C,cursos:C==="Cursos"?[]:void 0})},y=C=>{d(_=>{var j;if(_.tipo!=="Cursos")return _;const N=(j=_.cursos)!=null&&j.includes(C)?_.cursos.filter(R=>R!==C):[..._.cursos||[],C];return{..._,cursos:N}})},x=async C=>{if(C.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(c.tipo==="Cursos"&&(!c.cursos||c.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const _={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:c,...o};await lre(_),await h(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(_){console.error("Error al crear anuncio:",_),i("Error al publicar el anuncio en la nube.")}},E=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await ure(C),await h()}catch(_){console.error("Error al eliminar anuncio:",_),i("No se pudo eliminar el anuncio en la nube.")}},S=async C=>{try{const _=e.find(N=>N.id===C);_&&(await cre(C,{destacado:!_.destacado}),await h())}catch(_){console.error("Error al actualizar anuncio:",_),i("No se pudo actualizar el estado del anuncio en la nube.")}},B=q.useMemo(()=>[...e].sort((C,_)=>C.destacado&&!_.destacado?-1:!C.destacado&&_.destacado?1:new Date(_.fechaPublicacion).getTime()-new Date(C.fechaPublicacion).getTime()),[e]),D=q.useMemo(()=>{const C=t.profile,_=t.curso;return B.filter(N=>{if(C===jt.SUBDIRECCION)return!0;if(!N.destinatarios)return C!==jt.ESTUDIANTE;const{tipo:j,cursos:R}=N.destinatarios;return j==="Todos"||j==="Profesores"&&C===jt.PROFESORADO||j==="Coordinación TP"&&C===jt.COORDINACION_TP?!0:j==="Cursos"?C===jt.ESTUDIANTE?R==null?void 0:R.includes(_||""):!0:!1})},[B,t]),I=C=>t.profile===jt.ESTUDIANTE?!1:t.profile===jt.SUBDIRECCION||t.profile===C.profileCreador,U=()=>t.profile===jt.SUBDIRECCION||t.profile===jt.PROFESORADO,F="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&u.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),a&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),t.profile!==jt.ESTUDIANTE?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),u.jsxs("form",{onSubmit:x,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),u.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:p,required:!0,className:F})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),u.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:p,required:!0,rows:4,className:F})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),u.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(C=>u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"destinatarioTipo",value:C,checked:c.tipo===C,onChange:()=>m(C),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),u.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:C.replace("Coordinación TP","Coord. TP")})]},C))})]}),c.tipo==="Cursos"&&u.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:ha.map(C=>{var _;return u.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:(_=c.cursos)==null?void 0:_.includes(C),onChange:()=>y(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),u.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:C})]},C)})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),u.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:p,placeholder:"https://ejemplo.com/documento.pdf",className:F})]}),u.jsx("div",{className:"pt-2 text-right",children:u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&D.length===0&&u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&D.length>0&&D.map((C,_)=>{const N=E6[_%E6.length];return u.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${N.bg} ${N.rotate}`,children:[C.destacado&&u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),u.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:C.titulo}),u.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:C.mensaje}),C.adjunto&&u.jsx("div",{className:"font-sans text-sm mb-4",children:u.jsxs("a",{href:C.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),u.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold",children:C.autor}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(C.fechaPublicacion).toLocaleString("es-CL")})]}),u.jsxs("div",{className:"flex items-center",children:[U()&&u.jsx("button",{onClick:()=>S(C.id),title:C.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx("span",{className:`text-xl transition-opacity ${C.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),I(C)&&u.jsx("button",{onClick:()=>E(C.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},C.id)})})]})},vj="api_logs",dre=async(t,e)=>{try{const r={module:t,userId:e.id,userEmail:e.email,userName:e.nombreCompleto,timestamp:ur.fromDate(new Date)};await ws(Ft(Tt,vj),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},fre=t=>{const e=er(Ft(Tt,vj),an("timestamp","desc"));return gr(e,n=>{const s=n.docs.map(a=>{var o,l;const i=a.data();return{id:a.id,...i,timestamp:((l=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:l.call(o).toISOString())||i.timestamp}});t(s)},n=>{console.error("Error al suscribirse a los logs de API:",n),t([])})},td=(t,e)=>{if(!e||!e.id||!e.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}dre(t,e)},w4="actas_de_reunion",hre=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},pre=t=>{const e=er(Ft(Tt,w4),an("fechaCreacion","desc"));return gr(e,n=>{const s=n.docs.map(a=>hre(a));t(s)},n=>{console.error("Error al suscribirse a las actas:",n),t([])})},mre=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:ur.fromDate(new Date(t.fechaCreacion))};return(await ws(Ft(Tt,w4),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},gre=async t=>{try{const e=mr(Tt,w4,t);await li(e)}catch(e){throw console.error("Error al eliminar el acta:",e),new Error("No se pudo eliminar el acta.")}},yj=window.SpeechRecognition||window.webkitSpeechRecognition,_6=!!yj,xre=({isListening:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),vre=({currentUser:t})=>{const[e,r]=q.useState([]),[n,s]=q.useState(null),[a,i]=q.useState({tipoReunion:T_[0],asistentes:"",textoReunion:""}),[o,l]=q.useState(!1),[c,d]=q.useState(!1),[h,p]=q.useState(!0),[m,y]=q.useState(null),x=q.useRef(null);q.useEffect(()=>{p(!0);const C=pre(_=>{r(_),!n&&_.length>0&&s(_[0]),p(!1)});return()=>C()},[n]);const E=C=>{const{name:_,value:N}=C.target;i(j=>({...j,[_]:N}))},S=q.useCallback(()=>{var C;if(!_6){y("El reconocimiento de voz no es compatible con este navegador.");return}o?(C=x.current)==null||C.stop():(x.current=new yj,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=_=>{let N="";for(let j=_.resultIndex;j<_.results.length;++j)_.results[j].isFinal&&(N+=_.results[j][0].transcript+". ");i(j=>({...j,textoReunion:j.textoReunion+N}))},x.current.onstart=()=>l(!0),x.current.onend=()=>l(!1),x.current.onerror=_=>{console.error("Speech recognition error",_.error),y(`Error de reconocimiento: ${_.error}`),l(!1)},x.current.start())},[o]),B=async C=>{C.preventDefault();const{tipoReunion:_,asistentes:N,textoReunion:j}=a;if(!_||!N.trim()||!j.trim()){y("Todos los campos son obligatorios.");return}d(!0),y(null);try{td("Generador de Actas");const R="",Q=new globalThis.GoogleGenerativeAI(R).getGenerativeModel({model:"gemini-pro"}),H=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${j}"
                
                Asistentes a la reunión para referencia de nombres: ${N}
            `,V=(await(await Q.generateContent(H)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(V),K={fechaCreacion:new Date().toISOString(),...a,...J},ae=await mre(K,t);i({tipoReunion:T_[0],asistentes:"",textoReunion:""})}catch(R){console.error("Error al analizar acta con IA:",R),y("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},D=async C=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await gre(C),(n==null?void 0:n.id)===C&&s(e.length>1?e[1]:null)}catch(_){console.error("Error deleting acta:",_),alert("No se pudo eliminar el acta.")}},I=C=>{s(C)},U=C=>C.temas||C.acuerdos||C.plazos||C.responsables?u.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),C.temas&&C.temas.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.temas.map((N,j)=>u.jsx("li",{children:N},j))})]}),C.acuerdos&&C.acuerdos.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.acuerdos.map((N,j)=>u.jsx("li",{children:N},j))})]}),C.plazos&&C.plazos.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.plazos.map((N,j)=>u.jsx("li",{children:N},j))})]}),C.responsables&&C.responsables.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.responsables.map((N,j)=>u.jsx("li",{children:N},j))})]})]}):null,F="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return h?u.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[u.jsxs("div",{className:"md:col-span-1 space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),u.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),u.jsx("div",{className:"ml-3",children:u.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",u.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),u.jsxs("form",{onSubmit:B,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),u.jsx("select",{name:"tipoReunion",value:a.tipoReunion,onChange:E,required:!0,className:F,children:T_.map(C=>u.jsx("option",{value:C,children:C},C))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),u.jsx("textarea",{name:"asistentes",value:a.asistentes,onChange:E,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:F})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),u.jsxs("div",{className:"relative",children:[u.jsx("textarea",{name:"textoReunion",value:a.textoReunion,onChange:E,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:F}),_6&&u.jsx("button",{type:"button",onClick:S,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:u.jsx(xre,{isListening:o})})]})]}),m&&u.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:m}),u.jsx("div",{className:"pt-2 text-right",children:u.jsx("button",{type:"submit",disabled:c,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),u.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:e.length>0?e.map(C=>u.jsxs("button",{onClick:()=>I(C),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===C.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.tipoReunion}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(C.fechaCreacion).toLocaleDateString("es-CL")})]},C.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),u.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?u.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),u.jsx("button",{onClick:()=>D(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[u.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),u.jsx("h2",{children:"Asistentes"}),u.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((C,_)=>C.trim()&&u.jsx("li",{children:C.trim()},_))}),U(n),u.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:u.jsx("p",{children:n.textoReunion})})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[u.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),u.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},yre="modulepreload",wre=function(t){return"/"+t},S6={},Tw=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let i=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=i(r.map(c=>{if(c=wre(c),c in S6)return;S6[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":yre,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((m,y)=>{p.addEventListener("load",m),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Xn(t){"@babel/helpers - typeof";return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(t)}var eo=Uint8Array,gl=Uint16Array,b4=Int32Array,nC=new eo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sC=new eo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),I5=new eo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wj=function(t,e){for(var r=new gl(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new b4(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)s[a]=a-r[n]<<5|n;return{b:r,r:s}},bj=wj(nC,2),Cj=bj.b,F5=bj.r;Cj[28]=258,F5[258]=28;var Ej=wj(sC,0),bre=Ej.b,T6=Ej.r,D5=new gl(32768);for(var xs=0;xs<32768;++xs){var $d=(xs&43690)>>1|(xs&21845)<<1;$d=($d&52428)>>2|($d&13107)<<2,$d=($d&61680)>>4|($d&3855)<<4,D5[xs]=(($d&65280)>>8|($d&255)<<8)>>1}var Wu=function(t,e,r){for(var n=t.length,s=0,a=new gl(e);s<n;++s)t[s]&&++a[t[s]-1];var i=new gl(e);for(s=1;s<e;++s)i[s]=i[s-1]+a[s-1]<<1;var o;if(r){o=new gl(1<<e);var l=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],d=e-t[s],h=i[t[s]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)o[D5[h]>>l]=c}else for(o=new gl(n),s=0;s<n;++s)t[s]&&(o[s]=D5[i[t[s]-1]++]>>15-t[s]);return o},jf=new eo(288);for(var xs=0;xs<144;++xs)jf[xs]=8;for(var xs=144;xs<256;++xs)jf[xs]=9;for(var xs=256;xs<280;++xs)jf[xs]=7;for(var xs=280;xs<288;++xs)jf[xs]=8;var Wx=new eo(32);for(var xs=0;xs<32;++xs)Wx[xs]=5;var Cre=Wu(jf,9,0),Ere=Wu(jf,9,1),_re=Wu(Wx,5,0),Sre=Wu(Wx,5,1),k_=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Lc=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},I_=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},C4=function(t){return(t+7)/8|0},_j=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new eo(t.subarray(e,r))},Tre=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oc=function(t,e,r){var n=new Error(e||Tre[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Oc),!r)throw n;return n},Nre=function(t,e,r,n){var s=t.length,a=0;if(!s||e.f&&!e.l)return r||new eo(0);var i=!r,o=i||e.i!=2,l=e.i;i&&(r=new eo(s*3));var c=function(ce){var oe=r.length;if(ce>oe){var Re=new eo(Math.max(oe*2,ce));Re.set(r),r=Re}},d=e.f||0,h=e.p||0,p=e.b||0,m=e.l,y=e.d,x=e.m,E=e.n,S=s*8;do{if(!m){d=Lc(t,h,1);var B=Lc(t,h+1,3);if(h+=3,B)if(B==1)m=Ere,y=Sre,x=9,E=5;else if(B==2){var F=Lc(t,h,31)+257,C=Lc(t,h+10,15)+4,_=F+Lc(t,h+5,31)+1;h+=14;for(var N=new eo(_),j=new eo(19),R=0;R<C;++R)j[I5[R]]=Lc(t,h+R*3,7);h+=C*3;for(var L=k_(j),Q=(1<<L)-1,H=Wu(j,L,1),R=0;R<_;){var te=H[Lc(t,h,Q)];h+=te&15;var D=te>>4;if(D<16)N[R++]=D;else{var Y=0,re=0;for(D==16?(re=3+Lc(t,h,3),h+=2,Y=N[R-1]):D==17?(re=3+Lc(t,h,7),h+=3):D==18&&(re=11+Lc(t,h,127),h+=7);re--;)N[R++]=Y}}var V=N.subarray(0,F),J=N.subarray(F);x=k_(V),E=k_(J),m=Wu(V,x,1),y=Wu(J,E,1)}else Oc(1);else{var D=C4(h)+4,I=t[D-4]|t[D-3]<<8,U=D+I;if(U>s){l&&Oc(0);break}o&&c(p+I),r.set(t.subarray(D,U),p),e.b=p+=I,e.p=h=U*8,e.f=d;continue}if(h>S){l&&Oc(0);break}}o&&c(p+131072);for(var K=(1<<x)-1,ae=(1<<E)-1,O=h;;O=h){var Y=m[I_(t,h)&K],W=Y>>4;if(h+=Y&15,h>S){l&&Oc(0);break}if(Y||Oc(2),W<256)r[p++]=W;else if(W==256){O=h,m=null;break}else{var Z=W-254;if(W>264){var R=W-257,ne=nC[R];Z=Lc(t,h,(1<<ne)-1)+Cj[R],h+=ne}var le=y[I_(t,h)&ae],ve=le>>4;le||Oc(3),h+=le&15;var J=bre[ve];if(ve>3){var ne=sC[ve];J+=I_(t,h)&(1<<ne)-1,h+=ne}if(h>S){l&&Oc(0);break}o&&c(p+131072);var pe=p+Z;if(p<J){var he=a-J,de=Math.min(J,pe);for(he+p<0&&Oc(3);p<de;++p)r[p]=n[he+p]}for(;p<pe;++p)r[p]=r[p-J]}}e.l=m,e.p=O,e.b=p,e.f=d,m&&(d=1,e.m=x,e.d=y,e.n=E)}while(!d);return p!=r.length&&i?_j(r,0,p):r.subarray(0,p)},UA=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Ng=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},F_=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,a=r.slice();if(!s)return{t:Tj,l:0};if(s==1){var i=new eo(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(U,F){return U.f-F.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,d=1,h=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=r[r[c].f<r[h].f?c++:h++],l=r[c!=d&&r[c].f<r[h].f?c++:h++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=a[0].s,n=1;n<s;++n)a[n].s>p&&(p=a[n].s);var m=new gl(p+1),y=R5(r[d-1],m,0);if(y>e){var n=0,x=0,E=y-e,S=1<<E;for(a.sort(function(F,C){return m[C.s]-m[F.s]||F.f-C.f});n<s;++n){var B=a[n].s;if(m[B]>e)x+=S-(1<<y-m[B]),m[B]=e;else break}for(x>>=E;x>0;){var D=a[n].s;m[D]<e?x-=1<<e-m[D]++-1:++n}for(;n>=0&&x;--n){var I=a[n].s;m[I]==e&&(--m[I],++x)}y=e}return{t:new eo(m),l:y}},R5=function(t,e,r){return t.s==-1?Math.max(R5(t.l,e,r+1),R5(t.r,e,r+1)):e[t.s]=r},N6=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new gl(++e),n=0,s=t[0],a=1,i=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[o]}return{c:r.subarray(0,n),n:e}},Bg=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Sj=function(t,e,r){var n=r.length,s=C4(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var a=0;a<n;++a)t[s+a+4]=r[a];return(s+4+n)*8},B6=function(t,e,r,n,s,a,i,o,l,c,d){UA(e,d++,r),++s[256];for(var h=F_(s,15),p=h.t,m=h.l,y=F_(a,15),x=y.t,E=y.l,S=N6(p),B=S.c,D=S.n,I=N6(x),U=I.c,F=I.n,C=new gl(19),_=0;_<B.length;++_)++C[B[_]&31];for(var _=0;_<U.length;++_)++C[U[_]&31];for(var N=F_(C,7),j=N.t,R=N.l,L=19;L>4&&!j[I5[L-1]];--L);var Q=c+5<<3,H=Bg(s,jf)+Bg(a,Wx)+i,te=Bg(s,p)+Bg(a,x)+i+14+3*L+Bg(C,j)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&Q<=H&&Q<=te)return Sj(e,d,t.subarray(l,l+c));var Y,re,V,J;if(UA(e,d,1+(te<H)),d+=2,te<H){Y=Wu(p,m,0),re=p,V=Wu(x,E,0),J=x;var K=Wu(j,R,0);UA(e,d,D-257),UA(e,d+5,F-1),UA(e,d+10,L-4),d+=14;for(var _=0;_<L;++_)UA(e,d+3*_,j[I5[_]]);d+=3*L;for(var ae=[B,U],O=0;O<2;++O)for(var W=ae[O],_=0;_<W.length;++_){var Z=W[_]&31;UA(e,d,K[Z]),d+=j[Z],Z>15&&(UA(e,d,W[_]>>5&127),d+=W[_]>>12)}}else Y=Cre,re=jf,V=_re,J=Wx;for(var _=0;_<o;++_){var ne=n[_];if(ne>255){var Z=ne>>18&31;Ng(e,d,Y[Z+257]),d+=re[Z+257],Z>7&&(UA(e,d,ne>>23&31),d+=nC[Z]);var le=ne&31;Ng(e,d,V[le]),d+=J[le],le>3&&(Ng(e,d,ne>>5&8191),d+=sC[le])}else Ng(e,d,Y[ne]),d+=re[ne]}return Ng(e,d,Y[256]),d+re[256]},Bre=new b4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Tj=new eo(0),kre=function(t,e,r,n,s,a){var i=a.z||t.length,o=new eo(n+i+5*(1+Math.ceil(i/7e3))+s),l=o.subarray(n,o.length-s),c=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var h=Bre[e-1],p=h>>13,m=h&8191,y=(1<<r)-1,x=a.p||new gl(32768),E=a.h||new gl(y+1),S=Math.ceil(r/3),B=2*S,D=function(qe){return(t[qe]^t[qe+1]<<S^t[qe+2]<<B)&y},I=new b4(25e3),U=new gl(288),F=new gl(32),C=0,_=0,N=a.i||0,j=0,R=a.w||0,L=0;N+2<i;++N){var Q=D(N),H=N&32767,te=E[Q];if(x[H]=te,E[Q]=H,R<=N){var Y=i-N;if((C>7e3||j>24576)&&(Y>423||!c)){d=B6(t,l,0,I,U,F,_,j,L,N-L,d),j=C=_=0,L=N;for(var re=0;re<286;++re)U[re]=0;for(var re=0;re<30;++re)F[re]=0}var V=2,J=0,K=m,ae=H-te&32767;if(Y>2&&Q==D(N-ae))for(var O=Math.min(p,Y)-1,W=Math.min(32767,N),Z=Math.min(258,Y);ae<=W&&--K&&H!=te;){if(t[N+V]==t[N+V-ae]){for(var ne=0;ne<Z&&t[N+ne]==t[N+ne-ae];++ne);if(ne>V){if(V=ne,J=ae,ne>O)break;for(var le=Math.min(ae,ne-2),ve=0,re=0;re<le;++re){var pe=N-ae+re&32767,he=x[pe],de=pe-he&32767;de>ve&&(ve=de,te=pe)}}}H=te,te=x[H],ae+=H-te&32767}if(J){I[j++]=268435456|F5[V]<<18|T6[J];var ce=F5[V]&31,oe=T6[J]&31;_+=nC[ce]+sC[oe],++U[257+ce],++F[oe],R=N+V,++C}else I[j++]=t[N],++U[t[N]]}}for(N=Math.max(N,R);N<i;++N)I[j++]=t[N],++U[t[N]];d=B6(t,l,c,I,U,F,_,j,L,N-L,d),c||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=E,a.p=x,a.i=N,a.w=R)}else{for(var N=a.w||0;N<i+c;N+=65535){var Re=N+65535;Re>=i&&(l[d/8|0]=c,Re=i),d=Sj(l,d+1,t.subarray(N,Re))}a.i=i}return _j(o,0,n+C4(d)+s)},Nj=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,a=r.length|0,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=n+=r[i];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Ire=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),i=new eo(a.length+t.length);i.set(a),i.set(t,a.length),t=i,s.w=a.length}return kre(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},Bj=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},Fre=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=Nj();s.p(e.dictionary),Bj(t,2,s.d())}},Dre=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Oc(6,"invalid zlib data"),(t[1]>>5&1)==1&&Oc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function L5(t,e){e||(e={});var r=Nj();r.p(t);var n=Ire(t,e,e.dictionary?6:2,4);return Fre(n,e),Bj(n,n.length-4,r.d()),n}function Rre(t,e){return Nre(t.subarray(Dre(t),-4),{i:2},e,e)}var Lre=typeof TextDecoder<"u"&&new TextDecoder,Ure=0;try{Lre.decode(Tj,{stream:!0}),Ure=1}catch{}var Tr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function D_(){Tr.console&&typeof Tr.console.log=="function"&&Tr.console.log.apply(Tr.console,arguments)}var us={log:D_,warn:function(t){Tr.console&&(typeof Tr.console.warn=="function"?Tr.console.warn.apply(Tr.console,arguments):D_.call(null,arguments))},error:function(t){Tr.console&&(typeof Tr.console.error=="function"?Tr.console.error.apply(Tr.console,arguments):D_(t))}};function R_(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){_h(n.response,e,r)},n.onerror=function(){us.error("could not download file")},n.send()}function k6(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function fy(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var vx,U5,_h=Tr.saveAs||((typeof window>"u"?"undefined":Xn(window))!=="object"||window!==Tr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Tr.URL||Tr.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?k6(s.href)?R_(t,e,r):fy(s,s.target="_blank"):fy(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){fy(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(k6(t))R_(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){fy(n)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:Xn(a)!=="object"&&(us.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return R_(t,e,r);var s=t.type==="application/octet-stream",a=/constructor/i.test(Tr.HTMLElement)||Tr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&a)&&(typeof FileReader>"u"?"undefined":Xn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var l=Tr.URL||Tr.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function kj(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,a=r[n].process,i=s.exec(t);i&&(e=a(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function L_(t,e){var r=t[0],n=t[1],s=t[2],a=t[3];r=Qi(r,n,s,a,e[0],7,-680876936),a=Qi(a,r,n,s,e[1],12,-389564586),s=Qi(s,a,r,n,e[2],17,606105819),n=Qi(n,s,a,r,e[3],22,-1044525330),r=Qi(r,n,s,a,e[4],7,-176418897),a=Qi(a,r,n,s,e[5],12,1200080426),s=Qi(s,a,r,n,e[6],17,-1473231341),n=Qi(n,s,a,r,e[7],22,-45705983),r=Qi(r,n,s,a,e[8],7,1770035416),a=Qi(a,r,n,s,e[9],12,-1958414417),s=Qi(s,a,r,n,e[10],17,-42063),n=Qi(n,s,a,r,e[11],22,-1990404162),r=Qi(r,n,s,a,e[12],7,1804603682),a=Qi(a,r,n,s,e[13],12,-40341101),s=Qi(s,a,r,n,e[14],17,-1502002290),r=Hi(r,n=Qi(n,s,a,r,e[15],22,1236535329),s,a,e[1],5,-165796510),a=Hi(a,r,n,s,e[6],9,-1069501632),s=Hi(s,a,r,n,e[11],14,643717713),n=Hi(n,s,a,r,e[0],20,-373897302),r=Hi(r,n,s,a,e[5],5,-701558691),a=Hi(a,r,n,s,e[10],9,38016083),s=Hi(s,a,r,n,e[15],14,-660478335),n=Hi(n,s,a,r,e[4],20,-405537848),r=Hi(r,n,s,a,e[9],5,568446438),a=Hi(a,r,n,s,e[14],9,-1019803690),s=Hi(s,a,r,n,e[3],14,-187363961),n=Hi(n,s,a,r,e[8],20,1163531501),r=Hi(r,n,s,a,e[13],5,-1444681467),a=Hi(a,r,n,s,e[2],9,-51403784),s=Hi(s,a,r,n,e[7],14,1735328473),r=Vi(r,n=Hi(n,s,a,r,e[12],20,-1926607734),s,a,e[5],4,-378558),a=Vi(a,r,n,s,e[8],11,-2022574463),s=Vi(s,a,r,n,e[11],16,1839030562),n=Vi(n,s,a,r,e[14],23,-35309556),r=Vi(r,n,s,a,e[1],4,-1530992060),a=Vi(a,r,n,s,e[4],11,1272893353),s=Vi(s,a,r,n,e[7],16,-155497632),n=Vi(n,s,a,r,e[10],23,-1094730640),r=Vi(r,n,s,a,e[13],4,681279174),a=Vi(a,r,n,s,e[0],11,-358537222),s=Vi(s,a,r,n,e[3],16,-722521979),n=Vi(n,s,a,r,e[6],23,76029189),r=Vi(r,n,s,a,e[9],4,-640364487),a=Vi(a,r,n,s,e[12],11,-421815835),s=Vi(s,a,r,n,e[15],16,530742520),r=zi(r,n=Vi(n,s,a,r,e[2],23,-995338651),s,a,e[0],6,-198630844),a=zi(a,r,n,s,e[7],10,1126891415),s=zi(s,a,r,n,e[14],15,-1416354905),n=zi(n,s,a,r,e[5],21,-57434055),r=zi(r,n,s,a,e[12],6,1700485571),a=zi(a,r,n,s,e[3],10,-1894986606),s=zi(s,a,r,n,e[10],15,-1051523),n=zi(n,s,a,r,e[1],21,-2054922799),r=zi(r,n,s,a,e[8],6,1873313359),a=zi(a,r,n,s,e[15],10,-30611744),s=zi(s,a,r,n,e[6],15,-1560198380),n=zi(n,s,a,r,e[13],21,1309151649),r=zi(r,n,s,a,e[4],6,-145523070),a=zi(a,r,n,s,e[11],10,-1120210379),s=zi(s,a,r,n,e[2],15,718787259),n=zi(n,s,a,r,e[9],21,-343485551),t[0]=ff(r,t[0]),t[1]=ff(n,t[1]),t[2]=ff(s,t[2]),t[3]=ff(a,t[3])}function aC(t,e,r,n,s,a){return e=ff(ff(e,t),ff(n,a)),ff(e<<s|e>>>32-s,r)}function Qi(t,e,r,n,s,a,i){return aC(e&r|~e&n,t,e,s,a,i)}function Hi(t,e,r,n,s,a,i){return aC(e&n|r&~n,t,e,s,a,i)}function Vi(t,e,r,n,s,a,i){return aC(e^r^n,t,e,s,a,i)}function zi(t,e,r,n,s,a,i){return aC(r^(e|~n),t,e,s,a,i)}function Ij(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)L_(n,Mre(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(L_(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,L_(n,s),n}function Mre(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}vx=Tr.atob.bind(Tr),U5=Tr.btoa.bind(Tr);var I6="0123456789abcdef".split("");function Pre(t){for(var e="",r=0;r<4;r++)e+=I6[t>>8*r+4&15]+I6[t>>8*r&15];return e}function Ore(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function M5(t){return Ij(t).map(Ore).join("")}var jre=function(t){for(var e=0;e<t.length;e++)t[e]=Pre(t[e]);return t.join("")}(Ij("hello"))!="5d41402abc4b2a76b9719d911017c592";function ff(t,e){if(jre){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P5(t,e){var r,n,s,a;if(t!==r){for(var i=(s=t,a=1+(256/t.length>>0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+i.charCodeAt(l))%256,o[l]=o[c],o[c]=d}r=t,n=o}else o=n;var h=e.length,p=0,m=0,y="";for(l=0;l<h;l++)m=(m+(d=o[p=(p+1)%256]))%256,o[p]=o[m],o[m]=d,i=o[(o[p]+o[m])%256],y+=String.fromCharCode(e.charCodeAt(l)^i);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var F6={print:4,modify:8,copy:16,"annot-forms":32};function Ep(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(F6.perm!==void 0)throw new Error("Invalid permission: "+o);s+=F6[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=M5(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=P5(this.encryptionKey,this.padding)}function _p(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function D6(t){if(Xn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[n,!!s],a},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var a in e[r]){var i=e[r][a];try{i[0].apply(t,n)}catch(o){Tr.console&&us.error("jsPDF PubSub Error",o.message,o)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Nw(t){if(!(this instanceof Nw))return new Nw(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Fj(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Nh(t,e,r,n,s){if(!(this instanceof Nh))return new Nh(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Fj.call(this,n,s)}function kp(t,e,r,n,s){if(!(this instanceof kp))return new kp(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Fj.call(this,n,s)}function or(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],a=arguments[3],i=[],o=1,l=16,c="S",d=null;Xn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),i=t.filters||(a===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,p={},m={internal:{},__private__:{}};m.__private__.PubSub=D6;var y="1.3",x=m.__private__.getPdfVersion=function(){return y};m.__private__.setPdfVersion=function(G){y=G};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return E};var S=m.__private__.getPageFormat=function(G){return E[G]};s=s||"a4";var B={COMPAT:"compat",ADVANCED:"advanced"},D=B.COMPAT;function I(){this.saveGraphicsState(),Ee(new Gt(mt,0,0,-mt,0,Ya()*mt).toString()+" cm"),this.setFontSize(this.getFontSize()/mt),c="n",D=B.ADVANCED}function U(){this.restoreGraphicsState(),c="S",D=B.COMPAT}var F=m.__private__.combineFontStyleAndFontWeight=function(G,fe){if(G=="bold"&&fe=="normal"||G=="bold"&&fe==400||G=="normal"&&fe=="italic"||G=="bold"&&fe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return fe&&(G=fe==400||fe==="normal"?G==="italic"?"italic":"normal":fe!=700&&fe!=="bold"||G!=="normal"?(fe==700?"bold":fe)+""+G:"bold"),G};m.advancedAPI=function(G){var fe=D===B.COMPAT;return fe&&I.call(this),typeof G!="function"||(G(this),fe&&U.call(this)),this},m.compatAPI=function(G){var fe=D===B.ADVANCED;return fe&&U.call(this),typeof G!="function"||(G(this),fe&&I.call(this)),this},m.isAdvancedAPI=function(){return D===B.ADVANCED};var C,_=function(G){if(D!==B.ADVANCED)throw new Error(G+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=m.roundToPrecision=m.__private__.roundToPrecision=function(G,fe){var Fe=e||fe;if(isNaN(G)||isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return G.toFixed(Fe).replace(/0+$/,"")};C=m.hpf=m.__private__.hpf=typeof l=="number"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return N(G,l)}:l==="smart"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return N(G,G>-1&&G<1?16:5)}:function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return N(G,16)};var j=m.f2=m.__private__.f2=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f2");return N(G,2)},R=m.__private__.f3=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f3");return N(G,3)},L=m.scale=m.__private__.scale=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.scale");return D===B.COMPAT?G*mt:D===B.ADVANCED?G:void 0},Q=function(G){return D===B.COMPAT?Ya()-G:D===B.ADVANCED?G:void 0},H=function(G){return L(Q(G))};m.__private__.setPrecision=m.setPrecision=function(G){typeof parseInt(G,10)=="number"&&(e=parseInt(G,10))};var te,Y="00000000000000000000000000000000",re=m.__private__.getFileId=function(){return Y},V=m.__private__.setFileId=function(G){return Y=G!==void 0&&/^[a-fA-F0-9]{32}$/.test(G)?G.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Gn=new Ep(d.userPermissions,d.userPassword,d.ownerPassword,Y)),Y};m.setFileId=function(G){return V(G),this},m.getFileId=function(){return re()};var J=m.__private__.convertDateToPDFDate=function(G){var fe=G.getTimezoneOffset(),Fe=fe<0?"+":"-",Ue=Math.floor(Math.abs(fe/60)),ze=Math.abs(fe%60),lt=[Fe,Z(Ue),"'",Z(ze),"'"].join("");return["D:",G.getFullYear(),Z(G.getMonth()+1),Z(G.getDate()),Z(G.getHours()),Z(G.getMinutes()),Z(G.getSeconds()),lt].join("")},K=m.__private__.convertPDFDateToDate=function(G){var fe=parseInt(G.substr(2,4),10),Fe=parseInt(G.substr(6,2),10)-1,Ue=parseInt(G.substr(8,2),10),ze=parseInt(G.substr(10,2),10),lt=parseInt(G.substr(12,2),10),_t=parseInt(G.substr(14,2),10);return new Date(fe,Fe,Ue,ze,lt,_t,0)},ae=m.__private__.setCreationDate=function(G){var fe;if(G===void 0&&(G=new Date),G instanceof Date)fe=J(G);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(G))throw new Error("Invalid argument passed to jsPDF.setCreationDate");fe=G}return te=fe},O=m.__private__.getCreationDate=function(G){var fe=te;return G==="jsDate"&&(fe=K(te)),fe};m.setCreationDate=function(G){return ae(G),this},m.getCreationDate=function(G){return O(G)};var W,Z=m.__private__.padd2=function(G){return("0"+parseInt(G)).slice(-2)},ne=m.__private__.padd2Hex=function(G){return("00"+(G=G.toString())).substr(G.length)},le=0,ve=[],pe=[],he=0,de=[],ce=[],oe=!1,Re=pe,qe=function(){le=0,he=0,pe=[],ve=[],de=[],_e=ts(),Se=ts()};m.__private__.setCustomOutputDestination=function(G){oe=!0,Re=G};var Ie=function(G){oe||(Re=G)};m.__private__.resetCustomOutputDestination=function(){oe=!1,Re=pe};var Ee=m.__private__.out=function(G){return G=G.toString(),he+=G.length+1,Re.push(G),Re},De=m.__private__.write=function(G){return Ee(arguments.length===1?G.toString():Array.prototype.join.call(arguments," "))},je=m.__private__.getArrayBuffer=function(G){for(var fe=G.length,Fe=new ArrayBuffer(fe),Ue=new Uint8Array(Fe);fe--;)Ue[fe]=G.charCodeAt(fe);return Fe},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return We};var ct=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(G){return ct=D===B.ADVANCED?G/mt:G,this};var wt,ot=m.__private__.getFontSize=m.getFontSize=function(){return D===B.COMPAT?ct:ct*mt},Dt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(G){return Dt=G,this},m.__private__.getR2L=m.getR2L=function(){return Dt};var Rt,Yt=m.__private__.setZoomMode=function(G){var fe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(G))wt=G;else if(isNaN(G)){if(fe.indexOf(G)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+G+'" is not recognized.');wt=G}else wt=parseInt(G,10)};m.__private__.getZoomMode=function(){return wt};var Lt,Qt=m.__private__.setPageMode=function(G){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(G)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+G+'" is not recognized.');Rt=G};m.__private__.getPageMode=function(){return Rt};var qt=m.__private__.setLayoutMode=function(G){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(G)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+G+'" is not recognized.');Lt=G};m.__private__.getLayoutMode=function(){return Lt},m.__private__.setDisplayMode=m.setDisplayMode=function(G,fe,Fe){return Yt(G),qt(fe),Qt(Fe),this};var kt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(G){if(Object.keys(kt).indexOf(G)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return kt[G]},m.__private__.getDocumentProperties=function(){return kt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(G){for(var fe in kt)kt.hasOwnProperty(fe)&&G[fe]&&(kt[fe]=G[fe]);return this},m.__private__.setDocumentProperty=function(G,fe){if(Object.keys(kt).indexOf(G)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return kt[G]=fe};var It,mt,_r,Jt,mn,wr={},Or={},Rn=[],Lr={},ga={},on={},ls={},bs=null,Qr=0,nr=[],Kr=new D6(m),xa=t.hotfixes||[],es={},Bs={},Ua=[],Gt=function G(fe,Fe,Ue,ze,lt,_t){if(!(this instanceof G))return new G(fe,Fe,Ue,ze,lt,_t);isNaN(fe)&&(fe=1),isNaN(Fe)&&(Fe=0),isNaN(Ue)&&(Ue=0),isNaN(ze)&&(ze=1),isNaN(lt)&&(lt=0),isNaN(_t)&&(_t=0),this._matrix=[fe,Fe,Ue,ze,lt,_t]};Object.defineProperty(Gt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(Gt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(Gt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(Gt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(Gt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(Gt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(Gt.prototype,"a",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(Gt.prototype,"b",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(Gt.prototype,"c",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(Gt.prototype,"d",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(Gt.prototype,"e",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(Gt.prototype,"f",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(Gt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Gt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Gt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Gt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Gt.prototype.join=function(G){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(G)},Gt.prototype.multiply=function(G){var fe=G.sx*this.sx+G.shy*this.shx,Fe=G.sx*this.shy+G.shy*this.sy,Ue=G.shx*this.sx+G.sy*this.shx,ze=G.shx*this.shy+G.sy*this.sy,lt=G.tx*this.sx+G.ty*this.shx+this.tx,_t=G.tx*this.shy+G.ty*this.sy+this.ty;return new Gt(fe,Fe,Ue,ze,lt,_t)},Gt.prototype.decompose=function(){var G=this.sx,fe=this.shy,Fe=this.shx,Ue=this.sy,ze=this.tx,lt=this.ty,_t=Math.sqrt(G*G+fe*fe),Vt=(G/=_t)*Fe+(fe/=_t)*Ue;Fe-=G*Vt,Ue-=fe*Vt;var k=Math.sqrt(Fe*Fe+Ue*Ue);return Vt/=k,G*(Ue/=k)<fe*(Fe/=k)&&(G=-G,fe=-fe,Vt=-Vt,_t=-_t),{scale:new Gt(_t,0,0,k,0,0),translate:new Gt(1,0,0,1,ze,lt),rotate:new Gt(G,fe,-fe,G,0,0),skew:new Gt(1,0,Vt,1,0,0)}},Gt.prototype.toString=function(G){return this.join(" ")},Gt.prototype.inversed=function(){var G=this.sx,fe=this.shy,Fe=this.shx,Ue=this.sy,ze=this.tx,lt=this.ty,_t=1/(G*Ue-fe*Fe),Vt=Ue*_t,k=-fe*_t,ee=-Fe*_t,ie=G*_t;return new Gt(Vt,k,ee,ie,-Vt*ze-ee*lt,-k*ze-ie*lt)},Gt.prototype.applyToPoint=function(G){var fe=G.x*this.sx+G.y*this.shx+this.tx,Fe=G.x*this.shy+G.y*this.sy+this.ty;return new mc(fe,Fe)},Gt.prototype.applyToRectangle=function(G){var fe=this.applyToPoint(G),Fe=this.applyToPoint(new mc(G.x+G.w,G.y+G.h));return new su(fe.x,fe.y,Fe.x-fe.x,Fe.y-fe.y)},Gt.prototype.clone=function(){var G=this.sx,fe=this.shy,Fe=this.shx,Ue=this.sy,ze=this.tx,lt=this.ty;return new Gt(G,fe,Fe,Ue,ze,lt)},m.Matrix=Gt;var gn=m.matrixMult=function(G,fe){return fe.multiply(G)},ln=new Gt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ln;var Ln=function(G,fe){if(!ga[G]){var Fe=(fe instanceof Nh?"Sh":"P")+(Object.keys(Lr).length+1).toString(10);fe.id=Fe,ga[G]=Fe,Lr[Fe]=fe,Kr.publish("addPattern",fe)}};m.ShadingPattern=Nh,m.TilingPattern=kp,m.addShadingPattern=function(G,fe){return _("addShadingPattern()"),Ln(G,fe),this},m.beginTilingPattern=function(G){_("beginTilingPattern()"),Fl(G.boundingBox[0],G.boundingBox[1],G.boundingBox[2]-G.boundingBox[0],G.boundingBox[3]-G.boundingBox[1],G.matrix)},m.endTilingPattern=function(G,fe){_("endTilingPattern()"),fe.stream=ce[W].join(`
`),Ln(G,fe),Kr.publish("endTilingPattern",fe),Ua.pop().restore()};var zn=m.__private__.newObject=function(){var G=ts();return me(G,!0),G},ts=m.__private__.newObjectDeferred=function(){return le++,ve[le]=function(){return he},le},me=function(G,fe){return fe=typeof fe=="boolean"&&fe,ve[G]=he,fe&&Ee(G+" 0 obj"),G},Be=m.__private__.newAdditionalObject=function(){var G={objId:ts(),content:""};return de.push(G),G},_e=ts(),Se=ts(),Te=m.__private__.decodeColorString=function(G){var fe=G.split(" ");if(fe.length!==2||fe[1]!=="g"&&fe[1]!=="G")fe.length===5&&(fe[4]==="k"||fe[4]==="K")&&(fe=[(1-fe[0])*(1-fe[3]),(1-fe[1])*(1-fe[3]),(1-fe[2])*(1-fe[3]),"r"]);else{var Fe=parseFloat(fe[0]);fe=[Fe,Fe,Fe,"r"]}for(var Ue="#",ze=0;ze<3;ze++)Ue+=("0"+Math.floor(255*parseFloat(fe[ze])).toString(16)).slice(-2);return Ue},ke=m.__private__.encodeColorString=function(G){var fe;typeof G=="string"&&(G={ch1:G});var Fe=G.ch1,Ue=G.ch2,ze=G.ch3,lt=G.ch4,_t=G.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Fe=="string"&&Fe.charAt(0)!=="#"){var Vt=new kj(Fe);if(Vt.ok)Fe=Vt.toHex();else if(!/^\d*\.?\d*$/.test(Fe))throw new Error('Invalid color "'+Fe+'" passed to jsPDF.encodeColorString.')}if(typeof Fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Fe)&&(Fe="#"+Fe[1]+Fe[1]+Fe[2]+Fe[2]+Fe[3]+Fe[3]),typeof Fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Fe)){var k=parseInt(Fe.substr(1),16);Fe=k>>16&255,Ue=k>>8&255,ze=255&k}if(Ue===void 0||lt===void 0&&Fe===Ue&&Ue===ze)if(typeof Fe=="string")fe=Fe+" "+_t[0];else switch(G.precision){case 2:fe=j(Fe/255)+" "+_t[0];break;case 3:default:fe=R(Fe/255)+" "+_t[0]}else if(lt===void 0||Xn(lt)==="object"){if(lt&&!isNaN(lt.a)&&lt.a===0)return fe=["1.","1.","1.",_t[1]].join(" ");if(typeof Fe=="string")fe=[Fe,Ue,ze,_t[1]].join(" ");else switch(G.precision){case 2:fe=[j(Fe/255),j(Ue/255),j(ze/255),_t[1]].join(" ");break;default:case 3:fe=[R(Fe/255),R(Ue/255),R(ze/255),_t[1]].join(" ")}}else if(typeof Fe=="string")fe=[Fe,Ue,ze,lt,_t[2]].join(" ");else switch(G.precision){case 2:fe=[j(Fe),j(Ue),j(ze),j(lt),_t[2]].join(" ");break;case 3:default:fe=[R(Fe),R(Ue),R(ze),R(lt),_t[2]].join(" ")}return fe},$e=m.__private__.getFilters=function(){return i},nt=m.__private__.putStream=function(G){var fe=(G=G||{}).data||"",Fe=G.filters||$e(),Ue=G.alreadyAppliedFilters||[],ze=G.addLength1||!1,lt=fe.length,_t=G.objectId,Vt=function(vr){return vr};if(d!==null&&_t===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Vt=Gn.encryptor(_t,0));var k={};Fe===!0&&(Fe=["FlateEncode"]);var ee=G.additionalKeyValues||[],ie=(k=or.API.processDataByFilters!==void 0?or.API.processDataByFilters(fe,Fe):{data:fe,reverseChain:[]}).reverseChain+(Array.isArray(Ue)?Ue.join(" "):Ue.toString());if(k.data.length!==0&&(ee.push({key:"Length",value:k.data.length}),ze===!0&&ee.push({key:"Length1",value:lt})),ie.length!=0)if(ie.split("/").length-1==1)ee.push({key:"Filter",value:ie});else{ee.push({key:"Filter",value:"["+ie+"]"});for(var we=0;we<ee.length;we+=1)if(ee[we].key==="DecodeParms"){for(var He=[],tt=0;tt<k.reverseChain.split("/").length-1;tt+=1)He.push("null");He.push(ee[we].value),ee[we].value="["+He.join(" ")+"]"}}Ee("<<");for(var St=0;St<ee.length;St++)Ee("/"+ee[St].key+" "+ee[St].value);Ee(">>"),k.data.length!==0&&(Ee("stream"),Ee(Vt(k.data)),Ee("endstream"))},Ve=m.__private__.putPage=function(G){var fe=G.number,Fe=G.data,Ue=G.objId,ze=G.contentsObjId;me(Ue,!0),Ee("<</Type /Page"),Ee("/Parent "+G.rootDictionaryObjId+" 0 R"),Ee("/Resources "+G.resourceDictionaryObjId+" 0 R"),Ee("/MediaBox ["+parseFloat(C(G.mediaBox.bottomLeftX))+" "+parseFloat(C(G.mediaBox.bottomLeftY))+" "+C(G.mediaBox.topRightX)+" "+C(G.mediaBox.topRightY)+"]"),G.cropBox!==null&&Ee("/CropBox ["+C(G.cropBox.bottomLeftX)+" "+C(G.cropBox.bottomLeftY)+" "+C(G.cropBox.topRightX)+" "+C(G.cropBox.topRightY)+"]"),G.bleedBox!==null&&Ee("/BleedBox ["+C(G.bleedBox.bottomLeftX)+" "+C(G.bleedBox.bottomLeftY)+" "+C(G.bleedBox.topRightX)+" "+C(G.bleedBox.topRightY)+"]"),G.trimBox!==null&&Ee("/TrimBox ["+C(G.trimBox.bottomLeftX)+" "+C(G.trimBox.bottomLeftY)+" "+C(G.trimBox.topRightX)+" "+C(G.trimBox.topRightY)+"]"),G.artBox!==null&&Ee("/ArtBox ["+C(G.artBox.bottomLeftX)+" "+C(G.artBox.bottomLeftY)+" "+C(G.artBox.topRightX)+" "+C(G.artBox.topRightY)+"]"),typeof G.userUnit=="number"&&G.userUnit!==1&&Ee("/UserUnit "+G.userUnit),Kr.publish("putPage",{objId:Ue,pageContext:nr[fe],pageNumber:fe,page:Fe}),Ee("/Contents "+ze+" 0 R"),Ee(">>"),Ee("endobj");var lt=Fe.join(`
`);return D===B.ADVANCED&&(lt+=`
Q`),me(ze,!0),nt({data:lt,filters:$e(),objectId:ze}),Ee("endobj"),Ue},Xe=m.__private__.putPages=function(){var G,fe,Fe=[];for(G=1;G<=Qr;G++)nr[G].objId=ts(),nr[G].contentsObjId=ts();for(G=1;G<=Qr;G++)Fe.push(Ve({number:G,data:ce[G],objId:nr[G].objId,contentsObjId:nr[G].contentsObjId,mediaBox:nr[G].mediaBox,cropBox:nr[G].cropBox,bleedBox:nr[G].bleedBox,trimBox:nr[G].trimBox,artBox:nr[G].artBox,userUnit:nr[G].userUnit,rootDictionaryObjId:_e,resourceDictionaryObjId:Se}));me(_e,!0),Ee("<</Type /Pages");var Ue="/Kids [";for(fe=0;fe<Qr;fe++)Ue+=Fe[fe]+" 0 R ";Ee(Ue+"]"),Ee("/Count "+Qr),Ee(">>"),Ee("endobj"),Kr.publish("postPutPages")},et=function(G){Kr.publish("putFont",{font:G,out:Ee,newObject:zn,putStream:nt}),G.isAlreadyPutted!==!0&&(G.objectNumber=zn(),Ee("<<"),Ee("/Type /Font"),Ee("/BaseFont /"+_p(G.postScriptName)),Ee("/Subtype /Type1"),typeof G.encoding=="string"&&Ee("/Encoding /"+G.encoding),Ee("/FirstChar 32"),Ee("/LastChar 255"),Ee(">>"),Ee("endobj"))},yt=function(){for(var G in wr)wr.hasOwnProperty(G)&&(h===!1||h===!0&&p.hasOwnProperty(G))&&et(wr[G])},Bt=function(G){G.objectNumber=zn();var fe=[];fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Form"}),fe.push({key:"BBox",value:"["+[C(G.x),C(G.y),C(G.x+G.width),C(G.y+G.height)].join(" ")+"]"}),fe.push({key:"Matrix",value:"["+G.matrix.toString()+"]"});var Fe=G.pages[1].join(`
`);nt({data:Fe,additionalKeyValues:fe,objectId:G.objectNumber}),Ee("endobj")},Ht=function(){for(var G in es)es.hasOwnProperty(G)&&Bt(es[G])},Nt=function(G,fe){var Fe,Ue=[],ze=1/(fe-1);for(Fe=0;Fe<1;Fe+=ze)Ue.push(Fe);if(Ue.push(1),G[0].offset!=0){var lt={offset:0,color:G[0].color};G.unshift(lt)}if(G[G.length-1].offset!=1){var _t={offset:1,color:G[G.length-1].color};G.push(_t)}for(var Vt="",k=0,ee=0;ee<Ue.length;ee++){for(Fe=Ue[ee];Fe>G[k+1].offset;)k++;var ie=G[k].offset,we=(Fe-ie)/(G[k+1].offset-ie),He=G[k].color,tt=G[k+1].color;Vt+=ne(Math.round((1-we)*He[0]+we*tt[0]).toString(16))+ne(Math.round((1-we)*He[1]+we*tt[1]).toString(16))+ne(Math.round((1-we)*He[2]+we*tt[2]).toString(16))}return Vt.trim()},Ut=function(G,fe){fe||(fe=21);var Fe=zn(),Ue=Nt(G.colors,fe),ze=[];ze.push({key:"FunctionType",value:"0"}),ze.push({key:"Domain",value:"[0.0 1.0]"}),ze.push({key:"Size",value:"["+fe+"]"}),ze.push({key:"BitsPerSample",value:"8"}),ze.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ze.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt({data:Ue,additionalKeyValues:ze,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Fe}),Ee("endobj"),G.objectNumber=zn(),Ee("<< /ShadingType "+G.type),Ee("/ColorSpace /DeviceRGB");var lt="/Coords ["+C(parseFloat(G.coords[0]))+" "+C(parseFloat(G.coords[1]))+" ";G.type===2?lt+=C(parseFloat(G.coords[2]))+" "+C(parseFloat(G.coords[3])):lt+=C(parseFloat(G.coords[2]))+" "+C(parseFloat(G.coords[3]))+" "+C(parseFloat(G.coords[4]))+" "+C(parseFloat(G.coords[5])),Ee(lt+="]"),G.matrix&&Ee("/Matrix ["+G.matrix.toString()+"]"),Ee("/Function "+Fe+" 0 R"),Ee("/Extend [true true]"),Ee(">>"),Ee("endobj")},fr=function(G,fe){var Fe=ts(),Ue=zn();fe.push({resourcesOid:Fe,objectOid:Ue}),G.objectNumber=Ue;var ze=[];ze.push({key:"Type",value:"/Pattern"}),ze.push({key:"PatternType",value:"1"}),ze.push({key:"PaintType",value:"1"}),ze.push({key:"TilingType",value:"1"}),ze.push({key:"BBox",value:"["+G.boundingBox.map(C).join(" ")+"]"}),ze.push({key:"XStep",value:C(G.xStep)}),ze.push({key:"YStep",value:C(G.yStep)}),ze.push({key:"Resources",value:Fe+" 0 R"}),G.matrix&&ze.push({key:"Matrix",value:"["+G.matrix.toString()+"]"}),nt({data:G.stream,additionalKeyValues:ze,objectId:G.objectNumber}),Ee("endobj")},Hr=function(G){var fe;for(fe in Lr)Lr.hasOwnProperty(fe)&&(Lr[fe]instanceof Nh?Ut(Lr[fe]):Lr[fe]instanceof kp&&fr(Lr[fe],G))},Vr=function(G){for(var fe in G.objectNumber=zn(),Ee("<<"),G)switch(fe){case"opacity":Ee("/ca "+j(G[fe]));break;case"stroke-opacity":Ee("/CA "+j(G[fe]))}Ee(">>"),Ee("endobj")},$r=function(){var G;for(G in on)on.hasOwnProperty(G)&&Vr(on[G])},Os=function(){for(var G in Ee("/XObject <<"),es)es.hasOwnProperty(G)&&es[G].objectNumber>=0&&Ee("/"+G+" "+es[G].objectNumber+" 0 R");Kr.publish("putXobjectDict"),Ee(">>")},Ni=function(){Gn.oid=zn(),Ee("<<"),Ee("/Filter /Standard"),Ee("/V "+Gn.v),Ee("/R "+Gn.r),Ee("/U <"+Gn.toHexString(Gn.U)+">"),Ee("/O <"+Gn.toHexString(Gn.O)+">"),Ee("/P "+Gn.P),Ee(">>"),Ee("endobj")},js=function(){for(var G in Ee("/Font <<"),wr)wr.hasOwnProperty(G)&&(h===!1||h===!0&&p.hasOwnProperty(G))&&Ee("/"+G+" "+wr[G].objectNumber+" 0 R");Ee(">>")},va=function(){if(Object.keys(Lr).length>0){for(var G in Ee("/Shading <<"),Lr)Lr.hasOwnProperty(G)&&Lr[G]instanceof Nh&&Lr[G].objectNumber>=0&&Ee("/"+G+" "+Lr[G].objectNumber+" 0 R");Kr.publish("putShadingPatternDict"),Ee(">>")}},ea=function(G){if(Object.keys(Lr).length>0){for(var fe in Ee("/Pattern <<"),Lr)Lr.hasOwnProperty(fe)&&Lr[fe]instanceof m.TilingPattern&&Lr[fe].objectNumber>=0&&Lr[fe].objectNumber<G&&Ee("/"+fe+" "+Lr[fe].objectNumber+" 0 R");Kr.publish("putTilingPatternDict"),Ee(">>")}},Ma=function(){if(Object.keys(on).length>0){var G;for(G in Ee("/ExtGState <<"),on)on.hasOwnProperty(G)&&on[G].objectNumber>=0&&Ee("/"+G+" "+on[G].objectNumber+" 0 R");Kr.publish("putGStateDict"),Ee(">>")}},rs=function(G){me(G.resourcesOid,!0),Ee("<<"),Ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),js(),va(),ea(G.objectOid),Ma(),Os(),Ee(">>"),Ee("endobj")},ya=function(){var G=[];yt(),$r(),Ht(),Hr(G),Kr.publish("putResources"),G.forEach(rs),rs({resourcesOid:Se,objectOid:Number.MAX_SAFE_INTEGER}),Kr.publish("postPutResources")},Zc=function(){Kr.publish("putAdditionalObjects");for(var G=0;G<de.length;G++){var fe=de[G];me(fe.objId,!0),Ee(fe.content),Ee("endobj")}Kr.publish("postPutAdditionalObjects")},fd=function(G){Or[G.fontName]=Or[G.fontName]||{},Or[G.fontName][G.fontStyle]=G.id},Cl=function(G,fe,Fe,Ue,ze){var lt={id:"F"+(Object.keys(wr).length+1).toString(10),postScriptName:G,fontName:fe,fontStyle:Fe,encoding:Ue,isStandardFont:ze||!1,metadata:{}};return Kr.publish("addFont",{font:lt,instance:this}),wr[lt.id]=lt,fd(lt),lt.id},oA=function(G){for(var fe=0,Fe=We.length;fe<Fe;fe++){var Ue=Cl.call(this,G[fe][0],G[fe][1],G[fe][2],We[fe][3],!0);h===!1&&(p[Ue]=!0);var ze=G[fe][0].split("-");fd({id:Ue,fontName:ze[0],fontStyle:ze[1]||""})}Kr.publish("addFonts",{fonts:wr,dictionary:Or})},Pa=function(G){return G.foo=function(){try{return G.apply(this,arguments)}catch(Ue){var fe=Ue.stack||"";~fe.indexOf(" at ")&&(fe=fe.split(" at ")[1]);var Fe="Error in function "+fe.split(`
`)[0].split("<")[0]+": "+Ue.message;if(!Tr.console)throw new Error(Fe);Tr.console.error(Fe,Ue),Tr.alert&&alert(Fe)}},G.foo.bar=G,G.foo},eu=function(G,fe){var Fe,Ue,ze,lt,_t,Vt,k,ee,ie;if(ze=(fe=fe||{}).sourceEncoding||"Unicode",_t=fe.outputEncoding,(fe.autoencode||_t)&&wr[It].metadata&&wr[It].metadata[ze]&&wr[It].metadata[ze].encoding&&(lt=wr[It].metadata[ze].encoding,!_t&&wr[It].encoding&&(_t=wr[It].encoding),!_t&&lt.codePages&&(_t=lt.codePages[0]),typeof _t=="string"&&(_t=lt[_t]),_t)){for(k=!1,Vt=[],Fe=0,Ue=G.length;Fe<Ue;Fe++)(ee=_t[G.charCodeAt(Fe)])?Vt.push(String.fromCharCode(ee)):Vt.push(G[Fe]),Vt[Fe].charCodeAt(0)>>8&&(k=!0);G=Vt.join("")}for(Fe=G.length;k===void 0&&Fe!==0;)G.charCodeAt(Fe-1)>>8&&(k=!0),Fe--;if(!k)return G;for(Vt=fe.noBOM?[]:[254,255],Fe=0,Ue=G.length;Fe<Ue;Fe++){if((ie=(ee=G.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+G+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vt.push(ie),Vt.push(ee-(ie<<8))}return String.fromCharCode.apply(void 0,Vt)},xn=m.__private__.pdfEscape=m.pdfEscape=function(G,fe){return eu(G,fe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Oa=m.__private__.beginPage=function(G){ce[++Qr]=[],nr[Qr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(G[0]),topRightY:Number(G[1])}},yo(Qr),Ie(ce[W])},El=function(G,fe){var Fe,Ue,ze;switch(r=fe||r,typeof G=="string"&&(Fe=S(G.toLowerCase()),Array.isArray(Fe)&&(Ue=Fe[0],ze=Fe[1])),Array.isArray(G)&&(Ue=G[0]*mt,ze=G[1]*mt),isNaN(Ue)&&(Ue=s[0],ze=s[1]),(Ue>14400||ze>14400)&&(us.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ue=Math.min(14400,Ue),ze=Math.min(14400,ze)),s=[Ue,ze],r.substr(0,1)){case"l":ze>Ue&&(s=[ze,Ue]);break;case"p":Ue>ze&&(s=[ze,Ue])}Oa(s),AA(Nl),Ee(ja),dA!==0&&Ee(dA+" J"),pc!==0&&Ee(pc+" j"),Kr.publish("addPage",{pageNumber:Qr})},_l=function(G){G>0&&G<=Qr&&(ce.splice(G,1),nr.splice(G,1),Qr--,W>Qr&&(W=Qr),this.setPage(W))},yo=function(G){G>0&&G<=Qr&&(W=G)},Tn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ce.length-1},Sl=function(G,fe,Fe){var Ue,ze=void 0;return Fe=Fe||{},G=G!==void 0?G:wr[It].fontName,fe=fe!==void 0?fe:wr[It].fontStyle,Ue=G.toLowerCase(),Or[Ue]!==void 0&&Or[Ue][fe]!==void 0?ze=Or[Ue][fe]:Or[G]!==void 0&&Or[G][fe]!==void 0?ze=Or[G][fe]:Fe.disableWarning===!1&&us.warn("Unable to look up font label for font '"+G+"', '"+fe+"'. Refer to getFontList() for available fonts."),ze||Fe.noFallback||(ze=Or.times[fe])==null&&(ze=Or.times.normal),ze},Bi=m.__private__.putInfo=function(){var G=zn(),fe=function(Ue){return Ue};for(var Fe in d!==null&&(fe=Gn.encryptor(G,0)),Ee("<<"),Ee("/Producer ("+xn(fe("jsPDF "+or.version))+")"),kt)kt.hasOwnProperty(Fe)&&kt[Fe]&&Ee("/"+Fe.substr(0,1).toUpperCase()+Fe.substr(1)+" ("+xn(fe(kt[Fe]))+")");Ee("/CreationDate ("+xn(fe(te))+")"),Ee(">>"),Ee("endobj")},qo=m.__private__.putCatalog=function(G){var fe=(G=G||{}).rootDictionaryObjId||_e;switch(zn(),Ee("<<"),Ee("/Type /Catalog"),Ee("/Pages "+fe+" 0 R"),wt||(wt="fullwidth"),wt){case"fullwidth":Ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ee("/OpenAction [3 0 R /Fit]");break;case"original":Ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Fe=""+wt;Fe.substr(Fe.length-1)==="%"&&(wt=parseInt(wt)/100),typeof wt=="number"&&Ee("/OpenAction [3 0 R /XYZ null null "+j(wt)+"]")}switch(Lt||(Lt="continuous"),Lt){case"continuous":Ee("/PageLayout /OneColumn");break;case"single":Ee("/PageLayout /SinglePage");break;case"two":case"twoleft":Ee("/PageLayout /TwoColumnLeft");break;case"tworight":Ee("/PageLayout /TwoColumnRight")}Rt&&Ee("/PageMode /"+Rt),Kr.publish("putCatalog"),Ee(">>"),Ee("endobj")},hd=m.__private__.putTrailer=function(){Ee("trailer"),Ee("<<"),Ee("/Size "+(le+1)),Ee("/Root "+le+" 0 R"),Ee("/Info "+(le-1)+" 0 R"),d!==null&&Ee("/Encrypt "+Gn.oid+" 0 R"),Ee("/ID [ <"+Y+"> <"+Y+"> ]"),Ee(">>")},lA=m.__private__.putHeader=function(){Ee("%PDF-"+y),Ee("%ºß¬à")},cA=m.__private__.putXRef=function(){var G="0000000000";Ee("xref"),Ee("0 "+(le+1)),Ee("0000000000 65535 f ");for(var fe=1;fe<=le;fe++)typeof ve[fe]=="function"?Ee((G+ve[fe]()).slice(-10)+" 00000 n "):ve[fe]!==void 0?Ee((G+ve[fe]).slice(-10)+" 00000 n "):Ee("0000000000 00000 n ")},Ko=m.__private__.buildDocument=function(){qe(),Ie(pe),Kr.publish("buildDocument"),lA(),Xe(),Zc(),ya(),d!==null&&Ni(),Bi(),qo();var G=he;return cA(),hd(),Ee("startxref"),Ee(""+G),Ee("%%EOF"),Ie(ce[W]),pe.join(`
`)},tu=m.__private__.getBlob=function(G){return new Blob([je(G)],{type:"application/pdf"})},$o=m.output=m.__private__.output=Pa(function(G,fe){switch(typeof(fe=fe||{})=="string"?fe={filename:fe}:fe.filename=fe.filename||"generated.pdf",G){case void 0:return Ko();case"save":m.save(fe.filename);break;case"arraybuffer":return je(Ko());case"blob":return tu(Ko());case"bloburi":case"bloburl":if(Tr.URL!==void 0&&typeof Tr.URL.createObjectURL=="function")return Tr.URL&&Tr.URL.createObjectURL(tu(Ko()))||void 0;us.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Fe="",Ue=Ko();try{Fe=U5(Ue)}catch{Fe=U5(unescape(encodeURIComponent(Ue)))}return"data:application/pdf;filename="+fe.filename+";base64,"+Fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Tr)==="[object Window]"){var ze="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",lt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';fe.pdfObjectUrl&&(ze=fe.pdfObjectUrl,lt="");var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ze+'"'+lt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(fe)+");<\/script></body></html>",Vt=Tr.open();return Vt!==null&&Vt.document.write(_t),Vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Tr)==="[object Window]"){var k='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(fe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+fe.filename+'" width="500px" height="400px" /></body></html>',ee=Tr.open();if(ee!==null){ee.document.write(k);var ie=this;ee.document.documentElement.querySelector("#pdfViewer").onload=function(){ee.document.title=fe.filename,ee.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ie.output("bloburl"))}}return ee}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Tr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var we='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",fe)+'"></iframe></body></html>',He=Tr.open();if(He!==null&&(He.document.write(we),He.document.title=fe.filename),He||typeof safari>"u")return He;break;case"datauri":case"dataurl":return Tr.document.location.href=this.output("datauristring",fe);default:return null}}),wo=function(G){return Array.isArray(xa)===!0&&xa.indexOf(G)>-1};switch(n){case"pt":mt=1;break;case"mm":mt=72/25.4;break;case"cm":mt=72/2.54;break;case"in":mt=72;break;case"px":mt=wo("px_scaling")==1?.75:96/72;break;case"pc":case"em":mt=12;break;case"ex":mt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);mt=n}var Gn=null;ae(),V();var Wo=function(G){return d!==null?Gn.encryptor(G,0):function(fe){return fe}},bo=m.__private__.getPageInfo=m.getPageInfo=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:nr[G].objId,pageNumber:G,pageContext:nr[G]}},xr=m.__private__.getPageInfoByObjId=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var fe in nr)if(nr[fe].objId===G)break;return bo(fe)},Co=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:nr[W].objId,pageNumber:W,pageContext:nr[W]}};m.addPage=function(){return El.apply(this,arguments),this},m.setPage=function(){return yo.apply(this,arguments),Ie.call(this,ce[W]),this},m.insertPage=function(G){return this.addPage(),this.movePage(W,G),this},m.movePage=function(G,fe){var Fe,Ue;if(G>fe){Fe=ce[G],Ue=nr[G];for(var ze=G;ze>fe;ze--)ce[ze]=ce[ze-1],nr[ze]=nr[ze-1];ce[fe]=Fe,nr[fe]=Ue,this.setPage(fe)}else if(G<fe){Fe=ce[G],Ue=nr[G];for(var lt=G;lt<fe;lt++)ce[lt]=ce[lt+1],nr[lt]=nr[lt+1];ce[fe]=Fe,nr[fe]=Ue,this.setPage(fe)}return this},m.deletePage=function(){return _l.apply(this,arguments),this},m.__private__.text=m.text=function(G,fe,Fe,Ue,ze){var lt,_t,Vt,k,ee,ie,we,He,tt,St=(Ue=Ue||{}).scope||this;if(typeof G=="number"&&typeof fe=="number"&&(typeof Fe=="string"||Array.isArray(Fe))){var vr=Fe;Fe=fe,fe=G,G=vr}if(arguments[3]instanceof Gt?(_("The transform parameter of text() with a Matrix value"),tt=ze):(Vt=arguments[4],k=arguments[5],Xn(we=arguments[3])==="object"&&we!==null||(typeof Vt=="string"&&(k=Vt,Vt=null),typeof we=="string"&&(k=we,we=null),typeof we=="number"&&(Vt=we,we=null),Ue={flags:we,angle:Vt,align:k})),isNaN(fe)||isNaN(Fe)||G==null)throw new Error("Invalid arguments passed to jsPDF.text");if(G.length===0)return St;var tn="",Dr=!1,Nn=typeof Ue.lineHeightFactor=="number"?Ue.lineHeightFactor:en,Pn=St.internal.scaleFactor;function To(Xr){return Xr=Xr.split("	").join(Array(Ue.TabLen||9).join(" ")),xn(Xr,we)}function ks(Xr){for(var Jr,ns=Xr.concat(),Is=[],Bo=ns.length;Bo--;)typeof(Jr=ns.shift())=="string"?Is.push(Jr):Array.isArray(Xr)&&(Jr.length===1||Jr[1]===void 0&&Jr[2]===void 0)?Is.push(Jr[0]):Is.push([Jr[0],Jr[1],Jr[2]]);return Is}function Di(Xr,Jr){var ns;if(typeof Xr=="string")ns=Jr(Xr)[0];else if(Array.isArray(Xr)){for(var Is,Bo,pu=Xr.concat(),mu=[],wc=pu.length;wc--;)typeof(Is=pu.shift())=="string"?mu.push(Jr(Is)[0]):Array.isArray(Is)&&typeof Is[0]=="string"&&(Bo=Jr(Is[0],Is[1],Is[2]),mu.push([Bo[0],Bo[1],Bo[2]]));ns=mu}return ns}var Rl=!1,iu=!0;if(typeof G=="string")Rl=!0;else if(Array.isArray(G)){var xd=G.concat();_t=[];for(var fA,ta=xd.length;ta--;)(typeof(fA=xd.shift())!="string"||Array.isArray(fA)&&typeof fA[0]!="string")&&(iu=!1);Rl=iu}if(Rl===!1)throw new Error('Type of text must be string or Array. "'+G+'" is not recognized.');typeof G=="string"&&(G=G.match(/[\r?\n]/)?G.split(/\r\n|\r|\n/g):[G]);var ou=ct/St.internal.scaleFactor,hA=ou*(Nn-1);switch(Ue.baseline){case"bottom":Fe-=hA;break;case"top":Fe+=ou-hA;break;case"hanging":Fe+=ou-2*hA;break;case"middle":Fe+=ou/2-hA}if((ie=Ue.maxWidth||0)>0&&(typeof G=="string"?G=St.splitTextToSize(G,ie):Object.prototype.toString.call(G)==="[object Array]"&&(G=G.reduce(function(Xr,Jr){return Xr.concat(St.splitTextToSize(Jr,ie))},[]))),lt={text:G,x:fe,y:Fe,options:Ue,mutex:{pdfEscape:xn,activeFontKey:It,fonts:wr,activeFontSize:ct}},Kr.publish("preProcessText",lt),G=lt.text,Vt=(Ue=lt.options).angle,!(tt instanceof Gt)&&Vt&&typeof Vt=="number"){Vt*=Math.PI/180,Ue.rotationDirection===0&&(Vt=-Vt),D===B.ADVANCED&&(Vt=-Vt);var pA=Math.cos(Vt),vd=Math.sin(Vt);tt=new Gt(pA,vd,-vd,pA,0,0)}else Vt&&Vt instanceof Gt&&(tt=Vt);D!==B.ADVANCED||tt||(tt=ln),(ee=Ue.charSpace||hc)!==void 0&&(tn+=C(L(ee))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(He=Ue.horizontalScale)!==void 0&&(tn+=C(100*He)+` Tz
`),Ue.lang;var Ri=-1,Hm=Ue.renderingMode!==void 0?Ue.renderingMode:Ue.stroke,Zf=St.internal.getCurrentPageInfo().pageContext;switch(Hm){case 0:case!1:case"fill":Ri=0;break;case 1:case!0:case"stroke":Ri=1;break;case 2:case"fillThenStroke":Ri=2;break;case 3:case"invisible":Ri=3;break;case 4:case"fillAndAddForClipping":Ri=4;break;case 5:case"strokeAndAddPathForClipping":Ri=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ri=6;break;case 7:case"addToPathForClipping":Ri=7}var E0=Zf.usedRenderingMode!==void 0?Zf.usedRenderingMode:-1;Ri!==-1?tn+=Ri+` Tr
`:E0!==-1&&(tn+=`0 Tr
`),Ri!==-1&&(Zf.usedRenderingMode=Ri),k=Ue.align||"left";var No,wa=ct*Nn,lu=St.internal.pageSize.getWidth(),eh=wr[It];ee=Ue.charSpace||hc,ie=Ue.maxWidth||0,we=Object.assign({autoencode:!0,noBOM:!0},Ue.flags);var vc=[],cu=function(Xr){return St.getStringUnitWidth(Xr,{font:eh,charSpace:ee,fontSize:ct,doKerning:!1})*ct/Pn};if(Object.prototype.toString.call(G)==="[object Array]"){var di;_t=ks(G),k!=="left"&&(No=_t.map(cu));var Qa,uu=0;if(k==="right"){fe-=No[0],G=[],ta=_t.length;for(var Li=0;Li<ta;Li++)Li===0?(Qa=Wa(fe),di=Hs(Fe)):(Qa=L(uu-No[Li]),di=-wa),G.push([_t[Li],Qa,di]),uu=No[Li]}else if(k==="center"){fe-=No[0]/2,G=[],ta=_t.length;for(var Zo=0;Zo<ta;Zo++)Zo===0?(Qa=Wa(fe),di=Hs(Fe)):(Qa=L((uu-No[Zo])/2),di=-wa),G.push([_t[Zo],Qa,di]),uu=No[Zo]}else if(k==="left"){G=[],ta=_t.length;for(var Ll=0;Ll<ta;Ll++)G.push(_t[Ll])}else if(k==="justify"&&eh.encoding==="Identity-H"){G=[],ta=_t.length,ie=ie!==0?ie:lu;for(var el=0,Cs=0;Cs<ta;Cs++)if(di=Cs===0?Hs(Fe):-wa,Qa=Cs===0?Wa(fe):el,Cs<ta-1){var tl=L((ie-No[Cs])/(_t[Cs].split(" ").length-1)),Vs=_t[Cs].split(" ");G.push([Vs[0]+" ",Qa,di]),el=0;for(var Ui=1;Ui<Vs.length;Ui++){var mA=(cu(Vs[Ui-1]+" "+Vs[Ui])-cu(Vs[Ui]))*Pn+tl;Ui==Vs.length-1?G.push([Vs[Ui],mA,0]):G.push([Vs[Ui]+" ",mA,0]),el-=mA}}else G.push([_t[Cs],Qa,di]);G.push(["",el,0])}else{if(k!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(G=[],ta=_t.length,ie=ie!==0?ie:lu,Cs=0;Cs<ta;Cs++)di=Cs===0?Hs(Fe):-wa,Qa=Cs===0?Wa(fe):0,Cs<ta-1?vc.push(C(L((ie-No[Cs])/(_t[Cs].split(" ").length-1)))):vc.push(0),G.push([_t[Cs],Qa,di])}}var Ul=typeof Ue.R2L=="boolean"?Ue.R2L:Dt;Ul===!0&&(G=Di(G,function(Xr,Jr,ns){return[Xr.split("").reverse().join(""),Jr,ns]})),lt={text:G,x:fe,y:Fe,options:Ue,mutex:{pdfEscape:xn,activeFontKey:It,fonts:wr,activeFontSize:ct}},Kr.publish("postProcessText",lt),G=lt.text,Dr=lt.mutex.isHex||!1;var yd=wr[It].encoding;yd!=="WinAnsiEncoding"&&yd!=="StandardEncoding"||(G=Di(G,function(Xr,Jr,ns){return[To(Xr),Jr,ns]})),_t=ks(G),G=[];for(var Au,du,fu,gA=0,wd=1,hu=Array.isArray(_t[0])?wd:gA,yc="",xA=function(Xr,Jr,ns){var Is="";return ns instanceof Gt?(ns=typeof Ue.angle=="number"?gn(ns,new Gt(1,0,0,1,Xr,Jr)):gn(new Gt(1,0,0,1,Xr,Jr),ns),D===B.ADVANCED&&(ns=gn(new Gt(1,0,0,-1,0,0),ns)),Is=ns.join(" ")+` Tm
`):Is=C(Xr)+" "+C(Jr)+` Td
`,Is},Es=0;Es<_t.length;Es++){switch(yc="",hu){case wd:fu=(Dr?"<":"(")+_t[Es][0]+(Dr?">":")"),Au=parseFloat(_t[Es][1]),du=parseFloat(_t[Es][2]);break;case gA:fu=(Dr?"<":"(")+_t[Es]+(Dr?">":")"),Au=Wa(fe),du=Hs(Fe)}vc!==void 0&&vc[Es]!==void 0&&(yc=vc[Es]+` Tw
`),Es===0?G.push(yc+xA(Au,du,tt)+fu):hu===gA?G.push(yc+fu):hu===wd&&G.push(yc+xA(Au,du,tt)+fu)}G=hu===gA?G.join(` Tj
T* `):G.join(` Tj
`),G+=` Tj
`;var co=`BT
/`;return co+=It+" "+ct+` Tf
`,co+=C(ct*Nn)+` TL
`,co+=Xo+`
`,co+=tn,co+=G,Ee(co+="ET"),p[It]=!0,St};var pd=m.__private__.clip=m.clip=function(G){return Ee(G==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return pd("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Ee("n"),this};var Ka=m.__private__.isValidStyle=function(G){var fe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(G)!==-1&&(fe=!0),fe};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(G){return Ka(G)&&(c=G),this};var ki=m.__private__.getStyle=m.getStyle=function(G){var fe=c;switch(G){case"D":case"S":fe="S";break;case"F":fe="f";break;case"FD":case"DF":fe="B";break;case"f":case"f*":case"B":case"B*":fe=G}return fe},Ai=m.close=function(){return Ee("h"),this};m.stroke=function(){return Ee("S"),this},m.fill=function(G){return Eo("f",G),this},m.fillEvenOdd=function(G){return Eo("f*",G),this},m.fillStroke=function(G){return Eo("B",G),this},m.fillStrokeEvenOdd=function(G){return Eo("B*",G),this};var Eo=function(G,fe){Xn(fe)==="object"?Yo(fe,G):Ee(G)},Ii=function(G){G===null||D===B.ADVANCED&&G===void 0||(G=ki(G),Ee(G))};function Tl(G,fe,Fe,Ue,ze){var lt=new kp(fe||this.boundingBox,Fe||this.xStep,Ue||this.yStep,this.gState,ze||this.matrix);lt.stream=this.stream;var _t=G+"$$"+this.cloneIndex+++"$$";return Ln(_t,lt),lt}var Yo=function(G,fe){var Fe=ga[G.key],Ue=Lr[Fe];if(Ue instanceof Nh)Ee("q"),Ee(uA(fe)),Ue.gState&&m.setGState(Ue.gState),Ee(G.matrix.toString()+" cm"),Ee("/"+Fe+" sh"),Ee("Q");else if(Ue instanceof kp){var ze=new Gt(1,0,0,-1,0,Ya());G.matrix&&(ze=ze.multiply(G.matrix||ln),Fe=Tl.call(Ue,G.key,G.boundingBox,G.xStep,G.yStep,ze).id),Ee("q"),Ee("/Pattern cs"),Ee("/"+Fe+" scn"),Ue.gState&&m.setGState(Ue.gState),Ee(fe),Ee("Q")}},uA=function(G){switch(G){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Fi=m.moveTo=function(G,fe){return Ee(C(L(G))+" "+C(H(fe))+" m"),this},$a=m.lineTo=function(G,fe){return Ee(C(L(G))+" "+C(H(fe))+" l"),this},_o=m.curveTo=function(G,fe,Fe,Ue,ze,lt){return Ee([C(L(G)),C(H(fe)),C(L(Fe)),C(H(Ue)),C(L(ze)),C(H(lt)),"c"].join(" ")),this};m.__private__.line=m.line=function(G,fe,Fe,Ue,ze){if(isNaN(G)||isNaN(fe)||isNaN(Fe)||isNaN(Ue)||!Ka(ze))throw new Error("Invalid arguments passed to jsPDF.line");return D===B.COMPAT?this.lines([[Fe-G,Ue-fe]],G,fe,[1,1],ze||"S"):this.lines([[Fe-G,Ue-fe]],G,fe,[1,1]).stroke()},m.__private__.lines=m.lines=function(G,fe,Fe,Ue,ze,lt){var _t,Vt,k,ee,ie,we,He,tt,St,vr,tn,Dr;if(typeof G=="number"&&(Dr=Fe,Fe=fe,fe=G,G=Dr),Ue=Ue||[1,1],lt=lt||!1,isNaN(fe)||isNaN(Fe)||!Array.isArray(G)||!Array.isArray(Ue)||!Ka(ze)||typeof lt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fi(fe,Fe),_t=Ue[0],Vt=Ue[1],ee=G.length,vr=fe,tn=Fe,k=0;k<ee;k++)(ie=G[k]).length===2?(vr=ie[0]*_t+vr,tn=ie[1]*Vt+tn,$a(vr,tn)):(we=ie[0]*_t+vr,He=ie[1]*Vt+tn,tt=ie[2]*_t+vr,St=ie[3]*Vt+tn,vr=ie[4]*_t+vr,tn=ie[5]*Vt+tn,_o(we,He,tt,St,vr,tn));return lt&&Ai(),Ii(ze),this},m.path=function(G){for(var fe=0;fe<G.length;fe++){var Fe=G[fe],Ue=Fe.c;switch(Fe.op){case"m":Fi(Ue[0],Ue[1]);break;case"l":$a(Ue[0],Ue[1]);break;case"c":_o.apply(this,Ue);break;case"h":Ai()}}return this},m.__private__.rect=m.rect=function(G,fe,Fe,Ue,ze){if(isNaN(G)||isNaN(fe)||isNaN(Fe)||isNaN(Ue)||!Ka(ze))throw new Error("Invalid arguments passed to jsPDF.rect");return D===B.COMPAT&&(Ue=-Ue),Ee([C(L(G)),C(H(fe)),C(L(Fe)),C(L(Ue)),"re"].join(" ")),Ii(ze),this},m.__private__.triangle=m.triangle=function(G,fe,Fe,Ue,ze,lt,_t){if(isNaN(G)||isNaN(fe)||isNaN(Fe)||isNaN(Ue)||isNaN(ze)||isNaN(lt)||!Ka(_t))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Fe-G,Ue-fe],[ze-Fe,lt-Ue],[G-ze,fe-lt]],G,fe,[1,1],_t,!0),this},m.__private__.roundedRect=m.roundedRect=function(G,fe,Fe,Ue,ze,lt,_t){if(isNaN(G)||isNaN(fe)||isNaN(Fe)||isNaN(Ue)||isNaN(ze)||isNaN(lt)||!Ka(_t))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Vt=4/3*(Math.SQRT2-1);return ze=Math.min(ze,.5*Fe),lt=Math.min(lt,.5*Ue),this.lines([[Fe-2*ze,0],[ze*Vt,0,ze,lt-lt*Vt,ze,lt],[0,Ue-2*lt],[0,lt*Vt,-ze*Vt,lt,-ze,lt],[2*ze-Fe,0],[-ze*Vt,0,-ze,-lt*Vt,-ze,-lt],[0,2*lt-Ue],[0,-lt*Vt,ze*Vt,-lt,ze,-lt]],G+ze,fe,[1,1],_t,!0),this},m.__private__.ellipse=m.ellipse=function(G,fe,Fe,Ue,ze){if(isNaN(G)||isNaN(fe)||isNaN(Fe)||isNaN(Ue)||!Ka(ze))throw new Error("Invalid arguments passed to jsPDF.ellipse");var lt=4/3*(Math.SQRT2-1)*Fe,_t=4/3*(Math.SQRT2-1)*Ue;return Fi(G+Fe,fe),_o(G+Fe,fe-_t,G+lt,fe-Ue,G,fe-Ue),_o(G-lt,fe-Ue,G-Fe,fe-_t,G-Fe,fe),_o(G-Fe,fe+_t,G-lt,fe+Ue,G,fe+Ue),_o(G+lt,fe+Ue,G+Fe,fe+_t,G+Fe,fe),Ii(ze),this},m.__private__.circle=m.circle=function(G,fe,Fe,Ue){if(isNaN(G)||isNaN(fe)||isNaN(Fe)||!Ka(Ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(G,fe,Fe,Fe,Ue)},m.setFont=function(G,fe,Fe){return Fe&&(fe=F(fe,Fe)),It=Sl(G,fe,{disableWarning:!1}),this};var Qs=m.__private__.getFont=m.getFont=function(){return wr[Sl.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var G,fe,Fe={};for(G in Or)if(Or.hasOwnProperty(G))for(fe in Fe[G]=[],Or[G])Or[G].hasOwnProperty(fe)&&Fe[G].push(fe);return Fe},m.addFont=function(G,fe,Fe,Ue,ze){var lt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&lt.indexOf(arguments[3])!==-1?ze=arguments[3]:arguments[3]&&lt.indexOf(arguments[3])==-1&&(Fe=F(Fe,Ue)),ze=ze||"Identity-H",Cl.call(this,G,fe,Fe,ze)};var en,Nl=t.lineWidth||.200025,So=m.__private__.getLineWidth=m.getLineWidth=function(){return Nl},AA=m.__private__.setLineWidth=m.setLineWidth=function(G){return Nl=G,Ee(C(L(G))+" w"),this};m.__private__.setLineDash=or.API.setLineDash=or.API.setLineDashPattern=function(G,fe){if(G=G||[],fe=fe||0,isNaN(fe)||!Array.isArray(G))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return G=G.map(function(Fe){return C(L(Fe))}).join(" "),fe=C(L(fe)),Ee("["+G+"] "+fe+" d"),this};var dc=m.__private__.getLineHeight=m.getLineHeight=function(){return ct*en};m.__private__.getLineHeight=m.getLineHeight=function(){return ct*en};var fc=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(G){return typeof(G=G||1.15)=="number"&&(en=G),this},lo=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return en};fc(t.lineHeight);var Wa=m.__private__.getHorizontalCoordinate=function(G){return L(G)},Hs=m.__private__.getVerticalCoordinate=function(G){return D===B.ADVANCED?G:nr[W].mediaBox.topRightY-nr[W].mediaBox.bottomLeftY-L(G)},md=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(G){return C(Wa(G))},Bl=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(G){return C(Hs(G))},ja=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Te(ja)},m.__private__.setStrokeColor=m.setDrawColor=function(G,fe,Fe,Ue){return ja=ke({ch1:G,ch2:fe,ch3:Fe,ch4:Ue,pdfColorType:"draw",precision:2}),Ee(ja),this};var kl=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Te(kl)},m.__private__.setFillColor=m.setFillColor=function(G,fe,Fe,Ue){return kl=ke({ch1:G,ch2:fe,ch3:Fe,ch4:Ue,pdfColorType:"fill",precision:2}),Ee(kl),this};var Xo=t.textColor||"0 g",ru=m.__private__.getTextColor=m.getTextColor=function(){return Te(Xo)};m.__private__.setTextColor=m.setTextColor=function(G,fe,Fe,Ue){return Xo=ke({ch1:G,ch2:fe,ch3:Fe,ch4:Ue,pdfColorType:"text",precision:3}),this};var hc=t.charSpace,nu=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(hc||0)};m.__private__.setCharSpace=m.setCharSpace=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return hc=G,this};var dA=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(G){var fe=m.CapJoinStyles[G];if(fe===void 0)throw new Error("Line cap style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return dA=fe,Ee(fe+" J"),this};var pc=0;m.__private__.setLineJoin=m.setLineJoin=function(G){var fe=m.CapJoinStyles[G];if(fe===void 0)throw new Error("Line join style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pc=fe,Ee(fe+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(G){if(G=G||0,isNaN(G))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ee(C(L(G))+" M"),this},m.GState=Nw,m.setGState=function(G){(G=typeof G=="string"?on[ls[G]]:Il(null,G)).equals(bs)||(Ee("/"+G.id+" gs"),bs=G)};var Il=function(G,fe){if(!G||!ls[G]){var Fe=!1;for(var Ue in on)if(on.hasOwnProperty(Ue)&&on[Ue].equals(fe)){Fe=!0;break}if(Fe)fe=on[Ue];else{var ze="GS"+(Object.keys(on).length+1).toString(10);on[ze]=fe,fe.id=ze}return G&&(ls[G]=fe.id),Kr.publish("addGState",fe),fe}};m.addGState=function(G,fe){return Il(G,fe),this},m.saveGraphicsState=function(){return Ee("q"),Rn.push({key:It,size:ct,color:Xo}),this},m.restoreGraphicsState=function(){Ee("Q");var G=Rn.pop();return It=G.key,ct=G.size,Xo=G.color,bs=null,this},m.setCurrentTransformationMatrix=function(G){return Ee(G.toString()+" cm"),this},m.comment=function(G){return Ee("#"+G),this};var mc=function(G,fe){var Fe=G||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Fe},set:function(lt){isNaN(lt)||(Fe=parseFloat(lt))}});var Ue=fe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ue},set:function(lt){isNaN(lt)||(Ue=parseFloat(lt))}});var ze="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ze},set:function(lt){ze=lt.toString()}}),this},su=function(G,fe,Fe,Ue){mc.call(this,G,fe),this.type="rect";var ze=Fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ze},set:function(_t){isNaN(_t)||(ze=parseFloat(_t))}});var lt=Ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return lt},set:function(_t){isNaN(_t)||(lt=parseFloat(_t))}}),this},gc=function(){this.page=Qr,this.currentPage=W,this.pages=ce.slice(0),this.pagesContext=nr.slice(0),this.x=_r,this.y=Jt,this.matrix=mn,this.width=Dl(W),this.height=Ya(W),this.outputDestination=Re,this.id="",this.objectNumber=-1};gc.prototype.restore=function(){Qr=this.page,W=this.currentPage,nr=this.pagesContext,ce=this.pages,_r=this.x,Jt=this.y,mn=this.matrix,xc(W,this.width),au(W,this.height),Re=this.outputDestination};var Fl=function(G,fe,Fe,Ue,ze){Ua.push(new gc),Qr=W=0,ce=[],_r=G,Jt=fe,mn=ze,Oa([Fe,Ue])},gd=function(G){if(Bs[G])Ua.pop().restore();else{var fe=new gc,Fe="Xo"+(Object.keys(es).length+1).toString(10);fe.id=Fe,Bs[G]=Fe,es[Fe]=fe,Kr.publish("addFormObject",fe),Ua.pop().restore()}};for(var Jo in m.beginFormObject=function(G,fe,Fe,Ue,ze){return Fl(G,fe,Fe,Ue,ze),this},m.endFormObject=function(G){return gd(G),this},m.doFormObject=function(G,fe){var Fe=es[Bs[G]];return Ee("q"),Ee(fe.toString()+" cm"),Ee("/"+Fe.id+" Do"),Ee("Q"),this},m.getFormObject=function(G){var fe=es[Bs[G]];return{x:fe.x,y:fe.y,width:fe.width,height:fe.height,matrix:fe.matrix}},m.save=function(G,fe){return G=G||"generated.pdf",(fe=fe||{}).returnPromise=fe.returnPromise||!1,fe.returnPromise===!1?(_h(tu(Ko()),G),typeof _h.unload=="function"&&Tr.setTimeout&&setTimeout(_h.unload,911),this):new Promise(function(Fe,Ue){try{var ze=_h(tu(Ko()),G);typeof _h.unload=="function"&&Tr.setTimeout&&setTimeout(_h.unload,911),Fe(ze)}catch(lt){Ue(lt.message)}})},or.API)or.API.hasOwnProperty(Jo)&&(Jo==="events"&&or.API.events.length?function(G,fe){var Fe,Ue,ze;for(ze=fe.length-1;ze!==-1;ze--)Fe=fe[ze][0],Ue=fe[ze][1],G.subscribe.apply(G,[Fe].concat(typeof Ue=="function"?[Ue]:Ue))}(Kr,or.API.events):m[Jo]=or.API[Jo]);var Dl=m.getPageWidth=function(G){return(nr[G=G||W].mediaBox.topRightX-nr[G].mediaBox.bottomLeftX)/mt},xc=m.setPageWidth=function(G,fe){nr[G].mediaBox.topRightX=fe*mt+nr[G].mediaBox.bottomLeftX},Ya=m.getPageHeight=function(G){return(nr[G=G||W].mediaBox.topRightY-nr[G].mediaBox.bottomLeftY)/mt},au=m.setPageHeight=function(G,fe){nr[G].mediaBox.topRightY=fe*mt+nr[G].mediaBox.bottomLeftY};return m.internal={pdfEscape:xn,getStyle:ki,getFont:Qs,getFontSize:ot,getCharSpace:nu,getTextColor:ru,getLineHeight:dc,getLineHeightFactor:lo,getLineWidth:So,write:De,getHorizontalCoordinate:Wa,getVerticalCoordinate:Hs,getCoordinateString:md,getVerticalCoordinateString:Bl,collections:{},newObject:zn,newAdditionalObject:Be,newObjectDeferred:ts,newObjectDeferredBegin:me,getFilters:$e,putStream:nt,events:Kr,scaleFactor:mt,pageSize:{getWidth:function(){return Dl(W)},setWidth:function(G){xc(W,G)},getHeight:function(){return Ya(W)},setHeight:function(G){au(W,G)}},encryptionOptions:d,encryption:Gn,getEncryptor:Wo,output:$o,getNumberOfPages:Tn,pages:ce,out:Ee,f2:j,f3:R,getPageInfo:bo,getPageInfoByObjId:xr,getCurrentPageInfo:Co,getPDFVersion:x,Point:mc,Rectangle:su,Matrix:Gt,hasHotfix:wo},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Dl(W)},set:function(G){xc(W,G)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ya(W)},set:function(G){au(W,G)},enumerable:!0,configurable:!0}),oA.call(m,We),It="F1",El(s,r),Kr.publish("initialized"),m}Ep.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ep.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ep.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Ep.prototype.processOwnerPassword=function(t,e){return P5(M5(e).substr(0,5),t)},Ep.prototype.encryptor=function(t,e){var r=M5(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return P5(r,n)}},Nw.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Xn(t)!==Xn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},or.API={events:[]},or.version="2.5.2";var $s=or.API,E4=1,p0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ep=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Mr=function(t){return t.toFixed(2)},Wd=function(t){return t.toFixed(5)};$s.__acroform__={};var Go=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},R6=function(t){return t*E4},Fu=function(t){var e=new Rj,r=rr.internal.getHeight(t)||0,n=rr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Mr(n)),Number(Mr(r))],e},Qre=$s.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Hre=$s.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Vre=$s.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Aa=$s.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Vre(t,e-1)},da=$s.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Qre(t,e-1)},fa=$s.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Hre(t,e-1)},zre=$s.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],a=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=r(s)||0,l.lowerLeft_Y=n(a+o)||0,l.upperRight_X=r(s+i)||0,l.upperRight_Y=n(a)||0,[Number(Mr(l.lowerLeft_X)),Number(Mr(l.lowerLeft_Y)),Number(Mr(l.upperRight_X)),Number(Mr(l.upperRight_Y))]},Gre=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=O5(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Mr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Fu(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},O5=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(R){return R.split(`
`)}):s.map(function(R){return[R]});var a=r,i=rr.internal.getHeight(t)||0;i=i<0?-i:i;var o=rr.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(R,L,Q){if(R+1<s.length){var H=L+" "+s[R+1][0];return hy(H,t,Q).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var c,d,h=hy("3",t,a).height,p=t.multiline?i-a:(i-h)/2,m=p+=2,y=0,x=0,E=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+hy(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var S="",B=0,D=0;D<s.length;D++)if(s.hasOwnProperty(D)){var I=!1;if(s[D].length!==1&&E!==s[D].length-1){if((h+2)*(B+2)+2>i)continue e;S+=s[D][E],I=!0,x=D,D--}else{S=(S+=s[D][E]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var U=parseInt(D),F=l(U,S,a),C=D>=s.length-1;if(F&&!C){S+=" ",E=0;continue}if(F||C){if(C)x=U;else if(t.multiline&&(h+2)*(B+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(B+2)+2>i)continue e;x=U}}for(var _="",N=y;N<=x;N++){var j=s[N];if(t.multiline){if(N===x){_+=j[E]+" ",E=(E+1)%j.length;continue}if(N===y){_+=j[j.length-1]+" ";continue}}_+=j[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,d=hy(_,t,a).width,t.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;case"left":default:c=2}e+=Mr(c)+" "+Mr(m)+` Td
`,e+="("+p0(_)+`) Tj
`,e+=-Mr(c)+` 0 Td
`,m=-(a+2),d=0,y=I?x:x+1,B++,S=""}break}return n.text=e,n.fontSize=a,n},hy=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},qre={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Kre=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},$re=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),Xn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},Wre=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Wc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(qre)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");E4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Lj,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];a.objId=void 0,a.hasAnnotation&&Kre(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var a=!n;for(var i in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],l=[],c=o.Rect;if(o.Rect&&(o.Rect=zre(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=rr.createDefaultAppearanceStream(o),Xn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Gre(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var h="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var m=o.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var i in m)if(m.hasOwnProperty(i)){var y=m[i];typeof y=="function"&&(y=y.call(s,o)),h+="/"+i+" "+y+" ",s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y)}}else typeof(y=m)=="function"&&(y=y.call(s,o)),h+="/"+i+" "+y,s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}a&&$re(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},Dj=$s.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var s="[",a=0;a<t.length;a++)switch(a!==0&&(s+=" "),Xn(t[a])){case"boolean":case"number":case"object":s+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+p0(n(t[a].toString()))+")"):s+=t[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},U_=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+p0(n(t))+")"},ju=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ju.prototype.toString=function(){return this.objId+" 0 R"},ju.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ju.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:Dj(s,this.objId,this.scope)}):s instanceof ju?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var Rj=function(){ju.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Go(Rj,ju);var Lj=function(){ju.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+p0(r(t))+")"}},set:function(r){t=r}})};Go(Lj,ju);var Wc=function t(){ju.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');e=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Aa(e,3)},set:function(S){S?this.F=da(e,3):this.F=fa(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');r=S}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(S){n=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(S){n[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(S){n[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(S){n[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(S){n[3]=S}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Bw)return;a="FieldObject"+t.FieldNum++}var S=function(B){return B};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+p0(S(a))+")"},set:function(S){a=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(S){a=S}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(S){i=S}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/E4:c},set:function(S){c=S}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(S){d=S}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Bw||this instanceof jh))return U_(h,this.objId,this.scope)},set:function(S){S=S.toString(),h=S}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ai?p:U_(p,this.objId,this.scope)},set:function(S){S=S.toString(),p=this instanceof ai?S:S.substr(0,1)==="("?ep(S.substr(1,S.length-2)):ep(S)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ai?ep(p.substr(1,p.length-1)):p},set:function(S){S=S.toString(),p=this instanceof ai?"/"+S:S}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ai?m:U_(m,this.objId,this.scope)},set:function(S){S=S.toString(),m=this instanceof ai?S:S.substr(0,1)==="("?ep(S.substr(1,S.length-2)):ep(S)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ai?ep(m.substr(1,m.length-1)):m},set:function(S){S=S.toString(),m=this instanceof ai?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(S){S=!!S,x=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(S){y=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,1)},set:function(S){S?this.Ff=da(this.Ff,1):this.Ff=fa(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,2)},set:function(S){S?this.Ff=da(this.Ff,2):this.Ff=fa(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,3)},set:function(S){S?this.Ff=da(this.Ff,3):this.Ff=fa(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');E=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(E){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};Go(Wc,ju);var Qp=function(){Wc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Dj(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(a,i,o){o||(o=1);for(var l,c=[];l=i.exec(a);)c.push(l[o]);return c}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,18)},set:function(r){r?this.Ff=da(this.Ff,18):this.Ff=fa(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=da(this.Ff,19):this.Ff=fa(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,20)},set:function(r){r?(this.Ff=da(this.Ff,20),e.sort()):this.Ff=fa(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,22)},set:function(r){r?this.Ff=da(this.Ff,22):this.Ff=fa(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,23)},set:function(r){r?this.Ff=da(this.Ff,23):this.Ff=fa(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,27)},set:function(r){r?this.Ff=da(this.Ff,27):this.Ff=fa(this.Ff,27)}}),this.hasAppearanceStream=!1};Go(Qp,Wc);var Hp=function(){Qp.call(this),this.fontName="helvetica",this.combo=!1};Go(Hp,Qp);var Vp=function(){Hp.call(this),this.combo=!0};Go(Vp,Hp);var B2=function(){Vp.call(this),this.edit=!0};Go(B2,Vp);var ai=function(){Wc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,15)},set:function(r){r?this.Ff=da(this.Ff,15):this.Ff=fa(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,16)},set:function(r){r?this.Ff=da(this.Ff,16):this.Ff=fa(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,17)},set:function(r){r?this.Ff=da(this.Ff,17):this.Ff=fa(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,26)},set:function(r){r?this.Ff=da(this.Ff,26):this.Ff=fa(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+p0(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Xn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Go(ai,Wc);var k2=function(){ai.call(this),this.pushButton=!0};Go(k2,ai);var zp=function(){ai.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Go(zp,ai);var Bw=function(){var t,e;Wc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,i=[];for(a in i.push("<<"),n)i.push("/"+a+" ("+p0(s(n[a]))+")");return i.push(">>"),i.join(`
`)},set:function(s){Xn(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Go(Bw,Wc),zp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},zp.prototype.createOption=function(t){var e=new Bw;return e.Parent=this,e.optionName=t,this.Kids.push(e),Yre.call(this.scope,e),e};var I2=function(){ai.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rr.CheckBox.createAppearanceStream()};Go(I2,ai);var jh=function(){Wc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,13)},set:function(e){e?this.Ff=da(this.Ff,13):this.Ff=fa(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,21)},set:function(e){e?this.Ff=da(this.Ff,21):this.Ff=fa(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,23)},set:function(e){e?this.Ff=da(this.Ff,23):this.Ff=fa(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,24)},set:function(e){e?this.Ff=da(this.Ff,24):this.Ff=fa(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,25)},set:function(e){e?this.Ff=da(this.Ff,25):this.Ff=fa(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,26)},set:function(e){e?this.Ff=da(this.Ff,26):this.Ff=fa(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Go(jh,Wc);var F2=function(){jh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Aa(this.Ff,14)},set:function(t){t?this.Ff=da(this.Ff,14):this.Ff=fa(this.Ff,14)}}),this.password=!0};Go(F2,jh);var rr={CheckBox:{createAppearanceStream:function(){return{N:{On:rr.CheckBox.YesNormal},D:{On:rr.CheckBox.YesPushDown,Off:rr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Fu(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),a=O5(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Mr(rr.internal.getWidth(t))+" "+Mr(rr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Mr(a.fontSize)+" Tf "+s),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Fu(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],a=rr.internal.getHeight(t),i=rr.internal.getWidth(t),o=O5(t,t.caption);return s.push("1 g"),s.push("0 0 "+Mr(i)+" "+Mr(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Mr(i-1)+" "+Mr(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Mr(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Fu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Mr(rr.internal.getWidth(t))+" "+Mr(rr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Circle.YesNormal,e.D[t]=rr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Fu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=rr.internal.Bezier_C,a=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Wd(rr.internal.getWidth(t)/2)+" "+Wd(rr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Fu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*rr.internal.Bezier_C).toFixed(5)),i=Number((n*rr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wd(rr.internal.getWidth(t)/2)+" "+Wd(rr.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Wd(rr.internal.getWidth(t)/2)+" "+Wd(rr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Fu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*rr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wd(rr.internal.getWidth(t)/2)+" "+Wd(rr.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Cross.YesNormal,e.D[t]=rr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Fu(t);e.scope=t.scope;var r=[],n=rr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Mr(rr.internal.getWidth(t)-2)+" "+Mr(rr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Mr(n.x1.x)+" "+Mr(n.x1.y)+" m"),r.push(Mr(n.x2.x)+" "+Mr(n.x2.y)+" l"),r.push(Mr(n.x4.x)+" "+Mr(n.x4.y)+" m"),r.push(Mr(n.x3.x)+" "+Mr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Fu(t);e.scope=t.scope;var r=rr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Mr(rr.internal.getWidth(t))+" "+Mr(rr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Mr(rr.internal.getWidth(t)-2)+" "+Mr(rr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Mr(r.x1.x)+" "+Mr(r.x1.y)+" m"),n.push(Mr(r.x2.x)+" "+Mr(r.x2.y)+" l"),n.push(Mr(r.x4.x)+" "+Mr(r.x4.y)+" m"),n.push(Mr(r.x3.x)+" "+Mr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Fu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Mr(rr.internal.getWidth(t))+" "+Mr(rr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};rr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=rr.internal.getWidth(t),r=rr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},rr.internal.getWidth=function(t){var e=0;return Xn(t)==="object"&&(e=R6(t.Rect[2])),e},rr.internal.getHeight=function(t){var e=0;return Xn(t)==="object"&&(e=R6(t.Rect[3])),e};var Yre=$s.addField=function(t){if(Wre(this,t),!(t instanceof Wc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};$s.AcroFormChoiceField=Qp,$s.AcroFormListBox=Hp,$s.AcroFormComboBox=Vp,$s.AcroFormEditBox=B2,$s.AcroFormButton=ai,$s.AcroFormPushButton=k2,$s.AcroFormRadioButton=zp,$s.AcroFormCheckBox=I2,$s.AcroFormTextField=jh,$s.AcroFormPasswordField=F2,$s.AcroFormAppearance=rr,$s.AcroForm={ChoiceField:Qp,ListBox:Hp,ComboBox:Vp,EditBox:B2,Button:ai,PushButton:k2,RadioButton:zp,CheckBox:I2,TextField:jh,PasswordField:F2,Appearance:rr},or.AcroForm={ChoiceField:Qp,ListBox:Hp,ComboBox:Vp,EditBox:B2,Button:ai,PushButton:k2,RadioButton:zp,CheckBox:I2,TextField:jh,PasswordField:F2,Appearance:rr};or.AcroForm;function Uj(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(R,L){var Q,H,te,Y,re,V=e;if((L=L||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(F(R))for(re in r)for(te=r[re],Q=0;Q<te.length;Q+=1){for(Y=!0,H=0;H<te[Q].length;H+=1)if(te[Q][H]!==void 0&&te[Q][H]!==R[H]){Y=!1;break}if(Y===!0){V=re;break}}else for(re in r)for(te=r[re],Q=0;Q<te.length;Q+=1){for(Y=!0,H=0;H<te[Q].length;H+=1)if(te[Q][H]!==void 0&&te[Q][H]!==R.charCodeAt(H)){Y=!1;break}if(Y===!0){V=re;break}}return V===e&&L!==e&&(V=L),V},s=function R(L){for(var Q=this.internal.write,H=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:L.width}),Y.push({key:"Height",value:L.height}),L.colorSpace===E.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===E.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)){for(var re="",V=0,J=L.transparency.length;V<J;V++)re+=L.transparency[V]+" "+L.transparency[V]+" ";Y.push({key:"Mask",value:"["+re+"]"})}L.sMask!==void 0&&Y.push({key:"SMask",value:L.objectId+1+" 0 R"});var K=L.filter!==void 0?["/"+L.filter]:void 0;if(H({data:L.data,additionalKeyValues:Y,alreadyAppliedFilters:K,objectId:L.objectId}),Q("endobj"),"sMask"in L&&L.sMask!==void 0){var ae="/Predictor "+L.predictor+" /Colors 1 /BitsPerComponent "+L.bitsPerComponent+" /Columns "+L.width,O={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:L.bitsPerComponent,decodeParameters:ae,data:L.sMask};"filter"in L&&(O.filter=L.filter),R.call(this,O)}if(L.colorSpace===E.INDEXED){var W=this.internal.newObject();H({data:_(new Uint8Array(L.palette)),objectId:W}),Q("endobj")}},a=function(){var R=this.internal.collections.addImage_images;for(var L in R)s.call(this,R[L])},i=function(){var R,L=this.internal.collections.addImage_images,Q=this.internal.write;for(var H in L)Q("/I"+(R=L[H]).index,R.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var R=this.internal.collections.addImage_images;return o.call(this),R},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(R){return typeof t["process"+R.toUpperCase()]=="function"},h=function(R){return Xn(R)==="object"&&R.nodeType===1},p=function(R,L){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var Q=""+R.getAttribute("src");if(Q.indexOf("data:image/")===0)return vx(unescape(Q).split("base64,").pop());var H=t.loadFile(Q,!0);if(H!==void 0)return H}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var te;switch(L){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;case"JPEG":case"JPG":default:te="image/jpeg"}return vx(R.toDataURL(te,1).split("base64,").pop())}},m=function(R){var L=this.internal.collections.addImage_images;if(L){for(var Q in L)if(R===L[Q].alias)return L[Q]}},y=function(R,L,Q){return R||L||(R=-96,L=-96),R<0&&(R=-1*Q.width*72/R/this.internal.scaleFactor),L<0&&(L=-1*Q.height*72/L/this.internal.scaleFactor),R===0&&(R=L*Q.width/Q.height),L===0&&(L=R*Q.height/Q.width),[R,L]},x=function(R,L,Q,H,te,Y){var re=y.call(this,Q,H,te),V=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,K=l.call(this);if(Q=re[0],H=re[1],K[te.index]=te,Y){Y*=Math.PI/180;var ae=Math.cos(Y),O=Math.sin(Y),W=function(ne){return ne.toFixed(4)},Z=[W(ae),W(O),W(-1*O),W(ae),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,V(R),J(L+H),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([V(Q),"0","0",V(H),"0","0","cm"].join(" "))):this.internal.write([V(Q),"0","0",V(H),V(R),J(L+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},E=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=t.__addimage__.sHashCode=function(R){var L,Q,H=0;if(typeof R=="string")for(Q=R.length,L=0;L<Q;L++)H=(H<<5)-H+R.charCodeAt(L),H|=0;else if(F(R))for(Q=R.byteLength/2,L=0;L<Q;L++)H=(H<<5)-H+R[L],H|=0;return H},D=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var L=!0;return R.length===0&&(L=!1),R.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(L=!1),L},I=t.__addimage__.extractImageFromDataUrl=function(R){var L=(R=R||"").split("base64,"),Q=null;if(L.length===2){var H=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(L[0]);Array.isArray(H)&&(Q={mimeType:H[1],charset:H[2],data:L[1]})}return Q},U=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(R){return U()&&R instanceof ArrayBuffer};var F=t.__addimage__.isArrayBufferView=function(R){return U()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},C=t.__addimage__.binaryStringToUint8Array=function(R){for(var L=R.length,Q=new Uint8Array(L),H=0;H<L;H++)Q[H]=R.charCodeAt(H);return Q},_=t.__addimage__.arrayBufferToBinaryString=function(R){for(var L="",Q=F(R)?R:new Uint8Array(R),H=0;H<Q.length;H+=8192)L+=String.fromCharCode.apply(null,Q.subarray(H,H+8192));return L};t.addImage=function(){var R,L,Q,H,te,Y,re,V,J;if(typeof arguments[1]=="number"?(L=e,Q=arguments[1],H=arguments[2],te=arguments[3],Y=arguments[4],re=arguments[5],V=arguments[6],J=arguments[7]):(L=arguments[1],Q=arguments[2],H=arguments[3],te=arguments[4],Y=arguments[5],re=arguments[6],V=arguments[7],J=arguments[8]),Xn(R=arguments[0])==="object"&&!h(R)&&"imageData"in R){var K=R;R=K.imageData,L=K.format||L||e,Q=K.x||Q||0,H=K.y||H||0,te=K.w||K.width||te,Y=K.h||K.height||Y,re=K.alias||re,V=K.compression||V,J=K.rotation||K.angle||J}var ae=this.internal.getFilters();if(V===void 0&&ae.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(Q)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var O=N.call(this,R,L,re,V);return x.call(this,Q,H,te,Y,O,J),this};var N=function(R,L,Q,H){var te,Y,re;if(typeof R=="string"&&n(R)===e){R=unescape(R);var V=j(R,!1);(V!==""||(V=t.loadFile(R,!0))!==void 0)&&(R=V)}if(h(R)&&(R=p(R,L)),L=n(R,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((re=Q)==null||re.length===0)&&(Q=function(J){return typeof J=="string"||F(J)?B(J):F(J.data)?B(J.data):null}(R)),(te=m.call(this,Q))||(U()&&(R instanceof Uint8Array||L==="RGBA"||(Y=R,R=C(R))),te=this["process"+L.toUpperCase()](R,c.call(this),Q,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in t.image_compression?J:S.NONE}(H),Y)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},j=t.__addimage__.convertBase64ToBinaryString=function(R,L){var Q;L=typeof L!="boolean"||L;var H,te="";if(typeof R=="string"){H=(Q=I(R))!==null?Q.data:R;try{te=vx(H)}catch(Y){if(L)throw D(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};t.getImageProperties=function(R){var L,Q,H="";if(h(R)&&(R=p(R)),typeof R=="string"&&n(R)===e&&((H=j(R,!1))===""&&(H=t.loadFile(R)||""),R=H),Q=n(R),!d(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(!U()||R instanceof Uint8Array||(R=C(R)),!(L=this["process"+Q.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=Q,L}})(or.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};or.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,a,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,d=!1,h=0;h<c.length&&!d;h++)switch((n=c[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){n=c[p];var m=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(x.objId),B=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+m(S(n.contents))+")",a+=" /Popup "+E.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+m(S(B))+") >>",x.content=a;var D=x.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+D,n.open&&(a+=" /Open true"),a+=" >>",E.content=a,this.internal.write(x.objId,"0 R",E.objId,"0 R");break;case"freetext":s="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var I=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(y(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+I+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var U=this.annotations._nameMap[n.options.name];n.options.pageNumber=U.page,n.options.top=U.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var F=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+F+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,a,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+s),h:c(n+a)},options:i,type:"link"})},t.textWithLink=function(r,n,s,a){var i,o,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(c*d)}else o=l,i=c;return this.text(r,n,s,a),s+=.2*c,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,s-c,o,i,a),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(or.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=t.__arabicParser__.isArabicEndLetter=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(x){return i(x)&&s.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(x){var E=0,S=r,B="",D=0;for(E=0;E<x.length;E+=1)S[x.charCodeAt(E)]!==void 0?(D++,typeof(S=S[x.charCodeAt(E)])=="number"&&(B+=String.fromCharCode(S),S=r,D=0),E===x.length-1&&(S=r,B+=x.charAt(E-(D-1)),E-=D-1,D=0)):(S=r,B+=x.charAt(E-D),E-=D,D=0);return B};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(x,E,S){return i(x)?a(x)===!1?-1:!c(x)||!i(E)&&!i(S)||!i(S)&&o(E)||o(x)&&!i(E)||o(x)&&l(E)||o(x)&&o(E)?0:d(x)&&i(E)&&!o(E)&&i(S)&&c(S)?3:o(x)||!i(S)?1:2:-1},m=function(x){var E=0,S=0,B=0,D="",I="",U="",F=(x=x||"").split("\\s+"),C=[];for(E=0;E<F.length;E+=1){for(C.push(""),S=0;S<F[E].length;S+=1)D=F[E][S],I=F[E][S-1],U=F[E][S+1],i(D)?(B=p(D,I,U),C[E]+=B!==-1?String.fromCharCode(e[D.charCodeAt(0)][B]):D):C[E]+=D;C[E]=h(C[E])}return C.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var x,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(E)){var B=0;for(S=[],B=0;B<E.length;B+=1)Array.isArray(E[B])?S.push([m(E[B][0]),E[B][1],E[B][2]]):S.push([m(E[B])]);x=S}else x=m(E);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",y])}(or.API),or.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(or.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(x){y=x}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,m=0,y=0,x=0,E=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var S=c.maxWidth;S>0?typeof l=="string"?l=this.splitTextToSize(l,S):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(D,I){return D.concat(E.splitTextToSize(I,S))},[])):l=Array.isArray(l)?l:[l];for(var B=0;B<l.length;B++)m<(x=this.getStringUnitWidth(l[B],{font:h})*d)&&(m=x);return m!==0&&(y=l.length),{w:m/=p,h:Math.max((y*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,m&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,h,p){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,y,x,E,S=[],B=[],D=[],I={},U={},F=[],C=[],_=(p=p||{}).autoSize||!1,N=p.printHeaders!==!1,j=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,R=p.margins||Object.assign({width:this.getPageWidth()},e),L=typeof p.padding=="number"?p.padding:3,Q=p.headerBackgroundColor||"#c8c8c8",H=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=H,this.setFontSize(j),h==null)B=S=Object.keys(d[0]),D=S.map(function(){return"left"});else if(Array.isArray(h)&&Xn(h[0])==="object")for(S=h.map(function(K){return K.name}),B=h.map(function(K){return K.prompt||K.name||""}),D=h.map(function(K){return K.align||"left"}),m=0;m<h.length;m+=1)U[h[m].name]=h[m].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(B=S=h,D=S.map(function(){return"left"}));if(_||Array.isArray(h)&&typeof h[0]=="string")for(m=0;m<S.length;m+=1){for(I[E=S[m]]=d.map(function(K){return K[E]}),this.setFont(void 0,"bold"),F.push(this.getTextDimensions(B[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=I[E],this.setFont(void 0,"normal"),x=0;x<y.length;x+=1)F.push(this.getTextDimensions(y[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);U[E]=Math.max.apply(null,F)+L+L,F=[]}if(N){var te={};for(m=0;m<S.length;m+=1)te[S[m]]={},te[S[m]].text=B[m],te[S[m]].align=D[m];var Y=o.call(this,te,U);C=S.map(function(K){return new a(l,c,U[K],Y,te[K].text,void 0,te[K].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var re=h.reduce(function(K,ae){return K[ae.name]=ae.align,K},{});for(m=0;m<d.length;m+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:m,data:d[m]},this);var V=o.call(this,d[m],U);for(x=0;x<S.length;x+=1){var J=d[m][S[x]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:m,col:x,data:J},this),i.call(this,new a(l,c,U[S[x]],V,J,m+2,re[S[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(m){var y=l[m];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*h/p+d+d},this).reduce(function(m,y){return Math.max(m,y)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(y)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(or.API);var Mj={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Pj=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],j5=Uj(Pj),Oj=[100,200,300,400,500,600,700,800,900],Xre=Uj(Oj);function Q5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return Mj[a=a||"normal"]?a:"normal"}(t.style),n=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(a){return typeof j5[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function L6(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Jre={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},U6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function M6(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Zre(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},Jre,r.genericFontFamilies||{}),a=null,i=null,o=0;o<e.length;++o)if(s[(a=Q5(e[o])).family]&&(a.family=s[a.family]),t.hasOwnProperty(a.family)){i=t[a.family];break}if(!(i=i||t[n]))throw new Error("Could not find a font-family for the rule '"+M6(a)+"' and default family '"+n+"'.");if(i=function(l,c){if(c[l])return c[l];var d=j5[l],h=d<=j5.normal?-1:1,p=L6(c,Pj,d,h);if(!p)throw new Error("Could not find a matching font-stretch value for "+l);return p}(a.stretch,i),i=function(l,c){if(c[l])return c[l];for(var d=Mj[l],h=0;h<d.length;++h)if(c[d[h]])return c[d[h]];throw new Error("Could not find a matching font-style for "+l)}(a.style,i),!(i=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=Xre[l],h=L6(c,Oj,d,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+M6(a)+"'.");return i}function P6(t){return t.trimLeft()}function ene(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function tne(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var py,O6,j6,M_=["times"];(function(t){var e,r,n,s,a,i,o,l,c,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new l,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new i,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new i,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var h=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=O;Object.defineProperty(this,"pdf",{get:function(){return W}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Ie){Z=!!Ie}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(Ie){ne=!!Ie}});var le=0;Object.defineProperty(this,"posX",{get:function(){return le},set:function(Ie){isNaN(Ie)||(le=Ie)}});var ve=0;Object.defineProperty(this,"posY",{get:function(){return ve},set:function(Ie){isNaN(Ie)||(ve=Ie)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Ie){var Ee;typeof Ie=="number"?Ee=[Ie,Ie,Ie,Ie]:((Ee=new Array(4))[0]=Ie[0],Ee[1]=Ie.length>=2?Ie[1]:Ee[0],Ee[2]=Ie.length>=3?Ie[2]:Ee[0],Ee[3]=Ie.length>=4?Ie[3]:Ee[1]),c.margin=Ee}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(Ie){pe=Ie}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(Ie){he=Ie}});var de=[];Object.defineProperty(this,"pageBreaks",{get:function(){return de},set:function(Ie){de=Ie}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Ie){Ie instanceof d&&(c=Ie)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Ie){c.path=Ie}});var ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return ce},set:function(Ie){ce=Ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ie){var Ee;Ee=p(Ie),this.ctx.fillStyle=Ee.style,this.ctx.isFillTransparent=Ee.a===0,this.ctx.fillOpacity=Ee.a,this.pdf.setFillColor(Ee.r,Ee.g,Ee.b,{a:Ee.a}),this.pdf.setTextColor(Ee.r,Ee.g,Ee.b,{a:Ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ie){var Ee=p(Ie);this.ctx.strokeStyle=Ee.style,this.ctx.isStrokeTransparent=Ee.a===0,this.ctx.strokeOpacity=Ee.a,Ee.a===0?this.pdf.setDrawColor(255,255,255):(Ee.a,this.pdf.setDrawColor(Ee.r,Ee.g,Ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ie){["butt","round","square"].indexOf(Ie)!==-1&&(this.ctx.lineCap=Ie,this.pdf.setLineCap(Ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ie){isNaN(Ie)||(this.ctx.lineWidth=Ie,this.pdf.setLineWidth(Ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ie){["bevel","round","miter"].indexOf(Ie)!==-1&&(this.ctx.lineJoin=Ie,this.pdf.setLineJoin(Ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ie){isNaN(Ie)||(this.ctx.miterLimit=Ie,this.pdf.setMiterLimit(Ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ie){this.ctx.textBaseline=Ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ie){["right","end","center","left","start"].indexOf(Ie)!==-1&&(this.ctx.textAlign=Ie)}});var oe=null;function Re(Ie,Ee){if(oe===null){var De=function(je){var We=[];return Object.keys(je).forEach(function(ct){je[ct].forEach(function(wt){var ot=null;switch(wt){case"bold":ot={family:ct,weight:"bold"};break;case"italic":ot={family:ct,style:"italic"};break;case"bolditalic":ot={family:ct,weight:"bold",style:"italic"};break;case"":case"normal":ot={family:ct}}ot!==null&&(ot.ref={name:ct,style:wt},We.push(ot))})}),We}(Ie.getFontList());oe=function(je){for(var We={},ct=0;ct<je.length;++ct){var wt=Q5(je[ct]),ot=wt.family,Dt=wt.stretch,Rt=wt.style,Yt=wt.weight;We[ot]=We[ot]||{},We[ot][Dt]=We[ot][Dt]||{},We[ot][Dt][Rt]=We[ot][Dt][Rt]||{},We[ot][Dt][Rt][Yt]=wt}return We}(De.concat(Ee))}return oe}var qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return qe},set:function(Ie){oe=null,qe=Ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ie){var Ee;if(this.ctx.font=Ie,(Ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ie))!==null){var De=Ee[1],je=(Ee[2],Ee[3]),We=Ee[4],ct=(Ee[5],Ee[6]),wt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(wt==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:wt==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var ot=function(kt){var It,mt,_r=[],Jt=kt.trim();if(Jt==="")return M_;if(Jt in U6)return[U6[Jt]];for(;Jt!=="";){switch(mt=null,It=(Jt=P6(Jt)).charAt(0)){case'"':case"'":mt=ene(Jt.substring(1),It);break;default:mt=tne(Jt)}if(mt===null||(_r.push(mt[0]),(Jt=P6(mt[1]))!==""&&Jt.charAt(0)!==","))return M_;Jt=Jt.replace(/^,/,"")}return _r}(ct);if(this.fontFaces){var Dt=Zre(Re(this.pdf,this.fontFaces),ot.map(function(kt){return{family:kt,stretch:"normal",weight:je,style:De}}));this.pdf.setFont(Dt.ref.name,Dt.ref.style)}else{var Rt="";(je==="bold"||parseInt(je,10)>=700||De==="bold")&&(Rt="bold"),De==="italic"&&(Rt+="italic"),Rt.length===0&&(Rt="normal");for(var Yt="",Lt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Qt=0;Qt<ot.length;Qt++){if(this.pdf.internal.getFont(ot[Qt],Rt,{noFallback:!0,disableWarning:!0})!==void 0){Yt=ot[Qt];break}if(Rt==="bolditalic"&&this.pdf.internal.getFont(ot[Qt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Yt=ot[Qt],Rt="bold";else if(this.pdf.internal.getFont(ot[Qt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Yt=ot[Qt],Rt="normal";break}}if(Yt===""){for(var qt=0;qt<ot.length;qt++)if(Lt[ot[qt]]){Yt=Lt[ot[qt]];break}}Yt=Yt===""?"Times":Yt,this.pdf.setFont(Yt,Rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ie){this.ctx.globalCompositeOperation=Ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ie){this.ctx.globalAlpha=Ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ie){this.ctx.lineDashOffset=Ie,ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ie){this.ctx.lineDash=Ie,ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ie){this.ctx.ignoreClearRect=!!Ie}})};h.prototype.setLineDash=function(O){this.lineDash=O},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){I.call(this,"fill",!1)},h.prototype.stroke=function(){I.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(O,W){if(isNaN(O)||isNaN(W))throw us.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new i(O,W));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(O,W)},h.prototype.closePath=function(){var O=new i(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&Xn(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){O=new i(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(O.x,O.y)},h.prototype.lineTo=function(O,W){if(isNaN(O)||isNaN(W))throw us.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new i(O,W));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(Z.x,Z.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),I.call(this,null,!0)},h.prototype.quadraticCurveTo=function(O,W,Z,ne){if(isNaN(Z)||isNaN(ne)||isNaN(O)||isNaN(W))throw us.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var le=this.ctx.transform.applyToPoint(new i(Z,ne)),ve=this.ctx.transform.applyToPoint(new i(O,W));this.path.push({type:"qct",x1:ve.x,y1:ve.y,x:le.x,y:le.y}),this.ctx.lastPoint=new i(le.x,le.y)},h.prototype.bezierCurveTo=function(O,W,Z,ne,le,ve){if(isNaN(le)||isNaN(ve)||isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(ne))throw us.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new i(le,ve)),he=this.ctx.transform.applyToPoint(new i(O,W)),de=this.ctx.transform.applyToPoint(new i(Z,ne));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:de.x,y2:de.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new i(pe.x,pe.y)},h.prototype.arc=function(O,W,Z,ne,le,ve){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(ne)||isNaN(le))throw us.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ve=!!ve,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new i(O,W));O=pe.x,W=pe.y;var he=this.ctx.transform.applyToPoint(new i(0,Z)),de=this.ctx.transform.applyToPoint(new i(0,0));Z=Math.sqrt(Math.pow(he.x-de.x,2)+Math.pow(he.y-de.y,2))}Math.abs(le-ne)>=2*Math.PI&&(ne=0,le=2*Math.PI),this.path.push({type:"arc",x:O,y:W,radius:Z,startAngle:ne,endAngle:le,counterclockwise:ve})},h.prototype.arcTo=function(O,W,Z,ne,le){throw new Error("arcTo not implemented.")},h.prototype.rect=function(O,W,Z,ne){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(ne))throw us.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,W),this.lineTo(O+Z,W),this.lineTo(O+Z,W+ne),this.lineTo(O,W+ne),this.lineTo(O,W),this.lineTo(O+Z,W),this.lineTo(O,W)},h.prototype.fillRect=function(O,W,Z,ne){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(ne))throw us.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var le={};this.lineCap!=="butt"&&(le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,W,Z,ne),this.fill(),le.hasOwnProperty("lineCap")&&(this.lineCap=le.lineCap),le.hasOwnProperty("lineJoin")&&(this.lineJoin=le.lineJoin)}},h.prototype.strokeRect=function(O,W,Z,ne){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(ne))throw us.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(O,W,Z,ne),this.stroke())},h.prototype.clearRect=function(O,W,Z,ne){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(ne))throw us.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,W,Z,ne))},h.prototype.save=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},h.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(W),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(O){var W,Z,ne,le;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))W=0,Z=0,ne=0,le=0;else{var ve=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(ve!==null)W=parseInt(ve[1]),Z=parseInt(ve[2]),ne=parseInt(ve[3]),le=1;else if((ve=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)W=parseInt(ve[1]),Z=parseInt(ve[2]),ne=parseInt(ve[3]),le=parseFloat(ve[4]);else{if(le=1,typeof O=="string"&&O.charAt(0)!=="#"){var pe=new kj(O);O=pe.ok?pe.toHex():"#000000"}O.length===4?(W=O.substring(1,2),W+=W,Z=O.substring(2,3),Z+=Z,ne=O.substring(3,4),ne+=ne):(W=O.substring(1,3),Z=O.substring(3,5),ne=O.substring(5,7)),W=parseInt(W,16),Z=parseInt(Z,16),ne=parseInt(ne,16)}}return{r:W,g:Z,b:ne,a:le,style:O}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(O,W,Z,ne){if(isNaN(W)||isNaN(Z)||typeof O!="string")throw us.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!m.call(this)){var le=V(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;L.call(this,{text:O,x:W,y:Z,scale:ve,angle:le,align:this.textAlign,maxWidth:ne})}},h.prototype.strokeText=function(O,W,Z,ne){if(isNaN(W)||isNaN(Z)||typeof O!="string")throw us.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){ne=isNaN(ne)?void 0:ne;var le=V(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;L.call(this,{text:O,x:W,y:Z,scale:ve,renderingMode:"stroke",angle:le,align:this.textAlign,maxWidth:ne})}},h.prototype.measureText=function(O){if(typeof O!="string")throw us.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,Z=this.pdf.internal.scaleFactor,ne=W.internal.getFontSize(),le=W.getStringUnitWidth(O)*ne/W.internal.scaleFactor,ve=function(pe){var he=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this};return new ve({width:le*=Math.round(96*Z/72*1e4)/1e4})},h.prototype.scale=function(O,W){if(isNaN(O)||isNaN(W))throw us.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(O,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.rotate=function(O){if(isNaN(O))throw us.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.translate=function(O,W){if(isNaN(O)||isNaN(W))throw us.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,O,W);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.transform=function(O,W,Z,ne,le,ve){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(ne)||isNaN(le)||isNaN(ve))throw us.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new l(O,W,Z,ne,le,ve);this.ctx.transform=this.ctx.transform.multiply(pe)},h.prototype.setTransform=function(O,W,Z,ne,le,ve){O=isNaN(O)?1:O,W=isNaN(W)?0:W,Z=isNaN(Z)?0:Z,ne=isNaN(ne)?1:ne,le=isNaN(le)?0:le,ve=isNaN(ve)?0:ve,this.ctx.transform=new l(O,W,Z,ne,le,ve)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(O,W,Z,ne,le,ve,pe,he,de){var ce=this.pdf.getImageProperties(O),oe=1,Re=1,qe=1,Ie=1;ne!==void 0&&he!==void 0&&(qe=he/ne,Ie=de/le,oe=ce.width/ne*he/ne,Re=ce.height/le*de/le),ve===void 0&&(ve=W,pe=Z,W=0,Z=0),ne!==void 0&&he===void 0&&(he=ne,de=le),ne===void 0&&he===void 0&&(he=ce.width,de=ce.height);for(var Ee,De=this.ctx.transform.decompose(),je=V(De.rotate.shx),We=new l,ct=(We=(We=(We=We.multiply(De.translate)).multiply(De.skew)).multiply(De.scale)).applyToRectangle(new o(ve-W*qe,pe-Z*Ie,ne*oe,le*Re)),wt=E.call(this,ct),ot=[],Dt=0;Dt<wt.length;Dt+=1)ot.indexOf(wt[Dt])===-1&&ot.push(wt[Dt]);if(D(ot),this.autoPaging)for(var Rt=ot[0],Yt=ot[ot.length-1],Lt=Rt;Lt<Yt+1;Lt++){this.pdf.setPage(Lt);var Qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qt=Lt===1?this.posY+this.margin[0]:this.margin[0],kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=Lt===1?0:kt+(Lt-2)*It;if(this.ctx.clip_path.length!==0){var _r=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Ee,this.posX+this.margin[3],-mt+qt+this.ctx.prevPageLastElemOffset),U.call(this,"fill",!0),this.path=_r}var Jt=JSON.parse(JSON.stringify(ct));Jt=B([Jt],this.posX+this.margin[3],-mt+qt+this.ctx.prevPageLastElemOffset)[0];var mn=(Lt>Rt||Lt<Yt)&&x.call(this);mn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qt,It,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,je),mn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",ct.x,ct.y,ct.w,ct.h,null,null,je)};var E=function(O,W,Z){var ne=[];W=W||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var le=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":ne.push(Math.floor((O.y+le)/Z)+1);break;case"arc":ne.push(Math.floor((O.y+le-O.radius)/Z)+1),ne.push(Math.floor((O.y+le+O.radius)/Z)+1);break;case"qct":var ve=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);ne.push(Math.floor((ve.y+le)/Z)+1),ne.push(Math.floor((ve.y+ve.h+le)/Z)+1);break;case"bct":var pe=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);ne.push(Math.floor((pe.y+le)/Z)+1),ne.push(Math.floor((pe.y+pe.h+le)/Z)+1);break;case"rect":ne.push(Math.floor((O.y+le)/Z)+1),ne.push(Math.floor((O.y+O.h+le)/Z)+1)}for(var he=0;he<ne.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<ne[he];)S.call(this);return ne},S=function(){var O=this.fillStyle,W=this.strokeStyle,Z=this.font,ne=this.lineCap,le=this.lineWidth,ve=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=W,this.font=Z,this.lineCap=ne,this.lineWidth=le,this.lineJoin=ve},B=function(O,W,Z){for(var ne=0;ne<O.length;ne++)switch(O[ne].type){case"bct":O[ne].x2+=W,O[ne].y2+=Z;case"qct":O[ne].x1+=W,O[ne].y1+=Z;case"mt":case"lt":case"arc":default:O[ne].x+=W,O[ne].y+=Z}return O},D=function(O){return O.sort(function(W,Z){return W-Z})},I=function(O,W){for(var Z,ne,le=this.fillStyle,ve=this.strokeStyle,pe=this.lineCap,he=this.lineWidth,de=Math.abs(he*this.ctx.transform.scaleX),ce=this.lineJoin,oe=JSON.parse(JSON.stringify(this.path)),Re=JSON.parse(JSON.stringify(this.path)),qe=[],Ie=0;Ie<Re.length;Ie++)if(Re[Ie].x!==void 0)for(var Ee=E.call(this,Re[Ie]),De=0;De<Ee.length;De+=1)qe.indexOf(Ee[De])===-1&&qe.push(Ee[De]);for(var je=0;je<qe.length;je++)for(;this.pdf.internal.getNumberOfPages()<qe[je];)S.call(this);if(D(qe),this.autoPaging)for(var We=qe[0],ct=qe[qe.length-1],wt=We;wt<ct+1;wt++){this.pdf.setPage(wt),this.fillStyle=le,this.strokeStyle=ve,this.lineCap=pe,this.lineWidth=de,this.lineJoin=ce;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dt=wt===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Lt=wt===1?0:Rt+(wt-2)*Yt;if(this.ctx.clip_path.length!==0){var Qt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Z,this.posX+this.margin[3],-Lt+Dt+this.ctx.prevPageLastElemOffset),U.call(this,O,!0),this.path=Qt}if(ne=JSON.parse(JSON.stringify(oe)),this.path=B(ne,this.posX+this.margin[3],-Lt+Dt+this.ctx.prevPageLastElemOffset),W===!1||wt===0){var qt=(wt>We||wt<ct)&&x.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Yt,null).clip().discardPath()),U.call(this,O,W),qt&&this.pdf.restoreGraphicsState()}this.lineWidth=he}else this.lineWidth=de,U.call(this,O,W),this.lineWidth=he;this.path=oe},U=function(O,W){if((O!=="stroke"||W||!y.call(this))&&(O==="stroke"||W||!m.call(this))){for(var Z,ne,le=[],ve=this.path,pe=0;pe<ve.length;pe++){var he=ve[pe];switch(he.type){case"begin":le.push({begin:!0});break;case"close":le.push({close:!0});break;case"mt":le.push({start:he,deltas:[],abs:[]});break;case"lt":var de=le.length;if(ve[pe-1]&&!isNaN(ve[pe-1].x)&&(Z=[he.x-ve[pe-1].x,he.y-ve[pe-1].y],de>0)){for(;de>=0;de--)if(le[de-1].close!==!0&&le[de-1].begin!==!0){le[de-1].deltas.push(Z),le[de-1].abs.push(he);break}}break;case"bct":Z=[he.x1-ve[pe-1].x,he.y1-ve[pe-1].y,he.x2-ve[pe-1].x,he.y2-ve[pe-1].y,he.x-ve[pe-1].x,he.y-ve[pe-1].y],le[le.length-1].deltas.push(Z);break;case"qct":var ce=ve[pe-1].x+2/3*(he.x1-ve[pe-1].x),oe=ve[pe-1].y+2/3*(he.y1-ve[pe-1].y),Re=he.x+2/3*(he.x1-he.x),qe=he.y+2/3*(he.y1-he.y),Ie=he.x,Ee=he.y;Z=[ce-ve[pe-1].x,oe-ve[pe-1].y,Re-ve[pe-1].x,qe-ve[pe-1].y,Ie-ve[pe-1].x,Ee-ve[pe-1].y],le[le.length-1].deltas.push(Z);break;case"arc":le.push({deltas:[],abs:[],arc:!0}),Array.isArray(le[le.length-1].abs)&&le[le.length-1].abs.push(he)}}ne=W?null:O==="stroke"?"stroke":"fill";for(var De=!1,je=0;je<le.length;je++)if(le[je].arc)for(var We=le[je].abs,ct=0;ct<We.length;ct++){var wt=We[ct];wt.type==="arc"?_.call(this,wt.x,wt.y,wt.radius,wt.startAngle,wt.endAngle,wt.counterclockwise,void 0,W,!De):Q.call(this,wt.x,wt.y),De=!0}else if(le[je].close===!0)this.pdf.internal.out("h"),De=!1;else if(le[je].begin!==!0){var ot=le[je].start.x,Dt=le[je].start.y;H.call(this,le[je].deltas,ot,Dt),De=!0}ne&&N.call(this,ne),W&&j.call(this)}},F=function(O){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-Z;case"top":return O+W-Z;case"hanging":return O+W-2*Z;case"middle":return O+W/2-Z;case"ideographic":return O;case"alphabetic":default:return O}},C=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(W,Z){this.colorStops.push([W,Z])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(O,W,Z,ne,le,ve,pe,he,de){for(var ce=Y.call(this,Z,ne,le,ve),oe=0;oe<ce.length;oe++){var Re=ce[oe];oe===0&&(de?R.call(this,Re.x1+O,Re.y1+W):Q.call(this,Re.x1+O,Re.y1+W)),te.call(this,O,W,Re.x2,Re.y2,Re.x3,Re.y3,Re.x4,Re.y4)}he?j.call(this):N.call(this,pe)},N=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},j=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(O,W){this.pdf.internal.out(r(O)+" "+n(W)+" m")},L=function(O){var W;switch(O.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var Z=this.pdf.getTextDimensions(O.text),ne=F.call(this,O.y),le=C.call(this,ne)-Z.h,ve=this.ctx.transform.applyToPoint(new i(O.x,ne)),pe=this.ctx.transform.decompose(),he=new l;he=(he=(he=he.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale);for(var de,ce,oe,Re=this.ctx.transform.applyToRectangle(new o(O.x,ne,Z.w,Z.h)),qe=he.applyToRectangle(new o(O.x,le,Z.w,Z.h)),Ie=E.call(this,qe),Ee=[],De=0;De<Ie.length;De+=1)Ee.indexOf(Ie[De])===-1&&Ee.push(Ie[De]);if(D(Ee),this.autoPaging)for(var je=Ee[0],We=Ee[Ee.length-1],ct=je;ct<We+1;ct++){this.pdf.setPage(ct);var wt=ct===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[2],Rt=Dt-this.margin[0],Yt=this.pdf.internal.pageSize.width-this.margin[1],Lt=Yt-this.margin[3],Qt=ct===1?0:ot+(ct-2)*Rt;if(this.ctx.clip_path.length!==0){var qt=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(de,this.posX+this.margin[3],-1*Qt+wt),U.call(this,"fill",!0),this.path=qt}var kt=B([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-Qt+wt+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ce*O.scale),oe=this.lineWidth,this.lineWidth=oe*O.scale);var It=this.autoPaging!=="text";if(It||kt.y+kt.h<=Dt){if(It||kt.y>=wt&&kt.x<=Yt){var mt=It?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Yt-kt.x)[0],_r=B([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-Qt+wt+this.ctx.prevPageLastElemOffset)[0],Jt=It&&(ct>je||ct<We)&&x.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,Rt,null).clip().discardPath()),this.pdf.text(mt,_r.x,_r.y,{angle:O.angle,align:W,renderingMode:O.renderingMode}),Jt&&this.pdf.restoreGraphicsState()}}else kt.y<Dt&&(this.ctx.prevPageLastElemOffset+=Dt-kt.y);O.scale>=.01&&(this.pdf.setFontSize(ce),this.lineWidth=oe)}else O.scale>=.01&&(ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ce*O.scale),oe=this.lineWidth,this.lineWidth=oe*O.scale),this.pdf.text(O.text,ve.x+this.posX,ve.y+this.posY,{angle:O.angle,align:W,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(ce),this.lineWidth=oe)},Q=function(O,W,Z,ne){Z=Z||0,ne=ne||0,this.pdf.internal.out(r(O+Z)+" "+n(W+ne)+" l")},H=function(O,W,Z){return this.pdf.lines(O,W,Z,null,null)},te=function(O,W,Z,ne,le,ve,pe,he){this.pdf.internal.out([e(s(Z+O)),e(a(ne+W)),e(s(le+O)),e(a(ve+W)),e(s(pe+O)),e(a(he+W)),"c"].join(" "))},Y=function(O,W,Z,ne){for(var le=2*Math.PI,ve=Math.PI/2;W>Z;)W-=le;var pe=Math.abs(Z-W);pe<le&&ne&&(pe=le-pe);for(var he=[],de=ne?-1:1,ce=W;pe>1e-5;){var oe=ce+de*Math.min(pe,ve);he.push(re.call(this,O,ce,oe)),pe-=Math.abs(oe-ce),ce=oe}return he},re=function(O,W,Z){var ne=(Z-W)/2,le=O*Math.cos(ne),ve=O*Math.sin(ne),pe=le,he=-ve,de=pe*pe+he*he,ce=de+pe*le+he*ve,oe=4/3*(Math.sqrt(2*de*ce)-ce)/(pe*ve-he*le),Re=pe-oe*he,qe=he+oe*pe,Ie=Re,Ee=-qe,De=ne+W,je=Math.cos(De),We=Math.sin(De);return{x1:O*Math.cos(W),y1:O*Math.sin(W),x2:Re*je-qe*We,y2:Re*We+qe*je,x3:Ie*je-Ee*We,y3:Ie*We+Ee*je,x4:O*Math.cos(Z),y4:O*Math.sin(Z)}},V=function(O){return 180*O/Math.PI},J=function(O,W,Z,ne,le,ve){var pe=O+.5*(Z-O),he=W+.5*(ne-W),de=le+.5*(Z-le),ce=ve+.5*(ne-ve),oe=Math.min(O,le,pe,de),Re=Math.max(O,le,pe,de),qe=Math.min(W,ve,he,ce),Ie=Math.max(W,ve,he,ce);return new o(oe,qe,Re-oe,Ie-qe)},K=function(O,W,Z,ne,le,ve,pe,he){var de,ce,oe,Re,qe,Ie,Ee,De,je,We,ct,wt,ot,Dt,Rt=Z-O,Yt=ne-W,Lt=le-Z,Qt=ve-ne,qt=pe-le,kt=he-ve;for(ce=0;ce<41;ce++)je=(Ee=(oe=O+(de=ce/40)*Rt)+de*((qe=Z+de*Lt)-oe))+de*(qe+de*(le+de*qt-qe)-Ee),We=(De=(Re=W+de*Yt)+de*((Ie=ne+de*Qt)-Re))+de*(Ie+de*(ve+de*kt-Ie)-De),ce==0?(ct=je,wt=We,ot=je,Dt=We):(ct=Math.min(ct,je),wt=Math.min(wt,We),ot=Math.max(ot,je),Dt=Math.max(Dt,We));return new o(Math.round(ct),Math.round(wt),Math.round(ot-ct),Math.round(Dt-wt))},ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,W,Z=(O=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:W}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(or.API),function(t){var e=function(a){var i,o,l,c,d,h,p,m,y,x;for(o=[],l=0,c=(a+=i="\0\0\0\0".slice(a.length%4||4)).length;c>l;l+=4)(d=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(h=(d=((d=((d=((d=(d-(x=d%85))/85)-(y=d%85))/85)-(m=d%85))/85)-(p=d%85))/85)%85,o.push(h+33,p+33,m+33,y+33,x+33)):o.push(122);return function(E,S){for(var B=S;B>0;B--)E.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(a){var i,o,l,c,d,h=String,p="length",m=255,y="charCodeAt",x="slice",E="replace";for(a[x](-2),a=a[x](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),l=[],c=0,d=(a+=i="uuuuu"[x](a[p]%5||5))[p];d>c;c+=5)o=52200625*(a[y](c)-33)+614125*(a[y](c+1)-33)+7225*(a[y](c+2)-33)+85*(a[y](c+3)-33)+(a[y](c+4)-33),l.push(m&o>>24,m&o>>16,m&o>>8,m&o);return function(S,B){for(var D=B;D>0;D--)S.pop()}(l,i[p]),h.fromCharCode.apply(h,l)},n=function(a){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),i.test(a)===!1)return"";for(var o="",l=0;l<a.length;l+=2)o+=String.fromCharCode("0x"+(a[l]+a[l+1]));return o},s=function(a){for(var i=new Uint8Array(a.length),o=a.length;o--;)i[o]=a.charCodeAt(o);return a=(i=L5(i)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(a,i){var o=0,l=a||"",c=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(or.API),function(t){t.loadFile=function(e,r,n){return function(s,a,i){a=a!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,c,d){var h=new XMLHttpRequest,p=0,m=function(y){var x=y.length,E=[],S=String.fromCharCode;for(p=0;p<x;p+=1)E.push(S(255&y.charCodeAt(p)));return E.join("")};if(h.open("GET",l,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?d(m(this.responseText)):d(void 0)}),h.send(null),c&&h.status===200)return m(h.responseText)}(s,a,i)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(or.API),function(t){function e(){return(Tr.html2canvas?Promise.resolve(Tr.html2canvas):Tw(()=>Promise.resolve().then(()=>jNe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Tr.DOMPurify?Promise.resolve(Tr.DOMPurify):Tw(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=Xn(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(i,o){var l=document.createElement(i);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},a=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),c=i.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,i,1,[i])).set(o)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(i,o){return i.__proto__=o||a.prototype,i},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(l){return this.set({src:s("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},a.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,d){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)d!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(l(p,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var p=0;p<c.length;++p){var m=c[p],y=m.src.find(function(x){return x.format==="truetype"});y&&l.addFont(y.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},a.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},a.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},a.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},a.prototype.get=function(i,o){return this.then(function(){var l=i in a.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},a.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},a.prototype.setPageSize=function(i){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(i=i||or.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},a.prototype.setProgress=function(i,o,l,c){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(i,o,l,c){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},a.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,d).then(function(h){return l.updateProgress(1),h})})},a.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),d=l.call(c,i,o);return a.convert(d,this.__proto__)},a.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},a.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},a.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return a.convert(o,this)},a.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},a.prototype.error=function(i){return this.then(function(){throw new Error(i)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,or.getPageSize=function(i,o,l){if(Xn(i)==="object"){var c=i;i=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var m,y=0,x=0;if(p.hasOwnProperty(h))y=p[h][1]/d,x=p[h][0]/d;else try{y=l[1],x=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",x>y&&(m=x,x=y,y=m);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",y>x&&(m=x,x=y,y=m)}return{width:x,height:y,unit:o,k:d,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Q5):null;var l=new a(o);return o.worker?l:l.from(i).doCallback()}}(or.API),or.API.addJS=function(t){return j6=t,this.internal.events.subscribe("postPutResources",function(){py=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(py+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),O6=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+j6+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){py!==void 0&&O6!==void 0&&this.internal.out("/Names <</JavaScript "+py+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),a=0;a<s.length;a++){var i=s[a],o=n.exec(i);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(a=0;a<c;a++){var h=r.internal.newObject();d.push(h);var p=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<d.length;a++)r.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,a){var i={title:s,options:a,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var i=n.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var a=0;a<s.children.length;a++)n.count++,this.count_r(n,s.children[a]);return n.count}}])}(or.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,a,i,o){var l,c=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(h){for(var p,m=256*h.charCodeAt(4)+h.charCodeAt(5),y=h.length,x={width:0,height:0,numcomponents:1},E=4;E<y;E+=2){if(E+=m,e.indexOf(h.charCodeAt(E+1))!==-1){p=256*h.charCodeAt(E+5)+h.charCodeAt(E+6),x={width:256*h.charCodeAt(E+7)+h.charCodeAt(E+8),height:p,numcomponents:h.charCodeAt(E+9)};break}m=256*h.charCodeAt(E+2)+h.charCodeAt(E+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:s}}return d}}(or.API);var tp,my,Q6,H6,V6,rne=function(){var t,e,r;function n(a){var i,o,l,c,d,h,p,m,y,x,E,S,B,D;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),y=(function(){var I,U;for(U=[],I=0;I<4;++I)U.push(String.fromCharCode(this.data[this.pos++]));return U}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,h.delay=1e3*d/c,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,i-=4),a=(h!=null?h.data:void 0)||this.imgData,S=0;0<=i?S<i:S>i;0<=i?++S:--S)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((x=l-this.transparency.indexed.length)>0)for(B=0;0<=x?B<x:B>x;0<=x?++B:--B)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":p=(E=this.read(i)).indexOf(0),m=String.fromCharCode.apply(String,E.slice(0,p)),this.text[m]=String.fromCharCode.apply(String,E.slice(p+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(D=this.colorType)===4||D===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(a){var i,o;for(o=[],i=0;0<=a?i<a:i>a;0<=a?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(a){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,c=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function d(h,p,m,y){var x,E,S,B,D,I,U,F,C,_,N,j,R,L,Q,H,te,Y,re,V,J,K=Math.ceil((c.width-h)/m),ae=Math.ceil((c.height-p)/y),O=c.width==K&&c.height==ae;for(L=i*K,j=O?o:new Uint8Array(L*ae),I=a.length,R=0,E=0;R<ae&&l<I;){switch(a[l++]){case 0:for(B=te=0;te<L;B=te+=1)j[E++]=a[l++];break;case 1:for(B=Y=0;Y<L;B=Y+=1)x=a[l++],D=B<i?0:j[E-i],j[E++]=(x+D)%256;break;case 2:for(B=re=0;re<L;B=re+=1)x=a[l++],S=(B-B%i)/i,Q=R&&j[(R-1)*L+S*i+B%i],j[E++]=(Q+x)%256;break;case 3:for(B=V=0;V<L;B=V+=1)x=a[l++],S=(B-B%i)/i,D=B<i?0:j[E-i],Q=R&&j[(R-1)*L+S*i+B%i],j[E++]=(x+Math.floor((D+Q)/2))%256;break;case 4:for(B=J=0;J<L;B=J+=1)x=a[l++],S=(B-B%i)/i,D=B<i?0:j[E-i],R===0?Q=H=0:(Q=j[(R-1)*L+S*i+B%i],H=S&&j[(R-1)*L+(S-1)*i+B%i]),U=D+Q-H,F=Math.abs(U-D),_=Math.abs(U-Q),N=Math.abs(U-H),C=F<=_&&F<=N?D:_<=N?Q:H,j[E++]=(x+C)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!O){var W=((p+R*y)*c.width+h)*i,Z=R*L;for(B=0;B<K;B+=1){for(var ne=0;ne<i;ne+=1)o[W++]=j[Z++];W+=(m-1)*i}}R++}}return a=Rre(a),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var a,i,o,l,c,d,h,p,m;for(o=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+o.length),l=0,a=0,i=h=0,p=o.length;h<p;i=h+=3)c[l++]=o[i],c[l++]=o[i+1],c[l++]=o[i+2],c[l++]=(m=d[a++])!=null?m:255;return c},n.prototype.copyToImageData=function(a,i){var o,l,c,d,h,p,m,y,x,E,S;if(l=this.colors,x=null,o=this.hasAlphaChannel,this.palette.length&&(x=(S=this._decodedPalette)!=null?S:this._decodedPalette=this.decodePalette(),l=4,o=!0),y=(c=a.data||a).length,h=x||i,d=p=0,l===1)for(;d<y;)m=x?4*i[d/4]:p,E=h[m++],c[d++]=E,c[d++]=E,c[d++]=E,c[d++]=o?h[m++]:255,p=m;else for(;d<y;)m=x?4*i[d/4]:p,c[d++]=h[m++],c[d++]=h[m++],c[d++]=h[m++],c[d++]=o?h[m++]:255,p=m},n.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(Tr)==="[object Window]"){try{e=Tr.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(a){var i;if(s()===!0)return r.width=a.width,r.height=a.height,r.clearRect(0,0,a.width,a.height),r.putImageData(a,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(a){var i,o,l,c,d,h,p,m;if(this.animation){for(m=[],o=d=0,h=(p=this.animation.frames).length;d<h;o=++d)i=p[o],l=a.createImageData(i.width,i.height),c=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,c),i.imageData=l,m.push(i.image=t(l));return m}},n.prototype.renderFrame=function(a,i){var o,l,c;return o=(l=this.animation.frames)[i],c=l[i-1],i===0&&a.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?a.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&a.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&a.clearRect(o.xOffset,o.yOffset,o.width,o.height),a.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(a){var i,o,l,c,d,h,p=this;return o=0,h=this.animation,c=h.numFrames,l=h.frames,d=h.numPlays,(i=function(){var m,y;if(m=o++%c,y=l[m],p.renderFrame(a,m),c>1&&o/c<d)return p.animation._timeout=setTimeout(i,y.delay)})()},n.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},n.prototype.render=function(a){var i,o;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,i=a.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function nne(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],a=s>>7,i=1<<(7&s)+1;t[e++],t[e++];var o=null,l=null;a&&(o=e,l=i,e+=3*i);var c=!0,d=[],h=0,p=null,m=0,y=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];h=t[e++]|t[e++]<<8,p=t[e++],(1&x)==0&&(p=null),m=x>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var E=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,B=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,I=t[e++],U=I>>6&1,F=1<<(7&I)+1,C=o,_=l,N=!1;I>>7&&(N=!0,C=e,_=F,e+=3*F);var j=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}d.push({x:E,y:S,width:B,height:D,has_local_palette:N,palette_offset:C,palette_size:_,data_offset:j,data_length:e-j,transparent_index:p,interlaced:!!U,delay:h,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return y},this.frameInfo=function(L){if(L<0||L>=d.length)throw new Error("Frame index out of range.");return d[L]},this.decodeAndBlitFrameBGRA=function(L,Q){var H=this.frameInfo(L),te=H.width*H.height,Y=new Uint8Array(te);z6(t,H.data_offset,Y,te);var re=H.palette_offset,V=H.transparent_index;V===null&&(V=256);var J=H.width,K=r-J,ae=J,O=4*(H.y*r+H.x),W=4*((H.y+H.height)*r+H.x),Z=O,ne=4*K;H.interlaced===!0&&(ne+=4*r*7);for(var le=8,ve=0,pe=Y.length;ve<pe;++ve){var he=Y[ve];if(ae===0&&(ae=J,(Z+=ne)>=W&&(ne=4*K+4*r*(le-1),Z=O+(J+K)*(le<<1),le>>=1)),he===V)Z+=4;else{var de=t[re+3*he],ce=t[re+3*he+1],oe=t[re+3*he+2];Q[Z++]=oe,Q[Z++]=ce,Q[Z++]=de,Q[Z++]=255}--ae}},this.decodeAndBlitFrameRGBA=function(L,Q){var H=this.frameInfo(L),te=H.width*H.height,Y=new Uint8Array(te);z6(t,H.data_offset,Y,te);var re=H.palette_offset,V=H.transparent_index;V===null&&(V=256);var J=H.width,K=r-J,ae=J,O=4*(H.y*r+H.x),W=4*((H.y+H.height)*r+H.x),Z=O,ne=4*K;H.interlaced===!0&&(ne+=4*r*7);for(var le=8,ve=0,pe=Y.length;ve<pe;++ve){var he=Y[ve];if(ae===0&&(ae=J,(Z+=ne)>=W&&(ne=4*K+4*r*(le-1),Z=O+(J+K)*(le<<1),le>>=1)),he===V)Z+=4;else{var de=t[re+3*he],ce=t[re+3*he+1],oe=t[re+3*he+2];Q[Z++]=de,Q[Z++]=ce,Q[Z++]=oe,Q[Z++]=255}--ae}}}function z6(t,e,r,n){for(var s=t[e++],a=1<<s,i=a+1,o=i+1,l=s+1,c=(1<<l)-1,d=0,h=0,p=0,m=t[e++],y=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)h|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<l)break;var E=h&c;if(h>>=l,d-=l,E!==a){if(E===i)break;for(var S=E<o?E:x,B=0,D=S;D>a;)D=y[D]>>8,++B;var I=D;if(p+B+(S!==E?1:0)>n)return void us.log("Warning, gif stream longer than expected.");r[p++]=I;var U=p+=B;for(S!==E&&(r[p++]=I),D=S;B--;)D=y[D],r[--U]=255&D,D>>=8;x!==null&&o<4096&&(y[o++]=x<<8|I,o>=c+1&&l<12&&(++l,c=c<<1|1)),x=E}else o=i+1,c=(1<<(l=s+1))-1,x=null}return p!==n&&us.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function P_(t){var e,r,n,s,a,i=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),h=new Array(65535),p=new Array(65535),m=new Array(64),y=new Array(64),x=[],E=0,S=7,B=new Array(64),D=new Array(64),I=new Array(64),U=new Array(256),F=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(O,W){for(var Z=0,ne=0,le=new Array,ve=1;ve<=16;ve++){for(var pe=1;pe<=O[ve];pe++)le[W[ne]]=[],le[W[ne]][0]=Z,le[W[ne]][1]=ve,ne++,Z++;Z*=2}return le}function re(O){for(var W=O[0],Z=O[1]-1;Z>=0;)W&1<<Z&&(E|=1<<S),Z--,--S<0&&(E==255?(V(255),V(0)):V(E),S=7,E=0)}function V(O){x.push(O)}function J(O){V(O>>8&255),V(255&O)}function K(O,W,Z,ne,le){for(var ve,pe=le[0],he=le[240],de=function(We,ct){var wt,ot,Dt,Rt,Yt,Lt,Qt,qt,kt,It,mt=0;for(kt=0;kt<8;++kt){wt=We[mt],ot=We[mt+1],Dt=We[mt+2],Rt=We[mt+3],Yt=We[mt+4],Lt=We[mt+5],Qt=We[mt+6];var _r=wt+(qt=We[mt+7]),Jt=wt-qt,mn=ot+Qt,wr=ot-Qt,Or=Dt+Lt,Rn=Dt-Lt,Lr=Rt+Yt,ga=Rt-Yt,on=_r+Lr,ls=_r-Lr,bs=mn+Or,Qr=mn-Or;We[mt]=on+bs,We[mt+4]=on-bs;var nr=.707106781*(Qr+ls);We[mt+2]=ls+nr,We[mt+6]=ls-nr;var Kr=.382683433*((on=ga+Rn)-(Qr=wr+Jt)),xa=.5411961*on+Kr,es=1.306562965*Qr+Kr,Bs=.707106781*(bs=Rn+wr),Ua=Jt+Bs,Gt=Jt-Bs;We[mt+5]=Gt+xa,We[mt+3]=Gt-xa,We[mt+1]=Ua+es,We[mt+7]=Ua-es,mt+=8}for(mt=0,kt=0;kt<8;++kt){wt=We[mt],ot=We[mt+8],Dt=We[mt+16],Rt=We[mt+24],Yt=We[mt+32],Lt=We[mt+40],Qt=We[mt+48];var gn=wt+(qt=We[mt+56]),ln=wt-qt,Ln=ot+Qt,zn=ot-Qt,ts=Dt+Lt,me=Dt-Lt,Be=Rt+Yt,_e=Rt-Yt,Se=gn+Be,Te=gn-Be,ke=Ln+ts,$e=Ln-ts;We[mt]=Se+ke,We[mt+32]=Se-ke;var nt=.707106781*($e+Te);We[mt+16]=Te+nt,We[mt+48]=Te-nt;var Ve=.382683433*((Se=_e+me)-($e=zn+ln)),Xe=.5411961*Se+Ve,et=1.306562965*$e+Ve,yt=.707106781*(ke=me+zn),Bt=ln+yt,Ht=ln-yt;We[mt+40]=Ht+Xe,We[mt+24]=Ht-Xe,We[mt+8]=Bt+et,We[mt+56]=Bt-et,mt++}for(kt=0;kt<64;++kt)It=We[kt]*ct[kt],m[kt]=It>0?It+.5|0:It-.5|0;return m}(O,W),ce=0;ce<64;++ce)y[C[ce]]=de[ce];var oe=y[0]-Z;Z=y[0],oe==0?re(ne[0]):(re(ne[p[ve=32767+oe]]),re(h[ve]));for(var Re=63;Re>0&&y[Re]==0;)Re--;if(Re==0)return re(pe),Z;for(var qe,Ie=1;Ie<=Re;){for(var Ee=Ie;y[Ie]==0&&Ie<=Re;)++Ie;var De=Ie-Ee;if(De>=16){qe=De>>4;for(var je=1;je<=qe;++je)re(he);De&=15}ve=32767+y[Ie],re(le[(De<<4)+p[ve]]),re(h[ve]),Ie++}return Re!=63&&re(pe),Z}function ae(O){O=Math.min(Math.max(O,1),100),a!=O&&(function(W){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var le=i((Z[ne]*W+50)/100);le=Math.min(Math.max(le,1),255),o[C[ne]]=le}for(var ve=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var he=i((ve[pe]*W+50)/100);he=Math.min(Math.max(he,1),255),l[C[pe]]=he}for(var de=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ce=0,oe=0;oe<8;oe++)for(var Re=0;Re<8;Re++)c[ce]=1/(o[C[ce]]*de[oe]*de[Re]*8),d[ce]=1/(l[C[ce]]*de[oe]*de[Re]*8),ce++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),a=O)}this.encode=function(O,W){W&&ae(W),x=new Array,E=0,S=7,J(65496),J(65504),J(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),J(1),J(1),V(0),V(0),function(){J(65499),J(132),V(0);for(var ot=0;ot<64;ot++)V(o[ot]);V(1);for(var Dt=0;Dt<64;Dt++)V(l[Dt])}(),function(ot,Dt){J(65472),J(17),V(8),J(Dt),J(ot),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(O.width,O.height),function(){J(65476),J(418),V(0);for(var ot=0;ot<16;ot++)V(_[ot+1]);for(var Dt=0;Dt<=11;Dt++)V(N[Dt]);V(16);for(var Rt=0;Rt<16;Rt++)V(j[Rt+1]);for(var Yt=0;Yt<=161;Yt++)V(R[Yt]);V(1);for(var Lt=0;Lt<16;Lt++)V(L[Lt+1]);for(var Qt=0;Qt<=11;Qt++)V(Q[Qt]);V(17);for(var qt=0;qt<16;qt++)V(H[qt+1]);for(var kt=0;kt<=161;kt++)V(te[kt])}(),J(65498),J(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var Z=0,ne=0,le=0;E=0,S=7,this.encode.displayName="_encode_";for(var ve,pe,he,de,ce,oe,Re,qe,Ie,Ee=O.data,De=O.width,je=O.height,We=4*De,ct=0;ct<je;){for(ve=0;ve<We;){for(ce=We*ct+ve,Re=-1,qe=0,Ie=0;Ie<64;Ie++)oe=ce+(qe=Ie>>3)*We+(Re=4*(7&Ie)),ct+qe>=je&&(oe-=We*(ct+1+qe-je)),ve+Re>=We&&(oe-=ve+Re-We+4),pe=Ee[oe++],he=Ee[oe++],de=Ee[oe++],B[Ie]=(F[pe]+F[he+256>>0]+F[de+512>>0]>>16)-128,D[Ie]=(F[pe+768>>0]+F[he+1024>>0]+F[de+1280>>0]>>16)-128,I[Ie]=(F[pe+1280>>0]+F[he+1536>>0]+F[de+1792>>0]>>16)-128;Z=K(B,c,Z,e,n),ne=K(D,d,ne,r,s),le=K(I,d,le,r,s),ve+=32}ct+=8}if(S>=0){var wt=[];wt[1]=S+1,wt[0]=(1<<S+1)-1,re(wt)}return J(65497),new Uint8Array(x)},t=t||50,function(){for(var O=String.fromCharCode,W=0;W<256;W++)U[W]=O(W)}(),e=Y(_,N),r=Y(L,Q),n=Y(j,R),s=Y(H,te),function(){for(var O=1,W=2,Z=1;Z<=15;Z++){for(var ne=O;ne<W;ne++)p[32767+ne]=Z,h[32767+ne]=[],h[32767+ne][1]=Z,h[32767+ne][0]=ne;for(var le=-(W-1);le<=-O;le++)p[32767+le]=Z,h[32767+le]=[],h[32767+le][1]=Z,h[32767+le][0]=W-1+le;O<<=1,W<<=1}}(),function(){for(var O=0;O<256;O++)F[O]=19595*O,F[O+256>>0]=38470*O,F[O+512>>0]=7471*O+32768,F[O+768>>0]=-11059*O,F[O+1024>>0]=-21709*O,F[O+1280>>0]=32768*O+8421375,F[O+1536>>0]=-27439*O,F[O+1792>>0]=-5329*O}(),ae(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Uc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function G6(t){function e(_){if(!_)throw Error("assert :P")}function r(_,N,j){for(var R=0;4>R;R++)if(_[N+R]!=j.charCodeAt(R))return!0;return!1}function n(_,N,j,R,L){for(var Q=0;Q<L;Q++)_[N+Q]=j[R+Q]}function s(_,N,j,R){for(var L=0;L<R;L++)_[N+L]=j}function a(_){return new Int32Array(_)}function i(_,N){for(var j=[],R=0;R<_;R++)j.push(new N);return j}function o(_,N){var j=[];return function R(L,Q,H){for(var te=H[Q],Y=0;Y<te&&(L.push(H.length>Q+1?[]:new N),!(H.length<Q+1));Y++)R(L[Y],Q+1,H)}(j,0,_),j}var l=function(){var _=this;function N(T,P){for(var X=1<<P-1>>>0;T&X;)X>>>=1;return X?(T&X-1)+X:T}function j(T,P,X,se,Ae){e(!(se%X));do T[P+(se-=X)]=Ae;while(0<se)}function R(T,P,X,se,Ae){if(e(2328>=Ae),512>=Ae)var ge=a(512);else if((ge=a(Ae))==null)return 0;return function(xe,ye,Ce,Ne,Me,Ze){var Ye,Ge,xt=ye,it=1<<Ce,Pe=a(16),Qe=a(16);for(e(Me!=0),e(Ne!=null),e(xe!=null),e(0<Ce),Ge=0;Ge<Me;++Ge){if(15<Ne[Ge])return 0;++Pe[Ne[Ge]]}if(Pe[0]==Me)return 0;for(Qe[1]=0,Ye=1;15>Ye;++Ye){if(Pe[Ye]>1<<Ye)return 0;Qe[Ye+1]=Qe[Ye]+Pe[Ye]}for(Ge=0;Ge<Me;++Ge)Ye=Ne[Ge],0<Ne[Ge]&&(Ze[Qe[Ye]++]=Ge);if(Qe[15]==1)return(Ne=new L).g=0,Ne.value=Ze[0],j(xe,xt,1,it,Ne),it;var At,vt=-1,ht=it-1,$t=0,Ot=1,sr=1,zt=1<<Ce;for(Ge=0,Ye=1,Me=2;Ye<=Ce;++Ye,Me<<=1){if(Ot+=sr<<=1,0>(sr-=Pe[Ye]))return 0;for(;0<Pe[Ye];--Pe[Ye])(Ne=new L).g=Ye,Ne.value=Ze[Ge++],j(xe,xt+$t,Me,zt,Ne),$t=N($t,Ye)}for(Ye=Ce+1,Me=2;15>=Ye;++Ye,Me<<=1){if(Ot+=sr<<=1,0>(sr-=Pe[Ye]))return 0;for(;0<Pe[Ye];--Pe[Ye]){if(Ne=new L,($t&ht)!=vt){for(xt+=zt,At=1<<(vt=Ye)-Ce;15>vt&&!(0>=(At-=Pe[vt]));)++vt,At<<=1;it+=zt=1<<(At=vt-Ce),xe[ye+(vt=$t&ht)].g=At+Ce,xe[ye+vt].value=xt-ye-vt}Ne.g=Ye-Ce,Ne.value=Ze[Ge++],j(xe,xt+($t>>Ce),Me,zt,Ne),$t=N($t,Ye)}}return Ot!=2*Qe[15]-1?0:it}(T,P,X,se,Ae,ge)}function L(){this.value=this.g=0}function Q(){this.value=this.g=0}function H(){this.G=i(5,L),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(ta,Q)}function te(T,P,X,se){e(T!=null),e(P!=null),e(2147483648>se),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=P,T.pa=X,T.Jd=P,T.Yc=X+se,T.Zc=4<=se?X+se-4+1:X,ve(T)}function Y(T,P){for(var X=0;0<P--;)X|=he(T,128)<<P;return X}function re(T,P){var X=Y(T,P);return pe(T)?-X:X}function V(T,P,X,se){var Ae,ge=0;for(e(T!=null),e(P!=null),e(4294967288>se),T.Sb=se,T.Ra=0,T.u=0,T.h=0,4<se&&(se=4),Ae=0;Ae<se;++Ae)ge+=P[X+Ae]<<8*Ae;T.Ra=ge,T.bb=se,T.oa=P,T.pa=X}function J(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<pA-8>>>0,++T.bb,T.u-=8;Z(T)&&(T.h=1,T.u=0)}function K(T,P){if(e(0<=P),!T.h&&P<=hA){var X=W(T)&ou[P];return T.u+=P,J(T),X}return T.h=1,T.u=0}function ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(T){return T.Ra>>>(T.u&pA-1)>>>0}function Z(T){return e(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>pA}function ne(T,P){T.u=P,T.h=Z(T)}function le(T){T.u>=vd&&(e(T.u>=vd),J(T))}function ve(T){e(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(e(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function pe(T){return Y(T,1)}function he(T,P){var X=T.Ca;0>T.b&&ve(T);var se=T.b,Ae=X*P>>>8,ge=(T.I>>>se>Ae)+0;for(ge?(X-=Ae,T.I-=Ae+1<<se>>>0):X=Ae+1,se=X,Ae=0;256<=se;)Ae+=8,se>>=8;return se=7^Ae+Ri[se],T.b-=se,T.Ca=(X<<se)-1,ge}function de(T,P,X){T[P+0]=X>>24&255,T[P+1]=X>>16&255,T[P+2]=X>>8&255,T[P+3]=X>>0&255}function ce(T,P){return T[P+0]<<0|T[P+1]<<8}function oe(T,P){return ce(T,P)|T[P+2]<<16}function Re(T,P){return ce(T,P)|ce(T,P+2)<<16}function qe(T,P){var X=1<<P;return e(T!=null),e(0<P),T.X=a(X),T.X==null?0:(T.Mb=32-P,T.Xa=P,1)}function Ie(T,P){e(T!=null),e(P!=null),e(T.Xa==P.Xa),n(P.X,0,T.X,0,1<<P.Xa)}function Ee(){this.X=[],this.Xa=this.Mb=0}function De(T,P,X,se){e(X!=null),e(se!=null);var Ae=X[0],ge=se[0];return Ae==0&&(Ae=(T*ge+P/2)/P),ge==0&&(ge=(P*Ae+T/2)/T),0>=Ae||0>=ge?0:(X[0]=Ae,se[0]=ge,1)}function je(T,P){return T+(1<<P)-1>>>P}function We(T,P){return((4278255360&T)+(4278255360&P)>>>0&4278255360)+((16711935&T)+(16711935&P)>>>0&16711935)>>>0}function ct(T,P){_[P]=function(X,se,Ae,ge,xe,ye,Ce){var Ne;for(Ne=0;Ne<xe;++Ne){var Me=_[T](ye[Ce+Ne-1],Ae,ge+Ne);ye[Ce+Ne]=We(X[se+Ne],Me)}}}function wt(){this.ud=this.hd=this.jd=0}function ot(T,P){return((4278124286&(T^P))>>>1)+(T&P)>>>0}function Dt(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function Rt(T,P){return Dt(T+(T-P+.5>>1))}function Yt(T,P,X){return Math.abs(P-X)-Math.abs(T-X)}function Lt(T,P,X,se,Ae,ge,xe){for(se=ge[xe-1],X=0;X<Ae;++X)ge[xe+X]=se=We(T[P+X],se)}function Qt(T,P,X,se,Ae){var ge;for(ge=0;ge<X;++ge){var xe=T[P+ge],ye=xe>>8&255,Ce=16711935&(Ce=(Ce=16711935&xe)+((ye<<16)+ye));se[Ae+ge]=(4278255360&xe)+Ce>>>0}}function qt(T,P){P.jd=T>>0&255,P.hd=T>>8&255,P.ud=T>>16&255}function kt(T,P,X,se,Ae,ge){var xe;for(xe=0;xe<se;++xe){var ye=P[X+xe],Ce=ye>>>8,Ne=ye,Me=255&(Me=(Me=ye>>>16)+((T.jd<<24>>24)*(Ce<<24>>24)>>>5));Ne=255&(Ne=(Ne=Ne+((T.hd<<24>>24)*(Ce<<24>>24)>>>5))+((T.ud<<24>>24)*(Me<<24>>24)>>>5)),Ae[ge+xe]=(4278255360&ye)+(Me<<16)+Ne}}function It(T,P,X,se,Ae){_[P]=function(ge,xe,ye,Ce,Ne,Me,Ze,Ye,Ge){for(Ce=Ze;Ce<Ye;++Ce)for(Ze=0;Ze<Ge;++Ze)Ne[Me++]=Ae(ye[se(ge[xe++])])},_[T]=function(ge,xe,ye,Ce,Ne,Me,Ze){var Ye=8>>ge.b,Ge=ge.Ea,xt=ge.K[0],it=ge.w;if(8>Ye)for(ge=(1<<ge.b)-1,it=(1<<Ye)-1;xe<ye;++xe){var Pe,Qe=0;for(Pe=0;Pe<Ge;++Pe)Pe&ge||(Qe=se(Ce[Ne++])),Me[Ze++]=Ae(xt[Qe&it]),Qe>>=Ye}else _["VP8LMapColor"+X](Ce,Ne,xt,it,Me,Ze,xe,ye,Ge)}}function mt(T,P,X,se,Ae){for(X=P+X;P<X;){var ge=T[P++];se[Ae++]=ge>>16&255,se[Ae++]=ge>>8&255,se[Ae++]=ge>>0&255}}function _r(T,P,X,se,Ae){for(X=P+X;P<X;){var ge=T[P++];se[Ae++]=ge>>16&255,se[Ae++]=ge>>8&255,se[Ae++]=ge>>0&255,se[Ae++]=ge>>24&255}}function Jt(T,P,X,se,Ae){for(X=P+X;P<X;){var ge=(xe=T[P++])>>16&240|xe>>12&15,xe=xe>>0&240|xe>>28&15;se[Ae++]=ge,se[Ae++]=xe}}function mn(T,P,X,se,Ae){for(X=P+X;P<X;){var ge=(xe=T[P++])>>16&248|xe>>13&7,xe=xe>>5&224|xe>>3&31;se[Ae++]=ge,se[Ae++]=xe}}function wr(T,P,X,se,Ae){for(X=P+X;P<X;){var ge=T[P++];se[Ae++]=ge>>0&255,se[Ae++]=ge>>8&255,se[Ae++]=ge>>16&255}}function Or(T,P,X,se,Ae,ge){if(ge==0)for(X=P+X;P<X;)de(se,((ge=T[P++])[0]>>24|ge[1]>>8&65280|ge[2]<<8&16711680|ge[3]<<24)>>>0),Ae+=32;else n(se,Ae,T,P,X)}function Rn(T,P){_[P][0]=_[T+"0"],_[P][1]=_[T+"1"],_[P][2]=_[T+"2"],_[P][3]=_[T+"3"],_[P][4]=_[T+"4"],_[P][5]=_[T+"5"],_[P][6]=_[T+"6"],_[P][7]=_[T+"7"],_[P][8]=_[T+"8"],_[P][9]=_[T+"9"],_[P][10]=_[T+"10"],_[P][11]=_[T+"11"],_[P][12]=_[T+"12"],_[P][13]=_[T+"13"],_[P][14]=_[T+"0"],_[P][15]=_[T+"0"]}function Lr(T){return T==rh||T==gu||T==Cc||T==Cd}function ga(){this.eb=[],this.size=this.A=this.fb=0}function on(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ls(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ga,this.f.kb=new on,this.sd=null}function bs(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Qr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function nr(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function Kr(T,P){var X=T.T,se=P.ba.f.RGBA,Ae=se.eb,ge=se.fb+T.ka*se.A,xe=Ca[P.ba.S],ye=T.y,Ce=T.O,Ne=T.f,Me=T.N,Ze=T.ea,Ye=T.W,Ge=P.cc,xt=P.dc,it=P.Mc,Pe=P.Nc,Qe=T.ka,At=T.ka+T.T,vt=T.U,ht=vt+1>>1;for(Qe==0?xe(ye,Ce,null,null,Ne,Me,Ze,Ye,Ne,Me,Ze,Ye,Ae,ge,null,null,vt):(xe(P.ec,P.fc,ye,Ce,Ge,xt,it,Pe,Ne,Me,Ze,Ye,Ae,ge-se.A,Ae,ge,vt),++X);Qe+2<At;Qe+=2)Ge=Ne,xt=Me,it=Ze,Pe=Ye,Me+=T.Rc,Ye+=T.Rc,ge+=2*se.A,xe(ye,(Ce+=2*T.fa)-T.fa,ye,Ce,Ge,xt,it,Pe,Ne,Me,Ze,Ye,Ae,ge-se.A,Ae,ge,vt);return Ce+=T.fa,T.j+At<T.o?(n(P.ec,P.fc,ye,Ce,vt),n(P.cc,P.dc,Ne,Me,ht),n(P.Mc,P.Nc,Ze,Ye,ht),X--):1&At||xe(ye,Ce,null,null,Ne,Me,Ze,Ye,Ne,Me,Ze,Ye,Ae,ge+se.A,null,null,vt),X}function xa(T,P,X){var se=T.F,Ae=[T.J];if(se!=null){var ge=T.U,xe=P.ba.S,ye=xe==yA||xe==Cc;P=P.ba.f.RGBA;var Ce=[0],Ne=T.ka;Ce[0]=T.T,T.Kb&&(Ne==0?--Ce[0]:(--Ne,Ae[0]-=T.width),T.j+T.ka+T.T==T.o&&(Ce[0]=T.o-T.j-Ne));var Me=P.eb;Ne=P.fb+Ne*P.A,T=Jr(se,Ae[0],T.width,ge,Ce,Me,Ne+(ye?0:3),P.A),e(X==Ce),T&&Lr(xe)&&co(Me,Ne,ye,ge,Ce,P.A)}return 0}function es(T){var P=T.ma,X=P.ba.S,se=11>X,Ae=X==bd||X==th||X==yA||X==bc||X==12||Lr(X);if(P.memory=null,P.Ib=null,P.Jb=null,P.Nd=null,!iu(P.Oa,T,Ae?11:12))return 0;if(Ae&&Lr(X)&&_t(),T.da)alert("todo:use_scaling");else{if(se){if(P.Ib=nr,T.Kb){if(X=T.U+1>>1,P.memory=a(T.U+2*X),P.memory==null)return 0;P.ec=P.memory,P.fc=0,P.cc=P.ec,P.dc=P.fc+T.U,P.Mc=P.cc,P.Nc=P.dc+X,P.Ib=Kr,_t()}}else alert("todo:EmitYUV");Ae&&(P.Jb=xa,se&&ze())}if(se&&!cv){for(T=0;256>T;++T)eE[T]=89858*(T-128)+na>>Ql,ah[T]=-22014*(T-128)+na,zm[T]=-45773*(T-128),sa[T]=113618*(T-128)+na>>Ql;for(T=yu;T<I0;++T)P=76283*(T-16)+na>>Ql,ih[T-yu]=Nn(P,255),Gm[T-yu]=Nn(P+8>>4,15);cv=1}return 1}function Bs(T){var P=T.ma,X=T.U,se=T.T;return e(!(1&T.ka)),0>=X||0>=se?0:(X=P.Ib(T,P),P.Jb!=null&&P.Jb(T,P,X),P.Dc+=X,1)}function Ua(T){T.ma.memory=null}function Gt(T,P,X,se){return K(T,8)!=47?0:(P[0]=K(T,14)+1,X[0]=K(T,14)+1,se[0]=K(T,1),K(T,3)!=0?0:!T.h)}function gn(T,P){if(4>T)return T+1;var X=T-2>>1;return(2+(1&T)<<X)+K(P,X)+1}function ln(T,P){return 120<P?P-120:1<=(X=((X=_c[P-1])>>4)*T+(8-(15&X)))?X:1;var X}function Ln(T,P,X){var se=W(X),Ae=T[P+=255&se].g-8;return 0<Ae&&(ne(X,X.u+8),se=W(X),P+=T[P].value,P+=se&(1<<Ae)-1),ne(X,X.u+T[P].g),T[P].value}function zn(T,P,X){return X.g+=T.g,X.value+=T.value<<P>>>0,e(8>=X.g),T.g}function ts(T,P,X){var se=T.xc;return e((P=se==0?0:T.vc[T.md*(X>>se)+(P>>se)])<T.Wb),T.Ya[P]}function me(T,P,X,se){var Ae=T.ab,ge=T.c*P,xe=T.C;P=xe+P;var ye=X,Ce=se;for(se=T.Ta,X=T.Ua;0<Ae--;){var Ne=T.gc[Ae],Me=xe,Ze=P,Ye=ye,Ge=Ce,xt=(Ce=se,ye=X,Ne.Ea);switch(e(Me<Ze),e(Ze<=Ne.nc),Ne.hc){case 2:E0(Ye,Ge,(Ze-Me)*xt,Ce,ye);break;case 0:var it=Me,Pe=Ze,Qe=Ce,At=ye,vt=(zt=Ne).Ea;it==0&&(Hm(Ye,Ge,null,null,1,Qe,At),Lt(Ye,Ge+1,0,0,vt-1,Qe,At+1),Ge+=vt,At+=vt,++it);for(var ht=1<<zt.b,$t=ht-1,Ot=je(vt,zt.b),sr=zt.K,zt=zt.w+(it>>zt.b)*Ot;it<Pe;){var yn=sr,Bn=zt,Wr=1;for(Zf(Ye,Ge,Qe,At-vt,1,Qe,At);Wr<vt;){var zr=(Wr&~$t)+ht;zr>vt&&(zr=vt),(0,vc[yn[Bn++]>>8&15])(Ye,Ge+ +Wr,Qe,At+Wr-vt,zr-Wr,Qe,At+Wr),Wr=zr}Ge+=vt,At+=vt,++it&$t||(zt+=Ot)}Ze!=Ne.nc&&n(Ce,ye-xt,Ce,ye+(Ze-Me-1)*xt,xt);break;case 1:for(xt=Ye,Pe=Ge,vt=(Ye=Ne.Ea)-(At=Ye&~(Qe=(Ge=1<<Ne.b)-1)),it=je(Ye,Ne.b),ht=Ne.K,Ne=Ne.w+(Me>>Ne.b)*it;Me<Ze;){for($t=ht,Ot=Ne,sr=new wt,zt=Pe+At,yn=Pe+Ye;Pe<zt;)qt($t[Ot++],sr),cu(sr,xt,Pe,Ge,Ce,ye),Pe+=Ge,ye+=Ge;Pe<yn&&(qt($t[Ot++],sr),cu(sr,xt,Pe,vt,Ce,ye),Pe+=vt,ye+=vt),++Me&Qe||(Ne+=it)}break;case 3:if(Ye==Ce&&Ge==ye&&0<Ne.b){for(Pe=Ce,Ye=xt=ye+(Ze-Me)*xt-(At=(Ze-Me)*je(Ne.Ea,Ne.b)),Ge=Ce,Qe=ye,it=[],At=(vt=At)-1;0<=At;--At)it[At]=Ge[Qe+At];for(At=vt-1;0<=At;--At)Pe[Ye+At]=it[At];No(Ne,Me,Ze,Ce,xt,Ce,ye)}else No(Ne,Me,Ze,Ye,Ge,Ce,ye)}ye=se,Ce=X}Ce!=X&&n(se,X,ye,Ce,ge)}function Be(T,P){var X=T.V,se=T.Ba+T.c*T.C,Ae=P-T.C;if(e(P<=T.l.o),e(16>=Ae),0<Ae){var ge=T.l,xe=T.Ta,ye=T.Ua,Ce=ge.width;if(me(T,Ae,X,se),Ae=ye=[ye],e((X=T.C)<(se=P)),e(ge.v<ge.va),se>ge.o&&(se=ge.o),X<ge.j){var Ne=ge.j-X;X=ge.j,Ae[0]+=Ne*Ce}if(X>=se?X=0:(Ae[0]+=4*ge.v,ge.ka=X-ge.j,ge.U=ge.va-ge.v,ge.T=se-X,X=1),X){if(ye=ye[0],11>(X=T.ca).S){var Me=X.f.RGBA,Ze=(se=X.S,Ae=ge.U,ge=ge.T,Ne=Me.eb,Me.A),Ye=ge;for(Me=Me.fb+T.Ma*Me.A;0<Ye--;){var Ge=xe,xt=ye,it=Ae,Pe=Ne,Qe=Me;switch(se){case Xa:di(Ge,xt,it,Pe,Qe);break;case bd:Qa(Ge,xt,it,Pe,Qe);break;case rh:Qa(Ge,xt,it,Pe,Qe),co(Pe,Qe,0,it,1,0);break;case Ml:Zo(Ge,xt,it,Pe,Qe);break;case th:Or(Ge,xt,it,Pe,Qe,1);break;case gu:Or(Ge,xt,it,Pe,Qe,1),co(Pe,Qe,0,it,1,0);break;case yA:Or(Ge,xt,it,Pe,Qe,0);break;case Cc:Or(Ge,xt,it,Pe,Qe,0),co(Pe,Qe,1,it,1,0);break;case bc:uu(Ge,xt,it,Pe,Qe);break;case Cd:uu(Ge,xt,it,Pe,Qe),Xr(Pe,Qe,it,1,0);break;case S0:Li(Ge,xt,it,Pe,Qe);break;default:e(0)}ye+=Ce,Me+=Ze}T.Ma+=ge}else alert("todo:EmitRescaledRowsYUVA");e(T.Ma<=X.height)}}T.C=P,e(T.C<=T.i)}function _e(T){var P;if(0<T.ua)return 0;for(P=0;P<T.Wb;++P){var X=T.Ya[P].G,se=T.Ya[P].H;if(0<X[1][se[1]+0].g||0<X[2][se[2]+0].g||0<X[3][se[3]+0].g)return 0}return 1}function Se(T,P,X,se,Ae,ge){if(T.Z!=0){var xe=T.qd,ye=T.rd;for(e(Ol[T.Z]!=null);P<X;++P)Ol[T.Z](xe,ye,se,Ae,se,Ae,ge),xe=se,ye=Ae,Ae+=ge;T.qd=xe,T.rd=ye}}function Te(T,P){var X=T.l.ma,se=X.Z==0||X.Z==1?T.l.j:T.C;if(se=T.C<se?se:T.C,e(P<=T.l.o),P>se){var Ae=T.l.width,ge=X.ca,xe=X.tb+Ae*se,ye=T.V,Ce=T.Ba+T.c*se,Ne=T.gc;e(T.ab==1),e(Ne[0].hc==3),lu(Ne[0],se,P,ye,Ce,ge,xe),Se(X,se,P,ge,xe,Ae)}T.C=T.Ma=P}function ke(T,P,X,se,Ae,ge,xe){var ye=T.$/se,Ce=T.$%se,Ne=T.m,Me=T.s,Ze=X+T.$,Ye=Ze;Ae=X+se*Ae;var Ge=X+se*ge,xt=280+Me.ua,it=T.Pb?ye:16777216,Pe=0<Me.ua?Me.Wa:null,Qe=Me.wc,At=Ze<Ge?ts(Me,Ce,ye):null;e(T.C<ge),e(Ge<=Ae);var vt=!1;e:for(;;){for(;vt||Ze<Ge;){var ht=0;if(ye>=it){var $t=Ze-X;e((it=T).Pb),it.wd=it.m,it.xd=$t,0<it.s.ua&&Ie(it.s.Wa,it.s.vb),it=ye+iv}if(Ce&Qe||(At=ts(Me,Ce,ye)),e(At!=null),At.Qb&&(P[Ze]=At.qb,vt=!0),!vt)if(le(Ne),At.jc){ht=Ne,$t=P;var Ot=Ze,sr=At.pd[W(ht)&ta-1];e(At.jc),256>sr.g?(ne(ht,ht.u+sr.g),$t[Ot]=sr.value,ht=0):(ne(ht,ht.u+sr.g-256),e(256<=sr.value),ht=sr.value),ht==0&&(vt=!0)}else ht=Ln(At.G[0],At.H[0],Ne);if(Ne.h)break;if(vt||256>ht){if(!vt)if(At.nd)P[Ze]=(At.qb|ht<<8)>>>0;else{if(le(Ne),vt=Ln(At.G[1],At.H[1],Ne),le(Ne),$t=Ln(At.G[2],At.H[2],Ne),Ot=Ln(At.G[3],At.H[3],Ne),Ne.h)break;P[Ze]=(Ot<<24|vt<<16|ht<<8|$t)>>>0}if(vt=!1,++Ze,++Ce>=se&&(Ce=0,++ye,xe!=null&&ye<=ge&&!(ye%16)&&xe(T,ye),Pe!=null))for(;Ye<Ze;)ht=P[Ye++],Pe.X[(506832829*ht&4294967295)>>>Pe.Mb]=ht}else if(280>ht){if(ht=gn(ht-256,Ne),$t=Ln(At.G[4],At.H[4],Ne),le(Ne),$t=ln(se,$t=gn($t,Ne)),Ne.h)break;if(Ze-X<$t||Ae-Ze<ht)break e;for(Ot=0;Ot<ht;++Ot)P[Ze+Ot]=P[Ze+Ot-$t];for(Ze+=ht,Ce+=ht;Ce>=se;)Ce-=se,++ye,xe!=null&&ye<=ge&&!(ye%16)&&xe(T,ye);if(e(Ze<=Ae),Ce&Qe&&(At=ts(Me,Ce,ye)),Pe!=null)for(;Ye<Ze;)ht=P[Ye++],Pe.X[(506832829*ht&4294967295)>>>Pe.Mb]=ht}else{if(!(ht<xt))break e;for(vt=ht-280,e(Pe!=null);Ye<Ze;)ht=P[Ye++],Pe.X[(506832829*ht&4294967295)>>>Pe.Mb]=ht;ht=Ze,e(!(vt>>>($t=Pe).Xa)),P[ht]=$t.X[vt],vt=!0}vt||e(Ne.h==Z(Ne))}if(T.Pb&&Ne.h&&Ze<Ae)e(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&Ie(T.s.vb,T.s.Wa);else{if(Ne.h)break e;xe!=null&&xe(T,ye>ge?ge:ye),T.a=0,T.$=Ze-X}return 1}return T.a=3,0}function $e(T){e(T!=null),T.vc=null,T.yc=null,T.Ya=null;var P=T.Wa;P!=null&&(P.X=null),T.vb=null,e(T!=null)}function nt(){var T=new gd;return T==null?null:(T.a=0,T.xb=Ed,Rn("Predictor","VP8LPredictors"),Rn("Predictor","VP8LPredictors_C"),Rn("PredictorAdd","VP8LPredictorsAdd"),Rn("PredictorAdd","VP8LPredictorsAdd_C"),E0=Qt,cu=kt,di=mt,Qa=_r,uu=Jt,Li=mn,Zo=wr,_.VP8LMapColor32b=wa,_.VP8LMapColor8b=eh,T)}function Ve(T,P,X,se,Ae){var ge=1,xe=[T],ye=[P],Ce=se.m,Ne=se.s,Me=null,Ze=0;e:for(;;){if(X)for(;ge&&K(Ce,1);){var Ye=xe,Ge=ye,xt=se,it=1,Pe=xt.m,Qe=xt.gc[xt.ab],At=K(Pe,2);if(xt.Oc&1<<At)ge=0;else{switch(xt.Oc|=1<<At,Qe.hc=At,Qe.Ea=Ye[0],Qe.nc=Ge[0],Qe.K=[null],++xt.ab,e(4>=xt.ab),At){case 0:case 1:Qe.b=K(Pe,3)+2,it=Ve(je(Qe.Ea,Qe.b),je(Qe.nc,Qe.b),0,xt,Qe.K),Qe.K=Qe.K[0];break;case 3:var vt,ht=K(Pe,8)+1,$t=16<ht?0:4<ht?1:2<ht?2:3;if(Ye[0]=je(Qe.Ea,$t),Qe.b=$t,vt=it=Ve(ht,1,0,xt,Qe.K)){var Ot,sr=ht,zt=Qe,yn=1<<(8>>zt.b),Bn=a(yn);if(Bn==null)vt=0;else{var Wr=zt.K[0],zr=zt.w;for(Bn[0]=zt.K[0][0],Ot=1;Ot<1*sr;++Ot)Bn[Ot]=We(Wr[zr+Ot],Bn[Ot-1]);for(;Ot<4*yn;++Ot)Bn[Ot]=0;zt.K[0]=null,zt.K[0]=Bn,vt=1}}it=vt;break;case 2:break;default:e(0)}ge=it}}if(xe=xe[0],ye=ye[0],ge&&K(Ce,1)&&!(ge=1<=(Ze=K(Ce,4))&&11>=Ze)){se.a=3;break e}var On;if(On=ge)t:{var kn,Rr,qn,hr=se,Sr=xe,vn=ye,wn=Ze,Ea=X,aa=hr.m,Fs=hr.s,Ds=[null],zs=1,Fo=0,In=bA[wn];r:for(;;){if(Ea&&K(aa,1)){var Gs=K(aa,3)+2,rl=je(Sr,Gs),wu=je(vn,Gs),_A=rl*wu;if(!Ve(rl,wu,0,hr,Ds))break r;for(Ds=Ds[0],Fs.xc=Gs,kn=0;kn<_A;++kn){var bu=Ds[kn]>>8&65535;Ds[kn]=bu,bu>=zs&&(zs=bu+1)}}if(aa.h)break r;for(Rr=0;5>Rr;++Rr){var As=uo[Rr];!Rr&&0<wn&&(As+=1<<wn),Fo<As&&(Fo=As)}var oh=i(zs*In,L),F0=zs,hi=i(F0,H);if(hi==null)var ps=null;else e(65536>=F0),ps=hi;var SA=a(Fo);if(ps==null||SA==null||oh==null){hr.a=1;break r}var Cu=oh;for(kn=qn=0;kn<zs;++kn){var Mi=ps[kn],Eu=Mi.G,Pi=Mi.H,lh=0,Sd=1,D0=0;for(Rr=0;5>Rr;++Rr){As=uo[Rr],Eu[Rr]=Cu,Pi[Rr]=qn,!Rr&&0<wn&&(As+=1<<wn);s:{var ch,R0=As,uh=hr,Td=SA,dv=Cu,fv=qn,Ah=0,Bc=uh.m,rE=K(Bc,1);if(s(Td,0,0,R0),rE){var hv=K(Bc,1)+1,pv=K(Bc,1),qm=K(Bc,pv==0?1:8);Td[qm]=1,hv==2&&(Td[qm=K(Bc,8)]=1);var Nd=1}else{var Km=a(19),$m=K(Bc,4)+4;if(19<$m){uh.a=3;var dh=0;break s}for(ch=0;ch<$m;++ch)Km[Ec[ch]]=K(Bc,3);var L0=void 0,Bd=void 0,mv=uh,gv=Km,kc=R0,fh=Td,U0=0,nl=mv.m,kd=8,Wm=i(128,L);n:for(;R(Wm,0,7,gv,19);){if(K(nl,1)){var xv=2+2*K(nl,3);if((L0=2+K(nl,xv))>kc)break n}else L0=kc;for(Bd=0;Bd<kc&&L0--;){le(nl);var Ym=Wm[0+(127&W(nl))];ne(nl,nl.u+Ym.g);var TA=Ym.value;if(16>TA)fh[Bd++]=TA,TA!=0&&(kd=TA);else{var vv=TA==16,Xm=TA-16,Jm=Io[Xm],Zm=K(nl,T0[Xm])+Jm;if(Bd+Zm>kc)break n;for(var yv=vv?kd:0;0<Zm--;)fh[Bd++]=yv}}U0=1;break n}U0||(mv.a=3),Nd=U0}(Nd=Nd&&!Bc.h)&&(Ah=R(dv,fv,8,Td,R0)),Nd&&Ah!=0?dh=Ah:(uh.a=3,dh=0)}if(dh==0)break r;if(Sd&&wA[Rr]==1&&(Sd=Cu[qn].g==0),lh+=Cu[qn].g,qn+=dh,3>=Rr){var NA,M0=SA[0];for(NA=1;NA<As;++NA)SA[NA]>M0&&(M0=SA[NA]);D0+=M0}}if(Mi.nd=Sd,Mi.Qb=0,Sd&&(Mi.qb=(Eu[3][Pi[3]+0].value<<24|Eu[1][Pi[1]+0].value<<16|Eu[2][Pi[2]+0].value)>>>0,lh==0&&256>Eu[0][Pi[0]+0].value&&(Mi.Qb=1,Mi.qb+=Eu[0][Pi[0]+0].value<<8)),Mi.jc=!Mi.Qb&&6>D0,Mi.jc){var hh,Ic=Mi;for(hh=0;hh<ta;++hh){var Hl=hh,Fc=Ic.pd[Hl],ph=Ic.G[0][Ic.H[0]+Hl];256<=ph.value?(Fc.g=ph.g+256,Fc.value=ph.value):(Fc.g=0,Fc.value=0,Hl>>=zn(ph,8,Fc),Hl>>=zn(Ic.G[1][Ic.H[1]+Hl],16,Fc),Hl>>=zn(Ic.G[2][Ic.H[2]+Hl],0,Fc),zn(Ic.G[3][Ic.H[3]+Hl],24,Fc))}}}Fs.vc=Ds,Fs.Wb=zs,Fs.Ya=ps,Fs.yc=oh,On=1;break t}On=0}if(!(ge=On)){se.a=3;break e}if(0<Ze){if(Ne.ua=1<<Ze,!qe(Ne.Wa,Ze)){se.a=1,ge=0;break e}}else Ne.ua=0;var mh=se,eg=xe,wv=ye,tg=mh.s,rg=tg.xc;if(mh.c=eg,mh.i=wv,tg.md=je(eg,rg),tg.wc=rg==0?-1:(1<<rg)-1,X){se.xb=lv;break e}if((Me=a(xe*ye))==null){se.a=1,ge=0;break e}ge=(ge=ke(se,Me,0,xe,ye,ye,null))&&!Ce.h;break e}return ge?(Ae!=null?Ae[0]=Me:(e(Me==null),e(X)),se.$=0,X||$e(Ne)):$e(Ne),ge}function Xe(T,P){var X=T.c*T.i,se=X+P+16*P;return e(T.c<=P),T.V=a(se),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+X+P,1)}function et(T,P){var X=T.C,se=P-X,Ae=T.V,ge=T.Ba+T.c*X;for(e(P<=T.l.o);0<se;){var xe=16<se?16:se,ye=T.l.ma,Ce=T.l.width,Ne=Ce*xe,Me=ye.ca,Ze=ye.tb+Ce*X,Ye=T.Ta,Ge=T.Ua;me(T,xe,Ae,ge),ns(Ye,Ge,Me,Ze,Ne),Se(ye,X,X+xe,Me,Ze,Ce),se-=xe,Ae+=xe*T.c,X+=xe}e(X==P),T.C=T.Ma=P}function yt(){this.ub=this.yd=this.td=this.Rb=0}function Bt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ht(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Nt(){this.Yb=function(){var T=[];return function P(X,se,Ae){for(var ge=Ae[se],xe=0;xe<ge&&(X.push(Ae.length>se+1?[]:0),!(Ae.length<se+1));xe++)P(X[xe],se+1,Ae)}(T,0,[3,11]),T}()}function Ut(){this.jb=a(3),this.Wc=o([4,8],Nt),this.Xc=o([4,17],Nt)}function fr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Hr(){this.ld=this.La=this.dd=this.tc=0}function Vr(){this.Na=this.la=0}function $r(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Os(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ni(){this.uc=this.M=this.Nb=0,this.wa=Array(new Hr),this.Y=0,this.ya=Array(new Os),this.aa=0,this.l=new ea}function js(){this.y=a(16),this.f=a(8),this.ea=a(8)}function va(){this.cb=this.a=0,this.sc="",this.m=new ae,this.Od=new yt,this.Kc=new Bt,this.ed=new fr,this.Qa=new Ht,this.Ic=this.$c=this.Aa=0,this.D=new Ni,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ae),this.ia=0,this.pb=i(4,$r),this.Pa=new Ut,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new js),this.Hd=0,this.rb=Array(new Vr),this.sb=0,this.wa=Array(new Hr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Os),this.L=this.aa=0,this.gd=o([4,2],Hr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ea(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ma(){var T=new va;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,ra||(ra=fd)),T}function rs(T,P,X){return T.a==0&&(T.a=P,T.sc=X,T.cb=0),0}function ya(T,P,X){return 3<=X&&T[P+0]==157&&T[P+1]==1&&T[P+2]==42}function Zc(T,P){if(T==null)return 0;if(T.a=0,T.sc="OK",P==null)return rs(T,2,"null VP8Io passed to VP8GetHeaders()");var X=P.data,se=P.w,Ae=P.ha;if(4>Ae)return rs(T,7,"Truncated header.");var ge=X[se+0]|X[se+1]<<8|X[se+2]<<16,xe=T.Od;if(xe.Rb=!(1&ge),xe.td=ge>>1&7,xe.yd=ge>>4&1,xe.ub=ge>>5,3<xe.td)return rs(T,3,"Incorrect keyframe parameters.");if(!xe.yd)return rs(T,4,"Frame not displayable.");se+=3,Ae-=3;var ye=T.Kc;if(xe.Rb){if(7>Ae)return rs(T,7,"cannot parse picture header");if(!ya(X,se,Ae))return rs(T,3,"Bad code word");ye.c=16383&(X[se+4]<<8|X[se+3]),ye.Td=X[se+4]>>6,ye.i=16383&(X[se+6]<<8|X[se+5]),ye.Ud=X[se+6]>>6,se+=7,Ae-=7,T.za=ye.c+15>>4,T.Ub=ye.i+15>>4,P.width=ye.c,P.height=ye.i,P.Da=0,P.j=0,P.v=0,P.va=P.width,P.o=P.height,P.da=0,P.ib=P.width,P.hb=P.height,P.U=P.width,P.T=P.height,s((ge=T.Pa).jb,0,255,ge.jb.length),e((ge=T.Qa)!=null),ge.Cb=0,ge.Bb=0,ge.Fb=1,s(ge.Zb,0,0,ge.Zb.length),s(ge.Lb,0,0,ge.Lb)}if(xe.ub>Ae)return rs(T,7,"bad partition length");te(ge=T.m,X,se,xe.ub),se+=xe.ub,Ae-=xe.ub,xe.Rb&&(ye.Ld=pe(ge),ye.Kd=pe(ge)),ye=T.Qa;var Ce,Ne=T.Pa;if(e(ge!=null),e(ye!=null),ye.Cb=pe(ge),ye.Cb){if(ye.Bb=pe(ge),pe(ge)){for(ye.Fb=pe(ge),Ce=0;4>Ce;++Ce)ye.Zb[Ce]=pe(ge)?re(ge,7):0;for(Ce=0;4>Ce;++Ce)ye.Lb[Ce]=pe(ge)?re(ge,6):0}if(ye.Bb)for(Ce=0;3>Ce;++Ce)Ne.jb[Ce]=pe(ge)?Y(ge,8):255}else ye.Bb=0;if(ge.Ka)return rs(T,3,"cannot parse segment header");if((ye=T.ed).zd=pe(ge),ye.Tb=Y(ge,6),ye.wb=Y(ge,3),ye.Pc=pe(ge),ye.Pc&&pe(ge)){for(Ne=0;4>Ne;++Ne)pe(ge)&&(ye.vd[Ne]=re(ge,6));for(Ne=0;4>Ne;++Ne)pe(ge)&&(ye.od[Ne]=re(ge,6))}if(T.L=ye.Tb==0?0:ye.zd?1:2,ge.Ka)return rs(T,3,"cannot parse filter header");var Me=Ae;if(Ae=Ce=se,se=Ce+Me,ye=Me,T.Xb=(1<<Y(T.m,2))-1,Me<3*(Ne=T.Xb))X=7;else{for(Ce+=3*Ne,ye-=3*Ne,Me=0;Me<Ne;++Me){var Ze=X[Ae+0]|X[Ae+1]<<8|X[Ae+2]<<16;Ze>ye&&(Ze=ye),te(T.Jc[+Me],X,Ce,Ze),Ce+=Ze,ye-=Ze,Ae+=3}te(T.Jc[+Ne],X,Ce,ye),X=Ce<se?0:5}if(X!=0)return rs(T,X,"cannot parse partitions");for(X=Y(Ce=T.m,7),Ae=pe(Ce)?re(Ce,4):0,se=pe(Ce)?re(Ce,4):0,ye=pe(Ce)?re(Ce,4):0,Ne=pe(Ce)?re(Ce,4):0,Ce=pe(Ce)?re(Ce,4):0,Me=T.Qa,Ze=0;4>Ze;++Ze){if(Me.Cb){var Ye=Me.Zb[Ze];Me.Fb||(Ye+=X)}else{if(0<Ze){T.pb[Ze]=T.pb[0];continue}Ye=X}var Ge=T.pb[Ze];Ge.Sc[0]=nh[Nn(Ye+Ae,127)],Ge.Sc[1]=sh[Nn(Ye+0,127)],Ge.Eb[0]=2*nh[Nn(Ye+se,127)],Ge.Eb[1]=101581*sh[Nn(Ye+ye,127)]>>16,8>Ge.Eb[1]&&(Ge.Eb[1]=8),Ge.Qc[0]=nh[Nn(Ye+Ne,117)],Ge.Qc[1]=sh[Nn(Ye+Ce,127)],Ge.lc=Ye+Ce}if(!xe.Rb)return rs(T,4,"Not a key frame.");for(pe(ge),xe=T.Pa,X=0;4>X;++X){for(Ae=0;8>Ae;++Ae)for(se=0;3>se;++se)for(ye=0;11>ye;++ye)Ne=he(ge,CA[X][Ae][se][ye])?Y(ge,8):Pl[X][Ae][se][ye],xe.Wc[X][Ae].Yb[se][ye]=Ne;for(Ae=0;17>Ae;++Ae)xe.Xc[X][Ae]=xe.Wc[X][ov[Ae]]}return T.kc=pe(ge),T.kc&&(T.Bd=Y(ge,8)),T.cb=1}function fd(T,P,X,se,Ae,ge,xe){var ye=P[Ae].Yb[X];for(X=0;16>Ae;++Ae){if(!he(T,ye[X+0]))return Ae;for(;!he(T,ye[X+1]);)if(ye=P[++Ae].Yb[0],X=0,Ae==16)return 16;var Ce=P[Ae+1].Yb;if(he(T,ye[X+2])){var Ne=T,Me=0;if(he(Ne,(Ye=ye)[(Ze=X)+3]))if(he(Ne,Ye[Ze+6])){for(ye=0,Ze=2*(Me=he(Ne,Ye[Ze+8]))+(Ye=he(Ne,Ye[Ze+9+Me])),Me=0,Ye=_s[Ze];Ye[ye];++ye)Me+=Me+he(Ne,Ye[ye]);Me+=3+(8<<Ze)}else he(Ne,Ye[Ze+7])?(Me=7+2*he(Ne,165),Me+=he(Ne,145)):Me=5+he(Ne,159);else Me=he(Ne,Ye[Ze+4])?3+he(Ne,Ye[Ze+5]):2;ye=Ce[2]}else Me=1,ye=Ce[1];Ce=xe+En[Ae],0>(Ne=T).b&&ve(Ne);var Ze,Ye=Ne.b,Ge=(Ze=Ne.Ca>>1)-(Ne.I>>Ye)>>31;--Ne.b,Ne.Ca+=Ge,Ne.Ca|=1,Ne.I-=(Ze+1&Ge)<<Ye,ge[Ce]=((Me^Ge)-Ge)*se[(0<Ae)+0]}return 16}function Cl(T){var P=T.rb[T.sb-1];P.la=0,P.Na=0,s(T.zc,0,0,T.zc.length),T.ja=0}function oA(T,P){if(T==null)return 0;if(P==null)return rs(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!Zc(T,P))return 0;if(e(T.cb),P.ac==null||P.ac(P)){P.ob&&(T.L=0);var X=Nc[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=P.v-X>>4,T.zb=P.j-X>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=P.o+15+X>>4,T.Hb=P.va+15+X>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var se=T.ed;for(X=0;4>X;++X){var Ae;if(T.Qa.Cb){var ge=T.Qa.Lb[X];T.Qa.Fb||(ge+=se.Tb)}else ge=se.Tb;for(Ae=0;1>=Ae;++Ae){var xe=T.gd[X][Ae],ye=ge;if(se.Pc&&(ye+=se.vd[0],Ae&&(ye+=se.od[0])),0<(ye=0>ye?0:63<ye?63:ye)){var Ce=ye;0<se.wb&&(Ce=4<se.wb?Ce>>2:Ce>>1)>9-se.wb&&(Ce=9-se.wb),1>Ce&&(Ce=1),xe.dd=Ce,xe.tc=2*ye+Ce,xe.ld=40<=ye?2:15<=ye?1:0}else xe.tc=0;xe.La=Ae}}}X=0}else rs(T,6,"Frame setup failed"),X=T.a;if(X=X==0){if(X){T.$c=0,0<T.Aa||(T.Ic=uv);e:{X=T.Ic,se=4*(Ce=T.za);var Ne=32*Ce,Me=Ce+1,Ze=0<T.L?Ce*(0<T.Aa?2:1):0,Ye=(T.Aa==2?2:1)*Ce;if((xe=se+832+(Ae=3*(16*X+Nc[T.L])/2*Ne)+(ge=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=xe)X=0;else{if(xe>T.Vb){if(T.Vb=0,T.Ec=a(xe),T.Fc=0,T.Ec==null){X=rs(T,1,"no memory during frame initialization.");break e}T.Vb=xe}xe=T.Ec,ye=T.Fc,T.Ac=xe,T.Bc=ye,ye+=se,T.Gd=i(Ne,js),T.Hd=0,T.rb=i(Me+1,Vr),T.sb=1,T.wa=Ze?i(Ze,Hr):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=Ce),e(!0),T.oc=xe,T.pc=ye,ye+=832,T.ya=i(Ye,Os),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=Ce),T.R=16*Ce,T.B=8*Ce,Ce=(Ne=Nc[T.L])*T.R,Ne=Ne/2*T.B,T.sa=xe,T.ta=ye+Ce,T.qa=T.sa,T.ra=T.ta+16*X*T.R+Ne,T.Ha=T.qa,T.Ia=T.ra+8*X*T.B+Ne,T.$c=0,ye+=Ae,T.mb=ge?xe:null,T.nb=ge?ye:null,e(ye+ge<=T.Fc+T.Vb),Cl(T),s(T.Ac,T.Bc,0,se),X=1}}if(X){if(P.ka=0,P.y=T.sa,P.O=T.ta,P.f=T.qa,P.N=T.ra,P.ea=T.Ha,P.Vd=T.Ia,P.fa=T.R,P.Rc=T.B,P.F=null,P.J=0,!wc){for(X=-255;255>=X;++X)Is[255+X]=0>X?-X:X;for(X=-1020;1020>=X;++X)Bo[1020+X]=-128>X?-128:127<X?127:X;for(X=-112;112>=X;++X)pu[112+X]=-16>X?-16:15<X?15:X;for(X=-255;510>=X;++X)mu[255+X]=0>X?0:255<X?255:X;wc=1}Ll=Bi,el=_l,tl=yo,Vs=Tn,Ui=Sl,Cs=El,mA=kl,Ul=Xo,yd=nu,Au=dA,du=ru,fu=hc,gA=pc,wd=Il,hu=lo,yc=Wa,xA=Hs,Es=md,fi[0]=Ka,fi[1]=hd,fi[2]=Co,fi[3]=pd,fi[4]=ki,fi[5]=Eo,fi[6]=Ai,fi[7]=Ii,fi[8]=Yo,fi[9]=Tl,Sc[0]=wo,Sc[1]=cA,Sc[2]=Ko,Sc[3]=tu,Sc[4]=Gn,Sc[5]=Wo,Sc[6]=bo,Ao[0]=_o,Ao[1]=lA,Ao[2]=uA,Ao[3]=Fi,Ao[4]=en,Ao[5]=Qs,Ao[6]=Nl,X=1}else X=0}X&&(X=function(Ge,xt){for(Ge.M=0;Ge.M<Ge.Va;++Ge.M){var it,Pe=Ge.Jc[Ge.M&Ge.Xb],Qe=Ge.m,At=Ge;for(it=0;it<At.za;++it){var vt=Qe,ht=At,$t=ht.Ac,Ot=ht.Bc+4*it,sr=ht.zc,zt=ht.ya[ht.aa+it];if(ht.Qa.Bb?zt.$b=he(vt,ht.Pa.jb[0])?2+he(vt,ht.Pa.jb[2]):he(vt,ht.Pa.jb[1]):zt.$b=0,ht.kc&&(zt.Ad=he(vt,ht.Bd)),zt.Za=!he(vt,145)+0,zt.Za){var yn=zt.Ob,Bn=0;for(ht=0;4>ht;++ht){var Wr,zr=sr[0+ht];for(Wr=0;4>Wr;++Wr){zr=Vm[$t[Ot+Wr]][zr];for(var On=xu[he(vt,zr[0])];0<On;)On=xu[2*On+he(vt,zr[On])];zr=-On,$t[Ot+Wr]=zr}n(yn,Bn,$t,Ot,4),Bn+=4,sr[0+ht]=zr}}else zr=he(vt,156)?he(vt,128)?1:3:he(vt,163)?2:0,zt.Ob[0]=zr,s($t,Ot,zr,4),s(sr,0,zr,4);zt.Dd=he(vt,142)?he(vt,114)?he(vt,183)?1:3:2:0}if(At.m.Ka)return rs(Ge,7,"Premature end-of-partition0 encountered.");for(;Ge.ja<Ge.za;++Ge.ja){if(At=Pe,vt=(Qe=Ge).rb[Qe.sb-1],$t=Qe.rb[Qe.sb+Qe.ja],it=Qe.ya[Qe.aa+Qe.ja],Ot=Qe.kc?it.Ad:0)vt.la=$t.la=0,it.Za||(vt.Na=$t.Na=0),it.Hc=0,it.Gc=0,it.ia=0;else{var kn,Rr;if(vt=$t,$t=At,Ot=Qe.Pa.Xc,sr=Qe.ya[Qe.aa+Qe.ja],zt=Qe.pb[sr.$b],ht=sr.ad,yn=0,Bn=Qe.rb[Qe.sb-1],zr=Wr=0,s(ht,yn,0,384),sr.Za)var qn=0,hr=Ot[3];else{On=a(16);var Sr=vt.Na+Bn.Na;if(Sr=ra($t,Ot[1],Sr,zt.Eb,0,On,0),vt.Na=Bn.Na=(0<Sr)+0,1<Sr)Ll(On,0,ht,yn);else{var vn=On[0]+3>>3;for(On=0;256>On;On+=16)ht[yn+On]=vn}qn=1,hr=Ot[0]}var wn=15&vt.la,Ea=15&Bn.la;for(On=0;4>On;++On){var aa=1&Ea;for(vn=Rr=0;4>vn;++vn)wn=wn>>1|(aa=(Sr=ra($t,hr,Sr=aa+(1&wn),zt.Sc,qn,ht,yn))>qn)<<7,Rr=Rr<<2|(3<Sr?3:1<Sr?2:ht[yn+0]!=0),yn+=16;wn>>=4,Ea=Ea>>1|aa<<7,Wr=(Wr<<8|Rr)>>>0}for(hr=wn,qn=Ea>>4,kn=0;4>kn;kn+=2){for(Rr=0,wn=vt.la>>4+kn,Ea=Bn.la>>4+kn,On=0;2>On;++On){for(aa=1&Ea,vn=0;2>vn;++vn)Sr=aa+(1&wn),wn=wn>>1|(aa=0<(Sr=ra($t,Ot[2],Sr,zt.Qc,0,ht,yn)))<<3,Rr=Rr<<2|(3<Sr?3:1<Sr?2:ht[yn+0]!=0),yn+=16;wn>>=2,Ea=Ea>>1|aa<<5}zr|=Rr<<4*kn,hr|=wn<<4<<kn,qn|=(240&Ea)<<kn}vt.la=hr,Bn.la=qn,sr.Hc=Wr,sr.Gc=zr,sr.ia=43690&zr?0:zt.ia,Ot=!(Wr|zr)}if(0<Qe.L&&(Qe.wa[Qe.Y+Qe.ja]=Qe.gd[it.$b][it.Za],Qe.wa[Qe.Y+Qe.ja].La|=!Ot),At.Ka)return rs(Ge,7,"Premature end-of-file encountered.")}if(Cl(Ge),Qe=xt,At=1,it=(Pe=Ge).D,vt=0<Pe.L&&Pe.M>=Pe.zb&&Pe.M<=Pe.Va,Pe.Aa==0)e:{if(it.M=Pe.M,it.uc=vt,Di(Pe,it),At=1,it=(Rr=Pe.D).Nb,vt=(zr=Nc[Pe.L])*Pe.R,$t=zr/2*Pe.B,On=16*it*Pe.R,vn=8*it*Pe.B,Ot=Pe.sa,sr=Pe.ta-vt+On,zt=Pe.qa,ht=Pe.ra-$t+vn,yn=Pe.Ha,Bn=Pe.Ia-$t+vn,Ea=(wn=Rr.M)==0,Wr=wn>=Pe.Va-1,Pe.Aa==2&&Di(Pe,Rr),Rr.uc)for(aa=(Sr=Pe).D.M,e(Sr.D.uc),Rr=Sr.yb;Rr<Sr.Hb;++Rr){qn=Rr,hr=aa;var Fs=(Ds=(As=Sr).D).Nb;kn=As.R;var Ds=Ds.wa[Ds.Y+qn],zs=As.sa,Fo=As.ta+16*Fs*kn+16*qn,In=Ds.dd,Gs=Ds.tc;if(Gs!=0)if(e(3<=Gs),As.L==1)0<qn&&yc(zs,Fo,kn,Gs+4),Ds.La&&Es(zs,Fo,kn,Gs),0<hr&&hu(zs,Fo,kn,Gs+4),Ds.La&&xA(zs,Fo,kn,Gs);else{var rl=As.B,wu=As.qa,_A=As.ra+8*Fs*rl+8*qn,bu=As.Ha,As=As.Ia+8*Fs*rl+8*qn;Fs=Ds.ld,0<qn&&(Ul(zs,Fo,kn,Gs+4,In,Fs),Au(wu,_A,bu,As,rl,Gs+4,In,Fs)),Ds.La&&(fu(zs,Fo,kn,Gs,In,Fs),wd(wu,_A,bu,As,rl,Gs,In,Fs)),0<hr&&(mA(zs,Fo,kn,Gs+4,In,Fs),yd(wu,_A,bu,As,rl,Gs+4,In,Fs)),Ds.La&&(du(zs,Fo,kn,Gs,In,Fs),gA(wu,_A,bu,As,rl,Gs,In,Fs))}}if(Pe.ia&&alert("todo:DitherRow"),Qe.put!=null){if(Rr=16*wn,wn=16*(wn+1),Ea?(Qe.y=Pe.sa,Qe.O=Pe.ta+On,Qe.f=Pe.qa,Qe.N=Pe.ra+vn,Qe.ea=Pe.Ha,Qe.W=Pe.Ia+vn):(Rr-=zr,Qe.y=Ot,Qe.O=sr,Qe.f=zt,Qe.N=ht,Qe.ea=yn,Qe.W=Bn),Wr||(wn-=zr),wn>Qe.o&&(wn=Qe.o),Qe.F=null,Qe.J=null,Pe.Fa!=null&&0<Pe.Fa.length&&Rr<wn&&(Qe.J=au(Pe,Qe,Rr,wn-Rr),Qe.F=Pe.mb,Qe.F==null&&Qe.F.length==0)){At=rs(Pe,3,"Could not decode alpha data.");break e}Rr<Qe.j&&(zr=Qe.j-Rr,Rr=Qe.j,e(!(1&zr)),Qe.O+=Pe.R*zr,Qe.N+=Pe.B*(zr>>1),Qe.W+=Pe.B*(zr>>1),Qe.F!=null&&(Qe.J+=Qe.width*zr)),Rr<wn&&(Qe.O+=Qe.v,Qe.N+=Qe.v>>1,Qe.W+=Qe.v>>1,Qe.F!=null&&(Qe.J+=Qe.v),Qe.ka=Rr-Qe.j,Qe.U=Qe.va-Qe.v,Qe.T=wn-Rr,At=Qe.put(Qe))}it+1!=Pe.Ic||Wr||(n(Pe.sa,Pe.ta-vt,Ot,sr+16*Pe.R,vt),n(Pe.qa,Pe.ra-$t,zt,ht+8*Pe.B,$t),n(Pe.Ha,Pe.Ia-$t,yn,Bn+8*Pe.B,$t))}if(!At)return rs(Ge,6,"Output aborted.")}return 1}(T,P)),P.bc!=null&&P.bc(P),X&=1}return X?(T.cb=0,X):0}function Pa(T,P,X,se,Ae){Ae=T[P+X+32*se]+(Ae>>3),T[P+X+32*se]=-256&Ae?0>Ae?0:255:Ae}function eu(T,P,X,se,Ae,ge){Pa(T,P,0,X,se+Ae),Pa(T,P,1,X,se+ge),Pa(T,P,2,X,se-ge),Pa(T,P,3,X,se-Ae)}function xn(T){return(20091*T>>16)+T}function Oa(T,P,X,se){var Ae,ge=0,xe=a(16);for(Ae=0;4>Ae;++Ae){var ye=T[P+0]+T[P+8],Ce=T[P+0]-T[P+8],Ne=(35468*T[P+4]>>16)-xn(T[P+12]),Me=xn(T[P+4])+(35468*T[P+12]>>16);xe[ge+0]=ye+Me,xe[ge+1]=Ce+Ne,xe[ge+2]=Ce-Ne,xe[ge+3]=ye-Me,ge+=4,P++}for(Ae=ge=0;4>Ae;++Ae)ye=(T=xe[ge+0]+4)+xe[ge+8],Ce=T-xe[ge+8],Ne=(35468*xe[ge+4]>>16)-xn(xe[ge+12]),Pa(X,se,0,0,ye+(Me=xn(xe[ge+4])+(35468*xe[ge+12]>>16))),Pa(X,se,1,0,Ce+Ne),Pa(X,se,2,0,Ce-Ne),Pa(X,se,3,0,ye-Me),ge++,se+=32}function El(T,P,X,se){var Ae=T[P+0]+4,ge=35468*T[P+4]>>16,xe=xn(T[P+4]),ye=35468*T[P+1]>>16;eu(X,se,0,Ae+xe,T=xn(T[P+1]),ye),eu(X,se,1,Ae+ge,T,ye),eu(X,se,2,Ae-ge,T,ye),eu(X,se,3,Ae-xe,T,ye)}function _l(T,P,X,se,Ae){Oa(T,P,X,se),Ae&&Oa(T,P+16,X,se+4)}function yo(T,P,X,se){el(T,P+0,X,se,1),el(T,P+32,X,se+128,1)}function Tn(T,P,X,se){var Ae;for(T=T[P+0]+4,Ae=0;4>Ae;++Ae)for(P=0;4>P;++P)Pa(X,se,P,Ae,T)}function Sl(T,P,X,se){T[P+0]&&Vs(T,P+0,X,se),T[P+16]&&Vs(T,P+16,X,se+4),T[P+32]&&Vs(T,P+32,X,se+128),T[P+48]&&Vs(T,P+48,X,se+128+4)}function Bi(T,P,X,se){var Ae,ge=a(16);for(Ae=0;4>Ae;++Ae){var xe=T[P+0+Ae]+T[P+12+Ae],ye=T[P+4+Ae]+T[P+8+Ae],Ce=T[P+4+Ae]-T[P+8+Ae],Ne=T[P+0+Ae]-T[P+12+Ae];ge[0+Ae]=xe+ye,ge[8+Ae]=xe-ye,ge[4+Ae]=Ne+Ce,ge[12+Ae]=Ne-Ce}for(Ae=0;4>Ae;++Ae)xe=(T=ge[0+4*Ae]+3)+ge[3+4*Ae],ye=ge[1+4*Ae]+ge[2+4*Ae],Ce=ge[1+4*Ae]-ge[2+4*Ae],Ne=T-ge[3+4*Ae],X[se+0]=xe+ye>>3,X[se+16]=Ne+Ce>>3,X[se+32]=xe-ye>>3,X[se+48]=Ne-Ce>>3,se+=64}function qo(T,P,X){var se,Ae=P-32,ge=ba,xe=255-T[Ae-1];for(se=0;se<X;++se){var ye,Ce=ge,Ne=xe+T[P-1];for(ye=0;ye<X;++ye)T[P+ye]=Ce[Ne+T[Ae+ye]];P+=32}}function hd(T,P){qo(T,P,4)}function lA(T,P){qo(T,P,8)}function cA(T,P){qo(T,P,16)}function Ko(T,P){var X;for(X=0;16>X;++X)n(T,P+32*X,T,P-32,16)}function tu(T,P){var X;for(X=16;0<X;--X)s(T,P,T[P-1],16),P+=32}function $o(T,P,X){var se;for(se=0;16>se;++se)s(P,X+32*se,T,16)}function wo(T,P){var X,se=16;for(X=0;16>X;++X)se+=T[P-1+32*X]+T[P+X-32];$o(se>>5,T,P)}function Gn(T,P){var X,se=8;for(X=0;16>X;++X)se+=T[P-1+32*X];$o(se>>4,T,P)}function Wo(T,P){var X,se=8;for(X=0;16>X;++X)se+=T[P+X-32];$o(se>>4,T,P)}function bo(T,P){$o(128,T,P)}function xr(T,P,X){return T+2*P+X+2>>2}function Co(T,P){var X,se=P-32;for(se=new Uint8Array([xr(T[se-1],T[se+0],T[se+1]),xr(T[se+0],T[se+1],T[se+2]),xr(T[se+1],T[se+2],T[se+3]),xr(T[se+2],T[se+3],T[se+4])]),X=0;4>X;++X)n(T,P+32*X,se,0,se.length)}function pd(T,P){var X=T[P-1],se=T[P-1+32],Ae=T[P-1+64],ge=T[P-1+96];de(T,P+0,16843009*xr(T[P-1-32],X,se)),de(T,P+32,16843009*xr(X,se,Ae)),de(T,P+64,16843009*xr(se,Ae,ge)),de(T,P+96,16843009*xr(Ae,ge,ge))}function Ka(T,P){var X,se=4;for(X=0;4>X;++X)se+=T[P+X-32]+T[P-1+32*X];for(se>>=3,X=0;4>X;++X)s(T,P+32*X,se,4)}function ki(T,P){var X=T[P-1+0],se=T[P-1+32],Ae=T[P-1+64],ge=T[P-1-32],xe=T[P+0-32],ye=T[P+1-32],Ce=T[P+2-32],Ne=T[P+3-32];T[P+0+96]=xr(se,Ae,T[P-1+96]),T[P+1+96]=T[P+0+64]=xr(X,se,Ae),T[P+2+96]=T[P+1+64]=T[P+0+32]=xr(ge,X,se),T[P+3+96]=T[P+2+64]=T[P+1+32]=T[P+0+0]=xr(xe,ge,X),T[P+3+64]=T[P+2+32]=T[P+1+0]=xr(ye,xe,ge),T[P+3+32]=T[P+2+0]=xr(Ce,ye,xe),T[P+3+0]=xr(Ne,Ce,ye)}function Ai(T,P){var X=T[P+1-32],se=T[P+2-32],Ae=T[P+3-32],ge=T[P+4-32],xe=T[P+5-32],ye=T[P+6-32],Ce=T[P+7-32];T[P+0+0]=xr(T[P+0-32],X,se),T[P+1+0]=T[P+0+32]=xr(X,se,Ae),T[P+2+0]=T[P+1+32]=T[P+0+64]=xr(se,Ae,ge),T[P+3+0]=T[P+2+32]=T[P+1+64]=T[P+0+96]=xr(Ae,ge,xe),T[P+3+32]=T[P+2+64]=T[P+1+96]=xr(ge,xe,ye),T[P+3+64]=T[P+2+96]=xr(xe,ye,Ce),T[P+3+96]=xr(ye,Ce,Ce)}function Eo(T,P){var X=T[P-1+0],se=T[P-1+32],Ae=T[P-1+64],ge=T[P-1-32],xe=T[P+0-32],ye=T[P+1-32],Ce=T[P+2-32],Ne=T[P+3-32];T[P+0+0]=T[P+1+64]=ge+xe+1>>1,T[P+1+0]=T[P+2+64]=xe+ye+1>>1,T[P+2+0]=T[P+3+64]=ye+Ce+1>>1,T[P+3+0]=Ce+Ne+1>>1,T[P+0+96]=xr(Ae,se,X),T[P+0+64]=xr(se,X,ge),T[P+0+32]=T[P+1+96]=xr(X,ge,xe),T[P+1+32]=T[P+2+96]=xr(ge,xe,ye),T[P+2+32]=T[P+3+96]=xr(xe,ye,Ce),T[P+3+32]=xr(ye,Ce,Ne)}function Ii(T,P){var X=T[P+0-32],se=T[P+1-32],Ae=T[P+2-32],ge=T[P+3-32],xe=T[P+4-32],ye=T[P+5-32],Ce=T[P+6-32],Ne=T[P+7-32];T[P+0+0]=X+se+1>>1,T[P+1+0]=T[P+0+64]=se+Ae+1>>1,T[P+2+0]=T[P+1+64]=Ae+ge+1>>1,T[P+3+0]=T[P+2+64]=ge+xe+1>>1,T[P+0+32]=xr(X,se,Ae),T[P+1+32]=T[P+0+96]=xr(se,Ae,ge),T[P+2+32]=T[P+1+96]=xr(Ae,ge,xe),T[P+3+32]=T[P+2+96]=xr(ge,xe,ye),T[P+3+64]=xr(xe,ye,Ce),T[P+3+96]=xr(ye,Ce,Ne)}function Tl(T,P){var X=T[P-1+0],se=T[P-1+32],Ae=T[P-1+64],ge=T[P-1+96];T[P+0+0]=X+se+1>>1,T[P+2+0]=T[P+0+32]=se+Ae+1>>1,T[P+2+32]=T[P+0+64]=Ae+ge+1>>1,T[P+1+0]=xr(X,se,Ae),T[P+3+0]=T[P+1+32]=xr(se,Ae,ge),T[P+3+32]=T[P+1+64]=xr(Ae,ge,ge),T[P+3+64]=T[P+2+64]=T[P+0+96]=T[P+1+96]=T[P+2+96]=T[P+3+96]=ge}function Yo(T,P){var X=T[P-1+0],se=T[P-1+32],Ae=T[P-1+64],ge=T[P-1+96],xe=T[P-1-32],ye=T[P+0-32],Ce=T[P+1-32],Ne=T[P+2-32];T[P+0+0]=T[P+2+32]=X+xe+1>>1,T[P+0+32]=T[P+2+64]=se+X+1>>1,T[P+0+64]=T[P+2+96]=Ae+se+1>>1,T[P+0+96]=ge+Ae+1>>1,T[P+3+0]=xr(ye,Ce,Ne),T[P+2+0]=xr(xe,ye,Ce),T[P+1+0]=T[P+3+32]=xr(X,xe,ye),T[P+1+32]=T[P+3+64]=xr(se,X,xe),T[P+1+64]=T[P+3+96]=xr(Ae,se,X),T[P+1+96]=xr(ge,Ae,se)}function uA(T,P){var X;for(X=0;8>X;++X)n(T,P+32*X,T,P-32,8)}function Fi(T,P){var X;for(X=0;8>X;++X)s(T,P,T[P-1],8),P+=32}function $a(T,P,X){var se;for(se=0;8>se;++se)s(P,X+32*se,T,8)}function _o(T,P){var X,se=8;for(X=0;8>X;++X)se+=T[P+X-32]+T[P-1+32*X];$a(se>>4,T,P)}function Qs(T,P){var X,se=4;for(X=0;8>X;++X)se+=T[P+X-32];$a(se>>3,T,P)}function en(T,P){var X,se=4;for(X=0;8>X;++X)se+=T[P-1+32*X];$a(se>>3,T,P)}function Nl(T,P){$a(128,T,P)}function So(T,P,X){var se=T[P-X],Ae=T[P+0],ge=3*(Ae-se)+_0[1020+T[P-2*X]-T[P+X]],xe=vA[112+(ge+4>>3)];T[P-X]=ba[255+se+vA[112+(ge+3>>3)]],T[P+0]=ba[255+Ae-xe]}function AA(T,P,X,se){var Ae=T[P+0],ge=T[P+X];return ko[255+T[P-2*X]-T[P-X]]>se||ko[255+ge-Ae]>se}function dc(T,P,X,se){return 4*ko[255+T[P-X]-T[P+0]]+ko[255+T[P-2*X]-T[P+X]]<=se}function fc(T,P,X,se,Ae){var ge=T[P-3*X],xe=T[P-2*X],ye=T[P-X],Ce=T[P+0],Ne=T[P+X],Me=T[P+2*X],Ze=T[P+3*X];return 4*ko[255+ye-Ce]+ko[255+xe-Ne]>se?0:ko[255+T[P-4*X]-ge]<=Ae&&ko[255+ge-xe]<=Ae&&ko[255+xe-ye]<=Ae&&ko[255+Ze-Me]<=Ae&&ko[255+Me-Ne]<=Ae&&ko[255+Ne-Ce]<=Ae}function lo(T,P,X,se){var Ae=2*se+1;for(se=0;16>se;++se)dc(T,P+se,X,Ae)&&So(T,P+se,X)}function Wa(T,P,X,se){var Ae=2*se+1;for(se=0;16>se;++se)dc(T,P+se*X,1,Ae)&&So(T,P+se*X,1)}function Hs(T,P,X,se){var Ae;for(Ae=3;0<Ae;--Ae)lo(T,P+=4*X,X,se)}function md(T,P,X,se){var Ae;for(Ae=3;0<Ae;--Ae)Wa(T,P+=4,X,se)}function Bl(T,P,X,se,Ae,ge,xe,ye){for(ge=2*ge+1;0<Ae--;){if(fc(T,P,X,ge,xe))if(AA(T,P,X,ye))So(T,P,X);else{var Ce=T,Ne=P,Me=X,Ze=Ce[Ne-2*Me],Ye=Ce[Ne-Me],Ge=Ce[Ne+0],xt=Ce[Ne+Me],it=Ce[Ne+2*Me],Pe=27*(At=_0[1020+3*(Ge-Ye)+_0[1020+Ze-xt]])+63>>7,Qe=18*At+63>>7,At=9*At+63>>7;Ce[Ne-3*Me]=ba[255+Ce[Ne-3*Me]+At],Ce[Ne-2*Me]=ba[255+Ze+Qe],Ce[Ne-Me]=ba[255+Ye+Pe],Ce[Ne+0]=ba[255+Ge-Pe],Ce[Ne+Me]=ba[255+xt-Qe],Ce[Ne+2*Me]=ba[255+it-At]}P+=se}}function ja(T,P,X,se,Ae,ge,xe,ye){for(ge=2*ge+1;0<Ae--;){if(fc(T,P,X,ge,xe))if(AA(T,P,X,ye))So(T,P,X);else{var Ce=T,Ne=P,Me=X,Ze=Ce[Ne-Me],Ye=Ce[Ne+0],Ge=Ce[Ne+Me],xt=vA[112+((it=3*(Ye-Ze))+4>>3)],it=vA[112+(it+3>>3)],Pe=xt+1>>1;Ce[Ne-2*Me]=ba[255+Ce[Ne-2*Me]+Pe],Ce[Ne-Me]=ba[255+Ze+it],Ce[Ne+0]=ba[255+Ye-xt],Ce[Ne+Me]=ba[255+Ge-Pe]}P+=se}}function kl(T,P,X,se,Ae,ge){Bl(T,P,X,1,16,se,Ae,ge)}function Xo(T,P,X,se,Ae,ge){Bl(T,P,1,X,16,se,Ae,ge)}function ru(T,P,X,se,Ae,ge){var xe;for(xe=3;0<xe;--xe)ja(T,P+=4*X,X,1,16,se,Ae,ge)}function hc(T,P,X,se,Ae,ge){var xe;for(xe=3;0<xe;--xe)ja(T,P+=4,1,X,16,se,Ae,ge)}function nu(T,P,X,se,Ae,ge,xe,ye){Bl(T,P,Ae,1,8,ge,xe,ye),Bl(X,se,Ae,1,8,ge,xe,ye)}function dA(T,P,X,se,Ae,ge,xe,ye){Bl(T,P,1,Ae,8,ge,xe,ye),Bl(X,se,1,Ae,8,ge,xe,ye)}function pc(T,P,X,se,Ae,ge,xe,ye){ja(T,P+4*Ae,Ae,1,8,ge,xe,ye),ja(X,se+4*Ae,Ae,1,8,ge,xe,ye)}function Il(T,P,X,se,Ae,ge,xe,ye){ja(T,P+4,1,Ae,8,ge,xe,ye),ja(X,se+4,1,Ae,8,ge,xe,ye)}function mc(){this.ba=new ls,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Qr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function su(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Fl(){this.ua=0,this.Wa=new Ee,this.vb=new Ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new L}function gd(){this.xb=this.a=0,this.l=new ea,this.ca=new ls,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Fl,this.ab=0,this.gc=i(4,gc),this.Oc=0}function Jo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ea,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Dl(T,P,X,se,Ae,ge,xe){for(T=T==null?0:T[P+0],P=0;P<xe;++P)Ae[ge+P]=T+X[se+P]&255,T=Ae[ge+P]}function xc(T,P,X,se,Ae,ge,xe){var ye;if(T==null)Dl(null,null,X,se,Ae,ge,xe);else for(ye=0;ye<xe;++ye)Ae[ge+ye]=T[P+ye]+X[se+ye]&255}function Ya(T,P,X,se,Ae,ge,xe){if(T==null)Dl(null,null,X,se,Ae,ge,xe);else{var ye,Ce=T[P+0],Ne=Ce,Me=Ce;for(ye=0;ye<xe;++ye)Ne=Me+(Ce=T[P+ye])-Ne,Me=X[se+ye]+(-256&Ne?0>Ne?0:255:Ne)&255,Ne=Ce,Ae[ge+ye]=Me}}function au(T,P,X,se){var Ae=P.width,ge=P.o;if(e(T!=null&&P!=null),0>X||0>=se||X+se>ge)return null;if(!T.Cc){if(T.ga==null){var xe;if(T.ga=new Jo,(xe=T.ga==null)||(xe=P.width*P.o,e(T.Gb.length==0),T.Gb=a(xe),T.Uc=0,T.Gb==null?xe=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,xe=1),xe=!xe),!xe){xe=T.ga;var ye=T.Fa,Ce=T.P,Ne=T.qc,Me=T.mb,Ze=T.nb,Ye=Ce+1,Ge=Ne-1,xt=xe.l;if(e(ye!=null&&Me!=null&&P!=null),Ol[0]=null,Ol[1]=Dl,Ol[2]=xc,Ol[3]=Ya,xe.ca=Me,xe.tb=Ze,xe.c=P.width,xe.i=P.height,e(0<xe.c&&0<xe.i),1>=Ne)P=0;else if(xe.$a=ye[Ce+0]>>0&3,xe.Z=ye[Ce+0]>>2&3,xe.Lc=ye[Ce+0]>>4&3,Ce=ye[Ce+0]>>6&3,0>xe.$a||1<xe.$a||4<=xe.Z||1<xe.Lc||Ce)P=0;else if(xt.put=Bs,xt.ac=es,xt.bc=Ua,xt.ma=xe,xt.width=P.width,xt.height=P.height,xt.Da=P.Da,xt.v=P.v,xt.va=P.va,xt.j=P.j,xt.o=P.o,xe.$a)e:{e(xe.$a==1),P=nt();t:for(;;){if(P==null){P=0;break e}if(e(xe!=null),xe.mc=P,P.c=xe.c,P.i=xe.i,P.l=xe.l,P.l.ma=xe,P.l.width=xe.c,P.l.height=xe.i,P.a=0,V(P.m,ye,Ye,Ge),!Ve(xe.c,xe.i,1,P,null)||(P.ab==1&&P.gc[0].hc==3&&_e(P.s)?(xe.ic=1,ye=P.c*P.i,P.Ta=null,P.Ua=0,P.V=a(ye),P.Ba=0,P.V==null?(P.a=1,P=0):P=1):(xe.ic=0,P=Xe(P,xe.c)),!P))break t;P=1;break e}xe.mc=null,P=0}else P=Ge>=xe.c*xe.i;xe=!P}if(xe)return null;T.ga.Lc!=1?T.Ga=0:se=ge-X}e(T.ga!=null),e(X+se<=ge);e:{if(P=(ye=T.ga).c,ge=ye.l.o,ye.$a==0){if(Ye=T.rc,Ge=T.Vc,xt=T.Fa,Ce=T.P+1+X*P,Ne=T.mb,Me=T.nb+X*P,e(Ce<=T.P+T.qc),ye.Z!=0)for(e(Ol[ye.Z]!=null),xe=0;xe<se;++xe)Ol[ye.Z](Ye,Ge,xt,Ce,Ne,Me,P),Ye=Ne,Ge=Me,Me+=P,Ce+=P;else for(xe=0;xe<se;++xe)n(Ne,Me,xt,Ce,P),Ye=Ne,Ge=Me,Me+=P,Ce+=P;T.rc=Ye,T.Vc=Ge}else{if(e(ye.mc!=null),P=X+se,e((xe=ye.mc)!=null),e(P<=xe.i),xe.C>=P)P=1;else if(ye.ic||ze(),ye.ic){ye=xe.V,Ye=xe.Ba,Ge=xe.c;var it=xe.i,Pe=(xt=1,Ce=xe.$/Ge,Ne=xe.$%Ge,Me=xe.m,Ze=xe.s,xe.$),Qe=Ge*it,At=Ge*P,vt=Ze.wc,ht=Pe<At?ts(Ze,Ne,Ce):null;e(Pe<=Qe),e(P<=it),e(_e(Ze));t:for(;;){for(;!Me.h&&Pe<At;){if(Ne&vt||(ht=ts(Ze,Ne,Ce)),e(ht!=null),le(Me),256>(it=Ln(ht.G[0],ht.H[0],Me)))ye[Ye+Pe]=it,++Pe,++Ne>=Ge&&(Ne=0,++Ce<=P&&!(Ce%16)&&Te(xe,Ce));else{if(!(280>it)){xt=0;break t}it=gn(it-256,Me);var $t,Ot=Ln(ht.G[4],ht.H[4],Me);if(le(Me),!(Pe>=(Ot=ln(Ge,Ot=gn(Ot,Me)))&&Qe-Pe>=it)){xt=0;break t}for($t=0;$t<it;++$t)ye[Ye+Pe+$t]=ye[Ye+Pe+$t-Ot];for(Pe+=it,Ne+=it;Ne>=Ge;)Ne-=Ge,++Ce<=P&&!(Ce%16)&&Te(xe,Ce);Pe<At&&Ne&vt&&(ht=ts(Ze,Ne,Ce))}e(Me.h==Z(Me))}Te(xe,Ce>P?P:Ce);break t}!xt||Me.h&&Pe<Qe?(xt=0,xe.a=Me.h?5:3):xe.$=Pe,P=xt}else P=ke(xe,xe.V,xe.Ba,xe.c,xe.i,P,et);if(!P){se=0;break e}}X+se>=ge&&(T.Cc=1),se=1}if(!se)return null;if(T.Cc&&((se=T.ga)!=null&&(se.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+X*Ae}function G(T,P,X,se,Ae,ge){for(;0<Ae--;){var xe,ye=T,Ce=P+(X?1:0),Ne=T,Me=P+(X?0:3);for(xe=0;xe<se;++xe){var Ze=Ne[Me+4*xe];Ze!=255&&(Ze*=32897,ye[Ce+4*xe+0]=ye[Ce+4*xe+0]*Ze>>23,ye[Ce+4*xe+1]=ye[Ce+4*xe+1]*Ze>>23,ye[Ce+4*xe+2]=ye[Ce+4*xe+2]*Ze>>23)}P+=ge}}function fe(T,P,X,se,Ae){for(;0<se--;){var ge;for(ge=0;ge<X;++ge){var xe=T[P+2*ge+0],ye=15&(Ne=T[P+2*ge+1]),Ce=4369*ye,Ne=(240&Ne|Ne>>4)*Ce>>16;T[P+2*ge+0]=(240&xe|xe>>4)*Ce>>16&240|(15&xe|xe<<4)*Ce>>16>>4&15,T[P+2*ge+1]=240&Ne|ye}P+=Ae}}function Fe(T,P,X,se,Ae,ge,xe,ye){var Ce,Ne,Me=255;for(Ne=0;Ne<Ae;++Ne){for(Ce=0;Ce<se;++Ce){var Ze=T[P+Ce];ge[xe+4*Ce]=Ze,Me&=Ze}P+=X,xe+=ye}return Me!=255}function Ue(T,P,X,se,Ae){var ge;for(ge=0;ge<Ae;++ge)X[se+ge]=T[P+ge]>>8}function ze(){co=G,Xr=fe,Jr=Fe,ns=Ue}function lt(T,P,X){_[T]=function(se,Ae,ge,xe,ye,Ce,Ne,Me,Ze,Ye,Ge,xt,it,Pe,Qe,At,vt){var ht,$t=vt-1>>1,Ot=ye[Ce+0]|Ne[Me+0]<<16,sr=Ze[Ye+0]|Ge[xt+0]<<16;e(se!=null);var zt=3*Ot+sr+131074>>2;for(P(se[Ae+0],255&zt,zt>>16,it,Pe),ge!=null&&(zt=3*sr+Ot+131074>>2,P(ge[xe+0],255&zt,zt>>16,Qe,At)),ht=1;ht<=$t;++ht){var yn=ye[Ce+ht]|Ne[Me+ht]<<16,Bn=Ze[Ye+ht]|Ge[xt+ht]<<16,Wr=Ot+yn+sr+Bn+524296,zr=Wr+2*(yn+sr)>>3;zt=zr+Ot>>1,Ot=(Wr=Wr+2*(Ot+Bn)>>3)+yn>>1,P(se[Ae+2*ht-1],255&zt,zt>>16,it,Pe+(2*ht-1)*X),P(se[Ae+2*ht-0],255&Ot,Ot>>16,it,Pe+(2*ht-0)*X),ge!=null&&(zt=Wr+sr>>1,Ot=zr+Bn>>1,P(ge[xe+2*ht-1],255&zt,zt>>16,Qe,At+(2*ht-1)*X),P(ge[xe+2*ht+0],255&Ot,Ot>>16,Qe,At+(2*ht+0)*X)),Ot=yn,sr=Bn}1&vt||(zt=3*Ot+sr+131074>>2,P(se[Ae+vt-1],255&zt,zt>>16,it,Pe+(vt-1)*X),ge!=null&&(zt=3*sr+Ot+131074>>2,P(ge[xe+vt-1],255&zt,zt>>16,Qe,At+(vt-1)*X)))}}function _t(){Ca[Xa]=Tc,Ca[bd]=jl,Ca[Ml]=vu,Ca[th]=N0,Ca[yA]=B0,Ca[bc]=_d,Ca[S0]=k0,Ca[rh]=jl,Ca[gu]=N0,Ca[Cc]=B0,Ca[Cd]=_d}function Vt(T){return T&-16384?0>T?0:255:T>>ZC}function k(T,P){return Vt((19077*T>>8)+(26149*P>>8)-14234)}function ee(T,P,X){return Vt((19077*T>>8)-(6419*P>>8)-(13320*X>>8)+8708)}function ie(T,P){return Vt((19077*T>>8)+(33050*P>>8)-17685)}function we(T,P,X,se,Ae){se[Ae+0]=k(T,X),se[Ae+1]=ee(T,P,X),se[Ae+2]=ie(T,P)}function He(T,P,X,se,Ae){se[Ae+0]=ie(T,P),se[Ae+1]=ee(T,P,X),se[Ae+2]=k(T,X)}function tt(T,P,X,se,Ae){var ge=ee(T,P,X);P=ge<<3&224|ie(T,P)>>3,se[Ae+0]=248&k(T,X)|ge>>5,se[Ae+1]=P}function St(T,P,X,se,Ae){var ge=240&ie(T,P)|15;se[Ae+0]=240&k(T,X)|ee(T,P,X)>>4,se[Ae+1]=ge}function vr(T,P,X,se,Ae){se[Ae+0]=255,we(T,P,X,se,Ae+1)}function tn(T,P,X,se,Ae){He(T,P,X,se,Ae),se[Ae+3]=255}function Dr(T,P,X,se,Ae){we(T,P,X,se,Ae),se[Ae+3]=255}function Nn(T,P){return 0>T?0:T>P?P:T}function Pn(T,P,X){_[T]=function(se,Ae,ge,xe,ye,Ce,Ne,Me,Ze){for(var Ye=Me+(-2&Ze)*X;Me!=Ye;)P(se[Ae+0],ge[xe+0],ye[Ce+0],Ne,Me),P(se[Ae+1],ge[xe+0],ye[Ce+0],Ne,Me+X),Ae+=2,++xe,++Ce,Me+=2*X;1&Ze&&P(se[Ae+0],ge[xe+0],ye[Ce+0],Ne,Me)}}function To(T,P,X){return X==0?T==0?P==0?6:5:P==0?4:0:X}function ks(T,P,X,se,Ae){switch(T>>>30){case 3:el(P,X,se,Ae,0);break;case 2:Cs(P,X,se,Ae);break;case 1:Vs(P,X,se,Ae)}}function Di(T,P){var X,se,Ae=P.M,ge=P.Nb,xe=T.oc,ye=T.pc+40,Ce=T.oc,Ne=T.pc+584,Me=T.oc,Ze=T.pc+600;for(X=0;16>X;++X)xe[ye+32*X-1]=129;for(X=0;8>X;++X)Ce[Ne+32*X-1]=129,Me[Ze+32*X-1]=129;for(0<Ae?xe[ye-1-32]=Ce[Ne-1-32]=Me[Ze-1-32]=129:(s(xe,ye-32-1,127,21),s(Ce,Ne-32-1,127,9),s(Me,Ze-32-1,127,9)),se=0;se<T.za;++se){var Ye=P.ya[P.aa+se];if(0<se){for(X=-1;16>X;++X)n(xe,ye+32*X-4,xe,ye+32*X+12,4);for(X=-1;8>X;++X)n(Ce,Ne+32*X-4,Ce,Ne+32*X+4,4),n(Me,Ze+32*X-4,Me,Ze+32*X+4,4)}var Ge=T.Gd,xt=T.Hd+se,it=Ye.ad,Pe=Ye.Hc;if(0<Ae&&(n(xe,ye-32,Ge[xt].y,0,16),n(Ce,Ne-32,Ge[xt].f,0,8),n(Me,Ze-32,Ge[xt].ea,0,8)),Ye.Za){var Qe=xe,At=ye-32+16;for(0<Ae&&(se>=T.za-1?s(Qe,At,Ge[xt].y[15],4):n(Qe,At,Ge[xt+1].y,0,4)),X=0;4>X;X++)Qe[At+128+X]=Qe[At+256+X]=Qe[At+384+X]=Qe[At+0+X];for(X=0;16>X;++X,Pe<<=2)Qe=xe,At=ye+EA[X],fi[Ye.Ob[X]](Qe,At),ks(Pe,it,16*+X,Qe,At)}else if(Qe=To(se,Ae,Ye.Ob[0]),Sc[Qe](xe,ye),Pe!=0)for(X=0;16>X;++X,Pe<<=2)ks(Pe,it,16*+X,xe,ye+EA[X]);for(X=Ye.Gc,Qe=To(se,Ae,Ye.Dd),Ao[Qe](Ce,Ne),Ao[Qe](Me,Ze),Pe=it,Qe=Ce,At=Ne,255&(Ye=X>>0)&&(170&Ye?tl(Pe,256,Qe,At):Ui(Pe,256,Qe,At)),Ye=Me,Pe=Ze,255&(X>>=8)&&(170&X?tl(it,320,Ye,Pe):Ui(it,320,Ye,Pe)),Ae<T.Ub-1&&(n(Ge[xt].y,0,xe,ye+480,16),n(Ge[xt].f,0,Ce,Ne+224,8),n(Ge[xt].ea,0,Me,Ze+224,8)),X=8*ge*T.B,Ge=T.sa,xt=T.ta+16*se+16*ge*T.R,it=T.qa,Ye=T.ra+8*se+X,Pe=T.Ha,Qe=T.Ia+8*se+X,X=0;16>X;++X)n(Ge,xt+X*T.R,xe,ye+32*X,16);for(X=0;8>X;++X)n(it,Ye+X*T.B,Ce,Ne+32*X,8),n(Pe,Qe+X*T.B,Me,Ze+32*X,8)}}function Rl(T,P,X,se,Ae,ge,xe,ye,Ce){var Ne=[0],Me=[0],Ze=0,Ye=Ce!=null?Ce.kd:0,Ge=Ce??new su;if(T==null||12>X)return 7;Ge.data=T,Ge.w=P,Ge.ha=X,P=[P],X=[X],Ge.gb=[Ge.gb];e:{var xt=P,it=X,Pe=Ge.gb;if(e(T!=null),e(it!=null),e(Pe!=null),Pe[0]=0,12<=it[0]&&!r(T,xt[0],"RIFF")){if(r(T,xt[0]+8,"WEBP")){Pe=3;break e}var Qe=Re(T,xt[0]+4);if(12>Qe||4294967286<Qe){Pe=3;break e}if(Ye&&Qe>it[0]-8){Pe=7;break e}Pe[0]=Qe,xt[0]+=12,it[0]-=12}Pe=0}if(Pe!=0)return Pe;for(Qe=0<Ge.gb[0],X=X[0];;){e:{var At=T;it=P,Pe=X;var vt=Ne,ht=Me,$t=xt=[0];if((zt=Ze=[Ze])[0]=0,8>Pe[0])Pe=7;else{if(!r(At,it[0],"VP8X")){if(Re(At,it[0]+4)!=10){Pe=3;break e}if(18>Pe[0]){Pe=7;break e}var Ot=Re(At,it[0]+8),sr=1+oe(At,it[0]+12);if(2147483648<=sr*(At=1+oe(At,it[0]+15))){Pe=3;break e}$t!=null&&($t[0]=Ot),vt!=null&&(vt[0]=sr),ht!=null&&(ht[0]=At),it[0]+=18,Pe[0]-=18,zt[0]=1}Pe=0}}if(Ze=Ze[0],xt=xt[0],Pe!=0)return Pe;if(it=!!(2&xt),!Qe&&Ze)return 3;if(ge!=null&&(ge[0]=!!(16&xt)),xe!=null&&(xe[0]=it),ye!=null&&(ye[0]=0),xe=Ne[0],xt=Me[0],Ze&&it&&Ce==null){Pe=0;break}if(4>X){Pe=7;break}if(Qe&&Ze||!Qe&&!Ze&&!r(T,P[0],"ALPH")){X=[X],Ge.na=[Ge.na],Ge.P=[Ge.P],Ge.Sa=[Ge.Sa];e:{Ot=T,Pe=P,Qe=X;var zt=Ge.gb;vt=Ge.na,ht=Ge.P,$t=Ge.Sa,sr=22,e(Ot!=null),e(Qe!=null),At=Pe[0];var yn=Qe[0];for(e(vt!=null),e($t!=null),vt[0]=null,ht[0]=null,$t[0]=0;;){if(Pe[0]=At,Qe[0]=yn,8>yn){Pe=7;break e}var Bn=Re(Ot,At+4);if(4294967286<Bn){Pe=3;break e}var Wr=8+Bn+1&-2;if(sr+=Wr,0<zt&&sr>zt){Pe=3;break e}if(!r(Ot,At,"VP8 ")||!r(Ot,At,"VP8L")){Pe=0;break e}if(yn[0]<Wr){Pe=7;break e}r(Ot,At,"ALPH")||(vt[0]=Ot,ht[0]=At+8,$t[0]=Bn),At+=Wr,yn-=Wr}}if(X=X[0],Ge.na=Ge.na[0],Ge.P=Ge.P[0],Ge.Sa=Ge.Sa[0],Pe!=0)break}X=[X],Ge.Ja=[Ge.Ja],Ge.xa=[Ge.xa];e:if(zt=T,Pe=P,Qe=X,vt=Ge.gb[0],ht=Ge.Ja,$t=Ge.xa,Ot=Pe[0],At=!r(zt,Ot,"VP8 "),sr=!r(zt,Ot,"VP8L"),e(zt!=null),e(Qe!=null),e(ht!=null),e($t!=null),8>Qe[0])Pe=7;else{if(At||sr){if(zt=Re(zt,Ot+4),12<=vt&&zt>vt-12){Pe=3;break e}if(Ye&&zt>Qe[0]-8){Pe=7;break e}ht[0]=zt,Pe[0]+=8,Qe[0]-=8,$t[0]=sr}else $t[0]=5<=Qe[0]&&zt[Ot+0]==47&&!(zt[Ot+4]>>5),ht[0]=Qe[0];Pe=0}if(X=X[0],Ge.Ja=Ge.Ja[0],Ge.xa=Ge.xa[0],P=P[0],Pe!=0)break;if(4294967286<Ge.Ja)return 3;if(ye==null||it||(ye[0]=Ge.xa?2:1),xe=[xe],xt=[xt],Ge.xa){if(5>X){Pe=7;break}ye=xe,Ye=xt,it=ge,T==null||5>X?T=0:5<=X&&T[P+0]==47&&!(T[P+4]>>5)?(Qe=[0],zt=[0],vt=[0],V(ht=new O,T,P,X),Gt(ht,Qe,zt,vt)?(ye!=null&&(ye[0]=Qe[0]),Ye!=null&&(Ye[0]=zt[0]),it!=null&&(it[0]=vt[0]),T=1):T=0):T=0}else{if(10>X){Pe=7;break}ye=xt,T==null||10>X||!ya(T,P+3,X-3)?T=0:(Ye=T[P+0]|T[P+1]<<8|T[P+2]<<16,it=16383&(T[P+7]<<8|T[P+6]),T=16383&(T[P+9]<<8|T[P+8]),1&Ye||3<(Ye>>1&7)||!(Ye>>4&1)||Ye>>5>=Ge.Ja||!it||!T?T=0:(xe&&(xe[0]=it),ye&&(ye[0]=T),T=1))}if(!T||(xe=xe[0],xt=xt[0],Ze&&(Ne[0]!=xe||Me[0]!=xt)))return 3;Ce!=null&&(Ce[0]=Ge,Ce.offset=P-Ce.w,e(4294967286>P-Ce.w),e(Ce.offset==Ce.ha-X));break}return Pe==0||Pe==7&&Ze&&Ce==null?(ge!=null&&(ge[0]|=Ge.na!=null&&0<Ge.na.length),se!=null&&(se[0]=xe),Ae!=null&&(Ae[0]=xt),0):Pe}function iu(T,P,X){var se=P.width,Ae=P.height,ge=0,xe=0,ye=se,Ce=Ae;if(P.Da=T!=null&&0<T.Da,P.Da&&(ye=T.cd,Ce=T.bd,ge=T.v,xe=T.j,11>X||(ge&=-2,xe&=-2),0>ge||0>xe||0>=ye||0>=Ce||ge+ye>se||xe+Ce>Ae))return 0;if(P.v=ge,P.j=xe,P.va=ge+ye,P.o=xe+Ce,P.U=ye,P.T=Ce,P.da=T!=null&&0<T.da,P.da){if(!De(ye,Ce,X=[T.ib],ge=[T.hb]))return 0;P.ib=X[0],P.hb=ge[0]}return P.ob=T!=null&&T.ob,P.Kb=T==null||!T.Sd,P.da&&(P.ob=P.ib<3*se/4&&P.hb<3*Ae/4,P.Kb=0),1}function xd(T){if(T==null)return 2;if(11>T.S){var P=T.f.RGBA;P.fb+=(T.height-1)*P.A,P.A=-P.A}else P=T.f.kb,T=T.height,P.O+=(T-1)*P.fa,P.fa=-P.fa,P.N+=(T-1>>1)*P.Ab,P.Ab=-P.Ab,P.W+=(T-1>>1)*P.Db,P.Db=-P.Db,P.F!=null&&(P.J+=(T-1)*P.lb,P.lb=-P.lb);return 0}function fA(T,P,X,se){if(se==null||0>=T||0>=P)return 2;if(X!=null){if(X.Da){var Ae=X.cd,ge=X.bd,xe=-2&X.v,ye=-2&X.j;if(0>xe||0>ye||0>=Ae||0>=ge||xe+Ae>T||ye+ge>P)return 2;T=Ae,P=ge}if(X.da){if(!De(T,P,Ae=[X.ib],ge=[X.hb]))return 2;T=Ae[0],P=ge[0]}}se.width=T,se.height=P;e:{var Ce=se.width,Ne=se.height;if(T=se.S,0>=Ce||0>=Ne||!(T>=Xa&&13>T))T=2;else{if(0>=se.Rd&&se.sd==null){xe=ge=Ae=P=0;var Me=(ye=Ce*Av[T])*Ne;if(11>T||(ge=(Ne+1)/2*(P=(Ce+1)/2),T==12&&(xe=(Ae=Ce)*Ne)),(Ne=a(Me+2*ge+xe))==null){T=1;break e}se.sd=Ne,11>T?((Ce=se.f.RGBA).eb=Ne,Ce.fb=0,Ce.A=ye,Ce.size=Me):((Ce=se.f.kb).y=Ne,Ce.O=0,Ce.fa=ye,Ce.Fd=Me,Ce.f=Ne,Ce.N=0+Me,Ce.Ab=P,Ce.Cd=ge,Ce.ea=Ne,Ce.W=0+Me+ge,Ce.Db=P,Ce.Ed=ge,T==12&&(Ce.F=Ne,Ce.J=0+Me+2*ge),Ce.Tc=xe,Ce.lb=Ae)}if(P=1,Ae=se.S,ge=se.width,xe=se.height,Ae>=Xa&&13>Ae)if(11>Ae)T=se.f.RGBA,P&=(ye=Math.abs(T.A))*(xe-1)+ge<=T.size,P&=ye>=ge*Av[Ae],P&=T.eb!=null;else{T=se.f.kb,ye=(ge+1)/2,Me=(xe+1)/2,Ce=Math.abs(T.fa),Ne=Math.abs(T.Ab);var Ze=Math.abs(T.Db),Ye=Math.abs(T.lb),Ge=Ye*(xe-1)+ge;P&=Ce*(xe-1)+ge<=T.Fd,P&=Ne*(Me-1)+ye<=T.Cd,P=(P&=Ze*(Me-1)+ye<=T.Ed)&Ce>=ge&Ne>=ye&Ze>=ye,P&=T.y!=null,P&=T.f!=null,P&=T.ea!=null,Ae==12&&(P&=Ye>=ge,P&=Ge<=T.Tc,P&=T.F!=null)}else P=0;T=P?0:2}}return T!=0||X!=null&&X.fd&&(T=xd(se)),T}var ta=64,ou=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],hA=24,pA=32,vd=8,Ri=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ct("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(T){return T},_.Predictor2=function(T,P,X){return P[X+0]},_.Predictor3=function(T,P,X){return P[X+1]},_.Predictor4=function(T,P,X){return P[X-1]},_.Predictor5=function(T,P,X){return ot(ot(T,P[X+1]),P[X+0])},_.Predictor6=function(T,P,X){return ot(T,P[X-1])},_.Predictor7=function(T,P,X){return ot(T,P[X+0])},_.Predictor8=function(T,P,X){return ot(P[X-1],P[X+0])},_.Predictor9=function(T,P,X){return ot(P[X+0],P[X+1])},_.Predictor10=function(T,P,X){return ot(ot(T,P[X-1]),ot(P[X+0],P[X+1]))},_.Predictor11=function(T,P,X){var se=P[X+0];return 0>=Yt(se>>24&255,T>>24&255,(P=P[X-1])>>24&255)+Yt(se>>16&255,T>>16&255,P>>16&255)+Yt(se>>8&255,T>>8&255,P>>8&255)+Yt(255&se,255&T,255&P)?se:T},_.Predictor12=function(T,P,X){var se=P[X+0];return(Dt((T>>24&255)+(se>>24&255)-((P=P[X-1])>>24&255))<<24|Dt((T>>16&255)+(se>>16&255)-(P>>16&255))<<16|Dt((T>>8&255)+(se>>8&255)-(P>>8&255))<<8|Dt((255&T)+(255&se)-(255&P)))>>>0},_.Predictor13=function(T,P,X){var se=P[X-1];return(Rt((T=ot(T,P[X+0]))>>24&255,se>>24&255)<<24|Rt(T>>16&255,se>>16&255)<<16|Rt(T>>8&255,se>>8&255)<<8|Rt(T>>0&255,se>>0&255))>>>0};var Hm=_.PredictorAdd0;_.PredictorAdd1=Lt,ct("Predictor2","PredictorAdd2"),ct("Predictor3","PredictorAdd3"),ct("Predictor4","PredictorAdd4"),ct("Predictor5","PredictorAdd5"),ct("Predictor6","PredictorAdd6"),ct("Predictor7","PredictorAdd7"),ct("Predictor8","PredictorAdd8"),ct("Predictor9","PredictorAdd9"),ct("Predictor10","PredictorAdd10"),ct("Predictor11","PredictorAdd11"),ct("Predictor12","PredictorAdd12"),ct("Predictor13","PredictorAdd13");var Zf=_.PredictorAdd2;It("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),It("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var E0,No=_.ColorIndexInverseTransform,wa=_.MapARGB,lu=_.VP8LColorIndexInverseTransformAlpha,eh=_.MapAlpha,vc=_.VP8LPredictorsAdd=[];vc.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var cu,di,Qa,uu,Li,Zo,Ll,el,Cs,tl,Vs,Ui,mA,Ul,yd,Au,du,fu,gA,wd,hu,yc,xA,Es,co,Xr,Jr,ns,Is=a(511),Bo=a(2041),pu=a(225),mu=a(767),wc=0,_0=Bo,vA=pu,ba=mu,ko=Is,Xa=0,bd=1,Ml=2,th=3,yA=4,bc=5,S0=6,rh=7,gu=8,Cc=9,Cd=10,T0=[2,3,7],Io=[3,3,11],uo=[280,256,256,256,40],wA=[0,1,1,1,0],Ec=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],_c=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],bA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],iv=8,nh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],sh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ra=null,_s=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],En=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],xu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Pl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Vm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],CA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ov=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Sc=[],fi=[],Ao=[],lv=1,Ed=2,Ol=[],Ca=[];lt("UpsampleRgbLinePair",we,3),lt("UpsampleBgrLinePair",He,3),lt("UpsampleRgbaLinePair",Dr,4),lt("UpsampleBgraLinePair",tn,4),lt("UpsampleArgbLinePair",vr,4),lt("UpsampleRgba4444LinePair",St,2),lt("UpsampleRgb565LinePair",tt,2);var Tc=_.UpsampleRgbLinePair,vu=_.UpsampleBgrLinePair,jl=_.UpsampleRgbaLinePair,N0=_.UpsampleBgraLinePair,B0=_.UpsampleArgbLinePair,_d=_.UpsampleRgba4444LinePair,k0=_.UpsampleRgb565LinePair,Ql=16,na=1<<Ql-1,yu=-227,I0=482,ZC=6,cv=0,eE=a(256),sa=a(256),zm=a(256),ah=a(256),ih=a(I0-yu),Gm=a(I0-yu);Pn("YuvToRgbRow",we,3),Pn("YuvToBgrRow",He,3),Pn("YuvToRgbaRow",Dr,4),Pn("YuvToBgraRow",tn,4),Pn("YuvToArgbRow",vr,4),Pn("YuvToRgba4444Row",St,2),Pn("YuvToRgb565Row",tt,2);var EA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Nc=[0,2,8],tE=[8,7,6,4,4,2,2,2,1,1,1,1],uv=1;this.WebPDecodeRGBA=function(T,P,X,se,Ae){var ge=bd,xe=new mc,ye=new ls;xe.ba=ye,ye.S=ge,ye.width=[ye.width],ye.height=[ye.height];var Ce=ye.width,Ne=ye.height,Me=new bs;if(Me==null||T==null)var Ze=2;else e(Me!=null),Ze=Rl(T,P,X,Me.width,Me.height,Me.Pd,Me.Qd,Me.format,null);if(Ze!=0?Ce=0:(Ce!=null&&(Ce[0]=Me.width[0]),Ne!=null&&(Ne[0]=Me.height[0]),Ce=1),Ce){ye.width=ye.width[0],ye.height=ye.height[0],se!=null&&(se[0]=ye.width),Ae!=null&&(Ae[0]=ye.height);e:{if(se=new ea,(Ae=new su).data=T,Ae.w=P,Ae.ha=X,Ae.kd=1,P=[0],e(Ae!=null),((T=Rl(Ae.data,Ae.w,Ae.ha,null,null,null,P,null,Ae))==0||T==7)&&P[0]&&(T=4),(P=T)==0){if(e(xe!=null),se.data=Ae.data,se.w=Ae.w+Ae.offset,se.ha=Ae.ha-Ae.offset,se.put=Bs,se.ac=es,se.bc=Ua,se.ma=xe,Ae.xa){if((T=nt())==null){xe=1;break e}if(function(Ye,Ge){var xt=[0],it=[0],Pe=[0];t:for(;;){if(Ye==null)return 0;if(Ge==null)return Ye.a=2,0;if(Ye.l=Ge,Ye.a=0,V(Ye.m,Ge.data,Ge.w,Ge.ha),!Gt(Ye.m,xt,it,Pe)){Ye.a=3;break t}if(Ye.xb=Ed,Ge.width=xt[0],Ge.height=it[0],!Ve(xt[0],it[0],1,Ye,null))break t;return 1}return e(Ye.a!=0),0}(T,se)){if(se=(P=fA(se.width,se.height,xe.Oa,xe.ba))==0){t:{se=T;r:for(;;){if(se==null){se=0;break t}if(e(se.s.yc!=null),e(se.s.Ya!=null),e(0<se.s.Wb),e((X=se.l)!=null),e((Ae=X.ma)!=null),se.xb!=0){if(se.ca=Ae.ba,se.tb=Ae.tb,e(se.ca!=null),!iu(Ae.Oa,X,th)){se.a=2;break r}if(!Xe(se,X.width)||X.da)break r;if((X.da||Lr(se.ca.S))&&ze(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&ze()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!qe(se.s.vb,se.s.Wa.Xa)){se.a=1;break r}se.xb=0}if(!ke(se,se.V,se.Ba,se.c,se.i,X.o,Be))break r;Ae.Dc=se.Ma,se=1;break t}e(se.a!=0),se=0}se=!se}se&&(P=T.a)}else P=T.a}else{if((T=new Ma)==null){xe=1;break e}if(T.Fa=Ae.na,T.P=Ae.P,T.qc=Ae.Sa,Zc(T,se)){if((P=fA(se.width,se.height,xe.Oa,xe.ba))==0){if(T.Aa=0,X=xe.Oa,e((Ae=T)!=null),X!=null){if(0<(Ce=0>(Ce=X.Md)?0:100<Ce?255:255*Ce/100)){for(Ne=Me=0;4>Ne;++Ne)12>(Ze=Ae.pb[Ne]).lc&&(Ze.ia=Ce*tE[0>Ze.lc?0:Ze.lc]>>3),Me|=Ze.ia;Me&&(alert("todo:VP8InitRandom"),Ae.ia=1)}Ae.Ga=X.Id,100<Ae.Ga?Ae.Ga=100:0>Ae.Ga&&(Ae.Ga=0)}oA(T,se)||(P=T.a)}}else P=T.a}P==0&&xe.Oa!=null&&xe.Oa.fd&&(P=xd(xe.ba))}xe=P}ge=xe!=0?null:11>ge?ye.f.RGBA.eb:ye.f.kb.y}else ge=null;return ge};var Av=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(_,N){for(var j="",R=0;R<4;R++)j+=String.fromCharCode(_[N++]);return j}function d(_,N){return(_[N+0]<<0|_[N+1]<<8|_[N+2]<<16)>>>0}function h(_,N){return(_[N+0]<<0|_[N+1]<<8|_[N+2]<<16|_[N+3]<<24)>>>0}new l;var p=[0],m=[0],y=[],x=new l,E=t,S=function(_,N){var j={},R=0,L=!1,Q=0,H=0;if(j.frames=[],!function(W,Z,ne,le){for(var ve=0;ve<le;ve++)if(W[Z+ve]!=ne.charCodeAt(ve))return!0;return!1}(_,N,"RIFF",4)){var te,Y;for(h(_,N+=4),N+=8;N<_.length;){var re=c(_,N),V=h(_,N+=4);N+=4;var J=V+(1&V);switch(re){case"VP8 ":case"VP8L":j.frames[R]===void 0&&(j.frames[R]={}),(O=j.frames[R]).src_off=L?H:N-8,O.src_size=Q+V+8,R++,L&&(L=!1,Q=0,H=0);break;case"VP8X":(O=j.header={}).feature_flags=_[N];var K=N+4;O.canvas_width=1+d(_,K),K+=3,O.canvas_height=1+d(_,K),K+=3;break;case"ALPH":L=!0,Q=J+8,H=N-8;break;case"ANIM":(O=j.header).bgcolor=h(_,N),K=N+4,O.loop_count=(te=_)[(Y=K)+0]<<0|te[Y+1]<<8,K+=2;break;case"ANMF":var ae,O;(O=j.frames[R]={}).offset_x=2*d(_,N),N+=3,O.offset_y=2*d(_,N),N+=3,O.width=1+d(_,N),N+=3,O.height=1+d(_,N),N+=3,O.duration=d(_,N),N+=3,ae=_[N++],O.dispose=1&ae,O.blend=ae>>1&1}re!="ANMF"&&(N+=J)}return j}}(E,0);S.response=E,S.rgbaoutput=!0,S.dataurl=!1;var B=S.header?S.header:null,D=S.frames?S.frames:null;if(B){B.loop_counter=B.loop_count,p=[B.canvas_height],m=[B.canvas_width];for(var I=0;I<D.length&&D[I].blend!=0;I++);}var U=D[0],F=x.WebPDecodeRGBA(E,U.src_off,U.src_size,m,p);U.rgba=F,U.imgwidth=m[0],U.imgheight=p[0];for(var C=0;C<m[0]*p[0]*4;C++)y[C]=F[C];return this.width=m,this.height=p,this.data=y,this}(function(t){var e=function(){return typeof L5=="function"},r=function(p,m,y,x){var E=4,S=i;switch(x){case t.image_compression.FAST:E=1,S=a;break;case t.image_compression.MEDIUM:E=6,S=o;break;case t.image_compression.SLOW:E=9,S=l}p=n(p,m,y,S);var B=L5(p,{level:E});return t.__addimage__.arrayBufferToBinaryString(B)},n=function(p,m,y,x){for(var E,S,B,D=p.length/m,I=new Uint8Array(p.length+D),U=d(),F=0;F<D;F+=1){if(B=F*m,E=p.subarray(B,B+m),x)I.set(x(E,y,S),B+F);else{for(var C,_=U.length,N=[];C<_;C+=1)N[C]=U[C](E,y,S);var j=h(N.concat());I.set(N[j],B+F)}S=E}return I},s=function(p){var m=Array.apply([],p);return m.unshift(0),m},a=function(p,m){var y,x=[],E=p.length;x[0]=1;for(var S=0;S<E;S+=1)y=p[S-m]||0,x[S+1]=p[S]-y+256&255;return x},i=function(p,m,y){var x,E=[],S=p.length;E[0]=2;for(var B=0;B<S;B+=1)x=y&&y[B]||0,E[B+1]=p[B]-x+256&255;return E},o=function(p,m,y){var x,E,S=[],B=p.length;S[0]=3;for(var D=0;D<B;D+=1)x=p[D-m]||0,E=y&&y[D]||0,S[D+1]=p[D]+256-(x+E>>>1)&255;return S},l=function(p,m,y){var x,E,S,B,D=[],I=p.length;D[0]=4;for(var U=0;U<I;U+=1)x=p[U-m]||0,E=y&&y[U]||0,S=y&&y[U-m]||0,B=c(x,E,S),D[U+1]=p[U]-B+256&255;return D},c=function(p,m,y){if(p===m&&m===y)return p;var x=Math.abs(m-y),E=Math.abs(p-y),S=Math.abs(p+m-y-y);return x<=E&&x<=S?p:E<=S?m:y},d=function(){return[s,a,i,o,l]},h=function(p){var m=p.map(function(y){return y.reduce(function(x,E){return x+Math.abs(E)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(p,m,y,x){var E,S,B,D,I,U,F,C,_,N,j,R,L,Q,H,te=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(B=new rne(p)).imgData,S=B.bits,E=B.colorSpace,I=B.colors,[4,6].indexOf(B.colorType)!==-1){if(B.bits===8){_=(C=B.pixelBitlength==32?new Uint32Array(B.decodePixels().buffer):B.pixelBitlength==16?new Uint16Array(B.decodePixels().buffer):new Uint8Array(B.decodePixels().buffer)).length,j=new Uint8Array(_*B.colors),N=new Uint8Array(_);var re,V=B.pixelBitlength-B.bits;for(Q=0,H=0;Q<_;Q++){for(L=C[Q],re=0;re<V;)j[H++]=L>>>re&255,re+=B.bits;N[Q]=L>>>re&255}}if(B.bits===16){_=(C=new Uint32Array(B.decodePixels().buffer)).length,j=new Uint8Array(_*(32/B.pixelBitlength)*B.colors),N=new Uint8Array(_*(32/B.pixelBitlength)),R=B.colors>1,Q=0,H=0;for(var J=0;Q<_;)L=C[Q++],j[H++]=L>>>0&255,R&&(j[H++]=L>>>16&255,L=C[Q++],j[H++]=L>>>0&255),N[J++]=L>>>16&255;S=8}x!==t.image_compression.NONE&&e()?(p=r(j,B.width*B.colors,B.colors,x),F=r(N,B.width,1,x)):(p=j,F=N,te=void 0)}if(B.colorType===3&&(E=this.color_spaces.INDEXED,U=B.palette,B.transparency.indexed)){var K=B.transparency.indexed,ae=0;for(Q=0,_=K.length;Q<_;++Q)ae+=K[Q];if((ae/=255)===_-1&&K.indexOf(0)!==-1)D=[K.indexOf(0)];else if(ae!==_){for(C=B.decodePixels(),N=new Uint8Array(C.length),Q=0,_=C.length;Q<_;Q++)N[Q]=K[C[Q]];F=r(N,B.width,1)}}var O=function(W){var Z;switch(W){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(x);return te===this.decode.FLATE_DECODE&&(Y="/Predictor "+O+" "),Y+="/Colors "+I+" /BitsPerComponent "+S+" /Columns "+B.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(F&&this.__addimage__.isArrayBuffer(F)||this.__addimage__.isArrayBufferView(F))&&(F=this.__addimage__.arrayBufferToBinaryString(F)),{alias:y,data:p,index:m,filter:te,decodeParameters:Y,transparency:D,palette:U,sMask:F,predictor:O,width:B.width,height:B.height,bitsPerComponent:S,colorSpace:E}}}})(or.API),function(t){t.processGIF89A=function(e,r,n,s){var a=new nne(e),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:i,height:o},d=new P_(100).encode(c,100);return t.processJPEG.call(this,d,r,n,s)},t.processGIF87A=t.processGIF89A}(or.API),Uc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Uc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){us.log("bit decode error:"+r)}},Uc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Uc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*s*4,o=a>>4,l=15&a,c=this.palette[o];if(this.data[i]=c.blue,this.data[i+1]=c.green,this.data[i+2]=c.red,this.data[i+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[i+4]=c.blue,this.data[i+4+1]=c.green,this.data[i+4+2]=c.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},Uc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Uc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,c=a>>15?255:0,d=n*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=c}this.pos+=t}},Uc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&r)/r*255|0,c=(i>>11)/e*255|0,d=s*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},Uc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Uc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=i}},Uc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var a=new Uc(e,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},c=new P_(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}}(or.API),G6.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var a=new G6(e),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},c=new P_(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}}(or.API),or.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var d=n[c],h=n[c+1],p=n[c+2],m=n[c+3];a[o++]=d,a[o++]=h,a[o++]=p,i[l++]=m}var y=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:y,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},or.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},tp=or.API,my=tp.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=c.fof?c.fof:1,h=e.doKerning!==!1,p=0,m=t.length,y=0,x=o[0]||l,E=[];for(r=0;r<m;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?E.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+i*(1e3/a)||0)/1e3):(p=h&&Xn(c[n])==="object"&&!isNaN(parseInt(c[n][y],10))?c[n][y]/d:0,E.push((o[n]||x)/l+p)),y=n;return E},Q6=tp.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return tp.processArabic&&(t=tp.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:my.apply(this,arguments).reduce(function(a,i){return a+i},0)},H6=function(t,e,r,n){for(var s=[],a=0,i=t.length,o=0;a!==i&&o+e[a]<r;)o+=e[a],a++;s.push(t.slice(0,a));var l=a;for(o=0;a!==i;)o+e[a]>n&&(s.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&s.push(t.slice(l,a)),s},V6=function(t,e,r){r||(r={});var n,s,a,i,o,l,c,d=[],h=[d],p=r.textIndent||0,m=0,y=0,x=t.split(" "),E=my.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var S=Array(l).join(" "),B=[];x.map(function(I){(I=I.split(/\s*\n/)).length>1?B=B.concat(I.map(function(U,F){return(F&&U.length?`
`:"")+U})):B.push(I[0])}),x=B,l=Q6.apply(this,[S,r])}for(a=0,i=x.length;a<i;a++){var D=0;if(n=x[a],l&&n[0]==`
`&&(n=n.substr(1),D=1),p+m+(y=(s=my.apply(this,[n,r])).reduce(function(I,U){return I+U},0))>e||D){if(y>e){for(o=H6.apply(this,[n,s,e-(p+m),e]),d.push(o.shift()),d=[o.pop()];o.length;)h.push([o.shift()]);y=s.slice(n.length-(d[0]?d[0].length:0)).reduce(function(I,U){return I+U},0)}else d=[n];h.push(d),p=y+l,m=E}else d.push(n),p+=m+y,m=E}return c=l?function(I,U){return(U?S:"")+I.join(" ")}:function(I){return I.join(" ")},h.map(c)},tp.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/s;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(V6.apply(this,[n[o],i,a]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var a=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var p,m,y,x,E=["{"];for(var S in h){if(p=h[S],isNaN(parseInt(S,10))?m="'"+S+"'":(S=parseInt(S,10),m=(m=a(S).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof p=="number")p<0?(y=a(p).slice(3),x="-"):(y=a(p).slice(2),x=""),y=x+y.slice(0,-1)+n[y.slice(-1)];else{if(Xn(p)!=="object")throw new Error("Don't know what to do with value type "+Xn(p)+".");y=i(p)}E.push(m+y)}return E.push("}"),E.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,m,y,x,E={},S=1,B=E,D=[],I="",U="",F=h.length-1,C=1;C<F;C+=1)(x=h[C])=="'"?p?(y=p.join(""),p=void 0):p=[]:p?p.push(x):x=="{"?(D.push([B,y]),B={},y=void 0):x=="}"?((m=D.pop())[0][m[1]]=B,y=void 0,B=m[0]):x=="-"?S=-1:y===void 0?r.hasOwnProperty(x)?(I+=r[x],y=parseInt(I,16)*S,S=1,I=""):I+=x:r.hasOwnProperty(x)?(U+=r[x],B[y]=parseInt(U,16)*S,S=1,y=void 0,U=""):U+=x;return E},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var p=h.font,m=d.Unicode[p.postScriptName];m&&(p.metadata.Unicode={},p.metadata.Unicode.widths=m.widths,p.metadata.Unicode.kerning=m.kerning);var y=c.Unicode[p.postScriptName];y&&(p.metadata.Unicode.encoding=y,p.encoding=y.codePages[0])}])}(or.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),a=0;a<n;a++)s[a]=r.charCodeAt(a);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,a=r.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(vx(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(s,n)}}])}(or),function(t){function e(){return(Tr.canvg?Promise.resolve(Tr.canvg):Tw(()=>import("./index.es-B46F850E.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}or.API.addSvgAsImage=function(r,n,s,a,i,o,l,c){if(isNaN(n)||isNaN(s))throw us.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw us.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(y){return y.fromString(h,r,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(p)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,s,a,i,l,c)})}}(),or.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},or.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],c=0,d=0,h=0;function p(y,x){var E,S=!1;for(E=0;E<y.length;E+=1)y[E]===x&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=o.length;for(h=0;h<m;h+=1)r[o[h]].value=r[o[h]].defaultValue,r[o[h]].explicitSet=!1}if(Xn(t)==="object"){for(s in t)if(a=t[s],p(o,s)&&a!==void 0){if(r[s].type==="boolean"&&typeof a=="boolean")r[s].value=a;else if(r[s].type==="name"&&p(r[s].valueSet,a))r[s].value=a;else if(r[s].type==="integer"&&Number.isInteger(a))r[s].value=a;else if(r[s].type==="array"){for(c=0;c<a.length;c+=1)if(n=!0,a[c].length===1&&typeof a[c][0]=="number")l.push(String(a[c]-1));else if(a[c].length>1){for(d=0;d<a[c].length;d+=1)typeof a[c][d]!="number"&&(n=!1);n===!0&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}r[s].value="["+l.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,x=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?x.push("/"+y+" /"+r[y].value):x.push("/"+y+" "+r[y].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=a.length+i.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+a+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(or.API),function(t){var e=t.API,r=e.pdfEscape16=function(a,i){for(var o,l=i.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],h=0,p=a.length;h<p;++h){if(o=i.metadata.characterToGlyph(a.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=a.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},n=function(a){var i,o,l,c,d,h,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,p=(o=Object.keys(a).sort(function(m,y){return m-y})).length;h<p;h++)i=o[h],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[i]!==void 0&&a[i]!==null&&typeof a[i].toString=="function"&&(c=("0000"+a[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,c=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",y=0;y<p.length;y++)m+=String.fromCharCode(p[y]);var x=c();d({data:m,addLength1:!0,objectId:x}),l("endobj");var E=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var S=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+_p(o.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var B=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+_p(o.fontName)),l("/FontDescriptor "+S+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+E+" 0 R"),l("/BaseFont /"+_p(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+B+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,c=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,p="",m=0;m<h.length;m++)p+=String.fromCharCode(h[m]);var y=c();d({data:p,addLength1:!0,objectId:y}),l("endobj");var x=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var E=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+_p(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var S=0;S<o.metadata.hmtx.widths.length;S++)o.metadata.hmtx.widths[S]=parseInt(o.metadata.hmtx.widths[S]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+_p(o.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var s=function(a){var i,o=a.text||"",l=a.x,c=a.y,d=a.options||{},h=a.mutex||{},p=h.pdfEscape,m=h.activeFontKey,y=h.fonts,x=m,E="",S=0,B="",D=y[x].encoding;if(y[x].encoding!=="Identity-H")return{text:o,x:l,y:c,options:d,mutex:h};for(B=o,x=m,Array.isArray(o)&&(B=o[0]),S=0;S<B.length;S+=1)y[x].metadata.hasOwnProperty("cmap")&&(i=y[x].metadata.cmap.unicode.codeMap[B[S].charCodeAt(0)]),i||B[S].charCodeAt(0)<256&&y[x].metadata.hasOwnProperty("Unicode")?E+=B[S]:E+="";var I="";return parseInt(x.slice(1))<14||D==="WinAnsiEncoding"?I=p(E,x).split("").map(function(U){return U.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(I=r(E,y[x])),h.isHex=!0,{text:I,x:l,y:c,options:d,mutex:h}};e.events.push(["postProcessText",function(a){var i=a.text||"",o=[],l={text:i,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(i)){var c=0;for(c=0;c<i.length;c+=1)Array.isArray(i[c])&&i[c].length===3?o.push([s(Object.assign({},l,{text:i[c][0]})).text,i[c][1],i[c][2]]):o.push(s(Object.assign({},l,{text:i[c]})).text);a.text=o}else a.text=s(Object.assign({},l,{text:i})).text}])}(or),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(or.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,a,i,o,l,c,d,h=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),B=!1,D=0;this.__bidiEngine__={};var I=function(R){var L=R.charCodeAt(),Q=L>>8,H=x[Q];return H!==void 0?h[256*H+(255&L)]:Q===252||Q===253?"AL":S.test(Q)?"L":Q===8?"R":"N"},U=function(R){for(var L,Q=0;Q<R.length;Q++){if((L=I(R.charAt(Q)))==="L")return!1;if(L==="R")return!0}return!1},F=function(R,L,Q,H){var te,Y,re,V,J=L[H];switch(J){case"L":case"R":B=!1;break;case"N":case"AN":break;case"EN":B&&(J="AN");break;case"AL":B=!0,J="R";break;case"WS":J="N";break;case"CS":H<1||H+1>=L.length||(te=Q[H-1])!=="EN"&&te!=="AN"||(Y=L[H+1])!=="EN"&&Y!=="AN"?J="N":B&&(Y="AN"),J=Y===te?Y:"N";break;case"ES":J=(te=H>0?Q[H-1]:"B")==="EN"&&H+1<L.length&&L[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&Q[H-1]==="EN"){J="EN";break}if(B){J="N";break}for(re=H+1,V=L.length;re<V&&L[re]==="ET";)re++;J=re<V&&L[re]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(V=L.length,re=H+1;re<V&&L[re]==="NSM";)re++;if(re<V){var K=R[H],ae=K>=1425&&K<=2303||K===64286;if(te=L[re],ae&&(te==="R"||te==="AL")){J="R";break}}}J=H<1||(te=L[H-1])==="B"?"N":Q[H-1];break;case"B":B=!1,s=!0,J=D;break;case"S":a=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":B=!1;break;case"BN":J="N"}return J},C=function(R,L,Q){var H=R.split("");return Q&&_(H,Q,{hiLevel:D}),H.reverse(),L&&L.reverse(),H.join("")},_=function(R,L,Q){var H,te,Y,re,V,J=-1,K=R.length,ae=0,O=[],W=D?m:p,Z=[];for(B=!1,s=!1,a=!1,te=0;te<K;te++)Z[te]=I(R[te]);for(Y=0;Y<K;Y++){if(V=ae,O[Y]=F(R,Z,O,Y),H=240&(ae=W[V][y[O[Y]]]),ae&=15,L[Y]=re=W[ae][5],H>0)if(H===16){for(te=J;te<Y;te++)L[te]=1;J=-1}else J=-1;if(W[ae][6])J===-1&&(J=Y);else if(J>-1){for(te=J;te<Y;te++)L[te]=re;J=-1}Z[Y]==="B"&&(L[Y]=0),Q.hiLevel|=re}a&&function(ne,le,ve){for(var pe=0;pe<ve;pe++)if(ne[pe]==="S"){le[pe]=D;for(var he=pe-1;he>=0&&ne[he]==="WS";he--)le[he]=D}}(Z,L,K)},N=function(R,L,Q,H,te){if(!(te.hiLevel<R)){if(R===1&&D===1&&!s)return L.reverse(),void(Q&&Q.reverse());for(var Y,re,V,J,K=L.length,ae=0;ae<K;){if(H[ae]>=R){for(V=ae+1;V<K&&H[V]>=R;)V++;for(J=ae,re=V-1;J<re;J++,re--)Y=L[J],L[J]=L[re],L[re]=Y,Q&&(Y=Q[J],Q[J]=Q[re],Q[re]=Y);ae=V}ae++}}},j=function(R,L,Q){var H=R.split(""),te={hiLevel:D};return Q||(Q=[]),_(H,Q,te),function(Y,re,V){if(V.hiLevel!==0&&d)for(var J,K=0;K<Y.length;K++)re[K]===1&&(J=E.indexOf(Y[K]))>=0&&(Y[K]=E[J+1])}(H,Q,te),N(2,H,L,Q,te),N(1,H,L,Q,te),H.join("")};return this.__bidiEngine__.doBidiReorder=function(R,L,Q){if(function(te,Y){if(Y)for(var re=0;re<te.length;re++)Y[re]=re;o===void 0&&(o=U(te)),c===void 0&&(c=U(te))}(R,L),i||!l||c)if(i&&l&&o^c)D=o?1:0,R=C(R,L,Q);else if(!i&&l&&c)D=o?1:0,R=j(R,L,Q),R=C(R,L);else if(!i||o||l||c){if(i&&!l&&o^c)R=C(R,L),o?(D=0,R=j(R,L,Q)):(D=1,R=j(R,L,Q),R=C(R,L));else if(i&&o&&!l&&c)D=1,R=j(R,L,Q),R=C(R,L);else if(!i&&!l&&o^c){var H=d;o?(D=1,R=j(R,L,Q),D=0,d=!1,R=j(R,L,Q),d=H):(D=0,R=j(R,L,Q),R=C(R,L),D=1,d=!1,R=j(R,L,Q),d=H,R=C(R,L))}}else D=0,R=j(R,L,Q);else D=o?1:0,R=j(R,L,Q);return R},this.__bidiEngine__.setOptions=function(R){R&&(i=R.isInputVisual,l=R.isOutputVisual,o=R.isInputRtl,c=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text,a=(n.x,n.y,n.options||{}),i=(n.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(i=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?i.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):i.push([r.doBidiReorder(s[o])]);n.text=i}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(or),or.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Qf(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new xne(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new sne(this.contents),this.head=new ine(this),this.name=new Ane(this),this.cmap=new jj(this),this.toUnicode={},this.hhea=new one(this),this.maxp=new dne(this),this.hmtx=new fne(this),this.post=new cne(this),this.os2=new lne(this),this.loca=new gne(this),this.glyf=new hne(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,c;for(c=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,a,i,o;for(i=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)s=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Yc,Qf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,a,i,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^a)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*a+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,a;for(a=[],n=0,s=e.length;n<s;n++)r=e[n],a.push(this.writeByte(r));return a},t}(),sne=function(){var t;function e(r){var n,s,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,a,i,o,l,c,d,h,p,m,y,x;for(x in m=Object.keys(r).length,l=Math.log(2),h=16*Math.floor(Math.log(m)/l),i=Math.floor(h/l),d=16*m-h,(s=new Qf).writeInt(this.scalarType),s.writeShort(m),s.writeShort(h),s.writeShort(i),s.writeShort(d),a=16*m,c=s.pos+a,o=null,y=[],r)for(p=r[x],s.writeString(x),s.writeInt(t(p)),s.writeInt(c),s.writeInt(p.length),y=y.concat(p),x==="head"&&(o=c),c+=p.length;c%4;)y.push(0),c++;return s.write(y),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,a,i;for(r=Qj.call(r);r.length%4;)r.push(0);for(a=new Qf(r),s=0,n=0,i=r.length;n<i;n=n+=4)s+=a.readUInt32();return 4294967295&s},e}(),ane={}.hasOwnProperty,tA=function(t,e){for(var r in e)ane.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Yc=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var ine=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new Qf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),q6=function(){function t(e,r){var n,s,a,i,o,l,c,d,h,p,m,y,x,E,S,B,D;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),p=m/2,e.pos+=6,a=function(){var I,U;for(U=[],l=I=0;0<=p?I<p:I>p;l=0<=p?++I:--I)U.push(e.readUInt16());return U}(),e.pos+=2,x=function(){var I,U;for(U=[],l=I=0;0<=p?I<p:I>p;l=0<=p?++I:--I)U.push(e.readUInt16());return U}(),c=function(){var I,U;for(U=[],l=I=0;0<=p?I<p:I>p;l=0<=p?++I:--I)U.push(e.readUInt16());return U}(),d=function(){var I,U;for(U=[],l=I=0;0<=p?I<p:I>p;l=0<=p?++I:--I)U.push(e.readUInt16());return U}(),s=(this.length-e.pos+this.offset)/2,o=function(){var I,U;for(U=[],l=I=0;0<=s?I<s:I>s;l=0<=s?++I:--I)U.push(e.readUInt16());return U}(),l=S=0,D=a.length;S<D;l=++S)for(E=a[l],n=B=y=x[l];y<=E?B<=E:B>=E;n=y<=E?++B:--B)d[l]===0?i=n+c[l]:(i=o[d[l]/2+(n-y)-(p-l)]||0)!==0&&(i+=c[l]),this.codeMap[n]=65535&i}e.pos=h}return t.encode=function(e,r){var n,s,a,i,o,l,c,d,h,p,m,y,x,E,S,B,D,I,U,F,C,_,N,j,R,L,Q,H,te,Y,re,V,J,K,ae,O,W,Z,ne,le,ve,pe,he,de,ce,oe;switch(H=new Qf,i=Object.keys(e).sort(function(Re,qe){return Re-qe}),r){case"macroman":for(x=0,E=function(){var Re=[];for(y=0;y<256;++y)Re.push(0);return Re}(),B={0:0},a={},te=0,J=i.length;te<J;te++)B[he=e[s=i[te]]]==null&&(B[he]=++x),a[s]={old:e[s],new:B[e[s]]},E[s]=B[e[s]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(E),{charMap:a,subtable:H.data,maxGlyphID:x+1};case"unicode":for(L=[],h=[],D=0,B={},n={},S=c=null,Y=0,K=i.length;Y<K;Y++)B[U=e[s=i[Y]]]==null&&(B[U]=++D),n[s]={old:U,new:B[U]},o=B[U]-s,S!=null&&o===c||(S&&h.push(S),L.push(s),c=o),S=s;for(S&&h.push(S),h.push(65535),L.push(65535),j=2*(N=L.length),_=2*Math.pow(Math.log(N)/Math.LN2,2),p=Math.log(_/2)/Math.LN2,C=2*N-_,l=[],F=[],m=[],y=re=0,ae=L.length;re<ae;y=++re){if(R=L[y],d=h[y],R===65535){l.push(0),F.push(0);break}if(R-(Q=n[R].new)>=32768)for(l.push(0),F.push(2*(m.length+N-y)),s=V=R;R<=d?V<=d:V>=d;s=R<=d?++V:--V)m.push(n[s].new);else l.push(Q-R),F.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*N+2*m.length),H.writeUInt16(0),H.writeUInt16(j),H.writeUInt16(_),H.writeUInt16(p),H.writeUInt16(C),ve=0,O=h.length;ve<O;ve++)s=h[ve],H.writeUInt16(s);for(H.writeUInt16(0),pe=0,W=L.length;pe<W;pe++)s=L[pe],H.writeUInt16(s);for(de=0,Z=l.length;de<Z;de++)o=l[de],H.writeUInt16(o);for(ce=0,ne=F.length;ce<ne;ce++)I=F[ce],H.writeUInt16(I);for(oe=0,le=m.length;oe<le;oe++)x=m[oe],H.writeUInt16(x);return{charMap:n,subtable:H.data,maxGlyphID:D+1}}},t}(),jj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,a;for(r.pos=this.offset,this.version=r.readUInt16(),a=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)n=new q6(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,a;return n==null&&(n="macroman"),s=q6.encode(r,n),(a=new Qf).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e}(),one=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),lne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),cne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,a;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(s=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],a=[];r.pos<this.offset+this.length;)n=r.readByte(),a.push(this.names.push(r.readString(n)));return a;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(r.readUInt32());return c}).call(this)}},e}(),une=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Ane=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,a,i,o,l,c,d,h,p,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),s=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(c={},i=h=0,p=s.length;h<p;i=++h)a=s[i],r.pos=a.offset,d=r.readString(a.length),o=new une(d,a),c[m=a.nameID]==null&&(c[m]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),dne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),fne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,a,i,o,l,c;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],n=d=0;0<=a?d<a:d>a;n=0<=a?++d:--d)h.push(r.readInt16());return h}(),this.widths=(function(){var d,h,p,m;for(m=[],d=0,h=(p=this.metrics).length;d<h;d++)i=p[d],m.push(i.advance);return m}).call(this),s=this.widths[this.widths.length-1],c=[],n=o=0;0<=a?o<a:o>a;n=0<=a?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),Qj=[].slice,hne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,a,i,o,l,c,d,h,p;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,s=i.indexOf(r),(a=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,o=(l=new Qf(n.read(a))).readShort(),d=l.readShort(),p=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[r]=o===-1?new mne(l,d,p,c,h):new pne(l,o,d,p,c,h),this.cache[r]))},e.prototype.encode=function(r,n,s){var a,i,o,l,c;for(o=[],i=[],l=0,c=n.length;l<c;l++)a=r[n[l]],i.push(o.length),a&&(o=o.concat(a.encode(s)));return i.push(o.length),{table:o,offsets:i}},e}(),pne=function(){function t(e,r,n,s,a,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),mne=function(){function t(e,r,n,s,a){var i,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Qf(Qj.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),gne=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(r.readUInt32());return i}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<s.length;++o)if(s[o]=a,i<n.length&&n[i]==o){++i,s[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var d=new Array(4*s.length),h=0;h<s.length;++h)d[4*h+3]=255&s[h],d[4*h+2]=(65280&s[h])>>8,d[4*h+1]=(16711680&s[h])>>16,d[4*h]=(4278190080&s[h])>>24;return d},e}(),xne=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,a;for(r in s=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,a,i,o,l;for(s={},i=0,o=e.length;i<o;i++)s[a=e[i]]=this.font.glyf.glyphFor(a);for(a in r=[],s)(n=s[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in l=this.glyphsFor(r))n=l[a],s[a]=n;return s},t.prototype.encode=function(e,r){var n,s,a,i,o,l,c,d,h,p,m,y,x,E,S;for(s in n=jj.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),m={0:0},S=n.charMap)m[(l=S[s]).old]=l.new;for(y in p=n.maxGlyphID,i)y in m||(m[y]=p++);return d=function(B){var D,I;for(D in I={},B)I[B[D]]=D;return I}(m),h=Object.keys(d).sort(function(B,D){return B-D}),x=function(){var B,D,I;for(I=[],B=0,D=h.length;B<D;B++)o=h[B],I.push(d[o]);return I}(),a=this.font.glyf.encode(i,x,m),c=this.font.loca.encode(a.offsets,x),E={cmap:this.font.cmap.raw(),glyf:a.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},t}();or.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,a,i;if(Array.isArray(r))return"["+function(){var o,l,c;for(c=[],o=0,l=r.length;o<l;o++)n=r[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in a=["<<"],r)i=r[s],a.push("/"+s+" "+e.convert(i));return a.push(">>"),a.join(`
`)}return""+r},e}();function Hj(t,e,r,n,s){n=n||{};var a=1.15,i=s.internal.scaleFactor,o=s.internal.getFontSize()/i,l=s.getLineHeightFactor?s.getLineHeightFactor():a,c=o*l,d=/\r\n|\r|\n/g,h="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof t=="string"?t.split(d):t,p=h.length||1),r+=o*(2-a),n.valign==="middle"?r-=p/2*c:n.valign==="bottom"&&(r-=p*c),n.halign==="center"||n.halign==="right"){var m=o;if(n.halign==="center"&&(m*=.5),h&&p>=1){for(var y=0;y<h.length;y++)s.text(h[y],e-s.getStringUnitWidth(h[y])*m,r),r+=c;return s}e-=s.getStringUnitWidth(t)*m}return n.halign==="justify"?s.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):s.text(t,e,r),s}var K6={},Gp=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:K6=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,s,a;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,s,a){return this.jsPDFDocument.rect(e,r,n,s,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return K6||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),H5=function(t,e){return H5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},H5(t,e)};function Vj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");H5(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var zj=function(t){Vj(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function vne(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function yne(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function kw(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],s=n.map(function(a){return r.getTextWidth(a)}).reduce(function(a,i){return Math.max(a,i)},0);return s}function Gj(t,e,r,n){var s=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:a});var i=qj(s,!1);i&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,i)}function qj(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function iC(t,e){var r,n,s,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function Kj(t,e){var r=iC(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function wne(t,e,r,n,s){var a={},i=1.3333333333333333,o=O_(e,function(D){return s.getComputedStyle(D).backgroundColor});o!=null&&(a.fillColor=o);var l=O_(e,function(D){return s.getComputedStyle(D).color});l!=null&&(a.textColor=l);var c=Cne(n,r);c&&(a.cellPadding=c);var d="borderTopColor",h=i*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var m=(parseFloat(p)||0)/h;m&&(a.lineWidth=m)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var y=O_(e,function(D){return s.getComputedStyle(D)[d]});y!=null&&(a.lineColor=y);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var E=parseInt(n.fontSize||"");isNaN(E)||(a.fontSize=E/i);var S=bne(n);S&&(a.fontStyle=S);var B=(n.fontFamily||"").toLowerCase();return t.indexOf(B)!==-1&&(a.font=B),a}function bne(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function O_(t,e){var r=$j(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var s=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function $j(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:$j(t.parentElement,e):r}function Cne(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=r.map(function(o){return parseInt(o||"0")/n}),i=iC(a,0);return s>i.top&&(i.top=s),s>i.bottom&&(i.bottom=s),i}function Wj(t,e,r,n,s){var a,i;n===void 0&&(n=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),c=t.scaleFactor(),d=[],h=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:p};for(var m=0;m<o.rows.length;m++){var y=o.rows[m],x=(i=(a=y==null?void 0:y.parentElement)===null||a===void 0?void 0:a.tagName)===null||i===void 0?void 0:i.toLowerCase(),E=Ene(l,c,r,y,n,s);E&&(x==="thead"?d.push(E):x==="tfoot"?p.push(E):h.push(E))}return{head:d,body:h,foot:p}}function Ene(t,e,r,n,s,a){for(var i=new zj(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=r.getComputedStyle(l);if(s||c.display!=="none"){var d=void 0;a&&(d=wne(t,l,e,c,r)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:_ne(l)})}}var h=r.getComputedStyle(n);if(i.length>0&&(s||h.display!=="none"))return i}function _ne(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function Sne(t,e,r){for(var n=0,s=[t,e,r];n<s.length;n++){var a=s[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function HA(t,e,r,n,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function Yj(t,e){var r=new Gp(t),n=r.getDocumentOptions(),s=r.getGlobalOptions();Sne(s,n,e);var a=HA({},s,n,e),i;typeof window<"u"&&(i=window);var o=Tne(s,n,e),l=Nne(s,n,e),c=Bne(r,a),d=Ine(r,a,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:c}}function Tne(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var c=t[l],d=e[l],h=r[l];n.columnStyles=HA({},c,d,h)}else{var p=[t,e,r],m=p.map(function(y){return y[l]||{}});n[l]=HA({},m[0],m[1],m[2])}},a=0,i=Object.keys(n);a<i.length;a++){var o=i[a];s(o)}return n}function Nne(t,e,r){for(var n=[t,e,r],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=n;a<i.length;a++){var o=i[a];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function Bne(t,e){var r,n,s,a,i,o,l,c,d,h,p,m,y=iC(e.margin,40/t.scaleFactor()),x=(r=kne(t,e.startY))!==null&&r!==void 0?r:y.top,E;e.showFoot===!0?E="everyPage":e.showFoot===!1?E="never":E=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var S;e.showHead===!0?S="everyPage":e.showHead===!1?S="never":S=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var B=(a=e.useCss)!==null&&a!==void 0?a:!1,D=e.theme||(B?"plain":"striped"),I=!!e.horizontalPageBreak,U=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:B,theme:D,startY:x,margin:y,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:S,showFoot:E,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:I,horizontalPageBreakRepeat:U,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function kne(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),s=t.pageNumber(),a=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;a=i===s}return typeof e=="number"?e:(e==null||e===!1)&&a&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function Ine(t,e,r){var n=e.head||[],s=e.body||[],a=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(r){var o=Wj(t,e.html,r,i,e.useCss)||{};n=o.head||n,s=o.body||n,a=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||Fne(n,s,a);return{columns:l,head:n,body:s,foot:a}}function Fne(t,e,r){var n=t[0]||e[0]||r[0]||[],s=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var i=1,o;Array.isArray(n)?o=n[parseInt(a)]:o=n[a],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var c=void 0;Array.isArray(n)?c=s.length:c=a+(l>0?"_".concat(l):"");var d={dataKey:c};s.push(d)}}),s}var V5=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),Dne=function(t){Vj(e,t);function e(r,n,s,a,i,o){var l=t.call(this,r,n,o)||this;return l.cell=s,l.row=a,l.column=i,l.section=a.section,l}return e}(V5),Rne=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,s,a,i){for(var o=0,l=r;o<l.length;o++){var c=l[o],d=new Dne(e,this,n,s,a,i),h=c(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,s=this.hooks.didDrawPage;n<s.length;n++){var a=s[n];a(new V5(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,s=this.hooks.willDrawPage;n<s.length;n++){var a=s[n];a(new V5(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),Xj=function(){function t(e,r,n,s,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof zj&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=s,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,s){var a;return Math.max(n,((a=r.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var s=r.cells[n.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(s,a){var i=n.cells[a.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),c=l+o;return c>s?c:s},0)},t}(),Jj=function(){function t(e,r,n){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");n=this.x+s/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*r,a=n*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=iC(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),Lne=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,s=e.allRows();n<s.length;n++){var a=s[n],i=a.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},t}();function Une(t,e){Mne(t,e);var r=[],n=0;e.columns.forEach(function(a){var i=a.getMaxCustomCellWidth(e);i?a.width=i:(a.width=a.wrappedWidth,r.push(a)),n+=a.width});var s=e.getWidth(t.pageSize().width)-n;s&&(s=z5(r,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=z5(r,s,function(a){return a.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),One(e),jne(e,t),Pne(e)}function Mne(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,s=Kj(t,e);e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],c=a.cells[l.index];if(c){var d=e.hooks.didParseCell;e.callCellHooks(t,d,c,a,l,null);var h=c.padding("horizontal");c.contentWidth=kw(c.text,c.styles,t)+h;var p=kw(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,t);if(c.minReadableWidth=p+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>s?(c.minWidth=s,c.wrappedWidth=s):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var m=10/r;c.minWidth=c.styles.minCellWidth||m,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],c=a.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function z5(t,e,r){for(var n=e,s=t.reduce(function(m,y){return m+y.wrappedWidth},0),a=0;a<t.length;a++){var i=t[a],o=i.wrappedWidth/s,l=n*o,c=i.width+l,d=r(i),h=c<d?d:c;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(m){return e<0?m.width>r(m):!0});p.length&&(e=z5(p,e,r))}return e}function Pne(t){for(var e={},r=1,n=t.allRows(),s=0;s<n.length;s++)for(var a=n[s],i=0,o=t.columns;i<o.length;i++){var l=o[i],c=e[l.index];if(r>1)r--,delete a.cells[l.index];else if(c)c.cell.height+=a.height,r=c.cell.colSpan,delete a.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var h=n.length-s,p=d.rowSpan>h?h:d.rowSpan;e[l.index]={cell:d,left:p,row:a}}}}}function One(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],s=null,a=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])a+=l.width,delete n.cells[l.index];else if(s){var c=s;delete n.cells[l.index],s=null,c.width=l.width+a}else{var c=n.cells[l.index];if(!c)continue;if(i=c.colSpan,a=0,c.colSpan>1){s=c,a+=l.width;continue}c.width=l.width+a}}}function jne(t,e){for(var r={count:0,height:0},n=0,s=t.allRows();n<s.length;n++){for(var a=s[n],i=0,o=t.columns;i<o.length;i++){var l=o[i],c=a.cells[l.index];if(c){e.applyStyles(c.styles,!0);var d=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,d+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=$6(c.text,d,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=$6(c.text,d,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var h=c.styles.overflow(c.text,d);typeof h=="string"?c.text=[h]:c.text=h}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=c.contentHeight/c.rowSpan;c.rowSpan>1&&r.count*r.height<p*c.rowSpan?r={height:p,count:c.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>a.height&&(a.height=p)}}r.count--}}function $6(t,e,r,n,s){return t.map(function(a){return Qne(a,e,r,n,s)})}function Qne(t,e,r,n,s){var a=1e4*n.scaleFactor();if(e=Math.ceil(e*a)/a,e>=kw(t,r,n))return t;for(;e<kw(t+s,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function Zj(t,e){var r=new Gp(t),n=Hne(e,r.scaleFactor()),s=new Rne(e,n);return Une(r,s),r.applyStyles(r.userStyles),s}function Hne(t,e){var r=t.content,n=zne(r.columns);if(r.head.length===0){var s=W6(n,"head");s&&r.head.push(s)}if(r.foot.length===0){var s=W6(n,"foot");s&&r.foot.push(s)}var a=t.settings.theme,i=t.styles;return{columns:n,head:j_("head",r.head,n,i,a,e),body:j_("body",r.body,n,i,a,e),foot:j_("foot",r.foot,n,i,a,e)}}function j_(t,e,r,n,s,a){var i={},o=e.map(function(l,c){for(var d=0,h={},p=0,m=0,y=0,x=r;y<x.length;y++){var E=x[y];if(i[E.index]==null||i[E.index].left===0)if(m===0){var S=void 0;Array.isArray(l)?S=l[E.index-p-d]:S=l[E.dataKey];var B={};typeof S=="object"&&!Array.isArray(S)&&(B=(S==null?void 0:S.styles)||{});var D=Gne(t,E,c,s,n,a,B),I=new Jj(S,D,t);h[E.dataKey]=I,h[E.index]=I,m=I.colSpan-1,i[E.index]={left:I.rowSpan-1,times:m}}else m--,p++;else i[E.index].left--,m=i[E.index].times,d++}return new Xj(l,c,t,h)});return o}function W6(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var s=Vne(e,n.raw);s!=null&&(r[n.dataKey]=s)}}),Object.keys(r).length>0?r:null}function Vne(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function zne(t){return t.map(function(e,r){var n,s;return typeof e=="object"?s=(n=e.dataKey)!==null&&n!==void 0?n:r:s=r,new Lne(s,e,r)})}function Gne(t,e,r,n,s,a,i){var o=yne(n),l;t==="head"?l=s.headStyles:t==="body"?l=s.bodyStyles:t==="foot"&&(l=s.footStyles);var c=HA({},o.table,o[t],s.styles,l),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},h=t==="body"?d:{},p=t==="body"&&r%2===0?HA({},o.alternateRow,s.alternateRowStyles):{},m=vne(a),y=HA({},m,c,p,h);return HA(y,i)}function qne(t,e,r){var n;r===void 0&&(r={});var s=Kj(t,e),a=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var m=e.columns.find(function(y){return y.dataKey===p||y.index===p});m&&!a.has(m.index)&&(a.set(m.index,!0),i.push(m.index),o.push(e.columns[m.index]),s-=m.wrappedWidth)});for(var c=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(a.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(c||s>=h)c=!1,i.push(d),o.push(e.columns[d]),s-=h;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function Kne(t,e){for(var r=[],n=0;n<e.columns.length;n++){var s=qne(t,e,{start:n});s.columns.length&&(r.push(s),n=s.lastIndex)}return r}function e7(t,e){var r=e.settings,n=r.startY,s=r.margin,a={x:s.left,y:n},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+s.bottom+i;if(r.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(p,m){return p+m.height},0);o+=c}var d=new Gp(t);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(r7(d),a.y=s.top),e.callWillDrawPageHooks(d,a);var h=HA({},a);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?$ne(d,e,h,a):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(p){return rd(d,e,p,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(p,m){var y=m===e.body.length-1;Iw(d,e,p,y,h,a,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(p){return rd(d,e,p,a,e.columns)})),Gj(d,e,h,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function $ne(t,e,r,n){var s=Kne(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(c,d){t.applyStyles(t.userStyles),d>0?yx(t,e,r,n,c.columns,!0):Y6(t,e,n,c.columns),Wne(t,e,r,n,c.columns),Q_(t,e,n,c.columns)});else for(var i=-1,o=s[0],l=function(){var c=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?yx(t,e,r,n,d,!0):Y6(t,e,n,d),c=X6(t,e,i+1,n,d),Q_(t,e,n,d)}var h=c-i;s.slice(1).forEach(function(p){t.applyStyles(t.userStyles),yx(t,e,r,n,p.columns,!0),X6(t,e,i+1,n,p.columns,h),Q_(t,e,n,p.columns)}),i=c};i<e.body.length-1;)l()}function Y6(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(a){return rd(t,e,a,r,n)})}function Wne(t,e,r,n,s){t.applyStyles(t.userStyles),e.body.forEach(function(a,i){var o=i===e.body.length-1;Iw(t,e,a,o,r,n,s)})}function X6(t,e,r,n,s,a){t.applyStyles(t.userStyles),a=a??e.body.length;var i=Math.min(r+a,e.body.length),o=-1;return e.body.slice(r,i).forEach(function(l,c){var d=r+c===e.body.length-1,h=t7(t,e,d,n);l.canEntireRowFit(h,s)&&(rd(t,e,l,n,s),o=r+c)}),o}function Q_(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(a){return rd(t,e,a,r,n)})}function Yne(t,e,r){var n=r.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),a=Math.floor((e-s)/n);return Math.max(0,a)}function Xne(t,e,r,n){var s={};t.spansMultiplePages=!0,t.height=0;for(var a=0,i=0,o=r.columns;i<o.length;i++){var l=o[i],c=t.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var d=new Jj(c.raw,c.styles,c.section);d=HA(d,c),d.text=[];var h=Yne(c,e,n);c.text.length>h&&(d.text=c.text.splice(h,c.text.length));var p=n.scaleFactor(),m=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(p,m),c.contentHeight>=e&&(c.contentHeight=e,d.styles.minCellHeight-=e),c.contentHeight>t.height&&(t.height=c.contentHeight),d.contentHeight=d.getContentHeight(p,m),d.contentHeight>a&&(a=d.contentHeight),s[l.index]=d}}var y=new Xj(t.raw,-1,t.section,s,!0);y.height=a;for(var x=0,E=r.columns;x<E.length;x++){var l=E[x],d=y.cells[l.index];d&&(d.height=y.height);var c=t.cells[l.index];c&&(c.height=t.height)}return y}function Jne(t,e,r,n){var s=t.pageSize().height,a=n.settings.margin,i=a.top+a.bottom,o=s-i;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),c=l<r;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var d=e.hasRowSpan(n.columns),h=e.getMaxCellHeight(n.columns)>o;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function Iw(t,e,r,n,s,a,i){var o=t7(t,e,n,a);if(r.canEntireRowFit(o,i))rd(t,e,r,a,i);else if(Jne(t,r,o,e)){var l=Xne(r,o,e,t);rd(t,e,r,a,i),yx(t,e,s,a,i),Iw(t,e,l,n,s,a,i)}else yx(t,e,s,a,i),Iw(t,e,r,n,s,a,i)}function rd(t,e,r,n,s){n.x=e.settings.margin.left;for(var a=0,i=s;a<i.length;a++){var o=i[a],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(c===!1){n.x+=o.width;continue}Zne(t,l,n);var d=l.getTextPos();Hj(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function Zne(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var s=qj(n.lineWidth,n.fillColor);s&&t.rect(e.x,r.y,e.width,e.height,s)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),ese(t,e,r,n.lineWidth))}function ese(t,e,r,n){var s,a,i,o;n.top&&(s=r.x,a=r.y,i=r.x+e.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),l(n.top,s,a,i,o)),n.bottom&&(s=r.x,a=r.y+e.height,i=r.x+e.width,o=r.y+e.height,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),l(n.bottom,s,a,i,o)),n.left&&(s=r.x,a=r.y,i=r.x,o=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,s,a,i,o)),n.right&&(s=r.x+e.width,a=r.y,i=r.x+e.width,o=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,s,a,i,o));function l(c,d,h,p,m){t.getDocument().setLineWidth(c),t.getDocument().line(d,h,p,m,"S")}}function t7(t,e,r,n){var s=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-s}function yx(t,e,r,n,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return rd(t,e,o,n,s)}),e.callEndPageHooks(t,n);var i=e.settings.margin;Gj(t,e,r,n),r7(t),e.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return rd(t,e,o,n,s)}),t.applyStyles(t.userStyles))}function r7(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function tse(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],s=Yj(this,n),a=Zj(this,s);return e7(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,s){Hj(e,r,n,s,this)},t.API.autoTableSetDefaults=function(e){return Gp.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){Gp.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Gp(this),a=Wj(s,e,window,r,!1),i=a.head,o=a.body,l=((n=i[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var H_;function xl(t,e){var r=Yj(t,e),n=Zj(t,r);e7(t,n)}try{if(typeof window<"u"&&window){var J6=window,Z6=J6.jsPDF||((H_=J6.jspdf)===null||H_===void 0?void 0:H_.jsPDF);Z6&&tse(Z6)}}catch(t){console.error("Could not apply autoTable plugin",t)}const _4="evaluaciones_pruebas",S4="evaluaciones_rubricas_estaticas",T4="evaluaciones_rubricas_interactivas",rse="usuarios",oC=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},nse=t=>{const e=er(Ft(Tt,_4),an("fechaCreacion","desc"));return gr(e,n=>{t(n.docs.map(s=>oC(s)))},n=>{console.error("Error al suscribirse a las pruebas:",n),t([])})},sse=async t=>{try{const{id:e,...r}=t,n=mr(Tt,_4,e);await Ti(n,{...r,fechaCreacion:ur.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la prueba:",e),new Error("No se pudo guardar la prueba.")}},ase=async t=>{try{await li(mr(Tt,_4,t))}catch(e){throw console.error("Error al eliminar la prueba:",e),new Error("No se pudo eliminar la prueba.")}},ise=t=>{const e=er(Ft(Tt,S4),an("fechaCreacion","desc"));return gr(e,n=>{t(n.docs.map(s=>oC(s)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),t([])})},ose=async t=>{try{const{id:e,...r}=t,n=mr(Tt,S4,e);await Ti(n,{...r,fechaCreacion:ur.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la rúbrica estática:",e),new Error("No se pudo guardar la rúbrica.")}},lse=async t=>{try{await li(mr(Tt,S4,t))}catch(e){throw console.error("Error al eliminar la rúbrica estática:",e),new Error("No se pudo eliminar la rúbrica.")}},cse=t=>{const e=er(Ft(Tt,T4));return gr(e,n=>{t(n.docs.map(s=>oC(s)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),t([])})},use=async t=>{try{const{id:e,...r}=t,n=mr(Tt,T4,e);await Ti(n,r)}catch(e){throw console.error("Error al guardar la rúbrica interactiva:",e),new Error("No se pudo guardar la rúbrica interactiva.")}},Ase=async t=>{try{return(await ws(Ft(Tt,T4),t)).id}catch(e){throw console.error("Error al crear la rúbrica interactiva:",e),new Error("No se pudo crear la rúbrica interactiva.")}},dse=t=>{const e=er(Ft(Tt,rse));return gr(e,n=>{t(n.docs.map(s=>oC(s)))},n=>{console.error("Error al suscribirse a los usuarios:",n),t([])})},fse=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],eD={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},D2=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},hse=({open:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),pse=({item:t,index:e,showAnswers:r})=>{const n=q.useMemo(()=>t.tipo==="Términos pareados"?[...t.pares.map(s=>s.definicion)].sort(()=>Math.random()-.5):[],[t]);return u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&u.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Selección múltiple"&&u.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((s,a)=>{const i=r&&a===t.respuestaCorrecta;return u.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[u.jsx("div",{className:"w-5 h-5 border rounded-full"}),u.jsxs("span",{children:[String.fromCharCode(65+a),") ",s]})]},a)})}),t.tipo==="Desarrollo"&&u.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&u.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[u.jsx("span",{children:"V ___ F ___"}),r&&u.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Términos pareados"&&u.jsxs("div",{className:"mt-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),u.jsx("div",{className:"space-y-2",children:t.pares.map((s,a)=>u.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[a+1,". ",s.concepto]},a))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),u.jsx("div",{className:"space-y-2",children:n.map((s,a)=>u.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:s},a))})]})]}),r&&u.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[u.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),u.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((s,a)=>u.jsxs("li",{children:[u.jsx("strong",{children:s.concepto})," → ",s.definicion]},a))})]})]}),t.tipo==="Comprensión de lectura"&&u.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[u.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((s,a)=>{if(s.tipo==="Selección múltiple"){const i=s;return u.jsxs("div",{className:"pt-2",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&u.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),u.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const c=r&&l===i.respuestaCorrecta;return u.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${c?"bg-green-100 dark:bg-green-900/50":""}`,children:[u.jsx("div",{className:"w-5 h-5 border rounded-full"}),u.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},s.id)}if(s.tipo==="Desarrollo"){const i=s;return u.jsxs("div",{className:"pt-2",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&u.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),u.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},s.id)}return null})]})]},t.id)},mse=()=>{const[t,e]=q.useState([]),[r,n]=q.useState(null),[s,a]=q.useState(!1),[i,o]=q.useState(!1),[l,c]=q.useState(null),[d,h]=q.useState(!1),p={nombre:"",asignatura:yl[0],nivel:_w[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[m,y]=q.useState(p);q.useEffect(()=>{const C=nse(e);return()=>C()},[]);const x=C=>{const{name:_,value:N}=C.target;y(j=>({...j,[_]:N}))},E=C=>{y(_=>{const N={..._.tiposActividad};return N[C]?delete N[C]:N[C]=eD[C][0],{..._,tiposActividad:N}})},S=(C,_)=>{y(N=>({...N,tiposActividad:{...N.tiposActividad,[C]:_}}))},B=C=>{y(_=>{const N=_.selectedNee.includes(C)?_.selectedNee.filter(j=>j!==C):[..._.selectedNee,C];return{..._,selectedNee:N}})},D=async C=>{if(C.preventDefault(),!m.nombre.trim()||!m.contenido.trim()||Object.keys(m.tiposActividad).length===0){c("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}a(!0),c(null);const _=Object.entries(m.tiposActividad).map(([R,L])=>`- ${L} ítem(s) de tipo '${R}'`).join(`
`),N=m.isNee&&m.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${m.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",j=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${m.nombre}
            - Asignatura: ${m.asignatura}
            - Nivel: ${m.nivel}
            - Contenido a evaluar: "${m.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${_}
            - Nivel de Dificultad General: ${m.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${N}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{td("Evaluación - Pruebas");const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",re=(await(await new Ra(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(j)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(re);let J=0;V.actividades.forEach(ae=>{ae.items.forEach(O=>{J+=O.puntaje||0,O.tipo==="Comprensión de lectura"&&O.preguntas&&O.preguntas.forEach(W=>{J+=W.puntaje||0})})});const K={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:m.nombre,asignatura:m.asignatura,nivel:m.nivel,contenidoOriginal:m.contenido,tiposActividadOriginal:m.tiposActividad,objetivo:V.objetivo,instruccionesGenerales:V.instruccionesGenerales,puntajeIdeal:J,actividades:V.actividades,dificultad:m.dificultad,...m.isNee&&{adaptacionNEE:m.selectedNee}};n(K),h(!1)}catch(R){console.error(R),c("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{a(!1)}},I=async()=>{if(r)try{await sse(r),alert("Prueba guardada con éxito.")}catch(C){console.error(C),alert("No se pudo guardar la prueba.")}},U=async C=>{if(window.confirm("¿Eliminar esta prueba?"))try{await ase(C),(r==null?void 0:r.id)===C&&n(null)}catch(_){console.error(_),alert("No se pudo eliminar la prueba.")}},F=async C=>{o(!0);const _=new or("p","mm","a4"),N=20,j=_.internal.pageSize.getHeight(),R=_.internal.pageSize.getWidth(),L=R-N*2;let Q=N;const H=re=>{re.setFillColor(230,230,230),re.rect(0,0,R,25,"F"),re.setFontSize(9),re.setTextColor(0,0,0),re.text("LICEO INDUSTRIAL DE RECOLETA",N,15,{align:"left"}),re.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",R-N,15,{align:"right"})};H(_),Q=30,_.setTextColor(0,0,0),_.setFont("helvetica","bold"),_.setFontSize(16),_.text(C.nombre,R/2,Q,{align:"center"}),Q+=10,xl(_,{startY:Q,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},C.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},C.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},C.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:C.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:C.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:re=>{H(_)}}),Q=_.lastAutoTable.finalY+10;const te=re=>{Q+re>j-N&&(_.addPage(),H(_),Q=N+15,_.setTextColor(0,0,0))},Y=(re,V)=>{_.setFont("helvetica",V.isBold?"bold":"normal"),_.setFontSize(V.fontSize);const J=Array.isArray(re)?re.join(`
`):re;return _.getTextDimensions(J,{maxWidth:V.width}).h};for(const re of C.actividades){let V=Y(re.titulo,{fontSize:12,width:L,isBold:!0})+Y(re.instrucciones,{fontSize:10,width:L})+12;te(V),_.setFont("helvetica","bold"),_.setFontSize(12),_.setTextColor(0,0,0),_.text(re.titulo,N,Q),Q+=8,_.setFont("helvetica","normal"),_.setFontSize(10);const J=_.splitTextToSize(re.instrucciones,L);_.text(J,N,Q),Q+=J.length*(10*.35*1.15)+4;for(const[K,ae]of re.items.entries()){let O=0;const W=`${K+1}. ${ae.pregunta} (${ae.puntaje} pts)`;switch(O+=Y(W,{fontSize:10,width:L,isBold:!0}),ae.tipo){case"Selección múltiple":ae.opciones.forEach(le=>{O+=Y(le,{fontSize:10,width:L-5})+3}),O+=7;break;case"Verdadero o Falso":O+=10;break;case"Desarrollo":O+=30;break;case"Términos pareados":O+=ae.pares.length*12+20;break;case"Comprensión de lectura":const ne=ae;O+=Y(ne.texto,{fontSize:10,width:L-10})+10,ne.preguntas.forEach(le=>{const ve=`${le.pregunta} (${le.puntaje} pts)`;O+=Y(ve,{fontSize:10,width:L-5,isBold:!0}),le.tipo==="Selección múltiple"?(le.opciones.forEach(pe=>{O+=Y(pe,{fontSize:10,width:L-10})+3}),O+=7):le.tipo==="Desarrollo"&&(O+=30),O+=5}),O+=15;break}te(O),_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(0,0,0);const Z=_.splitTextToSize(W,L);if(_.text(Z,N,Q),Q+=Z.length*5+4,_.setFont("helvetica","normal"),ae.tipo==="Selección múltiple")ae.opciones.forEach((ne,le)=>{_.text(`${String.fromCharCode(65+le)}) ${ne}`,N+5,Q),Q+=7});else if(ae.tipo==="Verdadero o Falso")_.text("V ______    F ______",N+5,Q),Q+=10;else if(ae.tipo==="Desarrollo")_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(N,Q,L,25,"FD"),Q+=30;else if(ae.tipo==="Términos pareados"){const ne=[...ae.pares.map(ve=>ve.definicion)].sort(()=>Math.random()-.5),le=ae.pares.map((ve,pe)=>[`${pe+1}. ${ve.concepto}`,`(   ) ${ne[pe]}`]);xl(_,{startY:Q,head:[["Columna A: Concepto","Columna B: Definición"]],body:le,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:ve=>H(_)}),Q=_.lastAutoTable.finalY+10}else if(ae.tipo==="Comprensión de lectura"){const ne=ae;_.setFillColor(240,240,240),_.setDrawColor(200,200,200);const le=_.splitTextToSize(ne.texto,L-10),ve=le.length*(10*.35*1.15)+8;_.rect(N,Q,L,ve,"FD"),Q+=4,_.setFont("helvetica","normal"),_.setFontSize(10),_.setTextColor(0,0,0),_.text(le,N+5,Q),Q+=ve;for(const[pe,he]of ne.preguntas.entries()){const de=`${pe+1}. ${he.pregunta} (${he.puntaje} pts)`;_.setFont("helvetica","bold");const ce=_.splitTextToSize(de,L-5);_.text(ce,N+5,Q),Q+=ce.length*5+4,_.setFont("helvetica","normal"),he.tipo==="Selección múltiple"?he.opciones.forEach((oe,Re)=>{_.text(`${String.fromCharCode(65+Re)}) ${oe}`,N+10,Q),Q+=7}):he.tipo==="Desarrollo"&&(_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(N+5,Q,L-5,25,"FD"),Q+=30)}}Q+=5}}_.save(`${C.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>h(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[u.jsx(hse,{open:!d})," ",u.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),u.jsx("button",{onClick:I,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),u.jsxs("button",{onClick:()=>F(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":u.jsx(oj,{})," PDF"]})]})]}),u.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[u.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[u.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),u.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),u.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),u.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),u.jsxs("p",{className:"text-right",children:[u.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),u.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[u.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&u.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(C=>u.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[u.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:C.titulo}),u.jsx("p",{className:"italic text-sm mb-4",children:C.instrucciones}),u.jsx("div",{className:"space-y-6",children:C.items.map((_,N)=>u.jsx(pse,{item:_,index:N,showAnswers:d},_.id))})]},C.id))]})]}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),u.jsxs("form",{onSubmit:D,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",name:"nombre",value:m.nombre,onChange:x,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),u.jsx("div",{}),u.jsx("select",{name:"asignatura",value:m.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:yl.map(C=>u.jsx("option",{children:C},C))}),u.jsx("select",{name:"nivel",value:m.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:_w.map(C=>u.jsx("option",{children:C},C))})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),u.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((C,_)=>u.jsx("button",{type:"button",onClick:()=>y(N=>({...N,dificultad:C})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${_===0?"rounded-l-lg":""} ${_===2?"rounded-r-lg":""}
                                            ${m.dificultad===C?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:C},C))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:m.isNee,onChange:C=>y(_=>({..._,isNee:C.target.checked,selectedNee:C.target.checked?_.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),m.isNee&&u.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:Sw.map(C=>u.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:m.selectedNee.includes(C),onChange:()=>B(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:C})]},C))})]})]})]}),u.jsx("textarea",{name:"contenido",value:m.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("div",{className:"space-y-3",children:fse.map(C=>u.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:!!m.tiposActividad[C],onChange:()=>E(C),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:C})]}),m.tiposActividad[C]&&u.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[u.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),eD[C].map(_=>u.jsx("button",{type:"button",onClick:()=>S(C,_),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${m.tiposActividad[C]===_?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:_},_))]})]},C))}),l&&u.jsx("p",{className:"text-red-500 text-sm",children:l}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"submit",disabled:s,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:s?"Generando...":"Generar Prueba"})})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),u.jsx("div",{className:"space-y-2",children:t.length>0?t.map(C=>u.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.nombre}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[C.asignatura," - ",C.nivel," (",new Date(C.fechaCreacion).toLocaleDateString(),")"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>n(C),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),u.jsx("button",{onClick:()=>U(C.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},C.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},gse=({rubricas:t,onSave:e,onDelete:r,onCreate:n})=>{const[s,a]=q.useState(null),[i,o]=q.useState("list"),[l,c]=q.useState(!1),[d,h]=q.useState(""),p=async(U,F)=>{if(!U.trim()||!F.trim()){alert("El título y la descripción son obligatorios.");return}c(!0);const C=`Crea una rúbrica de evaluación detallada sobre "${U}" con el propósito de "${F}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{td("Evaluación - Rúbricas");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=(await(await new Ra(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),te=JSON.parse(H),Y={id:crypto.randomUUID(),titulo:U,descripcion:F,fechaCreacion:new Date().toISOString(),dimensiones:te.map(re=>({id:crypto.randomUUID(),nombre:re.dimension,niveles:{insuficiente:re.insuficiente,suficiente:re.suficiente,competente:re.competente,avanzado:re.avanzado}}))};a(Y)}catch(N){console.error(N),alert("Error al generar la rúbrica con IA.")}finally{c(!1)}},m=async()=>{if(!d.trim()||!s)return;const U=crypto.randomUUID(),F={id:U,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};a(N=>N?{...N,dimensiones:[...N.dimensiones,F]}:null),h("");const C=`Para una rúbrica sobre "${s.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${s.dimensiones.map(N=>N.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{td("Evaluación - Rúbricas (Añadir Dimensión)");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=(await(await new Ra(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),te=JSON.parse(H);a(Y=>Y?{...Y,dimensiones:Y.dimensiones.map(re=>re.id===U?{...re,niveles:te,isLoading:!1}:re)}:null)}catch(N){console.error("Error generating dimension descriptors:",N),alert("No se pudieron generar los descriptores."),a(j=>j?{...j,dimensiones:j.dimensiones.filter(R=>R.id!==U)}:null)}},y=()=>{if(!s)return;t.some(F=>F.id===s.id)?e(s):n(s),o("list"),a(null)},x=U=>{a(U),o("form")},E=()=>{a({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},S=(U,F,C)=>{s&&a(_=>_?{..._,dimensiones:_.dimensiones.map(N=>N.id!==U?N:F==="nombre"?{...N,nombre:C}:{...N,niveles:{...N.niveles,[F]:C}})}:null)},B=(U,F)=>{a(C=>C?{...C,[U]:F}:null)},D=U=>{s&&a(F=>F?{...F,dimensiones:F.dimensiones.filter(C=>C.id!==U)}:null)},I=()=>{if(!s)return null;const U="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",F=`${U} resize-none text-sm`;return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),u.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),u.jsx("input",{value:s.titulo,onChange:C=>B("titulo",C.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${U} mt-1`})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),u.jsx("textarea",{value:s.descripcion,onChange:C=>B("descripcion",C.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${U} mt-1`})]})]}),s.dimensiones.length===0&&u.jsx("div",{className:"text-center py-4",children:u.jsx("button",{onClick:()=>p(s.titulo,s.descripcion),disabled:l||!s.titulo||!s.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":"✨ Generar Rúbrica con IA"})}),s.dimensiones.length>0&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),u.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full text-sm",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:u.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(C=>u.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:C},C))})}),u.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.dimensiones.map(C=>u.jsxs("tr",{children:[u.jsx("td",{className:"p-2 w-1/5",children:u.jsx("textarea",{value:C.nombre,onChange:_=>S(C.id,"nombre",_.target.value),rows:4,className:F})}),Object.keys(C.niveles).map(_=>u.jsx("td",{className:"p-2 w-1/5",children:C.isLoading?u.jsx("div",{className:"flex justify-center items-center h-full",children:u.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):u.jsx("textarea",{value:C.niveles[_],onChange:N=>S(C.id,_,N.target.value),rows:4,className:F})},_)),u.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:u.jsx("button",{onClick:()=>D(C.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},C.id))})]})}),u.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),u.jsx("input",{value:d,onChange:C=>h(C.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${U} mt-1`})]}),u.jsx("button",{onClick:m,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),u.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:u.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),u.jsx("button",{onClick:E,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(U=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:U.titulo}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:U.descripcion})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[u.jsx("button",{onClick:()=>x(U),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),u.jsx("button",{onClick:()=>r(U.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},U.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):I()},xse=({allUsers:t,rubricasEstaticas:e})=>{const[r,n]=q.useState([]),[s,a]=q.useState(null),[i,o]=q.useState(null),[l,c]=q.useState({rubricaEstaticaId:"",curso:""}),[d,h]=q.useState(null);q.useEffect(()=>{const B=cse(n);return()=>B()},[]);const p=async B=>{B.preventDefault();const D=e.find(U=>U.id===l.rubricaEstaticaId);if(!D||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const I={nombre:D.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:D.id,resultados:{}};try{await Ase(I),c({rubricaEstaticaId:"",curso:""})}catch(U){console.error(U),alert("No se pudo crear la evaluación con rúbrica.")}},m=B=>{a(B),o(JSON.parse(JSON.stringify(B)))},y=(B,D,I)=>{i&&o(U=>{if(!U)return null;const F=JSON.parse(JSON.stringify(U));return F.resultados[B]||(F.resultados[B]={puntajes:{},feedback:""}),F.resultados[B].puntajes[D]=I,F})},x=async()=>{if(i)try{await use(i),a(i),alert("Cambios guardados.")}catch(B){console.error(B),alert("No se pudieron guardar los cambios.")}},E=q.useCallback(B=>{const D=i,I=e.find(j=>j.id===(D==null?void 0:D.rubricaEstaticaId));if(!D||!I)return{score:0,maxScore:0,grade:"N/A"};const U=I.dimensiones.length*4,F=D.resultados[B];if(!F)return{score:0,maxScore:U,grade:"1.0"};const C=Object.values(F.puntajes).reduce((j,R)=>j+R,0),_=1+6*(C/U),N=U>0?_.toFixed(1):"1.0";return{score:C,maxScore:U,grade:N}},[i,e]),S=async B=>{if(!i)return;const D=e.find(C=>C.id===i.rubricaEstaticaId),I=i.resultados[B];if(!D||!I||Object.keys(I.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}h(B);const F=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${D.dimensiones.map(C=>`${C.nombre}: ${I.puntajes[C.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${D.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{td("Evaluación - Rúbricas Interactivas (Feedback)");const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",L=(await(await new Ra(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(F)).response).text();o(Q=>{if(!Q)return null;const H=JSON.parse(JSON.stringify(Q));return H.resultados[B].feedback=L.replace(/(\*\*|\*)/g,""),H})}catch(C){console.error(C),alert("Error al generar feedback.")}finally{h(null)}};if(s&&i){const B=e.find(I=>I.id===s.rubricaEstaticaId),D=t.filter(I=>I.profile===jt.ESTUDIANTE&&D2(I.curso||"")===s.curso).map(I=>I.nombreCompleto).sort();return B?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:s.nombre}),u.jsx("p",{className:"text-slate-500",children:s.curso})]}),u.jsx("button",{onClick:()=>a(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border-collapse",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),B.dimensiones.map(I=>u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:I.nombre},I.id)),u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),u.jsx("tbody",{children:D.map(I=>{var _;const{score:U,maxScore:F,grade:C}=E(I);return u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[u.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:I}),B.dimensiones.map(N=>u.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:u.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(j=>{var R;return u.jsx("button",{onClick:()=>y(I,N.id,j),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((R=i.resultados[I])==null?void 0:R.puntajes[N.id])===j?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:j},j)})})},N.id)),u.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[U,"/",F]}),u.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:C}),u.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:u.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[u.jsx("p",{className:"text-xs w-full",children:((_=i.resultados[I])==null?void 0:_.feedback)||"Sin generar"}),u.jsx("button",{onClick:()=>S(I),disabled:d===I,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===I?"...":"Generar IA"})]})})]},I)})})]})}),u.jsx("div",{className:"mt-6 flex justify-end",children:u.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):u.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",u.jsx("button",{onClick:()=>a(null),children:"Volver"})]})}return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),u.jsxs("form",{onSubmit:p,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[u.jsxs("select",{value:l.rubricaEstaticaId,onChange:B=>c({...l,rubricaEstaticaId:B.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[u.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),e.map(B=>u.jsx("option",{value:B.id,children:B.titulo},B.id))]}),u.jsxs("select",{value:l.curso,onChange:B=>c({...l,curso:B.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un Curso"}),ha.map(B=>u.jsx("option",{value:B,children:B},B))]}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),u.jsx("div",{className:"space-y-2",children:r.map(B=>u.jsxs("button",{onClick:()=>m(B),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[u.jsx("p",{className:"font-semibold",children:B.nombre}),u.jsx("p",{className:"text-sm text-slate-500",children:B.curso})]},B.id))})]})]})},vse=({allUsers:t})=>{const[e,r]=q.useState(""),n=q.useMemo(()=>Array.from(new Set(t.filter(a=>a.profile===jt.ESTUDIANTE&&a.curso).map(a=>D2(a.curso)))).sort(),[t]),s=q.useMemo(()=>{const a=t.filter(i=>i.profile===jt.ESTUDIANTE);return e?a.filter(i=>D2(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):a.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",u.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),u.jsxs("select",{id:"curso-filter",value:e,onChange:a=>r(a.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(a=>u.jsx("option",{value:a,children:a},a))]})]}),u.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.length>0?s.map(a=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:a.nombreCompleto}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:D2(a.curso||"")}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:a.email})]},a.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},yse=()=>{const[t,e]=q.useState("pruebas"),[r,n]=q.useState([]),[s,a]=q.useState([]),[i,o]=q.useState(!0);q.useEffect(()=>{o(!0);const h=dse(n),p=ise(m=>{a(m),o(!1)});return()=>{h(),p()}},[]);const l=async h=>{try{await ose(h)}catch(p){console.error(p),alert("No se pudo guardar la rúbrica.")}},c=async h=>{try{await lse(h)}catch(p){console.error(p),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:h,label:p})=>u.jsx("button",{onClick:()=>e(h),className:`${t===h?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:p});return i?u.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),u.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),u.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),u.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),u.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&u.jsx(mse,{}),t==="rubricas"&&u.jsx(gse,{rubricas:s,onSave:l,onDelete:c,onCreate:l}),t==="rubricasInteractivas"&&u.jsx(xse,{allUsers:r,rubricasEstaticas:s}),t==="nominas"&&u.jsx(vse,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Fw={};Fw.version="0.18.5";var n7=1252,wse=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],N4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},B4=function(t){wse.indexOf(t)!=-1&&(n7=N4[0]=t)};function bse(){B4(1252)}var Hc=function(t){B4(t)};function k4(){Hc(1200),bse()}function tD(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function Cse(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function s7(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Jg=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Cse(t.slice(2)):e==254&&r==255?s7(t.slice(2)):e==65279?t.slice(1):t},gy=function(e){return String.fromCharCode(e)},rD=function(e){return String.fromCharCode(e)},Yx,hf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Xx(t){for(var e="",r=0,n=0,s=0,a=0,i=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),a=r>>2,n=t.charCodeAt(c++),i=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=hf.charAt(a)+hf.charAt(i)+hf.charAt(o)+hf.charAt(l);return e}function wl(t){var e="",r=0,n=0,s=0,a=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)a=hf.indexOf(t.charAt(c++)),i=hf.indexOf(t.charAt(c++)),r=a<<2|i>>4,e+=String.fromCharCode(r),o=hf.indexOf(t.charAt(c++)),n=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=hf.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var Zr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),cd=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Hf(t){return Zr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function nD(t){return Zr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var hl=function(e){return Zr?cd(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function lC(t){if(typeof ArrayBuffer>"u")return hl(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Yf(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function Ese(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function I4(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return I4(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var ii=Zr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:cd(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function _se(t){for(var e=[],r=0,n=t.length+250,s=Hf(t.length+255),a=0;a<t.length;++a){var i=t.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(e.push(s.slice(0,r)),r=0,s=Hf(65535),n=65530)}return e.push(s.slice(0,r)),ii(e)}var xo=/\u0000/g,Zg=/[\u0001-\u0006]/g;function qp(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Vc(t,e){var r=""+t;return r.length>=e?r:Ws("0",e-r.length)+r}function F4(t,e){var r=""+t;return r.length>=e?r:Ws(" ",e-r.length)+r}function Dw(t,e){var r=""+t;return r.length>=e?r:r+Ws(" ",e-r.length)}function Sse(t,e){var r=""+Math.round(t);return r.length>=e?r:Ws("0",e-r.length)+r}function Tse(t,e){var r=""+t;return r.length>=e?r:Ws("0",e-r.length)+r}var sD=Math.pow(2,32);function rp(t,e){if(t>sD||t<-sD)return Sse(t,e);var r=Math.round(t);return Tse(r,e)}function Rw(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var aD=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],V_=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Nse(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var Er={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},iD={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Bse={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Lw(t,e,r){for(var n=t<0?-1:1,s=t*n,a=0,i=1,o=0,l=1,c=0,d=0,h=Math.floor(s);c<e&&(h=Math.floor(s),o=h*i+a,d=h*c+l,!(s-h<5e-8));)s=1/(s-h),a=i,i=o,l=c,c=d;if(d>e&&(c>e?(d=l,o=a):(d=c,o=i)),!r)return[0,n*o,d];var p=Math.floor(n*o/d);return[p,n*o-p*d,d]}function Dh(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),a=0,i=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=Lse(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var a7=new Date(1899,11,31,0,0,0),kse=a7.getTime(),Ise=new Date(1900,2,1,0,0,0);function i7(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=Ise&&(r+=1440*60*1e3),(r-(kse+(t.getTimezoneOffset()-a7.getTimezoneOffset())*6e4))/(1440*60*1e3)}function D4(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Fse(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Dse(t){var e=t<0?12:11,r=D4(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function Rse(t){var e=D4(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Jx(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=Dse(t):e===10?r=t.toFixed(10).substr(0,12):r=Rse(t),D4(Fse(r.toUpperCase()))}function r0(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Jx(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return uc(14,i7(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Lse(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function Use(t,e,r,n){var s="",a=0,i=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return V_[r.m-1][1];case 5:return V_[r.m-1][0];default:return V_[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return aD[r.q][0];default:return aD[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Vc(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),e==="s"?a===0?"0":""+a/i:(s=Vc(a,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var d=c>0?Vc(l,c):"";return d}function pf(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var o7=/%/g;function Mse(t,e,r){var n=e.replace(o7,""),s=e.length-n.length;return qA(t,n,r*Math.pow(10,2*s))+Ws("%",s)}function Pse(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return qA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function l7(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+l7(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var c7=/# (\?+)( ?)\/( ?)(\d+)/;function Ose(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?Ws(" ",t[1].length+1+t[4].length):F4(i,t[1].length)+t[2]+"/"+t[3]+Vc(o,t[4].length))}function jse(t,e,r){return r+(e===0?"":""+e)+Ws(" ",t[1].length+2+t[4].length)}var u7=/^#*0*\.([0#]+)/,A7=/\).*[0#]/,d7=/\(###\) ###\\?-####/;function ho(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function oD(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function lD(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Qse(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Hse(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function $l(t,e,r){if(t.charCodeAt(0)===40&&!e.match(A7)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?$l("n",n,r):"("+$l("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Pse(t,e,r);if(e.indexOf("%")!==-1)return Mse(t,e,r);if(e.indexOf("E")!==-1)return l7(e,r);if(e.charCodeAt(0)===36)return"$"+$l(t,e.substr(e.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+rp(l,e.length);if(e.match(/^[#?]+$/))return s=rp(r,0),s==="0"&&(s=""),s.length>e.length?s:ho(e.substr(0,e.length-s.length))+s;if(a=e.match(c7))return Ose(a,l,c);if(e.match(/^#+0+$/))return c+rp(l,e.length-e.indexOf("0"));if(a=e.match(u7))return s=oD(r,a[1].length).replace(/^([^\.]+)$/,"$1."+ho(a[1])).replace(/\.$/,"."+ho(a[1])).replace(/\.(\d*)$/,function(y,x){return"."+x+Ws("0",ho(a[1]).length-x.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return c+oD(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return c+pf(rp(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+$l(t,e,-r):pf(""+(Math.floor(r)+Qse(r,a[1].length)))+"."+Vc(lD(r,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return $l(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=qp($l(t,e.replace(/[\\-]/g,""),r)),i=0,qp(qp(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return i<s.length?s.charAt(i++):y==="0"?"0":""}));if(e.match(d7))return s=$l(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=Lw(l,Math.pow(10,i)-1,!1),s=""+c,d=qA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=Dw(o[2],i),d.length<a[4].length&&(d=ho(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=Lw(l,Math.pow(10,i)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?F4(o[1],i)+a[2]+"/"+a[3]+Dw(o[2],i):Ws(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=rp(r,0),e.length<=s.length?s:ho(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,p=e.length-s.length-h;return ho(e.substr(0,h)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return i=lD(r,a[1].length),r<0?"-"+$l(t,e,-r):pf(Hse(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Vc(0,3-y.length):"")+y})+"."+Vc(i,a[1].length);switch(e){case"###,##0.00":return $l(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=pf(rp(l,0));return m!=="0"?c+m:"";case"###,###.00":return $l(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return $l(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Vse(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return qA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function zse(t,e,r){var n=e.replace(o7,""),s=e.length-n.length;return qA(t,n,r*Math.pow(10,2*s))+Ws("%",s)}function f7(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+f7(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Du(t,e,r){if(t.charCodeAt(0)===40&&!e.match(A7)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Du("n",n,r):"("+Du("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Vse(t,e,r);if(e.indexOf("%")!==-1)return zse(t,e,r);if(e.indexOf("E")!==-1)return f7(e,r);if(e.charCodeAt(0)===36)return"$"+Du(t,e.substr(e.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+Vc(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:ho(e.substr(0,e.length-s.length))+s;if(a=e.match(c7))return jse(a,l,c);if(e.match(/^#+0+$/))return c+Vc(l,e.length-e.indexOf("0"));if(a=e.match(u7))return s=(""+r).replace(/^([^\.]+)$/,"$1."+ho(a[1])).replace(/\.$/,"."+ho(a[1])),s=s.replace(/\.(\d*)$/,function(y,x){return"."+x+Ws("0",ho(a[1]).length-x.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return c+pf(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Du(t,e,-r):pf(""+r)+"."+Ws("0",a[1].length);if(a=e.match(/^#,#*,#0/))return Du(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=qp(Du(t,e.replace(/[\\-]/g,""),r)),i=0,qp(qp(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return i<s.length?s.charAt(i++):y==="0"?"0":""}));if(e.match(d7))return s=Du(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=Lw(l,Math.pow(10,i)-1,!1),s=""+c,d=qA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=Dw(o[2],i),d.length<a[4].length&&(d=ho(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=Lw(l,Math.pow(10,i)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?F4(o[1],i)+a[2]+"/"+a[3]+Dw(o[2],i):Ws(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:ho(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,p=e.length-s.length-h;return ho(e.substr(0,h)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Du(t,e,-r):pf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Vc(0,3-y.length):"")+y})+"."+Vc(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var m=pf(""+l);return m!=="0"?c+m:"";default:if(e.match(/\.[0#?]*$/))return Du(t,e.slice(0,e.lastIndexOf(".")),r)+ho(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function qA(t,e,r){return(r|0)===r?Du(t,e,r):$l(t,e,r)}function Gse(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var h7=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Fm(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":Rw(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(h7))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function qse(t,e,r,n){for(var s=[],a="",i=0,o="",l="t",c,d,h,p="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!Rw(t,i))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(h=t.charCodeAt(++i))!==34&&i<t.length;)a+=String.fromCharCode(h);s[s.length]={t:"t",v:a},++i;break;case"\\":var m=t.charAt(++i),y=m==="("||m===")"?m:"t";s[s.length]={t:y,v:m},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(c==null&&(c=Dh(e,r,t.charAt(i+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=Dh(e,r),c==null))return"";for(a=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"上":var x={t:o,v:o};if(c==null&&(c=Dh(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(c!=null&&(x.v=c.H>=12?"P":"A"),x.t="T",p="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(c!=null&&(x.v=c.H>=12?"PM":"AM"),x.t="T",i+=5,p="h"):t.substr(i,5).toUpperCase()==="上午/下午"?(c!=null&&(x.v=c.H>=12?"下午":"上午"),x.t="T",i+=5,p="h"):(x.t="t",++i),c==null&&x.t==="T")return"";s[s.length]=x,l=o;break;case"[":for(a=o;t.charAt(i++)!=="]"&&i<t.length;)a+=t.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(h7)){if(c==null&&(c=Dh(e,r),c==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Fm(t)||(s[s.length]={t:"t",v:a}));break;case".":if(c!=null){for(a=o;++i<t.length&&(o=t.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;t.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)a+=t.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++i;break}var E=0,S=0,B;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=p,l="h",E<1&&(E=1);break;case"s":(B=s[i].v.match(/\.0+$/))&&(S=Math.max(S,B[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&s[i].v.match(/[Hh]/)&&(E=1),E<2&&s[i].v.match(/[Mm]/)&&(E=2),E<3&&s[i].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var D="",I;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=Use(s[i].t.charCodeAt(0),s[i].v,c,S),s[i].t="t";break;case"n":case"?":for(I=i+1;s[I]!=null&&((o=s[I].t)==="?"||o==="D"||(o===" "||o==="t")&&s[I+1]!=null&&(s[I+1].t==="?"||s[I+1].t==="t"&&s[I+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[I].v==="/"||s[I].v===" "&&s[I+1]!=null&&s[I+1].t=="?"));)s[i].v+=s[I].v,s[I]={v:"",t:";"},++I;D+=s[i].v,i=I-1;break;case"G":s[i].t="t",s[i].v=r0(e,r);break}var U="",F,C;if(D.length>0){D.charCodeAt(0)==40?(F=e<0&&D.charCodeAt(0)===45?-e:e,C=qA("n",D,F)):(F=e<0&&n>1?-e:e,C=qA("n",D,F),F<0&&s[0]&&s[0].t=="t"&&(C=C.substr(1),s[0].v="-"+s[0].v)),I=C.length-1;var _=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){_=i;break}var N=s.length;if(_===s.length&&C.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(I>=s[i].v.length-1?(I-=s[i].v.length,s[i].v=C.substr(I+1,s[i].v.length)):I<0?s[i].v="":(s[i].v=C.substr(0,I+1),I=-1),s[i].t="t",N=i);I>=0&&N<s.length&&(s[N].v=C.substr(0,I+1)+s[N].v)}else if(_!==s.length&&C.indexOf("E")===-1){for(I=C.indexOf(".")-1,i=_;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===_?s[i].v.indexOf(".")-1:s[i].v.length-1,U=s[i].v.substr(d+1);d>=0;--d)I>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(U=C.charAt(I--)+U);s[i].v=U,s[i].t="t",N=i}for(I>=0&&N<s.length&&(s[N].v=C.substr(0,I+1)+s[N].v),I=C.indexOf(".")+1,i=_;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==_)){for(d=s[i].v.indexOf(".")>-1&&i===_?s[i].v.indexOf(".")+1:0,U=s[i].v.substr(0,d);d<s[i].v.length;++d)I<C.length&&(U+=C.charAt(I++));s[i].v=U,s[i].t="t",N=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(F=n>1&&e<0&&i>0&&s[i-1].v==="-"?-e:e,s[i].v=qA(s[i].t,s[i].v,F),s[i].t="t");var j="";for(i=0;i!==s.length;++i)s[i]!=null&&(j+=s[i].v);return j}var cD=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function uD(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function Kse(t,e){var r=Gse(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(cD),o=r[1].match(cD);return uD(e,i)?[n,r[0]]:uD(e,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function uc(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Er)[t],n==null&&(n=r.table&&r.table[iD[t]]||Er[iD[t]]),n==null&&(n=Bse[t]||"General");break}if(Rw(n,0))return r0(e,r);e instanceof Date&&(e=i7(e,r.date1904));var s=Kse(n,e);if(Rw(s[1]))return r0(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return qse(s[1],e,r,s[0])}function KA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Er[r]==null){e<0&&(e=r);continue}if(Er[r]==t){e=r;break}}e<0&&(e=391)}return Er[e]=t,e}function cC(t){for(var e=0;e!=392;++e)t[e]!==void 0&&KA(t[e],e)}function Dm(){Er=Nse()}var $se={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},p7=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Wse(t){var e=typeof t=="number"?Er[t]:t;return e=e.replace(p7,"(\\d+)"),new RegExp("^"+e+"$")}function Yse(t,e,r){var n=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(e.match(p7)||[]).forEach(function(h,p){var m=parseInt(r[p+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=m;break;case"d":a=m;break;case"h":i=m;break;case"s":l=m;break;case"m":i>=0?o=m:s=m;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&a==-1?d:c+"T"+d}var Xse=function(){var t={};t.version="1.2.0";function e(){for(var C=0,_=new Array(256),N=0;N!=256;++N)C=N,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,_[N]=C;return typeof Int32Array<"u"?new Int32Array(_):_}var r=e();function n(C){var _=0,N=0,j=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(j=0;j!=256;++j)R[j]=C[j];for(j=0;j!=256;++j)for(N=C[j],_=256+j;_<4096;_+=256)N=R[_]=N>>>8^C[N&255];var L=[];for(j=1;j!=16;++j)L[j-1]=typeof Int32Array<"u"?R.subarray(j*256,j*256+256):R.slice(j*256,j*256+256);return L}var s=n(r),a=s[0],i=s[1],o=s[2],l=s[3],c=s[4],d=s[5],h=s[6],p=s[7],m=s[8],y=s[9],x=s[10],E=s[11],S=s[12],B=s[13],D=s[14];function I(C,_){for(var N=_^-1,j=0,R=C.length;j<R;)N=N>>>8^r[(N^C.charCodeAt(j++))&255];return~N}function U(C,_){for(var N=_^-1,j=C.length-15,R=0;R<j;)N=D[C[R++]^N&255]^B[C[R++]^N>>8&255]^S[C[R++]^N>>16&255]^E[C[R++]^N>>>24]^x[C[R++]]^y[C[R++]]^m[C[R++]]^p[C[R++]]^h[C[R++]]^d[C[R++]]^c[C[R++]]^l[C[R++]]^o[C[R++]]^i[C[R++]]^a[C[R++]]^r[C[R++]];for(j+=15;R<j;)N=N>>>8^r[(N^C[R++])&255];return~N}function F(C,_){for(var N=_^-1,j=0,R=C.length,L=0,Q=0;j<R;)L=C.charCodeAt(j++),L<128?N=N>>>8^r[(N^L)&255]:L<2048?(N=N>>>8^r[(N^(192|L>>6&31))&255],N=N>>>8^r[(N^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,Q=C.charCodeAt(j++)&1023,N=N>>>8^r[(N^(240|L>>8&7))&255],N=N>>>8^r[(N^(128|L>>2&63))&255],N=N>>>8^r[(N^(128|Q>>6&15|(L&3)<<4))&255],N=N>>>8^r[(N^(128|Q&63))&255]):(N=N>>>8^r[(N^(224|L>>12&15))&255],N=N>>>8^r[(N^(128|L>>6&63))&255],N=N>>>8^r[(N^(128|L&63))&255]);return~N}return t.table=r,t.bstr=I,t.buf=U,t.str=F,t}(),Ar=function(){var e={};e.version="1.2.1";function r(me,Be){for(var _e=me.split("/"),Se=Be.split("/"),Te=0,ke=0,$e=Math.min(_e.length,Se.length);Te<$e;++Te){if(ke=_e[Te].length-Se[Te].length)return ke;if(_e[Te]!=Se[Te])return _e[Te]<Se[Te]?-1:1}return _e.length-Se.length}function n(me){if(me.charAt(me.length-1)=="/")return me.slice(0,-1).indexOf("/")===-1?me:n(me.slice(0,-1));var Be=me.lastIndexOf("/");return Be===-1?me:me.slice(0,Be+1)}function s(me){if(me.charAt(me.length-1)=="/")return s(me.slice(0,-1));var Be=me.lastIndexOf("/");return Be===-1?me:me.slice(Be+1)}function a(me,Be){typeof Be=="string"&&(Be=new Date(Be));var _e=Be.getHours();_e=_e<<6|Be.getMinutes(),_e=_e<<5|Be.getSeconds()>>>1,me.write_shift(2,_e);var Se=Be.getFullYear()-1980;Se=Se<<4|Be.getMonth()+1,Se=Se<<5|Be.getDate(),me.write_shift(2,Se)}function i(me){var Be=me.read_shift(2)&65535,_e=me.read_shift(2)&65535,Se=new Date,Te=_e&31;_e>>>=5;var ke=_e&15;_e>>>=4,Se.setMilliseconds(0),Se.setFullYear(_e+1980),Se.setMonth(ke-1),Se.setDate(Te);var $e=Be&31;Be>>>=5;var nt=Be&63;return Be>>>=6,Se.setHours(Be),Se.setMinutes(nt),Se.setSeconds($e<<1),Se}function o(me){bi(me,0);for(var Be={},_e=0;me.l<=me.length-4;){var Se=me.read_shift(2),Te=me.read_shift(2),ke=me.l+Te,$e={};switch(Se){case 21589:_e=me.read_shift(1),_e&1&&($e.mtime=me.read_shift(4)),Te>5&&(_e&2&&($e.atime=me.read_shift(4)),_e&4&&($e.ctime=me.read_shift(4))),$e.mtime&&($e.mt=new Date($e.mtime*1e3));break}me.l=ke,Be[Se]=$e}return Be}var l;function c(){return l||(l={})}function d(me,Be){if(me[0]==80&&me[1]==75)return on(me,Be);if((me[0]|32)==109&&(me[1]|32)==105)return Ua(me,Be);if(me.length<512)throw new Error("CFB file size "+me.length+" < 512");var _e=3,Se=512,Te=0,ke=0,$e=0,nt=0,Ve=0,Xe=[],et=me.slice(0,512);bi(et,0);var yt=h(et);switch(_e=yt[0],_e){case 3:Se=512;break;case 4:Se=4096;break;case 0:if(yt[1]==0)return on(me,Be);default:throw new Error("Major Version: Expected 3 or 4 saw "+_e)}Se!==512&&(et=me.slice(0,Se),bi(et,28));var Bt=me.slice(0,Se);p(et,_e);var Ht=et.read_shift(4,"i");if(_e===3&&Ht!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ht);et.l+=4,$e=et.read_shift(4,"i"),et.l+=4,et.chk("00100000","Mini Stream Cutoff Size: "),nt=et.read_shift(4,"i"),Te=et.read_shift(4,"i"),Ve=et.read_shift(4,"i"),ke=et.read_shift(4,"i");for(var Nt=-1,Ut=0;Ut<109&&(Nt=et.read_shift(4,"i"),!(Nt<0));++Ut)Xe[Ut]=Nt;var fr=m(me,Se);E(Ve,ke,fr,Se,Xe);var Hr=B(fr,$e,Xe,Se);Hr[$e].name="!Directory",Te>0&&nt!==Q&&(Hr[nt].name="!MiniFAT"),Hr[Xe[0]].name="!FAT",Hr.fat_addrs=Xe,Hr.ssz=Se;var Vr={},$r=[],Os=[],Ni=[];D($e,Hr,fr,$r,Te,Vr,Os,nt),y(Os,Ni,$r),$r.shift();var js={FileIndex:Os,FullPaths:Ni};return Be&&Be.raw&&(js.raw={header:Bt,sectors:fr}),js}function h(me){if(me[me.l]==80&&me[me.l+1]==75)return[0,0];me.chk(H,"Header Signature: "),me.l+=16;var Be=me.read_shift(2,"u");return[me.read_shift(2,"u"),Be]}function p(me,Be){var _e=9;switch(me.l+=2,_e=me.read_shift(2)){case 9:if(Be!=3)throw new Error("Sector Shift: Expected 9 saw "+_e);break;case 12:if(Be!=4)throw new Error("Sector Shift: Expected 12 saw "+_e);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+_e)}me.chk("0600","Mini Sector Shift: "),me.chk("000000000000","Reserved: ")}function m(me,Be){for(var _e=Math.ceil(me.length/Be)-1,Se=[],Te=1;Te<_e;++Te)Se[Te-1]=me.slice(Te*Be,(Te+1)*Be);return Se[_e-1]=me.slice(_e*Be),Se}function y(me,Be,_e){for(var Se=0,Te=0,ke=0,$e=0,nt=0,Ve=_e.length,Xe=[],et=[];Se<Ve;++Se)Xe[Se]=et[Se]=Se,Be[Se]=_e[Se];for(;nt<et.length;++nt)Se=et[nt],Te=me[Se].L,ke=me[Se].R,$e=me[Se].C,Xe[Se]===Se&&(Te!==-1&&Xe[Te]!==Te&&(Xe[Se]=Xe[Te]),ke!==-1&&Xe[ke]!==ke&&(Xe[Se]=Xe[ke])),$e!==-1&&(Xe[$e]=Se),Te!==-1&&Se!=Xe[Se]&&(Xe[Te]=Xe[Se],et.lastIndexOf(Te)<nt&&et.push(Te)),ke!==-1&&Se!=Xe[Se]&&(Xe[ke]=Xe[Se],et.lastIndexOf(ke)<nt&&et.push(ke));for(Se=1;Se<Ve;++Se)Xe[Se]===Se&&(ke!==-1&&Xe[ke]!==ke?Xe[Se]=Xe[ke]:Te!==-1&&Xe[Te]!==Te&&(Xe[Se]=Xe[Te]));for(Se=1;Se<Ve;++Se)if(me[Se].type!==0){if(nt=Se,nt!=Xe[nt])do nt=Xe[nt],Be[Se]=Be[nt]+"/"+Be[Se];while(nt!==0&&Xe[nt]!==-1&&nt!=Xe[nt]);Xe[Se]=-1}for(Be[0]+="/",Se=1;Se<Ve;++Se)me[Se].type!==2&&(Be[Se]+="/")}function x(me,Be,_e){for(var Se=me.start,Te=me.size,ke=[],$e=Se;_e&&Te>0&&$e>=0;)ke.push(Be.slice($e*L,$e*L+L)),Te-=L,$e=Bh(_e,$e*4);return ke.length===0?ut(0):ii(ke).slice(0,me.size)}function E(me,Be,_e,Se,Te){var ke=Q;if(me===Q){if(Be!==0)throw new Error("DIFAT chain shorter than expected")}else if(me!==-1){var $e=_e[me],nt=(Se>>>2)-1;if(!$e)return;for(var Ve=0;Ve<nt&&(ke=Bh($e,Ve*4))!==Q;++Ve)Te.push(ke);E(Bh($e,Se-4),Be-1,_e,Se,Te)}}function S(me,Be,_e,Se,Te){var ke=[],$e=[];Te||(Te=[]);var nt=Se-1,Ve=0,Xe=0;for(Ve=Be;Ve>=0;){Te[Ve]=!0,ke[ke.length]=Ve,$e.push(me[Ve]);var et=_e[Math.floor(Ve*4/Se)];if(Xe=Ve*4&nt,Se<4+Xe)throw new Error("FAT boundary crossed: "+Ve+" 4 "+Se);if(!me[et])break;Ve=Bh(me[et],Xe)}return{nodes:ke,data:bD([$e])}}function B(me,Be,_e,Se){var Te=me.length,ke=[],$e=[],nt=[],Ve=[],Xe=Se-1,et=0,yt=0,Bt=0,Ht=0;for(et=0;et<Te;++et)if(nt=[],Bt=et+Be,Bt>=Te&&(Bt-=Te),!$e[Bt]){Ve=[];var Nt=[];for(yt=Bt;yt>=0;){Nt[yt]=!0,$e[yt]=!0,nt[nt.length]=yt,Ve.push(me[yt]);var Ut=_e[Math.floor(yt*4/Se)];if(Ht=yt*4&Xe,Se<4+Ht)throw new Error("FAT boundary crossed: "+yt+" 4 "+Se);if(!me[Ut]||(yt=Bh(me[Ut],Ht),Nt[yt]))break}ke[Bt]={nodes:nt,data:bD([Ve])}}return ke}function D(me,Be,_e,Se,Te,ke,$e,nt){for(var Ve=0,Xe=Se.length?2:0,et=Be[me].data,yt=0,Bt=0,Ht;yt<et.length;yt+=128){var Nt=et.slice(yt,yt+128);bi(Nt,64),Bt=Nt.read_shift(2),Ht=j4(Nt,0,Bt-Xe),Se.push(Ht);var Ut={name:Ht,type:Nt.read_shift(1),color:Nt.read_shift(1),L:Nt.read_shift(4,"i"),R:Nt.read_shift(4,"i"),C:Nt.read_shift(4,"i"),clsid:Nt.read_shift(16),state:Nt.read_shift(4,"i"),start:0,size:0},fr=Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2);fr!==0&&(Ut.ct=I(Nt,Nt.l-8));var Hr=Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2);Hr!==0&&(Ut.mt=I(Nt,Nt.l-8)),Ut.start=Nt.read_shift(4,"i"),Ut.size=Nt.read_shift(4,"i"),Ut.size<0&&Ut.start<0&&(Ut.size=Ut.type=0,Ut.start=Q,Ut.name=""),Ut.type===5?(Ve=Ut.start,Te>0&&Ve!==Q&&(Be[Ve].name="!StreamData")):Ut.size>=4096?(Ut.storage="fat",Be[Ut.start]===void 0&&(Be[Ut.start]=S(_e,Ut.start,Be.fat_addrs,Be.ssz)),Be[Ut.start].name=Ut.name,Ut.content=Be[Ut.start].data.slice(0,Ut.size)):(Ut.storage="minifat",Ut.size<0?Ut.size=0:Ve!==Q&&Ut.start!==Q&&Be[Ve]&&(Ut.content=x(Ut,Be[Ve].data,(Be[nt]||{}).data))),Ut.content&&bi(Ut.content,0),ke[Ht]=Ut,$e.push(Ut)}}function I(me,Be){return new Date((fl(me,Be+4)/1e7*Math.pow(2,32)+fl(me,Be)/1e7-11644473600)*1e3)}function U(me,Be){return c(),d(l.readFileSync(me),Be)}function F(me,Be){var _e=Be&&Be.type;switch(_e||Zr&&Buffer.isBuffer(me)&&(_e="buffer"),_e||"base64"){case"file":return U(me,Be);case"base64":return d(hl(wl(me)),Be);case"binary":return d(hl(me),Be)}return d(me,Be)}function C(me,Be){var _e=Be||{},Se=_e.root||"Root Entry";if(me.FullPaths||(me.FullPaths=[]),me.FileIndex||(me.FileIndex=[]),me.FullPaths.length!==me.FileIndex.length)throw new Error("inconsistent CFB structure");me.FullPaths.length===0&&(me.FullPaths[0]=Se+"/",me.FileIndex[0]={name:Se,type:5}),_e.CLSID&&(me.FileIndex[0].clsid=_e.CLSID),_(me)}function _(me){var Be="Sh33tJ5";if(!Ar.find(me,"/"+Be)){var _e=ut(4);_e[0]=55,_e[1]=_e[3]=50,_e[2]=54,me.FileIndex.push({name:Be,type:2,content:_e,size:4,L:69,R:69,C:69}),me.FullPaths.push(me.FullPaths[0]+Be),N(me)}}function N(me,Be){C(me);for(var _e=!1,Se=!1,Te=me.FullPaths.length-1;Te>=0;--Te){var ke=me.FileIndex[Te];switch(ke.type){case 0:Se?_e=!0:(me.FileIndex.pop(),me.FullPaths.pop());break;case 1:case 2:case 5:Se=!0,isNaN(ke.R*ke.L*ke.C)&&(_e=!0),ke.R>-1&&ke.L>-1&&ke.R==ke.L&&(_e=!0);break;default:_e=!0;break}}if(!(!_e&&!Be)){var $e=new Date(1987,1,19),nt=0,Ve=Object.create?Object.create(null):{},Xe=[];for(Te=0;Te<me.FullPaths.length;++Te)Ve[me.FullPaths[Te]]=!0,me.FileIndex[Te].type!==0&&Xe.push([me.FullPaths[Te],me.FileIndex[Te]]);for(Te=0;Te<Xe.length;++Te){var et=n(Xe[Te][0]);Se=Ve[et],Se||(Xe.push([et,{name:s(et).replace("/",""),type:1,clsid:Y,ct:$e,mt:$e,content:null}]),Ve[et]=!0)}for(Xe.sort(function(Ht,Nt){return r(Ht[0],Nt[0])}),me.FullPaths=[],me.FileIndex=[],Te=0;Te<Xe.length;++Te)me.FullPaths[Te]=Xe[Te][0],me.FileIndex[Te]=Xe[Te][1];for(Te=0;Te<Xe.length;++Te){var yt=me.FileIndex[Te],Bt=me.FullPaths[Te];if(yt.name=s(Bt).replace("/",""),yt.L=yt.R=yt.C=-(yt.color=1),yt.size=yt.content?yt.content.length:0,yt.start=0,yt.clsid=yt.clsid||Y,Te===0)yt.C=Xe.length>1?1:-1,yt.size=0,yt.type=5;else if(Bt.slice(-1)=="/"){for(nt=Te+1;nt<Xe.length&&n(me.FullPaths[nt])!=Bt;++nt);for(yt.C=nt>=Xe.length?-1:nt,nt=Te+1;nt<Xe.length&&n(me.FullPaths[nt])!=n(Bt);++nt);yt.R=nt>=Xe.length?-1:nt,yt.type=1}else n(me.FullPaths[Te+1]||"")==n(Bt)&&(yt.R=Te+1),yt.type=2}}}function j(me,Be){var _e=Be||{};if(_e.fileType=="mad")return Gt(me,_e);switch(N(me),_e.fileType){case"zip":return bs(me,_e)}var Se=function(Ht){for(var Nt=0,Ut=0,fr=0;fr<Ht.FileIndex.length;++fr){var Hr=Ht.FileIndex[fr];if(Hr.content){var Vr=Hr.content.length;Vr>0&&(Vr<4096?Nt+=Vr+63>>6:Ut+=Vr+511>>9)}}for(var $r=Ht.FullPaths.length+3>>2,Os=Nt+7>>3,Ni=Nt+127>>7,js=Os+Ut+$r+Ni,va=js+127>>7,ea=va<=109?0:Math.ceil((va-109)/127);js+va+ea+127>>7>va;)ea=++va<=109?0:Math.ceil((va-109)/127);var Ma=[1,ea,va,Ni,$r,Ut,Nt,0];return Ht.FileIndex[0].size=Nt<<6,Ma[7]=(Ht.FileIndex[0].start=Ma[0]+Ma[1]+Ma[2]+Ma[3]+Ma[4]+Ma[5])+(Ma[6]+7>>3),Ma}(me),Te=ut(Se[7]<<9),ke=0,$e=0;{for(ke=0;ke<8;++ke)Te.write_shift(1,te[ke]);for(ke=0;ke<8;++ke)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),ke=0;ke<3;++ke)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,Se[2]),Te.write_shift(4,Se[0]+Se[1]+Se[2]+Se[3]-1),Te.write_shift(4,0),Te.write_shift(4,4096),Te.write_shift(4,Se[3]?Se[0]+Se[1]+Se[2]-1:Q),Te.write_shift(4,Se[3]),Te.write_shift(-4,Se[1]?Se[0]-1:Q),Te.write_shift(4,Se[1]),ke=0;ke<109;++ke)Te.write_shift(-4,ke<Se[2]?Se[1]+ke:-1)}if(Se[1])for($e=0;$e<Se[1];++$e){for(;ke<236+$e*127;++ke)Te.write_shift(-4,ke<Se[2]?Se[1]+ke:-1);Te.write_shift(-4,$e===Se[1]-1?Q:$e+1)}var nt=function(Ht){for($e+=Ht;ke<$e-1;++ke)Te.write_shift(-4,ke+1);Ht&&(++ke,Te.write_shift(-4,Q))};for($e=ke=0,$e+=Se[1];ke<$e;++ke)Te.write_shift(-4,re.DIFSECT);for($e+=Se[2];ke<$e;++ke)Te.write_shift(-4,re.FATSECT);nt(Se[3]),nt(Se[4]);for(var Ve=0,Xe=0,et=me.FileIndex[0];Ve<me.FileIndex.length;++Ve)et=me.FileIndex[Ve],et.content&&(Xe=et.content.length,!(Xe<4096)&&(et.start=$e,nt(Xe+511>>9)));for(nt(Se[6]+7>>3);Te.l&511;)Te.write_shift(-4,re.ENDOFCHAIN);for($e=ke=0,Ve=0;Ve<me.FileIndex.length;++Ve)et=me.FileIndex[Ve],et.content&&(Xe=et.content.length,!(!Xe||Xe>=4096)&&(et.start=$e,nt(Xe+63>>6)));for(;Te.l&511;)Te.write_shift(-4,re.ENDOFCHAIN);for(ke=0;ke<Se[4]<<2;++ke){var yt=me.FullPaths[ke];if(!yt||yt.length===0){for(Ve=0;Ve<17;++Ve)Te.write_shift(4,0);for(Ve=0;Ve<3;++Ve)Te.write_shift(4,-1);for(Ve=0;Ve<12;++Ve)Te.write_shift(4,0);continue}et=me.FileIndex[ke],ke===0&&(et.start=et.size?et.start-1:Q);var Bt=ke===0&&_e.root||et.name;if(Xe=2*(Bt.length+1),Te.write_shift(64,Bt,"utf16le"),Te.write_shift(2,Xe),Te.write_shift(1,et.type),Te.write_shift(1,et.color),Te.write_shift(-4,et.L),Te.write_shift(-4,et.R),Te.write_shift(-4,et.C),et.clsid)Te.write_shift(16,et.clsid,"hex");else for(Ve=0;Ve<4;++Ve)Te.write_shift(4,0);Te.write_shift(4,et.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,et.start),Te.write_shift(4,et.size),Te.write_shift(4,0)}for(ke=1;ke<me.FileIndex.length;++ke)if(et=me.FileIndex[ke],et.size>=4096)if(Te.l=et.start+1<<9,Zr&&Buffer.isBuffer(et.content))et.content.copy(Te,Te.l,0,et.size),Te.l+=et.size+511&-512;else{for(Ve=0;Ve<et.size;++Ve)Te.write_shift(1,et.content[Ve]);for(;Ve&511;++Ve)Te.write_shift(1,0)}for(ke=1;ke<me.FileIndex.length;++ke)if(et=me.FileIndex[ke],et.size>0&&et.size<4096)if(Zr&&Buffer.isBuffer(et.content))et.content.copy(Te,Te.l,0,et.size),Te.l+=et.size+63&-64;else{for(Ve=0;Ve<et.size;++Ve)Te.write_shift(1,et.content[Ve]);for(;Ve&63;++Ve)Te.write_shift(1,0)}if(Zr)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function R(me,Be){var _e=me.FullPaths.map(function(Ve){return Ve.toUpperCase()}),Se=_e.map(function(Ve){var Xe=Ve.split("/");return Xe[Xe.length-(Ve.slice(-1)=="/"?2:1)]}),Te=!1;Be.charCodeAt(0)===47?(Te=!0,Be=_e[0].slice(0,-1)+Be):Te=Be.indexOf("/")!==-1;var ke=Be.toUpperCase(),$e=Te===!0?_e.indexOf(ke):Se.indexOf(ke);if($e!==-1)return me.FileIndex[$e];var nt=!ke.match(Zg);for(ke=ke.replace(xo,""),nt&&(ke=ke.replace(Zg,"!")),$e=0;$e<_e.length;++$e)if((nt?_e[$e].replace(Zg,"!"):_e[$e]).replace(xo,"")==ke||(nt?Se[$e].replace(Zg,"!"):Se[$e]).replace(xo,"")==ke)return me.FileIndex[$e];return null}var L=64,Q=-2,H="d0cf11e0a1b11ae1",te=[208,207,17,224,161,177,26,225],Y="00000000000000000000000000000000",re={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Q,FREESECT:-1,HEADER_SIGNATURE:H,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Y,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function V(me,Be,_e){c();var Se=j(me,_e);l.writeFileSync(Be,Se)}function J(me){for(var Be=new Array(me.length),_e=0;_e<me.length;++_e)Be[_e]=String.fromCharCode(me[_e]);return Be.join("")}function K(me,Be){var _e=j(me,Be);switch(Be&&Be.type||"buffer"){case"file":return c(),l.writeFileSync(Be.filename,_e),_e;case"binary":return typeof _e=="string"?_e:J(_e);case"base64":return Xx(typeof _e=="string"?_e:J(_e));case"buffer":if(Zr)return Buffer.isBuffer(_e)?_e:cd(_e);case"array":return typeof _e=="string"?hl(_e):_e}return _e}var ae;function O(me){try{var Be=me.InflateRaw,_e=new Be;if(_e._processChunk(new Uint8Array([3,0]),_e._finishFlushFlag),_e.bytesRead)ae=me;else throw new Error("zlib does not expose bytesRead")}catch(Se){console.error("cannot use native zlib: "+(Se.message||Se))}}function W(me,Be){if(!ae)return Lr(me,Be);var _e=ae.InflateRaw,Se=new _e,Te=Se._processChunk(me.slice(me.l),Se._finishFlushFlag);return me.l+=Se.bytesRead,Te}function Z(me){return ae?ae.deflateRawSync(me):It(me)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ve=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function pe(me){var Be=(me<<1|me<<11)&139536|(me<<5|me<<15)&558144;return(Be>>16|Be>>8|Be)&255}for(var he=typeof Uint8Array<"u",de=he?new Uint8Array(256):[],ce=0;ce<256;++ce)de[ce]=pe(ce);function oe(me,Be){var _e=de[me&255];return Be<=8?_e>>>8-Be:(_e=_e<<8|de[me>>8&255],Be<=16?_e>>>16-Be:(_e=_e<<8|de[me>>16&255],_e>>>24-Be))}function Re(me,Be){var _e=Be&7,Se=Be>>>3;return(me[Se]|(_e<=6?0:me[Se+1]<<8))>>>_e&3}function qe(me,Be){var _e=Be&7,Se=Be>>>3;return(me[Se]|(_e<=5?0:me[Se+1]<<8))>>>_e&7}function Ie(me,Be){var _e=Be&7,Se=Be>>>3;return(me[Se]|(_e<=4?0:me[Se+1]<<8))>>>_e&15}function Ee(me,Be){var _e=Be&7,Se=Be>>>3;return(me[Se]|(_e<=3?0:me[Se+1]<<8))>>>_e&31}function De(me,Be){var _e=Be&7,Se=Be>>>3;return(me[Se]|(_e<=1?0:me[Se+1]<<8))>>>_e&127}function je(me,Be,_e){var Se=Be&7,Te=Be>>>3,ke=(1<<_e)-1,$e=me[Te]>>>Se;return _e<8-Se||($e|=me[Te+1]<<8-Se,_e<16-Se)||($e|=me[Te+2]<<16-Se,_e<24-Se)||($e|=me[Te+3]<<24-Se),$e&ke}function We(me,Be,_e){var Se=Be&7,Te=Be>>>3;return Se<=5?me[Te]|=(_e&7)<<Se:(me[Te]|=_e<<Se&255,me[Te+1]=(_e&7)>>8-Se),Be+3}function ct(me,Be,_e){var Se=Be&7,Te=Be>>>3;return _e=(_e&1)<<Se,me[Te]|=_e,Be+1}function wt(me,Be,_e){var Se=Be&7,Te=Be>>>3;return _e<<=Se,me[Te]|=_e&255,_e>>>=8,me[Te+1]=_e,Be+8}function ot(me,Be,_e){var Se=Be&7,Te=Be>>>3;return _e<<=Se,me[Te]|=_e&255,_e>>>=8,me[Te+1]=_e&255,me[Te+2]=_e>>>8,Be+16}function Dt(me,Be){var _e=me.length,Se=2*_e>Be?2*_e:Be+5,Te=0;if(_e>=Be)return me;if(Zr){var ke=nD(Se);if(me.copy)me.copy(ke);else for(;Te<me.length;++Te)ke[Te]=me[Te];return ke}else if(he){var $e=new Uint8Array(Se);if($e.set)$e.set(me);else for(;Te<_e;++Te)$e[Te]=me[Te];return $e}return me.length=Se,me}function Rt(me){for(var Be=new Array(me),_e=0;_e<me;++_e)Be[_e]=0;return Be}function Yt(me,Be,_e){var Se=1,Te=0,ke=0,$e=0,nt=0,Ve=me.length,Xe=he?new Uint16Array(32):Rt(32);for(ke=0;ke<32;++ke)Xe[ke]=0;for(ke=Ve;ke<_e;++ke)me[ke]=0;Ve=me.length;var et=he?new Uint16Array(Ve):Rt(Ve);for(ke=0;ke<Ve;++ke)Xe[Te=me[ke]]++,Se<Te&&(Se=Te),et[ke]=0;for(Xe[0]=0,ke=1;ke<=Se;++ke)Xe[ke+16]=nt=nt+Xe[ke-1]<<1;for(ke=0;ke<Ve;++ke)nt=me[ke],nt!=0&&(et[ke]=Xe[nt+16]++);var yt=0;for(ke=0;ke<Ve;++ke)if(yt=me[ke],yt!=0)for(nt=oe(et[ke],Se)>>Se-yt,$e=(1<<Se+4-yt)-1;$e>=0;--$e)Be[nt|$e<<yt]=yt&15|ke<<4;return Se}var Lt=he?new Uint16Array(512):Rt(512),Qt=he?new Uint16Array(32):Rt(32);if(!he){for(var qt=0;qt<512;++qt)Lt[qt]=0;for(qt=0;qt<32;++qt)Qt[qt]=0}(function(){for(var me=[],Be=0;Be<32;Be++)me.push(5);Yt(me,Qt,32);var _e=[];for(Be=0;Be<=143;Be++)_e.push(8);for(;Be<=255;Be++)_e.push(9);for(;Be<=279;Be++)_e.push(7);for(;Be<=287;Be++)_e.push(8);Yt(_e,Lt,288)})();var kt=function(){for(var Be=he?new Uint8Array(32768):[],_e=0,Se=0;_e<ve.length-1;++_e)for(;Se<ve[_e+1];++Se)Be[Se]=_e;for(;Se<32768;++Se)Be[Se]=29;var Te=he?new Uint8Array(259):[];for(_e=0,Se=0;_e<le.length-1;++_e)for(;Se<le[_e+1];++Se)Te[Se]=_e;function ke(nt,Ve){for(var Xe=0;Xe<nt.length;){var et=Math.min(65535,nt.length-Xe),yt=Xe+et==nt.length;for(Ve.write_shift(1,+yt),Ve.write_shift(2,et),Ve.write_shift(2,~et&65535);et-- >0;)Ve[Ve.l++]=nt[Xe++]}return Ve.l}function $e(nt,Ve){for(var Xe=0,et=0,yt=he?new Uint16Array(32768):[];et<nt.length;){var Bt=Math.min(65535,nt.length-et);if(Bt<10){for(Xe=We(Ve,Xe,+(et+Bt==nt.length)),Xe&7&&(Xe+=8-(Xe&7)),Ve.l=Xe/8|0,Ve.write_shift(2,Bt),Ve.write_shift(2,~Bt&65535);Bt-- >0;)Ve[Ve.l++]=nt[et++];Xe=Ve.l*8;continue}Xe=We(Ve,Xe,+(et+Bt==nt.length)+2);for(var Ht=0;Bt-- >0;){var Nt=nt[et];Ht=(Ht<<5^Nt)&32767;var Ut=-1,fr=0;if((Ut=yt[Ht])&&(Ut|=et&-32768,Ut>et&&(Ut-=32768),Ut<et))for(;nt[Ut+fr]==nt[et+fr]&&fr<250;)++fr;if(fr>2){Nt=Te[fr],Nt<=22?Xe=wt(Ve,Xe,de[Nt+1]>>1)-1:(wt(Ve,Xe,3),Xe+=5,wt(Ve,Xe,de[Nt-23]>>5),Xe+=3);var Hr=Nt<8?0:Nt-4>>2;Hr>0&&(ot(Ve,Xe,fr-le[Nt]),Xe+=Hr),Nt=Be[et-Ut],Xe=wt(Ve,Xe,de[Nt]>>3),Xe-=3;var Vr=Nt<4?0:Nt-2>>1;Vr>0&&(ot(Ve,Xe,et-Ut-ve[Nt]),Xe+=Vr);for(var $r=0;$r<fr;++$r)yt[Ht]=et&32767,Ht=(Ht<<5^nt[et])&32767,++et;Bt-=fr-1}else Nt<=143?Nt=Nt+48:Xe=ct(Ve,Xe,1),Xe=wt(Ve,Xe,de[Nt]),yt[Ht]=et&32767,++et}Xe=wt(Ve,Xe,0)-1}return Ve.l=(Xe+7)/8|0,Ve.l}return function(Ve,Xe){return Ve.length<8?ke(Ve,Xe):$e(Ve,Xe)}}();function It(me){var Be=ut(50+Math.floor(me.length*1.1)),_e=kt(me,Be);return Be.slice(0,_e)}var mt=he?new Uint16Array(32768):Rt(32768),_r=he?new Uint16Array(32768):Rt(32768),Jt=he?new Uint16Array(128):Rt(128),mn=1,wr=1;function Or(me,Be){var _e=Ee(me,Be)+257;Be+=5;var Se=Ee(me,Be)+1;Be+=5;var Te=Ie(me,Be)+4;Be+=4;for(var ke=0,$e=he?new Uint8Array(19):Rt(19),nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ve=1,Xe=he?new Uint8Array(8):Rt(8),et=he?new Uint8Array(8):Rt(8),yt=$e.length,Bt=0;Bt<Te;++Bt)$e[ne[Bt]]=ke=qe(me,Be),Ve<ke&&(Ve=ke),Xe[ke]++,Be+=3;var Ht=0;for(Xe[0]=0,Bt=1;Bt<=Ve;++Bt)et[Bt]=Ht=Ht+Xe[Bt-1]<<1;for(Bt=0;Bt<yt;++Bt)(Ht=$e[Bt])!=0&&(nt[Bt]=et[Ht]++);var Nt=0;for(Bt=0;Bt<yt;++Bt)if(Nt=$e[Bt],Nt!=0){Ht=de[nt[Bt]]>>8-Nt;for(var Ut=(1<<7-Nt)-1;Ut>=0;--Ut)Jt[Ht|Ut<<Nt]=Nt&7|Bt<<3}var fr=[];for(Ve=1;fr.length<_e+Se;)switch(Ht=Jt[De(me,Be)],Be+=Ht&7,Ht>>>=3){case 16:for(ke=3+Re(me,Be),Be+=2,Ht=fr[fr.length-1];ke-- >0;)fr.push(Ht);break;case 17:for(ke=3+qe(me,Be),Be+=3;ke-- >0;)fr.push(0);break;case 18:for(ke=11+De(me,Be),Be+=7;ke-- >0;)fr.push(0);break;default:fr.push(Ht),Ve<Ht&&(Ve=Ht);break}var Hr=fr.slice(0,_e),Vr=fr.slice(_e);for(Bt=_e;Bt<286;++Bt)Hr[Bt]=0;for(Bt=Se;Bt<30;++Bt)Vr[Bt]=0;return mn=Yt(Hr,mt,286),wr=Yt(Vr,_r,30),Be}function Rn(me,Be){if(me[0]==3&&!(me[1]&3))return[Hf(Be),2];for(var _e=0,Se=0,Te=nD(Be||1<<18),ke=0,$e=Te.length>>>0,nt=0,Ve=0;(Se&1)==0;){if(Se=qe(me,_e),_e+=3,Se>>>1)Se>>1==1?(nt=9,Ve=5):(_e=Or(me,_e),nt=mn,Ve=wr);else{_e&7&&(_e+=8-(_e&7));var Xe=me[_e>>>3]|me[(_e>>>3)+1]<<8;if(_e+=32,Xe>0)for(!Be&&$e<ke+Xe&&(Te=Dt(Te,ke+Xe),$e=Te.length);Xe-- >0;)Te[ke++]=me[_e>>>3],_e+=8;continue}for(;;){!Be&&$e<ke+32767&&(Te=Dt(Te,ke+32767),$e=Te.length);var et=je(me,_e,nt),yt=Se>>>1==1?Lt[et]:mt[et];if(_e+=yt&15,yt>>>=4,(yt>>>8&255)===0)Te[ke++]=yt;else{if(yt==256)break;yt-=257;var Bt=yt<8?0:yt-4>>2;Bt>5&&(Bt=0);var Ht=ke+le[yt];Bt>0&&(Ht+=je(me,_e,Bt),_e+=Bt),et=je(me,_e,Ve),yt=Se>>>1==1?Qt[et]:_r[et],_e+=yt&15,yt>>>=4;var Nt=yt<4?0:yt-2>>1,Ut=ve[yt];for(Nt>0&&(Ut+=je(me,_e,Nt),_e+=Nt),!Be&&$e<Ht&&(Te=Dt(Te,Ht+100),$e=Te.length);ke<Ht;)Te[ke]=Te[ke-Ut],++ke}}}return Be?[Te,_e+7>>>3]:[Te.slice(0,ke),_e+7>>>3]}function Lr(me,Be){var _e=me.slice(me.l||0),Se=Rn(_e,Be);return me.l+=Se[1],Se[0]}function ga(me,Be){if(me)typeof console<"u"&&console.error(Be);else throw new Error(Be)}function on(me,Be){var _e=me;bi(_e,0);var Se=[],Te=[],ke={FileIndex:Se,FullPaths:Te};C(ke,{root:Be.root});for(var $e=_e.length-4;(_e[$e]!=80||_e[$e+1]!=75||_e[$e+2]!=5||_e[$e+3]!=6)&&$e>=0;)--$e;_e.l=$e+4,_e.l+=4;var nt=_e.read_shift(2);_e.l+=6;var Ve=_e.read_shift(4);for(_e.l=Ve,$e=0;$e<nt;++$e){_e.l+=20;var Xe=_e.read_shift(4),et=_e.read_shift(4),yt=_e.read_shift(2),Bt=_e.read_shift(2),Ht=_e.read_shift(2);_e.l+=8;var Nt=_e.read_shift(4),Ut=o(_e.slice(_e.l+yt,_e.l+yt+Bt));_e.l+=yt+Bt+Ht;var fr=_e.l;_e.l=Nt+4,ls(_e,Xe,et,ke,Ut),_e.l=fr}return ke}function ls(me,Be,_e,Se,Te){me.l+=2;var ke=me.read_shift(2),$e=me.read_shift(2),nt=i(me);if(ke&8257)throw new Error("Unsupported ZIP encryption");for(var Ve=me.read_shift(4),Xe=me.read_shift(4),et=me.read_shift(4),yt=me.read_shift(2),Bt=me.read_shift(2),Ht="",Nt=0;Nt<yt;++Nt)Ht+=String.fromCharCode(me[me.l++]);if(Bt){var Ut=o(me.slice(me.l,me.l+Bt));(Ut[21589]||{}).mt&&(nt=Ut[21589].mt),((Te||{})[21589]||{}).mt&&(nt=Te[21589].mt)}me.l+=Bt;var fr=me.slice(me.l,me.l+Xe);switch($e){case 8:fr=W(me,et);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+$e)}var Hr=!1;ke&8&&(Ve=me.read_shift(4),Ve==134695760&&(Ve=me.read_shift(4),Hr=!0),Xe=me.read_shift(4),et=me.read_shift(4)),Xe!=Be&&ga(Hr,"Bad compressed size: "+Be+" != "+Xe),et!=_e&&ga(Hr,"Bad uncompressed size: "+_e+" != "+et),ln(Se,Ht,fr,{unsafe:!0,mt:nt})}function bs(me,Be){var _e=Be||{},Se=[],Te=[],ke=ut(1),$e=_e.compression?8:0,nt=0,Ve=0,Xe=0,et=0,yt=0,Bt=me.FullPaths[0],Ht=Bt,Nt=me.FileIndex[0],Ut=[],fr=0;for(Ve=1;Ve<me.FullPaths.length;++Ve)if(Ht=me.FullPaths[Ve].slice(Bt.length),Nt=me.FileIndex[Ve],!(!Nt.size||!Nt.content||Ht=="Sh33tJ5")){var Hr=et,Vr=ut(Ht.length);for(Xe=0;Xe<Ht.length;++Xe)Vr.write_shift(1,Ht.charCodeAt(Xe)&127);Vr=Vr.slice(0,Vr.l),Ut[yt]=Xse.buf(Nt.content,0);var $r=Nt.content;$e==8&&($r=Z($r)),ke=ut(30),ke.write_shift(4,67324752),ke.write_shift(2,20),ke.write_shift(2,nt),ke.write_shift(2,$e),Nt.mt?a(ke,Nt.mt):ke.write_shift(4,0),ke.write_shift(-4,Ut[yt]),ke.write_shift(4,$r.length),ke.write_shift(4,Nt.content.length),ke.write_shift(2,Vr.length),ke.write_shift(2,0),et+=ke.length,Se.push(ke),et+=Vr.length,Se.push(Vr),et+=$r.length,Se.push($r),ke=ut(46),ke.write_shift(4,33639248),ke.write_shift(2,0),ke.write_shift(2,20),ke.write_shift(2,nt),ke.write_shift(2,$e),ke.write_shift(4,0),ke.write_shift(-4,Ut[yt]),ke.write_shift(4,$r.length),ke.write_shift(4,Nt.content.length),ke.write_shift(2,Vr.length),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(4,0),ke.write_shift(4,Hr),fr+=ke.l,Te.push(ke),fr+=Vr.length,Te.push(Vr),++yt}return ke=ut(22),ke.write_shift(4,101010256),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,yt),ke.write_shift(2,yt),ke.write_shift(4,fr),ke.write_shift(4,et),ke.write_shift(2,0),ii([ii(Se),ii(Te),ke])}var Qr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function nr(me,Be){if(me.ctype)return me.ctype;var _e=me.name||"",Se=_e.match(/\.([^\.]+)$/);return Se&&Qr[Se[1]]||Be&&(Se=(_e=Be).match(/[\.\\]([^\.\\])+$/),Se&&Qr[Se[1]])?Qr[Se[1]]:"application/octet-stream"}function Kr(me){for(var Be=Xx(me),_e=[],Se=0;Se<Be.length;Se+=76)_e.push(Be.slice(Se,Se+76));return _e.join(`\r
`)+`\r
`}function xa(me){var Be=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Xe){var et=Xe.charCodeAt(0).toString(16).toUpperCase();return"="+(et.length==1?"0"+et:et)});Be=Be.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Be.charAt(0)==`
`&&(Be="=0D"+Be.slice(1)),Be=Be.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var _e=[],Se=Be.split(`\r
`),Te=0;Te<Se.length;++Te){var ke=Se[Te];if(ke.length==0){_e.push("");continue}for(var $e=0;$e<ke.length;){var nt=76,Ve=ke.slice($e,$e+nt);Ve.charAt(nt-1)=="="?nt--:Ve.charAt(nt-2)=="="?nt-=2:Ve.charAt(nt-3)=="="&&(nt-=3),Ve=ke.slice($e,$e+nt),$e+=nt,$e<ke.length&&(Ve+="="),_e.push(Ve)}}return _e.join(`\r
`)}function es(me){for(var Be=[],_e=0;_e<me.length;++_e){for(var Se=me[_e];_e<=me.length&&Se.charAt(Se.length-1)=="=";)Se=Se.slice(0,Se.length-1)+me[++_e];Be.push(Se)}for(var Te=0;Te<Be.length;++Te)Be[Te]=Be[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(ke){return String.fromCharCode(parseInt(ke.slice(1),16))});return hl(Be.join(`\r
`))}function Bs(me,Be,_e){for(var Se="",Te="",ke="",$e,nt=0;nt<10;++nt){var Ve=Be[nt];if(!Ve||Ve.match(/^\s*$/))break;var Xe=Ve.match(/^(.*?):\s*([^\s].*)$/);if(Xe)switch(Xe[1].toLowerCase()){case"content-location":Se=Xe[2].trim();break;case"content-type":ke=Xe[2].trim();break;case"content-transfer-encoding":Te=Xe[2].trim();break}}switch(++nt,Te.toLowerCase()){case"base64":$e=hl(wl(Be.slice(nt).join("")));break;case"quoted-printable":$e=es(Be.slice(nt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var et=ln(me,Se.slice(_e.length),$e,{unsafe:!0});ke&&(et.ctype=ke)}function Ua(me,Be){if(J(me.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var _e=Be&&Be.root||"",Se=(Zr&&Buffer.isBuffer(me)?me.toString("binary"):J(me)).split(`\r
`),Te=0,ke="";for(Te=0;Te<Se.length;++Te)if(ke=Se[Te],!!/^Content-Location:/i.test(ke)&&(ke=ke.slice(ke.indexOf("file")),_e||(_e=ke.slice(0,ke.lastIndexOf("/")+1)),ke.slice(0,_e.length)!=_e))for(;_e.length>0&&(_e=_e.slice(0,_e.length-1),_e=_e.slice(0,_e.lastIndexOf("/")+1),ke.slice(0,_e.length)!=_e););var $e=(Se[1]||"").match(/boundary="(.*?)"/);if(!$e)throw new Error("MAD cannot find boundary");var nt="--"+($e[1]||""),Ve=[],Xe=[],et={FileIndex:Ve,FullPaths:Xe};C(et);var yt,Bt=0;for(Te=0;Te<Se.length;++Te){var Ht=Se[Te];Ht!==nt&&Ht!==nt+"--"||(Bt++&&Bs(et,Se.slice(yt,Te),_e),yt=Te)}return et}function Gt(me,Be){var _e=Be||{},Se=_e.boundary||"SheetJS";Se="------="+Se;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Se.slice(2)+'"',"","",""],ke=me.FullPaths[0],$e=ke,nt=me.FileIndex[0],Ve=1;Ve<me.FullPaths.length;++Ve)if($e=me.FullPaths[Ve].slice(ke.length),nt=me.FileIndex[Ve],!(!nt.size||!nt.content||$e=="Sh33tJ5")){$e=$e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(fr){return"_x"+fr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(fr){return"_u"+fr.charCodeAt(0).toString(16)+"_"});for(var Xe=nt.content,et=Zr&&Buffer.isBuffer(Xe)?Xe.toString("binary"):J(Xe),yt=0,Bt=Math.min(1024,et.length),Ht=0,Nt=0;Nt<=Bt;++Nt)(Ht=et.charCodeAt(Nt))>=32&&Ht<128&&++yt;var Ut=yt>=Bt*4/5;Te.push(Se),Te.push("Content-Location: "+(_e.root||"file:///C:/SheetJS/")+$e),Te.push("Content-Transfer-Encoding: "+(Ut?"quoted-printable":"base64")),Te.push("Content-Type: "+nr(nt,$e)),Te.push(""),Te.push(Ut?xa(et):Kr(et))}return Te.push(Se+`--\r
`),Te.join(`\r
`)}function gn(me){var Be={};return C(Be,me),Be}function ln(me,Be,_e,Se){var Te=Se&&Se.unsafe;Te||C(me);var ke=!Te&&Ar.find(me,Be);if(!ke){var $e=me.FullPaths[0];Be.slice(0,$e.length)==$e?$e=Be:($e.slice(-1)!="/"&&($e+="/"),$e=($e+Be).replace("//","/")),ke={name:s(Be),type:2},me.FileIndex.push(ke),me.FullPaths.push($e),Te||Ar.utils.cfb_gc(me)}return ke.content=_e,ke.size=_e?_e.length:0,Se&&(Se.CLSID&&(ke.clsid=Se.CLSID),Se.mt&&(ke.mt=Se.mt),Se.ct&&(ke.ct=Se.ct)),ke}function Ln(me,Be){C(me);var _e=Ar.find(me,Be);if(_e){for(var Se=0;Se<me.FileIndex.length;++Se)if(me.FileIndex[Se]==_e)return me.FileIndex.splice(Se,1),me.FullPaths.splice(Se,1),!0}return!1}function zn(me,Be,_e){C(me);var Se=Ar.find(me,Be);if(Se){for(var Te=0;Te<me.FileIndex.length;++Te)if(me.FileIndex[Te]==Se)return me.FileIndex[Te].name=s(_e),me.FullPaths[Te]=_e,!0}return!1}function ts(me){N(me,!0)}return e.find=R,e.read=F,e.parse=d,e.write=K,e.writeFile=V,e.utils={cfb_new:gn,cfb_add:ln,cfb_del:Ln,cfb_mov:zn,cfb_gc:ts,ReadShift:wx,CheckField:M7,prep_blob:bi,bconcat:ii,use_zlib:O,_deflateRaw:It,_inflateRaw:Lr,consts:re},e}();function Jse(t){return typeof t=="string"?lC(t):Array.isArray(t)?Ese(t):t}function z1(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=lC(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Qu(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var s=new Blob([Jse(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Yf(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Zse(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Zs(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function AD(t,e){for(var r=[],n=Zs(t),s=0;s!==n.length;++s)r[t[n[s]][e]]==null&&(r[t[n[s]][e]]=n[s]);return r}function uC(t){for(var e=[],r=Zs(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function AC(t){for(var e=[],r=Zs(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function eae(t){for(var e=[],r=Zs(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var Uw=new Date(1899,11,30,0,0,0);function qa(t,e){var r=t.getTime(),n=Uw.getTime()+(t.getTimezoneOffset()-Uw.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var m7=new Date,tae=Uw.getTime()+(m7.getTimezoneOffset()-Uw.getTimezoneOffset())*6e4,dD=m7.getTimezoneOffset();function dC(t){var e=new Date;return e.setTime(t*24*60*60*1e3+tae),e.getTimezoneOffset()!==dD&&e.setTime(e.getTime()+(e.getTimezoneOffset()-dD)*6e4),e}function rae(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[a],10)}return e}var fD=new Date("2017-02-19T19:06:09.000Z"),g7=isNaN(fD.getFullYear())?new Date("2/19/17"):fD,nae=g7.getFullYear()==2017;function vs(t,e){var r=new Date(t);if(nae)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(g7.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function n0(t,e){if(Zr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Qu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Qu(s7(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Qu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Qu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function ys(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ys(t[r]));return e}function Ws(t,e){for(var r="";r.length<e;)r+=t;return r}function zc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(e=Number(n)))?e/r:e}var sae=["january","february","march","april","may","june","july","august","september","october","november","december"];function fm(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&sae.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var aae=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}}();function x7(t){return t?t.content&&t.type?n0(t.content,!0):t.data?Jg(t.data):t.asNodeBuffer&&Zr?Jg(t.asNodeBuffer().toString("binary")):t.asBinary?Jg(t.asBinary()):t._data&&t._data.getContent?Jg(n0(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function v7(t){if(!t)return null;if(t.data)return tD(t.data);if(t.asNodeBuffer&&Zr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?tD(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function iae(t){return t&&t.name.slice(-4)===".bin"?v7(t):x7(t)}function Xl(t,e){for(var r=t.FullPaths||Zs(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return t.files?t.files[r[a]]:t.FileIndex[a]}return null}function R4(t,e){var r=Xl(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Ta(t,e,r){if(!r)return iae(R4(t,e));if(!e)return null;try{return Ta(t,e)}catch{return null}}function pl(t,e,r){if(!r)return x7(R4(t,e));if(!e)return null;try{return pl(t,e)}catch{return null}}function oae(t,e,r){return v7(R4(t,e))}function hD(t){for(var e=t.FullPaths||Zs(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function qr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Zr?n=cd(r):n=_se(r),Ar.utils.cfb_add(t,e,n)}Ar.utils.cfb_add(t,e,r)}else t.file(e,r)}function L4(){return Ar.utils.cfb_new()}function y7(t,e){switch(e.type){case"base64":return Ar.read(t,{type:"base64"});case"binary":return Ar.read(t,{type:"binary"});case"buffer":case"array":return Ar.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function ex(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var ma=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,lae=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,pD=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,cae=/<[^>]*>/g,oo=ma.match(pD)?pD:cae,uae=/<\w*:/,Aae=/<(\/?)\w+:/;function Fr(t,e,r){for(var n={},s=0,a=0;s!==t.length&&!((a=t.charCodeAt(s))===32||a===10||a===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var i=t.match(lae),o=0,l="",c=0,d="",h="",p=1;if(i)for(c=0;c!=i.length;++c){for(h=i[c],a=0;a!=h.length&&h.charCodeAt(a)!==61;++a);for(d=h.slice(0,a).trim();h.charCodeAt(a+1)==32;)++a;for(p=(s=h.charCodeAt(a+1))==34||s==39?1:0,l=h.slice(a+1+p,h.length-p),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var m=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[m]&&d.slice(o-3,o)=="ext")continue;n[m]=l,n[m.toLowerCase()]=l}}return n}function rA(t){return t.replace(Aae,"<$1")}var w7={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},U4=uC(w7),_n=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(t,function(o,l){return w7[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}}(),M4=/[&<>'"]/g,dae=/[\u0000-\u0008\u000b-\u001f]/g;function Jn(t){var e=t+"";return e.replace(M4,function(r){return U4[r]}).replace(dae,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function mD(t){return Jn(t).replace(/ /g,"_x0020_")}var b7=/[\u0000-\u001f]/g;function P4(t){var e=t+"";return e.replace(M4,function(r){return U4[r]}).replace(/\n/g,"<br/>").replace(b7,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function fae(t){var e=t+"";return e.replace(M4,function(r){return U4[r]}).replace(b7,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var gD=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function hae(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function gs(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function z_(t){for(var e="",r=0,n=0,s=0,a=0,i=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,e+=String.fromCharCode(i);continue}if(a=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function xD(t){var e=Hf(2*t.length),r,n,s=1,a=0,i=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[a++]=i&255,e[a++]=i>>>8,i=0),e[a++]=r%256,e[a++]=r>>>8;return e.slice(0,a).toString("ucs2")}function vD(t){return cd(t,"binary").toString("utf8")}var xy="foo bar bazâð£",os=Zr&&(vD(xy)==z_(xy)&&vD||xD(xy)==z_(xy)&&xD)||z_,Qu=Zr?function(t){return cd(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Zx=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),C7=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),pae=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),mae=/<\/?(?:vt:)?variant>/g,gae=/<(?:vt:)([^>]*)>([\s\S]*)</;function yD(t,e){var r=Fr(t),n=t.match(pae(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(mae,"").match(gae);i&&s.push({v:os(i[2]),t:i[1]})}),s}var E7=/(^\s|\s$|\n)/;function Ei(t,e){return"<"+t+(e.match(E7)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function e1(t){return Zs(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Mt(t,e,r){return"<"+t+(r!=null?e1(r):"")+(e!=null?(e.match(E7)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function G5(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function xae(t,e){switch(typeof t){case"string":var r=Mt("vt:lpwstr",Jn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Mt((t|0)==t?"vt:i4":"vt:r8",Jn(String(t)));case"boolean":return Mt("vt:bool",t?"true":"false")}if(t instanceof Date)return Mt("vt:filetime",G5(t));throw new Error("Unable to serialize "+t)}function O4(t){if(Zr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return os(Yf(I4(t)));throw new Error("Bad input format: expected Buffer or string")}var t1=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,za={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},m0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],dl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function vae(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,a=5;a>=0;--a)s=s*256+t[e+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function yae(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,i=n?-e:e;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)t[r+o]=a&255;t[r+6]=(s&15)<<4|a&15,t[r+7]=s>>4|n}var wD=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,a=t[0][n].length;s<a;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},bD=Zr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:cd(e)})):wD(t)}:wD,CD=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(VA(t,s)));return n.join("").replace(xo,"")},j4=Zr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(xo,""):CD(t,e,r)}:CD,ED=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},_7=Zr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):ED(t,e,r)}:ED,_D=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Sp(t,s)));return n.join("")},G1=Zr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):_D(e,r,n)}:_D,S7=function(t,e){var r=fl(t,e);return r>0?G1(t,e+4,e+4+r-1):""},T7=S7,N7=function(t,e){var r=fl(t,e);return r>0?G1(t,e+4,e+4+r-1):""},B7=N7,k7=function(t,e){var r=2*fl(t,e);return r>0?G1(t,e+4,e+4+r-1):""},I7=k7,F7=function(e,r){var n=fl(e,r);return n>0?j4(e,r+4,r+4+n):""},D7=F7,R7=function(t,e){var r=fl(t,e);return r>0?G1(t,e+4,e+4+r):""},L7=R7,U7=function(t,e){return vae(t,e)},Mw=U7,Q4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Zr&&(T7=function(e,r){if(!Buffer.isBuffer(e))return S7(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},B7=function(e,r){if(!Buffer.isBuffer(e))return N7(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},I7=function(e,r){if(!Buffer.isBuffer(e))return k7(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},D7=function(e,r){if(!Buffer.isBuffer(e))return F7(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},L7=function(e,r){if(!Buffer.isBuffer(e))return R7(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},Mw=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):U7(e,r)},Q4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Sp=function(t,e){return t[e]},VA=function(t,e){return t[e+1]*256+t[e]},wae=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},fl=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Bh=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},bae=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function wx(t,e){var r="",n,s,a=[],i,o,l,c;switch(e){case"dbcs":if(c=this.l,Zr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(VA(this,c)),c+=2;t*=2;break;case"utf8":r=G1(this,this.l,this.l+t);break;case"utf16le":t*=2,r=j4(this,this.l,this.l+t);break;case"wstr":return wx.call(this,t,"dbcs");case"lpstr-ansi":r=T7(this,this.l),t=4+fl(this,this.l);break;case"lpstr-cp":r=B7(this,this.l),t=4+fl(this,this.l);break;case"lpwstr":r=I7(this,this.l),t=4+2*fl(this,this.l);break;case"lpp4":t=4+fl(this,this.l),r=D7(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+fl(this,this.l),r=L7(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=Sp(this,this.l+t++))!==0;)a.push(gy(i));r=a.join("");break;case"_wstr":for(t=0,r="";(i=VA(this,this.l+t))!==0;)a.push(gy(i)),t+=2;t+=2,r=a.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return i=Sp(this,c),this.l=c+1,o=wx.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(gy(VA(this,c))),c+=2}r=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return i=Sp(this,c),this.l=c+1,o=wx.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(gy(Sp(this,c))),c+=1}r=a.join("");break;default:switch(t){case 1:return n=Sp(this,this.l),this.l++,n;case 2:return n=(e==="i"?wae:VA)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?Bh:bae)(this,this.l),this.l+=4,n):(s=fl(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=Mw(this,this.l):s=Mw([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=_7(this,this.l,t);break}}return this.l+=t,r}var Cae=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},Eae=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},_ae=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function Sae(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)_ae(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var i=e.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,Cae(this,e,this.l);break;case 8:if(n=8,r==="f"){yae(this,e,this.l);break}case 16:break;case-4:n=4,Eae(this,e,this.l);break}return this.l+=n,this}function M7(t,e){var r=_7(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function bi(t,e){t.l=e,t.read_shift=wx,t.chk=M7,t.write_shift=Sae}function ao(t,e){t.l+=e}function ut(t){var e=Hf(t);return bi(e,0),e}function ud(t,e,r){if(t){var n,s,a;bi(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=o1[o]||o1[65535];for(n=t.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=t.read_shift(1))&127)<<7*s;l=t.l+a;var d=c.f&&c.f(t,a,r);if(t.l=l,e(d,c,o))return}}}function Qo(){var t=[],e=Zr?256:2048,r=function(c){var d=ut(c);return bi(d,0),d},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},a=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},i=function(){return s(),ii(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),a(e)};return{next:a,push:o,end:i,_bufs:t}}function Et(t,e,r,n){var s=+e,a;if(!isNaN(s)){n||(n=o1[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=t.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&Q4(r)&&t.push(r)}}function bx(t,e,r){var n=ys(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function SD(t,e,r){var n=ys(t);return n.s=bx(n.s,e.s,r),n.e=bx(n.e,e.s,r),n}function Cx(t,e){if(t.cRel&&t.c<0)for(t=ys(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ys(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Nr(t);return!t.cRel&&t.cRel!=null&&(r=Bae(r)),!t.rRel&&t.rRel!=null&&(r=Tae(r)),r}function G_(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ls(t.s.c)+":"+(t.e.cRel?"":"$")+Ls(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+pa(t.s.r)+":"+(t.e.rRel?"":"$")+pa(t.e.r):Cx(t.s,e.biff)+":"+Cx(t.e,e.biff)}function H4(t){return parseInt(Nae(t),10)-1}function pa(t){return""+(t+1)}function Tae(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Nae(t){return t.replace(/\$(\d+)$/,"$1")}function V4(t){for(var e=kae(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Ls(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Bae(t){return t.replace(/^([A-Z])/,"$$$1")}function kae(t){return t.replace(/^\$([A-Z])/,"$1")}function Iae(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Us(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function Nr(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Vo(t){var e=t.indexOf(":");return e==-1?{s:Us(t),e:Us(t)}:{s:Us(t.slice(0,e)),e:Us(t.slice(e+1))}}function jr(t,e){return typeof e>"u"||typeof e=="number"?jr(t.s,t.e):(typeof t!="string"&&(t=Nr(t)),typeof e!="string"&&(e=Nr(e)),t==e?t:t+":"+e)}function Sn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=t.length;for(r=0;n<a&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<a&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=a&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=a&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function TD(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=uc(t.z,r?qa(e):e)}catch{}try{return t.w=uc((t.XF||{}).numFmtId||(r?14:0),r?qa(e):e)}catch{return""+e}}function nd(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Ad[t.v]||t.v:e==null?TD(t,t.v):TD(t,e))}function Xf(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function P7(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,a=t||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Us(n.origin):n.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Sn(a["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),i==-1&&(c.e.r=i=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[h].length;++p)if(!(typeof e[h][p]>"u")){var m={v:e[h][p]},y=i+h,x=o+p;if(c.s.r>y&&(c.s.r=y),c.s.c>x&&(c.s.c=x),c.e.r<y&&(c.e.r=y),c.e.c<x&&(c.e.c=x),e[h][p]&&typeof e[h][p]=="object"&&!Array.isArray(e[h][p])&&!(e[h][p]instanceof Date))m=e[h][p];else if(Array.isArray(m.v)&&(m.f=e[h][p][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Er[14],n.cellDates?(m.t="d",m.w=uc(m.z,qa(m.v))):(m.t="n",m.v=qa(m.v),m.w=uc(m.z,m.v))):m.t="s";if(s)a[y]||(a[y]=[]),a[y][x]&&a[y][x].z&&(m.z=a[y][x].z),a[y][x]=m;else{var E=Nr({c:x,r:y});a[E]&&a[E].z&&(m.z=a[E].z),a[E]=m}}}return c.s.c<1e7&&(a["!ref"]=jr(c)),a}function Rm(t,e){return P7(null,t,e)}function Fae(t){return t.read_shift(4,"i")}function Gc(t,e){return e||(e=ut(4)),e.write_shift(4,t),e}function no(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function oi(t,e){var r=!1;return e==null&&(r=!0,e=ut(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function Dae(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Rae(t,e){return e||(e=ut(4)),e.write_shift(2,0),e.write_shift(2,0),e}function z4(t,e){var r=t.l,n=t.read_shift(1),s=no(t),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)a.push(Dae(t));i.r=a}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function Lae(t,e){var r=!1;return e==null&&(r=!0,e=ut(15+4*t.t.length)),e.write_shift(1,0),oi(t.t,e),r?e.slice(0,e.l):e}var Uae=z4;function Mae(t,e){var r=!1;return e==null&&(r=!0,e=ut(23+4*t.t.length)),e.write_shift(1,1),oi(t.t,e),e.write_shift(4,1),Rae({},e),r?e.slice(0,e.l):e}function Ac(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function g0(t,e){return e==null&&(e=ut(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function x0(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function v0(t,e){return e==null&&(e=ut(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Pae=no,O7=oi;function G4(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function Pw(t,e){var r=!1;return e==null&&(r=!0,e=ut(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var Oae=no,q5=G4,q4=Pw;function K4(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?Mw([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Bh(e,0)>>2;return r?s/100:s}function j7(t,e){e==null&&(e=ut(4));var r=0,n=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?s:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Q7(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function jae(t,e){return e||(e=ut(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var y0=Q7,Lm=jae;function to(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function s0(t,e){return(e||ut(8)).write_shift(8,t,"f")}function Qae(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),a=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=Qh[s];c&&(e.rgb=n1(c));break;case 2:e.rgb=n1([i,o,l]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function Ow(t,e){if(e||(e=ut(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function Hae(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function Vae(t,e){e||(e=ut(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function H7(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function zae(t){return H7(t,1)}function Gae(t){return H7(t,2)}var $4=2,Lo=3,vy=11,ND=12,jw=19,yy=64,qae=65,Kae=71,$ae=4108,Wae=4126,si=80,V7=81,Yae=[si,V7],K5={1:{n:"CodePage",t:$4},2:{n:"Category",t:si},3:{n:"PresentationFormat",t:si},4:{n:"ByteCount",t:Lo},5:{n:"LineCount",t:Lo},6:{n:"ParagraphCount",t:Lo},7:{n:"SlideCount",t:Lo},8:{n:"NoteCount",t:Lo},9:{n:"HiddenCount",t:Lo},10:{n:"MultimediaClipCount",t:Lo},11:{n:"ScaleCrop",t:vy},12:{n:"HeadingPairs",t:$ae},13:{n:"TitlesOfParts",t:Wae},14:{n:"Manager",t:si},15:{n:"Company",t:si},16:{n:"LinksUpToDate",t:vy},17:{n:"CharacterCount",t:Lo},19:{n:"SharedDoc",t:vy},22:{n:"HyperlinksChanged",t:vy},23:{n:"AppVersion",t:Lo,p:"version"},24:{n:"DigSig",t:qae},26:{n:"ContentType",t:si},27:{n:"ContentStatus",t:si},28:{n:"Language",t:si},29:{n:"Version",t:si},255:{},2147483648:{n:"Locale",t:jw},2147483651:{n:"Behavior",t:jw},1919054434:{}},$5={1:{n:"CodePage",t:$4},2:{n:"Title",t:si},3:{n:"Subject",t:si},4:{n:"Author",t:si},5:{n:"Keywords",t:si},6:{n:"Comments",t:si},7:{n:"Template",t:si},8:{n:"LastAuthor",t:si},9:{n:"RevNumber",t:si},10:{n:"EditTime",t:yy},11:{n:"LastPrinted",t:yy},12:{n:"CreatedDate",t:yy},13:{n:"ModifiedDate",t:yy},14:{n:"PageCount",t:Lo},15:{n:"WordCount",t:Lo},16:{n:"CharCount",t:Lo},17:{n:"Thumbnail",t:Kae},18:{n:"Application",t:si},19:{n:"DocSecurity",t:Lo},255:{},2147483648:{n:"Locale",t:jw},2147483651:{n:"Behavior",t:jw},1919054434:{}},BD={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Xae=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Jae(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Zae=Jae([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Qh=ys(Zae),Ad={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},z7={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},W5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},wy={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function W4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function eie(t){var e=W4();if(!t||!t.match)return e;var r={};if((t.match(oo)||[]).forEach(function(n){var s=Fr(n);switch(s[0].replace(uae,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[W5[s.ContentType]]!==void 0&&e[W5[s.ContentType]].push(s.PartName);break}}),e.xmlns!==za.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function G7(t,e){var r=eae(W5),n=[],s;n[n.length]=ma,n[n.length]=Mt("Types",null,{xmlns:za.CT,"xmlns:xsd":za.xsd,"xmlns:xsi":za.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Mt("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(s=t[l][0],n[n.length]=Mt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:wy[l][e.bookType]||wy[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Mt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:wy[l][e.bookType]||wy[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Mt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var sn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function r1(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Ex(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(oo)||[]).forEach(function(s){var a=Fr(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:ex(a.Target,e);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function Kp(t){var e=[ma,Mt("Relationships",null,{xmlns:za.RELS})];return Zs(t["!id"]).forEach(function(r){e[e.length]=Mt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Yn(t,e,r,n,s,a){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=r,[sn.HLINK,sn.XPATH,sn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var tie="application/vnd.oasis.opendocument.spreadsheet";function rie(t,e){for(var r=O4(t),n,s;n=t1.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Fr(n[0],!1),s.path=="/"&&s.type!==tie)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function nie(t){var e=[ma];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function kD(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function sie(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function aie(t){var e=[ma];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(kD(t[r][0],t[r][1])),e.push(sie("",t[r][0]));return e.push(kD("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function q7(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Fw.version+"</meta:generator></office:meta></office:document-meta>"}var lc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],iie=function(){for(var t=new Array(lc.length),e=0;e<lc.length;++e){var r=lc[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function K7(t){var e={};t=os(t);for(var r=0;r<lc.length;++r){var n=lc[r],s=t.match(iie[r]);s!=null&&s.length>0&&(e[n[1]]=_n(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=vs(e[n[1]]))}return e}function q_(t,e,r,n,s){s[t]!=null||e==null||e===""||(s[t]=e,e=Jn(e),n[n.length]=r?Mt(t,e,r):Ei(t,e))}function $7(t,e){var r=e||{},n=[ma,Mt("cp:coreProperties",null,{"xmlns:cp":za.CORE_PROPS,"xmlns:dc":za.dc,"xmlns:dcterms":za.dcterms,"xmlns:dcmitype":za.dcmitype,"xmlns:xsi":za.xsi})],s={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&q_("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:G5(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),t.ModifiedDate!=null&&q_("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:G5(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=lc.length;++a){var i=lc[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&q_(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Hh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],W7=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Y7(t,e,r,n){var s=[];if(typeof t=="string")s=yD(t,n);else for(var a=0;a<t.length;++a)s=s.concat(t[a].map(function(d){return{v:d}}));var i=typeof e=="string"?yD(e,n).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function oie(t,e,r){var n={};return e||(e={}),t=os(t),Hh.forEach(function(s){var a=(t.match(Zx(s[0]))||[])[1];switch(s[2]){case"string":a&&(e[s[1]]=_n(a));break;case"bool":e[s[1]]=a==="true";break;case"raw":var i=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Y7(n.HeadingPairs,n.TitlesOfParts,e,r),e}function X7(t){var e=[],r=Mt;return t||(t={}),t.Application="SheetJS",e[e.length]=ma,e[e.length]=Mt("Properties",null,{xmlns:za.EXT_PROPS,"xmlns:vt":za.vt}),Hh.forEach(function(n){if(t[n[1]]!==void 0){var s;switch(n[2]){case"string":s=Jn(String(t[n[1]]));break;case"bool":s=t[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=r(n[0],s))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Jn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var lie=/<[^>]+>[^<]*/g;function cie(t,e){var r={},n="",s=t.match(lie);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=Fr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=_n(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),c=l[0].slice(4),d=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=_n(d);break;case"bool":r[n]=gs(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=vs(d);break;case"cy":case"error":r[n]=_n(d);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,c,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function J7(t){var e=[ma,Mt("Properties",null,{xmlns:za.CUST_PROPS,"xmlns:vt":za.vt})];if(!t)return e.join("");var r=1;return Zs(t).forEach(function(s){++r,e[e.length]=Mt("property",xae(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Jn(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Y5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},K_;function uie(t,e,r){K_||(K_=uC(Y5)),e=K_[e]||e,t[e]=r}function Aie(t,e){var r=[];return Zs(Y5).map(function(n){for(var s=0;s<lc.length;++s)if(lc[s][1]==n)return lc[s];for(s=0;s<Hh.length;++s)if(Hh[s][1]==n)return Hh[s];throw n}).forEach(function(n){if(t[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Ei(Y5[n[1]]||n[1],s))}}),Mt("DocumentProperties",r.join(""),{xmlns:dl.o})}function die(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return t&&Zs(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var i=0;i<lc.length;++i)if(a==lc[i][1])return;for(i=0;i<Hh.length;++i)if(a==Hh[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(Mt(mD(a),o,{"dt:dt":l}))}}),e&&Zs(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var i=e[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(Mt(mD(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+dl.o+'">'+s.join("")+"</"+n+">"}function Y4(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function fie(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=ut(8);return i.write_shift(4,n),i.write_shift(4,s),i}function Z7(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function eQ(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function tQ(t,e,r){return e===31?eQ(t):Z7(t,e,r)}function X5(t,e,r){return tQ(t,e,r===!1?0:4)}function hie(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return tQ(t,e,0)}function pie(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(xo,""),t.l-s&2&&(t.l+=2)}return r}function mie(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(xo,"");return r}function gie(t){var e=t.l,r=Qw(t,V7);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=Qw(t,Lo);return[r,n]}function xie(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(gie(t));return r}function ID(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var a=t.read_shift(4),i=t.read_shift(4);n[a]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(xo,"").replace(Zg,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function rQ(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function vie(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function Qw(t,e,r){var n=t.read_shift(2),s,a=r||{};if(t.l+=2,e!==ND&&n!==e&&Yae.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===ND?n:e){case 2:return s=t.read_shift(2,"i"),a.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return Z7(t,n,4).replace(xo,"");case 31:return eQ(t);case 64:return Y4(t);case 65:return rQ(t);case 71:return vie(t);case 80:return X5(t,n,!a.raw).replace(xo,"");case 81:return hie(t,n).replace(xo,"");case 4108:return xie(t);case 4126:case 4127:return n==4127?pie(t):mie(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function FD(t,e){var r=ut(4),n=ut(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=ut(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=fie(e);break;case 31:case 80:for(n=ut(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return ii([r,n])}function DD(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),a=[],i=0,o=0,l=-1,c={};for(i=0;i!=s;++i){var d=t.read_shift(4),h=t.read_shift(4);a[i]=[d,h+r]}a.sort(function(B,D){return B[1]-D[1]});var p={};for(i=0;i!=s;++i){if(t.l!==a[i][1]){var m=!0;if(i>0&&e)switch(e[a[i-1][0]].t){case 2:t.l+2===a[i][1]&&(t.l+=2,m=!1);break;case 80:t.l<=a[i][1]&&(t.l=a[i][1],m=!1);break;case 4108:t.l<=a[i][1]&&(t.l=a[i][1],m=!1);break}if((!e||i==0)&&t.l<=a[i][1]&&(m=!1,t.l=a[i][1]),m)throw new Error("Read Error: Expected address "+a[i][1]+" at "+t.l+" :"+i)}if(e){var y=e[a[i][0]];if(p[y.n]=Qw(t,y.t,{raw:!0}),y.p==="version"&&(p[y.n]=String(p[y.n]>>16)+"."+("0000"+String(p[y.n]&65535)).slice(-4)),y.n=="CodePage")switch(p[y.n]){case 0:p[y.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Hc(o=p[y.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[y.n])}}else if(a[i][0]===1){if(o=p.CodePage=Qw(t,$4),Hc(o),l!==-1){var x=t.l;t.l=a[l][1],c=ID(t,o),t.l=x}}else if(a[i][0]===0){if(o===0){l=i,t.l=a[i+1][1];continue}c=ID(t,o)}else{var E=c[a[i][0]],S;switch(t[t.l]){case 65:t.l+=4,S=rQ(t);break;case 30:t.l+=4,S=X5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,S=X5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,S=t.read_shift(4,"i");break;case 19:t.l+=4,S=t.read_shift(4);break;case 5:t.l+=4,S=t.read_shift(8,"f");break;case 11:t.l+=4,S=la(t,4);break;case 64:t.l+=4,S=vs(Y4(t));break;default:throw new Error("unparsed value: "+t[t.l])}p[E]=S}}return t.l=r+n,p}var nQ=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function yie(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function RD(t,e,r){var n=ut(8),s=[],a=[],i=8,o=0,l=ut(8),c=ut(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),a.push(l),s.push(c),i+=8+l.length,!e){c=ut(8),c.write_shift(4,0),s.unshift(c);var d=[ut(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var h=t[o][0];for(l=ut(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=ii(d),a.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(nQ.indexOf(t[o][0])>-1||W7.indexOf(t[o][0])>-1)&&t[o][1]!=null){var p=t[o][1],m=0;if(e){m=+e[t[o][0]];var y=r[m];if(y.p=="version"&&typeof p=="string"){var x=p.split(".");p=(+x[0]<<16)+(+x[1]||0)}l=FD(y.t,p)}else{var E=yie(p);E==-1&&(E=31,p=String(p)),l=FD(E,p)}a.push(l),c=ut(8),c.write_shift(4,e?m:2+o),s.push(c),i+=8+l.length}var S=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,S),S+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),ii([n].concat(s).concat(a))}function LD(t,e,r){var n=t.content;if(!n)return{};bi(n,0);var s,a,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),d=n.read_shift(16);if(d!==Ar.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),l=n.read_shift(4));var h=DD(n,e),p={SystemIdentifier:c};for(var m in h)p[m]=h[m];if(p.FMTID=a,s===1)return p;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var y;try{y=DD(n,null)}catch{}for(m in y)p[m]=y[m];return p.FMTID=[a,i],p}function UD(t,e,r,n,s,a){var i=ut(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Ar.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,s?68:48);var l=RD(t,r,n);if(o.push(l),s){var c=RD(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(c)}return ii(o)}function Yd(t,e){return t.read_shift(e),null}function wie(t,e){e||(e=ut(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function bie(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function la(t,e){return t.read_shift(e)===1}function po(t,e){return e||(e=ut(2)),e.write_shift(2,+!!t),e}function Na(t){return t.read_shift(2,"u")}function Zl(t,e){return e||(e=ut(2)),e.write_shift(2,t),e}function sQ(t,e){return bie(t,e,Na)}function Cie(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function aQ(t,e,r){return r||(r=ut(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function q1(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=t.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?t.read_shift(n,s):"";return i}function Eie(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,l={};s&&(i=t.read_shift(2)),n&&(o=t.read_shift(4));var c=a==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,c);return s&&(t.l+=4*i),n&&(t.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function _ie(t){var e=t.t||"",r=ut(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=ut(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[r,n];return ii(s)}function a0(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function K1(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):a0(t,n,r)}function w0(t,e,r){if(r.biff>5)return K1(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function iQ(t,e,r){return r||(r=ut(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function Sie(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function Tie(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(xo,"");return n&&(t.l+=24),s}function Nie(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(a>>1,"utf16le").replace(xo,"");return r+i}function Bie(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Tie(t);case"0303000000000000c000000000000046":return Nie(t);default:throw new Error("Unsupported Moniker "+r)}}function by(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(xo,""):"";return r}function MD(t,e){e||(e=ut(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function kie(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var a,i,o,l,c="",d,h;s&16&&(a=by(t,r-t.l)),s&128&&(i=by(t,r-t.l)),(s&257)===257&&(o=by(t,r-t.l)),(s&257)===1&&(l=Bie(t,r-t.l)),s&8&&(c=by(t,r-t.l)),s&32&&(d=t.read_shift(16)),s&64&&(h=Y4(t)),t.l=r;var p=i||o||l||"";p&&c&&(p+="#"+c),p||(p="#"+c),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var m={Target:p};return d&&(m.guid=d),h&&(m.time=h),a&&(m.Tooltip=a),m}function Iie(t){var e=ut(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(a==28)n=n.slice(1),MD(n,e);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),a&8&&MD(s>-1?n.slice(s+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function oQ(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function lQ(t,e){var r=oQ(t);return r[3]=0,r}function nA(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function i0(t,e,r,n){return n||(n=ut(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function Fie(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function Die(t,e,r){return e===0?"":w0(t,e,r)}function Rie(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),a=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[s,a,i]}function cQ(t){var e=t.read_shift(2),r=K4(t);return[e,r]}function Lie(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=q1(t,e,r),a=t.read_shift(2);if(n-=t.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return t.l+=a,s}function fC(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function uQ(t,e){return e||(e=ut(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function AQ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var Uie=AQ;function dQ(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function Mie(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function Pie(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Gi(t){t.l+=2,t.l+=t.read_shift(2)}var Oie={0:Gi,4:Gi,5:Gi,6:Gi,7:Pie,8:Gi,9:Gi,10:Gi,11:Gi,12:Gi,13:Mie,14:Gi,15:Gi,16:Gi,17:Gi,18:Gi,19:Gi,20:Gi,21:dQ};function jie(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(Oie[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Cy(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function X4(t,e,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=ut(s);return a.write_shift(2,n),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function Qie(t,e){return e===0||t.read_shift(2),1200}function Hie(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=w0(t,0,r);return t.read_shift(e+n-t.l),s}function Vie(t,e){var r=!e||e.biff==8,n=ut(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function zie(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Gie(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,a=t.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=q1(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function qie(t,e){var r=!e||e.biff>=8?2:1,n=ut(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function Kie(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),a=[],i=0;i!=s&&t.l<r;++i)a.push(Eie(t));return a.Count=n,a.Unique=s,a}function $ie(t,e){var r=ut(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],s=0;s<t.length;++s)n[s]=_ie(t[s]);var a=ii([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function Wie(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function Yie(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function Xie(t){var e=Fie(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function Jie(t){return t.read_shift(2),t.read_shift(4)}function PD(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function Zie(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:c}}function eoe(){var t=ut(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function toe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function roe(t){var e=ut(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function noe(){}function soe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=q1(t,0,r),n}function aoe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,s=n?15+r.length:16+2*r.length,a=ut(s);return a.write_shift(2,t.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function ioe(t){var e=nA(t);return e.isst=t.read_shift(4),e}function ooe(t,e,r,n){var s=ut(10);return i0(t,e,n,s),s.write_shift(4,r),s}function loe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=nA(t);r.biff==2&&t.l++;var a=K1(t,n-t.l,r);return s.val=a,s}function coe(t,e,r,n,s){var a=!s||s.biff==8,i=ut(8+ +a+(1+a)*r.length);return i0(t,e,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function uoe(t,e,r){var n=t.read_shift(2),s=w0(t,0,r);return[n,s]}function Aoe(t,e,r,n){var s=r&&r.biff==5;n||(n=ut(s?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var doe=w0;function OD(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,a=t.read_shift(s),i=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:a,c:o},e:{r:i,c:l}}}function foe(t,e){var r=e.biff==8||!e.biff?4:2,n=ut(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function hoe(t){var e=t.read_shift(2),r=t.read_shift(2),n=cQ(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function poe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),a=[];t.l<r;)a.push(cQ(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function moe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),a=[];t.l<r;)a.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function goe(t,e,r,n){var s={},a=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=Xae[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function xoe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=goe(t,e,n.fStyle,r),n}function jD(t,e,r,n){var s=r&&r.biff==5;n||(n=ut(s?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function voe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function yoe(t){var e=ut(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function QD(t,e,r){var n=nA(t);(r.biff==2||e==9)&&++t.l;var s=Cie(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function woe(t,e,r,n,s,a){var i=ut(8);return i0(t,e,n,i),aQ(r,a,i),i}function boe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=nA(t),s=to(t);return n.val=s,n}function Coe(t,e,r,n){var s=ut(14);return i0(t,e,n,s),s0(r,s),s}var HD=Die;function Eoe(t,e,r){var n=t.l+e,s=t.read_shift(2),a=t.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=a0(t,a),o=[];n>t.l;)o.push(K1(t));return[a,s,i,o]}function VD(t,e,r){var n=t.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=Lie(t,e-2,r)),a.body=s||t.read_shift(e-2),typeof s=="string"&&(a.Name=s),a}var _oe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function zD(t,e,r){var n=t.l+e,s=t.read_shift(2),a=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=a0(t,i,r);s&32&&(c=_oe[c.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var h=n==t.l||o===0||!(d>0)?[]:jAe(t,d,r,o);return{chKey:a,Name:c,itab:l,rgce:h}}function fQ(t,e,r){if(r.biff<8)return Soe(t,e,r);for(var n=[],s=t.l+e,a=t.read_shift(r.biff>8?4:2);a--!==0;)n.push(Rie(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function Soe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=q1(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function Toe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),a=a0(t,n,r),i=a0(t,s,r);return[a,i]}function Noe(t,e,r){var n=AQ(t);t.l++;var s=t.read_shift(1);return e-=8,[QAe(t,e,r),s,n]}function GD(t,e,r){var n=Uie(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,PAe(t,e,r)]}function Boe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function koe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=w0(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,i,a]}}function Ioe(t,e,r){return koe(t,e,r)}function Foe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(fC(t));return r}function Doe(t){var e=ut(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)uQ(t[r],e);return e}function Roe(t,e,r){if(r&&r.biff<8)return Uoe(t,e,r);var n=dQ(t),s=jie(t,e-22,n[1]);return{cmo:n,ft:s}}var Loe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function Uoe(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((Loe[n]||ao)(t,e,r)),{cmo:[s,n,a],ft:i}}function Moe(t,e,r){var n=t.l,s="";try{t.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?t.l+=6:i=Sie(t,6,r);var o=t.read_shift(2);t.read_shift(2),Na(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var d=t[t.l],h=a0(t,t.lens[c+1]-t.lens[c]-1);if(s+=h,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function Poe(t,e){var r=fC(t);t.l+=16;var n=kie(t,e-24);return[r,n]}function Ooe(t){var e=ut(24),r=Us(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return ii([e,Iie(t[1])])}function joe(t,e){t.read_shift(2);var r=fC(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(xo,""),[r,n]}function Qoe(t){var e=t[1].Tooltip,r=ut(10+2*(e.length+1));r.write_shift(2,2048);var n=Us(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<e.length;++s)r.write_shift(2,e.charCodeAt(s));return r.write_shift(2,0),r}function Hoe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=BD[r]||r,r=t.read_shift(2),e[1]=BD[r]||r,e}function Voe(t){return t||(t=ut(4)),t.write_shift(2,1),t.write_shift(2,1),t}function zoe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(lQ(t));return r}function Goe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(lQ(t));return r}function qoe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function hQ(t,e,r){if(!r.cellStyles)return ao(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),a=t.read_shift(n),i=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:a,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function Koe(t,e){var r=ut(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function $oe(t,e){var r={};return e<32||(t.l+=16,r.header=to(t),r.footer=to(t),t.l+=2),r}function Woe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}function Yoe(t){for(var e=ut(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var Xoe=nA,Joe=sQ,Zoe=K1;function ele(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function tle(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=nA(t);++t.l;var s=w0(t,e-7,r);return n.t="str",n.val=s,n}function rle(t){var e=nA(t);++t.l;var r=to(t);return e.t="n",e.val=r,e}function nle(t,e,r){var n=ut(15);return X1(n,t,e),n.write_shift(8,r,"f"),n}function sle(t){var e=nA(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function ale(t,e,r){var n=ut(9);return X1(n,t,e),n.write_shift(2,r),n}function ile(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function ole(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function lle(t,e,r){var n=t.l+e,s=nA(t),a=t.read_shift(2),i=a0(t,a,r);return t.l=n,s.t="str",s.val=i,s}var cle=[2,3,48,49,131,139,140,245],J5=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=uC({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],d=Hf(1);switch(l.type){case"base64":d=hl(wl(o));break;case"binary":d=hl(o);break;case"buffer":case"array":d=o;break}bi(d,0);var h=d.read_shift(1),p=!!(h&136),m=!1,y=!1;switch(h){case 2:break;case 3:break;case 48:m=!0,p=!0;break;case 49:m=!0,p=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var x=0,E=521;h==2&&(x=d.read_shift(2)),d.l+=3,h!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),h!=2&&(E=d.read_shift(2));var S=d.read_shift(2),B=l.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(B=t[d[d.l]]),d.l+=1,d.l+=2),y&&(d.l+=36);for(var D=[],I={},U=Math.min(d.length,h==2?521:E-10-(m?264:0)),F=y?32:11;d.l<U&&d[d.l]!=13;)switch(I={},I.name=Yx.utils.decode(B,d.slice(d.l,d.l+F)).replace(/[\u0000\r\n].*$/g,""),d.l+=F,I.type=String.fromCharCode(d.read_shift(1)),h!=2&&!y&&(I.offset=d.read_shift(4)),I.len=d.read_shift(1),h==2&&(I.offset=d.read_shift(2)),I.dec=d.read_shift(1),I.name.length&&D.push(I),h!=2&&(d.l+=y?13:14),I.type){case"B":(!m||I.len!=8)&&l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+I.type)}if(d[d.l]!==13&&(d.l=E-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=E;var C=0,_=0;for(c[0]=[],_=0;_!=D.length;++_)c[0][_]=D[_].name;for(;x-- >0;){if(d[d.l]===42){d.l+=S;continue}for(++d.l,c[++C]=[],_=0,_=0;_!=D.length;++_){var N=d.slice(d.l,d.l+D[_].len);d.l+=D[_].len,bi(N,0);var j=Yx.utils.decode(B,N);switch(D[_].type){case"C":j.trim().length&&(c[C][_]=j.replace(/\s+$/,""));break;case"D":j.length===8?c[C][_]=new Date(+j.slice(0,4),+j.slice(4,6)-1,+j.slice(6,8)):c[C][_]=j;break;case"F":c[C][_]=parseFloat(j.trim());break;case"+":case"I":c[C][_]=y?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(j.trim().toUpperCase()){case"Y":case"T":c[C][_]=!0;break;case"N":case"F":c[C][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+j+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));c[C][_]="##MEMO##"+(y?parseInt(j.trim(),10):N.read_shift(4));break;case"N":j=j.replace(/\u0000/g,"").trim(),j&&j!="."&&(c[C][_]=+j||0);break;case"@":c[C][_]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":c[C][_]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":c[C][_]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[C][_]=-N.read_shift(-8,"f");break;case"B":if(m&&D[_].len==8){c[C][_]=N.read_shift(8,"f");break}case"G":case"P":N.l+=D[_].len;break;case"0":if(D[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+D[_].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=D,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var d=Rm(r(o,c),c);return d["!cols"]=c.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete c.DBF,d}function s(o,l){try{return Xf(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var c=l||{};if(+c.codepage>=0&&Hc(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var d=Qo(),h=zw(o,{header:1,raw:!0,cellDates:!0}),p=h[0],m=h.slice(1),y=o["!cols"]||[],x=0,E=0,S=0,B=1;for(x=0;x<p.length;++x){if(((y[x]||{}).DBF||{}).name){p[x]=y[x].DBF.name,++S;continue}if(p[x]!=null){if(++S,typeof p[x]=="number"&&(p[x]=p[x].toString(10)),typeof p[x]!="string")throw new Error("DBF Invalid column name "+p[x]+" |"+typeof p[x]+"|");if(p.indexOf(p[x])!==x){for(E=0;E<1024;++E)if(p.indexOf(p[x]+"_"+E)==-1){p[x]+="_"+E;break}}}}var D=Sn(o["!ref"]),I=[],U=[],F=[];for(x=0;x<=D.e.c-D.s.c;++x){var C="",_="",N=0,j=[];for(E=0;E<m.length;++E)m[E][x]!=null&&j.push(m[E][x]);if(j.length==0||p[x]==null){I[x]="?";continue}for(E=0;E<j.length;++E){switch(typeof j[E]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=j[E]instanceof Date?"D":"C";break;default:_="C"}N=Math.max(N,String(j[E]).length),C=C&&C!=_?"C":_}N>250&&(N=250),_=((y[x]||{}).DBF||{}).type,_=="C"&&y[x].DBF.len>N&&(N=y[x].DBF.len),C=="B"&&_=="N"&&(C="N",F[x]=y[x].DBF.dec,N=y[x].DBF.len),U[x]=C=="C"||_=="N"?N:a[C]||0,B+=U[x],I[x]=C}var R=d.next(32);for(R.write_shift(4,318902576),R.write_shift(4,m.length),R.write_shift(2,296+32*S),R.write_shift(2,B),x=0;x<4;++x)R.write_shift(4,0);for(R.write_shift(4,0|(+e[n7]||3)<<8),x=0,E=0;x<p.length;++x)if(p[x]!=null){var L=d.next(32),Q=(p[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);L.write_shift(1,Q,"sbcs"),L.write_shift(1,I[x]=="?"?"C":I[x],"sbcs"),L.write_shift(4,E),L.write_shift(1,U[x]||a[I[x]]||0),L.write_shift(1,F[x]||0),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(1,0),L.write_shift(4,0),L.write_shift(4,0),E+=U[x]||a[I[x]]||0}var H=d.next(264);for(H.write_shift(4,13),x=0;x<65;++x)H.write_shift(4,0);for(x=0;x<m.length;++x){var te=d.next(B);for(te.write_shift(1,0),E=0;E<p.length;++E)if(p[E]!=null)switch(I[E]){case"L":te.write_shift(1,m[x][E]==null?63:m[x][E]?84:70);break;case"B":te.write_shift(8,m[x][E]||0,"f");break;case"N":var Y="0";for(typeof m[x][E]=="number"&&(Y=m[x][E].toFixed(F[E]||0)),S=0;S<U[E]-Y.length;++S)te.write_shift(1,32);te.write_shift(1,Y,"sbcs");break;case"D":m[x][E]?(te.write_shift(4,("0000"+m[x][E].getFullYear()).slice(-4),"sbcs"),te.write_shift(2,("00"+(m[x][E].getMonth()+1)).slice(-2),"sbcs"),te.write_shift(2,("00"+m[x][E].getDate()).slice(-2),"sbcs")):te.write_shift(8,"00000000","sbcs");break;case"C":var re=String(m[x][E]!=null?m[x][E]:"").slice(0,U[E]);for(te.write_shift(1,re,"sbcs"),S=0;S<U[E]-re.length;++S)te.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}}(),pQ=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Zs(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,m){var y=t[m];return typeof y=="number"?rD(y):y},n=function(p,m,y){var x=m.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return x==59?p:rD(x)};t["|"]=254;function s(p,m){switch(m.type){case"base64":return a(wl(p),m);case"binary":return a(p,m);case"buffer":return a(Zr&&Buffer.isBuffer(p)?p.toString("binary"):Yf(p),m);case"array":return a(n0(p),m)}throw new Error("Unrecognized type "+m.type)}function a(p,m){var y=p.split(/[\n\r]+/),x=-1,E=-1,S=0,B=0,D=[],I=[],U=null,F={},C=[],_=[],N=[],j=0,R;for(+m.codepage>=0&&Hc(+m.codepage);S!==y.length;++S){j=0;var L=y[S].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),Q=L.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),H=Q[0],te;if(L.length>0)switch(H){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Q[1].charAt(0)=="P"&&I.push(L.slice(3).replace(/;;/g,";"));break;case"C":var Y=!1,re=!1,V=!1,J=!1,K=-1,ae=-1;for(B=1;B<Q.length;++B)switch(Q[B].charAt(0)){case"A":break;case"X":E=parseInt(Q[B].slice(1))-1,re=!0;break;case"Y":for(x=parseInt(Q[B].slice(1))-1,re||(E=0),R=D.length;R<=x;++R)D[R]=[];break;case"K":te=Q[B].slice(1),te.charAt(0)==='"'?te=te.slice(1,te.length-1):te==="TRUE"?te=!0:te==="FALSE"?te=!1:isNaN(zc(te))?isNaN(fm(te).getDate())||(te=vs(te)):(te=zc(te),U!==null&&Fm(U)&&(te=dC(te))),Y=!0;break;case"E":J=!0;var O=$p(Q[B].slice(1),{r:x,c:E});D[x][E]=[D[x][E],O];break;case"S":V=!0,D[x][E]=[D[x][E],"S5S"];break;case"G":break;case"R":K=parseInt(Q[B].slice(1))-1;break;case"C":ae=parseInt(Q[B].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+L)}if(Y&&(D[x][E]&&D[x][E].length==2?D[x][E][0]=te:D[x][E]=te,U=null),V){if(J)throw new Error("SYLK shared formula cannot have own formula");var W=K>-1&&D[K][ae];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");D[x][E][1]=DQ(W[1],{r:x-K,c:E-ae})}break;case"F":var Z=0;for(B=1;B<Q.length;++B)switch(Q[B].charAt(0)){case"X":E=parseInt(Q[B].slice(1))-1,++Z;break;case"Y":for(x=parseInt(Q[B].slice(1))-1,R=D.length;R<=x;++R)D[R]=[];break;case"M":j=parseInt(Q[B].slice(1))/20;break;case"F":break;case"G":break;case"P":U=I[parseInt(Q[B].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(N=Q[B].slice(1).split(" "),R=parseInt(N[0],10);R<=parseInt(N[1],10);++R)j=parseInt(N[2],10),_[R-1]=j===0?{hidden:!0}:{wch:j},Vf(_[R-1]);break;case"C":E=parseInt(Q[B].slice(1))-1,_[E]||(_[E]={});break;case"R":x=parseInt(Q[B].slice(1))-1,C[x]||(C[x]={}),j>0?(C[x].hpt=j,C[x].hpx=pm(j)):j===0&&(C[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+L)}Z<1&&(U=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+L)}}return C.length>0&&(F["!rows"]=C),_.length>0&&(F["!cols"]=_),m&&m.sheetRows&&(D=D.slice(0,m.sheetRows)),[D,F]}function i(p,m){var y=s(p,m),x=y[0],E=y[1],S=Rm(x,m);return Zs(E).forEach(function(B){S[B]=E[B]}),S}function o(p,m){return Xf(i(p,m),m)}function l(p,m,y,x){var E="C;Y"+(y+1)+";X"+(x+1)+";K";switch(p.t){case"n":E+=p.v||0,p.f&&!p.F&&(E+=";E"+nB(p.f,{r:y,c:x}));break;case"b":E+=p.v?"TRUE":"FALSE";break;case"e":E+=p.w||p.v;break;case"d":E+='"'+(p.w||p.v)+'"';break;case"s":E+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function c(p,m){m.forEach(function(y,x){var E="F;W"+(x+1)+" "+(x+1)+" ";y.hidden?E+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=s1(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=a1(y.wpx)),typeof y.wch=="number"&&(E+=Math.round(y.wch))),E.charAt(E.length-1)!=" "&&p.push(E)})}function d(p,m){m.forEach(function(y,x){var E="F;";y.hidden?E+="M0;":y.hpt?E+="M"+20*y.hpt+";":y.hpx&&(E+="M"+20*i1(y.hpx)+";"),E.length>2&&p.push(E+"R"+(x+1))})}function h(p,m){var y=["ID;PWXL;N;E"],x=[],E=Sn(p["!ref"]),S,B=Array.isArray(p),D=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),p["!cols"]&&c(y,p["!cols"]),p["!rows"]&&d(y,p["!rows"]),y.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var I=E.s.r;I<=E.e.r;++I)for(var U=E.s.c;U<=E.e.c;++U){var F=Nr({r:I,c:U});S=B?(p[I]||[])[U]:p[F],!(!S||S.v==null&&(!S.f||S.F))&&x.push(l(S,p,I,U))}return y.join(D)+D+x.join(D)+D+"E"+D}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),mQ=function(){function t(a,i){switch(i.type){case"base64":return e(wl(a),i);case"binary":return e(a,i);case"buffer":return e(Zr&&Buffer.isBuffer(a)?a.toString("binary"):Yf(a),i);case"array":return e(n0(a),i)}throw new Error("Unrecognized type "+i.type)}function e(a,i){for(var o=a.split(`
`),l=-1,c=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++l]=[],c=0;continue}if(!(l<0)){var p=o[d].trim().split(","),m=p[0],y=p[1];++d;for(var x=o[d]||"";(x.match(/["]/g)||[]).length&1&&d<o.length-1;)x+=`
`+o[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){h[++l]=[],c=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?h[l][c]=!0:x==="FALSE"?h[l][c]=!1:isNaN(zc(y))?isNaN(fm(y).getDate())?h[l][c]=y:h[l][c]=vs(y):h[l][c]=zc(y),++c;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),h[l][c++]=x!==""?x:null;break}if(x==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function r(a,i){return Rm(t(a,i),i)}function n(a,i){return Xf(r(a,i),i)}var s=function(){var a=function(l,c,d,h,p){l.push(c),l.push(d+","+h),l.push('"'+p.replace(/"/g,'""')+'"')},i=function(l,c,d,h){l.push(c+","+d),l.push(c==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var c=[],d=Sn(l["!ref"]),h,p=Array.isArray(l);a(c,"TABLE",0,1,"sheetjs"),a(c,"VECTORS",0,d.e.r-d.s.r+1,""),a(c,"TUPLES",0,d.e.c-d.s.c+1,""),a(c,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){i(c,-1,0,"BOT");for(var y=d.s.c;y<=d.e.c;++y){var x=Nr({r:m,c:y});if(h=p?(l[m]||[])[y]:l[x],!h){i(c,1,0,"");continue}switch(h.t){case"n":var E=h.w;!E&&h.v!=null&&(E=h.v),E==null?h.f&&!h.F?i(c,1,0,"="+h.f):i(c,1,0,""):i(c,0,E,"V");break;case"b":i(c,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(c,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=uc(h.z||Er[14],qa(vs(h.v)))),i(c,0,h.w,"V");break;default:i(c,1,0,"")}}}i(c,-1,0,"EOD");var S=`\r
`,B=c.join(S);return B}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),gQ=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,p){for(var m=h.split(`
`),y=-1,x=-1,E=0,S=[];E!==m.length;++E){var B=m[E].trim().split(":");if(B[0]==="cell"){var D=Us(B[1]);if(S.length<=D.r)for(y=S.length;y<=D.r;++y)S[y]||(S[y]=[]);switch(y=D.r,x=D.c,B[2]){case"t":S[y][x]=t(B[3]);break;case"v":S[y][x]=+B[3];break;case"vtf":var I=B[B.length-1];case"vtc":switch(B[3]){case"nl":S[y][x]=!!+B[4];break;default:S[y][x]=+B[4];break}B[2]=="vtf"&&(S[y][x]=[S[y][x],I])}}}return p&&p.sheetRows&&(S=S.slice(0,p.sheetRows)),S}function n(h,p){return Rm(r(h,p),p)}function s(h,p){return Xf(n(h,p),p)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(h){if(!h||!h["!ref"])return"";for(var p=[],m=[],y,x="",E=Vo(h["!ref"]),S=Array.isArray(h),B=E.s.r;B<=E.e.r;++B)for(var D=E.s.c;D<=E.e.c;++D)if(x=Nr({r:B,c:D}),y=S?(h[B]||[])[D]:h[x],!(!y||y.v==null||y.t==="z")){switch(m=["cell",x,"t"],y.t){case"s":case"str":m.push(e(y.v));break;case"n":y.f?(m[2]="vtf",m[3]="n",m[4]=y.v,m[5]=e(y.f)):(m[2]="v",m[3]=y.v);break;case"b":m[2]="vt"+(y.f?"f":"c"),m[3]="nl",m[4]=y.v?"1":"0",m[5]=e(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var I=qa(vs(y.v));m[2]="vtc",m[3]="nd",m[4]=""+I,m[5]=y.w||uc(y.z||Er[14],I);break;case"e":continue}p.push(m.join(":"))}return p.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(h){return[a,i,o,i,c(h),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}}(),hm=function(){function t(d,h,p,m,y){y.raw?h[p][m]=d:d===""||(d==="TRUE"?h[p][m]=!0:d==="FALSE"?h[p][m]=!1:isNaN(zc(d))?isNaN(fm(d).getDate())?h[p][m]=d:h[p][m]=vs(d):h[p][m]=zc(d))}function e(d,h){var p=h||{},m=[];if(!d||d.length===0)return m;for(var y=d.split(/[\r\n]/),x=y.length-1;x>=0&&y[x].length===0;)--x;for(var E=10,S=0,B=0;B<=x;++B)S=y[B].indexOf(" "),S==-1?S=y[B].length:S++,E=Math.max(E,S);for(B=0;B<=x;++B){m[B]=[];var D=0;for(t(y[B].slice(0,E).trim(),m,B,D,p),D=1;D<=(y[B].length-E)/10+1;++D)t(y[B].slice(E+(D-1)*10,E+D*10).trim(),m,B,D,p)}return p.sheetRows&&(m=m.slice(0,p.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var h={},p=!1,m=0,y=0;m<d.length;++m)(y=d.charCodeAt(m))==34?p=!p:!p&&y in r&&(h[y]=(h[y]||0)+1);y=[];for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&y.push([h[m],m]);if(!y.length){h=n;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&y.push([h[m],m])}return y.sort(function(x,E){return x[0]-E[0]||n[x[1]]-n[E[1]]}),r[y.pop()[1]]||44}function a(d,h){var p=h||{},m="",y=p.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=s(d.slice(0,1024)):p&&p.FS?m=p.FS:m=s(d.slice(0,1024));var E=0,S=0,B=0,D=0,I=0,U=m.charCodeAt(0),F=!1,C=0,_=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var N=p.dateNF!=null?Wse(p.dateNF):null;function j(){var R=d.slice(D,I),L={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)L.t="z";else if(p.raw)L.t="s",L.v=R;else if(R.trim().length===0)L.t="s",L.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(L.t="s",L.v=R.slice(2,-1).replace(/""/g,'"')):Eue(R)?(L.t="n",L.f=R.slice(1)):(L.t="s",L.v=R);else if(R=="TRUE")L.t="b",L.v=!0;else if(R=="FALSE")L.t="b",L.v=!1;else if(!isNaN(B=zc(R)))L.t="n",p.cellText!==!1&&(L.w=R),L.v=B;else if(!isNaN(fm(R).getDate())||N&&R.match(N)){L.z=p.dateNF||Er[14];var Q=0;N&&R.match(N)&&(R=Yse(R,p.dateNF,R.match(N)||[]),Q=1),p.cellDates?(L.t="d",L.v=vs(R,Q)):(L.t="n",L.v=qa(vs(R,Q))),p.cellText!==!1&&(L.w=uc(L.z,L.v instanceof Date?qa(L.v):L.v)),p.cellNF||delete L.z}else L.t="s",L.v=R;if(L.t=="z"||(p.dense?(y[E]||(y[E]=[]),y[E][S]=L):y[Nr({c:S,r:E})]=L),D=I+1,_=d.charCodeAt(D),x.e.c<S&&(x.e.c=S),x.e.r<E&&(x.e.r=E),C==U)++S;else if(S=0,++E,p.sheetRows&&p.sheetRows<=E)return!0}e:for(;I<d.length;++I)switch(C=d.charCodeAt(I)){case 34:_===34&&(F=!F);break;case U:case 10:case 13:if(!F&&j())break e;break}return I-D>0&&j(),y["!ref"]=jr(x),y}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,h):Rm(e(d,h),h)}function o(d,h){var p="",m=h.type=="string"?[0,0,0,0]:AB(d,h);switch(h.type){case"base64":p=wl(d);break;case"binary":p=d;break;case"buffer":h.codepage==65001?p=d.toString("utf8"):h.codepage&&typeof Yx<"u"||(p=Zr&&Buffer.isBuffer(d)?d.toString("binary"):Yf(d));break;case"array":p=n0(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+h.type)}return m[0]==239&&m[1]==187&&m[2]==191?p=os(p.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?p=os(p):h.type=="binary"&&typeof Yx<"u",p.slice(0,19)=="socialcalc:version:"?gQ.to_sheet(h.type=="string"?p:os(p),h):i(p,h)}function l(d,h){return Xf(o(d,h),h)}function c(d){for(var h=[],p=Sn(d["!ref"]),m,y=Array.isArray(d),x=p.s.r;x<=p.e.r;++x){for(var E=[],S=p.s.c;S<=p.e.c;++S){var B=Nr({r:x,c:S});if(m=y?(d[x]||[])[S]:d[B],!m||m.v==null){E.push("          ");continue}for(var D=(m.w||(nd(m),m.w)||"").slice(0,10);D.length<10;)D+=" ";E.push(D+(S===0?" ":""))}h.push(E.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function ule(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=pQ.to_workbook(t,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return hm.to_workbook(t,e)}}var Vh=function(){function t(O,W,Z){if(O){bi(O,O.l||0);for(var ne=Z.Enum||K;O.l<O.length;){var le=O.read_shift(2),ve=ne[le]||ne[65535],pe=O.read_shift(2),he=O.l+pe,de=ve.f&&ve.f(O,pe,Z);if(O.l=he,W(de,ve,le))return}}}function e(O,W){switch(W.type){case"base64":return r(hl(wl(O)),W);case"binary":return r(hl(O),W);case"buffer":case"array":return r(O,W)}throw"Unsupported type "+W.type}function r(O,W){if(!O)return O;var Z=W||{},ne=Z.dense?[]:{},le="Sheet1",ve="",pe=0,he={},de=[],ce=[],oe={s:{r:0,c:0},e:{r:0,c:0}},Re=Z.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)Z.Enum=K,t(O,function(De,je,We){switch(We){case 0:Z.vers=De,De>=4096&&(Z.qpro=!0);break;case 6:oe=De;break;case 204:De&&(ve=De);break;case 222:ve=De;break;case 15:case 51:Z.qpro||(De[1].v=De[1].v.slice(1));case 13:case 14:case 16:We==14&&(De[2]&112)==112&&(De[2]&15)>1&&(De[2]&15)<15&&(De[1].z=Z.dateNF||Er[14],Z.cellDates&&(De[1].t="d",De[1].v=dC(De[1].v))),Z.qpro&&De[3]>pe&&(ne["!ref"]=jr(oe),he[le]=ne,de.push(le),ne=Z.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},pe=De[3],le=ve||"Sheet"+(pe+1),ve="");var ct=Z.dense?(ne[De[0].r]||[])[De[0].c]:ne[Nr(De[0])];if(ct){ct.t=De[1].t,ct.v=De[1].v,De[1].z!=null&&(ct.z=De[1].z),De[1].f!=null&&(ct.f=De[1].f);break}Z.dense?(ne[De[0].r]||(ne[De[0].r]=[]),ne[De[0].r][De[0].c]=De[1]):ne[Nr(De[0])]=De[1];break}},Z);else if(O[2]==26||O[2]==14)Z.Enum=ae,O[2]==14&&(Z.qpro=!0,O.l=0),t(O,function(De,je,We){switch(We){case 204:le=De;break;case 22:De[1].v=De[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(De[3]>pe&&(ne["!ref"]=jr(oe),he[le]=ne,de.push(le),ne=Z.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},pe=De[3],le="Sheet"+(pe+1)),Re>0&&De[0].r>=Re)break;Z.dense?(ne[De[0].r]||(ne[De[0].r]=[]),ne[De[0].r][De[0].c]=De[1]):ne[Nr(De[0])]=De[1],oe.e.c<De[0].c&&(oe.e.c=De[0].c),oe.e.r<De[0].r&&(oe.e.r=De[0].r);break;case 27:De[14e3]&&(ce[De[14e3][0]]=De[14e3][1]);break;case 1537:ce[De[0]]=De[1],De[0]==pe&&(le=De[1]);break}},Z);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(ne["!ref"]=jr(oe),he[ve||le]=ne,de.push(ve||le),!ce.length)return{SheetNames:de,Sheets:he};for(var qe={},Ie=[],Ee=0;Ee<ce.length;++Ee)he[de[Ee]]?(Ie.push(ce[Ee]||de[Ee]),qe[ce[Ee]]=he[ce[Ee]]||he[de[Ee]]):(Ie.push(ce[Ee]),qe[ce[Ee]]={"!ref":"A1"});return{SheetNames:Ie,Sheets:qe}}function n(O,W){var Z=W||{};if(+Z.codepage>=0&&Hc(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=Qo(),le=Sn(O["!ref"]),ve=Array.isArray(O),pe=[];Pt(ne,0,a(1030)),Pt(ne,6,l(le));for(var he=Math.min(le.e.r,8191),de=le.s.r;de<=he;++de)for(var ce=pa(de),oe=le.s.c;oe<=le.e.c;++oe){de===le.s.r&&(pe[oe]=Ls(oe));var Re=pe[oe]+ce,qe=ve?(O[de]||[])[oe]:O[Re];if(!(!qe||qe.t=="z"))if(qe.t=="n")(qe.v|0)==qe.v&&qe.v>=-32768&&qe.v<=32767?Pt(ne,13,m(de,oe,qe.v)):Pt(ne,14,x(de,oe,qe.v));else{var Ie=nd(qe);Pt(ne,15,h(de,oe,Ie.slice(0,239)))}}return Pt(ne,1),ne.end()}function s(O,W){var Z=W||{};if(+Z.codepage>=0&&Hc(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=Qo();Pt(ne,0,i(O));for(var le=0,ve=0;le<O.SheetNames.length;++le)(O.Sheets[O.SheetNames[le]]||{})["!ref"]&&Pt(ne,27,J(O.SheetNames[le],ve++));var pe=0;for(le=0;le<O.SheetNames.length;++le){var he=O.Sheets[O.SheetNames[le]];if(!(!he||!he["!ref"])){for(var de=Sn(he["!ref"]),ce=Array.isArray(he),oe=[],Re=Math.min(de.e.r,8191),qe=de.s.r;qe<=Re;++qe)for(var Ie=pa(qe),Ee=de.s.c;Ee<=de.e.c;++Ee){qe===de.s.r&&(oe[Ee]=Ls(Ee));var De=oe[Ee]+Ie,je=ce?(he[qe]||[])[Ee]:he[De];if(!(!je||je.t=="z"))if(je.t=="n")Pt(ne,23,j(qe,Ee,pe,je.v));else{var We=nd(je);Pt(ne,22,C(qe,Ee,pe,We.slice(0,239)))}}++pe}}return Pt(ne,1),ne.end()}function a(O){var W=ut(2);return W.write_shift(2,O),W}function i(O){var W=ut(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var Z=0,ne=0,le=0,ve=0;ve<O.SheetNames.length;++ve){var pe=O.SheetNames[ve],he=O.Sheets[pe];if(!(!he||!he["!ref"])){++le;var de=Vo(he["!ref"]);Z<de.e.r&&(Z=de.e.r),ne<de.e.c&&(ne=de.e.c)}}return Z>8191&&(Z=8191),W.write_shift(2,Z),W.write_shift(1,le),W.write_shift(1,ne),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(O,W,Z){var ne={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&Z.qpro?(ne.s.c=O.read_shift(1),O.l++,ne.s.r=O.read_shift(2),ne.e.c=O.read_shift(1),O.l++,ne.e.r=O.read_shift(2),ne):(ne.s.c=O.read_shift(2),ne.s.r=O.read_shift(2),W==12&&Z.qpro&&(O.l+=2),ne.e.c=O.read_shift(2),ne.e.r=O.read_shift(2),W==12&&Z.qpro&&(O.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function l(O){var W=ut(8);return W.write_shift(2,O.s.c),W.write_shift(2,O.s.r),W.write_shift(2,O.e.c),W.write_shift(2,O.e.r),W}function c(O,W,Z){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return Z.qpro&&Z.vers!=20768?(ne[0].c=O.read_shift(1),ne[3]=O.read_shift(1),ne[0].r=O.read_shift(2),O.l+=2):(ne[2]=O.read_shift(1),ne[0].c=O.read_shift(2),ne[0].r=O.read_shift(2)),ne}function d(O,W,Z){var ne=O.l+W,le=c(O,W,Z);if(le[1].t="s",Z.vers==20768){O.l++;var ve=O.read_shift(1);return le[1].v=O.read_shift(ve,"utf8"),le}return Z.qpro&&O.l++,le[1].v=O.read_shift(ne-O.l,"cstr"),le}function h(O,W,Z){var ne=ut(7+Z.length);ne.write_shift(1,255),ne.write_shift(2,W),ne.write_shift(2,O),ne.write_shift(1,39);for(var le=0;le<ne.length;++le){var ve=Z.charCodeAt(le);ne.write_shift(1,ve>=128?95:ve)}return ne.write_shift(1,0),ne}function p(O,W,Z){var ne=c(O,W,Z);return ne[1].v=O.read_shift(2,"i"),ne}function m(O,W,Z){var ne=ut(7);return ne.write_shift(1,255),ne.write_shift(2,W),ne.write_shift(2,O),ne.write_shift(2,Z,"i"),ne}function y(O,W,Z){var ne=c(O,W,Z);return ne[1].v=O.read_shift(8,"f"),ne}function x(O,W,Z){var ne=ut(13);return ne.write_shift(1,255),ne.write_shift(2,W),ne.write_shift(2,O),ne.write_shift(8,Z,"f"),ne}function E(O,W,Z){var ne=O.l+W,le=c(O,W,Z);if(le[1].v=O.read_shift(8,"f"),Z.qpro)O.l=ne;else{var ve=O.read_shift(2);I(O.slice(O.l,O.l+ve),le),O.l+=ve}return le}function S(O,W,Z){var ne=W&32768;return W&=-32769,W=(ne?O:0)+(W>=8192?W-16384:W),(ne?"":"$")+(Z?Ls(W):pa(W))}var B={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},D=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function I(O,W){bi(O,0);for(var Z=[],ne=0,le="",ve="",pe="",he="";O.l<O.length;){var de=O[O.l++];switch(de){case 0:Z.push(O.read_shift(8,"f"));break;case 1:ve=S(W[0].c,O.read_shift(2),!0),le=S(W[0].r,O.read_shift(2),!1),Z.push(ve+le);break;case 2:{var ce=S(W[0].c,O.read_shift(2),!0),oe=S(W[0].r,O.read_shift(2),!1);ve=S(W[0].c,O.read_shift(2),!0),le=S(W[0].r,O.read_shift(2),!1),Z.push(ce+oe+":"+ve+le)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:Z.push("("+Z.pop()+")");break;case 5:Z.push(O.read_shift(2));break;case 6:{for(var Re="";de=O[O.l++];)Re+=String.fromCharCode(de);Z.push('"'+Re.replace(/"/g,'""')+'"')}break;case 8:Z.push("-"+Z.pop());break;case 23:Z.push("+"+Z.pop());break;case 22:Z.push("NOT("+Z.pop()+")");break;case 20:case 21:he=Z.pop(),pe=Z.pop(),Z.push(["AND","OR"][de-20]+"("+pe+","+he+")");break;default:if(de<32&&D[de])he=Z.pop(),pe=Z.pop(),Z.push(pe+D[de]+he);else if(B[de]){if(ne=B[de][1],ne==69&&(ne=O[O.l++]),ne>Z.length){console.error("WK1 bad formula parse 0x"+de.toString(16)+":|"+Z.join("|")+"|");return}var qe=Z.slice(-ne);Z.length-=ne,Z.push(B[de][0]+"("+qe.join(",")+")")}else return de<=7?console.error("WK1 invalid opcode "+de.toString(16)):de<=24?console.error("WK1 unsupported op "+de.toString(16)):de<=30?console.error("WK1 invalid opcode "+de.toString(16)):de<=115?console.error("WK1 unsupported function opcode "+de.toString(16)):console.error("WK1 unrecognized opcode "+de.toString(16))}}Z.length==1?W[1].f=""+Z[0]:console.error("WK1 bad formula parse |"+Z.join("|")+"|")}function U(O){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=O.read_shift(2),W[3]=O[O.l++],W[0].c=O[O.l++],W}function F(O,W){var Z=U(O);return Z[1].t="s",Z[1].v=O.read_shift(W-4,"cstr"),Z}function C(O,W,Z,ne){var le=ut(6+ne.length);le.write_shift(2,O),le.write_shift(1,Z),le.write_shift(1,W),le.write_shift(1,39);for(var ve=0;ve<ne.length;++ve){var pe=ne.charCodeAt(ve);le.write_shift(1,pe>=128?95:pe)}return le.write_shift(1,0),le}function _(O,W){var Z=U(O);Z[1].v=O.read_shift(2);var ne=Z[1].v>>1;if(Z[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return Z[1].v=ne,Z}function N(O,W){var Z=U(O),ne=O.read_shift(4),le=O.read_shift(4),ve=O.read_shift(2);if(ve==65535)return ne===0&&le===3221225472?(Z[1].t="e",Z[1].v=15):ne===0&&le===3489660928?(Z[1].t="e",Z[1].v=42):Z[1].v=0,Z;var pe=ve&32768;return ve=(ve&32767)-16446,Z[1].v=(1-pe*2)*(le*Math.pow(2,ve+32)+ne*Math.pow(2,ve)),Z}function j(O,W,Z,ne){var le=ut(14);if(le.write_shift(2,O),le.write_shift(1,Z),le.write_shift(1,W),ne==0)return le.write_shift(4,0),le.write_shift(4,0),le.write_shift(2,65535),le;var ve=0,pe=0,he=0,de=0;return ne<0&&(ve=1,ne=-ne),pe=Math.log2(ne)|0,ne/=Math.pow(2,pe-31),de=ne>>>0,(de&2147483648)==0&&(ne/=2,++pe,de=ne>>>0),ne-=de,de|=2147483648,de>>>=0,ne*=Math.pow(2,32),he=ne>>>0,le.write_shift(4,he),le.write_shift(4,de),pe+=16383+(ve?32768:0),le.write_shift(2,pe),le}function R(O,W){var Z=N(O);return O.l+=W-14,Z}function L(O,W){var Z=U(O),ne=O.read_shift(4);return Z[1].v=ne>>6,Z}function Q(O,W){var Z=U(O),ne=O.read_shift(8,"f");return Z[1].v=ne,Z}function H(O,W){var Z=Q(O);return O.l+=W-10,Z}function te(O,W){return O[O.l+W-1]==0?O.read_shift(W,"cstr"):""}function Y(O,W){var Z=O[O.l++];Z>W-1&&(Z=W-1);for(var ne="";ne.length<Z;)ne+=String.fromCharCode(O[O.l++]);return ne}function re(O,W,Z){if(!(!Z.qpro||W<21)){var ne=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var le=O.read_shift(W-21,"cstr");return[ne,le]}}function V(O,W){for(var Z={},ne=O.l+W;O.l<ne;){var le=O.read_shift(2);if(le==14e3){for(Z[le]=[0,""],Z[le][0]=O.read_shift(2);O[O.l];)Z[le][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return Z}function J(O,W){var Z=ut(5+O.length);Z.write_shift(2,14e3),Z.write_shift(2,W);for(var ne=0;ne<O.length;++ne){var le=O.charCodeAt(ne);Z[Z.l++]=le>127?95:le}return Z[Z.l++]=0,Z}var K={0:{n:"BOF",f:Na},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:te},222:{n:"SHEETNAMELP",f:Y},65535:{n:""}},ae={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:F},23:{n:"NUMBER17",f:N},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:V},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:L},38:{n:"??"},39:{n:"NUMBER27",f:Q},40:{n:"FORMULA28",f:H},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:te},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:re},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function Ale(t){var e={},r=t.match(oo),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=Fr(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=N4[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return e}var dle=function(){var t=Zx("t"),e=Zx("rPr");function r(a){var i=a.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:_n(i[1])},l=a.match(e);return l&&(o.s=Ale(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),fle=function(){var e=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}}(),hle=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,ple=/<(?:\w+:)?r>/,mle=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function J4(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=_n(os(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=os(t),r&&(n.h=P4(n.t))):t.match(ple)&&(n.r=os(t),n.t=_n(os((t.replace(mle,"").match(hle)||[]).join("").replace(oo,""))),r&&(n.h=fle(dle(n.r)))),n):{t:""}}var gle=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,xle=/<(?:\w+:)?(?:si|sstItem)>/g,vle=/<\/(?:\w+:)?(?:si|sstItem)>/;function yle(t,e){var r=[],n="";if(!t)return r;var s=t.match(gle);if(s){n=s[2].replace(xle,"").split(vle);for(var a=0;a!=n.length;++a){var i=J4(n[a].trim(),e);i!=null&&(r[r.length]=i)}s=Fr(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var wle=/^\s|\s$|[\t\n\r]/;function xQ(t,e){if(!e.bookSST)return"";var r=[ma];r[r.length]=Mt("sst",null,{xmlns:m0[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var s=t[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(wle)&&(a+=' xml:space="preserve"'),a+=">"+Jn(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function ble(t){return[t.read_shift(4),t.read_shift(4)]}function Cle(t,e){var r=[],n=!1;return ud(t,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Ele(t,e){return e||(e=ut(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var _le=Lae;function Sle(t){var e=Qo();Et(e,159,Ele(t));for(var r=0;r<t.length;++r)Et(e,19,_le(t[r]));return Et(e,160),e.end()}function vQ(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function $A(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function Tle(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=$A(t,4),e.U=$A(t,4),e.W=$A(t,4),e}function Nle(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),a=[];s-- >0;)a.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=a,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function Ble(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(Nle(t));return e}function kle(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function Ile(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=$A(t,4),e.U=$A(t,4),e.W=$A(t,4),e}function Fle(t){var e=Ile(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function yQ(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function wQ(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function Dle(t){var e=$A(t);switch(e.Minor){case 2:return[e.Minor,Rle(t)];case 3:return[e.Minor,Lle()];case 4:return[e.Minor,Ule(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Rle(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=yQ(t,r),s=wQ(t,t.length-t.l);return{t:"Std",h:n,v:s}}function Lle(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Ule(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(oo,function(a){var i=Fr(a);switch(rA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function Mle(t,e){var r={},n=r.EncryptionVersionInfo=$A(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=yQ(t,s),e-=s,r.EncryptionVerifier=wQ(t,e),r}function Ple(t){var e={},r=e.EncryptionVersionInfo=$A(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function Z4(t){var e=0,r,n=vQ(t),s=n.length+1,a,i,o,l,c;for(r=Hf(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(e&16384)===0?0:1,l=e<<1&32767,c=o|l,e=c^i;return e^52811}var bQ=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=e[i.length-1],l=104,c=i.length-1;c>=0;--c)for(var d=i[c],h=0;h!=7;++h)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=vQ(i),l=a(o),c=o.length,d=Hf(16),h=0;h!=16;++h)d[h]=0;var p,m,y;for((c&1)===1&&(p=l>>8,d[c]=s(t[0],p),--c,p=l&255,m=o[o.length-1],d[c]=s(m,p));c>0;)--c,p=l>>8,d[c]=s(o[c],p),--c,p=l&255,d[c]=s(o[c],p);for(c=15,y=15-o.length;y>0;)p=l>>8,d[c]=s(t[y],p),--c,--y,p=l&255,d[c]=s(o[c],p),--c,--y;return d}}(),Ole=function(t,e,r,n,s){s||(s=e),n||(n=bQ(t));var a,i;for(a=0;a!=e.length;++a)i=e[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},jle=function(t){var e=0,r=bQ(t);return function(n){var s=Ole("",n,e,r);return e=s[1],s[0]}};function Qle(t,e,r,n){var s={key:Na(t),verificationBytes:Na(t)};return r.password&&(s.verifier=Z4(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=jle(r.password)),s}function Hle(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=Ple(t):n.Data=Mle(t,e),n}function Vle(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?Hle(t,e-2,n):Qle(t,r.biff>=8?e:e-2,r,n),n}var CQ=function(){function t(s,a){switch(a.type){case"base64":return e(wl(s),a);case"binary":return e(s,a);case"buffer":return e(Zr&&Buffer.isBuffer(s)?s.toString("binary"):Yf(s),a);case"array":return e(n0(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var p=/\\\w+\b/g,m=0,y,x=-1;y=p.exec(d);){switch(y[0]){case"\\cell":var E=d.slice(m,p.lastIndex-y[0].length);if(E[0]==" "&&(E=E.slice(1)),++x,E.length){var S={v:E,t:"s"};Array.isArray(o)?o[h][x]=S:o[Nr({r:h,c:x})]=S}break}m=p.lastIndex}x>c.e.c&&(c.e.c=x)}),o["!ref"]=jr(c),o}function r(s,a){return Xf(t(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=Sn(s["!ref"]),o,l=Array.isArray(s),c=i.s.r;c<=i.e.r;++c){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=Nr({r:c,c:d});o=l?(s[c]||[])[d]:s[h],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(nd(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function zle(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function n1(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function Gle(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),a=Math.min(e,r,n),i=s-a;if(i===0)return[0,0,e];var o=0,l=0,c=s+a;switch(l=i/(c>1?2-c:c),s){case e:o=((r-n)/i+6)%6;break;case r:o=(n-e)/i+2;break;case n:o=(e-r)/i+4;break}return[o/6,l,c/2]}function qle(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var c=0;c!=3;++c)i[c]=Math.round(i[c]*255);return i}function Hw(t,e){if(e===0)return t;var r=Gle(zle(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),n1(qle(r))}var EQ=6,Kle=15,$le=1,Ji=EQ;function s1(t){return Math.floor((t+Math.round(128/Ji)/256)*Ji)}function a1(t){return Math.floor((t-5)/Ji*100+.5)/100}function Vw(t){return Math.round((t*Ji+5)/Ji*256)/256}function $_(t){return Vw(a1(s1(t)))}function eB(t){var e=Math.abs(t-$_(t)),r=Ji;if(e>.005)for(Ji=$le;Ji<Kle;++Ji)Math.abs(t-$_(t))<=e&&(e=Math.abs(t-$_(t)),r=Ji);Ji=r}function Vf(t){t.width?(t.wpx=s1(t.width),t.wch=a1(t.wpx),t.MDW=Ji):t.wpx?(t.wch=a1(t.wpx),t.width=Vw(t.wch),t.MDW=Ji):typeof t.wch=="number"&&(t.width=Vw(t.wch),t.wpx=s1(t.width),t.MDW=Ji),t.customWidth&&delete t.customWidth}var Wle=96,_Q=Wle;function i1(t){return t*96/_Q}function pm(t){return t*_Q/96}var Yle={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Xle(t,e,r,n){e.Borders=[];var s={},a=!1;(t[0].match(oo)||[]).forEach(function(i){var o=Fr(i);switch(rA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=gs(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=gs(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Jle(t,e,r,n){e.Fills=[];var s={},a=!1;(t[0].match(oo)||[]).forEach(function(i){var o=Fr(i);switch(rA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function Zle(t,e,r,n){e.Fonts=[];var s={},a=!1;(t[0].match(oo)||[]).forEach(function(i){var o=Fr(i);switch(rA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=os(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?gs(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?gs(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?gs(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?gs(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?gs(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?gs(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?gs(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=N4[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=gs(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=Qh[s.color.index];s.color.index==81&&(l=Qh[1]),l||(l=Qh[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Hw(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function ece(t,e,r){e.NumberFmt=[];for(var n=Zs(Er),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Er[n[s]];var a=t[0].match(oo);if(a)for(s=0;s<a.length;++s){var i=Fr(a[s]);switch(rA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=_n(os(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}KA(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function tce(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Mt("numFmt",null,{numFmtId:n,formatCode:Jn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Mt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Ey=["numFmtId","fillId","fontId","borderId","xfId"],_y=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function rce(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(oo)||[]).forEach(function(a){var i=Fr(a),o=0;switch(rA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<Ey.length;++o)n[Ey[o]]&&(n[Ey[o]]=parseInt(n[Ey[o]],10));for(o=0;o<_y.length;++o)n[_y[o]]&&(n[_y[o]]=gs(n[_y[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=gs(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function nce(t){var e=[];return e[e.length]=Mt("cellXfs",null),t.forEach(function(r){e[e.length]=Mt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Mt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var sce=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&ece(h,d,c),(h=o.match(s))&&Zle(h,d,l,c),(h=o.match(n))&&Jle(h,d,l,c),(h=o.match(a))&&Xle(h,d,l,c),(h=o.match(r))&&rce(h,d,c),d}}();function SQ(t,e){var r=[ma,Mt("styleSheet",null,{xmlns:m0[0],"xmlns:vt":za.vt})],n;return t.SSF&&(n=tce(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=nce(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function ace(t,e){var r=t.read_shift(2),n=no(t);return[r,n]}function ice(t,e,r){r||(r=ut(6+4*e.length)),r.write_shift(2,t),oi(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function oce(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=Hae(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=t.read_shift(2);switch(a===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=Qae(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=no(t),n}function lce(t,e){e||(e=ut(153)),e.write_shift(2,t.sz*20),Vae(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Ow(t.color,e);var n=0;return n=2,e.write_shift(1,n),oi(t.name,e),e.length>e.l?e.slice(0,e.l):e}var cce=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],W_,uce=ao;function qD(t,e){e||(e=ut(84)),W_||(W_=uC(cce));var r=W_[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(Ow({auto:1},e),Ow({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Ace(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}function TQ(t,e,r){r||(r=ut(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function kg(t,e){return e||(e=ut(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var dce=ao;function fce(t,e){return e||(e=ut(51)),e.write_shift(1,0),kg(null,e),kg(null,e),kg(null,e),kg(null,e),kg(null,e),e.length>e.l?e.slice(0,e.l):e}function hce(t,e){return e||(e=ut(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Pw(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function pce(t,e,r){var n=ut(2052);return n.write_shift(4,t),Pw(e,n),Pw(r,n),n.length>n.l?n.slice(0,n.l):n}function mce(t,e,r){var n={};n.NumberFmt=[];for(var s in Er)n.NumberFmt[s]=Er[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return ud(t,function(l,c,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],KA(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=Hw(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(c.T>0)a.push(d);else if(c.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function gce(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++r}),r!=0&&(Et(t,615,Gc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Et(t,44,ice(s,e[s]))}),Et(t,616))}}function xce(t){var e=1;Et(t,611,Gc(e)),Et(t,43,lce({sz:12,color:{theme:1},name:"Calibri",family:2})),Et(t,612)}function vce(t){var e=2;Et(t,603,Gc(e)),Et(t,45,qD({patternType:"none"})),Et(t,45,qD({patternType:"gray125"})),Et(t,604)}function yce(t){var e=1;Et(t,613,Gc(e)),Et(t,46,fce()),Et(t,614)}function wce(t){var e=1;Et(t,626,Gc(e)),Et(t,47,TQ({numFmtId:0},65535)),Et(t,627)}function bce(t,e){Et(t,617,Gc(e.length)),e.forEach(function(r){Et(t,47,TQ(r,0))}),Et(t,618)}function Cce(t){var e=1;Et(t,619,Gc(e)),Et(t,48,hce({xfId:0,name:"Normal"})),Et(t,620)}function Ece(t){var e=0;Et(t,505,Gc(e)),Et(t,506)}function _ce(t){var e=0;Et(t,508,pce(e,"TableStyleMedium9","PivotStyleMedium4")),Et(t,509)}function Sce(t,e){var r=Qo();return Et(r,278),gce(r,t.SSF),xce(r),vce(r),yce(r),wce(r),bce(r,e.cellXfs),Cce(r),Ece(r),_ce(r),Et(r,279),r.end()}var Tce=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Nce(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(oo)||[]).forEach(function(s){var a=Fr(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[Tce.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function Bce(){}function kce(){}var Ice=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Fce=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Dce=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Rce(t,e,r){e.themeElements={};var n;[["clrScheme",Ice,Nce],["fontScheme",Fce,Bce],["fmtScheme",Dce,kce]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var Lce=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function NQ(t,e){(!t||t.length===0)&&(t=tB());var r,n={};if(!(r=t.match(Lce)))throw new Error("themeElements not found in theme");return Rce(r[0],n,e),n.raw=t,n}function tB(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[ma];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Uce(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var a=t.slice(t.l);t.l=n;var i;try{i=y7(a,{type:"array"})}catch{return}var o=pl(i,"theme/theme/theme1.xml",!0);if(o)return NQ(o,r)}}function Mce(t){return t.read_shift(4)}function Pce(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Oce(t,4);break;case 2:e.xclrValue=oQ(t);break;case 3:e.xclrValue=Mce(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Oce(t,e){return ao(t,e)}function jce(t,e){return ao(t,e)}function Qce(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Pce(t);break;case 6:n[1]=jce(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function Hce(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),a=[];s-- >0;)a.push(Qce(t,r-t.l));return{ixfe:n,ext:a}}function Vce(t,e){e.forEach(function(r){r[0]})}function zce(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:no(t)}}function Gce(t){var e=ut(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),oi(t.name,e),e.slice(0,e.l)}function qce(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Kce(t){var e=ut(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function $ce(t,e){var r=ut(8+2*e.length);return r.write_shift(4,t),oi(e,r),r.slice(0,r.l)}function Wce(t){return t.l+=4,t.read_shift(4)!=0}function Yce(t,e){var r=ut(8);return r.write_shift(4,t),r.write_shift(4,1),r}function Xce(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return ud(t,function(l,c,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?n.Cell.push({type:n.Types[h[0]-1].name,index:h[1]}):o==0&&n.Value.push({type:n.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!c.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function Jce(){var t=Qo();return Et(t,332),Et(t,334,Gc(1)),Et(t,335,Gce({name:"XLDAPR",version:12e4,flags:3496657072})),Et(t,336),Et(t,339,$ce(1,"XLDAPR")),Et(t,52),Et(t,35,Gc(514)),Et(t,4096,Gc(0)),Et(t,4097,Zl(1)),Et(t,36),Et(t,53),Et(t,340),Et(t,337,Yce(1)),Et(t,51,Kce([[1,0]])),Et(t,338),Et(t,333),t.end()}function Zce(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,a=2,i;return t.replace(oo,function(o){var l=Fr(o);switch(rA(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(i=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function BQ(){var t=[ma];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function eue(t){var e=[];if(!t)return e;var r=1;return(t.match(oo)||[]).forEach(function(n){var s=Fr(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function tue(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Nr(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function rue(t,e,r){var n=[];return ud(t,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function nue(t,e,r,n){if(!t)return t;var s=n||{},a=!1;ud(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function sue(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var Ip=1024;function kQ(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Mt("xml",null,{"xmlns:v":dl.v,"xmlns:o":dl.o,"xmlns:x":dl.x,"xmlns:mv":dl.mv}).replace(/\/>/,">"),Mt("o:shapelayout",Mt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Mt("v:shapetype",[Mt("v:stroke",null,{joinstyle:"miter"}),Mt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Ip<t*1e3;)Ip+=1e3;return e.forEach(function(a){var i=Us(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Mt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=Mt("v:fill",l,o),d={on:"t",obscured:"t"};++Ip,s=s.concat(["<v:shape"+e1({id:"_x0000_s"+Ip,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,Mt("v:shadow",null,d),Mt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ei("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Ei("x:AutoFill","False"),Ei("x:Row",String(i.r)),Ei("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function KD(t,e,r,n){var s=Array.isArray(t),a;e.forEach(function(i){var o=Us(i.ref);if(s?(t[o.r]||(t[o.r]=[]),a=t[o.r][o.c]):a=t[i.ref],!a){a={t:"z"},s?t[o.r][o.c]=a:t[i.ref]=a;var l=Sn(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=jr(l);c!==t["!ref"]&&(t["!ref"]=c)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var h=a.c.length-1;h>=0;--h){if(!r&&a.c[h].T)return;r&&!a.c[h].T&&a.c.splice(h,1)}if(r&&n){for(h=0;h<n.length;++h)if(d.a==n[h].id){d.a=n[h].name||d.a;break}}a.c.push(d)})}function aue(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Fr(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Us(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!h&&!!h[1]&&J4(h[1])||{r:"",t:"",h:""};c.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),c.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=p.h),n.push(c)}}}}),n}function IQ(t){var e=[ma,Mt("comments",null,{xmlns:m0[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(s){var a=Jn(s.a);r.indexOf(a)==-1&&(r.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(s=r.indexOf(Jn(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(Ei("t",Jn(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;e.push(Ei("t",Jn(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function iue(t,e){var r=[],n=!1,s={},a=0;return t.replace(oo,function(o,l){var c=Fr(o);switch(rA(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=t.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function oue(t,e,r){var n=[ma,Mt("ThreadedComments",null,{xmlns:za.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(Mt("threadedComment",Ei("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function lue(t,e){var r=[],n=!1;return t.replace(oo,function(a){var i=Fr(a);switch(rA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function cue(t){var e=[ma,Mt("personList",null,{xmlns:za.TCMNT,"xmlns:x":m0[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Mt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function uue(t){var e={};e.iauthor=t.read_shift(4);var r=y0(t);return e.rfx=r.s,e.ref=Nr(r.s),t.l+=16,e}function Aue(t,e){return e==null&&(e=ut(36)),e.write_shift(4,t[1].iauthor),Lm(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var due=no;function fue(t){return oi(t.slice(0,54))}function hue(t,e){var r=[],n=[],s={},a=!1;return ud(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}function pue(t){var e=Qo(),r=[];return Et(e,628),Et(e,630),t.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Et(e,632,fue(s.a)))})}),Et(e,631),Et(e,633),t.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:Us(n[0]),e:Us(n[0])};Et(e,635,Aue([a,s])),s.t&&s.t.length>0&&Et(e,637,Mae(s)),Et(e,636),delete s.iauthor})}),Et(e,634),Et(e,629),e.end()}var mue="application/vnd.ms-office.vbaProject";function gue(t){var e=Ar.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Ar.utils.cfb_add(e,s,t.FileIndex[n].content)}}),Ar.write(e)}function xue(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Ar.utils.cfb_add(t,s,e.FileIndex[n].content)}})}var FQ=["xlsb","xlsm","xlam","biff8","xla"];function vue(){return{"!type":"dialog"}}function yue(){return{"!type":"dialog"}}function wue(){return{"!type":"macro"}}function bue(){return{"!type":"macro"}}var $p=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var c=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?c+=e.r:--c,s+(o?"":"$")+Ls(d)+(l?"":"$")+pa(c)}return function(s,a){return e=a,s.replace(t,r)}}(),rB=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,nB=function(){return function(e,r){return e.replace(rB,function(n,s,a,i,o,l){var c=V4(i)-(a?0:r.c),d=H4(l)-(o?0:r.r),h=d==0?"":o?d+1:"["+d+"]",p=c==0?"":a?c+1:"["+c+"]";return s+"R"+h+"C"+p})}}();function DQ(t,e){return t.replace(rB,function(r,n,s,a,i,o){return n+(s=="$"?s+a:Ls(V4(a)+e.c))+(i=="$"?i+o:pa(H4(o)+e.r))})}function Cue(t,e,r){var n=Vo(e),s=n.s,a=Us(r),i={r:a.r-s.r,c:a.c-s.c};return DQ(t,i)}function Eue(t){return t.length!=1}function $D(t){return t.replace(/_xlfn\./g,"")}function _a(t){t.l+=1}function zf(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function RQ(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return LQ(t);r.biff==12&&(n=4)}var s=t.read_shift(n),a=t.read_shift(n),i=zf(t),o=zf(t);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function LQ(t){var e=zf(t),r=zf(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function _ue(t,e,r){if(r.biff<8)return LQ(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),a=zf(t),i=zf(t);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function UQ(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return Sue(t);var n=t.read_shift(r&&r.biff==12?4:2),s=zf(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Sue(t){var e=zf(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function Tue(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Nue(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Bue(t);var s=t.read_shift(n>=12?4:2),a=t.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function Bue(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function kue(t,e,r){var n=(t[t.l++]&96)>>5,s=RQ(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Iue(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var i=RQ(t,a,r);return[n,s,i]}function Fue(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Due(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[n,s]}function Rue(t,e,r){var n=(t[t.l++]&96)>>5,s=_ue(t,e-1,r);return[n,s]}function Lue(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function WD(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function Uue(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function Mue(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Pue(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Oue(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function jue(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function MQ(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function Que(t){return t.read_shift(2),MQ(t)}function Hue(t){return t.read_shift(2),MQ(t)}function Vue(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=UQ(t,0,r);return[n,s]}function zue(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=Nue(t,0,r);return[n,s]}function Gue(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var a=UQ(t,0,r);return[n,s,a]}function que(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[WAe[s],jQ[s],n]}function Kue(t,e,r){var n=t[t.l++],s=t.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:$ue(t);return[s,(a[0]===0?jQ:$Ae)[a[1]]]}function $ue(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Wue(t,e,r){t.l+=r&&r.biff==2?3:4}function Yue(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Xue(t){return t.l++,Ad[t.read_shift(1)]}function Jue(t){return t.l++,t.read_shift(2)}function Zue(t){return t.l++,t.read_shift(1)!==0}function eAe(t){return t.l++,to(t)}function tAe(t,e,r){return t.l++,q1(t,e-1,r)}function rAe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=la(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Ad[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=to(t);break;case 2:r[1]=w0(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function nAe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?y0:fC)(t));return s}function sAe(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=rAe(t,r.biff);return i}function aAe(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,a]}function iAe(t,e,r){if(r.biff==5)return oAe(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),a=t.read_shift(4);return[n,s,a]}function oAe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function lAe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function cAe(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function uAe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function AAe(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[n,s]}var dAe=ao,fAe=ao,hAe=ao;function $1(t,e,r){return t.l+=2,[Tue(t)]}function sB(t){return t.l+=6,[]}var pAe=$1,mAe=sB,gAe=sB,xAe=$1;function PQ(t){return t.l+=2,[Na(t),t.read_shift(2)&1]}var vAe=$1,yAe=PQ,wAe=sB,bAe=$1,CAe=$1,EAe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function _Ae(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),a=t.read_shift(2),i=EAe[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:s,C:a}}function SAe(t){return t.l+=2,[t.read_shift(4)]}function TAe(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function NAe(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function BAe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function kAe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function IAe(t){return t.l+=4,[0,0]}var YD={1:{n:"PtgExp",f:Yue},2:{n:"PtgTbl",f:hAe},3:{n:"PtgAdd",f:_a},4:{n:"PtgSub",f:_a},5:{n:"PtgMul",f:_a},6:{n:"PtgDiv",f:_a},7:{n:"PtgPower",f:_a},8:{n:"PtgConcat",f:_a},9:{n:"PtgLt",f:_a},10:{n:"PtgLe",f:_a},11:{n:"PtgEq",f:_a},12:{n:"PtgGe",f:_a},13:{n:"PtgGt",f:_a},14:{n:"PtgNe",f:_a},15:{n:"PtgIsect",f:_a},16:{n:"PtgUnion",f:_a},17:{n:"PtgRange",f:_a},18:{n:"PtgUplus",f:_a},19:{n:"PtgUminus",f:_a},20:{n:"PtgPercent",f:_a},21:{n:"PtgParen",f:_a},22:{n:"PtgMissArg",f:_a},23:{n:"PtgStr",f:tAe},26:{n:"PtgSheet",f:TAe},27:{n:"PtgEndSheet",f:NAe},28:{n:"PtgErr",f:Xue},29:{n:"PtgBool",f:Zue},30:{n:"PtgInt",f:Jue},31:{n:"PtgNum",f:eAe},32:{n:"PtgArray",f:Lue},33:{n:"PtgFunc",f:que},34:{n:"PtgFuncVar",f:Kue},35:{n:"PtgName",f:aAe},36:{n:"PtgRef",f:Vue},37:{n:"PtgArea",f:kue},38:{n:"PtgMemArea",f:lAe},39:{n:"PtgMemErr",f:dAe},40:{n:"PtgMemNoMem",f:fAe},41:{n:"PtgMemFunc",f:cAe},42:{n:"PtgRefErr",f:uAe},43:{n:"PtgAreaErr",f:Fue},44:{n:"PtgRefN",f:zue},45:{n:"PtgAreaN",f:Rue},46:{n:"PtgMemAreaN",f:BAe},47:{n:"PtgMemNoMemN",f:kAe},57:{n:"PtgNameX",f:iAe},58:{n:"PtgRef3d",f:Gue},59:{n:"PtgArea3d",f:Iue},60:{n:"PtgRefErr3d",f:AAe},61:{n:"PtgAreaErr3d",f:Due},255:{}},FAe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},DAe={1:{n:"PtgElfLel",f:PQ},2:{n:"PtgElfRw",f:bAe},3:{n:"PtgElfCol",f:pAe},6:{n:"PtgElfRwV",f:CAe},7:{n:"PtgElfColV",f:xAe},10:{n:"PtgElfRadical",f:vAe},11:{n:"PtgElfRadicalS",f:wAe},13:{n:"PtgElfColS",f:mAe},15:{n:"PtgElfColSV",f:gAe},16:{n:"PtgElfRadicalLel",f:yAe},25:{n:"PtgList",f:_Ae},29:{n:"PtgSxName",f:SAe},255:{}},RAe={0:{n:"PtgAttrNoop",f:IAe},1:{n:"PtgAttrSemi",f:jue},2:{n:"PtgAttrIf",f:Pue},4:{n:"PtgAttrChoose",f:Uue},8:{n:"PtgAttrGoto",f:Mue},16:{n:"PtgAttrSum",f:Wue},32:{n:"PtgAttrBaxcel",f:WD},33:{n:"PtgAttrBaxcel",f:WD},64:{n:"PtgAttrSpace",f:Que},65:{n:"PtgAttrSpaceSemi",f:Hue},128:{n:"PtgAttrIfError",f:Oue},255:{}};function W1(t,e,r,n){if(n.biff<8)return ao(t,e);for(var s=t.l+e,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=sAe(t,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=nAe(t,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=s-t.l,e!==0&&a.push(ao(t,e)),a}function Y1(t,e,r){for(var n=t.l+e,s,a,i=[];n!=t.l;)e=n-t.l,a=t[t.l],s=YD[a]||YD[FAe[a]],(a===24||a===25)&&(s=(a===24?DAe:RAe)[t[t.l+1]]),!s||!s.f?ao(t,e):i.push([s.n,s.f(t,e,r)]);return i}function LAe(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var UAe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function MAe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function OQ(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function XD(t,e,r){var n=OQ(t,e,r);return n=="#REF"?n:MAe(n,r)}function Wi(t,e,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,c,d,h=0,p=0,m,y="";if(!t[0]||!t[0][0])return"";for(var x=-1,E="",S=0,B=t[0].length;S<B;++S){var D=t[0][S];switch(D[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),x>=0){switch(t[0][x][1][0]){case 0:E=Ws(" ",t[0][x][1][1]);break;case 1:E=Ws("\r",t[0][x][1][1]);break;default:if(E="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}c=c+E,x=-1}o.push(c+UAe[D[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=bx(D[1][1],i,s),o.push(Cx(d,a));break;case"PtgRefN":d=r?bx(D[1][1],r,s):D[1][1],o.push(Cx(d,a));break;case"PtgRef3d":h=D[1][1],d=bx(D[1][2],i,s),y=XD(n,h,s),o.push(y+"!"+Cx(d,a));break;case"PtgFunc":case"PtgFuncVar":var I=D[1][0],U=D[1][1];I||(I=0),I&=127;var F=I==0?[]:o.slice(-I);o.length-=I,U==="User"&&(U=F.shift()),o.push(U+"("+F.join(",")+")");break;case"PtgBool":o.push(D[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(D[1]);break;case"PtgNum":o.push(String(D[1]));break;case"PtgStr":o.push('"'+D[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(D[1]);break;case"PtgAreaN":m=SD(D[1][1],r?{s:r}:i,s),o.push(G_(m,s));break;case"PtgArea":m=SD(D[1][1],i,s),o.push(G_(m,s));break;case"PtgArea3d":h=D[1][1],m=D[1][2],y=XD(n,h,s),o.push(y+"!"+G_(m,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=D[1][2];var C=(n.names||[])[p-1]||(n[0]||[])[p],_=C?C.Name:"SH33TJSNAME"+String(p);_&&_.slice(0,6)=="_xlfn."&&!s.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var N=D[1][1];p=D[1][2];var j;if(s.biff<=5)N<0&&(N=-N),n[N]&&(j=n[N][p]);else{var R="";if(((n[N]||[])[0]||[])[0]==14849||(((n[N]||[])[0]||[])[0]==1025?n[N][p]&&n[N][p].itab>0&&(R=n.SheetNames[n[N][p].itab-1]+"!"):R=n.SheetNames[p-1]+"!"),n[N]&&n[N][p])R+=n[N][p].Name;else if(n[0]&&n[0][p])R+=n[0][p].Name;else{var L=(OQ(n,N,s)||"").split(";;");L[p-1]?R=L[p-1]:R+="SH33TJSERRX"}o.push(R);break}j||(j={Name:"SH33TJSERRY"}),o.push(j.Name);break;case"PtgParen":var Q="(",H=")";if(x>=0){switch(E="",t[0][x][1][0]){case 2:Q=Ws(" ",t[0][x][1][1])+Q;break;case 3:Q=Ws("\r",t[0][x][1][1])+Q;break;case 4:H=Ws(" ",t[0][x][1][1])+H;break;case 5:H=Ws("\r",t[0][x][1][1])+H;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}x=-1}o.push(Q+o.pop()+H);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:D[1][1],r:D[1][0]};var te={c:r.c,r:r.r};if(n.sharedf[Nr(d)]){var Y=n.sharedf[Nr(d)];o.push(Wi(Y,i,te,n,s))}else{var re=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(d.c<c[0].s.c||d.c>c[0].e.c)&&!(d.r<c[0].s.r||d.r>c[0].e.r)){o.push(Wi(c[1],i,te,n,s)),re=!0;break}re||o.push(D[1])}break;case"PtgArray":o.push("{"+LAe(D[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=S;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+D[1].idx+"[#"+D[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(D));default:throw new Error("Unrecognized Formula Token: "+String(D))}var V=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&x>=0&&V.indexOf(t[0][S][0])==-1){D=t[0][x];var J=!0;switch(D[1][0]){case 4:J=!1;case 0:E=Ws(" ",D[1][1]);break;case 5:J=!1;case 1:E=Ws("\r",D[1][1]);break;default:if(E="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+D[1][0])}o.push((J?E:"")+o.pop()+(J?"":E)),x=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function PAe(t,e,r){var n=t.l+e,s=r.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],ao(t,e-2)];var o=Y1(t,i,r);return e!==i+s&&(a=W1(t,e-i-s,o,r)),t.l=n,[o,a]}function OAe(t,e,r){var n=t.l+e,s=r.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],ao(t,e-2)];var o=Y1(t,i,r);return e!==i+s&&(a=W1(t,e-i-s,o,r)),t.l=n,[o,a]}function jAe(t,e,r,n){var s=t.l+e,a=Y1(t,n,r),i;return s!==t.l&&(i=W1(t,s-t.l,a,r)),[a,i]}function QAe(t,e,r){var n=t.l+e,s,a=t.read_shift(2),i=Y1(t,a,r);return a==65535?[[],ao(t,e-2)]:(e!==a+2&&(s=W1(t,n-a-2,i,r)),[i,s])}function HAe(t){var e;if(VA(t,t.l+6)!==65535)return[to(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function VAe(t){if(t==null){var e=ut(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return s0(t);return s0(0)}function Y_(t,e,r){var n=t.l+e,s=nA(t);r.biff==2&&++t.l;var a=HAe(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=OAe(t,n-t.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function zAe(t,e,r,n,s){var a=i0(e,r,s),i=VAe(t.v),o=ut(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=ut(t.bf.length),d=0;d<t.bf.length;++d)c[d]=t.bf[d];var h=ii([a,i,o,c]);return h}function hC(t,e,r){var n=t.read_shift(4),s=Y1(t,n,r),a=t.read_shift(4),i=a>0?W1(t,a,s,r):null;return[s,i]}var GAe=hC,pC=hC,qAe=hC,KAe=hC,$Ae={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},jQ={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},WAe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function JD(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function YAe(t){var e="of:="+t.replace(rB,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function X_(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function XAe(t){return t.replace(/\./,"!")}var _x={},Wp={},Sx=typeof Map<"u";function aB(t,e,r){var n=0,s=t.length;if(r){if(Sx?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var a=Sx?r.get(e):r[e];n<a.length;++n)if(t[a[n]].t===e)return t.Count++,a[n]}}else for(;n<s;++n)if(t[n].t===e)return t.Count++,n;return t[s]={t:e},t.Count++,t.Unique++,r&&(Sx?(r.has(e)||r.set(e,[]),r.get(e).push(s)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(s))),s}function mC(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Ji=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=a1(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=Vw(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function zh(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Jf(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],s=60,a=t.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){KA(e.z,s),r.ssf[s]=e.z,r.revssf[e.z]=n=s;break}}for(s=0;s!=a;++s)if(t[s].numFmtId===n)return s;return t[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function QQ(t,e,r,n,s,a){try{n.cellNF&&(t.z=Er[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=vs(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Er[e]==null&&KA($se[e]||"General",e),t.t==="e")t.w=t.w||Ad[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Jx(t.v);else if(t.t==="d"){var i=qa(t.v);(i|0)===i?t.w=i.toString(10):t.w=Jx(i)}else{if(t.v===void 0)return"";t.w=r0(t.v,Wp)}else t.t==="d"?t.w=uc(e,qa(t.v),Wp):t.w=uc(e,t.v,Wp)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=a.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Hw(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Hw(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function JAe(t,e,r){if(t&&t["!ref"]){var n=Sn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function ZAe(t,e){var r=Sn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=jr(r))}var ede=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,tde=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,rde=/<(?:\w:)?hyperlink [^>]*>/mg,nde=/"(\w*:\w*)"/,sde=/<(?:\w:)?col\b[^>]*[\/]?>/g,ade=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,ide=/<(?:\w:)?pageMargins[^>]*\/>/g,HQ=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,ode=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,lde=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function cde(t,e,r,n,s,a,i){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",d="",h=t.match(tde);h?(c=t.slice(0,h.index),d=t.slice(h.index+h[0].length)):c=d=t;var p=c.match(HQ);p?iB(p[0],o,s,r):(p=c.match(ode))&&Ade(p[0],p[1]||"",o,s,r);var m=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var y=c.slice(m,m+50).match(nde);y&&ZAe(o,y[1])}var x=c.match(lde);x&&x[1]&&Ede(x[1],s);var E=[];if(e.cellStyles){var S=c.match(sde);S&&vde(E,S)}h&&Tde(h[1],o,e,l,a,i);var B=d.match(ade);B&&(o["!autofilter"]=wde(B[0]));var D=[],I=d.match(ede);if(I)for(m=0;m!=I.length;++m)D[m]=Sn(I[m].slice(I[m].indexOf('"')+1));var U=d.match(rde);U&&mde(o,U,n);var F=d.match(ide);if(F&&(o["!margins"]=gde(Fr(F[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=jr(l)),e.sheetRows>0&&o["!ref"]){var C=Sn(o["!ref"]);e.sheetRows<=+C.e.r&&(C.e.r=e.sheetRows-1,C.e.r>l.e.r&&(C.e.r=l.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>l.e.c&&(C.e.c=l.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),o["!fullref"]=o["!ref"],o["!ref"]=jr(C))}return E.length>0&&(o["!cols"]=E),D.length>0&&(o["!merges"]=D),o}function ude(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+jr(t[r])+'"/>';return e+"</mergeCells>"}function iB(t,e,r,n){var s=Fr(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=_n(os(s.codeName)))}function Ade(t,e,r,n,s){iB(t.slice(0,t.indexOf(">")),r,n,s)}function dde(t,e,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,i.codeName=Qu(Jn(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),o=(o||"")+Mt("outlinePr",null,c)}!a&&!o||(s[s.length]=Mt("sheetPr",o,i))}var fde=["objects","scenarios","selectLockedCells","selectUnlockedCells"],hde=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function pde(t){var e={sheet:1};return fde.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),hde.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=Z4(t.password).toString(16).toUpperCase()),Mt("sheetProtection",null,e)}function mde(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var a=Fr(os(e[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+_n(a.location))):(a.Target="#"+_n(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Sn(a.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var d=Nr({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=a):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=a)}}}function gde(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function xde(t){return zh(t),Mt("pageMargins",null,t)}function vde(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=Fr(e[n],!0);s.hidden&&(s.hidden=gs(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,eB(s.width)),Vf(s);a<=i;)t[a++]=ys(s)}}function yde(t,e){for(var r=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(r[r.length]=Mt("col",null,mC(s,n)));return r[r.length]="</cols>",r.join("")}function wde(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function bde(t,e,r,n){var s=typeof t.ref=="string"?t.ref:jr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=Vo(s);i.s.r==i.e.r&&(i.e.r=Vo(e["!ref"]).e.r,s=jr(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Mt("autoFilter",null,{ref:s})}var Cde=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Ede(t,e){e.Views||(e.Views=[{}]),(t.match(Cde)||[]).forEach(function(r,n){var s=Fr(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),gs(s.rightToLeft)&&(e.Views[n].RTL=!0)})}function _de(t,e,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Mt("sheetViews",Mt("sheetView",null,s),{})}function Sde(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",a=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=Ad[t.v];break;case"d":n&&n.cellDates?s=vs(t.v,-1).toISOString():(t=ys(t),t.t="n",s=""+(t.v=qa(vs(t.v)))),typeof t.z>"u"&&(t.z=Er[14]);break;default:s=t.v;break}var o=Ei("v",Jn(s)),l={r:e},c=Jf(n.cellXfs,t,n);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Ei("v",""+aB(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=a&&(t.t=a,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Mt("f",Jn(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Mt("c",o,l)}var Tde=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Zx("v"),i=Zx("f");return function(l,c,d,h,p,m){for(var y=0,x="",E=[],S=[],B=0,D=0,I=0,U="",F,C,_=0,N=0,j,R,L=0,Q=0,H=Array.isArray(m.CellXf),te,Y=[],re=[],V=Array.isArray(c),J=[],K={},ae=!1,O=!!d.sheetStubs,W=l.split(e),Z=0,ne=W.length;Z!=ne;++Z){x=W[Z].trim();var le=x.length;if(le!==0){var ve=0;e:for(y=0;y<le;++y)switch(x[y]){case">":if(x[y-1]!="/"){++y;break e}if(d&&d.cellStyles){if(C=Fr(x.slice(ve,y),!0),_=C.r!=null?parseInt(C.r,10):_+1,N=-1,d.sheetRows&&d.sheetRows<_)continue;K={},ae=!1,C.ht&&(ae=!0,K.hpt=parseFloat(C.ht),K.hpx=pm(K.hpt)),C.hidden=="1"&&(ae=!0,K.hidden=!0),C.outlineLevel!=null&&(ae=!0,K.level=+C.outlineLevel),ae&&(J[_-1]=K)}break;case"<":ve=y;break}if(ve>=y)break;if(C=Fr(x.slice(ve,y),!0),_=C.r!=null?parseInt(C.r,10):_+1,N=-1,!(d.sheetRows&&d.sheetRows<_)){h.s.r>_-1&&(h.s.r=_-1),h.e.r<_-1&&(h.e.r=_-1),d&&d.cellStyles&&(K={},ae=!1,C.ht&&(ae=!0,K.hpt=parseFloat(C.ht),K.hpx=pm(K.hpt)),C.hidden=="1"&&(ae=!0,K.hidden=!0),C.outlineLevel!=null&&(ae=!0,K.level=+C.outlineLevel),ae&&(J[_-1]=K)),E=x.slice(y).split(t);for(var pe=0;pe!=E.length&&E[pe].trim().charAt(0)=="<";++pe);for(E=E.slice(pe),y=0;y!=E.length;++y)if(x=E[y].trim(),x.length!==0){if(S=x.match(r),B=y,D=0,I=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,S!=null&&S.length===2){for(B=0,U=S[1],D=0;D!=U.length&&!((I=U.charCodeAt(D)-64)<1||I>26);++D)B=26*B+I;--B,N=B}else++N;for(D=0;D!=x.length&&x.charCodeAt(D)!==62;++D);if(++D,C=Fr(x.slice(0,D),!0),C.r||(C.r=Nr({r:_-1,c:N})),U=x.slice(D),F={t:""},(S=U.match(a))!=null&&S[1]!==""&&(F.v=_n(S[1])),d.cellFormula){if((S=U.match(i))!=null&&S[1]!==""){if(F.f=_n(os(S[1])).replace(/\r\n/g,`
`),d.xlfn||(F.f=$D(F.f)),S[0].indexOf('t="array"')>-1)F.F=(U.match(s)||[])[1],F.F.indexOf(":")>-1&&Y.push([Sn(F.F),F.F]);else if(S[0].indexOf('t="shared"')>-1){R=Fr(S[0]);var he=_n(os(S[1]));d.xlfn||(he=$D(he)),re[parseInt(R.si,10)]=[R,he,C.r]}}else(S=U.match(/<f[^>]*\/>/))&&(R=Fr(S[0]),re[R.si]&&(F.f=Cue(re[R.si][1],re[R.si][2],C.r)));var de=Us(C.r);for(D=0;D<Y.length;++D)de.r>=Y[D][0].s.r&&de.r<=Y[D][0].e.r&&de.c>=Y[D][0].s.c&&de.c<=Y[D][0].e.c&&(F.F=Y[D][1])}if(C.t==null&&F.v===void 0)if(F.f||F.F)F.v=0,F.t="n";else if(O)F.t="z";else continue;else F.t=C.t||"n";switch(h.s.c>N&&(h.s.c=N),h.e.c<N&&(h.e.c=N),F.t){case"n":if(F.v==""||F.v==null){if(!O)continue;F.t="z"}else F.v=parseFloat(F.v);break;case"s":if(typeof F.v>"u"){if(!O)continue;F.t="z"}else j=_x[parseInt(F.v,10)],F.v=j.t,F.r=j.r,d.cellHTML&&(F.h=j.h);break;case"str":F.t="s",F.v=F.v!=null?os(F.v):"",d.cellHTML&&(F.h=P4(F.v));break;case"inlineStr":S=U.match(n),F.t="s",S!=null&&(j=J4(S[1]))?(F.v=j.t,d.cellHTML&&(F.h=j.h)):F.v="";break;case"b":F.v=gs(F.v);break;case"d":d.cellDates?F.v=vs(F.v,1):(F.v=qa(vs(F.v,1)),F.t="n");break;case"e":(!d||d.cellText!==!1)&&(F.w=F.v),F.v=z7[F.v];break}if(L=Q=0,te=null,H&&C.s!==void 0&&(te=m.CellXf[C.s],te!=null&&(te.numFmtId!=null&&(L=te.numFmtId),d.cellStyles&&te.fillId!=null&&(Q=te.fillId))),QQ(F,L,Q,d,p,m),d.cellDates&&H&&F.t=="n"&&Fm(Er[L])&&(F.t="d",F.v=dC(F.v)),C.cm&&d.xlmeta){var ce=(d.xlmeta.Cell||[])[+C.cm-1];ce&&ce.type=="XLDAPR"&&(F.D=!0)}if(V){var oe=Us(C.r);c[oe.r]||(c[oe.r]=[]),c[oe.r][oe.c]=F}else c[C.r]=F}}}}J.length>0&&(c["!rows"]=J)}}();function Nde(t,e,r,n){var s=[],a=[],i=Sn(t["!ref"]),o="",l,c="",d=[],h=0,p=0,m=t["!rows"],y=Array.isArray(t),x={r:c},E,S=-1;for(p=i.s.c;p<=i.e.c;++p)d[p]=Ls(p);for(h=i.s.r;h<=i.e.r;++h){for(a=[],c=pa(h),p=i.s.c;p<=i.e.c;++p){l=d[p]+c;var B=y?(t[h]||[])[p]:t[l];B!==void 0&&(o=Sde(B,l,t,e))!=null&&a.push(o)}(a.length>0||m&&m[h])&&(x={r:c},m&&m[h]&&(E=m[h],E.hidden&&(x.hidden=1),S=-1,E.hpx?S=i1(E.hpx):E.hpt&&(S=E.hpt),S>-1&&(x.ht=S,x.customHeight=1),E.level&&(x.outlineLevel=E.level)),s[s.length]=Mt("row",a.join(""),x))}if(m)for(;h<m.length;++h)m&&m[h]&&(x={r:h+1},E=m[h],E.hidden&&(x.hidden=1),S=-1,E.hpx?S=i1(E.hpx):E.hpt&&(S=E.hpt),S>-1&&(x.ht=S,x.customHeight=1),E.level&&(x.outlineLevel=E.level),s[s.length]=Mt("row","",x));return s.join("")}function VQ(t,e,r,n){var s=[ma,Mt("worksheet",null,{xmlns:m0[0],"xmlns:r":za.r})],a=r.SheetNames[t],i=0,o="",l=r.Sheets[a];l==null&&(l={});var c=l["!ref"]||"A1",d=Sn(c);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=jr(d)}n||(n={}),l["!comments"]=[];var h=[];dde(l,r,t,e,s),s[s.length]=Mt("dimension",null,{ref:c}),s[s.length]=_de(l,e,t,r),e.sheetFormat&&(s[s.length]=Mt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=yde(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=Nde(l,e),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=pde(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=bde(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=ude(l["!merges"]));var p=-1,m,y=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(y=Yn(n,-1,Jn(x[1].Target).replace(/#.*$/,""),sn.HLINK),m["r:id"]="rId"+y),(p=x[1].Target.indexOf("#"))>-1&&(m.location=Jn(x[1].Target.slice(p+1))),x[1].Tooltip&&(m.tooltip=Jn(x[1].Tooltip)),s[s.length]=Mt("hyperlink",null,m))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=xde(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=Ei("ignoredErrors",Mt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(y=Yn(n,-1,"../drawings/drawing"+(t+1)+".xml",sn.DRAW),s[s.length]=Mt("drawing",null,{"r:id":"rId"+y}),l["!drawing"]=h),l["!comments"].length>0&&(y=Yn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",sn.VML),s[s.length]=Mt("legacyDrawing",null,{"r:id":"rId"+y}),l["!legacy"]=y),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Bde(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function kde(t,e,r){var n=ut(145),s=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var a=320;s.hpx?a=i1(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,p=-1,m=d<<10;m<d+1<<10;++m){c.c=m;var y=Array.isArray(r)?(r[c.r]||[])[c.c]:r[Nr(c)];y&&(h<0&&(h=m),p=m)}h<0||(++o,n.write_shift(4,h),n.write_shift(4,p))}var x=n.l;return n.l=l,n.write_shift(4,o),n.l=x,n.length>n.l?n.slice(0,n.l):n}function Ide(t,e,r,n){var s=kde(n,r,e);(s.length>17||(e["!rows"]||[])[n])&&Et(t,0,s)}var Fde=y0,Dde=Lm;function Rde(){}function Lde(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=Pae(t),r}function Ude(t,e,r){r==null&&(r=ut(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return Ow({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),O7(t,r),r.slice(0,r.l)}function Mde(t){var e=Ac(t);return[e]}function Pde(t,e,r){return r==null&&(r=ut(8)),g0(e,r)}function Ode(t){var e=x0(t);return[e]}function jde(t,e,r){return r==null&&(r=ut(4)),v0(e,r)}function Qde(t){var e=Ac(t),r=t.read_shift(1);return[e,r,"b"]}function Hde(t,e,r){return r==null&&(r=ut(9)),g0(e,r),r.write_shift(1,t.v?1:0),r}function Vde(t){var e=x0(t),r=t.read_shift(1);return[e,r,"b"]}function zde(t,e,r){return r==null&&(r=ut(5)),v0(e,r),r.write_shift(1,t.v?1:0),r}function Gde(t){var e=Ac(t),r=t.read_shift(1);return[e,r,"e"]}function qde(t,e,r){return r==null&&(r=ut(9)),g0(e,r),r.write_shift(1,t.v),r}function Kde(t){var e=x0(t),r=t.read_shift(1);return[e,r,"e"]}function $de(t,e,r){return r==null&&(r=ut(8)),v0(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function Wde(t){var e=Ac(t),r=t.read_shift(4);return[e,r,"s"]}function Yde(t,e,r){return r==null&&(r=ut(12)),g0(e,r),r.write_shift(4,e.v),r}function Xde(t){var e=x0(t),r=t.read_shift(4);return[e,r,"s"]}function Jde(t,e,r){return r==null&&(r=ut(8)),v0(e,r),r.write_shift(4,e.v),r}function Zde(t){var e=Ac(t),r=to(t);return[e,r,"n"]}function efe(t,e,r){return r==null&&(r=ut(16)),g0(e,r),s0(t.v,r),r}function zQ(t){var e=x0(t),r=to(t);return[e,r,"n"]}function tfe(t,e,r){return r==null&&(r=ut(12)),v0(e,r),s0(t.v,r),r}function rfe(t){var e=Ac(t),r=K4(t);return[e,r,"n"]}function nfe(t,e,r){return r==null&&(r=ut(12)),g0(e,r),j7(t.v,r),r}function sfe(t){var e=x0(t),r=K4(t);return[e,r,"n"]}function afe(t,e,r){return r==null&&(r=ut(8)),v0(e,r),j7(t.v,r),r}function ife(t){var e=Ac(t),r=z4(t);return[e,r,"is"]}function ofe(t){var e=Ac(t),r=no(t);return[e,r,"str"]}function lfe(t,e,r){return r==null&&(r=ut(12+4*t.v.length)),g0(e,r),oi(t.v,r),r.length>r.l?r.slice(0,r.l):r}function cfe(t){var e=x0(t),r=no(t);return[e,r,"str"]}function ufe(t,e,r){return r==null&&(r=ut(8+4*t.v.length)),v0(e,r),oi(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Afe(t,e,r){var n=t.l+e,s=Ac(t);s.r=r["!row"];var a=t.read_shift(1),i=[s,a,"b"];if(r.cellFormula){t.l+=2;var o=pC(t,n-t.l,r);i[3]=Wi(o,null,s,r.supbooks,r)}else t.l=n;return i}function dfe(t,e,r){var n=t.l+e,s=Ac(t);s.r=r["!row"];var a=t.read_shift(1),i=[s,a,"e"];if(r.cellFormula){t.l+=2;var o=pC(t,n-t.l,r);i[3]=Wi(o,null,s,r.supbooks,r)}else t.l=n;return i}function ffe(t,e,r){var n=t.l+e,s=Ac(t);s.r=r["!row"];var a=to(t),i=[s,a,"n"];if(r.cellFormula){t.l+=2;var o=pC(t,n-t.l,r);i[3]=Wi(o,null,s,r.supbooks,r)}else t.l=n;return i}function hfe(t,e,r){var n=t.l+e,s=Ac(t);s.r=r["!row"];var a=no(t),i=[s,a,"str"];if(r.cellFormula){t.l+=2;var o=pC(t,n-t.l,r);i[3]=Wi(o,null,s,r.supbooks,r)}else t.l=n;return i}var pfe=y0,mfe=Lm;function gfe(t,e){return e==null&&(e=ut(4)),e.write_shift(4,t),e}function xfe(t,e){var r=t.l+e,n=y0(t),s=G4(t),a=no(t),i=no(t),o=no(t);t.l=r;var l={rfx:n,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function vfe(t,e){var r=ut(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Lm({s:Us(t[0]),e:Us(t[0])},r),q4("rId"+e,r);var n=t[1].Target.indexOf("#"),s=n==-1?"":t[1].Target.slice(n+1);return oi(s||"",r),oi(t[1].Tooltip||"",r),oi("",r),r.slice(0,r.l)}function yfe(){}function wfe(t,e,r){var n=t.l+e,s=Q7(t),a=t.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=GAe(t,n-t.l,r);i[1]=o}else t.l=n;return i}function bfe(t,e,r){var n=t.l+e,s=y0(t),a=[s];if(r.cellFormula){var i=KAe(t,n-t.l,r);a[1]=i,t.l=n}else t.l=n;return a}function Cfe(t,e,r){r==null&&(r=ut(18));var n=mC(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),r.write_shift(2,s),r}var GQ=["left","right","top","bottom","header","footer"];function Efe(t){var e={};return GQ.forEach(function(r){e[r]=to(t)}),e}function _fe(t,e){return e==null&&(e=ut(48)),zh(t),GQ.forEach(function(r){s0(t[r],e)}),e}function Sfe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Tfe(t,e,r){r==null&&(r=ut(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Nfe(t){var e=ut(24);return e.write_shift(4,4),e.write_shift(4,1),Lm(t,e),e}function Bfe(t,e){return e==null&&(e=ut(66)),e.write_shift(2,t.password?Z4(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function kfe(){}function Ife(){}function Ffe(t,e,r,n,s,a,i){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,p=!1,m,y,x,E,S,B,D,I,U,F=[];o.biff=12,o["!row"]=0;var C=0,_=!1,N=[],j={},R=o.supbooks||s.supbooks||[[]];if(R.sharedf=j,R.arrayf=N,R.SheetNames=s.SheetNames||s.Sheets.map(function(V){return V.name}),!o.supbooks&&(o.supbooks=R,s.Names))for(var L=0;L<s.Names.length;++L)R[0][L+1]=s.Names[L];var Q=[],H=[],te=!1;o1[16]={n:"BrtShortReal",f:zQ};var Y;if(ud(t,function(J,K,ae){if(!p)switch(ae){case 148:c=J;break;case 0:m=J,o.sheetRows&&o.sheetRows<=m.r&&(p=!0),I=pa(E=m.r),o["!row"]=m.r,(J.hidden||J.hpt||J.level!=null)&&(J.hpt&&(J.hpx=pm(J.hpt)),H[J.r]=J);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(y={t:J[2]},J[2]){case"n":y.v=J[1];break;case"s":D=_x[J[1]],y.v=D.t,y.r=D.r;break;case"b":y.v=!!J[1];break;case"e":y.v=J[1],o.cellText!==!1&&(y.w=Ad[y.v]);break;case"str":y.t="s",y.v=J[1];break;case"is":y.t="s",y.v=J[1].t;break}if((x=i.CellXf[J[0].iStyleRef])&&QQ(y,x.numFmtId,null,o,a,i),S=J[0].c==-1?S+1:J[0].c,o.dense?(l[E]||(l[E]=[]),l[E][S]=y):l[Ls(S)+I]=y,o.cellFormula){for(_=!1,C=0;C<N.length;++C){var O=N[C];m.r>=O[0].s.r&&m.r<=O[0].e.r&&S>=O[0].s.c&&S<=O[0].e.c&&(y.F=jr(O[0]),_=!0)}!_&&J.length>3&&(y.f=J[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>S&&(d.s.c=S),d.e.r<m.r&&(d.e.r=m.r),d.e.c<S&&(d.e.c=S),o.cellDates&&x&&y.t=="n"&&Fm(Er[x.numFmtId])){var W=Dh(y.v);W&&(y.t="d",y.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}Y&&(Y.type=="XLDAPR"&&(y.D=!0),Y=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;y={t:"z",v:void 0},S=J[0].c==-1?S+1:J[0].c,o.dense?(l[E]||(l[E]=[]),l[E][S]=y):l[Ls(S)+I]=y,d.s.r>m.r&&(d.s.r=m.r),d.s.c>S&&(d.s.c=S),d.e.r<m.r&&(d.e.r=m.r),d.e.c<S&&(d.e.c=S),Y&&(Y.type=="XLDAPR"&&(y.D=!0),Y=void 0);break;case 176:F.push(J);break;case 49:Y=((o.xlmeta||{}).Cell||[])[J-1];break;case 494:var Z=n["!id"][J.relId];for(Z?(J.Target=Z.Target,J.loc&&(J.Target+="#"+J.loc),J.Rel=Z):J.relId==""&&(J.Target="#"+J.loc),E=J.rfx.s.r;E<=J.rfx.e.r;++E)for(S=J.rfx.s.c;S<=J.rfx.e.c;++S)o.dense?(l[E]||(l[E]=[]),l[E][S]||(l[E][S]={t:"z",v:void 0}),l[E][S].l=J):(B=Nr({c:S,r:E}),l[B]||(l[B]={t:"z",v:void 0}),l[B].l=J);break;case 426:if(!o.cellFormula)break;N.push(J),U=o.dense?l[E][S]:l[Ls(S)+I],U.f=Wi(J[1],d,{r:m.r,c:S},R,o),U.F=jr(J[0]);break;case 427:if(!o.cellFormula)break;j[Nr(J[0].s)]=J[1],U=o.dense?l[E][S]:l[Ls(S)+I],U.f=Wi(J[1],d,{r:m.r,c:S},R,o);break;case 60:if(!o.cellStyles)break;for(;J.e>=J.s;)Q[J.e--]={width:J.w/256,hidden:!!(J.flags&1),level:J.level},te||(te=!0,eB(J.w/256)),Vf(Q[J.e+1]);break;case 161:l["!autofilter"]={ref:jr(J)};break;case 476:l["!margins"]=J;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),J.name&&(s.Sheets[r].CodeName=J.name),(J.above||J.left)&&(l["!outline"]={above:J.above,left:J.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),J.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!K.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+ae.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=jr(c||d)),o.sheetRows&&l["!ref"]){var re=Sn(l["!ref"]);o.sheetRows<=+re.e.r&&(re.e.r=o.sheetRows-1,re.e.r>d.e.r&&(re.e.r=d.e.r),re.e.r<re.s.r&&(re.s.r=re.e.r),re.e.c>d.e.c&&(re.e.c=d.e.c),re.e.c<re.s.c&&(re.s.c=re.e.c),l["!fullref"]=l["!ref"],l["!ref"]=jr(re))}return F.length>0&&(l["!merges"]=F),Q.length>0&&(l["!cols"]=Q),H.length>0&&(l["!rows"]=H),l}function Dfe(t,e,r,n,s,a,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ys(e),e.z=e.z||Er[14],e.v=qa(vs(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=Jf(s.cellXfs,e,s),e.l&&a["!links"].push([Nr(l),e.l]),e.c&&a["!comments"].push([Nr(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=aB(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,i?Et(t,18,Jde(e,l)):Et(t,7,Yde(e,l))):(l.t="str",i?Et(t,17,ufe(e,l)):Et(t,6,lfe(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Et(t,13,afe(e,l)):Et(t,2,nfe(e,l)):i?Et(t,16,tfe(e,l)):Et(t,5,efe(e,l)),!0;case"b":return l.t="b",i?Et(t,15,zde(e,l)):Et(t,4,Hde(e,l)),!0;case"e":return l.t="e",i?Et(t,14,$de(e,l)):Et(t,3,qde(e,l)),!0}return i?Et(t,12,jde(e,l)):Et(t,1,Pde(e,l)),!0}function Rfe(t,e,r,n){var s=Sn(e["!ref"]||"A1"),a,i="",o=[];Et(t,145);var l=Array.isArray(e),c=s.e.r;e["!rows"]&&(c=Math.max(s.e.r,e["!rows"].length-1));for(var d=s.s.r;d<=c;++d){i=pa(d),Ide(t,e,s,d);var h=!1;if(d<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){d===s.s.r&&(o[p]=Ls(p)),a=o[p]+i;var m=l?(e[d]||[])[p]:e[a];if(!m){h=!1;continue}h=Dfe(t,m,d,p,n,e,h)}}Et(t,146)}function Lfe(t,e){!e||!e["!merges"]||(Et(t,177,gfe(e["!merges"].length)),e["!merges"].forEach(function(r){Et(t,176,mfe(r))}),Et(t,178))}function Ufe(t,e){!e||!e["!cols"]||(Et(t,390),e["!cols"].forEach(function(r,n){r&&Et(t,60,Cfe(n,r))}),Et(t,391))}function Mfe(t,e){!e||!e["!ref"]||(Et(t,648),Et(t,649,Nfe(Sn(e["!ref"]))),Et(t,650))}function Pfe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var s=Yn(r,-1,n[1].Target.replace(/#.*$/,""),sn.HLINK);Et(t,494,vfe(n,s))}}),delete e["!links"]}function Ofe(t,e,r,n){if(e["!comments"].length>0){var s=Yn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",sn.VML);Et(t,551,q4("rId"+s)),e["!legacy"]=s}}function jfe(t,e,r,n){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:jr(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Vo(a);o.s.r==o.e.r&&(o.e.r=Vo(e["!ref"]).e.r,a=jr(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Et(t,161,Lm(Sn(a))),Et(t,162)}}function Qfe(t,e,r){Et(t,133),Et(t,137,Tfe(e,r)),Et(t,138),Et(t,134)}function Hfe(t,e){e["!protect"]&&Et(t,535,Bfe(e["!protect"]))}function Vfe(t,e,r,n){var s=Qo(),a=r.SheetNames[t],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=Sn(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Et(s,129),(r.vbaraw||i["!outline"])&&Et(s,147,Ude(o,i["!outline"])),Et(s,148,Dde(l)),Qfe(s,i,r.Workbook),Ufe(s,i),Rfe(s,i,t,e),Hfe(s,i),jfe(s,i,r,t),Lfe(s,i),Pfe(s,i,n),i["!margins"]&&Et(s,476,_fe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Mfe(s,i),Ofe(s,i,t,n),Et(s,130),s.end()}function zfe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var s=_n((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[e,s,n]}function Gfe(t,e,r,n,s,a){var i=a||{"!type":"chart"};if(!t)return a;var o=0,l=0,c="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var p=zfe(h);d.s.r=d.s.c=0,d.e.c=o,c=Ls(o),p[0].forEach(function(m,y){i[c+pa(y)]={t:"n",v:m,z:p[1]},l=y}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=jr(d)),i}function qfe(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(HQ);return o&&iB(o[0],a,s,r),(i=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function Kfe(t,e){t.l+=10;var r=no(t);return{name:r}}function $fe(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return ud(t,function(l,c,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var oB=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Wfe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Yfe=[],Xfe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function ZD(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var a=e[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=gs(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function eR(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=gs(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function qQ(t){eR(t.WBProps,oB),eR(t.CalcPr,Xfe),ZD(t.WBView,Wfe),ZD(t.Sheets,Yfe),Wp.date1904=gs(t.WBProps.date1904)}function Jfe(t){return!t.Workbook||!t.Workbook.WBProps?"false":gs(t.Workbook.WBProps.date1904)?"true":"false"}var Zfe="][*?/\\".split("");function KQ(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Zfe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function ehe(t,e,r){t.forEach(function(n,s){KQ(n);for(var a=0;a<s;++a)if(n==t[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[s]&&e[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function the(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];ehe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)JAe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var rhe=/<\w+:workbook/;function nhe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(t.replace(oo,function(l,c){var d=Fr(l);switch(rA(d[0])){case"<?xml":break;case"<workbook":l.match(rhe)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":oB.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=gs(d[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:r.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(r.WBProps.CodeName=os(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=_n(os(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=os(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),gs(d.hidden||"0")&&(a.Hidden=!0),i=c+l.length;break;case"</definedName>":a.Ref=_n(os(t.slice(i,c))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),m0.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return qQ(r),r}function $Q(t){var e=[ma];e[e.length]=Mt("workbook",null,{xmlns:m0[0],"xmlns:r":za.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(oB.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Mt("workbookPr",null,n);var s=t.Workbook&&t.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var i={name:Jn(t.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Mt("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Mt("definedName",Jn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function she(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=q5(t),r.name=no(t),r}function ahe(t,e){return e||(e=ut(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),q4(t.strRelID,e),oi(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function ihe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?no(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function ohe(t,e){e||(e=ut(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),O7(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function lhe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function che(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),a=Oae(t),i=qAe(t,0,r),o=G4(t);t.l=n;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function uhe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],o1[16]={n:"BrtFRTArchID$",f:lhe},ud(t,function(l,c,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Wi(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),qQ(r),r.Names=a,r.supbooks=i,r}function Ahe(t,e){Et(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Et(t,156,ahe(s))}Et(t,144)}function dhe(t,e){e||(e=ut(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return oi("SheetJS",e),oi(Fw.version,e),oi(Fw.version,e),oi("7262",e),e.length>e.l?e.slice(0,e.l):e}function fhe(t,e){e||(e=ut(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function hhe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(Et(t,135),Et(t,158,fhe(s)),Et(t,136))}}function phe(t,e){var r=Qo();return Et(r,131),Et(r,128,dhe()),Et(r,153,ohe(t.Workbook&&t.Workbook.WBProps||null)),hhe(r,t),Ahe(r,t),Et(r,132),r.end()}function mhe(t,e,r){return e.slice(-4)===".bin"?uhe(t,r):nhe(t,r)}function ghe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?Ffe(t,n,r,s,a,i,o):cde(t,n,r,s,a,i,o)}function xhe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?$fe(t,n,r,s,a):qfe(t,n,r,s,a)}function vhe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?wue():bue()}function yhe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?vue():yue()}function whe(t,e,r,n){return e.slice(-4)===".bin"?mce(t,r,n):sce(t,r,n)}function bhe(t,e,r){return NQ(t,r)}function Che(t,e,r){return e.slice(-4)===".bin"?Cle(t,r):yle(t,r)}function Ehe(t,e,r){return e.slice(-4)===".bin"?hue(t,r):aue(t,r)}function _he(t,e,r){return e.slice(-4)===".bin"?rue(t):eue(t)}function She(t,e,r,n){return r.slice(-4)===".bin"?nue(t,e,r,n):void 0}function The(t,e,r){return e.slice(-4)===".bin"?Xce(t,e,r):Zce(t,e,r)}function Nhe(t,e,r){return(e.slice(-4)===".bin"?phe:$Q)(t)}function Bhe(t,e,r,n,s){return(e.slice(-4)===".bin"?Vfe:VQ)(t,r,n,s)}function khe(t,e,r){return(e.slice(-4)===".bin"?Sce:SQ)(t,r)}function Ihe(t,e,r){return(e.slice(-4)===".bin"?Sle:xQ)(t,r)}function Fhe(t,e,r){return(e.slice(-4)===".bin"?pue:IQ)(t)}function Dhe(t){return(t.slice(-4)===".bin"?Jce:BQ)()}var WQ=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,YQ=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Mc(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(WQ),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(YQ),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function Rhe(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(WQ),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(YQ),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var Tx;function Lhe(t,e){var r=Tx[t]||_n(t);return r==="General"?r0(e):uc(r,e)}function Uhe(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=gs(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=vs(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[_n(e)]=s}function Mhe(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||Ad[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Jx(t.v):t.w=r0(t.v):t.w=Lhe(e||"General",t.v)}catch(a){if(r.WTF)throw a}try{var n=Tx[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Fm(n)){var s=Dh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function Phe(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Yle[n.Pattern]||n.Pattern)}t[e.ID]=e}function Ohe(t,e,r,n,s,a,i,o,l,c){var d="General",h=n.StyleID,p={};c=c||{};var m=[],y=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);a[h]!==void 0&&(a[h].nf&&(d=a[h].nf),a[h].Interior&&m.push(a[h].Interior),!!a[h].Parent);)h=a[h].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=gs(t);break;case"String":n.t="s",n.r=gD(_n(t)),n.v=t.indexOf("<")>-1?_n(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(vs(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=_n(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=z7[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=gD(e||t));break}if(Mhe(n,d,c),c.cellFormula!==!1)if(n.Formula){var x=_n(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=$p(x,s),delete n.Formula,n.ArrayRange=="RC"?n.F=$p("RC:RC",s):n.ArrayRange&&(n.F=$p(n.ArrayRange,s),l.push([Sn(n.F),n.F]))}else for(y=0;y<l.length;++y)s.r>=l[y][0].s.r&&s.r<=l[y][0].e.r&&s.c>=l[y][0].s.c&&s.c<=l[y][0].e.c&&(n.F=l[y][1]);c.cellStyles&&(m.forEach(function(E){!p.patternType&&E.patternType&&(p.patternType=E.patternType)}),n.s=p),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function jhe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function J_(t,e){var r=e||{};Dm();var n=Jg(O4(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=os(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=ys(r);return i.type="string",hm.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(je){s.indexOf("<"+je)>=0&&(a=!0)}),a)return _0e(n,r);Tx={"General Number":"General","General Date":Er[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Er[15],"Short Date":Er[14],"Long Time":Er[19],"Medium Time":Er[18],"Short Time":Er[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Er[2],Standard:Er[4],Percent:Er[10],Scientific:Er[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,d={},h=[],p=r.dense?[]:{},m="",y={},x={},E=Mc('<Data ss:Type="String">'),S=0,B=0,D=0,I={s:{r:2e6,c:2e6},e:{r:0,c:0}},U={},F={},C="",_=0,N=[],j={},R={},L=0,Q=[],H=[],te={},Y=[],re,V=!1,J=[],K=[],ae={},O=0,W=0,Z={Sheets:[],WBProps:{date1904:!1}},ne={};t1.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var le="";o=t1.exec(n);)switch(o[3]=(le=o[3]).toLowerCase()){case"data":if(le=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Ohe(n.slice(S,o.index),C,E,l[l.length-1][0]=="comment"?te:y,{c:B,r:D},U,Y[B],x,J,r):(C="",E=Mc(o[0]),S=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(H.length>0&&(y.c=H),(!r.sheetRows||r.sheetRows>D)&&y.v!==void 0&&(r.dense?(p[D]||(p[D]=[]),p[D][B]=y):p[Ls(B)+pa(D)]=y),y.HRef&&(y.l={Target:_n(y.HRef)},y.HRefScreenTip&&(y.l.Tooltip=y.HRefScreenTip),delete y.HRef,delete y.HRefScreenTip),(y.MergeAcross||y.MergeDown)&&(O=B+(parseInt(y.MergeAcross,10)|0),W=D+(parseInt(y.MergeDown,10)|0),N.push({s:{c:B,r:D},e:{c:O,r:W}})),!r.sheetStubs)y.MergeAcross?B=O+1:++B;else if(y.MergeAcross||y.MergeDown){for(var ve=B;ve<=O;++ve)for(var pe=D;pe<=W;++pe)(ve>B||pe>D)&&(r.dense?(p[pe]||(p[pe]=[]),p[pe][ve]={t:"z"}):p[Ls(ve)+pa(pe)]={t:"z"});B=O+1}else++B;else y=Rhe(o[0]),y.Index&&(B=+y.Index-1),B<I.s.c&&(I.s.c=B),B>I.e.c&&(I.e.c=B),o[0].slice(-2)==="/>"&&++B,H=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(D<I.s.r&&(I.s.r=D),D>I.e.r&&(I.e.r=D),o[0].slice(-2)==="/>"&&(x=Mc(o[0]),x.Index&&(D=+x.Index-1)),B=0,++D):(x=Mc(o[0]),x.Index&&(D=+x.Index-1),ae={},(x.AutoFitHeight=="0"||x.Height)&&(ae.hpx=parseInt(x.Height,10),ae.hpt=i1(ae.hpx),K[D]=ae),x.Hidden=="1"&&(ae.hidden=!0,K[D]=ae));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));h.push(m),I.s.r<=I.e.r&&I.s.c<=I.e.c&&(p["!ref"]=jr(I),r.sheetRows&&r.sheetRows<=I.e.r&&(p["!fullref"]=p["!ref"],I.e.r=r.sheetRows-1,p["!ref"]=jr(I))),N.length&&(p["!merges"]=N),Y.length>0&&(p["!cols"]=Y),K.length>0&&(p["!rows"]=K),d[m]=p}else I={s:{r:2e6,c:2e6},e:{r:0,c:0}},D=B=0,l.push([o[3],!1]),c=Mc(o[0]),m=_n(c.Name),p=r.dense?[]:{},N=[],J=[],K=[],ne={name:m,Hidden:0},Z.Sheets.push(ne);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),Y=[],V=!1}break;case"style":o[1]==="/"?Phe(U,F,r):F=Mc(o[0]);break;case"numberformat":F.nf=_n(Mc(o[0]).Format||"General"),Tx[F.nf]&&(F.nf=Tx[F.nf]);for(var he=0;he!=392&&Er[he]!=F.nf;++he);if(he==392){for(he=57;he!=392;++he)if(Er[he]==null){KA(F.nf,he);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(re=Mc(o[0]),re.Hidden&&(re.hidden=!0,delete re.Hidden),re.Width&&(re.wpx=parseInt(re.Width,10)),!V&&re.wpx>10){V=!0,Ji=EQ;for(var de=0;de<Y.length;++de)Y[de]&&Vf(Y[de])}V&&Vf(re),Y[re.Index-1||Y.length]=re;for(var ce=0;ce<+re.Span;++ce)Y[Y.length]=ys(re);break;case"namedrange":if(o[1]==="/")break;Z.Names||(Z.Names=[]);var oe=Fr(o[0]),Re={Name:oe.Name,Ref:$p(oe.RefersTo.slice(1),{r:0,c:0})};Z.Sheets.length>0&&(Re.Sheet=Z.Sheets.length-1),Z.Names.push(Re);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?C+=n.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;F.Interior=Mc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?uie(j,le,n.slice(L,o.index)):L=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));jhe(te),H.push(te)}else l.push([o[3],!1]),c=Mc(o[0]),te={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var qe=Mc(o[0]);p["!autofilter"]={ref:$p(qe.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return aR(n,r);var Ie=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ie=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ie=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ie=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Ie=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(L,o.index)){case"SheetHidden":ne.Hidden=1;break;case"SheetVeryHidden":ne.Hidden=2;break}else L=o.index+o[0].length;break;case"header":p["!margins"]||zh(p["!margins"]={},"xlml"),isNaN(+Fr(o[0]).Margin)||(p["!margins"].header=+Fr(o[0]).Margin);break;case"footer":p["!margins"]||zh(p["!margins"]={},"xlml"),isNaN(+Fr(o[0]).Margin)||(p["!margins"].footer=+Fr(o[0]).Margin);break;case"pagemargins":var Ee=Fr(o[0]);p["!margins"]||zh(p["!margins"]={},"xlml"),isNaN(+Ee.Top)||(p["!margins"].top=+Ee.Top),isNaN(+Ee.Left)||(p["!margins"].left=+Ee.Left),isNaN(+Ee.Right)||(p["!margins"].right=+Ee.Right),isNaN(+Ee.Bottom)||(p["!margins"].bottom=+Ee.Bottom);break;case"displayrighttoleft":Z.Views||(Z.Views=[]),Z.Views[0]||(Z.Views[0]={}),Z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ie=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ie=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ie=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ie=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ie=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ie=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ie=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ie=!1}break;case"smarttags":break;default:Ie=!1;break}if(Ie||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Uhe(R,le,Q,n.slice(L,o.index)):(Q=o,L=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var De={};return!r.bookSheets&&!r.bookProps&&(De.Sheets=d),De.SheetNames=h,De.Workbook=Z,De.SSF=ys(Er),De.Props=j,De.Custprops=R,De}function Z5(t,e){switch(cB(e=e||{}),e.type||"base64"){case"base64":return J_(wl(t),e);case"binary":case"buffer":case"file":return J_(t,e);case"array":return J_(Yf(t),e)}}function Qhe(t,e){var r=[];return t.Props&&r.push(Aie(t.Props,e)),t.Custprops&&r.push(die(t.Props,t.Custprops)),r.join("")}function Hhe(){return""}function Vhe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var a=[];a.push(Mt("NumberFormat",null,{"ss:Format":Jn(Er[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(Mt("Style",a.join(""),i))}),Mt("Styles",r.join(""))}function XQ(t){return Mt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+nB(t.Ref,{r:0,c:0})})}function zhe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(XQ(s)))}return Mt("Names",r.join(""))}function Ghe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(XQ(o)))}return a.join("")}function qhe(t,e,r,n){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(Mt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(Mt("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(Mt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(Mt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(Ei("ProtectContents","True")),t["!protect"].objects&&s.push(Ei("ProtectObjects","True")),t["!protect"].scenarios&&s.push(Ei("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(Ei("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(Ei("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":Mt("WorksheetOptions",s.join(""),{xmlns:dl.x})}function Khe(t){return t.map(function(e){var r=hae(e.t||""),n=Mt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Mt("Comment",n,{"ss:Author":e.a})}).join("")}function $he(t,e,r,n,s,a,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Jn(nB(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=Us(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Jn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Jn(t.l.Tooltip))),r["!merges"])for(var c=r["!merges"],d=0;d!=c.length;++d)c[d].s.c!=i.c||c[d].s.r!=i.r||(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var h="",p="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",p=String(t.v);break;case"b":h="Boolean",p=t.v?"1":"0";break;case"e":h="Error",p=Ad[t.v];break;case"d":h="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Er[14]);break;case"s":h="String",p=fae(t.v||"");break}var m=Jf(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=i.c+1;var y=t.v!=null?p:"",x=t.t=="z"?"":'<Data ss:Type="'+h+'">'+y+"</Data>";return(t.c||[]).length>0&&(x+=Khe(t.c)),Mt("Cell",x,o)}function Whe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=pm(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Yhe(t,e,r,n){if(!t["!ref"])return"";var s=Sn(t["!ref"]),a=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(E,S){Vf(E);var B=!!E.width,D=mC(S,E),I={"ss:Index":S+1};B&&(I["ss:Width"]=s1(D.width)),E.hidden&&(I["ss:Hidden"]="1"),o.push(Mt("Column",null,I))});for(var l=Array.isArray(t),c=s.s.r;c<=s.e.r;++c){for(var d=[Whe(c,(t["!rows"]||[])[c])],h=s.s.c;h<=s.e.c;++h){var p=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>h)&&!(a[i].s.r>c)&&!(a[i].e.c<h)&&!(a[i].e.r<c)){(a[i].s.c!=h||a[i].s.r!=c)&&(p=!0);break}if(!p){var m={r:c,c:h},y=Nr(m),x=l?(t[c]||[])[h]:t[y];d.push($he(x,y,t,e,r,n,m))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Xhe(t,e,r){var n=[],s=r.SheetNames[t],a=r.Sheets[s],i=a?Ghe(a,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?Yhe(a,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(qhe(a,e,t,r)),n.join("")}function Jhe(t,e){e||(e={}),t.SSF||(t.SSF=ys(Er)),t.SSF&&(Dm(),cC(t.SSF),e.revssf=AC(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Jf(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Qhe(t,e)),r.push(Hhe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Mt("Worksheet",Xhe(n,e,t),{"ss:Name":Jn(t.SheetNames[n])}));return r[2]=Vhe(t,e),r[3]=zhe(t),ma+Mt("Workbook",r.join(""),{xmlns:dl.ss,"xmlns:o":dl.o,"xmlns:x":dl.x,"xmlns:ss":dl.ss,"xmlns:dt":dl.dt,"xmlns:html":dl.html})}function Zhe(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=zae(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=Gae(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var e0e=[60,1084,2066,2165,2175];function t0e(t,e,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var l=VA(r,r.l),c=eT[l],d=0;c!=null&&e0e.indexOf(l)>-1;)a=VA(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,c=eT[l=VA(r,r.l)];var h=ii(i);bi(h,0);var p=0;h.lens=[];for(var m=0;m<i.length;++m)h.lens.push(p),p+=i[m].length;if(h.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+n;return e.f(h,h.length,s)}function ku(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Er[n])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||Ad[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Jx(t.v):t.w=r0(t.v):t.w=uc(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&n&&t.t=="n"&&Fm(Er[n]||String(n))){var s=Dh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Sy(t,e,r){return{v:t,ixfe:e,t:r}}function r0e(t,e){var r={opts:{}},n={},s=e.dense?[]:{},a={},i={},o=null,l=[],c="",d={},h,p="",m,y,x,E,S={},B=[],D,I,U=[],F=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},N=function(It){return It<8?Qh[It]:It<64&&F[It-8]||Qh[It]},j=function(It,mt,_r){var Jt=mt.XF.data;if(!(!Jt||!Jt.patternType||!_r||!_r.cellStyles)){mt.s={},mt.s.patternType=Jt.patternType;var mn;(mn=n1(N(Jt.icvFore)))&&(mt.s.fgColor={rgb:mn}),(mn=n1(N(Jt.icvBack)))&&(mt.s.bgColor={rgb:mn})}},R=function(It,mt,_r){if(!(ae>1)&&!(_r.sheetRows&&It.r>=_r.sheetRows)){if(_r.cellStyles&&mt.XF&&mt.XF.data&&j(It,mt,_r),delete mt.ixfe,delete mt.XF,h=It,p=Nr(It),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),It.r<i.s.r&&(i.s.r=It.r),It.c<i.s.c&&(i.s.c=It.c),It.r+1>i.e.r&&(i.e.r=It.r+1),It.c+1>i.e.c&&(i.e.c=It.c+1),_r.cellFormula&&mt.f){for(var Jt=0;Jt<B.length;++Jt)if(!(B[Jt][0].s.c>It.c||B[Jt][0].s.r>It.r)&&!(B[Jt][0].e.c<It.c||B[Jt][0].e.r<It.r)){mt.F=jr(B[Jt][0]),(B[Jt][0].s.c!=It.c||B[Jt][0].s.r!=It.r)&&delete mt.f,mt.f&&(mt.f=""+Wi(B[Jt][1],i,It,J,L));break}}_r.dense?(s[It.r]||(s[It.r]=[]),s[It.r][It.c]=mt):s[p]=mt}},L={enc:!1,sbcch:0,snames:[],sharedf:S,arrayf:B,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(L.password=e.password);var Q,H=[],te=[],Y=[],re=[],V=!1,J=[];J.SheetNames=L.snames,J.sharedf=L.sharedf,J.arrayf=L.arrayf,J.names=[],J.XTI=[];var K=0,ae=0,O=0,W=[],Z=[],ne;L.codepage=1200,Hc(1200);for(var le=!1;t.l<t.length-1;){var ve=t.l,pe=t.read_shift(2);if(pe===0&&K===10)break;var he=t.l===t.length?0:t.read_shift(2),de=eT[pe];if(de&&de.f){if(e.bookSheets&&K===133&&pe!==133)break;if(K=pe,de.r===2||de.r==12){var ce=t.read_shift(2);if(he-=2,!L.enc&&ce!==pe&&((ce&255)<<8|ce>>8)!==pe)throw new Error("rt mismatch: "+ce+"!="+pe);de.r==12&&(t.l+=10,he-=10)}var oe={};if(pe===10?oe=de.f(t,he,L):oe=t0e(pe,de,t,he,L),ae==0&&[9,521,1033,2057].indexOf(K)===-1)continue;switch(pe){case 34:r.opts.Date1904=C.WBProps.date1904=oe;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(L.enc||(t.l=0),L.enc=oe,!e.password)throw new Error("File is password-protected");if(oe.valid==null)throw new Error("Encryption scheme unsupported");if(!oe.valid)throw new Error("Password is incorrect");break;case 92:L.lastuser=oe;break;case 66:var Re=Number(oe);switch(Re){case 21010:Re=1200;break;case 32768:Re=1e4;break;case 32769:Re=1252;break}Hc(L.codepage=Re),le=!0;break;case 317:L.rrtabid=oe;break;case 25:L.winlocked=oe;break;case 439:r.opts.RefreshAll=oe;break;case 12:r.opts.CalcCount=oe;break;case 16:r.opts.CalcDelta=oe;break;case 17:r.opts.CalcIter=oe;break;case 13:r.opts.CalcMode=oe;break;case 14:r.opts.CalcPrecision=oe;break;case 95:r.opts.CalcSaveRecalc=oe;break;case 15:L.CalcRefMode=oe;break;case 2211:r.opts.FullCalc=oe;break;case 129:oe.fDialog&&(s["!type"]="dialog"),oe.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),oe.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:U.push(oe);break;case 430:J.push([oe]),J[J.length-1].XTI=[];break;case 35:case 547:J[J.length-1].push(oe);break;case 24:case 536:ne={Name:oe.Name,Ref:Wi(oe.rgce,i,null,J,L)},oe.itab>0&&(ne.Sheet=oe.itab-1),J.names.push(ne),J[0]||(J[0]=[],J[0].XTI=[]),J[J.length-1].push(oe),oe.Name=="_xlnm._FilterDatabase"&&oe.itab>0&&oe.rgce&&oe.rgce[0]&&oe.rgce[0][0]&&oe.rgce[0][0][0]=="PtgArea3d"&&(Z[oe.itab-1]={ref:jr(oe.rgce[0][0][1][2])});break;case 22:L.ExternCount=oe;break;case 23:J.length==0&&(J[0]=[],J[0].XTI=[]),J[J.length-1].XTI=J[J.length-1].XTI.concat(oe),J.XTI=J.XTI.concat(oe);break;case 2196:if(L.biff<8)break;ne!=null&&(ne.Comment=oe[1]);break;case 18:s["!protect"]=oe;break;case 19:oe!==0&&L.WTF&&console.error("Password verifier: "+oe);break;case 133:a[oe.pos]=oe,L.snames.push(oe.name);break;case 10:{if(--ae)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=jr(i),e.sheetRows&&e.sheetRows<=i.e.r){var qe=i.e.r;i.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=jr(i),i.e.r=qe}i.e.r++,i.e.c++}H.length>0&&(s["!merges"]=H),te.length>0&&(s["!objects"]=te),Y.length>0&&(s["!cols"]=Y),re.length>0&&(s["!rows"]=re),C.Sheets.push(_)}c===""?d=s:n[c]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(L.biff===8&&(L.biff={9:2,521:3,1033:4}[pe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[oe.BIFFVer]||8),L.biffguess=oe.BIFFVer==0,oe.BIFFVer==0&&oe.dt==4096&&(L.biff=5,le=!0,Hc(L.codepage=28591)),L.biff==8&&oe.BIFFVer==0&&oe.dt==16&&(L.biff=2),ae++)break;if(s=e.dense?[]:{},L.biff<8&&!le&&(le=!0,Hc(L.codepage=e.codepage||1252)),L.biff<5||oe.BIFFVer==0&&oe.dt==4096){c===""&&(c="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Ie={pos:t.l-he,name:c};a[Ie.pos]=Ie,L.snames.push(c)}else c=(a[ve]||{name:""}).name;oe.dt==32&&(s["!type"]="chart"),oe.dt==64&&(s["!type"]="macro"),H=[],te=[],L.arrayf=B=[],Y=[],re=[],V=!1,_={Hidden:(a[ve]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[oe.r]||[])[oe.c]:s[Nr({c:oe.c,r:oe.r})])&&++oe.c,D={ixfe:oe.ixfe,XF:U[oe.ixfe]||{},v:oe.val,t:"n"},O>0&&(D.z=W[D.ixfe>>8&63]),ku(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e);break;case 5:case 517:D={ixfe:oe.ixfe,XF:U[oe.ixfe],v:oe.val,t:oe.t},O>0&&(D.z=W[D.ixfe>>8&63]),ku(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e);break;case 638:D={ixfe:oe.ixfe,XF:U[oe.ixfe],v:oe.rknum,t:"n"},O>0&&(D.z=W[D.ixfe>>8&63]),ku(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e);break;case 189:for(var Ee=oe.c;Ee<=oe.C;++Ee){var De=oe.rkrec[Ee-oe.c][0];D={ixfe:De,XF:U[De],v:oe.rkrec[Ee-oe.c][1],t:"n"},O>0&&(D.z=W[D.ixfe>>8&63]),ku(D,e,r.opts.Date1904),R({c:Ee,r:oe.r},D,e)}break;case 6:case 518:case 1030:{if(oe.val=="String"){o=oe;break}if(D=Sy(oe.val,oe.cell.ixfe,oe.tt),D.XF=U[D.ixfe],e.cellFormula){var je=oe.formula;if(je&&je[0]&&je[0][0]&&je[0][0][0]=="PtgExp"){var We=je[0][0][1][0],ct=je[0][0][1][1],wt=Nr({r:We,c:ct});S[wt]?D.f=""+Wi(oe.formula,i,oe.cell,J,L):D.F=((e.dense?(s[We]||[])[ct]:s[wt])||{}).F}else D.f=""+Wi(oe.formula,i,oe.cell,J,L)}O>0&&(D.z=W[D.ixfe>>8&63]),ku(D,e,r.opts.Date1904),R(oe.cell,D,e),o=oe}break;case 7:case 519:if(o)o.val=oe,D=Sy(oe,o.cell.ixfe,"s"),D.XF=U[D.ixfe],e.cellFormula&&(D.f=""+Wi(o.formula,i,o.cell,J,L)),O>0&&(D.z=W[D.ixfe>>8&63]),ku(D,e,r.opts.Date1904),R(o.cell,D,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{B.push(oe);var ot=Nr(oe[0].s);if(m=e.dense?(s[oe[0].s.r]||[])[oe[0].s.c]:s[ot],e.cellFormula&&m){if(!o||!ot||!m)break;m.f=""+Wi(oe[1],i,oe[0],J,L),m.F=jr(oe[0])}}break;case 1212:{if(!e.cellFormula)break;if(p){if(!o)break;S[Nr(o.cell)]=oe[0],m=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Nr(o.cell)],(m||{}).f=""+Wi(oe[0],i,h,J,L)}}break;case 253:D=Sy(l[oe.isst].t,oe.ixfe,"s"),l[oe.isst].h&&(D.h=l[oe.isst].h),D.XF=U[D.ixfe],O>0&&(D.z=W[D.ixfe>>8&63]),ku(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e);break;case 513:e.sheetStubs&&(D={ixfe:oe.ixfe,XF:U[oe.ixfe],t:"z"},O>0&&(D.z=W[D.ixfe>>8&63]),ku(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e));break;case 190:if(e.sheetStubs)for(var Dt=oe.c;Dt<=oe.C;++Dt){var Rt=oe.ixfe[Dt-oe.c];D={ixfe:Rt,XF:U[Rt],t:"z"},O>0&&(D.z=W[D.ixfe>>8&63]),ku(D,e,r.opts.Date1904),R({c:Dt,r:oe.r},D,e)}break;case 214:case 516:case 4:D=Sy(oe.val,oe.ixfe,"s"),D.XF=U[D.ixfe],O>0&&(D.z=W[D.ixfe>>8&63]),ku(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e);break;case 0:case 512:ae===1&&(i=oe);break;case 252:l=oe;break;case 1054:if(L.biff==4){W[O++]=oe[1];for(var Yt=0;Yt<O+163&&Er[Yt]!=oe[1];++Yt);Yt>=163&&KA(oe[1],O+163)}else KA(oe[1],oe[0]);break;case 30:{W[O++]=oe;for(var Lt=0;Lt<O+163&&Er[Lt]!=oe;++Lt);Lt>=163&&KA(oe,O+163)}break;case 229:H=H.concat(oe);break;case 93:te[oe.cmo[0]]=L.lastobj=oe;break;case 438:L.lastobj.TxO=oe;break;case 127:L.lastobj.ImData=oe;break;case 440:for(E=oe[0].s.r;E<=oe[0].e.r;++E)for(x=oe[0].s.c;x<=oe[0].e.c;++x)m=e.dense?(s[E]||[])[x]:s[Nr({c:x,r:E})],m&&(m.l=oe[1]);break;case 2048:for(E=oe[0].s.r;E<=oe[0].e.r;++E)for(x=oe[0].s.c;x<=oe[0].e.c;++x)m=e.dense?(s[E]||[])[x]:s[Nr({c:x,r:E})],m&&m.l&&(m.l.Tooltip=oe[1]);break;case 28:{if(L.biff<=5&&L.biff>=2)break;m=e.dense?(s[oe[0].r]||[])[oe[0].c]:s[Nr(oe[0])];var Qt=te[oe[2]];m||(e.dense?(s[oe[0].r]||(s[oe[0].r]=[]),m=s[oe[0].r][oe[0].c]={t:"z"}):m=s[Nr(oe[0])]={t:"z"},i.e.r=Math.max(i.e.r,oe[0].r),i.s.r=Math.min(i.s.r,oe[0].r),i.e.c=Math.max(i.e.c,oe[0].c),i.s.c=Math.min(i.s.c,oe[0].c)),m.c||(m.c=[]),y={a:oe[1],t:Qt.TxO.t},m.c.push(y)}break;case 2173:Vce(U[oe.ixfe],oe.ext);break;case 125:{if(!L.cellStyles)break;for(;oe.e>=oe.s;)Y[oe.e--]={width:oe.w/256,level:oe.level||0,hidden:!!(oe.flags&1)},V||(V=!0,eB(oe.w/256)),Vf(Y[oe.e+1])}break;case 520:{var qt={};oe.level!=null&&(re[oe.r]=qt,qt.level=oe.level),oe.hidden&&(re[oe.r]=qt,qt.hidden=!0),oe.hpt&&(re[oe.r]=qt,qt.hpt=oe.hpt,qt.hpx=pm(oe.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||zh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[pe]]=oe;break;case 161:s["!margins"]||zh(s["!margins"]={}),s["!margins"].header=oe.header,s["!margins"].footer=oe.footer;break;case 574:oe.RTL&&(C.Views[0].RTL=!0);break;case 146:F=oe;break;case 2198:Q=oe;break;case 140:I=oe;break;case 442:c?_.CodeName=oe||_.name:C.WBProps.CodeName=oe||"ThisWorkbook";break}}else de||console.error("Missing Info for XLS Record 0x"+pe.toString(16)),t.l+=he}return r.SheetNames=Zs(a).sort(function(kt,It){return Number(kt)-Number(It)}).map(function(kt){return a[kt].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Z.forEach(function(kt,It){r.Sheets[r.SheetNames[It]]["!autofilter"]=kt}),r.Strings=l,r.SSF=ys(Er),L.enc&&(r.Encryption=L.enc),Q&&(r.Themes=Q),r.Metadata={},I!==void 0&&(r.Metadata.Country=I),J.names.length>0&&(C.Names=J.names),r.Workbook=C,r}var Nx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function n0e(t,e,r){var n=Ar.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=LD(n,K5,Nx.DSI);for(var a in s)e[a]=s[a]}catch(c){if(r.WTF)throw c}var i=Ar.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=LD(i,$5,Nx.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(Y7(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function s0e(t,e){var r=[],n=[],s=[],a=0,i,o=AD(K5,"n"),l=AD($5,"n");if(t.Props)for(i=Zs(t.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],t.Props[i[a]]]);if(t.Custprops)for(i=Zs(t.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],t.Custprops[i[a]]]);var c=[];for(a=0;a<s.length;++a)nQ.indexOf(s[a][0])>-1||W7.indexOf(s[a][0])>-1||s[a][1]!=null&&c.push(s[a]);n.length&&Ar.utils.cfb_add(e,"/SummaryInformation",UD(n,Nx.SI,l,$5)),(r.length||c.length)&&Ar.utils.cfb_add(e,"/DocumentSummaryInformation",UD(r,Nx.DSI,o,K5,c.length?c:null,Nx.UDI))}function JQ(t,e){e||(e={}),cB(e),k4(),e.codepage&&B4(e.codepage);var r,n;if(t.FullPaths){if(Ar.find(t,"/encryption"))throw new Error("File is password-protected");r=Ar.find(t,"!CompObj"),n=Ar.find(t,"/Workbook")||Ar.find(t,"/Book")}else{switch(e.type){case"base64":t=hl(wl(t));break;case"binary":t=hl(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}bi(t,0),n={content:t}}var s,a;if(r&&Zhe(r),e.bookProps&&!e.bookSheets)s={};else{var i=Zr?"buffer":"array";if(n&&n.content)s=r0e(n.content,e);else if((a=Ar.find(t,"PerfectOffice_MAIN"))&&a.content)s=Vh.to_workbook(a.content,(e.type=i,e));else if((a=Ar.find(t,"NativeContent_MAIN"))&&a.content)s=Vh.to_workbook(a.content,(e.type=i,e));else throw(a=Ar.find(t,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Ar.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=gue(t))}var o={};return t.FullPaths&&n0e(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}function a0e(t,e){var r=e||{},n=Ar.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Ar.utils.cfb_add(n,s,ZQ(t,r)),r.biff==8&&(t.Props||t.Custprops)&&s0e(t,n),r.biff==8&&t.vbaraw&&xue(n,Ar.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var o1={0:{f:Bde},1:{f:Mde},2:{f:rfe},3:{f:Gde},4:{f:Qde},5:{f:Zde},6:{f:ofe},7:{f:Wde},8:{f:hfe},9:{f:ffe},10:{f:Afe},11:{f:dfe},12:{f:Ode},13:{f:sfe},14:{f:Kde},15:{f:Vde},16:{f:zQ},17:{f:cfe},18:{f:Xde},19:{f:z4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:che},40:{},42:{},43:{f:oce},44:{f:ace},45:{f:uce},46:{f:dce},47:{f:Ace},48:{},49:{f:Fae},50:{},51:{f:qce},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:hQ},62:{f:ife},63:{f:tue},64:{f:kfe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ao,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Sfe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Lde},148:{f:Fde,p:16},151:{f:yfe},152:{},153:{f:ihe},154:{},155:{},156:{f:she},157:{},158:{},159:{T:1,f:ble},160:{T:-1},161:{T:1,f:y0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:pfe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:zce},336:{T:-1},337:{f:Wce,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:q5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:fQ},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:wfe},427:{f:bfe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Efe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Rde},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:xfe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:q5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:due},633:{T:1},634:{T:-1},635:{T:1,f:uue},636:{T:-1},637:{f:Uae},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Kfe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Ife},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},eT={6:{f:Y_},10:{f:Yd},12:{f:Na},13:{f:Na},14:{f:la},15:{f:la},16:{f:to},17:{f:la},18:{f:la},19:{f:Na},20:{f:HD},21:{f:HD},23:{f:fQ},24:{f:zD},25:{f:la},26:{},27:{},28:{f:Ioe},29:{},34:{f:la},35:{f:VD},38:{f:to},39:{f:to},40:{f:to},41:{f:to},42:{f:la},43:{f:la},47:{f:Vle},49:{f:soe},51:{f:Na},60:{},61:{f:Zie},64:{f:la},65:{f:noe},66:{f:Na},77:{},80:{},81:{},82:{},85:{f:Na},89:{},90:{},91:{},92:{f:Hie},93:{f:Roe},94:{},95:{f:la},96:{},97:{},99:{f:la},125:{f:hQ},128:{f:voe},129:{f:zie},130:{f:Na},131:{f:la},132:{f:la},133:{f:Gie},134:{},140:{f:Hoe},141:{f:Na},144:{},146:{f:Goe},151:{},152:{},153:{},154:{},155:{},156:{f:Na},157:{},158:{},160:{f:Joe},161:{f:$oe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:poe},190:{f:moe},193:{f:Yd},197:{},198:{},199:{},200:{},201:{},202:{f:la},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Na},220:{},221:{f:la},222:{},224:{f:xoe},225:{f:Qie},226:{f:Yd},227:{},229:{f:Foe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Kie},253:{f:ioe},255:{f:Wie},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:sQ},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:la},353:{f:Yd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Eoe},431:{f:la},432:{},433:{},434:{},437:{},438:{f:Moe},439:{f:la},440:{f:Poe},441:{},442:{f:K1},443:{},444:{f:Na},445:{},446:{},448:{f:Yd},449:{f:Jie,r:2},450:{f:Yd},512:{f:OD},513:{f:Xoe},515:{f:boe},516:{f:loe},517:{f:QD},519:{f:Zoe},520:{f:Yie},523:{},545:{f:GD},549:{f:PD},566:{},574:{f:toe},638:{f:hoe},659:{},1048:{},1054:{f:uoe},1084:{},1212:{f:Noe},2048:{f:joe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Cy},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Yd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:qoe,r:12},2173:{f:Hce,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:la,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Toe,r:12},2197:{},2198:{f:Uce,r:12},2199:{},2200:{},2201:{},2202:{f:Boe,r:12},2203:{f:Yd},2204:{},2205:{},2206:{},2207:{},2211:{f:Xie},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Na},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Woe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:zoe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:OD},1:{},2:{f:sle},3:{f:rle},4:{f:tle},5:{f:QD},7:{f:ile},8:{},9:{f:Cy},11:{},22:{f:Na},30:{f:doe},31:{},32:{},33:{f:GD},36:{},37:{f:PD},50:{f:ole},62:{},52:{},67:{},68:{f:Na},69:{},86:{},126:{},127:{f:ele},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:lle},223:{},234:{},354:{},421:{},518:{f:Y_},521:{f:Cy},536:{f:zD},547:{f:VD},561:{},579:{},1030:{f:Y_},1033:{f:Cy},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Pt(t,e,r,n){var s=e;if(!isNaN(s)){var a=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&Q4(r)&&t.push(r)}}function i0e(t,e,r,n){var s=(r||[]).length||0;if(s<=8224)return Pt(t,e,r,s);var a=e;if(!isNaN(a)){for(var i=r.parts||[],o=0,l=0,c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,a),d.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c;l<s;){for(d=t.next(4),d.write_shift(2,60),c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;d.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c}}}function X1(t,e,r){return t||(t=ut(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function o0e(t,e,r,n){var s=ut(9);return X1(s,t,e),aQ(r,n||"b",s),s}function l0e(t,e,r){var n=ut(8+2*r.length);return X1(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function c0e(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?qa(vs(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?Pt(t,2,ale(r,n,s)):Pt(t,3,nle(r,n,s));return;case"b":case"e":Pt(t,5,o0e(r,n,e.v,e.t));return;case"s":case"str":Pt(t,4,l0e(r,n,(e.v||"").slice(0,255)));return}Pt(t,1,X1(null,r,n))}function u0e(t,e,r,n){var s=Array.isArray(e),a=Sn(e["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=jr(a)}for(var c=a.s.r;c<=a.e.r;++c){o=pa(c);for(var d=a.s.c;d<=a.e.c;++d){c===a.s.r&&(l[d]=Ls(d)),i=l[d]+o;var h=s?(e[c]||[])[d]:e[i];h&&c0e(t,h,c,d)}}}function A0e(t,e){for(var r=e||{},n=Qo(),s=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Pt(n,r.biff==4?1033:r.biff==3?521:9,X4(t,16,r)),u0e(n,t.Sheets[t.SheetNames[s]],s,r),Pt(n,10),n.end()}function d0e(t,e,r){Pt(t,49,aoe({sz:12,name:"Arial"},r))}function f0e(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Pt(t,1054,Aoe(s,e[s],r))})}function h0e(t,e){var r=ut(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Pt(t,2151,r),r=ut(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),uQ(Sn(e["!ref"]||"A1"),r),r.write_shift(4,4),Pt(t,2152,r)}function p0e(t,e){for(var r=0;r<16;++r)Pt(t,224,jD({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Pt(t,224,jD(n,0,e))})}function m0e(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Pt(t,440,Ooe(n)),n[1].Tooltip&&Pt(t,2048,Qoe(n))}delete e["!links"]}function g0e(t,e){if(e){var r=0;e.forEach(function(n,s){++r<=256&&n&&Pt(t,125,Koe(mC(s,n),s))})}}function x0e(t,e,r,n,s){var a=16+Jf(s.cellXfs,e,s);if(e.v==null&&!e.bf){Pt(t,513,i0(r,n,a));return}if(e.bf)Pt(t,6,zAe(e,r,n,s,a));else switch(e.t){case"d":case"n":var i=e.t=="d"?qa(vs(e.v)):e.v;Pt(t,515,Coe(r,n,i,a));break;case"b":case"e":Pt(t,517,woe(r,n,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var o=aB(s.Strings,e.v,s.revStrings);Pt(t,253,ooe(r,n,o,a))}else Pt(t,516,coe(r,n,(e.v||"").slice(0,255),a,s));break;default:Pt(t,513,i0(r,n,a))}}function v0e(t,e,r){var n=Qo(),s=r.SheetNames[t],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(a),c=e.biff==8,d,h="",p=[],m=Sn(a["!ref"]||"A1"),y=c?65536:16384;if(m.e.c>255||m.e.r>=y){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,y-1)}Pt(n,2057,X4(r,16,e)),Pt(n,13,Zl(1)),Pt(n,12,Zl(100)),Pt(n,15,po(!0)),Pt(n,17,po(!1)),Pt(n,16,s0(.001)),Pt(n,95,po(!0)),Pt(n,42,po(!1)),Pt(n,43,po(!1)),Pt(n,130,Zl(1)),Pt(n,128,yoe()),Pt(n,131,po(!1)),Pt(n,132,po(!1)),c&&g0e(n,a["!cols"]),Pt(n,512,foe(m,e)),c&&(a["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){h=pa(x);for(var E=m.s.c;E<=m.e.c;++E){x===m.s.r&&(p[E]=Ls(E)),d=p[E]+h;var S=l?(a[x]||[])[E]:a[d];S&&(x0e(n,S,x,E,e),c&&S.l&&a["!links"].push([d,S.l]))}}var B=o.CodeName||o.name||s;return c&&Pt(n,574,roe((i.Views||[])[0])),c&&(a["!merges"]||[]).length&&Pt(n,229,Doe(a["!merges"])),c&&m0e(n,a),Pt(n,442,iQ(B)),c&&h0e(n,a),Pt(n,10),n.end()}function y0e(t,e,r){var n=Qo(),s=(t||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,l=r.biff==5;if(Pt(n,2057,X4(t,5,r)),r.bookType=="xla"&&Pt(n,135),Pt(n,225,o?Zl(1200):null),Pt(n,193,wie(2)),l&&Pt(n,191),l&&Pt(n,192),Pt(n,226),Pt(n,92,Vie("SheetJS",r)),Pt(n,66,Zl(o?1200:1252)),o&&Pt(n,353,Zl(0)),o&&Pt(n,448),Pt(n,317,Yoe(t.SheetNames.length)),o&&t.vbaraw&&Pt(n,211),o&&t.vbaraw){var c=i.CodeName||"ThisWorkbook";Pt(n,442,iQ(c))}Pt(n,156,Zl(17)),Pt(n,25,po(!1)),Pt(n,18,po(!1)),Pt(n,19,Zl(0)),o&&Pt(n,431,po(!1)),o&&Pt(n,444,Zl(0)),Pt(n,61,eoe()),Pt(n,64,po(!1)),Pt(n,141,Zl(0)),Pt(n,34,po(Jfe(t)=="true")),Pt(n,14,po(!0)),o&&Pt(n,439,po(!1)),Pt(n,218,Zl(0)),d0e(n,t,r),f0e(n,t.SSF,r),p0e(n,r),o&&Pt(n,352,po(!1));var d=n.end(),h=Qo();o&&Pt(h,140,Voe()),o&&r.Strings&&i0e(h,252,$ie(r.Strings)),Pt(h,10);var p=h.end(),m=Qo(),y=0,x=0;for(x=0;x<t.SheetNames.length;++x)y+=(o?12:11)+(o?2:1)*t.SheetNames[x].length;var E=d.length+y+p.length;for(x=0;x<t.SheetNames.length;++x){var S=a[x]||{};Pt(m,133,qie({pos:E,hs:S.Hidden||0,dt:0,name:t.SheetNames[x]},r)),E+=e[x].length}var B=m.end();if(y!=B.length)throw new Error("BS8 "+y+" != "+B.length);var D=[];return d.length&&D.push(d),B.length&&D.push(B),p.length&&D.push(p),ii(D)}function w0e(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ys(Er)),t&&t.SSF&&(Dm(),cC(t.SSF),r.revssf=AC(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,uB(r),r.cellXfs=[],Jf(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)n[n.length]=v0e(s,r,t);return n.unshift(y0e(t,n,r)),ii(n)}function ZQ(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Vo(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return w0e(t,e);case 4:case 3:case 2:return A0e(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function tR(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),i=s.index,o=a&&a.index||t.length,l=aae(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,d=0,h=0,p=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},y=[];for(i=0;i<l.length;++i){var x=l[i].trim(),E=x.slice(0,3).toLowerCase();if(E=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}d=0;continue}if(!(E!="<td"&&E!="<th")){var S=x.split(/<\/t[dh]>/i);for(o=0;o<S.length;++o){var B=S[o].trim();if(B.match(/<t[dh]/i)){for(var D=B,I=0;D.charAt(0)=="<"&&(I=D.indexOf(">"))>-1;)D=D.slice(I+1);for(var U=0;U<y.length;++U){var F=y[U];F.s.c==d&&F.s.r<c&&c<=F.e.r&&(d=F.e.c+1,U=-1)}var C=Fr(B.slice(0,B.indexOf(">")));p=C.colspan?+C.colspan:1,((h=+C.rowspan)>1||p>1)&&y.push({s:{r:c,c:d},e:{r:c+(h||1)-1,c:d+p-1}});var _=C.t||C["data-t"]||"";if(!D.length){d+=p;continue}if(D=C7(D),m.s.r>c&&(m.s.r=c),m.e.r<c&&(m.e.r=c),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!D.length){d+=p;continue}var N={t:"s",v:D};r.raw||!D.trim().length||_=="s"||(D==="TRUE"?N={t:"b",v:!0}:D==="FALSE"?N={t:"b",v:!1}:isNaN(zc(D))?isNaN(fm(D).getDate())||(N={t:"d",v:vs(D)},r.cellDates||(N={t:"n",v:qa(N.v)}),N.z=r.dateNF||Er[14]):N={t:"n",v:zc(D)}),r.dense?(n[c]||(n[c]=[]),n[c][d]=N):n[Nr({r:c,c:d})]=N,d+=p}}}}return n["!ref"]=jr(m),y.length&&(n["!merges"]=y),n}function b0e(t,e,r,n){for(var s=t["!merges"]||[],a=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>i)&&!(s[c].e.r<r||s[c].e.c<i)){if(s[c].s.r<r||s[c].s.c<i){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var d=Nr({r,c:i}),h=n.dense?(t[r]||[])[i]:t[d],p=h&&h.v!=null&&(h.h||P4(h.w||(nd(h),h.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?p='<span contenteditable="true">'+p+"</span>":h&&(m["data-t"]=h&&h.t||"z",h.v!=null&&(m["data-v"]=h.v),h.z!=null&&(m["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+h.l.Target+'">'+p+"</a>")),m.id=(n.id||"sjs")+"-"+d,a.push(Mt("td",p,m))}}var y="<tr>";return y+a.join("")+"</tr>"}var C0e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',E0e="</body></html>";function _0e(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Xf(tR(r[0],e),e);var n=hB();return r.forEach(function(s,a){pB(n,tR(s,e),"Sheet"+(a+1))}),n}function S0e(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function eH(t,e){var r=e||{},n=r.header!=null?r.header:C0e,s=r.footer!=null?r.footer:E0e,a=[n],i=Vo(t["!ref"]);r.dense=Array.isArray(t),a.push(S0e(t,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(b0e(t,i,o,r));return a.push("</table>"+s),a.join("")}function tH(t,e,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?Us(n.origin):n.origin;s=i.r,a=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:a}};if(t["!ref"]){var d=Vo(t["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),s==-1&&(c.e.r=s=d.e.r+1)}var h=[],p=0,m=t["!rows"]||(t["!rows"]=[]),y=0,x=0,E=0,S=0,B=0,D=0;for(t["!cols"]||(t["!cols"]=[]);y<o.length&&x<l;++y){var I=o[y];if(rR(I)){if(n.display)continue;m[x]={hidden:!0}}var U=I.children;for(E=S=0;E<U.length;++E){var F=U[E];if(!(n.display&&rR(F))){var C=F.hasAttribute("data-v")?F.getAttribute("data-v"):F.hasAttribute("v")?F.getAttribute("v"):C7(F.innerHTML),_=F.getAttribute("data-z")||F.getAttribute("z");for(p=0;p<h.length;++p){var N=h[p];N.s.c==S+a&&N.s.r<x+s&&x+s<=N.e.r&&(S=N.e.c+1-a,p=-1)}D=+F.getAttribute("colspan")||1,((B=+F.getAttribute("rowspan")||1)>1||D>1)&&h.push({s:{r:x+s,c:S+a},e:{r:x+s+(B||1)-1,c:S+a+(D||1)-1}});var j={t:"s",v:C},R=F.getAttribute("data-t")||F.getAttribute("t")||"";C!=null&&(C.length==0?j.t=R||"z":n.raw||C.trim().length==0||R=="s"||(C==="TRUE"?j={t:"b",v:!0}:C==="FALSE"?j={t:"b",v:!1}:isNaN(zc(C))?isNaN(fm(C).getDate())||(j={t:"d",v:vs(C)},n.cellDates||(j={t:"n",v:qa(j.v)}),j.z=n.dateNF||Er[14]):j={t:"n",v:zc(C)})),j.z===void 0&&_!=null&&(j.z=_);var L="",Q=F.getElementsByTagName("A");if(Q&&Q.length)for(var H=0;H<Q.length&&!(Q[H].hasAttribute("href")&&(L=Q[H].getAttribute("href"),L.charAt(0)!="#"));++H);L&&L.charAt(0)!="#"&&(j.l={Target:L}),n.dense?(t[x+s]||(t[x+s]=[]),t[x+s][S+a]=j):t[Nr({c:S+a,r:x+s})]=j,c.e.c<S+a&&(c.e.c=S+a),S+=D}}++x}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,x-1+s),t["!ref"]=jr(c),x>=l&&(t["!fullref"]=jr((c.e.r=o.length-y+x-1+s,c))),t}function rH(t,e){var r=e||{},n=r.dense?[]:{};return tH(n,t,e)}function T0e(t,e){return Xf(rH(t,e),e)}function rR(t){var e="",r=N0e(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function N0e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function B0e(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=_n(e.replace(/<[^>]*>/g,""));return[r]}var nR={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function nH(t,e){var r=e||{},n=O4(t),s=[],a,i,o={name:""},l="",c=0,d,h,p={},m=[],y=r.dense?[]:{},x,E,S={value:""},B="",D=0,I=[],U=-1,F=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,N={},j=[],R={},L=0,Q=0,H=[],te=1,Y=1,re=[],V={Names:[]},J={},K=["",""],ae=[],O={},W="",Z=0,ne=!1,le=!1,ve=0;for(t1.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=t1.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?y["!ref"]=jr(C):y["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(y["!fullref"]=y["!ref"],C.e.r=r.sheetRows-1,y["!ref"]=jr(C)),j.length&&(y["!merges"]=j),H.length&&(y["!rows"]=H),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),p[d.name]=y,le=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Fr(x[0],!1),U=F=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,y=r.dense?[]:{},j=[],H=[],le=!0);break;case"table-row-group":x[1]==="/"?--_:++_;break;case"table-row":case"行":if(x[1]==="/"){U+=te,te=1;break}if(h=Fr(x[0],!1),h.行号?U=h.行号-1:U==-1&&(U=0),te=+h["number-rows-repeated"]||1,te<10)for(ve=0;ve<te;++ve)_>0&&(H[U+ve]={level:_});F=-1;break;case"covered-table-cell":x[1]!=="/"&&++F,r.sheetStubs&&(r.dense?(y[U]||(y[U]=[]),y[U][F]={t:"z"}):y[Nr({r:U,c:F})]={t:"z"}),B="",I=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++F,S=Fr(x[0],!1),Y=parseInt(S["number-columns-repeated"]||"1",10),E={t:"z",v:null},S.formula&&r.cellFormula!=!1&&(E.f=JD(_n(S.formula))),(S.数据类型||S["value-type"])=="string"&&(E.t="s",E.v=_n(S["string-value"]||""),r.dense?(y[U]||(y[U]=[]),y[U][F]=E):y[Nr({r:U,c:F})]=E),F+=Y-1;else if(x[1]!=="/"){++F,B="",D=0,I=[],Y=1;var pe=te?U+te-1:U;if(F>C.e.c&&(C.e.c=F),F<C.s.c&&(C.s.c=F),U<C.s.r&&(C.s.r=U),pe>C.e.r&&(C.e.r=pe),S=Fr(x[0],!1),ae=[],O={},E={t:S.数据类型||S["value-type"],v:null},r.cellFormula)if(S.formula&&(S.formula=_n(S.formula)),S["number-matrix-columns-spanned"]&&S["number-matrix-rows-spanned"]&&(L=parseInt(S["number-matrix-rows-spanned"],10)||0,Q=parseInt(S["number-matrix-columns-spanned"],10)||0,R={s:{r:U,c:F},e:{r:U+L-1,c:F+Q-1}},E.F=jr(R),re.push([R,E.F])),S.formula)E.f=JD(S.formula);else for(ve=0;ve<re.length;++ve)U>=re[ve][0].s.r&&U<=re[ve][0].e.r&&F>=re[ve][0].s.c&&F<=re[ve][0].e.c&&(E.F=re[ve][1]);switch((S["number-columns-spanned"]||S["number-rows-spanned"])&&(L=parseInt(S["number-rows-spanned"],10)||0,Q=parseInt(S["number-columns-spanned"],10)||0,R={s:{r:U,c:F},e:{r:U+L-1,c:F+Q-1}},j.push(R)),S["number-columns-repeated"]&&(Y=parseInt(S["number-columns-repeated"],10)),E.t){case"boolean":E.t="b",E.v=gs(S["boolean-value"]);break;case"float":E.t="n",E.v=parseFloat(S.value);break;case"percentage":E.t="n",E.v=parseFloat(S.value);break;case"currency":E.t="n",E.v=parseFloat(S.value);break;case"date":E.t="d",E.v=vs(S["date-value"]),r.cellDates||(E.t="n",E.v=qa(E.v)),E.z="m/d/yy";break;case"time":E.t="n",E.v=rae(S["time-value"])/86400,r.cellDates&&(E.t="d",E.v=dC(E.v)),E.z="HH:MM:SS";break;case"number":E.t="n",E.v=parseFloat(S.数据数值);break;default:if(E.t==="string"||E.t==="text"||!E.t)E.t="s",S["string-value"]!=null&&(B=_n(S["string-value"]),I=[]);else throw new Error("Unsupported value type "+E.t)}}else{if(ne=!1,E.t==="s"&&(E.v=B||"",I.length&&(E.R=I),ne=D==0),J.Target&&(E.l=J),ae.length>0&&(E.c=ae,ae=[]),B&&r.cellText!==!1&&(E.w=B),ne&&(E.t="z",delete E.v),(!ne||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=U))for(var he=0;he<te;++he){if(Y=parseInt(S["number-columns-repeated"]||"1",10),r.dense)for(y[U+he]||(y[U+he]=[]),y[U+he][F]=he==0?E:ys(E);--Y>0;)y[U+he][F+Y]=ys(E);else for(y[Nr({r:U+he,c:F})]=E;--Y>0;)y[Nr({r:U+he,c:F+Y})]=ys(E);C.e.c<=F&&(C.e.c=F)}Y=parseInt(S["number-columns-repeated"]||"1",10),F+=Y-1,Y=0,E={},B="",I=[]}J={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((a=s.pop())[0]!==x[3])throw"Bad state: "+a}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((a=s.pop())[0]!==x[3])throw"Bad state: "+a;O.t=B,I.length&&(O.R=I),O.a=W,ae.push(O)}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!1]);W="",Z=0,B="",D=0,I=[];break;case"creator":x[1]==="/"?W=n.slice(Z,x.index):Z=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((a=s.pop())[0]!==x[3])throw"Bad state: "+a}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!1]);B="",D=0,I=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(N[o.name]=l,(a=s.pop())[0]!==x[3])throw"Bad state: "+a}else x[0].charAt(x[0].length-2)!=="/"&&(l="",o=Fr(x[0],!1),s.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Fr(x[0],!1),l+=nR[x[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Fr(x[0],!1),l+=nR[x[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,x.index);break}else c=x.index+x[0].length;break;case"named-range":i=Fr(x[0],!1),K=X_(i["cell-range-address"]);var de={Name:i.name,Ref:K[0]+"!"+K[1]};le&&(de.Sheet=m.length),V.Names.push(de);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(x[1]==="/"&&(!S||!S["string-value"])){var ce=B0e(n.slice(D,x.index));B=(B.length>0?B+`
`:"")+ce[0]}else Fr(x[0],!1),D=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{K=X_(Fr(x[0])["target-range-address"]),p[K[0]]["!autofilter"]={ref:K[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(J=Fr(x[0],!1),!J.href)break;J.Target=_n(J.href),delete J.href,J.Target.charAt(0)=="#"&&J.Target.indexOf(".")>-1?(K=X_(J.Target.slice(1)),J.Target="#"+K[0]+"!"+K[1]):J.Target.match(/^\.\.[\\\/]/)&&(J.Target=J.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var oe={Sheets:p,SheetNames:m,Workbook:V};return r.bookSheets&&delete oe.Sheets,oe}function sR(t,e){e=e||{},Xl(t,"META-INF/manifest.xml")&&rie(Ta(t,"META-INF/manifest.xml"),e);var r=pl(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=nH(os(r),e);return Xl(t,"meta.xml")&&(n.Props=K7(Ta(t,"meta.xml"))),n}function aR(t,e){return nH(t,e)}var k0e=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+e1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ma+e}}(),iR=function(){var t=function(a){return Jn(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var l=[];l.push('      <table:table table:name="'+Jn(i.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,d=0,h=Vo(a["!ref"]||"A1"),p=a["!merges"]||[],m=0,y=Array.isArray(a);if(a["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",E=a["!rows"]||[];for(c=0;c<h.s.r;++c)x=E[c]?' table:style-name="ro'+E[c].ods+'"':"",l.push("        <table:table-row"+x+`></table:table-row>
`);for(;c<=h.e.r;++c){for(x=E[c]?' table:style-name="ro'+E[c].ods+'"':"",l.push("        <table:table-row"+x+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var S=!1,B={},D="";for(m=0;m!=p.length;++m)if(!(p[m].s.c>d)&&!(p[m].s.r>c)&&!(p[m].e.c<d)&&!(p[m].e.r<c)){(p[m].s.c!=d||p[m].s.r!=c)&&(S=!0),B["table:number-columns-spanned"]=p[m].e.c-p[m].s.c+1,B["table:number-rows-spanned"]=p[m].e.r-p[m].s.r+1;break}if(S){l.push(r);continue}var I=Nr({r:c,c:d}),U=y?(a[c]||[])[d]:a[I];if(U&&U.f&&(B["table:formula"]=Jn(YAe(U.f)),U.F&&U.F.slice(0,I.length)==I)){var F=Vo(U.F);B["table:number-matrix-columns-spanned"]=F.e.c-F.s.c+1,B["table:number-matrix-rows-spanned"]=F.e.r-F.s.r+1}if(!U){l.push(e);continue}switch(U.t){case"b":D=U.v?"TRUE":"FALSE",B["office:value-type"]="boolean",B["office:boolean-value"]=U.v?"true":"false";break;case"n":D=U.w||String(U.v||0),B["office:value-type"]="float",B["office:value"]=U.v||0;break;case"s":case"str":D=U.v==null?"":U.v,B["office:value-type"]="string";break;case"d":D=U.w||vs(U.v).toISOString(),B["office:value-type"]="date",B["office:date-value"]=vs(U.v).toISOString(),B["table:style-name"]="ce1";break;default:l.push(e);continue}var C=t(D);if(U.l&&U.l.Target){var _=U.l.Target;_=_.charAt(0)=="#"?"#"+XAe(_.slice(1)):_,_.charAt(0)!="#"&&!_.match(/^\w+:/)&&(_="../"+_),C=Mt("text:a",C,{"xlink:href":_.replace(/&/g,"&amp;")})}l.push("          "+Mt("table:table-cell",Mt("text:p",C,{}),B)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(c){return i.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var d=0;d<c["!cols"].length;++d)if(c["!cols"][d]){var h=c["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Vf(h),h.ods=o;var p=c["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(c){return i.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var d=0;d<c["!rows"].length;++d)if(c["!rows"][d]){c["!rows"][d].ods=l;var h=c["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[ma],c=e1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=e1({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+d+`>
`),l.push(q7().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(n(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function sH(t,e){if(e.bookType=="fods")return iR(t,e);var r=L4(),n="",s=[],a=[];return n="mimetype",qr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",qr(r,n,iR(t,e)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",qr(r,n,k0e(t,e)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",qr(r,n,ma+q7()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",qr(r,n,aie(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",qr(r,n,nie(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function o0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function tT(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):os(Yf(t))}function I0e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):hl(Qu(t))}function F0e(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Gf(t){var e=t.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function oR(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function D0e(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function R0e(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)t[e+a]=s&255;t[e+15]|=r>=0?0:128}function l1(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Wn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Js(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Dn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=l1(t,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:i=4,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=l1(t,r),o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:a};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function xi(t){var e=[];return t.forEach(function(r,n){r.forEach(function(s){s.data&&(e.push(Wn(n*8+s.type)),s.type==2&&e.push(Wn(s.data.length)),e.push(s.data))})}),Gf(e)}function lB(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Wl(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=l1(t,n),a=Dn(t.slice(n[0],n[0]+s));n[0]+=s;var i={id:Js(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=Dn(o.data),c=Js(l[3][0].data);i.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=a[3])!=null&&e[0]&&(i.merge=Js(a[3][0].data)>>>0>0),r.push(i)}return r}function np(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Wn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Wn(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:Wn(i.data.length)}],n[2].push({data:xi(i.meta),type:2})});var a=xi(n);e.push(Wn(a.length)),e.push(a),s.forEach(function(i){return e.push(i)})}),Gf(e)}function L0e(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=l1(e,r),s=[];r[0]<e.length;){var a=e[r[0]]&3;if(a==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[r[0]],o>1&&(i|=e[r[0]+1]<<8),o>2&&(i|=e[r[0]+2]<<16),o>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,c=0;if(a==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,a==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Gf(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var d=Gf(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Yl(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(L0e(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Gf(e)}function sp(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),s=new Uint8Array(4);e.push(s);var a=Wn(n),i=a.length;e.push(a),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return Gf(e)}function U0e(t,e,r,n){var s=o0(t),a=s.getUint32(4,!0),i=(n>1?12:8)+oR(a&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=oR(a&(n>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(c=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:c>0};break;case 7:h={t:"n",v:c/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(c))h={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function M0e(t,e,r){var n=o0(t),s=n.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,c=NaN,d=new Date(2001,0,1);s&1&&(l=D0e(t,a),a+=16),s&2&&(c=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:c>0};break;case 7:h={t:"n",v:c/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return h}function Z_(t,e){var r=new Uint8Array(32),n=o0(r),s=12,a=0;switch(r[0]=5,t.t){case"n":r[1]=2,R0e(r,s,t.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,t.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(s,e.indexOf(t.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,a,!0),r.slice(0,s)}function eS(t,e){var r=new Uint8Array(32),n=o0(r),s=12,a=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(s,t.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,t.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(s,e.indexOf(t.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,a,!0),r.slice(0,s)}function P0e(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return U0e(t,e,r,t[0]);case 5:return M0e(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function $i(t){var e=Dn(t);return l1(e[1][0].data)}function lR(t,e){var r=Dn(e.data),n=Js(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=Dn(i.data),l=Js(o[1][0].data)>>>0;switch(n){case 1:a[l]=tT(o[3][0].data);break;case 8:{var c=t[$i(o[9][0].data)][0],d=Dn(c.data),h=t[$i(d[1][0].data)][0],p=Js(h.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var m=Dn(h.data);a[l]=m[3].map(function(y){return tT(y.data)}).join("")}break}}),a}function O0e(t,e){var r,n,s,a,i,o,l,c,d,h,p,m,y,x,E=Dn(t),S=Js(E[1][0].data)>>>0,B=Js(E[2][0].data)>>>0,D=((n=(r=E[8])==null?void 0:r[0])==null?void 0:n.data)&&Js(E[8][0].data)>0||!1,I,U;if((a=(s=E[7])==null?void 0:s[0])!=null&&a.data&&e!=0)I=(o=(i=E[7])==null?void 0:i[0])==null?void 0:o.data,U=(c=(l=E[6])==null?void 0:l[0])==null?void 0:c.data;else if((h=(d=E[4])==null?void 0:d[0])!=null&&h.data&&e!=1)I=(m=(p=E[4])==null?void 0:p[0])==null?void 0:m.data,U=(x=(y=E[3])==null?void 0:y[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var F=D?4:1,C=o0(I),_=[],N=0;N<I.length/2;++N){var j=C.getUint16(N*2,!0);j<65535&&_.push([N,j])}if(_.length!=B)throw"Expected ".concat(B," cells, found ").concat(_.length);var R=[];for(N=0;N<_.length-1;++N)R[_[N][0]]=U.subarray(_[N][1]*F,_[N+1][1]*F);return _.length>=1&&(R[_[_.length-1][0]]=U.subarray(_[_.length-1][1]*F)),{R:S,cells:R}}function j0e(t,e){var r,n=Dn(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?Js(n[7][0].data)>>>0>0?1:0:-1,a=lB(n[5],function(i){return O0e(i,s)});return{nrows:Js(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,c){if(i[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));i[o.R][c]=l}),i},[])}}function Q0e(t,e,r){var n,s=Dn(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(Js(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(Js(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=jr(a);var i=Dn(s[4][0].data),o=lR(t,t[$i(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?lR(t,t[$i(i[17][0].data)][0]):[],c=Dn(i[3][0].data),d=0;c[1].forEach(function(h){var p=Dn(h.data),m=t[$i(p[2][0].data)][0],y=Js(m.meta[1][0].data);if(y!=6002)throw new Error("6001 unexpected reference to ".concat(y));var x=j0e(t,m);x.data.forEach(function(E,S){E.forEach(function(B,D){var I=Nr({r:d+S,c:D}),U=P0e(B,o,l);U&&(r[I]=U)})}),d+=x.nrows})}function H0e(t,e){var r=Dn(e.data),n={"!ref":"A1"},s=t[$i(r[2][0].data)],a=Js(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return Q0e(t,s[0],n),n}function V0e(t,e){var r,n=Dn(e.data),s={name:(r=n[1])!=null&&r[0]?tT(n[1][0].data):"",sheets:[]},a=lB(n[2],$i);return a.forEach(function(i){t[i].forEach(function(o){var l=Js(o.meta[1][0].data);l==6e3&&s.sheets.push(H0e(t,o))})}),s}function z0e(t,e){var r=hB(),n=Dn(e.data),s=lB(n[1],$i);if(s.forEach(function(a){t[a].forEach(function(i){var o=Js(i.meta[1][0].data);if(o==2){var l=V0e(t,i);l.sheets.forEach(function(c,d){pB(r,c,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function tS(t){var e,r,n,s,a={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=Yl(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var d;try{d=Wl(c)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){a[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=a==null?void 0:a[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&Js(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(c){var d=Js(c.meta[1][0].data)>>>0;if(d==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return z0e(a,o)}function G0e(t,e,r){var n,s,a,i;if(!((n=t[6])!=null&&n[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=t[8])==null?void 0:a[0])==null?void 0:i.data)&&Js(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=o0(t[7][0].data),d=0,h=[],p=o0(t[4][0].data),m=0,y=[],x=0;x<e.length;++x){if(e[x]==null){c.setUint16(x*2,65535,!0),p.setUint16(x*2,65535);continue}c.setUint16(x*2,d,!0),p.setUint16(x*2,m,!0);var E,S;switch(typeof e[x]){case"string":E=Z_({t:"s",v:e[x]},r),S=eS({t:"s",v:e[x]},r);break;case"number":E=Z_({t:"n",v:e[x]},r),S=eS({t:"n",v:e[x]},r);break;case"boolean":E=Z_({t:"b",v:e[x]},r),S=eS({t:"b",v:e[x]},r);break;default:throw new Error("Unsupported value "+e[x])}h.push(E),d+=E.length,y.push(S),m+=S.length,++l}for(t[2][0].data=Wn(l);x<t[7][0].data.length/2;++x)c.setUint16(x*2,65535,!0),p.setUint16(x*2,65535,!0);return t[6][0].data=Gf(h),t[3][0].data=Gf(y),l}function q0e(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Vo(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(jr(n)));var a=zw(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(W){return W.forEach(function(Z){typeof Z=="string"&&i.push(Z)})});var o={},l=[],c=Ar.read(e.numbers,{type:"base64"});c.FileIndex.map(function(W,Z){return[W,c.FullPaths[Z]]}).forEach(function(W){var Z=W[0],ne=W[1];if(Z.type==2&&Z.name.match(/\.iwa/)){var le=Z.content,ve=Yl(le),pe=Wl(ve);pe.forEach(function(he){l.push(he.id),o[he.id]={deps:[],location:ne,type:Js(he.messages[0].meta[1][0].data)}})}}),l.sort(function(W,Z){return W-Z});var d=l.filter(function(W){return W>1}).map(function(W){return[W,Wn(W)]});c.FileIndex.map(function(W,Z){return[W,c.FullPaths[Z]]}).forEach(function(W){var Z=W[0];if(W[1],!!Z.name.match(/\.iwa/)){var ne=Wl(Yl(Z.content));ne.forEach(function(le){le.messages.forEach(function(ve){d.forEach(function(pe){le.messages.some(function(he){return Js(he.meta[1][0].data)!=11006&&F0e(he.data,pe[1])})&&o[pe[0]].deps.push(le.id)})})})}});for(var h=Ar.find(c,o[1].location),p=Wl(Yl(h.content)),m,y=0;y<p.length;++y){var x=p[y];x.id==1&&(m=x)}var E=$i(Dn(m.messages[0].data)[1][0].data);for(h=Ar.find(c,o[E].location),p=Wl(Yl(h.content)),y=0;y<p.length;++y)x=p[y],x.id==E&&(m=x);for(E=$i(Dn(m.messages[0].data)[2][0].data),h=Ar.find(c,o[E].location),p=Wl(Yl(h.content)),y=0;y<p.length;++y)x=p[y],x.id==E&&(m=x);for(E=$i(Dn(m.messages[0].data)[2][0].data),h=Ar.find(c,o[E].location),p=Wl(Yl(h.content)),y=0;y<p.length;++y)x=p[y],x.id==E&&(m=x);var S=Dn(m.messages[0].data);{S[6][0].data=Wn(n.e.r+1),S[7][0].data=Wn(n.e.c+1);var B=$i(S[46][0].data),D=Ar.find(c,o[B].location),I=Wl(Yl(D.content));{for(var U=0;U<I.length&&I[U].id!=B;++U);if(I[U].id!=B)throw"Bad ColumnRowUIDMapArchive";var F=Dn(I[U].messages[0].data);F[1]=[],F[2]=[],F[3]=[];for(var C=0;C<=n.e.c;++C){var _=[];_[1]=_[2]=[{type:0,data:Wn(C+420690)}],F[1].push({type:2,data:xi(_)}),F[2].push({type:0,data:Wn(C)}),F[3].push({type:0,data:Wn(C)})}F[4]=[],F[5]=[],F[6]=[];for(var N=0;N<=n.e.r;++N)_=[],_[1]=_[2]=[{type:0,data:Wn(N+726270)}],F[4].push({type:2,data:xi(_)}),F[5].push({type:0,data:Wn(N)}),F[6].push({type:0,data:Wn(N)});I[U].messages[0].data=xi(F)}D.content=sp(np(I)),D.size=D.content.length,delete S[46];var j=Dn(S[4][0].data);{j[7][0].data=Wn(n.e.r+1);var R=Dn(j[1][0].data),L=$i(R[2][0].data);D=Ar.find(c,o[L].location),I=Wl(Yl(D.content));{if(I[0].id!=L)throw"Bad HeaderStorageBucket";var Q=Dn(I[0].messages[0].data);for(N=0;N<a.length;++N){var H=Dn(Q[2][0].data);H[1][0].data=Wn(N),H[4][0].data=Wn(a[N].length),Q[2][N]={type:Q[2][0].type,data:xi(H)}}I[0].messages[0].data=xi(Q)}D.content=sp(np(I)),D.size=D.content.length;var te=$i(j[2][0].data);D=Ar.find(c,o[te].location),I=Wl(Yl(D.content));{if(I[0].id!=te)throw"Bad HeaderStorageBucket";for(Q=Dn(I[0].messages[0].data),C=0;C<=n.e.c;++C)H=Dn(Q[2][0].data),H[1][0].data=Wn(C),H[4][0].data=Wn(n.e.r+1),Q[2][C]={type:Q[2][0].type,data:xi(H)};I[0].messages[0].data=xi(Q)}D.content=sp(np(I)),D.size=D.content.length;var Y=$i(j[4][0].data);(function(){for(var W=Ar.find(c,o[Y].location),Z=Wl(Yl(W.content)),ne,le=0;le<Z.length;++le){var ve=Z[le];ve.id==Y&&(ne=ve)}var pe=Dn(ne.messages[0].data);{pe[3]=[];var he=[];i.forEach(function(oe,Re){he[1]=[{type:0,data:Wn(Re)}],he[2]=[{type:0,data:Wn(1)}],he[3]=[{type:2,data:I0e(oe)}],pe[3].push({type:2,data:xi(he)})})}ne.messages[0].data=xi(pe);var de=np(Z),ce=sp(de);W.content=ce,W.size=W.content.length})();var re=Dn(j[3][0].data);{var V=re[1][0];delete re[2];var J=Dn(V.data);{var K=$i(J[2][0].data);(function(){for(var W=Ar.find(c,o[K].location),Z=Wl(Yl(W.content)),ne,le=0;le<Z.length;++le){var ve=Z[le];ve.id==K&&(ne=ve)}var pe=Dn(ne.messages[0].data);{delete pe[6],delete re[7];var he=new Uint8Array(pe[5][0].data);pe[5]=[];for(var de=0,ce=0;ce<=n.e.r;++ce){var oe=Dn(he);de+=G0e(oe,a[ce],i),oe[1][0].data=Wn(ce),pe[5].push({data:xi(oe),type:2})}pe[1]=[{type:0,data:Wn(n.e.c+1)}],pe[2]=[{type:0,data:Wn(n.e.r+1)}],pe[3]=[{type:0,data:Wn(de)}],pe[4]=[{type:0,data:Wn(n.e.r+1)}]}ne.messages[0].data=xi(pe);var Re=np(Z),qe=sp(Re);W.content=qe,W.size=W.content.length})()}V.data=xi(J)}j[3][0].data=xi(re)}S[4][0].data=xi(j)}m.messages[0].data=xi(S);var ae=np(p),O=sp(ae);return h.content=O,h.size=h.content.length,c}function aH(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function cB(t){aH([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function uB(t){aH([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function K0e(t){return sn.WS.indexOf(t)>-1?"sheet":t==sn.CS?"chart":t==sn.DS?"dialog":t==sn.MS?"macro":t&&t.length?t:"sheet"}function $0e(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,K0e(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function W0e(t,e,r,n,s,a,i,o,l,c,d,h){try{a[n]=Ex(pl(t,r,!0),e);var p=Ta(t,e),m;switch(o){case"sheet":m=ghe(p,e,s,l,a[n],c,d,h);break;case"chart":if(m=xhe(p,e,s,l,a[n],c,d,h),!m||!m["!drawel"])break;var y=ex(m["!drawel"].Target,e),x=r1(y),E=sue(pl(t,y,!0),Ex(pl(t,x,!0),y)),S=ex(E,y),B=r1(S);m=Gfe(pl(t,S,!0),S,l,Ex(pl(t,B,!0),S),c,m);break;case"macro":m=vhe(p,e,s,l,a[n],c,d,h);break;case"dialog":m=yhe(p,e,s,l,a[n],c,d,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=m;var D=[];a&&a[n]&&Zs(a[n]).forEach(function(I){var U="";if(a[n][I].Type==sn.CMNT){U=ex(a[n][I].Target,e);var F=Ehe(Ta(t,U,!0),U,l);if(!F||!F.length)return;KD(m,F,!1)}a[n][I].Type==sn.TCMNT&&(U=ex(a[n][I].Target,e),D=D.concat(iue(Ta(t,U,!0),l)))}),D&&D.length&&KD(m,D,!0,l.people||[])}catch(I){if(l.WTF)throw I}}function ql(t){return t.charAt(0)=="/"?t.slice(1):t}function Y0e(t,e){if(Dm(),e=e||{},cB(e),Xl(t,"META-INF/manifest.xml")||Xl(t,"objectdata.xml"))return sR(t,e);if(Xl(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof tS<"u"){if(t.FileIndex)return tS(t);var r=Ar.utils.cfb_new();return hD(t).forEach(function(H){qr(r,H,oae(t,H))}),tS(r)}throw new Error("Unsupported NUMBERS file")}if(!Xl(t,"[Content_Types].xml"))throw Xl(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Xl(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=hD(t),s=eie(pl(t,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Ta(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Ta(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(_x=[],s.sst)try{_x=Che(Ta(t,ql(s.sst)),s.sst,e)}catch(H){if(e.WTF)throw H}e.cellStyles&&s.themes.length&&(l=bhe(pl(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(c=whe(Ta(t,ql(s.style)),s.style,l,e))}s.links.map(function(H){try{var te=Ex(pl(t,r1(ql(H))),H);return She(Ta(t,ql(H)),te,H,e)}catch{}});var d=mhe(Ta(t,ql(s.workbooks[0])),s.workbooks[0],e),h={},p="";s.coreprops.length&&(p=Ta(t,ql(s.coreprops[0]),!0),p&&(h=K7(p)),s.extprops.length!==0&&(p=Ta(t,ql(s.extprops[0]),!0),p&&oie(p,h,e)));var m={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(p=pl(t,ql(s.custprops[0]),!0),p&&(m=cie(p,e)));var y={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(te){return te.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),e.bookProps&&(y.Props=h,y.Custprops=m),e.bookSheets&&typeof i<"u"&&(y.SheetNames=i),e.bookSheets?y.SheetNames:e.bookProps))return y;i={};var x={};e.bookDeps&&s.calcchain&&(x=_he(Ta(t,ql(s.calcchain)),s.calcchain));var E=0,S={},B,D;{var I=d.Sheets;h.Worksheets=I.length,h.SheetNames=[];for(var U=0;U!=I.length;++U)h.SheetNames[U]=I[U].name}var F=a?"bin":"xml",C=s.workbooks[0].lastIndexOf("/"),_=(s.workbooks[0].slice(0,C+1)+"_rels/"+s.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");Xl(t,_)||(_="xl/_rels/workbook."+F+".rels");var N=Ex(pl(t,_,!0),_.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=The(Ta(t,ql(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=lue(Ta(t,ql(s.people[0])),e)),N&&(N=$0e(N,d.Sheets));var j=Ta(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(E=0;E!=h.Worksheets;++E){var R="sheet";if(N&&N[E]?(B="xl/"+N[E][1].replace(/[\/]?xl\//,""),Xl(t,B)||(B=N[E][1]),Xl(t,B)||(B=_.replace(/_rels\/.*$/,"")+N[E][1]),R=N[E][2]):(B="xl/worksheets/sheet"+(E+1-j)+"."+F,B=B.replace(/sheet0\./,"sheet.")),D=B.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(E!=e.sheets)continue e;break;case"string":if(h.SheetNames[E].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var L=!1,Q=0;Q!=e.sheets.length;++Q)typeof e.sheets[Q]=="number"&&e.sheets[Q]==E&&(L=1),typeof e.sheets[Q]=="string"&&e.sheets[Q].toLowerCase()==h.SheetNames[E].toLowerCase()&&(L=1);if(!L)continue e}}W0e(t,B,D,h.SheetNames[E],E,S,i,R,e,d,l,c)}return y={Directory:s,Workbook:d,Props:h,Custprops:m,Deps:x,Sheets:i,SheetNames:h.SheetNames,Strings:_x,Styles:c,Themes:l,SSF:ys(Er)},e&&e.bookFiles&&(t.files?(y.keys=n,y.files=t.files):(y.keys=[],y.files={},t.FullPaths.forEach(function(H,te){H=H.replace(/^Root Entry[\/]/,""),y.keys.push(H),y.files[H]=t.FileIndex[te]}))),e&&e.bookVBA&&(s.vba.length>0?y.vbaraw=Ta(t,ql(s.vba[0]),!0):s.defaults&&s.defaults.bin===mue&&(y.vbaraw=Ta(t,"xl/vbaProject.bin",!0))),y}function X0e(t,e){var r=e||{},n="Workbook",s=Ar.find(t,n);try{if(n="/!DataSpaces/Version",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Tle(s.content),n="/!DataSpaces/DataSpaceMap",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=Ble(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=kle(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);Fle(s.content)}catch{}if(n="/EncryptionInfo",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Dle(s.content);if(n="/EncryptedPackage",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function J0e(t,e){return e.bookType=="ods"?sH(t,e):e.bookType=="numbers"?q0e(t,e):e.bookType=="xlsb"?Z0e(t,e):epe(t,e)}function Z0e(t,e){Ip=1024,t&&!t.SSF&&(t.SSF=ys(Er)),t&&t.SSF&&(Dm(),cC(t.SSF),e.revssf=AC(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Sx?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=FQ.indexOf(e.bookType)>-1,s=W4();uB(e=e||{});var a=L4(),i="",o=0;if(e.cellXfs=[],Jf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",qr(a,i,$7(t.Props,e)),s.coreprops.push(i),Yn(e.rels,2,i,sn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,qr(a,i,X7(t.Props)),s.extprops.push(i),Yn(e.rels,3,i,sn.EXT_PROPS),t.Custprops!==t.Props&&Zs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",qr(a,i,J7(t.Custprops)),s.custprops.push(i),Yn(e.rels,4,i,sn.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,qr(a,i,Bhe(o-1,i,e,t,d)),s.sheets.push(i),Yn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,sn.WS[0])}if(h){var m=h["!comments"],y=!1,x="";m&&m.length>0&&(x="xl/comments"+o+"."+r,qr(a,x,Fhe(m,x)),s.comments.push(x),Yn(d,-1,"../comments"+o+"."+r,sn.CMNT),y=!0),h["!legacy"]&&y&&qr(a,"xl/drawings/vmlDrawing"+o+".vml",kQ(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&qr(a,r1(i),Kp(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,qr(a,i,Ihe(e.Strings,i,e)),s.strs.push(i),Yn(e.wbrels,-1,"sharedStrings."+r,sn.SST)),i="xl/workbook."+r,qr(a,i,Nhe(t,i)),s.workbooks.push(i),Yn(e.rels,1,i,sn.WB),i="xl/theme/theme1.xml",qr(a,i,tB(t.Themes,e)),s.themes.push(i),Yn(e.wbrels,-1,"theme/theme1.xml",sn.THEME),i="xl/styles."+r,qr(a,i,khe(t,i,e)),s.styles.push(i),Yn(e.wbrels,-1,"styles."+r,sn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",qr(a,i,t.vbaraw),s.vba.push(i),Yn(e.wbrels,-1,"vbaProject.bin",sn.VBA)),i="xl/metadata."+r,qr(a,i,Dhe(i)),s.metadata.push(i),Yn(e.wbrels,-1,"metadata."+r,sn.XLMETA),qr(a,"[Content_Types].xml",G7(s,e)),qr(a,"_rels/.rels",Kp(e.rels)),qr(a,"xl/_rels/workbook."+r+".rels",Kp(e.wbrels)),delete e.revssf,delete e.ssf,a}function epe(t,e){Ip=1024,t&&!t.SSF&&(t.SSF=ys(Er)),t&&t.SSF&&(Dm(),cC(t.SSF),e.revssf=AC(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Sx?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=FQ.indexOf(e.bookType)>-1,s=W4();uB(e=e||{});var a=L4(),i="",o=0;if(e.cellXfs=[],Jf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",qr(a,i,$7(t.Props,e)),s.coreprops.push(i),Yn(e.rels,2,i,sn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,qr(a,i,X7(t.Props)),s.extprops.push(i),Yn(e.rels,3,i,sn.EXT_PROPS),t.Custprops!==t.Props&&Zs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",qr(a,i,J7(t.Custprops)),s.custprops.push(i),Yn(e.rels,4,i,sn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],m=(p||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,qr(a,i,VQ(o-1,e,t,h)),s.sheets.push(i),Yn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,sn.WS[0])}if(p){var y=p["!comments"],x=!1,E="";if(y&&y.length>0){var S=!1;y.forEach(function(B){B[1].forEach(function(D){D.T==!0&&(S=!0)})}),S&&(E="xl/threadedComments/threadedComment"+o+"."+r,qr(a,E,oue(y,d,e)),s.threadedcomments.push(E),Yn(h,-1,"../threadedComments/threadedComment"+o+"."+r,sn.TCMNT)),E="xl/comments"+o+"."+r,qr(a,E,IQ(y)),s.comments.push(E),Yn(h,-1,"../comments"+o+"."+r,sn.CMNT),x=!0}p["!legacy"]&&x&&qr(a,"xl/drawings/vmlDrawing"+o+".vml",kQ(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}h["!id"].rId1&&qr(a,r1(i),Kp(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,qr(a,i,xQ(e.Strings,e)),s.strs.push(i),Yn(e.wbrels,-1,"sharedStrings."+r,sn.SST)),i="xl/workbook."+r,qr(a,i,$Q(t)),s.workbooks.push(i),Yn(e.rels,1,i,sn.WB),i="xl/theme/theme1.xml",qr(a,i,tB(t.Themes,e)),s.themes.push(i),Yn(e.wbrels,-1,"theme/theme1.xml",sn.THEME),i="xl/styles."+r,qr(a,i,SQ(t,e)),s.styles.push(i),Yn(e.wbrels,-1,"styles."+r,sn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",qr(a,i,t.vbaraw),s.vba.push(i),Yn(e.wbrels,-1,"vbaProject.bin",sn.VBA)),i="xl/metadata."+r,qr(a,i,BQ()),s.metadata.push(i),Yn(e.wbrels,-1,"metadata."+r,sn.XLMETA),d.length>1&&(i="xl/persons/person.xml",qr(a,i,cue(d)),s.people.push(i),Yn(e.wbrels,-1,"persons/person.xml",sn.PEOPLE)),qr(a,"[Content_Types].xml",G7(s,e)),qr(a,"_rels/.rels",Kp(e.rels)),qr(a,"xl/_rels/workbook."+r+".rels",Kp(e.wbrels)),delete e.revssf,delete e.ssf,a}function AB(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=wl(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function tpe(t,e){return Ar.find(t,"EncryptedPackage")?X0e(t,e):JQ(t,e)}function rpe(t,e){var r,n=t,s=e||{};return s.type||(s.type=Zr&&Buffer.isBuffer(t)?"buffer":"base64"),r=y7(n,s),Y0e(r,s)}function iH(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Z5(t.slice(r),e);default:break e}return hm.to_workbook(t,e)}function npe(t,e){var r="",n=AB(t,e);switch(e.type){case"base64":r=wl(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=n0(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=os(r)),e.type="binary",iH(r,e)}function spe(t,e){var r=t;return e.type=="base64"&&(r=wl(r)),r=Yx.utils.decode(1200,r.slice(2),"str"),e.type="binary",iH(r,e)}function ape(t){return t.match(/[^\x00-\x7F]/)?Qu(t):t}function rS(t,e,r,n){return n?(r.type="string",hm.to_workbook(t,r)):hm.to_workbook(e,r)}function c1(t,e){k4();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return c1(new Uint8Array(t),(r=ys(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Wp={},r.dateNF&&(Wp.dateNF=r.dateNF),r.type||(r.type=Zr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Zr?"buffer":"binary",n=Zse(t),typeof Uint8Array<"u"&&!Zr&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=ape(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=ys(r),r.type="array",c1(I4(n),r)}switch((s=AB(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return tpe(Ar.read(n,r),r);break;case 9:if(s[1]<=8)return JQ(n,r);break;case 60:return Z5(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return ule(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return mQ.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?rpe(n,r):rS(t,n,r,a);case 239:return s[3]===60?Z5(n,r):rS(t,n,r,a);case 255:if(s[1]===254)return spe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Vh.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Vh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return J5.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return CQ.to_workbook(n,r);break;case 10:case 13:case 32:return npe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return cle.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?J5.to_workbook(n,r):rS(t,n,r,a)}function oH(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return z1(e.file,Ar.write(t,{type:Zr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Ar.write(t,e)}function ipe(t,e){var r=ys(e||{}),n=J0e(t,r);return ope(n,r)}function ope(t,e){var r={},n=Zr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?Ar.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(lC(s))}return e.password&&typeof encrypt_agile<"u"?oH(encrypt_agile(s,e.password),e):e.type==="file"?z1(e.file,s):e.type=="string"?os(s):s}function lpe(t,e){var r=e||{},n=a0e(t,r);return oH(n,r)}function Ru(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return Xx(Qu(n));case"binary":return Qu(n);case"string":return t;case"file":return z1(e.file,n,"utf8");case"buffer":return Zr?cd(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ru(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function cpe(t,e){switch(e.type){case"base64":return Xx(t);case"binary":return t;case"string":return t;case"file":return z1(e.file,t,"binary");case"buffer":return Zr?cd(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Ty(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?Xx(r):e.type=="string"?os(r):r;case"file":return z1(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function lH(t,e){k4(),the(t);var r=ys(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=lH(t,r);return r.type="array",lC(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=t.SheetNames.indexOf(r.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ru(Jhe(t,r),r);case"slk":case"sylk":return Ru(pQ.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"htm":case"html":return Ru(eH(t.Sheets[t.SheetNames[s]],r),r);case"txt":return cpe(cH(t.Sheets[t.SheetNames[s]],r),r);case"csv":return Ru(fB(t.Sheets[t.SheetNames[s]],r),r,"\uFEFF");case"dif":return Ru(mQ.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"dbf":return Ty(J5.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"prn":return Ru(hm.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"rtf":return Ru(CQ.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"eth":return Ru(gQ.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"fods":return Ru(sH(t,r),r);case"wk1":return Ty(Vh.sheet_to_wk1(t.Sheets[t.SheetNames[s]],r),r);case"wk3":return Ty(Vh.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Ty(ZQ(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),lpe(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return ipe(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function upe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function dB(t,e,r){var n={};return n.type="file",n.file=e,upe(n),lH(t,n)}function Ape(t,e,r,n,s,a,i,o){var l=pa(r),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!i||t[r])for(var m=e.s.c;m<=e.e.c;++m){var y=i?t[r][m]:t[n[m]+l];if(y===void 0||y.t===void 0){if(c===void 0)continue;a[m]!=null&&(p[a[m]]=c);continue}var x=y.v;switch(y.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(a[m]!=null){if(x==null)if(y.t=="e"&&x===null)p[a[m]]=null;else if(c!==void 0)p[a[m]]=c;else if(d&&x===null)p[a[m]]=null;else continue;else p[a[m]]=d&&(y.t!=="n"||y.t==="n"&&o.rawNumbers!==!1)?x:nd(y,x,o);x!=null&&(h=!1)}}return{row:p,isempty:h}}function zw(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},d=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof d){case"string":l=Sn(d);break;case"number":l=Sn(t["!ref"]),l.s.r=d;break;default:l=d}n>0&&(s=0);var h=pa(l.s.r),p=[],m=[],y=0,x=0,E=Array.isArray(t),S=l.s.r,B=0,D={};E&&!t[S]&&(t[S]=[]);var I=c.skipHidden&&t["!cols"]||[],U=c.skipHidden&&t["!rows"]||[];for(B=l.s.c;B<=l.e.c;++B)if(!(I[B]||{}).hidden)switch(p[B]=Ls(B),r=E?t[S][B]:t[p[B]+h],n){case 1:a[B]=B-l.s.c;break;case 2:a[B]=p[B];break;case 3:a[B]=c.header[B-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=nd(r,null,c),x=D[i]||0,!x)D[i]=1;else{do o=i+"_"+x++;while(D[o]);D[i]=x,D[o]=1}a[B]=o}for(S=l.s.r+s;S<=l.e.r;++S)if(!(U[S]||{}).hidden){var F=Ape(t,l,S,p,n,a,E,c);(F.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(m[y++]=F.row)}return m.length=y,m}var cR=/"/g;function dpe(t,e,r,n,s,a,i,o){for(var l=!0,c=[],d="",h=pa(r),p=e.s.c;p<=e.e.c;++p)if(n[p]){var m=o.dense?(t[r]||[])[p]:t[n[p]+h];if(m==null)d="";else if(m.v!=null){l=!1,d=""+(o.rawNumbers&&m.t=="n"?m.v:nd(m,null,o));for(var y=0,x=0;y!==d.length;++y)if((x=d.charCodeAt(y))===s||x===a||x===34||o.forceQuotes){d='"'+d.replace(cR,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(l=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(cR,'""')+'"')):d="";c.push(d)}return o.blankrows===!1&&l?null:c.join(i)}function fB(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Sn(t["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((a=="|"?"\\|":a)+"+$"),d="",h=[];n.dense=Array.isArray(t);for(var p=n.skipHidden&&t["!cols"]||[],m=n.skipHidden&&t["!rows"]||[],y=s.s.c;y<=s.e.c;++y)(p[y]||{}).hidden||(h[y]=Ls(y));for(var x=0,E=s.s.r;E<=s.e.r;++E)(m[E]||{}).hidden||(d=dpe(t,s,E,h,i,l,a,n),d!=null&&(n.strip&&(d=d.replace(c,"")),(d||n.blankrows!==!1)&&r.push((x++?o:"")+d)));return delete n.dense,r.join("")}function cH(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=fB(t,e);return r}function fpe(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Sn(t["!ref"]),a="",i=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)i[o]=Ls(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=pa(d),o=s.s.c;o<=s.e.c;++o)if(e=i[o]+a,r=c?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function uH(t,e,r){var n=r||{},s=+!n.skipHeader,a=t||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Us(n.origin):n.origin;i=l.r,o=l.c}var c,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+s}};if(a["!ref"]){var h=Sn(a["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+e.length-1+s)}else i==-1&&(i=0,d.e.r=e.length-1+s);var p=n.header||[],m=0;e.forEach(function(x,E){Zs(x).forEach(function(S){(m=p.indexOf(S))==-1&&(p[m=p.length]=S);var B=x[S],D="z",I="",U=Nr({c:o+m,r:i+E+s});c=u1(a,U),B&&typeof B=="object"&&!(B instanceof Date)?a[U]=B:(typeof B=="number"?D="n":typeof B=="boolean"?D="b":typeof B=="string"?D="s":B instanceof Date?(D="d",n.cellDates||(D="n",B=qa(B)),I=n.dateNF||Er[14]):B===null&&n.nullError&&(D="e",B=0),c?(c.t=D,c.v=B,delete c.w,delete c.R,I&&(c.z=I)):a[U]=c={t:D,v:B},I&&(c.z=I))})}),d.e.c=Math.max(d.e.c,o+p.length-1);var y=pa(i);if(s)for(m=0;m<p.length;++m)a[Ls(m+o)+y]={t:"s",v:p[m]};return a["!ref"]=jr(d),a}function hpe(t,e){return uH(null,t,e)}function u1(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Us(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?u1(t,Nr(e)):u1(t,Nr({r:e,c:r||0}))}function ppe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function hB(){return{SheetNames:[],Sheets:{}}}function pB(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=i+s)!=-1;++s);}if(KQ(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function mpe(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=ppe(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function gpe(t,e){return t.z=e,t}function AH(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function xpe(t,e,r){return AH(t,"#"+e,r)}function vpe(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function ype(t,e,r,n){for(var s=typeof e!="string"?e:Sn(e),a=typeof e=="string"?e:jr(e),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=u1(t,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var sc={encode_col:Ls,encode_row:pa,encode_cell:Nr,encode_range:jr,decode_col:V4,decode_row:H4,split_cell:Iae,decode_cell:Us,decode_range:Vo,format_cell:nd,sheet_add_aoa:P7,sheet_add_json:uH,sheet_add_dom:tH,aoa_to_sheet:Rm,json_to_sheet:hpe,table_to_sheet:rH,table_to_book:T0e,sheet_to_csv:fB,sheet_to_txt:cH,sheet_to_json:zw,sheet_to_html:eH,sheet_to_formulae:fpe,sheet_to_row_object_array:zw,sheet_get_cell:u1,book_new:hB,book_append_sheet:pB,book_set_sheet_visibility:mpe,cell_set_number_format:gpe,cell_set_hyperlink:AH,cell_set_internal_link:xpe,cell_add_comment:vpe,sheet_set_array_formula:ype,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const wpe=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,s=0;const a=[];for(const l of r)try{const c=Ft(Yr,l),d=await Da(c),h=d.size;n+=h,a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:h});let p=0;d.docs.forEach(m=>{const y=m.data();y.createdAt&&new Date(y.createdAt)>=e&&p++}),s+=p}catch(c){console.warn(`Error accediendo a colección ${l}:`,c),a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=Ft(Yr,"apiLogs"),c=new Date(t.getTime()-10080*60*1e3),d=er(l,Mn("timestamp",">=",c.toISOString()),an("timestamp","desc")),h=await Da(d),p={};h.docs.forEach(m=>{const y=m.data(),x=new Date(y.timestamp).toLocaleDateString("es-CL");p[x]=(p[x]||0)+1}),Object.entries(p).sort(([m],[y])=>new Date(m).getTime()-new Date(y).getTime()).forEach(([m,y])=>{i.push({label:m,value:y})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(s*2.5);return{documentsCreatedToday:s,readsToday:o,writesToday:s,totalDocuments:n,collectionsActivity:a.sort((l,c)=>c.value-l.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadísticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},uR=500,ap=({title:t,value:e,description:r,alert:n})=>u.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),u.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),r&&u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),nS=({title:t,data:e,colorClass:r})=>{const n=q.useMemo(()=>Math.max(...e.map(s=>s.value),1),[e]);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),u.jsx("div",{className:"space-y-4",children:e.length>0?e.map(s=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:s.label}),u.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:s.value})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:u.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${s.value/n*100}%`}})})]},s.label)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},bpe=()=>{const[t,e]=q.useState([]),[r,n]=q.useState(!0),[s,a]=q.useState(null),[i,o]=q.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});q.useEffect(()=>{n(!0);const h=fre(y=>{e(y),n(!1)}),p=async()=>{try{const y=await wpe();o(y)}catch(y){console.error("Error al cargar estadísticas de Firestore:",y)}};p();const m=setInterval(p,300*1e3);return()=>{h(),clearInterval(m)}},[]);const{stats:l,userStats:c,moduleStats:d}=q.useMemo(()=>{const h=new Date,p=new Date(h.getFullYear(),h.getMonth(),h.getDate()).getTime(),m=p-h.getDay()*24*60*60*1e3,y=new Date(h.getFullYear(),h.getMonth(),1).getTime(),x={today:0,week:0,month:0},E={},S={};t.forEach(I=>{const U=new Date(I.timestamp).getTime();U>=p&&x.today++,U>=m&&x.week++,U>=y&&x.month++;const F=I.userEmail||"Desconocido";E[F]||(E[F]={email:F,today:0,month:0,total:0}),E[F].total++,U>=p&&E[F].today++,U>=y&&E[F].month++,S[I.module]=(S[I.module]||0)+1});const B=Object.values(E).sort((I,U)=>U.total-I.total),D=Object.entries(S).map(([I,U])=>({label:I,value:U})).sort((I,U)=>U.value-I.value);return{stats:x,userStats:B,moduleStats:D}},[t]);return u.jsxs("div",{className:"space-y-8",children:[s&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&u.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&t.length===0&&u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsx(ap,{title:"Llamadas Hoy",value:r?"--":l.today,description:`Límite recomendado: ${uR}`,alert:l.today>uR}),u.jsx(ap,{title:"Llamadas esta Semana",value:r?"--":l.week}),u.jsx(ap,{title:"Llamadas este Mes",value:r?"--":l.month})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[u.jsx(nS,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),u.jsx("div",{className:"overflow-x-auto max-h-96",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&c.length>0?c.map(h=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:h.email}),u.jsx("td",{className:"px-4 py-2 text-center text-sm",children:h.today}),u.jsx("td",{className:"px-4 py-2 text-center text-sm",children:h.month}),u.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:h.total})]},h.email)):u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsx(ap,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),u.jsx(ap,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),u.jsx(ap,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[u.jsx(nS,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),u.jsx(nS,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cpe="type.googleapis.com/google.protobuf.Int64Value",Epe="type.googleapis.com/google.protobuf.UInt64Value";function dH(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function Gw(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Gw(e));if(typeof t=="function"||typeof t=="object")return dH(t,e=>Gw(e));throw new Error("Data cannot be encoded in JSON: "+t)}function mm(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Cpe:case Epe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>mm(e)):typeof t=="function"||typeof t=="object"?dH(t,e=>mm(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oo extends eA{constructor(e,r,n){super(`${mB}/${e}`,r||""),this.details=n,Object.setPrototypeOf(this,Oo.prototype)}}function _pe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function qw(t,e){let r=_pe(t),n=r,s;try{const a=e&&e.error;if(a){const i=a.status;if(typeof i=="string"){if(!AR[i])return new Oo("internal","internal");r=AR[i],n=i}const o=a.message;typeof o=="string"&&(n=o),s=a.details,s!==void 0&&(s=mm(s))}}catch{}return r==="ok"?null:new Oo(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Spe{constructor(e,r,n,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,tc(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(a=>this.auth=a,()=>{}),this.messaging||n.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="us-central1",Tpe=/^data: (.*?)(?:\n|$)/;function Npe(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Oo("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Bpe{constructor(e,r,n,s,a=rT,i=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new Spe(e,r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=rT}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function kpe(t,e,r){const n=A0(e);t.emulatorOrigin=`http${n?"s":""}://${e}:${r}`,n&&(mN(t.emulatorOrigin),gN("Functions",!0))}function Ipe(t,e,r){const n=s=>Dpe(t,e,s,{});return n.stream=(s,a)=>Lpe(t,e,s,a),n}async function Fpe(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function fH(t,e){const r={},n=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function Dpe(t,e,r,n){const s=t._url(e);return Rpe(t,s,r,n)}async function Rpe(t,e,r,n){r=Gw(r);const s={data:r},a=await fH(t,n),i=n.timeout||7e4,o=Npe(i),l=await Promise.race([Fpe(e,s,a,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new Oo("cancelled","Firebase Functions instance was deleted.");const c=qw(l.status,l.json);if(c)throw c;if(!l.json)throw new Oo("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Oo("internal","Response is missing data field.");return{data:mm(d)}}function Lpe(t,e,r,n){const s=t._url(e);return Upe(t,s,r,n||{})}async function Upe(t,e,r,n){var p;r=Gw(r);const s={data:r},a=await fH(t,n);a["Content-Type"]="application/json",a.Accept="text/event-stream";let i;try{i=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:n==null?void 0:n.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new Oo("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const y=qw(0,null);return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}let o,l;const c=new Promise((m,y)=>{o=m,l=y});(p=n==null?void 0:n.signal)==null||p.addEventListener("abort",()=>{const m=new Oo("cancelled","Request was cancelled.");l(m)});const d=i.body.getReader(),h=Mpe(d,o,l,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:y,done:x}=await m.read();return{value:y,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function Mpe(t,e,r,n){const s=(i,o)=>{const l=i.match(Tpe);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(mm(d.result));return}if("message"in d){o.enqueue(mm(d.message));return}if("error"in d){const h=qw(0,d);o.error(h),r(h);return}}catch(d){if(d instanceof Oo){o.error(d),r(d);return}}},a=new TextDecoder;return new ReadableStream({start(i){let o="";return l();async function l(){if(n!=null&&n.aborted){const c=new Oo("cancelled","Request was cancelled");return i.error(c),r(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){o.trim()&&s(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const p=new Oo("cancelled","Request was cancelled");i.error(p),r(p),await t.cancel();return}o+=a.decode(c,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const p of h)p.trim()&&s(p.trim(),i);return l()}catch(c){const d=c instanceof Oo?c:qw(0,null);i.error(d),r(d)}}},cancel(){return t.cancel()}})}const dR="@firebase/functions",fR="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ppe="auth-internal",Ope="app-check-internal",jpe="messaging-internal";function Qpe(t){const e=(r,{instanceIdentifier:n})=>{const s=r.getProvider("app").getImmediate(),a=r.getProvider(Ppe),i=r.getProvider(jpe),o=r.getProvider(Ope);return new Bpe(s,a,i,o,n)};Xh(new Df(mB,e,"PUBLIC").setMultipleInstances(!0)),Hu(dR,fR,t),Hu(dR,fR,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t=wN(),e=rT){const n=Nb(Ns(t),mB).getImmediate({identifier:e}),s=j8("functions");return s&&Hpe(n,...s),n}function Hpe(t,e,r){kpe(Ns(t),e,r)}function ip(t,e,r){return Ipe(Ns(t),e)}Qpe();const hR=Ft(Yr,"usuarios");async function hH(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",hR);const t=await Da(hR);if(console.log(`📊 [DEBUG] Encontrados ${t.docs.length} documentos en la colección usuarios`),t.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const e=t.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",e.length),console.log("✅ [DEBUG] Lista completa de usuarios:",e),e}catch(t){throw console.error("❌ [DEBUG] Error al obtener usuarios:",t),console.error("❌ [DEBUG] Error details:",{code:t.code,message:t.message,stack:t.stack}),t}}const pR=Object.values(jt),sS=t=>t?t.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",Vpe=()=>{const[t,e]=q.useState([]),[r,n]=q.useState(!1),[s,a]=q.useState("Usuarios"),[i,o]=q.useState({nombreCompleto:"",email:"",rut:"",profile:jt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,c]=q.useState(null),[d,h]=q.useState(""),[p,m]=q.useState(""),[y,x]=q.useState(""),[E,S]=q.useState(null),[B,D]=q.useState(null),[I,U]=q.useState(null),F=q.useCallback(async()=>{n(!0);try{const V=await hH();e(V)}catch(V){console.error("Error al cargar usuarios",V),S("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);q.useEffect(()=>{F()},[F]);const C=q.useCallback(V=>{const{name:J,value:K}=V.target;o(ae=>({...ae,[J]:K,curso:J==="profile"&&K!==jt.ESTUDIANTE?"":ae.curso,cursos:J==="profile"&&K!==jt.PROFESORADO?[]:ae.cursos,asignaturas:J==="profile"&&K!==jt.PROFESORADO?[]:ae.asignaturas}))},[]),_=q.useCallback((V,J)=>{o(K=>{const ae=K[V]||[],O=ae.includes(J)?ae.filter(W=>W!==J):[...ae,J];return{...K,[V]:O}})},[]),N=q.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:jt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),c(null),S(null)},[]),j=q.useCallback(async V=>{V.preventDefault(),S(null);const{nombreCompleto:J,email:K,profile:ae,curso:O,password:W}=i;if(!J.trim()||!K.trim()){S("Nombre Completo y Email son obligatorios.");return}if(ae===jt.ESTUDIANTE&&!O){S('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(W!=null&&W.trim())){S("La contraseña es obligatoria al crear un nuevo usuario.");return}const Z=Ig();try{if(l){const ne=ip(Z,"updateUser"),le={...i,password:(W==null?void 0:W.trim())||void 0,curso:ae===jt.ESTUDIANTE?sS(O||""):void 0};await ne(le)}else{const ne=ip(Z,"createUser"),le={...i,curso:ae===jt.ESTUDIANTE?sS(O||""):void 0};await ne(le)}await F(),N()}catch(ne){console.error("Error al guardar usuario:",ne),S(ne.message||"Error al guardar el usuario.")}},[i,l,F,N]),R=q.useCallback(V=>{c(V.email),o({nombreCompleto:V.nombreCompleto,email:V.email,rut:V.rut||"",profile:V.profile,password:"",curso:V.curso||"",cursos:V.cursos||[],asignaturas:V.asignaturas||[]}),setTimeout(()=>{const J=document.querySelector("form");J&&J.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),L=q.useCallback(async V=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${V}? Esta acción es irreversible.`))try{const J=Ig();await ip(J,"deleteUser")({email:V}),await F()}catch(J){console.error("Error al eliminar usuario:",J),S(J.message||"No se pudo borrar el usuario.")}},[F]),Q=async V=>{var W;const J=(W=V.target.files)==null?void 0:W[0];if(!J)return;D({message:"Procesando archivo...",isError:!1});const K=Ig(),ae=ip(K,"createUser"),O=new FileReader;O.onload=async Z=>{var ne;try{const le=new Uint8Array((ne=Z.target)==null?void 0:ne.result),ve=c1(le,{type:"array"}),pe=ve.Sheets[ve.SheetNames[0]],he=sc.sheet_to_json(pe);if(he.length===0){D({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const de=he.map(Ie=>{const Ee=Ie.Nombre||Ie.nombre,De=Ie.Correo||Ie.correo||Ie.Email||Ie.email,je=Ie.Curso||Ie.curso,We=Ie.RUT||Ie.rut;return!Ee||!De||!je?Promise.resolve({email:De||"Sin email",error:"Datos incompletos"}):ae({nombreCompleto:String(Ee).trim(),email:String(De).trim(),profile:jt.ESTUDIANTE,curso:sS(String(je).trim()),rut:We?String(We).trim():"",password:"recoleta"}).catch(ct=>({email:De,error:ct.message}))}),ce=await Promise.all(de),oe=ce.filter(Ie=>!Ie.error).length,Re=ce.filter(Ie=>Ie.error);let qe=`Carga completada. ${oe} estudiantes agregados.`;Re.length>0&&(qe+=` ${Re.length} fallaron.`,console.error("Errores en carga masiva:",Re)),D({message:qe,isError:Re.length>0}),await F()}catch(le){D({message:`Error: ${le.message}`,isError:!0})}},O.readAsArrayBuffer(J),V.target.value=""},H=async V=>{var W;const J=(W=V.target.files)==null?void 0:W[0];if(!J)return;U({message:"Procesando archivo...",isError:!1});const K=Ig(),ae=ip(K,"createUser"),O=new FileReader;O.onload=async Z=>{var ne;try{const le=new Uint8Array((ne=Z.target)==null?void 0:ne.result),ve=c1(le,{type:"array"}),pe=ve.Sheets[ve.SheetNames[0]],he=sc.sheet_to_json(pe);if(he.length===0){U({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const de=he.map(Ie=>{const Ee=Ie.Nombre||Ie.nombre,De=Ie.Correo||Ie.correo||Ie.Email||Ie.email,je=Ie.Perfil||Ie.perfil||Ie.Profile||Ie.profile,We=Ie.RUT||Ie.rut;return!Ee||!De||!je?Promise.resolve({email:De||"Sin email",error:"Datos incompletos"}):ae({nombreCompleto:String(Ee).trim(),email:String(De).trim(),profile:je,rut:We?String(We).trim():"",password:"recoleta"}).catch(ct=>({email:De,error:ct.message}))}),ce=await Promise.all(de),oe=ce.filter(Ie=>!Ie.error).length,Re=ce.filter(Ie=>Ie.error);let qe=`Carga completada. ${oe} usuarios agregados.`;Re.length>0&&(qe+=` ${Re.length} fallaron.`,console.error("Errores en carga masiva:",Re)),U({message:qe,isError:Re.length>0}),await F()}catch(le){U({message:`Error: ${le.message}`,isError:!0})}},O.readAsArrayBuffer(J),V.target.value=""},te="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Y=q.useMemo(()=>Array.from(new Set(t.filter(V=>V.profile===jt.ESTUDIANTE&&V.curso).map(V=>V.curso))).sort(),[t]),re=q.useMemo(()=>t.filter(V=>(d===""||V.nombreCompleto.toLowerCase().includes(d.toLowerCase())||V.email.toLowerCase().includes(d.toLowerCase()))&&(p===""||V.profile===p)&&(y===""||V.curso===y)),[t,d,p,y]);return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx("button",{onClick:()=>a("Usuarios"),className:`${s==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),u.jsx("button",{onClick:()=>a("Monitor de Uso"),className:`${s==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),s==="Usuarios"&&u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),u.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:Q,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),u.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),B&&u.jsx("p",{className:`text-sm mt-2 ${B.isError?"text-red-600":"text-green-600"}`,children:B.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),u.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:H,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),u.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),I&&u.jsx("p",{className:`text-sm mt-2 ${I.isError?"text-red-600":"text-green-600"}`,children:I.message})]})]})]}),u.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),u.jsxs("form",{onSubmit:j,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),u.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:C,className:te,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:i.email,onChange:C,className:te,required:!0,readOnly:!!l})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),u.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:C,placeholder:l?"Dejar en blanco para no cambiar":"Contraseña temporal",className:te})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),u.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:C,placeholder:"12.345.678-9",className:te})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),u.jsx("select",{name:"profile",value:i.profile,onChange:C,className:te,required:!0,children:pR.map(V=>u.jsx("option",{value:V,children:V},V))})]}),i.profile===jt.ESTUDIANTE&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:i.curso,onChange:C,className:te,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un curso"}),ha.map(V=>u.jsx("option",{value:V,children:V},V))]})]})]}),i.profile===jt.PROFESORADO&&u.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[u.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[u.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ha.map(V=>{var J;return u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[u.jsx("input",{type:"checkbox",checked:((J=i.cursos)==null?void 0:J.includes(V))||!1,onChange:()=>_("cursos",V),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),i.profile===jt.PROFESORADO&&u.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[u.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[u.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:yl.map(V=>{var J;return u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[u.jsx("input",{type:"checkbox",checked:((J=i.asignaturas)==null?void 0:J.includes(V))||!1,onChange:()=>_("asignaturas",V),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),E&&u.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:E}),u.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&u.jsx("button",{type:"button",onClick:N,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const V=Ig(),K=await ip(V,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",K),S("✅ Custom claim agregado exitosamente")}catch(V){console.error("❌ Error al agregar custom claim:",V),S(`Error: ${V.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),u.jsx("button",{type:"button",onClick:async()=>{var V,J,K,ae,O;try{const{auth:W}=await Tw(async()=>{const{auth:le}=await Promise.resolve().then(()=>ree);return{auth:le}},void 0);console.log("🔍 Usuario actual:",(V=W.currentUser)==null?void 0:V.email);const Z=await((J=W.currentUser)==null?void 0:J.getIdToken(!0));console.log("🔑 Token refreshed:",!!Z);const ne=await((K=W.currentUser)==null?void 0:K.getIdTokenResult());console.log("📋 Claims completos:",ne==null?void 0:ne.claims),console.log("👤 Profile claim:",(ae=ne==null?void 0:ne.claims)==null?void 0:ae.profile),((O=ne==null?void 0:ne.claims)==null?void 0:O.profile)==="SUBDIRECCION"?S("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):S(`❌ Custom claim faltante. Claims: ${JSON.stringify(ne==null?void 0:ne.claims)}`)}catch(W){console.error("❌ Error verificando token:",W),S(`Error verificando token: ${W.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[u.jsx("div",{children:u.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:V=>h(V.target.value),className:te})}),u.jsx("div",{children:u.jsxs("select",{value:p,onChange:V=>m(V.target.value),className:te,children:[u.jsx("option",{value:"",children:"Todos los perfiles"}),pR.map(V=>u.jsx("option",{value:V,children:V},V))]})}),u.jsx("div",{children:u.jsxs("select",{value:y,onChange:V=>x(V.target.value),className:te,children:[u.jsx("option",{value:"",children:"Todos los cursos"}),Y.map(V=>u.jsx("option",{value:V,children:V},V))]})})]}),r?u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):u.jsxs("div",{className:"overflow-x-auto",children:[u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:re.map(V=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:V.nombreCompleto}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:V.email}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:u.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.profile===jt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":V.profile===jt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:V.profile})}),u.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[V.profile===jt.ESTUDIANTE&&u.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:V.curso||"Sin curso"}),V.profile===jt.PROFESORADO&&u.jsxs("div",{className:"space-y-1",children:[V.cursos&&V.cursos.length>0&&u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),u.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.cursos.slice(0,3).map(J=>u.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:J},J)),V.cursos.length>3&&u.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.cursos.length-3]})]})]}),V.asignaturas&&V.asignaturas.length>0&&u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),u.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.asignaturas.slice(0,2).map(J=>u.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:J},J)),V.asignaturas.length>2&&u.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.asignaturas.length-2]})]})]}),(!V.cursos||V.cursos.length===0)&&(!V.asignaturas||V.asignaturas.length===0)&&u.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),V.profile!==jt.ESTUDIANTE&&V.profile!==jt.PROFESORADO&&u.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[u.jsx("button",{onClick:()=>R(V),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),u.jsx("button",{onClick:()=>L(V.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},V.email))})]}),re.length===0&&u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:t.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),s==="Monitor de Uso"&&u.jsx(bpe,{})]})},gm="seguimiento_dual_records",zpe=t=>{const e=t.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:t.id,...e,fechaDesvinculacion:r(e.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(e.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(e.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(e.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(e.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(e.fechaSupervisionExcepcional)}},Gpe=t=>{const e=er(Ft(Tt,gm),an("nombreEstudiante","asc"));return gr(e,n=>{const s=n.docs.map(a=>zpe(a));t(s)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),t([])})},Kw=t=>{const e={...t};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{e[n]&&typeof e[n]=="string"&&(e[n]=ur.fromDate(new Date(e[n]+"T00:00:00")))}),e},qpe=async t=>{try{const e=Kw(t);return(await ws(Ft(Tt,gm),e)).id}catch(e){throw console.error("Error al crear el registro:",e),new Error("No se pudo crear el registro de seguimiento.")}},mR=async(t,e)=>{try{const r=mr(Tt,gm,t),n=Kw(e);await Ti(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},Kpe=async t=>{try{const e=mr(Tt,gm,t);await li(e)}catch(e){throw console.error("Error al eliminar el registro:",e),new Error("No se pudo eliminar el registro.")}},$pe=async t=>{const e=m4(Tt),r=Ft(Tt,gm);let n=0,s=0;for(const a of t){const i=er(r,Mn("rutEstudiante","==",a.rutEstudiante)),o=await Da(i);if(o.empty){const l=mr(r);e.set(l,Kw(a)),s++}else{const l=o.docs[0].id,c=mr(Tt,gm,l);e.set(c,Kw(a),{merge:!0}),n++}}return await e.commit(),{updated:n,created:s}},Wpe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},Ype=t=>{if(!t||t===""||t==="N/A"||t==="Pendiente")return null;try{if(typeof t=="number"){const e=new Date(1900,0,1),r=new Date(e.getTime()+(t-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(t instanceof Date)return isNaN(t.getTime())?null:t.toISOString().split("T")[0];if(typeof t=="string"){const e=t.trim();if(e==="")return null;const r=new Date(e);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(e){return console.warn("Error parsing date:",t,e),null}},Xpe=t=>{if(typeof t=="boolean")return t;if(typeof t=="string"){const e=t.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(e)}return typeof t=="number"?t===1:!1},Jpe=({record:t,onSave:e,onClose:r})=>{const[n,s]=q.useState(t),a="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:c,value:d,type:h,checked:p}=l.target;s(m=>({...m,[c]:h==="checkbox"?p:d}))},o=()=>{e(n)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:t.nombreEstudiante})]})]}),u.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),u.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),u.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]})]})]}),u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),u.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),u.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]})]})]}),u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),u.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]})]})]}),u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),u.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:a+" mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),u.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:a+" mt-1"})]})]})]})]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),u.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Zpe=()=>{const[t,e]=q.useState([]),[r,n]=q.useState(!0),s=q.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Oh[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:N_[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[a,i]=q.useState(s),[o,l]=q.useState(null),[c,d]=q.useState(""),[h,p]=q.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,y]=q.useState(null),[x,E]=q.useState(null),[S,B]=q.useState(!1),[D,I]=q.useState(null);q.useEffect(()=>{n(!0);const V=Gpe(J=>{e(J),n(!1)});return()=>V()},[]);const U=q.useCallback(V=>{const{name:J,value:K}=V.target;i(ae=>({...ae,[J]:K}))},[]),F=q.useCallback(V=>{const{name:J,value:K}=V.target;p(ae=>({...ae,[J]:K}))},[]),C=q.useCallback(()=>{i(s),l(null),y(null)},[s]),_=async V=>{V.preventDefault(),y(null);const K=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ae=>{var O;return!((O=a[ae])!=null&&O.trim())});if(K){y(`El campo '${K}' es obligatorio.`);return}try{o?await mR(o,a):await qpe(a),C()}catch(ae){console.error(ae),y("No se pudo guardar el registro.")}},N=q.useCallback(V=>{window.scrollTo({top:0,behavior:"smooth"}),l(V.id),i(V)},[]),j=async V=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await Kpe(V)}catch(J){console.error(J),y("No se pudo eliminar el registro.")}},R=V=>{I(V),B(!0)},L=()=>{I(null),B(!1)},Q=async V=>{try{await mR(V.id,V),L()}catch(J){console.error(J),alert("No se pudieron guardar los cambios de supervisión.")}},H=()=>{const V=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],J=sc.aoa_to_sheet([V]),K=sc.book_new();sc.book_append_sheet(K,J,"Plantilla"),dB(K,"Plantilla_Seguimiento_Dual.xlsx")},te=V=>{var ae;const J=(ae=V.target.files)==null?void 0:ae[0];if(!J)return;E({message:"Procesando archivo...",isError:!1});const K=new FileReader;K.onload=async O=>{var W;try{const Z=new Uint8Array((W=O.target)==null?void 0:W.result),ne=c1(Z,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),le=ne.SheetNames[0],ve=ne.Sheets[le],pe=sc.sheet_to_json(ve,{raw:!1,dateNF:"yyyy-mm-dd"});if(pe.length===0)throw new Error("El archivo está vacío.");const he={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},de=Object.keys(pe[0]).map(qe=>qe.trim().toLowerCase()),oe=["nombre","rut","curso 2025","empresa","estado"].find(qe=>!de.includes(qe));if(oe)throw new Error(`Falta la columna requerida: '${oe}'`);const Re=pe.map((qe,Ie)=>{try{const Ee={};for(const De in qe){const je=he[De.trim().toLowerCase()];if(je){let We=qe[De];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(je)?(We=Ype(We),We&&(Ee[je]=We)):je.includes("realizada")?Ee[je]=Xpe(We):We!=null&&We!==""&&(Ee[je]=String(We).trim())}}return!Ee.nombreEstudiante||!Ee.rutEstudiante?(console.warn(`Fila ${Ie+2}: Faltan campos requeridos`),null):Ee}catch(Ee){return console.error(`Error procesando fila ${Ie+2}:`,Ee),null}}).filter(qe=>qe!==null);if(console.log("Registros procesados:",Re),Re.length>0){const{updated:qe,created:Ie}=await $pe(Re);E({message:`Carga exitosa. ${Ie} registros creados, ${qe} actualizados.`,isError:!1})}else E({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(Z){console.error("Error completo:",Z),E({message:`Error al procesar el archivo: ${Z.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},K.readAsArrayBuffer(J)},Y="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",re=q.useMemo(()=>t.filter(V=>(c===""||V.nombreEstudiante.toLowerCase().includes(c.toLowerCase())||V.nombreEmpresa.toLowerCase().includes(c.toLowerCase())||V.rutEstudiante.includes(c))&&(h.curso===""||V.curso===h.curso)&&(h.empresa===""||V.nombreEmpresa===h.empresa)&&(h.estado===""||V.estado===h.estado)&&(h.comuna===""||V.comuna===h.comuna)&&(h.profesor===""||V.profesorTutorEmpresa===h.profesor)).sort((V,J)=>V.nombreEstudiante.localeCompare(J.nombreEstudiante)),[t,c,h]);return q.useMemo(()=>{const V=new Set,J=new Set;return t.forEach(K=>{K.nombreEmpresa&&V.add(K.nombreEmpresa),K.comuna&&J.add(K.comuna)}),{empresas:Array.from(V).sort(),comunas:Array.from(J).sort()}},[t]),r?u.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),u.jsxs("form",{onSubmit:_,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),u.jsx("input",{type:"text",name:"nombreEstudiante",value:a.nombreEstudiante,onChange:U,className:Y,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),u.jsx("input",{type:"text",name:"rutEstudiante",value:a.rutEstudiante,onChange:U,className:Y,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsx("select",{name:"curso",value:a.curso,onChange:U,className:Y,required:!0,children:Oh.map(V=>u.jsx("option",{value:V,children:V},V))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),u.jsxs("select",{name:"profesorTutorEmpresa",value:a.profesorTutorEmpresa,onChange:U,className:Y,children:[u.jsx("option",{value:"",children:"Seleccione un profesor"}),N5.map(V=>u.jsx("option",{value:V,children:V},V))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),u.jsx("input",{type:"text",name:"nombreEmpresa",value:a.nombreEmpresa,onChange:U,className:Y,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),u.jsx("input",{type:"text",name:"rutEmpresa",value:a.rutEmpresa,onChange:U,className:Y})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),u.jsx("input",{type:"text",name:"direccionEmpresa",value:a.direccionEmpresa,onChange:U,className:Y})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),u.jsx("input",{type:"text",name:"comuna",value:a.comuna,onChange:U,className:Y})]}),u.jsxs("div",{className:"lg:col-span-4",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),u.jsx("select",{name:"estado",value:a.estado,onChange:U,className:Y,children:N_.map(V=>u.jsx("option",{value:V,children:V},V))})]})]}),a.estado==="Desvinculado"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),u.jsx("input",{type:"date",name:"fechaDesvinculacion",value:a.fechaDesvinculacion||"",onChange:U,className:`${Y} border-red-300`})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),u.jsx("input",{type:"text",name:"motivoDesvinculacion",value:a.motivoDesvinculacion||"",onChange:U,className:`${Y} border-red-300`})]})]}),m&&u.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),u.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&u.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[u.jsx("button",{onClick:H,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),u.jsx("input",{type:"file",onChange:te,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&u.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[u.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:c,onChange:V=>d(V.target.value),className:`${Y} md:col-span-2 lg:col-span-1`}),u.jsxs("select",{name:"curso",value:h.curso,onChange:F,className:Y,children:[u.jsx("option",{value:"",children:"Todos los Cursos"}),Oh.map(V=>u.jsx("option",{children:V},V))]}),u.jsxs("select",{name:"estado",value:h.estado,onChange:F,className:Y,children:[u.jsx("option",{value:"",children:"Todos los Estados"}),N_.map(V=>u.jsx("option",{children:V},V))]}),u.jsxs("select",{name:"profesor",value:h.profesor,onChange:F,className:Y,children:[u.jsx("option",{value:"",children:"Todos los Profesores"}),N5.map(V=>u.jsx("option",{children:V},V))]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:re.map(V=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:V.nombreEstudiante}),u.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:V.curso})]}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.nombreEmpresa}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.profesorTutorEmpresa}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Wpe[V.estado]}`,children:V.estado})}),u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[u.jsx("button",{onClick:()=>R(V),className:"text-blue-600 hover:underline",children:"Supervisión"}),u.jsx("button",{onClick:()=>N(V),className:"text-yellow-600 hover:underline",children:"Editar"}),u.jsx("button",{onClick:()=>j(V.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},V.id))})]})})]}),S&&D&&u.jsx(Jpe,{record:D,onClose:L,onSave:Q})]})},pH="actividades_remotas",eme="respuestas_actividades",tme="usuarios",gB=t=>{var r,n,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},rme=t=>{const e=er(Ft(Tt,pH),an("fechaCreacion","desc"));return gr(e,n=>{const s=n.docs.map(a=>gB(a));t(s)},n=>{console.error("Error al suscribirse a las actividades:",n),t([])})},nme=async t=>{try{const e={...t,fechaCreacion:ur.fromDate(new Date),plazoEntrega:ur.fromDate(new Date(t.plazoEntrega+"T00:00:00"))};return(await ws(Ft(Tt,pH),e)).id}catch(e){throw console.error("Error al crear la actividad:",e),new Error("No se pudo crear la actividad.")}},sme=t=>{const e=er(Ft(Tt,eme));return gr(e,n=>{const s=n.docs.map(a=>gB(a));t(s)},n=>{console.error("Error al suscribirse a las respuestas:",n),t([])})},ame=t=>{const e=er(Ft(Tt,tme));return gr(e,n=>{const s=n.docs.map(a=>gB(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},aS={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},ime=t=>new Promise((e,r)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=s=>r(s)}),ome=()=>{const[t,e]=q.useState([]),[r,n]=q.useState([]),[s,a]=q.useState([]),[i,o]=q.useState(null),[l,c]=q.useState(!1),[d,h]=q.useState(!1),[p,m]=q.useState(!0),[y,x]=q.useState(null),[E,S]=q.useState(""),[B,D]=q.useState(null),[I,U]=q.useState([]),F={asignatura:yl[0],nivel:_w[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[C,_]=q.useState(F);q.useEffect(()=>{m(!0);const pe=rme(e),he=sme(n),de=ame(ce=>{a(ce),m(!1)});return()=>{pe(),he(),de()}},[]);const N=pe=>{_(he=>({...he,[pe.target.name]:pe.target.value}))},j=pe=>{_(he=>({...he,recursos:{...he.recursos,[pe.target.name]:pe.target.value}}))},R=pe=>{pe.target.files&&U(Array.from(pe.target.files))},L=pe=>{_(he=>{const de=he.tipos.includes(pe)?he.tipos.filter(oe=>oe!==pe):[...he.tipos,pe],ce={...he.cantidadPreguntas};return de.includes(pe)?ce[pe]||(ce[pe]=aS[pe][0]):delete ce[pe],{...he,tipos:de,cantidadPreguntas:ce}})},Q=(pe,he)=>{_(de=>({...de,cantidadPreguntas:{...de.cantidadPreguntas,[pe]:he}}))},H=pe=>{_(he=>{var ce;const de=(ce=he.cursosDestino)!=null&&ce.includes(pe)?he.cursosDestino.filter(oe=>oe!==pe):[...he.cursosDestino||[],pe];return{...he,cursosDestino:de}})},te=pe=>{_(he=>{var ce;const de=(ce=he.estudiantesDestino)!=null&&ce.includes(pe)?he.estudiantesDestino.filter(oe=>oe!==pe):[...he.estudiantesDestino||[],pe];return{...he,estudiantesDestino:de}})},Y=()=>{const{tipos:pe,contenido:he,asignatura:de,nivel:ce,cantidadPreguntas:oe}=C;let Re=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${he}"
Asignatura: ${de}
Nivel: ${ce}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${he}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return pe.forEach(qe=>{const Ie=oe[qe]||aS[qe][0];switch(qe){case"Quiz":Re+=`- **Quiz**: Un array de ${Ie} objetos. Cada objeto debe tener: "pregunta" (string), "opciones" (array de 4 strings) y "respuestaCorrecta" (string).
`;break;case"Comprensión de Lectura":Re+=`- **Comprensión de Lectura**: Un array de ${Ie} objetos. Cada objeto debe tener "texto" (string de 150-200 palabras) y "preguntas" (un array de 4 objetos, cada uno con "pregunta", "opciones" y "respuestaCorrecta").
`;break;case"Términos Pareados":Re+=`- **Términos Pareados**: Un array de ${Ie} objetos. Cada objeto debe tener "concepto" (string) y "definicion" (string).
`;break;case"Desarrollo":Re+=`- **Desarrollo**: Un array de ${Ie} objetos. Cada objeto debe tener una clave "pregunta" (string con la pregunta) y una clave "rubrica" (string con la rúbrica de evaluación).
`;break}}),Re};function re(pe,he){if(pe==="Desarrollo"){if(Array.isArray(he))return he.map(de=>{if(typeof de=="string"){const ce=de.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return ce?{pregunta:ce[1].trim(),rubrica:ce[2].trim()}:{pregunta:de.trim(),rubrica:""}}return de&&typeof de=="object"?{pregunta:de.pregunta||de.Pregunta||de.texto||"",rubrica:de.rubrica||de.Rubrica||de.rúbrica||de.Rúbrica||""}:{pregunta:String(de),rubrica:""}});if(typeof he=="string")return he.split(/\n\n|\n- |\d+\. /).map(de=>{const ce=de.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return ce?{pregunta:ce[1].trim(),rubrica:ce[2].trim()}:{pregunta:de.trim(),rubrica:""}}).filter(de=>de.pregunta)}if(pe==="Términos Pareados"){if(Array.isArray(he))return he.map((de,ce)=>{if(typeof de=="string"){const oe=de.match(/^(.+?)[\s:-–]+(.+)$/);return oe?{id:ce,concepto:oe[1].trim(),definicion:oe[2].trim()}:{id:ce,concepto:de.trim(),definicion:""}}return de&&typeof de=="object"?{id:ce,concepto:de.concepto||de.termino||"",definicion:de.definicion||de.significado||""}:{id:ce,concepto:String(de),definicion:""}});if(typeof he=="object"&&he!==null)return Object.entries(he).map(([de,ce],oe)=>({id:oe,concepto:de,definicion:ce}));if(typeof he=="string")return he.split(/\n|;/).map((de,ce)=>{const oe=de.match(/^(.+?)[\s:-–]+(.+)$/);return oe?{id:ce,concepto:oe[1].trim(),definicion:oe[2].trim()}:{id:ce,concepto:de.trim(),definicion:""}}).filter(de=>de.concepto)}if(pe==="Comprensión de Lectura"){if(he&&typeof he=="object"&&Array.isArray(he.preguntas))return{texto:he.texto||"",preguntas:he.preguntas.map(de=>({pregunta:de.pregunta||de.Pregunta||"",opciones:de.opciones||de.Opciones||[],respuestaCorrecta:de.respuestaCorrecta||de.respuesta||""}))};if(Array.isArray(he)){const de=he.find(ce=>ce&&typeof ce=="object"&&"texto"in ce&&"preguntas"in ce);return de?{texto:de.texto||"",preguntas:(de.preguntas||[]).map(ce=>({pregunta:ce.pregunta||ce.Pregunta||"",opciones:ce.opciones||ce.Opciones||[],respuestaCorrecta:ce.respuestaCorrecta||ce.respuesta||""}))}:{texto:he.map(ce=>typeof ce=="string"?ce:JSON.stringify(ce)).join(`
`),preguntas:[]}}if(typeof he=="string"){const[de,ce]=he.split(/Preguntas:|\nPreguntas:/i);let oe=[];return ce&&(oe=ce.split(/\n- |\n\d+\. /).filter(Boolean).map(Re=>{const qe=Re.split(/Opciones:|\nOpciones:/i),Ie=qe[0].trim();let Ee=[],De="";qe[1]&&(Ee=qe[1].split(/;|\n|,/).map(We=>We.trim()).filter(Boolean));const je=Re.match(/Respuesta\s*correcta\s*:?\s*(.*)/i);return je&&(De=je[1].trim()),{pregunta:Ie,opciones:Ee,respuestaCorrecta:De}})),{texto:(de==null?void 0:de.trim())||he,preguntas:oe}}}return he}const V=async pe=>{var he;if(pe.preventDefault(),!C.contenido.trim()||C.tipos.length===0){x("Contenido y al menos un tipo de actividad son obligatorios.");return}h(!0),x(null);try{const de=await Promise.all(I.map(async ot=>({nombre:ot.name,url:await ime(ot)}))),ce="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Re=new Ra(ce).getGenerativeModel({model:"gemini-1.5-flash-latest"}),qe=Y(),je=(await(await(await Re.generateContent(qe)).response).text()).replace(/^```json\s*|```\s*$/g,""),We=JSON.parse(je),ct={};for(const ot of C.tipos)ct[ot]=re(ot,(he=We.actividades)==null?void 0:he[ot]);const wt={id:"",fechaCreacion:new Date().toISOString(),...C,recursos:{...C.recursos,archivos:de},introduccion:We.introduccion,generatedContent:ct};D(wt)}catch(de){console.error("Error al generar actividad con IA",de),x("Error al generar la actividad. Por favor, revise el contenido e inténtelo de nuevo. Detalle: "+de.message)}finally{h(!1)}},J=async()=>{if(B)try{await nme(B),_(F),U([]),c(!1),D(null)}catch(pe){console.error("Error al guardar la actividad:",pe),x("No se pudo guardar la actividad en la base de datos.")}},K=q.useMemo(()=>{var de,ce;if(!i||!s)return[];const pe=s.filter(oe=>{var Re;return oe.profile===jt.ESTUDIANTE&&((Re=i.cursosDestino)==null?void 0:Re.includes(oe.curso||""))}).map(oe=>oe.nombreCompleto),he=i.estudiantesDestino||[];if(!((de=i.cursosDestino)!=null&&de.length)&&!((ce=i.estudiantesDestino)!=null&&ce.length)){const oe=i.nivel.charAt(0);return s.filter(Re=>{var qe;return Re.profile===jt.ESTUDIANTE&&((qe=Re.curso)==null?void 0:qe.startsWith(oe))}).map(Re=>Re.nombreCompleto).sort()}return Array.from(new Set([...pe,...he])).sort()},[i,s]),ae=q.useMemo(()=>r.filter(pe=>pe.actividadId===(i==null?void 0:i.id)),[r,i]),O=q.useMemo(()=>s.filter(pe=>pe.profile===jt.ESTUDIANTE).sort((pe,he)=>pe.nombreCompleto.localeCompare(he.nombreCompleto)),[s]),W=q.useMemo(()=>E.trim()?O.filter(pe=>pe.nombreCompleto.toLowerCase().includes(E.toLowerCase())):O,[O,E]),Z=()=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:[i==null?void 0:i.asignatura," - ",i==null?void 0:i.tipos.join(", ")]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",i==null?void 0:i.nivel," | Plazo: ",i==null?void 0:i.plazoEntrega]})]}),u.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),u.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:K.map(pe=>{const he=ae.find(de=>de.estudianteId===pe);return u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:pe}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:he?u.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):u.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:he?`${he.puntaje}/${he.puntajeMaximo}`:"-"}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:he?new Date(he.fechaCompletado).toLocaleString("es-CL"):"-"})]},pe)})})]})})]})]}),ne=()=>{var pe,he;return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),u.jsx("button",{onClick:()=>c(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),u.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),u.jsxs("form",{onSubmit:V,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),u.jsx("select",{name:"asignatura",value:C.asignatura,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm",children:yl.map(de=>u.jsx("option",{value:de,children:de},de))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),u.jsx("select",{name:"nivel",value:C.nivel,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm",children:_w.map(de=>u.jsx("option",{value:de,children:de},de))})]}),u.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),u.jsx("textarea",{name:"instrucciones",value:(pe=C.recursos)==null?void 0:pe.instrucciones,onChange:j,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),u.jsx("textarea",{name:"enlaces",value:(he=C.recursos)==null?void 0:he.enlaces,onChange:j,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),u.jsx("input",{type:"file",multiple:!0,onChange:R,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),u.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:ha.map(de=>{var ce;return u.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:(ce=C.cursosDestino)==null?void 0:ce.includes(de),onChange:()=>H(de),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-sm font-medium text-slate-700",children:de})]},de)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),u.jsx("input",{type:"text",placeholder:"Buscar...",value:E,onChange:de=>S(de.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:W.map(de=>{var ce;return u.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:(ce=C.estudiantesDestino)==null?void 0:ce.includes(de.nombreCompleto),onChange:()=>te(de.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:de.nombreCompleto,children:de.nombreCompleto})]},de.id)})})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),u.jsx("div",{className:"space-y-3",children:_ee.map(de=>u.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:C.tipos.includes(de),onChange:()=>L(de),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:de})]}),C.tipos.includes(de)&&u.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),aS[de].map(ce=>u.jsx("button",{type:"button",onClick:()=>Q(de,ce),className:`px-3 py-1 rounded-full font-semibold text-xs ${C.cantidadPreguntas[de]===ce?"bg-amber-500 text-white":"bg-slate-200"}`,children:ce},ce))]})]},de))})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{name:"contenido",value:C.contenido,onChange:N,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),u.jsx("input",{type:"date",name:"plazoEntrega",value:C.plazoEntrega,onChange:N,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),y&&u.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:y}),u.jsx("div",{className:"pt-4 text-right",children:u.jsx("button",{type:"submit",disabled:d,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:d?u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},le=()=>{var pe;return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),u.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),u.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[u.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[u.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),u.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:B==null?void 0:B.introduccion})]}),(B==null?void 0:B.recursos)&&(B.recursos.instrucciones||B.recursos.enlaces||((pe=B.recursos.archivos)==null?void 0:pe.length))&&u.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[u.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),u.jsxs("div",{className:"space-y-3",children:[B.recursos.instrucciones&&u.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:B.recursos.instrucciones}),B.recursos.enlaces&&u.jsx("div",{children:B.recursos.enlaces.split(`
`).map((he,de)=>he.trim()&&u.jsx("a",{href:he,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:he},de))}),B.recursos.archivos&&B.recursos.archivos.length>0&&u.jsx("ul",{className:"list-disc list-inside",children:B.recursos.archivos.map(he=>u.jsx("li",{className:"text-slate-700",children:he.nombre},he.nombre))})]})]}),B==null?void 0:B.tipos.map(he=>{const de=B.generatedContent[he];return de?u.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:he}),u.jsxs("div",{className:"space-y-4 text-sm",children:[he==="Quiz"&&Array.isArray(de)&&de.map((ce,oe)=>u.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[u.jsxs("p",{className:"font-semibold",children:[oe+1,". ",ce.pregunta]}),u.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:ce.opciones.map((Re,qe)=>u.jsxs("li",{children:[u.jsxs("strong",{children:[String.fromCharCode(65+qe),"."]})," ",Re]},qe))}),u.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",ce.respuestaCorrecta]})]},oe)),he==="Comprensión de Lectura"&&de&&typeof de=="object"&&Array.isArray(de.preguntas)&&u.jsxs("div",{children:[u.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:de.texto}),de.preguntas.map((ce,oe)=>u.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[u.jsxs("p",{className:"font-semibold",children:[oe+1,". ",ce.pregunta]}),u.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:ce.opciones.map((Re,qe)=>u.jsxs("li",{children:[u.jsxs("strong",{children:[String.fromCharCode(65+qe),"."]})," ",Re]},qe))}),u.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",ce.respuestaCorrecta]})]},oe))]}),he==="Términos Pareados"&&Array.isArray(de)&&u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border border-slate-200",children:[u.jsx("thead",{className:"bg-slate-100",children:u.jsxs("tr",{children:[u.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),u.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),u.jsx("tbody",{children:de.map(ce=>u.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[u.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:ce.concepto}),u.jsx("td",{className:"p-2 align-top text-slate-700",children:ce.definicion})]},ce.id))})]})}),he==="Desarrollo"&&Array.isArray(de)&&de.map((ce,oe)=>u.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[u.jsxs("p",{className:"font-semibold",children:[oe+1,". ",ce.pregunta]}),u.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[u.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",ce.rubrica]})]},oe)),(he==="Quiz"||he==="Términos Pareados"||he==="Desarrollo")&&!Array.isArray(de)&&u.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',u.jsx("strong",{children:he}),'" no tiene el formato de array esperado. La IA pudo haber devuelto una respuesta en un formato no válido.']}),he==="Comprensión de Lectura"&&(!de||typeof de!="object"||!Array.isArray(de.preguntas))&&u.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',u.jsx("strong",{children:"Comprensión de Lectura"}),'" no tiene el formato de objeto con preguntas esperado.']})]})]},he):null})]}),u.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[u.jsx("button",{onClick:()=>D(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),u.jsx("button",{onClick:J,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},ve=()=>u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),u.jsx("button",{onClick:()=>c(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),u.jsx("div",{className:"space-y-4",children:t.length>0?t.map(pe=>{var ce,oe;const he=[];(ce=pe.cursosDestino)!=null&&ce.length&&he.push(`Cursos: ${pe.cursosDestino.join(", ")}`),(oe=pe.estudiantesDestino)!=null&&oe.length&&he.push(`Estudiantes: ${pe.estudiantesDestino.length}`);const de=he.length?he.join(" | "):`Todo ${pe.nivel}`;return u.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-slate-800",children:[pe.asignatura," - ",pe.tipos.join(", ")]}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",de," | Creado: ",new Date(pe.fechaCreacion).toLocaleDateString("es-CL")]})]}),u.jsx("button",{onClick:()=>o(pe),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},pe.id)}):u.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return p?u.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):u.jsx("div",{className:"animate-fade-in",children:B?le():i?Z():l?ne():ve()})},lme="actividades_remotas",mH="respuestas_actividades",gH=t=>{var r,n,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},cme=(t,e)=>{if(!t.curso)return e([]),()=>{};const r=t.curso.charAt(0),n=er(Ft(Tt,lme),an("fechaCreacion","desc"));return gr(n,s=>{const i=s.docs.map(o=>gH(o)).filter(o=>{var h,p,m,y;const l=!((h=o.cursosDestino)!=null&&h.length)&&!((p=o.estudiantesDestino)!=null&&p.length),c=((m=o.cursosDestino)==null?void 0:m.includes(t.curso))??!1,d=((y=o.estudiantesDestino)==null?void 0:y.includes(t.nombreCompleto))??!1;return c||d?!0:l?o.nivel.charAt(0)===r:!1});e(i)},s=>{console.error("Error al suscribirse a actividades disponibles:",s),e([])})},ume=(t,e)=>{const r=er(Ft(Tt,mH),Mn("estudianteId","==",t));return gr(r,n=>{const s=n.docs.map(a=>gH(a));e(s)},n=>{console.error("Error al suscribirse a las respuestas del estudiante:",n),e([])})},Ame=async t=>{try{const e={...t,fechaCompletado:ur.fromDate(new Date)};return(await ws(Ft(Tt,mH),e)).id}catch(e){throw console.error("Error al guardar la respuesta:",e),new Error("No se pudo guardar la respuesta.")}},dme=t=>[...t].sort(()=>Math.random()-.5),fme=(t,e)=>{if(e===0)return"1.0";const n=e*.6;let s;return t>=n?s=4+(t-n)*3/(e-n):s=1+t*3/(n||1),s=Math.max(1,Math.min(7,s)),s.toFixed(1)},gR=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),hme=({actividad:t,onComplete:e,currentUser:r})=>{var B,D,I,U;const[n,s]=q.useState({}),[a,i]=q.useState(!1),[o,l]=q.useState(!1),[c,d]=q.useState(!1),[h,p]=q.useState({}),m=`progress-${r.id}-${t.id}`;q.useEffect(()=>{const F={};t.tipos.forEach(C=>{if(C==="Términos Pareados"){const _=t.generatedContent[C];_&&(F[C]=dme(_.map(N=>N.definicion)))}}),p(F);try{const C=localStorage.getItem(m);C&&s(JSON.parse(C))}catch(C){console.error("Could not load saved progress",C)}},[t,m]);const y=(F,C)=>{s(_=>({..._,[F]:C}))},x=()=>{l(!0),d(!1),setTimeout(()=>{try{localStorage.setItem(m,JSON.stringify(n)),d(!0),setTimeout(()=>d(!1),2e3)}catch(F){console.error("Could not save progress",F),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},E=async()=>{i(!0);let F=0,C=0;const _=[],N={},j="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let R=null;R=new Ra(j);for(const Q of t.tipos){const H=t.generatedContent[Q],te=n[Q];if(Q==="Quiz"||Q==="Comprensión de Lectura"){const Y=Q==="Quiz"?H:H.preguntas,re=te||{};let V=0,J=0;Y.forEach((K,ae)=>{J+=1,re[ae]===K.respuestaCorrecta&&(V+=1)}),F+=V,C+=J,_.push(`${Q}: ${V}/${J} correctas.`),N[Q]={puntaje:V,puntajeMaximo:J}}else if(Q==="Términos Pareados"){const Y=H,re=te||{};let V=0,J=0;Y.forEach(K=>{J+=2,re[K.id]===K.definicion&&(V+=2)}),F+=V,C+=J,_.push(`${Q}: ${V/2}/${Y.length} correctas.`),N[Q]={puntaje:V,puntajeMaximo:J}}else if(Q==="Desarrollo"){const Y=H,re=te||{};let V=0,J=0;for(let K=0;K<Y.length;K++){const ae=Y[K];if(J+=3,!R){_.push(`${Q} #${K+1}: No se pudo evaluar automáticamente.`);continue}try{td("Autoaprendizaje - Evaluar Desarrollo");const O=R.getGenerativeModel({model:"gemini-1.5-flash-latest"}),W=`Evalúa la siguiente respuesta de un estudiante a la pregunta de desarrollo, basándote en la rúbrica proporcionada.
                        Pregunta: "${ae.pregunta}".
                        Rúbrica: "${ae.rubrica}".
                        Respuesta del estudiante: "${re[K]||""}".
                        
                        Tu respuesta DEBE ser un objeto JSON con dos claves:
                        1. "puntaje": un número entero de 0 a 3.
                        2. "feedback": una frase corta y constructiva para el estudiante.`,ve=(await(await O.generateContent(W)).response).text().replace(/^```json\s*|```\s*$/g,""),pe=JSON.parse(ve),he=Math.max(0,Math.min(3,parseInt(pe.puntaje,10)||0));V+=he,_.push(`${Q} #${K+1}: Puntaje ${he}/3. (${pe.feedback})`)}catch(O){console.error("Error evaluating development question:",O),_.push(`${Q} #${K+1}: No se pudo evaluar automáticamente.`)}}F+=V,C+=J,N[Q]={puntaje:V,puntajeMaximo:J}}}let L;if(R){const Q=`
                Un estudiante ha completado una actividad sobre "${t.contenido}".
                Su puntaje total fue ${F} de ${C}.
                Detalle por sección: ${JSON.stringify(N)}
                Respuestas de desarrollo: ${JSON.stringify(n.Desarrollo||{})}
                
                Genera una retroalimentación detallada y constructiva en español. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
                {
                  "resumenGeneral": "Un párrafo breve y motivador sobre el desempeño general.",
                  "areasDeFortaleza": ["Un array de 2 o 3 strings destacando lo que hizo bien."],
                  "areasDeMejora": ["Un array de 2 o 3 strings con áreas a mejorar."],
                  "planDeMejora": [{ "paso": "Repasar conceptos clave", "detalle": "Una sugerencia concreta."}],
                  "feedbackPorSeccion": { "Quiz": "Feedback específico para esta sección." }
                }
            `;try{td("Autoaprendizaje - Retroalimentación Detallada");const V=(await(await R.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,"");L=JSON.parse(V)}catch(H){console.error("Error generating detailed feedback:",H)}}e({respuestas:n,puntaje:F,puntajeMaximo:C,retroalimentacion:`¡Buen trabajo! Tu puntaje total es ${F} de ${C}.`,calificacion:fme(F,C),puntajesPorSeccion:N},L),localStorage.removeItem(m),i(!1)},S=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((B=t.recursos.archivos)==null?void 0:B.length));return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[u.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"¡Hola!"}),u.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),S&&u.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[u.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),u.jsxs("div",{className:"space-y-4",children:[((D=t.recursos)==null?void 0:D.instrucciones)&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((I=t.recursos)==null?void 0:I.enlaces)&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((F,C)=>F.trim()&&u.jsx("a",{href:F,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:F},C))]}),((U=t.recursos)==null?void 0:U.archivos)&&t.recursos.archivos.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),u.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((F,C)=>u.jsx("li",{children:u.jsx("a",{href:F.url,download:F.nombre,className:"text-blue-500 hover:underline",children:F.nombre})},C))})]})]})]}),t.tipos.map(F=>{const C=t.generatedContent[F];if(!C)return null;switch(F){case"Quiz":case"Comprensión de Lectura":{const _=F==="Quiz",N=C,j=_?N:N.preguntas;return u.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:F}),!_&&u.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:N.texto}),u.jsx("div",{className:"space-y-6",children:j.map((R,L)=>u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[L+1,". ",R.pregunta]}),u.jsx("div",{className:"mt-2 space-y-2",children:R.opciones.map((Q,H)=>{var te;return u.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[u.jsx("input",{type:"radio",name:`q-${F}-${L}-${t.id}`,value:Q,checked:((te=n[F])==null?void 0:te[L])===Q,onChange:()=>y(F,{...n[F]||{},[L]:Q}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),u.jsx("span",{children:Q})]},H)})})]},`${F}-${L}`))})]},F)}case"Términos Pareados":{const _=C,N=h[F]||[];return u.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:F}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),_.map(j=>u.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:j.concepto},j.id))]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definición"}),_.map(j=>{var R;return u.jsx("div",{className:"h-14 flex items-center",children:u.jsxs("select",{value:((R=n[F])==null?void 0:R[j.id])||"",onChange:L=>y(F,{...n[F]||{},[j.id]:L.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[u.jsx("option",{value:"",children:"Seleccionar definición..."}),N.map((L,Q)=>u.jsx("option",{value:L,children:L},Q))]})},j.id)})]})]})]},F)}case"Desarrollo":{const _=C;return u.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:F}),_.map((N,j)=>{var R;return u.jsxs("div",{className:"mb-6",children:[u.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:N.pregunta}),u.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[u.jsx("strong",{children:"Rúbrica:"})," ",N.rubrica]}),u.jsx("textarea",{value:((R=n[F])==null?void 0:R[j])||"",onChange:L=>y(F,{...n[F]||{},[j]:L.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},j)})]},F)}default:return null}}),u.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[u.jsx("button",{onClick:x,disabled:a||o||c,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?u.jsxs(u.Fragment,{children:[u.jsx(gR,{})," Guardando..."]}):c?"✓ Guardado":"Guardar Progreso"}),u.jsx("button",{onClick:E,disabled:a||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:a?u.jsxs(u.Fragment,{children:[u.jsx(gR,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},pme=({currentUser:t})=>{const[e,r]=q.useState([]),[n,s]=q.useState([]),[a,i]=q.useState(null),[o,l]=q.useState("list"),[c,d]=q.useState(null),[h,p]=q.useState(null),[m,y]=q.useState(!0);q.useEffect(()=>{y(!0);const B=cme(t,r),D=ume(t.nombreCompleto,I=>{s(I),y(!1)});return()=>{B(),D()}},[t]);const x=B=>{p(B)},E=()=>{h&&(i(h),l("activity"),p(null))},S=q.useCallback(async(B,D)=>{if(!a)return;const I={actividadId:a.id,estudianteId:t.nombreCompleto,fechaCompletado:new Date().toISOString(),...B,retroalimentacionDetallada:D};try{const U=await Ame(I);d({...I,id:U}),l("result")}catch(U){console.error("Error saving submission:",U),alert("No se pudo guardar tu respuesta. El error fue: "+U.message)}},[a,t.nombreCompleto]);if(m)return u.jsx("div",{className:"text-center py-10",children:"Cargando actividades..."});if(o==="activity"&&a)return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[a.asignatura,": ",a.tipos.join(", ")]}),u.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",a.plazoEntrega]}),u.jsx(hme,{actividad:a,onComplete:S,currentUser:t})]});if(o==="result"&&c){const B=c.retroalimentacionDetallada,D=c.puntajesPorSeccion||{},I=(U,F)=>{const C=F>0?U/F:0;return C<.4?"bg-red-100 text-red-800":C<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentación de la Actividad"}),B?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentación General"}),u.jsx("p",{className:"text-slate-600 mb-6",children:B.resumenGeneral}),u.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[u.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),u.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${I(c.puntaje,c.puntajeMaximo)}`,children:[c.puntaje," / ",c.puntajeMaximo]})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:"✓ Áreas de Fortaleza"}),u.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:B.areasDeFortaleza.map((U,F)=>u.jsx("li",{children:U},F))})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"✗ Áreas de Mejora"}),u.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:B.areasDeMejora.map((U,F)=>u.jsx("li",{children:U},F))})]})]})]}),u.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(D).map(([U,{puntaje:F,puntajeMaximo:C}])=>{var _;return u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h3",{className:"text-xl font-bold",children:U}),u.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${I(F,C)}`,children:[F," / ",C]})]}),u.jsx("p",{className:"text-slate-500 text-sm",children:(_=B.feedbackPorSeccion)==null?void 0:_[U]})]},U)})}),u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),u.jsx("div",{className:"space-y-4",children:B.planDeMejora.map((U,F)=>u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:"✓"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:U.paso}),u.jsx("p",{className:"text-slate-600 text-sm",children:U.detalle})]})]},F))})]})]}):u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[u.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"¡Actividad Completada!"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[u.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),u.jsxs("p",{className:"text-2xl font-bold",children:[c.puntaje," / ",c.puntajeMaximo]})]}),u.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-sm text-slate-500",children:"Calificación"}),u.jsx("p",{className:"text-2xl font-bold",children:c.calificacion})]})]}),u.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[u.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentación"}),u.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:c.retroalimentacion})]})]}),u.jsx("button",{onClick:()=>{l("list"),d(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[h&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),u.jsxs("p",{className:"mt-4 text-slate-600",children:["¿Estás seguro de que deseas comenzar esta actividad? ",u.jsx("strong",{children:"Tendrás solo una oportunidad para responder."})]}),u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habrá una segunda oportunidad."}),u.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[u.jsx("button",{onClick:()=>p(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),u.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Sí, comenzar"})]})]})}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),u.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),u.jsx("div",{className:"space-y-4",children:e.length>0?e.map(B=>{const D=n.find(U=>U.actividadId===B.id),I=!!D;return u.jsx("div",{className:`p-4 border rounded-lg ${I?"bg-green-50":"bg-slate-50"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-slate-800",children:[B.asignatura," - ",B.tipos.join(", ")]}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",B.plazoEntrega]})]}),I?u.jsxs("div",{className:"text-right",children:[u.jsx("button",{onClick:()=>{d(D),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),u.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",D.puntaje,"/",D.puntajeMaximo]})]}):u.jsx("button",{onClick:()=>x(B),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},B.id)}):u.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},gC="estudiantes_inclusion",mme="usuarios",xH=t=>{const e=t.data();return{id:t.id,...e}},gme=t=>{const e=er(Ft(Tt,gC));return gr(e,n=>{const s=n.docs.map(a=>xH(a));t(s)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),t([])})},xme=t=>{const e=er(Ft(Tt,mme));return gr(e,n=>{const s=n.docs.map(a=>xH(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},vme=async t=>{try{return(await ws(Ft(Tt,gC),t)).id}catch(e){throw console.error("Error al agregar estudiante a inclusión:",e),new Error("No se pudo agregar al estudiante.")}},yme=async(t,e)=>{try{const{id:r,...n}=e,s=mr(Tt,gC,t);await Ti(s,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},wme=async t=>{try{const e=mr(Tt,gC,t);await li(e)}catch(e){throw console.error("Error al eliminar estudiante de inclusión:",e),new Error("No se pudo eliminar al estudiante.")}},bme=({student:t,onClose:e,onSave:r,profesores:n})=>{const[s,a]=q.useState("intervenciones"),[i,o]=q.useState(t);q.useEffect(()=>{o(t)},[t]);const[l,c]=q.useState(null),d={responsable:"",accion:"",observaciones:""},[h,p]=q.useState(d),[m,y]=q.useState({trimestre:"T1",meta:""}),[x,E]=q.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[S,B]=q.useState(null),[D,I]=q.useState(!1),U={motivo:"",acuerdos:"",asistentes:""},[F,C]=q.useState(U),_=()=>{r(i),e()},N=()=>{if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ce;l?ce=(i.intervenciones||[]).map(Re=>Re.id===l.id?{...Re,...h}:Re):ce=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const oe=ce.sort((Re,qe)=>new Date(qe.fecha).getTime()-new Date(Re.fecha).getTime());o(Re=>({...Re,intervenciones:oe})),p(d),c(null)},j=ce=>{c(ce),p({responsable:ce.responsable,accion:ce.accion,observaciones:ce.observaciones})},R=ce=>{window.confirm("¿Eliminar esta intervención?")&&o(oe=>({...oe,intervenciones:(oe.intervenciones||[]).filter(Re=>Re.id!==ce)}))},L=ce=>{const{name:oe,value:Re}=ce.target;o(qe=>({...qe,[oe]:Re,fechaActualizacionApoyos:new Date().toISOString()}))},Q=()=>{if(!m.meta.trim())return;const ce={...m,id:crypto.randomUUID(),cumplida:!1};o(oe=>({...oe,metasProgreso:[...oe.metasProgreso||[],ce]})),y({trimestre:"T1",meta:""})},H=ce=>{o(oe=>({...oe,metasProgreso:(oe.metasProgreso||[]).map(Re=>Re.id===ce?{...Re,cumplida:!Re.cumplida}:Re)}))},te=ce=>{o(oe=>({...oe,metasProgreso:(oe.metasProgreso||[]).filter(Re=>Re.id!==ce)}))},Y=q.useMemo(()=>{const ce=i.metasProgreso||[];if(ce.length===0)return{percent:0,color:"bg-slate-300"};const oe=ce.filter(Ie=>Ie.cumplida).length,Re=Math.round(oe/ce.length*100),qe=Re<40?"bg-red-500":Re<75?"bg-yellow-500":"bg-green-500";return{percent:Re,color:qe}},[i.metasProgreso]),re=q.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const ce=new Date(i.fechaActualizacionApoyos),oe=new Date;return oe.setMonth(oe.getMonth()-3),ce<oe},[i.fechaActualizacionApoyos]),V=()=>{if(!x.titulo.trim()||!x.fecha)return;const ce={...x,id:crypto.randomUUID(),resuelta:!1};o(oe=>({...oe,alertas:[...oe.alertas||[],ce].sort((Re,qe)=>new Date(Re.fecha).getTime()-new Date(qe.fecha).getTime())})),E({titulo:"",fecha:new Date().toISOString().split("T")[0]})},J=ce=>{o(oe=>({...oe,alertas:(oe.alertas||[]).map(Re=>Re.id===ce?{...Re,resuelta:!Re.resuelta}:Re)}))},K=ce=>{o(oe=>({...oe,alertas:(oe.alertas||[]).filter(Re=>Re.id!==ce)}))},ae=ce=>{ce.target.files&&ce.target.files[0]&&B(ce.target.files[0])},O=()=>{if(!S)return;I(!0);const ce=new FileReader;ce.readAsDataURL(S),ce.onloadend=()=>{const oe={id:crypto.randomUUID(),nombre:S.name,url:ce.result,fechaSubida:new Date().toISOString()};o(Re=>({...Re,archivos:[oe,...Re.archivos||[]]})),B(null),I(!1)},ce.onerror=()=>{alert("Error al leer el archivo."),I(!1)}},W=ce=>{window.confirm("¿Eliminar este archivo?")&&o(oe=>({...oe,archivos:(oe.archivos||[]).filter(Re=>Re.id!==ce)}))},Z=()=>{if(!F.motivo.trim()||!F.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ce={...F,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(oe=>({...oe,reuniones:[ce,...oe.reuniones||[]].sort((Re,qe)=>new Date(qe.fecha).getTime()-new Date(Re.fecha).getTime())})),C(U)},ne=ce=>{window.confirm("¿Eliminar este registro de reunión?")&&o(oe=>({...oe,reuniones:(oe.reuniones||[]).filter(Re=>Re.id!==ce)}))},le=()=>{var We,ct,wt;const ce=new or("p","mm","a4"),oe=20,Re=ce.internal.pageSize.getWidth(),qe=ce.internal.pageSize.getHeight();let Ie=oe;const Ee=ot=>{ot.setFontSize(10),ot.setTextColor(100),ot.text("Ficha de Seguimiento - Módulo Inclusión",oe,15)};Ee(ce),ce.setFontSize(18),ce.setFont("helvetica","bold"),ce.setTextColor(40),ce.text(i.nombre,oe,Ie+10),Ie+=15,ce.setFontSize(11),ce.setFont("helvetica","normal"),ce.setTextColor(80),ce.text(`Curso: ${i.curso}`,oe,Ie),ce.text(`Dificultad: ${i.dificultad}`,oe,Ie+6),Ie+=15;const De=ot=>{Ie+ot>qe-oe&&(ce.addPage(),Ee(ce),Ie=oe)},je=ot=>{De(15),ce.setFontSize(14),ce.setFont("helvetica","bold"),ce.text(ot,oe,Ie),Ie+=10};if((We=i.intervenciones)!=null&&We.length&&(je("Historial de Intervenciones"),xl(ce,{startY:Ie,head:[["Fecha","Responsable","Acción","Observaciones"]],body:i.intervenciones.map(ot=>[new Date(ot.fecha).toLocaleDateString("es-CL"),ot.responsable,ot.accion,ot.observaciones||""]),theme:"grid",didDrawPage:ot=>Ee(ce)}),Ie=ce.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){De(30),je("Seguimiento y Apoyos"),ce.setFontSize(11),ce.setFont("helvetica","normal");const ot=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,Dt=ce.splitTextToSize(ot,Re-oe*2);ce.text(Dt,oe,Ie),Ie+=Dt.length*5+10}(ct=i.metasProgreso)!=null&&ct.length&&(De(30),je("Metas de Progreso"),xl(ce,{startY:Ie,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(ot=>[ot.trimestre,ot.meta,ot.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:ot=>Ee(ce)}),Ie=ce.lastAutoTable.finalY+10),(wt=i.reuniones)!=null&&wt.length&&(je("Reuniones con Apoderados"),xl(ce,{startY:Ie,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(ot=>[new Date(ot.fecha).toLocaleDateString("es-CL"),ot.motivo,ot.acuerdos,ot.asistentes]),theme:"grid",didDrawPage:ot=>Ee(ce)})),ce.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},ve=()=>u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervención":"Registrar Nueva Intervención"}),u.jsxs("select",{value:h.responsable,onChange:ce=>p(oe=>({...oe,responsable:ce.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ce=>u.jsx("option",{value:ce,children:ce},ce))]}),u.jsx("textarea",{value:h.accion,onChange:ce=>p(oe=>({...oe,accion:ce.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("textarea",{value:h.observaciones,onChange:ce=>p(oe=>({...oe,observaciones:ce.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsxs("div",{className:"flex justify-end gap-2",children:[l&&u.jsx("button",{onClick:()=>{c(null),p(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),u.jsx("button",{onClick:N,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),u.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.intervenciones||[]).map(ce=>u.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ce.accion}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:ce.observaciones}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ce.fecha).toLocaleString("es-CL")," - ",ce.responsable]})]}),u.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[u.jsx("button",{onClick:()=>j(ce),className:"text-blue-500",children:"✏️"}),u.jsx("button",{onClick:()=>R(ce.id),className:"text-red-500",children:"🗑️"})]})]})},ce.id))})]}),pe=()=>u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),re&&u.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),u.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),u.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",Y.percent,"%"]}),u.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:u.jsx("div",{className:`${Y.color} h-4 rounded-full transition-all duration-500`,style:{width:`${Y.percent}%`}})})]}),u.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[u.jsxs("select",{value:m.trimestre,onChange:ce=>y(oe=>({...oe,trimestre:ce.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"T1",children:"T1"}),u.jsx("option",{value:"T2",children:"T2"}),u.jsx("option",{value:"T3",children:"T3"})]}),u.jsx("input",{value:m.meta,onChange:ce=>y(oe=>({...oe,meta:ce.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:Q,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(ce=>u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[u.jsx("input",{type:"checkbox",checked:ce.cumplida,onChange:()=>H(ce.id),className:"h-5 w-5 rounded text-amber-500"}),u.jsxs("span",{className:`flex-grow text-sm ${ce.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[u.jsxs("strong",{children:[ce.trimestre,":"]})," ",ce.meta]}),u.jsx("button",{onClick:()=>te(ce.id),className:"text-red-500 text-sm",children:"🗑️"})]},ce.id))})]})]}),he=()=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),u.jsx("input",{type:"text",value:x.titulo,onChange:ce=>E(oe=>({...oe,titulo:ce.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),u.jsx("input",{type:"date",value:x.fecha,onChange:ce=>E(oe=>({...oe,fecha:ce.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),u.jsx("button",{onClick:V,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(ce=>u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[u.jsx("input",{type:"checkbox",checked:ce.resuelta,onChange:()=>J(ce.id),className:"h-5 w-5 rounded text-amber-500"}),u.jsxs("span",{className:`flex-grow text-sm ${ce.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ce.titulo," (",new Date(ce.fecha+"T12:00:00").toLocaleDateString(),")"]}),u.jsx("button",{onClick:()=>K(ce.id),className:"text-red-500 text-sm",children:"🗑️"})]},ce.id))})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),u.jsx("input",{type:"file",onChange:ae,className:"w-full text-sm"}),u.jsx("button",{onClick:O,disabled:!S||D,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:D?"Subiendo...":"Subir"})]}),u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(ce=>u.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[u.jsx("a",{href:ce.url,download:ce.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:ce.nombre}),u.jsx("button",{onClick:()=>W(ce.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},ce.id))})]})]}),de=()=>u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),u.jsx("input",{value:F.motivo,onChange:ce=>C(oe=>({...oe,motivo:ce.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("textarea",{value:F.acuerdos,onChange:ce=>C(oe=>({...oe,acuerdos:ce.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("input",{value:F.asistentes,onChange:ce=>C(oe=>({...oe,asistentes:ce.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("div",{className:"text-right",children:u.jsx("button",{onClick:Z,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),u.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.reuniones||[]).map(ce=>u.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ce.motivo}),u.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[u.jsx("strong",{children:"Acuerdos:"})," ",ce.acuerdos]}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ce.fecha).toLocaleString("es-CL")," - Asistentes: ",ce.asistentes]})]}),u.jsx("button",{onClick:()=>ne(ce.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},ce.id))})]});return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ce=>ce.stopPropagation(),children:[u.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:le,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),u.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),u.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:u.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ce=>u.jsx("button",{onClick:()=>a(ce),className:`${s===ce?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:ce==="alertas"?"Alertas y Archivos":ce==="seguimiento"?"Seguimiento y Metas":ce},ce))})}),u.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&ve(),s==="seguimiento"&&pe(),s==="reuniones"&&de(),s==="alertas"&&he()]}),u.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[u.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),u.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},Cme=({student:t,onClose:e,onConfirm:r})=>{const[n,s]=q.useState(Sw[0]),a=()=>{r(t,n)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),u.jsx("select",{id:"dificultad",value:n,onChange:i=>s(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Sw.map(i=>u.jsx("option",{value:i,children:i},i))})]}),u.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:a,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},xR=({currentUser:t})=>{const[e,r]=q.useState([]),[n,s]=q.useState([]),[a,i]=q.useState(!0),[o,l]=q.useState(null),[c,d]=q.useState(null),[h,p]=q.useState(""),[m,y]=q.useState(""),[x,E]=q.useState("");q.useEffect(()=>{i(!0);const _=gme(j=>{r(j),i(!1)}),N=xme(j=>{s(j)});return()=>{_(),N()}},[]);const S=async(_,N)=>{if(e.some(R=>R.nombre===_.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const j={nombre:_.nombreCompleto,curso:_.curso||"",dificultad:N,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await vme(j)}catch(R){console.error("Error al agregar estudiante:",R),alert("Hubo un error al agregar al estudiante al programa.")}},B=async _=>{try{await yme(_.id,_)}catch(N){console.error("Error al actualizar la ficha:",N),alert("Hubo un error al guardar los cambios en la ficha.")}},D=async _=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await wme(_),(o==null?void 0:o.id)===_&&l(null)}catch(N){console.error("Error al eliminar estudiante:",N),alert("Hubo un error al eliminar al estudiante.")}},I=_=>{if(F.length===0){alert("No hay datos para exportar.");return}const N=F.map(j=>{var R;return{Nombre:j.nombre,Curso:j.curso,Dificultad:j.dificultad,"N° Intervenciones":((R=j.intervenciones)==null?void 0:R.length)||0,"Alertas Pendientes":(j.alertas||[]).filter(L=>!L.resuelta).length}});if(_==="xlsx"){const j=sc.json_to_sheet(N),R=sc.book_new();sc.book_append_sheet(R,j,"Estudiantes_Inclusion"),dB(R,"Estudiantes_Inclusion.xlsx")}else{const j=new or;j.text("Listado de Estudiantes - Programa de Inclusión",14,15),xl(j,{startY:20,head:[Object.keys(N[0])],body:N.map(Object.values)}),j.save("Estudiantes_Inclusion.pdf")}},U=q.useMemo(()=>n.filter(_=>{var N;return _.profile===jt.ESTUDIANTE&&(((N=t.cursos)==null?void 0:N.includes(_.curso||""))||t.profile===jt.SUBDIRECCION)}).filter(_=>!e.some(N=>N.nombre===_.nombreCompleto)),[n,e,t]),F=q.useMemo(()=>e.filter(_=>_.nombre.toLowerCase().includes(h.toLowerCase())&&(m===""||_.curso===m)&&(x===""||_.dificultad===x)).sort((_,N)=>_.nombre.localeCompare(N.nombre)),[e,h,m,x]),C=q.useMemo(()=>n.filter(_=>_.profile===jt.PROFESORADO).map(_=>_.nombreCompleto).sort(),[n]);return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),a?u.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",F.length,")"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>I("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),u.jsx("button",{onClick:()=>I("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[u.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:h,onChange:_=>p(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsxs("select",{value:m,onChange:_=>y(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Todos los Cursos"}),ha.map(_=>u.jsx("option",{children:_},_))]}),u.jsxs("select",{value:x,onChange:_=>E(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Todas las Dificultades"}),Sw.map(_=>u.jsx("option",{children:_},_))]})]}),u.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:F.map(_=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:_.nombre}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[_.curso," - ",_.dificultad]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>l(_),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),u.jsx("button",{onClick:()=>D(_.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},_.id))})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),u.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:U.map(_=>u.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:_.nombreCompleto}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:_.curso})]}),u.jsx("button",{onClick:()=>d(_),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},_.id))})]})]}),c&&u.jsx(Cme,{student:c,onClose:()=>d(null),onConfirm:(_,N)=>{S(_,N),d(null)}}),o&&u.jsx(bme,{student:o,onClose:()=>l(null),onSave:B,profesores:C})]})},vH="asistencia_dual",Eme=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaHora:((n=(r=e.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaHora}},_me=(t,e)=>{const r=er(Ft(Tt,vH),Mn("emailEstudiante","==",t),an("fechaHora","desc"));return gr(r,s=>{const a=s.docs.map(i=>Eme(i));e(a)},s=>{console.error("Error subscribing to personal attendance:",s),e([])})},Sme=async t=>{try{const e={...t,fechaHora:ur.fromDate(new Date(t.fechaHora))};await ws(Ft(Tt,vH),e)}catch(e){throw console.error("Error adding attendance record:",e),new Error("Could not save the attendance record.")}},Tme=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),Nme=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),Bme=({currentUser:t})=>{const[e,r]=q.useState(t.curso||""),[n,s]=q.useState([]),[a,i]=q.useState(!1),[o,l]=q.useState(!0),[c,d]=q.useState(null);q.useEffect(()=>{if(!t.email){l(!1);return}l(!0);const p=_me(t.email,m=>{s(m),l(!1)});return()=>p()},[t.email]);const h=p=>{if(!e){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async m=>{const y={nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:p,fechaHora:new Date().toISOString(),ubicacion:{latitud:m.coords.latitude,longitud:m.coords.longitude}};try{await Sme(y),d({text:`¡Marca de ${p} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},m=>{console.error("Geolocation error:",m);let y="No se pudo obtener la ubicación.";switch(m.code){case m.PERMISSION_DENIED:y="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case m.POSITION_UNAVAILABLE:y="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case m.TIMEOUT:y="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:y=`Ocurrió un error desconocido al obtener la ubicación (código: ${m.code}).`;break}d({text:y,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),u.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),u.jsxs("select",{id:"curso",value:e,onChange:p=>r(p.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"-- Mi curso --"}),Oh.map(p=>u.jsx("option",{value:p,children:p},p))]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[u.jsx("button",{onClick:()=>h("Entrada"),disabled:a||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),u.jsx("button",{onClick:()=>h("Salida"),disabled:a||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),a&&u.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[u.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u.jsx("span",{children:"Obteniendo ubicación..."})]}),c&&u.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${c.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.text})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),u.jsx("div",{className:"overflow-x-auto max-h-96",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(p=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(p.fechaHora).toLocaleString("es-CL")}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:u.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${p.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[p.tipo==="Entrada"?u.jsx(Tme,{}):u.jsx(Nme,{}),p.tipo]})}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:p.curso})]},p.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},kme=async()=>{try{console.log("🔍 Debugging users collection...");const t=Ft(Yr,"users"),e=er(t,_f(10)),r=await Da(e),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},s=new Set;return r.forEach((a,i)=>{const o=a.data(),l={id:a.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(c=>s.add(c))}),n.fieldAnalysis={allFields:Array.from(s),commonFields:Array.from(s).filter(a=>n.sampleDocs.filter(o=>a in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(t){return console.error("Error debugging users collection:",t),{exists:!1,error:t instanceof Error?t.message:"Unknown error"}}},Ime=async(t,e)=>{var l,c,d;const r=new Date(t,e,1),n=new Date(t,e+1,0,23,59,59,999),s=ur.fromDate(r),a=ur.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const h of i)try{const p=Ft(Yr,h);try{const m=er(p,Mn("fechaHora",">=",s),Mn("fechaHora","<=",a)),y=await Da(m);o[h]={exists:!0,hasDateField:!0,count:y.size,sampleDoc:((l=y.docs[0])==null?void 0:l.data())||null}}catch{const y=["fecha","timestamp","createdAt"];let x=!1;for(const E of y)try{const S=er(p,Mn(E,">=",s),Mn(E,"<=",a)),B=await Da(S);o[h]={exists:!0,hasDateField:E,count:B.size,sampleDoc:((c=B.docs[0])==null?void 0:c.data())||null},x=!0;break}catch{continue}if(!x){const E=er(p,an("__name__"),_f(5)),S=await Da(E);o[h]={exists:!0,hasDateField:!1,count:S.size,sampleDoc:((d=S.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(p){o[h]={exists:!1,error:p instanceof Error?p.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},Fme=(t,e,r,n)=>{try{const s=new Date(t,e,1);s.setHours(0,0,0,0);const a=new Date(t,e+1,0);a.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${s.toISOString()} y ${a.toISOString()}`),console.log(`📅 Mes actual: ${t}-${(e+1).toString().padStart(2,"0")}`);const i=ur.fromDate(s),o=ur.fromDate(a),l=[],c=new Map,d=()=>{const p=Array.from(c.values());console.log(`📊 Total registros encontrados: ${p.length}`),p.length>0&&console.log("📅 Registros por día:",p.reduce((m,y)=>{let x;y.fechaHora instanceof Date?x=y.fechaHora:typeof y.fechaHora=="string"?x=new Date(y.fechaHora):x=new Date;const E=x.getDate();return m[E]=(m[E]||0)+1,m},{})),r(p)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(p=>{try{console.log(`🔍 Configurando suscripción para: ${p}`);const m=Ft(Yr,p),y=er(m,Mn("fechaHora",">=",i),Mn("fechaHora","<=",o),an("fechaHora","desc")),x=gr(y,E=>{console.log(`📋 ${p}: ${E.size} documentos encontrados con filtro`),E.size>0?(console.log(`✅ Registros encontrados en ${p}:`),Array.from(c.keys()).filter(B=>B.startsWith(`${p}_`)).forEach(B=>c.delete(B)),E.docs.forEach((B,D)=>{var I;if(D<5){const U=B.data();let F;(I=U.fechaHora)!=null&&I.toDate?F=U.fechaHora.toDate():typeof U.fechaHora=="string"?F=new Date(U.fechaHora):F=new Date,console.log(`   ${D+1}. ${U.emailEstudiante} - ${F.toLocaleString()} - ${U.tipo}`),console.log(`      📅 Fecha original: ${U.fechaHora} (tipo: ${typeof U.fechaHora})`)}}),E.forEach(B=>{var C;const D=B.data();let I;(C=D.fechaHora)!=null&&C.toDate?I=D.fechaHora.toDate():typeof D.fechaHora=="string"?I=new Date(D.fechaHora):D.fechaHora instanceof Date?I=D.fechaHora:D.fechaHora?I=new Date(D.fechaHora):I=new Date;const U={id:B.id,emailEstudiante:D.emailEstudiante||D.email||"",nombreEstudiante:D.nombreEstudiante||D.nombre||"",curso:D.curso||"",fechaHora:I,tipo:D.tipo,ubicacion:D.ubicacion||null,observaciones:D.observaciones||"",...D},F=`${p}_${B.id}`;c.set(F,U)}),d()):console.log(`⚪ ${p}: vacía, manteniendo datos existentes`)},E=>{console.warn(`⚠️ Error con filtro en ${p}:`,E),console.log(`🔄 Intentando estrategia alternativa en ${p}...`);const S=er(m,_f(200)),B=gr(S,I=>{if(console.log(`📋 ${p} (sin filtro): ${I.size} documentos`),I.size>0){const F=I.docs[0].data();console.log(`📄 Estructura en ${p}:`,Object.keys(F)),console.log("📄 Primer documento:",F)}const U=I.docs.filter(F=>{var N;const C=F.data();if(!C.fechaHora)return!1;let _;return(N=C.fechaHora)!=null&&N.toDate?_=C.fechaHora.toDate():typeof C.fechaHora=="string"?_=new Date(C.fechaHora):C.fechaHora instanceof Date?_=C.fechaHora:_=new Date(C.fechaHora),_>=s&&_<=a});console.log(`📅 ${p}: ${U.length} registros después de filtro manual`),U.length>0&&(Array.from(c.keys()).filter(C=>C.startsWith(`${p}_`)).forEach(C=>c.delete(C)),U.forEach(C=>{var L;const _=C.data();let N;(L=_.fechaHora)!=null&&L.toDate?N=_.fechaHora.toDate():typeof _.fechaHora=="string"?N=new Date(_.fechaHora):_.fechaHora instanceof Date?N=_.fechaHora:N=new Date(_.fechaHora);const j={id:C.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:N,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},R=`${p}_${C.id}`;c.set(R,j)}),d())}),D=l.findIndex(I=>I===x);D>=0?l[D]=B:l.push(B)});l.push(x)}catch(m){console.warn(`❌ Error configurando ${p}:`,m)}}),()=>{l.forEach(p=>{try{p()}catch(m){console.warn("Error unsubscribing:",m)}})}}catch(s){return console.error("Error setting up subscribeToAsistenciaByMonth:",s),n&&n(new Error(`Error al configurar suscripción: ${s instanceof Error?s.message:"Error desconocido"}`)),()=>{}}},Dme=(t,e)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],s=new Map,a=()=>{const o=Array.from(s.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const l=o.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",l);const c=o.filter(d=>d.profile===jt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${c.length}`),c.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),t(o)};let i=!1;return r.forEach(o=>{try{const l=Ft(Yr,o),c=er(l),d=gr(c,h=>{h.size>0?(console.log(`✅ Encontrados ${h.size} usuarios en colección: ${o}`),i=!0,Array.from(s.keys()).filter(m=>m.startsWith(`${o}_`)).forEach(m=>s.delete(m)),h.forEach(m=>{var y,x,E,S;try{const B=m.data(),D=B.email||B.userEmail||B.mail||B.correo||"",I=B.nombreCompleto||B.displayName||B.name||B.nombre||B.fullName||"",U=B.curso||B.course||B.class||B.grade||"";let F=B.profile||B.role||B.tipo||B.userType||jt.ESTUDIANTE;if(typeof F=="string"){const N=F.toLowerCase();N.includes("estudiante")||N.includes("student")||N.includes("alumno")?F=jt.ESTUDIANTE:N.includes("coordinador")||N.includes("coordinator")?F=jt.COORDINADOR_TP:N.includes("profesor")||N.includes("teacher")||N.includes("docente")?F=jt.PROFESOR:(N.includes("subdireccion")||N.includes("subdir"))&&(F=jt.COORDINADOR_TP)}const C={id:m.id,email:D,nombreCompleto:I,curso:U,profile:F,activo:B.activo!==!1,fechaCreacion:((x=(y=B.fechaCreacion)==null?void 0:y.toDate)==null?void 0:x.call(y))||new Date(B.fechaCreacion)||new Date,ultimaActividad:((S=(E=B.ultimaActividad)==null?void 0:E.toDate)==null?void 0:S.call(E))||new Date(B.ultimaActividad)||new Date,...B},_=`${o}_${m.id}`;s.set(_,C)}catch(B){console.warn(`Error procesando documento ${m.id} en ${o}:`,B)}}),a()):console.log(`⚪ Colección ${o}: vacía`)},h=>{console.warn(`⚠️ Error en colección ${o}:`,h)});n.push(d)}catch(l){console.warn(`❌ Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),e&&e(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),e&&e(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},Rme=(t,e)=>{try{console.log("Setting up users subscription...");const r=Ft(Yr,"users"),n=er(r);return gr(n,a=>{console.log(`Raw users snapshot size: ${a.size}`);const i=[];a.forEach(d=>{var h,p,m,y;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const E=x.email||x.userEmail||x.mail||"",S=x.nombreCompleto||x.displayName||x.name||x.nombre||"",B=x.curso||x.course||x.class||"";let D=x.profile||x.role||x.tipo||jt.ESTUDIANTE;if(typeof D=="string"){const U=D.toLowerCase();U.includes("estudiante")||U.includes("student")||U.includes("alumno")?D=jt.ESTUDIANTE:U.includes("coordinador")||U.includes("coordinator")?D=jt.COORDINADOR_TP:U.includes("profesor")||U.includes("teacher")||U.includes("docente")?D=jt.PROFESOR:(U.includes("subdireccion")||U.includes("subdir"))&&(D=jt.COORDINADOR_TP)}const I={id:d.id,email:E,nombreCompleto:S,curso:B,profile:D,activo:x.activo!==!1,fechaCreacion:((p=(h=x.fechaCreacion)==null?void 0:h.toDate)==null?void 0:p.call(h))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((y=(m=x.ultimaActividad)==null?void 0:m.toDate)==null?void 0:y.call(m))||new Date(x.ultimaActividad)||new Date,...x};i.push(I)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),i.sort((d,h)=>d.nombreCompleto.localeCompare(h.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("Users by profile:",o);const l=i.filter(d=>d.profile===jt.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const c=l.filter(d=>d.curso);console.log(`Estudiantes con curso: ${c.length}`),t(i)},a=>{console.error("Error in subscribeToAllUsers:",a),e&&e(new Error(`Error al cargar usuarios: ${a.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),e&&e(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},Ny=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Lme=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),Ume=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),Mme=()=>{const[t,e]=q.useState([]),[r,n]=q.useState([]),[s,a]=q.useState(!0),[i,o]=q.useState(null),[l,c]=q.useState(new Date),[d,h]=q.useState("todos"),[p,m]=q.useState("");q.useEffect(()=>{a(!0),o(null);const F=l.getFullYear(),C=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",F,"Mes:",C);let _=!1,N=!1;const j=()=>{_&&N&&(console.log("=== CARGA COMPLETA ==="),a(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const L=Ft(Yr,"asistencia_dual"),Q=er(L,_f(5)),H=await Da(Q);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${H.size}`),H.size>0)H.docs.forEach((te,Y)=>{const re=te.data();console.log(`   ${Y+1}. ${te.id.slice(0,8)} - ${re.emailEstudiante} - ${re.tipo}`),console.log("      Fecha original:",re.fechaHora),console.log("      Todos los campos:",Object.keys(re))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const te=["asistenciaEmpresa","asistencia_empresa"];for(const Y of te)try{const re=Ft(Yr,Y),V=er(re,_f(3)),J=await Da(V);if(console.log(`📋 ${Y}: ${J.size} documentos`),J.size>0){const K=J.docs[0].data();console.log("   Estructura:",Object.keys(K)),console.log("   Email:",K.emailEstudiante||K.email),console.log("   Fecha:",K.fechaHora||K.fecha)}}catch(re){console.log(`❌ ${Y}: ${re instanceof Error?re.message:"Error"}`)}}}catch(L){console.error("❌ Error en prueba directa:",L),L.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):L.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),Ime(F,C).then(L=>{console.log("🔍 Debug info for collections:",L),Object.entries(L).forEach(([Q,H])=>{if(H.exists&&H.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${Q.toUpperCase()}:`),console.log(`   📊 Total documentos: ${H.totalDocs}`),console.log(`   📅 Documentos del período: ${H.count}`),console.log(`   🔑 Campo de fecha: ${H.hasDateField}`),H.sampleDoc){console.log("   📄 Documento ejemplo:",H.sampleDoc);const te=H.sampleDoc,Y=te.emailEstudiante||te.email||te.userEmail||te.correo||"NO ENCONTRADO",re=te.tipo||te.type||te.action||te.tipoRegistro||"NO ENCONTRADO",V=te.fechaHora||te.fecha||te.timestamp||te.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${Y}`),console.log(`   📝 Tipo registro: ${re}`),console.log(`   📅 Fecha: ${V}`),console.log("   🗂️ Todos los campos:",Object.keys(te))}H.filteredDocs&&H.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",H.filteredDocs.length),H.filteredDocs.forEach((te,Y)=>{Y<3&&console.log(`      ${Y+1}. ID: ${te.id}`,te.data)}))}else H.exists?console.log(`⚪ Colección ${Q}: vacía`):console.log(`❌ Colección ${Q}: no existe`)})}).catch(L=>{console.error("Debug error:",L)}),kme().then(L=>{console.log("🔍 Debug info for users:",L),(!L.exists||L.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async H=>{var te;try{const Y=Ft(Yr,H),re=er(Y,_f(5)),V=await Da(re);V.size>0?(console.log(`✅ Encontrada colección alternativa: ${H} con ${V.size} documentos`),console.log("Documento muestra:",(te=V.docs[0])==null?void 0:te.data())):console.log(`❌ Colección ${H}: vacía`)}catch{console.log(`❌ Colección ${H}: no existe`)}}))}).catch(L=>{console.error("Users debug error:",L)});try{console.log("Configurando suscripción a asistencia...");const L=Fme(F,C,H=>{if(console.log("✅ Received registros:",H.length),H.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",H[0]);const te=[...new Set(H.map(ae=>ae.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",te);const Y=[...new Set(H.map(ae=>ae.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",Y);const re=H.reduce((ae,O)=>{const W=new Date(O.fechaHora).getDate();return ae[W]||(ae[W]=[]),ae[W].push(O),ae},{});console.log("📅 Registros por día del mes:",Object.keys(re).map(ae=>({dia:parseInt(ae),cantidad:re[parseInt(ae)].length})));const V=r.map(ae=>ae.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",V);const J=te.filter(ae=>V.includes(ae)),K=te.filter(ae=>!V.includes(ae));console.log("✅ Emails que coinciden:",J),console.log("❌ Emails que NO coinciden:",K)}else console.log("⚠️ No se encontraron registros de asistencia para el período");e(H),_=!0,j()},H=>{console.error("❌ Error fetching asistencia:",H),o("Error al cargar datos de asistencia: "+H.message),_=!0,j()});console.log("Configurando suscripción a usuarios...");const Q=Dme(H=>{if(console.log("✅ Received users (multi-collection):",H.length),H.length>0){console.log("Sample user:",H[0]);const te=H.filter(Y=>Y.profile===jt.ESTUDIANTE&&Y.curso);console.log("Dual students found:",te.length),te.forEach(Y=>{console.log(`- ${Y.nombreCompleto} (${Y.curso}) - ${Y.email}`)})}n(H),N=!0,j()},H=>{console.error("❌ Error fetching users (multi-collection):",H),console.log("🔄 Intentando con función original de usuarios...");const te=Rme(Y=>{console.log("✅ Received users (fallback):",Y.length),n(Y),N=!0,j()},Y=>{console.error("❌ Error en fallback también:",Y),o("Error al cargar estudiantes: "+H.message),N=!0,j()})});return()=>{console.log("Limpiando suscripciones..."),L&&L(),Q&&Q()}}catch(L){console.error("❌ Error setting up subscriptions:",L),o("Error al inicializar conexiones: "+(L instanceof Error?L.message:"Error desconocido")),a(!1)}},[l]);const{monthDays:y,monthName:x,year:E}=q.useMemo(()=>{const F=l.getFullYear(),C=l.getMonth();return{monthDays:new Date(F,C+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:F}},[l]),S=q.useMemo(()=>{let F=r.filter(C=>C.profile===jt.ESTUDIANTE&&C.curso&&Oh.includes(Ny(C.curso)));if(d!=="todos"&&(F=F.filter(C=>Ny(C.curso||"")===d)),p&&(F=F.filter(C=>C.nombreCompleto.toLowerCase().includes(p.toLowerCase()))),t.length>0){const C=[...new Set(t.map(j=>j.emailEstudiante).filter(Boolean))],_=F.map(j=>j.email),N=C.filter(j=>!_.includes(j));if(N.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",N);const R=N.map(L=>{const Q=t.find(H=>H.emailEstudiante===L);return{id:L,email:L,nombreCompleto:(Q==null?void 0:Q.nombreEstudiante)||L.split("@")[0],curso:(Q==null?void 0:Q.curso)||"3ºC",profile:jt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(L=>{const Q=d==="todos"||Ny(L.curso)===d,H=!p||L.nombreCompleto.toLowerCase().includes(p.toLowerCase());return Q&&H&&Oh.includes(Ny(L.curso))});F=[...F,...R]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${F.length}`),F.forEach(C=>{console.log(`   - ${C.nombreCompleto} (${C.curso}) - ${C.email}`)}),F.sort((C,_)=>C.nombreCompleto.localeCompare(_.nombreCompleto))},[r,d,p,t]),B=q.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${t.length}`),console.log(`👥 Estudiantes disponibles: ${S.length}`);const F=new Map;return t.length===0?(console.log("⚠️ No hay registros para procesar aún"),F):(t.forEach((C,_)=>{const N=C.emailEstudiante;if(!N)return;let j;if(C.fechaHora instanceof Date)j=C.fechaHora;else if(C.fechaHora&&typeof C.fechaHora=="object"&&"toDate"in C.fechaHora)j=C.fechaHora.toDate();else if(typeof C.fechaHora=="string")j=new Date(C.fechaHora);else{console.warn("Fecha no válida en registro:",C);return}const R=j.getDate(),L=j.getMonth(),Q=j.getFullYear();_<3&&console.log(`📅 Registro ${_+1}:`,{email:N,tipo:C.tipo,fechaOriginal:C.fechaHora,fechaProcesada:j.toLocaleString(),año:Q,mes:L,día:R}),F.has(N)||F.set(N,new Map);const H=F.get(N);H.has(R)||H.set(R,{});const te=H.get(R);C.tipo==="Entrada"?(!te.entrada||j<new Date(te.entrada.fechaHora))&&(te.entrada=C):C.tipo==="Salida"&&(!te.salida||j>new Date(te.salida.fechaHora))&&(te.salida=C)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:F.size,estudiantes:Array.from(F.keys()),registrosPorEstudiante:Array.from(F.entries()).map(([C,_])=>({email:C,dias:Array.from(_.keys()),totalRegistros:Array.from(_.values()).reduce((N,j)=>N+(j.entrada?1:0)+(j.salida?1:0),0)}))}),F)},[t]),D=F=>{c(C=>{const _=new Date(C);return _.setMonth(_.getMonth()+F),_})},I=F=>{F!=null&&F.latitud&&(F!=null&&F.longitud)&&window.open(`https://www.google.com/maps?q=${F.latitud},${F.longitud}`,"_blank")},U=["D","L","M","M","J","V","S"];return i?u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:u.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[u.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[u.jsx("button",{onClick:()=>D(-1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${E}`}),u.jsx("button",{onClick:()=>D(1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),u.jsxs("select",{value:d,onChange:F=>h(F.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[u.jsx("option",{value:"todos",children:"Todos los Cursos"}),Oh.map(F=>u.jsx("option",{value:F,children:F},F))]}),u.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:p,onChange:F=>m(F.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s?u.jsxs("div",{className:"text-center text-amber-600 py-10",children:[u.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),u.jsx("div",{children:"Cargando datos de asistencia..."})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:y},(F,C)=>{const N=new Date(E,l.getMonth(),C+1).getDay(),j=N===0||N===6;return u.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${j?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[u.jsx("div",{className:"font-semibold",children:U[N]}),u.jsx("div",{children:C+1})]},C)})]})}),u.jsx("tbody",{children:S.length>0?S.map(F=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[u.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:F.nombreCompleto}),Array.from({length:y},(C,_)=>{var Q;const N=_+1,j=(Q=B.get(F.email))==null?void 0:Q.get(N),R=new Date(E,l.getMonth(),_+1),L=R.getDay()===0||R.getDay()===6;return F.email==="alexis.robles@industrialderecoleta.cl"&&N===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:F.email,day:N,hasDataForStudent:B.has(F.email),studentDayRecords:j,allAttendanceKeys:Array.from(B.keys()),daysForStudent:B.get(F.email)?Array.from(B.get(F.email).keys()):[]}),u.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${L?"bg-slate-100 dark:bg-slate-700/50":""}`,children:u.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(j==null?void 0:j.entrada)&&u.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var H;return I((H=j.entrada)==null?void 0:H.ubicacion)},children:[u.jsx(Lme,{}),u.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(j.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(j==null?void 0:j.salida)&&u.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var H;return I((H=j.salida)==null?void 0:H.ubicacion)},children:[u.jsx(Ume,{}),u.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(j.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},N)})]},F.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:y+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},xC="evaluaciones_formativas",vC="calificaciones_formativas",xB="trabajos_grupales_formativos",Pme="usuarios",vB=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},Ome=(t,e,r)=>{const n=er(Ft(Tt,xC),Mn("curso","==",t),Mn("asignatura","==",e),an("fecha","asc"));return gr(n,s=>{r(s.docs.map(a=>vB(a)))},s=>{console.error("Error al suscribirse a evaluaciones:",s),r([])})},jme=async(t,e)=>{const r=m4(Tt),n=mr(Ft(Tt,xC));r.set(n,{...t,fecha:ur.fromDate(new Date(t.fecha+"T00:00:00"))});const s=mr(Tt,vC,n.id);return r.set(s,e),await r.commit(),n.id},Qme=async(t,e)=>{const r=mr(Tt,xC,t);await Ti(r,e,{merge:!0})},Hme=async t=>{const e=m4(Tt);e.delete(mr(Tt,xC,t)),e.delete(mr(Tt,vC,t)),await e.commit()},Vme=(t,e)=>{if(t.length===0)return e({}),()=>{};const r=t.map(n=>{const s=mr(Tt,vC,n);return gr(s,a=>{a.exists()&&e({[n]:a.data()})})});return()=>r.forEach(n=>n())},zme=async(t,e)=>{const r=mr(Tt,vC,t);await Ti(r,e,{merge:!0})},Gme=(t,e,r)=>{const n=er(Ft(Tt,xB),Mn("curso","==",t),Mn("asignatura","==",e),an("fechaPresentacion","desc"));return gr(n,s=>{r(s.docs.map(a=>vB(a)))},s=>{console.error("Error al suscribirse a trabajos grupales:",s),r([])})},qme=async t=>{const e={...t,fechaPresentacion:ur.fromDate(new Date(t.fechaPresentacion+"T00:00:00"))};await ws(Ft(Tt,xB),e)},Kme=async(t,e)=>{const r=mr(Tt,xB,t);await Ti(r,e,{merge:!0})},$me=t=>{const e=er(Ft(Tt,Pme));return gr(e,r=>{t(r.docs.map(n=>vB(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),t([])})},yH=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},$w={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},wH=t=>t.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},Wme=({cursos:t,onSelect:e})=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(r=>{const n=wH(r);return u.jsxs("div",{className:"space-y-2 text-center",children:[u.jsxs("button",{onClick:()=>e(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[u.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),u.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[u.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),u.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),u.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):u.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),u.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),Yme=({curso:t,asignaturas:e,onSelect:r,onBack:n})=>{const s=wH(t);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[u.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),u.jsxs("div",{className:`p-2 rounded-md ${s.bg} ${s.text} font-bold`,children:["Libro de Clases: ",t]})]}),u.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(a=>u.jsxs("button",{onClick:()=>r(a),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[u.jsx("span",{className:"text-2xl",children:$w[a]||$w.Default}),u.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:a})]},a))}):u.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),u.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},Xme=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[s,a]=q.useState([]),[i,o]=q.useState({}),[l,c]=q.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,h]=q.useState(null),[p,m]=q.useState(null),[y,x]=q.useState(!0),E=q.useMemo(()=>r.filter(_=>_.profile===jt.ESTUDIANTE&&yH(_.curso||"")===t).map(_=>_.nombreCompleto).sort((_,N)=>_.localeCompare(N)),[r,t]);q.useEffect(()=>{x(!0);const _=Ome(t,e,N=>{a(N);const j=N.map(L=>L.id),R=Vme(j,L=>{o(Q=>({...Q,...L}))});return x(!1),()=>R()});return()=>_()},[t,e]);const S=_=>{const{name:N,value:j}=_.target;d?h(R=>R?{...R,[N]:j}:null):c(R=>({...R,[N]:j}))},B=async _=>{if(_.preventDefault(),m(null),!l.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const N={asignatura:e,curso:t,...l},j=E.reduce((R,L)=>(R[L]="trabajado",R),{});try{await jme(N,j),c({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(R){console.error(R),m("No se pudo crear la evaluación.")}},D=(_,N)=>{var Q;const R=(((Q=i[_])==null?void 0:Q[N])||"trabajado")==="trabajado"?"no trabajado":"trabajado",L={...i,[_]:{...i[_]||{},[N]:R}};o(L),zme(_,{[N]:R}).catch(H=>{console.error("Error updating grade:",H)})},I=_=>h(_),U=async()=>{if(d)try{await Qme(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),h(null)}catch(_){console.error(_),m("No se pudo guardar la edición.")}},F=async _=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await Hme(_)}catch(N){console.error(N),m("No se pudo eliminar la evaluación.")}},C=q.useCallback(_=>{if(s.length===0)return"-";let N=0,j=0;return s.forEach(R=>{var Q;const L=(Q=i[R.id])==null?void 0:Q[_];L==="trabajado"?(N+=7,j++):L==="no trabajado"&&(N+=2,j++)}),j===0?"-":(N/j).toFixed(1)},[i,s]);return y?u.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),u.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),u.jsxs("form",{onSubmit:B,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),u.jsxs("div",{className:"w-full",children:[u.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),u.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:S,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"w-full",children:[u.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),u.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:S,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsx("div",{className:"w-full",children:u.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),p&&u.jsx("p",{className:"text-red-500 text-sm col-span-full",children:p})]}),u.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),s.map(_=>u.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===_.id?u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:S,className:"text-xs p-1 w-full dark:bg-slate-600"}),u.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:S,className:"text-xs p-1 w-full dark:bg-slate-600"}),u.jsx("button",{onClick:U,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("span",{className:"font-semibold",children:_.nombreActividad}),u.jsx("span",{className:"font-normal text-slate-500",children:_.fecha}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("button",{onClick:()=>I(_),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),u.jsx("button",{onClick:()=>F(_.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},_.id)),u.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:E.map(_=>u.jsxs("tr",{children:[u.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:_}),s.map(N=>{var L;const R=((L=i[N.id])==null?void 0:L[_])==="trabajado";return u.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:u.jsx("button",{onClick:()=>D(N.id,_),className:`text-3xl transition-opacity duration-200 ${R?"opacity-100":"opacity-20"}`,children:$w[e]||$w.Default})},N.id)}),u.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:C(_)})]},_))})]})})]})},Jme=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[s,a]=q.useState([]),[i,o]=q.useState(null),[l,c]=q.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,h]=q.useState({}),[p,m]=q.useState(2),y=q.useMemo(()=>r.filter(I=>I.profile===jt.ESTUDIANTE&&yH(I.curso||"")===t).sort((I,U)=>I.nombreCompleto.localeCompare(U.nombreCompleto)),[r,t]);q.useEffect(()=>{const I=Gme(t,e,a);return()=>I()},[t,e]),q.useEffect(()=>{if(i){const I={};i.grupos.forEach(U=>{U.integrantes.forEach(F=>{I[F.nombre]={groupNumber:String(U.numero),role:F.rol||""}})}),h(I)}else h({})},[i]);const x=async I=>{if(I.preventDefault(),!l.nombre.trim())return;const U={curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await qme(U),c({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(F){console.error(F),alert("No se pudo crear la actividad grupal.")}},E=async()=>{if(!i)return;const I=new Map;for(const F of y){const C=d[F.nombreCompleto];if(C&&C.groupNumber){const _=parseInt(C.groupNumber,10);isNaN(_)||(I.has(_)||I.set(_,[]),I.get(_).push({nombre:F.nombreCompleto,rol:C.role||""}))}}const U=Array.from(I.entries()).map(([F,C])=>({numero:F,integrantes:C})).sort((F,C)=>F.numero-C.numero);try{await Kme(i.id,{grupos:U}),alert("Grupos guardados con éxito.")}catch(F){console.error(F),alert("No se pudieron guardar los grupos.")}},S=()=>{if(p<2){alert("Debe haber al menos 2 grupos.");return}const I=[...y].sort(()=>Math.random()-.5),U={};I.forEach((F,C)=>{var _;U[F.nombreCompleto]={groupNumber:String(C%p+1),role:((_=d[F.nombreCompleto])==null?void 0:_.role)||""}}),h(U)},B=(I,U,F)=>{h(C=>({...C,[I]:{...C[I]||{groupNumber:"",role:""},[U]:F}}))},D=q.useMemo(()=>{const I=new Map;return Object.entries(d).forEach(([U,F])=>{F.groupNumber&&(I.has(F.groupNumber)||I.set(F.groupNumber,[]),I.get(F.groupNumber).push({nombre:U,rol:F.role}))}),Array.from(I.entries()).sort((U,F)=>parseInt(U[0])-parseInt(F[0]))},[d]);return i?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),u.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),u.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"md:col-span-1 space-y-4",children:[u.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",value:p,onChange:I=>m(parseInt(I.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),u.jsx("button",{onClick:S,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),u.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),u.jsx("table",{className:"w-full text-sm",children:u.jsx("tbody",{children:y.map(I=>{var U;return u.jsxs("tr",{children:[u.jsx("td",{className:"py-1 pr-2",children:I.nombreCompleto}),u.jsx("td",{className:"py-1",children:u.jsx("input",{type:"number",value:((U=d[I.nombreCompleto])==null?void 0:U.groupNumber)||"",onChange:F=>B(I.nombreCompleto,"groupNumber",F.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},I.id)})})})]})]}),u.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),u.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:D.map(([I,U])=>u.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[u.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",I]}),u.jsx("ul",{className:"space-y-2",children:U.map(F=>u.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"flex-1 truncate",children:F.nombre}),u.jsxs("select",{value:F.rol||"",onChange:C=>B(F.nombre,"role",C.target.value),className:"p-1 border rounded text-xs w-32",children:[u.jsx("option",{value:"",children:"-- Asignar Rol --"}),lj.map(C=>u.jsx("option",{value:C,children:C},C))]})]},F.nombre))})]},I))})]})]})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),u.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),u.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),u.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[u.jsx("input",{value:l.nombre,onChange:I=>c({...l,nombre:I.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),u.jsx("input",{type:"date",value:l.fecha,onChange:I=>c({...l,fecha:I.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),s.map(I=>u.jsxs("button",{onClick:()=>o(I),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[u.jsx("p",{className:"font-bold",children:I.nombreActividad}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",I.fechaPresentacion]})]},I.id))]})]})},Zme=({currentUser:t})=>{const[e,r]=q.useState("calificaciones"),[n,s]=q.useState(null),[a,i]=q.useState(null),[o,l]=q.useState([]),[c,d]=q.useState(!0);q.useEffect(()=>{d(!0);const x=$me(E=>{l(E),d(!1)});return()=>x()},[]);const h=q.useMemo(()=>t.cursos||[],[t.cursos]),p=q.useMemo(()=>t.asignaturas||[],[t.asignaturas]),m=({tab:x,label:E})=>u.jsx("button",{onClick:()=>r(x),className:`${e===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:E}),y=()=>{if(c)return u.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return u.jsx(Wme,{cursos:h,onSelect:s});if(!a)return u.jsx(Yme,{curso:n,asignaturas:p,onSelect:i,onBack:()=>s(null)});if(e==="calificaciones")return u.jsx(Xme,{curso:n,asignatura:a,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return u.jsx(Jme,{curso:n,asignatura:a,allUsers:o,onBack:()=>i(null)})};return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),u.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),u.jsx("div",{className:"mt-6",children:y()})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ege,tge;function rge(){return{geminiUrl:ege,vertexUrl:tge}}function nge(t,e,r,n){var s,a;if(!(t!=null&&t.baseUrl)){const i=rge();return e?(s=i.vertexUrl)!==null&&s!==void 0?s:r:(a=i.geminiUrl)!==null&&a!==void 0?a:n}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b0{}function ar(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(n,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function w(t,e,r){for(let a=0;a<e.length-1;a++){const i=e[a];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(r))t[o]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(r))for(let c=0;c<l.length;c++){const d=l[c];w(d,e.slice(a+1),r[c])}else for(const c of l)w(c,e.slice(a+1),r)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];w(l[0],e.slice(a+1),r);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const n=e[e.length-1],s=t[n];if(s!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===s)return;if(typeof s=="object"&&typeof r=="object"&&s!==null&&r!==null)Object.assign(s,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else t[n]=r}function v(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return;const n=e[r];if(n.endsWith("[]")){const s=n.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(i=>v(i,e.slice(r+1))):void 0}else return}else t=t[n]}return t}catch(r){if(r instanceof TypeError)return;throw r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nT(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(vR||(vR={}));var yR;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(yR||(yR={}));var mf;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(mf||(mf={}));var wR;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(wR||(wR={}));var bR;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(bR||(bR={}));var CR;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(CR||(CR={}));var ER;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ER||(ER={}));var _R;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(_R||(_R={}));var SR;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(SR||(SR={}));var TR;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(TR||(TR={}));var NR;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(NR||(NR={}));var BR;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(BR||(BR={}));var kR;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(kR||(kR={}));var IR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(IR||(IR={}));var FR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(FR||(FR={}));var DR;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(DR||(DR={}));var Ww;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ww||(Ww={}));var RR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(RR||(RR={}));var sT;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(sT||(sT={}));var LR;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(LR||(LR={}));var UR;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(UR||(UR={}));var MR;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(MR||(MR={}));var PR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(PR||(PR={}));var OR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(OR||(OR={}));var jR;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(jR||(jR={}));var QR;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(QR||(QR={}));var HR;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(HR||(HR={}));var VR;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(VR||(VR={}));var zR;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(zR||(zR={}));var GR;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(GR||(GR={}));var qR;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(qR||(qR={}));var KR;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(KR||(KR={}));var $R;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})($R||($R={}));var WR;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(WR||(WR={}));var YR;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(YR||(YR={}));var XR;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(XR||(XR={}));var JR;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(JR||(JR={}));var ZR;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ZR||(ZR={}));var eL;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(eL||(eL={}));var tL;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(tL||(tL={}));var rL;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(rL||(rL={}));var Fp;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Fp||(Fp={}));class aT{constructor(e){const r={};for(const n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fg{get text(){var e,r,n,s,a,i,o,l;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const h=[];for(const p of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[m,y]of Object.entries(p))m!=="text"&&m!=="thought"&&(y!==null||y!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,c+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,r,n,s,a,i,o,l;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const h of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&d.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,r,n,s,a,i,o,l;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,r,n,s,a,i,o,l,c;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,r,n,s,a,i,o,l,c;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class nL{}class sL{}class sge{}class age{}class aL{}class iL{}class oL{}class ige{}class lL{}class cL{}class uL{}class AL{}class oge{}class lge{}class cge{}class dL{}class uge{get text(){var e,r,n;let s="",a=!1;const i=[];for(const o of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[l,c]of Object.entries(o))l!=="text"&&l!=="thought"&&c!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;a=!0,s+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,r,n;let s="";const a=[];for(const i of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&a.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(s+=atob(i.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Yw{_fromAPIResponse({apiResponse:e,isVertexAI:r}){const n=new Yw;if(n.name=e.name,n.metadata=e.metadata,n.done=e.done,n.error=e.error,r){const s=e.response;if(s){const a=new lL,i=s.videos;a.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?nT(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),a.raiMediaFilteredCount=s.raiMediaFilteredCount,a.raiMediaFilteredReasons=s.raiMediaFilteredReasons,n.response=a}}else{const s=e.response;if(s){const a=new lL,i=s.generateVideoResponse,o=i==null?void 0:i.generatedSamples;a.generatedVideos=o==null?void 0:o.map(l=>{const c=l.video;return{video:{uri:c==null?void 0:c.uri,videoBytes:c!=null&&c.encodedVideo?nT(c==null?void 0:c.encodedVideo):void 0,mimeType:l.encoding}}}),a.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,a.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,n.response=a}}return n}}class Age{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function bH(t,e){const r=Zn(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function CH(t){return Array.isArray(t)?t.map(e=>Xw(e)):[Xw(t)]}function Xw(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function EH(t){const e=Xw(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _H(t){const e=Xw(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fL(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function SH(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>fL(e)):[fL(t)]}function iT(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function hL(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function pL(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ro(t){if(t==null)throw new Error("ContentUnion is required");return iT(t)?t:{role:"user",parts:SH(t)}}function TH(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const n=ro(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){const r=ro(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>ro(r)):[ro(e)]}function cc(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(hL(t)||pL(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ro(t)]}const e=[],r=[],n=iT(t[0]);for(const s of t){const a=iT(s);if(a!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(hL(s)||pL(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(s)}}return n||e.push({role:"user",parts:SH(r)}),e}function dge(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(mf).includes(r[0].toUpperCase())?r[0].toUpperCase():mf.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of r)e.anyOf.push({type:Object.values(mf).includes(n.toUpperCase())?n.toUpperCase():mf.TYPE_UNSPECIFIED})}}function Yp(t){const e={},r=["items"],n=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&dge(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(mf).includes(o.toUpperCase())?o.toUpperCase():mf.TYPE_UNSPECIFIED}else if(r.includes(i))e[i]=Yp(o);else if(n.includes(i)){const l=[];for(const c of o){if(c.type=="null"){e.nullable=!0;continue}l.push(Yp(c))}e[i]=l}else if(s.includes(i)){const l={};for(const[c,d]of Object.entries(o))l[c]=Yp(d);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function yB(t){return Yp(t)}function wB(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function bB(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Um(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Yp(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Yp(e.response));return t}function Mm(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function fge(t,e,r,n=1){const s=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:s?`${r}/${e}`:e}function dd(t,e){if(typeof e!="string")throw new Error("name must be a string");return fge(t,e,"cachedContents")}function NH(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function C0(t){return nT(t)}function hge(t){return t!=null&&typeof t=="object"&&"name"in t}function pge(t){return t!=null&&typeof t=="object"&&"video"in t}function mge(t){return t!=null&&typeof t=="object"&&"uri"in t}function BH(t){var e;let r;if(hge(t)&&(r=t.name),!(mge(t)&&(r=t.uri,r===void 0))&&!(pge(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const s=r.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${r}`);r=s[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function kH(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function IH(t){for(const e of["models","tunedModels","publisherModels"])if(gge(t,e))return t[e];return[]}function gge(t,e){return t!==null&&typeof t=="object"&&e in t}function xge(t,e={}){const r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function vge(t,e={}){const r=[],n=new Set;for(const s of t){const a=s.name;if(n.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);n.add(a);const i=xge(s,e);i.functionDeclarations&&r.push(...i.functionDeclarations)}return{functionDeclarations:r}}function FH(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function yge(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Pm(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function DH(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wge(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function bge(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["data"]);r!=null&&w(e,["data"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function Cge(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function Ege(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],wge(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],bge(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Cge(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function RH(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Ege(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function _ge(t){const e={},r=v(t,["anyOf"]);r!=null&&w(e,["anyOf"],r);const n=v(t,["default"]);n!=null&&w(e,["default"],n);const s=v(t,["description"]);s!=null&&w(e,["description"],s);const a=v(t,["enum"]);a!=null&&w(e,["enum"],a);const i=v(t,["example"]);i!=null&&w(e,["example"],i);const o=v(t,["format"]);o!=null&&w(e,["format"],o);const l=v(t,["items"]);l!=null&&w(e,["items"],l);const c=v(t,["maxItems"]);c!=null&&w(e,["maxItems"],c);const d=v(t,["maxLength"]);d!=null&&w(e,["maxLength"],d);const h=v(t,["maxProperties"]);h!=null&&w(e,["maxProperties"],h);const p=v(t,["maximum"]);p!=null&&w(e,["maximum"],p);const m=v(t,["minItems"]);m!=null&&w(e,["minItems"],m);const y=v(t,["minLength"]);y!=null&&w(e,["minLength"],y);const x=v(t,["minProperties"]);x!=null&&w(e,["minProperties"],x);const E=v(t,["minimum"]);E!=null&&w(e,["minimum"],E);const S=v(t,["nullable"]);S!=null&&w(e,["nullable"],S);const B=v(t,["pattern"]);B!=null&&w(e,["pattern"],B);const D=v(t,["properties"]);D!=null&&w(e,["properties"],D);const I=v(t,["propertyOrdering"]);I!=null&&w(e,["propertyOrdering"],I);const U=v(t,["required"]);U!=null&&w(e,["required"],U);const F=v(t,["title"]);F!=null&&w(e,["title"],F);const C=v(t,["type"]);return C!=null&&w(e,["type"],C),e}function Sge(t){const e={};if(v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=v(t,["category"]);r!=null&&w(e,["category"],r);const n=v(t,["threshold"]);return n!=null&&w(e,["threshold"],n),e}function Tge(t){const e={},r=v(t,["behavior"]);r!=null&&w(e,["behavior"],r);const n=v(t,["description"]);n!=null&&w(e,["description"],n);const s=v(t,["name"]);s!=null&&w(e,["name"],s);const a=v(t,["parameters"]);a!=null&&w(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&w(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&w(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function Nge(t){const e={},r=v(t,["startTime"]);r!=null&&w(e,["startTime"],r);const n=v(t,["endTime"]);return n!=null&&w(e,["endTime"],n),e}function Bge(t){const e={},r=v(t,["timeRangeFilter"]);return r!=null&&w(e,["timeRangeFilter"],Nge(r)),e}function kge(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["dynamicThreshold"]);return n!=null&&w(e,["dynamicThreshold"],n),e}function Ige(t){const e={},r=v(t,["dynamicRetrievalConfig"]);return r!=null&&w(e,["dynamicRetrievalConfig"],kge(r)),e}function Fge(){return{}}function Dge(t){const e={},r=v(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Tge(c))),w(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=v(t,["googleSearch"]);n!=null&&w(e,["googleSearch"],Bge(n));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&w(e,["googleSearchRetrieval"],Ige(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&w(e,["urlContext"],Fge());const i=v(t,["codeExecution"]);i!=null&&w(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&w(e,["computerUse"],o),e}function Rge(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["allowedFunctionNames"]);return n!=null&&w(e,["allowedFunctionNames"],n),e}function Lge(t){const e={},r=v(t,["latitude"]);r!=null&&w(e,["latitude"],r);const n=v(t,["longitude"]);return n!=null&&w(e,["longitude"],n),e}function Uge(t){const e={},r=v(t,["latLng"]);r!=null&&w(e,["latLng"],Lge(r));const n=v(t,["languageCode"]);return n!=null&&w(e,["languageCode"],n),e}function Mge(t){const e={},r=v(t,["functionCallingConfig"]);r!=null&&w(e,["functionCallingConfig"],Rge(r));const n=v(t,["retrievalConfig"]);return n!=null&&w(e,["retrievalConfig"],Uge(n)),e}function Pge(t){const e={},r=v(t,["voiceName"]);return r!=null&&w(e,["voiceName"],r),e}function LH(t){const e={},r=v(t,["prebuiltVoiceConfig"]);return r!=null&&w(e,["prebuiltVoiceConfig"],Pge(r)),e}function Oge(t){const e={},r=v(t,["speaker"]);r!=null&&w(e,["speaker"],r);const n=v(t,["voiceConfig"]);return n!=null&&w(e,["voiceConfig"],LH(n)),e}function jge(t){const e={},r=v(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Oge(s))),w(e,["speakerVoiceConfigs"],n)}return e}function Qge(t){const e={},r=v(t,["voiceConfig"]);r!=null&&w(e,["voiceConfig"],LH(r));const n=v(t,["multiSpeakerVoiceConfig"]);n!=null&&w(e,["multiSpeakerVoiceConfig"],jge(n));const s=v(t,["languageCode"]);return s!=null&&w(e,["languageCode"],s),e}function Hge(t){const e={},r=v(t,["includeThoughts"]);r!=null&&w(e,["includeThoughts"],r);const n=v(t,["thinkingBudget"]);return n!=null&&w(e,["thinkingBudget"],n),e}function Vge(t,e,r){const n={},s=v(e,["systemInstruction"]);r!==void 0&&s!=null&&w(r,["systemInstruction"],RH(ro(s)));const a=v(e,["temperature"]);a!=null&&w(n,["temperature"],a);const i=v(e,["topP"]);i!=null&&w(n,["topP"],i);const o=v(e,["topK"]);o!=null&&w(n,["topK"],o);const l=v(e,["candidateCount"]);l!=null&&w(n,["candidateCount"],l);const c=v(e,["maxOutputTokens"]);c!=null&&w(n,["maxOutputTokens"],c);const d=v(e,["stopSequences"]);d!=null&&w(n,["stopSequences"],d);const h=v(e,["responseLogprobs"]);h!=null&&w(n,["responseLogprobs"],h);const p=v(e,["logprobs"]);p!=null&&w(n,["logprobs"],p);const m=v(e,["presencePenalty"]);m!=null&&w(n,["presencePenalty"],m);const y=v(e,["frequencyPenalty"]);y!=null&&w(n,["frequencyPenalty"],y);const x=v(e,["seed"]);x!=null&&w(n,["seed"],x);const E=v(e,["responseMimeType"]);E!=null&&w(n,["responseMimeType"],E);const S=v(e,["responseSchema"]);S!=null&&w(n,["responseSchema"],_ge(yB(S)));const B=v(e,["responseJsonSchema"]);if(B!=null&&w(n,["responseJsonSchema"],B),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=v(e,["safetySettings"]);if(r!==void 0&&D!=null){let R=D;Array.isArray(R)&&(R=R.map(L=>Sge(L))),w(r,["safetySettings"],R)}const I=v(e,["tools"]);if(r!==void 0&&I!=null){let R=Mm(I);Array.isArray(R)&&(R=R.map(L=>Dge(Um(L)))),w(r,["tools"],R)}const U=v(e,["toolConfig"]);if(r!==void 0&&U!=null&&w(r,["toolConfig"],Mge(U)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=v(e,["cachedContent"]);r!==void 0&&F!=null&&w(r,["cachedContent"],dd(t,F));const C=v(e,["responseModalities"]);C!=null&&w(n,["responseModalities"],C);const _=v(e,["mediaResolution"]);_!=null&&w(n,["mediaResolution"],_);const N=v(e,["speechConfig"]);if(N!=null&&w(n,["speechConfig"],Qge(wB(N))),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=v(e,["thinkingConfig"]);return j!=null&&w(n,["thinkingConfig"],Hge(j)),n}function zge(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["request","model"],Zn(t,n));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>RH(o))),w(r,["request","contents"],i)}const a=v(e,["config"]);return a!=null&&w(r,["request","generationConfig"],Vge(t,a,r)),r}function Gge(t,e){const r={};if(v(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(v(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=v(e,["fileName"]);n!=null&&w(r,["fileName"],n);const s=v(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>zge(t,i))),w(r,["requests","requests"],a)}return r}function qge(t,e){const r={},n=v(t,["displayName"]);if(e!==void 0&&n!=null&&w(e,["batch","displayName"],n),v(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function Kge(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["src"]);s!=null&&w(r,["batch","inputConfig"],Gge(t,FH(t,s)));const a=v(e,["config"]);return a!=null&&w(r,["config"],qge(a,r)),r}function $ge(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],Pm(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function Wge(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],Pm(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function Yge(t,e){const r={},n=v(t,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=v(t,["pageToken"]);if(e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),v(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function Xge(t){const e={},r=v(t,["config"]);return r!=null&&w(e,["config"],Yge(r,e)),e}function Jge(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],Pm(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function Zge(t){const e={},r=v(t,["format"]);r!=null&&w(e,["instancesFormat"],r);const n=v(t,["gcsUri"]);n!=null&&w(e,["gcsSource","uris"],n);const s=v(t,["bigqueryUri"]);if(s!=null&&w(e,["bigquerySource","inputUri"],s),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function exe(t){const e={},r=v(t,["format"]);r!=null&&w(e,["predictionsFormat"],r);const n=v(t,["gcsUri"]);n!=null&&w(e,["gcsDestination","outputUriPrefix"],n);const s=v(t,["bigqueryUri"]);if(s!=null&&w(e,["bigqueryDestination","outputUri"],s),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function txe(t,e){const r={},n=v(t,["displayName"]);e!==void 0&&n!=null&&w(e,["displayName"],n);const s=v(t,["dest"]);return e!==void 0&&s!=null&&w(e,["outputConfig"],exe(yge(s))),r}function rxe(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["model"],Zn(t,n));const s=v(e,["src"]);s!=null&&w(r,["inputConfig"],Zge(FH(t,s)));const a=v(e,["config"]);return a!=null&&w(r,["config"],txe(a,r)),r}function nxe(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],Pm(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function sxe(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],Pm(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function axe(t,e){const r={},n=v(t,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&w(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&w(e,["_query","filter"],a),r}function ixe(t){const e={},r=v(t,["config"]);return r!=null&&w(e,["config"],axe(r,e)),e}function oxe(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],Pm(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function lxe(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function cxe(t){const e={},r=v(t,["data"]);r!=null&&w(e,["data"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function uxe(t){const e={},r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function Axe(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],lxe(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],cxe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],uxe(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function dxe(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Axe(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function fxe(t){const e={},r=v(t,["citationSources"]);return r!=null&&w(e,["citations"],r),e}function hxe(t){const e={},r=v(t,["retrievedUrl"]);r!=null&&w(e,["retrievedUrl"],r);const n=v(t,["urlRetrievalStatus"]);return n!=null&&w(e,["urlRetrievalStatus"],n),e}function pxe(t){const e={},r=v(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>hxe(s))),w(e,["urlMetadata"],n)}return e}function mxe(t){const e={},r=v(t,["content"]);r!=null&&w(e,["content"],dxe(r));const n=v(t,["citationMetadata"]);n!=null&&w(e,["citationMetadata"],fxe(n));const s=v(t,["tokenCount"]);s!=null&&w(e,["tokenCount"],s);const a=v(t,["finishReason"]);a!=null&&w(e,["finishReason"],a);const i=v(t,["urlContextMetadata"]);i!=null&&w(e,["urlContextMetadata"],pxe(i));const o=v(t,["avgLogprobs"]);o!=null&&w(e,["avgLogprobs"],o);const l=v(t,["groundingMetadata"]);l!=null&&w(e,["groundingMetadata"],l);const c=v(t,["index"]);c!=null&&w(e,["index"],c);const d=v(t,["logprobsResult"]);d!=null&&w(e,["logprobsResult"],d);const h=v(t,["safetyRatings"]);return h!=null&&w(e,["safetyRatings"],h),e}function gxe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>mxe(l))),w(e,["candidates"],o)}const s=v(t,["modelVersion"]);s!=null&&w(e,["modelVersion"],s);const a=v(t,["promptFeedback"]);a!=null&&w(e,["promptFeedback"],a);const i=v(t,["usageMetadata"]);return i!=null&&w(e,["usageMetadata"],i),e}function UH(t){const e={},r=v(t,["details"]);r!=null&&w(e,["details"],r);const n=v(t,["code"]);n!=null&&w(e,["code"],n);const s=v(t,["message"]);return s!=null&&w(e,["message"],s),e}function xxe(t){const e={},r=v(t,["response"]);r!=null&&w(e,["response"],gxe(r));const n=v(t,["error"]);return n!=null&&w(e,["error"],UH(n)),e}function vxe(t){const e={},r=v(t,["responsesFile"]);r!=null&&w(e,["fileName"],r);const n=v(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>xxe(a))),w(e,["inlinedResponses"],s)}return e}function oT(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["metadata","displayName"]);n!=null&&w(e,["displayName"],n);const s=v(t,["metadata","state"]);s!=null&&w(e,["state"],DH(s));const a=v(t,["metadata","createTime"]);a!=null&&w(e,["createTime"],a);const i=v(t,["metadata","endTime"]);i!=null&&w(e,["endTime"],i);const o=v(t,["metadata","updateTime"]);o!=null&&w(e,["updateTime"],o);const l=v(t,["metadata","model"]);l!=null&&w(e,["model"],l);const c=v(t,["metadata","output"]);return c!=null&&w(e,["dest"],vxe(c)),e}function yxe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=v(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>oT(i))),w(e,["batchJobs"],a)}return e}function wxe(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["done"]);n!=null&&w(e,["done"],n);const s=v(t,["error"]);return s!=null&&w(e,["error"],UH(s)),e}function MH(t){const e={},r=v(t,["details"]);r!=null&&w(e,["details"],r);const n=v(t,["code"]);n!=null&&w(e,["code"],n);const s=v(t,["message"]);return s!=null&&w(e,["message"],s),e}function bxe(t){const e={},r=v(t,["instancesFormat"]);r!=null&&w(e,["format"],r);const n=v(t,["gcsSource","uris"]);n!=null&&w(e,["gcsUri"],n);const s=v(t,["bigquerySource","inputUri"]);return s!=null&&w(e,["bigqueryUri"],s),e}function Cxe(t){const e={},r=v(t,["predictionsFormat"]);r!=null&&w(e,["format"],r);const n=v(t,["gcsDestination","outputUriPrefix"]);n!=null&&w(e,["gcsUri"],n);const s=v(t,["bigqueryDestination","outputUri"]);return s!=null&&w(e,["bigqueryUri"],s),e}function lT(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=v(t,["state"]);s!=null&&w(e,["state"],DH(s));const a=v(t,["error"]);a!=null&&w(e,["error"],MH(a));const i=v(t,["createTime"]);i!=null&&w(e,["createTime"],i);const o=v(t,["startTime"]);o!=null&&w(e,["startTime"],o);const l=v(t,["endTime"]);l!=null&&w(e,["endTime"],l);const c=v(t,["updateTime"]);c!=null&&w(e,["updateTime"],c);const d=v(t,["model"]);d!=null&&w(e,["model"],d);const h=v(t,["inputConfig"]);h!=null&&w(e,["src"],bxe(h));const p=v(t,["outputConfig"]);return p!=null&&w(e,["dest"],Cxe(p)),e}function Exe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=v(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>lT(i))),w(e,["batchJobs"],a)}return e}function _xe(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["done"]);n!=null&&w(e,["done"],n);const s=v(t,["error"]);return s!=null&&w(e,["error"],MH(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var l0;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(l0||(l0={}));class J1{constructor(e,r,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,s)}init(e,r,n){var s,a;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!n||Object.keys(n).length===0?i={config:{}}:typeof n=="object"?i=Object.assign({},n):i=n,i.config&&(i.config.pageToken=r.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(a=(s=i.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sxe extends b0{constructor(e){super(),this.apiClient=e,this.create=async r=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(r.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(r.config=r.config||{},r.config.displayName===void 0&&(r.config.displayName="genaiBatchJob_${timestampStr}"),r.config.dest===void 0&&typeof r.src=="string")if(r.src.startsWith("gs://")&&r.src.endsWith(".jsonl"))r.config.dest=`${r.src.slice(0,-6)}/dest`;else if(r.src.startsWith("bq://"))r.config.dest=`${r.src}_dest_${s}`;else throw new Error("Unsupported source:"+r.src)}return await this.createInternal(r)},this.list=async(r={})=>new J1(l0.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r)}async createInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=rxe(this.apiClient,e);return o=ar("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>lT(d))}else{const c=Kge(this.apiClient,e);return o=ar("{model}:batchGenerateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>oT(d))}}async get(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=nxe(this.apiClient,e);return o=ar("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>lT(d))}else{const c=$ge(this.apiClient,e);return o=ar("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>oT(d))}}async cancel(e){var r,n,s,a;let i="",o={};if(this.apiClient.isVertexAI()){const l=sxe(this.apiClient,e);i=ar("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const l=Wge(this.apiClient,e);i=ar("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=ixe(e);return o=ar("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Exe(d),p=new dL;return Object.assign(p,h),p})}else{const c=Xge(e);return o=ar("batches",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=yxe(d),p=new dL;return Object.assign(p,h),p})}}async delete(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=oxe(this.apiClient,e);return o=ar("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>_xe(d))}else{const c=Jge(this.apiClient,e);return o=ar("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>wxe(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Txe(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Nxe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["data"]);r!=null&&w(e,["data"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function Bxe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function kxe(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],Txe(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Nxe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Bxe(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function mL(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>kxe(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function Ixe(t){const e={},r=v(t,["behavior"]);r!=null&&w(e,["behavior"],r);const n=v(t,["description"]);n!=null&&w(e,["description"],n);const s=v(t,["name"]);s!=null&&w(e,["name"],s);const a=v(t,["parameters"]);a!=null&&w(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&w(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&w(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function Fxe(t){const e={},r=v(t,["startTime"]);r!=null&&w(e,["startTime"],r);const n=v(t,["endTime"]);return n!=null&&w(e,["endTime"],n),e}function Dxe(t){const e={},r=v(t,["timeRangeFilter"]);return r!=null&&w(e,["timeRangeFilter"],Fxe(r)),e}function Rxe(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["dynamicThreshold"]);return n!=null&&w(e,["dynamicThreshold"],n),e}function Lxe(t){const e={},r=v(t,["dynamicRetrievalConfig"]);return r!=null&&w(e,["dynamicRetrievalConfig"],Rxe(r)),e}function Uxe(){return{}}function Mxe(t){const e={},r=v(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Ixe(c))),w(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=v(t,["googleSearch"]);n!=null&&w(e,["googleSearch"],Dxe(n));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&w(e,["googleSearchRetrieval"],Lxe(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&w(e,["urlContext"],Uxe());const i=v(t,["codeExecution"]);i!=null&&w(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&w(e,["computerUse"],o),e}function Pxe(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["allowedFunctionNames"]);return n!=null&&w(e,["allowedFunctionNames"],n),e}function Oxe(t){const e={},r=v(t,["latitude"]);r!=null&&w(e,["latitude"],r);const n=v(t,["longitude"]);return n!=null&&w(e,["longitude"],n),e}function jxe(t){const e={},r=v(t,["latLng"]);r!=null&&w(e,["latLng"],Oxe(r));const n=v(t,["languageCode"]);return n!=null&&w(e,["languageCode"],n),e}function Qxe(t){const e={},r=v(t,["functionCallingConfig"]);r!=null&&w(e,["functionCallingConfig"],Pxe(r));const n=v(t,["retrievalConfig"]);return n!=null&&w(e,["retrievalConfig"],jxe(n)),e}function Hxe(t,e){const r={},n=v(t,["ttl"]);e!==void 0&&n!=null&&w(e,["ttl"],n);const s=v(t,["expireTime"]);e!==void 0&&s!=null&&w(e,["expireTime"],s);const a=v(t,["displayName"]);e!==void 0&&a!=null&&w(e,["displayName"],a);const i=v(t,["contents"]);if(e!==void 0&&i!=null){let d=cc(i);Array.isArray(d)&&(d=d.map(h=>mL(h))),w(e,["contents"],d)}const o=v(t,["systemInstruction"]);e!==void 0&&o!=null&&w(e,["systemInstruction"],mL(ro(o)));const l=v(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>Mxe(h))),w(e,["tools"],d)}const c=v(t,["toolConfig"]);if(e!==void 0&&c!=null&&w(e,["toolConfig"],Qxe(c)),v(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function Vxe(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["model"],bH(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],Hxe(s,r)),r}function zxe(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],dd(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function Gxe(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],dd(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function qxe(t,e){const r={},n=v(t,["ttl"]);e!==void 0&&n!=null&&w(e,["ttl"],n);const s=v(t,["expireTime"]);return e!==void 0&&s!=null&&w(e,["expireTime"],s),r}function Kxe(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],dd(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],qxe(s,r)),r}function $xe(t,e){const r={},n=v(t,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=v(t,["pageToken"]);return e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),r}function Wxe(t){const e={},r=v(t,["config"]);return r!=null&&w(e,["config"],$xe(r,e)),e}function Yxe(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Xxe(t){const e={},r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const n=v(t,["data"]);n!=null&&w(e,["data"],n);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Jxe(t){const e={},r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Zxe(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],Yxe(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Xxe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Jxe(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function gL(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Zxe(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function e1e(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=v(t,["description"]);r!=null&&w(e,["description"],r);const n=v(t,["name"]);n!=null&&w(e,["name"],n);const s=v(t,["parameters"]);s!=null&&w(e,["parameters"],s);const a=v(t,["parametersJsonSchema"]);a!=null&&w(e,["parametersJsonSchema"],a);const i=v(t,["response"]);i!=null&&w(e,["response"],i);const o=v(t,["responseJsonSchema"]);return o!=null&&w(e,["responseJsonSchema"],o),e}function t1e(t){const e={},r=v(t,["startTime"]);r!=null&&w(e,["startTime"],r);const n=v(t,["endTime"]);return n!=null&&w(e,["endTime"],n),e}function r1e(t){const e={},r=v(t,["timeRangeFilter"]);return r!=null&&w(e,["timeRangeFilter"],t1e(r)),e}function n1e(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["dynamicThreshold"]);return n!=null&&w(e,["dynamicThreshold"],n),e}function s1e(t){const e={},r=v(t,["dynamicRetrievalConfig"]);return r!=null&&w(e,["dynamicRetrievalConfig"],n1e(r)),e}function a1e(){return{}}function i1e(t){const e={},r=v(t,["apiKeyString"]);return r!=null&&w(e,["apiKeyString"],r),e}function o1e(t){const e={},r=v(t,["apiKeyConfig"]);r!=null&&w(e,["apiKeyConfig"],i1e(r));const n=v(t,["authType"]);n!=null&&w(e,["authType"],n);const s=v(t,["googleServiceAccountConfig"]);s!=null&&w(e,["googleServiceAccountConfig"],s);const a=v(t,["httpBasicAuthConfig"]);a!=null&&w(e,["httpBasicAuthConfig"],a);const i=v(t,["oauthConfig"]);i!=null&&w(e,["oauthConfig"],i);const o=v(t,["oidcConfig"]);return o!=null&&w(e,["oidcConfig"],o),e}function l1e(t){const e={},r=v(t,["authConfig"]);return r!=null&&w(e,["authConfig"],o1e(r)),e}function c1e(){return{}}function u1e(t){const e={},r=v(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(p=>e1e(p))),w(e,["functionDeclarations"],h)}const n=v(t,["retrieval"]);n!=null&&w(e,["retrieval"],n);const s=v(t,["googleSearch"]);s!=null&&w(e,["googleSearch"],r1e(s));const a=v(t,["googleSearchRetrieval"]);a!=null&&w(e,["googleSearchRetrieval"],s1e(a)),v(t,["enterpriseWebSearch"])!=null&&w(e,["enterpriseWebSearch"],a1e());const o=v(t,["googleMaps"]);o!=null&&w(e,["googleMaps"],l1e(o)),v(t,["urlContext"])!=null&&w(e,["urlContext"],c1e());const c=v(t,["codeExecution"]);c!=null&&w(e,["codeExecution"],c);const d=v(t,["computerUse"]);return d!=null&&w(e,["computerUse"],d),e}function A1e(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["allowedFunctionNames"]);return n!=null&&w(e,["allowedFunctionNames"],n),e}function d1e(t){const e={},r=v(t,["latitude"]);r!=null&&w(e,["latitude"],r);const n=v(t,["longitude"]);return n!=null&&w(e,["longitude"],n),e}function f1e(t){const e={},r=v(t,["latLng"]);r!=null&&w(e,["latLng"],d1e(r));const n=v(t,["languageCode"]);return n!=null&&w(e,["languageCode"],n),e}function h1e(t){const e={},r=v(t,["functionCallingConfig"]);r!=null&&w(e,["functionCallingConfig"],A1e(r));const n=v(t,["retrievalConfig"]);return n!=null&&w(e,["retrievalConfig"],f1e(n)),e}function p1e(t,e){const r={},n=v(t,["ttl"]);e!==void 0&&n!=null&&w(e,["ttl"],n);const s=v(t,["expireTime"]);e!==void 0&&s!=null&&w(e,["expireTime"],s);const a=v(t,["displayName"]);e!==void 0&&a!=null&&w(e,["displayName"],a);const i=v(t,["contents"]);if(e!==void 0&&i!=null){let h=cc(i);Array.isArray(h)&&(h=h.map(p=>gL(p))),w(e,["contents"],h)}const o=v(t,["systemInstruction"]);e!==void 0&&o!=null&&w(e,["systemInstruction"],gL(ro(o)));const l=v(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>u1e(p))),w(e,["tools"],h)}const c=v(t,["toolConfig"]);e!==void 0&&c!=null&&w(e,["toolConfig"],h1e(c));const d=v(t,["kmsKeyName"]);return e!==void 0&&d!=null&&w(e,["encryption_spec","kmsKeyName"],d),r}function m1e(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["model"],bH(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],p1e(s,r)),r}function g1e(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],dd(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function x1e(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],dd(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function v1e(t,e){const r={},n=v(t,["ttl"]);e!==void 0&&n!=null&&w(e,["ttl"],n);const s=v(t,["expireTime"]);return e!==void 0&&s!=null&&w(e,["expireTime"],s),r}function y1e(t,e){const r={},n=v(e,["name"]);n!=null&&w(r,["_url","name"],dd(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],v1e(s,r)),r}function w1e(t,e){const r={},n=v(t,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=v(t,["pageToken"]);return e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),r}function b1e(t){const e={},r=v(t,["config"]);return r!=null&&w(e,["config"],w1e(r,e)),e}function R2(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=v(t,["model"]);s!=null&&w(e,["model"],s);const a=v(t,["createTime"]);a!=null&&w(e,["createTime"],a);const i=v(t,["updateTime"]);i!=null&&w(e,["updateTime"],i);const o=v(t,["expireTime"]);o!=null&&w(e,["expireTime"],o);const l=v(t,["usageMetadata"]);return l!=null&&w(e,["usageMetadata"],l),e}function C1e(){return{}}function E1e(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=v(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>R2(i))),w(e,["cachedContents"],a)}return e}function L2(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=v(t,["model"]);s!=null&&w(e,["model"],s);const a=v(t,["createTime"]);a!=null&&w(e,["createTime"],a);const i=v(t,["updateTime"]);i!=null&&w(e,["updateTime"],i);const o=v(t,["expireTime"]);o!=null&&w(e,["expireTime"],o);const l=v(t,["usageMetadata"]);return l!=null&&w(e,["usageMetadata"],l),e}function _1e(){return{}}function S1e(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=v(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>L2(i))),w(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T1e extends b0{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new J1(l0.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=m1e(this.apiClient,e);return o=ar("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>L2(d))}else{const c=Vxe(this.apiClient,e);return o=ar("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>R2(d))}}async get(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=g1e(this.apiClient,e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>L2(d))}else{const c=zxe(this.apiClient,e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>R2(d))}}async delete(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=x1e(this.apiClient,e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=_1e(),h=new uL;return Object.assign(h,d),h})}else{const c=Gxe(this.apiClient,e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=C1e(),h=new uL;return Object.assign(h,d),h})}}async update(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=y1e(this.apiClient,e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>L2(d))}else{const c=Kxe(this.apiClient,e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>R2(d))}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=b1e(e);return o=ar("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=S1e(d),p=new AL;return Object.assign(p,h),p})}else{const c=Wxe(e);return o=ar("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=E1e(d),p=new AL;return Object.assign(p,h),p})}}}function xL(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ms(t){return this instanceof ms?(this.v=t,this):new ms(t)}function Xp(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(m){return function(y){return Promise.resolve(y).then(m,h)}}function o(m,y){n[m]&&(s[m]=function(x){return new Promise(function(E,S){a.push([m,x,E,S])>1||l(m,x)})},y&&(s[m]=y(s[m])))}function l(m,y){try{c(n[m](y))}catch(x){p(a[0][3],x)}}function c(m){m.value instanceof ms?Promise.resolve(m.value.v).then(d,h):p(a[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function p(m,y){m(y),a.shift(),a.length&&l(a[0][0],a[0][1])}}function Bx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof xL=="function"?xL(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(i){return new Promise(function(o,l){i=t[a](i),s(o,l,i.done,i.value)})}}function s(a,i,o,l){Promise.resolve(l).then(function(c){a({value:c,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N1e(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:PH(r)}function PH(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function B1e(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function vL(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{const s=[];let a=!0;for(;n<r&&t[n].role==="model";)s.push(t[n]),a&&!PH(t[n])&&(a=!1),n++;a?e.push(...s):e.pop()}return e}class k1e{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new I1e(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class I1e{constructor(e,r,n,s={},a=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),B1e(a)}async sendMessage(e){var r;await this.sendPromise;const n=ro(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var a,i,o;const l=await s,c=(i=(a=l.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];d!=null&&(p=(o=d.slice(h))!==null&&o!==void 0?o:[]);const m=c?[c]:[];this.recordHistory(n,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var r;await this.sendPromise;const n=ro(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,n)}getHistory(e=!1){const r=e?vL(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){var n,s;return Xp(this,arguments,function*(){var i,o,l,c;const d=[];try{for(var h=!0,p=Bx(e),m;m=yield ms(p.next()),i=m.done,!i;h=!0){c=m.value,h=!1;const y=c;if(N1e(y)){const x=(s=(n=y.candidates)===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.content;x!==void 0&&d.push(x)}yield yield ms(y)}}catch(y){o={error:y}}finally{try{!h&&!i&&(l=p.return)&&(yield ms(l.call(p)))}finally{if(o)throw o.error}}this.recordHistory(r,d)})}recordHistory(e,r,n){let s=[];r.length>0&&r.every(a=>a.role!==void 0)?s=r:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...vL(n)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yC extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yC.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F1e(t,e){const r={},n=v(t,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=v(t,["pageToken"]);return e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),r}function D1e(t){const e={},r=v(t,["config"]);return r!=null&&w(e,["config"],F1e(r,e)),e}function R1e(t){const e={},r=v(t,["details"]);r!=null&&w(e,["details"],r);const n=v(t,["message"]);n!=null&&w(e,["message"],n);const s=v(t,["code"]);return s!=null&&w(e,["code"],s),e}function L1e(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=v(t,["mimeType"]);s!=null&&w(e,["mimeType"],s);const a=v(t,["sizeBytes"]);a!=null&&w(e,["sizeBytes"],a);const i=v(t,["createTime"]);i!=null&&w(e,["createTime"],i);const o=v(t,["expirationTime"]);o!=null&&w(e,["expirationTime"],o);const l=v(t,["updateTime"]);l!=null&&w(e,["updateTime"],l);const c=v(t,["sha256Hash"]);c!=null&&w(e,["sha256Hash"],c);const d=v(t,["uri"]);d!=null&&w(e,["uri"],d);const h=v(t,["downloadUri"]);h!=null&&w(e,["downloadUri"],h);const p=v(t,["state"]);p!=null&&w(e,["state"],p);const m=v(t,["source"]);m!=null&&w(e,["source"],m);const y=v(t,["videoMetadata"]);y!=null&&w(e,["videoMetadata"],y);const x=v(t,["error"]);return x!=null&&w(e,["error"],R1e(x)),e}function U1e(t){const e={},r=v(t,["file"]);r!=null&&w(e,["file"],L1e(r));const n=v(t,["config"]);return n!=null&&w(e,["config"],n),e}function M1e(t){const e={},r=v(t,["name"]);r!=null&&w(e,["_url","file"],BH(r));const n=v(t,["config"]);return n!=null&&w(e,["config"],n),e}function P1e(t){const e={},r=v(t,["name"]);r!=null&&w(e,["_url","file"],BH(r));const n=v(t,["config"]);return n!=null&&w(e,["config"],n),e}function O1e(t){const e={},r=v(t,["details"]);r!=null&&w(e,["details"],r);const n=v(t,["message"]);n!=null&&w(e,["message"],n);const s=v(t,["code"]);return s!=null&&w(e,["code"],s),e}function cT(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=v(t,["mimeType"]);s!=null&&w(e,["mimeType"],s);const a=v(t,["sizeBytes"]);a!=null&&w(e,["sizeBytes"],a);const i=v(t,["createTime"]);i!=null&&w(e,["createTime"],i);const o=v(t,["expirationTime"]);o!=null&&w(e,["expirationTime"],o);const l=v(t,["updateTime"]);l!=null&&w(e,["updateTime"],l);const c=v(t,["sha256Hash"]);c!=null&&w(e,["sha256Hash"],c);const d=v(t,["uri"]);d!=null&&w(e,["uri"],d);const h=v(t,["downloadUri"]);h!=null&&w(e,["downloadUri"],h);const p=v(t,["state"]);p!=null&&w(e,["state"],p);const m=v(t,["source"]);m!=null&&w(e,["source"],m);const y=v(t,["videoMetadata"]);y!=null&&w(e,["videoMetadata"],y);const x=v(t,["error"]);return x!=null&&w(e,["error"],O1e(x)),e}function j1e(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=v(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>cT(i))),w(e,["files"],a)}return e}function Q1e(t){const e={},r=v(t,["sdkHttpResponse"]);return r!=null&&w(e,["sdkHttpResponse"],r),e}function H1e(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V1e extends b0{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new J1(l0.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>cT(r))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=D1e(e);return a=ar("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=j1e(l),d=new oge;return Object.assign(d,c),d})}}async createInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=U1e(e);return a=ar("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>{const c=Q1e(l),d=new lge;return Object.assign(d,c),d})}}async get(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=M1e(e);return a=ar("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>cT(l))}}async delete(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=P1e(e);return a=ar("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(()=>{const l=H1e(),c=new cge;return Object.assign(c,l),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z1e(t){const e={},r=v(t,["voiceName"]);return r!=null&&w(e,["voiceName"],r),e}function OH(t){const e={},r=v(t,["prebuiltVoiceConfig"]);return r!=null&&w(e,["prebuiltVoiceConfig"],z1e(r)),e}function G1e(t){const e={},r=v(t,["speaker"]);r!=null&&w(e,["speaker"],r);const n=v(t,["voiceConfig"]);return n!=null&&w(e,["voiceConfig"],OH(n)),e}function q1e(t){const e={},r=v(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>G1e(s))),w(e,["speakerVoiceConfigs"],n)}return e}function K1e(t){const e={},r=v(t,["voiceConfig"]);r!=null&&w(e,["voiceConfig"],OH(r));const n=v(t,["multiSpeakerVoiceConfig"]);n!=null&&w(e,["multiSpeakerVoiceConfig"],q1e(n));const s=v(t,["languageCode"]);return s!=null&&w(e,["languageCode"],s),e}function $1e(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function W1e(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["data"]);r!=null&&w(e,["data"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function Y1e(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function X1e(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],$1e(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],W1e(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Y1e(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function J1e(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>X1e(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function Z1e(t){const e={},r=v(t,["behavior"]);r!=null&&w(e,["behavior"],r);const n=v(t,["description"]);n!=null&&w(e,["description"],n);const s=v(t,["name"]);s!=null&&w(e,["name"],s);const a=v(t,["parameters"]);a!=null&&w(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&w(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&w(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function eve(t){const e={},r=v(t,["startTime"]);r!=null&&w(e,["startTime"],r);const n=v(t,["endTime"]);return n!=null&&w(e,["endTime"],n),e}function tve(t){const e={},r=v(t,["timeRangeFilter"]);return r!=null&&w(e,["timeRangeFilter"],eve(r)),e}function rve(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["dynamicThreshold"]);return n!=null&&w(e,["dynamicThreshold"],n),e}function nve(t){const e={},r=v(t,["dynamicRetrievalConfig"]);return r!=null&&w(e,["dynamicRetrievalConfig"],rve(r)),e}function sve(){return{}}function ave(t){const e={},r=v(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Z1e(c))),w(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=v(t,["googleSearch"]);n!=null&&w(e,["googleSearch"],tve(n));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&w(e,["googleSearchRetrieval"],nve(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&w(e,["urlContext"],sve());const i=v(t,["codeExecution"]);i!=null&&w(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&w(e,["computerUse"],o),e}function ive(t){const e={},r=v(t,["handle"]);if(r!=null&&w(e,["handle"],r),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yL(){return{}}function ove(t){const e={},r=v(t,["disabled"]);r!=null&&w(e,["disabled"],r);const n=v(t,["startOfSpeechSensitivity"]);n!=null&&w(e,["startOfSpeechSensitivity"],n);const s=v(t,["endOfSpeechSensitivity"]);s!=null&&w(e,["endOfSpeechSensitivity"],s);const a=v(t,["prefixPaddingMs"]);a!=null&&w(e,["prefixPaddingMs"],a);const i=v(t,["silenceDurationMs"]);return i!=null&&w(e,["silenceDurationMs"],i),e}function lve(t){const e={},r=v(t,["automaticActivityDetection"]);r!=null&&w(e,["automaticActivityDetection"],ove(r));const n=v(t,["activityHandling"]);n!=null&&w(e,["activityHandling"],n);const s=v(t,["turnCoverage"]);return s!=null&&w(e,["turnCoverage"],s),e}function cve(t){const e={},r=v(t,["targetTokens"]);return r!=null&&w(e,["targetTokens"],r),e}function uve(t){const e={},r=v(t,["triggerTokens"]);r!=null&&w(e,["triggerTokens"],r);const n=v(t,["slidingWindow"]);return n!=null&&w(e,["slidingWindow"],cve(n)),e}function Ave(t){const e={},r=v(t,["proactiveAudio"]);return r!=null&&w(e,["proactiveAudio"],r),e}function dve(t,e){const r={},n=v(t,["generationConfig"]);e!==void 0&&n!=null&&w(e,["setup","generationConfig"],n);const s=v(t,["responseModalities"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","responseModalities"],s);const a=v(t,["temperature"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","temperature"],a);const i=v(t,["topP"]);e!==void 0&&i!=null&&w(e,["setup","generationConfig","topP"],i);const o=v(t,["topK"]);e!==void 0&&o!=null&&w(e,["setup","generationConfig","topK"],o);const l=v(t,["maxOutputTokens"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","maxOutputTokens"],l);const c=v(t,["mediaResolution"]);e!==void 0&&c!=null&&w(e,["setup","generationConfig","mediaResolution"],c);const d=v(t,["seed"]);e!==void 0&&d!=null&&w(e,["setup","generationConfig","seed"],d);const h=v(t,["speechConfig"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","speechConfig"],K1e(bB(h)));const p=v(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=v(t,["systemInstruction"]);e!==void 0&&m!=null&&w(e,["setup","systemInstruction"],J1e(ro(m)));const y=v(t,["tools"]);if(e!==void 0&&y!=null){let U=Mm(y);Array.isArray(U)&&(U=U.map(F=>ave(Um(F)))),w(e,["setup","tools"],U)}const x=v(t,["sessionResumption"]);e!==void 0&&x!=null&&w(e,["setup","sessionResumption"],ive(x));const E=v(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&w(e,["setup","inputAudioTranscription"],yL());const S=v(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&w(e,["setup","outputAudioTranscription"],yL());const B=v(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&w(e,["setup","realtimeInputConfig"],lve(B));const D=v(t,["contextWindowCompression"]);e!==void 0&&D!=null&&w(e,["setup","contextWindowCompression"],uve(D));const I=v(t,["proactivity"]);return e!==void 0&&I!=null&&w(e,["setup","proactivity"],Ave(I)),r}function fve(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["setup","model"],Zn(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],dve(s,r)),r}function hve(){return{}}function pve(){return{}}function mve(t){const e={},r=v(t,["media"]);r!=null&&w(e,["mediaChunks"],CH(r));const n=v(t,["audio"]);n!=null&&w(e,["audio"],_H(n));const s=v(t,["audioStreamEnd"]);s!=null&&w(e,["audioStreamEnd"],s);const a=v(t,["video"]);a!=null&&w(e,["video"],EH(a));const i=v(t,["text"]);return i!=null&&w(e,["text"],i),v(t,["activityStart"])!=null&&w(e,["activityStart"],hve()),v(t,["activityEnd"])!=null&&w(e,["activityEnd"],pve()),e}function jH(t){const e={},r=v(t,["text"]);r!=null&&w(e,["text"],r);const n=v(t,["weight"]);return n!=null&&w(e,["weight"],n),e}function gve(t){const e={},r=v(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>jH(s))),w(e,["weightedPrompts"],n)}return e}function QH(t){const e={},r=v(t,["temperature"]);r!=null&&w(e,["temperature"],r);const n=v(t,["topK"]);n!=null&&w(e,["topK"],n);const s=v(t,["seed"]);s!=null&&w(e,["seed"],s);const a=v(t,["guidance"]);a!=null&&w(e,["guidance"],a);const i=v(t,["bpm"]);i!=null&&w(e,["bpm"],i);const o=v(t,["density"]);o!=null&&w(e,["density"],o);const l=v(t,["brightness"]);l!=null&&w(e,["brightness"],l);const c=v(t,["scale"]);c!=null&&w(e,["scale"],c);const d=v(t,["muteBass"]);d!=null&&w(e,["muteBass"],d);const h=v(t,["muteDrums"]);h!=null&&w(e,["muteDrums"],h);const p=v(t,["onlyBassAndDrums"]);return p!=null&&w(e,["onlyBassAndDrums"],p),e}function xve(t){const e={},r=v(t,["musicGenerationConfig"]);return r!=null&&w(e,["musicGenerationConfig"],QH(r)),e}function HH(t){const e={},r=v(t,["model"]);return r!=null&&w(e,["model"],r),e}function VH(t){const e={},r=v(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>jH(s))),w(e,["weightedPrompts"],n)}return e}function uT(t){const e={},r=v(t,["setup"]);r!=null&&w(e,["setup"],HH(r));const n=v(t,["clientContent"]);n!=null&&w(e,["clientContent"],VH(n));const s=v(t,["musicGenerationConfig"]);s!=null&&w(e,["musicGenerationConfig"],QH(s));const a=v(t,["playbackControl"]);return a!=null&&w(e,["playbackControl"],a),e}function vve(t){const e={},r=v(t,["voiceName"]);return r!=null&&w(e,["voiceName"],r),e}function yve(t){const e={},r=v(t,["prebuiltVoiceConfig"]);return r!=null&&w(e,["prebuiltVoiceConfig"],vve(r)),e}function wve(t){const e={},r=v(t,["voiceConfig"]);if(r!=null&&w(e,["voiceConfig"],yve(r)),v(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=v(t,["languageCode"]);return n!=null&&w(e,["languageCode"],n),e}function bve(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Cve(t){const e={},r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const n=v(t,["data"]);n!=null&&w(e,["data"],n);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Eve(t){const e={},r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function _ve(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],bve(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Cve(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Eve(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function Sve(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>_ve(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function Tve(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=v(t,["description"]);r!=null&&w(e,["description"],r);const n=v(t,["name"]);n!=null&&w(e,["name"],n);const s=v(t,["parameters"]);s!=null&&w(e,["parameters"],s);const a=v(t,["parametersJsonSchema"]);a!=null&&w(e,["parametersJsonSchema"],a);const i=v(t,["response"]);i!=null&&w(e,["response"],i);const o=v(t,["responseJsonSchema"]);return o!=null&&w(e,["responseJsonSchema"],o),e}function Nve(t){const e={},r=v(t,["startTime"]);r!=null&&w(e,["startTime"],r);const n=v(t,["endTime"]);return n!=null&&w(e,["endTime"],n),e}function Bve(t){const e={},r=v(t,["timeRangeFilter"]);return r!=null&&w(e,["timeRangeFilter"],Nve(r)),e}function kve(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["dynamicThreshold"]);return n!=null&&w(e,["dynamicThreshold"],n),e}function Ive(t){const e={},r=v(t,["dynamicRetrievalConfig"]);return r!=null&&w(e,["dynamicRetrievalConfig"],kve(r)),e}function Fve(){return{}}function Dve(t){const e={},r=v(t,["apiKeyString"]);return r!=null&&w(e,["apiKeyString"],r),e}function Rve(t){const e={},r=v(t,["apiKeyConfig"]);r!=null&&w(e,["apiKeyConfig"],Dve(r));const n=v(t,["authType"]);n!=null&&w(e,["authType"],n);const s=v(t,["googleServiceAccountConfig"]);s!=null&&w(e,["googleServiceAccountConfig"],s);const a=v(t,["httpBasicAuthConfig"]);a!=null&&w(e,["httpBasicAuthConfig"],a);const i=v(t,["oauthConfig"]);i!=null&&w(e,["oauthConfig"],i);const o=v(t,["oidcConfig"]);return o!=null&&w(e,["oidcConfig"],o),e}function Lve(t){const e={},r=v(t,["authConfig"]);return r!=null&&w(e,["authConfig"],Rve(r)),e}function Uve(){return{}}function Mve(t){const e={},r=v(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(p=>Tve(p))),w(e,["functionDeclarations"],h)}const n=v(t,["retrieval"]);n!=null&&w(e,["retrieval"],n);const s=v(t,["googleSearch"]);s!=null&&w(e,["googleSearch"],Bve(s));const a=v(t,["googleSearchRetrieval"]);a!=null&&w(e,["googleSearchRetrieval"],Ive(a)),v(t,["enterpriseWebSearch"])!=null&&w(e,["enterpriseWebSearch"],Fve());const o=v(t,["googleMaps"]);o!=null&&w(e,["googleMaps"],Lve(o)),v(t,["urlContext"])!=null&&w(e,["urlContext"],Uve());const c=v(t,["codeExecution"]);c!=null&&w(e,["codeExecution"],c);const d=v(t,["computerUse"]);return d!=null&&w(e,["computerUse"],d),e}function Pve(t){const e={},r=v(t,["handle"]);r!=null&&w(e,["handle"],r);const n=v(t,["transparent"]);return n!=null&&w(e,["transparent"],n),e}function wL(){return{}}function Ove(t){const e={},r=v(t,["disabled"]);r!=null&&w(e,["disabled"],r);const n=v(t,["startOfSpeechSensitivity"]);n!=null&&w(e,["startOfSpeechSensitivity"],n);const s=v(t,["endOfSpeechSensitivity"]);s!=null&&w(e,["endOfSpeechSensitivity"],s);const a=v(t,["prefixPaddingMs"]);a!=null&&w(e,["prefixPaddingMs"],a);const i=v(t,["silenceDurationMs"]);return i!=null&&w(e,["silenceDurationMs"],i),e}function jve(t){const e={},r=v(t,["automaticActivityDetection"]);r!=null&&w(e,["automaticActivityDetection"],Ove(r));const n=v(t,["activityHandling"]);n!=null&&w(e,["activityHandling"],n);const s=v(t,["turnCoverage"]);return s!=null&&w(e,["turnCoverage"],s),e}function Qve(t){const e={},r=v(t,["targetTokens"]);return r!=null&&w(e,["targetTokens"],r),e}function Hve(t){const e={},r=v(t,["triggerTokens"]);r!=null&&w(e,["triggerTokens"],r);const n=v(t,["slidingWindow"]);return n!=null&&w(e,["slidingWindow"],Qve(n)),e}function Vve(t){const e={},r=v(t,["proactiveAudio"]);return r!=null&&w(e,["proactiveAudio"],r),e}function zve(t,e){const r={},n=v(t,["generationConfig"]);e!==void 0&&n!=null&&w(e,["setup","generationConfig"],n);const s=v(t,["responseModalities"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","responseModalities"],s);const a=v(t,["temperature"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","temperature"],a);const i=v(t,["topP"]);e!==void 0&&i!=null&&w(e,["setup","generationConfig","topP"],i);const o=v(t,["topK"]);e!==void 0&&o!=null&&w(e,["setup","generationConfig","topK"],o);const l=v(t,["maxOutputTokens"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","maxOutputTokens"],l);const c=v(t,["mediaResolution"]);e!==void 0&&c!=null&&w(e,["setup","generationConfig","mediaResolution"],c);const d=v(t,["seed"]);e!==void 0&&d!=null&&w(e,["setup","generationConfig","seed"],d);const h=v(t,["speechConfig"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","speechConfig"],wve(bB(h)));const p=v(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=v(t,["systemInstruction"]);e!==void 0&&m!=null&&w(e,["setup","systemInstruction"],Sve(ro(m)));const y=v(t,["tools"]);if(e!==void 0&&y!=null){let U=Mm(y);Array.isArray(U)&&(U=U.map(F=>Mve(Um(F)))),w(e,["setup","tools"],U)}const x=v(t,["sessionResumption"]);e!==void 0&&x!=null&&w(e,["setup","sessionResumption"],Pve(x));const E=v(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&w(e,["setup","inputAudioTranscription"],wL());const S=v(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&w(e,["setup","outputAudioTranscription"],wL());const B=v(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&w(e,["setup","realtimeInputConfig"],jve(B));const D=v(t,["contextWindowCompression"]);e!==void 0&&D!=null&&w(e,["setup","contextWindowCompression"],Hve(D));const I=v(t,["proactivity"]);return e!==void 0&&I!=null&&w(e,["setup","proactivity"],Vve(I)),r}function Gve(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["setup","model"],Zn(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],zve(s,r)),r}function qve(){return{}}function Kve(){return{}}function $ve(t){const e={},r=v(t,["media"]);r!=null&&w(e,["mediaChunks"],CH(r));const n=v(t,["audio"]);n!=null&&w(e,["audio"],_H(n));const s=v(t,["audioStreamEnd"]);s!=null&&w(e,["audioStreamEnd"],s);const a=v(t,["video"]);a!=null&&w(e,["video"],EH(a));const i=v(t,["text"]);return i!=null&&w(e,["text"],i),v(t,["activityStart"])!=null&&w(e,["activityStart"],qve()),v(t,["activityEnd"])!=null&&w(e,["activityEnd"],Kve()),e}function Wve(){return{}}function Yve(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Xve(t){const e={},r=v(t,["data"]);r!=null&&w(e,["data"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function Jve(t){const e={},r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function Zve(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],Yve(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Xve(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Jve(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function eye(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Zve(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function bL(t){const e={},r=v(t,["text"]);r!=null&&w(e,["text"],r);const n=v(t,["finished"]);return n!=null&&w(e,["finished"],n),e}function tye(t){const e={},r=v(t,["retrievedUrl"]);r!=null&&w(e,["retrievedUrl"],r);const n=v(t,["urlRetrievalStatus"]);return n!=null&&w(e,["urlRetrievalStatus"],n),e}function rye(t){const e={},r=v(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>tye(s))),w(e,["urlMetadata"],n)}return e}function nye(t){const e={},r=v(t,["modelTurn"]);r!=null&&w(e,["modelTurn"],eye(r));const n=v(t,["turnComplete"]);n!=null&&w(e,["turnComplete"],n);const s=v(t,["interrupted"]);s!=null&&w(e,["interrupted"],s);const a=v(t,["groundingMetadata"]);a!=null&&w(e,["groundingMetadata"],a);const i=v(t,["generationComplete"]);i!=null&&w(e,["generationComplete"],i);const o=v(t,["inputTranscription"]);o!=null&&w(e,["inputTranscription"],bL(o));const l=v(t,["outputTranscription"]);l!=null&&w(e,["outputTranscription"],bL(l));const c=v(t,["urlContextMetadata"]);return c!=null&&w(e,["urlContextMetadata"],rye(c)),e}function sye(t){const e={},r=v(t,["id"]);r!=null&&w(e,["id"],r);const n=v(t,["args"]);n!=null&&w(e,["args"],n);const s=v(t,["name"]);return s!=null&&w(e,["name"],s),e}function aye(t){const e={},r=v(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>sye(s))),w(e,["functionCalls"],n)}return e}function iye(t){const e={},r=v(t,["ids"]);return r!=null&&w(e,["ids"],r),e}function By(t){const e={},r=v(t,["modality"]);r!=null&&w(e,["modality"],r);const n=v(t,["tokenCount"]);return n!=null&&w(e,["tokenCount"],n),e}function oye(t){const e={},r=v(t,["promptTokenCount"]);r!=null&&w(e,["promptTokenCount"],r);const n=v(t,["cachedContentTokenCount"]);n!=null&&w(e,["cachedContentTokenCount"],n);const s=v(t,["responseTokenCount"]);s!=null&&w(e,["responseTokenCount"],s);const a=v(t,["toolUsePromptTokenCount"]);a!=null&&w(e,["toolUsePromptTokenCount"],a);const i=v(t,["thoughtsTokenCount"]);i!=null&&w(e,["thoughtsTokenCount"],i);const o=v(t,["totalTokenCount"]);o!=null&&w(e,["totalTokenCount"],o);const l=v(t,["promptTokensDetails"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>By(m))),w(e,["promptTokensDetails"],p)}const c=v(t,["cacheTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>By(m))),w(e,["cacheTokensDetails"],p)}const d=v(t,["responseTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>By(m))),w(e,["responseTokensDetails"],p)}const h=v(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>By(m))),w(e,["toolUsePromptTokensDetails"],p)}return e}function lye(t){const e={},r=v(t,["timeLeft"]);return r!=null&&w(e,["timeLeft"],r),e}function cye(t){const e={},r=v(t,["newHandle"]);r!=null&&w(e,["newHandle"],r);const n=v(t,["resumable"]);n!=null&&w(e,["resumable"],n);const s=v(t,["lastConsumedClientMessageIndex"]);return s!=null&&w(e,["lastConsumedClientMessageIndex"],s),e}function uye(t){const e={};v(t,["setupComplete"])!=null&&w(e,["setupComplete"],Wve());const n=v(t,["serverContent"]);n!=null&&w(e,["serverContent"],nye(n));const s=v(t,["toolCall"]);s!=null&&w(e,["toolCall"],aye(s));const a=v(t,["toolCallCancellation"]);a!=null&&w(e,["toolCallCancellation"],iye(a));const i=v(t,["usageMetadata"]);i!=null&&w(e,["usageMetadata"],oye(i));const o=v(t,["goAway"]);o!=null&&w(e,["goAway"],lye(o));const l=v(t,["sessionResumptionUpdate"]);return l!=null&&w(e,["sessionResumptionUpdate"],cye(l)),e}function Aye(){return{}}function dye(t){const e={},r=v(t,["text"]);r!=null&&w(e,["text"],r);const n=v(t,["weight"]);return n!=null&&w(e,["weight"],n),e}function fye(t){const e={},r=v(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>dye(s))),w(e,["weightedPrompts"],n)}return e}function hye(t){const e={},r=v(t,["temperature"]);r!=null&&w(e,["temperature"],r);const n=v(t,["topK"]);n!=null&&w(e,["topK"],n);const s=v(t,["seed"]);s!=null&&w(e,["seed"],s);const a=v(t,["guidance"]);a!=null&&w(e,["guidance"],a);const i=v(t,["bpm"]);i!=null&&w(e,["bpm"],i);const o=v(t,["density"]);o!=null&&w(e,["density"],o);const l=v(t,["brightness"]);l!=null&&w(e,["brightness"],l);const c=v(t,["scale"]);c!=null&&w(e,["scale"],c);const d=v(t,["muteBass"]);d!=null&&w(e,["muteBass"],d);const h=v(t,["muteDrums"]);h!=null&&w(e,["muteDrums"],h);const p=v(t,["onlyBassAndDrums"]);return p!=null&&w(e,["onlyBassAndDrums"],p),e}function pye(t){const e={},r=v(t,["clientContent"]);r!=null&&w(e,["clientContent"],fye(r));const n=v(t,["musicGenerationConfig"]);return n!=null&&w(e,["musicGenerationConfig"],hye(n)),e}function mye(t){const e={},r=v(t,["data"]);r!=null&&w(e,["data"],r);const n=v(t,["mimeType"]);n!=null&&w(e,["mimeType"],n);const s=v(t,["sourceMetadata"]);return s!=null&&w(e,["sourceMetadata"],pye(s)),e}function gye(t){const e={},r=v(t,["audioChunks"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>mye(s))),w(e,["audioChunks"],n)}return e}function xye(t){const e={},r=v(t,["text"]);r!=null&&w(e,["text"],r);const n=v(t,["filteredReason"]);return n!=null&&w(e,["filteredReason"],n),e}function vye(t){const e={};v(t,["setupComplete"])!=null&&w(e,["setupComplete"],Aye());const n=v(t,["serverContent"]);n!=null&&w(e,["serverContent"],gye(n));const s=v(t,["filteredPrompt"]);return s!=null&&w(e,["filteredPrompt"],xye(s)),e}function yye(t){const e={},r=v(t,["sessionId"]);return r!=null&&w(e,["sessionId"],r),e}function wye(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function bye(t){const e={},r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const n=v(t,["data"]);n!=null&&w(e,["data"],n);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Cye(t){const e={},r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Eye(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],wye(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],bye(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Cye(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function _ye(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Eye(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function CL(t){const e={},r=v(t,["text"]);r!=null&&w(e,["text"],r);const n=v(t,["finished"]);return n!=null&&w(e,["finished"],n),e}function Sye(t){const e={},r=v(t,["modelTurn"]);r!=null&&w(e,["modelTurn"],_ye(r));const n=v(t,["turnComplete"]);n!=null&&w(e,["turnComplete"],n);const s=v(t,["interrupted"]);s!=null&&w(e,["interrupted"],s);const a=v(t,["groundingMetadata"]);a!=null&&w(e,["groundingMetadata"],a);const i=v(t,["generationComplete"]);i!=null&&w(e,["generationComplete"],i);const o=v(t,["inputTranscription"]);o!=null&&w(e,["inputTranscription"],CL(o));const l=v(t,["outputTranscription"]);return l!=null&&w(e,["outputTranscription"],CL(l)),e}function Tye(t){const e={},r=v(t,["args"]);r!=null&&w(e,["args"],r);const n=v(t,["name"]);return n!=null&&w(e,["name"],n),e}function Nye(t){const e={},r=v(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Tye(s))),w(e,["functionCalls"],n)}return e}function Bye(t){const e={},r=v(t,["ids"]);return r!=null&&w(e,["ids"],r),e}function ky(t){const e={},r=v(t,["modality"]);r!=null&&w(e,["modality"],r);const n=v(t,["tokenCount"]);return n!=null&&w(e,["tokenCount"],n),e}function kye(t){const e={},r=v(t,["promptTokenCount"]);r!=null&&w(e,["promptTokenCount"],r);const n=v(t,["cachedContentTokenCount"]);n!=null&&w(e,["cachedContentTokenCount"],n);const s=v(t,["candidatesTokenCount"]);s!=null&&w(e,["responseTokenCount"],s);const a=v(t,["toolUsePromptTokenCount"]);a!=null&&w(e,["toolUsePromptTokenCount"],a);const i=v(t,["thoughtsTokenCount"]);i!=null&&w(e,["thoughtsTokenCount"],i);const o=v(t,["totalTokenCount"]);o!=null&&w(e,["totalTokenCount"],o);const l=v(t,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>ky(y))),w(e,["promptTokensDetails"],m)}const c=v(t,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(y=>ky(y))),w(e,["cacheTokensDetails"],m)}const d=v(t,["candidatesTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>ky(y))),w(e,["responseTokensDetails"],m)}const h=v(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>ky(y))),w(e,["toolUsePromptTokensDetails"],m)}const p=v(t,["trafficType"]);return p!=null&&w(e,["trafficType"],p),e}function Iye(t){const e={},r=v(t,["timeLeft"]);return r!=null&&w(e,["timeLeft"],r),e}function Fye(t){const e={},r=v(t,["newHandle"]);r!=null&&w(e,["newHandle"],r);const n=v(t,["resumable"]);n!=null&&w(e,["resumable"],n);const s=v(t,["lastConsumedClientMessageIndex"]);return s!=null&&w(e,["lastConsumedClientMessageIndex"],s),e}function Dye(t){const e={},r=v(t,["setupComplete"]);r!=null&&w(e,["setupComplete"],yye(r));const n=v(t,["serverContent"]);n!=null&&w(e,["serverContent"],Sye(n));const s=v(t,["toolCall"]);s!=null&&w(e,["toolCall"],Nye(s));const a=v(t,["toolCallCancellation"]);a!=null&&w(e,["toolCallCancellation"],Bye(a));const i=v(t,["usageMetadata"]);i!=null&&w(e,["usageMetadata"],kye(i));const o=v(t,["goAway"]);o!=null&&w(e,["goAway"],Iye(o));const l=v(t,["sessionResumptionUpdate"]);return l!=null&&w(e,["sessionResumptionUpdate"],Fye(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rye(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Lye(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["data"]);r!=null&&w(e,["data"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function Uye(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function Mye(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],Rye(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Lye(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Uye(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function wC(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Mye(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function Pye(t){const e={},r=v(t,["anyOf"]);r!=null&&w(e,["anyOf"],r);const n=v(t,["default"]);n!=null&&w(e,["default"],n);const s=v(t,["description"]);s!=null&&w(e,["description"],s);const a=v(t,["enum"]);a!=null&&w(e,["enum"],a);const i=v(t,["example"]);i!=null&&w(e,["example"],i);const o=v(t,["format"]);o!=null&&w(e,["format"],o);const l=v(t,["items"]);l!=null&&w(e,["items"],l);const c=v(t,["maxItems"]);c!=null&&w(e,["maxItems"],c);const d=v(t,["maxLength"]);d!=null&&w(e,["maxLength"],d);const h=v(t,["maxProperties"]);h!=null&&w(e,["maxProperties"],h);const p=v(t,["maximum"]);p!=null&&w(e,["maximum"],p);const m=v(t,["minItems"]);m!=null&&w(e,["minItems"],m);const y=v(t,["minLength"]);y!=null&&w(e,["minLength"],y);const x=v(t,["minProperties"]);x!=null&&w(e,["minProperties"],x);const E=v(t,["minimum"]);E!=null&&w(e,["minimum"],E);const S=v(t,["nullable"]);S!=null&&w(e,["nullable"],S);const B=v(t,["pattern"]);B!=null&&w(e,["pattern"],B);const D=v(t,["properties"]);D!=null&&w(e,["properties"],D);const I=v(t,["propertyOrdering"]);I!=null&&w(e,["propertyOrdering"],I);const U=v(t,["required"]);U!=null&&w(e,["required"],U);const F=v(t,["title"]);F!=null&&w(e,["title"],F);const C=v(t,["type"]);return C!=null&&w(e,["type"],C),e}function Oye(t){const e={};if(v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=v(t,["category"]);r!=null&&w(e,["category"],r);const n=v(t,["threshold"]);return n!=null&&w(e,["threshold"],n),e}function jye(t){const e={},r=v(t,["behavior"]);r!=null&&w(e,["behavior"],r);const n=v(t,["description"]);n!=null&&w(e,["description"],n);const s=v(t,["name"]);s!=null&&w(e,["name"],s);const a=v(t,["parameters"]);a!=null&&w(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&w(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&w(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function Qye(t){const e={},r=v(t,["startTime"]);r!=null&&w(e,["startTime"],r);const n=v(t,["endTime"]);return n!=null&&w(e,["endTime"],n),e}function Hye(t){const e={},r=v(t,["timeRangeFilter"]);return r!=null&&w(e,["timeRangeFilter"],Qye(r)),e}function Vye(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["dynamicThreshold"]);return n!=null&&w(e,["dynamicThreshold"],n),e}function zye(t){const e={},r=v(t,["dynamicRetrievalConfig"]);return r!=null&&w(e,["dynamicRetrievalConfig"],Vye(r)),e}function Gye(){return{}}function qye(t){const e={},r=v(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>jye(c))),w(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=v(t,["googleSearch"]);n!=null&&w(e,["googleSearch"],Hye(n));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&w(e,["googleSearchRetrieval"],zye(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&w(e,["urlContext"],Gye());const i=v(t,["codeExecution"]);i!=null&&w(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&w(e,["computerUse"],o),e}function Kye(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["allowedFunctionNames"]);return n!=null&&w(e,["allowedFunctionNames"],n),e}function $ye(t){const e={},r=v(t,["latitude"]);r!=null&&w(e,["latitude"],r);const n=v(t,["longitude"]);return n!=null&&w(e,["longitude"],n),e}function Wye(t){const e={},r=v(t,["latLng"]);r!=null&&w(e,["latLng"],$ye(r));const n=v(t,["languageCode"]);return n!=null&&w(e,["languageCode"],n),e}function Yye(t){const e={},r=v(t,["functionCallingConfig"]);r!=null&&w(e,["functionCallingConfig"],Kye(r));const n=v(t,["retrievalConfig"]);return n!=null&&w(e,["retrievalConfig"],Wye(n)),e}function Xye(t){const e={},r=v(t,["voiceName"]);return r!=null&&w(e,["voiceName"],r),e}function zH(t){const e={},r=v(t,["prebuiltVoiceConfig"]);return r!=null&&w(e,["prebuiltVoiceConfig"],Xye(r)),e}function Jye(t){const e={},r=v(t,["speaker"]);r!=null&&w(e,["speaker"],r);const n=v(t,["voiceConfig"]);return n!=null&&w(e,["voiceConfig"],zH(n)),e}function Zye(t){const e={},r=v(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Jye(s))),w(e,["speakerVoiceConfigs"],n)}return e}function e2e(t){const e={},r=v(t,["voiceConfig"]);r!=null&&w(e,["voiceConfig"],zH(r));const n=v(t,["multiSpeakerVoiceConfig"]);n!=null&&w(e,["multiSpeakerVoiceConfig"],Zye(n));const s=v(t,["languageCode"]);return s!=null&&w(e,["languageCode"],s),e}function t2e(t){const e={},r=v(t,["includeThoughts"]);r!=null&&w(e,["includeThoughts"],r);const n=v(t,["thinkingBudget"]);return n!=null&&w(e,["thinkingBudget"],n),e}function r2e(t,e,r){const n={},s=v(e,["systemInstruction"]);r!==void 0&&s!=null&&w(r,["systemInstruction"],wC(ro(s)));const a=v(e,["temperature"]);a!=null&&w(n,["temperature"],a);const i=v(e,["topP"]);i!=null&&w(n,["topP"],i);const o=v(e,["topK"]);o!=null&&w(n,["topK"],o);const l=v(e,["candidateCount"]);l!=null&&w(n,["candidateCount"],l);const c=v(e,["maxOutputTokens"]);c!=null&&w(n,["maxOutputTokens"],c);const d=v(e,["stopSequences"]);d!=null&&w(n,["stopSequences"],d);const h=v(e,["responseLogprobs"]);h!=null&&w(n,["responseLogprobs"],h);const p=v(e,["logprobs"]);p!=null&&w(n,["logprobs"],p);const m=v(e,["presencePenalty"]);m!=null&&w(n,["presencePenalty"],m);const y=v(e,["frequencyPenalty"]);y!=null&&w(n,["frequencyPenalty"],y);const x=v(e,["seed"]);x!=null&&w(n,["seed"],x);const E=v(e,["responseMimeType"]);E!=null&&w(n,["responseMimeType"],E);const S=v(e,["responseSchema"]);S!=null&&w(n,["responseSchema"],Pye(yB(S)));const B=v(e,["responseJsonSchema"]);if(B!=null&&w(n,["responseJsonSchema"],B),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=v(e,["safetySettings"]);if(r!==void 0&&D!=null){let R=D;Array.isArray(R)&&(R=R.map(L=>Oye(L))),w(r,["safetySettings"],R)}const I=v(e,["tools"]);if(r!==void 0&&I!=null){let R=Mm(I);Array.isArray(R)&&(R=R.map(L=>qye(Um(L)))),w(r,["tools"],R)}const U=v(e,["toolConfig"]);if(r!==void 0&&U!=null&&w(r,["toolConfig"],Yye(U)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=v(e,["cachedContent"]);r!==void 0&&F!=null&&w(r,["cachedContent"],dd(t,F));const C=v(e,["responseModalities"]);C!=null&&w(n,["responseModalities"],C);const _=v(e,["mediaResolution"]);_!=null&&w(n,["mediaResolution"],_);const N=v(e,["speechConfig"]);if(N!=null&&w(n,["speechConfig"],e2e(wB(N))),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=v(e,["thinkingConfig"]);return j!=null&&w(n,["thinkingConfig"],t2e(j)),n}function EL(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>wC(o))),w(r,["contents"],i)}const a=v(e,["config"]);return a!=null&&w(r,["generationConfig"],r2e(t,a,r)),r}function n2e(t,e){const r={},n=v(t,["taskType"]);e!==void 0&&n!=null&&w(e,["requests[]","taskType"],n);const s=v(t,["title"]);e!==void 0&&s!=null&&w(e,["requests[]","title"],s);const a=v(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&w(e,["requests[]","outputDimensionality"],a),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function s2e(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["contents"]);s!=null&&w(r,["requests[]","content"],TH(t,s));const a=v(e,["config"]);a!=null&&w(r,["config"],n2e(a,r));const i=v(e,["model"]);return i!==void 0&&w(r,["requests[]","model"],Zn(t,i)),r}function a2e(t,e){const r={};if(v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=v(t,["numberOfImages"]);e!==void 0&&n!=null&&w(e,["parameters","sampleCount"],n);const s=v(t,["aspectRatio"]);e!==void 0&&s!=null&&w(e,["parameters","aspectRatio"],s);const a=v(t,["guidanceScale"]);if(e!==void 0&&a!=null&&w(e,["parameters","guidanceScale"],a),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=v(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&w(e,["parameters","safetySetting"],i);const o=v(t,["personGeneration"]);e!==void 0&&o!=null&&w(e,["parameters","personGeneration"],o);const l=v(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&w(e,["parameters","includeSafetyAttributes"],l);const c=v(t,["includeRaiReason"]);e!==void 0&&c!=null&&w(e,["parameters","includeRaiReason"],c);const d=v(t,["language"]);e!==void 0&&d!=null&&w(e,["parameters","language"],d);const h=v(t,["outputMimeType"]);e!==void 0&&h!=null&&w(e,["parameters","outputOptions","mimeType"],h);const p=v(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&w(e,["parameters","outputOptions","compressionQuality"],p),v(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(v(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(v(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function i2e(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["prompt"]);s!=null&&w(r,["instances[0]","prompt"],s);const a=v(e,["config"]);return a!=null&&w(r,["config"],a2e(a,r)),r}function o2e(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","name"],Zn(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function l2e(t,e,r){const n={},s=v(e,["pageSize"]);r!==void 0&&s!=null&&w(r,["_query","pageSize"],s);const a=v(e,["pageToken"]);r!==void 0&&a!=null&&w(r,["_query","pageToken"],a);const i=v(e,["filter"]);r!==void 0&&i!=null&&w(r,["_query","filter"],i);const o=v(e,["queryBase"]);return r!==void 0&&o!=null&&w(r,["_url","models_url"],kH(t,o)),n}function c2e(t,e){const r={},n=v(e,["config"]);return n!=null&&w(r,["config"],l2e(t,n,r)),r}function u2e(t,e){const r={},n=v(t,["displayName"]);e!==void 0&&n!=null&&w(e,["displayName"],n);const s=v(t,["description"]);e!==void 0&&s!=null&&w(e,["description"],s);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&w(e,["defaultCheckpointId"],a),r}function A2e(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","name"],Zn(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],u2e(s,r)),r}function d2e(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","name"],Zn(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function f2e(t){const e={};if(v(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(v(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(v(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function h2e(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>wC(o))),w(r,["contents"],i)}const a=v(e,["config"]);return a!=null&&w(r,["config"],f2e(a)),r}function p2e(t){const e={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=v(t,["imageBytes"]);r!=null&&w(e,["bytesBase64Encoded"],C0(r));const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function m2e(t,e){const r={},n=v(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&w(e,["parameters","sampleCount"],n),v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=v(t,["durationSeconds"]);if(e!==void 0&&s!=null&&w(e,["parameters","durationSeconds"],s),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=v(t,["aspectRatio"]);if(e!==void 0&&a!=null&&w(e,["parameters","aspectRatio"],a),v(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=v(t,["personGeneration"]);if(e!==void 0&&i!=null&&w(e,["parameters","personGeneration"],i),v(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=v(t,["negativePrompt"]);e!==void 0&&o!=null&&w(e,["parameters","negativePrompt"],o);const l=v(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&w(e,["parameters","enhancePrompt"],l),v(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(v(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(v(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function g2e(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["prompt"]);s!=null&&w(r,["instances[0]","prompt"],s);const a=v(e,["image"]);if(a!=null&&w(r,["instances[0]","image"],p2e(a)),v(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=v(e,["config"]);return i!=null&&w(r,["config"],m2e(i,r)),r}function x2e(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function v2e(t){const e={},r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const n=v(t,["data"]);n!=null&&w(e,["data"],n);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function y2e(t){const e={},r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function w2e(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],x2e(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],v2e(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],y2e(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function Om(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>w2e(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function b2e(t){const e={},r=v(t,["anyOf"]);r!=null&&w(e,["anyOf"],r);const n=v(t,["default"]);n!=null&&w(e,["default"],n);const s=v(t,["description"]);s!=null&&w(e,["description"],s);const a=v(t,["enum"]);a!=null&&w(e,["enum"],a);const i=v(t,["example"]);i!=null&&w(e,["example"],i);const o=v(t,["format"]);o!=null&&w(e,["format"],o);const l=v(t,["items"]);l!=null&&w(e,["items"],l);const c=v(t,["maxItems"]);c!=null&&w(e,["maxItems"],c);const d=v(t,["maxLength"]);d!=null&&w(e,["maxLength"],d);const h=v(t,["maxProperties"]);h!=null&&w(e,["maxProperties"],h);const p=v(t,["maximum"]);p!=null&&w(e,["maximum"],p);const m=v(t,["minItems"]);m!=null&&w(e,["minItems"],m);const y=v(t,["minLength"]);y!=null&&w(e,["minLength"],y);const x=v(t,["minProperties"]);x!=null&&w(e,["minProperties"],x);const E=v(t,["minimum"]);E!=null&&w(e,["minimum"],E);const S=v(t,["nullable"]);S!=null&&w(e,["nullable"],S);const B=v(t,["pattern"]);B!=null&&w(e,["pattern"],B);const D=v(t,["properties"]);D!=null&&w(e,["properties"],D);const I=v(t,["propertyOrdering"]);I!=null&&w(e,["propertyOrdering"],I);const U=v(t,["required"]);U!=null&&w(e,["required"],U);const F=v(t,["title"]);F!=null&&w(e,["title"],F);const C=v(t,["type"]);return C!=null&&w(e,["type"],C),e}function C2e(t){const e={},r=v(t,["featureSelectionPreference"]);return r!=null&&w(e,["featureSelectionPreference"],r),e}function E2e(t){const e={},r=v(t,["method"]);r!=null&&w(e,["method"],r);const n=v(t,["category"]);n!=null&&w(e,["category"],n);const s=v(t,["threshold"]);return s!=null&&w(e,["threshold"],s),e}function _2e(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=v(t,["description"]);r!=null&&w(e,["description"],r);const n=v(t,["name"]);n!=null&&w(e,["name"],n);const s=v(t,["parameters"]);s!=null&&w(e,["parameters"],s);const a=v(t,["parametersJsonSchema"]);a!=null&&w(e,["parametersJsonSchema"],a);const i=v(t,["response"]);i!=null&&w(e,["response"],i);const o=v(t,["responseJsonSchema"]);return o!=null&&w(e,["responseJsonSchema"],o),e}function S2e(t){const e={},r=v(t,["startTime"]);r!=null&&w(e,["startTime"],r);const n=v(t,["endTime"]);return n!=null&&w(e,["endTime"],n),e}function T2e(t){const e={},r=v(t,["timeRangeFilter"]);return r!=null&&w(e,["timeRangeFilter"],S2e(r)),e}function N2e(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["dynamicThreshold"]);return n!=null&&w(e,["dynamicThreshold"],n),e}function B2e(t){const e={},r=v(t,["dynamicRetrievalConfig"]);return r!=null&&w(e,["dynamicRetrievalConfig"],N2e(r)),e}function k2e(){return{}}function I2e(t){const e={},r=v(t,["apiKeyString"]);return r!=null&&w(e,["apiKeyString"],r),e}function F2e(t){const e={},r=v(t,["apiKeyConfig"]);r!=null&&w(e,["apiKeyConfig"],I2e(r));const n=v(t,["authType"]);n!=null&&w(e,["authType"],n);const s=v(t,["googleServiceAccountConfig"]);s!=null&&w(e,["googleServiceAccountConfig"],s);const a=v(t,["httpBasicAuthConfig"]);a!=null&&w(e,["httpBasicAuthConfig"],a);const i=v(t,["oauthConfig"]);i!=null&&w(e,["oauthConfig"],i);const o=v(t,["oidcConfig"]);return o!=null&&w(e,["oidcConfig"],o),e}function D2e(t){const e={},r=v(t,["authConfig"]);return r!=null&&w(e,["authConfig"],F2e(r)),e}function R2e(){return{}}function GH(t){const e={},r=v(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(p=>_2e(p))),w(e,["functionDeclarations"],h)}const n=v(t,["retrieval"]);n!=null&&w(e,["retrieval"],n);const s=v(t,["googleSearch"]);s!=null&&w(e,["googleSearch"],T2e(s));const a=v(t,["googleSearchRetrieval"]);a!=null&&w(e,["googleSearchRetrieval"],B2e(a)),v(t,["enterpriseWebSearch"])!=null&&w(e,["enterpriseWebSearch"],k2e());const o=v(t,["googleMaps"]);o!=null&&w(e,["googleMaps"],D2e(o)),v(t,["urlContext"])!=null&&w(e,["urlContext"],R2e());const c=v(t,["codeExecution"]);c!=null&&w(e,["codeExecution"],c);const d=v(t,["computerUse"]);return d!=null&&w(e,["computerUse"],d),e}function L2e(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["allowedFunctionNames"]);return n!=null&&w(e,["allowedFunctionNames"],n),e}function U2e(t){const e={},r=v(t,["latitude"]);r!=null&&w(e,["latitude"],r);const n=v(t,["longitude"]);return n!=null&&w(e,["longitude"],n),e}function M2e(t){const e={},r=v(t,["latLng"]);r!=null&&w(e,["latLng"],U2e(r));const n=v(t,["languageCode"]);return n!=null&&w(e,["languageCode"],n),e}function P2e(t){const e={},r=v(t,["functionCallingConfig"]);r!=null&&w(e,["functionCallingConfig"],L2e(r));const n=v(t,["retrievalConfig"]);return n!=null&&w(e,["retrievalConfig"],M2e(n)),e}function O2e(t){const e={},r=v(t,["voiceName"]);return r!=null&&w(e,["voiceName"],r),e}function j2e(t){const e={},r=v(t,["prebuiltVoiceConfig"]);return r!=null&&w(e,["prebuiltVoiceConfig"],O2e(r)),e}function Q2e(t){const e={},r=v(t,["voiceConfig"]);if(r!=null&&w(e,["voiceConfig"],j2e(r)),v(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=v(t,["languageCode"]);return n!=null&&w(e,["languageCode"],n),e}function H2e(t){const e={},r=v(t,["includeThoughts"]);r!=null&&w(e,["includeThoughts"],r);const n=v(t,["thinkingBudget"]);return n!=null&&w(e,["thinkingBudget"],n),e}function V2e(t,e,r){const n={},s=v(e,["systemInstruction"]);r!==void 0&&s!=null&&w(r,["systemInstruction"],Om(ro(s)));const a=v(e,["temperature"]);a!=null&&w(n,["temperature"],a);const i=v(e,["topP"]);i!=null&&w(n,["topP"],i);const o=v(e,["topK"]);o!=null&&w(n,["topK"],o);const l=v(e,["candidateCount"]);l!=null&&w(n,["candidateCount"],l);const c=v(e,["maxOutputTokens"]);c!=null&&w(n,["maxOutputTokens"],c);const d=v(e,["stopSequences"]);d!=null&&w(n,["stopSequences"],d);const h=v(e,["responseLogprobs"]);h!=null&&w(n,["responseLogprobs"],h);const p=v(e,["logprobs"]);p!=null&&w(n,["logprobs"],p);const m=v(e,["presencePenalty"]);m!=null&&w(n,["presencePenalty"],m);const y=v(e,["frequencyPenalty"]);y!=null&&w(n,["frequencyPenalty"],y);const x=v(e,["seed"]);x!=null&&w(n,["seed"],x);const E=v(e,["responseMimeType"]);E!=null&&w(n,["responseMimeType"],E);const S=v(e,["responseSchema"]);S!=null&&w(n,["responseSchema"],b2e(yB(S)));const B=v(e,["responseJsonSchema"]);B!=null&&w(n,["responseJsonSchema"],B);const D=v(e,["routingConfig"]);D!=null&&w(n,["routingConfig"],D);const I=v(e,["modelSelectionConfig"]);I!=null&&w(n,["modelConfig"],C2e(I));const U=v(e,["safetySettings"]);if(r!==void 0&&U!=null){let te=U;Array.isArray(te)&&(te=te.map(Y=>E2e(Y))),w(r,["safetySettings"],te)}const F=v(e,["tools"]);if(r!==void 0&&F!=null){let te=Mm(F);Array.isArray(te)&&(te=te.map(Y=>GH(Um(Y)))),w(r,["tools"],te)}const C=v(e,["toolConfig"]);r!==void 0&&C!=null&&w(r,["toolConfig"],P2e(C));const _=v(e,["labels"]);r!==void 0&&_!=null&&w(r,["labels"],_);const N=v(e,["cachedContent"]);r!==void 0&&N!=null&&w(r,["cachedContent"],dd(t,N));const j=v(e,["responseModalities"]);j!=null&&w(n,["responseModalities"],j);const R=v(e,["mediaResolution"]);R!=null&&w(n,["mediaResolution"],R);const L=v(e,["speechConfig"]);L!=null&&w(n,["speechConfig"],Q2e(wB(L)));const Q=v(e,["audioTimestamp"]);Q!=null&&w(n,["audioTimestamp"],Q);const H=v(e,["thinkingConfig"]);return H!=null&&w(n,["thinkingConfig"],H2e(H)),n}function _L(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>Om(o))),w(r,["contents"],i)}const a=v(e,["config"]);return a!=null&&w(r,["generationConfig"],V2e(t,a,r)),r}function z2e(t,e){const r={},n=v(t,["taskType"]);e!==void 0&&n!=null&&w(e,["instances[]","task_type"],n);const s=v(t,["title"]);e!==void 0&&s!=null&&w(e,["instances[]","title"],s);const a=v(t,["outputDimensionality"]);e!==void 0&&a!=null&&w(e,["parameters","outputDimensionality"],a);const i=v(t,["mimeType"]);e!==void 0&&i!=null&&w(e,["instances[]","mimeType"],i);const o=v(t,["autoTruncate"]);return e!==void 0&&o!=null&&w(e,["parameters","autoTruncate"],o),r}function G2e(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["contents"]);s!=null&&w(r,["instances[]","content"],TH(t,s));const a=v(e,["config"]);return a!=null&&w(r,["config"],z2e(a,r)),r}function q2e(t,e){const r={},n=v(t,["outputGcsUri"]);e!==void 0&&n!=null&&w(e,["parameters","storageUri"],n);const s=v(t,["negativePrompt"]);e!==void 0&&s!=null&&w(e,["parameters","negativePrompt"],s);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&w(e,["parameters","sampleCount"],a);const i=v(t,["aspectRatio"]);e!==void 0&&i!=null&&w(e,["parameters","aspectRatio"],i);const o=v(t,["guidanceScale"]);e!==void 0&&o!=null&&w(e,["parameters","guidanceScale"],o);const l=v(t,["seed"]);e!==void 0&&l!=null&&w(e,["parameters","seed"],l);const c=v(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&w(e,["parameters","safetySetting"],c);const d=v(t,["personGeneration"]);e!==void 0&&d!=null&&w(e,["parameters","personGeneration"],d);const h=v(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&w(e,["parameters","includeSafetyAttributes"],h);const p=v(t,["includeRaiReason"]);e!==void 0&&p!=null&&w(e,["parameters","includeRaiReason"],p);const m=v(t,["language"]);e!==void 0&&m!=null&&w(e,["parameters","language"],m);const y=v(t,["outputMimeType"]);e!==void 0&&y!=null&&w(e,["parameters","outputOptions","mimeType"],y);const x=v(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&w(e,["parameters","outputOptions","compressionQuality"],x);const E=v(t,["addWatermark"]);e!==void 0&&E!=null&&w(e,["parameters","addWatermark"],E);const S=v(t,["imageSize"]);e!==void 0&&S!=null&&w(e,["parameters","sampleImageSize"],S);const B=v(t,["enhancePrompt"]);return e!==void 0&&B!=null&&w(e,["parameters","enhancePrompt"],B),r}function K2e(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["prompt"]);s!=null&&w(r,["instances[0]","prompt"],s);const a=v(e,["config"]);return a!=null&&w(r,["config"],q2e(a,r)),r}function bC(t){const e={},r=v(t,["gcsUri"]);r!=null&&w(e,["gcsUri"],r);const n=v(t,["imageBytes"]);n!=null&&w(e,["bytesBase64Encoded"],C0(n));const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function $2e(t){const e={},r=v(t,["maskMode"]);r!=null&&w(e,["maskMode"],r);const n=v(t,["segmentationClasses"]);n!=null&&w(e,["maskClasses"],n);const s=v(t,["maskDilation"]);return s!=null&&w(e,["dilation"],s),e}function W2e(t){const e={},r=v(t,["controlType"]);r!=null&&w(e,["controlType"],r);const n=v(t,["enableControlImageComputation"]);return n!=null&&w(e,["computeControl"],n),e}function Y2e(t){const e={},r=v(t,["styleDescription"]);return r!=null&&w(e,["styleDescription"],r),e}function X2e(t){const e={},r=v(t,["subjectType"]);r!=null&&w(e,["subjectType"],r);const n=v(t,["subjectDescription"]);return n!=null&&w(e,["subjectDescription"],n),e}function J2e(t){const e={},r=v(t,["referenceImage"]);r!=null&&w(e,["referenceImage"],bC(r));const n=v(t,["referenceId"]);n!=null&&w(e,["referenceId"],n);const s=v(t,["referenceType"]);s!=null&&w(e,["referenceType"],s);const a=v(t,["maskImageConfig"]);a!=null&&w(e,["maskImageConfig"],$2e(a));const i=v(t,["controlImageConfig"]);i!=null&&w(e,["controlImageConfig"],W2e(i));const o=v(t,["styleImageConfig"]);o!=null&&w(e,["styleImageConfig"],Y2e(o));const l=v(t,["subjectImageConfig"]);return l!=null&&w(e,["subjectImageConfig"],X2e(l)),e}function Z2e(t,e){const r={},n=v(t,["outputGcsUri"]);e!==void 0&&n!=null&&w(e,["parameters","storageUri"],n);const s=v(t,["negativePrompt"]);e!==void 0&&s!=null&&w(e,["parameters","negativePrompt"],s);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&w(e,["parameters","sampleCount"],a);const i=v(t,["aspectRatio"]);e!==void 0&&i!=null&&w(e,["parameters","aspectRatio"],i);const o=v(t,["guidanceScale"]);e!==void 0&&o!=null&&w(e,["parameters","guidanceScale"],o);const l=v(t,["seed"]);e!==void 0&&l!=null&&w(e,["parameters","seed"],l);const c=v(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&w(e,["parameters","safetySetting"],c);const d=v(t,["personGeneration"]);e!==void 0&&d!=null&&w(e,["parameters","personGeneration"],d);const h=v(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&w(e,["parameters","includeSafetyAttributes"],h);const p=v(t,["includeRaiReason"]);e!==void 0&&p!=null&&w(e,["parameters","includeRaiReason"],p);const m=v(t,["language"]);e!==void 0&&m!=null&&w(e,["parameters","language"],m);const y=v(t,["outputMimeType"]);e!==void 0&&y!=null&&w(e,["parameters","outputOptions","mimeType"],y);const x=v(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&w(e,["parameters","outputOptions","compressionQuality"],x);const E=v(t,["addWatermark"]);e!==void 0&&E!=null&&w(e,["parameters","addWatermark"],E);const S=v(t,["editMode"]);e!==void 0&&S!=null&&w(e,["parameters","editMode"],S);const B=v(t,["baseSteps"]);return e!==void 0&&B!=null&&w(e,["parameters","editConfig","baseSteps"],B),r}function ewe(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["prompt"]);s!=null&&w(r,["instances[0]","prompt"],s);const a=v(e,["referenceImages"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>J2e(l))),w(r,["instances[0]","referenceImages"],o)}const i=v(e,["config"]);return i!=null&&w(r,["config"],Z2e(i,r)),r}function twe(t,e){const r={},n=v(t,["includeRaiReason"]);e!==void 0&&n!=null&&w(e,["parameters","includeRaiReason"],n);const s=v(t,["outputMimeType"]);e!==void 0&&s!=null&&w(e,["parameters","outputOptions","mimeType"],s);const a=v(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&w(e,["parameters","outputOptions","compressionQuality"],a);const i=v(t,["enhanceInputImage"]);e!==void 0&&i!=null&&w(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=v(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&w(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=v(t,["numberOfImages"]);e!==void 0&&l!=null&&w(e,["parameters","sampleCount"],l);const c=v(t,["mode"]);return e!==void 0&&c!=null&&w(e,["parameters","mode"],c),r}function rwe(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["image"]);s!=null&&w(r,["instances[0]","image"],bC(s));const a=v(e,["upscaleFactor"]);a!=null&&w(r,["parameters","upscaleConfig","upscaleFactor"],a);const i=v(e,["config"]);return i!=null&&w(r,["config"],twe(i,r)),r}function nwe(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","name"],Zn(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function swe(t,e,r){const n={},s=v(e,["pageSize"]);r!==void 0&&s!=null&&w(r,["_query","pageSize"],s);const a=v(e,["pageToken"]);r!==void 0&&a!=null&&w(r,["_query","pageToken"],a);const i=v(e,["filter"]);r!==void 0&&i!=null&&w(r,["_query","filter"],i);const o=v(e,["queryBase"]);return r!==void 0&&o!=null&&w(r,["_url","models_url"],kH(t,o)),n}function awe(t,e){const r={},n=v(e,["config"]);return n!=null&&w(r,["config"],swe(t,n,r)),r}function iwe(t,e){const r={},n=v(t,["displayName"]);e!==void 0&&n!=null&&w(e,["displayName"],n);const s=v(t,["description"]);e!==void 0&&s!=null&&w(e,["description"],s);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&w(e,["defaultCheckpointId"],a),r}function owe(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],iwe(s,r)),r}function lwe(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","name"],Zn(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],s),r}function cwe(t,e){const r={},n=v(t,["systemInstruction"]);e!==void 0&&n!=null&&w(e,["systemInstruction"],Om(ro(n)));const s=v(t,["tools"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>GH(o))),w(e,["tools"],i)}const a=v(t,["generationConfig"]);return e!==void 0&&a!=null&&w(e,["generationConfig"],a),r}function uwe(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>Om(o))),w(r,["contents"],i)}const a=v(e,["config"]);return a!=null&&w(r,["config"],cwe(a,r)),r}function Awe(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>Om(o))),w(r,["contents"],i)}const a=v(e,["config"]);return a!=null&&w(r,["config"],a),r}function dwe(t){const e={},r=v(t,["uri"]);r!=null&&w(e,["gcsUri"],r);const n=v(t,["videoBytes"]);n!=null&&w(e,["bytesBase64Encoded"],C0(n));const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function fwe(t,e){const r={},n=v(t,["numberOfVideos"]);e!==void 0&&n!=null&&w(e,["parameters","sampleCount"],n);const s=v(t,["outputGcsUri"]);e!==void 0&&s!=null&&w(e,["parameters","storageUri"],s);const a=v(t,["fps"]);e!==void 0&&a!=null&&w(e,["parameters","fps"],a);const i=v(t,["durationSeconds"]);e!==void 0&&i!=null&&w(e,["parameters","durationSeconds"],i);const o=v(t,["seed"]);e!==void 0&&o!=null&&w(e,["parameters","seed"],o);const l=v(t,["aspectRatio"]);e!==void 0&&l!=null&&w(e,["parameters","aspectRatio"],l);const c=v(t,["resolution"]);e!==void 0&&c!=null&&w(e,["parameters","resolution"],c);const d=v(t,["personGeneration"]);e!==void 0&&d!=null&&w(e,["parameters","personGeneration"],d);const h=v(t,["pubsubTopic"]);e!==void 0&&h!=null&&w(e,["parameters","pubsubTopic"],h);const p=v(t,["negativePrompt"]);e!==void 0&&p!=null&&w(e,["parameters","negativePrompt"],p);const m=v(t,["enhancePrompt"]);e!==void 0&&m!=null&&w(e,["parameters","enhancePrompt"],m);const y=v(t,["generateAudio"]);e!==void 0&&y!=null&&w(e,["parameters","generateAudio"],y);const x=v(t,["lastFrame"]);e!==void 0&&x!=null&&w(e,["instances[0]","lastFrame"],bC(x));const E=v(t,["compressionQuality"]);return e!==void 0&&E!=null&&w(e,["parameters","compressionQuality"],E),r}function hwe(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["_url","model"],Zn(t,n));const s=v(e,["prompt"]);s!=null&&w(r,["instances[0]","prompt"],s);const a=v(e,["image"]);a!=null&&w(r,["instances[0]","image"],bC(a));const i=v(e,["video"]);i!=null&&w(r,["instances[0]","video"],dwe(i));const o=v(e,["config"]);return o!=null&&w(r,["config"],fwe(o,r)),r}function pwe(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function mwe(t){const e={},r=v(t,["data"]);r!=null&&w(e,["data"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function gwe(t){const e={},r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function xwe(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],pwe(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],mwe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],gwe(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function vwe(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>xwe(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function ywe(t){const e={},r=v(t,["citationSources"]);return r!=null&&w(e,["citations"],r),e}function wwe(t){const e={},r=v(t,["retrievedUrl"]);r!=null&&w(e,["retrievedUrl"],r);const n=v(t,["urlRetrievalStatus"]);return n!=null&&w(e,["urlRetrievalStatus"],n),e}function bwe(t){const e={},r=v(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>wwe(s))),w(e,["urlMetadata"],n)}return e}function Cwe(t){const e={},r=v(t,["content"]);r!=null&&w(e,["content"],vwe(r));const n=v(t,["citationMetadata"]);n!=null&&w(e,["citationMetadata"],ywe(n));const s=v(t,["tokenCount"]);s!=null&&w(e,["tokenCount"],s);const a=v(t,["finishReason"]);a!=null&&w(e,["finishReason"],a);const i=v(t,["urlContextMetadata"]);i!=null&&w(e,["urlContextMetadata"],bwe(i));const o=v(t,["avgLogprobs"]);o!=null&&w(e,["avgLogprobs"],o);const l=v(t,["groundingMetadata"]);l!=null&&w(e,["groundingMetadata"],l);const c=v(t,["index"]);c!=null&&w(e,["index"],c);const d=v(t,["logprobsResult"]);d!=null&&w(e,["logprobsResult"],d);const h=v(t,["safetyRatings"]);return h!=null&&w(e,["safetyRatings"],h),e}function SL(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Cwe(l))),w(e,["candidates"],o)}const s=v(t,["modelVersion"]);s!=null&&w(e,["modelVersion"],s);const a=v(t,["promptFeedback"]);a!=null&&w(e,["promptFeedback"],a);const i=v(t,["usageMetadata"]);return i!=null&&w(e,["usageMetadata"],i),e}function Ewe(t){const e={},r=v(t,["values"]);return r!=null&&w(e,["values"],r),e}function _we(){return{}}function Swe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>Ewe(i))),w(e,["embeddings"],a)}return v(t,["metadata"])!=null&&w(e,["metadata"],_we()),e}function Twe(t){const e={},r=v(t,["bytesBase64Encoded"]);r!=null&&w(e,["imageBytes"],C0(r));const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function qH(t){const e={},r=v(t,["safetyAttributes","categories"]);r!=null&&w(e,["categories"],r);const n=v(t,["safetyAttributes","scores"]);n!=null&&w(e,["scores"],n);const s=v(t,["contentType"]);return s!=null&&w(e,["contentType"],s),e}function Nwe(t){const e={},r=v(t,["_self"]);r!=null&&w(e,["image"],Twe(r));const n=v(t,["raiFilteredReason"]);n!=null&&w(e,["raiFilteredReason"],n);const s=v(t,["_self"]);return s!=null&&w(e,["safetyAttributes"],qH(s)),e}function Bwe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>Nwe(i))),w(e,["generatedImages"],a)}const s=v(t,["positivePromptSafetyAttributes"]);return s!=null&&w(e,["positivePromptSafetyAttributes"],qH(s)),e}function kwe(t){const e={},r=v(t,["baseModel"]);r!=null&&w(e,["baseModel"],r);const n=v(t,["createTime"]);n!=null&&w(e,["createTime"],n);const s=v(t,["updateTime"]);return s!=null&&w(e,["updateTime"],s),e}function AT(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=v(t,["description"]);s!=null&&w(e,["description"],s);const a=v(t,["version"]);a!=null&&w(e,["version"],a);const i=v(t,["_self"]);i!=null&&w(e,["tunedModelInfo"],kwe(i));const o=v(t,["inputTokenLimit"]);o!=null&&w(e,["inputTokenLimit"],o);const l=v(t,["outputTokenLimit"]);l!=null&&w(e,["outputTokenLimit"],l);const c=v(t,["supportedGenerationMethods"]);return c!=null&&w(e,["supportedActions"],c),e}function Iwe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=v(t,["_self"]);if(s!=null){let a=IH(s);Array.isArray(a)&&(a=a.map(i=>AT(i))),w(e,["models"],a)}return e}function Fwe(){return{}}function Dwe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["totalTokens"]);n!=null&&w(e,["totalTokens"],n);const s=v(t,["cachedContentTokenCount"]);return s!=null&&w(e,["cachedContentTokenCount"],s),e}function Rwe(t){const e={},r=v(t,["video","uri"]);r!=null&&w(e,["uri"],r);const n=v(t,["video","encodedVideo"]);n!=null&&w(e,["videoBytes"],C0(n));const s=v(t,["encoding"]);return s!=null&&w(e,["mimeType"],s),e}function Lwe(t){const e={},r=v(t,["_self"]);return r!=null&&w(e,["video"],Rwe(r)),e}function Uwe(t){const e={},r=v(t,["generatedSamples"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>Lwe(i))),w(e,["generatedVideos"],a)}const n=v(t,["raiMediaFilteredCount"]);n!=null&&w(e,["raiMediaFilteredCount"],n);const s=v(t,["raiMediaFilteredReasons"]);return s!=null&&w(e,["raiMediaFilteredReasons"],s),e}function Mwe(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["metadata"]);n!=null&&w(e,["metadata"],n);const s=v(t,["done"]);s!=null&&w(e,["done"],s);const a=v(t,["error"]);a!=null&&w(e,["error"],a);const i=v(t,["response","generateVideoResponse"]);return i!=null&&w(e,["response"],Uwe(i)),e}function Pwe(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Owe(t){const e={},r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const n=v(t,["data"]);n!=null&&w(e,["data"],n);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function jwe(t){const e={},r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Qwe(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],Pwe(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Owe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],jwe(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function Hwe(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Qwe(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function Vwe(t){const e={},r=v(t,["citations"]);return r!=null&&w(e,["citations"],r),e}function zwe(t){const e={},r=v(t,["retrievedUrl"]);r!=null&&w(e,["retrievedUrl"],r);const n=v(t,["urlRetrievalStatus"]);return n!=null&&w(e,["urlRetrievalStatus"],n),e}function Gwe(t){const e={},r=v(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>zwe(s))),w(e,["urlMetadata"],n)}return e}function qwe(t){const e={},r=v(t,["content"]);r!=null&&w(e,["content"],Hwe(r));const n=v(t,["citationMetadata"]);n!=null&&w(e,["citationMetadata"],Vwe(n));const s=v(t,["finishMessage"]);s!=null&&w(e,["finishMessage"],s);const a=v(t,["finishReason"]);a!=null&&w(e,["finishReason"],a);const i=v(t,["urlContextMetadata"]);i!=null&&w(e,["urlContextMetadata"],Gwe(i));const o=v(t,["avgLogprobs"]);o!=null&&w(e,["avgLogprobs"],o);const l=v(t,["groundingMetadata"]);l!=null&&w(e,["groundingMetadata"],l);const c=v(t,["index"]);c!=null&&w(e,["index"],c);const d=v(t,["logprobsResult"]);d!=null&&w(e,["logprobsResult"],d);const h=v(t,["safetyRatings"]);return h!=null&&w(e,["safetyRatings"],h),e}function TL(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>qwe(d))),w(e,["candidates"],c)}const s=v(t,["createTime"]);s!=null&&w(e,["createTime"],s);const a=v(t,["responseId"]);a!=null&&w(e,["responseId"],a);const i=v(t,["modelVersion"]);i!=null&&w(e,["modelVersion"],i);const o=v(t,["promptFeedback"]);o!=null&&w(e,["promptFeedback"],o);const l=v(t,["usageMetadata"]);return l!=null&&w(e,["usageMetadata"],l),e}function Kwe(t){const e={},r=v(t,["truncated"]);r!=null&&w(e,["truncated"],r);const n=v(t,["token_count"]);return n!=null&&w(e,["tokenCount"],n),e}function $we(t){const e={},r=v(t,["values"]);r!=null&&w(e,["values"],r);const n=v(t,["statistics"]);return n!=null&&w(e,["statistics"],Kwe(n)),e}function Wwe(t){const e={},r=v(t,["billableCharacterCount"]);return r!=null&&w(e,["billableCharacterCount"],r),e}function Ywe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["predictions[]","embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>$we(i))),w(e,["embeddings"],a)}const s=v(t,["metadata"]);return s!=null&&w(e,["metadata"],Wwe(s)),e}function Xwe(t){const e={},r=v(t,["gcsUri"]);r!=null&&w(e,["gcsUri"],r);const n=v(t,["bytesBase64Encoded"]);n!=null&&w(e,["imageBytes"],C0(n));const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function KH(t){const e={},r=v(t,["safetyAttributes","categories"]);r!=null&&w(e,["categories"],r);const n=v(t,["safetyAttributes","scores"]);n!=null&&w(e,["scores"],n);const s=v(t,["contentType"]);return s!=null&&w(e,["contentType"],s),e}function CB(t){const e={},r=v(t,["_self"]);r!=null&&w(e,["image"],Xwe(r));const n=v(t,["raiFilteredReason"]);n!=null&&w(e,["raiFilteredReason"],n);const s=v(t,["_self"]);s!=null&&w(e,["safetyAttributes"],KH(s));const a=v(t,["prompt"]);return a!=null&&w(e,["enhancedPrompt"],a),e}function Jwe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>CB(i))),w(e,["generatedImages"],a)}const s=v(t,["positivePromptSafetyAttributes"]);return s!=null&&w(e,["positivePromptSafetyAttributes"],KH(s)),e}function Zwe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>CB(a))),w(e,["generatedImages"],s)}return e}function ebe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>CB(a))),w(e,["generatedImages"],s)}return e}function tbe(t){const e={},r=v(t,["endpoint"]);r!=null&&w(e,["name"],r);const n=v(t,["deployedModelId"]);return n!=null&&w(e,["deployedModelId"],n),e}function rbe(t){const e={},r=v(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&w(e,["baseModel"],r);const n=v(t,["createTime"]);n!=null&&w(e,["createTime"],n);const s=v(t,["updateTime"]);return s!=null&&w(e,["updateTime"],s),e}function nbe(t){const e={},r=v(t,["checkpointId"]);r!=null&&w(e,["checkpointId"],r);const n=v(t,["epoch"]);n!=null&&w(e,["epoch"],n);const s=v(t,["step"]);return s!=null&&w(e,["step"],s),e}function dT(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=v(t,["description"]);s!=null&&w(e,["description"],s);const a=v(t,["versionId"]);a!=null&&w(e,["version"],a);const i=v(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>tbe(p))),w(e,["endpoints"],h)}const o=v(t,["labels"]);o!=null&&w(e,["labels"],o);const l=v(t,["_self"]);l!=null&&w(e,["tunedModelInfo"],rbe(l));const c=v(t,["defaultCheckpointId"]);c!=null&&w(e,["defaultCheckpointId"],c);const d=v(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>nbe(p))),w(e,["checkpoints"],h)}return e}function sbe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=v(t,["_self"]);if(s!=null){let a=IH(s);Array.isArray(a)&&(a=a.map(i=>dT(i))),w(e,["models"],a)}return e}function abe(){return{}}function ibe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["totalTokens"]);return n!=null&&w(e,["totalTokens"],n),e}function obe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["tokensInfo"]);return n!=null&&w(e,["tokensInfo"],n),e}function lbe(t){const e={},r=v(t,["gcsUri"]);r!=null&&w(e,["uri"],r);const n=v(t,["bytesBase64Encoded"]);n!=null&&w(e,["videoBytes"],C0(n));const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function cbe(t){const e={},r=v(t,["_self"]);return r!=null&&w(e,["video"],lbe(r)),e}function ube(t){const e={},r=v(t,["videos"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>cbe(i))),w(e,["generatedVideos"],a)}const n=v(t,["raiMediaFilteredCount"]);n!=null&&w(e,["raiMediaFilteredCount"],n);const s=v(t,["raiMediaFilteredReasons"]);return s!=null&&w(e,["raiMediaFilteredReasons"],s),e}function Abe(t){const e={},r=v(t,["name"]);r!=null&&w(e,["name"],r);const n=v(t,["metadata"]);n!=null&&w(e,["metadata"],n);const s=v(t,["done"]);s!=null&&w(e,["done"],s);const a=v(t,["error"]);a!=null&&w(e,["error"],a);const i=v(t,["response"]);return i!=null&&w(e,["response"],ube(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dbe="Content-Type",fbe="X-Server-Timeout",hbe="User-Agent",fT="x-goog-api-client",pbe="1.12.0",mbe=`google-genai-sdk/${pbe}`,gbe="v1beta1",xbe="v1beta",NL=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class vbe{constructor(e){var r,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:gbe,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:xbe,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){const s=[this.getRequestUrlInternal(r)];return n&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,r,n);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))s.searchParams.append(i,String(o));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,r,e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,r){const n=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(r))typeof a=="object"?n[s]=Object.assign(Object.assign({},n[s]),a):a!==void 0&&(n[s]=a);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,r,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,r,e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n){if(r&&r.timeout||n){const s=new AbortController,a=s.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const i=setTimeout(()=>s.abort(),r.timeout);i&&typeof i.unref=="function"&&i.unref()}n&&n.addEventListener("abort",()=>{s.abort()}),e.signal=a}return r&&r.extraBody!==null&&ybe(e,r.extraBody),e.headers=await this.getHeadersInternal(r),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async s=>(await BL(s),new aT(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async s=>(await BL(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var r;return Xp(this,arguments,function*(){const s=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield ms(s.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=a.decode(l,{stream:!0});try{const h=JSON.parse(c);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),m=p.status,y=p.code,x=`got status: ${m}. ${JSON.stringify(h)}`;if(y>=400&&y<600)throw new yC({message:x,status:y})}}catch(h){if(h.name==="ApiError")throw h}i+=c;let d=i.match(NL);for(;d;){const h=d[1];try{const p=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ms(new aT(p)),i=i.slice(d[0].length),d=i.match(NL)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{s.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},r=mbe+" "+this.clientOptions.userAgentExtra;return e[hbe]=r,e[fT]=r,e[dbe]="application/json",e}async getHeadersInternal(e){const r=new Headers;if(e&&e.headers){for(const[n,s]of Object.entries(e.headers))r.append(n,s);e.timeout&&e.timeout>0&&r.append(fbe,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r),r}async uploadFile(e,r){var n;const s={};r!=null&&(s.mimeType=r.mimeType,s.name=r.name,s.displayName=r.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,i=await a.stat(e);s.sizeBytes=String(i.size);const o=(n=r==null?void 0:r.mimeType)!==null&&n!==void 0?n:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=o;const l=await this.fetchUploadUrl(s,r);return a.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r){var n;let s={};r!=null&&r.httpOptions?s=r.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},i=await this.request({path:ar("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(n=i==null?void 0:i.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function BL(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(n);throw r>=400&&r<600?new yC({message:s,status:r}):new Error(s)}}function ybe(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))r=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(a,i){const o=Object.assign({},a);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const c=i[l],d=o[l];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?o[l]=n(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),o[l]=c)}return o}const s=n(r,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wbe="mcp_used/unknown";let bbe=!1;function $H(t){for(const e of t)if(Cbe(e)||typeof e=="object"&&"inputSchema"in e)return!0;return bbe}function WH(t){var e;const r=(e=t[fT])!==null&&e!==void 0?e:"";t[fT]=(r+` ${wbe}`).trimStart()}function Cbe(t){return t!==null&&typeof t=="object"&&t instanceof EB}function Ebe(t,e=100){return Xp(this,arguments,function*(){let n,s=0;for(;s<e;){const a=yield ms(t.listTools({cursor:n}));for(const i of a.tools)yield yield ms(i),s++;if(!a.nextCursor)break;n=a.nextCursor}})}class EB{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new EB(e,r)}async initialize(){var e,r,n,s;if(this.mcpTools.length>0)return;const a={},i=[];for(const d of this.mcpClients)try{for(var o=!0,l=(r=void 0,Bx(Ebe(d))),c;c=await l.next(),e=c.done,!e;o=!0){s=c.value,o=!1;const h=s;i.push(h);const p=h.name;if(a[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);a[p]=d}}catch(h){r={error:h}}finally{try{!o&&!e&&(n=l.return)&&await n.call(l)}finally{if(r)throw r.error}}this.mcpTools=i,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),vge(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[n.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const i=await s.callTool({name:n.name,arguments:n.args},void 0,a);r.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function _be(t,e,r){const n=new Age;let s;r.data instanceof Blob?s=JSON.parse(await r.data.text()):s=JSON.parse(r.data);const a=vye(s);Object.assign(n,a),e(n)}class Sbe{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),i=Bbe(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${o}`;let c=()=>{};const d=new Promise(D=>{c=D}),h=e.callbacks,p=function(){c({})},m=this.apiClient,y={onopen:p,onmessage:D=>{_be(m,h.onmessage,D)},onerror:(r=h==null?void 0:h.onerror)!==null&&r!==void 0?r:function(D){},onclose:(n=h==null?void 0:h.onclose)!==null&&n!==void 0?n:function(D){}},x=this.webSocketFactory.create(l,Nbe(i),y);x.connect(),await d;const E=Zn(this.apiClient,e.model),S=HH({model:E}),B=uT({setup:S});return x.send(JSON.stringify(B)),new Tbe(x,this.apiClient)}}class Tbe{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=gve(e),n=VH(r);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=xve(e),n=uT(r);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const r=uT({playbackControl:e});this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(Fp.PLAY)}pause(){this.sendPlaybackControl(Fp.PAUSE)}stop(){this.sendPlaybackControl(Fp.STOP)}resetContext(){this.sendPlaybackControl(Fp.RESET_CONTEXT)}close(){this.conn.close()}}function Nbe(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function Bbe(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kbe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Ibe(t,e,r){const n=new uge;let s;r.data instanceof Blob?s=await r.data.text():r.data instanceof ArrayBuffer?s=new TextDecoder().decode(r.data):s=r.data;const a=JSON.parse(s);if(t.isVertexAI()){const i=Dye(a);Object.assign(n,i)}else{const i=uye(a);Object.assign(n,i)}e(n)}class Fbe{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new Sbe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,s,a,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&$H(e.config.tools)&&WH(h);const p=Ube(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const N=this.apiClient.getApiKey();let j="BidiGenerateContent",R="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),j="BidiGenerateContentConstrained",R="access_token"),d=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${j}?${R}=${N}`}let m=()=>{};const y=new Promise(N=>{m=N}),x=e.callbacks,E=function(){var N;(N=x==null?void 0:x.onopen)===null||N===void 0||N.call(x),m({})},S=this.apiClient,B={onopen:E,onmessage:N=>{Ibe(S,x.onmessage,N)},onerror:(r=x==null?void 0:x.onerror)!==null&&r!==void 0?r:function(N){},onclose:(n=x==null?void 0:x.onclose)!==null&&n!==void 0?n:function(N){}},D=this.webSocketFactory.create(d,Lbe(p),B);D.connect(),await y;let I=Zn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const N=this.apiClient.getProject(),j=this.apiClient.getLocation();I=`projects/${N}/locations/${j}/`+I}let U={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ww.AUDIO]}:e.config.responseModalities=[Ww.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],C=[];for(const N of F)if(this.isCallableTool(N)){const j=N;C.push(await j.tool())}else C.push(N);C.length>0&&(e.config.tools=C);const _={model:I,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=Gve(this.apiClient,_):U=fve(this.apiClient,_),delete U.config,D.send(JSON.stringify(U)),new Rbe(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Dbe={turnComplete:!0};class Rbe{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=cc(r.turns),e.isVertexAI()?n=n.map(s=>Om(s)):n=n.map(s=>wC(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(kbe)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Dbe),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:$ve(e)}:r={realtimeInput:mve(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function Lbe(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function Ube(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kL=10;function IL(t){var e,r,n;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const i of(r=t==null?void 0:t.tools)!==null&&r!==void 0?r:[])if(Jp(i)){s=!0;break}if(!s)return!0;const a=(n=t==null?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Jp(t){return"callTool"in t&&typeof t.callTool=="function"}function Mbe(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(s=>Jp(s)))!==null&&n!==void 0?n:!1}function Pbe(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(s=>!Jp(s)))!==null&&n!==void 0?n:!1}function FL(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Obe extends b0{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,s,a,i,o;const l=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!Mbe(r)||IL(r.config))return await this.generateContentInternal(l);if(Pbe(r))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,d;const h=cc(l.contents),p=(a=(s=(n=l.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:kL;let m=0;for(;m<p&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const y=c.candidates[0].content,x=[];for(const E of(o=(i=r.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(Jp(E)){const B=await E.callTool(c.functionCalls);x.push(...B)}m++,d={role:"user",parts:x},l.contents=cc(l.contents),l.contents.push(y),l.contents.push(d),FL(l.config)&&(h.push(y),h.push(d))}return FL(l.config)&&(c.automaticFunctionCallingHistory=h),c},this.generateContentStream=async r=>{if(this.maybeMoveToResponseJsonSchem(r),IL(r.config)){const n=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var s;let a;const i=[];if(n!=null&&n.generatedImages)for(const l of n.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=l==null?void 0:l.safetyAttributes:i.push(l);let o;return a?o={generatedImages:i,positivePromptSafetyAttributes:a,sdkHttpResponse:n.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:n.sdkHttpResponse},o}),this.list=async r=>{var n;const i={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((n=i.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new J1(l0.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async r=>{const n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));const s={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(s)},this.generateVideos=async r=>await this.generateVideosInternal(r)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,s;const a=(r=e.config)===null||r===void 0?void 0:r.tools;if(!a)return e;const i=await Promise.all(a.map(async l=>Jp(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&$H(e.config.tools)){const l=(s=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),WH(c),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return o}async initAfcToolsMap(e){var r,n,s;const a=new Map;for(const i of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(Jp(i)){const o=i,l=await o.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(a.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);a.set(c.name,o)}}return a}async processAfcStream(e){var r,n,s;const a=(s=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:kL;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(c,d,h){var p,m;return Xp(this,arguments,function*(){for(var y,x,E,S;o<a;){i&&(o++,i=!1);const U=yield ms(c.processParamsMaybeAddMcpUsage(h)),F=yield ms(c.generateContentStreamInternal(U)),C=[],_=[];try{for(var B=!0,D=(x=void 0,Bx(F)),I;I=yield ms(D.next()),y=I.done,!y;B=!0){S=I.value,B=!1;const N=S;if(yield yield ms(N),N.candidates&&(!((p=N.candidates[0])===null||p===void 0)&&p.content)){_.push(N.candidates[0].content);for(const j of(m=N.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(o<a&&j.functionCall){if(!j.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(j.functionCall.name)){const R=yield ms(d.get(j.functionCall.name).callTool([j.functionCall]));C.push(...R)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${j.functionCall.name}`)}}}}catch(N){x={error:N}}finally{try{!B&&!y&&(E=D.return)&&(yield ms(E.call(D)))}finally{if(x)throw x.error}}if(C.length>0){i=!0;const N=new Fg;N.candidates=[{content:{role:"user",parts:C}}],yield yield ms(N);const j=[];j.push(..._),j.push({role:"user",parts:C});const R=cc(h.contents).concat(j);h.contents=R}else break}})}(this,l,e)}async generateContentInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=_L(this.apiClient,e);return o=ar("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=TL(d),p=new Fg;return Object.assign(p,h),p})}else{const c=EL(this.apiClient,e);return o=ar("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=SL(d),p=new Fg;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=_L(this.apiClient,e);return o=ar("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),i.then(function(h){return Xp(this,arguments,function*(){var p,m,y,x;try{for(var E=!0,S=Bx(h),B;B=yield ms(S.next()),p=B.done,!p;E=!0){x=B.value,E=!1;const D=x,I=TL(yield ms(D.json()));I.sdkHttpResponse={headers:D.headers};const U=new Fg;Object.assign(U,I),yield yield ms(U)}}catch(D){m={error:D}}finally{try{!E&&!p&&(y=S.return)&&(yield ms(y.call(S)))}finally{if(m)throw m.error}}})})}else{const c=EL(this.apiClient,e);return o=ar("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),i.then(function(h){return Xp(this,arguments,function*(){var p,m,y,x;try{for(var E=!0,S=Bx(h),B;B=yield ms(S.next()),p=B.done,!p;E=!0){x=B.value,E=!1;const D=x,I=SL(yield ms(D.json()));I.sdkHttpResponse={headers:D.headers};const U=new Fg;Object.assign(U,I),yield yield ms(U)}}catch(D){m={error:D}}finally{try{!E&&!p&&(y=S.return)&&(yield ms(y.call(S)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=G2e(this.apiClient,e);return o=ar("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Ywe(d),p=new nL;return Object.assign(p,h),p})}else{const c=s2e(this.apiClient,e);return o=ar("{model}:batchEmbedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Swe(d),p=new nL;return Object.assign(p,h),p})}}async generateImagesInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=K2e(this.apiClient,e);return o=ar("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Jwe(d),p=new sL;return Object.assign(p,h),p})}else{const c=i2e(this.apiClient,e);return o=ar("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Bwe(d),p=new sL;return Object.assign(p,h),p})}}async editImageInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=ewe(this.apiClient,e);return a=ar("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=Zwe(l),d=new sge;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=rwe(this.apiClient,e);return a=ar("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=ebe(l),d=new age;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=nwe(this.apiClient,e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>dT(d))}else{const c=o2e(this.apiClient,e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>AT(d))}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=awe(this.apiClient,e);return o=ar("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=sbe(d),p=new aL;return Object.assign(p,h),p})}else{const c=c2e(this.apiClient,e);return o=ar("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Iwe(d),p=new aL;return Object.assign(p,h),p})}}async update(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=owe(this.apiClient,e);return o=ar("{model}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>dT(d))}else{const c=A2e(this.apiClient,e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>AT(d))}}async delete(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=lwe(this.apiClient,e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=abe(),h=new iL;return Object.assign(h,d),h})}else{const c=d2e(this.apiClient,e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=Fwe(),h=new iL;return Object.assign(h,d),h})}}async countTokens(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=uwe(this.apiClient,e);return o=ar("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=ibe(d),p=new oL;return Object.assign(p,h),p})}else{const c=h2e(this.apiClient,e);return o=ar("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=Dwe(d),p=new oL;return Object.assign(p,h),p})}}async computeTokens(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Awe(this.apiClient,e);return a=ar("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=obe(l),d=new ige;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=hwe(this.apiClient,e);return o=ar("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Abe(d),p=new Yw;return Object.assign(p,h),p})}else{const c=g2e(this.apiClient,e);return o=ar("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Mwe(d),p=new Yw;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jbe(t){const e={},r=v(t,["operationName"]);r!=null&&w(e,["_url","operationName"],r);const n=v(t,["config"]);return n!=null&&w(e,["config"],n),e}function Qbe(t){const e={},r=v(t,["operationName"]);r!=null&&w(e,["_url","operationName"],r);const n=v(t,["config"]);return n!=null&&w(e,["config"],n),e}function Hbe(t){const e={},r=v(t,["operationName"]);r!=null&&w(e,["operationName"],r);const n=v(t,["resourceName"]);n!=null&&w(e,["_url","resourceName"],n);const s=v(t,["config"]);return s!=null&&w(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vbe extends b0{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=r.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:s,config:{httpOptions:a}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=r.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:s,config:{httpOptions:a}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=Qbe(e);return o=ar("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i}else{const c=jbe(e);return o=ar("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i}}async fetchPredictVideosOperationInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Hbe(e);return a=ar("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zbe(t){const e={},r=v(t,["voiceName"]);return r!=null&&w(e,["voiceName"],r),e}function YH(t){const e={},r=v(t,["prebuiltVoiceConfig"]);return r!=null&&w(e,["prebuiltVoiceConfig"],zbe(r)),e}function Gbe(t){const e={},r=v(t,["speaker"]);r!=null&&w(e,["speaker"],r);const n=v(t,["voiceConfig"]);return n!=null&&w(e,["voiceConfig"],YH(n)),e}function qbe(t){const e={},r=v(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Gbe(s))),w(e,["speakerVoiceConfigs"],n)}return e}function Kbe(t){const e={},r=v(t,["voiceConfig"]);r!=null&&w(e,["voiceConfig"],YH(r));const n=v(t,["multiSpeakerVoiceConfig"]);n!=null&&w(e,["multiSpeakerVoiceConfig"],qbe(n));const s=v(t,["languageCode"]);return s!=null&&w(e,["languageCode"],s),e}function $be(t){const e={},r=v(t,["fps"]);r!=null&&w(e,["fps"],r);const n=v(t,["endOffset"]);n!=null&&w(e,["endOffset"],n);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Wbe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["data"]);r!=null&&w(e,["data"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function Ybe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const n=v(t,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function Xbe(t){const e={},r=v(t,["videoMetadata"]);r!=null&&w(e,["videoMetadata"],$be(r));const n=v(t,["thought"]);n!=null&&w(e,["thought"],n);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Wbe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Ybe(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const c=v(t,["functionCall"]);c!=null&&w(e,["functionCall"],c);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function Jbe(t){const e={},r=v(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Xbe(a))),w(e,["parts"],s)}const n=v(t,["role"]);return n!=null&&w(e,["role"],n),e}function Zbe(t){const e={},r=v(t,["behavior"]);r!=null&&w(e,["behavior"],r);const n=v(t,["description"]);n!=null&&w(e,["description"],n);const s=v(t,["name"]);s!=null&&w(e,["name"],s);const a=v(t,["parameters"]);a!=null&&w(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&w(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&w(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function eCe(t){const e={},r=v(t,["startTime"]);r!=null&&w(e,["startTime"],r);const n=v(t,["endTime"]);return n!=null&&w(e,["endTime"],n),e}function tCe(t){const e={},r=v(t,["timeRangeFilter"]);return r!=null&&w(e,["timeRangeFilter"],eCe(r)),e}function rCe(t){const e={},r=v(t,["mode"]);r!=null&&w(e,["mode"],r);const n=v(t,["dynamicThreshold"]);return n!=null&&w(e,["dynamicThreshold"],n),e}function nCe(t){const e={},r=v(t,["dynamicRetrievalConfig"]);return r!=null&&w(e,["dynamicRetrievalConfig"],rCe(r)),e}function sCe(){return{}}function aCe(t){const e={},r=v(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Zbe(c))),w(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=v(t,["googleSearch"]);n!=null&&w(e,["googleSearch"],tCe(n));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&w(e,["googleSearchRetrieval"],nCe(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&w(e,["urlContext"],sCe());const i=v(t,["codeExecution"]);i!=null&&w(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&w(e,["computerUse"],o),e}function iCe(t){const e={},r=v(t,["handle"]);if(r!=null&&w(e,["handle"],r),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DL(){return{}}function oCe(t){const e={},r=v(t,["disabled"]);r!=null&&w(e,["disabled"],r);const n=v(t,["startOfSpeechSensitivity"]);n!=null&&w(e,["startOfSpeechSensitivity"],n);const s=v(t,["endOfSpeechSensitivity"]);s!=null&&w(e,["endOfSpeechSensitivity"],s);const a=v(t,["prefixPaddingMs"]);a!=null&&w(e,["prefixPaddingMs"],a);const i=v(t,["silenceDurationMs"]);return i!=null&&w(e,["silenceDurationMs"],i),e}function lCe(t){const e={},r=v(t,["automaticActivityDetection"]);r!=null&&w(e,["automaticActivityDetection"],oCe(r));const n=v(t,["activityHandling"]);n!=null&&w(e,["activityHandling"],n);const s=v(t,["turnCoverage"]);return s!=null&&w(e,["turnCoverage"],s),e}function cCe(t){const e={},r=v(t,["targetTokens"]);return r!=null&&w(e,["targetTokens"],r),e}function uCe(t){const e={},r=v(t,["triggerTokens"]);r!=null&&w(e,["triggerTokens"],r);const n=v(t,["slidingWindow"]);return n!=null&&w(e,["slidingWindow"],cCe(n)),e}function ACe(t){const e={},r=v(t,["proactiveAudio"]);return r!=null&&w(e,["proactiveAudio"],r),e}function dCe(t,e){const r={},n=v(t,["generationConfig"]);e!==void 0&&n!=null&&w(e,["setup","generationConfig"],n);const s=v(t,["responseModalities"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","responseModalities"],s);const a=v(t,["temperature"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","temperature"],a);const i=v(t,["topP"]);e!==void 0&&i!=null&&w(e,["setup","generationConfig","topP"],i);const o=v(t,["topK"]);e!==void 0&&o!=null&&w(e,["setup","generationConfig","topK"],o);const l=v(t,["maxOutputTokens"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","maxOutputTokens"],l);const c=v(t,["mediaResolution"]);e!==void 0&&c!=null&&w(e,["setup","generationConfig","mediaResolution"],c);const d=v(t,["seed"]);e!==void 0&&d!=null&&w(e,["setup","generationConfig","seed"],d);const h=v(t,["speechConfig"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","speechConfig"],Kbe(bB(h)));const p=v(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=v(t,["systemInstruction"]);e!==void 0&&m!=null&&w(e,["setup","systemInstruction"],Jbe(ro(m)));const y=v(t,["tools"]);if(e!==void 0&&y!=null){let U=Mm(y);Array.isArray(U)&&(U=U.map(F=>aCe(Um(F)))),w(e,["setup","tools"],U)}const x=v(t,["sessionResumption"]);e!==void 0&&x!=null&&w(e,["setup","sessionResumption"],iCe(x));const E=v(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&w(e,["setup","inputAudioTranscription"],DL());const S=v(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&w(e,["setup","outputAudioTranscription"],DL());const B=v(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&w(e,["setup","realtimeInputConfig"],lCe(B));const D=v(t,["contextWindowCompression"]);e!==void 0&&D!=null&&w(e,["setup","contextWindowCompression"],uCe(D));const I=v(t,["proactivity"]);return e!==void 0&&I!=null&&w(e,["setup","proactivity"],ACe(I)),r}function fCe(t,e){const r={},n=v(e,["model"]);n!=null&&w(r,["setup","model"],Zn(t,n));const s=v(e,["config"]);return s!=null&&w(r,["config"],dCe(s,r)),r}function hCe(t,e,r){const n={},s=v(e,["expireTime"]);r!==void 0&&s!=null&&w(r,["expireTime"],s);const a=v(e,["newSessionExpireTime"]);r!==void 0&&a!=null&&w(r,["newSessionExpireTime"],a);const i=v(e,["uses"]);r!==void 0&&i!=null&&w(r,["uses"],i);const o=v(e,["liveConnectConstraints"]);r!==void 0&&o!=null&&w(r,["bidiGenerateContentSetup"],fCe(t,o));const l=v(e,["lockAdditionalFields"]);return r!==void 0&&l!=null&&w(r,["fieldMask"],l),n}function pCe(t,e){const r={},n=v(e,["config"]);return n!=null&&w(r,["config"],hCe(t,n,r)),r}function mCe(t){const e={},r=v(t,["name"]);return r!=null&&w(e,["name"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gCe(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const s=Object.keys(n).map(a=>`${r}.${a}`);e.push(...s)}else e.push(r)}return e.join(",")}function xCe(t,e){let r=null;const n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const a=n.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,r=a):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(r){const a=gCe(r);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];s.length>0&&(o=s.map(c=>i.includes(c)?`generationConfig.${c}`:c));const l=[];a&&l.push(a),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class vCe extends b0{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=pCe(this.apiClient,e);a=ar("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=xCe(o,e.config);return s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>mCe(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yCe(t){const e={},r=v(t,["name"]);r!=null&&w(e,["_url","name"],r);const n=v(t,["config"]);return n!=null&&w(e,["config"],n),e}function wCe(t,e){const r={},n=v(t,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&w(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&w(e,["_query","filter"],a),r}function bCe(t){const e={},r=v(t,["config"]);return r!=null&&w(e,["config"],wCe(r,e)),e}function CCe(t){const e={},r=v(t,["textInput"]);r!=null&&w(e,["textInput"],r);const n=v(t,["output"]);return n!=null&&w(e,["output"],n),e}function ECe(t){const e={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=v(t,["examples"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>CCe(s))),w(e,["examples","examples"],n)}return e}function _Ce(t,e){const r={};if(v(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const n=v(t,["tunedModelDisplayName"]);if(e!==void 0&&n!=null&&w(e,["displayName"],n),v(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=v(t,["epochCount"]);e!==void 0&&s!=null&&w(e,["tuningTask","hyperparameters","epochCount"],s);const a=v(t,["learningRateMultiplier"]);if(a!=null&&w(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),v(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(v(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=v(t,["batchSize"]);e!==void 0&&i!=null&&w(e,["tuningTask","hyperparameters","batchSize"],i);const o=v(t,["learningRate"]);return e!==void 0&&o!=null&&w(e,["tuningTask","hyperparameters","learningRate"],o),r}function SCe(t){const e={},r=v(t,["baseModel"]);r!=null&&w(e,["baseModel"],r);const n=v(t,["trainingDataset"]);n!=null&&w(e,["tuningTask","trainingData"],ECe(n));const s=v(t,["config"]);return s!=null&&w(e,["config"],_Ce(s,e)),e}function TCe(t){const e={},r=v(t,["name"]);r!=null&&w(e,["_url","name"],r);const n=v(t,["config"]);return n!=null&&w(e,["config"],n),e}function NCe(t,e){const r={},n=v(t,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&w(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&w(e,["_query","filter"],a),r}function BCe(t){const e={},r=v(t,["config"]);return r!=null&&w(e,["config"],NCe(r,e)),e}function kCe(t,e){const r={},n=v(t,["gcsUri"]);e!==void 0&&n!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],n);const s=v(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],s),v(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function ICe(t,e){const r={},n=v(t,["gcsUri"]);n!=null&&w(r,["validationDatasetUri"],n);const s=v(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],s),r}function FCe(t,e){const r={},n=v(t,["validationDataset"]);e!==void 0&&n!=null&&w(e,["supervisedTuningSpec"],ICe(n,r));const s=v(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&w(e,["tunedModelDisplayName"],s);const a=v(t,["description"]);e!==void 0&&a!=null&&w(e,["description"],a);const i=v(t,["epochCount"]);e!==void 0&&i!=null&&w(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=v(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&w(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=v(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&w(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const c=v(t,["adapterSize"]);if(e!==void 0&&c!=null&&w(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),v(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(v(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function DCe(t){const e={},r=v(t,["baseModel"]);r!=null&&w(e,["baseModel"],r);const n=v(t,["trainingDataset"]);n!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],kCe(n,e));const s=v(t,["config"]);return s!=null&&w(e,["config"],FCe(s,e)),e}function RCe(t){const e={},r=v(t,["name"]);r!=null&&w(e,["model"],r);const n=v(t,["name"]);return n!=null&&w(e,["endpoint"],n),e}function XH(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["name"]);n!=null&&w(e,["name"],n);const s=v(t,["state"]);s!=null&&w(e,["state"],NH(s));const a=v(t,["createTime"]);a!=null&&w(e,["createTime"],a);const i=v(t,["tuningTask","startTime"]);i!=null&&w(e,["startTime"],i);const o=v(t,["tuningTask","completeTime"]);o!=null&&w(e,["endTime"],o);const l=v(t,["updateTime"]);l!=null&&w(e,["updateTime"],l);const c=v(t,["description"]);c!=null&&w(e,["description"],c);const d=v(t,["baseModel"]);d!=null&&w(e,["baseModel"],d);const h=v(t,["_self"]);h!=null&&w(e,["tunedModel"],RCe(h));const p=v(t,["distillationSpec"]);p!=null&&w(e,["distillationSpec"],p);const m=v(t,["experiment"]);m!=null&&w(e,["experiment"],m);const y=v(t,["labels"]);y!=null&&w(e,["labels"],y);const x=v(t,["pipelineJob"]);x!=null&&w(e,["pipelineJob"],x);const E=v(t,["satisfiesPzi"]);E!=null&&w(e,["satisfiesPzi"],E);const S=v(t,["satisfiesPzs"]);S!=null&&w(e,["satisfiesPzs"],S);const B=v(t,["serviceAccount"]);B!=null&&w(e,["serviceAccount"],B);const D=v(t,["tunedModelDisplayName"]);return D!=null&&w(e,["tunedModelDisplayName"],D),e}function LCe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=v(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>XH(i))),w(e,["tuningJobs"],a)}return e}function UCe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["name"]);n!=null&&w(e,["name"],n);const s=v(t,["metadata"]);s!=null&&w(e,["metadata"],s);const a=v(t,["done"]);a!=null&&w(e,["done"],a);const i=v(t,["error"]);return i!=null&&w(e,["error"],i),e}function MCe(t){const e={},r=v(t,["checkpointId"]);r!=null&&w(e,["checkpointId"],r);const n=v(t,["epoch"]);n!=null&&w(e,["epoch"],n);const s=v(t,["step"]);s!=null&&w(e,["step"],s);const a=v(t,["endpoint"]);return a!=null&&w(e,["endpoint"],a),e}function PCe(t){const e={},r=v(t,["model"]);r!=null&&w(e,["model"],r);const n=v(t,["endpoint"]);n!=null&&w(e,["endpoint"],n);const s=v(t,["checkpoints"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>MCe(i))),w(e,["checkpoints"],a)}return e}function hT(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["name"]);n!=null&&w(e,["name"],n);const s=v(t,["state"]);s!=null&&w(e,["state"],NH(s));const a=v(t,["createTime"]);a!=null&&w(e,["createTime"],a);const i=v(t,["startTime"]);i!=null&&w(e,["startTime"],i);const o=v(t,["endTime"]);o!=null&&w(e,["endTime"],o);const l=v(t,["updateTime"]);l!=null&&w(e,["updateTime"],l);const c=v(t,["error"]);c!=null&&w(e,["error"],c);const d=v(t,["description"]);d!=null&&w(e,["description"],d);const h=v(t,["baseModel"]);h!=null&&w(e,["baseModel"],h);const p=v(t,["tunedModel"]);p!=null&&w(e,["tunedModel"],PCe(p));const m=v(t,["supervisedTuningSpec"]);m!=null&&w(e,["supervisedTuningSpec"],m);const y=v(t,["tuningDataStats"]);y!=null&&w(e,["tuningDataStats"],y);const x=v(t,["encryptionSpec"]);x!=null&&w(e,["encryptionSpec"],x);const E=v(t,["partnerModelTuningSpec"]);E!=null&&w(e,["partnerModelTuningSpec"],E);const S=v(t,["distillationSpec"]);S!=null&&w(e,["distillationSpec"],S);const B=v(t,["experiment"]);B!=null&&w(e,["experiment"],B);const D=v(t,["labels"]);D!=null&&w(e,["labels"],D);const I=v(t,["pipelineJob"]);I!=null&&w(e,["pipelineJob"],I);const U=v(t,["satisfiesPzi"]);U!=null&&w(e,["satisfiesPzi"],U);const F=v(t,["satisfiesPzs"]);F!=null&&w(e,["satisfiesPzs"],F);const C=v(t,["serviceAccount"]);C!=null&&w(e,["serviceAccount"],C);const _=v(t,["tunedModelDisplayName"]);return _!=null&&w(e,["tunedModelDisplayName"],_),e}function OCe(t){const e={},r=v(t,["sdkHttpResponse"]);r!=null&&w(e,["sdkHttpResponse"],r);const n=v(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=v(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>hT(i))),w(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jCe extends b0{constructor(e){super(),this.apiClient=e,this.get=async r=>await this.getInternal(r),this.list=async(r={})=>new J1(l0.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.tune=async r=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(r);{const n=await this.tuneMldevInternal(r);let s="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?s=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(s=n.name.split("/operations/")[0]),{name:s,state:sT.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=TCe(e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>hT(d))}else{const c=yCe(e);return o=ar("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>XH(d))}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=BCe(e);return o=ar("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=OCe(d),p=new cL;return Object.assign(p,h),p})}else{const c=bCe(e);return o=ar("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const h=LCe(d),p=new cL;return Object.assign(p,h),p})}}async tuneInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=DCe(e);return a=ar("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>hT(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=SCe(e);return a=ar("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>UCe(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QCe{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const HCe=1024*1024*8,VCe=3,zCe=1e3,GCe=2,iS="x-goog-upload-status";async function qCe(t,e,r){var n,s,a;let i=0,o=0,l=new aT(new Response),c="upload";for(i=t.size;o<i;){const h=Math.min(HCe,i-o),p=t.slice(o,o+h);o+h>=i&&(c+=", finalize");let m=0,y=zCe;for(;m<VCe&&(l=await r.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(o),"Content-Length":String(h)}}}),!(!((n=l==null?void 0:l.headers)===null||n===void 0)&&n[iS]));)m++,await $Ce(y),y=y*GCe;if(o+=h,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[iS])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(l==null?void 0:l.json());if(((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[iS])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function KCe(t){return{size:t.size,type:t.type}}function $Ce(t){return new Promise(e=>setTimeout(e,t))}class WCe{async upload(e,r,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qCe(e,r,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KCe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YCe{create(e,r,n){return new XCe(e,r,n)}}class XCe{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RL="x-goog-api-key";class JCe{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(RL)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(RL,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZCe="gl-node/";class eEe{constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const n=nge(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const s=new JCe(this.apiKey);this.apiClient=new vbe({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:ZCe+"web",uploader:new WCe,downloader:new QCe}),this.models=new Obe(this.apiClient),this.live=new Fbe(this.apiClient,s,new YCe),this.batches=new Sxe(this.apiClient),this.chats=new k1e(this.models,this.apiClient),this.caches=new T1e(this.apiClient),this.files=new V1e(this.apiClient),this.operations=new Vbe(this.apiClient),this.authTokens=new vCe(this.apiClient),this.tunings=new jCe(this.apiClient)}}const Z1="acompanamientos",tEe=async()=>{try{const t=er(Ft(Yr,Z1),an("fecha","desc"));return(await Da(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acompañamientos:",t),new Error("No se pudieron cargar los registros de acompañamiento")}},rEe=async t=>{try{return{id:(await ws(Ft(Yr,Z1),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompañamiento:",e),new Error("No se pudo crear el registro de acompañamiento")}},nEe=async(t,e)=>{try{const r=mr(Yr,Z1,t);await O1(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompañamiento:",r,"ID:",t),new Error("No se pudo actualizar el registro de acompañamiento")}},sEe=async t=>{try{const e=mr(Yr,Z1,t);await li(e)}catch(e){throw console.error("Error al eliminar acompañamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompañamiento")}},aEe=async t=>{try{const e=er(Ft(Yr,Z1),Mn("docente","==",t),an("fecha","desc"));return(await Da(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error al obtener acompañamientos por docente:",e),new Error("No se pudieron cargar los acompañamientos del docente")}},iEe=async()=>{try{const t=mr(Yr,"configuracion","rubricaAcompanamiento"),e=await P1(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rúbrica personalizada:",t),null}},oEe=()=>{const[t,e]=q.useState([]),[r,n]=q.useState([]),[s,a]=q.useState(!1),[i,o]=q.useState(!1),[l,c]=q.useState(null),[d,h]=q.useState("list"),[p,m]=q.useState(null),[y,x]=q.useState(!1),[E,S]=q.useState(!1),B=gx,D=q.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[I,U]=q.useState(D),F=q.useCallback(async()=>{a(!0);try{const V=await tEe();e(V),c(null)}catch(V){console.error("Error al cargar acompañamientos desde Firestore",V),c("No se pudieron cargar los registros de acompañamiento desde la nube.")}finally{a(!1)}},[]),C=q.useCallback(async()=>{o(!0);try{const J=(await hH()).filter(K=>K.profile===jt.PROFESORADO).map(K=>K.nombreCompleto).sort();n(J)}catch(V){console.error("Error al cargar profesores desde Firestore",V),c("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);q.useEffect(()=>{F(),C()},[F,C]);const _=V=>{U(J=>({...J,[V.target.name]:V.target.value}))},N=(V,J)=>{U(K=>({...K,rubricaResultados:{...K.rubricaResultados,[V]:J}}))},j=async()=>{x(!0);const{rubricaResultados:V,observacionesGenerales:J}=I;let K=`Resultados de la Rúbrica:
`;B.forEach(O=>{O.criteria.forEach(W=>{const Z=V[W.name];if(Z&&W.levels[Z-1]){const ne=W.levels[Z-1];K+=`- Criterio: "${W.name}" | Nivel: ${Z} (${ne})
`}})}),K+=`
Observaciones Generales del Evaluador:
${J||"No se proveyeron observaciones adicionales."}`;const ae=`
            Eres un asesor pedagógico experto. Tu tarea es generar una retroalimentación formal, técnica y constructiva para un docente, basada en una observación de clase.
            La retroalimentación debe ser estructurada y usar un lenguaje pedagógico preciso.

            A continuación, los datos de la observación:
            ${K}

            Genera una retroalimentación que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectándolos con los criterios de la rúbrica.
            - ## Áreas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqué con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prácticas y accionables que el docente pueda implementar.
        `;try{td("Acompañamiento - Consolidar Feedback");const Z=(await new eEe({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:ae})).text.replace(/(\*\*|\*)/g,"");U(ne=>({...ne,retroalimentacionConsolidada:Z}))}catch(O){console.error("Error al generar retroalimentación con IA",O),alert("No se pudo generar la retroalimentación. Inténtelo de nuevo.")}finally{x(!1)}},R=async()=>{const V=p;if(!V)return;S(!0);const J=t.find(de=>de.id===V);if(!J){S(!1);return}const K=new or({orientation:"p",unit:"mm",format:"a4"}),ae=20,O=K.internal.pageSize.getWidth(),W=K.internal.pageSize.getHeight(),Z=O-ae*2;let ne=ae;const le=de=>{de.setFont("helvetica","bold"),de.setFontSize(10),de.setTextColor(100),de.text("LICEO INDUSTRIAL DE RECOLETA",O/2,15,{align:"center"})};le(K),K.setFont("helvetica","bold"),K.setFontSize(18),K.setTextColor(40),K.text("Informe de Acompañamiento Docente",O/2,ne+10,{align:"center"}),ne+=25,xl(K,{startY:ne,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},J.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(J.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},J.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},J.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),ne=K.lastAutoTable.finalY+10;const ve=[],pe=["Débil","Incipiente","Satisfactorio","Avanzado"];B.forEach(de=>{ve.push([{content:de.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),de.criteria.forEach(ce=>{const oe=J.rubricaResultados[ce.name],Re=oe?pe[oe-1]:"No evaluado";ve.push([ce.name,Re])})}),xl(K,{startY:ne,head:[["Indicador","Nivel de Logro"]],body:ve,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:de=>{de.pageNumber>1&&le(K)}}),ne=K.lastAutoTable.finalY+15;const he=(de,ce)=>{ne>W-ae-10&&(K.addPage(),le(K),ne=ae),K.setFont("helvetica",ce.style),K.setFontSize(ce.size);const oe=K.splitTextToSize(de,Z),Re=oe.length*(ce.size*.352778*1.15);ne+Re>W-ae&&(K.addPage(),le(K),ne=ae),K.text(oe,ae,ne,{align:"left"}),ne+=Re+(ce.isTitle?5:8)};J.retroalimentacionConsolidada?J.retroalimentacionConsolidada.split(/(?=## )/).forEach(ce=>{if(ce.trim()){const oe=ce.trim().split(`
`),Re=oe[0].replace("## ",""),qe=oe.slice(1).join(`
`).trim();he(Re,{size:14,style:"bold",isTitle:!0}),he(qe,{size:11,style:"normal",isTitle:!1})}}):(he("Retroalimentación Consolidada",{size:14,style:"bold",isTitle:!0}),he("No se ha generado retroalimentación.",{size:11,style:"normal",isTitle:!1})),K.save(`Acompanamiento_${J.docente.replace(/\s/g,"_")}_${new Date(J.fecha).toLocaleDateString("es-CL")}.pdf`),S(!1)},L=async V=>{if(V.preventDefault(),!I.docente||!I.curso||!I.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let J=p;if(p)await nEe(p,I);else{const K=await rEe(I);m(K.id),U({...I}),J=K.id}await F(),J&&alert("¡Guardado correctamente!")}catch(J){console.error("Error al guardar acompañamiento:",J),c("Error al guardar el registro en la nube.")}},Q=()=>{U(D),m(null),h("form"),c(null)},H=V=>{U(V),m(V.id),h("form"),c(null)},te=async V=>{if(window.confirm("¿Está seguro de que desea eliminar este registro de acompañamiento?"))try{await sEe(V),await F()}catch(J){console.error("Error al eliminar acompañamiento:",J),c("No se pudo eliminar el registro en la nube.")}},Y=()=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompañamiento"}),u.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),s&&u.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!s&&t.length===0&&u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompañamiento en la nube."}),u.jsx("div",{className:"space-y-4",children:!s&&t.length>0&&t.map(V=>u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:V.docente}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[V.curso," - ",V.asignatura]}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(V.fecha).toLocaleDateString("es-CL")]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>H(V),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),u.jsx("button",{onClick:()=>te(V.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},V.id))})]}),re=()=>u.jsx("div",{className:"animate-fade-in",children:u.jsxs("form",{onSubmit:L,className:"space-y-8",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:p?"Editando Acompañamiento":"Nuevo Acompañamiento Docente"}),u.jsx("button",{type:"button",onClick:()=>h("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),l&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),u.jsxs("select",{name:"docente",value:I.docente,onChange:_,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[u.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),r.map(V=>u.jsx("option",{value:V,children:V},V))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:I.curso,onChange:_,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione"}),ha.map(V=>u.jsx("option",{value:V,children:V},V))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignatura",value:I.asignatura,onChange:_,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione"}),yl.map(V=>u.jsx("option",{value:V,children:V},V))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),u.jsx("input",{type:"text",name:"bloques",value:I.bloques,onChange:_,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:B.map(V=>u.jsx(dt.Fragment,{children:V.criteria.map((J,K)=>u.jsxs("tr",{children:[K===0&&u.jsx("td",{rowSpan:V.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:V.domain}),u.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:J.name}),J.levels.map((ae,O)=>{const W=O+1,Z=I.rubricaResultados[J.name]===W;return u.jsx("td",{onClick:()=>N(J.name,W),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Z?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:ae},W)})]},J.name))},V.domain))})]})}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),u.jsx("textarea",{name:"observacionesGenerales",value:I.observacionesGenerales,onChange:_,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada"}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("textarea",{name:"retroalimentacionConsolidada",value:I.retroalimentacionConsolidada,onChange:_,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentación aquí..."}),u.jsx("button",{type:"button",onClick:j,disabled:y,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:y?"...":"Consolidar"})]})]}),u.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[u.jsx("button",{type:"button",onClick:R,disabled:!p||E,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:E?"...":"Exportar PDF"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompañamiento"})]})]})});return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompañamiento Docente"}),u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d==="list"?Y():re()})]})},_B="mensajes_internos",lEe="usuarios",JH="mensajes_read_status",ZH=t=>{var r,n;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fecha}},cEe=(t,e)=>{const r=er(Ft(Tt,_B),Mn("participants","array-contains",t),an("fecha","desc"));return gr(r,s=>{const a=s.docs.map(i=>ZH(i));e(a)},s=>{console.error("Error al suscribirse a los mensajes:",s),e([])})},uEe=async t=>{try{const e={...t,participants:[t.de,t.para],fecha:ur.fromDate(new Date)};await ws(Ft(Tt,_B),e)}catch(e){throw console.error("Error al enviar el mensaje:",e),new Error("No se pudo enviar el mensaje.")}},AEe=async t=>{try{const e=mr(Tt,_B,t);await li(e)}catch(e){throw console.error("Error al eliminar el mensaje:",e),new Error("No se pudo eliminar el mensaje.")}},dEe=(t,e)=>{const r=mr(Tt,JH,t);return gr(r,s=>{s.exists()?e(s.data()):e({announcements:[],messages:[]})},s=>{console.error("Error al suscribirse al estado de lectura:",s),e({announcements:[],messages:[]})})},fEe=async(t,e)=>{try{const r=mr(Tt,JH,t);await Ti(r,{messages:eee(e)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},hEe=t=>{const e=er(Ft(Tt,lEe),an("nombreCompleto","asc"));return gr(e,n=>{const s=n.docs.map(a=>ZH(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},pEe=({currentUser:t,refreshUnreadCount:e})=>{const[r,n]=q.useState("inbox"),[s,a]=q.useState([]),[i,o]=q.useState([]),[l,c]=q.useState(null),[d,h]=q.useState({announcements:[],messages:[]}),[p,m]=q.useState(!0),y={para:"",asunto:"",cuerpo:""},[x,E]=q.useState(y);q.useEffect(()=>{if(!t.id||!t.email){m(!1);return}m(!0);const C=cEe(t.email,j=>{a(j),m(!1)}),_=hEe(o),N=dEe(t.id,j=>{h(j),e()});return()=>{C(),_(),N()}},[t.id,t.email,e]);const S=C=>{c(C),r==="inbox"&&!d.messages.includes(C.id)&&fEe(t.id,C.id).catch(_=>{console.error("Failed to mark message as read:",_)})},B=async C=>{if(C.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const _={de:t.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await uEe(_),E(y),n("sent")}catch(N){console.error("Error sending message:",N),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},D=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await AEe(C),c(null)}catch(_){console.error("Error deleting message:",_),alert("No se pudo eliminar el mensaje.")}},I=C=>{E({para:C.de,asunto:`Re: ${C.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${C.de}
Fecha: ${new Date(C.fecha).toLocaleString("es-CL")}

${C.cuerpo}`}),n("compose")},U=q.useMemo(()=>s.filter(C=>C.para===t.email),[s,t.email]),F=q.useMemo(()=>s.filter(C=>C.de===t.email),[s,t.email]);return p?u.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[u.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[u.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:u.jsx("button",{onClick:()=>{n("compose"),c(null),E(y)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),u.jsxs("nav",{className:"p-2 space-y-1",children:[u.jsx("button",{onClick:()=>{n("inbox"),c(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),u.jsx("button",{onClick:()=>{n("sent"),c(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&u.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?U:F).map(C=>{const _=r==="inbox"&&!d.messages.includes(C.id);return u.jsxs("div",{onClick:()=>S(C),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===C.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("p",{className:`font-bold truncate ${_?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?C.de:`Para: ${C.para}`}),_&&u.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),u.jsx("p",{className:`truncate text-sm ${_?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:C.asunto}),u.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(C.fecha).toLocaleString("es-CL")})]},C.id)})}),u.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),u.jsxs("form",{onSubmit:B,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),u.jsxs("select",{id:"para",value:x.para,onChange:C=>E({...x,para:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(C=>C.email!==t.email).map(C=>u.jsxs("option",{value:C.email,children:[C.nombreCompleto," (",C.email,")"]},C.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),u.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:C=>E({...x,asunto:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),u.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:C=>E({...x,cuerpo:C.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?u.jsxs("div",{children:[u.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[u.jsx("strong",{children:"De:"})," ",l.de," ",u.jsx("br",{}),u.jsx("strong",{children:"Para:"})," ",l.para," ",u.jsx("br",{}),u.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),u.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),u.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&u.jsx("button",{onClick:()=>I(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),u.jsx("button",{onClick:()=>D(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):u.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:u.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pT=function(t,e){return pT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},pT(t,e)};function Xc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");pT(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var mT=function(){return mT=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mT.apply(this,arguments)};function fo(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function o(d){try{c(n.next(d))}catch(h){i(h)}}function l(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?a(d.value):s(d.value).then(o,l)}c((n=n.apply(t,[])).next())})}function qi(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Iy(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||e)}var sd=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),CC=function(t,e){return sd.fromClientRect(t,e.getBoundingClientRect())},mEe=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new sd(0,0,n,s)},EC=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},ca=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,a="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},LL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gEe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Fy=0;Fy<LL.length;Fy++)gEe[LL.charCodeAt(Fy)]=Fy;var UL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Dy=0;Dy<UL.length;Dy++)tx[UL.charCodeAt(Dy)]=Dy;var xEe=function(t){var e=t.length*.75,r=t.length,n,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)a=tx[t.charCodeAt(n)],i=tx[t.charCodeAt(n+1)],o=tx[t.charCodeAt(n+2)],l=tx[t.charCodeAt(n+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return c},vEe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},yEe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Gh=5,SB=11,oS=2,wEe=SB-Gh,e9=65536>>Gh,bEe=1<<Gh,lS=bEe-1,CEe=1024>>Gh,EEe=e9+CEe,_Ee=EEe,SEe=32,TEe=_Ee+SEe,NEe=65536>>SB,BEe=1<<wEe,kEe=BEe-1,ML=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},IEe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},FEe=function(t,e){var r=xEe(t),n=Array.isArray(r)?yEe(r):new Uint32Array(r),s=Array.isArray(r)?vEe(r):new Uint16Array(r),a=24,i=ML(s,a/2,n[4]/2),o=n[5]===2?ML(s,(a+n[4])/2):IEe(n,Math.ceil((a+n[4])/4));return new DEe(n[0],n[1],n[2],n[3],i,o)},DEe=function(){function t(e,r,n,s,a,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Gh],r=(r<<oS)+(e&lS),this.data[r];if(e<=65535)return r=this.index[e9+(e-55296>>Gh)],r=(r<<oS)+(e&lS),this.data[r];if(e<this.highStart)return r=TEe-NEe+(e>>SB),r=this.index[r],r+=e>>Gh&kEe,r=this.index[r],r=(r<<oS)+(e&lS),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),PL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",REe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ry=0;Ry<PL.length;Ry++)REe[PL.charCodeAt(Ry)]=Ry;var LEe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",OL=50,UEe=1,t9=2,r9=3,MEe=4,PEe=5,jL=7,n9=8,QL=9,gf=10,gT=11,HL=12,xT=13,OEe=14,rx=15,vT=16,Ly=17,Dg=18,jEe=19,VL=20,yT=21,Rg=22,cS=23,op=24,ul=25,nx=26,sx=27,lp=28,QEe=29,kh=30,HEe=31,Uy=32,My=33,wT=34,bT=35,CT=36,A1=37,ET=38,U2=39,M2=40,uS=41,s9=42,VEe=43,zEe=[9001,65288],a9="!",dn="×",Py="÷",_T=FEe(LEe),MA=[kh,CT],ST=[UEe,t9,r9,PEe],i9=[gf,n9],zL=[sx,nx],GEe=ST.concat(i9),GL=[ET,U2,M2,wT,bT],qEe=[rx,xT],KEe=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(a,i){var o=_T.get(a);if(o>OL?(s.push(!0),o-=OL):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return n.push(i),r.push(vT);if(o===MEe||o===gT){if(i===0)return n.push(i),r.push(kh);var l=r[i-1];return GEe.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(kh))}if(n.push(i),o===HEe)return r.push(e==="strict"?yT:A1);if(o===s9||o===QEe)return r.push(kh);if(o===VEe)return a>=131072&&a<=196605||a>=196608&&a<=262141?r.push(A1):r.push(kh);r.push(o)}),[n,r,s]},AS=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var a=r;a<=n.length;){a++;var i=n[a];if(i===e)return!0;if(i!==gf)break}if(s===gf)for(var a=r;a>0;){a--;var o=n[a];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===e)return!0;if(i!==gf)break}if(o!==gf)break}return!1},qL=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===gf)r--;else return n}return 0},$Ee=function(t,e,r,n,s){if(r[n]===0)return dn;var a=n-1;if(Array.isArray(s)&&s[a]===!0)return dn;var i=a-1,o=a+1,l=e[a],c=i>=0?e[i]:0,d=e[o];if(l===t9&&d===r9)return dn;if(ST.indexOf(l)!==-1)return a9;if(ST.indexOf(d)!==-1||i9.indexOf(d)!==-1)return dn;if(qL(a,e)===n9)return Py;if(_T.get(t[a])===gT||(l===Uy||l===My)&&_T.get(t[o])===gT||l===jL||d===jL||l===QL||[gf,xT,rx].indexOf(l)===-1&&d===QL||[Ly,Dg,jEe,op,lp].indexOf(d)!==-1||qL(a,e)===Rg||AS(cS,Rg,a,e)||AS([Ly,Dg],yT,a,e)||AS(HL,HL,a,e))return dn;if(l===gf)return Py;if(l===cS||d===cS)return dn;if(d===vT||l===vT)return Py;if([xT,rx,yT].indexOf(d)!==-1||l===OEe||c===CT&&qEe.indexOf(l)!==-1||l===lp&&d===CT||d===VL||MA.indexOf(d)!==-1&&l===ul||MA.indexOf(l)!==-1&&d===ul||l===sx&&[A1,Uy,My].indexOf(d)!==-1||[A1,Uy,My].indexOf(l)!==-1&&d===nx||MA.indexOf(l)!==-1&&zL.indexOf(d)!==-1||zL.indexOf(l)!==-1&&MA.indexOf(d)!==-1||[sx,nx].indexOf(l)!==-1&&(d===ul||[Rg,rx].indexOf(d)!==-1&&e[o+1]===ul)||[Rg,rx].indexOf(l)!==-1&&d===ul||l===ul&&[ul,lp,op].indexOf(d)!==-1)return dn;if([ul,lp,op,Ly,Dg].indexOf(d)!==-1)for(var h=a;h>=0;){var p=e[h];if(p===ul)return dn;if([lp,op].indexOf(p)!==-1)h--;else break}if([sx,nx].indexOf(d)!==-1)for(var h=[Ly,Dg].indexOf(l)!==-1?i:a;h>=0;){var p=e[h];if(p===ul)return dn;if([lp,op].indexOf(p)!==-1)h--;else break}if(ET===l&&[ET,U2,wT,bT].indexOf(d)!==-1||[U2,wT].indexOf(l)!==-1&&[U2,M2].indexOf(d)!==-1||[M2,bT].indexOf(l)!==-1&&d===M2||GL.indexOf(l)!==-1&&[VL,nx].indexOf(d)!==-1||GL.indexOf(d)!==-1&&l===sx||MA.indexOf(l)!==-1&&MA.indexOf(d)!==-1||l===op&&MA.indexOf(d)!==-1||MA.concat(ul).indexOf(l)!==-1&&d===Rg&&zEe.indexOf(t[o])===-1||MA.concat(ul).indexOf(d)!==-1&&l===Dg)return dn;if(l===uS&&d===uS){for(var m=r[a],y=1;m>0&&(m--,e[m]===uS);)y++;if(y%2!==0)return dn}return l===Uy&&d===My?dn:Py},WEe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=KEe(t,e.lineBreak),n=r[0],s=r[1],a=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[ul,kh,s9].indexOf(o)!==-1?A1:o}));var i=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,s,i]},YEe=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===a9,this.start=n,this.end=s}return t.prototype.slice=function(){return ca.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),XEe=function(t,e){var r=EC(t),n=WEe(r,e),s=n[0],a=n[1],i=n[2],o=r.length,l=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=dn;c<o&&(d=$Ee(r,a,s,++c,i))===dn;);if(d!==dn||c===o){var h=new YEe(r,d,l,c);return l=c,{value:h,done:!1}}return{done:!0,value:null}}}},JEe=1,ZEe=2,ev=4,KL=8,Jw=10,$L=47,kx=92,e_e=9,t_e=32,Oy=34,Lg=61,r_e=35,n_e=36,s_e=37,jy=39,Qy=40,Ug=41,a_e=95,Mo=45,i_e=33,o_e=60,l_e=62,c_e=64,u_e=91,A_e=93,d_e=61,f_e=123,Hy=63,h_e=125,WL=124,p_e=126,m_e=128,YL=65533,dS=42,Rh=43,g_e=44,x_e=58,v_e=59,d1=46,y_e=0,w_e=8,b_e=11,C_e=14,E_e=31,__e=127,Iu=-1,o9=48,l9=97,c9=101,S_e=102,T_e=117,N_e=122,u9=65,A9=69,d9=70,B_e=85,k_e=90,Yi=function(t){return t>=o9&&t<=57},I_e=function(t){return t>=55296&&t<=57343},cp=function(t){return Yi(t)||t>=u9&&t<=d9||t>=l9&&t<=S_e},F_e=function(t){return t>=l9&&t<=N_e},D_e=function(t){return t>=u9&&t<=k_e},R_e=function(t){return F_e(t)||D_e(t)},L_e=function(t){return t>=m_e},Vy=function(t){return t===Jw||t===e_e||t===t_e},Zw=function(t){return R_e(t)||L_e(t)||t===a_e},XL=function(t){return Zw(t)||Yi(t)||t===Mo},U_e=function(t){return t>=y_e&&t<=w_e||t===b_e||t>=C_e&&t<=E_e||t===__e},rf=function(t,e){return t!==kx?!1:e!==Jw},zy=function(t,e,r){return t===Mo?Zw(e)||rf(e,r):Zw(t)?!0:!!(t===kx&&rf(t,e))},fS=function(t,e,r){return t===Rh||t===Mo?Yi(e)?!0:e===d1&&Yi(r):Yi(t===d1?e:t)},M_e=function(t){var e=0,r=1;(t[e]===Rh||t[e]===Mo)&&(t[e]===Mo&&(r=-1),e++);for(var n=[];Yi(t[e]);)n.push(t[e++]);var s=n.length?parseInt(ca.apply(void 0,n),10):0;t[e]===d1&&e++;for(var a=[];Yi(t[e]);)a.push(t[e++]);var i=a.length,o=i?parseInt(ca.apply(void 0,a),10):0;(t[e]===A9||t[e]===c9)&&e++;var l=1;(t[e]===Rh||t[e]===Mo)&&(t[e]===Mo&&(l=-1),e++);for(var c=[];Yi(t[e]);)c.push(t[e++]);var d=c.length?parseInt(ca.apply(void 0,c),10):0;return r*(s+o*Math.pow(10,-i))*Math.pow(10,l*d)},P_e={type:2},O_e={type:3},j_e={type:4},Q_e={type:13},H_e={type:8},V_e={type:21},z_e={type:9},G_e={type:10},q_e={type:11},K_e={type:12},$_e={type:14},Gy={type:23},W_e={type:1},Y_e={type:25},X_e={type:24},J_e={type:26},Z_e={type:27},eSe={type:28},tSe={type:29},rSe={type:31},TT={type:32},f9=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(EC(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==TT;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Oy:return this.consumeStringToken(Oy);case r_e:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(XL(r)||rf(n,s)){var a=zy(r,n,s)?ZEe:JEe,i=this.consumeName();return{type:5,value:i,flags:a}}break;case n_e:if(this.peekCodePoint(0)===Lg)return this.consumeCodePoint(),Q_e;break;case jy:return this.consumeStringToken(jy);case Qy:return P_e;case Ug:return O_e;case dS:if(this.peekCodePoint(0)===Lg)return this.consumeCodePoint(),$_e;break;case Rh:if(fS(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case g_e:return j_e;case Mo:var o=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(fS(o,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(zy(o,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Mo&&c===l_e)return this.consumeCodePoint(),this.consumeCodePoint(),X_e;break;case d1:if(fS(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case $L:if(this.peekCodePoint(0)===dS)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===dS&&(d=this.consumeCodePoint(),d===$L))return this.consumeToken();if(d===Iu)return this.consumeToken()}break;case x_e:return J_e;case v_e:return Z_e;case o_e:if(this.peekCodePoint(0)===i_e&&this.peekCodePoint(1)===Mo&&this.peekCodePoint(2)===Mo)return this.consumeCodePoint(),this.consumeCodePoint(),Y_e;break;case c_e:var h=this.peekCodePoint(0),p=this.peekCodePoint(1),m=this.peekCodePoint(2);if(zy(h,p,m)){var i=this.consumeName();return{type:7,value:i}}break;case u_e:return eSe;case kx:if(rf(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case A_e:return tSe;case d_e:if(this.peekCodePoint(0)===Lg)return this.consumeCodePoint(),H_e;break;case f_e:return q_e;case h_e:return K_e;case T_e:case B_e:var y=this.peekCodePoint(0),x=this.peekCodePoint(1);return y===Rh&&(cp(x)||x===Hy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case WL:if(this.peekCodePoint(0)===Lg)return this.consumeCodePoint(),z_e;if(this.peekCodePoint(0)===WL)return this.consumeCodePoint(),V_e;break;case p_e:if(this.peekCodePoint(0)===Lg)return this.consumeCodePoint(),G_e;break;case Iu:return TT}return Vy(e)?(this.consumeWhiteSpace(),rSe):Yi(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Zw(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ca(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();cp(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===Hy&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(ca.apply(void 0,e.map(function(l){return l===Hy?o9:l})),16),a=parseInt(ca.apply(void 0,e.map(function(l){return l===Hy?d9:l})),16);return{type:30,start:s,end:a}}var i=parseInt(ca.apply(void 0,e),16);if(this.peekCodePoint(0)===Mo&&cp(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];cp(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var a=parseInt(ca.apply(void 0,o),16);return{type:30,start:i,end:a}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Qy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Qy?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Iu)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===jy||r===Oy){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Iu||this.peekCodePoint(0)===Ug)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Gy)}for(;;){var s=this.consumeCodePoint();if(s===Iu||s===Ug)return{type:22,value:ca.apply(void 0,e)};if(Vy(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Iu||this.peekCodePoint(0)===Ug?(this.consumeCodePoint(),{type:22,value:ca.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Gy);if(s===Oy||s===jy||s===Qy||U_e(s))return this.consumeBadUrlRemnants(),Gy;if(s===kx)if(rf(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Gy;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Vy(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Ug||e===Iu)return;rf(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=ca.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===Iu||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===Jw)return this._value.splice(0,n),W_e;if(s===kx){var a=this._value[n+1];a!==Iu&&a!==void 0&&(a===Jw?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):rf(s,a)&&(r+=this.consumeStringSlice(n),r+=ca(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=ev,n=this.peekCodePoint(0);for((n===Rh||n===Mo)&&e.push(this.consumeCodePoint());Yi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===d1&&Yi(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=KL;Yi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===A9||n===c9)&&((s===Rh||s===Mo)&&Yi(a)||Yi(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=KL;Yi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[M_e(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);if(zy(s,a,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===s_e?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(cp(e)){for(var r=ca(e);cp(this.peekCodePoint(0))&&r.length<6;)r+=ca(this.consumeCodePoint());Vy(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||I_e(n)||n>1114111?YL:n}return e===Iu?YL:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(XL(r))e+=ca(r);else if(rf(r,this.peekCodePoint(0)))e+=ca(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),h9=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new f9;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||sSe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?TT:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),tv=function(t){return t.type===15},jm=function(t){return t.type===17},is=function(t){return t.type===20},nSe=function(t){return t.type===0},NT=function(t,e){return is(t)&&t.value===e},p9=function(t){return t.type!==31},xm=function(t){return t.type!==31&&t.type!==4},sA=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},sSe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},qf=function(t){return t.type===17||t.type===15},Ba=function(t){return t.type===16||qf(t)},m9=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},_i={type:17,number:0,flags:ev},TB={type:16,number:50,flags:ev},xf={type:16,number:100,flags:ev},ax=function(t,e,r){var n=t[0],s=t[1];return[hs(n,e),hs(typeof s<"u"?s:n,r)]},hs=function(t,e){if(t.type===16)return t.number/100*e;if(tv(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},g9="deg",x9="grad",v9="rad",y9="turn",_C={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case g9:return Math.PI*e.number/180;case x9:return Math.PI/200*e.number;case v9:return e.number;case y9:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},w9=function(t){return t.type===15&&(t.unit===g9||t.unit===x9||t.unit===v9||t.unit===y9)},b9=function(t){var e=t.filter(is).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[_i,_i];case"to top":case"bottom":return ac(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[_i,xf];case"to right":case"left":return ac(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[xf,xf];case"to bottom":case"top":return ac(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[xf,_i];case"to left":case"right":return ac(270)}return 0},ac=function(t){return Math.PI*t/180},Tf={name:"color",parse:function(t,e){if(e.type===18){var r=aSe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3);return vf(parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3),i=e.value.substring(3,4);return vf(parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6);return vf(parseInt(n,16),parseInt(s,16),parseInt(a,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6),i=e.value.substring(6,8);return vf(parseInt(n,16),parseInt(s,16),parseInt(a,16),parseInt(i,16)/255)}}if(e.type===20){var o=WA[e.value.toUpperCase()];if(typeof o<"u")return o}return WA.TRANSPARENT}},Nf=function(t){return(255&t)===0},ti=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},vf=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},JL=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},ZL=function(t,e){var r=e.filter(xm);if(r.length===3){var n=r.map(JL),s=n[0],a=n[1],i=n[2];return vf(s,a,i,1)}if(r.length===4){var o=r.map(JL),s=o[0],a=o[1],i=o[2],l=o[3];return vf(s,a,i,l)}return 0};function hS(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var eU=function(t,e){var r=e.filter(xm),n=r[0],s=r[1],a=r[2],i=r[3],o=(n.type===17?ac(n.number):_C.parse(t,n))/(Math.PI*2),l=Ba(s)?s.number/100:0,c=Ba(a)?a.number/100:0,d=typeof i<"u"&&Ba(i)?hs(i,1):1;if(l===0)return vf(c*255,c*255,c*255,1);var h=c<=.5?c*(l+1):c+l-c*l,p=c*2-h,m=hS(p,h,o+1/3),y=hS(p,h,o),x=hS(p,h,o-1/3);return vf(m*255,y*255,x*255,d)},aSe={hsl:eU,hsla:eU,rgb:ZL,rgba:ZL},Ix=function(t,e){return Tf.parse(t,h9.create(e).parseComponentValue())},WA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},iSe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(is(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},oSe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},SC=function(t,e){var r=Tf.parse(t,e[0]),n=e[1];return n&&Ba(n)?{color:r,stop:n}:{color:r,stop:null}},tU=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=_i),n.stop===null&&(n.stop=xf);for(var s=[],a=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=hs(o,e);l>a?s.push(l):s.push(a),a=l}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,p=s[c-1],m=(d-p)/(h+1),y=1;y<=h;y++)s[c+y-1]=m*y;c=null}}return t.map(function(x,E){var S=x.color;return{color:S,stop:Math.max(Math.min(1,s[E]/e),0)}})},lSe=function(t,e,r){var n=e/2,s=r/2,a=hs(t[0],e)-n,i=s-hs(t[1],r);return(Math.atan2(i,a)+Math.PI*2)%(Math.PI*2)},cSe=function(t,e,r){var n=typeof t=="number"?t:lSe(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),a=e/2,i=r/2,o=s/2,l=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[s,a-c,a+c,i-l,i+l]},Pc=function(t,e){return Math.sqrt(t*t+e*e)},rU=function(t,e,r,n,s){var a=[[0,0],[0,e],[t,0],[t,e]];return a.reduce(function(i,o){var l=o[0],c=o[1],d=Pc(r-l,n-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},uSe=function(t,e,r,n,s){var a=0,i=0;switch(t.size){case 0:t.shape===0?a=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)a=i=Math.min(Pc(e,r),Pc(e,r-s),Pc(e-n,r),Pc(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),l=rU(n,s,e,r,!0),c=l[0],d=l[1];a=Pc(c-e,(d-r)/o),i=o*a}break;case 1:t.shape===0?a=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)a=i=Math.max(Pc(e,r),Pc(e,r-s),Pc(e-n,r),Pc(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=rU(n,s,e,r,!1),c=h[0],d=h[1];a=Pc(c-e,(d-r)/o),i=o*a}break}return Array.isArray(t.size)&&(a=hs(t.size[0],n),i=t.size.length===2?hs(t.size[1],s):a),[a,i]},ASe=function(t,e){var r=ac(180),n=[];return sA(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&i.value==="to"){r=b9(s);return}else if(w9(i)){r=_C.parse(t,i);return}}var o=SC(t,s);n.push(o)}),{angle:r,stops:n,type:1}},qy=function(t,e){var r=ac(180),n=[];return sA(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=b9(s);return}else if(w9(i)){r=(_C.parse(t,i)+ac(270))%ac(360);return}}var o=SC(t,s);n.push(o)}),{angle:r,stops:n,type:1}},dSe=function(t,e){var r=ac(180),n=[],s=1,a=0,i=3,o=[];return sA(e).forEach(function(l,c){var d=l[0];if(c===0){if(is(d)&&d.value==="linear"){s=1;return}else if(is(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=Tf.parse(t,d.values[0]);n.push({stop:_i,color:h})}else if(d.name==="to"){var h=Tf.parse(t,d.values[0]);n.push({stop:xf,color:h})}else if(d.name==="color-stop"){var p=d.values.filter(xm);if(p.length===2){var h=Tf.parse(t,p[1]),m=p[0];jm(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:h})}}}}),s===1?{angle:(r+ac(180))%ac(360),stops:n,type:s}:{size:i,shape:a,stops:n,position:o,type:s}},C9="closest-side",E9="farthest-side",_9="closest-corner",S9="farthest-corner",T9="circle",N9="ellipse",B9="cover",k9="contain",fSe=function(t,e){var r=0,n=3,s=[],a=[];return sA(e).forEach(function(i,o){var l=!0;if(o===0){var c=!1;l=i.reduce(function(h,p){if(c)if(is(p))switch(p.value){case"center":return a.push(TB),h;case"top":case"left":return a.push(_i),h;case"right":case"bottom":return a.push(xf),h}else(Ba(p)||qf(p))&&a.push(p);else if(is(p))switch(p.value){case T9:return r=0,!1;case N9:return r=1,!1;case"at":return c=!0,!1;case C9:return n=0,!1;case B9:case E9:return n=1,!1;case k9:case _9:return n=2,!1;case S9:return n=3,!1}else if(qf(p)||Ba(p))return Array.isArray(n)||(n=[]),n.push(p),!1;return h},l)}if(l){var d=SC(t,i);s.push(d)}}),{size:n,shape:r,stops:s,position:a,type:2}},Ky=function(t,e){var r=0,n=3,s=[],a=[];return sA(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,h){if(is(h))switch(h.value){case"center":return a.push(TB),!1;case"top":case"left":return a.push(_i),!1;case"right":case"bottom":return a.push(xf),!1}else if(Ba(h)||qf(h))return a.push(h),!1;return d},l):o===1&&(l=i.reduce(function(d,h){if(is(h))switch(h.value){case T9:return r=0,!1;case N9:return r=1,!1;case k9:case C9:return n=0,!1;case E9:return n=1,!1;case _9:return n=2,!1;case B9:case S9:return n=3,!1}else if(qf(h)||Ba(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},l)),l){var c=SC(t,i);s.push(c)}}),{size:n,shape:r,stops:s,position:a,type:2}},hSe=function(t){return t.type===1},pSe=function(t){return t.type===2},NB={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=I9[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function mSe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!I9[t.name])}var I9={"linear-gradient":ASe,"-moz-linear-gradient":qy,"-ms-linear-gradient":qy,"-o-linear-gradient":qy,"-webkit-linear-gradient":qy,"radial-gradient":fSe,"-moz-radial-gradient":Ky,"-ms-radial-gradient":Ky,"-o-radial-gradient":Ky,"-webkit-radial-gradient":Ky,"-webkit-gradient":dSe},gSe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return xm(n)&&mSe(n)}).map(function(n){return NB.parse(t,n)})}},xSe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(is(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},vSe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return sA(e).map(function(r){return r.filter(Ba)}).map(m9)}},ySe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return sA(e).map(function(r){return r.filter(is).map(function(n){return n.value}).join(" ")}).map(wSe)}},wSe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Zp;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Zp||(Zp={}));var bSe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return sA(e).map(function(r){return r.filter(CSe)})}},CSe=function(t){return is(t)||Ba(t)},TC=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},ESe=TC("top"),_Se=TC("right"),SSe=TC("bottom"),TSe=TC("left"),NC=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return m9(r.filter(Ba))}}},NSe=NC("top-left"),BSe=NC("top-right"),kSe=NC("bottom-right"),ISe=NC("bottom-left"),BC=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},FSe=BC("top"),DSe=BC("right"),RSe=BC("bottom"),LSe=BC("left"),kC=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return tv(r)?r.number:0}}},USe=kC("top"),MSe=kC("right"),PSe=kC("bottom"),OSe=kC("left"),jSe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},QSe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},HSe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(is).reduce(function(r,n){return r|VSe(n.value)},0)}},VSe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},zSe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},GSe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},eb;(function(t){t.NORMAL="normal",t.STRICT="strict"})(eb||(eb={}));var qSe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return eb.STRICT;case"normal":default:return eb.NORMAL}}},KSe={name:"line-height",initialValue:"normal",prefix:!1,type:4},nU=function(t,e){return is(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Ba(t)?hs(t,e):e},$Se={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:NB.parse(t,e)}},WSe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},BT={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},IC=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},YSe=IC("top"),XSe=IC("right"),JSe=IC("bottom"),ZSe=IC("left"),e5e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(is).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},t5e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},FC=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},r5e=FC("top"),n5e=FC("right"),s5e=FC("bottom"),a5e=FC("left"),i5e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},o5e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},l5e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&NT(e[0],"none")?[]:sA(e).map(function(r){for(var n={color:WA.TRANSPARENT,offsetX:_i,offsetY:_i,blur:_i},s=0,a=0;a<r.length;a++){var i=r[a];qf(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:n.blur=i,s++):n.color=Tf.parse(t,i)}return n})}},c5e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},u5e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=f5e[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},A5e=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},d5e=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,a,i,o]:null},f5e={matrix:A5e,matrix3d:d5e},sU={type:16,number:50,flags:ev},h5e=[sU,sU],p5e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Ba);return r.length!==2?h5e:[r[0],r[1]]}},m5e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Fx;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Fx||(Fx={}));var g5e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Fx.BREAK_ALL;case"keep-all":return Fx.KEEP_ALL;case"normal":default:return Fx.NORMAL}}},x5e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(jm(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},F9={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},v5e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return jm(e)?e.number:1}},y5e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},w5e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(is).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},b5e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},C5e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},E5e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(jm(e))return e.number;if(is(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},_5e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(is).map(function(r){return r.value})}},S5e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Va=function(t,e){return(t&e)!==0},T5e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},N5e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(p9),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(i.type===20){var l=o&&jm(o)?o.number:1;n.push({counter:i.value,increment:l})}}return n}},B5e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(p9),s=0;s<n.length;s++){var a=n[s],i=n[s+1];if(is(a)&&a.value!=="none"){var o=i&&jm(i)?i.number:0;r.push({counter:a.value,reset:o})}}return r}},k5e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(tv).map(function(r){return F9.parse(t,r)})}},I5e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(nSe);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var i=s[a].value,o=s[a+1].value;n.push({open:i,close:o})}return n}},aU=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},F5e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&NT(e[0],"none")?[]:sA(e).map(function(r){for(var n={color:255,offsetX:_i,offsetY:_i,blur:_i,spread:_i,inset:!1},s=0,a=0;a<r.length;a++){var i=r[a];NT(i,"inset")?n.inset=!0:qf(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:s===2?n.blur=i:n.spread=i,s++):n.color=Tf.parse(t,i)}return n})}},D5e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(is).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},R5e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},L5e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return tv(e)?e.number:0}},U5e=function(){function t(e,r){var n,s;this.animationDuration=Xt(e,k5e,r.animationDuration),this.backgroundClip=Xt(e,iSe,r.backgroundClip),this.backgroundColor=Xt(e,oSe,r.backgroundColor),this.backgroundImage=Xt(e,gSe,r.backgroundImage),this.backgroundOrigin=Xt(e,xSe,r.backgroundOrigin),this.backgroundPosition=Xt(e,vSe,r.backgroundPosition),this.backgroundRepeat=Xt(e,ySe,r.backgroundRepeat),this.backgroundSize=Xt(e,bSe,r.backgroundSize),this.borderTopColor=Xt(e,ESe,r.borderTopColor),this.borderRightColor=Xt(e,_Se,r.borderRightColor),this.borderBottomColor=Xt(e,SSe,r.borderBottomColor),this.borderLeftColor=Xt(e,TSe,r.borderLeftColor),this.borderTopLeftRadius=Xt(e,NSe,r.borderTopLeftRadius),this.borderTopRightRadius=Xt(e,BSe,r.borderTopRightRadius),this.borderBottomRightRadius=Xt(e,kSe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Xt(e,ISe,r.borderBottomLeftRadius),this.borderTopStyle=Xt(e,FSe,r.borderTopStyle),this.borderRightStyle=Xt(e,DSe,r.borderRightStyle),this.borderBottomStyle=Xt(e,RSe,r.borderBottomStyle),this.borderLeftStyle=Xt(e,LSe,r.borderLeftStyle),this.borderTopWidth=Xt(e,USe,r.borderTopWidth),this.borderRightWidth=Xt(e,MSe,r.borderRightWidth),this.borderBottomWidth=Xt(e,PSe,r.borderBottomWidth),this.borderLeftWidth=Xt(e,OSe,r.borderLeftWidth),this.boxShadow=Xt(e,F5e,r.boxShadow),this.color=Xt(e,jSe,r.color),this.direction=Xt(e,QSe,r.direction),this.display=Xt(e,HSe,r.display),this.float=Xt(e,zSe,r.cssFloat),this.fontFamily=Xt(e,b5e,r.fontFamily),this.fontSize=Xt(e,C5e,r.fontSize),this.fontStyle=Xt(e,S5e,r.fontStyle),this.fontVariant=Xt(e,_5e,r.fontVariant),this.fontWeight=Xt(e,E5e,r.fontWeight),this.letterSpacing=Xt(e,GSe,r.letterSpacing),this.lineBreak=Xt(e,qSe,r.lineBreak),this.lineHeight=Xt(e,KSe,r.lineHeight),this.listStyleImage=Xt(e,$Se,r.listStyleImage),this.listStylePosition=Xt(e,WSe,r.listStylePosition),this.listStyleType=Xt(e,BT,r.listStyleType),this.marginTop=Xt(e,YSe,r.marginTop),this.marginRight=Xt(e,XSe,r.marginRight),this.marginBottom=Xt(e,JSe,r.marginBottom),this.marginLeft=Xt(e,ZSe,r.marginLeft),this.opacity=Xt(e,v5e,r.opacity);var a=Xt(e,e5e,r.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=Xt(e,t5e,r.overflowWrap),this.paddingTop=Xt(e,r5e,r.paddingTop),this.paddingRight=Xt(e,n5e,r.paddingRight),this.paddingBottom=Xt(e,s5e,r.paddingBottom),this.paddingLeft=Xt(e,a5e,r.paddingLeft),this.paintOrder=Xt(e,D5e,r.paintOrder),this.position=Xt(e,o5e,r.position),this.textAlign=Xt(e,i5e,r.textAlign),this.textDecorationColor=Xt(e,y5e,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Xt(e,w5e,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=Xt(e,l5e,r.textShadow),this.textTransform=Xt(e,c5e,r.textTransform),this.transform=Xt(e,u5e,r.transform),this.transformOrigin=Xt(e,p5e,r.transformOrigin),this.visibility=Xt(e,m5e,r.visibility),this.webkitTextStrokeColor=Xt(e,R5e,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Xt(e,L5e,r.webkitTextStrokeWidth),this.wordBreak=Xt(e,g5e,r.wordBreak),this.zIndex=Xt(e,x5e,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Nf(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Va(this.display,4)||Va(this.display,33554432)||Va(this.display,268435456)||Va(this.display,536870912)||Va(this.display,67108864)||Va(this.display,134217728)},t}(),M5e=function(){function t(e,r){this.content=Xt(e,T5e,r.content),this.quotes=Xt(e,I5e,r.quotes)}return t}(),iU=function(){function t(e,r){this.counterIncrement=Xt(e,N5e,r.counterIncrement),this.counterReset=Xt(e,B5e,r.counterReset)}return t}(),Xt=function(t,e,r){var n=new f9,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var a=new h9(n.read());switch(e.type){case 2:var i=a.parseComponentValue();return e.parse(t,is(i)?i.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return _C.parse(t,a.parseComponentValue());case"color":return Tf.parse(t,a.parseComponentValue());case"image":return NB.parse(t,a.parseComponentValue());case"length":var o=a.parseComponentValue();return qf(o)?o:_i;case"length-percentage":var l=a.parseComponentValue();return Ba(l)?l:_i;case"time":return F9.parse(t,a.parseComponentValue())}break}},P5e="data-html2canvas-debug",O5e=function(t){var e=t.getAttribute(P5e);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},kT=function(t,e){var r=O5e(t);return r===1||e===r},aA=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,kT(r,3))debugger;this.styles=new U5e(e,window.getComputedStyle(r,null)),DT(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=CC(this.context,r),kT(r,4)&&(this.flags|=16)}return t}(),j5e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",oU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ix=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $y=0;$y<oU.length;$y++)ix[oU.charCodeAt($y)]=$y;var Q5e=function(t){var e=t.length*.75,r=t.length,n,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)a=ix[t.charCodeAt(n)],i=ix[t.charCodeAt(n+1)],o=ix[t.charCodeAt(n+2)],l=ix[t.charCodeAt(n+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return c},H5e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},V5e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},qh=5,BB=11,pS=2,z5e=BB-qh,D9=65536>>qh,G5e=1<<qh,mS=G5e-1,q5e=1024>>qh,K5e=D9+q5e,$5e=K5e,W5e=32,Y5e=$5e+W5e,X5e=65536>>BB,J5e=1<<z5e,Z5e=J5e-1,lU=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},eTe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},tTe=function(t,e){var r=Q5e(t),n=Array.isArray(r)?V5e(r):new Uint32Array(r),s=Array.isArray(r)?H5e(r):new Uint16Array(r),a=24,i=lU(s,a/2,n[4]/2),o=n[5]===2?lU(s,(a+n[4])/2):eTe(n,Math.ceil((a+n[4])/4));return new rTe(n[0],n[1],n[2],n[3],i,o)},rTe=function(){function t(e,r,n,s,a,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>qh],r=(r<<pS)+(e&mS),this.data[r];if(e<=65535)return r=this.index[D9+(e-55296>>qh)],r=(r<<pS)+(e&mS),this.data[r];if(e<this.highStart)return r=Y5e-X5e+(e>>BB),r=this.index[r],r+=e>>qh&Z5e,r=this.index[r],r=(r<<pS)+(e&mS),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),cU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nTe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wy=0;Wy<cU.length;Wy++)nTe[cU.charCodeAt(Wy)]=Wy;var sTe=1,gS=2,xS=3,uU=4,AU=5,aTe=7,dU=8,vS=9,yS=10,fU=11,hU=12,pU=13,mU=14,wS=15,iTe=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},oTe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,a="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},lTe=tTe(j5e),Jl="×",bS="÷",cTe=function(t){return lTe.get(t)},uTe=function(t,e,r){var n=r-2,s=e[n],a=e[r-1],i=e[r];if(a===gS&&i===xS)return Jl;if(a===gS||a===xS||a===uU||i===gS||i===xS||i===uU)return bS;if(a===dU&&[dU,vS,fU,hU].indexOf(i)!==-1||(a===fU||a===vS)&&(i===vS||i===yS)||(a===hU||a===yS)&&i===yS||i===pU||i===AU||i===aTe||a===sTe)return Jl;if(a===pU&&i===mU){for(;s===AU;)s=e[--n];if(s===mU)return Jl}if(a===wS&&i===wS){for(var o=0;s===wS;)o++,s=e[--n];if(o%2===0)return Jl}return bS},ATe=function(t){var e=iTe(t),r=e.length,n=0,s=0,a=e.map(cTe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Jl;n<r&&(i=uTe(e,a,++n))===Jl;);if(i!==Jl||n===r){var o=oTe.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},dTe=function(t){for(var e=ATe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},fTe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),a=Math.round(s.height);if(t.body.removeChild(n),a===e)return!0}}return!1},hTe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=EC(n.data).map(function(l){return ca(l)}),a=0,i={},o=s.every(function(l,c){r.setStart(n,a),r.setEnd(n,a+l.length);var d=r.getBoundingClientRect();a+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),o},pTe=function(){return typeof new Image().crossOrigin<"u"},mTe=function(){return typeof new XMLHttpRequest().responseType=="string"},gTe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},gU=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},xTe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,a=e.toDataURL();s.src=a;var i=IT(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),xU(i).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+a+")",c.style.height=r+"px",gU(l)?xU(IT(r,r,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),gU(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},IT=function(t,e,r,n,s){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},xU=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},yi={get SUPPORT_RANGE_BOUNDS(){var t=fTe(document);return Object.defineProperty(yi,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=yi.SUPPORT_RANGE_BOUNDS&&hTe(document);return Object.defineProperty(yi,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=gTe(document);return Object.defineProperty(yi,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?xTe(document):Promise.resolve(!1);return Object.defineProperty(yi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=pTe();return Object.defineProperty(yi,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=mTe();return Object.defineProperty(yi,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(yi,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(yi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Dx=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),vTe=function(t,e,r,n){var s=bTe(e,r),a=[],i=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(yi.SUPPORT_RANGE_BOUNDS){var l=vU(n,i,o.length).getClientRects();if(l.length>1){var c=kB(o),d=0;c.forEach(function(p){a.push(new Dx(p,sd.fromDOMRectList(t,vU(n,d+i,p.length).getClientRects()))),d+=p.length})}else a.push(new Dx(o,sd.fromDOMRectList(t,l)))}else{var h=n.splitText(o.length);a.push(new Dx(o,yTe(t,n))),n=h}else yi.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),a},yTe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var a=CC(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),a}}return sd.EMPTY},vU=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},kB=function(t){if(yi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return dTe(t)},wTe=function(t,e){if(yi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return ETe(t,e)},bTe=function(t,e){return e.letterSpacing!==0?kB(t):wTe(t,e)},CTe=[32,160,4961,65792,65793,4153,4241],ETe=function(t,e){for(var r=XEe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,a=function(){if(s.value){var i=s.value.slice(),o=EC(i),l="";o.forEach(function(c){CTe.indexOf(c)===-1?l+=ca(c):(l.length&&n.push(l),n.push(ca(c)),l="")}),l.length&&n.push(l)}};!(s=r.next()).done;)a();return n},_Te=function(){function t(e,r,n){this.text=STe(r.data,n.textTransform),this.textBounds=vTe(e,this.text,n,r)}return t}(),STe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(TTe,NTe);case 2:return t.toUpperCase();default:return t}},TTe=/(^|\s|:|-|\(|\))([a-z])/g,NTe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},R9=function(t){Xc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(aA),L9=function(t){Xc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(aA),U9=function(t){Xc(e,t);function e(r,n){var s=t.call(this,r,n)||this,a=new XMLSerializer,i=CC(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(aA),M9=function(t){Xc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(aA),FT=function(t){Xc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(aA),BTe=[{type:15,flags:0,unit:"px",number:3}],kTe=[{type:16,flags:0,number:50}],ITe=function(t){return t.width>t.height?new sd(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new sd(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},FTe=function(t){var e=t.type===DTe?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},tb="checkbox",rb="radio",DTe="password",yU=707406591,IB=function(t){Xc(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=FTe(n),(s.type===tb||s.type===rb)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=ITe(s.bounds)),s.type){case tb:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=BTe;break;case rb:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=kTe;break}return s}return e}(aA),P9=function(t){Xc(e,t);function e(r,n){var s=t.call(this,r,n)||this,a=n.options[n.selectedIndex||0];return s.value=a&&a.text||"",s}return e}(aA),O9=function(t){Xc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(aA),j9=function(t){Xc(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=H9(r,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?Ix(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):WA.TRANSPARENT,i=n.contentWindow.document.body?Ix(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):WA.TRANSPARENT;s.backgroundColor=Nf(a)?Nf(i)?s.styles.backgroundColor:i:a}}catch{}return s}return e}(aA),RTe=["OL","UL","MENU"],P2=function(t,e,r,n){for(var s=e.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,V9(s)&&s.data.trim().length>0)r.textNodes.push(new _Te(t,s,r.styles));else if(Dp(s))if(K9(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return P2(t,o,r,n)});else{var i=Q9(t,s);i.styles.isVisible()&&(LTe(s,i,n)?i.flags|=4:UTe(i.styles)&&(i.flags|=2),RTe.indexOf(s.tagName)!==-1&&(i.flags|=8),r.elements.push(i),s.slot,s.shadowRoot?P2(t,s.shadowRoot,i,n):!nb(s)&&!z9(s)&&!sb(s)&&P2(t,s,i,n))}},Q9=function(t,e){return RT(e)?new R9(t,e):G9(e)?new L9(t,e):z9(e)?new U9(t,e):MTe(e)?new M9(t,e):PTe(e)?new FT(t,e):OTe(e)?new IB(t,e):sb(e)?new P9(t,e):nb(e)?new O9(t,e):q9(e)?new j9(t,e):new aA(t,e)},H9=function(t,e){var r=Q9(t,e);return r.flags|=4,P2(t,e,r,r),r},LTe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||FB(t)&&r.styles.isTransparent()},UTe=function(t){return t.isPositioned()||t.isFloating()},V9=function(t){return t.nodeType===Node.TEXT_NODE},Dp=function(t){return t.nodeType===Node.ELEMENT_NODE},DT=function(t){return Dp(t)&&typeof t.style<"u"&&!O2(t)},O2=function(t){return typeof t.className=="object"},MTe=function(t){return t.tagName==="LI"},PTe=function(t){return t.tagName==="OL"},OTe=function(t){return t.tagName==="INPUT"},jTe=function(t){return t.tagName==="HTML"},z9=function(t){return t.tagName==="svg"},FB=function(t){return t.tagName==="BODY"},G9=function(t){return t.tagName==="CANVAS"},wU=function(t){return t.tagName==="VIDEO"},RT=function(t){return t.tagName==="IMG"},q9=function(t){return t.tagName==="IFRAME"},bU=function(t){return t.tagName==="STYLE"},QTe=function(t){return t.tagName==="SCRIPT"},nb=function(t){return t.tagName==="TEXTAREA"},sb=function(t){return t.tagName==="SELECT"},K9=function(t){return t.tagName==="SLOT"},CU=function(t){return t.tagName.indexOf("-")>0},HTe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,a=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return a&&s.forEach(function(o){var l=r.counters[o.counter];i.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),EU={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},_U={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},VTe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},zTe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},up=function(t,e,r,n,s,a){return t<e||t>r?f1(t,s,a.length>0):n.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=n.values[l];return i},"")+a},$9=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},oa=function(t,e,r,n,s){var a=r-e+1;return(t<0?"-":"")+($9(Math.abs(t),a,n,function(i){return ca(Math.floor(i%a)+e)})+s)},Ch=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return $9(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},Tp=1,Zd=2,ef=4,ox=8,PA=function(t,e,r,n,s,a){if(t<-9999||t>9999)return f1(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var c=i%10;c===0&&Va(a,Tp)&&o!==""?o=e[c]+o:c>1||c===1&&l===0||c===1&&l===1&&Va(a,Zd)||c===1&&l===1&&Va(a,ef)&&t>100||c===1&&l>1&&Va(a,ox)?o=e[c]+(l>0?r[l-1]:"")+o:c===1&&l>0&&(o=r[l-1]+o),i=Math.floor(i/10)}return(t<0?n:"")+o},SU="十百千萬",TU="拾佰仟萬",NU="マイナス",CS="마이너스",f1=function(t,e,r){var n=r?". ":"",s=r?"、":"",a=r?", ":"",i=r?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=oa(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Ch(t,"〇一二三四五六七八九",s);case 6:return up(t,1,3999,EU,3,n).toLowerCase();case 7:return up(t,1,3999,EU,3,n);case 8:return oa(t,945,969,!1,n);case 9:return oa(t,97,122,!1,n);case 10:return oa(t,65,90,!1,n);case 11:return oa(t,1632,1641,!0,n);case 12:case 49:return up(t,1,9999,_U,3,n);case 35:return up(t,1,9999,_U,3,n).toLowerCase();case 13:return oa(t,2534,2543,!0,n);case 14:case 30:return oa(t,6112,6121,!0,n);case 15:return Ch(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return Ch(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return PA(t,"零一二三四五六七八九",SU,"負",s,Zd|ef|ox);case 47:return PA(t,"零壹貳參肆伍陸柒捌玖",TU,"負",s,Tp|Zd|ef|ox);case 42:return PA(t,"零一二三四五六七八九",SU,"负",s,Zd|ef|ox);case 41:return PA(t,"零壹贰叁肆伍陆柒捌玖",TU,"负",s,Tp|Zd|ef|ox);case 26:return PA(t,"〇一二三四五六七八九","十百千万",NU,s,0);case 25:return PA(t,"零壱弐参四伍六七八九","拾百千万",NU,s,Tp|Zd|ef);case 31:return PA(t,"영일이삼사오육칠팔구","십백천만",CS,a,Tp|Zd|ef);case 33:return PA(t,"零一二三四五六七八九","十百千萬",CS,a,0);case 32:return PA(t,"零壹貳參四五六七八九","拾百千",CS,a,Tp|Zd|ef);case 18:return oa(t,2406,2415,!0,n);case 20:return up(t,1,19999,zTe,3,n);case 21:return oa(t,2790,2799,!0,n);case 22:return oa(t,2662,2671,!0,n);case 22:return up(t,1,10999,VTe,3,n);case 23:return Ch(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Ch(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return oa(t,3302,3311,!0,n);case 28:return Ch(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return Ch(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return oa(t,3792,3801,!0,n);case 37:return oa(t,6160,6169,!0,n);case 38:return oa(t,4160,4169,!0,n);case 39:return oa(t,2918,2927,!0,n);case 40:return oa(t,1776,1785,!0,n);case 43:return oa(t,3046,3055,!0,n);case 44:return oa(t,3174,3183,!0,n);case 45:return oa(t,3664,3673,!0,n);case 46:return oa(t,3872,3881,!0,n);case 3:default:return oa(t,48,57,!0,n)}},W9="data-html2canvas-ignore",BU=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new HTe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=GTe(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,c=$Te(s).then(function(){return fo(n,void 0,void 0,function(){var d,h;return qi(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(JTe),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,KTe(l)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(YTe(document.doctype)+"<html></html>"),XTe(this.referenceElement.ownerDocument,a,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},t.prototype.createElementClone=function(e){if(kT(e,2))debugger;if(G9(e))return this.createCanvasClone(e);if(wU(e))return this.createVideoClone(e);if(bU(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return RT(r)&&(RT(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),CU(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return ES(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(a,i){return i&&typeof i.cssText=="string"?a+i.cssText:a},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var a=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&a)i.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!Dp(r)||!QTe(r)&&!r.hasAttribute(W9)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Dp(r)||!bU(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(Dp(a)&&K9(a)&&typeof a.assignedNodes=="function"){var i=a.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,a,n)},t.prototype.cloneNode=function(e,r){if(V9(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Dp(e)&&(DT(e)||O2(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var a=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&DT(s)&&(this.clonedReferenceElement=s),FB(s)&&tNe(s);var l=this.counters.parse(new iU(this.context,a)),c=this.resolvePseudoContent(e,s,i,Rx.BEFORE);CU(e)&&(r=!0),wU(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,o,Rx.AFTER);return d&&s.appendChild(d),this.counters.pop(l),(a&&(this.options.copyStyles||O2(e))&&!q9(e)||r)&&ES(a,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(nb(e)||sb(e))&&(nb(s)||sb(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var a=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new iU(this.context,n));var l=new M5e(this.context,n),c=o.createElement("html2canvaspseudoelement");ES(n,c),l.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var p=o.createElement("img");p.src=h.value,p.style.opacity="1",c.appendChild(p)}else if(h.type===18){if(h.name==="attr"){var m=h.values.filter(is);m.length&&c.appendChild(o.createTextNode(e.getAttribute(m[0].value)||""))}else if(h.name==="counter"){var y=h.values.filter(xm),x=y[0],E=y[1];if(x&&is(x)){var S=a.counters.getCounterValue(x.value),B=E&&is(E)?BT.parse(a.context,E.value):3;c.appendChild(o.createTextNode(f1(S,B,!1)))}}else if(h.name==="counters"){var D=h.values.filter(xm),x=D[0],I=D[1],E=D[2];if(x&&is(x)){var U=a.counters.getCounterValues(x.value),F=E&&is(E)?BT.parse(a.context,E.value):3,C=I&&I.type===0?I.value:"",_=U.map(function(R){return f1(R,F,!1)}).join(C);c.appendChild(o.createTextNode(_))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(aU(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(aU(l.quotes,--a.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=LT+" "+UT;var d=s===Rx.BEFORE?" "+LT:" "+UT;return O2(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Rx;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Rx||(Rx={}));var GTe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(W9,"true"),t.body.appendChild(r),r},qTe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},KTe=function(t){return Promise.all([].slice.call(t.images,0).map(qTe))},$Te=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var a=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(a),e(t))},50)}})},WTe=["all","d","content"],ES=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);WTe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},YTe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},XTe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},JTe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},ZTe=":before",eNe=":after",LT="___html2canvas___pseudoelement_before",UT="___html2canvas___pseudoelement_after",kU=`{
    content: "" !important;
    display: none !important;
}`,tNe=function(t){rNe(t,"."+LT+ZTe+kU+`
         .`+UT+eNe+kU)},rNe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},Y9=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),nNe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(SS(e)||oNe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return fo(this,void 0,void 0,function(){var r,n,s,a,i=this;return qi(this,function(o){switch(o.label){case 0:return r=Y9.isSameOrigin(e),n=!_S(e)&&this._options.useCORS===!0&&yi.SUPPORT_CORS_IMAGES&&!r,s=!_S(e)&&!r&&!SS(e)&&typeof this._options.proxy=="string"&&yi.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!_S(e)&&!SS(e)&&!s&&!n?[2]:(a=e,s?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var d=new Image;d.onload=function(){return l(d)},d.onerror=c,(lNe(a)||n)&&(d.crossOrigin="anonymous"),d.src=a,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(a,i){var o=yi.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return a(h.result)},!1),h.addEventListener("error",function(p){return i(p)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}l.send()})},t}(),sNe=/^data:image\/svg\+xml/i,aNe=/^data:image\/.*;base64,/i,iNe=/^data:image\/.*/i,oNe=function(t){return yi.SUPPORT_SVG_DRAWING||!cNe(t)},_S=function(t){return iNe.test(t)},lNe=function(t){return aNe.test(t)},SS=function(t){return t.substr(0,4)==="blob"},cNe=function(t){return t.substr(-3).toLowerCase()==="svg"||sNe.test(t)},Wt=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Ap=function(t,e,r){return new Wt(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},Yy=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Ap(this.start,this.startControl,e),s=Ap(this.startControl,this.endControl,e),a=Ap(this.endControl,this.end,e),i=Ap(n,s,e),o=Ap(s,a,e),l=Ap(i,o,e);return r?new t(this.start,n,i,l):new t(l,o,a,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),ec=function(t){return t.type===1},uNe=function(){function t(e){var r=e.styles,n=e.bounds,s=ax(r.borderTopLeftRadius,n.width,n.height),a=s[0],i=s[1],o=ax(r.borderTopRightRadius,n.width,n.height),l=o[0],c=o[1],d=ax(r.borderBottomRightRadius,n.width,n.height),h=d[0],p=d[1],m=ax(r.borderBottomLeftRadius,n.width,n.height),y=m[0],x=m[1],E=[];E.push((a+l)/n.width),E.push((y+h)/n.width),E.push((i+x)/n.height),E.push((c+p)/n.height);var S=Math.max.apply(Math,E);S>1&&(a/=S,i/=S,l/=S,c/=S,h/=S,p/=S,y/=S,x/=S);var B=n.width-l,D=n.height-p,I=n.width-h,U=n.height-x,F=r.borderTopWidth,C=r.borderRightWidth,_=r.borderBottomWidth,N=r.borderLeftWidth,j=hs(r.paddingTop,e.bounds.width),R=hs(r.paddingRight,e.bounds.width),L=hs(r.paddingBottom,e.bounds.width),Q=hs(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||i>0?Ts(n.left+N/3,n.top+F/3,a-N/3,i-F/3,jn.TOP_LEFT):new Wt(n.left+N/3,n.top+F/3),this.topRightBorderDoubleOuterBox=a>0||i>0?Ts(n.left+B,n.top+F/3,l-C/3,c-F/3,jn.TOP_RIGHT):new Wt(n.left+n.width-C/3,n.top+F/3),this.bottomRightBorderDoubleOuterBox=h>0||p>0?Ts(n.left+I,n.top+D,h-C/3,p-_/3,jn.BOTTOM_RIGHT):new Wt(n.left+n.width-C/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=y>0||x>0?Ts(n.left+N/3,n.top+U,y-N/3,x-_/3,jn.BOTTOM_LEFT):new Wt(n.left+N/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=a>0||i>0?Ts(n.left+N*2/3,n.top+F*2/3,a-N*2/3,i-F*2/3,jn.TOP_LEFT):new Wt(n.left+N*2/3,n.top+F*2/3),this.topRightBorderDoubleInnerBox=a>0||i>0?Ts(n.left+B,n.top+F*2/3,l-C*2/3,c-F*2/3,jn.TOP_RIGHT):new Wt(n.left+n.width-C*2/3,n.top+F*2/3),this.bottomRightBorderDoubleInnerBox=h>0||p>0?Ts(n.left+I,n.top+D,h-C*2/3,p-_*2/3,jn.BOTTOM_RIGHT):new Wt(n.left+n.width-C*2/3,n.top+n.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||x>0?Ts(n.left+N*2/3,n.top+U,y-N*2/3,x-_*2/3,jn.BOTTOM_LEFT):new Wt(n.left+N*2/3,n.top+n.height-_*2/3),this.topLeftBorderStroke=a>0||i>0?Ts(n.left+N/2,n.top+F/2,a-N/2,i-F/2,jn.TOP_LEFT):new Wt(n.left+N/2,n.top+F/2),this.topRightBorderStroke=a>0||i>0?Ts(n.left+B,n.top+F/2,l-C/2,c-F/2,jn.TOP_RIGHT):new Wt(n.left+n.width-C/2,n.top+F/2),this.bottomRightBorderStroke=h>0||p>0?Ts(n.left+I,n.top+D,h-C/2,p-_/2,jn.BOTTOM_RIGHT):new Wt(n.left+n.width-C/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=y>0||x>0?Ts(n.left+N/2,n.top+U,y-N/2,x-_/2,jn.BOTTOM_LEFT):new Wt(n.left+N/2,n.top+n.height-_/2),this.topLeftBorderBox=a>0||i>0?Ts(n.left,n.top,a,i,jn.TOP_LEFT):new Wt(n.left,n.top),this.topRightBorderBox=l>0||c>0?Ts(n.left+B,n.top,l,c,jn.TOP_RIGHT):new Wt(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||p>0?Ts(n.left+I,n.top+D,h,p,jn.BOTTOM_RIGHT):new Wt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=y>0||x>0?Ts(n.left,n.top+U,y,x,jn.BOTTOM_LEFT):new Wt(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||i>0?Ts(n.left+N,n.top+F,Math.max(0,a-N),Math.max(0,i-F),jn.TOP_LEFT):new Wt(n.left+N,n.top+F),this.topRightPaddingBox=l>0||c>0?Ts(n.left+Math.min(B,n.width-C),n.top+F,B>n.width+C?0:Math.max(0,l-C),Math.max(0,c-F),jn.TOP_RIGHT):new Wt(n.left+n.width-C,n.top+F),this.bottomRightPaddingBox=h>0||p>0?Ts(n.left+Math.min(I,n.width-N),n.top+Math.min(D,n.height-_),Math.max(0,h-C),Math.max(0,p-_),jn.BOTTOM_RIGHT):new Wt(n.left+n.width-C,n.top+n.height-_),this.bottomLeftPaddingBox=y>0||x>0?Ts(n.left+N,n.top+Math.min(U,n.height-_),Math.max(0,y-N),Math.max(0,x-_),jn.BOTTOM_LEFT):new Wt(n.left+N,n.top+n.height-_),this.topLeftContentBox=a>0||i>0?Ts(n.left+N+Q,n.top+F+j,Math.max(0,a-(N+Q)),Math.max(0,i-(F+j)),jn.TOP_LEFT):new Wt(n.left+N+Q,n.top+F+j),this.topRightContentBox=l>0||c>0?Ts(n.left+Math.min(B,n.width+N+Q),n.top+F+j,B>n.width+N+Q?0:l-N+Q,c-(F+j),jn.TOP_RIGHT):new Wt(n.left+n.width-(C+R),n.top+F+j),this.bottomRightContentBox=h>0||p>0?Ts(n.left+Math.min(I,n.width-(N+Q)),n.top+Math.min(D,n.height+F+j),Math.max(0,h-(C+R)),p-(_+L),jn.BOTTOM_RIGHT):new Wt(n.left+n.width-(C+R),n.top+n.height-(_+L)),this.bottomLeftContentBox=y>0||x>0?Ts(n.left+N+Q,n.top+U,Math.max(0,y-(N+Q)),x-(_+L),jn.BOTTOM_LEFT):new Wt(n.left+N+Q,n.top+n.height-(_+L))}return t}(),jn;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(jn||(jn={}));var Ts=function(t,e,r,n,s){var a=4*((Math.sqrt(2)-1)/3),i=r*a,o=n*a,l=t+r,c=e+n;switch(s){case jn.TOP_LEFT:return new Yy(new Wt(t,c),new Wt(t,c-o),new Wt(l-i,e),new Wt(l,e));case jn.TOP_RIGHT:return new Yy(new Wt(t,e),new Wt(t+i,e),new Wt(l,c-o),new Wt(l,c));case jn.BOTTOM_RIGHT:return new Yy(new Wt(l,e),new Wt(l,e+o),new Wt(t+i,c),new Wt(t,c));case jn.BOTTOM_LEFT:default:return new Yy(new Wt(l,c),new Wt(l-i,c),new Wt(t,e+o),new Wt(t,e))}},ab=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},ANe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},ib=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},dNe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),Xy=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),fNe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),hNe=function(t){return t.type===0},X9=function(t){return t.type===1},pNe=function(t){return t.type===2},IU=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},mNe=function(t,e,r,n,s){return t.map(function(a,i){switch(i){case 0:return a.add(e,r);case 1:return a.add(e+n,r);case 2:return a.add(e+n,r+s);case 3:return a.add(e,r+s)}return a})},J9=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),Z9=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new uNe(this.container),this.container.styles.opacity<1&&this.effects.push(new fNe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new dNe(n,s,a))}if(this.container.styles.overflowX!==0){var i=ab(this.curves),o=ib(this.curves);IU(i,o)?this.effects.push(new Xy(i,6)):(this.effects.push(new Xy(i,2)),this.effects.push(new Xy(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var a=n.effects.filter(function(l){return!X9(l)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,a),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=ab(n.curves),o=ib(n.curves);IU(i,o)||s.unshift(new Xy(o,6))}}else s.unshift.apply(s,a);n=n.parent}return s.filter(function(l){return Va(l.target,e)})},t}(),MT=function(t,e,r,n){t.container.elements.forEach(function(s){var a=Va(s.flags,4),i=Va(s.flags,2),o=new Z9(s,t);Va(s.styles.display,2048)&&n.push(o);var l=Va(s.flags,8)?[]:n;if(a||i){var c=a||s.styles.isPositioned()?r:e,d=new J9(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var p=0;c.negativeZIndex.some(function(y,x){return h>y.element.container.styles.zIndex.order?(p=x,!1):p>0}),c.negativeZIndex.splice(p,0,d)}else if(h>0){var m=0;c.positiveZIndex.some(function(y,x){return h>=y.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),c.positiveZIndex.splice(m,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);MT(o,d,a?d:r,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),MT(o,e,r,l);Va(s.flags,8)&&eV(s,l)})},eV=function(t,e){for(var r=t instanceof FT?t.start:1,n=t instanceof FT?t.reversed:!1,s=0;s<e.length;s++){var a=e[s];a.container instanceof M9&&typeof a.container.value=="number"&&a.container.value!==0&&(r=a.container.value),a.listValue=f1(r,a.container.styles.listStyleType,!0),r+=n?-1:1}},gNe=function(t){var e=new Z9(t,null),r=new J9(e),n=[];return MT(e,r,r,n),eV(e.container,n),r},FU=function(t,e){switch(e){case 0:return ic(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return ic(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return ic(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return ic(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},xNe=function(t,e){switch(e){case 0:return ic(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return ic(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return ic(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return ic(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},vNe=function(t,e){switch(e){case 0:return ic(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return ic(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return ic(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return ic(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},yNe=function(t,e){switch(e){case 0:return Jy(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Jy(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Jy(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Jy(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Jy=function(t,e){var r=[];return ec(t)?r.push(t.subdivide(.5,!1)):r.push(t),ec(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},ic=function(t,e,r,n){var s=[];return ec(t)?s.push(t.subdivide(.5,!1)):s.push(t),ec(r)?s.push(r.subdivide(.5,!0)):s.push(r),ec(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),ec(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},tV=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},ob=function(t){var e=t.styles,r=t.bounds,n=hs(e.paddingLeft,r.width),s=hs(e.paddingRight,r.width),a=hs(e.paddingTop,r.width),i=hs(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+a+i))},wNe=function(t,e){return t===0?e.bounds:t===2?ob(e):tV(e)},bNe=function(t,e){return t===0?e.bounds:t===2?ob(e):tV(e)},TS=function(t,e,r){var n=wNe(Np(t.styles.backgroundOrigin,e),t),s=bNe(Np(t.styles.backgroundClip,e),t),a=CNe(Np(t.styles.backgroundSize,e),r,n),i=a[0],o=a[1],l=ax(Np(t.styles.backgroundPosition,e),n.width-i,n.height-o),c=ENe(Np(t.styles.backgroundRepeat,e),l,a,n,s),d=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[c,d,h,i,o]},dp=function(t){return is(t)&&t.value===Zp.AUTO},Zy=function(t){return typeof t=="number"},CNe=function(t,e,r){var n=e[0],s=e[1],a=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(Ba(i)&&o&&Ba(o))return[hs(i,r.width),hs(o,r.height)];var l=Zy(a);if(is(i)&&(i.value===Zp.CONTAIN||i.value===Zp.COVER)){if(Zy(a)){var c=r.width/r.height;return c<a!=(i.value===Zp.COVER)?[r.width,r.width/a]:[r.height*a,r.height]}return[r.width,r.height]}var d=Zy(n),h=Zy(s),p=d||h;if(dp(i)&&(!o||dp(o))){if(d&&h)return[n,s];if(!l&&!p)return[r.width,r.height];if(p&&l){var m=d?n:s*a,y=h?s:n/a;return[m,y]}var x=d?n:r.width,E=h?s:r.height;return[x,E]}if(l){var S=0,B=0;return Ba(i)?S=hs(i,r.width):Ba(o)&&(B=hs(o,r.height)),dp(i)?S=B*a:(!o||dp(o))&&(B=S/a),[S,B]}var D=null,I=null;if(Ba(i)?D=hs(i,r.width):o&&Ba(o)&&(I=hs(o,r.height)),D!==null&&(!o||dp(o))&&(I=d&&h?D/n*s:r.height),I!==null&&dp(i)&&(D=d&&h?I/s*n:r.width),D!==null&&I!==null)return[D,I];throw new Error("Unable to calculate background-size for element")},Np=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},ENe=function(t,e,r,n,s){var a=e[0],i=e[1],o=r[0],l=r[1];switch(t){case 2:return[new Wt(Math.round(n.left),Math.round(n.top+i)),new Wt(Math.round(n.left+n.width),Math.round(n.top+i)),new Wt(Math.round(n.left+n.width),Math.round(l+n.top+i)),new Wt(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new Wt(Math.round(n.left+a),Math.round(n.top)),new Wt(Math.round(n.left+a+o),Math.round(n.top)),new Wt(Math.round(n.left+a+o),Math.round(n.height+n.top)),new Wt(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new Wt(Math.round(n.left+a),Math.round(n.top+i)),new Wt(Math.round(n.left+a+o),Math.round(n.top+i)),new Wt(Math.round(n.left+a+o),Math.round(n.top+i+l)),new Wt(Math.round(n.left+a),Math.round(n.top+i+l))];default:return[new Wt(Math.round(s.left),Math.round(s.top)),new Wt(Math.round(s.left+s.width),Math.round(s.top)),new Wt(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Wt(Math.round(s.left),Math.round(s.height+s.top))]}},_Ne="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",DU="Hidden Text",SNe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),a=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),s.src=_Ne,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(DU)),n.appendChild(a),n.appendChild(s);var o=s.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(DU)),n.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),rV=function(){function t(e,r){this.context=e,this.options=r}return t}(),TNe=1e4,NNe=function(t){Xc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new SNe(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),pNe(r)&&(this.ctx.globalAlpha=r.opacity),hNe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),X9(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return fo(this,void 0,void 0,function(){var n;return qi(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return fo(this,void 0,void 0,function(){return qi(this,function(n){switch(n.label){case 0:if(Va(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var a=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var i=kB(r.text);i.reduce(function(o,l){return a.ctx.fillText(l,o,r.bounds.top+s),o+a.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=DNe(r.fontFamily).join(", "),a=tv(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,a,s].join(" "),s,a]},e.prototype.renderTextNode=function(r,n){return fo(this,void 0,void 0,function(){var s,a,i,o,l,c,d,h,p=this;return qi(this,function(m){return s=this.createFontStyle(n),a=s[0],i=s[1],o=s[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),c=l.baseline,d=l.middle,h=n.paintOrder,r.textBounds.forEach(function(y){h.forEach(function(x){switch(x){case 0:p.ctx.fillStyle=ti(n.color),p.renderTextWithLetterSpacing(y,n.letterSpacing,c);var E=n.textShadow;E.length&&y.text.trim().length&&(E.slice(0).reverse().forEach(function(S){p.ctx.shadowColor=ti(S.color),p.ctx.shadowOffsetX=S.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=S.offsetY.number*p.options.scale,p.ctx.shadowBlur=S.blur.number,p.renderTextWithLetterSpacing(y,n.letterSpacing,c)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),n.textDecorationLine.length&&(p.ctx.fillStyle=ti(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(S){switch(S){case 1:p.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+c),y.bounds.width,1);break;case 2:p.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:p.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+d),y.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&y.text.trim().length&&(p.ctx.strokeStyle=ti(n.webkitTextStrokeColor),p.ctx.lineWidth=n.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+c)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var a=ob(r),i=ib(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return fo(this,void 0,void 0,function(){var n,s,a,i,o,l,B,B,c,d,h,p,I,m,y,U,x,E,S,B,D,I,U;return qi(this,function(F){switch(F.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,a=n.styles,i=0,o=n.textNodes,F.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,a)]):[3,4];case 2:F.sent(),F.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof R9))return[3,8];F.label=5;case 5:return F.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return B=F.sent(),this.renderReplacedElement(n,s,B),[3,8];case 7:return F.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof L9&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof U9))return[3,12];F.label=9;case 9:return F.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return B=F.sent(),this.renderReplacedElement(n,s,B),[3,12];case 11:return F.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof j9&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=F.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),F.label=14;case 14:if(n instanceof IB&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===tb?n.checked&&(this.ctx.save(),this.path([new Wt(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Wt(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Wt(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Wt(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Wt(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Wt(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Wt(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=ti(yU),this.ctx.fill(),this.ctx.restore()):n.type===rb&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=ti(yU),this.ctx.fill(),this.ctx.restore())),BNe(n)&&n.value.length){switch(p=this.createFontStyle(a),I=p[0],m=p[1],y=this.fontMetrics.getMetrics(I,m).baseline,this.ctx.font=I,this.ctx.fillStyle=ti(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=INe(n.styles.textAlign),U=ob(n),x=0,n.styles.textAlign){case 1:x+=U.width/2;break;case 2:x+=U.width;break}E=U.add(x,0,0,-U.height/2+1),this.ctx.save(),this.path([new Wt(U.left,U.top),new Wt(U.left+U.width,U.top),new Wt(U.left+U.width,U.top+U.height),new Wt(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Dx(n.value,E),a.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Va(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(S=n.styles.listStyleImage,S.type!==0)return[3,18];B=void 0,D=S.url,F.label=15;case 15:return F.trys.push([15,17,,18]),[4,this.context.cache.match(D)];case 16:return B=F.sent(),this.ctx.drawImage(B,n.bounds.left-(B.width+10),n.bounds.top),[3,18];case 17:return F.sent(),this.context.logger.error("Error loading list-style-image "+D),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(I=this.createFontStyle(a)[0],this.ctx.font=I,this.ctx.fillStyle=ti(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new sd(n.bounds.left,n.bounds.top+hs(n.styles.paddingTop,n.bounds.width),n.bounds.width,nU(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Dx(r.listValue,U),a.letterSpacing,nU(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),F.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return fo(this,void 0,void 0,function(){var n,s,S,a,i,S,o,l,S,c,d,S,h,p,S,m,y,S,x,E,S;return qi(this,function(B){switch(B.label){case 0:if(Va(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:B.sent(),n=0,s=r.negativeZIndex,B.label=2;case 2:return n<s.length?(S=s[n],[4,this.renderStack(S)]):[3,5];case 3:B.sent(),B.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:B.sent(),a=0,i=r.nonInlineLevel,B.label=7;case 7:return a<i.length?(S=i[a],[4,this.renderNode(S)]):[3,10];case 8:B.sent(),B.label=9;case 9:return a++,[3,7];case 10:o=0,l=r.nonPositionedFloats,B.label=11;case 11:return o<l.length?(S=l[o],[4,this.renderStack(S)]):[3,14];case 12:B.sent(),B.label=13;case 13:return o++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,B.label=15;case 15:return c<d.length?(S=d[c],[4,this.renderStack(S)]):[3,18];case 16:B.sent(),B.label=17;case 17:return c++,[3,15];case 18:h=0,p=r.inlineLevel,B.label=19;case 19:return h<p.length?(S=p[h],[4,this.renderNode(S)]):[3,22];case 20:B.sent(),B.label=21;case 21:return h++,[3,19];case 22:m=0,y=r.zeroOrAutoZIndexOrTransformedOrOpacity,B.label=23;case 23:return m<y.length?(S=y[m],[4,this.renderStack(S)]):[3,26];case 24:B.sent(),B.label=25;case 25:return m++,[3,23];case 26:x=0,E=r.positiveZIndex,B.label=27;case 27:return x<E.length?(S=E[x],[4,this.renderStack(S)]):[3,30];case 28:B.sent(),B.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,a){var i=ec(s)?s.start:s;a===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),ec(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,a){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},e.prototype.resizeImage=function(r,n,s){var a;if(r.width===n&&r.height===s)return r;var i=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return fo(this,void 0,void 0,function(){var n,s,a,i,o,l;return qi(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var h,p,m,j,Y,re,Q,H,_,y,j,Y,re,Q,H,x,E,S,B,D,I,U,F,C,_,N,j,R,L,Q,H,te,Y,re,V,J,K,ae,O,W,Z,ne;return qi(this,function(le){switch(le.label){case 0:if(d.type!==0)return[3,5];h=void 0,p=d.url,le.label=1;case 1:return le.trys.push([1,3,,4]),[4,a.context.cache.match(p)];case 2:return h=le.sent(),[3,4];case 3:return le.sent(),a.context.logger.error("Error loading background-image "+p),[3,4];case 4:return h&&(m=TS(r,n,[h.width,h.height,h.width/h.height]),j=m[0],Y=m[1],re=m[2],Q=m[3],H=m[4],_=a.ctx.createPattern(a.resizeImage(h,Q,H),"repeat"),a.renderRepeat(j,_,Y,re)),[3,6];case 5:hSe(d)?(y=TS(r,n,[null,null,null]),j=y[0],Y=y[1],re=y[2],Q=y[3],H=y[4],x=cSe(d.angle,Q,H),E=x[0],S=x[1],B=x[2],D=x[3],I=x[4],U=document.createElement("canvas"),U.width=Q,U.height=H,F=U.getContext("2d"),C=F.createLinearGradient(S,D,B,I),tU(d.stops,E).forEach(function(ve){return C.addColorStop(ve.stop,ti(ve.color))}),F.fillStyle=C,F.fillRect(0,0,Q,H),Q>0&&H>0&&(_=a.ctx.createPattern(U,"repeat"),a.renderRepeat(j,_,Y,re))):pSe(d)&&(N=TS(r,n,[null,null,null]),j=N[0],R=N[1],L=N[2],Q=N[3],H=N[4],te=d.position.length===0?[TB]:d.position,Y=hs(te[0],Q),re=hs(te[te.length-1],H),V=uSe(d,Y,re,Q,H),J=V[0],K=V[1],J>0&&K>0&&(ae=a.ctx.createRadialGradient(R+Y,L+re,0,R+Y,L+re,J),tU(d.stops,J*2).forEach(function(ve){return ae.addColorStop(ve.stop,ti(ve.color))}),a.path(j),a.ctx.fillStyle=ae,J!==K?(O=r.bounds.left+.5*r.bounds.width,W=r.bounds.top+.5*r.bounds.height,Z=K/J,ne=1/Z,a.ctx.save(),a.ctx.translate(O,W),a.ctx.transform(1,0,0,Z,0,0),a.ctx.translate(-O,-W),a.ctx.fillRect(R,ne*(L-W)+W,Q,H*ne),a.ctx.restore()):a.ctx.fill())),le.label=6;case 6:return n--,[2]}})},a=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(l=o[i],[5,s(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return fo(this,void 0,void 0,function(){return qi(this,function(a){return this.path(FU(s,n)),this.ctx.fillStyle=ti(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,a){return fo(this,void 0,void 0,function(){var i,o;return qi(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,a)]:[3,2];case 1:return l.sent(),[2];case 2:return i=xNe(a,s),this.path(i),this.ctx.fillStyle=ti(r),this.ctx.fill(),o=vNe(a,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return fo(this,void 0,void 0,function(){var n,s,a,i,o,l,c,d,h=this;return qi(this,function(p){switch(p.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!Nf(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=kNe(Np(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Nf(n.backgroundColor)||(this.ctx.fillStyle=ti(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){h.ctx.save();var y=ab(r.curves),x=m.inset?0:TNe,E=mNe(y,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(h.path(y),h.ctx.clip(),h.mask(E)):(h.mask(y),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=m.offsetX.number+x,h.ctx.shadowOffsetY=m.offsetY.number,h.ctx.shadowColor=ti(m.color),h.ctx.shadowBlur=m.blur.number,h.ctx.fillStyle=m.inset?ti(m.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),p.label=2;case 2:o=0,l=0,c=a,p.label=3;case 3:return l<c.length?(d=c[l],d.style!==0&&!Nf(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return p.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:p.sent(),p.label=11;case 11:o++,p.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,a,i){return fo(this,void 0,void 0,function(){var o,l,c,d,h,p,m,y,x,E,S,B,D,I,U,F,U,F;return qi(this,function(C){return this.ctx.save(),o=yNe(a,s),l=FU(a,s),i===2&&(this.path(l),this.ctx.clip()),ec(l[0])?(c=l[0].start.x,d=l[0].start.y):(c=l[0].x,d=l[0].y),ec(l[1])?(h=l[1].end.x,p=l[1].end.y):(h=l[1].x,p=l[1].y),s===0||s===2?m=Math.abs(c-h):m=Math.abs(d-p),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),y=n<3?n*3:n*2,x=n<3?n*2:n,i===3&&(y=n,x=n),E=!0,m<=y*2?E=!1:m<=y*2+x?(S=m/(2*y+x),y*=S,x*=S):(B=Math.floor((m+x)/(y+x)),D=(m-B*y)/(B-1),I=(m-(B+1)*y)/B,x=I<=0||Math.abs(x-D)<Math.abs(x-I)?D:I),E&&(i===3?this.ctx.setLineDash([0,y+x]):this.ctx.setLineDash([y,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=ti(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(ec(l[0])&&(U=l[3],F=l[0],this.ctx.beginPath(),this.formatPath([new Wt(U.end.x,U.end.y),new Wt(F.start.x,F.start.y)]),this.ctx.stroke()),ec(l[1])&&(U=l[1],F=l[2],this.ctx.beginPath(),this.formatPath([new Wt(U.end.x,U.end.y),new Wt(F.start.x,F.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return fo(this,void 0,void 0,function(){var n;return qi(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ti(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=gNe(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(rV),BNe=function(t){return t instanceof O9||t instanceof P9?!0:t instanceof IB&&t.type!==rb&&t.type!==tb},kNe=function(t,e){switch(t){case 0:return ab(e);case 2:return ANe(e);case 1:default:return ib(e)}},INe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},FNe=["-apple-system","system-ui"],DNe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return FNe.indexOf(e)===-1}):t},RNe=function(t){Xc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return fo(this,void 0,void 0,function(){var n,s;return qi(this,function(a){switch(a.label){case 0:return n=IT(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,LNe(n)];case 1:return s=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ti(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(rV),LNe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},UNe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Iy([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Iy([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Iy([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Iy([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),MNe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new UNe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new nNe(this,e)}return t.instanceCount=1,t}(),nV=function(t,e){return e===void 0&&(e={}),PNe(t,e)};typeof window<"u"&&Y9.setContext(window);var PNe=function(t,e){return fo(void 0,void 0,void 0,function(){var r,n,s,a,i,o,l,c,d,h,p,m,y,x,E,S,B,D,I,U,C,F,C,_,N,j,R,L,Q,H,te,Y,re,V,J,K,ae,O,W,Z;return qi(this,function(ne){switch(ne.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(_=e.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(N=e.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:e.proxy,useCORS:(j=e.useCORS)!==null&&j!==void 0?j:!1},a=mT({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},s),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:n.innerWidth,windowHeight:(Q=e.windowHeight)!==null&&Q!==void 0?Q:n.innerHeight,scrollX:(H=e.scrollX)!==null&&H!==void 0?H:n.pageXOffset,scrollY:(te=e.scrollY)!==null&&te!==void 0?te:n.pageYOffset},o=new sd(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new MNe(a,o),c=(Y=e.foreignObjectRendering)!==null&&Y!==void 0?Y:!1,d={allowTaint:(re=e.allowTaint)!==null&&re!==void 0?re:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new BU(l,t,d),p=h.clonedReferenceElement,p?[4,h.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=ne.sent(),y=FB(p)||jTe(p)?mEe(p.ownerDocument):CC(l,p),x=y.width,E=y.height,S=y.left,B=y.top,D=ONe(l,p,e.backgroundColor),I={canvas:e.canvas,backgroundColor:D,scale:(J=(V=e.scale)!==null&&V!==void 0?V:n.devicePixelRatio)!==null&&J!==void 0?J:1,x:((K=e.x)!==null&&K!==void 0?K:0)+S,y:((ae=e.y)!==null&&ae!==void 0?ae:0)+B,width:(O=e.width)!==null&&O!==void 0?O:Math.ceil(x),height:(W=e.height)!==null&&W!==void 0?W:Math.ceil(E)},c?(l.logger.debug("Document cloned, using foreign object rendering"),C=new RNe(l,I),[4,C.render(p)]):[3,3];case 2:return U=ne.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+S+","+B+" with size "+x+"x"+E+" using computed rendering"),l.logger.debug("Starting DOM parsing"),F=H9(l,p),D===F.styles.backgroundColor&&(F.styles.backgroundColor=WA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+I.x+","+I.y+" with size "+I.width+"x"+I.height),C=new NNe(l,I),[4,C.render(F)];case 4:U=ne.sent(),ne.label=5;case 5:return(!((Z=e.removeContainer)!==null&&Z!==void 0)||Z)&&(BU.destroy(m)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,U]}})})},ONe=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?Ix(t,getComputedStyle(n.documentElement).backgroundColor):WA.TRANSPARENT,a=n.body?Ix(t,getComputedStyle(n.body).backgroundColor):WA.TRANSPARENT,i=typeof r=="string"?Ix(t,r):r===null?WA.TRANSPARENT:4294967295;return e===n.documentElement?Nf(s)?Nf(a)?i:a:s:i};const jNe=Object.freeze(Object.defineProperty({__proto__:null,default:nV},Symbol.toStringTag,{value:"Module"})),DC="proyectos_interdisciplinarios",sV="entregas_interdisciplinarias",QNe="usuarios",DB=t=>{const e=t.data();return{id:t.id,...e}},HNe=t=>{const e=er(Ft(Tt,DC),an("nombreProyecto","asc"));return gr(e,n=>{const s=n.docs.map(a=>DB(a));t(s)},n=>{console.error("Error al suscribirse a las planificaciones:",n),t([])})},VNe=async t=>{try{return(await ws(Ft(Tt,DC),t)).id}catch(e){throw console.error("Error al crear la planificación:",e),new Error("No se pudo crear la planificación.")}},RU=async(t,e)=>{try{const{id:r,...n}=e,s=mr(Tt,DC,t);await Ti(s,n)}catch(r){throw console.error("Error al actualizar la planificación:",r),new Error("No se pudo actualizar la planificación.")}},zNe=async t=>{try{const e=mr(Tt,DC,t);await li(e)}catch(e){throw console.error("Error al eliminar la planificación:",e),new Error("No se pudo eliminar la planificación.")}},GNe=(t,e)=>{const r=er(Ft(Tt,sV),Mn("planificacionId","==",t));return gr(r,s=>{const a=s.docs.map(i=>DB(i));e(a)},s=>{console.error("Error al suscribirse a las entregas:",s),e([])})},LU=async(t,e)=>{try{const r=mr(Tt,sV,t);await Ti(r,{feedbackProfesor:e,fechaFeedback:ur.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentación:",r),new Error("No se pudo guardar la retroalimentación.")}},qNe=t=>{const e=er(Ft(Tt,QNe));return gr(e,n=>{const s=n.docs.map(a=>DB(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},KNe=({planificaciones:t,onActivityUpdate:e})=>{const[r,n]=q.useState(null),s=q.useMemo(()=>{const l=[];return t.forEach(c=>{(c.actividades||[]).forEach(d=>l.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((c,d)=>new Date(c.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[t]),a=q.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const c=new Date;c.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),h=new Date(`${l.fechaFin}T00:00:00`);return h<c?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=c&&h>=c?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const c=(l||"").split(" ").map(m=>m[0]).join("").toUpperCase(),d=m=>{let y=0;for(let x=0;x<m.length;x++)y=m.charCodeAt(x)+((y<<5)-y);return y},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],p=Math.abs(d(l))%h.length;return u.jsx("div",{className:`w-9 h-9 rounded-full ${h[p]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:c.slice(0,2)})},o=({data:l,onClose:c,onSave:d})=>{const[h,p]=q.useState(l.activity),m=x=>{p({...h,[x.target.name]:x.target.value})},y=()=>{d(l.planId,h),c()};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),u.jsx("input",{name:"nombre",value:h.nombre,onChange:m,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),u.jsx("input",{name:"responsables",value:h.responsables,onChange:m,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),u.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:m,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),u.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:m,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[u.jsx("button",{onClick:c,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),u.jsx("button",{onClick:y,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return s.length===0?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),u.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[u.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.map(l=>{const c=a(l),d=l.type==="activity";return u.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&n({planId:l.planId,activity:l}),children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${c.color}`,children:c.text})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),r&&u.jsx(o,{data:r,onClose:()=>n(null),onSave:e})]})},$Ne=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),WNe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),YNe=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),u.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),XNe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),JNe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),ZNe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),e4e=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),t4e=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),PT=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Xd=({icon:t,label:e,children:r,aiButton:n})=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,u.jsx("span",{children:e})]}),n]}),r]}),r4e=({initialPlan:t,onSave:e,onCancel:r})=>{const[n,s]=q.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[a,i]=q.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=q.useState({nombre:"",fecha:""}),[c,d]=q.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[h,p]=q.useState(!1),[m,y]=q.useState(!1),[x,E]=q.useState(!1);q.useEffect(()=>{s(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const S=async _=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}_==="objetivos"?p(!0):y(!0);const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let j="";_==="objetivos"?j=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:j=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const te=(await(await new Ra(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(j)).response).text();s(Y=>({...Y,[_]:te.replace(/(\*\*|\*)/g,"")}))}catch(R){console.error(`Error al generar ${_}`,R),alert(`Hubo un error al generar los ${_}. Inténtelo de nuevo.`)}finally{_==="objetivos"?p(!1):y(!1)}},B=async()=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}E(!0);const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",N=`
            Basado en la descripción de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            Descripción del proyecto: "${n.descripcionProyecto}"
            Docentes responsables: "${n.docentesResponsables}"
            Asignaturas involucradas: "${n.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lógicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const te=(await(await new Ra(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(te);s(re=>{var V,J,K;return{...re,actividades:((V=Y.actividades)==null?void 0:V.map(ae=>({...ae,id:crypto.randomUUID()})))||re.actividades,fechasClave:((J=Y.fechasClave)==null?void 0:J.map(ae=>({...ae,id:crypto.randomUUID()})))||re.fechasClave,tareas:((K=Y.tareas)==null?void 0:K.map((ae,O)=>({...ae,id:crypto.randomUUID(),numero:O+1})))||re.tareas}})}catch(j){console.error("Error al generar la estructura del proyecto:",j),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{E(!1)}},D=_=>{s(N=>({...N,[_.target.name]:_.target.value}))},I=(_,N)=>{s(j=>{const R=j[_],L=R.includes(N)?R.filter(Q=>Q!==N):[...R,N];return{...j,[_]:L}})},U=()=>{if(!a.nombre||!a.fechaInicio||!a.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}s(_=>({..._,actividades:[..._.actividades||[],{...a,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},F=()=>{!o.nombre||!o.fecha||(s(_=>({..._,fechasClave:[..._.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},C=()=>{var N;if(!c.instrucciones||!c.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const _={id:crypto.randomUUID(),numero:(((N=n.tareas)==null?void 0:N.length)||0)+1,...c};s(j=>({...j,tareas:[...j.tareas||[],_]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return u.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsx("div",{className:"text-center mb-12",children:u.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:t?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),u.jsxs("div",{className:"space-y-6",children:[u.jsx(Xd,{icon:u.jsx($Ne,{}),label:"Nombre del Proyecto",children:u.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:D,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(Xd,{icon:u.jsx(WNe,{}),label:"Profesores",children:u.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:D,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(Xd,{icon:u.jsx(YNe,{}),label:"Cursos",children:u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:ha.map(_=>u.jsx("button",{type:"button",onClick:()=>I("cursos",_),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(_)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:_},_))})}),u.jsx(Xd,{icon:u.jsx(XNe,{}),label:"Asignaturas",children:u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:yl.map(_=>u.jsx("button",{type:"button",onClick:()=>I("asignaturas",_),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(_)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:_},_))})}),u.jsx(Xd,{icon:u.jsx(JNe,{}),label:"Descripción del Proyecto",children:u.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:D,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(Xd,{icon:u.jsx(ZNe,{}),label:"Objetivos",aiButton:u.jsx("button",{type:"button",onClick:()=>S("objetivos"),disabled:!n.descripcionProyecto.trim()||h,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:u.jsx(PT,{})}),children:h?u.jsx("div",{className:"p-4 text-center",children:"Generando..."}):u.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:D,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(Xd,{icon:u.jsx(e4e,{}),label:"Indicadores de Éxito",aiButton:u.jsx("button",{type:"button",onClick:()=>S("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||m,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:u.jsx(PT,{})}),children:m?u.jsx("div",{className:"p-4 text-center",children:"Generando..."}):u.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:D,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(Xd,{icon:u.jsx(t4e,{}),label:"Carta Gantt",children:u.jsxs("div",{className:"space-y-4 mt-2",children:[u.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:u.jsx("button",{type:"button",onClick:B,disabled:x||!n.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:x?"Generando...":"✨ Sugerir Estructura con IA"})}),u.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[u.jsx("input",{value:a.nombre,onChange:_=>i({...a,nombre:_.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),u.jsx("input",{type:"date",value:a.fechaInicio,onChange:_=>i({...a,fechaInicio:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("input",{type:"date",value:a.fechaFin,onChange:_=>i({...a,fechaFin:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:U,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),u.jsx("ul",{className:"text-xs",children:n.actividades.map(_=>u.jsx("li",{children:_.nombre},_.id))})]}),u.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),u.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[u.jsx("input",{value:o.nombre,onChange:_=>l({...o,nombre:_.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),u.jsx("input",{type:"date",value:o.fecha,onChange:_=>l({...o,fecha:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:F,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),u.jsx("ul",{className:"text-xs",children:n.fechasClave.map(_=>u.jsxs("li",{children:[_.nombre," (",_.fecha,")"]},_.id))})]}),u.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[u.jsx("input",{value:c.instrucciones,onChange:_=>d({...c,instrucciones:_.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),u.jsx("input",{type:"date",value:c.fechaEntrega,onChange:_=>d({...c,fechaEntrega:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),u.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(_=>u.jsxs("li",{children:[_.numero,". ",_.instrucciones]},_.id))})]})]})}),u.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[u.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),u.jsx("button",{onClick:()=>e(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},UU=()=>{const[t,e]=q.useState([]),[r,n]=q.useState(!0),[s,a]=q.useState("list"),[i,o]=q.useState(null),[l,c]=q.useState(null),[d,h]=q.useState(null);q.useEffect(()=>{n(!0);const D=HNe(I=>{e(I),n(!1)});return()=>D()},[]);const p=q.useCallback(async(D,I)=>{const U=t.find(F=>F.id===D);if(U){const F={...U,actividades:(U.actividades||[]).map(C=>C.id===I.id?I:C)};await RU(D,F)}},[t]),m=async D=>{try{"id"in D&&D.id?await RU(D.id,D):await VNe(D),a("list"),o(null)}catch(I){console.error("Error al guardar la planificación:",I),alert("No se pudo guardar la planificación.")}},y=D=>{o(D),a("form")},x=async D=>{if(console.log("ID recibido por handleDelete:",D),!D){console.error("handleDelete fue llamado con un ID inválido:",D),alert("Error: No se puede eliminar un proyecto sin un ID válido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await zNe(D)}catch(I){console.error("Error al eliminar la planificación:",I),alert("No se pudo eliminar la planificación.")}},E=()=>{o(null),a("form")},S=async D=>{c(D.id);const I=new or("p","mm","a4"),U=15,F=I.internal.pageSize.getWidth(),C=I.internal.pageSize.getHeight(),_=F-U*2;let N=U;const j=22,R=14,L=11,Q=()=>{I.setFont("helvetica","normal"),I.setFontSize(9),I.setTextColor(150),I.text("Proyecto Interdisciplinario",U,12),I.text("Liceo Industrial de Recoleta",F-U,12,{align:"right"}),I.setDrawColor(220),I.line(U,15,F-U,15)},H=J=>{N+J>C-U&&(I.addPage(),Q(),N=U+15)},te=(J,K)=>{if(!K||Array.isArray(K)&&K.length===0||typeof K=="string"&&!K.trim())return;const ae=10;I.setFontSize(L);const O=Array.isArray(K)?K.join(", "):String(K),W=I.splitTextToSize(O,_),Z=W.length*(L*.35*1.15);H(ae+Z+12),I.setFont("helvetica","bold"),I.setFontSize(R),I.setTextColor(40),I.text(J,U,N),N+=6,I.setDrawColor(200),I.line(U,N,U+30,N),N+=8,I.setFont("helvetica","normal"),I.setFontSize(L),I.setTextColor(80),I.text(W,U,N),N+=Z+12};Q(),N=U+20,I.setFont("helvetica","bold"),I.setFontSize(j),I.setTextColor(0);const Y=I.splitTextToSize(D.nombreProyecto,_);if(I.text(Y,U,N),N+=Y.length*(j*.4)+10,xl(I,{startY:N,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},D.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},D.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},D.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:L,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),N=I.lastAutoTable.finalY+15,te("Descripción del Proyecto",D.descripcionProyecto),te("Objetivos de Aprendizaje",D.objetivos),te("Indicadores de Logro",D.indicadoresLogro),D.tareas&&D.tareas.length>0){const J=D.tareas.map(ae=>[ae.numero.toString(),ae.instrucciones,ae.fechaEntrega]),K=(J.length+1)*10+15;H(K+15),I.setFont("helvetica","bold"),I.setFontSize(R),I.setTextColor(40),I.text("Tareas para Estudiantes",U,N),N+=10,xl(I,{startY:N,head:[["#","Instrucciones","Fecha de Entrega"]],body:J,theme:"striped",headStyles:{fillColor:[52,73,94]}}),N=I.lastAutoTable.finalY+15}const re=document.getElementById("gantt-container-vertical");if(re)try{const K=(await nV(re,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");I.addPage(),Q(),N=U+15,I.setFont("helvetica","bold"),I.setFontSize(R),I.setTextColor(40),I.text("Cronograma del Proyecto",U,N),N+=10;const ae=I.getImageProperties(K),O=_,W=ae.height*O/ae.width;I.addImage(K,"PNG",U,N,O,W)}catch(J){console.error("Error generating timeline image:",J)}const V=I.internal.pages.length-1;for(let J=1;J<=V;J++)I.setPage(J),I.setFont("helvetica","normal"),I.setFontSize(9),I.setTextColor(150),I.text(`Página ${J} de ${V}`,F-U,I.internal.pageSize.getHeight()-10,{align:"right"});I.save(`Proyecto_${D.nombreProyecto.replace(/\s/g,"_")}.pdf`),c(null)},B=({plan:D,onBack:I})=>{var te,Y;const[U,F]=q.useState([]),[C,_]=q.useState([]),[N,j]=q.useState(((te=D.tareas)==null?void 0:te[0])||null),[R,L]=q.useState(null);q.useEffect(()=>{const re=qNe(F),V=GNe(D.id,_);return()=>{re(),V()}},[D.id]);const Q=q.useMemo(()=>U.filter(re=>re.profile===jt.ESTUDIANTE&&D.cursos.includes(re.curso||"")).sort((re,V)=>re.nombreCompleto.localeCompare(V.nombreCompleto)),[U,D.cursos]),H=async re=>{var K;L(re.id);const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",J=`
                Eres un profesor asistente. Genera una retroalimentación constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${N==null?void 0:N.instrucciones}"
                - Comentario del estudiante: "${re.observacionesEstudiante||"No dejó comentarios."}"
                - Enlace entregado: "${re.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((K=re.archivoAdjunto)==null?void 0:K.nombre)||"No aplica"}"
                
                La retroalimentación debe ser breve (2-3 frases), motivadora, y enfocada en cómo podría mejorar.
            `;try{const ne=(await(await new Ra(V).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(J)).response).text().replace(/(\*\*|\*)/g,"");await LU(re.id,ne)}catch(ae){console.error("Error al generar feedback con IA:",ae),alert("No se pudo generar la retroalimentación.")}finally{L(null)}};return N?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",D.nombreProyecto]}),u.jsx("button",{onClick:I,className:"font-semibold",children:"← Volver a Proyectos"})]}),u.jsx("select",{value:N.id,onChange:re=>{var V;return j(((V=D.tareas)==null?void 0:V.find(J=>J.id===re.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(Y=D.tareas)==null?void 0:Y.map(re=>u.jsxs("option",{value:re.id,children:["Tarea ",re.numero,": ",re.instrucciones]},re.id))}),u.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:Q.map(re=>{const V=C.find(J=>J.tareaId===N.id&&J.estudianteId===re.id);return u.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[u.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[re.nombreCompleto," - ",V!=null&&V.completada?u.jsx("span",{className:"text-green-600",children:"Entregado"}):u.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),V?u.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[V.observacionesEstudiante&&u.jsxs("p",{children:[u.jsx("strong",{children:"Comentario:"})," ",V.observacionesEstudiante]}),V.enlaceUrl&&u.jsxs("p",{children:[u.jsx("strong",{children:"Enlace:"})," ",u.jsx("a",{href:V.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:V.enlaceUrl})]}),V.archivoAdjunto&&u.jsxs("p",{children:[u.jsx("strong",{children:"Archivo:"})," ",u.jsx("a",{href:V.archivoAdjunto.url,download:V.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:V.archivoAdjunto.nombre})]}),u.jsxs("div",{className:"flex items-end gap-2",children:[u.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:V.feedbackProfesor||"",onBlur:J=>LU(V.id,J.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},V.id),u.jsx("button",{onClick:()=>H(V),disabled:R===V.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:R===V.id?"...":u.jsx(PT,{})})]})]}):u.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante aún no ha realizado la entrega."})]},re.id)})})]}):u.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?u.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?u.jsx(B,{plan:d,onBack:()=>h(null)}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s==="list"?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),u.jsx("button",{onClick:E,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),u.jsx("div",{className:"space-y-4",children:t.map(D=>(console.log("Inspeccionando objeto plan:",D),u.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:D.nombreProyecto}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(D.cursos||[]).join(", ")]})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u.jsx("button",{onClick:()=>h(D),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),u.jsx("button",{onClick:()=>S(D),disabled:l===D.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===D.id?"Exportando...":"Exportar PDF"}),u.jsx("button",{onClick:()=>y(D),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),u.jsx("button",{onClick:()=>x(D.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},D.id)))})]}):u.jsx(r4e,{initialPlan:i,onSave:m,onCancel:()=>{a("list"),o(null)}}),t.length>0&&u.jsx("div",{id:"gantt-container-vertical",children:u.jsx(KNe,{planificaciones:t,onActivityUpdate:p})})]})},NS="pañolMaquinas",MU="pañolRegistros",n4e=()=>{const[t,e]=q.useState([]),[r,n]=q.useState([]),s={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[a,i]=q.useState(s),[o,l]=q.useState(null),c={nombre:"",especialidad:"Industrial"},[d,h]=q.useState(c),[p,m]=q.useState(null),[y,x]=q.useState({maquinaId:"",curso:"",profesor:"",fecha:""});q.useEffect(()=>{try{const L=localStorage.getItem(NS);if(L&&JSON.parse(L).length>0)e(JSON.parse(L));else{const H=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];e(H),localStorage.setItem(NS,JSON.stringify(H))}const Q=localStorage.getItem(MU);Q&&n(JSON.parse(Q))}catch(L){console.error("Error al cargar datos de Pañol desde localStorage",L)}},[]);const E=q.useCallback(L=>{e(L),localStorage.setItem(NS,JSON.stringify(L))},[]),S=q.useCallback(L=>{n(L),localStorage.setItem(MU,JSON.stringify(L))},[]),B=L=>{L.preventDefault(),d.nombre.trim()&&(E(p?t.map(Q=>Q.id===p.id?{...p,...d}:Q):[{...d,id:crypto.randomUUID()},...t]),h(c),m(null))},D=q.useCallback(L=>{if(r.some(Q=>Q.maquinaId===L)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&E(t.filter(Q=>Q.id!==L))},[t,r,E]),I=L=>{L.preventDefault();const Q=o||a;if(!Q.curso||!Q.profesorResponsable.trim()||!Q.maquinaId||Q.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}S(o?r.map(H=>H.id===o.id?o:H):[{...a,id:crypto.randomUUID()},...r]),i(s),l(null)},U=q.useCallback(L=>{window.confirm("¿Eliminar este registro de uso?")&&S(r.filter(Q=>Q.id!==L))},[r,S]),F=q.useMemo(()=>r.filter(L=>(y.maquinaId===""||L.maquinaId===y.maquinaId)&&(y.curso===""||L.curso===y.curso)&&(y.profesor===""||L.profesorResponsable.toLowerCase().includes(y.profesor.toLowerCase()))&&(y.fecha===""||L.fecha===y.fecha)).sort((L,Q)=>new Date(Q.fecha).getTime()-new Date(L.fecha).getTime()),[r,y]),C=q.useMemo(()=>new Map(t.map(L=>[L.id,L])),[t]),_=()=>{const L=F.map(te=>{var Y,re;return{Fecha:te.fecha,Curso:te.curso,Profesor:te.profesorResponsable,Máquina:((Y=C.get(te.maquinaId))==null?void 0:Y.nombre)||"N/A",Especialidad:((re=C.get(te.maquinaId))==null?void 0:re.especialidad)||"N/A","Total Horas":te.totalHoras,Observaciones:te.observaciones}}),Q=sc.json_to_sheet(L),H=sc.book_new();sc.book_append_sheet(H,Q,"RegistrosPañol"),dB(H,"Registros_Pañol.xlsx")},N=()=>{const L=new or;xl(L,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:F.map(Q=>{var H,te;return[Q.fecha,Q.curso,Q.profesorResponsable,((H=C.get(Q.maquinaId))==null?void 0:H.nombre)||"N/A",((te=C.get(Q.maquinaId))==null?void 0:te.especialidad)||"N/A",Q.totalHoras,Q.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:Q=>{L.setFontSize(10),L.setFont("helvetica","bold"),L.text("LICEO INDUSTRIAL DE RECOLETA",Q.settings.margin.left,15)}}),L.save("Registros_Pañol.pdf")},j="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",R=()=>{const L=o||a,Q=o?l:i;return u.jsxs("form",{onSubmit:I,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),u.jsx("input",{name:"fecha",type:"date",value:L.fecha,onChange:H=>Q({...L,fecha:H.target.value}),className:j,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Curso"}),u.jsxs("select",{name:"curso",value:L.curso,onChange:H=>Q({...L,curso:H.target.value}),className:j,required:!0,children:[u.jsx("option",{value:"",children:"Curso"}),ha.map(H=>u.jsx("option",{children:H},H))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),u.jsxs("select",{name:"profesorResponsable",value:L.profesorResponsable,onChange:H=>Q({...L,profesorResponsable:H.target.value}),className:j,required:!0,children:[u.jsx("option",{value:"",children:"Profesor Responsable"}),N5.map(H=>u.jsx("option",{value:H,children:H},H))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),u.jsxs("select",{name:"maquinaId",value:L.maquinaId,onChange:H=>Q({...L,maquinaId:H.target.value}),className:j,required:!0,children:[u.jsx("option",{value:"",children:"Máquina"}),t.map(H=>u.jsx("option",{value:H.id,children:H.nombre},H.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),u.jsx("input",{name:"totalHoras",type:"number",value:L.totalHoras,onChange:H=>Q({...L,totalHoras:Number(H.target.value)}),className:j,required:!0,min:"0.5",step:"0.5"})]}),u.jsxs("div",{className:"lg:col-span-3",children:[u.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),u.jsx("textarea",{name:"observaciones",value:L.observaciones,onChange:H=>Q({...L,observaciones:H.target.value}),placeholder:"Observaciones...",className:`${j}`,rows:1})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&u.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),R()]}),u.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),u.jsxs("form",{onSubmit:B,className:"flex gap-2 mb-4",children:[u.jsx("input",{value:d.nombre,onChange:L=>h({...d,nombre:L.target.value}),placeholder:"Nombre máquina",className:j}),u.jsxs("select",{value:d.especialidad,onChange:L=>h({...d,especialidad:L.target.value}),className:j,children:[u.jsx("option",{value:"Industrial",children:"Industrial"}),u.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),u.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:p?"✓":"+"})]}),u.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(L=>u.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[u.jsxs("span",{children:[L.nombre," ",u.jsxs("span",{className:"text-xs text-slate-500",children:["(",L.especialidad,")"]})]}),u.jsxs("div",{className:"space-x-2",children:[u.jsx("button",{onClick:()=>{m(L),h(L)},className:"text-blue-500",children:"✏️"}),u.jsx("button",{onClick:()=>D(L.id),className:"text-red-500",children:"🗑️"})]})]},L.id))})]}),u.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:_,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),u.jsx("button",{onClick:N,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[u.jsx("input",{type:"date",value:y.fecha,onChange:L=>x({...y,fecha:L.target.value}),className:j}),u.jsxs("select",{value:y.curso,onChange:L=>x({...y,curso:L.target.value}),className:j,children:[u.jsx("option",{value:"",children:"Todos los Cursos"}),ha.map(L=>u.jsx("option",{children:L},L))]}),u.jsxs("select",{value:y.maquinaId,onChange:L=>x({...y,maquinaId:L.target.value}),className:j,children:[u.jsx("option",{value:"",children:"Todas las Máquinas"}),t.map(L=>u.jsx("option",{value:L.id,children:L.nombre},L.id))]}),u.jsx("input",{value:y.profesor,onChange:L=>x({...y,profesor:L.target.value}),placeholder:"Buscar profesor...",className:j})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:F.map(L=>{var Q;return u.jsxs("tr",{children:[u.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:L.fecha}),u.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((Q=C.get(L.maquinaId))==null?void 0:Q.nombre)||"N/A"}),u.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[L.profesorResponsable," (",L.curso,")"]}),u.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:L.totalHoras}),u.jsxs("td",{className:"px-3 py-2 text-center",children:[u.jsx("button",{onClick:()=>l(L),className:"text-blue-500",children:"✏️"}),u.jsx("button",{onClick:()=>U(L.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},L.id)})})]})})]})]})]})};function vo(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let r=0,n;r<t.length;r++)(n=vo(t[r]))!==""&&(e+=(e&&" ")+n);else for(let r in t)t[r]&&(e+=(e&&" ")+r);return e}var BS={exports:{}},kS={},IS={exports:{}},FS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PU;function s4e(){if(PU)return FS;PU=1;var t=C1();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,a=t.useLayoutEffect,i=t.useDebugValue;function o(h,p){var m=p(),y=n({inst:{value:m,getSnapshot:p}}),x=y[0].inst,E=y[1];return a(function(){x.value=m,x.getSnapshot=p,l(x)&&E({inst:x})},[h,m,p]),s(function(){return l(x)&&E({inst:x}),h(function(){l(x)&&E({inst:x})})},[h]),i(m),m}function l(h){var p=h.getSnapshot;h=h.value;try{var m=p();return!r(h,m)}catch{return!0}}function c(h,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return FS.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,FS}var OU;function a4e(){return OU||(OU=1,IS.exports=s4e()),IS.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jU;function i4e(){if(jU)return kS;jU=1;var t=C1(),e=a4e();function r(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:r,s=e.useSyncExternalStore,a=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return kS.useSyncExternalStoreWithSelector=function(c,d,h,p,m){var y=a(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=o(function(){function S(F){if(!B){if(B=!0,D=F,F=p(F),m!==void 0&&x.hasValue){var C=x.value;if(m(C,F))return I=C}return I=F}if(C=I,n(D,F))return C;var _=p(F);return m!==void 0&&m(C,_)?(D=F,C):(D=F,I=_)}var B=!1,D,I,U=h===void 0?null:h;return[function(){return S(d())},U===null?void 0:function(){return S(U())}]},[d,h,p,m]);var E=s(c,y[0],y[1]);return i(function(){x.hasValue=!0,x.value=E},[E]),l(E),E},kS}var QU;function o4e(){return QU||(QU=1,BS.exports=i4e()),BS.exports}var l4e=o4e();const c4e=Sb(l4e),u4e={},HU=t=>{let e;const r=new Set,n=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),r.forEach(y=>y(e,m))}},s=()=>e,l={setState:n,getState:s,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(u4e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=e=t(n,s,l);return l},A4e=t=>t?HU(t):HU,{useDebugValue:d4e}=dt,{useSyncExternalStoreWithSelector:f4e}=c4e,h4e=t=>t;function aV(t,e=h4e,r){const n=f4e(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return d4e(n),n}const VU=(t,e)=>{const r=A4e(t),n=(s,a=e)=>aV(r,s,a);return Object.assign(n,r),n},p4e=(t,e)=>t?VU(t,e):VU;function io(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[n,s]of t)if(!Object.is(s,e.get(n)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(e,n)||!Object.is(t[n],e[n]))return!1;return!0}var m4e={value:()=>{}};function RC(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new j2(r)}function j2(t){this._=t}function g4e(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",s=r.indexOf(".");if(s>=0&&(n=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}j2.prototype=RC.prototype={constructor:j2,on:function(t,e){var r=this._,n=g4e(t+"",r),s,a=-1,i=n.length;if(arguments.length<2){for(;++a<i;)if((s=(t=n[a]).type)&&(s=x4e(r[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=n[a]).type)r[s]=zU(r[s],t.name,e);else if(e==null)for(s in r)r[s]=zU(r[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new j2(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var r=new Array(s),n=0,s,a;n<s;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,s=a.length;n<s;++n)a[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],s=0,a=n.length;s<a;++s)n[s].value.apply(e,r)}};function x4e(t,e){for(var r=0,n=t.length,s;r<n;++r)if((s=t[r]).name===e)return s.value}function zU(t,e,r){for(var n=0,s=t.length;n<s;++n)if(t[n].name===e){t[n]=m4e,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var OT="http://www.w3.org/1999/xhtml";const GU={svg:"http://www.w3.org/2000/svg",xhtml:OT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function LC(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),GU.hasOwnProperty(e)?{space:GU[e],local:t}:t}function v4e(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===OT&&e.documentElement.namespaceURI===OT?e.createElement(t):e.createElementNS(r,t)}}function y4e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function iV(t){var e=LC(t);return(e.local?y4e:v4e)(e)}function w4e(){}function RB(t){return t==null?w4e:function(){return this.querySelector(t)}}function b4e(t){typeof t!="function"&&(t=RB(t));for(var e=this._groups,r=e.length,n=new Array(r),s=0;s<r;++s)for(var a=e[s],i=a.length,o=n[s]=new Array(i),l,c,d=0;d<i;++d)(l=a[d])&&(c=t.call(l,l.__data__,d,a))&&("__data__"in l&&(c.__data__=l.__data__),o[d]=c);return new bl(n,this._parents)}function C4e(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function E4e(){return[]}function oV(t){return t==null?E4e:function(){return this.querySelectorAll(t)}}function _4e(t){return function(){return C4e(t.apply(this,arguments))}}function S4e(t){typeof t=="function"?t=_4e(t):t=oV(t);for(var e=this._groups,r=e.length,n=[],s=[],a=0;a<r;++a)for(var i=e[a],o=i.length,l,c=0;c<o;++c)(l=i[c])&&(n.push(t.call(l,l.__data__,c,i)),s.push(l));return new bl(n,s)}function lV(t){return function(){return this.matches(t)}}function cV(t){return function(e){return e.matches(t)}}var T4e=Array.prototype.find;function N4e(t){return function(){return T4e.call(this.children,t)}}function B4e(){return this.firstElementChild}function k4e(t){return this.select(t==null?B4e:N4e(typeof t=="function"?t:cV(t)))}var I4e=Array.prototype.filter;function F4e(){return Array.from(this.children)}function D4e(t){return function(){return I4e.call(this.children,t)}}function R4e(t){return this.selectAll(t==null?F4e:D4e(typeof t=="function"?t:cV(t)))}function L4e(t){typeof t!="function"&&(t=lV(t));for(var e=this._groups,r=e.length,n=new Array(r),s=0;s<r;++s)for(var a=e[s],i=a.length,o=n[s]=[],l,c=0;c<i;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&o.push(l);return new bl(n,this._parents)}function uV(t){return new Array(t.length)}function U4e(){return new bl(this._enter||this._groups.map(uV),this._parents)}function lb(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}lb.prototype={constructor:lb,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function M4e(t){return function(){return t}}function P4e(t,e,r,n,s,a){for(var i=0,o,l=e.length,c=a.length;i<c;++i)(o=e[i])?(o.__data__=a[i],n[i]=o):r[i]=new lb(t,a[i]);for(;i<l;++i)(o=e[i])&&(s[i]=o)}function O4e(t,e,r,n,s,a,i){var o,l,c=new Map,d=e.length,h=a.length,p=new Array(d),m;for(o=0;o<d;++o)(l=e[o])&&(p[o]=m=i.call(l,l.__data__,o,e)+"",c.has(m)?s[o]=l:c.set(m,l));for(o=0;o<h;++o)m=i.call(t,a[o],o,a)+"",(l=c.get(m))?(n[o]=l,l.__data__=a[o],c.delete(m)):r[o]=new lb(t,a[o]);for(o=0;o<d;++o)(l=e[o])&&c.get(p[o])===l&&(s[o]=l)}function j4e(t){return t.__data__}function Q4e(t,e){if(!arguments.length)return Array.from(this,j4e);var r=e?O4e:P4e,n=this._parents,s=this._groups;typeof t!="function"&&(t=M4e(t));for(var a=s.length,i=new Array(a),o=new Array(a),l=new Array(a),c=0;c<a;++c){var d=n[c],h=s[c],p=h.length,m=H4e(t.call(d,d&&d.__data__,c,n)),y=m.length,x=o[c]=new Array(y),E=i[c]=new Array(y),S=l[c]=new Array(p);r(d,h,x,E,S,m,e);for(var B=0,D=0,I,U;B<y;++B)if(I=x[B]){for(B>=D&&(D=B+1);!(U=E[D])&&++D<y;);I._next=U||null}}return i=new bl(i,n),i._enter=o,i._exit=l,i}function H4e(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function V4e(){return new bl(this._exit||this._groups.map(uV),this._parents)}function z4e(t,e,r){var n=this.enter(),s=this,a=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?a.remove():r(a),n&&s?n.merge(s).order():s}function G4e(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,s=r.length,a=n.length,i=Math.min(s,a),o=new Array(s),l=0;l<i;++l)for(var c=r[l],d=n[l],h=c.length,p=o[l]=new Array(h),m,y=0;y<h;++y)(m=c[y]||d[y])&&(p[y]=m);for(;l<s;++l)o[l]=r[l];return new bl(o,this._parents)}function q4e(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],s=n.length-1,a=n[s],i;--s>=0;)(i=n[s])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function K4e(t){t||(t=$4e);function e(h,p){return h&&p?t(h.__data__,p.__data__):!h-!p}for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var i=r[a],o=i.length,l=s[a]=new Array(o),c,d=0;d<o;++d)(c=i[d])&&(l[d]=c);l.sort(e)}return new bl(s,this._parents).order()}function $4e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function W4e(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Y4e(){return Array.from(this)}function X4e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],s=0,a=n.length;s<a;++s){var i=n[s];if(i)return i}return null}function J4e(){let t=0;for(const e of this)++t;return t}function Z4e(){return!this.node()}function eBe(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var s=e[r],a=0,i=s.length,o;a<i;++a)(o=s[a])&&t.call(o,o.__data__,a,s);return this}function tBe(t){return function(){this.removeAttribute(t)}}function rBe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nBe(t,e){return function(){this.setAttribute(t,e)}}function sBe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function aBe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function iBe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function oBe(t,e){var r=LC(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?rBe:tBe:typeof e=="function"?r.local?iBe:aBe:r.local?sBe:nBe)(r,e))}function AV(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function lBe(t){return function(){this.style.removeProperty(t)}}function cBe(t,e,r){return function(){this.style.setProperty(t,e,r)}}function uBe(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function ABe(t,e,r){return arguments.length>1?this.each((e==null?lBe:typeof e=="function"?uBe:cBe)(t,e,r??"")):vm(this.node(),t)}function vm(t,e){return t.style.getPropertyValue(e)||AV(t).getComputedStyle(t,null).getPropertyValue(e)}function dBe(t){return function(){delete this[t]}}function fBe(t,e){return function(){this[t]=e}}function hBe(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function pBe(t,e){return arguments.length>1?this.each((e==null?dBe:typeof e=="function"?hBe:fBe)(t,e)):this.node()[t]}function dV(t){return t.trim().split(/^|\s+/)}function LB(t){return t.classList||new fV(t)}function fV(t){this._node=t,this._names=dV(t.getAttribute("class")||"")}fV.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function hV(t,e){for(var r=LB(t),n=-1,s=e.length;++n<s;)r.add(e[n])}function pV(t,e){for(var r=LB(t),n=-1,s=e.length;++n<s;)r.remove(e[n])}function mBe(t){return function(){hV(this,t)}}function gBe(t){return function(){pV(this,t)}}function xBe(t,e){return function(){(e.apply(this,arguments)?hV:pV)(this,t)}}function vBe(t,e){var r=dV(t+"");if(arguments.length<2){for(var n=LB(this.node()),s=-1,a=r.length;++s<a;)if(!n.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?xBe:e?mBe:gBe)(r,e))}function yBe(){this.textContent=""}function wBe(t){return function(){this.textContent=t}}function bBe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function CBe(t){return arguments.length?this.each(t==null?yBe:(typeof t=="function"?bBe:wBe)(t)):this.node().textContent}function EBe(){this.innerHTML=""}function _Be(t){return function(){this.innerHTML=t}}function SBe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function TBe(t){return arguments.length?this.each(t==null?EBe:(typeof t=="function"?SBe:_Be)(t)):this.node().innerHTML}function NBe(){this.nextSibling&&this.parentNode.appendChild(this)}function BBe(){return this.each(NBe)}function kBe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function IBe(){return this.each(kBe)}function FBe(t){var e=typeof t=="function"?t:iV(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function DBe(){return null}function RBe(t,e){var r=typeof t=="function"?t:iV(t),n=e==null?DBe:typeof e=="function"?e:RB(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function LBe(){var t=this.parentNode;t&&t.removeChild(this)}function UBe(){return this.each(LBe)}function MBe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function PBe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function OBe(t){return this.select(t?PBe:MBe)}function jBe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function QBe(t){return function(e){t.call(this,e,this.__data__)}}function HBe(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function VBe(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,s=e.length,a;r<s;++r)a=e[r],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++n]=a;++n?e.length=n:delete this.__on}}}function zBe(t,e,r){return function(){var n=this.__on,s,a=QBe(e);if(n){for(var i=0,o=n.length;i<o;++i)if((s=n[i]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=r),s.value=e;return}}this.addEventListener(t.type,a,r),s={type:t.type,name:t.name,value:e,listener:a,options:r},n?n.push(s):this.__on=[s]}}function GBe(t,e,r){var n=HBe(t+""),s,a=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,d;l<c;++l)for(s=0,d=o[l];s<a;++s)if((i=n[s]).type===d.type&&i.name===d.name)return d.value}return}for(o=e?zBe:VBe,s=0;s<a;++s)this.each(o(n[s],e,r));return this}function mV(t,e,r){var n=AV(t),s=n.CustomEvent;typeof s=="function"?s=new s(e,r):(s=n.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function qBe(t,e){return function(){return mV(this,t,e)}}function KBe(t,e){return function(){return mV(this,t,e.apply(this,arguments))}}function $Be(t,e){return this.each((typeof e=="function"?KBe:qBe)(t,e))}function*WBe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],s=0,a=n.length,i;s<a;++s)(i=n[s])&&(yield i)}var gV=[null];function bl(t,e){this._groups=t,this._parents=e}function rv(){return new bl([[document.documentElement]],gV)}function YBe(){return this}bl.prototype=rv.prototype={constructor:bl,select:b4e,selectAll:S4e,selectChild:k4e,selectChildren:R4e,filter:L4e,data:Q4e,enter:U4e,exit:V4e,join:z4e,merge:G4e,selection:YBe,order:q4e,sort:K4e,call:W4e,nodes:Y4e,node:X4e,size:J4e,empty:Z4e,each:eBe,attr:oBe,style:ABe,property:pBe,classed:vBe,text:CBe,html:TBe,raise:BBe,lower:IBe,append:FBe,insert:RBe,remove:UBe,clone:OBe,datum:jBe,on:GBe,dispatch:$Be,[Symbol.iterator]:WBe};function nc(t){return typeof t=="string"?new bl([[document.querySelector(t)]],[document.documentElement]):new bl([[t]],gV)}function XBe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Uu(t,e){if(t=XBe(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const JBe={passive:!1},h1={capture:!0,passive:!1};function DS(t){t.stopImmediatePropagation()}function em(t){t.preventDefault(),t.stopImmediatePropagation()}function xV(t){var e=t.document.documentElement,r=nc(t).on("dragstart.drag",em,h1);"onselectstart"in e?r.on("selectstart.drag",em,h1):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function vV(t,e){var r=t.document.documentElement,n=nc(t).on("dragstart.drag",null);e&&(n.on("click.drag",em,h1),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const e2=t=>()=>t;function jT(t,{sourceEvent:e,subject:r,target:n,identifier:s,active:a,x:i,y:o,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}jT.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ZBe(t){return!t.ctrlKey&&!t.button}function eke(){return this.parentNode}function tke(t,e){return e??{x:t.x,y:t.y}}function rke(){return navigator.maxTouchPoints||"ontouchstart"in this}function nke(){var t=ZBe,e=eke,r=tke,n=rke,s={},a=RC("start","drag","end"),i=0,o,l,c,d,h=0;function p(I){I.on("mousedown.drag",m).filter(n).on("touchstart.drag",E).on("touchmove.drag",S,JBe).on("touchend.drag touchcancel.drag",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(I,U){if(!(d||!t.call(this,I,U))){var F=D(this,e.call(this,I,U),I,U,"mouse");F&&(nc(I.view).on("mousemove.drag",y,h1).on("mouseup.drag",x,h1),xV(I.view),DS(I),c=!1,o=I.clientX,l=I.clientY,F("start",I))}}function y(I){if(em(I),!c){var U=I.clientX-o,F=I.clientY-l;c=U*U+F*F>h}s.mouse("drag",I)}function x(I){nc(I.view).on("mousemove.drag mouseup.drag",null),vV(I.view,c),em(I),s.mouse("end",I)}function E(I,U){if(t.call(this,I,U)){var F=I.changedTouches,C=e.call(this,I,U),_=F.length,N,j;for(N=0;N<_;++N)(j=D(this,C,I,U,F[N].identifier,F[N]))&&(DS(I),j("start",I,F[N]))}}function S(I){var U=I.changedTouches,F=U.length,C,_;for(C=0;C<F;++C)(_=s[U[C].identifier])&&(em(I),_("drag",I,U[C]))}function B(I){var U=I.changedTouches,F=U.length,C,_;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<F;++C)(_=s[U[C].identifier])&&(DS(I),_("end",I,U[C]))}function D(I,U,F,C,_,N){var j=a.copy(),R=Uu(N||F,U),L,Q,H;if((H=r.call(I,new jT("beforestart",{sourceEvent:F,target:p,identifier:_,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:j}),C))!=null)return L=H.x-R[0]||0,Q=H.y-R[1]||0,function te(Y,re,V){var J=R,K;switch(Y){case"start":s[_]=te,K=i++;break;case"end":delete s[_],--i;case"drag":R=Uu(V||re,U),K=i;break}j.call(Y,I,new jT(Y,{sourceEvent:re,subject:H,target:p,identifier:_,active:K,x:R[0]+L,y:R[1]+Q,dx:R[0]-J[0],dy:R[1]-J[1],dispatch:j}),C)}}return p.filter=function(I){return arguments.length?(t=typeof I=="function"?I:e2(!!I),p):t},p.container=function(I){return arguments.length?(e=typeof I=="function"?I:e2(I),p):e},p.subject=function(I){return arguments.length?(r=typeof I=="function"?I:e2(I),p):r},p.touchable=function(I){return arguments.length?(n=typeof I=="function"?I:e2(!!I),p):n},p.on=function(){var I=a.on.apply(a,arguments);return I===a?p:I},p.clickDistance=function(I){return arguments.length?(h=(I=+I)*I,p):Math.sqrt(h)},p}function UB(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function yV(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function nv(){}var p1=.7,cb=1/p1,tm="\\s*([+-]?\\d+)\\s*",m1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ske=/^#([0-9a-f]{3,8})$/,ake=new RegExp(`^rgb\\(${tm},${tm},${tm}\\)$`),ike=new RegExp(`^rgb\\(${Yu},${Yu},${Yu}\\)$`),oke=new RegExp(`^rgba\\(${tm},${tm},${tm},${m1}\\)$`),lke=new RegExp(`^rgba\\(${Yu},${Yu},${Yu},${m1}\\)$`),cke=new RegExp(`^hsl\\(${m1},${Yu},${Yu}\\)$`),uke=new RegExp(`^hsla\\(${m1},${Yu},${Yu},${m1}\\)$`),qU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};UB(nv,g1,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:KU,formatHex:KU,formatHex8:Ake,formatHsl:dke,formatRgb:$U,toString:$U});function KU(){return this.rgb().formatHex()}function Ake(){return this.rgb().formatHex8()}function dke(){return wV(this).formatHsl()}function $U(){return this.rgb().formatRgb()}function g1(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=ske.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?WU(e):r===3?new jo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?t2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?t2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ake.exec(t))?new jo(e[1],e[2],e[3],1):(e=ike.exec(t))?new jo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=oke.exec(t))?t2(e[1],e[2],e[3],e[4]):(e=lke.exec(t))?t2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=cke.exec(t))?JU(e[1],e[2]/100,e[3]/100,1):(e=uke.exec(t))?JU(e[1],e[2]/100,e[3]/100,e[4]):qU.hasOwnProperty(t)?WU(qU[t]):t==="transparent"?new jo(NaN,NaN,NaN,0):null}function WU(t){return new jo(t>>16&255,t>>8&255,t&255,1)}function t2(t,e,r,n){return n<=0&&(t=e=r=NaN),new jo(t,e,r,n)}function fke(t){return t instanceof nv||(t=g1(t)),t?(t=t.rgb(),new jo(t.r,t.g,t.b,t.opacity)):new jo}function QT(t,e,r,n){return arguments.length===1?fke(t):new jo(t,e,r,n??1)}function jo(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}UB(jo,QT,yV(nv,{brighter(t){return t=t==null?cb:Math.pow(cb,t),new jo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?p1:Math.pow(p1,t),new jo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new jo(Kh(this.r),Kh(this.g),Kh(this.b),ub(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YU,formatHex:YU,formatHex8:hke,formatRgb:XU,toString:XU}));function YU(){return`#${Lh(this.r)}${Lh(this.g)}${Lh(this.b)}`}function hke(){return`#${Lh(this.r)}${Lh(this.g)}${Lh(this.b)}${Lh((isNaN(this.opacity)?1:this.opacity)*255)}`}function XU(){const t=ub(this.opacity);return`${t===1?"rgb(":"rgba("}${Kh(this.r)}, ${Kh(this.g)}, ${Kh(this.b)}${t===1?")":`, ${t})`}`}function ub(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Kh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Lh(t){return t=Kh(t),(t<16?"0":"")+t.toString(16)}function JU(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new jc(t,e,r,n)}function wV(t){if(t instanceof jc)return new jc(t.h,t.s,t.l,t.opacity);if(t instanceof nv||(t=g1(t)),!t)return new jc;if(t instanceof jc)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,s=Math.min(e,r,n),a=Math.max(e,r,n),i=NaN,o=a-s,l=(a+s)/2;return o?(e===a?i=(r-n)/o+(r<n)*6:r===a?i=(n-e)/o+2:i=(e-r)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new jc(i,o,l,t.opacity)}function pke(t,e,r,n){return arguments.length===1?wV(t):new jc(t,e,r,n??1)}function jc(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}UB(jc,pke,yV(nv,{brighter(t){return t=t==null?cb:Math.pow(cb,t),new jc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?p1:Math.pow(p1,t),new jc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,s=2*r-n;return new jo(RS(t>=240?t-240:t+120,s,n),RS(t,s,n),RS(t<120?t+240:t-120,s,n),this.opacity)},clamp(){return new jc(ZU(this.h),r2(this.s),r2(this.l),ub(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ub(this.opacity);return`${t===1?"hsl(":"hsla("}${ZU(this.h)}, ${r2(this.s)*100}%, ${r2(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ZU(t){return t=(t||0)%360,t<0?t+360:t}function r2(t){return Math.max(0,Math.min(1,t||0))}function RS(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const bV=t=>()=>t;function mke(t,e){return function(r){return t+r*e}}function gke(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function xke(t){return(t=+t)==1?CV:function(e,r){return r-e?gke(e,r,t):bV(isNaN(e)?r:e)}}function CV(t,e){var r=e-t;return r?mke(t,r):bV(isNaN(t)?e:t)}const eM=function t(e){var r=xke(e);function n(s,a){var i=r((s=QT(s)).r,(a=QT(a)).r),o=r(s.g,a.g),l=r(s.b,a.b),c=CV(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=l(d),s.opacity=c(d),s+""}}return n.gamma=t,n}(1);function nf(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var HT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,LS=new RegExp(HT.source,"g");function vke(t){return function(){return t}}function yke(t){return function(e){return t(e)+""}}function wke(t,e){var r=HT.lastIndex=LS.lastIndex=0,n,s,a,i=-1,o=[],l=[];for(t=t+"",e=e+"";(n=HT.exec(t))&&(s=LS.exec(e));)(a=s.index)>r&&(a=e.slice(r,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:nf(n,s)})),r=LS.lastIndex;return r<e.length&&(a=e.slice(r),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?yke(l[0].x):vke(e):(e=l.length,function(c){for(var d=0,h;d<e;++d)o[(h=l[d]).i]=h.x(c);return o.join("")})}var tM=180/Math.PI,VT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function EV(t,e,r,n,s,a){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),t*n<e*r&&(t=-t,e=-e,l=-l,i=-i),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*tM,skewX:Math.atan(l)*tM,scaleX:i,scaleY:o}}var n2;function bke(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?VT:EV(e.a,e.b,e.c,e.d,e.e,e.f)}function Cke(t){return t==null||(n2||(n2=document.createElementNS("http://www.w3.org/2000/svg","g")),n2.setAttribute("transform",t),!(t=n2.transform.baseVal.consolidate()))?VT:(t=t.matrix,EV(t.a,t.b,t.c,t.d,t.e,t.f))}function _V(t,e,r,n){function s(c){return c.length?c.pop()+" ":""}function a(c,d,h,p,m,y){if(c!==h||d!==p){var x=m.push("translate(",null,e,null,r);y.push({i:x-4,x:nf(c,h)},{i:x-2,x:nf(d,p)})}else(h||p)&&m.push("translate("+h+e+p+r)}function i(c,d,h,p){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),p.push({i:h.push(s(h)+"rotate(",null,n)-2,x:nf(c,d)})):d&&h.push(s(h)+"rotate("+d+n)}function o(c,d,h,p){c!==d?p.push({i:h.push(s(h)+"skewX(",null,n)-2,x:nf(c,d)}):d&&h.push(s(h)+"skewX("+d+n)}function l(c,d,h,p,m,y){if(c!==h||d!==p){var x=m.push(s(m)+"scale(",null,",",null,")");y.push({i:x-4,x:nf(c,h)},{i:x-2,x:nf(d,p)})}else(h!==1||p!==1)&&m.push(s(m)+"scale("+h+","+p+")")}return function(c,d){var h=[],p=[];return c=t(c),d=t(d),a(c.translateX,c.translateY,d.translateX,d.translateY,h,p),i(c.rotate,d.rotate,h,p),o(c.skewX,d.skewX,h,p),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,p),c=d=null,function(m){for(var y=-1,x=p.length,E;++y<x;)h[(E=p[y]).i]=E.x(m);return h.join("")}}}var Eke=_V(bke,"px, ","px)","deg)"),_ke=_V(Cke,", ",")",")"),Ske=1e-12;function rM(t){return((t=Math.exp(t))+1/t)/2}function Tke(t){return((t=Math.exp(t))-1/t)/2}function Nke(t){return((t=Math.exp(2*t))-1)/(t+1)}const Bke=function t(e,r,n){function s(a,i){var o=a[0],l=a[1],c=a[2],d=i[0],h=i[1],p=i[2],m=d-o,y=h-l,x=m*m+y*y,E,S;if(x<Ske)S=Math.log(p/c)/e,E=function(C){return[o+C*m,l+C*y,c*Math.exp(e*C*S)]};else{var B=Math.sqrt(x),D=(p*p-c*c+n*x)/(2*c*r*B),I=(p*p-c*c-n*x)/(2*p*r*B),U=Math.log(Math.sqrt(D*D+1)-D),F=Math.log(Math.sqrt(I*I+1)-I);S=(F-U)/e,E=function(C){var _=C*S,N=rM(U),j=c/(r*B)*(N*Nke(e*_+U)-Tke(U));return[o+j*m,l+j*y,c*N/rM(e*_+U)]}}return E.duration=S*1e3*e/Math.SQRT2,E}return s.rho=function(a){var i=Math.max(.001,+a),o=i*i,l=o*o;return t(i,o,l)},s}(Math.SQRT2,2,4);var ym=0,lx=0,Mg=0,SV=1e3,Ab,cx,db=0,c0=0,UC=0,x1=typeof performance=="object"&&performance.now?performance:Date,TV=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function MB(){return c0||(TV(kke),c0=x1.now()+UC)}function kke(){c0=0}function fb(){this._call=this._time=this._next=null}fb.prototype=NV.prototype={constructor:fb,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?MB():+r)+(e==null?0:+e),!this._next&&cx!==this&&(cx?cx._next=this:Ab=this,cx=this),this._call=t,this._time=r,zT()},stop:function(){this._call&&(this._call=null,this._time=1/0,zT())}};function NV(t,e,r){var n=new fb;return n.restart(t,e,r),n}function Ike(){MB(),++ym;for(var t=Ab,e;t;)(e=c0-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ym}function nM(){c0=(db=x1.now())+UC,ym=lx=0;try{Ike()}finally{ym=0,Dke(),c0=0}}function Fke(){var t=x1.now(),e=t-db;e>SV&&(UC-=e,db=t)}function Dke(){for(var t,e=Ab,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Ab=r);cx=t,zT(n)}function zT(t){if(!ym){lx&&(lx=clearTimeout(lx));var e=t-c0;e>24?(t<1/0&&(lx=setTimeout(nM,t-x1.now()-UC)),Mg&&(Mg=clearInterval(Mg))):(Mg||(db=x1.now(),Mg=setInterval(Fke,SV)),ym=1,TV(nM))}}function sM(t,e,r){var n=new fb;return e=e==null?0:+e,n.restart(s=>{n.stop(),t(s+e)},e,r),n}var Rke=RC("start","end","cancel","interrupt"),Lke=[],BV=0,aM=1,GT=2,Q2=3,iM=4,qT=5,H2=6;function MC(t,e,r,n,s,a){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;Uke(t,r,{name:e,index:n,group:s,on:Rke,tween:Lke,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:BV})}function PB(t,e){var r=Jc(t,e);if(r.state>BV)throw new Error("too late; already scheduled");return r}function iA(t,e){var r=Jc(t,e);if(r.state>Q2)throw new Error("too late; already running");return r}function Jc(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Uke(t,e,r){var n=t.__transition,s;n[e]=r,r.timer=NV(a,0,r.time);function a(c){r.state=aM,r.timer.restart(i,r.delay,r.time),r.delay<=c&&i(c-r.delay)}function i(c){var d,h,p,m;if(r.state!==aM)return l();for(d in n)if(m=n[d],m.name===r.name){if(m.state===Q2)return sM(i);m.state===iM?(m.state=H2,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete n[d]):+d<e&&(m.state=H2,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete n[d])}if(sM(function(){r.state===Q2&&(r.state=iM,r.timer.restart(o,r.delay,r.time),o(c))}),r.state=GT,r.on.call("start",t,t.__data__,r.index,r.group),r.state===GT){for(r.state=Q2,s=new Array(p=r.tween.length),d=0,h=-1;d<p;++d)(m=r.tween[d].value.call(t,t.__data__,r.index,r.group))&&(s[++h]=m);s.length=h+1}}function o(c){for(var d=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(l),r.state=qT,1),h=-1,p=s.length;++h<p;)s[h].call(t,d);r.state===qT&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=H2,r.timer.stop(),delete n[e];for(var c in n)return;delete t.__transition}}function V2(t,e){var r=t.__transition,n,s,a=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){a=!1;continue}s=n.state>GT&&n.state<qT,n.state=H2,n.timer.stop(),n.on.call(s?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}a&&delete t.__transition}}function Mke(t){return this.each(function(){V2(this,t)})}function Pke(t,e){var r,n;return function(){var s=iA(this,t),a=s.tween;if(a!==r){n=r=a;for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}s.tween=n}}function Oke(t,e,r){var n,s;if(typeof r!="function")throw new Error;return function(){var a=iA(this,t),i=a.tween;if(i!==n){s=(n=i).slice();for(var o={name:e,value:r},l=0,c=s.length;l<c;++l)if(s[l].name===e){s[l]=o;break}l===c&&s.push(o)}a.tween=s}}function jke(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=Jc(this.node(),r).tween,s=0,a=n.length,i;s<a;++s)if((i=n[s]).name===t)return i.value;return null}return this.each((e==null?Pke:Oke)(r,t,e))}function OB(t,e,r){var n=t._id;return t.each(function(){var s=iA(this,n);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return Jc(s,n).value[e]}}function kV(t,e){var r;return(typeof e=="number"?nf:e instanceof g1?eM:(r=g1(e))?(e=r,eM):wke)(t,e)}function Qke(t){return function(){this.removeAttribute(t)}}function Hke(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vke(t,e,r){var n,s=r+"",a;return function(){var i=this.getAttribute(t);return i===s?null:i===n?a:a=e(n=i,r)}}function zke(t,e,r){var n,s=r+"",a;return function(){var i=this.getAttributeNS(t.space,t.local);return i===s?null:i===n?a:a=e(n=i,r)}}function Gke(t,e,r){var n,s,a;return function(){var i,o=r(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===n&&l===s?a:(s=l,a=e(n=i,o)))}}function qke(t,e,r){var n,s,a;return function(){var i,o=r(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===n&&l===s?a:(s=l,a=e(n=i,o)))}}function Kke(t,e){var r=LC(t),n=r==="transform"?_ke:kV;return this.attrTween(t,typeof e=="function"?(r.local?qke:Gke)(r,n,OB(this,"attr."+t,e)):e==null?(r.local?Hke:Qke)(r):(r.local?zke:Vke)(r,n,e))}function $ke(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Wke(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Yke(t,e){var r,n;function s(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&Wke(t,a)),r}return s._value=e,s}function Xke(t,e){var r,n;function s(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&$ke(t,a)),r}return s._value=e,s}function Jke(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=LC(t);return this.tween(r,(n.local?Yke:Xke)(n,e))}function Zke(t,e){return function(){PB(this,t).delay=+e.apply(this,arguments)}}function eIe(t,e){return e=+e,function(){PB(this,t).delay=e}}function tIe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zke:eIe)(e,t)):Jc(this.node(),e).delay}function rIe(t,e){return function(){iA(this,t).duration=+e.apply(this,arguments)}}function nIe(t,e){return e=+e,function(){iA(this,t).duration=e}}function sIe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?rIe:nIe)(e,t)):Jc(this.node(),e).duration}function aIe(t,e){if(typeof e!="function")throw new Error;return function(){iA(this,t).ease=e}}function iIe(t){var e=this._id;return arguments.length?this.each(aIe(e,t)):Jc(this.node(),e).ease}function oIe(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;iA(this,t).ease=r}}function lIe(t){if(typeof t!="function")throw new Error;return this.each(oIe(this._id,t))}function cIe(t){typeof t!="function"&&(t=lV(t));for(var e=this._groups,r=e.length,n=new Array(r),s=0;s<r;++s)for(var a=e[s],i=a.length,o=n[s]=[],l,c=0;c<i;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&o.push(l);return new ad(n,this._parents,this._name,this._id)}function uIe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,s=r.length,a=Math.min(n,s),i=new Array(n),o=0;o<a;++o)for(var l=e[o],c=r[o],d=l.length,h=i[o]=new Array(d),p,m=0;m<d;++m)(p=l[m]||c[m])&&(h[m]=p);for(;o<n;++o)i[o]=e[o];return new ad(i,this._parents,this._name,this._id)}function AIe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function dIe(t,e,r){var n,s,a=AIe(e)?PB:iA;return function(){var i=a(this,t),o=i.on;o!==n&&(s=(n=o).copy()).on(e,r),i.on=s}}function fIe(t,e){var r=this._id;return arguments.length<2?Jc(this.node(),r).on.on(t):this.each(dIe(r,t,e))}function hIe(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function pIe(){return this.on("end.remove",hIe(this._id))}function mIe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=RB(t));for(var n=this._groups,s=n.length,a=new Array(s),i=0;i<s;++i)for(var o=n[i],l=o.length,c=a[i]=new Array(l),d,h,p=0;p<l;++p)(d=o[p])&&(h=t.call(d,d.__data__,p,o))&&("__data__"in d&&(h.__data__=d.__data__),c[p]=h,MC(c[p],e,r,p,c,Jc(d,r)));return new ad(a,this._parents,e,r)}function gIe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=oV(t));for(var n=this._groups,s=n.length,a=[],i=[],o=0;o<s;++o)for(var l=n[o],c=l.length,d,h=0;h<c;++h)if(d=l[h]){for(var p=t.call(d,d.__data__,h,l),m,y=Jc(d,r),x=0,E=p.length;x<E;++x)(m=p[x])&&MC(m,e,r,x,p,y);a.push(p),i.push(d)}return new ad(a,i,e,r)}var xIe=rv.prototype.constructor;function vIe(){return new xIe(this._groups,this._parents)}function yIe(t,e){var r,n,s;return function(){var a=vm(this,t),i=(this.style.removeProperty(t),vm(this,t));return a===i?null:a===r&&i===n?s:s=e(r=a,n=i)}}function IV(t){return function(){this.style.removeProperty(t)}}function wIe(t,e,r){var n,s=r+"",a;return function(){var i=vm(this,t);return i===s?null:i===n?a:a=e(n=i,r)}}function bIe(t,e,r){var n,s,a;return function(){var i=vm(this,t),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),vm(this,t))),i===l?null:i===n&&l===s?a:(s=l,a=e(n=i,o))}}function CIe(t,e){var r,n,s,a="style."+e,i="end."+a,o;return function(){var l=iA(this,t),c=l.on,d=l.value[a]==null?o||(o=IV(e)):void 0;(c!==r||s!==d)&&(n=(r=c).copy()).on(i,s=d),l.on=n}}function EIe(t,e,r){var n=(t+="")=="transform"?Eke:kV;return e==null?this.styleTween(t,yIe(t,n)).on("end.style."+t,IV(t)):typeof e=="function"?this.styleTween(t,bIe(t,n,OB(this,"style."+t,e))).each(CIe(this._id,t)):this.styleTween(t,wIe(t,n,e),r).on("end.style."+t,null)}function _Ie(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function SIe(t,e,r){var n,s;function a(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&_Ie(t,i,r)),n}return a._value=e,a}function TIe(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,SIe(t,e,r??""))}function NIe(t){return function(){this.textContent=t}}function BIe(t){return function(){var e=t(this);this.textContent=e??""}}function kIe(t){return this.tween("text",typeof t=="function"?BIe(OB(this,"text",t)):NIe(t==null?"":t+""))}function IIe(t){return function(e){this.textContent=t.call(this,e)}}function FIe(t){var e,r;function n(){var s=t.apply(this,arguments);return s!==r&&(e=(r=s)&&IIe(s)),e}return n._value=t,n}function DIe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,FIe(t))}function RIe(){for(var t=this._name,e=this._id,r=FV(),n=this._groups,s=n.length,a=0;a<s;++a)for(var i=n[a],o=i.length,l,c=0;c<o;++c)if(l=i[c]){var d=Jc(l,e);MC(l,t,r,c,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new ad(n,this._parents,t,r)}function LIe(){var t,e,r=this,n=r._id,s=r.size();return new Promise(function(a,i){var o={value:i},l={value:function(){--s===0&&a()}};r.each(function(){var c=iA(this,n),d=c.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e}),s===0&&a()})}var UIe=0;function ad(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function FV(){return++UIe}var OA=rv.prototype;ad.prototype={constructor:ad,select:mIe,selectAll:gIe,selectChild:OA.selectChild,selectChildren:OA.selectChildren,filter:cIe,merge:uIe,selection:vIe,transition:RIe,call:OA.call,nodes:OA.nodes,node:OA.node,size:OA.size,empty:OA.empty,each:OA.each,on:fIe,attr:Kke,attrTween:Jke,style:EIe,styleTween:TIe,text:kIe,textTween:DIe,remove:pIe,tween:jke,delay:tIe,duration:sIe,ease:iIe,easeVarying:lIe,end:LIe,[Symbol.iterator]:OA[Symbol.iterator]};function MIe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var PIe={time:null,delay:0,duration:250,ease:MIe};function OIe(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function jIe(t){var e,r;t instanceof ad?(e=t._id,t=t._name):(e=FV(),(r=PIe).time=MB(),t=t==null?null:t+"");for(var n=this._groups,s=n.length,a=0;a<s;++a)for(var i=n[a],o=i.length,l,c=0;c<o;++c)(l=i[c])&&MC(l,t,e,c,i,r||OIe(l,e));return new ad(n,this._parents,t,e)}rv.prototype.interrupt=Mke;rv.prototype.transition=jIe;const s2=t=>()=>t;function QIe(t,{sourceEvent:e,target:r,transform:n,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:s}})}function zA(t,e,r){this.k=t,this.x=e,this.y=r}zA.prototype={constructor:zA,scale:function(t){return t===1?this:new zA(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new zA(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Bf=new zA(1,0,0);zA.prototype;function US(t){t.stopImmediatePropagation()}function Pg(t){t.preventDefault(),t.stopImmediatePropagation()}function HIe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function VIe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function oM(){return this.__zoom||Bf}function zIe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function GIe(){return navigator.maxTouchPoints||"ontouchstart"in this}function qIe(t,e,r){var n=t.invertX(e[0][0])-r[0][0],s=t.invertX(e[1][0])-r[1][0],a=t.invertY(e[0][1])-r[0][1],i=t.invertY(e[1][1])-r[1][1];return t.translate(s>n?(n+s)/2:Math.min(0,n)||Math.max(0,s),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function KIe(){var t=HIe,e=VIe,r=qIe,n=zIe,s=GIe,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=Bke,c=RC("start","zoom","end"),d,h,p,m=500,y=150,x=0,E=10;function S(H){H.property("__zoom",oM).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",j).filter(s).on("touchstart.zoom",R).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(H,te,Y,re){var V=H.selection?H.selection():H;V.property("__zoom",oM),H!==V?U(H,te,Y,re):V.interrupt().each(function(){F(this,arguments).event(re).start().zoom(null,typeof te=="function"?te.apply(this,arguments):te).end()})},S.scaleBy=function(H,te,Y,re){S.scaleTo(H,function(){var V=this.__zoom.k,J=typeof te=="function"?te.apply(this,arguments):te;return V*J},Y,re)},S.scaleTo=function(H,te,Y,re){S.transform(H,function(){var V=e.apply(this,arguments),J=this.__zoom,K=Y==null?I(V):typeof Y=="function"?Y.apply(this,arguments):Y,ae=J.invert(K),O=typeof te=="function"?te.apply(this,arguments):te;return r(D(B(J,O),K,ae),V,i)},Y,re)},S.translateBy=function(H,te,Y,re){S.transform(H,function(){return r(this.__zoom.translate(typeof te=="function"?te.apply(this,arguments):te,typeof Y=="function"?Y.apply(this,arguments):Y),e.apply(this,arguments),i)},null,re)},S.translateTo=function(H,te,Y,re,V){S.transform(H,function(){var J=e.apply(this,arguments),K=this.__zoom,ae=re==null?I(J):typeof re=="function"?re.apply(this,arguments):re;return r(Bf.translate(ae[0],ae[1]).scale(K.k).translate(typeof te=="function"?-te.apply(this,arguments):-te,typeof Y=="function"?-Y.apply(this,arguments):-Y),J,i)},re,V)};function B(H,te){return te=Math.max(a[0],Math.min(a[1],te)),te===H.k?H:new zA(te,H.x,H.y)}function D(H,te,Y){var re=te[0]-Y[0]*H.k,V=te[1]-Y[1]*H.k;return re===H.x&&V===H.y?H:new zA(H.k,re,V)}function I(H){return[(+H[0][0]+ +H[1][0])/2,(+H[0][1]+ +H[1][1])/2]}function U(H,te,Y,re){H.on("start.zoom",function(){F(this,arguments).event(re).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(re).end()}).tween("zoom",function(){var V=this,J=arguments,K=F(V,J).event(re),ae=e.apply(V,J),O=Y==null?I(ae):typeof Y=="function"?Y.apply(V,J):Y,W=Math.max(ae[1][0]-ae[0][0],ae[1][1]-ae[0][1]),Z=V.__zoom,ne=typeof te=="function"?te.apply(V,J):te,le=l(Z.invert(O).concat(W/Z.k),ne.invert(O).concat(W/ne.k));return function(ve){if(ve===1)ve=ne;else{var pe=le(ve),he=W/pe[2];ve=new zA(he,O[0]-pe[0]*he,O[1]-pe[1]*he)}K.zoom(null,ve)}})}function F(H,te,Y){return!Y&&H.__zooming||new C(H,te)}function C(H,te){this.that=H,this.args=te,this.active=0,this.sourceEvent=null,this.extent=e.apply(H,te),this.taps=0}C.prototype={event:function(H){return H&&(this.sourceEvent=H),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(H,te){return this.mouse&&H!=="mouse"&&(this.mouse[1]=te.invert(this.mouse[0])),this.touch0&&H!=="touch"&&(this.touch0[1]=te.invert(this.touch0[0])),this.touch1&&H!=="touch"&&(this.touch1[1]=te.invert(this.touch1[0])),this.that.__zoom=te,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(H){var te=nc(this.that).datum();c.call(H,this.that,new QIe(H,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:c}),te)}};function _(H,...te){if(!t.apply(this,arguments))return;var Y=F(this,te).event(H),re=this.__zoom,V=Math.max(a[0],Math.min(a[1],re.k*Math.pow(2,n.apply(this,arguments)))),J=Uu(H);if(Y.wheel)(Y.mouse[0][0]!==J[0]||Y.mouse[0][1]!==J[1])&&(Y.mouse[1]=re.invert(Y.mouse[0]=J)),clearTimeout(Y.wheel);else{if(re.k===V)return;Y.mouse=[J,re.invert(J)],V2(this),Y.start()}Pg(H),Y.wheel=setTimeout(K,y),Y.zoom("mouse",r(D(B(re,V),Y.mouse[0],Y.mouse[1]),Y.extent,i));function K(){Y.wheel=null,Y.end()}}function N(H,...te){if(p||!t.apply(this,arguments))return;var Y=H.currentTarget,re=F(this,te,!0).event(H),V=nc(H.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",W,!0),J=Uu(H,Y),K=H.clientX,ae=H.clientY;xV(H.view),US(H),re.mouse=[J,this.__zoom.invert(J)],V2(this),re.start();function O(Z){if(Pg(Z),!re.moved){var ne=Z.clientX-K,le=Z.clientY-ae;re.moved=ne*ne+le*le>x}re.event(Z).zoom("mouse",r(D(re.that.__zoom,re.mouse[0]=Uu(Z,Y),re.mouse[1]),re.extent,i))}function W(Z){V.on("mousemove.zoom mouseup.zoom",null),vV(Z.view,re.moved),Pg(Z),re.event(Z).end()}}function j(H,...te){if(t.apply(this,arguments)){var Y=this.__zoom,re=Uu(H.changedTouches?H.changedTouches[0]:H,this),V=Y.invert(re),J=Y.k*(H.shiftKey?.5:2),K=r(D(B(Y,J),re,V),e.apply(this,te),i);Pg(H),o>0?nc(this).transition().duration(o).call(U,K,re,H):nc(this).call(S.transform,K,re,H)}}function R(H,...te){if(t.apply(this,arguments)){var Y=H.touches,re=Y.length,V=F(this,te,H.changedTouches.length===re).event(H),J,K,ae,O;for(US(H),K=0;K<re;++K)ae=Y[K],O=Uu(ae,this),O=[O,this.__zoom.invert(O),ae.identifier],V.touch0?!V.touch1&&V.touch0[2]!==O[2]&&(V.touch1=O,V.taps=0):(V.touch0=O,J=!0,V.taps=1+!!d);d&&(d=clearTimeout(d)),J&&(V.taps<2&&(h=O[0],d=setTimeout(function(){d=null},m)),V2(this),V.start())}}function L(H,...te){if(this.__zooming){var Y=F(this,te).event(H),re=H.changedTouches,V=re.length,J,K,ae,O;for(Pg(H),J=0;J<V;++J)K=re[J],ae=Uu(K,this),Y.touch0&&Y.touch0[2]===K.identifier?Y.touch0[0]=ae:Y.touch1&&Y.touch1[2]===K.identifier&&(Y.touch1[0]=ae);if(K=Y.that.__zoom,Y.touch1){var W=Y.touch0[0],Z=Y.touch0[1],ne=Y.touch1[0],le=Y.touch1[1],ve=(ve=ne[0]-W[0])*ve+(ve=ne[1]-W[1])*ve,pe=(pe=le[0]-Z[0])*pe+(pe=le[1]-Z[1])*pe;K=B(K,Math.sqrt(ve/pe)),ae=[(W[0]+ne[0])/2,(W[1]+ne[1])/2],O=[(Z[0]+le[0])/2,(Z[1]+le[1])/2]}else if(Y.touch0)ae=Y.touch0[0],O=Y.touch0[1];else return;Y.zoom("touch",r(D(K,ae,O),Y.extent,i))}}function Q(H,...te){if(this.__zooming){var Y=F(this,te).event(H),re=H.changedTouches,V=re.length,J,K;for(US(H),p&&clearTimeout(p),p=setTimeout(function(){p=null},m),J=0;J<V;++J)K=re[J],Y.touch0&&Y.touch0[2]===K.identifier?delete Y.touch0:Y.touch1&&Y.touch1[2]===K.identifier&&delete Y.touch1;if(Y.touch1&&!Y.touch0&&(Y.touch0=Y.touch1,delete Y.touch1),Y.touch0)Y.touch0[1]=this.__zoom.invert(Y.touch0[0]);else if(Y.end(),Y.taps===2&&(K=Uu(K,this),Math.hypot(h[0]-K[0],h[1]-K[1])<E)){var ae=nc(this).on("dblclick.zoom");ae&&ae.apply(this,arguments)}}}return S.wheelDelta=function(H){return arguments.length?(n=typeof H=="function"?H:s2(+H),S):n},S.filter=function(H){return arguments.length?(t=typeof H=="function"?H:s2(!!H),S):t},S.touchable=function(H){return arguments.length?(s=typeof H=="function"?H:s2(!!H),S):s},S.extent=function(H){return arguments.length?(e=typeof H=="function"?H:s2([[+H[0][0],+H[0][1]],[+H[1][0],+H[1][1]]]),S):e},S.scaleExtent=function(H){return arguments.length?(a[0]=+H[0],a[1]=+H[1],S):[a[0],a[1]]},S.translateExtent=function(H){return arguments.length?(i[0][0]=+H[0][0],i[1][0]=+H[1][0],i[0][1]=+H[0][1],i[1][1]=+H[1][1],S):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},S.constrain=function(H){return arguments.length?(r=H,S):r},S.duration=function(H){return arguments.length?(o=+H,S):o},S.interpolate=function(H){return arguments.length?(l=H,S):l},S.on=function(){var H=c.on.apply(c,arguments);return H===c?S:H},S.clickDistance=function(H){return arguments.length?(x=(H=+H)*H,S):Math.sqrt(x)},S.tapDistance=function(H){return arguments.length?(E=+H,S):E},S}var $Ie=L8();const PC=q.createContext(null),WIe=PC.Provider,id={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},DV=id.error001();function Ps(t,e){const r=q.useContext(PC);if(r===null)throw new Error(DV);return aV(r,t,e)}const ci=()=>{const t=q.useContext(PC);if(t===null)throw new Error(DV);return q.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},YIe=t=>t.userSelectionActive?"none":"all";function RV({position:t,children:e,className:r,style:n,...s}){const a=Ps(YIe),i=`${t}`.split("-");return dt.createElement("div",{className:vo(["react-flow__panel",r,...i]),style:{...n,pointerEvents:a},...s},e)}function XIe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:dt.createElement(RV,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},dt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const JIe=({x:t,y:e,label:r,labelStyle:n={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:c,...d})=>{const h=q.useRef(null),[p,m]=q.useState({x:0,y:0,width:0,height:0}),y=vo(["react-flow__edge-textwrapper",c]);return q.useEffect(()=>{if(h.current){const x=h.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:dt.createElement("g",{transform:`translate(${t-p.width/2} ${e-p.height/2})`,className:y,visibility:p.width?"visible":"hidden",...d},s&&dt.createElement("rect",{width:p.width+2*i[0],x:-i[0],y:-i[1],height:p.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),dt.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:h,style:n},r),l)};var ZIe=q.memo(JIe);const jB=t=>({width:t.offsetWidth,height:t.offsetHeight}),wm=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),QB=(t={x:0,y:0},e)=>({x:wm(t.x,e[0][0],e[1][0]),y:wm(t.y,e[0][1],e[1][1])}),lM=(t,e,r)=>t<e?wm(Math.abs(t-e),1,50)/50:t>r?-wm(Math.abs(t-r),1,50)/50:0,LV=(t,e)=>{const r=lM(t.x,35,e.width-35)*20,n=lM(t.y,35,e.height-35)*20;return[r,n]},UV=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},e3e=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),HB=({x:t,y:e,width:r,height:n})=>({x:t,y:e,x2:t+r,y2:e+n}),t3e=({x:t,y:e,x2:r,y2:n})=>({x:t,y:e,width:r-t,height:n-e}),cM=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),KT=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),n=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*n)},r3e=t=>oc(t.width)&&oc(t.height)&&oc(t.x)&&oc(t.y),oc=t=>!isNaN(t)&&isFinite(t),Xs=Symbol.for("internals"),MV=["Enter"," ","Escape"],n3e=(t,e)=>{},s3e=t=>"nativeEvent"in t;function $T(t){var s,a;const e=s3e(t)?t.nativeEvent:t,r=((a=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:a[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const PV=t=>"clientX"in t,kf=(t,e)=>{var a,i;const r=PV(t),n=r?t.clientX:(a=t.touches)==null?void 0:a[0].clientX,s=r?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:n-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},hb=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},sv=({id:t,path:e,labelX:r,labelY:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:p,interactionWidth:m=20})=>dt.createElement(dt.Fragment,null,dt.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:p}),m&&dt.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),s&&oc(r)&&oc(n)?dt.createElement(ZIe,{x:r,y:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c}):null);sv.displayName="BaseEdge";function Og(t,e,r){return r===void 0?r:n=>{const s=e().edges.find(a=>a.id===t);s&&r(n,{...s})}}function OV({sourceX:t,sourceY:e,targetX:r,targetY:n}){const s=Math.abs(r-t)/2,a=r<t?r+s:r-s,i=Math.abs(n-e)/2,o=n<e?n+i:n-i;return[a,o,s,i]}function jV({sourceX:t,sourceY:e,targetX:r,targetY:n,sourceControlX:s,sourceControlY:a,targetControlX:i,targetControlY:o}){const l=t*.125+s*.375+i*.375+r*.125,c=e*.125+a*.375+o*.375+n*.125,d=Math.abs(l-t),h=Math.abs(c-e);return[l,c,d,h]}var u0;(function(t){t.Strict="strict",t.Loose="loose"})(u0||(u0={}));var Uh;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Uh||(Uh={}));var v1;(function(t){t.Partial="partial",t.Full="full"})(v1||(v1={}));var Af;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Af||(Af={}));var pb;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(pb||(pb={}));var cr;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(cr||(cr={}));function uM({pos:t,x1:e,y1:r,x2:n,y2:s}){return t===cr.Left||t===cr.Right?[.5*(e+n),r]:[e,.5*(r+s)]}function QV({sourceX:t,sourceY:e,sourcePosition:r=cr.Bottom,targetX:n,targetY:s,targetPosition:a=cr.Top}){const[i,o]=uM({pos:r,x1:t,y1:e,x2:n,y2:s}),[l,c]=uM({pos:a,x1:n,y1:s,x2:t,y2:e}),[d,h,p,m]=jV({sourceX:t,sourceY:e,targetX:n,targetY:s,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:c});return[`M${t},${e} C${i},${o} ${l},${c} ${n},${s}`,d,h,p,m]}const VB=q.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:s=cr.Bottom,targetPosition:a=cr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:y,interactionWidth:x})=>{const[E,S,B]=QV({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:n,targetPosition:a});return dt.createElement(sv,{path:E,labelX:S,labelY:B,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:y,interactionWidth:x})});VB.displayName="SimpleBezierEdge";const AM={[cr.Left]:{x:-1,y:0},[cr.Right]:{x:1,y:0},[cr.Top]:{x:0,y:-1},[cr.Bottom]:{x:0,y:1}},a3e=({source:t,sourcePosition:e=cr.Bottom,target:r})=>e===cr.Left||e===cr.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},dM=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function i3e({source:t,sourcePosition:e=cr.Bottom,target:r,targetPosition:n=cr.Top,center:s,offset:a}){const i=AM[e],o=AM[n],l={x:t.x+i.x*a,y:t.y+i.y*a},c={x:r.x+o.x*a,y:r.y+o.y*a},d=a3e({source:l,sourcePosition:e,target:c}),h=d.x!==0?"x":"y",p=d[h];let m=[],y,x;const E={x:0,y:0},S={x:0,y:0},[B,D,I,U]=OV({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(i[h]*o[h]===-1){y=s.x??B,x=s.y??D;const C=[{x:y,y:l.y},{x:y,y:c.y}],_=[{x:l.x,y:x},{x:c.x,y:x}];i[h]===p?m=h==="x"?C:_:m=h==="x"?_:C}else{const C=[{x:l.x,y:c.y}],_=[{x:c.x,y:l.y}];if(h==="x"?m=i.x===p?_:C:m=i.y===p?C:_,e===n){const Q=Math.abs(t[h]-r[h]);if(Q<=a){const H=Math.min(a-1,a-Q);i[h]===p?E[h]=(l[h]>t[h]?-1:1)*H:S[h]=(c[h]>r[h]?-1:1)*H}}if(e!==n){const Q=h==="x"?"y":"x",H=i[h]===o[Q],te=l[Q]>c[Q],Y=l[Q]<c[Q];(i[h]===1&&(!H&&te||H&&Y)||i[h]!==1&&(!H&&Y||H&&te))&&(m=h==="x"?C:_)}const N={x:l.x+E.x,y:l.y+E.y},j={x:c.x+S.x,y:c.y+S.y},R=Math.max(Math.abs(N.x-m[0].x),Math.abs(j.x-m[0].x)),L=Math.max(Math.abs(N.y-m[0].y),Math.abs(j.y-m[0].y));R>=L?(y=(N.x+j.x)/2,x=m[0].y):(y=m[0].x,x=(N.y+j.y)/2)}return[[t,{x:l.x+E.x,y:l.y+E.y},...m,{x:c.x+S.x,y:c.y+S.y},r],y,x,I,U]}function o3e(t,e,r,n){const s=Math.min(dM(t,e)/2,dM(e,r)/2,n),{x:a,y:i}=e;if(t.x===a&&a===r.x||t.y===i&&i===r.y)return`L${a} ${i}`;if(t.y===i){const c=t.x<r.x?-1:1,d=t.y<r.y?1:-1;return`L ${a+s*c},${i}Q ${a},${i} ${a},${i+s*d}`}const o=t.x<r.x?1:-1,l=t.y<r.y?-1:1;return`L ${a},${i+s*l}Q ${a},${i} ${a+s*o},${i}`}function WT({sourceX:t,sourceY:e,sourcePosition:r=cr.Bottom,targetX:n,targetY:s,targetPosition:a=cr.Top,borderRadius:i=5,centerX:o,centerY:l,offset:c=20}){const[d,h,p,m,y]=i3e({source:{x:t,y:e},sourcePosition:r,target:{x:n,y:s},targetPosition:a,center:{x:o,y:l},offset:c});return[d.reduce((E,S,B)=>{let D="";return B>0&&B<d.length-1?D=o3e(d[B-1],S,d[B+1],i):D=`${B===0?"M":"L"}${S.x} ${S.y}`,E+=D,E},""),h,p,m,y]}const OC=q.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:d,sourcePosition:h=cr.Bottom,targetPosition:p=cr.Top,markerEnd:m,markerStart:y,pathOptions:x,interactionWidth:E})=>{const[S,B,D]=WT({sourceX:t,sourceY:e,sourcePosition:h,targetX:r,targetY:n,targetPosition:p,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return dt.createElement(sv,{path:S,labelX:B,labelY:D,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:m,markerStart:y,interactionWidth:E})});OC.displayName="SmoothStepEdge";const zB=q.memo(t=>{var e;return dt.createElement(OC,{...t,pathOptions:q.useMemo(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});zB.displayName="StepEdge";function l3e({sourceX:t,sourceY:e,targetX:r,targetY:n}){const[s,a,i,o]=OV({sourceX:t,sourceY:e,targetX:r,targetY:n});return[`M ${t},${e}L ${r},${n}`,s,a,i,o]}const GB=q.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:p,interactionWidth:m})=>{const[y,x,E]=l3e({sourceX:t,sourceY:e,targetX:r,targetY:n});return dt.createElement(sv,{path:y,labelX:x,labelY:E,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:p,interactionWidth:m})});GB.displayName="StraightEdge";function a2(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function fM({pos:t,x1:e,y1:r,x2:n,y2:s,c:a}){switch(t){case cr.Left:return[e-a2(e-n,a),r];case cr.Right:return[e+a2(n-e,a),r];case cr.Top:return[e,r-a2(r-s,a)];case cr.Bottom:return[e,r+a2(s-r,a)]}}function HV({sourceX:t,sourceY:e,sourcePosition:r=cr.Bottom,targetX:n,targetY:s,targetPosition:a=cr.Top,curvature:i=.25}){const[o,l]=fM({pos:r,x1:t,y1:e,x2:n,y2:s,c:i}),[c,d]=fM({pos:a,x1:n,y1:s,x2:t,y2:e,c:i}),[h,p,m,y]=jV({sourceX:t,sourceY:e,targetX:n,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${t},${e} C${o},${l} ${c},${d} ${n},${s}`,h,p,m,y]}const mb=q.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:s=cr.Bottom,targetPosition:a=cr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:y,pathOptions:x,interactionWidth:E})=>{const[S,B,D]=HV({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:n,targetPosition:a,curvature:x==null?void 0:x.curvature});return dt.createElement(sv,{path:S,labelX:B,labelY:D,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:y,interactionWidth:E})});mb.displayName="BezierEdge";const qB=q.createContext(null),c3e=qB.Provider;qB.Consumer;const u3e=()=>q.useContext(qB),A3e=t=>"id"in t&&"source"in t&&"target"in t,d3e=({source:t,sourceHandle:e,target:r,targetHandle:n})=>`reactflow__edge-${t}${e||""}-${r}${n||""}`,YT=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("&")}`,f3e=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),h3e=(t,e)=>{if(!t.source||!t.target)return e;let r;return A3e(t)?r={...t}:r={...t,id:d3e(t)},f3e(r,e)?e:e.concat(r)},XT=({x:t,y:e},[r,n,s],a,[i,o])=>{const l={x:(t-r)/s,y:(e-n)/s};return a?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},VV=({x:t,y:e},[r,n,s])=>({x:t*s+r,y:e*s+n}),rm=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(t.width??0)*e[0],n=(t.height??0)*e[1],s={x:t.position.x-r,y:t.position.y-n};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-n}:s}},KB=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((n,s)=>{const{x:a,y:i}=rm(s,e).positionAbsolute;return e3e(n,HB({x:a,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return t3e(r)},zV=(t,e,[r,n,s]=[0,0,1],a=!1,i=!1,o=[0,0])=>{const l={x:(e.x-r)/s,y:(e.y-n)/s,width:e.width/s,height:e.height/s},c=[];return t.forEach(d=>{const{width:h,height:p,selectable:m=!0,hidden:y=!1}=d;if(i&&!m||y)return!1;const{positionAbsolute:x}=rm(d,o),E={x:x.x,y:x.y,width:h||0,height:p||0},S=KT(l,E),B=typeof h>"u"||typeof p>"u"||h===null||p===null,D=a&&S>0,I=(h||0)*(p||0);(B||D||S>=I||d.dragging)&&c.push(d)}),c},GV=(t,e)=>{const r=t.map(n=>n.id);return e.filter(n=>r.includes(n.source)||r.includes(n.target))},qV=(t,e,r,n,s,a=.1)=>{const i=e/(t.width*(1+a)),o=r/(t.height*(1+a)),l=Math.min(i,o),c=wm(l,n,s),d=t.x+t.width/2,h=t.y+t.height/2,p=e/2-d*c,m=r/2-h*c;return{x:p,y:m,zoom:c}},Sh=(t,e=0)=>t.transition().duration(e);function hM(t,e,r,n){return(e[r]||[]).reduce((s,a)=>{var i,o;return`${t.id}-${a.id}-${r}`!==n&&s.push({id:a.id||null,type:r,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+a.y+a.height/2}),s},[])}function p3e(t,e,r,n,s,a){const{x:i,y:o}=kf(t),c=e.elementsFromPoint(i,o).find(y=>y.classList.contains("react-flow__handle"));if(c){const y=c.getAttribute("data-nodeid");if(y){const x=$B(void 0,c),E=c.getAttribute("data-handleid"),S=a({nodeId:y,id:E,type:x});if(S){const B=s.find(D=>D.nodeId===y&&D.type===x&&D.id===E);return{handle:{id:E,type:x,nodeId:y,x:(B==null?void 0:B.x)||r.x,y:(B==null?void 0:B.y)||r.y},validHandleResult:S}}}}let d=[],h=1/0;if(s.forEach(y=>{const x=Math.sqrt((y.x-r.x)**2+(y.y-r.y)**2);if(x<=n){const E=a(y);x<=h&&(x<h?d=[{handle:y,validHandleResult:E}]:x===h&&d.push({handle:y,validHandleResult:E}),h=x)}}),!d.length)return{handle:null,validHandleResult:KV()};if(d.length===1)return d[0];const p=d.some(({validHandleResult:y})=>y.isValid),m=d.some(({handle:y})=>y.type==="target");return d.find(({handle:y,validHandleResult:x})=>m?y.type==="target":p?x.isValid:!0)||d[0]}const m3e={source:null,target:null,sourceHandle:null,targetHandle:null},KV=()=>({handleDomNode:null,isValid:!1,connection:m3e,endHandle:null});function $V(t,e,r,n,s,a,i){const o=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),c={...KV(),handleDomNode:l};if(l){const d=$B(void 0,l),h=l.getAttribute("data-nodeid"),p=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),y=l.classList.contains("connectableend"),x={source:o?h:r,sourceHandle:o?p:n,target:o?r:h,targetHandle:o?n:p};c.connection=x,m&&y&&(e===u0.Strict?o&&d==="source"||!o&&d==="target":h!==r||p!==n)&&(c.endHandle={nodeId:h,handleId:p,type:d},c.isValid=a(x))}return c}function g3e({nodes:t,nodeId:e,handleId:r,handleType:n}){return t.reduce((s,a)=>{if(a[Xs]){const{handleBounds:i}=a[Xs];let o=[],l=[];i&&(o=hM(a,i,"source",`${e}-${r}-${n}`),l=hM(a,i,"target",`${e}-${r}-${n}`)),s.push(...o,...l)}return s},[])}function $B(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function MS(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function x3e(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function WV({event:t,handleId:e,nodeId:r,onConnect:n,isTarget:s,getState:a,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:c}){const d=UV(t.target),{connectionMode:h,domNode:p,autoPanOnConnect:m,connectionRadius:y,onConnectStart:x,panBy:E,getNodes:S,cancelConnection:B}=a();let D=0,I;const{x:U,y:F}=kf(t),C=d==null?void 0:d.elementFromPoint(U,F),_=$B(l,C),N=p==null?void 0:p.getBoundingClientRect();if(!N||!_)return;let j,R=kf(t,N),L=!1,Q=null,H=!1,te=null;const Y=g3e({nodes:S(),nodeId:r,handleId:e,handleType:_}),re=()=>{if(!m)return;const[K,ae]=LV(R,N);E({x:K,y:ae}),D=requestAnimationFrame(re)};i({connectionPosition:R,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:_,connectionStartHandle:{nodeId:r,handleId:e,type:_},connectionEndHandle:null}),x==null||x(t,{nodeId:r,handleId:e,handleType:_});function V(K){const{transform:ae}=a();R=kf(K,N);const{handle:O,validHandleResult:W}=p3e(K,d,XT(R,ae,!1,[1,1]),y,Y,Z=>$V(Z,h,r,e,s?"target":"source",o,d));if(I=O,L||(re(),L=!0),te=W.handleDomNode,Q=W.connection,H=W.isValid,i({connectionPosition:I&&H?VV({x:I.x,y:I.y},ae):R,connectionStatus:x3e(!!I,H),connectionEndHandle:W.endHandle}),!I&&!H&&!te)return MS(j);Q.source!==Q.target&&te&&(MS(j),j=te,te.classList.add("connecting","react-flow__handle-connecting"),te.classList.toggle("valid",H),te.classList.toggle("react-flow__handle-valid",H))}function J(K){var ae,O;(I||te)&&Q&&H&&(n==null||n(Q)),(O=(ae=a()).onConnectEnd)==null||O.call(ae,K),l&&(c==null||c(K)),MS(j),B(),cancelAnimationFrame(D),L=!1,H=!1,Q=null,te=null,d.removeEventListener("mousemove",V),d.removeEventListener("mouseup",J),d.removeEventListener("touchmove",V),d.removeEventListener("touchend",J)}d.addEventListener("mousemove",V),d.addEventListener("mouseup",J),d.addEventListener("touchmove",V),d.addEventListener("touchend",J)}const pM=()=>!0,v3e=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),y3e=(t,e,r)=>n=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:i}=n;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===r||(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===r}},YV=q.forwardRef(({type:t="source",position:e=cr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:i,onConnect:o,children:l,className:c,onMouseDown:d,onTouchStart:h,...p},m)=>{var N,j;const y=i||null,x=t==="target",E=ci(),S=u3e(),{connectOnClick:B,noPanClassName:D}=Ps(v3e,io),{connecting:I,clickConnecting:U}=Ps(y3e(S,y,t),io);S||(j=(N=E.getState()).onError)==null||j.call(N,"010",id.error010());const F=R=>{const{defaultEdgeOptions:L,onConnect:Q,hasDefaultEdges:H}=E.getState(),te={...L,...R};if(H){const{edges:Y,setEdges:re}=E.getState();re(h3e(te,Y))}Q==null||Q(te),o==null||o(te)},C=R=>{if(!S)return;const L=PV(R);s&&(L&&R.button===0||!L)&&WV({event:R,handleId:y,nodeId:S,onConnect:F,isTarget:x,getState:E.getState,setState:E.setState,isValidConnection:r||E.getState().isValidConnection||pM}),L?d==null||d(R):h==null||h(R)},_=R=>{const{onClickConnectStart:L,onClickConnectEnd:Q,connectionClickStartHandle:H,connectionMode:te,isValidConnection:Y}=E.getState();if(!S||!H&&!s)return;if(!H){L==null||L(R,{nodeId:S,handleId:y,handleType:t}),E.setState({connectionClickStartHandle:{nodeId:S,type:t,handleId:y}});return}const re=UV(R.target),V=r||Y||pM,{connection:J,isValid:K}=$V({nodeId:S,id:y,type:t},te,H.nodeId,H.handleId||null,H.type,V,re);K&&F(J),Q==null||Q(R),E.setState({connectionClickStartHandle:null})};return dt.createElement("div",{"data-handleid":y,"data-nodeid":S,"data-handlepos":e,"data-id":`${S}-${y}-${t}`,className:vo(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",D,c,{source:!x,target:x,connectable:n,connectablestart:s,connectableend:a,connecting:U,connectionindicator:n&&(s&&!I||a&&I)}]),onMouseDown:C,onTouchStart:C,onClick:B?_:void 0,ref:m,...p},l)});YV.displayName="Handle";var bm=q.memo(YV);const XV=({data:t,isConnectable:e,targetPosition:r=cr.Top,sourcePosition:n=cr.Bottom})=>dt.createElement(dt.Fragment,null,dt.createElement(bm,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,dt.createElement(bm,{type:"source",position:n,isConnectable:e}));XV.displayName="DefaultNode";var JT=q.memo(XV);const JV=({data:t,isConnectable:e,sourcePosition:r=cr.Bottom})=>dt.createElement(dt.Fragment,null,t==null?void 0:t.label,dt.createElement(bm,{type:"source",position:r,isConnectable:e}));JV.displayName="InputNode";var ZV=q.memo(JV);const ez=({data:t,isConnectable:e,targetPosition:r=cr.Top})=>dt.createElement(dt.Fragment,null,dt.createElement(bm,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label);ez.displayName="OutputNode";var tz=q.memo(ez);const WB=()=>null;WB.displayName="GroupNode";const w3e=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),i2=t=>t.id;function b3e(t,e){return io(t.selectedNodes.map(i2),e.selectedNodes.map(i2))&&io(t.selectedEdges.map(i2),e.selectedEdges.map(i2))}const rz=q.memo(({onSelectionChange:t})=>{const e=ci(),{selectedNodes:r,selectedEdges:n}=Ps(w3e,b3e);return q.useEffect(()=>{const s={nodes:r,edges:n};t==null||t(s),e.getState().onSelectionChange.forEach(a=>a(s))},[r,n,t]),null});rz.displayName="SelectionListener";const C3e=t=>!!t.onSelectionChange;function E3e({onSelectionChange:t}){const e=Ps(C3e);return t||e?dt.createElement(rz,{onSelectionChange:t}):null}const _3e=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function fp(t,e){q.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function nn(t,e,r){q.useEffect(()=>{typeof e<"u"&&r({[t]:e})},[e])}const S3e=({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:s,onConnectStart:a,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:d,nodesFocusable:h,edgesFocusable:p,edgesUpdatable:m,elevateNodesOnSelect:y,minZoom:x,maxZoom:E,nodeExtent:S,onNodesChange:B,onEdgesChange:D,elementsSelectable:I,connectionMode:U,snapGrid:F,snapToGrid:C,translateExtent:_,connectOnClick:N,defaultEdgeOptions:j,fitView:R,fitViewOptions:L,onNodesDelete:Q,onEdgesDelete:H,onNodeDrag:te,onNodeDragStart:Y,onNodeDragStop:re,onSelectionDrag:V,onSelectionDragStart:J,onSelectionDragStop:K,noPanClassName:ae,nodeOrigin:O,rfId:W,autoPanOnConnect:Z,autoPanOnNodeDrag:ne,onError:le,connectionRadius:ve,isValidConnection:pe,nodeDragThreshold:he})=>{const{setNodes:de,setEdges:ce,setDefaultNodesAndEdges:oe,setMinZoom:Re,setMaxZoom:qe,setTranslateExtent:Ie,setNodeExtent:Ee,reset:De}=Ps(_3e,io),je=ci();return q.useEffect(()=>{const We=n==null?void 0:n.map(ct=>({...ct,...j}));return oe(r,We),()=>{De()}},[]),nn("defaultEdgeOptions",j,je.setState),nn("connectionMode",U,je.setState),nn("onConnect",s,je.setState),nn("onConnectStart",a,je.setState),nn("onConnectEnd",i,je.setState),nn("onClickConnectStart",o,je.setState),nn("onClickConnectEnd",l,je.setState),nn("nodesDraggable",c,je.setState),nn("nodesConnectable",d,je.setState),nn("nodesFocusable",h,je.setState),nn("edgesFocusable",p,je.setState),nn("edgesUpdatable",m,je.setState),nn("elementsSelectable",I,je.setState),nn("elevateNodesOnSelect",y,je.setState),nn("snapToGrid",C,je.setState),nn("snapGrid",F,je.setState),nn("onNodesChange",B,je.setState),nn("onEdgesChange",D,je.setState),nn("connectOnClick",N,je.setState),nn("fitViewOnInit",R,je.setState),nn("fitViewOnInitOptions",L,je.setState),nn("onNodesDelete",Q,je.setState),nn("onEdgesDelete",H,je.setState),nn("onNodeDrag",te,je.setState),nn("onNodeDragStart",Y,je.setState),nn("onNodeDragStop",re,je.setState),nn("onSelectionDrag",V,je.setState),nn("onSelectionDragStart",J,je.setState),nn("onSelectionDragStop",K,je.setState),nn("noPanClassName",ae,je.setState),nn("nodeOrigin",O,je.setState),nn("rfId",W,je.setState),nn("autoPanOnConnect",Z,je.setState),nn("autoPanOnNodeDrag",ne,je.setState),nn("onError",le,je.setState),nn("connectionRadius",ve,je.setState),nn("isValidConnection",pe,je.setState),nn("nodeDragThreshold",he,je.setState),fp(t,de),fp(e,ce),fp(x,Re),fp(E,qe),fp(_,Ie),fp(S,Ee),null},mM={display:"none"},T3e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},nz="react-flow__node-desc",sz="react-flow__edge-desc",N3e="react-flow__aria-live",B3e=t=>t.ariaLiveMessage;function k3e({rfId:t}){const e=Ps(B3e);return dt.createElement("div",{id:`${N3e}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:T3e},e)}function I3e({rfId:t,disableKeyboardA11y:e}){return dt.createElement(dt.Fragment,null,dt.createElement("div",{id:`${nz}-${t}`,style:mM},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),dt.createElement("div",{id:`${sz}-${t}`,style:mM},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&dt.createElement(k3e,{rfId:t}))}var y1=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,n]=q.useState(!1),s=q.useRef(!1),a=q.useRef(new Set([])),[i,o]=q.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=c.reduce((h,p)=>h.concat(...p),[]);return[c,d]}return[[],[]]},[t]);return q.useEffect(()=>{const l=typeof document<"u"?document:null,c=(e==null?void 0:e.target)||l;if(t!==null){const d=m=>{if(s.current=m.ctrlKey||m.metaKey||m.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&$T(m))return!1;const x=xM(m.code,o);a.current.add(m[x]),gM(i,a.current,!1)&&(m.preventDefault(),n(!0))},h=m=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&$T(m))return!1;const x=xM(m.code,o);gM(i,a.current,!0)?(n(!1),a.current.clear()):a.current.delete(m[x]),m.key==="Meta"&&a.current.clear(),s.current=!1},p=()=>{a.current.clear(),n(!1)};return c==null||c.addEventListener("keydown",d),c==null||c.addEventListener("keyup",h),window.addEventListener("blur",p),()=>{c==null||c.removeEventListener("keydown",d),c==null||c.removeEventListener("keyup",h),window.removeEventListener("blur",p)}}},[t,n]),r};function gM(t,e,r){return t.filter(n=>r||n.length===e.size).some(n=>n.every(s=>e.has(s)))}function xM(t,e){return e.includes(t)?"code":"key"}function az(t,e,r,n){var o,l;const s=t.parentNode||t.parentId;if(!s)return r;const a=e.get(s),i=rm(a,n);return az(a,e,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=a[Xs])==null?void 0:o.z)??0)>(r.z??0)?((l=a[Xs])==null?void 0:l.z)??0:r.z??0},n)}function iz(t,e,r){t.forEach(n=>{var a;const s=n.parentNode||n.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||r!=null&&r[n.id]){const{x:i,y:o,z:l}=az(n,t,{...n.position,z:((a=n[Xs])==null?void 0:a.z)??0},e);n.positionAbsolute={x:i,y:o},n[Xs].z=l,r!=null&&r[n.id]&&(n[Xs].isParent=!0)}})}function PS(t,e,r,n){const s=new Map,a={},i=n?1e3:0;return t.forEach(o=>{var m;const l=(oc(o.zIndex)?o.zIndex:0)+(o.selected?i:0),c=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(a[h]=!0);const p=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==o.type;Object.defineProperty(d,Xs,{enumerable:!1,value:{handleBounds:p||(m=c==null?void 0:c[Xs])==null?void 0:m.handleBounds,z:l}}),s.set(o.id,d)}),iz(s,r,a),s}function oz(t,e={}){const{getNodes:r,width:n,height:s,minZoom:a,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:d,nodeOrigin:h}=t(),p=e.initial&&!c&&d;if(o&&l&&(p||!e.initial)){const y=r().filter(E=>{var B;const S=e.includeHiddenNodes?E.width&&E.height:!E.hidden;return(B=e.nodes)!=null&&B.length?S&&e.nodes.some(D=>D.id===E.id):S}),x=y.every(E=>E.width&&E.height);if(y.length>0&&x){const E=KB(y,h),{x:S,y:B,zoom:D}=qV(E,n,s,e.minZoom??a,e.maxZoom??i,e.padding??.1),I=Bf.translate(S,B).scale(D);return typeof e.duration=="number"&&e.duration>0?o.transform(Sh(l,e.duration),I):o.transform(l,I),!0}}return!1}function F3e(t,e){return t.forEach(r=>{const n=e.get(r.id);n&&e.set(n.id,{...n,[Xs]:n[Xs],selected:r.selected})}),new Map(e)}function D3e(t,e){return e.map(r=>{const n=t.find(s=>s.id===r.id);return n&&(r.selected=n.selected),r})}function o2({changedNodes:t,changedEdges:e,get:r,set:n}){const{nodeInternals:s,edges:a,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:c}=r();t!=null&&t.length&&(l&&n({nodeInternals:F3e(t,s)}),i==null||i(t)),e!=null&&e.length&&(c&&n({edges:D3e(e,a)}),o==null||o(e))}const hp=()=>{},R3e={zoomIn:hp,zoomOut:hp,zoomTo:hp,getZoom:()=>1,setViewport:hp,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:hp,fitBounds:hp,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},L3e=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),U3e=()=>{const t=ci(),{d3Zoom:e,d3Selection:r}=Ps(L3e,io);return q.useMemo(()=>r&&e?{zoomIn:s=>e.scaleBy(Sh(r,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(Sh(r,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(Sh(r,a==null?void 0:a.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[i,o,l]=t.getState().transform,c=Bf.translate(s.x??i,s.y??o).scale(s.zoom??l);e.transform(Sh(r,a==null?void 0:a.duration),c)},getViewport:()=>{const[s,a,i]=t.getState().transform;return{x:s,y:a,zoom:i}},fitView:s=>oz(t.getState,s),setCenter:(s,a,i)=>{const{width:o,height:l,maxZoom:c}=t.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:c,h=o/2-s*d,p=l/2-a*d,m=Bf.translate(h,p).scale(d);e.transform(Sh(r,i==null?void 0:i.duration),m)},fitBounds:(s,a)=>{const{width:i,height:o,minZoom:l,maxZoom:c}=t.getState(),{x:d,y:h,zoom:p}=qV(s,i,o,l,c,(a==null?void 0:a.padding)??.1),m=Bf.translate(d,h).scale(p);e.transform(Sh(r,a==null?void 0:a.duration),m)},project:s=>{const{transform:a,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),XT(s,a,i,o)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return s;const{x:c,y:d}=l.getBoundingClientRect(),h={x:s.x-c,y:s.y-d};return XT(h,a,i,o)},flowToScreenPosition:s=>{const{transform:a,domNode:i}=t.getState();if(!i)return s;const{x:o,y:l}=i.getBoundingClientRect(),c=VV(s,a);return{x:c.x+o,y:c.y+l}},viewportInitialized:!0}:R3e,[e,r])};function jC(){const t=U3e(),e=ci(),r=q.useCallback(()=>e.getState().getNodes().map(x=>({...x})),[]),n=q.useCallback(x=>e.getState().nodeInternals.get(x),[]),s=q.useCallback(()=>{const{edges:x=[]}=e.getState();return x.map(E=>({...E}))},[]),a=q.useCallback(x=>{const{edges:E=[]}=e.getState();return E.find(S=>S.id===x)},[]),i=q.useCallback(x=>{const{getNodes:E,setNodes:S,hasDefaultNodes:B,onNodesChange:D}=e.getState(),I=E(),U=typeof x=="function"?x(I):x;if(B)S(U);else if(D){const F=U.length===0?I.map(C=>({type:"remove",id:C.id})):U.map(C=>({item:C,type:"reset"}));D(F)}},[]),o=q.useCallback(x=>{const{edges:E=[],setEdges:S,hasDefaultEdges:B,onEdgesChange:D}=e.getState(),I=typeof x=="function"?x(E):x;if(B)S(I);else if(D){const U=I.length===0?E.map(F=>({type:"remove",id:F.id})):I.map(F=>({item:F,type:"reset"}));D(U)}},[]),l=q.useCallback(x=>{const E=Array.isArray(x)?x:[x],{getNodes:S,setNodes:B,hasDefaultNodes:D,onNodesChange:I}=e.getState();if(D){const F=[...S(),...E];B(F)}else if(I){const U=E.map(F=>({item:F,type:"add"}));I(U)}},[]),c=q.useCallback(x=>{const E=Array.isArray(x)?x:[x],{edges:S=[],setEdges:B,hasDefaultEdges:D,onEdgesChange:I}=e.getState();if(D)B([...S,...E]);else if(I){const U=E.map(F=>({item:F,type:"add"}));I(U)}},[]),d=q.useCallback(()=>{const{getNodes:x,edges:E=[],transform:S}=e.getState(),[B,D,I]=S;return{nodes:x().map(U=>({...U})),edges:E.map(U=>({...U})),viewport:{x:B,y:D,zoom:I}}},[]),h=q.useCallback(({nodes:x,edges:E})=>{const{nodeInternals:S,getNodes:B,edges:D,hasDefaultNodes:I,hasDefaultEdges:U,onNodesDelete:F,onEdgesDelete:C,onNodesChange:_,onEdgesChange:N}=e.getState(),j=(x||[]).map(te=>te.id),R=(E||[]).map(te=>te.id),L=B().reduce((te,Y)=>{const re=Y.parentNode||Y.parentId,V=!j.includes(Y.id)&&re&&te.find(K=>K.id===re);return(typeof Y.deletable=="boolean"?Y.deletable:!0)&&(j.includes(Y.id)||V)&&te.push(Y),te},[]),Q=D.filter(te=>typeof te.deletable=="boolean"?te.deletable:!0),H=Q.filter(te=>R.includes(te.id));if(L||H){const te=GV(L,Q),Y=[...H,...te],re=Y.reduce((V,J)=>(V.includes(J.id)||V.push(J.id),V),[]);if((U||I)&&(U&&e.setState({edges:D.filter(V=>!re.includes(V.id))}),I&&(L.forEach(V=>{S.delete(V.id)}),e.setState({nodeInternals:new Map(S)}))),re.length>0&&(C==null||C(Y),N&&N(re.map(V=>({id:V,type:"remove"})))),L.length>0&&(F==null||F(L),_)){const V=L.map(J=>({id:J.id,type:"remove"}));_(V)}}},[]),p=q.useCallback(x=>{const E=r3e(x),S=E?null:e.getState().nodeInternals.get(x.id);return!E&&!S?[null,null,E]:[E?x:cM(S),S,E]},[]),m=q.useCallback((x,E=!0,S)=>{const[B,D,I]=p(x);return B?(S||e.getState().getNodes()).filter(U=>{if(!I&&(U.id===D.id||!U.positionAbsolute))return!1;const F=cM(U),C=KT(F,B);return E&&C>0||C>=B.width*B.height}):[]},[]),y=q.useCallback((x,E,S=!0)=>{const[B]=p(x);if(!B)return!1;const D=KT(B,E);return S&&D>0||D>=B.width*B.height},[]);return q.useMemo(()=>({...t,getNodes:r,getNode:n,getEdges:s,getEdge:a,setNodes:i,setEdges:o,addNodes:l,addEdges:c,toObject:d,deleteElements:h,getIntersectingNodes:m,isNodeIntersecting:y}),[t,r,n,s,a,i,o,l,c,d,h,m,y])}const M3e={actInsideInputWithModifier:!1};var P3e=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=ci(),{deleteElements:n}=jC(),s=y1(t,M3e),a=y1(e);q.useEffect(()=>{if(s){const{edges:i,getNodes:o}=r.getState(),l=o().filter(d=>d.selected),c=i.filter(d=>d.selected);n({nodes:l,edges:c}),r.setState({nodesSelectionActive:!1})}},[s]),q.useEffect(()=>{r.setState({multiSelectionActive:a})},[a])};function O3e(t){const e=ci();q.useEffect(()=>{let r;const n=()=>{var a,i;if(!t.current)return;const s=jB(t.current);(s.height===0||s.width===0)&&((i=(a=e.getState()).onError)==null||i.call(a,"004",id.error004())),e.setState({width:s.width||500,height:s.height||500})};return n(),window.addEventListener("resize",n),t.current&&(r=new ResizeObserver(()=>n()),r.observe(t.current)),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}},[])}const YB={position:"absolute",width:"100%",height:"100%",top:0,left:0},j3e=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,l2=t=>({x:t.x,y:t.y,zoom:t.k}),pp=(t,e)=>t.target.closest(`.${e}`),vM=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),yM=t=>{const e=t.ctrlKey&&hb()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},Q3e=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),H3e=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Uh.Free,zoomOnDoubleClick:c=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:p,translateExtent:m,minZoom:y,maxZoom:x,zoomActivationKeyCode:E,preventScrolling:S=!0,children:B,noWheelClassName:D,noPanClassName:I})=>{const U=q.useRef(),F=ci(),C=q.useRef(!1),_=q.useRef(!1),N=q.useRef(null),j=q.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:L,d3ZoomHandler:Q,userSelectionActive:H}=Ps(Q3e,io),te=y1(E),Y=q.useRef(0),re=q.useRef(!1),V=q.useRef();return O3e(N),q.useEffect(()=>{if(N.current){const J=N.current.getBoundingClientRect(),K=KIe().scaleExtent([y,x]).translateExtent(m),ae=nc(N.current).call(K),O=Bf.translate(p.x,p.y).scale(wm(p.zoom,y,x)),W=[[0,0],[J.width,J.height]],Z=K.constrain()(O,W,m);K.transform(ae,Z),K.wheelDelta(yM),F.setState({d3Zoom:K,d3Selection:ae,d3ZoomHandler:ae.on("wheel.zoom"),transform:[Z.x,Z.y,Z.k],domNode:N.current.closest(".react-flow")})}},[]),q.useEffect(()=>{L&&R&&(i&&!te&&!H?L.on("wheel.zoom",J=>{if(pp(J,D))return!1;J.preventDefault(),J.stopImmediatePropagation();const K=L.property("__zoom").k||1;if(J.ctrlKey&&a){const pe=Uu(J),he=yM(J),de=K*Math.pow(2,he);R.scaleTo(L,de,pe,J);return}const ae=J.deltaMode===1?20:1;let O=l===Uh.Vertical?0:J.deltaX*ae,W=l===Uh.Horizontal?0:J.deltaY*ae;!hb()&&J.shiftKey&&l!==Uh.Vertical&&(O=J.deltaY*ae,W=0),R.translateBy(L,-(O/K)*o,-(W/K)*o,{internal:!0});const Z=l2(L.property("__zoom")),{onViewportChangeStart:ne,onViewportChange:le,onViewportChangeEnd:ve}=F.getState();clearTimeout(V.current),re.current||(re.current=!0,e==null||e(J,Z),ne==null||ne(Z)),re.current&&(t==null||t(J,Z),le==null||le(Z),V.current=setTimeout(()=>{r==null||r(J,Z),ve==null||ve(Z),re.current=!1},150))},{passive:!1}):typeof Q<"u"&&L.on("wheel.zoom",function(J,K){if(!S&&J.type==="wheel"&&!J.ctrlKey||pp(J,D))return null;J.preventDefault(),Q.call(this,J,K)},{passive:!1}))},[H,i,l,L,R,Q,te,a,S,D,e,t,r]),q.useEffect(()=>{R&&R.on("start",J=>{var O,W;if(!J.sourceEvent||J.sourceEvent.internal)return null;Y.current=(O=J.sourceEvent)==null?void 0:O.button;const{onViewportChangeStart:K}=F.getState(),ae=l2(J.transform);C.current=!0,j.current=ae,((W=J.sourceEvent)==null?void 0:W.type)==="mousedown"&&F.setState({paneDragging:!0}),K==null||K(ae),e==null||e(J.sourceEvent,ae)})},[R,e]),q.useEffect(()=>{R&&(H&&!C.current?R.on("zoom",null):H||R.on("zoom",J=>{var ae;const{onViewportChange:K}=F.getState();if(F.setState({transform:[J.transform.x,J.transform.y,J.transform.k]}),_.current=!!(n&&vM(h,Y.current??0)),(t||K)&&!((ae=J.sourceEvent)!=null&&ae.internal)){const O=l2(J.transform);K==null||K(O),t==null||t(J.sourceEvent,O)}}))},[H,R,t,h,n]),q.useEffect(()=>{R&&R.on("end",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;const{onViewportChangeEnd:K}=F.getState();if(C.current=!1,F.setState({paneDragging:!1}),n&&vM(h,Y.current??0)&&!_.current&&n(J.sourceEvent),_.current=!1,(r||K)&&j3e(j.current,J.transform)){const ae=l2(J.transform);j.current=ae,clearTimeout(U.current),U.current=setTimeout(()=>{K==null||K(ae),r==null||r(J.sourceEvent,ae)},i?150:0)}})},[R,i,h,r,n]),q.useEffect(()=>{R&&R.filter(J=>{const K=te||s,ae=a&&J.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&J.button===1&&J.type==="mousedown"&&(pp(J,"react-flow__node")||pp(J,"react-flow__edge")))return!0;if(!h&&!K&&!i&&!c&&!a||H||!c&&J.type==="dblclick"||pp(J,D)&&J.type==="wheel"||pp(J,I)&&(J.type!=="wheel"||i&&J.type==="wheel"&&!te)||!a&&J.ctrlKey&&J.type==="wheel"||!K&&!i&&!ae&&J.type==="wheel"||!h&&(J.type==="mousedown"||J.type==="touchstart")||Array.isArray(h)&&!h.includes(J.button)&&J.type==="mousedown")return!1;const O=Array.isArray(h)&&h.includes(J.button)||!J.button||J.button<=1;return(!J.ctrlKey||J.type==="wheel")&&O})},[H,R,s,a,i,c,h,d,te]),dt.createElement("div",{className:"react-flow__renderer",ref:N,style:YB},B)},V3e=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function z3e(){const{userSelectionActive:t,userSelectionRect:e}=Ps(V3e,io);return t&&e?dt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function wM(t,e){const r=e.parentNode||e.parentId,n=t.find(s=>s.id===r);if(n){const s=e.position.x+e.width-n.width,a=e.position.y+e.height-n.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,s>0&&(n.style.width+=s),a>0&&(n.style.height+=a),e.position.x<0){const i=Math.abs(e.position.x);n.position.x=n.position.x-i,n.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);n.position.y=n.position.y-i,n.style.height+=i,e.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function lz(t,e){if(t.some(n=>n.type==="reset"))return t.filter(n=>n.type==="reset").map(n=>n.item);const r=t.filter(n=>n.type==="add").map(n=>n.item);return e.reduce((n,s)=>{const a=t.filter(o=>o.id===s.id);if(a.length===0)return n.push(s),n;const i={...s};for(const o of a)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&wM(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&wM(n,i);break}case"remove":return n}return n.push(i),n},r)}function cz(t,e){return lz(t,e)}function G3e(t,e){return lz(t,e)}const sf=(t,e)=>({id:t,type:"select",selected:e});function Rp(t,e){return t.reduce((r,n)=>{const s=e.includes(n.id);return!n.selected&&s?(n.selected=!0,r.push(sf(n.id,!0))):n.selected&&!s&&(n.selected=!1,r.push(sf(n.id,!1))),r},[])}const OS=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},q3e=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),uz=q.memo(({isSelecting:t,selectionMode:e=v1.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:d,children:h})=>{const p=q.useRef(null),m=ci(),y=q.useRef(0),x=q.useRef(0),E=q.useRef(),{userSelectionActive:S,elementsSelectable:B,dragging:D}=Ps(q3e,io),I=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,x.current=0},U=Q=>{a==null||a(Q),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},F=Q=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){Q.preventDefault();return}i==null||i(Q)},C=o?Q=>o(Q):void 0,_=Q=>{const{resetSelectedElements:H,domNode:te}=m.getState();if(E.current=te==null?void 0:te.getBoundingClientRect(),!B||!t||Q.button!==0||Q.target!==p.current||!E.current)return;const{x:Y,y:re}=kf(Q,E.current);H(),m.setState({userSelectionRect:{width:0,height:0,startX:Y,startY:re,x:Y,y:re}}),n==null||n(Q)},N=Q=>{const{userSelectionRect:H,nodeInternals:te,edges:Y,transform:re,onNodesChange:V,onEdgesChange:J,nodeOrigin:K,getNodes:ae}=m.getState();if(!t||!E.current||!H)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const O=kf(Q,E.current),W=H.startX??0,Z=H.startY??0,ne={...H,x:O.x<W?O.x:W,y:O.y<Z?O.y:Z,width:Math.abs(O.x-W),height:Math.abs(O.y-Z)},le=ae(),ve=zV(te,ne,re,e===v1.Partial,!0,K),pe=GV(ve,Y).map(de=>de.id),he=ve.map(de=>de.id);if(y.current!==he.length){y.current=he.length;const de=Rp(le,he);de.length&&(V==null||V(de))}if(x.current!==pe.length){x.current=pe.length;const de=Rp(Y,pe);de.length&&(J==null||J(de))}m.setState({userSelectionRect:ne})},j=Q=>{if(Q.button!==0)return;const{userSelectionRect:H}=m.getState();!S&&H&&Q.target===p.current&&(U==null||U(Q)),m.setState({nodesSelectionActive:y.current>0}),I(),s==null||s(Q)},R=Q=>{S&&(m.setState({nodesSelectionActive:y.current>0}),s==null||s(Q)),I()},L=B&&(t||S);return dt.createElement("div",{className:vo(["react-flow__pane",{dragging:D,selection:t}]),onClick:L?void 0:OS(U,p),onContextMenu:OS(F,p),onWheel:OS(C,p),onMouseEnter:L?void 0:l,onMouseDown:L?_:void 0,onMouseMove:L?N:c,onMouseUp:L?j:void 0,onMouseLeave:L?R:d,ref:p,style:YB},h,dt.createElement(z3e,null))});uz.displayName="Pane";function Az(t,e){const r=t.parentNode||t.parentId;if(!r)return!1;const n=e.get(r);return n?n.selected?!0:Az(n,e):!1}function bM(t,e,r){let n=t;do{if(n!=null&&n.matches(e))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function K3e(t,e,r,n){return Array.from(t.values()).filter(s=>(s.selected||s.id===n)&&(!s.parentNode||s.parentId||!Az(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>{var a,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:r.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function $3e(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function dz(t,e,r,n,s=[0,0],a){const i=$3e(t,t.extent||n);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=r.get(l),{x:p,y:m}=rm(h,s).positionAbsolute;o=h&&oc(p)&&oc(m)&&oc(h.width)&&oc(h.height)?[[p+t.width*s[0],m+t.height*s[1]],[p+h.width-t.width+t.width*s[0],m+h.height-t.height+t.height*s[1]]]:o}else a==null||a("005",id.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const h=r.get(l),{x:p,y:m}=rm(h,s).positionAbsolute;o=[[t.extent[0][0]+p,t.extent[0][1]+m],[t.extent[1][0]+p,t.extent[1][1]+m]]}let c={x:0,y:0};if(l){const h=r.get(l);c=rm(h,s).positionAbsolute}const d=o&&o!=="parent"?QB(e,o):e;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function jS({nodeId:t,dragItems:e,nodeInternals:r}){const n=e.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?n.find(s=>s.id===t):n[0],n]}const CM=(t,e,r,n)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),i=e.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return a.map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(c.left-i.left-o.x)/r,y:(c.top-i.top-o.y)/r,...jB(l)}})};function jg(t,e,r){return r===void 0?r:n=>{const s=e().nodeInternals.get(t);s&&r(n,{...s})}}function ZT({id:t,store:e,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),c=o.get(t);if(!c){l==null||l("012",id.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(r||c.selected&&i)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):s([t])}function W3e(){const t=ci();return q.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:s,snapToGrid:a}=t.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,l={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:a?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:a?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function QS(t){return(e,r,n)=>t==null?void 0:t(e,n)}function fz({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:n,nodeId:s,isSelectable:a,selectNodesOnDrag:i}){const o=ci(),[l,c]=q.useState(!1),d=q.useRef([]),h=q.useRef({x:null,y:null}),p=q.useRef(0),m=q.useRef(null),y=q.useRef({x:0,y:0}),x=q.useRef(null),E=q.useRef(!1),S=q.useRef(!1),B=q.useRef(!1),D=W3e();return q.useEffect(()=>{if(t!=null&&t.current){const I=nc(t.current),U=({x:_,y:N})=>{const{nodeInternals:j,onNodeDrag:R,onSelectionDrag:L,updateNodePositions:Q,nodeExtent:H,snapGrid:te,snapToGrid:Y,nodeOrigin:re,onError:V}=o.getState();h.current={x:_,y:N};let J=!1,K={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&H){const O=KB(d.current,re);K=HB(O)}if(d.current=d.current.map(O=>{const W={x:_-O.distance.x,y:N-O.distance.y};Y&&(W.x=te[0]*Math.round(W.x/te[0]),W.y=te[1]*Math.round(W.y/te[1]));const Z=[[H[0][0],H[0][1]],[H[1][0],H[1][1]]];d.current.length>1&&H&&!O.extent&&(Z[0][0]=O.positionAbsolute.x-K.x+H[0][0],Z[1][0]=O.positionAbsolute.x+(O.width??0)-K.x2+H[1][0],Z[0][1]=O.positionAbsolute.y-K.y+H[0][1],Z[1][1]=O.positionAbsolute.y+(O.height??0)-K.y2+H[1][1]);const ne=dz(O,W,j,Z,re,V);return J=J||O.position.x!==ne.position.x||O.position.y!==ne.position.y,O.position=ne.position,O.positionAbsolute=ne.positionAbsolute,O}),!J)return;Q(d.current,!0,!0),c(!0);const ae=s?R:QS(L);if(ae&&x.current){const[O,W]=jS({nodeId:s,dragItems:d.current,nodeInternals:j});ae(x.current,O,W)}},F=()=>{if(!m.current)return;const[_,N]=LV(y.current,m.current);if(_!==0||N!==0){const{transform:j,panBy:R}=o.getState();h.current.x=(h.current.x??0)-_/j[2],h.current.y=(h.current.y??0)-N/j[2],R({x:_,y:N})&&U(h.current)}p.current=requestAnimationFrame(F)},C=_=>{var re;const{nodeInternals:N,multiSelectionActive:j,nodesDraggable:R,unselectNodesAndEdges:L,onNodeDragStart:Q,onSelectionDragStart:H}=o.getState();S.current=!0;const te=s?Q:QS(H);(!i||!a)&&!j&&s&&((re=N.get(s))!=null&&re.selected||L()),s&&a&&i&&ZT({id:s,store:o,nodeRef:t});const Y=D(_);if(h.current=Y,d.current=K3e(N,R,Y,s),te&&d.current){const[V,J]=jS({nodeId:s,dragItems:d.current,nodeInternals:N});te(_.sourceEvent,V,J)}};if(e)I.on(".drag",null);else{const _=nke().on("start",N=>{const{domNode:j,nodeDragThreshold:R}=o.getState();R===0&&C(N),B.current=!1;const L=D(N);h.current=L,m.current=(j==null?void 0:j.getBoundingClientRect())||null,y.current=kf(N.sourceEvent,m.current)}).on("drag",N=>{var Q,H;const j=D(N),{autoPanOnNodeDrag:R,nodeDragThreshold:L}=o.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&(B.current=!0),!B.current){if(!E.current&&S.current&&R&&(E.current=!0,F()),!S.current){const te=j.xSnapped-(((Q=h==null?void 0:h.current)==null?void 0:Q.x)??0),Y=j.ySnapped-(((H=h==null?void 0:h.current)==null?void 0:H.y)??0);Math.sqrt(te*te+Y*Y)>L&&C(N)}(h.current.x!==j.xSnapped||h.current.y!==j.ySnapped)&&d.current&&S.current&&(x.current=N.sourceEvent,y.current=kf(N.sourceEvent,m.current),U(j))}}).on("end",N=>{if(!(!S.current||B.current)&&(c(!1),E.current=!1,S.current=!1,cancelAnimationFrame(p.current),d.current)){const{updateNodePositions:j,nodeInternals:R,onNodeDragStop:L,onSelectionDragStop:Q}=o.getState(),H=s?L:QS(Q);if(j(d.current,!1,!1),H){const[te,Y]=jS({nodeId:s,dragItems:d.current,nodeInternals:R});H(N.sourceEvent,te,Y)}}}).filter(N=>{const j=N.target;return!N.button&&(!r||!bM(j,`.${r}`,t))&&(!n||bM(j,n,t))});return I.call(_),()=>{I.on(".drag",null)}}}},[t,e,r,n,a,o,s,i,D]),l}function hz(){const t=ci();return q.useCallback(r=>{const{nodeInternals:n,nodeExtent:s,updateNodePositions:a,getNodes:i,snapToGrid:o,snapGrid:l,onError:c,nodesDraggable:d}=t.getState(),h=i().filter(B=>B.selected&&(B.draggable||d&&typeof B.draggable>"u")),p=o?l[0]:5,m=o?l[1]:5,y=r.isShiftPressed?4:1,x=r.x*p*y,E=r.y*m*y,S=h.map(B=>{if(B.positionAbsolute){const D={x:B.positionAbsolute.x+x,y:B.positionAbsolute.y+E};o&&(D.x=l[0]*Math.round(D.x/l[0]),D.y=l[1]*Math.round(D.y/l[1]));const{positionAbsolute:I,position:U}=dz(B,D,n,s,void 0,c);B.position=U,B.positionAbsolute=I}return B});a(S,!0,!1)},[])}const nm={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Qg=t=>{const e=({id:r,type:n,data:s,xPos:a,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:c,onClick:d,onMouseEnter:h,onMouseMove:p,onMouseLeave:m,onContextMenu:y,onDoubleClick:x,style:E,className:S,isDraggable:B,isSelectable:D,isConnectable:I,isFocusable:U,selectNodesOnDrag:F,sourcePosition:C,targetPosition:_,hidden:N,resizeObserver:j,dragHandle:R,zIndex:L,isParent:Q,noDragClassName:H,noPanClassName:te,initialized:Y,disableKeyboardA11y:re,ariaLabel:V,rfId:J,hasHandleBounds:K})=>{const ae=ci(),O=q.useRef(null),W=q.useRef(null),Z=q.useRef(C),ne=q.useRef(_),le=q.useRef(n),ve=D||B||d||h||p||m,pe=hz(),he=jg(r,ae.getState,h),de=jg(r,ae.getState,p),ce=jg(r,ae.getState,m),oe=jg(r,ae.getState,y),Re=jg(r,ae.getState,x),qe=De=>{const{nodeDragThreshold:je}=ae.getState();if(D&&(!F||!B||je>0)&&ZT({id:r,store:ae,nodeRef:O}),d){const We=ae.getState().nodeInternals.get(r);We&&d(De,{...We})}},Ie=De=>{if(!$T(De)&&!re)if(MV.includes(De.key)&&D){const je=De.key==="Escape";ZT({id:r,store:ae,unselect:je,nodeRef:O})}else B&&c&&Object.prototype.hasOwnProperty.call(nm,De.key)&&(ae.setState({ariaLiveMessage:`Moved selected node ${De.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),pe({x:nm[De.key].x,y:nm[De.key].y,isShiftPressed:De.shiftKey}))};q.useEffect(()=>()=>{W.current&&(j==null||j.unobserve(W.current),W.current=null)},[]),q.useEffect(()=>{if(O.current&&!N){const De=O.current;(!Y||!K||W.current!==De)&&(W.current&&(j==null||j.unobserve(W.current)),j==null||j.observe(De),W.current=De)}},[N,Y,K]),q.useEffect(()=>{const De=le.current!==n,je=Z.current!==C,We=ne.current!==_;O.current&&(De||je||We)&&(De&&(le.current=n),je&&(Z.current=C),We&&(ne.current=_),ae.getState().updateNodeDimensions([{id:r,nodeElement:O.current,forceUpdate:!0}]))},[r,n,C,_]);const Ee=fz({nodeRef:O,disabled:N||!B,noDragClassName:H,handleSelector:R,nodeId:r,isSelectable:D,selectNodesOnDrag:F});return N?null:dt.createElement("div",{className:vo(["react-flow__node",`react-flow__node-${n}`,{[te]:B},S,{selected:c,selectable:D,parent:Q,dragging:Ee}]),ref:O,style:{zIndex:L,transform:`translate(${o}px,${l}px)`,pointerEvents:ve?"all":"none",visibility:Y?"visible":"hidden",...E},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:he,onMouseMove:de,onMouseLeave:ce,onContextMenu:oe,onClick:qe,onDoubleClick:Re,onKeyDown:U?Ie:void 0,tabIndex:U?0:void 0,role:U?"button":void 0,"aria-describedby":re?void 0:`${nz}-${J}`,"aria-label":V},dt.createElement(c3e,{value:r},dt.createElement(t,{id:r,data:s,type:n,xPos:a,yPos:i,selected:c,isConnectable:I,sourcePosition:C,targetPosition:_,dragging:Ee,dragHandle:R,zIndex:L})))};return e.displayName="NodeWrapper",q.memo(e)};const Y3e=t=>{const e=t.getNodes().filter(r=>r.selected);return{...KB(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function X3e({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const n=ci(),{width:s,height:a,x:i,y:o,transformString:l,userSelectionActive:c}=Ps(Y3e,io),d=hz(),h=q.useRef(null);if(q.useEffect(()=>{var y;r||(y=h.current)==null||y.focus({preventScroll:!0})},[r]),fz({nodeRef:h}),c||!s||!a)return null;const p=t?y=>{const x=n.getState().getNodes().filter(E=>E.selected);t(y,x)}:void 0,m=y=>{Object.prototype.hasOwnProperty.call(nm,y.key)&&d({x:nm[y.key].x,y:nm[y.key].y,isShiftPressed:y.shiftKey})};return dt.createElement("div",{className:vo(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},dt.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:s,height:a,top:o,left:i}}))}var J3e=q.memo(X3e);const Z3e=t=>t.nodesSelectionActive,pz=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:c,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:p,selectionMode:m,onSelectionStart:y,onSelectionEnd:x,multiSelectionKeyCode:E,panActivationKeyCode:S,zoomActivationKeyCode:B,elementsSelectable:D,zoomOnScroll:I,zoomOnPinch:U,panOnScroll:F,panOnScrollSpeed:C,panOnScrollMode:_,zoomOnDoubleClick:N,panOnDrag:j,defaultViewport:R,translateExtent:L,minZoom:Q,maxZoom:H,preventScrolling:te,onSelectionContextMenu:Y,noWheelClassName:re,noPanClassName:V,disableKeyboardA11y:J})=>{const K=Ps(Z3e),ae=y1(h),O=y1(S),W=O||j,Z=O||F,ne=ae||p&&W!==!0;return P3e({deleteKeyCode:o,multiSelectionKeyCode:E}),dt.createElement(H3e,{onMove:l,onMoveStart:c,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:D,zoomOnScroll:I,zoomOnPinch:U,panOnScroll:Z,panOnScrollSpeed:C,panOnScrollMode:_,zoomOnDoubleClick:N,panOnDrag:!ae&&W,defaultViewport:R,translateExtent:L,minZoom:Q,maxZoom:H,zoomActivationKeyCode:B,preventScrolling:te,noWheelClassName:re,noPanClassName:V},dt.createElement(uz,{onSelectionStart:y,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:W,isSelecting:!!ne,selectionMode:m},t,K&&dt.createElement(J3e,{onSelectionContextMenu:Y,noPanClassName:V,disableKeyboardA11y:J})))};pz.displayName="FlowRenderer";var eFe=q.memo(pz);function tFe(t){return Ps(q.useCallback(r=>t?zV(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function rFe(t){const e={input:Qg(t.input||ZV),default:Qg(t.default||JT),output:Qg(t.output||tz),group:Qg(t.group||WB)},r={},n=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=Qg(t[a]||JT),s),r);return{...e,...n}}const nFe=({x:t,y:e,width:r,height:n,origin:s})=>!r||!n?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-r*s[0],y:e-n*s[1]},sFe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),mz=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:n,elementsSelectable:s,updateNodeDimensions:a,onError:i}=Ps(sFe,io),o=tFe(t.onlyRenderVisibleElements),l=q.useRef(),c=q.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const p=h.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));a(p)});return l.current=d,d},[]);return q.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),dt.createElement("div",{className:"react-flow__nodes",style:YB},o.map(d=>{var U,F,C;let h=d.type||"default";t.nodeTypes[h]||(i==null||i("003",id.error003(h)),h="default");const p=t.nodeTypes[h]||t.nodeTypes.default,m=!!(d.draggable||e&&typeof d.draggable>"u"),y=!!(d.selectable||s&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),E=!!(d.focusable||n&&typeof d.focusable>"u"),S=t.nodeExtent?QB(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,B=(S==null?void 0:S.x)??0,D=(S==null?void 0:S.y)??0,I=nFe({x:B,y:D,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return dt.createElement(p,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||cr.Bottom,targetPosition:d.targetPosition||cr.Top,hidden:d.hidden,xPos:B,yPos:D,xPosOrigin:I.x,yPosOrigin:I.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:y,isConnectable:x,isFocusable:E,resizeObserver:c,dragHandle:d.dragHandle,zIndex:((U=d[Xs])==null?void 0:U.z)??0,isParent:!!((F=d[Xs])!=null&&F.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[Xs])!=null&&C.handleBounds)})}))};mz.displayName="NodeRenderer";var aFe=q.memo(mz);const iFe=(t,e,r)=>r===cr.Left?t-e:r===cr.Right?t+e:t,oFe=(t,e,r)=>r===cr.Top?t-e:r===cr.Bottom?t+e:t,EM="react-flow__edgeupdater",_M=({position:t,centerX:e,centerY:r,radius:n=10,onMouseDown:s,onMouseEnter:a,onMouseOut:i,type:o})=>dt.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:i,className:vo([EM,`${EM}-${o}`]),cx:iFe(e,n,t),cy:oFe(r,n,t),r:n,stroke:"transparent",fill:"transparent"}),lFe=()=>!0;var mp=t=>{const e=({id:r,className:n,type:s,data:a,onClick:i,onEdgeDoubleClick:o,selected:l,animated:c,label:d,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:E,source:S,target:B,sourceX:D,sourceY:I,targetX:U,targetY:F,sourcePosition:C,targetPosition:_,elementsSelectable:N,hidden:j,sourceHandleId:R,targetHandleId:L,onContextMenu:Q,onMouseEnter:H,onMouseMove:te,onMouseLeave:Y,reconnectRadius:re,onReconnect:V,onReconnectStart:J,onReconnectEnd:K,markerEnd:ae,markerStart:O,rfId:W,ariaLabel:Z,isFocusable:ne,isReconnectable:le,pathOptions:ve,interactionWidth:pe,disableKeyboardA11y:he})=>{const de=q.useRef(null),[ce,oe]=q.useState(!1),[Re,qe]=q.useState(!1),Ie=ci(),Ee=q.useMemo(()=>`url('#${YT(O,W)}')`,[O,W]),De=q.useMemo(()=>`url('#${YT(ae,W)}')`,[ae,W]);if(j)return null;const je=mt=>{var Rn;const{edges:_r,addSelectedEdges:Jt,unselectNodesAndEdges:mn,multiSelectionActive:wr}=Ie.getState(),Or=_r.find(Lr=>Lr.id===r);Or&&(N&&(Ie.setState({nodesSelectionActive:!1}),Or.selected&&wr?(mn({nodes:[],edges:[Or]}),(Rn=de.current)==null||Rn.blur()):Jt([r])),i&&i(mt,Or))},We=Og(r,Ie.getState,o),ct=Og(r,Ie.getState,Q),wt=Og(r,Ie.getState,H),ot=Og(r,Ie.getState,te),Dt=Og(r,Ie.getState,Y),Rt=(mt,_r)=>{if(mt.button!==0)return;const{edges:Jt,isValidConnection:mn}=Ie.getState(),wr=_r?B:S,Or=(_r?L:R)||null,Rn=_r?"target":"source",Lr=mn||lFe,ga=_r,on=Jt.find(Qr=>Qr.id===r);qe(!0),J==null||J(mt,on,Rn);const ls=Qr=>{qe(!1),K==null||K(Qr,on,Rn)};WV({event:mt,handleId:Or,nodeId:wr,onConnect:Qr=>V==null?void 0:V(on,Qr),isTarget:ga,getState:Ie.getState,setState:Ie.setState,isValidConnection:Lr,edgeUpdaterType:Rn,onReconnectEnd:ls})},Yt=mt=>Rt(mt,!0),Lt=mt=>Rt(mt,!1),Qt=()=>oe(!0),qt=()=>oe(!1),kt=!N&&!i,It=mt=>{var _r;if(!he&&MV.includes(mt.key)&&N){const{unselectNodesAndEdges:Jt,addSelectedEdges:mn,edges:wr}=Ie.getState();mt.key==="Escape"?((_r=de.current)==null||_r.blur(),Jt({edges:[wr.find(Rn=>Rn.id===r)]})):mn([r])}};return dt.createElement("g",{className:vo(["react-flow__edge",`react-flow__edge-${s}`,n,{selected:l,animated:c,inactive:kt,updating:ce}]),onClick:je,onDoubleClick:We,onContextMenu:ct,onMouseEnter:wt,onMouseMove:ot,onMouseLeave:Dt,onKeyDown:ne?It:void 0,tabIndex:ne?0:void 0,role:ne?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Z===null?void 0:Z||`Edge from ${S} to ${B}`,"aria-describedby":ne?`${sz}-${W}`:void 0,ref:de},!Re&&dt.createElement(t,{id:r,source:S,target:B,selected:l,animated:c,label:d,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,data:a,style:E,sourceX:D,sourceY:I,targetX:U,targetY:F,sourcePosition:C,targetPosition:_,sourceHandleId:R,targetHandleId:L,markerStart:Ee,markerEnd:De,pathOptions:ve,interactionWidth:pe}),le&&dt.createElement(dt.Fragment,null,(le==="source"||le===!0)&&dt.createElement(_M,{position:C,centerX:D,centerY:I,radius:re,onMouseDown:Yt,onMouseEnter:Qt,onMouseOut:qt,type:"source"}),(le==="target"||le===!0)&&dt.createElement(_M,{position:_,centerX:U,centerY:F,radius:re,onMouseDown:Lt,onMouseEnter:Qt,onMouseOut:qt,type:"target"})))};return e.displayName="EdgeWrapper",q.memo(e)};function cFe(t){const e={default:mp(t.default||mb),straight:mp(t.bezier||GB),step:mp(t.step||zB),smoothstep:mp(t.step||OC),simplebezier:mp(t.simplebezier||VB)},r={},n=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=mp(t[a]||mb),s),r);return{...e,...n}}function SM(t,e,r=null){const n=((r==null?void 0:r.x)||0)+e.x,s=((r==null?void 0:r.y)||0)+e.y,a=(r==null?void 0:r.width)||e.width,i=(r==null?void 0:r.height)||e.height;switch(t){case cr.Top:return{x:n+a/2,y:s};case cr.Right:return{x:n+a,y:s+i/2};case cr.Bottom:return{x:n+a/2,y:s+i};case cr.Left:return{x:n,y:s+i/2}}}function TM(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const uFe=(t,e,r,n,s,a)=>{const i=SM(r,t,e),o=SM(a,n,s);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function AFe({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:n,targetWidth:s,targetHeight:a,width:i,height:o,transform:l}){const c={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+s),y2:Math.max(t.y+n,e.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=HB({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),h=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),p=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(h*p)>0}function NM(t){var n,s,a,i,o;const e=((n=t==null?void 0:t[Xs])==null?void 0:n.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const dFe=[{level:0,isMaxLevel:!0,edges:[]}];function fFe(t,e,r=!1){let n=-1;const s=t.reduce((i,o)=>{var d,h;const l=oc(o.zIndex);let c=l?o.zIndex:0;if(r){const p=e.get(o.target),m=e.get(o.source),y=o.selected||(p==null?void 0:p.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[Xs])==null?void 0:d.z)||0,((h=p==null?void 0:p[Xs])==null?void 0:h.z)||0,1e3);c=(l?o.zIndex:0)+(y?x:0)}return i[c]?i[c].push(o):i[c]=[o],n=c>n?c:n,i},{}),a=Object.entries(s).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===n}});return a.length===0?dFe:a}function hFe(t,e,r){const n=Ps(q.useCallback(s=>t?s.edges.filter(a=>{const i=e.get(a.source),o=e.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&AFe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return fFe(n,e,r)}const pFe=({color:t="none",strokeWidth:e=1})=>dt.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),mFe=({color:t="none",strokeWidth:e=1})=>dt.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),BM={[pb.Arrow]:pFe,[pb.ArrowClosed]:mFe};function gFe(t){const e=ci();return q.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(BM,t)?BM[t]:((a=(s=e.getState()).onError)==null||a.call(s,"009",id.error009(t)),null)},[t])}const xFe=({id:t,type:e,color:r,width:n=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=gFe(e);return l?dt.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${n}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0"},dt.createElement(l,{color:r,strokeWidth:i})):null},vFe=({defaultColor:t,rfId:e})=>r=>{const n=[];return r.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=YT(i,e);n.includes(o)||(s.push({id:o,color:i.color||t,...i}),n.push(o))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},gz=({defaultColor:t,rfId:e})=>{const r=Ps(q.useCallback(vFe({defaultColor:t,rfId:e}),[t,e]),(n,s)=>!(n.length!==s.length||n.some((a,i)=>a.id!==s[i].id)));return dt.createElement("defs",null,r.map(n=>dt.createElement(xFe,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};gz.displayName="MarkerDefinitions";var yFe=q.memo(gz);const wFe=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),xz=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:n,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:m,onReconnectEnd:y,reconnectRadius:x,children:E,disableKeyboardA11y:S})=>{const{edgesFocusable:B,edgesUpdatable:D,elementsSelectable:I,width:U,height:F,connectionMode:C,nodeInternals:_,onError:N}=Ps(wFe,io),j=hFe(e,_,r);return U?dt.createElement(dt.Fragment,null,j.map(({level:R,edges:L,isMaxLevel:Q})=>dt.createElement("svg",{key:R,style:{zIndex:R},width:U,height:F,className:"react-flow__edges react-flow__container"},Q&&dt.createElement(yFe,{defaultColor:t,rfId:n}),dt.createElement("g",null,L.map(H=>{const[te,Y,re]=NM(_.get(H.source)),[V,J,K]=NM(_.get(H.target));if(!re||!K)return null;let ae=H.type||"default";s[ae]||(N==null||N("011",id.error011(ae)),ae="default");const O=s[ae]||s.default,W=C===u0.Strict?J.target:(J.target??[]).concat(J.source??[]),Z=TM(Y.source,H.sourceHandle),ne=TM(W,H.targetHandle),le=(Z==null?void 0:Z.position)||cr.Bottom,ve=(ne==null?void 0:ne.position)||cr.Top,pe=!!(H.focusable||B&&typeof H.focusable>"u"),he=H.reconnectable||H.updatable,de=typeof p<"u"&&(he||D&&typeof he>"u");if(!Z||!ne)return N==null||N("008",id.error008(Z,H)),null;const{sourceX:ce,sourceY:oe,targetX:Re,targetY:qe}=uFe(te,Z,le,V,ne,ve);return dt.createElement(O,{key:H.id,id:H.id,className:vo([H.className,a]),type:ae,data:H.data,selected:!!H.selected,animated:!!H.animated,hidden:!!H.hidden,label:H.label,labelStyle:H.labelStyle,labelShowBg:H.labelShowBg,labelBgStyle:H.labelBgStyle,labelBgPadding:H.labelBgPadding,labelBgBorderRadius:H.labelBgBorderRadius,style:H.style,source:H.source,target:H.target,sourceHandleId:H.sourceHandle,targetHandleId:H.targetHandle,markerEnd:H.markerEnd,markerStart:H.markerStart,sourceX:ce,sourceY:oe,targetX:Re,targetY:qe,sourcePosition:le,targetPosition:ve,elementsSelectable:I,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:c,onClick:d,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:m,onReconnectEnd:y,reconnectRadius:x,rfId:n,ariaLabel:H.ariaLabel,isFocusable:pe,isReconnectable:de,pathOptions:"pathOptions"in H?H.pathOptions:void 0,interactionWidth:H.interactionWidth,disableKeyboardA11y:S})})))),E):null};xz.displayName="EdgeRenderer";var bFe=q.memo(xz);const CFe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function EFe({children:t}){const e=Ps(CFe);return dt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function _Fe(t){const e=jC(),r=q.useRef(!1);q.useEffect(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const SFe={[cr.Left]:cr.Right,[cr.Right]:cr.Left,[cr.Top]:cr.Bottom,[cr.Bottom]:cr.Top},vz=({nodeId:t,handleType:e,style:r,type:n=Af.Bezier,CustomComponent:s,connectionStatus:a})=>{var F,C,_;const{fromNode:i,handleId:o,toX:l,toY:c,connectionMode:d}=Ps(q.useCallback(N=>({fromNode:N.nodeInternals.get(t),handleId:N.connectionHandleId,toX:(N.connectionPosition.x-N.transform[0])/N.transform[2],toY:(N.connectionPosition.y-N.transform[1])/N.transform[2],connectionMode:N.connectionMode}),[t]),io),h=(F=i==null?void 0:i[Xs])==null?void 0:F.handleBounds;let p=h==null?void 0:h[e];if(d===u0.Loose&&(p=p||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!p)return null;const m=o?p.find(N=>N.id===o):p[0],y=m?m.x+m.width/2:(i.width??0)/2,x=m?m.y+m.height/2:i.height??0,E=(((C=i.positionAbsolute)==null?void 0:C.x)??0)+y,S=(((_=i.positionAbsolute)==null?void 0:_.y)??0)+x,B=m==null?void 0:m.position,D=B?SFe[B]:null;if(!B||!D)return null;if(s)return dt.createElement(s,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:m,fromX:E,fromY:S,toX:l,toY:c,fromPosition:B,toPosition:D,connectionStatus:a});let I="";const U={sourceX:E,sourceY:S,sourcePosition:B,targetX:l,targetY:c,targetPosition:D};return n===Af.Bezier?[I]=HV(U):n===Af.Step?[I]=WT({...U,borderRadius:0}):n===Af.SmoothStep?[I]=WT(U):n===Af.SimpleBezier?[I]=QV(U):I=`M${E},${S} ${l},${c}`,dt.createElement("path",{d:I,fill:"none",className:"react-flow__connection-path",style:r})};vz.displayName="ConnectionLine";const TFe=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function NFe({containerStyle:t,style:e,type:r,component:n}){const{nodeId:s,handleType:a,nodesConnectable:i,width:o,height:l,connectionStatus:c}=Ps(TFe,io);return!(s&&a&&o&&i)?null:dt.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},dt.createElement("g",{className:vo(["react-flow__connection",c])},dt.createElement(vz,{nodeId:s,handleType:a,style:e,type:r,CustomComponent:n,connectionStatus:c})))}function kM(t,e){return q.useRef(null),ci(),q.useMemo(()=>e(t),[t])}const yz=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:n,onMoveEnd:s,onInit:a,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:y,onSelectionStart:x,onSelectionEnd:E,connectionLineType:S,connectionLineStyle:B,connectionLineComponent:D,connectionLineContainerStyle:I,selectionKeyCode:U,selectionOnDrag:F,selectionMode:C,multiSelectionKeyCode:_,panActivationKeyCode:N,zoomActivationKeyCode:j,deleteKeyCode:R,onlyRenderVisibleElements:L,elementsSelectable:Q,selectNodesOnDrag:H,defaultViewport:te,translateExtent:Y,minZoom:re,maxZoom:V,preventScrolling:J,defaultMarkerColor:K,zoomOnScroll:ae,zoomOnPinch:O,panOnScroll:W,panOnScrollSpeed:Z,panOnScrollMode:ne,zoomOnDoubleClick:le,panOnDrag:ve,onPaneClick:pe,onPaneMouseEnter:he,onPaneMouseMove:de,onPaneMouseLeave:ce,onPaneScroll:oe,onPaneContextMenu:Re,onEdgeContextMenu:qe,onEdgeMouseEnter:Ie,onEdgeMouseMove:Ee,onEdgeMouseLeave:De,onReconnect:je,onReconnectStart:We,onReconnectEnd:ct,reconnectRadius:wt,noDragClassName:ot,noWheelClassName:Dt,noPanClassName:Rt,elevateEdgesOnSelect:Yt,disableKeyboardA11y:Lt,nodeOrigin:Qt,nodeExtent:qt,rfId:kt})=>{const It=kM(t,rFe),mt=kM(e,cFe);return _Fe(a),dt.createElement(eFe,{onPaneClick:pe,onPaneMouseEnter:he,onPaneMouseMove:de,onPaneMouseLeave:ce,onPaneContextMenu:Re,onPaneScroll:oe,deleteKeyCode:R,selectionKeyCode:U,selectionOnDrag:F,selectionMode:C,onSelectionStart:x,onSelectionEnd:E,multiSelectionKeyCode:_,panActivationKeyCode:N,zoomActivationKeyCode:j,elementsSelectable:Q,onMove:r,onMoveStart:n,onMoveEnd:s,zoomOnScroll:ae,zoomOnPinch:O,zoomOnDoubleClick:le,panOnScroll:W,panOnScrollSpeed:Z,panOnScrollMode:ne,panOnDrag:ve,defaultViewport:te,translateExtent:Y,minZoom:re,maxZoom:V,onSelectionContextMenu:y,preventScrolling:J,noDragClassName:ot,noWheelClassName:Dt,noPanClassName:Rt,disableKeyboardA11y:Lt},dt.createElement(EFe,null,dt.createElement(bFe,{edgeTypes:mt,onEdgeClick:o,onEdgeDoubleClick:c,onlyRenderVisibleElements:L,onEdgeContextMenu:qe,onEdgeMouseEnter:Ie,onEdgeMouseMove:Ee,onEdgeMouseLeave:De,onReconnect:je,onReconnectStart:We,onReconnectEnd:ct,reconnectRadius:wt,defaultMarkerColor:K,noPanClassName:Rt,elevateEdgesOnSelect:!!Yt,disableKeyboardA11y:Lt,rfId:kt},dt.createElement(NFe,{style:B,type:S,component:D,containerStyle:I})),dt.createElement("div",{className:"react-flow__edgelabel-renderer"}),dt.createElement(aFe,{nodeTypes:It,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:m,selectNodesOnDrag:H,onlyRenderVisibleElements:L,noPanClassName:Rt,noDragClassName:ot,disableKeyboardA11y:Lt,nodeOrigin:Qt,nodeExtent:qt,rfId:kt})))};yz.displayName="GraphView";var BFe=q.memo(yz);const eN=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Jd={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:eN,nodeExtent:eN,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:u0.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:n3e,isValidConnection:void 0},kFe=()=>p4e((t,e)=>({...Jd,setNodes:r=>{const{nodeInternals:n,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:PS(r,n,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=e();t({edges:r.map(s=>({...n,...s}))})},setDefaultNodesAndEdges:(r,n)=>{const s=typeof r<"u",a=typeof n<"u",i=s?PS(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:a?n:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:c}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:p}=new window.DOMMatrixReadOnly(h.transform),m=r.reduce((x,E)=>{const S=s.get(E.id);if(S!=null&&S.hidden)s.set(S.id,{...S,[Xs]:{...S[Xs],handleBounds:void 0}});else if(S){const B=jB(E.nodeElement);!!(B.width&&B.height&&(S.width!==B.width||S.height!==B.height||E.forceUpdate))&&(s.set(S.id,{...S,[Xs]:{...S[Xs],handleBounds:{source:CM(".source",E.nodeElement,p,c),target:CM(".target",E.nodeElement,p,c)}},...B}),x.push({id:S.id,type:"dimensions",dimensions:B}))}return x},[]);iz(s,c);const y=i||a&&!i&&oz(e,{initial:!0,...o});t({nodeInternals:new Map(s),fitViewOnInitDone:y}),(m==null?void 0:m.length)>0&&(n==null||n(m))},updateNodePositions:(r,n=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),i=r.map(o=>{const l={id:o.id,type:"position",dragging:s};return n&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});a(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(r!=null&&r.length){if(a){const c=cz(r,o()),d=PS(c,s,i,l);t({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:s,getNodes:a}=e();let i,o=null;n?i=r.map(l=>sf(l,!0)):(i=Rp(a(),r),o=Rp(s,[])),o2({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:s,getNodes:a}=e();let i,o=null;n?i=r.map(l=>sf(l,!0)):(i=Rp(s,r),o=Rp(a(),[])),o2({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:s,getNodes:a}=e(),i=r||a(),o=n||s,l=i.map(d=>(d.selected=!1,sf(d.id,!1))),c=o.map(d=>sf(d.id,!1));o2({changedNodes:l,changedEdges:c,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:s}=e();n==null||n.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:s}=e();n==null||n.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:r=>{var n;(n=e().d3Zoom)==null||n.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=e(),a=n().filter(o=>o.selected).map(o=>sf(o.id,!1)),i=r.filter(o=>o.selected).map(o=>sf(o.id,!1));o2({changedNodes:a,changedEdges:i,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:n}=e();n.forEach(s=>{s.positionAbsolute=QB(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:s,height:a,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!r.x&&!r.y)return!1;const c=Bf.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[s,a]],h=i==null?void 0:i.constrain()(c,d,l);return i.transform(o,h),n[0]!==h.x||n[1]!==h.y||n[2]!==h.k},cancelConnection:()=>t({connectionNodeId:Jd.connectionNodeId,connectionHandleId:Jd.connectionHandleId,connectionHandleType:Jd.connectionHandleType,connectionStatus:Jd.connectionStatus,connectionStartHandle:Jd.connectionStartHandle,connectionEndHandle:Jd.connectionEndHandle}),reset:()=>t({...Jd})}),Object.is),XB=({children:t})=>{const e=q.useRef(null);return e.current||(e.current=kFe()),dt.createElement(WIe,{value:e.current},t)};XB.displayName="ReactFlowProvider";const wz=({children:t})=>q.useContext(PC)?dt.createElement(dt.Fragment,null,t):dt.createElement(XB,null,t);wz.displayName="ReactFlowWrapper";const IFe={input:ZV,default:JT,output:tz,group:WB},FFe={default:mb,straight:GB,step:zB,smoothstep:OC,simplebezier:VB},DFe=[0,0],RFe=[15,15],LFe={x:0,y:0,zoom:1},UFe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},bz=q.forwardRef(({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,className:s,nodeTypes:a=IFe,edgeTypes:i=FFe,onNodeClick:o,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:h,onMoveEnd:p,onConnect:m,onConnectStart:y,onConnectEnd:x,onClickConnectStart:E,onClickConnectEnd:S,onNodeMouseEnter:B,onNodeMouseMove:D,onNodeMouseLeave:I,onNodeContextMenu:U,onNodeDoubleClick:F,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:N,onNodesDelete:j,onEdgesDelete:R,onSelectionChange:L,onSelectionDragStart:Q,onSelectionDrag:H,onSelectionDragStop:te,onSelectionContextMenu:Y,onSelectionStart:re,onSelectionEnd:V,connectionMode:J=u0.Strict,connectionLineType:K=Af.Bezier,connectionLineStyle:ae,connectionLineComponent:O,connectionLineContainerStyle:W,deleteKeyCode:Z="Backspace",selectionKeyCode:ne="Shift",selectionOnDrag:le=!1,selectionMode:ve=v1.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:he=hb()?"Meta":"Control",zoomActivationKeyCode:de=hb()?"Meta":"Control",snapToGrid:ce=!1,snapGrid:oe=RFe,onlyRenderVisibleElements:Re=!1,selectNodesOnDrag:qe=!0,nodesDraggable:Ie,nodesConnectable:Ee,nodesFocusable:De,nodeOrigin:je=DFe,edgesFocusable:We,edgesUpdatable:ct,elementsSelectable:wt,defaultViewport:ot=LFe,minZoom:Dt=.5,maxZoom:Rt=2,translateExtent:Yt=eN,preventScrolling:Lt=!0,nodeExtent:Qt,defaultMarkerColor:qt="#b1b1b7",zoomOnScroll:kt=!0,zoomOnPinch:It=!0,panOnScroll:mt=!1,panOnScrollSpeed:_r=.5,panOnScrollMode:Jt=Uh.Free,zoomOnDoubleClick:mn=!0,panOnDrag:wr=!0,onPaneClick:Or,onPaneMouseEnter:Rn,onPaneMouseMove:Lr,onPaneMouseLeave:ga,onPaneScroll:on,onPaneContextMenu:ls,children:bs,onEdgeContextMenu:Qr,onEdgeDoubleClick:nr,onEdgeMouseEnter:Kr,onEdgeMouseMove:xa,onEdgeMouseLeave:es,onEdgeUpdate:Bs,onEdgeUpdateStart:Ua,onEdgeUpdateEnd:Gt,onReconnect:gn,onReconnectStart:ln,onReconnectEnd:Ln,reconnectRadius:zn=10,edgeUpdaterRadius:ts=10,onNodesChange:me,onEdgesChange:Be,noDragClassName:_e="nodrag",noWheelClassName:Se="nowheel",noPanClassName:Te="nopan",fitView:ke=!1,fitViewOptions:$e,connectOnClick:nt=!0,attributionPosition:Ve,proOptions:Xe,defaultEdgeOptions:et,elevateNodesOnSelect:yt=!0,elevateEdgesOnSelect:Bt=!1,disableKeyboardA11y:Ht=!1,autoPanOnConnect:Nt=!0,autoPanOnNodeDrag:Ut=!0,connectionRadius:fr=20,isValidConnection:Hr,onError:Vr,style:$r,id:Os,nodeDragThreshold:Ni,...js},va)=>{const ea=Os||"1";return dt.createElement("div",{...js,style:{...$r,...UFe},ref:va,className:vo(["react-flow",s]),"data-testid":"rf__wrapper",id:Os},dt.createElement(wz,null,dt.createElement(BFe,{onInit:c,onMove:d,onMoveStart:h,onMoveEnd:p,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:B,onNodeMouseMove:D,onNodeMouseLeave:I,onNodeContextMenu:U,onNodeDoubleClick:F,nodeTypes:a,edgeTypes:i,connectionLineType:K,connectionLineStyle:ae,connectionLineComponent:O,connectionLineContainerStyle:W,selectionKeyCode:ne,selectionOnDrag:le,selectionMode:ve,deleteKeyCode:Z,multiSelectionKeyCode:he,panActivationKeyCode:pe,zoomActivationKeyCode:de,onlyRenderVisibleElements:Re,selectNodesOnDrag:qe,defaultViewport:ot,translateExtent:Yt,minZoom:Dt,maxZoom:Rt,preventScrolling:Lt,zoomOnScroll:kt,zoomOnPinch:It,zoomOnDoubleClick:mn,panOnScroll:mt,panOnScrollSpeed:_r,panOnScrollMode:Jt,panOnDrag:wr,onPaneClick:Or,onPaneMouseEnter:Rn,onPaneMouseMove:Lr,onPaneMouseLeave:ga,onPaneScroll:on,onPaneContextMenu:ls,onSelectionContextMenu:Y,onSelectionStart:re,onSelectionEnd:V,onEdgeContextMenu:Qr,onEdgeDoubleClick:nr,onEdgeMouseEnter:Kr,onEdgeMouseMove:xa,onEdgeMouseLeave:es,onReconnect:gn??Bs,onReconnectStart:ln??Ua,onReconnectEnd:Ln??Gt,reconnectRadius:zn??ts,defaultMarkerColor:qt,noDragClassName:_e,noWheelClassName:Se,noPanClassName:Te,elevateEdgesOnSelect:Bt,rfId:ea,disableKeyboardA11y:Ht,nodeOrigin:je,nodeExtent:Qt}),dt.createElement(S3e,{nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:m,onConnectStart:y,onConnectEnd:x,onClickConnectStart:E,onClickConnectEnd:S,nodesDraggable:Ie,nodesConnectable:Ee,nodesFocusable:De,edgesFocusable:We,edgesUpdatable:ct,elementsSelectable:wt,elevateNodesOnSelect:yt,minZoom:Dt,maxZoom:Rt,nodeExtent:Qt,onNodesChange:me,onEdgesChange:Be,snapToGrid:ce,snapGrid:oe,connectionMode:J,translateExtent:Yt,connectOnClick:nt,defaultEdgeOptions:et,fitView:ke,fitViewOptions:$e,onNodesDelete:j,onEdgesDelete:R,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:N,onSelectionDrag:H,onSelectionDragStart:Q,onSelectionDragStop:te,noPanClassName:Te,nodeOrigin:je,rfId:ea,autoPanOnConnect:Nt,autoPanOnNodeDrag:Ut,onError:Vr,connectionRadius:fr,isValidConnection:Hr,nodeDragThreshold:Ni}),dt.createElement(E3e,{onSelectionChange:L}),bs,dt.createElement(XIe,{proOptions:Xe,position:Ve}),dt.createElement(I3e,{rfId:ea,disableKeyboardA11y:Ht})))});bz.displayName="ReactFlow";function Cz(t){return e=>{const[r,n]=q.useState(e),s=q.useCallback(a=>n(i=>t(a,i)),[]);return[r,n,s]}}const MFe=Cz(cz),PFe=Cz(G3e);function OFe(){return dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},dt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function jFe(){return dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},dt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function QFe(){return dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},dt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function HFe(){return dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},dt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function VFe(){return dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},dt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ux=({children:t,className:e,...r})=>dt.createElement("button",{type:"button",className:vo(["react-flow__controls-button",e]),...r},t);ux.displayName="ControlButton";const zFe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Ez=({style:t,showZoom:e=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:c,children:d,position:h="bottom-left"})=>{const p=ci(),[m,y]=q.useState(!1),{isInteractive:x,minZoomReached:E,maxZoomReached:S}=Ps(zFe,io),{zoomIn:B,zoomOut:D,fitView:I}=jC();if(q.useEffect(()=>{y(!0)},[]),!m)return null;const U=()=>{B(),a==null||a()},F=()=>{D(),i==null||i()},C=()=>{I(s),o==null||o()},_=()=>{p.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),l==null||l(!x)};return dt.createElement(RV,{className:vo(["react-flow__controls",c]),position:h,style:t,"data-testid":"rf__controls"},e&&dt.createElement(dt.Fragment,null,dt.createElement(ux,{onClick:U,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:S},dt.createElement(OFe,null)),dt.createElement(ux,{onClick:F,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},dt.createElement(jFe,null))),r&&dt.createElement(ux,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},dt.createElement(QFe,null)),n&&dt.createElement(ux,{className:"react-flow__controls-interactive",onClick:_,title:"toggle interactivity","aria-label":"toggle interactivity"},x?dt.createElement(VFe,null):dt.createElement(HFe,null)),d)};Ez.displayName="Controls";var GFe=q.memo(Ez),qc;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(qc||(qc={}));function qFe({color:t,dimensions:e,lineWidth:r}){return dt.createElement("path",{stroke:t,strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function KFe({color:t,radius:e}){return dt.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const $Fe={[qc.Dots]:"#91919a",[qc.Lines]:"#eee",[qc.Cross]:"#e2e2e2"},WFe={[qc.Dots]:1,[qc.Lines]:1,[qc.Cross]:6},YFe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function _z({id:t,variant:e=qc.Dots,gap:r=20,size:n,lineWidth:s=1,offset:a=2,color:i,style:o,className:l}){const c=q.useRef(null),{transform:d,patternId:h}=Ps(YFe,io),p=i||$Fe[e],m=n||WFe[e],y=e===qc.Dots,x=e===qc.Cross,E=Array.isArray(r)?r:[r,r],S=[E[0]*d[2]||1,E[1]*d[2]||1],B=m*d[2],D=x?[B,B]:S,I=y?[B/a,B/a]:[D[0]/a,D[1]/a];return dt.createElement("svg",{className:vo(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},dt.createElement("pattern",{id:h+t,x:d[0]%S[0],y:d[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${I[0]},-${I[1]})`},y?dt.createElement(KFe,{color:p,radius:B/a}):dt.createElement(qFe,{dimensions:D,color:p,lineWidth:s})),dt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}_z.displayName="Background";var XFe=q.memo(_z);function JFe(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),s=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(s),e&&(n.href=e),s.href=t,s.href}const ZFe=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function If(t){const e=[];for(let r=0,n=t.length;r<n;r++)e.push(t[r]);return e}let gp=null;function Sz(t={}){return gp||(t.includeStyleProperties?(gp=t.includeStyleProperties,gp):(gp=If(window.getComputedStyle(document.documentElement)),gp))}function gb(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function e6e(t){const e=gb(t,"border-left-width"),r=gb(t,"border-right-width");return t.clientWidth+e+r}function t6e(t){const e=gb(t,"border-top-width"),r=gb(t,"border-bottom-width");return t.clientHeight+e+r}function Tz(t,e={}){const r=e.width||e6e(t),n=e.height||t6e(t);return{width:r,height:n}}function r6e(){let t,e;try{e=process}catch{}const r=e&&e.env?e.env.devicePixelRatio:null;return r&&(t=parseInt(r,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const cl=16384;function n6e(t){(t.width>cl||t.height>cl)&&(t.width>cl&&t.height>cl?t.width>t.height?(t.height*=cl/t.width,t.width=cl):(t.width*=cl/t.height,t.height=cl):t.width>cl?(t.height*=cl/t.width,t.width=cl):(t.width*=cl/t.height,t.height=cl))}function xb(t){return new Promise((e,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>e(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=t})}async function s6e(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function a6e(t,e,r){const n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg"),a=document.createElementNS(n,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${r}`),s.setAttribute("viewBox",`0 0 ${e} ${r}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(t),s6e(s)}const Ho=(t,e)=>{if(t instanceof e)return!0;const r=Object.getPrototypeOf(t);return r===null?!1:r.constructor.name===e.name||Ho(r,e)};function i6e(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function o6e(t,e){return Sz(e).map(r=>{const n=t.getPropertyValue(r),s=t.getPropertyPriority(r);return`${r}: ${n}${s?" !important":""};`}).join(" ")}function l6e(t,e,r,n){const s=`.${t}:${e}`,a=r.cssText?i6e(r):o6e(r,n);return document.createTextNode(`${s}{${a}}`)}function IM(t,e,r,n){const s=window.getComputedStyle(t,r),a=s.getPropertyValue("content");if(a===""||a==="none")return;const i=ZFe();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(l6e(i,r,s,n)),e.appendChild(o)}function c6e(t,e,r){IM(t,e,":before",r),IM(t,e,":after",r)}const FM="application/font-woff",DM="image/jpeg",u6e={woff:FM,woff2:FM,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:DM,jpeg:DM,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function A6e(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function JB(t){const e=A6e(t).toLowerCase();return u6e[e]||""}function d6e(t){return t.split(/,/)[1]}function tN(t){return t.search(/^(data:)/)!==-1}function f6e(t,e){return`data:${e};base64,${t}`}async function Nz(t,e,r){const n=await fetch(t,e);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const s=await n.blob();return new Promise((a,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{a(r({res:n,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(s)})}const HS={};function h6e(t,e,r){let n=t.replace(/\?.*/,"");return r&&(n=t),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),e?`[${e}]${n}`:n}async function ZB(t,e,r){const n=h6e(t,e,r.includeQueryParams);if(HS[n]!=null)return HS[n];r.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let s;try{const a=await Nz(t,r.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),d6e(o)));s=f6e(a,e)}catch(a){s=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;a&&(i=typeof a=="string"?a:a.message),i&&console.warn(i)}return HS[n]=s,s}async function p6e(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):xb(e)}async function m6e(t,e){if(t.currentSrc){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,i==null||i.drawImage(t,0,0,a.width,a.height);const o=a.toDataURL();return xb(o)}const r=t.poster,n=JB(r),s=await ZB(r,n,e);return xb(s)}async function g6e(t,e){var r;try{if(!((r=t==null?void 0:t.contentDocument)===null||r===void 0)&&r.body)return await QC(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function x6e(t,e){return Ho(t,HTMLCanvasElement)?p6e(t):Ho(t,HTMLVideoElement)?m6e(t,e):Ho(t,HTMLIFrameElement)?g6e(t,e):t.cloneNode(Bz(t))}const v6e=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",Bz=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function y6e(t,e,r){var n,s;if(Bz(e))return e;let a=[];return v6e(t)&&t.assignedNodes?a=If(t.assignedNodes()):Ho(t,HTMLIFrameElement)&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?a=If(t.contentDocument.body.childNodes):a=If(((s=t.shadowRoot)!==null&&s!==void 0?s:t).childNodes),a.length===0||Ho(t,HTMLVideoElement)||await a.reduce((i,o)=>i.then(()=>QC(o,r)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function w6e(t,e,r){const n=e.style;if(!n)return;const s=window.getComputedStyle(t);s.cssText?(n.cssText=s.cssText,n.transformOrigin=s.transformOrigin):Sz(r).forEach(a=>{let i=s.getPropertyValue(a);a==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Ho(t,HTMLIFrameElement)&&a==="display"&&i==="inline"&&(i="block"),a==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),n.setProperty(a,i,s.getPropertyPriority(a))})}function b6e(t,e){Ho(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Ho(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function C6e(t,e){if(Ho(t,HTMLSelectElement)){const r=e,n=Array.from(r.children).find(s=>t.value===s.getAttribute("value"));n&&n.setAttribute("selected","")}}function E6e(t,e,r){return Ho(e,Element)&&(w6e(t,e,r),c6e(t,e,r),b6e(t,e),C6e(t,e)),e}async function _6e(t,e){const r=t.querySelectorAll?t.querySelectorAll("use"):[];if(r.length===0)return t;const n={};for(let a=0;a<r.length;a++){const o=r[a].getAttribute("xlink:href");if(o){const l=t.querySelector(o),c=document.querySelector(o);!l&&c&&!n[o]&&(n[o]=await QC(c,e,!0))}}const s=Object.values(n);if(s.length){const a="http://www.w3.org/1999/xhtml",i=document.createElementNS(a,"svg");i.setAttribute("xmlns",a),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(a,"defs");i.appendChild(o);for(let l=0;l<s.length;l++)o.appendChild(s[l]);t.appendChild(i)}return t}async function QC(t,e,r){return!r&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(n=>x6e(n,e)).then(n=>y6e(t,n,e)).then(n=>E6e(t,n,e)).then(n=>_6e(n,e))}const kz=/url\((['"]?)([^'"]+?)\1\)/g,S6e=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,T6e=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function N6e(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function B6e(t){const e=[];return t.replace(kz,(r,n,s)=>(e.push(s),r)),e.filter(r=>!tN(r))}async function k6e(t,e,r,n,s){try{const a=r?JFe(e,r):e,i=JB(e);let o;return s||(o=await ZB(a,i,n)),t.replace(N6e(e),`$1${o}$3`)}catch{}return t}function I6e(t,{preferredFontFormat:e}){return e?t.replace(T6e,r=>{for(;;){const[n,,s]=S6e.exec(r)||[];if(!s)return"";if(s===e)return`src: ${n};`}}):t}function Iz(t){return t.search(kz)!==-1}async function Fz(t,e,r){if(!Iz(t))return t;const n=I6e(t,r);return B6e(n).reduce((a,i)=>a.then(o=>k6e(o,i,e,r)),Promise.resolve(n))}async function xp(t,e,r){var n;const s=(n=e.style)===null||n===void 0?void 0:n.getPropertyValue(t);if(s){const a=await Fz(s,null,r);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function F6e(t,e){await xp("background",t,e)||await xp("background-image",t,e),await xp("mask",t,e)||await xp("-webkit-mask",t,e)||await xp("mask-image",t,e)||await xp("-webkit-mask-image",t,e)}async function D6e(t,e){const r=Ho(t,HTMLImageElement);if(!(r&&!tN(t.src))&&!(Ho(t,SVGImageElement)&&!tN(t.href.baseVal)))return;const n=r?t.src:t.href.baseVal,s=await ZB(n,JB(n),e);await new Promise((a,i)=>{t.onload=a,t.onerror=e.onImageErrorHandler?(...l)=>{try{a(e.onImageErrorHandler(...l))}catch(c){i(c)}}:i;const o=t;o.decode&&(o.decode=a),o.loading==="lazy"&&(o.loading="eager"),r?(t.srcset="",t.src=s):t.href.baseVal=s})}async function R6e(t,e){const n=If(t.childNodes).map(s=>Dz(s,e));await Promise.all(n).then(()=>t)}async function Dz(t,e){Ho(t,Element)&&(await F6e(t,e),await D6e(t,e),await R6e(t,e))}function L6e(t,e){const{style:r}=t;e.backgroundColor&&(r.backgroundColor=e.backgroundColor),e.width&&(r.width=`${e.width}px`),e.height&&(r.height=`${e.height}px`);const n=e.style;return n!=null&&Object.keys(n).forEach(s=>{r[s]=n[s]}),t}const RM={};async function LM(t){let e=RM[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},RM[t]=e,e}async function UM(t,e){let r=t.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,a=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),Nz(o,e.fetchRequestInit,({result:l})=>(r=r.replace(i,`url(${l})`),[i,l]))});return Promise.all(a).then(()=>r)}function MM(t){if(t==null)return[];const e=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=t.replace(r,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=s.exec(n);if(l===null)break;e.push(l[0])}n=n.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=a.exec(n);if(l===null){if(l=o.exec(n),l===null)break;a.lastIndex=o.lastIndex}else o.lastIndex=a.lastIndex;e.push(l[0])}return e}async function U6e(t,e){const r=[],n=[];return t.forEach(s=>{if("cssRules"in s)try{If(s.cssRules||[]).forEach((a,i)=>{if(a.type===CSSRule.IMPORT_RULE){let o=i+1;const l=a.href,c=LM(l).then(d=>UM(d,e)).then(d=>MM(d).forEach(h=>{try{s.insertRule(h,h.startsWith("@import")?o+=1:s.cssRules.length)}catch(p){console.error("Error inserting rule from remote css",{rule:h,error:p})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(c)}})}catch(a){const i=t.find(o=>o.href==null)||document.styleSheets[0];s.href!=null&&n.push(LM(s.href).then(o=>UM(o,e)).then(o=>MM(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",a)}}),Promise.all(n).then(()=>(t.forEach(s=>{if("cssRules"in s)try{If(s.cssRules||[]).forEach(a=>{r.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),r))}function M6e(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Iz(e.style.getPropertyValue("src")))}async function P6e(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=If(t.ownerDocument.styleSheets),n=await U6e(r,e);return M6e(n)}function Rz(t){return t.trim().replace(/["']/g,"")}function O6e(t){const e=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(a=>{e.add(Rz(a))}),Array.from(n.children).forEach(a=>{a instanceof HTMLElement&&r(a)})}return r(t),e}async function j6e(t,e){const r=await P6e(t,e),n=O6e(t);return(await Promise.all(r.filter(a=>n.has(Rz(a.style.fontFamily))).map(a=>{const i=a.parentStyleSheet?a.parentStyleSheet.href:null;return Fz(a.cssText,i,e)}))).join(`
`)}async function Q6e(t,e){const r=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await j6e(t,e);if(r){const n=document.createElement("style"),s=document.createTextNode(r);n.appendChild(s),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}}async function H6e(t,e={}){const{width:r,height:n}=Tz(t,e),s=await QC(t,e,!0);return await Q6e(s,e),await Dz(s,e),L6e(s,e),await a6e(s,r,n)}async function V6e(t,e={}){const{width:r,height:n}=Tz(t,e),s=await H6e(t,e),a=await xb(s),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||r6e(),c=e.canvasWidth||r,d=e.canvasHeight||n;return i.width=c*l,i.height=d*l,e.skipAutoScale||n6e(i),i.style.width=`${c}`,i.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(a,0,0,i.width,i.height),i}async function HC(t,e={}){return(await V6e(t,e)).toDataURL()}const Lz="recursos_crucigramas",VC="recursos_lineas_de_tiempo",zC="recursos_mapas_mentales",Uz="recursos_sopas_de_letras",GC=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,createdAt:((a=(s=e.createdAt)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.createdAt}},z6e=t=>{const e=er(Ft(Tt,Lz),an("fechaCreacion","desc"));return gr(e,r=>{const n=r.docs.map(s=>GC(s));t(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),t([])})},G6e=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:ur.fromDate(new Date)};return(await ws(Ft(Tt,Lz),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},q6e=t=>{const e=er(Ft(Tt,VC),an("createdAt","desc"));return gr(e,r=>{const n=r.docs.map(s=>GC(s));t(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),t([])})},K6e=async(t,e)=>{try{const{id:r,...n}=t,s=mr(Tt,VC,r);await Ti(s,{...n,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:ur.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},$6e=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:ur.fromDate(new Date)};return(await ws(Ft(Tt,VC),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},W6e=async t=>{try{const e=mr(Tt,VC,t);await li(e)}catch(e){throw console.error("Error al eliminar la línea de tiempo:",e),new Error("No se pudo eliminar la línea de tiempo.")}},Y6e=t=>{const e=er(Ft(Tt,zC),an("createdAt","desc"));return gr(e,r=>{const n=r.docs.map(s=>GC(s));t(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),t([])})},X6e=async(t,e)=>{try{const{id:r,...n}=t,s=mr(Tt,zC,r);await Ti(s,{...n,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:ur.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},J6e=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:ur.fromDate(new Date)};return(await ws(Ft(Tt,zC),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},Z6e=async t=>{try{const e=mr(Tt,zC,t);await li(e)}catch(e){throw console.error("Error al eliminar el mapa mental:",e),new Error("No se pudo eliminar el mapa mental.")}},eDe=t=>{const e=er(Ft(Tt,Uz),an("createdAt","desc"));return gr(e,r=>{const n=r.docs.map(s=>GC(s));t(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),t([])})},tDe=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:ur.fromDate(new Date)};return(await ws(Ft(Tt,Uz),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},rDe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),nDe=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),sDe=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),aDe=({data:t})=>{const e={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=e[t.type||"default"]||e.default;return u.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[u.jsx(bm,{type:"target",position:cr.Left,className:"w-2 h-2 !bg-slate-400"}),u.jsx("span",{className:"text-xl",children:t.icon||"🧠"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:t.label}),t.type&&u.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.type})]}),u.jsx(bm,{type:"source",position:cr.Right,className:"w-2 h-2 !bg-slate-400"})]})},rN=(t,e)=>!t.children||t.children.length===0?e:t.children.reduce((r,n)=>r+rN(n,e),0),nN=(t,e="tree")=>{const r=[],n=[];if(e==="tree"){const i=(o,l,c)=>{r.push({id:o.id,position:{x:l*280,y:c},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=rN(o,100);let h=c-d/2+100/2;(o.children||[]).forEach(p=>{const m=rN(p,100),y=h+m/2-100/2;n.push({id:`e-${o.id}-${p.id}`,source:o.id,target:p.id,type:"smoothstep",animated:!0}),i(p,l+1,y),h+=m})};i(t,0,0)}else{r.push({id:t.id,position:{x:0,y:0},data:{label:t.label,icon:t.icon,type:t.type},type:"custom"});const i=300,o=500;(t.children||[]).forEach((l,c)=>{const d=c/t.children.length*2*Math.PI;r.push({id:l.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"}),n.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((h,p)=>{const m=d+(p-(l.children.length-1)/2)*.25;r.push({id:h.id,position:{x:o*Math.cos(m),y:o*Math.sin(m)},data:{label:h.label,icon:h.icon,type:h.type},type:"custom"}),n.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},Mz=({node:t,onUpdate:e,onAddChild:r,onDelete:n,level:s=0})=>{const a=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return u.jsxs("div",{className:`pl-4 ${s>0?"border-l "+i[s-1%i.length]:""}`,children:[u.jsx("div",{className:`p-2 rounded-lg my-1 ${a[s%a.length]}`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),u.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),s>0&&u.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(t.children||[]).map(o=>u.jsx(Mz,{node:o,onUpdate:e,onAddChild:r,onDelete:n,level:s+1},o.id))]})},iDe={custom:aDe},oDe=({mapData:t,onBack:e,onSave:r})=>{const[n,s]=q.useState(t.treeData),[a,i]=q.useState("tree"),[o,l]=q.useState(!1),[c,d,h]=MFe([]),[p,m,y]=PFe([]),{fitView:x}=jC();q.useEffect(()=>{const{nodes:U,edges:F}=nN(n,a);d(U),m(F),setTimeout(()=>x({duration:300}),50)},[n,a,d,m,x]);const E=(U,F)=>{const C=JSON.parse(JSON.stringify(n)),_=N=>N.id===U?(N.label=F,!0):(N.children||[]).some(_);_(C),s(C)},S=U=>{const F=JSON.parse(JSON.stringify(n)),C=_=>_.id===U?(_.children||(_.children=[]),_.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(_.children||[]).some(C);C(F),s(F)},B=U=>{const F=JSON.parse(JSON.stringify(n)),C=_=>{const N=(_.children||[]).findIndex(j=>j.id===U);return N!==-1?(_.children.splice(N,1),!0):(_.children||[]).some(C)};C(F),s(F)},D=()=>{l(!0);const{nodes:U,edges:F}=nN(n,a);r({...t,treeData:n,nodes:U,edges:F}),setTimeout(()=>l(!1),1e3)},I=async U=>{const F=document.querySelector(".react-flow");F&&HC(F,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(C=>{{const _=document.createElement("a");_.download=`${t.tema}.png`,_.href=C,_.click()}}).catch(C=>console.error("oops, something went wrong!",C))};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),u.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:u.jsxs(bz,{nodes:c,edges:p,onNodesChange:h,onEdgesChange:y,fitView:!0,nodeTypes:iDe,children:[u.jsx(GFe,{}),u.jsx(XFe,{})]})}),u.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),u.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[u.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[u.jsx(nDe,{})," Vista en árbol"]}),u.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[u.jsx(sDe,{})," Vista central"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:u.jsx(Mz,{node:n,onUpdate:E,onAddChild:S,onDelete:B})}),u.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[u.jsx("button",{onClick:()=>I(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),u.jsx("button",{onClick:D,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},lDe=({onBack:t,currentUser:e})=>{const[r,n]=q.useState("list"),[s,a]=q.useState([]),[i,o]=q.useState(null),[l,c]=q.useState(!1),[d,h]=q.useState(!0),[p,m]=q.useState(""),[y,x]=q.useState(""),[E,S]=q.useState("");q.useEffect(()=>{h(!0);const C=Y6e(_=>{a(_),h(!1)});return()=>C()},[]);const B=async C=>{if(C.preventDefault(),!p.trim()){alert("El tema es obligatorio.");return}c(!0);const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",N=`
            Basado en el tema central "${p}", y considerando el contenido adicional "${E}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${p}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const te=(await(await new Ra(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(te),re=W=>({id:crypto.randomUUID(),label:W.label||"Sin etiqueta",icon:W.icon||"🧠",type:W.type||"default",children:(W.children||[]).map(re)}),V=re(Y),{nodes:J,edges:K}=nN(V),ae={tema:p,nivel:y,treeData:V,nodes:J,edges:K},O=await J6e(ae,e);o({...ae,id:O,createdAt:new Date().toISOString()}),n("editor")}catch(j){console.error("AI Generation Error:",j),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{c(!1)}},D=async C=>{try{await X6e(C,e)}catch(_){console.error("Error saving mind map:",_),alert("No se pudo guardar el mapa mental.")}},I=C=>{o(C),n("editor")},U=async C=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await Z6e(C)}catch(_){console.error("Error deleting mind map:",_),alert("No se pudo eliminar el mapa mental.")}},F=()=>{switch(r){case"editor":return i?u.jsx(XB,{children:u.jsx(oDe,{mapData:i,onBack:()=>n("list"),onSave:D})}):null;case"config":return u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),u.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),u.jsxs("form",{onSubmit:B,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",id:"tema",value:p,onChange:C=>m(C.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),u.jsx("textarea",{id:"contenido",value:E,onChange:C=>S(C.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsx("div",{className:"flex justify-end pt-4",children:u.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?u.jsx(rDe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),u.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length>0?s.map(C=>u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[u.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:C.tema}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(C.createdAt).toLocaleDateString("es-CL")]}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsx("button",{onClick:()=>I(C),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),u.jsx("button",{onClick:()=>U(C.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},C.id)):u.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?u.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx("span",{className:"text-4xl",children:"🧠"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),F()]})},cDe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),uDe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),ADe=({onBack:t,currentUser:e})=>{const[r,n]=q.useState([]),[s,a]=q.useState("Media"),[i,o]=q.useState(10),[l,c]=q.useState(!1),[d,h]=q.useState(Array(10).fill("")),[p,m]=q.useState(""),[y,x]=q.useState(null),[E,S]=q.useState({ai:!1,puzzle:!1,data:!0}),B=q.useRef(null);q.useEffect(()=>{S(R=>({...R,data:!0}));const j=eDe(R=>{n(R),S(L=>({...L,data:!1}))});return()=>j()},[]),q.useEffect(()=>{h(j=>{const R=Array(i).fill("");for(let L=0;L<Math.min(j.length,i);L++)R[L]=j[L];return R})},[i]);const D=(j,R)=>{const L=[...d];L[j]=R,h(L)},I=async()=>{if(p.trim()){S(j=>({...j,ai:!0}));try{const j="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",L=new Ra(j).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Q=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${p}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,re=(await(await L.generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(re);if(!V.palabras||!Array.isArray(V.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const K=[...V.palabras.map(ae=>ae.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;K.length<i;)K.push("");h(K)}catch(j){console.error("Error generating words with AI:",j),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{S(j=>({...j,ai:!1}))}}},U=(j,R,L,Q,H,te)=>{for(let Y=0;Y<j.length;Y++){const re=L+Y*H.y,V=Q+Y*H.x;if(re<0||re>=te||V<0||V>=te||R[re][V]&&R[re][V]!==j[Y])return!1}return!0},F=(j,R,L,Q,H)=>{for(let te=0;te<j.length;te++)R[L+te*H.y][Q+te*H.x]=j[te]},C=async()=>{S(re=>({...re,puzzle:!0})),x(null),await new Promise(re=>setTimeout(re,100));const j=d.map(re=>re.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(j.length===0){alert("Por favor, ingrese al menos una palabra válida."),S(re=>({...re,puzzle:!1}));return}const R=Math.max(...j.map(re=>re.length));let L=Math.max(R,j.length)+2;s==="Media"&&(L+=3),s==="Difícil"&&(L+=5),L=Math.min(Math.max(L,10),25);const Q=Array(L).fill(null).map(()=>Array(L).fill(null)),H=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];s!=="Fácil"&&H.push({x:1,y:-1}),s==="Difícil"&&H.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const re of j.sort((V,J)=>J.length-V.length)){let V=!1;for(let J=0;J<100;J++){const K=H[Math.floor(Math.random()*H.length)],ae=Math.floor(Math.random()*L),O=Math.floor(Math.random()*L);if(U(re,Q,ae,O,K,L)){F(re,Q,ae,O,K),V=!0;break}}V||console.warn(`No se pudo colocar la palabra: ${re}`)}const te=Q.map(re=>re.map(V=>V||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),Y={tema:p||"Personalizado",grid:te.map(re=>re.join("")),words:j.sort()};try{const re=await tDe(Y,e);x({...Y,id:re,createdAt:new Date().toISOString()})}catch(re){console.error("Error saving puzzle:",re),alert("No se pudo guardar la sopa de letras.")}finally{S(re=>({...re,puzzle:!1}))}},_=()=>{B.current&&HC(B.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(j=>{const R=document.createElement("a");R.download="sopa-de-letras.png",R.href=j,R.click()}).catch(j=>{console.error("oops, something went wrong!",j),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},N=()=>{var L;if(!y)return null;const j=((L=y.grid[0])==null?void 0:L.length)||1,R=y.grid.join("").split("");return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{ref:B,className:"p-6 bg-white",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsx("div",{className:"md:col-span-2",children:u.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${j}, minmax(0, 1fr))`},children:R.map((Q,H)=>u.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:Q},H))})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),u.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:y.words.map(Q=>u.jsx("li",{children:Q},Q))})]})]})}),u.jsxs("div",{className:"flex justify-end gap-4",children:[u.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),u.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return E.data?u.jsx("div",{className:"text-center py-10",children:"Cargando..."}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-4xl",children:"🅰️"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!y&&u.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),u.jsxs("select",{value:s,onChange:j=>a(j.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{children:"Fácil"}),u.jsx("option",{children:"Media"}),u.jsx("option",{children:"Difícil"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(j=>u.jsx("button",{onClick:()=>{o(j),c(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&i===j?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:j},j)),u.jsx("button",{onClick:()=>c(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&u.jsx("input",{type:"number",value:i,onChange:j=>o(parseInt(j.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{id:"ai-theme",type:"text",value:p,onChange:j=>m(j.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:I,disabled:E.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:E.ai?u.jsx(cDe,{}):u.jsxs(u.Fragment,{children:[u.jsx(uDe,{}),u.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((j,R)=>u.jsx("input",{type:"text",value:j,onChange:L=>D(R,L.target.value),placeholder:`Palabra ${R+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},R))})]}),u.jsx("div",{className:"text-right pt-4",children:u.jsx("button",{onClick:C,disabled:E.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:E.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),y&&N()]})},dDe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),fDe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),hDe=({timeline:t,onSave:e,onBack:r})=>{const[n,s]=q.useState(t),[a,i]=q.useState(null),o=q.useRef(null),l=(m,y,x)=>{s(E=>({...E,events:E.events.map(S=>S.id===m?{...S,[y]:x}:S)}))},c=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},y=[...n.events,m].sort((x,E)=>parseInt(x.date)-parseInt(E.date));s(x=>({...x,events:y}))},d=m=>{s(y=>({...y,events:y.events.filter(x=>x.id!==m)}))},h=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(m.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${m.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const U=(await(await new Ra(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),F=JSON.parse(U);s(C=>({...C,events:C.events.map(_=>_.id===m.id?{..._,date:F.date,description:F.description,icon:F.icon}:_).sort((_,N)=>parseInt(_.date)-parseInt(N.date))}))}catch(E){console.error("Error al generar descripción del hito:",E),alert("No se pudo autocompletar el hito.")}finally{i(null)}},p=()=>{o.current&&HC(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const y=document.createElement("a");y.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,y.href=m,y.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),u.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:u.jsxs("div",{ref:o,className:"relative p-10",children:[u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),u.jsx("div",{className:"relative",children:n.events.sort((m,y)=>parseInt(m.date)-parseInt(y.date)).map((m,y)=>{const x=y%2===0;return u.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[u.jsx("div",{className:"w-1/2",children:x&&u.jsx("div",{className:"text-right pr-8",children:u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[u.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),u.jsx("div",{className:"z-10 flex-shrink-0",children:u.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),u.jsx("div",{className:"w-1/2",children:!x&&u.jsx("div",{className:"text-left pl-8",children:u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[u.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(m=>u.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[u.jsx("input",{type:"text",value:m.date,onChange:y=>l(m.id,"date",y.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx("textarea",{value:m.description,onChange:y=>l(m.id,"description",y.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),u.jsx("button",{onClick:()=>h(m),disabled:a===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:a===m.id?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):u.jsx(fDe,{})})]}),u.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),u.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[u.jsx("button",{onClick:c,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:p,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),u.jsx("button",{onClick:()=>e(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},pDe=({onBack:t,currentUser:e})=>{const[r,n]=q.useState("list"),[s,a]=q.useState([]),[i,o]=q.useState(null),[l,c]=q.useState(!1),[d,h]=q.useState(!0),[p,m]=q.useState(""),[y,x]=q.useState(""),[E,S]=q.useState("");q.useEffect(()=>{h(!0);const U=q6e(F=>{a(F),h(!1)});return()=>U()},[]);const B=async U=>{if(U.preventDefault(),!p.trim()){alert("El tema es obligatorio.");return}c(!0);const F="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",C=y&&E?`entre ${y} y ${E}`:y?`a partir de ${y}`:E?`hasta ${E}`:"",_=`
            Genera una línea de tiempo sobre el tema "${p}" ${C}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const H=(await(await new Ra(F).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(_)).response).text().replace(/^```json\s*|```\s*$/g,""),te=JSON.parse(H);if(!te.events||!Array.isArray(te.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const Y={tema:p,fechaInicio:y,fechaFin:E,events:te.events.map(V=>({id:crypto.randomUUID(),date:V.date||"Sin fecha",description:V.description||"Sin descripción",icon:V.icon||"🗓️"}))},re=await $6e(Y,e);o({...Y,id:re,createdAt:new Date().toISOString()}),n("editor")}catch(N){console.error("AI Generation Error:",N),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{c(!1)}},D=async U=>{try{await K6e(U,e),n("list"),o(null)}catch(F){console.error("Error saving timeline:",F),alert("No se pudo guardar la línea de tiempo.")}},I=async U=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await W6e(U)}catch(F){console.error("Error deleting timeline:",F),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?u.jsx(hDe,{timeline:i,onSave:D,onBack:()=>n("list")}):d?u.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-4xl",children:"🕒"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),u.jsxs("form",{onSubmit:B,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",id:"tema",value:p,onChange:U=>m(U.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),u.jsx("input",{type:"text",id:"fechaInicio",value:y,onChange:U=>x(U.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),u.jsx("input",{type:"text",id:"fechaFin",value:E,onChange:U=>S(U.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?u.jsx(dDe,{}):"Generar con IA"})})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),s.length>0?s.map(U=>u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:U.tema}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(U.createdAt).toLocaleDateString("es-CL")]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{o(U),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),u.jsx("button",{onClick:()=>I(U.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},U.id)):u.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},mDe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),PM=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),gDe=({onBack:t,currentUser:e})=>{const[r,n]=q.useState([]),[s,a]=q.useState(10),[i,o]=q.useState(!1),[l,c]=q.useState(Array(10).fill("")),[d,h]=q.useState(Array(10).fill("")),[p,m]=q.useState(""),[y,x]=q.useState(null),[E,S]=q.useState(!1),[B,D]=q.useState({ai:!1,puzzle:!1,data:!0}),[I,U]=q.useState(null),F=q.useRef(null);q.useEffect(()=>{D(te=>({...te,data:!0}));const H=z6e(te=>{const Y=te.map(re=>{const{grid_flat:V,grid_width:J,...K}=re,ae=[];if(V&&J>0)for(let O=0;O<V.length;O+=J)ae.push(V.slice(O,O+J));return{...K,grid:ae}});n(Y),D(re=>({...re,data:!1}))});return()=>H()},[]),q.useEffect(()=>{const H=s;c(te=>Array.from({length:H},(Y,re)=>te[re]||"")),h(te=>Array.from({length:H},(Y,re)=>te[re]||""))},[s]);const C=(H,te)=>{const Y=[...l];Y[H]=te,c(Y)},_=(H,te)=>{const Y=[...d];Y[H]=te,h(Y)},N=async()=>{if(p.trim()){D(H=>({...H,ai:!0}));try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Y=new Ra(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}),re=`
                Genera una lista de ${s} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${p}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${s} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let ae=(await(await Y.generateContent(re)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const O=ae.indexOf("{"),W=ae.lastIndexOf("}");O!==-1&&W!==-1&&(ae=ae.substring(O,W+1)),ae=ae.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),ae.includes("__SPLIT__")&&(ae=ae.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(ve,pe,he,de)=>{const ce=he.split("__SPLIT__").map(oe=>oe.trim().replace(/,$/,""));return pe+ce.join(",")+de})),ae=ae.replace(/,\s*]/g,"]");let Z;try{Z=JSON.parse(ae)}catch{console.error("Respuesta IA no es JSON válido:",ae),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),D(pe=>({...pe,ai:!1}));return}if(!Z.items||!Array.isArray(Z.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const ne=Z.items.map(ve=>(ve.word||"").toUpperCase().replace(/\s/g,"")),le=Z.items.map(ve=>ve.clue||"");c(Array.from({length:s},(ve,pe)=>ne[pe]||"")),h(Array.from({length:s},(ve,pe)=>le[pe]||""))}catch(H){console.error("Error generating words/clues with AI:",H),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{D(H=>({...H,ai:!1}))}}},j=async H=>{const te=l[H];if(!te||!te.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}U(H);try{const Y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new Ra(Y).getGenerativeModel({model:"gemini-1.5-flash-latest"}),J=`Para un crucigrama con el tema "${p||"general"}", genera una pista concisa y creativa para la palabra "${te}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,W=(await(await V.generateContent(J)).response).text().replace(/^```json\s*|```\s*$/g,""),Z=JSON.parse(W);Z.clue&&_(H,Z.clue)}catch(Y){console.error("Error generating clue with AI:",Y),alert("No se pudo generar la pista.")}finally{U(null)}},R=q.useCallback(()=>{try{const H=l.map((De,je)=>({word:De.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[je]})).filter(De=>De.word.length>0);if(H.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;H.sort((De,je)=>je.word.length-De.word.length);const te=H[0].word.length,Y=Math.max(te,H.length)*2;let re=Array.from({length:Y},()=>Array(Y).fill(null));const V=[],J=H.shift(),K=Math.floor(Y/2),ae=Math.floor((Y-J.word.length)/2);for(let De=0;De<J.word.length;De++)re[K][ae+De]=J.word[De];V.push({word:J.word,clue:J.clue,direction:"across",row:K,col:ae});for(const De of H){let je={score:-1,row:-1,col:-1,direction:"across"};for(const We of V)for(let ct=0;ct<We.word.length;ct++)for(let wt=0;wt<De.word.length;wt++)if(We.word[ct]===De.word[wt]){let ot=0,Dt,Rt,Yt;We.direction==="across"?(Yt="down",Dt=We.row-wt,Rt=We.col+ct):(Yt="across",Dt=We.row+ct,Rt=We.col-wt);let Lt=!0;for(let Qt=0;Qt<De.word.length;Qt++){const qt=Dt+(Yt==="down"?Qt:0),kt=Rt+(Yt==="across"?Qt:0);if(qt<0||qt>=Y||kt<0||kt>=Y){Lt=!1;break}const It=re[qt][kt],mt=qt===We.row+(We.direction==="down"?ct:0)&&kt===We.col+(We.direction==="across"?ct:0);if(It&&!mt){Lt=!1;break}if(It&&mt&&It!==De.word[wt]){Lt=!1;break}if(!mt){if(Yt==="across"&&(qt>0&&re[qt-1][kt]||qt<Y-1&&re[qt+1][kt])){Lt=!1;break}if(Yt==="down"&&(kt>0&&re[qt][kt-1]||kt<Y-1&&re[qt][kt+1])){Lt=!1;break}}It&&ot++}Lt&&ot>je.score&&(je={score:ot,row:Dt,col:Rt,direction:Yt})}if(je.score>-1){for(let We=0;We<De.word.length;We++){const ct=je.row+(je.direction==="down"?We:0),wt=je.col+(je.direction==="across"?We:0);re[ct][wt]=De.word[We]}V.push({word:De.word,clue:De.clue,direction:je.direction,row:je.row,col:je.col})}}let O=Y,W=-1,Z=Y,ne=-1;V.forEach(De=>{O=Math.min(O,De.row),W=Math.max(W,De.row+(De.direction==="down"?De.word.length-1:0)),Z=Math.min(Z,De.col),ne=Math.max(ne,De.col+(De.direction==="across"?De.word.length-1:0))}),W===-1&&(O=V[0].row,W=V[0].row,Z=V[0].col,ne=V[0].col+V[0].word.length-1);const le=1,ve=Math.max(0,O-le),pe=Math.min(Y,W+1+le),he=Math.max(0,Z-le),de=Math.min(Y,ne+1+le),ce=re.slice(ve,pe).map(De=>De.slice(he,de)),oe=V.map(De=>({...De,row:De.row-ve,col:De.col-he})).sort((De,je)=>De.row-je.row||De.col-je.col);let Re=1;const qe=[],Ie=new Map;oe.forEach(De=>{const je=`${De.row},${De.col}`;Ie.has(je)||Ie.set(je,Re++),qe.push({...De,number:Ie.get(je)})});const Ee=ce.map(De=>De.map(je=>({char:je,number:null})));return qe.forEach(De=>{const je=`${De.row},${De.col}`;Ee[De.row]&&Ee[De.row][De.col]!==void 0&&(Ee[De.row][De.col].number=Ie.get(je))}),{grid:Ee,clues:{across:qe.filter(De=>De.direction==="across").sort((De,je)=>De.number-je.number),down:qe.filter(De=>De.direction==="down").sort((De,je)=>De.number-je.number)}}}catch(H){return console.error("Error generating crossword grid:",H),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,d]),L=async()=>{var te;D(Y=>({...Y,puzzle:!0})),x(null),await new Promise(Y=>setTimeout(Y,100));const H=R();if(H){const Y={creadorId:e.id,creadorNombre:e.nombreCompleto,tema:p||"Personalizado",grid:H.grid,clues:H.clues},{grid:re,...V}=Y,J={...V,grid_flat:re.flat().map(K=>K.char||""),grid_width:((te=re[0])==null?void 0:te.length)||0};try{const K=await G6e(J,e);x({...Y,id:K,fechaCreacion:new Date().toISOString()})}catch(K){console.error("Error saving puzzle:",K),alert("No se pudo guardar el crucigrama en la base de datos.")}}D(Y=>({...Y,puzzle:!1}))},Q=()=>{F.current&&(S(!1),setTimeout(()=>{HC(F.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(H=>{const te=document.createElement("a");te.download="crucigrama.png",te.href=H,te.click()}).catch(H=>console.error("Error generating image",H))},100))};return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-4xl",children:"✏️"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),y?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{ref:F,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsx("div",{children:u.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${y.grid[0].length}, 2rem)`},children:y.grid.flat().map((H,te)=>u.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:H.char?"white":"black"},children:[H.number&&u.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:H.number}),E&&H.char&&u.jsx("span",{children:H.char})]},te))})}),u.jsxs("div",{className:"text-sm",children:[u.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),u.jsx("ul",{className:"space-y-1",children:y.clues.across.map(H=>u.jsxs("li",{children:[u.jsxs("strong",{children:[H.number,"."]})," ",H.clue]},`${H.word}-${H.clue}`))}),u.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),u.jsx("ul",{className:"space-y-1",children:y.clues.down.map(H=>u.jsxs("li",{children:[u.jsxs("strong",{children:[H.number,"."]})," ",H.clue]},`${H.word}-${H.clue}`))})]})]})}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",checked:E,onChange:()=>S(!E),className:"h-5 w-5 rounded"}),u.jsx("span",{children:"Mostrar Solución"})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),u.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):u.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(H=>u.jsx("button",{onClick:()=>{a(H),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&s===H?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:H},H)),u.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&u.jsx("input",{type:"number",value:s,onChange:H=>a(parseInt(H.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{id:"ai-theme",type:"text",value:p,onChange:H=>m(H.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:N,disabled:B.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:B.ai?u.jsx(mDe,{}):u.jsxs(u.Fragment,{children:[u.jsx(PM,{}),u.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),u.jsx("div",{className:"space-y-3",children:Array.from({length:s}).map((H,te)=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[u.jsx("input",{type:"text",value:l[te],onChange:Y=>C(te,Y.target.value),placeholder:`Palabra ${te+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[u.jsx("textarea",{value:d[te],onChange:Y=>_(te,Y.target.value),placeholder:`Pista ${te+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:()=>j(te),disabled:I===te,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:I===te?u.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):u.jsx(PM,{})})]})]},te))}),u.jsx("div",{className:"text-right pt-4",children:u.jsx("button",{onClick:L,disabled:B.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:B.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},xDe=()=>{const[t,e]=q.useState(null),[r,n]=q.useState(!0);return q.useEffect(()=>{const s=mP(Fee,async a=>{if(a&&a.email)try{const i=await ij(a.email);e(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),e(null)}else e(null);n(!1)});return()=>s()},[]),{currentUser:t,loading:r}},vDe=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],yDe=({recurso:t,onClick:e})=>u.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[u.jsx("div",{className:"text-6xl mb-4",children:t.icon}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),wDe=()=>{const[t,e]=q.useState("menu"),{currentUser:r}=xDe(),n=()=>t!=="menu"&&!r?u.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):t==="mapasMentales"?u.jsx(lDe,{onBack:()=>e("menu"),currentUser:r}):t==="sopaDeLetras"?u.jsx(ADe,{onBack:()=>e("menu"),currentUser:r}):t==="lineasDeTiempo"?u.jsx(pDe,{onBack:()=>e("menu"),currentUser:r}):t==="crucigramas"?u.jsx(gDe,{onBack:()=>e("menu"),currentUser:r}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:vDe.map(s=>u.jsx(yDe,{recurso:s,onClick:()=>e(s.id)},s.id))})]});return u.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},bDe="evaluaciones_formativas",CDe="calificaciones_formativas",Pz="trabajos_grupales_formativos",Oz=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},EDe=(t,e)=>{const r=er(Ft(Tt,bDe),Mn("curso","==",t));return gr(r,n=>{e(n.docs.map(s=>Oz(s)))},n=>{console.error("Error subscribing to student evaluations:",n),e([])})},_De=t=>{const e=er(Ft(Tt,CDe));return gr(e,r=>{const n={};r.forEach(s=>{n[s.id]=s.data()}),t(n)},r=>{console.error("Error subscribing to grades:",r),t({})})},SDe=(t,e)=>{const r=er(Ft(Tt,Pz),Mn("curso","==",t));return gr(r,n=>{e(n.docs.map(s=>Oz(s)))},n=>{console.error("Error subscribing to group projects:",n),e([])})},TDe=async t=>{try{const{id:e,...r}=t,n=mr(Tt,Pz,e);await Ti(n,r)}catch(e){throw console.error("Error updating group project:",e),new Error("Could not update group project.")}},NDe=({currentUser:t})=>{const[e,r]=q.useState([]),[n,s]=q.useState({}),[a,i]=q.useState([]),[o,l]=q.useState(!0),[c,d]=q.useState(null),[h,p]=q.useState(!1),[m,y]=q.useState(null),x=q.useRef(null);q.useEffect(()=>{if(!t.curso){l(!1);return}l(!0);const I=EDe(t.curso,r),U=_De(s),F=SDe(t.curso,C=>{i(C),l(!1)});return()=>{I(),U(),F()}},[t.curso]);const E=q.useMemo(()=>{if(!t.curso)return[];const U=e.filter(F=>F.curso===t.curso).reduce((F,C)=>((F[C.asignatura]=F[C.asignatura]||[]).push(C),F),{});return Object.entries(U).map(([F,C])=>{let _=0,N=0;const j=C.map(L=>{var te;const Q=(te=n[L.id])==null?void 0:te[t.nombreCompleto];let H="No Trabajado";return Q==="trabajado"?(_+=7,N++,H="Trabajado"):Q==="no trabajado"&&(_+=2,N++,H="No Trabajado"),{id:L.id,nombreActividad:L.nombreActividad,fecha:L.fecha,estado:H}}).filter(L=>{var Q;return(Q=n[L.id])==null?void 0:Q[t.nombreCompleto]}),R=N>0?(_/N).toFixed(1):"N/A";return{asignatura:F,promedio:R,actividades:j.sort((L,Q)=>new Date(Q.fecha).getTime()-new Date(L.fecha).getTime())}}).filter(F=>F.actividades.length>0).sort((F,C)=>F.asignatura.localeCompare(C.asignatura))},[e,n,t]);q.useEffect(()=>{if(E.reduce((N,j)=>N+j.actividades.length,0)===0){d(null);return}const U=E.reduce((N,j)=>{const R=parseFloat(j.promedio);return isNaN(R)?N:N+R},0),F=E.length>0?U/E.length:0,C=dy.find(N=>F>=N.promedioMin&&F<=N.promedioMax)||null,_=dy.filter(N=>F>=N.promedioMin);if(d({puntajeTotal:0,promedio:F,rangoActual:C,insigniasGanadas:_}),x.current!==null){const N=dy.find(j=>x.current>=j.promedioMin&&x.current<=j.promedioMax)||null;C&&(!N||C.nombre!==N.nombre)&&y(C)}x.current=F},[E]);const S=q.useMemo(()=>t.curso?a.filter(I=>I.curso===t.curso).map(I=>{const U=I.grupos.find(F=>F.integrantes.some(C=>C.nombre===t.nombreCompleto));return U?{...I,miGrupo:U}:null}).filter(I=>I!==null).sort((I,U)=>new Date(U.fechaPresentacion).getTime()-new Date(I.fechaPresentacion).getTime()):[],[a,t]),B=async(I,U)=>{const F=a.find(_=>_.id===I);if(!F)return;const C={...F,grupos:F.grupos.map(_=>_.integrantes.some(j=>j.nombre===t.nombreCompleto)?{..._,integrantes:_.integrantes.map(j=>j.nombre===t.nombreCompleto?{...j,rol:U||void 0}:j)}:_)};try{await TDe(C)}catch(_){console.error("Error updating role:",_),alert("No se pudo actualizar el rol.")}},D=I=>{const U=parseFloat(I);return isNaN(U)?"bg-slate-400":U<4?"bg-red-500":U<5.5?"bg-yellow-500":"bg-green-500"};return o?u.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>y(null),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:I=>I.stopPropagation(),children:[u.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),u.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),u.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),u.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),u.jsx("button",{onClick:()=>y(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),h&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>p(!1),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:I=>I.stopPropagation(),children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),u.jsx("div",{className:"overflow-y-auto space-y-3",children:dy.map(I=>{const U=c==null?void 0:c.insigniasGanadas.some(F=>F.nombre===I.nombre);return u.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${U?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[u.jsx("div",{className:"text-5xl",children:I.emoji}),u.jsxs("div",{children:[u.jsx("h3",{className:`font-bold ${U?"text-amber-700":"text-slate-600"}`,children:I.nombre}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",I.promedioMin," y ",I.promedioMax]})]})]},I.nombre)})})]})}),u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),u.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),c&&c.rangoActual&&u.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),u.jsx("h2",{className:"text-3xl font-bold",children:c.rangoActual.nombre}),u.jsx("button",{onClick:()=>p(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-7xl",children:c.rangoActual.emoji}),u.jsx("p",{className:"font-bold text-2xl mt-2",children:c.promedio.toFixed(1)}),u.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),E.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(I=>u.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800",children:I.asignatura}),u.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),u.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${D(I.promedio)}`,children:I.promedio})]}),u.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),I.actividades.map(U=>u.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-slate-700",children:U.nombreActividad}),u.jsx("p",{className:"text-xs text-slate-500",children:new Date(U.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),u.jsx("span",{className:`font-semibold ${U.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:U.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},U.id))]})]},I.asignatura))}):u.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[u.jsx("span",{className:"text-5xl",children:"📊"}),u.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),u.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),S.length>0&&u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),u.jsx("div",{className:"space-y-4",children:S.map(I=>{const U=I.miGrupo.integrantes.filter(C=>C.nombre!==t.nombreCompleto&&C.rol).map(C=>C.rol),F=lj.filter(C=>!U.includes(C));return u.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[u.jsx("h3",{className:"font-bold text-slate-800",children:I.nombreActividad}),u.jsxs("p",{className:"text-sm text-slate-500",children:[I.asignatura," - Presentación: ",new Date(I.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),u.jsxs("div",{className:"mt-3 pt-3 border-t",children:[u.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",I.miGrupo.numero]}),u.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:I.miGrupo.integrantes.map(C=>u.jsxs("li",{className:"grid grid-cols-2 items-center",children:[u.jsx("span",{className:C.nombre===t.nombreCompleto?"font-bold":"",children:C.nombre}),C.nombre===t.nombreCompleto?u.jsxs("select",{value:C.rol||"",onChange:_=>B(I.id,_.target.value),className:"text-sm p-1 border rounded w-full",children:[u.jsx("option",{value:"",children:"-- Seleccionar rol --"}),C.rol&&!F.includes(C.rol)&&u.jsx("option",{value:C.rol,children:C.rol}),F.map(_=>u.jsx("option",{value:_,children:_},_))]}):u.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:C.rol||"Sin rol"})]},C.nombre))})]})]},I.id)})})]})]})},BDe="proyectos_interdisciplinarios",jz="entregas_interdisciplinarias",Qz=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaCompletado:((a=(s=e.fechaCompletado)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaCompletado}},kDe=(t,e)=>{const r=er(Ft(Tt,BDe),Mn("cursos","array-contains",t));return gr(r,n=>{const s=n.docs.map(a=>Qz(a));e(s)},n=>{console.error("Error al suscribirse a los proyectos:",n),e([])})},IDe=(t,e)=>{const r=er(Ft(Tt,jz),Mn("estudianteId","==",t));return gr(r,n=>{const s=n.docs.map(a=>Qz(a));e(s)},n=>{console.error("Error al suscribirse a las entregas:",n),e([])})},FDe=async t=>{try{const{id:e,...r}=t,n=mr(Tt,jz,e),s={...r,fechaCompletado:ur.fromDate(new Date(r.fechaCompletado||Date.now()))};await Ti(n,s,{merge:!0})}catch(e){throw console.error("Error al actualizar la entrega:",e),new Error("No se pudo guardar la entrega.")}},DDe=({currentUser:t})=>{const[e,r]=q.useState([]),[n,s]=q.useState([]),[a,i]=q.useState(null),[o,l]=q.useState(!0);q.useEffect(()=>{if(!t.curso||!t.id){l(!1);return}l(!0);const h=kDe(t.curso,r),p=IDe(t.id,m=>{s(m),l(!1)});return()=>{h(),p()}},[t.curso,t.id]);const c=async h=>{try{await FDe(h)}catch(p){console.error("Failed to update submission:",p),alert("Hubo un error al guardar tu entrega.")}},d=({plan:h,tarea:p})=>{const m=q.useMemo(()=>{const U=n.find(F=>F.planificacionId===h.id&&F.tareaId===p.id);return U||{id:`${h.id}_${p.id}_${t.id}`,planificacionId:h.id,tareaId:p.id,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}},[h.id,p.id,n]),[y,x]=q.useState(!1),[E,S]=q.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),B=U=>{var C;const F=(C=U.target.files)==null?void 0:C[0];F&&(alert(`Simulación: Archivo "${F.name}" listo para subir.`),c({...m,archivoAdjunto:{nombre:F.name,url:`simulated/path/${F.name}`},fechaCompletado:new Date().toISOString()}))},D=()=>{c({...m,observacionesEstudiante:E.observaciones,enlaceUrl:E.enlace,fechaCompletado:new Date().toISOString()})},I=()=>{c({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return u.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("input",{type:"checkbox",checked:m.completada,onChange:I,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",p.numero,": ",p.instrucciones]}),u.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",p.fechaEntrega]}),p.recursoUrl&&u.jsx("a",{href:p.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),u.jsx("button",{onClick:()=>x(!y),className:"text-sm font-semibold",children:y?"Ocultar":"Entregar"})]}),y&&u.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[u.jsx("textarea",{value:E.observaciones,onChange:U=>S({...E,observaciones:U.target.value}),onBlur:D,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),u.jsx("input",{type:"url",value:E.enlace,onChange:U=>S({...E,enlace:U.target.value}),onBlur:D,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),u.jsx("input",{type:"file",onChange:B,className:"text-sm"}),m.archivoAdjunto&&u.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&u.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[u.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),u.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return o?u.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),e.length>0?e.map(h=>{const p=h.tareas||[],y=n.filter(E=>E.planificacionId===h.id).filter(E=>E.completada).length,x=p.length>0?y/p.length*100:0;return u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[u.jsxs("button",{onClick:()=>i(a===h.id?null:h.id),className:"w-full text-left",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:h.nombreProyecto}),u.jsxs("div",{className:"mt-2 space-y-1",children:[u.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[u.jsx("span",{children:"Progreso"}),u.jsxs("span",{children:[Math.round(x),"%"]})]}),u.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:u.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),a===h.id&&u.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:p.length>0?p.map(E=>u.jsx(d,{plan:h,tarea:E},E.id)):u.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},h.id)}):u.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[u.jsx("span",{className:"text-5xl",children:"🎉"}),u.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),u.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},RDe=({data:t})=>u.jsx("div",{className:"space-y-4",children:t.map((r,n)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),u.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:u.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),LDe=({currentUser:t})=>{const[e,r]=q.useState([]),[n,s]=q.useState(!1),[a,i]=q.useState(null),[o,l]=q.useState(null),[c,d]=q.useState(gx),h=q.useCallback(async()=>{s(!0);try{const E=(await aEe(t.nombreCompleto)).sort((S,B)=>new Date(B.fecha).getTime()-new Date(S.fecha).getTime());r(E),i(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{s(!1)}},[t.nombreCompleto]),p=q.useCallback(async()=>{try{const x=await iEe();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);q.useEffect(()=>{h(),p()},[h,p]);const m=q.useMemo(()=>{if(!o)return[];const x={};return c.forEach(E=>{x[E.domain]={total:0,count:0},E.criteria.forEach(S=>{const B=o.rubricaResultados[S.name];B&&(x[E.domain].total+=B,x[E.domain].count++)})}),Object.entries(x).map(([E,S])=>({label:E,value:S.count>0?S.total/S.count:0}))},[o,c]),y=x=>{const E=new or;E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(100),E.text("LICEO INDUSTRIAL DE RECOLETA",E.internal.pageSize.getWidth()/2,15,{align:"center"}),E.setFont("helvetica","bold"),E.setFontSize(16),E.setTextColor(40),E.text("Informe de Acompañamiento Docente",E.internal.pageSize.getWidth()/2,25,{align:"center"}),E.setFontSize(12),E.setFont("helvetica","normal"),xl(E,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let S=E.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const I=[],U=["Débil","Incipiente","Satisfactorio","Avanzado"];c.forEach(F=>{I.push([{content:F.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),F.criteria.forEach(C=>{const _=x.rubricaResultados[C.name],N=_?U[_-1]:"No evaluado";I.push([C.name,N])})}),xl(E,{startY:S,head:[["Indicador","Nivel de Logro"]],body:I,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),S=E.lastAutoTable.finalY+15}const B=(I,U)=>{if(!U)return;S>250&&(E.addPage(),S=20,E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(100),E.text("LICEO INDUSTRIAL DE RECOLETA",E.internal.pageSize.getWidth()/2,15,{align:"center"}),S=25),E.setFont("helvetica","bold"),E.setFontSize(14),E.setTextColor(40),E.text(I,14,S),S+=8,E.setFont("helvetica","normal"),E.setFontSize(11),E.setTextColor(60);const F=E.splitTextToSize(U.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);E.text(F,14,S),S+=F.length*5+10};B("Observaciones Generales",x.observacionesGenerales),B("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const D=E.getNumberOfPages();for(let I=1;I<=D;I++)E.setPage(I),E.setFontSize(8),E.setTextColor(128),E.text(`Página ${I} de ${D}`,E.internal.pageSize.getWidth()/2,E.internal.pageSize.getHeight()-10,{align:"center"});E.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("div",{children:[u.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),u.jsxs("button",{onClick:()=>y(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[u.jsx(oj,{})," Exportar PDF"]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2 space-y-6",children:u.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[u.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:u.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),u.jsx("h3",{children:"Observaciones Generales"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:u.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:u.jsx(RDe,{data:m})})]})]})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&u.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),a&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),!n&&e.length===0&&u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),u.jsx("div",{className:"space-y-4",children:!n&&e.length>0?e.map(x=>u.jsx("button",{onClick:()=>l(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&u.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),u.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&u.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("span",{className:"text-5xl",children:"👍"}),u.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},UDe=t=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const e=Ft(Yr,"planificaciones"),r=er(e,an("fechaCreacion","desc"));return gr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar todas las planificaciones:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",e),e}},MDe=(t,e)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",t),!t)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=Ft(Yr,"planificaciones"),n=er(r,Mn("userId","==",t),an("fechaCreacion","desc"));return gr(n,a=>{const i=[];a.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),e(i)},a=>{throw console.error("❌ Error al cargar planificaciones del usuario:",a),a})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};class OM extends Map{constructor(e,r=jDe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(jM(this,e))}has(e){return super.has(jM(this,e))}set(e,r){return super.set(PDe(this,e),r)}delete(e){return super.delete(ODe(this,e))}}function jM({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function PDe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function ODe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function jDe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function QDe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const QM=Symbol("implicit");function Hz(){var t=new OM,e=[],r=[],n=QM;function s(a){let i=t.get(a);if(i===void 0){if(n!==QM)return n;t.set(a,i=e.push(a)-1)}return r[i%r.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new OM;for(const i of a)t.has(i)||t.set(i,e.push(i)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return Hz(e,r).unknown(n)},QDe.apply(s,arguments),s}function HDe(t){for(var e=t.length/6|0,r=new Array(e),n=0;n<e;)r[n]="#"+t.slice(n*6,++n*6);return r}const VDe=HDe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var zDe={value:function(){}};function Vz(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new z2(r)}function z2(t){this._=t}function GDe(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",s=r.indexOf(".");if(s>=0&&(n=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}z2.prototype=Vz.prototype={constructor:z2,on:function(t,e){var r=this._,n=GDe(t+"",r),s,a=-1,i=n.length;if(arguments.length<2){for(;++a<i;)if((s=(t=n[a]).type)&&(s=qDe(r[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=n[a]).type)r[s]=HM(r[s],t.name,e);else if(e==null)for(s in r)r[s]=HM(r[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new z2(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var r=new Array(s),n=0,s,a;n<s;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,s=a.length;n<s;++n)a[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],s=0,a=n.length;s<a;++s)n[s].value.apply(e,r)}};function qDe(t,e){for(var r=0,n=t.length,s;r<n;++r)if((s=t[r]).name===e)return s.value}function HM(t,e,r){for(var n=0,s=t.length;n<s;++n)if(t[n].name===e){t[n]=zDe,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}const KDe=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Vz},Symbol.toStringTag,{value:"Module"})),$De=Lq(KDe);var VS,VM;function WDe(){if(VM)return VS;VM=1;const t=$De.dispatch,e=Math.PI/180,r={archimedean:x,rectangular:E},n=64,s=2048;VS=function(){var I=[256,256],U=a,F=i,C=l,_=o,N=o,j=c,R=d,L=x,Q=[],H=1/0,te=t("word","end"),Y=null,re=Math.random,V={},J=B;V.canvas=function(O){return arguments.length?(J=D(O),V):J},V.start=function(){var O=K(J()),W=S((I[0]>>5)*I[1]),Z=null,ne=Q.length,le=-1,ve=[],pe=Q.map(function(de,ce){return de.text=U.call(this,de,ce),de.font=F.call(this,de,ce),de.style=_.call(this,de,ce),de.weight=N.call(this,de,ce),de.rotate=j.call(this,de,ce),de.size=~~C.call(this,de,ce),de.padding=R.call(this,de,ce),de}).sort(function(de,ce){return ce.size-de.size});return Y&&clearInterval(Y),Y=setInterval(he,0),he(),V;function he(){for(var de=Date.now();Date.now()-de<H&&++le<ne&&Y;){var ce=pe[le];ce.x=I[0]*(re()+.5)>>1,ce.y=I[1]*(re()+.5)>>1,h(O,ce,pe,le),ce.hasText&&ae(W,ce,Z)&&(ve.push(ce),te.call("word",V,ce),Z?m(Z,ce):Z=[{x:ce.x+ce.x0,y:ce.y+ce.y0},{x:ce.x+ce.x1,y:ce.y+ce.y1}],ce.x-=I[0]>>1,ce.y-=I[1]>>1)}le>=ne&&(V.stop(),te.call("end",V,ve,Z))}},V.stop=function(){Y&&(clearInterval(Y),Y=null);for(const O of Q)delete O.sprite;return V};function K(O){const W=O.getContext("2d",{willReadFrequently:!0});O.width=O.height=1;const Z=Math.sqrt(W.getImageData(0,0,1,1).data.length>>2);return O.width=(n<<5)/Z,O.height=s/Z,W.fillStyle=W.strokeStyle="red",{context:W,ratio:Z}}function ae(O,W,Z){I[0],I[1];for(var ne=W.x,le=W.y,ve=Math.sqrt(I[0]*I[0]+I[1]*I[1]),pe=L(I),he=re()<.5?1:-1,de=-he,ce,oe,Re;(ce=pe(de+=he))&&(oe=~~ce[0],Re=~~ce[1],!(Math.min(Math.abs(oe),Math.abs(Re))>=ve));)if(W.x=ne+oe,W.y=le+Re,!(W.x+W.x0<0||W.y+W.y0<0||W.x+W.x1>I[0]||W.y+W.y1>I[1])&&(!Z||y(W,Z))&&!p(W,O,I[0])){for(var qe=W.sprite,Ie=W.width>>5,Ee=I[0]>>5,De=W.x-(Ie<<4),je=De&127,We=32-je,ct=W.y1-W.y0,wt=(W.y+W.y0)*Ee+(De>>5),ot,Dt=0;Dt<ct;Dt++){ot=0;for(var Rt=0;Rt<=Ie;Rt++)O[wt+Rt]|=ot<<We|(Rt<Ie?(ot=qe[Dt*Ie+Rt])>>>je:0);wt+=Ee}return!0}return!1}return V.timeInterval=function(O){return arguments.length?(H=O??1/0,V):H},V.words=function(O){return arguments.length?(Q=O,V):Q},V.size=function(O){return arguments.length?(I=[+O[0],+O[1]],V):I},V.font=function(O){return arguments.length?(F=D(O),V):F},V.fontStyle=function(O){return arguments.length?(_=D(O),V):_},V.fontWeight=function(O){return arguments.length?(N=D(O),V):N},V.rotate=function(O){return arguments.length?(j=D(O),V):j},V.text=function(O){return arguments.length?(U=D(O),V):U},V.spiral=function(O){return arguments.length?(L=r[O]||O,V):L},V.fontSize=function(O){return arguments.length?(C=D(O),V):C},V.padding=function(O){return arguments.length?(R=D(O),V):R},V.random=function(O){return arguments.length?(re=O,V):re},V.on=function(){var O=te.on.apply(te,arguments);return O===te?V:O},V};function a(I){return I.text}function i(){return"serif"}function o(){return"normal"}function l(I){return Math.sqrt(I.value)}function c(){return(~~(random()*6)-3)*30}function d(){return 1}function h(I,U,F,C){if(!U.sprite){var _=I.context,N=I.ratio;_.clearRect(0,0,(n<<5)/N,s/N);var j=0,R=0,L=0,Q=F.length;for(--C;++C<Q;){U=F[C],_.save(),_.font=U.style+" "+U.weight+" "+~~((U.size+1)/N)+"px "+U.font;const ce=_.measureText(U.text),oe=-Math.floor(ce.width/2);let Re=(ce.width+1)*N,qe=U.size<<1;if(U.rotate){var H=Math.sin(U.rotate*e),te=Math.cos(U.rotate*e),Y=Re*te,re=Re*H,V=qe*te,J=qe*H;Re=Math.max(Math.abs(Y+J),Math.abs(Y-J))+31>>5<<5,qe=~~Math.max(Math.abs(re+V),Math.abs(re-V))}else Re=Re+31>>5<<5;if(qe>L&&(L=qe),j+Re>=n<<5&&(j=0,R+=L,L=0),R+qe>=s)break;_.translate((j+(Re>>1))/N,(R+(qe>>1))/N),U.rotate&&_.rotate(U.rotate*e),_.fillText(U.text,oe,0),U.padding&&(_.lineWidth=2*U.padding,_.strokeText(U.text,oe,0)),_.restore(),U.width=Re,U.height=qe,U.xoff=j,U.yoff=R,U.x1=Re>>1,U.y1=qe>>1,U.x0=-U.x1,U.y0=-U.y1,U.hasText=!0,j+=Re}for(var K=_.getImageData(0,0,(n<<5)/N,s/N).data,ae=[];--C>=0;)if(U=F[C],!!U.hasText){for(var O=U.width,W=O>>5,Z=U.y1-U.y0,ne=0;ne<Z*W;ne++)ae[ne]=0;if(j=U.xoff,j==null)return;R=U.yoff;for(var le=0,ve=-1,pe=0;pe<Z;pe++){for(var ne=0;ne<O;ne++){var he=W*pe+(ne>>5),de=K[(R+pe)*(n<<5)+(j+ne)<<2]?1<<31-ne%32:0;ae[he]|=de,le|=de}le?ve=pe:(U.y0++,Z--,pe--,R++)}U.y1=U.y0+ve,U.sprite=ae.slice(0,(U.y1-U.y0)*W)}}}function p(I,U,F){F>>=5;for(var C=I.sprite,_=I.width>>5,N=I.x-(_<<4),j=N&127,R=32-j,L=I.y1-I.y0,Q=(I.y+I.y0)*F+(N>>5),H,te=0;te<L;te++){H=0;for(var Y=0;Y<=_;Y++)if((H<<R|(Y<_?(H=C[te*_+Y])>>>j:0))&U[Q+Y])return!0;Q+=F}return!1}function m(I,U){var F=I[0],C=I[1];U.x+U.x0<F.x&&(F.x=U.x+U.x0),U.y+U.y0<F.y&&(F.y=U.y+U.y0),U.x+U.x1>C.x&&(C.x=U.x+U.x1),U.y+U.y1>C.y&&(C.y=U.y+U.y1)}function y(I,U){return I.x+I.x1>U[0].x&&I.x+I.x0<U[1].x&&I.y+I.y1>U[0].y&&I.y+I.y0<U[1].y}function x(I){var U=I[0]/I[1];return function(F){return[U*(F*=.1)*Math.cos(F),F*Math.sin(F)]}}function E(I){var U=4,F=U*I[0]/I[1],C=0,_=0;return function(N){var j=N<0?-1:1;switch(Math.sqrt(1+4*j*N)-j&3){case 0:C+=F;break;case 1:_+=U;break;case 2:C-=F;break;default:_-=U;break}return[C,_]}}function S(I){for(var U=[],F=-1;++F<I;)U[F]=0;return U}function B(){return document.createElement("canvas")}function D(I){return typeof I=="function"?I:function(){return I}}return VS}var YDe=WDe();const XDe=Sb(YDe),JDe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),ZDe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),eRe=()=>u.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),tRe=t=>{const[e,r]=q.useState([]),[n,s]=q.useState(!0),[a,i]=q.useState(null),o=q.useMemo(()=>(t==null?void 0:t.profile)==="SUBDIRECCION",[t]);return q.useEffect(()=>{if(!(t!=null&&t.email)&&!(t!=null&&t.id)){i("Usuario no autenticado"),s(!1);return}try{let l;const c=d=>{r(d),s(!1),i(null)};if(o)l=UDe(c);else{const d=t.email||t.id||"";l=MDe(c,d)}return l}catch(l){i(l instanceof Error?l.message:"Error al conectar con la base de datos"),s(!1)}},[t,o]),{planificaciones:e,loading:n,error:a,canViewAllPlans:o}},rRe=({plan:t,onClose:e})=>u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[u.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreUnidad}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),u.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:u.jsx(ZDe,{})})]}),u.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[u.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),u.jsxs("p",{className:"mt-2",children:[u.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]}),u.jsx("div",{className:"mt-3",children:u.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof t.progreso=="number"?`${t.progreso}%`:"No registrado"]})})]}),u.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",t.detallesLeccion.length,")"]}),u.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:t.detallesLeccion.map((r,n)=>u.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[u.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[u.jsxs("span",{children:[u.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),u.jsxs("span",{children:[u.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),t.reflexionUnidad&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),t.reflexionUnidad.ordenHabilidades&&t.reflexionUnidad.ordenHabilidades.length>0?u.jsx("ul",{className:"space-y-2",children:t.reflexionUnidad.ordenHabilidades.map((r,n)=>u.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[u.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.fortalezas||"N/A"})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.mejoras||"N/A"})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),zM=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],nRe=["1º Medio","2º Medio","3º Medio","4º Medio"],sRe=({words:t})=>{const e=q.useRef(null);return q.useEffect(()=>{if(!t.length||!e.current)return;const r=nc(e.current);r.selectAll("*").remove();const n=XDe().size([500,350]).words(t.map(a=>({...a}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(a=>Math.sqrt(a.value)*12).on("end",s);n.start();function s(a){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(a).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>Hz(VDe)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[t]),u.jsx("svg",{ref:e})},aRe=({planificaciones:t})=>{const[e,r]=q.useState("todos"),[n,s]=q.useState("todos"),a=q.useMemo(()=>["todos",...Array.from(new Set(t.map(d=>d.asignatura)))],[t]),i=q.useMemo(()=>t.filter(d=>(e==="todos"||d.nivel===e)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[t,e,n]),o=q.useMemo(()=>{const d=zM.reduce((h,p)=>({...h,[p]:0}),{});return i.forEach(h=>{var p,m;return(m=(p=h.reflexionUnidad)==null?void 0:p.ordenHabilidades)==null?void 0:m.forEach((y,x)=>{d[y]!==void 0&&(d[y]+=zM.length-x)})}),Object.entries(d).map(([h,p])=>({text:h,value:p})).sort((h,p)=>p.value-h.value)},[i]),l=q.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),p=(i.map(m=>{var y,x;return`${((y=m.reflexionUnidad)==null?void 0:y.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,y)=>(d.has(y)||(m[y]=(m[y]||0)+1),m),{});return Object.entries(p).map(([m,y])=>({text:m,value:y})).sort((m,y)=>y.value-m.value).slice(0,50)},[i]),c="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return u.jsxs("div",{className:"animate-fade-in",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),u.jsxs("select",{value:e,onChange:d=>r(d.target.value),className:c,children:[u.jsx("option",{value:"todos",children:"Todos los Niveles"}),nRe.map(d=>u.jsx("option",{value:d,children:d},d))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsx("select",{value:n,onChange:d=>s(d.target.value),className:c,children:a.map(d=>u.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?u.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):u.jsx("ul",{className:"space-y-3",children:o.map((d,h)=>u.jsxs("li",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:h+1}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),u.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:u.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),u.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),l.length>0?u.jsx(sRe,{words:l}):u.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},iRe=({currentUser:t})=>{const{planificaciones:e,loading:r,error:n,canViewAllPlans:s}=tRe(t),[a,i]=q.useState("seguimiento"),[o,l]=q.useState("1º"),[c,d]=q.useState(null),[h,p]=q.useState(null),m=q.useMemo(()=>{const E={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return e.filter(S=>S.nivel===E[o]&&S.tipo==="Unidad")},[e,o]),y=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(t!=null&&t.id))return u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{children:"Usuario no autenticado."})});if(r)return u.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[u.jsx(eRe,{}),u.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return u.jsx("div",{className:"text-center py-8",children:u.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:y.map(E=>u.jsx("button",{onClick:()=>l(E.key),className:`${o===E.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:E.label},E.key))})}),m.length===0?u.jsx("div",{className:"text-center py-12",children:u.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):u.jsx("div",{className:"space-y-4",children:yl.map(E=>{const S=m.filter(D=>D.asignatura===E);if(S.length===0)return null;const B=c===E;return u.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[u.jsxs("button",{onClick:()=>d(B?null:E),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:E}),u.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[S.length," unidad",S.length>1?"es":""]})]}),u.jsx("span",{className:`transform transition-transform ${B?"rotate-180":""}`,children:u.jsx(JDe,{})})]}),B&&u.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:u.jsx("ul",{className:"space-y-3",children:S.map(D=>u.jsx("li",{children:u.jsxs("button",{onClick:()=>p(D),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[u.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:D.nombreUnidad}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",D.autor||"N/A"]})]})},D.id))})})]},E)})})]});return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),s&&u.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:u.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[u.jsx("button",{onClick:()=>i("seguimiento"),className:`${a==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),u.jsx("button",{onClick:()=>i("analisis"),className:`${a==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),a==="seguimiento"&&x(),a==="analisis"&&u.jsx(aRe,{planificaciones:e.filter(E=>E.tipo==="Unidad")})]}),h&&u.jsx(rRe,{plan:h,onClose:()=>p(null)})]})},qC="analisisTaxonomicos",oRe=async()=>{try{const t=er(Ft(Yr,qC),an("uploadDate","desc"));return(await Da(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener todos los análisis:",t),new Error("No se pudieron cargar los análisis taxonómicos")}},lRe=async t=>{if(!t)return[];try{const e=er(Ft(Yr,qC),Mn("userId","==",t),an("uploadDate","desc"));return(await Da(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error al obtener análisis por usuario:",e),new Error("No se pudieron cargar los análisis del usuario")}},cRe=async t=>{try{return{id:(await ws(Ft(Yr,qC),t)).id,...t}}catch(e){throw console.error("Error al crear análisis:",e),new Error("No se pudo crear el análisis taxonómico")}},uRe=async t=>{try{const e=mr(Yr,qC,t);await li(e)}catch(e){throw console.error("Error al eliminar análisis:",e,"ID:",t),new Error("No se pudo eliminar el análisis taxonómico")}},zS=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],GM={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},ARe=()=>u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),qM=({currentUser:t})=>{const[e,r]=q.useState([]),[n,s]=q.useState(!1),[a,i]=q.useState(null),[o,l]=q.useState(null),[c,d]=q.useState(""),[h,p]=q.useState(!1),[m,y]=q.useState(null),[x,E]=q.useState(null),S=q.useCallback(async()=>{if(t!=null&&t.id){s(!0);try{const F=t.profile==="SUBDIRECCION"?await oRe():await lRe(t.id);r(F),i(null)}catch(F){console.error("Error al cargar análisis:",F),i("No se pudieron cargar los análisis.")}finally{s(!1)}}},[t]);q.useEffect(()=>{S()},[S]);const B=async F=>{var _;const C=(_=F.target.files)==null?void 0:_[0];if(C){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(C.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}y(C),d(C.name),i(null);const j=new FileReader;j.onloadend=()=>{var L;const R=(L=j.result)==null?void 0:L.split(",")[1];if(!R){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),E(null);return}E({mimeType:C.type,data:R})},j.onerror=()=>i("Error al leer el archivo."),j.readAsDataURL(C)}},D=async()=>{if(!c.trim()||!x){i("Debe subir un documento y asignarle un nombre para analizar.");return}p(!0),i(null);const F=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,C={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:zS}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:zS.reduce((_,N)=>({..._,[N]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{td("Análisis Taxonómico",t);const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",j=new Ra(_).getGenerativeModel({model:"gemini-1.5-flash-latest",generationConfig:{responseMimeType:"application/json",responseSchema:C}}),R={inlineData:{mimeType:x.mimeType,data:x.data}},Q=(await j.generateContent([F,R])).response.text();let H;try{H=JSON.parse(Q)}catch(re){throw console.error("Error al parsear JSON:",re),console.error("Respuesta recibida (no es JSON válido):",Q),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const te={documentName:c,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:H.analysisResults,summary:H.summary},Y=await cRe(te);await S(),l(Y),d(""),y(null),E(null)}catch(_){console.error(_);const N=_ instanceof Error?_.message:"Hubo un error al analizar el documento.";i(N)}finally{p(!1)}},I=async F=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await uRe(F),await S(),(o==null?void 0:o.id)===F&&l(null)}catch{i("No se pudo eliminar el análisis.")}},U=q.useMemo(()=>o?Object.values(o.summary).reduce((F,C)=>F+(C||0),0):0,[o]);return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),a&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),u.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:u.jsxs("div",{className:"space-y-1 text-center",children:[u.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:u.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),u.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[u.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[u.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:B,accept:".pdf,.doc,.docx"}),u.jsx("span",{children:"Cargue un archivo"})]}),u.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),u.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),u.jsx("input",{type:"text",id:"documentName",value:c,onChange:F=>d(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsx("button",{onClick:D,disabled:h||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:h?u.jsx(ARe,{}):"Analizar con IA"})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?u.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):e.length===0?u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:e.map(F=>u.jsxs("button",{onClick:()=>l(F),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===F.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[u.jsx("p",{className:"font-semibold truncate",children:F.documentName}),u.jsx("p",{className:"text-xs text-slate-500",children:new Date(F.uploadDate).toLocaleString("es-CL")})]},F.id))})]})]}),u.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),u.jsx("button",{onClick:()=>I(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonómico (",U," preguntas)"]}),u.jsx("div",{className:"space-y-3",children:zS.map(F=>{const C=o.summary[F]||0,_=U>0?C/U*100:0;return u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:F}),u.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[C," (",_.toFixed(0),"%)"]})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:u.jsx("div",{className:`${GM[F]} h-4 rounded-full`,style:{width:`${_}%`}})})]},F)})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),u.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((F,C)=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:F.question}),u.jsx("td",{className:"px-4 py-3 text-sm",children:u.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${GM[F.habilidadBloom]}`,children:F.habilidadBloom})})]},C))})]})})]})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[u.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📊"}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})},vb="empresas_practicas",dRe="usuarios",zz=t=>{const e=t.data();return{id:t.id,...e}};async function fRe(t){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(t)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const s=await(await fetch(r)).json();return s.status==="OK"&&s.results[0]?s.results[0].geometry.location:(console.warn("Geocodificación no exitosa:",s.status),null)}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const hRe=t=>{const e=er(Ft(Tt,vb),an("nombre","asc"));return gr(e,r=>{const n=r.docs.map(s=>zz(s));t(n)},r=>console.error("Error al suscribirse a empresas:",r))},pRe=async t=>{const e=t.calificaciones.reduce((n,s)=>n+(s.score||0),0),r={...t,puntajeTotal:e};if(t.direccion){const n=await fRe(t.direccion);n&&(r.coordenadas=n)}if("id"in t&&t.id){const{id:n,...s}=r,a=mr(Tt,vb,n);return await Ti(a,s,{merge:!0}),n}else return(await ws(Ft(Tt,vb),{...r,createdAt:ZZ()})).id},mRe=async t=>{const e=mr(Tt,vb,t);await li(e)},gRe=t=>{const e=er(Ft(Tt,dRe),Mn("profile","==",jt.ESTUDIANTE),an("nombreCompleto","asc"));return gr(e,r=>{const n=r.docs.map(s=>zz(s));t(n)},r=>console.error("Error al suscribirse a estudiantes:",r))};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $h=function(){return $h=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},$h.apply(this,arguments)};function xRe(t,e,r,n){return new(r||(r=Promise))(function(s,a){function i(c){try{l(n.next(c))}catch(d){a(d)}}function o(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){var d;c.done?s(c.value):(d=c.value,d instanceof r?d:new r(function(h){h(d)})).then(i,o)}l((n=n.apply(t,[])).next())})}function vRe(t,e){var r,n,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(c){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(s=2&d[0]?n.return:d[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,d[1])).done)return s;switch(n=0,s&&(d=[2&d[0],s.value]),d[0]){case 0:case 1:s=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!((s=s.length>0&&s[s.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){i.label=d[1];break}if(d[0]===6&&i.label<s[1]){i.label=s[1],s=d;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(d);break}s[2]&&i.ops.pop(),i.trys.pop();continue}d=e.call(t,i)}catch(h){d=[6,h],n=0}finally{r=s=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([l,c])}}}function Cr(){return Cr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cr.apply(this,arguments)}function Wh(t){return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wh(t)}function Gz(t){var e=function(r,n){if(Wh(r)!=="object"||r===null)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var a=s.call(r,n);if(Wh(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(t,"string");return Wh(e)==="symbol"?e:String(e)}function Lp(t,e,r){return(e=Gz(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function lr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KM(Object(r),!0).forEach(function(n){Lp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gz(n.key),n)}}function sN(t,e){return sN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},sN(t,e)}function yb(t){return yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yb(t)}function yRe(t,e){if(e&&(Wh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(t)}function wRe(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=yb(t);if(e){var s=yb(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return yRe(this,r)}}function aN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qz(t,e){if(t){if(typeof t=="string")return aN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aN(t,e):void 0}}function ek(t){return function(e){if(Array.isArray(e))return aN(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||qz(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var bRe=function(){function t(r){var n=this;this._insertTag=function(s){var a;a=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(s,a),n.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(a){var i=document.createElement("style");return i.setAttribute("data-emotion",a.key),a.nonce!==void 0&&i.setAttribute("nonce",a.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var s=function(a){if(a.sheet)return a.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===a)return document.styleSheets[i]}(n);try{s.insertRule(r,s.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Kl="-ms-",WM="-moz-",Un="-webkit-",tk="decl",Kz="@keyframes",CRe=Math.abs,KC=String.fromCharCode,ERe=Object.assign;function $z(t){return t.trim()}function Qn(t,e,r){return t.replace(e,r)}function iN(t,e){return t.indexOf(e)}function vi(t,e){return 0|t.charCodeAt(e)}function w1(t,e,r){return t.slice(e,r)}function Mu(t){return t.length}function rk(t){return t.length}function c2(t,e){return e.push(t),t}var $C=1,Cm=1,Wz=0,zo=0,ka=0,Qm="";function WC(t,e,r,n,s,a,i){return{value:t,root:e,parent:r,type:n,props:s,children:a,line:$C,column:Cm,length:i,return:""}}function Hg(t,e){return ERe(WC("",null,null,"",null,null,0),t,{length:-t.length},e)}function vl(){return ka=zo<Wz?vi(Qm,zo++):0,Cm++,ka===10&&(Cm=1,$C++),ka}function Xu(){return vi(Qm,zo)}function G2(){return zo}function av(t,e){return w1(Qm,t,e)}function b1(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Yz(t){return $C=Cm=1,Wz=Mu(Qm=t),zo=0,[]}function Xz(t){return Qm="",t}function q2(t){return $z(av(zo-1,oN(t===91?t+2:t===40?t+1:t)))}function _Re(t){for(;(ka=Xu())&&ka<33;)vl();return b1(t)>2||b1(ka)>3?"":" "}function SRe(t,e){for(;--e&&vl()&&!(ka<48||ka>102||ka>57&&ka<65||ka>70&&ka<97););return av(t,G2()+(e<6&&Xu()==32&&vl()==32))}function oN(t){for(;vl();)switch(ka){case t:return zo;case 34:case 39:t!==34&&t!==39&&oN(ka);break;case 40:t===41&&oN(t);break;case 92:vl()}return zo}function TRe(t,e){for(;vl()&&t+ka!==57&&(t+ka!==84||Xu()!==47););return"/*"+av(e,zo-1)+"*"+KC(t===47?t:vl())}function NRe(t){for(;!b1(Xu());)vl();return av(t,zo)}function YM(t){return Xz(K2("",null,null,null,[""],t=Yz(t),0,[0],t))}function K2(t,e,r,n,s,a,i,o,l){for(var c=0,d=0,h=i,p=0,m=0,y=0,x=1,E=1,S=1,B=0,D="",I=s,U=a,F=n,C=D;E;)switch(y=B,B=vl()){case 40:if(y!=108&&vi(C,h-1)==58){iN(C+=Qn(q2(B),"&","&\f"),"&\f")!=-1&&(S=-1);break}case 34:case 39:case 91:C+=q2(B);break;case 9:case 10:case 13:case 32:C+=_Re(y);break;case 92:C+=SRe(G2()-1,7);continue;case 47:switch(Xu()){case 42:case 47:c2(BRe(TRe(vl(),G2()),e,r),l);break;default:C+="/"}break;case 123*x:o[c++]=Mu(C)*S;case 125*x:case 59:case 0:switch(B){case 0:case 125:E=0;case 59+d:m>0&&Mu(C)-h&&c2(m>32?JM(C+";",n,r,h-1):JM(Qn(C," ","")+";",n,r,h-2),l);break;case 59:C+=";";default:if(c2(F=XM(C,e,r,c,d,s,o,D,I=[],U=[],h),a),B===123)if(d===0)K2(C,e,F,F,I,a,h,o,U);else switch(p===99&&vi(C,3)===110?100:p){case 100:case 109:case 115:K2(t,F,F,n&&c2(XM(t,F,F,0,0,s,o,D,s,I=[],h),U),s,U,h,o,n?I:U);break;default:K2(C,F,F,F,[""],U,0,o,U)}}c=d=m=0,x=S=1,D=C="",h=i;break;case 58:h=1+Mu(C),m=y;default:if(x<1){if(B==123)--x;else if(B==125&&x++==0&&(ka=zo>0?vi(Qm,--zo):0,Cm--,ka===10&&(Cm=1,$C--),ka==125))continue}switch(C+=KC(B),B*x){case 38:S=d>0?1:(C+="\f",-1);break;case 44:o[c++]=(Mu(C)-1)*S,S=1;break;case 64:Xu()===45&&(C+=q2(vl())),p=Xu(),d=h=Mu(D=C+=NRe(G2())),B++;break;case 45:y===45&&Mu(C)==2&&(x=0)}}return a}function XM(t,e,r,n,s,a,i,o,l,c,d){for(var h=s-1,p=s===0?a:[""],m=rk(p),y=0,x=0,E=0;y<n;++y)for(var S=0,B=w1(t,h+1,h=CRe(x=i[y])),D=t;S<m;++S)(D=$z(x>0?p[S]+" "+B:Qn(B,/&\f/g,p[S])))&&(l[E++]=D);return WC(t,e,r,s===0?"rule":o,l,c,d)}function BRe(t,e,r){return WC(t,e,r,"comm",KC(ka),w1(t,2,-2),0)}function JM(t,e,r,n){return WC(t,e,r,tk,w1(t,0,n),w1(t,n+1,-1),n)}function Yh(t,e){for(var r="",n=rk(t),s=0;s<n;s++)r+=e(t[s],s,t,e)||"";return r}function ZM(t,e,r,n){switch(t.type){case"@import":case tk:return t.return=t.return||t.value;case"comm":return"";case Kz:return t.return=t.value+"{"+Yh(t.children,n)+"}";case"rule":t.value=t.props.join(",")}return Mu(r=Yh(t.children,n))?t.return=t.value+"{"+r+"}":""}function e8(t){var e=rk(t);return function(r,n,s,a){for(var i="",o=0;o<e;o++)i+=t[o](r,n,s,a)||"";return i}}function kRe(t){return function(e){e.root||(e=e.return)&&t(e)}}function Jz(t){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=t(r)),e[r]}}var IRe=function(t,e,r){for(var n=0,s=0;n=s,s=Xu(),n===38&&s===12&&(e[r]=1),!b1(s);)vl();return av(t,zo)},FRe=function(t,e){return Xz(function(r,n){var s=-1,a=44;do switch(b1(a)){case 0:a===38&&Xu()===12&&(n[s]=1),r[s]+=IRe(zo-1,n,s);break;case 2:r[s]+=q2(a);break;case 4:if(a===44){r[++s]=Xu()===58?"&\f":"",n[s]=r[s].length;break}default:r[s]+=KC(a)}while(a=vl());return r}(Yz(t),e))},t8=new WeakMap,DRe=function(t){if(t.type==="rule"&&t.parent&&!(t.length<1)){for(var e=t.value,r=t.parent,n=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((t.props.length!==1||e.charCodeAt(0)===58||t8.get(r))&&!n){t8.set(t,!0);for(var s=[],a=FRe(e,s),i=r.props,o=0,l=0;o<a.length;o++)for(var c=0;c<i.length;c++,l++)t.props[l]=s[o]?a[o].replace(/&\f/g,i[c]):i[c]+" "+a[o]}}},RRe=function(t){if(t.type==="decl"){var e=t.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(t.return="",t.value="")}};function Zz(t,e){switch(function(r,n){return 45^vi(r,0)?(((n<<2^vi(r,0))<<2^vi(r,1))<<2^vi(r,2))<<2^vi(r,3):0}(t,e)){case 5103:return Un+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Un+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Un+t+WM+t+Kl+t+t;case 6828:case 4268:return Un+t+Kl+t+t;case 6165:return Un+t+Kl+"flex-"+t+t;case 5187:return Un+t+Qn(t,/(\w+).+(:[^]+)/,Un+"box-$1$2-ms-flex-$1$2")+t;case 5443:return Un+t+Kl+"flex-item-"+Qn(t,/flex-|-self/,"")+t;case 4675:return Un+t+Kl+"flex-line-pack"+Qn(t,/align-content|flex-|-self/,"")+t;case 5548:return Un+t+Kl+Qn(t,"shrink","negative")+t;case 5292:return Un+t+Kl+Qn(t,"basis","preferred-size")+t;case 6060:return Un+"box-"+Qn(t,"-grow","")+Un+t+Kl+Qn(t,"grow","positive")+t;case 4554:return Un+Qn(t,/([^-])(transform)/g,"$1"+Un+"$2")+t;case 6187:return Qn(Qn(Qn(t,/(zoom-|grab)/,Un+"$1"),/(image-set)/,Un+"$1"),t,"")+t;case 5495:case 3959:return Qn(t,/(image-set\([^]*)/,Un+"$1$`$1");case 4968:return Qn(Qn(t,/(.+:)(flex-)?(.*)/,Un+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Un+t+t;case 4095:case 3583:case 4068:case 2532:return Qn(t,/(.+)-inline(.+)/,Un+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Mu(t)-1-e>6)switch(vi(t,e+1)){case 109:if(vi(t,e+4)!==45)break;case 102:return Qn(t,/(.+:)(.+)-([^]+)/,"$1"+Un+"$2-$3$1"+WM+(vi(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~iN(t,"stretch")?Zz(Qn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(vi(t,e+1)!==115)break;case 6444:switch(vi(t,Mu(t)-3-(~iN(t,"!important")&&10))){case 107:return Qn(t,":",":"+Un)+t;case 101:return Qn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Un+(vi(t,14)===45?"inline-":"")+"box$3$1"+Un+"$2$3$1-ms-$2box$3")+t}break;case 5936:switch(vi(t,e+11)){case 114:return Un+t+Kl+Qn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Un+t+Kl+Qn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Un+t+Kl+Qn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Un+t+Kl+t+t}return t}var r8,u2,$2=typeof document<"u",LRe=$2?void 0:(r8=function(){return Jz(function(){var t={};return function(e){return t[e]}})},u2=new WeakMap,function(t){if(u2.has(t))return u2.get(t);var e=r8(t);return u2.set(t,e),e}),URe=[function(t,e,r,n){if(t.length>-1&&!t.return)switch(t.type){case tk:t.return=Zz(t.value,t.length);break;case Kz:return Yh([Hg(t,{value:Qn(t.value,"@","@"+Un)})],n);case"rule":if(t.length)return function(s,a){return s.map(a).join("")}(t.props,function(s){switch(function(a,i){return(a=i.exec(a))?a[0]:a}(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Yh([Hg(t,{props:[Qn(s,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return Yh([Hg(t,{props:[Qn(s,/:(plac\w+)/,":"+Un+"input-$1")]}),Hg(t,{props:[Qn(s,/:(plac\w+)/,":-moz-$1")]}),Hg(t,{props:[Qn(s,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],eG=function(t){var e=t.key;if($2&&e==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(S){S.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var n=t.stylisPlugins||URe,s,a,i={},o=[];$2&&(s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(S){for(var B=S.getAttribute("data-emotion").split(" "),D=1;D<B.length;D++)i[B[D]]=!0;o.push(S)}));var l=[DRe,RRe];if($2){var c,d=[ZM,kRe(function(S){c.insert(S)})],h=e8(l.concat(n,d));a=function(S,B,D,I){c=D,Yh(YM(S?S+"{"+B.styles+"}":B.styles),h),I&&(E.inserted[B.name]=!0)}}else{var p=[ZM],m=e8(l.concat(n,p)),y=LRe(n)(e),x=function(S,B){var D=B.name;return y[D]===void 0&&(y[D]=Yh(YM(S?S+"{"+B.styles+"}":B.styles),m)),y[D]};a=function(S,B,D,I){var U=B.name,F=x(S,B);return E.compat===void 0?(I&&(E.inserted[U]=!0),F):I?void(E.inserted[U]=F):F}}var E={key:e,sheet:new bRe({key:e,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:a};return E.sheet.hydrate(o),E};function Vn(t,e,r){return t(r={path:e,exports:{},require:function(n,s){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(s==null&&r.path)}},r.exports),r.exports}var ui=typeof Symbol=="function"&&Symbol.for,lN=ui?Symbol.for("react.element"):60103,cN=ui?Symbol.for("react.portal"):60106,W2=ui?Symbol.for("react.fragment"):60107,Y2=ui?Symbol.for("react.strict_mode"):60108,X2=ui?Symbol.for("react.profiler"):60114,J2=ui?Symbol.for("react.provider"):60109,Z2=ui?Symbol.for("react.context"):60110,uN=ui?Symbol.for("react.async_mode"):60111,wb=ui?Symbol.for("react.concurrent_mode"):60111,ew=ui?Symbol.for("react.forward_ref"):60112,tw=ui?Symbol.for("react.suspense"):60113,MRe=ui?Symbol.for("react.suspense_list"):60120,rw=ui?Symbol.for("react.memo"):60115,nw=ui?Symbol.for("react.lazy"):60116,PRe=ui?Symbol.for("react.block"):60121,ORe=ui?Symbol.for("react.fundamental"):60117,jRe=ui?Symbol.for("react.responder"):60118,QRe=ui?Symbol.for("react.scope"):60119;function Al(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case lN:switch(t=t.type){case uN:case wb:case W2:case X2:case Y2:case tw:return t;default:switch(t=t&&t.$$typeof){case Z2:case ew:case nw:case rw:case J2:return t;default:return e}}case cN:return e}}}function n8(t){return Al(t)===wb}var HRe={AsyncMode:uN,ConcurrentMode:wb,ContextConsumer:Z2,ContextProvider:J2,Element:lN,ForwardRef:ew,Fragment:W2,Lazy:nw,Memo:rw,Portal:cN,Profiler:X2,StrictMode:Y2,Suspense:tw,isAsyncMode:function(t){return n8(t)||Al(t)===uN},isConcurrentMode:n8,isContextConsumer:function(t){return Al(t)===Z2},isContextProvider:function(t){return Al(t)===J2},isElement:function(t){return typeof t=="object"&&t!==null&&t.$$typeof===lN},isForwardRef:function(t){return Al(t)===ew},isFragment:function(t){return Al(t)===W2},isLazy:function(t){return Al(t)===nw},isMemo:function(t){return Al(t)===rw},isPortal:function(t){return Al(t)===cN},isProfiler:function(t){return Al(t)===X2},isStrictMode:function(t){return Al(t)===Y2},isSuspense:function(t){return Al(t)===tw},isValidElementType:function(t){return typeof t=="string"||typeof t=="function"||t===W2||t===wb||t===X2||t===Y2||t===tw||t===MRe||typeof t=="object"&&t!==null&&(t.$$typeof===nw||t.$$typeof===rw||t.$$typeof===J2||t.$$typeof===Z2||t.$$typeof===ew||t.$$typeof===ORe||t.$$typeof===jRe||t.$$typeof===QRe||t.$$typeof===PRe)},typeOf:Al};Vn(function(t,e){});var s8=Vn(function(t){t.exports=HRe}),a8={};a8[s8.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a8[s8.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var AN=typeof document<"u";function tG(t,e,r){var n="";return r.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):n+=s+" "}),n}var nk=function(t,e,r){var n=t.key+"-"+e.name;(r===!1||AN===!1&&t.compat!==void 0)&&t.registered[n]===void 0&&(t.registered[n]=e.styles)},sk=function(t,e,r){nk(t,e,r);var n=t.key+"-"+e.name;if(t.inserted[e.name]===void 0){var s="",a=e;do{var i=t.insert(e===a?"."+n:"",a,t.sheet,!0);AN||i===void 0||(s+=i),a=a.next}while(a!==void 0);if(!AN&&s.length!==0)return s}},VRe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zRe=/[A-Z]|^ms/g,GRe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,rG=function(t){return t.charCodeAt(1)===45},i8=function(t){return t!=null&&typeof t!="boolean"},GS=Jz(function(t){return rG(t)?t:t.replace(zRe,"-$&").toLowerCase()}),o8=function(t,e){switch(t){case"animation":case"animationName":if(typeof e=="string")return e.replace(GRe,function(r,n,s){return Pu={name:n,styles:s,next:Pu},n})}return VRe[t]===1||rG(t)||typeof e!="number"||e===0?e:e+"px"};function Lx(t,e,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return Pu={name:r.name,styles:r.styles,next:Pu},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)Pu={name:n.name,styles:n.styles,next:Pu},n=n.next;var s=r.styles+";";return s}return function(l,c,d){var h="";if(Array.isArray(d))for(var p=0;p<d.length;p++)h+=Lx(l,c,d[p])+";";else for(var m in d){var y=d[m];if(typeof y!="object")c!=null&&c[y]!==void 0?h+=m+"{"+c[y]+"}":i8(y)&&(h+=GS(m)+":"+o8(m,y)+";");else if(!Array.isArray(y)||typeof y[0]!="string"||c!=null&&c[y[0]]!==void 0){var x=Lx(l,c,y);switch(m){case"animation":case"animationName":h+=GS(m)+":"+x+";";break;default:h+=m+"{"+x+"}"}}else for(var E=0;E<y.length;E++)i8(y[E])&&(h+=GS(m)+":"+o8(m,y[E])+";")}return h}(t,e,r);case"function":if(t!==void 0){var a=Pu,i=r(t);return Pu=a,Lx(t,e,i)}break}if(e==null)return r;var o=e[r];return o!==void 0?o:r}var Pu,l8=/label:\s*([^\s;\n{]+)\s*(;|$)/g,YC=function(t,e,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var n=!0,s="";Pu=void 0;var a=t[0];a==null||a.raw===void 0?(n=!1,s+=Lx(r,e,a)):s+=a[0];for(var i=1;i<t.length;i++)s+=Lx(r,e,t[i]),n&&(s+=a[i]);l8.lastIndex=0;for(var o,l="";(o=l8.exec(s))!==null;)l+="-"+o[1];var c=function(d){for(var h,p=0,m=0,y=d.length;y>=4;++m,y-=4)h=1540483477*(65535&(h=255&d.charCodeAt(m)|(255&d.charCodeAt(++m))<<8|(255&d.charCodeAt(++m))<<16|(255&d.charCodeAt(++m))<<24))+(59797*(h>>>16)<<16),p=1540483477*(65535&(h^=h>>>24))+(59797*(h>>>16)<<16)^1540483477*(65535&p)+(59797*(p>>>16)<<16);switch(y){case 3:p^=(255&d.charCodeAt(m+2))<<16;case 2:p^=(255&d.charCodeAt(m+1))<<8;case 1:p=1540483477*(65535&(p^=255&d.charCodeAt(m)))+(59797*(p>>>16)<<16)}return(((p=1540483477*(65535&(p^=p>>>13))+(59797*(p>>>16)<<16))^p>>>15)>>>0).toString(36)}(s)+l;return{name:c,styles:s,next:Pu}},qRe=typeof document<"u",KRe=function(t){return t()},nG=!!q.useInsertionEffect&&q.useInsertionEffect,sG=qRe&&nG||KRe,c8=nG||q.useLayoutEffect,sm=typeof document<"u",ak={}.hasOwnProperty,bb=q.createContext(typeof HTMLElement<"u"?eG({key:"css"}):null);bb.Provider;var XC=function(t){return q.forwardRef(function(e,r){var n=q.useContext(bb);return t(e,n,r)})};sm||(XC=function(t){return function(e){var r=q.useContext(bb);return r===null?(r=eG({key:"css"}),q.createElement(bb.Provider,{value:r},t(e,r))):t(e,r)}});var ik=q.createContext({}),dN="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",$Re=function(t,e){var r={};for(var n in e)ak.call(e,n)&&(r[n]=e[n]);return r[dN]=t,r},WRe=function(t){var e=t.cache,r=t.serialized,n=t.isStringTag;nk(e,r,n);var s=sG(function(){return sk(e,r,n)});if(!sm&&s!==void 0){for(var a,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return q.createElement("style",((a={})["data-emotion"]=e.key+" "+i,a.dangerouslySetInnerHTML={__html:s},a.nonce=e.sheet.nonce,a))}return null},YRe=XC(function(t,e,r){var n=t.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var s=t[dN],a=[n],i="";typeof t.className=="string"?i=tG(e.registered,a,t.className):t.className!=null&&(i=t.className+" ");var o=YC(a,void 0,q.useContext(ik));i+=e.key+"-"+o.name;var l={};for(var c in t)!ak.call(t,c)||c==="css"||c===dN||(l[c]=t[c]);return l.ref=r,l.className=i,q.createElement(q.Fragment,null,q.createElement(WRe,{cache:e,serialized:o,isStringTag:typeof s=="string"}),q.createElement(s,l))});Vn(function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])}return r},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports});var pr=function(t,e){var r=arguments;if(e==null||!ak.call(e,"css"))return q.createElement.apply(void 0,r);var n=r.length,s=new Array(n);s[0]=YRe,s[1]=$Re(t,e);for(var a=2;a<n;a++)s[a]=r[a];return q.createElement.apply(null,s)};XC(function(t,e){var r=t.styles,n=YC([r],void 0,q.useContext(ik));if(!sm){for(var s,a=n.name,i=n.styles,o=n.next;o!==void 0;)a+=" "+o.name,i+=o.styles,o=o.next;var l=e.compat===!0,c=e.insert("",{name:a,styles:i},e.sheet,l);return l?null:q.createElement("style",((s={})["data-emotion"]=e.key+"-global "+a,s.dangerouslySetInnerHTML={__html:c},s.nonce=e.sheet.nonce,s))}var d=q.useRef();return c8(function(){var h=e.key+"-global",p=new e.sheet.constructor({key:h,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),m=!1,y=document.querySelector('style[data-emotion="'+h+" "+n.name+'"]');return e.sheet.tags.length&&(p.before=e.sheet.tags[0]),y!==null&&(m=!0,y.setAttribute("data-emotion",h),p.hydrate([y])),d.current=[p,m],function(){p.flush()}},[e]),c8(function(){var h=d.current,p=h[0];if(h[1])h[1]=!1;else{if(n.next!==void 0&&sk(e,n.next,!0),p.tags.length){var m=p.tags[p.tags.length-1].nextElementSibling;p.before=m,p.flush()}e.insert("",n,p,!1)}},[e,n.name]),null});function ok(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return YC(e)}var XRe=function t(e){for(var r=e.length,n=0,s="";n<r;n++){var a=e[n];if(a!=null){var i=void 0;switch(typeof a){case"boolean":break;case"object":if(Array.isArray(a))i=t(a);else for(var o in i="",a)a[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=a}i&&(s&&(s+=" "),s+=i)}}return s};function JRe(t,e,r){var n=[],s=tG(t,n,r);return n.length<2?r:s+e(n)}var ZRe=function(t){var e,r=t.cache,n=t.serializedArr,s=sG(function(){for(var a="",i=0;i<n.length;i++){var o=sk(r,n[i],!1);sm||o===void 0||(a+=o)}if(!sm)return a});return sm||s.length===0?null:q.createElement("style",((e={})["data-emotion"]=r.key+" "+n.map(function(a){return a.name}).join(" "),e.dangerouslySetInnerHTML={__html:s},e.nonce=r.sheet.nonce,e))};XC(function(t,e){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var c=YC(o,e.registered);return r.push(c),nk(e,c,!1),e.key+"-"+c.name},s={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return JRe(e.registered,n,XRe(o))},theme:q.useContext(ik)},a=t.children(s);return q.createElement(q.Fragment,null,q.createElement(ZRe,{cache:e,serializedArr:r}),a)});function ri(t,e){return function(r){if(Array.isArray(r))return r}(t)||function(r,n){var s=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(s!=null){var a,i,o,l,c=[],d=!0,h=!1;try{if(o=(s=s.call(r)).next,n===0){if(Object(s)!==s)return;d=!1}else for(;!(d=(a=o.call(s)).done)&&(c.push(a.value),c.length!==n);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(h)throw i}}return c}}(t,e)||qz(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ou(t,e){if(t==null)return{};var r,n,s=function(i,o){if(i==null)return{};var l,c,d={},h=Object.keys(i);for(c=0;c<h.length;c++)l=h[c],o.indexOf(l)>=0||(d[l]=i[l]);return d}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function YA(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function aG(t){return YA(t).getComputedStyle(t)}const A2=Math.round;function iG(t){return lG(t)?(t.nodeName||"").toLowerCase():""}let d2;function oG(t){return t instanceof YA(t).HTMLElement}function sw(t){return t instanceof YA(t).Element}function lG(t){return t instanceof YA(t).Node}function u8(t){return typeof ShadowRoot>"u"?!1:t instanceof YA(t).ShadowRoot||t instanceof ShadowRoot}function cG(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=aG(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function eLe(){return/^((?!chrome|android).)*safari/i.test(function(){if(d2)return d2;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(d2=t.brands.map(e=>e.brand+"/"+e.version).join(" "),d2):navigator.userAgent}())}function uG(t){return sw(t)?t:t.contextElement}const AG={x:1,y:1};function A8(t){const e=uG(t);if(!oG(e))return AG;const r=e.getBoundingClientRect(),{width:n,height:s,fallback:a}=function(l){const c=aG(l);let d=parseFloat(c.width),h=parseFloat(c.height);const p=l.offsetWidth,m=l.offsetHeight,y=A2(d)!==p||A2(h)!==m;return y&&(d=p,h=m),{width:d,height:h,fallback:y}}(e);let i=(a?A2(r.width):r.width)/n,o=(a?A2(r.height):r.height)/s;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function d8(t,e,r,n){var s,a;e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),o=uG(t);let l=AG;e&&(l=A8(t));const c=o?YA(o):window,d=eLe()&&r;let h=(i.left+(d&&((s=c.visualViewport)==null?void 0:s.offsetLeft)||0))/l.x,p=(i.top+(d&&((a=c.visualViewport)==null?void 0:a.offsetTop)||0))/l.y,m=i.width/l.x,y=i.height/l.y;if(o){const x=YA(o),E=n;let S=x.frameElement;for(;S&&n&&E!==x;){const B=A8(S),D=S.getBoundingClientRect(),I=getComputedStyle(S);D.x+=(S.clientLeft+parseFloat(I.paddingLeft))*B.x,D.y+=(S.clientTop+parseFloat(I.paddingTop))*B.y,h*=B.x,p*=B.y,m*=B.x,y*=B.y,h+=D.x,p+=D.y,S=YA(S).frameElement}}return{width:m,height:y,top:p,right:h+m,bottom:p+y,left:h,x:h,y:p}}function tLe(t){if(iG(t)==="html")return t;const e=t.assignedSlot||t.parentNode||u8(t)&&t.host||function(r){return((lG(r)?r.ownerDocument:r.document)||window.document).documentElement}(t);return u8(e)?e.host:e}function dG(t){const e=tLe(t);return function(r){return["html","body","#document"].includes(iG(r))}(e)?e.ownerDocument.body:oG(e)&&cG(e)?e:dG(e)}function aw(t,e){var r;e===void 0&&(e=[]);const n=dG(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),a=YA(n);return s?e.concat(a,a.visualViewport||[],cG(n)?n:[]):e.concat(n,aw(n))}var fN=typeof document<"u"?q.useLayoutEffect:q.useEffect,rLe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Cb=function(){};function nLe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function sLe(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];var a=[].concat(n);if(e&&t)for(var i in e)e.hasOwnProperty(i)&&e[i]&&a.push("".concat(nLe(t,i)));return a.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var f8=function(t){return e=t,Array.isArray(e)?t.filter(Boolean):Wh(t)==="object"&&t!==null?[t]:[];var e},h8=function(t){return t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme,lr({},Ou(t,rLe))},Ks=function(t,e,r){var n=t.cx,s=t.getStyles,a=t.getClassNames,i=t.className;return{css:s(e,t),className:n(r??{},a(e,t),i)}};function JC(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function fG(t){return JC(t)?window.pageYOffset:t.scrollTop}function Eb(t,e){JC(t)?window.scrollTo(0,e):t.scrollTop=e}function aLe(t,e,r,n){return r*((t=t/n-1)*t*t+1)+e}function f2(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Cb,s=fG(t),a=e-s,i=10,o=0;function l(){var c=aLe(o+=i,s,a,r);Eb(t,c),o<r?window.requestAnimationFrame(l):n(t)}l()}function p8(t,e){var r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),s=e.offsetHeight/3;n.bottom+s>r.bottom?Eb(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+s,t.scrollHeight)):n.top-s<r.top&&Eb(t,Math.max(e.offsetTop-s,0))}function m8(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var hG=!1,iLe={get passive(){return hG=!0}},h2=typeof window<"u"?window:{};h2.addEventListener&&h2.removeEventListener&&(h2.addEventListener("p",Cb,iLe),h2.removeEventListener("p",Cb,!1));var oLe=hG;function lLe(t){return t!=null}function p2(t,e,r){return t?e:r}var cLe=["children","innerProps"],uLe=["children","innerProps"];function ALe(t){var e=t.maxHeight,r=t.menuEl,n=t.minHeight,s=t.placement,a=t.shouldScroll,i=t.isFixedPosition,o=t.controlHeight,l=function(te){var Y=getComputedStyle(te),re=Y.position==="absolute",V=/(auto|scroll)/;if(Y.position==="fixed")return document.documentElement;for(var J=te;J=J.parentElement;)if(Y=getComputedStyle(J),(!re||Y.position!=="static")&&V.test(Y.overflow+Y.overflowY+Y.overflowX))return J;return document.documentElement}(r),c={placement:"bottom",maxHeight:e};if(!r||!r.offsetParent)return c;var d,h=l.getBoundingClientRect().height,p=r.getBoundingClientRect(),m=p.bottom,y=p.height,x=p.top,E=r.offsetParent.getBoundingClientRect().top,S=i||JC(d=l)?window.innerHeight:d.clientHeight,B=fG(l),D=parseInt(getComputedStyle(r).marginBottom,10),I=parseInt(getComputedStyle(r).marginTop,10),U=E-I,F=S-x,C=U+B,_=h-B-x,N=m-S+B+D,j=B+x-I,R=160;switch(s){case"auto":case"bottom":if(F>=y)return{placement:"bottom",maxHeight:e};if(_>=y&&!i)return a&&f2(l,N,R),{placement:"bottom",maxHeight:e};if(!i&&_>=n||i&&F>=n)return a&&f2(l,N,R),{placement:"bottom",maxHeight:i?F-D:_-D};if(s==="auto"||i){var L=e,Q=i?U:C;return Q>=n&&(L=Math.min(Q-D-o,e)),{placement:"top",maxHeight:L}}if(s==="bottom")return a&&Eb(l,N),{placement:"bottom",maxHeight:e};break;case"top":if(U>=y)return{placement:"top",maxHeight:e};if(C>=y&&!i)return a&&f2(l,j,R),{placement:"top",maxHeight:e};if(!i&&C>=n||i&&U>=n){var H=e;return(!i&&C>=n||i&&U>=n)&&(H=i?U-I:C-I),a&&f2(l,j,R),{placement:"top",maxHeight:H}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return c}var g8,pG=function(t){return t==="auto"?"bottom":t},mG=q.createContext(null),dLe=function(t){var e=t.children,r=t.minMenuHeight,n=t.maxMenuHeight,s=t.menuPlacement,a=t.menuPosition,i=t.menuShouldScrollIntoView,o=t.theme,l=(q.useContext(mG)||{}).setPortalPlacement,c=q.useRef(null),d=ri(q.useState(n),2),h=d[0],p=d[1],m=ri(q.useState(null),2),y=m[0],x=m[1],E=o.spacing.controlHeight;return fN(function(){var S=c.current;if(S){var B=a==="fixed",D=ALe({maxHeight:n,menuEl:S,minHeight:r,placement:s,shouldScroll:i&&!B,isFixedPosition:B,controlHeight:E});p(D.maxHeight),x(D.placement),l==null||l(D.placement)}},[n,s,a,i,r,l,E]),e({ref:c,placerProps:lr(lr({},t),{},{placement:y||pG(s),maxHeight:h})})},fLe=function(t){var e=t.children,r=t.innerRef,n=t.innerProps;return pr("div",Cr({},Ks(t,"menu",{menu:!0}),{ref:r},n),e)},gG=function(t,e){var r=t.theme,n=r.spacing.baseUnit,s=r.colors;return lr({textAlign:"center"},e?{}:{color:s.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},hLe=gG,pLe=gG,mLe=["size"],gLe=["innerProps","isRtl","size"],qS,KS,xLe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},xG=function(t){var e=t.size,r=Ou(t,mLe);return pr("svg",Cr({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:xLe},r))},$S=function(t){return pr(xG,Cr({size:20},t),pr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},x8=function(t){return pr(xG,Cr({size:20},t),pr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},vG=function(t,e){var r=t.isFocused,n=t.theme,s=n.spacing.baseUnit,a=n.colors;return lr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},e?{}:{color:r?a.neutral60:a.neutral20,padding:2*s,":hover":{color:r?a.neutral80:a.neutral40}})},vLe=vG,yLe=vG,wLe=function(){var t=ok.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(g8||(qS=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],KS||(KS=qS.slice(0)),g8=Object.freeze(Object.defineProperties(qS,{raw:{value:Object.freeze(KS)}})))),WS=function(t){var e=t.delay,r=t.offset;return pr("span",{css:ok({animation:"".concat(wLe," 1s ease-in-out ").concat(e,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},bLe=function(t){var e=t.children,r=t.isDisabled,n=t.isFocused,s=t.innerRef,a=t.innerProps,i=t.menuIsOpen;return pr("div",Cr({ref:s},Ks(t,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),a,{"aria-disabled":r||void 0}),e)},CLe=["data"],ELe=function(t){var e=t.children,r=t.cx,n=t.getStyles,s=t.getClassNames,a=t.Heading,i=t.headingProps,o=t.innerProps,l=t.label,c=t.theme,d=t.selectProps;return pr("div",Cr({},Ks(t,"group",{group:!0}),o),pr(a,Cr({},i,{selectProps:d,theme:c,getStyles:n,getClassNames:s,cx:r}),l),pr("div",null,e))},_Le=["innerRef","isDisabled","isHidden","inputClassName"],yG={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},SLe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":lr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},yG)},TLe=function(t){return lr({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},yG)},v8=function(t){var e=t.children,r=t.innerProps;return pr("div",r,e)},NLe=function(t){var e=t.children,r=t.components,n=t.data,s=t.innerProps,a=t.isDisabled,i=t.removeProps,o=t.selectProps,l=r.Container,c=r.Label,d=r.Remove;return pr(l,{data:n,innerProps:lr(lr({},Ks(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),s),selectProps:o},pr(c,{data:n,innerProps:lr({},Ks(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},e),pr(d,{data:n,innerProps:lr(lr({},Ks(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(e||"option")},i),selectProps:o}))},BLe={ClearIndicator:function(t){var e=t.children,r=t.innerProps;return pr("div",Cr({},Ks(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),e||pr($S,null))},Control:bLe,DropdownIndicator:function(t){var e=t.children,r=t.innerProps;return pr("div",Cr({},Ks(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),e||pr(x8,null))},DownChevron:x8,CrossIcon:$S,Group:ELe,GroupHeading:function(t){var e=h8(t);e.data;var r=Ou(e,CLe);return pr("div",Cr({},Ks(t,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(t){var e=t.children,r=t.innerProps;return pr("div",Cr({},Ks(t,"indicatorsContainer",{indicators:!0}),r),e)},IndicatorSeparator:function(t){var e=t.innerProps;return pr("span",Cr({},e,Ks(t,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(t){var e=t.cx,r=t.value,n=h8(t),s=n.innerRef,a=n.isDisabled,i=n.isHidden,o=n.inputClassName,l=Ou(n,_Le);return pr("div",Cr({},Ks(t,"input",{"input-container":!0}),{"data-value":r||""}),pr("input",Cr({className:e({input:!0},o),ref:s,style:TLe(i),disabled:a},l)))},LoadingIndicator:function(t){var e=t.innerProps,r=t.isRtl,n=t.size,s=n===void 0?4:n,a=Ou(t,gLe);return pr("div",Cr({},Ks(lr(lr({},a),{},{innerProps:e,isRtl:r,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),e),pr(WS,{delay:0,offset:r}),pr(WS,{delay:160,offset:!0}),pr(WS,{delay:320,offset:!r}))},Menu:fLe,MenuList:function(t){var e=t.children,r=t.innerProps,n=t.innerRef,s=t.isMulti;return pr("div",Cr({},Ks(t,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:n},r),e)},MenuPortal:function(t){var e=t.appendTo,r=t.children,n=t.controlElement,s=t.innerProps,a=t.menuPlacement,i=t.menuPosition,o=q.useRef(null),l=q.useRef(null),c=ri(q.useState(pG(a)),2),d=c[0],h=c[1],p=q.useMemo(function(){return{setPortalPlacement:h}},[]),m=ri(q.useState(null),2),y=m[0],x=m[1],E=q.useCallback(function(){if(n){var I=function(C){var _=C.getBoundingClientRect();return{bottom:_.bottom,height:_.height,left:_.left,right:_.right,top:_.top,width:_.width}}(n),U=i==="fixed"?0:window.pageYOffset,F=I[d]+U;F===(y==null?void 0:y.offset)&&I.left===(y==null?void 0:y.rect.left)&&I.width===(y==null?void 0:y.rect.width)||x({offset:F,rect:I})}},[n,i,d,y==null?void 0:y.offset,y==null?void 0:y.rect.left,y==null?void 0:y.rect.width]);fN(function(){E()},[E]);var S=q.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),n&&o.current&&(l.current=function(I,U,F,C){C===void 0&&(C={});const{ancestorScroll:_=!0,ancestorResize:N=!0,elementResize:j=!0,animationFrame:R=!1}=C,L=_&&!R,Q=L||N?[...sw(I)?aw(I):I.contextElement?aw(I.contextElement):[],...aw(U)]:[];Q.forEach(re=>{L&&re.addEventListener("scroll",F,{passive:!0}),N&&re.addEventListener("resize",F)});let H,te=null;if(j){let re=!0;te=new ResizeObserver(()=>{re||F(),re=!1}),sw(I)&&!R&&te.observe(I),sw(I)||!I.contextElement||R||te.observe(I.contextElement),te.observe(U)}let Y=R?d8(I):null;return R&&function re(){const V=d8(I);!Y||V.x===Y.x&&V.y===Y.y&&V.width===Y.width&&V.height===Y.height||F(),Y=V,H=requestAnimationFrame(re)}(),F(),()=>{var re;Q.forEach(V=>{L&&V.removeEventListener("scroll",F),N&&V.removeEventListener("resize",F)}),(re=te)==null||re.disconnect(),te=null,R&&cancelAnimationFrame(H)}}(n,o.current,E,{elementResize:"ResizeObserver"in window}))},[n,E]);fN(function(){S()},[S]);var B=q.useCallback(function(I){o.current=I,S()},[S]);if(!e&&i!=="fixed"||!y)return null;var D=pr("div",Cr({ref:B},Ks(lr(lr({},t),{},{offset:y.offset,position:i,rect:y.rect}),"menuPortal",{"menu-portal":!0}),s),r);return pr(mG.Provider,{value:p},e?$Ie.createPortal(D,e):D)},LoadingMessage:function(t){var e=t.children,r=e===void 0?"Loading...":e,n=t.innerProps,s=Ou(t,uLe);return pr("div",Cr({},Ks(lr(lr({},s),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(t){var e=t.children,r=e===void 0?"No options":e,n=t.innerProps,s=Ou(t,cLe);return pr("div",Cr({},Ks(lr(lr({},s),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:NLe,MultiValueContainer:v8,MultiValueLabel:v8,MultiValueRemove:function(t){var e=t.children,r=t.innerProps;return pr("div",Cr({role:"button"},r),e||pr($S,{size:14}))},Option:function(t){var e=t.children,r=t.isDisabled,n=t.isFocused,s=t.isSelected,a=t.innerRef,i=t.innerProps;return pr("div",Cr({},Ks(t,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":s}),{ref:a,"aria-disabled":r},i),e)},Placeholder:function(t){var e=t.children,r=t.innerProps;return pr("div",Cr({},Ks(t,"placeholder",{placeholder:!0}),r),e)},SelectContainer:function(t){var e=t.children,r=t.innerProps,n=t.isDisabled,s=t.isRtl;return pr("div",Cr({},Ks(t,"container",{"--is-disabled":n,"--is-rtl":s}),r),e)},SingleValue:function(t){var e=t.children,r=t.isDisabled,n=t.innerProps;return pr("div",Cr({},Ks(t,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),e)},ValueContainer:function(t){var e=t.children,r=t.innerProps,n=t.isMulti,s=t.hasValue;return pr("div",Cr({},Ks(t,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":s}),r),e)}},y8=Number.isNaN||function(t){return typeof t=="number"&&t!=t};function kLe(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(n=t[r],s=e[r],!(n===s||y8(n)&&y8(s)))return!1;var n,s;return!0}for(var ILe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},w8=function(t){return pr("span",Cr({css:ILe},t))},FLe={guidance:function(t){var e=t.isSearchable,r=t.isMulti,n=t.tabSelectsValue,s=t.context,a=t.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(t["aria-label"]||"Select"," is focused ").concat(e?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var e=t.action,r=t.label,n=r===void 0?"":r,s=t.labels,a=t.isDisabled;switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return"option ".concat(n,a?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(t){var e=t.context,r=t.focused,n=t.options,s=t.label,a=s===void 0?"":s,i=t.selectValue,o=t.isDisabled,l=t.isSelected,c=t.isAppleDevice,d=function(m,y){return m&&m.length?"".concat(m.indexOf(y)+1," of ").concat(m.length):""};if(e==="value"&&i)return"value ".concat(a," focused, ").concat(d(i,r),".");if(e==="menu"&&c){var h=o?" disabled":"",p="".concat(l?" selected":"").concat(h);return"".concat(a).concat(p,", ").concat(d(n,r),".")}return""},onFilter:function(t){var e=t.inputValue,r=t.resultsMessage;return"".concat(r).concat(e?" for search term "+e:"",".")}},DLe=function(t){var e=t.ariaSelection,r=t.focusedOption,n=t.focusedValue,s=t.focusableOptions,a=t.isFocused,i=t.selectValue,o=t.selectProps,l=t.id,c=t.isAppleDevice,d=o.ariaLiveMessages,h=o.getOptionLabel,p=o.inputValue,m=o.isMulti,y=o.isOptionDisabled,x=o.isSearchable,E=o.menuIsOpen,S=o.options,B=o.screenReaderStatus,D=o.tabSelectsValue,I=o.isLoading,U=o["aria-label"],F=o["aria-live"],C=q.useMemo(function(){return lr(lr({},FLe),d||{})},[d]),_=q.useMemo(function(){var H,te="";if(e&&C.onChange){var Y=e.option,re=e.options,V=e.removedValue,J=e.removedValues,K=e.value,ae=V||Y||(H=K,Array.isArray(H)?null:H),O=ae?h(ae):"",W=re||J||void 0,Z=W?W.map(h):[],ne=lr({isDisabled:ae&&y(ae,i),label:O,labels:Z},e);te=C.onChange(ne)}return te},[e,C,y,i,h]),N=q.useMemo(function(){var H="",te=r||n,Y=!!(r&&i&&i.includes(r));if(te&&C.onFocus){var re={focused:te,label:h(te),isDisabled:y(te,i),isSelected:Y,options:s,context:te===r?"menu":"value",selectValue:i,isAppleDevice:c};H=C.onFocus(re)}return H},[r,n,h,y,C,s,i,c]),j=q.useMemo(function(){var H="";if(E&&S.length&&!I&&C.onFilter){var te=B({count:s.length});H=C.onFilter({inputValue:p,resultsMessage:te})}return H},[s,p,E,C,S,B,I]),R=(e==null?void 0:e.action)==="initial-input-focus",L=q.useMemo(function(){var H="";if(C.guidance){var te=n?"value":E?"menu":"input";H=C.guidance({"aria-label":U,context:te,isDisabled:r&&y(r,i),isMulti:m,isSearchable:x,tabSelectsValue:D,isInitialFocus:R})}return H},[U,r,n,m,y,x,E,C,i,D,R]),Q=pr(q.Fragment,null,pr("span",{id:"aria-selection"},_),pr("span",{id:"aria-focused"},N),pr("span",{id:"aria-results"},j),pr("span",{id:"aria-guidance"},L));return pr(q.Fragment,null,pr(w8,{id:l},R&&Q),pr(w8,{"aria-live":F,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!R&&Q))},YS=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],RLe=new RegExp("["+YS.map(function(t){return t.letters}).join("")+"]","g"),wG={},XS=0;XS<YS.length;XS++)for(var JS=YS[XS],ZS=0;ZS<JS.letters.length;ZS++)wG[JS.letters[ZS]]=JS.base;var bG=function(t){return t.replace(RLe,function(e){return wG[e]})},LLe=function(t,e){e===void 0&&(e=kLe);var r=null;function n(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(r&&r.lastThis===this&&e(s,r.lastArgs))return r.lastResult;var i=t.apply(this,s);return r={lastResult:i,lastArgs:s,lastThis:this},i}return n.clear=function(){r=null},n}(bG),b8=function(t){return t.replace(/^\s+|\s+$/g,"")},ULe=function(t){return"".concat(t.label," ").concat(t.value)},MLe=["innerRef"];function PLe(t){var e=t.innerRef,r=function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];var o=Object.entries(n).filter(function(l){var c=ri(l,1)[0];return!a.includes(c)});return o.reduce(function(l,c){var d=ri(c,2),h=d[0],p=d[1];return l[h]=p,l},{})}(Ou(t,MLe),"onExited","in","enter","exit","appear");return pr("input",Cr({ref:e},r,{css:ok({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var C8=["boxSizing","height","overflow","paddingRight","position"],E8={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function _8(t){t.preventDefault()}function S8(t){t.stopPropagation()}function T8(){var t=this.scrollTop,e=this.scrollHeight,r=t+this.offsetHeight;t===0?this.scrollTop=1:r===e&&(this.scrollTop=t-1)}function N8(){return"ontouchstart"in window||navigator.maxTouchPoints}var B8=!(typeof window>"u"||!window.document||!window.document.createElement),Vg=0,vp={capture:!1,passive:!1},OLe=function(t){var e=t.target;return e.ownerDocument.activeElement&&e.ownerDocument.activeElement.blur()},jLe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function QLe(t){var e=t.children,r=t.lockEnabled,n=t.captureEnabled,s=function(i){var o=i.isEnabled,l=i.onBottomArrive,c=i.onBottomLeave,d=i.onTopArrive,h=i.onTopLeave,p=q.useRef(!1),m=q.useRef(!1),y=q.useRef(0),x=q.useRef(null),E=q.useCallback(function(F,C){if(x.current!==null){var _=x.current,N=_.scrollTop,j=_.scrollHeight,R=_.clientHeight,L=x.current,Q=C>0,H=j-R-N,te=!1;H>C&&p.current&&(c&&c(F),p.current=!1),Q&&m.current&&(h&&h(F),m.current=!1),Q&&C>H?(l&&!p.current&&l(F),L.scrollTop=j,te=!0,p.current=!0):!Q&&-C>N&&(d&&!m.current&&d(F),L.scrollTop=0,te=!0,m.current=!0),te&&function(Y){Y.cancelable&&Y.preventDefault(),Y.stopPropagation()}(F)}},[l,c,d,h]),S=q.useCallback(function(F){E(F,F.deltaY)},[E]),B=q.useCallback(function(F){y.current=F.changedTouches[0].clientY},[]),D=q.useCallback(function(F){var C=y.current-F.changedTouches[0].clientY;E(F,C)},[E]),I=q.useCallback(function(F){if(F){var C=!!oLe&&{passive:!1};F.addEventListener("wheel",S,C),F.addEventListener("touchstart",B,C),F.addEventListener("touchmove",D,C)}},[D,B,S]),U=q.useCallback(function(F){F&&(F.removeEventListener("wheel",S,!1),F.removeEventListener("touchstart",B,!1),F.removeEventListener("touchmove",D,!1))},[D,B,S]);return q.useEffect(function(){if(o){var F=x.current;return I(F),function(){U(F)}}},[o,I,U]),function(F){x.current=F}}({isEnabled:n===void 0||n,onBottomArrive:t.onBottomArrive,onBottomLeave:t.onBottomLeave,onTopArrive:t.onTopArrive,onTopLeave:t.onTopLeave}),a=function(i){var o=i.isEnabled,l=i.accountForScrollbars,c=l===void 0||l,d=q.useRef({}),h=q.useRef(null),p=q.useCallback(function(y){if(B8){var x=document.body,E=x&&x.style;if(c&&C8.forEach(function(I){var U=E&&E[I];d.current[I]=U}),c&&Vg<1){var S=parseInt(d.current.paddingRight,10)||0,B=document.body?document.body.clientWidth:0,D=window.innerWidth-B+S||0;Object.keys(E8).forEach(function(I){var U=E8[I];E&&(E[I]=U)}),E&&(E.paddingRight="".concat(D,"px"))}x&&N8()&&(x.addEventListener("touchmove",_8,vp),y&&(y.addEventListener("touchstart",T8,vp),y.addEventListener("touchmove",S8,vp))),Vg+=1}},[c]),m=q.useCallback(function(y){if(B8){var x=document.body,E=x&&x.style;Vg=Math.max(Vg-1,0),c&&Vg<1&&C8.forEach(function(S){var B=d.current[S];E&&(E[S]=B)}),x&&N8()&&(x.removeEventListener("touchmove",_8,vp),y&&(y.removeEventListener("touchstart",T8,vp),y.removeEventListener("touchmove",S8,vp)))}},[c]);return q.useEffect(function(){if(o){var y=h.current;return p(y),function(){m(y)}}},[o,p,m]),function(y){h.current=y}}({isEnabled:r});return pr(q.Fragment,null,r&&pr("div",{onClick:OLe,css:jLe}),e(function(i){s(i),a(i)}))}var HLe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},VLe=function(t){var e=t.name,r=t.onFocus;return pr("input",{required:!0,name:e,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:HLe,value:"",onChange:function(){}})};function hN(t){var e;return typeof window<"u"&&window.navigator!=null&&t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform)}function CG(){return hN(/^Mac/i)}function zLe(){return hN(/^iPhone/i)||hN(/^iPad/i)||CG()&&navigator.maxTouchPoints>1}var GLe,qLe={clearIndicator:yLe,container:function(t){var e=t.isDisabled;return{label:"container",direction:t.isRtl?"rtl":void 0,pointerEvents:e?"none":void 0,position:"relative"}},control:function(t,e){var r=t.isDisabled,n=t.isFocused,s=t.theme,a=s.colors,i=s.borderRadius;return lr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:s.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},e?{}:{backgroundColor:r?a.neutral5:a.neutral0,borderColor:r?a.neutral10:n?a.primary:a.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:n?a.primary:a.neutral30}})},dropdownIndicator:vLe,group:function(t,e){var r=t.theme.spacing;return e?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(t,e){var r=t.theme,n=r.colors,s=r.spacing;return lr({label:"group",cursor:"default",display:"block"},e?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*s.baseUnit,paddingRight:3*s.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(t,e){var r=t.isDisabled,n=t.theme,s=n.spacing.baseUnit,a=n.colors;return lr({label:"indicatorSeparator",alignSelf:"stretch",width:1},e?{}:{backgroundColor:r?a.neutral10:a.neutral20,marginBottom:2*s,marginTop:2*s})},input:function(t,e){var r=t.isDisabled,n=t.value,s=t.theme,a=s.spacing,i=s.colors;return lr(lr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},SLe),e?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:i.neutral80})},loadingIndicator:function(t,e){var r=t.isFocused,n=t.size,s=t.theme,a=s.colors,i=s.spacing.baseUnit;return lr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},e?{}:{color:r?a.neutral60:a.neutral20,padding:2*i})},loadingMessage:pLe,menu:function(t,e){var r,n=t.placement,s=t.theme,a=s.borderRadius,i=s.spacing,o=s.colors;return lr((Lp(r={label:"menu"},function(l){return l?{bottom:"top",top:"bottom"}[l]:"bottom"}(n),"100%"),Lp(r,"position","absolute"),Lp(r,"width","100%"),Lp(r,"zIndex",1),r),e?{}:{backgroundColor:o.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(t,e){var r=t.maxHeight,n=t.theme.spacing.baseUnit;return lr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},e?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(t){var e=t.rect,r=t.offset,n=t.position;return{left:e.left,position:n,top:r,width:e.width,zIndex:1}},multiValue:function(t,e){var r=t.theme,n=r.spacing,s=r.borderRadius,a=r.colors;return lr({label:"multiValue",display:"flex",minWidth:0},e?{}:{backgroundColor:a.neutral10,borderRadius:s/2,margin:n.baseUnit/2})},multiValueLabel:function(t,e){var r=t.theme,n=r.borderRadius,s=r.colors,a=t.cropWithEllipsis;return lr({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},e?{}:{borderRadius:n/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(t,e){var r=t.theme,n=r.spacing,s=r.borderRadius,a=r.colors,i=t.isFocused;return lr({alignItems:"center",display:"flex"},e?{}:{borderRadius:s/2,backgroundColor:i?a.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},noOptionsMessage:hLe,option:function(t,e){var r=t.isDisabled,n=t.isFocused,s=t.isSelected,a=t.theme,i=a.spacing,o=a.colors;return lr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},e?{}:{backgroundColor:s?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:s?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:s?o.primary:o.primary50}})},placeholder:function(t,e){var r=t.theme,n=r.spacing,s=r.colors;return lr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},e?{}:{color:s.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(t,e){var r=t.isDisabled,n=t.theme,s=n.spacing,a=n.colors;return lr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e?{}:{color:r?a.neutral40:a.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},valueContainer:function(t,e){var r=t.theme.spacing,n=t.isMulti,s=t.hasValue,a=t.selectProps.controlShouldRenderValue;return lr({alignItems:"center",display:n&&s&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},e?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},e5={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},KLe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:m8(),captureMenuScroll:!m8(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(t,e){if(t.data.__isNew__)return!0;var r=lr({ignoreCase:!0,ignoreAccents:!0,stringify:ULe,trim:!0,matchFrom:"any"},GLe),n=r.ignoreCase,s=r.ignoreAccents,a=r.stringify,i=r.trim,o=r.matchFrom,l=i?b8(e):e,c=i?b8(a(t)):a(t);return n&&(l=l.toLowerCase(),c=c.toLowerCase()),s&&(l=LLe(l),c=bG(c)),o==="start"?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(t){return t.label},getOptionLabel:function(t){return t.label},getOptionValue:function(t){return t.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(t){return!!t.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var e=t.count;return"".concat(e," result").concat(e!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function k8(t,e,r,n){return{type:"option",data:e,isDisabled:_G(t,e,r),isSelected:SG(t,e,r),label:EG(t,e),value:_b(t,e),index:n}}function m2(t,e){return t.options.map(function(r,n){if("options"in r){var s=r.options.map(function(i,o){return k8(t,i,e,o)}).filter(function(i){return D8(t,i)});return s.length>0?{type:"group",data:r,options:s,index:n}:void 0}var a=k8(t,r,e,n);return D8(t,a)?a:void 0}).filter(lLe)}function I8(t){return t.reduce(function(e,r){return r.type==="group"?e.push.apply(e,ek(r.options.map(function(n){return n.data}))):e.push(r.data),e},[])}function F8(t,e){return t.reduce(function(r,n){return n.type==="group"?r.push.apply(r,ek(n.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(n.index,"-").concat(s.index)}}))):r.push({data:n.data,id:"".concat(e,"-").concat(n.index)}),r},[])}function D8(t,e){var r=t.inputValue,n=r===void 0?"":r,s=e.data,a=e.isSelected,i=e.label,o=e.value;return(!NG(t)||!a)&&TG(t,{label:i,value:o,data:s},n)}var t5=function(t,e){var r;return((r=t.find(function(n){return n.data===e}))===null||r===void 0?void 0:r.id)||null},EG=function(t,e){return t.getOptionLabel(e)},_b=function(t,e){return t.getOptionValue(e)};function _G(t,e,r){return typeof t.isOptionDisabled=="function"&&t.isOptionDisabled(e,r)}function SG(t,e,r){if(r.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,r);var n=_b(t,e);return r.some(function(s){return _b(t,s)===n})}function TG(t,e,r){return!t.filterOption||t.filterOption(e,r)}var NG=function(t){var e=t.hideSelectedOptions,r=t.isMulti;return e===void 0?r:e},$Le=1,BG=function(t){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&sN(i,o)})(a,q.Component);var e,r,n,s=wRe(a);function a(i){var o;if(function(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}(this,a),(o=s.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=CG()||zLe(),o.controlRef=null,o.getControlRef=function(h){o.controlRef=h},o.focusedOptionRef=null,o.getFocusedOptionRef=function(h){o.focusedOptionRef=h},o.menuListRef=null,o.getMenuListRef=function(h){o.menuListRef=h},o.inputRef=null,o.getInputRef=function(h){o.inputRef=h},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(h,p){var m=o.props,y=m.onChange,x=m.name;p.name=x,o.ariaOnChange(h,p),y(h,p)},o.setValue=function(h,p,m){var y=o.props,x=y.closeMenuOnSelect,E=y.isMulti,S=y.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:S}),x&&(o.setState({inputIsHiddenAfterUpdate:!E}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(h,{action:p,option:m})},o.selectOption=function(h){var p=o.props,m=p.blurInputOnSelect,y=p.isMulti,x=p.name,E=o.state.selectValue,S=y&&o.isOptionSelected(h,E),B=o.isOptionDisabled(h,E);if(S){var D=o.getOptionValue(h);o.setValue(E.filter(function(I){return o.getOptionValue(I)!==D}),"deselect-option",h)}else{if(B)return void o.ariaOnChange(h,{action:"select-option",option:h,name:x});y?o.setValue([].concat(ek(E),[h]),"select-option",h):o.setValue(h,"select-option")}m&&o.blurInput()},o.removeValue=function(h){var p=o.props.isMulti,m=o.state.selectValue,y=o.getOptionValue(h),x=m.filter(function(S){return o.getOptionValue(S)!==y}),E=p2(p,x,x[0]||null);o.onChange(E,{action:"remove-value",removedValue:h}),o.focusInput()},o.clearValue=function(){var h=o.state.selectValue;o.onChange(p2(o.props.isMulti,[],null),{action:"clear",removedValues:h})},o.popValue=function(){var h=o.props.isMulti,p=o.state.selectValue,m=p[p.length-1],y=p.slice(0,p.length-1),x=p2(h,y,y[0]||null);o.onChange(x,{action:"pop-value",removedValue:m})},o.getFocusedOptionId=function(h){return t5(o.state.focusableOptionsWithIds,h)},o.getFocusableOptionsWithIds=function(){return F8(m2(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return sLe.apply(void 0,[o.props.classNamePrefix].concat(p))},o.getOptionLabel=function(h){return EG(o.props,h)},o.getOptionValue=function(h){return _b(o.props,h)},o.getStyles=function(h,p){var m=o.props.unstyled,y=qLe[h](p,m);y.boxSizing="border-box";var x=o.props.styles[h];return x?x(y,p):y},o.getClassNames=function(h,p){var m,y;return(m=(y=o.props.classNames)[h])===null||m===void 0?void 0:m.call(y,p)},o.getElementId=function(h){return"".concat(o.state.instancePrefix,"-").concat(h)},o.getComponents=function(){return h=o.props,lr(lr({},BLe),h.components);var h},o.buildCategorizedOptions=function(){return m2(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return I8(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(h,p){o.setState({ariaSelection:lr({value:h},p)})},o.onMenuMouseDown=function(h){h.button===0&&(h.stopPropagation(),h.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(h){o.blockOptionHover=!1},o.onControlMouseDown=function(h){if(!h.defaultPrevented){var p=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&o.onMenuClose():p&&o.openMenu("first"):(p&&(o.openAfterFocus=!0),o.focusInput()),h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&h.preventDefault()}},o.onDropdownIndicatorMouseDown=function(h){if(!(h&&h.type==="mousedown"&&h.button!==0||o.props.isDisabled)){var p=o.props,m=p.isMulti,y=p.menuIsOpen;o.focusInput(),y?(o.setState({inputIsHiddenAfterUpdate:!m}),o.onMenuClose()):o.openMenu("first"),h.preventDefault()}},o.onClearIndicatorMouseDown=function(h){h&&h.type==="mousedown"&&h.button!==0||(o.clearValue(),h.preventDefault(),o.openAfterFocus=!1,h.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(h){typeof o.props.closeMenuOnScroll=="boolean"?h.target instanceof HTMLElement&&JC(h.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(h)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(h){var p=h.touches,m=p&&p.item(0);m&&(o.initialTouchX=m.clientX,o.initialTouchY=m.clientY,o.userIsDragging=!1)},o.onTouchMove=function(h){var p=h.touches,m=p&&p.item(0);if(m){var y=Math.abs(m.clientX-o.initialTouchX),x=Math.abs(m.clientY-o.initialTouchY);o.userIsDragging=y>5||x>5}},o.onTouchEnd=function(h){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(h.target)&&o.menuListRef&&!o.menuListRef.contains(h.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(h){o.userIsDragging||o.onControlMouseDown(h)},o.onClearIndicatorTouchEnd=function(h){o.userIsDragging||o.onClearIndicatorMouseDown(h)},o.onDropdownIndicatorTouchEnd=function(h){o.userIsDragging||o.onDropdownIndicatorMouseDown(h)},o.handleInputChange=function(h){var p=o.props.inputValue,m=h.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(m,{action:"input-change",prevInputValue:p}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(h){o.props.onFocus&&o.props.onFocus(h),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(h){var p=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(h),o.onInputChange("",{action:"input-blur",prevInputValue:p}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(h){if(!o.blockOptionHover&&o.state.focusedOption!==h){var p=o.getFocusableOptions().indexOf(h);o.setState({focusedOption:h,focusedOptionId:p>-1?o.getFocusedOptionId(h):null})}},o.shouldHideSelectedOptions=function(){return NG(o.props)},o.onValueInputFocus=function(h){h.preventDefault(),h.stopPropagation(),o.focus()},o.onKeyDown=function(h){var p=o.props,m=p.isMulti,y=p.backspaceRemovesValue,x=p.escapeClearsValue,E=p.inputValue,S=p.isClearable,B=p.isDisabled,D=p.menuIsOpen,I=p.onKeyDown,U=p.tabSelectsValue,F=p.openMenuOnFocus,C=o.state,_=C.focusedOption,N=C.focusedValue,j=C.selectValue;if(!(B||typeof I=="function"&&(I(h),h.defaultPrevented))){switch(o.blockOptionHover=!0,h.key){case"ArrowLeft":if(!m||E)return;o.focusValue("previous");break;case"ArrowRight":if(!m||E)return;o.focusValue("next");break;case"Delete":case"Backspace":if(E)return;if(N)o.removeValue(N);else{if(!y)return;m?o.popValue():S&&o.clearValue()}break;case"Tab":if(o.isComposing||h.shiftKey||!D||!U||!_||F&&o.isOptionSelected(_,j))return;o.selectOption(_);break;case"Enter":if(h.keyCode===229)break;if(D){if(!_||o.isComposing)return;o.selectOption(_);break}return;case"Escape":D?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:E}),o.onMenuClose()):S&&x&&o.clearValue();break;case" ":if(E)return;if(!D){o.openMenu("first");break}if(!_)return;o.selectOption(_);break;case"ArrowUp":D?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":D?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!D)return;o.focusOption("pageup");break;case"PageDown":if(!D)return;o.focusOption("pagedown");break;case"Home":if(!D)return;o.focusOption("first");break;case"End":if(!D)return;o.focusOption("last");break;default:return}h.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++$Le),o.state.selectValue=f8(i.value),i.menuIsOpen&&o.state.selectValue.length){var l=o.getFocusableOptionsWithIds(),c=o.buildFocusableOptions(),d=c.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=l,o.state.focusedOption=c[d],o.state.focusedOptionId=t5(l,c[d])}return o}return e=a,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&p8(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,l=o.isDisabled,c=o.menuIsOpen,d=this.state.isFocused;(d&&!l&&i.isDisabled||d&&c&&!i.menuIsOpen)&&this.focusInput(),d&&l&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||l||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(p8(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,l=this.state,c=l.selectValue,d=l.isFocused,h=this.buildFocusableOptions(),p=i==="first"?0:h.length-1;if(!this.props.isMulti){var m=h.indexOf(c[0]);m>-1&&(p=m)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:h[p],focusedOptionId:this.getFocusedOptionId(h[p])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,l=o.selectValue,c=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=l.indexOf(c);c||(d=-1);var h=l.length-1,p=-1;if(l.length){switch(i){case"previous":p=d===0?0:d===-1?h:d-1;break;case"next":d>-1&&d<h&&(p=d+1)}this.setState({inputIsHidden:p!==-1,focusedValue:l[p]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,l=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var d=0,h=c.indexOf(l);l||(h=-1),i==="up"?d=h>0?h-1:c.length-1:i==="down"?d=(h+1)%c.length:i==="pageup"?(d=h-o)<0&&(d=0):i==="pagedown"?(d=h+o)>c.length-1&&(d=c.length-1):i==="last"&&(d=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(e5):lr(lr({},e5),this.props.theme):e5}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,l=this.getStyles,c=this.getClassNames,d=this.getValue,h=this.selectOption,p=this.setValue,m=this.props,y=m.isMulti,x=m.isRtl,E=m.options;return{clearValue:i,cx:o,getStyles:l,getClassNames:c,getValue:d,hasValue:this.hasValue(),isMulti:y,isRtl:x,options:E,selectOption:h,selectProps:m,setValue:p,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,l=i.isMulti;return o===void 0?l:o}},{key:"isOptionDisabled",value:function(i,o){return _G(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return SG(this.props,i,o)}},{key:"filterOption",value:function(i,o){return TG(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:l,selectValue:c})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,l=i.isSearchable,c=i.inputId,d=i.inputValue,h=i.tabIndex,p=i.form,m=i.menuIsOpen,y=i.required,x=this.getComponents().Input,E=this.state,S=E.inputIsHidden,B=E.ariaSelection,D=this.commonProps,I=c||this.getElementId("input"),U=lr(lr(lr({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":y,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(B==null?void 0:B.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?q.createElement(x,Cr({},D,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:I,innerRef:this.getInputRef,isDisabled:o,isHidden:S,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:h,form:p,type:"text",value:d},U)):q.createElement(PLe,Cr({id:I,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Cb,onFocus:this.onInputFocus,disabled:o,tabIndex:h,inputMode:"none",form:p,value:""},U))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),l=o.MultiValue,c=o.MultiValueContainer,d=o.MultiValueLabel,h=o.MultiValueRemove,p=o.SingleValue,m=o.Placeholder,y=this.commonProps,x=this.props,E=x.controlShouldRenderValue,S=x.isDisabled,B=x.isMulti,D=x.inputValue,I=x.placeholder,U=this.state,F=U.selectValue,C=U.focusedValue,_=U.isFocused;if(!this.hasValue()||!E)return D?null:q.createElement(m,Cr({},y,{key:"placeholder",isDisabled:S,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),I);if(B)return F.map(function(j,R){var L=j===C,Q="".concat(i.getOptionLabel(j),"-").concat(i.getOptionValue(j));return q.createElement(l,Cr({},y,{components:{Container:c,Label:d,Remove:h},isFocused:L,isDisabled:S,key:Q,index:R,removeProps:{onClick:function(){return i.removeValue(j)},onTouchEnd:function(){return i.removeValue(j)},onMouseDown:function(H){H.preventDefault()}},data:j}),i.formatOptionLabel(j,"value"))});if(D)return null;var N=F[0];return q.createElement(p,Cr({},y,{data:N,isDisabled:S}),this.formatOptionLabel(N,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,h=this.state.isFocused;if(!this.isClearable()||!i||c||!this.hasValue()||d)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return q.createElement(i,Cr({},o,{innerProps:p,isFocused:h}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,h=this.state.isFocused;return i&&d?q.createElement(i,Cr({},o,{innerProps:{"aria-hidden":"true"},isDisabled:c,isFocused:h})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,l=i.IndicatorSeparator;if(!o||!l)return null;var c=this.commonProps,d=this.props.isDisabled,h=this.state.isFocused;return q.createElement(l,Cr({},c,{isDisabled:d,isFocused:h}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return q.createElement(i,Cr({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),l=o.Group,c=o.GroupHeading,d=o.Menu,h=o.MenuList,p=o.MenuPortal,m=o.LoadingMessage,y=o.NoOptionsMessage,x=o.Option,E=this.commonProps,S=this.state.focusedOption,B=this.props,D=B.captureMenuScroll,I=B.inputValue,U=B.isLoading,F=B.loadingMessage,C=B.minMenuHeight,_=B.maxMenuHeight,N=B.menuIsOpen,j=B.menuPlacement,R=B.menuPosition,L=B.menuPortalTarget,Q=B.menuShouldBlockScroll,H=B.menuShouldScrollIntoView,te=B.noOptionsMessage,Y=B.onMenuScrollToTop,re=B.onMenuScrollToBottom;if(!N)return null;var V,J=function(Z,ne){var le=Z.type,ve=Z.data,pe=Z.isDisabled,he=Z.isSelected,de=Z.label,ce=Z.value,oe=S===ve,Re=pe?void 0:function(){return i.onOptionHover(ve)},qe=pe?void 0:function(){return i.selectOption(ve)},Ie="".concat(i.getElementId("option"),"-").concat(ne),Ee={id:Ie,onClick:qe,onMouseMove:Re,onMouseOver:Re,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:he};return q.createElement(x,Cr({},E,{innerProps:Ee,data:ve,isDisabled:pe,isSelected:he,key:Ie,label:de,type:le,value:ce,isFocused:oe,innerRef:oe?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Z.data,"menu"))};if(this.hasOptions())V=this.getCategorizedOptions().map(function(Z){if(Z.type==="group"){var ne=Z.data,le=Z.options,ve=Z.index,pe="".concat(i.getElementId("group"),"-").concat(ve),he="".concat(pe,"-heading");return q.createElement(l,Cr({},E,{key:pe,data:ne,options:le,Heading:c,headingProps:{id:he,data:Z.data},label:i.formatGroupLabel(Z.data)}),Z.options.map(function(de){return J(de,"".concat(ve,"-").concat(de.index))}))}if(Z.type==="option")return J(Z,"".concat(Z.index))});else if(U){var K=F({inputValue:I});if(K===null)return null;V=q.createElement(m,E,K)}else{var ae=te({inputValue:I});if(ae===null)return null;V=q.createElement(y,E,ae)}var O={minMenuHeight:C,maxMenuHeight:_,menuPlacement:j,menuPosition:R,menuShouldScrollIntoView:H},W=q.createElement(dLe,Cr({},E,O),function(Z){var ne=Z.ref,le=Z.placerProps,ve=le.placement,pe=le.maxHeight;return q.createElement(d,Cr({},E,O,{innerRef:ne,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:U,placement:ve}),q.createElement(QLe,{captureEnabled:D,onTopArrive:Y,onBottomArrive:re,lockEnabled:Q},function(he){return q.createElement(h,Cr({},E,{innerRef:function(de){i.getMenuListRef(de),he(de)},innerProps:{role:"listbox","aria-multiselectable":E.isMulti,id:i.getElementId("listbox")},isLoading:U,maxHeight:pe,focusedOption:S}),V)}))});return L||R==="fixed"?q.createElement(p,Cr({},E,{appendTo:L,controlElement:this.controlRef,menuPlacement:j,menuPosition:R}),W):W}},{key:"renderFormField",value:function(){var i=this,o=this.props,l=o.delimiter,c=o.isDisabled,d=o.isMulti,h=o.name,p=o.required,m=this.state.selectValue;if(p&&!this.hasValue()&&!c)return q.createElement(VLe,{name:h,onFocus:this.onValueInputFocus});if(h&&!c){if(d){if(l){var y=m.map(function(S){return i.getOptionValue(S)}).join(l);return q.createElement("input",{name:h,type:"hidden",value:y})}var x=m.length>0?m.map(function(S,B){return q.createElement("input",{key:"i-".concat(B),name:h,type:"hidden",value:i.getOptionValue(S)})}):q.createElement("input",{name:h,type:"hidden",value:""});return q.createElement("div",null,x)}var E=m[0]?this.getOptionValue(m[0]):"";return q.createElement("input",{name:h,type:"hidden",value:E})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,l=o.ariaSelection,c=o.focusedOption,d=o.focusedValue,h=o.isFocused,p=o.selectValue,m=this.getFocusableOptions();return q.createElement(DLe,Cr({},i,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:c,focusedValue:d,isFocused:h,selectValue:p,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,l=i.IndicatorsContainer,c=i.SelectContainer,d=i.ValueContainer,h=this.props,p=h.className,m=h.id,y=h.isDisabled,x=h.menuIsOpen,E=this.state.isFocused,S=this.commonProps=this.getCommonProps();return q.createElement(c,Cr({},S,{className:p,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:y,isFocused:E}),this.renderLiveRegion(),q.createElement(o,Cr({},S,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:y,isFocused:E,menuIsOpen:x}),q.createElement(d,Cr({},S,{isDisabled:y}),this.renderPlaceholderOrValue(),this.renderInput()),q.createElement(l,Cr({},S,{isDisabled:y}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var l=o.prevProps,c=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,h=o.ariaSelection,p=o.isFocused,m=o.prevWasFocused,y=o.instancePrefix,x=i.options,E=i.value,S=i.menuIsOpen,B=i.inputValue,D=i.isMulti,I=f8(E),U={};if(l&&(E!==l.value||x!==l.options||S!==l.menuIsOpen||B!==l.inputValue)){var F=S?function(Q,H){return I8(m2(Q,H))}(i,I):[],C=S?F8(m2(i,I),"".concat(y,"-option")):[],_=c?function(Q,H){var te=Q.focusedValue,Y=Q.selectValue.indexOf(te);if(Y>-1){if(H.indexOf(te)>-1)return te;if(Y<H.length)return H[Y]}return null}(o,I):null,N=function(Q,H){var te=Q.focusedOption;return te&&H.indexOf(te)>-1?te:H[0]}(o,F);U={selectValue:I,focusedOption:N,focusedOptionId:t5(C,N),focusableOptionsWithIds:C,focusedValue:_,clearFocusValueOnUpdate:!1}}var j=d!=null&&i!==l?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},R=h,L=p&&m;return p&&!L&&(R={value:p2(D,I,I[0]||null),options:I,action:"initial-input-focus"},L=!m),(h==null?void 0:h.action)==="initial-input-focus"&&(R=null),lr(lr(lr({},U),j),{},{prevProps:i,ariaSelection:R,prevWasFocused:L})}}],r&&$M(e.prototype,r),n&&$M(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();BG.defaultProps=KLe;var WLe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],YLe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],lk=Vn(function(t){function e(r){return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}),XLe=Vn(function(t){var e=lk.default;t.exports=function(r,n){if(e(r)!=="object"||r===null)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var a=s.call(r,n||"default");if(e(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},t.exports.__esModule=!0,t.exports.default=t.exports}),kG=Vn(function(t){var e=lk.default;t.exports=function(r){var n=XLe(r,"string");return e(n)==="symbol"?n:String(n)},t.exports.__esModule=!0,t.exports.default=t.exports}),JLe=Vn(function(t){t.exports=function(e,r,n){return(r=kG(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports});Vn(function(t){function e(r,n){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),s.push.apply(s,a)}return s}t.exports=function(r){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?e(Object(s),!0).forEach(function(a){JLe(r,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(s,a))})}return r},t.exports.__esModule=!0,t.exports.default=t.exports}),Vn(function(t){t.exports=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}),Vn(function(t){function e(r,n){for(var s=0;s<n.length;s++){var a=n[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,kG(a.key),a)}}t.exports=function(r,n,s){return n&&e(r.prototype,n),s&&e(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r},t.exports.__esModule=!0,t.exports.default=t.exports});var ZLe=Vn(function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports});Vn(function(t){t.exports=function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&ZLe(e,r)},t.exports.__esModule=!0,t.exports.default=t.exports});var R8=Vn(function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}),eUe=Vn(function(t){t.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},t.exports.__esModule=!0,t.exports.default=t.exports}),tUe=Vn(function(t){t.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports}),rUe=Vn(function(t){var e=lk.default;t.exports=function(r,n){if(n&&(e(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tUe(r)},t.exports.__esModule=!0,t.exports.default=t.exports});Vn(function(t){t.exports=function(e){var r=eUe();return function(){var n,s=R8(e);if(r){var a=R8(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return rUe(this,n)}},t.exports.__esModule=!0,t.exports.default=t.exports});var pN=Vn(function(t){t.exports=function(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,s=new Array(r);n<r;n++)s[n]=e[n];return s},t.exports.__esModule=!0,t.exports.default=t.exports}),nUe=Vn(function(t){t.exports=function(e){if(Array.isArray(e))return pN(e)},t.exports.__esModule=!0,t.exports.default=t.exports}),sUe=Vn(function(t){t.exports=function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports}),IG=Vn(function(t){t.exports=function(e,r){if(e){if(typeof e=="string")return pN(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pN(e,r):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}),aUe=Vn(function(t){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports});Vn(function(t){t.exports=function(e){return nUe(e)||sUe(e)||IG(e)||aUe()},t.exports.__esModule=!0,t.exports.default=t.exports});var iUe=Vn(function(t){t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports}),oUe=Vn(function(t){t.exports=function(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,r===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}},t.exports.__esModule=!0,t.exports.default=t.exports}),lUe=Vn(function(t){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports});Vn(function(t){t.exports=function(e,r){return iUe(e)||oUe(e,r)||IG(e,r)||lUe()},t.exports.__esModule=!0,t.exports.default=t.exports});var cUe=Vn(function(t){t.exports=function(e,r){if(e==null)return{};var n,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],r.indexOf(n)>=0||(a[n]=e[n]);return a},t.exports.__esModule=!0,t.exports.default=t.exports});Vn(function(t){t.exports=function(e,r){if(e==null)return{};var n,s,a=cUe(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},t.exports.__esModule=!0,t.exports.default=t.exports}),Vn(function(t){t.exports=function(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))},t.exports.__esModule=!0,t.exports.default=t.exports});var uUe=q.forwardRef(function(t,e){var r=function(s){var a=s.defaultOptions,i=a!==void 0&&a,o=s.cacheOptions,l=o!==void 0&&o,c=s.loadOptions;s.options;var d=s.isLoading,h=d!==void 0&&d,p=s.onInputChange,m=s.filterOption,y=m===void 0?null:m,x=Ou(s,YLe),E=x.inputValue,S=q.useRef(void 0),B=q.useRef(!1),D=ri(q.useState(Array.isArray(i)?i:void 0),2),I=D[0],U=D[1],F=ri(q.useState(E!==void 0?E:""),2),C=F[0],_=F[1],N=ri(q.useState(i===!0),2),j=N[0],R=N[1],L=ri(q.useState(void 0),2),Q=L[0],H=L[1],te=ri(q.useState([]),2),Y=te[0],re=te[1],V=ri(q.useState(!1),2),J=V[0],K=V[1],ae=ri(q.useState({}),2),O=ae[0],W=ae[1],Z=ri(q.useState(void 0),2),ne=Z[0],le=Z[1],ve=ri(q.useState(void 0),2),pe=ve[0],he=ve[1];l!==pe&&(W({}),he(l)),i!==ne&&(U(Array.isArray(i)?i:void 0),le(i)),q.useEffect(function(){return B.current=!0,function(){B.current=!1}},[]);var de=q.useCallback(function(Re,qe){if(!c)return qe();var Ie=c(Re,qe);Ie&&typeof Ie.then=="function"&&Ie.then(qe,function(){return qe()})},[c]);q.useEffect(function(){i===!0&&de(C,function(Re){B.current&&(U(Re||[]),R(!!S.current))})},[]);var ce=q.useCallback(function(Re,qe){var Ie=function(De,je,We){if(We){var ct=We(De,je);if(typeof ct=="string")return ct}return De}(Re,qe,p);if(!Ie)return S.current=void 0,_(""),H(""),re([]),R(!1),void K(!1);if(l&&O[Ie])_(Ie),H(Ie),re(O[Ie]),R(!1),K(!1);else{var Ee=S.current={};_(Ie),R(!0),K(!Q),de(Ie,function(De){B&&Ee===S.current&&(S.current=void 0,R(!1),H(Ie),re(De||[]),K(!1),W(De?lr(lr({},O),{},Lp({},Ie,De)):O))})}},[l,de,Q,O,p]),oe=J?[]:C&&Q?Y:I||[];return lr(lr({},x),{},{options:oe,isLoading:j||h,onInputChange:ce,filterOption:y})}(t),n=function(s){var a=s.defaultInputValue,i=a===void 0?"":a,o=s.defaultMenuIsOpen,l=o!==void 0&&o,c=s.defaultValue,d=c===void 0?null:c,h=s.inputValue,p=s.menuIsOpen,m=s.onChange,y=s.onInputChange,x=s.onMenuClose,E=s.onMenuOpen,S=s.value,B=Ou(s,WLe),D=ri(q.useState(h!==void 0?h:i),2),I=D[0],U=D[1],F=ri(q.useState(p!==void 0?p:l),2),C=F[0],_=F[1],N=ri(q.useState(S!==void 0?S:d),2),j=N[0],R=N[1],L=q.useCallback(function(J,K){typeof m=="function"&&m(J,K),R(J)},[m]),Q=q.useCallback(function(J,K){var ae;typeof y=="function"&&(ae=y(J,K)),U(ae!==void 0?ae:J)},[y]),H=q.useCallback(function(){typeof E=="function"&&E(),_(!0)},[E]),te=q.useCallback(function(){typeof x=="function"&&x(),_(!1)},[x]),Y=h!==void 0?h:I,re=p!==void 0?p:C,V=S!==void 0?S:j;return lr(lr({},B),{},{inputValue:Y,menuIsOpen:re,onChange:L,onInputChange:Q,onMenuClose:te,onMenuOpen:H,value:V})}(r);return q.createElement(BG,Cr({ref:e},n))}),AUe=uUe,dUe=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,a;if(Array.isArray(e)){if((n=e.length)!=r.length)return!1;for(s=n;s--!=0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((n=(a=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(s=n;s--!=0;)if(!Object.prototype.hasOwnProperty.call(r,a[s]))return!1;for(s=n;s--!=0;){var i=a[s];if(!t(e[i],r[i]))return!1}return!0}return e!=e&&r!=r},Up;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(Up||(Up={}));class Ih{constructor({apiKey:e,authReferrerPolicy:r,channel:n,client:s,id:a="__googleMapsScriptId",language:i,libraries:o=[],mapIds:l,nonce:c,region:d,retries:h=3,url:p="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=r,this.channel=n,this.client=s,this.id=a||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=l,this.nonce=c,this.region=d,this.retries=h,this.url=p,this.version=m,Ih.instance){if(!dUe(this.options,Ih.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Ih.instance.options)}`);return Ih.instance}Ih.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Up.FAILURE:this.done?Up.SUCCESS:this.loading?Up.LOADING:Up.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,r)=>{this.loadCallback(n=>{n?r(n.error):e(window.google)})})}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const e=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=e,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=e,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var fUe=function(t,e,r){var n,s=t.bounds,a=t.location,i=function(l,c){var d={};for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&c.indexOf(h)<0&&(d[h]=l[h]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(l);p<h.length;p++)c.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(l,h[p])&&(d[h[p]]=l[h[p]])}return d}(t,["bounds","location"]),o=$h({input:e},i);return r&&(o.sessionToken=r),s&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var l=0,c=0,d=arguments.length;c<d;c++)l+=arguments[c].length;var h=Array(l),p=0;for(c=0;c<d;c++)for(var m=arguments[c],y=0,x=m.length;y<x;y++,p++)h[p]=m[y];return h}([void 0],s)))),a&&(o.location=new google.maps.LatLng(a)),o},hUe=function(t){var e=t.autocompletionRequest,r=t.debounce,n=t.minLengthAutocomplete,s=t.placesService,a=t.sessionToken,i=t.withSessionToken,o=function(l,c,d){d===void 0&&(d={});var h=d.maxWait,p=q.useRef(null),m=q.useRef([]),y=d.leading,x=d.trailing===void 0||d.trailing,E=q.useRef(!1),S=q.useRef(null),B=q.useRef(!1),D=q.useRef(l);D.current=l;var I=q.useCallback(function(){clearTimeout(S.current),clearTimeout(p.current),p.current=null,m.current=[],S.current=null,E.current=!1},[]);q.useEffect(function(){return B.current=!1,function(){B.current=!0}},[]);var U=q.useCallback(function(){for(var C=[],_=0;_<arguments.length;_++)C[_]=arguments[_];m.current=C,clearTimeout(S.current),E.current&&(E.current=!1),S.current||!y||E.current||(D.current.apply(D,C),E.current=!0),S.current=setTimeout(function(){var N=!0;y&&E.current&&(N=!1),I(),!B.current&&x&&N&&D.current.apply(D,C)},c),h&&!p.current&&x&&(p.current=setTimeout(function(){var N=m.current;I(),B.current||D.current.apply(null,N)},h))},[h,c,I,y,x]),F=q.useCallback(function(){S.current&&(D.current.apply(null,m.current),I())},[I]);return[U,I,F]}(function(l,c){if(!s)return c([]);if(l.length<n)return c([]);var d=$h({},e);s.getPlacePredictions(fUe(d,l,i&&a),function(h){c((h||[]).map(function(p){return{label:p.description,value:p}}))})},r)[0];return o},pUe=q.forwardRef(function(t,e){var r,n,s,a,i,o,l,c,d=function(x){var E=x.apiKey,S=x.apiOptions,B=x.onLoadFailed,D=q.useState(void 0),I=D[0],U=D[1],F=q.useState(void 0),C=F[0],_=F[1],N=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");U(new window.google.maps.places.AutocompleteService),_(new google.maps.places.AutocompleteSessionToken)};return q.useEffect(function(){E?xRe(void 0,void 0,void 0,function(){var j;return vRe(this,function(R){switch(R.label){case 0:if(!E)return[2];R.label=1;case 1:return R.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Ih($h({apiKey:E},$h({libraries:["places"]},S))).load()];case 2:R.sent(),R.label=3;case 3:return N(),[3,5];case 4:return j=R.sent(),typeof B=="function"&&B(j),[3,5];case 5:return[2]}})}):N()},[]),{placesService:I,sessionToken:C,setSessionToken:_}}({apiKey:(r=t.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=t.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(s=t.onLoadFailed)!==null&&s!==void 0?s:console.error}),h=d.placesService,p=d.sessionToken,m=d.setSessionToken,y=hUe({autocompletionRequest:(a=t.autocompletionRequest)!==null&&a!==void 0?a:{},debounce:(i=t.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=t.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:h,sessionToken:p,withSessionToken:(l=t.withSessionToken)!==null&&l!==void 0&&l});return q.useImperativeHandle(e,function(){return{getSessionToken:function(){return p},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[p]),dt.createElement(AUe,$h({},(c=t.selectProps)!==null&&c!==void 0?c:{},{loadOptions:y,getOptionValue:function(x){return x.value.place_id}}))});const mUe=t=>{const[e,r]=q.useState(!1),[n,s]=q.useState(null);return q.useEffect(()=>{const a="google-maps-script";if(document.getElementById(a)||window.google){r(!0);return}const i=document.createElement("script");i.id=a,i.src=`https://maps.googleapis.com/maps/api/js?key=${t}&libraries=places&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>s(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[t]),{isLoaded:e,error:n}},gUe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],xUe=()=>({nombre:"",rut:"",direccion:"",contacto:"",cupos:1,coordenadas:null,calificaciones:gUe.map(t=>({...t,score:null})),estudiantesAsignados:[]}),vUe=({empresas:t,isLoaded:e})=>{const r=q.useRef(null),n=q.useRef(null),s=q.useRef([]),a=t.filter(i=>{var o,l;return((o=i.coordenadas)==null?void 0:o.lat)&&((l=i.coordenadas)==null?void 0:l.lng)});return q.useEffect(()=>{if(!(!e||!r.current||!window.google)&&(n.current||(n.current=new window.google.maps.Map(r.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0})),s.current.forEach(i=>i.setMap(null)),s.current=[],a.forEach(i=>{const o=new window.google.maps.Marker({position:{lat:i.coordenadas.lat,lng:i.coordenadas.lng},map:n.current,title:i.nombre}),l=new window.google.maps.InfoWindow({content:`
                    <div style="padding: 10px; max-width: 250px;">
                        <h4 style="margin: 0 0 8px 0; color: #2563eb; font-weight: bold;">${i.nombre}</h4>
                        <p style="margin: 4px 0; font-size: 14px;">📍 ${i.direccion}</p>
                        <p style="margin: 4px 0; font-size: 13px; color: #6b7280;"><strong>RUT:</strong> ${i.rut}</p>
                        <p style="margin: 4px 0; font-size: 13px; color: #059669;"><strong>Cupos:</strong> ${i.cupos}</p>
                        ${i.contacto?`<p style="margin: 4px 0; font-size: 13px; color: #6b7280;"><strong>Contacto:</strong> ${i.contacto}</p>`:""}
                    </div>
                `});o.addListener("click",()=>{l.open(n.current,o)}),s.current.push(o)}),a.length>0)){const i=new window.google.maps.LatLngBounds;a.forEach(o=>{i.extend({lat:o.coordenadas.lat,lng:o.coordenadas.lng})}),n.current.fitBounds(i)}},[a,e]),e?u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-between items-center mb-4",children:u.jsxs("h2",{className:"text-xl font-bold",children:["Mapa de Empresas (",a.length," geo-localizadas)"]})}),u.jsx("div",{ref:r,className:"h-[600px] w-full rounded-lg border",style:{minHeight:"600px"}}),a.length===0&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:u.jsxs("div",{className:"text-center p-6",children:[u.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"}),u.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Agrega direcciones para verlas en el mapa"})]})})]}):u.jsx("div",{className:"h-[600px] w-full rounded-lg border bg-gray-100 flex items-center justify-center",children:u.jsx("p",{className:"text-gray-600",children:"Cargando Google Maps..."})})},yUe=({elemento:t,className:e="w-5 h-5"})=>{const r=n=>{const s=n.toLowerCase();return s.includes("legal")?"🛡️":s.includes("contrato")?"📄":s.includes("ambiente")?"😊":s.includes("supervisión")?"👥":s.includes("aprendizaje")?"🎓":s.includes("recursos")?"🔧":s.includes("seguridad")?"🔒":s.includes("comunicación")?"💬":"📋"};return u.jsx("div",{className:"flex-shrink-0 text-2xl",children:r(t)})},wUe=async(t,e)=>window.google?new Promise(r=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:t,fields:["geometry","formatted_address"]},(s,a)=>{var i;a===window.google.maps.places.PlacesServiceStatus.OK&&((i=s==null?void 0:s.geometry)!=null&&i.location)?r({lat:s.geometry.location.lat(),lng:s.geometry.location.lng()}):(console.error("Error getting place details:",a),r(null))})}):null,bUe=()=>{const[t,e]=q.useState([]),[r,n]=q.useState([]),[s,a]=q.useState("list"),[i,o]=q.useState(null),[l,c]=q.useState(!0),[d,h]=q.useState(null),p="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:m,error:y}=mUe(p);q.useEffect(()=>{const I=hRe(e),U=gRe(F=>{n(F),c(!1)});return()=>{I(),U()}},[]);const x=async()=>{if(i)try{await pRe(i),a("list"),o(null),h(null)}catch(I){console.error("Error al guardar la empresa:",I),alert("No se pudo guardar la empresa.")}},E=async I=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await mRe(I)},S=(I,U)=>{o(F=>F?{...F,[I]:U}:null)},B=async I=>{var U;if(h(I),(U=I==null?void 0:I.value)!=null&&U.place_id&&m)try{const F=await wUe(I.value.place_id,p);S("direccion",I.label||""),S("coordenadas",F),console.log("Coordenadas obtenidas:",F)}catch(F){console.error("Error al obtener coordenadas:",F),S("direccion",I.label||""),S("coordenadas",null)}else S("direccion",(I==null?void 0:I.label)||"")},D=I=>{o(JSON.parse(JSON.stringify(I))),I.direccion&&h({label:I.direccion,value:{description:I.direccion}}),a("form")};return l?u.jsx("div",{className:"text-center p-8",children:"Cargando..."}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),u.jsxs("div",{className:"flex items-center gap-4",children:[s!=="list"&&u.jsx("button",{onClick:()=>{a("list"),h(null),o(null)},className:"font-semibold hover:text-blue-600",children:"← Volver"}),s==="list"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>a("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),u.jsx("button",{onClick:()=>{o(xUe()),a("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),s==="map"&&u.jsx(vUe,{empresas:t,isLoaded:m}),s==="list"&&u.jsx("div",{className:"space-y-3",children:t.length===0?u.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas"}):t.map(I=>u.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg",children:I.nombre}),u.jsxs("p",{className:"text-sm text-slate-500",children:[I.rut," | ",I.direccion]}),u.jsxs("p",{className:"text-sm text-slate-600",children:["Cupos: ",I.cupos," |",I.coordenadas?" 📍 Geo-localizada":" ⚠️ Sin coordenadas"]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:()=>D(I),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),u.jsx("button",{onClick:()=>E(I.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},I.id))}),s==="form"&&i&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx("input",{value:i.nombre,onChange:I=>S("nombre",I.target.value),placeholder:"Nombre Empresa",className:"input-style",required:!0}),u.jsx("input",{value:i.rut,onChange:I=>S("rut",I.target.value),placeholder:"RUT Empresa",className:"input-style",required:!0}),u.jsx("div",{className:"md:col-span-2",children:y?u.jsxs("div",{className:"p-3 bg-red-100 border border-red-300 rounded-lg",children:[u.jsx("p",{className:"text-red-700",children:"Error al cargar Google Places."}),u.jsx("input",{value:i.direccion,onChange:I=>S("direccion",I.target.value),placeholder:"Ingrese dirección manualmente...",className:"input-style w-full mt-2"})]}):m?u.jsxs("div",{children:[u.jsx(pUe,{apiKey:p,selectProps:{value:d,onChange:B,placeholder:"Buscar dirección en Chile...",className:"w-full"},autocompletionRequest:{componentRestrictions:{country:["cl"]}}}),i.coordenadas&&u.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ Coordenadas: ",i.coordenadas.lat.toFixed(4),", ",i.coordenadas.lng.toFixed(4)]})]}):u.jsx("input",{disabled:!0,className:"input-style w-full opacity-50",placeholder:"Cargando Google Places..."})}),u.jsx("input",{value:i.contacto,onChange:I=>S("contacto",I.target.value),placeholder:"Contacto",className:"input-style"}),u.jsx("input",{type:"number",value:i.cupos,onChange:I=>S("cupos",parseInt(I.target.value)||1),placeholder:"Número de cupos",className:"input-style",min:"1"})]}),i.calificaciones&&i.calificaciones.length>0&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),u.jsx("div",{className:"grid gap-3",children:i.calificaciones.map((I,U)=>u.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors",children:[u.jsx(yUe,{elemento:I.elemento}),u.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:I.elemento}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("select",{value:I.score||"",onChange:F=>{const C=[...i.calificaciones];C[U].score=F.target.value?parseInt(F.target.value):null,S("calificaciones",C)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[u.jsx("option",{value:"",children:"Sin calificar"}),u.jsx("option",{value:"1",children:"1 - Muy deficiente"}),u.jsx("option",{value:"2",children:"2 - Deficiente"}),u.jsx("option",{value:"3",children:"3 - Regular"}),u.jsx("option",{value:"4",children:"4 - Bueno"}),u.jsx("option",{value:"5",children:"5 - Excelente"})]}),I.score&&u.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(F=>u.jsx("span",{className:`text-lg ${F<=I.score?"text-yellow-400":"text-gray-300"}`,children:"⭐"},F))})]})]},U))}),i.calificaciones.some(I=>I.score)&&u.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[u.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Resumen de Evaluación"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-blue-600",children:"Aspectos evaluados:"}),u.jsxs("span",{className:"ml-2 font-semibold",children:[i.calificaciones.filter(I=>I.score).length," / ",i.calificaciones.length]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-blue-600",children:"Promedio:"}),u.jsxs("span",{className:"ml-2 font-semibold",children:[(i.calificaciones.filter(I=>I.score).reduce((I,U)=>I+U.score,0)/i.calificaciones.filter(I=>I.score).length).toFixed(1)," / 5.0"]})]})]})]})]}),u.jsx("button",{onClick:x,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})]})]})},CUe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},EUe=({currentUser:t,onLogout:e,onUserUpdate:r,onChangeProfile:n,canChangeProfile:s,unreadMessagesCount:a,refreshUnreadCount:i})=>{const o=t.profile,l=q.useMemo(()=>{const S=bee[o];return o!==jt.ESTUDIANTE?S:S.filter(B=>{if(B.name==="Asistencia a Empresa"){const D=CUe(t.curso||"");return D.startsWith("3º")||D.startsWith("4º")}return!0})},[o,t.curso]),[c,d]=q.useState(null),[h,p]=q.useState(!1);q.useEffect(()=>{l&&l.length>0?d(l[0]):d(null)},[o,l]);const m=q.useCallback(S=>{d(S),window.innerWidth<768&&p(!1)},[]),y=q.useCallback(S=>{const B=l.find(D=>D.name===S);B&&m(B)},[l,m]),x=()=>u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[u.jsx(iee,{}),u.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),u.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(S=>u.jsxs("button",{onClick:()=>m(S),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(c==null?void 0:c.name)===S.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[S.icon,u.jsx("span",{className:"ml-4",children:S.name})]},S.name))})]}),E=()=>{if(!c)return u.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(c.name==="Calendario Académico")return u.jsx(ire,{profile:o});if(c.name==="Muro de Anuncios")return u.jsx(Are,{currentUser:t});if(c.name==="Mensajería Interna")return u.jsx(pEe,{currentUser:t,refreshUnreadCount:i});if(c.name==="Generador de Actas")return u.jsx(vre,{});if(o===jt.SUBDIRECCION){if(c.name==="Dashboard")return u.jsx(Xee,{currentUser:t});if(c.name==="Administración")return u.jsx(Vpe,{});if(c.name==="Seguimiento Curricular")return u.jsx(iRe,{currentUser:t});if(c.name==="Acompañamiento docente")return u.jsx(oEe,{currentUser:t});if(c.name==="Análisis Taxonómico")return u.jsx(qM,{currentUser:t});if(c.name==="Interdisciplinario")return u.jsx(UU,{});if(c.name==="Registro de inasistencias y reemplazos docentes")return u.jsx(qee,{currentUser:t});if(c.name==="Crear horarios")return u.jsx(Rte,{});if(c.name==="Seguimiento de acciones pedagógicas")return u.jsx(Ote,{});if(c.name==="Inclusión")return u.jsx(xR,{currentUser:t})}if(o===jt.PROFESORADO){if(c.name==="Planificación")return u.jsx(Jte,{currentUser:t});if(c.name==="Mis Acompañamientos")return u.jsx(LDe,{currentUser:t});if(c.name==="Recursos de Aprendizaje")return u.jsx(wDe,{});if(c.name==="Análisis Taxonómico")return u.jsx(qM,{currentUser:t});if(c.name==="Interdisciplinario")return u.jsx(UU,{});if(c.name==="Inclusión")return u.jsx(xR,{currentUser:t});if(c.name==="Actividades Remotas")return u.jsx(ome,{});if(c.name==="Evaluación de Aprendizajes")return u.jsx(yse,{});if(c.name==="Evaluaciones Formativas")return u.jsx(Zme,{currentUser:t})}if(o===jt.COORDINACION_TP){if(c.name==="Seguimiento Dual")return u.jsx(Zpe,{});if(c.name==="Asistencia Dual")return u.jsx(Mme,{});if(c.name==="Pañol")return u.jsx(n4e,{});if(c.name==="Gestión de Empresas")return u.jsx(bUe,{})}if(o===jt.ESTUDIANTE){if(c.name==="Auto-aprendizaje")return u.jsx(pme,{currentUser:t});if(c.name==="Evaluación Formativa")return u.jsx(NDe,{currentUser:t});if(c.name==="Tareas Interdisciplinarias")return u.jsx(DDe,{currentUser:t});if(c.name==="Asistencia a Empresa")return u.jsx(Bme,{currentUser:t})}return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:c.name}),u.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:u.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",u.jsx("span",{className:"font-semibold",children:c.name}),"."]})})]})};return u.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[u.jsx(kee,{currentUser:t,onLogout:e,onNavigate:y,onUserUpdate:r,onChangeProfile:n,canChangeProfile:s,toggleSidebar:()=>p(!h),unreadMessagesCount:a,refreshUnreadCount:i}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h&&u.jsx("div",{onClick:()=>p(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),u.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${h?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:u.jsx(x,{})}),u.jsx("main",{className:"flex-1 overflow-y-auto",children:u.jsx("div",{className:"p-6 md:p-8",children:E()})})]})]})},_Ue=({onSelectProfile:t,isAdminView:e=!1})=>u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsx("div",{className:"mb-4 flex justify-center items-center",children:u.jsx(g4,{})}),u.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:wee.map(r=>u.jsxs("button",{onClick:()=>t(r.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[u.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:r.icon}),u.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:r.label})]},r.id))}),u.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),SUe=()=>{const[t,e]=q.useState(null),[r,n]=q.useState(null),[s,a]=q.useState(!0),[i,o]=q.useState(null),[l,c]=q.useState(!1),[d,h]=q.useState(null);q.useEffect(()=>{const B=mP(Q1,async D=>{if(e(D),D)try{const I=await ij(D.email);I?(n(I),I.profile===jt.SUBDIRECCION&&c(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await C_())}catch{o("Error al conectar con la base de datos."),await C_()}else n(null),h(null),c(!1),o(null);a(!1)});return()=>B()},[]);const p=async(B,D)=>{if(o(null),!B.trim()||!D.trim()){o("Por favor ingrese email y contraseña");return}try{await nee(B.trim(),D)}catch(I){switch(I.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},m=async B=>{try{await see(B)}catch(D){console.error("Error al enviar email de recuperación:",D)}},y=B=>{h(B),c(!1)},x=()=>{c(!0),h(null)},E=async()=>{try{await C_()}catch(B){console.error("Error al cerrar sesión:",B)}};if(s)return u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mb-4 flex justify-center items-center",children:u.jsx(g4,{})}),u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!t||!r)return u.jsx(See,{onLoginAttempt:p,onForgotPasswordRequest:m,error:i});if(l&&r.profile===jt.SUBDIRECCION)return u.jsx(_Ue,{onSelectProfile:y,isAdminView:!0});const S=d||r.profile;return u.jsx(EUe,{currentUser:{...r,profile:S},onLogout:E,onChangeProfile:r.profile===jt.SUBDIRECCION?x:void 0,canChangeProfile:r.profile===jt.SUBDIRECCION})},FG=document.getElementById("root");if(!FG)throw new Error("Could not find root element to mount to");const TUe=Gq.createRoot(FG);TUe.render(u.jsx(dt.StrictMode,{children:u.jsx(SUe,{})}));export{Xn as _,NUe as c,Sb as g};
